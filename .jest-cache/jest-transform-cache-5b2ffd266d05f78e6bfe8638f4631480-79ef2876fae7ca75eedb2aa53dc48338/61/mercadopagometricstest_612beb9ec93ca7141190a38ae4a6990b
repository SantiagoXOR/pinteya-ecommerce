af825df19ab33036aa68ac5852723403
// ===================================
// PINTEYA E-COMMERCE - MERCADOPAGO METRICS API TESTS
// ===================================
"use strict";
// Mock de Clerk
jest.mock('@clerk/nextjs/server', ()=>({
        auth: jest.fn(()=>({
                userId: 'test-user-id',
                sessionId: 'test-session-id'
            }))
    }));
// Mock del metrics collector
jest.mock('@/lib/metrics', ()=>({
        metricsCollector: {
            getMercadoPagoMetrics: jest.fn(()=>Promise.resolve({
                    payment_creation: {
                        requests: {
                            total: 100,
                            success: 95,
                            error: 5,
                            rate_limited: 2
                        },
                        response_times: {
                            avg: 250,
                            min: 100,
                            max: 500,
                            p95: 400,
                            p99: 450
                        },
                        retry_stats: {
                            total_retries: 3,
                            successful_retries: 2,
                            failed_retries: 1
                        }
                    },
                    payment_queries: {
                        requests: {
                            total: 50,
                            success: 48,
                            error: 2,
                            rate_limited: 1
                        },
                        response_times: {
                            avg: 150,
                            min: 80,
                            max: 300,
                            p95: 250,
                            p99: 280
                        },
                        retry_stats: {
                            total_retries: 1,
                            successful_retries: 1,
                            failed_retries: 0
                        }
                    },
                    webhook_processing: {
                        requests: {
                            total: 200,
                            success: 195,
                            error: 5,
                            rate_limited: 0
                        },
                        response_times: {
                            avg: 100,
                            min: 50,
                            max: 200,
                            p95: 180,
                            p99: 190
                        },
                        retry_stats: {
                            total_retries: 2,
                            successful_retries: 2,
                            failed_retries: 0
                        }
                    }
                }))
        }
    }));
// Mock de Redis
jest.mock('@/lib/redis', ()=>({
        isRedisAvailable: jest.fn(()=>Promise.resolve(true))
    }));
// Mock del logger
jest.mock('@/lib/logger', ()=>({
        logger: {
            info: jest.fn(),
            error: jest.fn(),
            warn: jest.fn()
        },
        LogCategory: {
            API: 'api'
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../../app/api/admin/mercadopago/metrics/route");
describe('/api/admin/mercadopago/metrics', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('GET /api/admin/mercadopago/metrics', ()=>{
        it('should return metrics successfully for authenticated user', async ()=>{
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toBeDefined();
            expect(data.data.realTimeMetrics).toBeDefined();
            expect(data.data.endpointMetrics).toBeDefined();
            expect(data.data.systemHealth).toBeDefined();
            expect(data.data.alerts).toBeDefined();
        });
        it('should calculate real-time metrics correctly', async ()=>{
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            const realTimeMetrics = data.data.realTimeMetrics;
            // Total requests = 100 + 50 + 200 = 350
            expect(realTimeMetrics.totalRequests).toBe(350);
            // Success rate = (95 + 48 + 195) / 350 = 338/350 = 96.57%
            expect(realTimeMetrics.successRate).toBeCloseTo(96.57, 1);
            // Error rate = (5 + 2 + 5) / 350 = 12/350 = 3.43%
            expect(realTimeMetrics.errorRate).toBeCloseTo(3.43, 1);
            // Rate limit hits = 2 + 1 + 0 = 3
            expect(realTimeMetrics.rateLimitHits).toBe(3);
            // Retry attempts = 3 + 1 + 2 = 6
            expect(realTimeMetrics.retryAttempts).toBe(6);
        });
        it('should include endpoint-specific metrics', async ()=>{
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            const endpointMetrics = data.data.endpointMetrics;
            // Create Preference metrics
            expect(endpointMetrics.createPreference.requests).toBe(100);
            expect(endpointMetrics.createPreference.successRate).toBe(95);
            expect(endpointMetrics.createPreference.averageResponseTime).toBe(250);
            expect(endpointMetrics.createPreference.errorCount).toBe(5);
            // Webhook metrics
            expect(endpointMetrics.webhook.requests).toBe(200);
            expect(endpointMetrics.webhook.successRate).toBe(97.5);
            expect(endpointMetrics.webhook.averageResponseTime).toBe(100);
            expect(endpointMetrics.webhook.errorCount).toBe(5);
            // Payment Query metrics
            expect(endpointMetrics.paymentQuery.requests).toBe(50);
            expect(endpointMetrics.paymentQuery.successRate).toBe(96);
            expect(endpointMetrics.paymentQuery.averageResponseTime).toBe(150);
            expect(endpointMetrics.paymentQuery.errorCount).toBe(2);
        });
        it('should include system health information', async ()=>{
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            const systemHealth = data.data.systemHealth;
            expect(systemHealth.redisStatus).toBe('connected');
            expect(systemHealth.lastUpdate).toBeDefined();
            expect(systemHealth.uptime).toBeGreaterThan(0);
        });
        it('should generate alerts for high error rates', async ()=>{
            // Mock high error rate scenario
            const { metricsCollector } = require('@/lib/metrics');
            metricsCollector.getMercadoPagoMetrics.mockResolvedValueOnce({
                payment_creation: {
                    requests: {
                        total: 100,
                        success: 80,
                        error: 20,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 250
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                },
                payment_queries: {
                    requests: {
                        total: 0,
                        success: 0,
                        error: 0,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 0
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                },
                webhook_processing: {
                    requests: {
                        total: 0,
                        success: 0,
                        error: 0,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 0
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                }
            });
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            const alerts = data.data.alerts;
            // Should have an error alert for high error rate (20%)
            expect(alerts).toHaveLength(1);
            expect(alerts[0].type).toBe('error');
            expect(alerts[0].message).toContain('Tasa de error alta');
        });
        it('should generate alerts for high response times', async ()=>{
            // Mock high response time scenario
            const { metricsCollector } = require('@/lib/metrics');
            metricsCollector.getMercadoPagoMetrics.mockResolvedValueOnce({
                payment_creation: {
                    requests: {
                        total: 100,
                        success: 100,
                        error: 0,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 5000
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                },
                payment_queries: {
                    requests: {
                        total: 0,
                        success: 0,
                        error: 0,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 0
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                },
                webhook_processing: {
                    requests: {
                        total: 0,
                        success: 0,
                        error: 0,
                        rate_limited: 0
                    },
                    response_times: {
                        avg: 0
                    },
                    retry_stats: {
                        total_retries: 0,
                        successful_retries: 0,
                        failed_retries: 0
                    }
                }
            });
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            const alerts = data.data.alerts;
            // Should have a warning alert for high response time
            expect(alerts).toHaveLength(1);
            expect(alerts[0].type).toBe('warning');
            expect(alerts[0].message).toContain('Tiempo de respuesta alto');
        });
        it('should return 401 for unauthenticated requests', async ()=>{
            // Mock unauthenticated user
            const { auth } = require('@clerk/nextjs/server');
            auth.mockReturnValueOnce({
                userId: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error).toBe('No autorizado');
        });
    });
    describe('POST /api/admin/mercadopago/metrics', ()=>{
        it('should reset metrics successfully for authenticated user', async ()=>{
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics', {
                method: 'POST'
            });
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.message).toBe('MÃ©tricas reiniciadas correctamente');
        });
        it('should return 401 for unauthenticated requests', async ()=>{
            // Mock unauthenticated user
            const { auth } = require('@clerk/nextjs/server');
            auth.mockReturnValueOnce({
                userId: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/admin/mercadopago/metrics', {
                method: 'POST'
            });
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error).toBe('No autorizado');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxhcGlcXGFkbWluXFxtZXJjYWRvcGFnby1tZXRyaWNzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIE1FUkNBRE9QQUdPIE1FVFJJQ1MgQVBJIFRFU1RTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEdFVCwgUE9TVCB9IGZyb20gJ0AvYXBwL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzL3JvdXRlJztcblxuLy8gTW9jayBkZSBDbGVya1xuamVzdC5tb2NrKCdAY2xlcmsvbmV4dGpzL3NlcnZlcicsICgpID0+ICh7XG4gIGF1dGg6IGplc3QuZm4oKCkgPT4gKHtcbiAgICB1c2VySWQ6ICd0ZXN0LXVzZXItaWQnLFxuICAgIHNlc3Npb25JZDogJ3Rlc3Qtc2Vzc2lvbi1pZCcsXG4gIH0pKSxcbn0pKTtcblxuLy8gTW9jayBkZWwgbWV0cmljcyBjb2xsZWN0b3Jcbmplc3QubW9jaygnQC9saWIvbWV0cmljcycsICgpID0+ICh7XG4gIG1ldHJpY3NDb2xsZWN0b3I6IHtcbiAgICBnZXRNZXJjYWRvUGFnb01ldHJpY3M6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgIHBheW1lbnRfY3JlYXRpb246IHtcbiAgICAgICAgcmVxdWVzdHM6IHsgdG90YWw6IDEwMCwgc3VjY2VzczogOTUsIGVycm9yOiA1LCByYXRlX2xpbWl0ZWQ6IDIgfSxcbiAgICAgICAgcmVzcG9uc2VfdGltZXM6IHsgYXZnOiAyNTAsIG1pbjogMTAwLCBtYXg6IDUwMCwgcDk1OiA0MDAsIHA5OTogNDUwIH0sXG4gICAgICAgIHJldHJ5X3N0YXRzOiB7IHRvdGFsX3JldHJpZXM6IDMsIHN1Y2Nlc3NmdWxfcmV0cmllczogMiwgZmFpbGVkX3JldHJpZXM6IDEgfSxcbiAgICAgIH0sXG4gICAgICBwYXltZW50X3F1ZXJpZXM6IHtcbiAgICAgICAgcmVxdWVzdHM6IHsgdG90YWw6IDUwLCBzdWNjZXNzOiA0OCwgZXJyb3I6IDIsIHJhdGVfbGltaXRlZDogMSB9LFxuICAgICAgICByZXNwb25zZV90aW1lczogeyBhdmc6IDE1MCwgbWluOiA4MCwgbWF4OiAzMDAsIHA5NTogMjUwLCBwOTk6IDI4MCB9LFxuICAgICAgICByZXRyeV9zdGF0czogeyB0b3RhbF9yZXRyaWVzOiAxLCBzdWNjZXNzZnVsX3JldHJpZXM6IDEsIGZhaWxlZF9yZXRyaWVzOiAwIH0sXG4gICAgICB9LFxuICAgICAgd2ViaG9va19wcm9jZXNzaW5nOiB7XG4gICAgICAgIHJlcXVlc3RzOiB7IHRvdGFsOiAyMDAsIHN1Y2Nlc3M6IDE5NSwgZXJyb3I6IDUsIHJhdGVfbGltaXRlZDogMCB9LFxuICAgICAgICByZXNwb25zZV90aW1lczogeyBhdmc6IDEwMCwgbWluOiA1MCwgbWF4OiAyMDAsIHA5NTogMTgwLCBwOTk6IDE5MCB9LFxuICAgICAgICByZXRyeV9zdGF0czogeyB0b3RhbF9yZXRyaWVzOiAyLCBzdWNjZXNzZnVsX3JldHJpZXM6IDIsIGZhaWxlZF9yZXRyaWVzOiAwIH0sXG4gICAgICB9LFxuICAgIH0pKSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBkZSBSZWRpc1xuamVzdC5tb2NrKCdAL2xpYi9yZWRpcycsICgpID0+ICh7XG4gIGlzUmVkaXNBdmFpbGFibGU6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKSxcbn0pKTtcblxuLy8gTW9jayBkZWwgbG9nZ2VyXG5qZXN0Lm1vY2soJ0AvbGliL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZ2dlcjoge1xuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpLFxuICAgIHdhcm46IGplc3QuZm4oKSxcbiAgfSxcbiAgTG9nQ2F0ZWdvcnk6IHtcbiAgICBBUEk6ICdhcGknLFxuICB9LFxufSkpO1xuXG5kZXNjcmliZSgnL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL2FkbWluL21lcmNhZG9wYWdvL21ldHJpY3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbWV0cmljcyBzdWNjZXNzZnVsbHkgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vbWVyY2Fkb3BhZ28vbWV0cmljcycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5yZWFsVGltZU1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmVuZHBvaW50TWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEuc3lzdGVtSGVhbHRoKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5hbGVydHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSByZWFsLXRpbWUgbWV0cmljcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL21lcmNhZG9wYWdvL21ldHJpY3MnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBjb25zdCByZWFsVGltZU1ldHJpY3MgPSBkYXRhLmRhdGEucmVhbFRpbWVNZXRyaWNzO1xuICAgICAgXG4gICAgICAvLyBUb3RhbCByZXF1ZXN0cyA9IDEwMCArIDUwICsgMjAwID0gMzUwXG4gICAgICBleHBlY3QocmVhbFRpbWVNZXRyaWNzLnRvdGFsUmVxdWVzdHMpLnRvQmUoMzUwKTtcbiAgICAgIFxuICAgICAgLy8gU3VjY2VzcyByYXRlID0gKDk1ICsgNDggKyAxOTUpIC8gMzUwID0gMzM4LzM1MCA9IDk2LjU3JVxuICAgICAgZXhwZWN0KHJlYWxUaW1lTWV0cmljcy5zdWNjZXNzUmF0ZSkudG9CZUNsb3NlVG8oOTYuNTcsIDEpO1xuICAgICAgXG4gICAgICAvLyBFcnJvciByYXRlID0gKDUgKyAyICsgNSkgLyAzNTAgPSAxMi8zNTAgPSAzLjQzJVxuICAgICAgZXhwZWN0KHJlYWxUaW1lTWV0cmljcy5lcnJvclJhdGUpLnRvQmVDbG9zZVRvKDMuNDMsIDEpO1xuICAgICAgXG4gICAgICAvLyBSYXRlIGxpbWl0IGhpdHMgPSAyICsgMSArIDAgPSAzXG4gICAgICBleHBlY3QocmVhbFRpbWVNZXRyaWNzLnJhdGVMaW1pdEhpdHMpLnRvQmUoMyk7XG4gICAgICBcbiAgICAgIC8vIFJldHJ5IGF0dGVtcHRzID0gMyArIDEgKyAyID0gNlxuICAgICAgZXhwZWN0KHJlYWxUaW1lTWV0cmljcy5yZXRyeUF0dGVtcHRzKS50b0JlKDYpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGVuZHBvaW50LXNwZWNpZmljIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL21lcmNhZG9wYWdvL21ldHJpY3MnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBjb25zdCBlbmRwb2ludE1ldHJpY3MgPSBkYXRhLmRhdGEuZW5kcG9pbnRNZXRyaWNzO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgUHJlZmVyZW5jZSBtZXRyaWNzXG4gICAgICBleHBlY3QoZW5kcG9pbnRNZXRyaWNzLmNyZWF0ZVByZWZlcmVuY2UucmVxdWVzdHMpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChlbmRwb2ludE1ldHJpY3MuY3JlYXRlUHJlZmVyZW5jZS5zdWNjZXNzUmF0ZSkudG9CZSg5NSk7XG4gICAgICBleHBlY3QoZW5kcG9pbnRNZXRyaWNzLmNyZWF0ZVByZWZlcmVuY2UuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZSgyNTApO1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy5jcmVhdGVQcmVmZXJlbmNlLmVycm9yQ291bnQpLnRvQmUoNSk7XG4gICAgICBcbiAgICAgIC8vIFdlYmhvb2sgbWV0cmljc1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy53ZWJob29rLnJlcXVlc3RzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZW5kcG9pbnRNZXRyaWNzLndlYmhvb2suc3VjY2Vzc1JhdGUpLnRvQmUoOTcuNSk7XG4gICAgICBleHBlY3QoZW5kcG9pbnRNZXRyaWNzLndlYmhvb2suYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZSgxMDApO1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy53ZWJob29rLmVycm9yQ291bnQpLnRvQmUoNSk7XG4gICAgICBcbiAgICAgIC8vIFBheW1lbnQgUXVlcnkgbWV0cmljc1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy5wYXltZW50UXVlcnkucmVxdWVzdHMpLnRvQmUoNTApO1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy5wYXltZW50UXVlcnkuc3VjY2Vzc1JhdGUpLnRvQmUoOTYpO1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy5wYXltZW50UXVlcnkuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZSgxNTApO1xuICAgICAgZXhwZWN0KGVuZHBvaW50TWV0cmljcy5wYXltZW50UXVlcnkuZXJyb3JDb3VudCkudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBzeXN0ZW0gaGVhbHRoIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgY29uc3Qgc3lzdGVtSGVhbHRoID0gZGF0YS5kYXRhLnN5c3RlbUhlYWx0aDtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5yZWRpc1N0YXR1cykudG9CZSgnY29ubmVjdGVkJyk7XG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLmxhc3RVcGRhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLnVwdGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBhbGVydHMgZm9yIGhpZ2ggZXJyb3IgcmF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGhpZ2ggZXJyb3IgcmF0ZSBzY2VuYXJpb1xuICAgICAgY29uc3QgeyBtZXRyaWNzQ29sbGVjdG9yIH0gPSByZXF1aXJlKCdAL2xpYi9tZXRyaWNzJyk7XG4gICAgICBtZXRyaWNzQ29sbGVjdG9yLmdldE1lcmNhZG9QYWdvTWV0cmljcy5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBwYXltZW50X2NyZWF0aW9uOiB7XG4gICAgICAgICAgcmVxdWVzdHM6IHsgdG90YWw6IDEwMCwgc3VjY2VzczogODAsIGVycm9yOiAyMCwgcmF0ZV9saW1pdGVkOiAwIH0sXG4gICAgICAgICAgcmVzcG9uc2VfdGltZXM6IHsgYXZnOiAyNTAgfSxcbiAgICAgICAgICByZXRyeV9zdGF0czogeyB0b3RhbF9yZXRyaWVzOiAwLCBzdWNjZXNzZnVsX3JldHJpZXM6IDAsIGZhaWxlZF9yZXRyaWVzOiAwIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHBheW1lbnRfcXVlcmllczoge1xuICAgICAgICAgIHJlcXVlc3RzOiB7IHRvdGFsOiAwLCBzdWNjZXNzOiAwLCBlcnJvcjogMCwgcmF0ZV9saW1pdGVkOiAwIH0sXG4gICAgICAgICAgcmVzcG9uc2VfdGltZXM6IHsgYXZnOiAwIH0sXG4gICAgICAgICAgcmV0cnlfc3RhdHM6IHsgdG90YWxfcmV0cmllczogMCwgc3VjY2Vzc2Z1bF9yZXRyaWVzOiAwLCBmYWlsZWRfcmV0cmllczogMCB9LFxuICAgICAgICB9LFxuICAgICAgICB3ZWJob29rX3Byb2Nlc3Npbmc6IHtcbiAgICAgICAgICByZXF1ZXN0czogeyB0b3RhbDogMCwgc3VjY2VzczogMCwgZXJyb3I6IDAsIHJhdGVfbGltaXRlZDogMCB9LFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWVzOiB7IGF2ZzogMCB9LFxuICAgICAgICAgIHJldHJ5X3N0YXRzOiB7IHRvdGFsX3JldHJpZXM6IDAsIHN1Y2Nlc3NmdWxfcmV0cmllczogMCwgZmFpbGVkX3JldHJpZXM6IDAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL21lcmNhZG9wYWdvL21ldHJpY3MnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBjb25zdCBhbGVydHMgPSBkYXRhLmRhdGEuYWxlcnRzO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGF2ZSBhbiBlcnJvciBhbGVydCBmb3IgaGlnaCBlcnJvciByYXRlICgyMCUpXG4gICAgICBleHBlY3QoYWxlcnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYWxlcnRzWzBdLnR5cGUpLnRvQmUoJ2Vycm9yJyk7XG4gICAgICBleHBlY3QoYWxlcnRzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignVGFzYSBkZSBlcnJvciBhbHRhJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGFsZXJ0cyBmb3IgaGlnaCByZXNwb25zZSB0aW1lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgaGlnaCByZXNwb25zZSB0aW1lIHNjZW5hcmlvXG4gICAgICBjb25zdCB7IG1ldHJpY3NDb2xsZWN0b3IgfSA9IHJlcXVpcmUoJ0AvbGliL21ldHJpY3MnKTtcbiAgICAgIG1ldHJpY3NDb2xsZWN0b3IuZ2V0TWVyY2Fkb1BhZ29NZXRyaWNzLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHBheW1lbnRfY3JlYXRpb246IHtcbiAgICAgICAgICByZXF1ZXN0czogeyB0b3RhbDogMTAwLCBzdWNjZXNzOiAxMDAsIGVycm9yOiAwLCByYXRlX2xpbWl0ZWQ6IDAgfSxcbiAgICAgICAgICByZXNwb25zZV90aW1lczogeyBhdmc6IDUwMDAgfSwgLy8gNSBzZWNvbmRzXG4gICAgICAgICAgcmV0cnlfc3RhdHM6IHsgdG90YWxfcmV0cmllczogMCwgc3VjY2Vzc2Z1bF9yZXRyaWVzOiAwLCBmYWlsZWRfcmV0cmllczogMCB9LFxuICAgICAgICB9LFxuICAgICAgICBwYXltZW50X3F1ZXJpZXM6IHtcbiAgICAgICAgICByZXF1ZXN0czogeyB0b3RhbDogMCwgc3VjY2VzczogMCwgZXJyb3I6IDAsIHJhdGVfbGltaXRlZDogMCB9LFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWVzOiB7IGF2ZzogMCB9LFxuICAgICAgICAgIHJldHJ5X3N0YXRzOiB7IHRvdGFsX3JldHJpZXM6IDAsIHN1Y2Nlc3NmdWxfcmV0cmllczogMCwgZmFpbGVkX3JldHJpZXM6IDAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgd2ViaG9va19wcm9jZXNzaW5nOiB7XG4gICAgICAgICAgcmVxdWVzdHM6IHsgdG90YWw6IDAsIHN1Y2Nlc3M6IDAsIGVycm9yOiAwLCByYXRlX2xpbWl0ZWQ6IDAgfSxcbiAgICAgICAgICByZXNwb25zZV90aW1lczogeyBhdmc6IDAgfSxcbiAgICAgICAgICByZXRyeV9zdGF0czogeyB0b3RhbF9yZXRyaWVzOiAwLCBzdWNjZXNzZnVsX3JldHJpZXM6IDAsIGZhaWxlZF9yZXRyaWVzOiAwIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgY29uc3QgYWxlcnRzID0gZGF0YS5kYXRhLmFsZXJ0cztcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgYSB3YXJuaW5nIGFsZXJ0IGZvciBoaWdoIHJlc3BvbnNlIHRpbWVcbiAgICAgIGV4cGVjdChhbGVydHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChhbGVydHNbMF0udHlwZSkudG9CZSgnd2FybmluZycpO1xuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ1RpZW1wbyBkZSByZXNwdWVzdGEgYWx0bycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIGZvciB1bmF1dGhlbnRpY2F0ZWQgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aGVudGljYXRlZCB1c2VyXG4gICAgICBjb25zdCB7IGF1dGggfSA9IHJlcXVpcmUoJ0BjbGVyay9uZXh0anMvc2VydmVyJyk7XG4gICAgICBhdXRoLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyB1c2VySWQ6IG51bGwgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vbWVyY2Fkb3BhZ28vbWV0cmljcycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IpLnRvQmUoJ05vIGF1dG9yaXphZG8nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVzZXQgbWV0cmljcyBzdWNjZXNzZnVsbHkgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vbWVyY2Fkb3BhZ28vbWV0cmljcycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLm1lc3NhZ2UpLnRvQmUoJ03DqXRyaWNhcyByZWluaWNpYWRhcyBjb3JyZWN0YW1lbnRlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgZm9yIHVuYXV0aGVudGljYXRlZCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdW5hdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgIGNvbnN0IHsgYXV0aCB9ID0gcmVxdWlyZSgnQGNsZXJrL25leHRqcy9zZXJ2ZXInKTtcbiAgICAgIGF1dGgubW9ja1JldHVyblZhbHVlT25jZSh7IHVzZXJJZDogbnVsbCB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9tZXJjYWRvcGFnby9tZXRyaWNzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0JlKCdObyBhdXRvcml6YWRvJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJhdXRoIiwiZm4iLCJ1c2VySWQiLCJzZXNzaW9uSWQiLCJtZXRyaWNzQ29sbGVjdG9yIiwiZ2V0TWVyY2Fkb1BhZ29NZXRyaWNzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwYXltZW50X2NyZWF0aW9uIiwicmVxdWVzdHMiLCJ0b3RhbCIsInN1Y2Nlc3MiLCJlcnJvciIsInJhdGVfbGltaXRlZCIsInJlc3BvbnNlX3RpbWVzIiwiYXZnIiwibWluIiwibWF4IiwicDk1IiwicDk5IiwicmV0cnlfc3RhdHMiLCJ0b3RhbF9yZXRyaWVzIiwic3VjY2Vzc2Z1bF9yZXRyaWVzIiwiZmFpbGVkX3JldHJpZXMiLCJwYXltZW50X3F1ZXJpZXMiLCJ3ZWJob29rX3Byb2Nlc3NpbmciLCJpc1JlZGlzQXZhaWxhYmxlIiwibG9nZ2VyIiwiaW5mbyIsIndhcm4iLCJMb2dDYXRlZ29yeSIsIkFQSSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlcXVlc3QiLCJOZXh0UmVxdWVzdCIsInJlc3BvbnNlIiwiR0VUIiwiZGF0YSIsImpzb24iLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwidG9CZURlZmluZWQiLCJyZWFsVGltZU1ldHJpY3MiLCJlbmRwb2ludE1ldHJpY3MiLCJzeXN0ZW1IZWFsdGgiLCJhbGVydHMiLCJ0b3RhbFJlcXVlc3RzIiwic3VjY2Vzc1JhdGUiLCJ0b0JlQ2xvc2VUbyIsImVycm9yUmF0ZSIsInJhdGVMaW1pdEhpdHMiLCJyZXRyeUF0dGVtcHRzIiwiY3JlYXRlUHJlZmVyZW5jZSIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJlcnJvckNvdW50Iiwid2ViaG9vayIsInBheW1lbnRRdWVyeSIsInJlZGlzU3RhdHVzIiwibGFzdFVwZGF0ZSIsInVwdGltZSIsInRvQmVHcmVhdGVyVGhhbiIsInJlcXVpcmUiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJ0b0hhdmVMZW5ndGgiLCJ0eXBlIiwibWVzc2FnZSIsInRvQ29udGFpbiIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJtZXRob2QiLCJQT1NUIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELHNDQUFzQzs7QUFLdEMsZ0JBQWdCO0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMsd0JBQXdCLElBQU8sQ0FBQTtRQUN2Q0MsTUFBTUYsS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDbkJDLFFBQVE7Z0JBQ1JDLFdBQVc7WUFDYixDQUFBO0lBQ0YsQ0FBQTtBQUVBLDZCQUE2QjtBQUM3QkwsS0FBS0MsSUFBSSxDQUFDLGlCQUFpQixJQUFPLENBQUE7UUFDaENLLGtCQUFrQjtZQUNoQkMsdUJBQXVCUCxLQUFLRyxFQUFFLENBQUMsSUFBTUssUUFBUUMsT0FBTyxDQUFDO29CQUNuREMsa0JBQWtCO3dCQUNoQkMsVUFBVTs0QkFBRUMsT0FBTzs0QkFBS0MsU0FBUzs0QkFBSUMsT0FBTzs0QkFBR0MsY0FBYzt3QkFBRTt3QkFDL0RDLGdCQUFnQjs0QkFBRUMsS0FBSzs0QkFBS0MsS0FBSzs0QkFBS0MsS0FBSzs0QkFBS0MsS0FBSzs0QkFBS0MsS0FBSzt3QkFBSTt3QkFDbkVDLGFBQWE7NEJBQUVDLGVBQWU7NEJBQUdDLG9CQUFvQjs0QkFBR0MsZ0JBQWdCO3dCQUFFO29CQUM1RTtvQkFDQUMsaUJBQWlCO3dCQUNmZixVQUFVOzRCQUFFQyxPQUFPOzRCQUFJQyxTQUFTOzRCQUFJQyxPQUFPOzRCQUFHQyxjQUFjO3dCQUFFO3dCQUM5REMsZ0JBQWdCOzRCQUFFQyxLQUFLOzRCQUFLQyxLQUFLOzRCQUFJQyxLQUFLOzRCQUFLQyxLQUFLOzRCQUFLQyxLQUFLO3dCQUFJO3dCQUNsRUMsYUFBYTs0QkFBRUMsZUFBZTs0QkFBR0Msb0JBQW9COzRCQUFHQyxnQkFBZ0I7d0JBQUU7b0JBQzVFO29CQUNB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