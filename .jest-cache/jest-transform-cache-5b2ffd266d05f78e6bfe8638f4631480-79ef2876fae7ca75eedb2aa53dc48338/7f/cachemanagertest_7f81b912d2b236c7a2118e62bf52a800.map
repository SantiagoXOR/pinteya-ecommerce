{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\lib\\cache-manager.test.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - CACHE MANAGER TESTS\r\n// ===================================\r\n\r\nimport { CacheManager, cacheManager, CACHE_CONFIGS, CacheUtils } from '@/lib/cache-manager';\r\n\r\n// Mock Redis\r\njest.mock('@/lib/redis', () => ({\r\n  redisCache: {\r\n    get: jest.fn(),\r\n    set: jest.fn(),\r\n    del: jest.fn(),\r\n  },\r\n}));\r\n\r\n// Mock logger\r\njest.mock('@/lib/logger', () => ({\r\n  logger: {\r\n    debug: jest.fn(),\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    error: jest.fn(),\r\n  },\r\n  LogLevel: {\r\n    DEBUG: 'debug',\r\n    INFO: 'info',\r\n    WARN: 'warn',\r\n    ERROR: 'error',\r\n  },\r\n  LogCategory: {\r\n    CACHE: 'cache',\r\n    SYSTEM: 'system',\r\n  },\r\n}));\r\n\r\ndescribe('CacheManager', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('Singleton Pattern', () => {\r\n    it('should return the same instance', () => {\r\n      const instance1 = CacheManager.getInstance();\r\n      const instance2 = CacheManager.getInstance();\r\n      \r\n      expect(instance1).toBe(instance2);\r\n      expect(instance1).toBe(cacheManager);\r\n    });\r\n  });\r\n\r\n  describe('get', () => {\r\n    it('should return cached value when available', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const testData = { id: 1, name: 'Test' };\r\n      \r\n      redisCache.get.mockResolvedValue(JSON.stringify(testData));\r\n\r\n      const result = await cacheManager.get('test-key', CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toEqual(testData);\r\n      expect(redisCache.get).toHaveBeenCalledWith('cache:product:test-key');\r\n    });\r\n\r\n    it('should return null when cache miss', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n\r\n      const result = await cacheManager.get('missing-key', CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toBeNull();\r\n    });\r\n\r\n    it('should handle errors gracefully', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const { logger } = require('@/lib/logger');\r\n      \r\n      redisCache.get.mockRejectedValue(new Error('Redis error'));\r\n\r\n      const result = await cacheManager.get('error-key', CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toBeNull();\r\n      expect(logger.error).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('set', () => {\r\n    it('should store value in cache', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const testData = { id: 1, name: 'Test' };\r\n      \r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      const result = await cacheManager.set('test-key', testData, CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toBe(true);\r\n      expect(redisCache.set).toHaveBeenCalledWith(\r\n        'cache:product:test-key',\r\n        JSON.stringify(testData),\r\n        CACHE_CONFIGS.PRODUCT_DATA.ttl\r\n      );\r\n    });\r\n\r\n    it('should handle serialization errors', async () => {\r\n      const { logger } = require('@/lib/logger');\r\n      \r\n      // Crear objeto circular que no se puede serializar\r\n      const circularObj: any = { name: 'test' };\r\n      circularObj.self = circularObj;\r\n\r\n      await expect(\r\n        cacheManager.set('circular-key', circularObj, CACHE_CONFIGS.PRODUCT_DATA)\r\n      ).resolves.toBe(false);\r\n\r\n      expect(logger.error).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('delete', () => {\r\n    it('should delete value from cache', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      \r\n      redisCache.del.mockResolvedValue(true);\r\n\r\n      const result = await cacheManager.delete('test-key', CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toBe(true);\r\n      expect(redisCache.del).toHaveBeenCalledWith('cache:product:test-key');\r\n    });\r\n  });\r\n\r\n  describe('getOrSet', () => {\r\n    it('should return cached value if available', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const cachedData = { id: 1, name: 'Cached' };\r\n      const fetcherFn = jest.fn().mockResolvedValue({ id: 1, name: 'Fresh' });\r\n      \r\n      redisCache.get.mockResolvedValue(JSON.stringify(cachedData));\r\n\r\n      const result = await cacheManager.getOrSet('test-key', fetcherFn, CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toEqual(cachedData);\r\n      expect(fetcherFn).not.toHaveBeenCalled();\r\n    });\r\n\r\n    it('should fetch and cache value if not in cache', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const freshData = { id: 1, name: 'Fresh' };\r\n      const fetcherFn = jest.fn().mockResolvedValue(freshData);\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      const result = await cacheManager.getOrSet('test-key', fetcherFn, CACHE_CONFIGS.PRODUCT_DATA);\r\n\r\n      expect(result).toEqual(freshData);\r\n      expect(fetcherFn).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should propagate fetcher errors', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const fetcherError = new Error('Fetcher failed');\r\n      const fetcherFn = jest.fn().mockRejectedValue(fetcherError);\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n\r\n      await expect(\r\n        cacheManager.getOrSet('test-key', fetcherFn, CACHE_CONFIGS.PRODUCT_DATA)\r\n      ).rejects.toThrow('Fetcher failed');\r\n    });\r\n  });\r\n\r\n  describe('Cache Configurations', () => {\r\n    it('should have MercadoPago response config', () => {\r\n      const config = CACHE_CONFIGS.MERCADOPAGO_RESPONSE;\r\n      \r\n      expect(config.ttl).toBe(300);\r\n      expect(config.prefix).toBe('mp_response');\r\n      expect(config.compress).toBe(true);\r\n      expect(config.serialize).toBe(true);\r\n    });\r\n\r\n    it('should have payment info config', () => {\r\n      const config = CACHE_CONFIGS.PAYMENT_INFO;\r\n      \r\n      expect(config.ttl).toBe(1800);\r\n      expect(config.prefix).toBe('payment_info');\r\n      expect(config.serialize).toBe(true);\r\n    });\r\n\r\n    it('should have product data config', () => {\r\n      const config = CACHE_CONFIGS.PRODUCT_DATA;\r\n      \r\n      expect(config.ttl).toBe(900);\r\n      expect(config.prefix).toBe('product');\r\n      expect(config.compress).toBe(true);\r\n      expect(config.serialize).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('Compression', () => {\r\n    it('should compress large data when enabled', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const largeData = 'x'.repeat(2000); // String > 1000 chars\r\n      \r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      await cacheManager.set('large-key', largeData, {\r\n        ...CACHE_CONFIGS.PRODUCT_DATA,\r\n        compress: true,\r\n      });\r\n\r\n      const setCall = redisCache.set.mock.calls[0];\r\n      expect(setCall[1]).toContain('COMPRESSED:');\r\n    });\r\n\r\n    it('should decompress data when retrieving', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const originalData = 'test data';\r\n      const compressedData = `COMPRESSED:\"${originalData}\"`;\r\n      \r\n      redisCache.get.mockResolvedValue(compressedData);\r\n\r\n      const result = await cacheManager.get('compressed-key', {\r\n        ...CACHE_CONFIGS.PRODUCT_DATA,\r\n        compress: true,\r\n      });\r\n\r\n      expect(result).toBe(originalData);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('CacheUtils', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('cacheMercadoPagoResponse', () => {\r\n    it('should cache MercadoPago response', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const responseData = { id: 'mp123', status: 'approved' };\r\n      const fetcherFn = jest.fn().mockResolvedValue(responseData);\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      const result = await CacheUtils.cacheMercadoPagoResponse('test-key', fetcherFn);\r\n\r\n      expect(result).toEqual(responseData);\r\n      expect(fetcherFn).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('cachePaymentInfo', () => {\r\n    it('should cache payment info with payment ID', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const paymentData = { id: '123', amount: 100 };\r\n      const fetcherFn = jest.fn().mockResolvedValue(paymentData);\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      const result = await CacheUtils.cachePaymentInfo('123', fetcherFn);\r\n\r\n      expect(result).toEqual(paymentData);\r\n      expect(redisCache.get).toHaveBeenCalledWith('cache:payment_info:payment:123');\r\n    });\r\n  });\r\n\r\n  describe('cacheProductData', () => {\r\n    it('should cache product data with product ID', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      const productData = { id: '456', name: 'Test Product' };\r\n      const fetcherFn = jest.fn().mockResolvedValue(productData);\r\n      \r\n      redisCache.get.mockResolvedValue(null);\r\n      redisCache.set.mockResolvedValue(true);\r\n\r\n      const result = await CacheUtils.cacheProductData('456', fetcherFn);\r\n\r\n      expect(result).toEqual(productData);\r\n      expect(redisCache.get).toHaveBeenCalledWith('cache:product:product:456');\r\n    });\r\n  });\r\n\r\n  describe('invalidatePayment', () => {\r\n    it('should invalidate payment cache', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      \r\n      redisCache.del.mockResolvedValue(true);\r\n\r\n      const result = await CacheUtils.invalidatePayment('123');\r\n\r\n      expect(result).toBe(true);\r\n      expect(redisCache.del).toHaveBeenCalledWith('cache:payment_info:payment:123');\r\n    });\r\n  });\r\n\r\n  describe('invalidateProduct', () => {\r\n    it('should invalidate product cache', async () => {\r\n      const { redisCache } = require('@/lib/redis');\r\n      \r\n      redisCache.del.mockResolvedValue(true);\r\n\r\n      const result = await CacheUtils.invalidateProduct('456');\r\n\r\n      expect(result).toBe(true);\r\n      expect(redisCache.del).toHaveBeenCalledWith('cache:product:product:456');\r\n    });\r\n  });\r\n});\r\n"],"names":["jest","mock","redisCache","get","fn","set","del","logger","debug","info","warn","error","LogLevel","DEBUG","INFO","WARN","ERROR","LogCategory","CACHE","SYSTEM","describe","beforeEach","clearAllMocks","it","instance1","CacheManager","getInstance","instance2","expect","toBe","cacheManager","require","testData","id","name","mockResolvedValue","JSON","stringify","result","CACHE_CONFIGS","PRODUCT_DATA","toEqual","toHaveBeenCalledWith","toBeNull","mockRejectedValue","Error","toHaveBeenCalled","ttl","circularObj","self","resolves","delete","cachedData","fetcherFn","getOrSet","not","freshData","fetcherError","rejects","toThrow","config","MERCADOPAGO_RESPONSE","prefix","compress","serialize","PAYMENT_INFO","largeData","repeat","setCall","calls","toContain","originalData","compressedData","responseData","status","CacheUtils","cacheMercadoPagoResponse","paymentData","amount","cachePaymentInfo","productData","cacheProductData","invalidatePayment","invalidateProduct"],"mappings":"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"}