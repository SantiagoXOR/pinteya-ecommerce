a3abb701d7501becf19447463e27ca02
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _QuickViewModalContext = require("../../app/context/QuickViewModalContext");
const _quickViewslice = require("../../redux/features/quickView-slice");
const _cartslice = require("../../redux/features/cart-slice");
const _wishlistslice = require("../../redux/features/wishlist-slice");
const _reactredux = require("react-redux");
const _productcardcommercial = require("../ui/product-card-commercial");
const _productAdapter = require("../../lib/adapters/productAdapter");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const SingleListItem = ({ item })=>{
    const { openModal } = (0, _QuickViewModalContext.useModalContext)();
    const dispatch = (0, _reactredux.useDispatch)();
    // update the QuickView state
    const handleQuickViewUpdate = ()=>{
        dispatch((0, _quickViewslice.updateQuickView)({
            ...item
        }));
    };
    // add to cart
    const handleAddToCart = ()=>{
        dispatch((0, _cartslice.addItemToCart)({
            ...item,
            quantity: 1
        }));
    };
    const handleItemToWishList = ()=>{
        dispatch((0, _wishlistslice.addItemToWishlist)({
            ...item,
            status: "available",
            quantity: 1
        }));
    };
    // Calcular características del producto usando el adaptador
    const features = (0, _productAdapter.calculateProductFeatures)(item);
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_productcardcommercial.CommercialProductCard, {
        className: "bg-white" // Forzar fondo blanco
        ,
        image: item.images?.previews?.[0] || item.imgs?.previews?.[0] || '/images/products/placeholder.svg',
        title: item.name || item.title,
        brand: item.brand,
        price: features.discount ? Math.round(item.price * (1 - features.discount / 100)) : features.currentPrice,
        originalPrice: features.discount ? item.price : undefined,
        discount: features.discount ? `${features.discount}%` : undefined,
        isNew: features.isNew,
        stock: features.stock,
        productId: item.id,
        cta: "Agregar al carrito",
        onAddToCart: handleAddToCart,
        showCartAnimation: true,
        // Información de cuotas automática
        installments: features.currentPrice >= 5000 ? {
            quantity: 3,
            amount: Math.round(features.currentPrice / 3),
            interestFree: true
        } : undefined,
        // Envío gratis automático para productos >= $15000
        freeShipping: features.freeShipping || features.currentPrice >= 15000,
        shippingText: features.freeShipping ? "Envío gratis" : features.fastShipping ? "Envío rápido" : undefined
    });
};
const _default = SingleListItem;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcU2hvcFxcU2luZ2xlTGlzdEl0ZW0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IFByb2R1Y3QgfSBmcm9tIFwiQC90eXBlcy9wcm9kdWN0XCI7XHJcbmltcG9ydCB7IHVzZU1vZGFsQ29udGV4dCB9IGZyb20gXCJAL2FwcC9jb250ZXh0L1F1aWNrVmlld01vZGFsQ29udGV4dFwiO1xyXG5pbXBvcnQgeyB1cGRhdGVRdWlja1ZpZXcgfSBmcm9tIFwiQC9yZWR1eC9mZWF0dXJlcy9xdWlja1ZpZXctc2xpY2VcIjtcclxuaW1wb3J0IHsgYWRkSXRlbVRvQ2FydCB9IGZyb20gXCJAL3JlZHV4L2ZlYXR1cmVzL2NhcnQtc2xpY2VcIjtcclxuaW1wb3J0IHsgYWRkSXRlbVRvV2lzaGxpc3QgfSBmcm9tIFwiQC9yZWR1eC9mZWF0dXJlcy93aXNobGlzdC1zbGljZVwiO1xyXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgeyBBcHBEaXNwYXRjaCB9IGZyb20gXCJAL3JlZHV4L3N0b3JlXCI7XHJcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcclxuaW1wb3J0IEltYWdlIGZyb20gXCJuZXh0L2ltYWdlXCI7XHJcbmltcG9ydCB7IENvbW1lcmNpYWxQcm9kdWN0Q2FyZCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvcHJvZHVjdC1jYXJkLWNvbW1lcmNpYWxcIjtcclxuaW1wb3J0IHsgRXh0ZW5kZWRQcm9kdWN0LCBjYWxjdWxhdGVQcm9kdWN0RmVhdHVyZXMgfSBmcm9tIFwiQC9saWIvYWRhcHRlcnMvcHJvZHVjdEFkYXB0ZXJcIjtcclxuXHJcbmNvbnN0IFNpbmdsZUxpc3RJdGVtID0gKHsgaXRlbSB9OiB7IGl0ZW06IEV4dGVuZGVkUHJvZHVjdCB9KSA9PiB7XHJcbiAgY29uc3QgeyBvcGVuTW9kYWwgfSA9IHVzZU1vZGFsQ29udGV4dCgpO1xyXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2g8QXBwRGlzcGF0Y2g+KCk7XHJcblxyXG4gIC8vIHVwZGF0ZSB0aGUgUXVpY2tWaWV3IHN0YXRlXHJcbiAgY29uc3QgaGFuZGxlUXVpY2tWaWV3VXBkYXRlID0gKCkgPT4ge1xyXG4gICAgZGlzcGF0Y2godXBkYXRlUXVpY2tWaWV3KHsgLi4uaXRlbSB9KSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gYWRkIHRvIGNhcnRcclxuICBjb25zdCBoYW5kbGVBZGRUb0NhcnQgPSAoKSA9PiB7XHJcbiAgICBkaXNwYXRjaChcclxuICAgICAgYWRkSXRlbVRvQ2FydCh7XHJcbiAgICAgICAgLi4uaXRlbSxcclxuICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlSXRlbVRvV2lzaExpc3QgPSAoKSA9PiB7XHJcbiAgICBkaXNwYXRjaChcclxuICAgICAgYWRkSXRlbVRvV2lzaGxpc3Qoe1xyXG4gICAgICAgIC4uLml0ZW0sXHJcbiAgICAgICAgc3RhdHVzOiBcImF2YWlsYWJsZVwiLFxyXG4gICAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICAvLyBDYWxjdWxhciBjYXJhY3RlcsOtc3RpY2FzIGRlbCBwcm9kdWN0byB1c2FuZG8gZWwgYWRhcHRhZG9yXHJcbiAgY29uc3QgZmVhdHVyZXMgPSBjYWxjdWxhdGVQcm9kdWN0RmVhdHVyZXMoaXRlbSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8Q29tbWVyY2lhbFByb2R1Y3RDYXJkXHJcbiAgICAgIGNsYXNzTmFtZT1cImJnLXdoaXRlXCIgLy8gRm9yemFyIGZvbmRvIGJsYW5jb1xyXG4gICAgICBpbWFnZT17aXRlbS5pbWFnZXM/LnByZXZpZXdzPy5bMF0gfHwgaXRlbS5pbWdzPy5wcmV2aWV3cz8uWzBdIHx8ICcvaW1hZ2VzL3Byb2R1Y3RzL3BsYWNlaG9sZGVyLnN2Zyd9XHJcbiAgICAgIHRpdGxlPXtpdGVtLm5hbWUgfHwgaXRlbS50aXRsZX1cclxuICAgICAgYnJhbmQ9e2l0ZW0uYnJhbmR9XHJcbiAgICAgIHByaWNlPXtmZWF0dXJlcy5kaXNjb3VudCA/IE1hdGgucm91bmQoaXRlbS5wcmljZSAqICgxIC0gZmVhdHVyZXMuZGlzY291bnQgLyAxMDApKSA6IGZlYXR1cmVzLmN1cnJlbnRQcmljZX1cclxuICAgICAgb3JpZ2luYWxQcmljZT17ZmVhdHVyZXMuZGlzY291bnQgPyBpdGVtLnByaWNlIDogdW5kZWZpbmVkfVxyXG4gICAgICBkaXNjb3VudD17ZmVhdHVyZXMuZGlzY291bnQgPyBgJHtmZWF0dXJlcy5kaXNjb3VudH0lYCA6IHVuZGVmaW5lZH1cclxuICAgICAgaXNOZXc9e2ZlYXR1cmVzLmlzTmV3fVxyXG4gICAgICBzdG9jaz17ZmVhdHVyZXMuc3RvY2t9XHJcbiAgICAgIHByb2R1Y3RJZD17aXRlbS5pZH1cclxuICAgICAgY3RhPVwiQWdyZWdhciBhbCBjYXJyaXRvXCJcclxuICAgICAgb25BZGRUb0NhcnQ9e2hhbmRsZUFkZFRvQ2FydH1cclxuICAgICAgc2hvd0NhcnRBbmltYXRpb249e3RydWV9XHJcbiAgICAgIC8vIEluZm9ybWFjacOzbiBkZSBjdW90YXMgYXV0b23DoXRpY2FcclxuICAgICAgaW5zdGFsbG1lbnRzPXtmZWF0dXJlcy5jdXJyZW50UHJpY2UgPj0gNTAwMCA/IHtcclxuICAgICAgICBxdWFudGl0eTogMyxcclxuICAgICAgICBhbW91bnQ6IE1hdGgucm91bmQoZmVhdHVyZXMuY3VycmVudFByaWNlIC8gMyksXHJcbiAgICAgICAgaW50ZXJlc3RGcmVlOiB0cnVlXHJcbiAgICAgIH0gOiB1bmRlZmluZWR9XHJcbiAgICAgIC8vIEVudsOtbyBncmF0aXMgYXV0b23DoXRpY28gcGFyYSBwcm9kdWN0b3MgPj0gJDE1MDAwXHJcbiAgICAgIGZyZWVTaGlwcGluZz17ZmVhdHVyZXMuZnJlZVNoaXBwaW5nIHx8IGZlYXR1cmVzLmN1cnJlbnRQcmljZSA+PSAxNTAwMH1cclxuICAgICAgc2hpcHBpbmdUZXh0PXtmZWF0dXJlcy5mcmVlU2hpcHBpbmcgPyBcIkVudsOtbyBncmF0aXNcIiA6IGZlYXR1cmVzLmZhc3RTaGlwcGluZyA/IFwiRW52w61vIHLDoXBpZG9cIiA6IHVuZGVmaW5lZH1cclxuICAgIC8+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNpbmdsZUxpc3RJdGVtO1xyXG4iXSwibmFtZXMiOlsiU2luZ2xlTGlzdEl0ZW0iLCJpdGVtIiwib3Blbk1vZGFsIiwidXNlTW9kYWxDb250ZXh0IiwiZGlzcGF0Y2giLCJ1c2VEaXNwYXRjaCIsImhhbmRsZVF1aWNrVmlld1VwZGF0ZSIsInVwZGF0ZVF1aWNrVmlldyIsImhhbmRsZUFkZFRvQ2FydCIsImFkZEl0ZW1Ub0NhcnQiLCJxdWFudGl0eSIsImhhbmRsZUl0ZW1Ub1dpc2hMaXN0IiwiYWRkSXRlbVRvV2lzaGxpc3QiLCJzdGF0dXMiLCJmZWF0dXJlcyIsImNhbGN1bGF0ZVByb2R1Y3RGZWF0dXJlcyIsIkNvbW1lcmNpYWxQcm9kdWN0Q2FyZCIsImNsYXNzTmFtZSIsImltYWdlIiwiaW1hZ2VzIiwicHJldmlld3MiLCJpbWdzIiwidGl0bGUiLCJuYW1lIiwiYnJhbmQiLCJwcmljZSIsImRpc2NvdW50IiwiTWF0aCIsInJvdW5kIiwiY3VycmVudFByaWNlIiwib3JpZ2luYWxQcmljZSIsInVuZGVmaW5lZCIsImlzTmV3Iiwic3RvY2siLCJwcm9kdWN0SWQiLCJpZCIsImN0YSIsIm9uQWRkVG9DYXJ0Iiwic2hvd0NhcnRBbmltYXRpb24iLCJpbnN0YWxsbWVudHMiLCJhbW91bnQiLCJpbnRlcmVzdEZyZWUiLCJmcmVlU2hpcHBpbmciLCJzaGlwcGluZ1RleHQiLCJmYXN0U2hpcHBpbmciXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkEwRUE7OztlQUFBOzs7OzhEQXpFa0I7dUNBRWM7Z0NBQ0E7MkJBQ0Y7K0JBQ0k7NEJBQ047dUNBSVU7Z0NBQ29COzs7Ozs7QUFFMUQsTUFBTUEsaUJBQWlCLENBQUMsRUFBRUMsSUFBSSxFQUE2QjtJQUN6RCxNQUFNLEVBQUVDLFNBQVMsRUFBRSxHQUFHQyxJQUFBQSxzQ0FBZTtJQUNyQyxNQUFNQyxXQUFXQyxJQUFBQSx1QkFBVztJQUU1Qiw2QkFBNkI7SUFDN0IsTUFBTUMsd0JBQXdCO1FBQzVCRixTQUFTRyxJQUFBQSwrQkFBZSxFQUFDO1lBQUUsR0FBR04sSUFBSTtRQUFDO0lBQ3JDO0lBRUEsY0FBYztJQUNkLE1BQU1PLGtCQUFrQjtRQUN0QkosU0FDRUssSUFBQUEsd0JBQWEsRUFBQztZQUNaLEdBQUdSLElBQUk7WUFDUFMsVUFBVTtRQUNaO0lBRUo7SUFFQSxNQUFNQyx1QkFBdUI7UUFDM0JQLFNBQ0VRLElBQUFBLGdDQUFpQixFQUFDO1lBQ2hCLEdBQUdYLElBQUk7WUFDUFksUUFBUTtZQUNSSCxVQUFVO1FBQ1o7SUFFSjtJQUVBLDREQUE0RDtJQUM1RCxNQUFNSSxXQUFXQyxJQUFBQSx3Q0FBd0IsRUFBQ2Q7SUFFMUMscUJBQ0UscUJBQUNlLDRDQUFxQjtRQUNwQkMsV0FBVSxXQUFXLHNCQUFzQjs7UUFDM0NDLE9BQU9qQixLQUFLa0IsTUFBTSxFQUFFQyxVQUFVLENBQUMsRUFBRSxJQUFJbkIsS0FBS29CLElBQUksRUFBRUQsVUFBVSxDQUFDLEVBQUUsSUFBSTtRQUNqRUUsT0FBT3JCLEtBQUtzQixJQUFJLElBQUl0QixLQUFLcUIsS0FBSztRQUM5QkUsT0FBT3ZCLEtBQUt1QixLQUFLO1FBQ2pCQyxPQUFPWCxTQUFTWSxRQUFRLEdBQUdDLEtBQUtDLEtBQUssQ0FBQzNCLEtBQUt3QixLQUFLLEdBQUksQ0FBQSxJQUFJWCxTQUFTWSxRQUFRLEdBQUcsR0FBRSxLQUFNWixTQUFTZSxZQUFZO1FBQ3pHQyxlQUFlaEIsU0FBU1ksUUFBUSxHQUFHekIsS0FBS3dCLEtBQUssR0FBR007UUFDaERMLFVBQVVaLFNBQVNZLFFBQVEsR0FBRyxHQUFHWixTQUFTWSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUdLO1FBQ3hEQyxPQUFPbEIsU0FBU2tCLEtBQUs7UUFDckJDLE9BQU9uQixTQUFTbUIsS0FBSztRQUNyQkMsV0FBV2pDLEtBQUtrQyxFQUFFO1FBQ2xCQyxLQUFJO1FBQ0pDLGFBQWE3QjtRQUNiOEIsbUJBQW1CO1FBQ25CLG1DQUFtQztRQUNuQ0MsY0FBY3pCLFNBQVNlLFlBQVksSUFBSSxPQUFPO1lBQzVDbkIsVUFBVTtZQUNWOEIsUUFBUWIsS0FBS0MsS0FBSyxDQUFDZCxTQUFTZSxZQUFZLEdBQUc7WUFDM0NZLGNBQWM7UUFDaEIsSUFBSVY7UUFDSixtREFBbUQ7UUFDbkRXLGNBQWM1QixTQUFTNEIsWUFBWSxJQUFJNUIsU0FBU2UsWUFBWSxJQUFJO1FBQ2hFYyxjQUFjN0IsU0FBUzRCLFlBQVksR0FBRyxpQkFBaUI1QixTQUFTOEIsWUFBWSxHQUFHLGlCQUFpQmI7O0FBR3RHO01BRUEsV0FBZS9CIn0=