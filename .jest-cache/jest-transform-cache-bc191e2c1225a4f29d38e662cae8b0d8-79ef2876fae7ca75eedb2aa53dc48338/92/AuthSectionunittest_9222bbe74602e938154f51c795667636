fbc57ee6dfd91f77ab260c499421e873
/**
 * Test simplificado para AuthSection con NextAuth
 * Enfocado en validar la funcionalidad core sin complejidades
 */ "use strict";
// Mock NextAuth
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn(),
        signIn: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _AuthSection = /*#__PURE__*/ _interop_require_default(require("../../AuthSection"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockUseSession = _react2.useSession;
const mockSignIn = _react2.signIn;
// Mock user data
const mockUser = {
    id: 'user_123',
    name: 'Juan Pérez',
    email: 'juan@example.com'
};
describe('AuthSection - Simplified Tests', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Unauthenticated State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should render sign in button when unauthenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30');
        });
        it('should render Google icon in button', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            expect(svg).toBeInTheDocument();
            expect(svg).toHaveClass('w-5', 'h-5');
        });
        it('should call signIn when button is clicked', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockSignIn).toHaveBeenCalledWith('google');
        });
        it('should have correct CSS classes for translucent button', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('relative', 'bg-white/20', 'hover:bg-white/30', 'backdrop-blur-sm', 'border-2', 'border-white/30', 'rounded-full');
        });
    });
    describe('Authenticated State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('should render admin link when authenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toBeInTheDocument();
            expect(adminLink).toHaveAttribute('href', '/admin');
        });
        it('should render user avatar when authenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const avatar = _react1.screen.getByText('J') // First letter of Juan
            ;
            expect(avatar).toBeInTheDocument();
        });
        it('should have admin button with correct styling', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toHaveClass('bg-orange-600', 'hover:bg-orange-700', 'text-white');
        });
    });
    describe('Loading State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'loading'
            });
        });
        it('should render loading skeleton', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const skeleton = _react1.screen.getByText((content, element)=>{
                return element?.classList.contains('animate-pulse') || false;
            });
            expect(skeleton).toHaveClass('animate-pulse');
        });
    });
    describe('Variants', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should render mobile variant correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-110');
        });
        it('should render topbar variant with text', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const button = _react1.screen.getByText('Iniciar Sesión');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('text-gray-800');
        });
        it('should render default variant correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "default"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-105');
        });
    });
    describe('Accessibility', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should be keyboard accessible', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            // Button should be focusable
            button.focus();
            expect(document.activeElement).toBe(button);
        });
        it('should have proper button role', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
        });
    });
    describe('Visual Consistency', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should maintain consistent icon size across variants', ()=>{
            const variants = [
                'default',
                'mobile'
            ];
            variants.forEach((variant)=>{
                const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                    variant: variant
                }));
                const svg = _react1.screen.getByRole('button').querySelector('svg');
                expect(svg).toHaveClass('w-5', 'h-5');
                unmount();
            });
        });
        it('should have hover effects', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:bg-white/30');
        });
        it('should have transform effects', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('transform', 'hover:scale-105');
        });
    });
    describe('Google Branding', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should have Google colors in SVG paths', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            const paths = svg?.querySelectorAll('path');
            expect(paths).toHaveLength(4);
            // Check for Google brand colors
            const colors = Array.from(paths || []).map((path)=>path.getAttribute('fill'));
            expect(colors).toContain('#4285F4'); // Google Blue
            expect(colors).toContain('#34A853'); // Google Green
            expect(colors).toContain('#FBBC05'); // Google Yellow
            expect(colors).toContain('#EA4335'); // Google Red
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcSGVhZGVyXFxfX3Rlc3RzX19cXHVuaXRcXEF1dGhTZWN0aW9uLnVuaXQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IHNpbXBsaWZpY2FkbyBwYXJhIEF1dGhTZWN0aW9uIGNvbiBOZXh0QXV0aFxuICogRW5mb2NhZG8gZW4gdmFsaWRhciBsYSBmdW5jaW9uYWxpZGFkIGNvcmUgc2luIGNvbXBsZWppZGFkZXNcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB7IHVzZVNlc3Npb24sIHNpZ25JbiB9IGZyb20gJ25leHQtYXV0aC9yZWFjdCdcbmltcG9ydCBBdXRoU2VjdGlvbiBmcm9tICcuLi8uLi9BdXRoU2VjdGlvbidcblxuLy8gTW9jayBOZXh0QXV0aFxuamVzdC5tb2NrKCduZXh0LWF1dGgvcmVhY3QnLCAoKSA9PiAoe1xuICB1c2VTZXNzaW9uOiBqZXN0LmZuKCksXG4gIHNpZ25JbjogamVzdC5mbigpXG59KSlcblxuY29uc3QgbW9ja1VzZVNlc3Npb24gPSB1c2VTZXNzaW9uIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVNlc3Npb24+XG5jb25zdCBtb2NrU2lnbkluID0gc2lnbkluIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHNpZ25Jbj5cblxuLy8gTW9jayB1c2VyIGRhdGFcbmNvbnN0IG1vY2tVc2VyID0ge1xuICBpZDogJ3VzZXJfMTIzJyxcbiAgbmFtZTogJ0p1YW4gUMOpcmV6JyxcbiAgZW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJ1xufVxuXG5kZXNjcmliZSgnQXV0aFNlY3Rpb24gLSBTaW1wbGlmaWVkIFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxuICB9KVxuXG4gIGRlc2NyaWJlKCdVbmF1dGhlbnRpY2F0ZWQgU3RhdGUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgc2lnbiBpbiBidXR0b24gd2hlbiB1bmF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2JnLXdoaXRlLzIwJywgJ2hvdmVyOmJnLXdoaXRlLzMwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgR29vZ2xlIGljb24gaW4gYnV0dG9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3Qgc3ZnID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJykucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgIGV4cGVjdChzdmcpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzdmcpLnRvSGF2ZUNsYXNzKCd3LTUnLCAnaC01JylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNpZ25JbiB3aGVuIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pXG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrU2lnbkluKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZ29vZ2xlJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgQ1NTIGNsYXNzZXMgZm9yIHRyYW5zbHVjZW50IGJ1dHRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcyhcbiAgICAgICAgJ3JlbGF0aXZlJyxcbiAgICAgICAgJ2JnLXdoaXRlLzIwJyxcbiAgICAgICAgJ2hvdmVyOmJnLXdoaXRlLzMwJyxcbiAgICAgICAgJ2JhY2tkcm9wLWJsdXItc20nLFxuICAgICAgICAnYm9yZGVyLTInLFxuICAgICAgICAnYm9yZGVyLXdoaXRlLzMwJyxcbiAgICAgICAgJ3JvdW5kZWQtZnVsbCdcbiAgICAgIClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdBdXRoZW50aWNhdGVkIFN0YXRlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBtb2NrVXNlciB9LFxuICAgICAgICBzdGF0dXM6ICdhdXRoZW50aWNhdGVkJ1xuICAgICAgfSBhcyBhbnkpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGFkbWluIGxpbmsgd2hlbiBhdXRoZW50aWNhdGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYWRtaW5MaW5rID0gc2NyZWVuLmdldEJ5Um9sZSgnbGluaycpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnL2FkbWluJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgdXNlciBhdmF0YXIgd2hlbiBhdXRoZW50aWNhdGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYXZhdGFyID0gc2NyZWVuLmdldEJ5VGV4dCgnSicpIC8vIEZpcnN0IGxldHRlciBvZiBKdWFuXG4gICAgICBleHBlY3QoYXZhdGFyKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBhZG1pbiBidXR0b24gd2l0aCBjb3JyZWN0IHN0eWxpbmcnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBhZG1pbkxpbmsgPSBzY3JlZW4uZ2V0QnlSb2xlKCdsaW5rJylcbiAgICAgIGV4cGVjdChhZG1pbkxpbmspLnRvSGF2ZUNsYXNzKFxuICAgICAgICAnYmctb3JhbmdlLTYwMCcsXG4gICAgICAgICdob3ZlcjpiZy1vcmFuZ2UtNzAwJyxcbiAgICAgICAgJ3RleHQtd2hpdGUnXG4gICAgICApXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnTG9hZGluZyBTdGF0ZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ2xvYWRpbmcnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgbG9hZGluZyBza2VsZXRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IHNrZWxldG9uID0gc2NyZWVuLmdldEJ5VGV4dCgoY29udGVudCwgZWxlbWVudCkgPT4ge1xuICAgICAgICByZXR1cm4gZWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLXB1bHNlJykgfHwgZmFsc2VcbiAgICAgIH0pXG4gICAgICBleHBlY3Qoc2tlbGV0b24pLnRvSGF2ZUNsYXNzKCdhbmltYXRlLXB1bHNlJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdWYXJpYW50cycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCdcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBtb2JpbGUgdmFyaWFudCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJtb2JpbGVcIiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdob3ZlcjpzY2FsZS0xMTAnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciB0b3BiYXIgdmFyaWFudCB3aXRoIHRleHQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJ0b3BiYXJcIiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnSW5pY2lhciBTZXNpw7NuJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCd0ZXh0LWdyYXktODAwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgZGVmYXVsdCB2YXJpYW50IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gdmFyaWFudD1cImRlZmF1bHRcIiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdob3ZlcjpzY2FsZS0xMDUnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBiZSBrZXlib2FyZCBhY2Nlc3NpYmxlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIFxuICAgICAgLy8gQnV0dG9uIHNob3VsZCBiZSBmb2N1c2FibGVcbiAgICAgIGJ1dHRvbi5mb2N1cygpXG4gICAgICBleHBlY3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkudG9CZShidXR0b24pXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgYnV0dG9uIHJvbGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1Zpc3VhbCBDb25zaXN0ZW5jeScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCdcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGNvbnNpc3RlbnQgaWNvbiBzaXplIGFjcm9zcyB2YXJpYW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhcmlhbnRzID0gWydkZWZhdWx0JywgJ21vYmlsZSddIGFzIGNvbnN0XG4gICAgICBcbiAgICAgIHZhcmlhbnRzLmZvckVhY2godmFyaWFudCA9PiB7XG4gICAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PXt2YXJpYW50fSAvPilcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN2ZyA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICAgIGV4cGVjdChzdmcpLnRvSGF2ZUNsYXNzKCd3LTUnLCAnaC01JylcbiAgICAgICAgXG4gICAgICAgIHVubW91bnQoKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGhvdmVyIGVmZmVjdHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2hvdmVyOmJnLXdoaXRlLzMwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zZm9ybSBlZmZlY3RzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCd0cmFuc2Zvcm0nLCAnaG92ZXI6c2NhbGUtMTA1JylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdHb29nbGUgQnJhbmRpbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIEdvb2dsZSBjb2xvcnMgaW4gU1ZHIHBhdGhzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3Qgc3ZnID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJykucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgIGNvbnN0IHBhdGhzID0gc3ZnPy5xdWVyeVNlbGVjdG9yQWxsKCdwYXRoJylcbiAgICAgIFxuICAgICAgZXhwZWN0KHBhdGhzKS50b0hhdmVMZW5ndGgoNClcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIEdvb2dsZSBicmFuZCBjb2xvcnNcbiAgICAgIGNvbnN0IGNvbG9ycyA9IEFycmF5LmZyb20ocGF0aHMgfHwgW10pLm1hcChwYXRoID0+IHBhdGguZ2V0QXR0cmlidXRlKCdmaWxsJykpXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyM0Mjg1RjQnKSAvLyBHb29nbGUgQmx1ZVxuICAgICAgZXhwZWN0KGNvbG9ycykudG9Db250YWluKCcjMzRBODUzJykgLy8gR29vZ2xlIEdyZWVuXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyNGQkJDMDUnKSAvLyBHb29nbGUgWWVsbG93XG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyNFQTQzMzUnKSAvLyBHb29nbGUgUmVkXG4gICAgfSlcbiAgfSlcbn0pXG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VTZXNzaW9uIiwiZm4iLCJzaWduSW4iLCJtb2NrVXNlU2Vzc2lvbiIsIm1vY2tTaWduSW4iLCJtb2NrVXNlciIsImlkIiwibmFtZSIsImVtYWlsIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImRhdGEiLCJzdGF0dXMiLCJpdCIsInJlbmRlciIsIkF1dGhTZWN0aW9uIiwiYnV0dG9uIiwic2NyZWVuIiwiZ2V0QnlSb2xlIiwiZXhwZWN0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJ0b0hhdmVDbGFzcyIsInN2ZyIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJlRXZlbnQiLCJjbGljayIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidXNlciIsImFkbWluTGluayIsInRvSGF2ZUF0dHJpYnV0ZSIsImF2YXRhciIsImdldEJ5VGV4dCIsInNrZWxldG9uIiwiY29udGVudCIsImVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInZhcmlhbnQiLCJmb2N1cyIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsInRvQmUiLCJ2YXJpYW50cyIsImZvckVhY2giLCJ1bm1vdW50IiwicGF0aHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9IYXZlTGVuZ3RoIiwiY29sb3JzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwicGF0aCIsImdldEF0dHJpYnV0ZSIsInRvQ29udGFpbiJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDO0FBT0QsZ0JBQWdCO0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsWUFBWUYsS0FBS0csRUFBRTtRQUNuQkMsUUFBUUosS0FBS0csRUFBRTtJQUNqQixDQUFBOzs7Ozs4REFUa0I7d0JBQ3dCO3dCQUNQ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