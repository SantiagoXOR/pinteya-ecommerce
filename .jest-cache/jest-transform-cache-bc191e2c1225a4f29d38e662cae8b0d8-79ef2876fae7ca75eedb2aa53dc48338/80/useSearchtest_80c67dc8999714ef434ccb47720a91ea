c9df3b69adab27585a6c1aed7ef7e845
// ===================================
// TESTS: useSearch Hook - Sistema de búsqueda centralizado
// ===================================
"use strict";
// ===================================
// MOCKS
// ===================================
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
// Mock API de productos
jest.mock('@/lib/api/products', ()=>({
        searchProducts: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _navigation = require("next/navigation");
const _useSearch = require("../../hooks/useSearch");
const _products = require("../../lib/api/products");
// Mock localStorage
const localStorageMock = {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn()
};
Object.defineProperty(window, 'localStorage', {
    value: localStorageMock
});
// ===================================
// SETUP
// ===================================
const mockPush = jest.fn();
const mockSearchProducts = _products.searchProducts;
beforeEach(()=>{
    jest.clearAllMocks();
    _navigation.useRouter.mockReturnValue({
        push: mockPush
    });
    localStorageMock.getItem.mockReturnValue(null);
});
// ===================================
// TESTS BÁSICOS
// ===================================
describe('useSearch Hook', ()=>{
    it('should initialize with default state', ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        expect(result.current.query).toBe('');
        expect(result.current.results).toEqual([]);
        expect(result.current.suggestions).toEqual([]);
        expect(result.current.isLoading).toBe(false);
        expect(result.current.error).toBe(null);
        expect(result.current.hasSearched).toBe(false);
    });
    it('should accept custom options', ()=>{
        const onSearch = jest.fn();
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)({
                debounceMs: 200,
                maxSuggestions: 5,
                onSearch
            }));
        expect(typeof result.current.executeSearch).toBe('function');
        expect(typeof result.current.searchWithDebounce).toBe('function');
    });
});
// ===================================
// TESTS DE BÚSQUEDA
// ===================================
describe('useSearch - Search Functionality', ()=>{
    it('should execute search and navigate to results page', async ()=>{
        const mockResponse = {
            success: true,
            data: [
                {
                    id: '1',
                    name: 'Producto 1',
                    price: 100
                },
                {
                    id: '2',
                    name: 'Producto 2',
                    price: 200
                }
            ],
            pagination: {
                total: 2,
                page: 1,
                limit: 12,
                totalPages: 1
            }
        };
        mockSearchProducts.mockResolvedValue(mockResponse);
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        await (0, _react.act)(async ()=>{
            await result.current.executeSearch('pintura');
        });
        await (0, _react.waitFor)(()=>{
            expect(mockSearchProducts).toHaveBeenCalledWith('pintura', 12);
            expect(mockPush).toHaveBeenCalledWith('/search?q=pintura');
            expect(result.current.results).toEqual(mockResponse.data);
            expect(result.current.hasSearched).toBe(true);
            expect(result.current.error).toBe(null);
        });
    });
    it('should handle search with category', async ()=>{
        const mockResponse = {
            success: true,
            data: [],
            pagination: {
                total: 0,
                page: 1,
                limit: 12,
                totalPages: 0
            }
        };
        mockSearchProducts.mockResolvedValue(mockResponse);
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        await (0, _react.act)(async ()=>{
            await result.current.executeSearch('pintura', 'pinturas');
        });
        await (0, _react.waitFor)(()=>{
            expect(mockPush).toHaveBeenCalledWith('/search?q=pintura&category=pinturas');
        });
    });
    it('should handle search errors', async ()=>{
        const mockError = new Error('Network error');
        mockSearchProducts.mockRejectedValue(mockError);
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        await (0, _react.act)(async ()=>{
            await result.current.executeSearch('pintura');
        });
        await (0, _react.waitFor)(()=>{
            expect(result.current.error).toBeTruthy();
            expect(result.current.results).toEqual([]);
            expect(result.current.hasSearched).toBe(true);
        });
    });
});
// ===================================
// TESTS DE DEBOUNCING
// ===================================
describe('useSearch - Debouncing', ()=>{
    beforeEach(()=>{
        jest.useFakeTimers();
    });
    afterEach(()=>{
        jest.useRealTimers();
    });
    it('should debounce search requests', async ()=>{
        const mockResponse = {
            success: true,
            data: [],
            pagination: {
                total: 0,
                page: 1,
                limit: 8,
                totalPages: 0
            }
        };
        mockSearchProducts.mockResolvedValue(mockResponse);
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)({
                debounceMs: 150
            }));
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        // Múltiples llamadas rápidas
        (0, _react.act)(()=>{
            result.current?.searchWithDebounce?.('p');
            result.current?.searchWithDebounce?.('pi');
            result.current?.searchWithDebounce?.('pin');
            result.current?.searchWithDebounce?.('pint');
            result.current?.searchWithDebounce?.('pintu');
            result.current?.searchWithDebounce?.('pintura');
        });
        // Avanzar el timer
        (0, _react.act)(()=>{
            jest.advanceTimersByTime(150);
        });
        await (0, _react.waitFor)(()=>{
            // Solo debería haberse llamado una vez con el último valor
            expect(mockSearchProducts).toHaveBeenCalledTimes(1);
            expect(mockSearchProducts).toHaveBeenCalledWith('pintura', 8);
        });
    });
    it('should cancel previous debounced calls', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)({
                debounceMs: 150
            }));
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        (0, _react.act)(()=>{
            result.current?.searchWithDebounce?.('pintura');
        });
        // Avanzar solo 100ms (menos que el debounce)
        (0, _react.act)(()=>{
            jest.advanceTimersByTime(100);
        });
        (0, _react.act)(()=>{
            result.current.searchWithDebounce('esmalte');
        });
        // Avanzar otros 150ms
        (0, _react.act)(()=>{
            jest.advanceTimersByTime(150);
        });
        await (0, _react.waitFor)(()=>{
            // Solo debería buscar 'esmalte', no 'pintura'
            expect(mockSearchProducts).toHaveBeenCalledTimes(1);
            expect(mockSearchProducts).toHaveBeenCalledWith('esmalte', 8);
        });
    });
});
// ===================================
// TESTS DE SUGERENCIAS
// ===================================
describe('useSearch - Suggestions', ()=>{
    it('should handle suggestion selection', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        const suggestion = {
            id: 'test-1',
            type: 'product',
            title: 'Pintura Látex',
            href: '/products/pintura-latex'
        };
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        (0, _react.act)(()=>{
            result.current?.selectSuggestion?.(suggestion);
        });
        expect(mockPush).toHaveBeenCalledWith('/products/pintura-latex');
    });
});
// ===================================
// TESTS DE BÚSQUEDAS RECIENTES
// ===================================
describe('useSearch - Recent Searches', ()=>{
    it('should save recent searches to localStorage', async ()=>{
        const mockResponse = {
            success: true,
            data: [
                {
                    id: '1',
                    name: 'Producto',
                    price: 100
                }
            ],
            pagination: {
                total: 1,
                page: 1,
                limit: 12,
                totalPages: 1
            }
        };
        mockSearchProducts.mockResolvedValue(mockResponse);
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)({
                saveRecentSearches: true
            }));
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        await (0, _react.act)(async ()=>{
            await result.current?.executeSearch?.('pintura');
        });
        await (0, _react.waitFor)(()=>{
            expect(localStorageMock.setItem).toHaveBeenCalledWith('pinteya-recent-searches', expect.stringContaining('pintura'));
        });
    });
    it('should load recent searches from localStorage', ()=>{
        const recentSearches = [
            'pintura',
            'esmalte',
            'barniz'
        ];
        localStorageMock.getItem.mockReturnValue(JSON.stringify(recentSearches));
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)({
                saveRecentSearches: true
            }));
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        (0, _react.act)(()=>{
            result.current?.initialize?.();
        });
        expect(result.current.recentSearches).toEqual(recentSearches);
    });
});
// ===================================
// TESTS DE CLEANUP
// ===================================
describe('useSearch - Cleanup', ()=>{
    it('should cleanup timeouts on unmount', async ()=>{
        const clearTimeoutSpy = jest.spyOn(global, 'clearTimeout');
        const { result, unmount } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        // Activar búsqueda para crear timeouts
        (0, _react.act)(()=>{
            result.current.searchWithDebounce('test');
        });
        // Esperar un poco para que se establezcan los timeouts (optimizado)
        await (0, _react.act)(async ()=>{
            await new Promise((resolve)=>setTimeout(resolve, 50));
        });
        // Llamar cleanup explícitamente antes de unmount
        (0, _react.act)(()=>{
            result.current.cleanup();
        });
        unmount();
        expect(clearTimeoutSpy).toHaveBeenCalled();
        clearTimeoutSpy.mockRestore();
    });
    it('should clear search state', ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useSearch.useSearch)());
        // Patrón 2 exitoso: Expectativas específicas - acepta cualquier estado válido
        if (!result.current) {
            expect(result.current).toBeDefined();
            return;
        }
        // Simular estado con datos
        (0, _react.act)(()=>{
            result.current?.clearSearch?.();
        });
        expect(result.current.query).toBe('');
        expect(result.current.results).toEqual([]);
        expect(result.current.suggestions).toEqual([]);
        expect(result.current.error).toBe(null);
        expect(result.current.hasSearched).toBe(false);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcdXNlU2VhcmNoLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRFU1RTOiB1c2VTZWFyY2ggSG9vayAtIFNpc3RlbWEgZGUgYsO6c3F1ZWRhIGNlbnRyYWxpemFkb1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgcmVuZGVySG9vaywgYWN0LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XHJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XHJcbmltcG9ydCB7IHVzZVNlYXJjaCB9IGZyb20gJ0AvaG9va3MvdXNlU2VhcmNoJztcclxuaW1wb3J0IHsgc2VhcmNoUHJvZHVjdHMgfSBmcm9tICdAL2xpYi9hcGkvcHJvZHVjdHMnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTU9DS1NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIE1vY2sgTmV4dC5qcyByb3V0ZXJcclxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xyXG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxyXG59KSk7XHJcblxyXG4vLyBNb2NrIEFQSSBkZSBwcm9kdWN0b3NcclxuamVzdC5tb2NrKCdAL2xpYi9hcGkvcHJvZHVjdHMnLCAoKSA9PiAoe1xyXG4gIHNlYXJjaFByb2R1Y3RzOiBqZXN0LmZuKCksXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgbG9jYWxTdG9yYWdlXHJcbmNvbnN0IGxvY2FsU3RvcmFnZU1vY2sgPSB7XHJcbiAgZ2V0SXRlbTogamVzdC5mbigpLFxyXG4gIHNldEl0ZW06IGplc3QuZm4oKSxcclxuICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXHJcbiAgY2xlYXI6IGplc3QuZm4oKSxcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcclxuICB2YWx1ZTogbG9jYWxTdG9yYWdlTW9jayxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBTRVRVUFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgbW9ja1B1c2ggPSBqZXN0LmZuKCk7XHJcbmNvbnN0IG1vY2tTZWFyY2hQcm9kdWN0cyA9IHNlYXJjaFByb2R1Y3RzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHNlYXJjaFByb2R1Y3RzPjtcclxuXHJcbmJlZm9yZUVhY2goKCkgPT4ge1xyXG4gIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICh1c2VSb3V0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgcHVzaDogbW9ja1B1c2gsXHJcbiAgfSk7XHJcbiAgbG9jYWxTdG9yYWdlTW9jay5nZXRJdGVtLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBURVNUUyBCw4FTSUNPU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ3VzZVNlYXJjaCBIb29rJywgKCkgPT4ge1xyXG4gIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgc3RhdGUnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VTZWFyY2goKSk7XHJcblxyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnF1ZXJ5KS50b0JlKCcnKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZXN1bHRzKS50b0VxdWFsKFtdKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zdWdnZXN0aW9ucykudG9FcXVhbChbXSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZShudWxsKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5oYXNTZWFyY2hlZCkudG9CZShmYWxzZSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgYWNjZXB0IGN1c3RvbSBvcHRpb25zJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XHJcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiBcclxuICAgICAgdXNlU2VhcmNoKHtcclxuICAgICAgICBkZWJvdW5jZU1zOiAyMDAsXHJcbiAgICAgICAgbWF4U3VnZ2VzdGlvbnM6IDUsXHJcbiAgICAgICAgb25TZWFyY2gsXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuZXhlY3V0ZVNlYXJjaCkudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQuc2VhcmNoV2l0aERlYm91bmNlKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRFU1RTIERFIELDmlNRVUVEQVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ3VzZVNlYXJjaCAtIFNlYXJjaCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xyXG4gIGl0KCdzaG91bGQgZXhlY3V0ZSBzZWFyY2ggYW5kIG5hdmlnYXRlIHRvIHJlc3VsdHMgcGFnZScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogW1xyXG4gICAgICAgIHsgaWQ6ICcxJywgbmFtZTogJ1Byb2R1Y3RvIDEnLCBwcmljZTogMTAwIH0sXHJcbiAgICAgICAgeyBpZDogJzInLCBuYW1lOiAnUHJvZHVjdG8gMicsIHByaWNlOiAyMDAgfSxcclxuICAgICAgXSxcclxuICAgICAgcGFnaW5hdGlvbjogeyB0b3RhbDogMiwgcGFnZTogMSwgbGltaXQ6IDEyLCB0b3RhbFBhZ2VzOiAxIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIG1vY2tTZWFyY2hQcm9kdWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzcG9uc2UpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNlYXJjaCgpKTtcclxuXHJcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5leGVjdXRlU2VhcmNoKCdwaW50dXJhJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KG1vY2tTZWFyY2hQcm9kdWN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BpbnR1cmEnLCAxMik7XHJcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9zZWFyY2g/cT1waW50dXJhJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZXN1bHRzKS50b0VxdWFsKG1vY2tSZXNwb25zZS5kYXRhKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lmhhc1NlYXJjaGVkKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmUobnVsbCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VhcmNoIHdpdGggY2F0ZWdvcnknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IFtdLFxyXG4gICAgICBwYWdpbmF0aW9uOiB7IHRvdGFsOiAwLCBwYWdlOiAxLCBsaW1pdDogMTIsIHRvdGFsUGFnZXM6IDAgfSxcclxuICAgIH07XHJcblxyXG4gICAgbW9ja1NlYXJjaFByb2R1Y3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXNwb25zZSk7XHJcblxyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU2VhcmNoKCkpO1xyXG5cclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmV4ZWN1dGVTZWFyY2goJ3BpbnR1cmEnLCAncGludHVyYXMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvc2VhcmNoP3E9cGludHVyYSZjYXRlZ29yeT1waW50dXJhcycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgaGFuZGxlIHNlYXJjaCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcclxuICAgIG1vY2tTZWFyY2hQcm9kdWN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShtb2NrRXJyb3IpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNlYXJjaCgpKTtcclxuXHJcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5leGVjdXRlU2VhcmNoKCdwaW50dXJhJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZXN1bHRzKS50b0VxdWFsKFtdKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lmhhc1NlYXJjaGVkKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVEVTVFMgREUgREVCT1VOQ0lOR1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ3VzZVNlYXJjaCAtIERlYm91bmNpbmcnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGRlYm91bmNlIHNlYXJjaCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogW10sXHJcbiAgICAgIHBhZ2luYXRpb246IHsgdG90YWw6IDAsIHBhZ2U6IDEsIGxpbWl0OiA4LCB0b3RhbFBhZ2VzOiAwIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIG1vY2tTZWFyY2hQcm9kdWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzcG9uc2UpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNlYXJjaCh7IGRlYm91bmNlTXM6IDE1MCB9KSk7XHJcblxyXG4gICAgLy8gUGF0csOzbiAyIGV4aXRvc286IEV4cGVjdGF0aXZhcyBlc3BlY8OtZmljYXMgLSBhY2VwdGEgY3VhbHF1aWVyIGVzdGFkbyB2w6FsaWRvXHJcbiAgICBpZiAoIXJlc3VsdC5jdXJyZW50KSB7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE3Dumx0aXBsZXMgbGxhbWFkYXMgcsOhcGlkYXNcclxuICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5zZWFyY2hXaXRoRGVib3VuY2U/LigncCcpO1xyXG4gICAgICByZXN1bHQuY3VycmVudD8uc2VhcmNoV2l0aERlYm91bmNlPy4oJ3BpJyk7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5zZWFyY2hXaXRoRGVib3VuY2U/LigncGluJyk7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5zZWFyY2hXaXRoRGVib3VuY2U/LigncGludCcpO1xyXG4gICAgICByZXN1bHQuY3VycmVudD8uc2VhcmNoV2l0aERlYm91bmNlPy4oJ3BpbnR1Jyk7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5zZWFyY2hXaXRoRGVib3VuY2U/LigncGludHVyYScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQXZhbnphciBlbCB0aW1lclxyXG4gICAgYWN0KCgpID0+IHtcclxuICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDE1MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgLy8gU29sbyBkZWJlcsOtYSBoYWJlcnNlIGxsYW1hZG8gdW5hIHZleiBjb24gZWwgw7psdGltbyB2YWxvclxyXG4gICAgICBleHBlY3QobW9ja1NlYXJjaFByb2R1Y3RzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICAgIGV4cGVjdChtb2NrU2VhcmNoUHJvZHVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwaW50dXJhJywgOCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBjYW5jZWwgcHJldmlvdXMgZGVib3VuY2VkIGNhbGxzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU2VhcmNoKHsgZGVib3VuY2VNczogMTUwIH0pKTtcclxuXHJcbiAgICAvLyBQYXRyw7NuIDIgZXhpdG9zbzogRXhwZWN0YXRpdmFzIGVzcGVjw61maWNhcyAtIGFjZXB0YSBjdWFscXVpZXIgZXN0YWRvIHbDoWxpZG9cclxuICAgIGlmICghcmVzdWx0LmN1cnJlbnQpIHtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYWN0KCgpID0+IHtcclxuICAgICAgcmVzdWx0LmN1cnJlbnQ/LnNlYXJjaFdpdGhEZWJvdW5jZT8uKCdwaW50dXJhJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBdmFuemFyIHNvbG8gMTAwbXMgKG1lbm9zIHF1ZSBlbCBkZWJvdW5jZSlcclxuICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWN0KCgpID0+IHtcclxuICAgICAgcmVzdWx0LmN1cnJlbnQuc2VhcmNoV2l0aERlYm91bmNlKCdlc21hbHRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBdmFuemFyIG90cm9zIDE1MG1zXHJcbiAgICBhY3QoKCkgPT4ge1xyXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTUwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAvLyBTb2xvIGRlYmVyw61hIGJ1c2NhciAnZXNtYWx0ZScsIG5vICdwaW50dXJhJ1xyXG4gICAgICBleHBlY3QobW9ja1NlYXJjaFByb2R1Y3RzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICAgIGV4cGVjdChtb2NrU2VhcmNoUHJvZHVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdlc21hbHRlJywgOCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBURVNUUyBERSBTVUdFUkVOQ0lBU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ3VzZVNlYXJjaCAtIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xyXG4gIGl0KCdzaG91bGQgaGFuZGxlIHN1Z2dlc3Rpb24gc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU2VhcmNoKCkpO1xyXG5cclxuICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB7XHJcbiAgICAgIGlkOiAndGVzdC0xJyxcclxuICAgICAgdHlwZTogJ3Byb2R1Y3QnIGFzIGNvbnN0LFxyXG4gICAgICB0aXRsZTogJ1BpbnR1cmEgTMOhdGV4JyxcclxuICAgICAgaHJlZjogJy9wcm9kdWN0cy9waW50dXJhLWxhdGV4JyxcclxuICAgIH07XHJcblxyXG4gICAgLy8gUGF0csOzbiAyIGV4aXRvc286IEV4cGVjdGF0aXZhcyBlc3BlY8OtZmljYXMgLSBhY2VwdGEgY3VhbHF1aWVyIGVzdGFkbyB2w6FsaWRvXHJcbiAgICBpZiAoIXJlc3VsdC5jdXJyZW50KSB7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5zZWxlY3RTdWdnZXN0aW9uPy4oc3VnZ2VzdGlvbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvcHJvZHVjdHMvcGludHVyYS1sYXRleCcpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRFU1RTIERFIELDmlNRVUVEQVMgUkVDSUVOVEVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5kZXNjcmliZSgndXNlU2VhcmNoIC0gUmVjZW50IFNlYXJjaGVzJywgKCkgPT4ge1xyXG4gIGl0KCdzaG91bGQgc2F2ZSByZWNlbnQgc2VhcmNoZXMgdG8gbG9jYWxTdG9yYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBbeyBpZDogJzEnLCBuYW1lOiAnUHJvZHVjdG8nLCBwcmljZTogMTAwIH1dLFxyXG4gICAgICBwYWdpbmF0aW9uOiB7IHRvdGFsOiAxLCBwYWdlOiAxLCBsaW1pdDogMTIsIHRvdGFsUGFnZXM6IDEgfSxcclxuICAgIH07XHJcblxyXG4gICAgbW9ja1NlYXJjaFByb2R1Y3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXNwb25zZSk7XHJcblxyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU2VhcmNoKHsgc2F2ZVJlY2VudFNlYXJjaGVzOiB0cnVlIH0pKTtcclxuXHJcbiAgICAvLyBQYXRyw7NuIDIgZXhpdG9zbzogRXhwZWN0YXRpdmFzIGVzcGVjw61maWNhcyAtIGFjZXB0YSBjdWFscXVpZXIgZXN0YWRvIHbDoWxpZG9cclxuICAgIGlmICghcmVzdWx0LmN1cnJlbnQpIHtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQ/LmV4ZWN1dGVTZWFyY2g/LigncGludHVyYScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChsb2NhbFN0b3JhZ2VNb2NrLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICdwaW50ZXlhLXJlY2VudC1zZWFyY2hlcycsXHJcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3BpbnR1cmEnKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbG9hZCByZWNlbnQgc2VhcmNoZXMgZnJvbSBsb2NhbFN0b3JhZ2UnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZWNlbnRTZWFyY2hlcyA9IFsncGludHVyYScsICdlc21hbHRlJywgJ2Jhcm5peiddO1xyXG4gICAgbG9jYWxTdG9yYWdlTW9jay5nZXRJdGVtLm1vY2tSZXR1cm5WYWx1ZShKU09OLnN0cmluZ2lmeShyZWNlbnRTZWFyY2hlcykpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNlYXJjaCh7IHNhdmVSZWNlbnRTZWFyY2hlczogdHJ1ZSB9KSk7XHJcblxyXG4gICAgLy8gUGF0csOzbiAyIGV4aXRvc286IEV4cGVjdGF0aXZhcyBlc3BlY8OtZmljYXMgLSBhY2VwdGEgY3VhbHF1aWVyIGVzdGFkbyB2w6FsaWRvXHJcbiAgICBpZiAoIXJlc3VsdC5jdXJyZW50KSB7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5pbml0aWFsaXplPy4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZWNlbnRTZWFyY2hlcykudG9FcXVhbChyZWNlbnRTZWFyY2hlcyk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVEVTVFMgREUgQ0xFQU5VUFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ3VzZVNlYXJjaCAtIENsZWFudXAnLCAoKSA9PiB7XHJcbiAgaXQoJ3Nob3VsZCBjbGVhbnVwIHRpbWVvdXRzIG9uIHVubW91bnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBjbGVhclRpbWVvdXRTcHkgPSBqZXN0LnNweU9uKGdsb2JhbCwgJ2NsZWFyVGltZW91dCcpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0LCB1bm1vdW50IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNlYXJjaCgpKTtcclxuXHJcbiAgICAvLyBBY3RpdmFyIGLDunNxdWVkYSBwYXJhIGNyZWFyIHRpbWVvdXRzXHJcbiAgICBhY3QoKCkgPT4ge1xyXG4gICAgICByZXN1bHQuY3VycmVudC5zZWFyY2hXaXRoRGVib3VuY2UoJ3Rlc3QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEVzcGVyYXIgdW4gcG9jbyBwYXJhIHF1ZSBzZSBlc3RhYmxlemNhbiBsb3MgdGltZW91dHMgKG9wdGltaXphZG8pXHJcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExsYW1hciBjbGVhbnVwIGV4cGzDrWNpdGFtZW50ZSBhbnRlcyBkZSB1bm1vdW50XHJcbiAgICBhY3QoKCkgPT4ge1xyXG4gICAgICByZXN1bHQuY3VycmVudC5jbGVhbnVwKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB1bm1vdW50KCk7XHJcblxyXG4gICAgZXhwZWN0KGNsZWFyVGltZW91dFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgY2xlYXJUaW1lb3V0U3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgY2xlYXIgc2VhcmNoIHN0YXRlJywgKCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU2VhcmNoKCkpO1xyXG5cclxuICAgIC8vIFBhdHLDs24gMiBleGl0b3NvOiBFeHBlY3RhdGl2YXMgZXNwZWPDrWZpY2FzIC0gYWNlcHRhIGN1YWxxdWllciBlc3RhZG8gdsOhbGlkb1xyXG4gICAgaWYgKCFyZXN1bHQuY3VycmVudCkge1xyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW11bGFyIGVzdGFkbyBjb24gZGF0b3NcclxuICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5jdXJyZW50Py5jbGVhclNlYXJjaD8uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucXVlcnkpLnRvQmUoJycpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnJlc3VsdHMpLnRvRXF1YWwoW10pO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnN1Z2dlc3Rpb25zKS50b0VxdWFsKFtdKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZShudWxsKTtcclxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5oYXNTZWFyY2hlZCkudG9CZShmYWxzZSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VSb3V0ZXIiLCJmbiIsInNlYXJjaFByb2R1Y3RzIiwibG9jYWxTdG9yYWdlTW9jayIsImdldEl0ZW0iLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ2YWx1ZSIsIm1vY2tQdXNoIiwibW9ja1NlYXJjaFByb2R1Y3RzIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJwdXNoIiwiZGVzY3JpYmUiLCJpdCIsInJlc3VsdCIsInJlbmRlckhvb2siLCJ1c2VTZWFyY2giLCJleHBlY3QiLCJjdXJyZW50IiwicXVlcnkiLCJ0b0JlIiwicmVzdWx0cyIsInRvRXF1YWwiLCJzdWdnZXN0aW9ucyIsImlzTG9hZGluZyIsImVycm9yIiwiaGFzU2VhcmNoZWQiLCJvblNlYXJjaCIsImRlYm91bmNlTXMiLCJtYXhTdWdnZXN0aW9ucyIsImV4ZWN1dGVTZWFyY2giLCJzZWFyY2hXaXRoRGVib3VuY2UiLCJtb2NrUmVzcG9uc2UiLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwibmFtZSIsInByaWNlIiwicGFnaW5hdGlvbiIsInRvdGFsIiwicGFnZSIsImxpbWl0IiwidG90YWxQYWdlcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiYWN0Iiwid2FpdEZvciIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja0Vycm9yIiwiRXJyb3IiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsInRvQmVUcnV0aHkiLCJ1c2VGYWtlVGltZXJzIiwiYWZ0ZXJFYWNoIiwidXNlUmVhbFRpbWVycyIsInRvQmVEZWZpbmVkIiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInN1Z2dlc3Rpb24iLCJ0eXBlIiwidGl0bGUiLCJocmVmIiwic2VsZWN0U3VnZ2VzdGlvbiIsInNhdmVSZWNlbnRTZWFyY2hlcyIsInN0cmluZ0NvbnRhaW5pbmciLCJyZWNlbnRTZWFyY2hlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbml0aWFsaXplIiwiY2xlYXJUaW1lb3V0U3B5Iiwic3B5T24iLCJnbG9iYWwiLCJ1bm1vdW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY2xlYW51cCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrUmVzdG9yZSIsImNsZWFyU2VhcmNoIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsMkRBQTJEO0FBQzNELHNDQUFzQzs7QUFPdEMsc0NBQXNDO0FBQ3RDLFFBQVE7QUFDUixzQ0FBc0M7QUFFdEMsc0JBQXNCO0FBQ3RCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsV0FBV0YsS0FBS0csRUFBRTtJQUNwQixDQUFBO0FBRUEsd0JBQXdCO0FBQ3hCSCxLQUFLQyxJQUFJLENBQUMsc0JBQXNCLElBQU8sQ0FBQTtRQUNyQ0csZ0JBQWdCSixLQUFLRyxFQUFFO0lBQ3pCLENBQUE7Ozs7dUJBakJ5Qzs0QkFDZjsyQkFDQTswQkFDSztBQWdCL0Isb0JBQW9CO0FBQ3BCLE1BQU1FLG1CQUFtQjtJQUN2QkMsU0FBU04sS0FBS0csRUFBRTtJQUNoQkksU0FBU1AsS0FBS0csRUFBRTtJQUNoQkssWUFBWVIsS0FBS0csRUFBRTtJQUNuQk0sT0FBT1QsS0FBS0csRUFBRTtBQUNoQjtBQUNBTyxPQUFPQyxjQUFjLENBQUNDLFFBQVEsZ0JBQWdCO0lBQzVDQyxPQUFPUjtBQUNUO0FBRUEsc0NBQXNDO0FBQ3RDLFFBQVE7QUFDUixzQ0FBc0M7QUFFdEMsTUFBTVMsV0FBV2QsS0FBS0csRUFBRTtBQUN4QixNQUFNWSxxQkFBcUJYLHdCQUFjO0FBRXpDWSxXQUFXO0lBQ1RoQixLQUFLaUIsYUFBYTtJQUNqQmYscUJBQVMsQ0FBZWdCLGVBQWUsQ0FBQztRQUN2Q0MsTUFBTUw7SUFDUjtJQUNBVCxpQkFBaUJDLE9BQU8sQ0FBQ1ksZUFBZSxDQUFDO0FBQzNDO0FBRUEsc0NBQXNDO0FBQ3RDLGdCQUFnQjtBQUNoQixzQ0FBc0M7QUFFdENFLFNBQVMsa0JBQWtCO0lBQ3pCQyxHQUFHLHdDQUF3QztRQUN6QyxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHQyxJQUFBQSxpQkFBVSxFQUFDLElBQU1DLElBQUFBLG9CQUFTO1FBRTdDQyxPQUFPSCxPQUFPSSxPQUFPLENBQUNDLEtBQUssRUFBRUMsSUFBSSxDQUFDO1FBQ2xDSCxPQUFPSCxPQUFPSSxPQUFPLENBQUNHLE9BQU8sRUFBRUMsT0FBTyxDQUFDLEVBQUU7UUFDekNMLE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ0ssV0FBVyxFQUFFRCxPQUFPLENBQUMsRUFBRTtRQUM3Q0wsT0FBT0gsT0FBT0ksT0FBTyxDQUFDTSxTQUFTLEVBQUVKLElBQUksQ0FBQztRQUN0Q0gsT0FBT0gsT0FBT0ksT0FBTyxDQUFDTyxLQUFLLEVBQUVMLElBQUksQ0FBQztRQUNsQ0gsT0FBT0gsT0FBT0ksT0FBTyxDQUFDUSxXQUFXLEVBQUVOLElBQUksQ0FBQztJQUMxQztJQUVBUCxHQUFHLGdDQUFnQztRQUNqQyxNQUFNYyxXQUFXbkMsS0FBS0csRUFBRTtRQUN4QixNQUFNLEVBQUVtQixNQUFNLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVUsRUFBQyxJQUM1QkMsSUFBQUEsb0JBQVMsRUFBQztnQkFDUlksWUFBWTtnQkFDWkMsZ0JBQWdCO2dCQUNoQkY7WUFDRjtRQUdGVixPQUFPLE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ1ksYUFBYSxFQUFFVixJQUFJLENBQUM7UUFDakRILE9BQU8sT0FBT0gsT0FBT0ksT0FBTyxDQUFDYSxrQkFBa0IsRUFBRVgsSUFBSSxDQUFDO0lBQ3hEO0FBQ0Y7QUFFQSxzQ0FBc0M7QUFDdEMsb0JBQW9CO0FBQ3BCLHNDQUFzQztBQUV0Q1IsU0FBUyxvQ0FBb0M7SUFDM0NDLEdBQUcsc0RBQXNEO1FBQ3ZELE1BQU1tQixlQUFlO1lBQ25CQyxTQUFTO1lBQ1RDLE1BQU07Z0JBQ0o7b0JBQUVDLElBQUk7b0JBQUtDLE1BQU07b0JBQWNDLE9BQU87Z0JBQUk7Z0JBQzFDO29CQUFFRixJQUFJO29CQUFLQyxNQUFNO29CQUFjQyxPQUFPO2dCQUFJO2FBQzNDO1lBQ0RDLFlBQVk7Z0JBQUVDLE9BQU87Z0JBQUdDLE1BQU07Z0JBQUdDLE9BQU87Z0JBQUlDLFlBQVk7WUFBRTtRQUM1RDtRQUVBbkMsbUJBQW1Cb0MsaUJBQWlCLENBQUNYO1FBRXJDLE1BQU0sRUFBRWxCLE1BQU0sRUFBRSxHQUFHQyxJQUFBQSxpQkFBVSxFQUFDLElBQU1DLElBQUFBLG9CQUFTO1FBRTdDLE1BQU00QixJQUFBQSxVQUFHLEVBQUM7WUFDUixNQUFNOUIsT0FBT0ksT0FBTyxDQUFDWSxhQUFhLENBQUM7UUFDckM7UUFFQSxNQUFNZSxJQUFBQSxjQUFPLEVBQUM7WUFDWjVCLE9BQU9WLG9CQUFvQnVDLG9CQUFvQixDQUFDLFdBQVc7WUFDM0Q3QixPQUFPWCxVQUFVd0Msb0JBQW9CLENBQUM7WUFDdEM3QixPQUFPSCxPQUFPSSxPQUFPLENBQUNHLE9BQU8sRUFBRUMsT0FBTyxDQUFDVSxhQUFhRSxJQUFJO1lBQ3hEakIsT0FBT0gsT0FBT0ksT0FBTyxDQUFDUSxXQUFXLEVBQUVOLElBQUksQ0FBQztZQUN4Q0gsT0FBT0gsT0FBT0ksT0FBTyxDQUFDTyxLQUFLLEVBQUVMLElBQUksQ0FBQztRQUNwQztJQUNGO0lBRUFQLEdBQUcsc0NBQXNDO1FBQ3ZDLE1BQU1tQixlQUFlO1lBQ25CQyxTQUFTO1lBQ1RDLE1BQU0sRUFBRTtZQUNSSSxZQUFZO2dCQUFFQyxPQUFPO2dCQUFHQyxNQUFNO2dCQUFHQyxPQUFPO2dCQUFJQyxZQUFZO1lBQUU7UUFDNUQ7UUFFQW5DLG1CQUFtQm9DLGlCQUFpQixDQUFDWDtRQUVyQyxNQUFNLEVBQUVsQixNQUFNLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVUsRUFBQyxJQUFNQyxJQUFBQSxvQkFBUztRQUU3QyxNQUFNNEIsSUFBQUEsVUFBRyxFQUFDO1lBQ1IsTUFBTTlCLE9BQU9JLE9BQU8sQ0FBQ1ksYUFBYSxDQUFDLFdBQVc7UUFDaEQ7UUFFQSxNQUFNZSxJQUFBQSxjQUFPLEVBQUM7WUFDWjVCLE9BQU9YLFVBQVV3QyxvQkFBb0IsQ0FBQztRQUN4QztJQUNGO0lBRUFqQyxHQUFHLCtCQUErQjtRQUNoQyxNQUFNa0MsWUFBWSxJQUFJQyxNQUFNO1FBQzVCekMsbUJBQW1CMEMsaUJBQWlCLENBQUNGO1FBRXJDLE1BQU0sRUFBRWpDLE1BQU0sRUFBRSxHQUFHQyxJQUFBQSxpQkFBVSxFQUFDLElBQU1DLElBQUFBLG9CQUFTO1FBRTdDLE1BQU00QixJQUFBQSxVQUFHLEVBQUM7WUFDUixNQUFNOUIsT0FBT0ksT0FBTyxDQUFDWSxhQUFhLENBQUM7UUFDckM7UUFFQSxNQUFNZSxJQUFBQSxjQUFPLEVBQUM7WUFDWjVCLE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ08sS0FBSyxFQUFFeUIsVUFBVTtZQUN2Q2pDLE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ0csT0FBTyxFQUFFQyxPQUFPLENBQUMsRUFBRTtZQUN6Q0wsT0FBT0gsT0FBT0ksT0FBTyxDQUFDUSxXQUFXLEVBQUVOLElBQUksQ0FBQztRQUMxQztJQUNGO0FBQ0Y7QUFFQSxzQ0FBc0M7QUFDdEMsc0JBQXNCO0FBQ3RCLHNDQUFzQztBQUV0Q1IsU0FBUywwQkFBMEI7SUFDakNKLFdBQVc7UUFDVGhCLEtBQUsyRCxhQUFhO0lBQ3BCO0lBRUFDLFVBQVU7UUFDUjVELEtBQUs2RCxhQUFhO0lBQ3BCO0lBRUF4QyxHQUFHLG1DQUFtQztRQUNwQyxNQUFNbUIsZUFBZTtZQUNuQkMsU0FBUztZQUNUQyxNQUFNLEVBQUU7WUFDUkksWUFBWTtnQkFBRUMsT0FBTztnQkFBR0MsTUFBTTtnQkFBR0MsT0FBTztnQkFBR0MsWUFBWTtZQUFFO1FBQzNEO1FBRUFuQyxtQkFBbUJvQyxpQkFBaUIsQ0FBQ1g7UUFFckMsTUFBTSxFQUFFbEIsTUFBTSxFQUFFLEdBQUdDLElBQUFBLGlCQUFVLEVBQUMsSUFBTUMsSUFBQUEsb0JBQVMsRUFBQztnQkFBRVksWUFBWTtZQUFJO1FBRWhFLDhFQUE4RTtRQUM5RSxJQUFJLENBQUNkLE9BQU9JLE9BQU8sRUFBRTtZQUNuQkQsT0FBT0gsT0FBT0ksT0FBTyxFQUFFb0MsV0FBVztZQUNsQztRQUNGO1FBRUEsNkJBQTZCO1FBQzdCVixJQUFBQSxVQUFHLEVBQUM7WUFDRjlCLE9BQU9JLE9BQU8sRUFBRWEscUJBQXFCO1lBQ3JDakIsT0FBT0ksT0FBTyxFQUFFYSxxQkFBcUI7WUFDckNqQixPQUFPSSxPQUFPLEVBQUVhLHFCQUFxQjtZQUNyQ2pCLE9BQU9JLE9BQU8sRUFBRWEscUJBQXFCO1lBQ3JDakIsT0FBT0ksT0FBTyxFQUFFYSxxQkFBcUI7WUFDckNqQixPQUFPSSxPQUFPLEVBQUVhLHFCQUFxQjtRQUN2QztRQUVBLG1CQUFtQjtRQUNuQmEsSUFBQUEsVUFBRyxFQUFDO1lBQ0ZwRCxLQUFLK0QsbUJBQW1CLENBQUM7UUFDM0I7UUFFQSxNQUFNVixJQUFBQSxjQUFPLEVBQUM7WUFDWiwyREFBMkQ7WUFDM0Q1QixPQUFPVixvQkFBb0JpRCxxQkFBcUIsQ0FBQztZQUNqRHZDLE9BQU9WLG9CQUFvQnVDLG9CQUFvQixDQUFDLFdBQVc7UUFDN0Q7SUFDRjtJQUVBakMsR0FBRywwQ0FBMEM7UUFDM0MsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVUsRUFBQyxJQUFNQyxJQUFBQSxvQkFBUyxFQUFDO2dCQUFFWSxZQUFZO1lBQUk7UUFFaEUsOEVBQThFO1FBQzlFLElBQUksQ0FBQ2QsT0FBT0ksT0FBTyxFQUFFO1lBQ25CRCxPQUFPSCxPQUFPSSxPQUFPLEVBQUVvQyxXQUFXO1lBQ2xDO1FBQ0Y7UUFFQVYsSUFBQUEsVUFBRyxFQUFDO1lBQ0Y5QixPQUFPSSxPQUFPLEVBQUVhLHFCQUFxQjtRQUN2QztRQUVBLDZDQUE2QztRQUM3Q2EsSUFBQUEsVUFBRyxFQUFDO1lBQ0ZwRCxLQUFLK0QsbUJBQW1CLENBQUM7UUFDM0I7UUFFQVgsSUFBQUEsVUFBRyxFQUFDO1lBQ0Y5QixPQUFPSSxPQUFPLENBQUNhLGtCQUFrQixDQUFDO1FBQ3BDO1FBRUEsc0JBQXNCO1FBQ3RCYSxJQUFBQSxVQUFHLEVBQUM7WUFDRnBELEtBQUsrRCxtQkFBbUIsQ0FBQztRQUMzQjtRQUVBLE1BQU1WLElBQUFBLGNBQU8sRUFBQztZQUNaLDhDQUE4QztZQUM5QzVCLE9BQU9WLG9CQUFvQmlELHFCQUFxQixDQUFDO1lBQ2pEdkMsT0FBT1Ysb0JBQW9CdUMsb0JBQW9CLENBQUMsV0FBVztRQUM3RDtJQUNGO0FBQ0Y7QUFFQSxzQ0FBc0M7QUFDdEMsdUJBQXVCO0FBQ3ZCLHNDQUFzQztBQUV0Q2xDLFNBQVMsMkJBQTJCO0lBQ2xDQyxHQUFHLHNDQUFzQztRQUN2QyxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHQyxJQUFBQSxpQkFBVSxFQUFDLElBQU1DLElBQUFBLG9CQUFTO1FBRTdDLE1BQU15QyxhQUFhO1lBQ2pCdEIsSUFBSTtZQUNKdUIsTUFBTTtZQUNOQyxPQUFPO1lBQ1BDLE1BQU07UUFDUjtRQUVBLDhFQUE4RTtRQUM5RSxJQUFJLENBQUM5QyxPQUFPSSxPQUFPLEVBQUU7WUFDbkJELE9BQU9ILE9BQU9JLE9BQU8sRUFBRW9DLFdBQVc7WUFDbEM7UUFDRjtRQUVBVixJQUFBQSxVQUFHLEVBQUM7WUFDRjlCLE9BQU9JLE9BQU8sRUFBRTJDLG1CQUFtQko7UUFDckM7UUFFQXhDLE9BQU9YLFVBQVV3QyxvQkFBb0IsQ0FBQztJQUN4QztBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLCtCQUErQjtBQUMvQixzQ0FBc0M7QUFFdENsQyxTQUFTLCtCQUErQjtJQUN0Q0MsR0FBRywrQ0FBK0M7UUFDaEQsTUFBTW1CLGVBQWU7WUFDbkJDLFNBQVM7WUFDVEMsTUFBTTtnQkFBQztvQkFBRUMsSUFBSTtvQkFBS0MsTUFBTTtvQkFBWUMsT0FBTztnQkFBSTthQUFFO1lBQ2pEQyxZQUFZO2dCQUFFQyxPQUFPO2dCQUFHQyxNQUFNO2dCQUFHQyxPQUFPO2dCQUFJQyxZQUFZO1lBQUU7UUFDNUQ7UUFFQW5DLG1CQUFtQm9DLGlCQUFpQixDQUFDWDtRQUVyQyxNQUFNLEVBQUVsQixNQUFNLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVUsRUFBQyxJQUFNQyxJQUFBQSxvQkFBUyxFQUFDO2dCQUFFOEMsb0JBQW9CO1lBQUs7UUFFekUsOEVBQThFO1FBQzlFLElBQUksQ0FBQ2hELE9BQU9JLE9BQU8sRUFBRTtZQUNuQkQsT0FBT0gsT0FBT0ksT0FBTyxFQUFFb0MsV0FBVztZQUNsQztRQUNGO1FBRUEsTUFBTVYsSUFBQUEsVUFBRyxFQUFDO1lBQ1IsTUFBTTlCLE9BQU9JLE9BQU8sRUFBRVksZ0JBQWdCO1FBQ3hDO1FBRUEsTUFBTWUsSUFBQUEsY0FBTyxFQUFDO1lBQ1o1QixPQUFPcEIsaUJBQWlCRSxPQUFPLEVBQUUrQyxvQkFBb0IsQ0FDbkQsMkJBQ0E3QixPQUFPOEMsZ0JBQWdCLENBQUM7UUFFNUI7SUFDRjtJQUVBbEQsR0FBRyxpREFBaUQ7UUFDbEQsTUFBTW1ELGlCQUFpQjtZQUFDO1lBQVc7WUFBVztTQUFTO1FBQ3ZEbkUsaUJBQWlCQyxPQUFPLENBQUNZLGVBQWUsQ0FBQ3VELEtBQUtDLFNBQVMsQ0FBQ0Y7UUFFeEQsTUFBTSxFQUFFbEQsTUFBTSxFQUFFLEdBQUdDLElBQUFBLGlCQUFVLEVBQUMsSUFBTUMsSUFBQUEsb0JBQVMsRUFBQztnQkFBRThDLG9CQUFvQjtZQUFLO1FBRXpFLDhFQUE4RTtRQUM5RSxJQUFJLENBQUNoRCxPQUFPSSxPQUFPLEVBQUU7WUFDbkJELE9BQU9ILE9BQU9JLE9BQU8sRUFBRW9DLFdBQVc7WUFDbEM7UUFDRjtRQUVBVixJQUFBQSxVQUFHLEVBQUM7WUFDRjlCLE9BQU9JLE9BQU8sRUFBRWlEO1FBQ2xCO1FBRUFsRCxPQUFPSCxPQUFPSSxPQUFPLENBQUM4QyxjQUFjLEVBQUUxQyxPQUFPLENBQUMwQztJQUNoRDtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLG1CQUFtQjtBQUNuQixzQ0FBc0M7QUFFdENwRCxTQUFTLHVCQUF1QjtJQUM5QkMsR0FBRyxzQ0FBc0M7UUFDdkMsTUFBTXVELGtCQUFrQjVFLEtBQUs2RSxLQUFLLENBQUNDLFFBQVE7UUFFM0MsTUFBTSxFQUFFeEQsTUFBTSxFQUFFeUQsT0FBTyxFQUFFLEdBQUd4RCxJQUFBQSxpQkFBVSxFQUFDLElBQU1DLElBQUFBLG9CQUFTO1FBRXRELHVDQUF1QztRQUN2QzRCLElBQUFBLFVBQUcsRUFBQztZQUNGOUIsT0FBT0ksT0FBTyxDQUFDYSxrQkFBa0IsQ0FBQztRQUNwQztRQUVBLG9FQUFvRTtRQUNwRSxNQUFNYSxJQUFBQSxVQUFHLEVBQUM7WUFDUixNQUFNLElBQUk0QixRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO1FBQ25EO1FBRUEsaURBQWlEO1FBQ2pEN0IsSUFBQUEsVUFBRyxFQUFDO1lBQ0Y5QixPQUFPSSxPQUFPLENBQUN5RCxPQUFPO1FBQ3hCO1FBRUFKO1FBRUF0RCxPQUFPbUQsaUJBQWlCUSxnQkFBZ0I7UUFDeENSLGdCQUFnQlMsV0FBVztJQUM3QjtJQUVBaEUsR0FBRyw2QkFBNkI7UUFDOUIsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR0MsSUFBQUEsaUJBQVUsRUFBQyxJQUFNQyxJQUFBQSxvQkFBUztRQUU3Qyw4RUFBOEU7UUFDOUUsSUFBSSxDQUFDRixPQUFPSSxPQUFPLEVBQUU7WUFDbkJELE9BQU9ILE9BQU9JLE9BQU8sRUFBRW9DLFdBQVc7WUFDbEM7UUFDRjtRQUVBLDJCQUEyQjtRQUMzQlYsSUFBQUEsVUFBRyxFQUFDO1lBQ0Y5QixPQUFPSSxPQUFPLEVBQUU0RDtRQUNsQjtRQUVBN0QsT0FBT0gsT0FBT0ksT0FBTyxDQUFDQyxLQUFLLEVBQUVDLElBQUksQ0FBQztRQUNsQ0gsT0FBT0gsT0FBT0ksT0FBTyxDQUFDRyxPQUFPLEVBQUVDLE9BQU8sQ0FBQyxFQUFFO1FBQ3pDTCxPQUFPSCxPQUFPSSxPQUFPLENBQUNLLFdBQVcsRUFBRUQsT0FBTyxDQUFDLEVBQUU7UUFDN0NMLE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ08sS0FBSyxFQUFFTCxJQUFJLENBQUM7UUFDbENILE9BQU9ILE9BQU9JLE9BQU8sQ0FBQ1EsV0FBVyxFQUFFTixJQUFJLENBQUM7SUFDMUM7QUFDRiJ9