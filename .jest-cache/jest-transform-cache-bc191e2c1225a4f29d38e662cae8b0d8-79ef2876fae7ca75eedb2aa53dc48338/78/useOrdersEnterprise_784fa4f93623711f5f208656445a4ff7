dc8c0c370d64092ee1261e520ed333ba
// ===================================
// PINTEYA E-COMMERCE - ORDERS ENTERPRISE HOOK
// ===================================
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    useOrderDetail: function() {
        return useOrderDetail;
    },
    useOrdersEnterprise: function() {
        return useOrdersEnterprise;
    }
});
const _react = require("react");
function useOrdersEnterprise(initialFilters) {
    const [state, setState] = (0, _react.useState)({
        orders: [],
        loading: true,
        error: null,
        filters: {
            page: 1,
            limit: 20,
            sort_by: 'created_at',
            sort_order: 'desc',
            ...initialFilters
        },
        pagination: {
            page: 1,
            limit: 20,
            total: 0,
            totalPages: 0,
            hasNextPage: false,
            hasPreviousPage: false
        }
    });
    // ===================================
    // FUNCIONES DE API
    // ===================================
    const fetchOrders = (0, _react.useCallback)(async (filters)=>{
        setState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const queryParams = new URLSearchParams();
            Object.entries(filters).forEach(([key, value])=>{
                if (value !== undefined && value !== null && value !== '') {
                    queryParams.append(key, value.toString());
                }
            });
            const response = await fetch(`/api/admin/orders?${queryParams}`);
            const data = await response.json();
            if (!response.ok) {
                throw new Error(data.data?.toString() || 'Error al cargar órdenes');
            }
            setState((prev)=>({
                    ...prev,
                    orders: data.data.orders,
                    pagination: data.data.pagination,
                    filters: data.data.filters,
                    loading: false
                }));
        } catch (error) {
            setState((prev)=>({
                    ...prev,
                    error: error instanceof Error ? error.message : 'Error desconocido',
                    loading: false
                }));
        }
    }, []);
    const createOrder = (0, _react.useCallback)(async (orderData)=>{
        const response = await fetch('/api/admin/orders', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(orderData)
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'Error al crear orden');
        }
        // Refrescar lista después de crear
        await fetchOrders(state.filters);
        return data.data;
    }, [
        state.filters,
        fetchOrders
    ]);
    const updateOrder = (0, _react.useCallback)(async (orderId, orderData)=>{
        const response = await fetch(`/api/admin/orders/${orderId}`, {
            method: 'PATCH',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(orderData)
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'Error al actualizar orden');
        }
        // Actualizar orden en el estado local
        setState((prev)=>({
                ...prev,
                orders: prev.orders.map((order)=>order.id === orderId ? {
                        ...order,
                        ...data.data
                    } : order)
            }));
        return data.data;
    }, []);
    const changeOrderStatus = (0, _react.useCallback)(async (orderId, newStatus, reason, additionalData)=>{
        const response = await fetch(`/api/admin/orders/${orderId}/status`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                status: newStatus,
                reason,
                ...additionalData
            })
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'Error al cambiar estado');
        }
        // Actualizar orden en el estado local
        setState((prev)=>({
                ...prev,
                orders: prev.orders.map((order)=>order.id === orderId ? {
                        ...order,
                        status: newStatus
                    } : order)
            }));
    }, []);
    const bulkUpdateStatus = (0, _react.useCallback)(async (bulkData)=>{
        const response = await fetch('/api/admin/orders/bulk?operation=status_update', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(bulkData)
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'Error en operación masiva');
        }
        // Refrescar lista después de operación masiva
        await fetchOrders(state.filters);
        return data.data;
    }, [
        state.filters,
        fetchOrders
    ]);
    const exportOrders = (0, _react.useCallback)(async (format = 'csv', filters)=>{
        const response = await fetch('/api/admin/orders/bulk?operation=export', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                format,
                filters: filters || state.filters,
                include_items: true
            })
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.error || 'Error al exportar órdenes');
        }
        return data.data;
    }, [
        state.filters
    ]);
    // ===================================
    // FUNCIONES DE FILTRADO Y PAGINACIÓN
    // ===================================
    const updateFilters = (0, _react.useCallback)((newFilters)=>{
        const updatedFilters = {
            ...state.filters,
            ...newFilters,
            page: newFilters.page || 1
        };
        setState((prev)=>({
                ...prev,
                filters: updatedFilters
            }));
        fetchOrders(updatedFilters);
    }, [
        state.filters,
        fetchOrders
    ]);
    const setPage = (0, _react.useCallback)((page)=>{
        updateFilters({
            page
        });
    }, [
        updateFilters
    ]);
    const setSearch = (0, _react.useCallback)((search)=>{
        updateFilters({
            search,
            page: 1
        });
    }, [
        updateFilters
    ]);
    const setStatus = (0, _react.useCallback)((status)=>{
        updateFilters({
            status,
            page: 1
        });
    }, [
        updateFilters
    ]);
    const setPaymentStatus = (0, _react.useCallback)((payment_status)=>{
        updateFilters({
            payment_status,
            page: 1
        });
    }, [
        updateFilters
    ]);
    const setSorting = (0, _react.useCallback)((sort_by, sort_order)=>{
        updateFilters({
            sort_by,
            sort_order
        });
    }, [
        updateFilters
    ]);
    const setDateRange = (0, _react.useCallback)((date_from, date_to)=>{
        updateFilters({
            date_from,
            date_to,
            page: 1
        });
    }, [
        updateFilters
    ]);
    const clearFilters = (0, _react.useCallback)(()=>{
        const defaultFilters = {
            page: 1,
            limit: 20,
            sort_by: 'created_at',
            sort_order: 'desc'
        };
        setState((prev)=>({
                ...prev,
                filters: defaultFilters
            }));
        fetchOrders(defaultFilters);
    }, [
        fetchOrders
    ]);
    // ===================================
    // FUNCIONES DE UTILIDAD
    // ===================================
    const refresh = (0, _react.useCallback)(()=>{
        fetchOrders(state.filters);
    }, [
        state.filters,
        fetchOrders
    ]);
    const getOrderById = (0, _react.useCallback)((orderId)=>{
        return state.orders.find((order)=>order.id === orderId);
    }, [
        state.orders
    ]);
    const getOrdersByStatus = (0, _react.useCallback)((status)=>{
        return state.orders.filter((order)=>order.status === status);
    }, [
        state.orders
    ]);
    const getTotalRevenue = (0, _react.useCallback)(()=>{
        return state.orders.reduce((total, order)=>{
            return order.status !== 'cancelled' ? total + order.total_amount : total;
        }, 0);
    }, [
        state.orders
    ]);
    const getAverageOrderValue = (0, _react.useCallback)(()=>{
        const validOrders = state.orders.filter((order)=>order.status !== 'cancelled');
        if (validOrders.length === 0) return 0;
        const total = validOrders.reduce((sum, order)=>sum + order.total_amount, 0);
        return total / validOrders.length;
    }, [
        state.orders
    ]);
    // ===================================
    // EFECTOS
    // ===================================
    (0, _react.useEffect)(()=>{
        fetchOrders(state.filters);
    }, []); // Solo ejecutar una vez al montar
    // ===================================
    // RETURN DEL HOOK
    // ===================================
    return {
        // Estado
        orders: state.orders,
        loading: state.loading,
        error: state.error,
        filters: state.filters,
        pagination: state.pagination,
        // Operaciones CRUD
        createOrder,
        updateOrder,
        changeOrderStatus,
        bulkUpdateStatus,
        exportOrders,
        // Filtrado y paginación
        updateFilters,
        setPage,
        setSearch,
        setStatus,
        setPaymentStatus,
        setSorting,
        setDateRange,
        clearFilters,
        // Utilidades
        refresh,
        getOrderById,
        getOrdersByStatus,
        getTotalRevenue,
        getAverageOrderValue,
        // Funciones de conveniencia
        hasNextPage: state.pagination.hasNextPage,
        hasPreviousPage: state.pagination.hasPreviousPage,
        totalOrders: state.pagination.total,
        currentPage: state.pagination.page,
        totalPages: state.pagination.totalPages
    };
}
function useOrderDetail(orderId) {
    const [order, setOrder] = (0, _react.useState)(null);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const fetchOrder = (0, _react.useCallback)(async ()=>{
        if (!orderId) return;
        setLoading(true);
        setError(null);
        try {
            const response = await fetch(`/api/admin/orders/${orderId}`);
            const data = await response.json();
            if (!response.ok) {
                throw new Error(data.error || 'Error al cargar orden');
            }
            setOrder(data.data.order);
        } catch (error) {
            setError(error instanceof Error ? error.message : 'Error desconocido');
        } finally{
            setLoading(false);
        }
    }, [
        orderId
    ]);
    (0, _react.useEffect)(()=>{
        fetchOrder();
    }, [
        fetchOrder
    ]);
    return {
        order,
        loading,
        error,
        refresh: fetchOrder
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZU9yZGVyc0VudGVycHJpc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIE9SREVSUyBFTlRFUlBSSVNFIEhPT0tcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgT3JkZXJFbnRlcnByaXNlLCBcbiAgT3JkZXJGaWx0ZXJzLCBcbiAgT3JkZXJMaXN0UmVzcG9uc2UsXG4gIFVzZU9yZGVyc1N0YXRlLFxuICBCdWxrU3RhdHVzVXBkYXRlLFxuICBCdWxrU3RhdHVzVXBkYXRlUmVzdWx0XG59IGZyb20gJ0AvdHlwZXMvb3JkZXJzLWVudGVycHJpc2UnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSyBQUklOQ0lQQUxcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VPcmRlcnNFbnRlcnByaXNlKGluaXRpYWxGaWx0ZXJzPzogT3JkZXJGaWx0ZXJzKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8VXNlT3JkZXJzU3RhdGU+KHtcbiAgICBvcmRlcnM6IFtdLFxuICAgIGxvYWRpbmc6IHRydWUsXG4gICAgZXJyb3I6IG51bGwsXG4gICAgZmlsdGVyczoge1xuICAgICAgcGFnZTogMSxcbiAgICAgIGxpbWl0OiAyMCxcbiAgICAgIHNvcnRfYnk6ICdjcmVhdGVkX2F0JyxcbiAgICAgIHNvcnRfb3JkZXI6ICdkZXNjJyxcbiAgICAgIC4uLmluaXRpYWxGaWx0ZXJzLFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgcGFnZTogMSxcbiAgICAgIGxpbWl0OiAyMCxcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICAgIGhhc1ByZXZpb3VzUGFnZTogZmFsc2UsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIEFQSVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGNvbnN0IGZldGNoT3JkZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbHRlcnM6IE9yZGVyRmlsdGVycykgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGZpbHRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vb3JkZXJzPyR7cXVlcnlQYXJhbXN9YCk7XG4gICAgICBjb25zdCBkYXRhOiB7IGRhdGE6IE9yZGVyTGlzdFJlc3BvbnNlIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZGF0YT8udG9TdHJpbmcoKSB8fCAnRXJyb3IgYWwgY2FyZ2FyIMOzcmRlbmVzJyk7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgb3JkZXJzOiBkYXRhLmRhdGEub3JkZXJzLFxuICAgICAgICBwYWdpbmF0aW9uOiBkYXRhLmRhdGEucGFnaW5hdGlvbixcbiAgICAgICAgZmlsdGVyczogZGF0YS5kYXRhLmZpbHRlcnMsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbycsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNyZWF0ZU9yZGVyID0gdXNlQ2FsbGJhY2soYXN5bmMgKG9yZGVyRGF0YTogYW55KTogUHJvbWlzZTxPcmRlckVudGVycHJpc2U+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL29yZGVycycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSksXG4gICAgfSk7XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGFsIGNyZWFyIG9yZGVuJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmcmVzY2FyIGxpc3RhIGRlc3B1w6lzIGRlIGNyZWFyXG4gICAgYXdhaXQgZmV0Y2hPcmRlcnMoc3RhdGUuZmlsdGVycyk7XG5cbiAgICByZXR1cm4gZGF0YS5kYXRhO1xuICB9LCBbc3RhdGUuZmlsdGVycywgZmV0Y2hPcmRlcnNdKTtcblxuICBjb25zdCB1cGRhdGVPcmRlciA9IHVzZUNhbGxiYWNrKGFzeW5jIChvcmRlcklkOiBzdHJpbmcsIG9yZGVyRGF0YTogYW55KTogUHJvbWlzZTxPcmRlckVudGVycHJpc2U+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL29yZGVycy8ke29yZGVySWR9YCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9yZGVyRGF0YSksXG4gICAgfSk7XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGFsIGFjdHVhbGl6YXIgb3JkZW4nKTtcbiAgICB9XG5cbiAgICAvLyBBY3R1YWxpemFyIG9yZGVuIGVuIGVsIGVzdGFkbyBsb2NhbFxuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBvcmRlcnM6IHByZXYub3JkZXJzLm1hcChvcmRlciA9PiBcbiAgICAgICAgb3JkZXIuaWQgPT09IG9yZGVySWQgPyB7IC4uLm9yZGVyLCAuLi5kYXRhLmRhdGEgfSA6IG9yZGVyXG4gICAgICApLFxuICAgIH0pKTtcblxuICAgIHJldHVybiBkYXRhLmRhdGE7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjaGFuZ2VPcmRlclN0YXR1cyA9IHVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICBvcmRlcklkOiBzdHJpbmcsIFxuICAgIG5ld1N0YXR1czogc3RyaW5nLCBcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBhZGRpdGlvbmFsRGF0YT86IGFueVxuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL29yZGVycy8ke29yZGVySWR9L3N0YXR1c2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBuZXdTdGF0dXMsXG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgLi4uYWRkaXRpb25hbERhdGEsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCAnRXJyb3IgYWwgY2FtYmlhciBlc3RhZG8nKTtcbiAgICB9XG5cbiAgICAvLyBBY3R1YWxpemFyIG9yZGVuIGVuIGVsIGVzdGFkbyBsb2NhbFxuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBvcmRlcnM6IHByZXYub3JkZXJzLm1hcChvcmRlciA9PiBcbiAgICAgICAgb3JkZXIuaWQgPT09IG9yZGVySWQgPyB7IC4uLm9yZGVyLCBzdGF0dXM6IG5ld1N0YXR1cyB9IDogb3JkZXJcbiAgICAgICksXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgYnVsa1VwZGF0ZVN0YXR1cyA9IHVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICBidWxrRGF0YTogQnVsa1N0YXR1c1VwZGF0ZVxuICApOiBQcm9taXNlPEJ1bGtTdGF0dXNVcGRhdGVSZXN1bHQ+ID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL29yZGVycy9idWxrP29wZXJhdGlvbj1zdGF0dXNfdXBkYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYnVsa0RhdGEpLFxuICAgIH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICdFcnJvciBlbiBvcGVyYWNpw7NuIG1hc2l2YScpO1xuICAgIH1cblxuICAgIC8vIFJlZnJlc2NhciBsaXN0YSBkZXNwdcOpcyBkZSBvcGVyYWNpw7NuIG1hc2l2YVxuICAgIGF3YWl0IGZldGNoT3JkZXJzKHN0YXRlLmZpbHRlcnMpO1xuXG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgfSwgW3N0YXRlLmZpbHRlcnMsIGZldGNoT3JkZXJzXSk7XG5cbiAgY29uc3QgZXhwb3J0T3JkZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgKFxuICAgIGZvcm1hdDogJ2NzdicgfCAnanNvbicgPSAnY3N2JyxcbiAgICBmaWx0ZXJzPzogT3JkZXJGaWx0ZXJzXG4gICk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hZG1pbi9vcmRlcnMvYnVsaz9vcGVyYXRpb249ZXhwb3J0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBmb3JtYXQsXG4gICAgICAgIGZpbHRlcnM6IGZpbHRlcnMgfHwgc3RhdGUuZmlsdGVycyxcbiAgICAgICAgaW5jbHVkZV9pdGVtczogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICdFcnJvciBhbCBleHBvcnRhciDDs3JkZW5lcycpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhLmRhdGE7XG4gIH0sIFtzdGF0ZS5maWx0ZXJzXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIEZJTFRSQURPIFkgUEFHSU5BQ0nDk05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBjb25zdCB1cGRhdGVGaWx0ZXJzID0gdXNlQ2FsbGJhY2soKG5ld0ZpbHRlcnM6IFBhcnRpYWw8T3JkZXJGaWx0ZXJzPikgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZWRGaWx0ZXJzID0ge1xuICAgICAgLi4uc3RhdGUuZmlsdGVycyxcbiAgICAgIC4uLm5ld0ZpbHRlcnMsXG4gICAgICBwYWdlOiBuZXdGaWx0ZXJzLnBhZ2UgfHwgMSwgLy8gUmVzZXQgcGFnZSB1bmxlc3MgZXhwbGljaXRseSBzZXRcbiAgICB9O1xuXG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGZpbHRlcnM6IHVwZGF0ZWRGaWx0ZXJzLFxuICAgIH0pKTtcblxuICAgIGZldGNoT3JkZXJzKHVwZGF0ZWRGaWx0ZXJzKTtcbiAgfSwgW3N0YXRlLmZpbHRlcnMsIGZldGNoT3JkZXJzXSk7XG5cbiAgY29uc3Qgc2V0UGFnZSA9IHVzZUNhbGxiYWNrKChwYWdlOiBudW1iZXIpID0+IHtcbiAgICB1cGRhdGVGaWx0ZXJzKHsgcGFnZSB9KTtcbiAgfSwgW3VwZGF0ZUZpbHRlcnNdKTtcblxuICBjb25zdCBzZXRTZWFyY2ggPSB1c2VDYWxsYmFjaygoc2VhcmNoOiBzdHJpbmcpID0+IHtcbiAgICB1cGRhdGVGaWx0ZXJzKHsgc2VhcmNoLCBwYWdlOiAxIH0pO1xuICB9LCBbdXBkYXRlRmlsdGVyc10pO1xuXG4gIGNvbnN0IHNldFN0YXR1cyA9IHVzZUNhbGxiYWNrKChzdGF0dXM6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIHVwZGF0ZUZpbHRlcnMoeyBzdGF0dXMsIHBhZ2U6IDEgfSk7XG4gIH0sIFt1cGRhdGVGaWx0ZXJzXSk7XG5cbiAgY29uc3Qgc2V0UGF5bWVudFN0YXR1cyA9IHVzZUNhbGxiYWNrKChwYXltZW50X3N0YXR1czogc3RyaW5nIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgdXBkYXRlRmlsdGVycyh7IHBheW1lbnRfc3RhdHVzLCBwYWdlOiAxIH0pO1xuICB9LCBbdXBkYXRlRmlsdGVyc10pO1xuXG4gIGNvbnN0IHNldFNvcnRpbmcgPSB1c2VDYWxsYmFjaygoc29ydF9ieTogc3RyaW5nLCBzb3J0X29yZGVyOiAnYXNjJyB8ICdkZXNjJykgPT4ge1xuICAgIHVwZGF0ZUZpbHRlcnMoeyBzb3J0X2J5LCBzb3J0X29yZGVyIH0pO1xuICB9LCBbdXBkYXRlRmlsdGVyc10pO1xuXG4gIGNvbnN0IHNldERhdGVSYW5nZSA9IHVzZUNhbGxiYWNrKChkYXRlX2Zyb20/OiBzdHJpbmcsIGRhdGVfdG8/OiBzdHJpbmcpID0+IHtcbiAgICB1cGRhdGVGaWx0ZXJzKHsgZGF0ZV9mcm9tLCBkYXRlX3RvLCBwYWdlOiAxIH0pO1xuICB9LCBbdXBkYXRlRmlsdGVyc10pO1xuXG4gIGNvbnN0IGNsZWFyRmlsdGVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBkZWZhdWx0RmlsdGVyczogT3JkZXJGaWx0ZXJzID0ge1xuICAgICAgcGFnZTogMSxcbiAgICAgIGxpbWl0OiAyMCxcbiAgICAgIHNvcnRfYnk6ICdjcmVhdGVkX2F0JyxcbiAgICAgIHNvcnRfb3JkZXI6ICdkZXNjJyxcbiAgICB9O1xuXG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGZpbHRlcnM6IGRlZmF1bHRGaWx0ZXJzLFxuICAgIH0pKTtcblxuICAgIGZldGNoT3JkZXJzKGRlZmF1bHRGaWx0ZXJzKTtcbiAgfSwgW2ZldGNoT3JkZXJzXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIFVUSUxJREFEXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgY29uc3QgcmVmcmVzaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBmZXRjaE9yZGVycyhzdGF0ZS5maWx0ZXJzKTtcbiAgfSwgW3N0YXRlLmZpbHRlcnMsIGZldGNoT3JkZXJzXSk7XG5cbiAgY29uc3QgZ2V0T3JkZXJCeUlkID0gdXNlQ2FsbGJhY2soKG9yZGVySWQ6IHN0cmluZyk6IE9yZGVyRW50ZXJwcmlzZSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLm9yZGVycy5maW5kKG9yZGVyID0+IG9yZGVyLmlkID09PSBvcmRlcklkKTtcbiAgfSwgW3N0YXRlLm9yZGVyc10pO1xuXG4gIGNvbnN0IGdldE9yZGVyc0J5U3RhdHVzID0gdXNlQ2FsbGJhY2soKHN0YXR1czogc3RyaW5nKTogT3JkZXJFbnRlcnByaXNlW10gPT4ge1xuICAgIHJldHVybiBzdGF0ZS5vcmRlcnMuZmlsdGVyKG9yZGVyID0+IG9yZGVyLnN0YXR1cyA9PT0gc3RhdHVzKTtcbiAgfSwgW3N0YXRlLm9yZGVyc10pO1xuXG4gIGNvbnN0IGdldFRvdGFsUmV2ZW51ZSA9IHVzZUNhbGxiYWNrKCgpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5vcmRlcnMucmVkdWNlKCh0b3RhbCwgb3JkZXIpID0+IHtcbiAgICAgIHJldHVybiBvcmRlci5zdGF0dXMgIT09ICdjYW5jZWxsZWQnID8gdG90YWwgKyBvcmRlci50b3RhbF9hbW91bnQgOiB0b3RhbDtcbiAgICB9LCAwKTtcbiAgfSwgW3N0YXRlLm9yZGVyc10pO1xuXG4gIGNvbnN0IGdldEF2ZXJhZ2VPcmRlclZhbHVlID0gdXNlQ2FsbGJhY2soKCk6IG51bWJlciA9PiB7XG4gICAgY29uc3QgdmFsaWRPcmRlcnMgPSBzdGF0ZS5vcmRlcnMuZmlsdGVyKG9yZGVyID0+IG9yZGVyLnN0YXR1cyAhPT0gJ2NhbmNlbGxlZCcpO1xuICAgIGlmICh2YWxpZE9yZGVycy5sZW5ndGggPT09IDApIHJldHVybiAwO1xuICAgIFxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRPcmRlcnMucmVkdWNlKChzdW0sIG9yZGVyKSA9PiBzdW0gKyBvcmRlci50b3RhbF9hbW91bnQsIDApO1xuICAgIHJldHVybiB0b3RhbCAvIHZhbGlkT3JkZXJzLmxlbmd0aDtcbiAgfSwgW3N0YXRlLm9yZGVyc10pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEVGRUNUT1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoT3JkZXJzKHN0YXRlLmZpbHRlcnMpO1xuICB9LCBbXSk7IC8vIFNvbG8gZWplY3V0YXIgdW5hIHZleiBhbCBtb250YXJcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSRVRVUk4gREVMIEhPT0tcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICByZXR1cm4ge1xuICAgIC8vIEVzdGFkb1xuICAgIG9yZGVyczogc3RhdGUub3JkZXJzLFxuICAgIGxvYWRpbmc6IHN0YXRlLmxvYWRpbmcsXG4gICAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICAgIGZpbHRlcnM6IHN0YXRlLmZpbHRlcnMsXG4gICAgcGFnaW5hdGlvbjogc3RhdGUucGFnaW5hdGlvbixcblxuICAgIC8vIE9wZXJhY2lvbmVzIENSVURcbiAgICBjcmVhdGVPcmRlcixcbiAgICB1cGRhdGVPcmRlcixcbiAgICBjaGFuZ2VPcmRlclN0YXR1cyxcbiAgICBidWxrVXBkYXRlU3RhdHVzLFxuICAgIGV4cG9ydE9yZGVycyxcblxuICAgIC8vIEZpbHRyYWRvIHkgcGFnaW5hY2nDs25cbiAgICB1cGRhdGVGaWx0ZXJzLFxuICAgIHNldFBhZ2UsXG4gICAgc2V0U2VhcmNoLFxuICAgIHNldFN0YXR1cyxcbiAgICBzZXRQYXltZW50U3RhdHVzLFxuICAgIHNldFNvcnRpbmcsXG4gICAgc2V0RGF0ZVJhbmdlLFxuICAgIGNsZWFyRmlsdGVycyxcblxuICAgIC8vIFV0aWxpZGFkZXNcbiAgICByZWZyZXNoLFxuICAgIGdldE9yZGVyQnlJZCxcbiAgICBnZXRPcmRlcnNCeVN0YXR1cyxcbiAgICBnZXRUb3RhbFJldmVudWUsXG4gICAgZ2V0QXZlcmFnZU9yZGVyVmFsdWUsXG5cbiAgICAvLyBGdW5jaW9uZXMgZGUgY29udmVuaWVuY2lhXG4gICAgaGFzTmV4dFBhZ2U6IHN0YXRlLnBhZ2luYXRpb24uaGFzTmV4dFBhZ2UsXG4gICAgaGFzUHJldmlvdXNQYWdlOiBzdGF0ZS5wYWdpbmF0aW9uLmhhc1ByZXZpb3VzUGFnZSxcbiAgICB0b3RhbE9yZGVyczogc3RhdGUucGFnaW5hdGlvbi50b3RhbCxcbiAgICBjdXJyZW50UGFnZTogc3RhdGUucGFnaW5hdGlvbi5wYWdlLFxuICAgIHRvdGFsUGFnZXM6IHN0YXRlLnBhZ2luYXRpb24udG90YWxQYWdlcyxcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0sgUEFSQSBPUkRFTiBJTkRJVklEVUFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlT3JkZXJEZXRhaWwob3JkZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IFtvcmRlciwgc2V0T3JkZXJdID0gdXNlU3RhdGU8T3JkZXJFbnRlcnByaXNlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGZldGNoT3JkZXIgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvcmRlcklkKSByZXR1cm47XG5cbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vb3JkZXJzLyR7b3JkZXJJZH1gKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGFsIGNhcmdhciBvcmRlbicpO1xuICAgICAgfVxuXG4gICAgICBzZXRPcmRlcihkYXRhLmRhdGEub3JkZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbycpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtvcmRlcklkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaE9yZGVyKCk7XG4gIH0sIFtmZXRjaE9yZGVyXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvcmRlcixcbiAgICBsb2FkaW5nLFxuICAgIGVycm9yLFxuICAgIHJlZnJlc2g6IGZldGNoT3JkZXIsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlT3JkZXJEZXRhaWwiLCJ1c2VPcmRlcnNFbnRlcnByaXNlIiwiaW5pdGlhbEZpbHRlcnMiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlU3RhdGUiLCJvcmRlcnMiLCJsb2FkaW5nIiwiZXJyb3IiLCJmaWx0ZXJzIiwicGFnZSIsImxpbWl0Iiwic29ydF9ieSIsInNvcnRfb3JkZXIiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiaGFzTmV4dFBhZ2UiLCJoYXNQcmV2aW91c1BhZ2UiLCJmZXRjaE9yZGVycyIsInVzZUNhbGxiYWNrIiwicHJldiIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImFwcGVuZCIsInRvU3RyaW5nIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwib2siLCJFcnJvciIsIm1lc3NhZ2UiLCJjcmVhdGVPcmRlciIsIm9yZGVyRGF0YSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZU9yZGVyIiwib3JkZXJJZCIsIm1hcCIsIm9yZGVyIiwiaWQiLCJjaGFuZ2VPcmRlclN0YXR1cyIsIm5ld1N0YXR1cyIsInJlYXNvbiIsImFkZGl0aW9uYWxEYXRhIiwic3RhdHVzIiwiYnVsa1VwZGF0ZVN0YXR1cyIsImJ1bGtEYXRhIiwiZXhwb3J0T3JkZXJzIiwiZm9ybWF0IiwiaW5jbHVkZV9pdGVtcyIsInVwZGF0ZUZpbHRlcnMiLCJuZXdGaWx0ZXJzIiwidXBkYXRlZEZpbHRlcnMiLCJzZXRQYWdlIiwic2V0U2VhcmNoIiwic2VhcmNoIiwic2V0U3RhdHVzIiwic2V0UGF5bWVudFN0YXR1cyIsInBheW1lbnRfc3RhdHVzIiwic2V0U29ydGluZyIsInNldERhdGVSYW5nZSIsImRhdGVfZnJvbSIsImRhdGVfdG8iLCJjbGVhckZpbHRlcnMiLCJkZWZhdWx0RmlsdGVycyIsInJlZnJlc2giLCJnZXRPcmRlckJ5SWQiLCJmaW5kIiwiZ2V0T3JkZXJzQnlTdGF0dXMiLCJmaWx0ZXIiLCJnZXRUb3RhbFJldmVudWUiLCJyZWR1Y2UiLCJ0b3RhbF9hbW91bnQiLCJnZXRBdmVyYWdlT3JkZXJWYWx1ZSIsInZhbGlkT3JkZXJzIiwibGVuZ3RoIiwic3VtIiwidXNlRWZmZWN0IiwidG90YWxPcmRlcnMiLCJjdXJyZW50UGFnZSIsInNldE9yZGVyIiwic2V0TG9hZGluZyIsInNldEVycm9yIiwiZmV0Y2hPcmRlciJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDhDQUE4QztBQUM5QyxzQ0FBc0M7QUFFdEM7Ozs7Ozs7Ozs7OztJQThWZ0JBLGNBQWM7ZUFBZEE7O0lBOVVBQyxtQkFBbUI7ZUFBbkJBOzs7dUJBZGlDO0FBYzFDLFNBQVNBLG9CQUFvQkMsY0FBNkI7SUFDL0QsTUFBTSxDQUFDQyxPQUFPQyxTQUFTLEdBQUdDLElBQUFBLGVBQVEsRUFBaUI7UUFDakRDLFFBQVEsRUFBRTtRQUNWQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsU0FBUztZQUNQQyxNQUFNO1lBQ05DLE9BQU87WUFDUEMsU0FBUztZQUNUQyxZQUFZO1lBQ1osR0FBR1gsY0FBYztRQUNuQjtRQUNBWSxZQUFZO1lBQ1ZKLE1BQU07WUFDTkMsT0FBTztZQUNQSSxPQUFPO1lBQ1BDLFlBQVk7WUFDWkMsYUFBYTtZQUNiQyxpQkFBaUI7UUFDbkI7SUFDRjtJQUVBLHNDQUFzQztJQUN0QyxtQkFBbUI7SUFDbkIsc0NBQXNDO0lBRXRDLE1BQU1DLGNBQWNDLElBQUFBLGtCQUFXLEVBQUMsT0FBT1g7UUFDckNMLFNBQVNpQixDQUFBQSxPQUFTLENBQUE7Z0JBQUUsR0FBR0EsSUFBSTtnQkFBRWQsU0FBUztnQkFBTUMsT0FBTztZQUFLLENBQUE7UUFFeEQsSUFBSTtZQUNGLE1BQU1jLGNBQWMsSUFBSUM7WUFDeEJDLE9BQU9DLE9BQU8sQ0FBQ2hCLFNBQVNpQixPQUFPLENBQUMsQ0FBQyxDQUFDQyxL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