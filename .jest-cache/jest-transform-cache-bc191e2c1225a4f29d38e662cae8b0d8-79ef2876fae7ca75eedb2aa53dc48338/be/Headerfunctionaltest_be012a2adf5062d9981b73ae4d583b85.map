{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\__tests__\\Header.functional.test.tsx"],"sourcesContent":["/**\n * Tests funcionales simplificados para el Header Mobile\n * Enfoque en verificar que los elementos básicos se renderizan correctamente\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\n\n// Mocks mínimos necesarios\njest.mock('next/link', () => {\n  return function MockLink({ children, href, ...props }: any) {\n    return <a href={href} {...props}>{children}</a>;\n  };\n});\n\njest.mock('next/image', () => {\n  return function MockImage({ src, alt, ...props }: any) {\n    return <img src={src} alt={alt} {...props} />;\n  };\n});\n\n// Mock del hook de geolocalización con valores estáticos\njest.mock('@/hooks/useGeolocation', () => ({\n  useGeolocation: jest.fn(() => ({\n    detectedZone: { name: 'Córdoba Capital', available: true },\n    requestLocation: jest.fn(),\n    selectZone: jest.fn(),\n    permissionStatus: 'prompt',\n    isLoading: false,\n    error: null,\n    location: null,\n    getAvailableZones: jest.fn(() => []),\n    deliveryZones: [],\n  })),\n}));\n\n// Mock de Clerk simplificado\njest.mock('@clerk/nextjs', () => ({\n  SignedIn: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid=\"signed-in-mock\">{children}</div>\n  ),\n  SignedOut: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid=\"signed-out-mock\">{children}</div>\n  ),\n  UserButton: () => <div data-testid=\"user-button-mock\">UserButton</div>,\n  useUser: jest.fn(() => ({ isSignedIn: false, user: null, isLoaded: true })),\n}));\n\n// Mock del componente de búsqueda\njest.mock('@/components/ui/SearchAutocompleteIntegrated', () => ({\n  SearchAutocompleteIntegrated: function MockSearch({ placeholder, ...props }: any) {\n    return (\n      <input \n        data-testid=\"search-autocomplete-mock\" \n        placeholder={placeholder}\n        {...props}\n      />\n    );\n  },\n}));\n\n// Mock de Redux\njest.mock('react-redux', () => ({\n  useSelector: jest.fn(() => ({ items: [], totalQuantity: 0 })),\n  useDispatch: jest.fn(() => jest.fn()),\n}));\n\n// Mock del contexto del carrito\njest.mock('@/app/context/CartSidebarModalContext', () => ({\n  useCartSidebarModal: jest.fn(() => ({\n    isOpen: false,\n    openModal: jest.fn(),\n    closeModal: jest.fn(),\n  })),\n}));\n\n// Mock de hooks de animación\njest.mock('@/hooks/useCartAnimation', () => ({\n  useCartAnimation: jest.fn(() => ({ isAnimating: false })),\n}));\n\n// Mock de window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(),\n    removeListener: jest.fn(),\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\nimport Header from '../index';\n\ndescribe('Header Functional Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Renderizado Básico', () => {\n    test('debe renderizar sin errores', () => {\n      expect(() => render(<Header />)).not.toThrow();\n    });\n\n    test('debe mostrar el logo de Pinteya', () => {\n      render(<Header />);\n      const logo = screen.getByAltText('Pinteya - Tu Pinturería Online');\n      expect(logo).toBeInTheDocument();\n    });\n\n    test('debe mostrar el campo de búsqueda con placeholder correcto', () => {\n      render(<Header />);\n      const searchInput = screen.getByTestId('search-autocomplete-mock');\n      expect(searchInput).toHaveAttribute('placeholder', 'latex interior blanco 20lts');\n    });\n\n    test('debe mostrar la ubicación por defecto', () => {\n      render(<Header />);\n      expect(screen.getByText('Córdoba Capital')).toBeInTheDocument();\n    });\n\n    test('debe mostrar elementos de autenticación', () => {\n      render(<Header />);\n      expect(screen.getByTestId('signed-out-mock')).toBeInTheDocument();\n    });\n  });\n\n  describe('Interactividad Básica', () => {\n    test('logo debe ser clickeable', () => {\n      render(<Header />);\n      const logoLink = screen.getByAltText('Pinteya - Tu Pinturería Online').closest('a');\n      expect(logoLink).toHaveAttribute('href', '/');\n    });\n\n    test('debe permitir click en ubicación', () => {\n      const mockRequestLocation = jest.fn();\n      const { useGeolocation } = require('@/hooks/useGeolocation');\n      useGeolocation.mockReturnValue({\n        detectedZone: { name: 'Córdoba Capital', available: true },\n        requestLocation: mockRequestLocation,\n        selectZone: jest.fn(),\n        permissionStatus: 'prompt',\n        isLoading: false,\n        error: null,\n        location: null,\n        getAvailableZones: jest.fn(() => []),\n        deliveryZones: [],\n      });\n\n      render(<Header />);\n      const locationElement = screen.getByText('Córdoba Capital').closest('div');\n      fireEvent.click(locationElement!);\n\n      expect(mockRequestLocation).toHaveBeenCalled();\n    });\n\n    test('campo de búsqueda debe ser enfocable', () => {\n      render(<Header />);\n      const searchInput = screen.getByTestId('search-autocomplete-mock');\n      fireEvent.focus(searchInput);\n      expect(searchInput).toHaveFocus();\n    });\n  });\n\n  describe('Estados de Geolocalización', () => {\n    test('debe mostrar estado de carga', () => {\n      const { useGeolocation } = require('@/hooks/useGeolocation');\n      useGeolocation.mockReturnValue({\n        detectedZone: null,\n        requestLocation: jest.fn(),\n        selectZone: jest.fn(),\n        permissionStatus: 'prompt',\n        isLoading: true,\n        error: null,\n        location: null,\n        getAvailableZones: jest.fn(() => []),\n        deliveryZones: [],\n      });\n\n      render(<Header />);\n      expect(screen.getByText('Detectando ubicación...')).toBeInTheDocument();\n    });\n\n    test('debe mostrar estado de permisos denegados', () => {\n      const { useGeolocation } = require('@/hooks/useGeolocation');\n      useGeolocation.mockReturnValue({\n        detectedZone: { name: 'Córdoba Capital', available: true },\n        requestLocation: jest.fn(),\n        selectZone: jest.fn(),\n        permissionStatus: 'denied',\n        isLoading: false,\n        error: 'Permisos denegados',\n        location: null,\n        getAvailableZones: jest.fn(() => []),\n        deliveryZones: [],\n      });\n\n      render(<Header />);\n      expect(screen.getByText('Córdoba Capital')).toBeInTheDocument();\n    });\n\n    test('debe mostrar estado de ubicación detectada', () => {\n      const { useGeolocation } = require('@/hooks/useGeolocation');\n      useGeolocation.mockReturnValue({\n        detectedZone: { name: 'Villa Carlos Paz', available: true },\n        requestLocation: jest.fn(),\n        selectZone: jest.fn(),\n        permissionStatus: 'granted',\n        isLoading: false,\n        error: null,\n        location: { lat: -31.4201, lng: -64.1888 },\n        getAvailableZones: jest.fn(() => []),\n        deliveryZones: [],\n      });\n\n      render(<Header />);\n      expect(screen.getByText('Villa Carlos Paz')).toBeInTheDocument();\n      expect(screen.getByText('✓')).toBeInTheDocument();\n    });\n  });\n\n  describe('Estados de Autenticación', () => {\n    test('debe mostrar UserButton cuando está autenticado', () => {\n      const { useUser } = require('@clerk/nextjs');\n      useUser.mockReturnValue({\n        isSignedIn: true,\n        user: { id: 'user_123' },\n        isLoaded: true,\n      });\n\n      render(<Header />);\n      expect(screen.getByTestId('user-button-mock')).toBeInTheDocument();\n    });\n\n    test('debe mostrar botón de login cuando no está autenticado', () => {\n      const { useUser } = require('@clerk/nextjs');\n      useUser.mockReturnValue({\n        isSignedIn: false,\n        user: null,\n        isLoaded: true,\n      });\n\n      render(<Header />);\n      expect(screen.getByTestId('signed-out-mock')).toBeInTheDocument();\n    });\n  });\n\n  describe('Responsive Design', () => {\n    test('debe tener clases responsive apropiadas', () => {\n      render(<Header />);\n      const logo = screen.getByAltText('Pinteya - Tu Pinturería Online');\n      expect(logo).toHaveClass('h-16', 'w-16'); // 64x64px en mobile\n    });\n\n    test('debe mostrar layout mobile específico', () => {\n      render(<Header />);\n      // Verificar que existe contenido mobile\n      const searchInput = screen.getByTestId('search-autocomplete-mock');\n      expect(searchInput).toBeInTheDocument();\n    });\n  });\n\n  describe('Accesibilidad', () => {\n    test('debe tener alt text en imágenes', () => {\n      render(<Header />);\n      const logo = screen.getByAltText('Pinteya - Tu Pinturería Online');\n      expect(logo).toHaveAttribute('alt', 'Pinteya - Tu Pinturería Online');\n    });\n\n    test('debe tener elementos navegables', () => {\n      render(<Header />);\n      const logoLink = screen.getByAltText('Pinteya - Tu Pinturería Online').closest('a');\n      expect(logoLink).toHaveAttribute('href');\n    });\n  });\n});\n"],"names":["jest","mock","MockLink","children","href","props","a","MockImage","src","alt","img","useGeolocation","fn","detectedZone","name","available","requestLocation","selectZone","permissionStatus","isLoading","error","location","getAvailableZones","deliveryZones","SignedIn","div","data-testid","SignedOut","UserButton","useUser","isSignedIn","user","isLoaded","SearchAutocompleteIntegrated","MockSearch","placeholder","input","useSelector","items","totalQuantity","useDispatch","useCartSidebarModal","isOpen","openModal","closeModal","useCartAnimation","isAnimating","Object","defineProperty","window","writable","value","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","describe","beforeEach","clearAllMocks","test","expect","render","Header","not","toThrow","logo","screen","getByAltText","toBeInTheDocument","searchInput","getByTestId","toHaveAttribute","getByText","logoLink","closest","mockRequestLocation","require","mockReturnValue","locationElement","fireEvent","click","toHaveBeenCalled","focus","toHaveFocus","lat","lng","id","toHaveClass"],"mappings":"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"}