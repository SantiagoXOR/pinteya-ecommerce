{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductImageManager.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useCallback } from 'react';\nimport Image from 'next/image';\nimport { AdminCard } from '../ui/AdminCard';\nimport { \n  Upload, \n  X, \n  Star, \n  StarOff, \n  Move, \n  Edit, \n  Trash2, \n  Image as ImageIcon,\n  Plus,\n  AlertCircle,\n  Loader2,\n  CheckCircle,\n  XCircle\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ProductImage {\n  id?: string;\n  url: string;\n  alt?: string;\n  is_primary?: boolean;\n  file_size?: number;\n  file_type?: string;\n  width?: number;\n  height?: number;\n  upload_status?: 'uploading' | 'success' | 'error';\n  upload_progress?: number;\n}\n\ninterface ProductImageManagerProps {\n  productId?: string;\n  images: ProductImage[];\n  onChange: (images: ProductImage[]) => void;\n  error?: string;\n  maxImages?: number;\n  maxFileSize?: number; // in MB\n  allowedTypes?: string[];\n  enableOptimization?: boolean;\n  className?: string;\n}\n\n// Image validation and optimization utilities\nconst validateImageFile = (file: File, maxSize: number = 5): string | null => {\n  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'];\n  \n  if (!allowedTypes.includes(file.type)) {\n    return 'Tipo de archivo no permitido. Use JPG, PNG, WebP o GIF.';\n  }\n  \n  if (file.size > maxSize * 1024 * 1024) {\n    return `El archivo es muy grande. Maximo ${maxSize}MB permitido.`;\n  }\n  \n  return null;\n};\n\nconst optimizeImage = async (file: File, maxWidth: number = 1200, quality: number = 0.8): Promise<File> => {\n  return new Promise((resolve) => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d')!;\n    const img = new window.Image();\n    \n    img.onload = () => {\n      // Calculate new dimensions\n      let { width, height } = img;\n      if (width > maxWidth) {\n        height = (height * maxWidth) / width;\n        width = maxWidth;\n      }\n      \n      canvas.width = width;\n      canvas.height = height;\n      \n      // Draw and compress\n      ctx.drawImage(img, 0, 0, width, height);\n      \n      canvas.toBlob(\n        (blob) => {\n          if (blob) {\n            const optimizedFile = new File([blob], file.name, {\n              type: file.type,\n              lastModified: Date.now(),\n            });\n            resolve(optimizedFile);\n          } else {\n            resolve(file);\n          }\n        },\n        file.type,\n        quality\n      );\n    };\n    \n    img.src = URL.createObjectURL(file);\n  });\n};\n\nconst getImageDimensions = (file: File): Promise<{ width: number; height: number }> => {\n  return new Promise((resolve) => {\n    const img = new window.Image();\n    img.onload = () => {\n      resolve({ width: img.width, height: img.height });\n    };\n    img.src = URL.createObjectURL(file);\n  });\n};\n\nexport function ProductImageManager({\n  productId,\n  images = [],\n  onChange,\n  error,\n  maxImages = 10,\n  maxFileSize = 5,\n  allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  enableOptimization = true,\n  className\n}: ProductImageManagerProps) {\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\n  const [editingAlt, setEditingAlt] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [uploadErrors, setUploadErrors] = useState<string[]>([]);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Enhanced file upload with validation and optimization\n  const handleFileUpload = useCallback(async (files: FileList) => {\n    if (files.length === 0) return;\n    \n    const remainingSlots = maxImages - images.length;\n    if (remainingSlots <= 0) {\n      setUploadErrors(['Se ha alcanzado el limite maximo de imagenes']);\n      return;\n    }\n    \n    const filesToUpload = Array.from(files).slice(0, remainingSlots);\n    const errors: string[] = [];\n    \n    setUploading(true);\n    setUploadErrors([]);\n    \n    try {\n      const processedImages: ProductImage[] = [];\n      \n      for (const file of filesToUpload) {\n        // Validate file\n        const validationError = validateImageFile(file, maxFileSize);\n        if (validationError) {\n          errors.push(`${file.name}: ${validationError}`);\n          continue;\n        }\n        \n        try {\n          // Get original dimensions\n          const dimensions = await getImageDimensions(file);\n          \n          // Optimize image if enabled\n          const processedFile = enableOptimization ? await optimizeImage(file) : file;\n          \n          // Create temporary URL for preview\n          const url = URL.createObjectURL(processedFile);\n          \n          const newImage: ProductImage = {\n            id: `temp-${Date.now()}-${Math.random()}`,\n            url,\n            alt: file.name.replace(/\\.[^/.]+$/, ''),\n            is_primary: images.length === 0 && processedImages.length === 0,\n            file_size: processedFile.size,\n            file_type: processedFile.type,\n            width: dimensions.width,\n            height: dimensions.height,\n            upload_status: 'success'\n          };\n          \n          processedImages.push(newImage);\n        } catch (fileError) {\n          errors.push(`${file.name}: Error al procesar la imagen`);\n        }\n      }\n      \n      if (processedImages.length > 0) {\n        onChange([...images, ...processedImages]);\n      }\n      \n      if (errors.length > 0) {\n        setUploadErrors(errors);\n      }\n    } catch (error) {\n      console.error('Error uploading images:', error);\n      setUploadErrors(['Error general al subir las imagenes']);\n    } finally {\n      setUploading(false);\n    }\n  }, [images, maxImages, maxFileSize, enableOptimization, onChange]);\n\n  // Enhanced drag and drop functionality\n  const handleDragStart = useCallback((index: number) => {\n    setDraggedIndex(index);\n  }, []);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // Only set to false if we're leaving the component entirely\n    if (!e.currentTarget.contains(e.relatedTarget as Node)) {\n      setIsDragOver(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent, dropIndex?: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(false);\n    \n    // Handle file drops (external files)\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFileUpload(e.dataTransfer.files);\n      return;\n    }\n    \n    // Handle image reordering (internal drag)\n    if (draggedIndex !== null && dropIndex !== undefined) {\n      const newImages = [...images];\n      const draggedImage = newImages[draggedIndex];\n      \n      // Remove dragged item\n      newImages.splice(draggedIndex, 1);\n      \n      // Insert at new position\n      const actualDropIndex = dropIndex > draggedIndex ? dropIndex - 1 : dropIndex;\n      newImages.splice(actualDropIndex, 0, draggedImage);\n      \n      onChange(newImages);\n    }\n    \n    setDraggedIndex(null);\n  }, [draggedIndex, images, onChange, handleFileUpload]);\n\n  // Handle file input change\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      handleFileUpload(e.target.files);\n    }\n  }, [handleFileUpload]);\n\n  // Set primary image\n  const setPrimaryImage = (index: number) => {\n    const newImages = images.map((img, i) => ({\n      ...img,\n      is_primary: i === index,\n    }));\n    onChange(newImages);\n  };\n\n  // Remove image\n  const removeImage = (index: number) => {\n    const newImages = images.filter((_, i) => i !== index);\n    \n    // If we removed the primary image, make the first one primary\n    if (images[index].is_primary && newImages.length > 0) {\n      newImages[0].is_primary = true;\n    }\n    \n    onChange(newImages);\n  };\n\n  // Edit alt text\n  const startEditingAlt = (index: number) => {\n    setEditingIndex(index);\n    setEditingAlt(images[index].alt || '');\n  };\n\n  const saveAltText = () => {\n    if (editingIndex === null) return;\n    \n    const newImages = [...images];\n    newImages[editingIndex] = {\n      ...newImages[editingIndex],\n      alt: editingAlt,\n    };\n    \n    onChange(newImages);\n    setEditingIndex(null);\n    setEditingAlt('');\n  };\n\n  const cancelEditingAlt = () => {\n    setEditingIndex(null);\n    setEditingAlt('');\n  };\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      <AdminCard title=\"Gestion de Imagenes\" className=\"p-6\">\n        <div className=\"space-y-6\">\n          {/* Upload Area */}\n          <div \n            className={cn(\n              \"border-2 border-dashed rounded-lg p-6 transition-all duration-200\",\n              isDragOver \n                ? \"border-blaze-orange-400 bg-blaze-orange-50\" \n                : \"border-gray-300 hover:border-gray-400\",\n              uploading && \"opacity-50 pointer-events-none\",\n              images.length >= maxImages && \"opacity-50\"\n            )}\n            onDrop={(e) => handleDrop(e)}\n            onDragOver={handleDragOver}\n            onDragEnter={handleDragEnter}\n            onDragLeave={handleDragLeave}\n          >\n            <div className=\"text-center\">\n              {uploading ? (\n                <Loader2 className=\"mx-auto h-12 w-12 text-blaze-orange-500 animate-spin\" />\n              ) : (\n                <ImageIcon className={cn(\n                  \"mx-auto h-12 w-12\",\n                  isDragOver ? \"text-blaze-orange-500\" : \"text-gray-400\"\n                )} />\n              )}\n              \n              <div className=\"mt-4\">\n                {uploading ? (\n                  <p className=\"text-sm font-medium text-blaze-orange-600\">\n                    Procesando imagenes...\n                  </p>\n                ) : (\n                  <>\n                    <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                      <span className=\"mt-2 block text-sm font-medium text-gray-900\">\n                        {isDragOver ? 'Suelta las imagenes aqui' : 'Arrastra imagenes aqui o'}{' '}\n                        {!isDragOver && (\n                          <span className=\"text-blaze-orange-600 hover:text-blaze-orange-500\">\n                            selecciona archivos\n                          </span>\n                        )}\n                      </span>\n                    </label>\n                    <input\n                      ref={fileInputRef}\n                      id=\"file-upload\"\n                      name=\"file-upload\"\n                      type=\"file\"\n                      className=\"sr-only\"\n                      multiple\n                      accept={allowedTypes.join(',')}\n                      onChange={handleFileInputChange}\n                      disabled={uploading || images.length >= maxImages}\n                    />\n                  </>\n                )}\n              </div>\n              \n              <p className=\"mt-1 text-xs text-gray-500\">\n                {allowedTypes.map(type => type.split('/')[1].toUpperCase()).join(', ')} hasta {maxFileSize}MB cada una. Maximo {maxImages} imagenes.\n              </p>\n              \n              {enableOptimization && (\n                <p className=\"mt-1 text-xs text-green-600\">\n                  Optimizacion automatica activada\n                </p>\n              )}\n              \n              {images.length >= maxImages && (\n                <div className=\"mt-3 flex items-center justify-center space-x-2 text-yellow-600\">\n                  <AlertCircle className=\"w-4 h-4\" />\n                  <span className=\"text-sm\">Limite de imagenes alcanzado</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Upload Errors */}\n          {uploadErrors.length > 0 && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <div className=\"flex items-start space-x-2\">\n                <XCircle className=\"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <h4 className=\"text-sm font-medium text-red-800\">Errores al subir imagenes:</h4>\n                  <ul className=\"mt-1 text-sm text-red-700 space-y-1\">\n                    {uploadErrors.map((error, index) => (\n                      <li key={index}>• {error}</li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* General Error Message */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2\">\n                <XCircle className=\"w-5 h-5 text-red-500\" />\n                <span className=\"text-sm text-red-700\">{error}</span>\n              </div>\n            </div>\n          )}\n\n          {/* Images Grid */}\n          {images.length > 0 && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h4 className=\"text-sm font-medium text-gray-900\">\n                  Imagenes del Producto ({images.length}/{maxImages})\n                </h4>\n                <div className=\"flex items-center space-x-4\">\n                  {images.some(img => img.upload_status === 'uploading') && (\n                    <div className=\"flex items-center space-x-2 text-blaze-orange-600\">\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      <span className=\"text-sm\">Subiendo...</span>\n                    </div>\n                  )}\n                  {images.length > 1 && (\n                    <p className=\"text-xs text-gray-500\">\n                      Arrastra para reordenar\n                    </p>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {images.map((image, index) => (\n                  <div\n                    key={image.id || index}\n                    draggable={image.upload_status !== 'uploading'}\n                    onDragStart={() => handleDragStart(index)}\n                    onDragOver={handleDragOver}\n                    onDrop={(e) => handleDrop(e, index)}\n                    className={cn(\n                      \"relative group border-2 rounded-lg overflow-hidden transition-all\",\n                      image.upload_status === 'uploading' ? \"cursor-wait\" : \"cursor-move\",\n                      image.is_primary \n                        ? \"border-blaze-orange-500 ring-2 ring-blaze-orange-200\" \n                        : \"border-gray-200 hover:border-gray-300\",\n                      draggedIndex === index && \"opacity-50\",\n                      image.upload_status === 'error' && \"border-red-300 bg-red-50\"\n                    )}\n                  >\n                    {/* Image */}\n                    <div className=\"aspect-square relative\">\n                      <Image\n                        src={image.url}\n                        alt={image.alt || `Imagen ${index + 1}`}\n                        fill\n                        className={cn(\n                          \"object-cover transition-opacity\",\n                          image.upload_status === 'uploading' && \"opacity-50\"\n                        )}\n                      />\n                      \n                      {/* Upload Status Overlay */}\n                      {image.upload_status === 'uploading' && (\n                        <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\n                          <div className=\"text-center text-white\">\n                            <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-2\" />\n                            <div className=\"text-sm font-medium\">Subiendo...</div>\n                            {image.upload_progress !== undefined && (\n                              <div className=\"mt-2\">\n                                <div className=\"w-20 bg-gray-200 rounded-full h-1.5\">\n                                  <div \n                                    className=\"bg-blaze-orange-500 h-1.5 rounded-full transition-all duration-300\" \n                                    style={{ width: `${image.upload_progress}%` }}\n                                  ></div>\n                                </div>\n                                <div className=\"text-xs mt-1\">{Math.round(image.upload_progress)}%</div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Error Status Overlay */}\n                      {image.upload_status === 'error' && (\n                        <div className=\"absolute inset-0 bg-red-500 bg-opacity-50 flex items-center justify-center\">\n                          <div className=\"text-center text-white\">\n                            <XCircle className=\"w-8 h-8 mx-auto mb-2\" />\n                            <div className=\"text-sm font-medium\">Error al subir</div>\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Success Status Indicator */}\n                      {image.upload_status === 'success' && (\n                        <div className=\"absolute top-2 right-2 bg-green-500 rounded-full p-1\">\n                          <CheckCircle className=\"w-3 h-3 text-white\" />\n                        </div>\n                      )}\n                      \n                      {/* Primary Badge */}\n                      {image.is_primary && (\n                        <div className=\"absolute top-2 left-2 bg-blaze-orange-600 text-white text-xs px-2 py-1 rounded flex items-center space-x-1\">\n                          <Star className=\"w-3 h-3 fill-current\" />\n                          <span>Principal</span>\n                        </div>\n                      )}\n                      \n                      {/* File Info */}\n                      {(image.file_size || image.width) && (\n                        <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-2\">\n                          <div className=\"flex justify-between items-center\">\n                            {image.width && image.height && (\n                              <span>{image.width}x{image.height}</span>\n                            )}\n                            {image.file_size && (\n                              <span>{(image.file_size / (1024 * 1024)).toFixed(1)}MB</span>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Actions Overlay */}\n                      {image.upload_status !== 'uploading' && (\n                        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                          <div className=\"flex space-x-2\">\n                            {/* Set Primary */}\n                            <button\n                              type=\"button\"\n                              onClick={() => setPrimaryImage(index)}\n                              className=\"p-2 bg-white rounded-full hover:bg-gray-100 transition-colors\"\n                              title={image.is_primary ? \"Es imagen principal\" : \"Establecer como principal\"}\n                            >\n                              {image.is_primary ? (\n                                <Star className=\"w-4 h-4 text-yellow-500 fill-current\" />\n                              ) : (\n                                <StarOff className=\"w-4 h-4 text-gray-600\" />\n                              )}\n                            </button>\n                            \n                            {/* Edit Alt */}\n                            <button\n                              type=\"button\"\n                              onClick={() => startEditingAlt(index)}\n                              className=\"p-2 bg-white rounded-full hover:bg-gray-100 transition-colors\"\n                              title=\"Editar texto alternativo\"\n                            >\n                              <Edit className=\"w-4 h-4 text-gray-600\" />\n                            </button>\n                            \n                            {/* Remove */}\n                            <button\n                              type=\"button\"\n                              onClick={() => removeImage(index)}\n                              className=\"p-2 bg-white rounded-full hover:bg-red-100 transition-colors\"\n                              title=\"Eliminar imagen\"\n                            >\n                              <Trash2 className=\"w-4 h-4 text-red-600\" />\n                            </button>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Alt Text */}\n                    <div className=\"p-2 bg-white\">\n                      {editingIndex === index ? (\n                        <div className=\"space-y-2\">\n                          <input\n                            type=\"text\"\n                            value={editingAlt}\n                            onChange={(e) => setEditingAlt(e.target.value)}\n                            className=\"w-full text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blaze-orange-500\"\n                            placeholder=\"Texto alternativo\"\n                          />\n                          <div className=\"flex space-x-1\">\n                            <button\n                              type=\"button\"\n                              onClick={saveAltText}\n                              className=\"flex-1 text-xs bg-blaze-orange-600 text-white px-2 py-1 rounded hover:bg-blaze-orange-700\"\n                            >\n                              Guardar\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={cancelEditingAlt}\n                              className=\"flex-1 text-xs bg-gray-300 text-gray-700 px-2 py-1 rounded hover:bg-gray-400\"\n                            >\n                              Cancelar\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <p className=\"text-xs text-gray-600 truncate\">\n                          {image.alt || 'Sin texto alternativo'}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                ))}\n                \n                {/* Add More Button */}\n                {images.length < maxImages && (\n                  <button\n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-blaze-orange-400 hover:bg-blaze-orange-50 transition-colors\"\n                  >\n                    <Plus className=\"w-8 h-8 text-gray-400\" />\n                    <span className=\"text-xs text-gray-500 mt-2\">Agregar mas</span>\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Upload Progress */}\n          {uploading && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blaze-orange-600\"></div>\n              <span>Subiendo imagenes...</span>\n            </div>\n          )}\n\n          {/* Statistics Summary */}\n          {images.length > 0 && (\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n              <h5 className=\"text-sm font-medium text-gray-800 mb-3\">\n                Resumen de Imagenes\n              </h5>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n                <div className=\"bg-white rounded-lg p-3\">\n                  <div className=\"text-lg font-semibold text-gray-900\">{images.length}</div>\n                  <div className=\"text-xs text-gray-500\">Total</div>\n                </div>\n                <div className=\"bg-white rounded-lg p-3\">\n                  <div className=\"text-lg font-semibold text-green-600\">\n                    {images.filter(img => img.upload_status === 'success').length}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Exitosas</div>\n                </div>\n                <div className=\"bg-white rounded-lg p-3\">\n                  <div className=\"text-lg font-semibold text-blaze-orange-600\">\n                    {images.filter(img => img.upload_status === 'uploading').length}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Subiendo</div>\n                </div>\n                <div className=\"bg-white rounded-lg p-3\">\n                  <div className=\"text-lg font-semibold text-red-600\">\n                    {images.filter(img => img.upload_status === 'error').length}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Con Error</div>\n                </div>\n              </div>\n              \n              {images.some(img => img.file_size) && (\n                <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                  <div className=\"flex justify-between items-center text-sm\">\n                    <span className=\"text-gray-600\">Tamano total:</span>\n                    <span className=\"font-medium text-gray-900\">\n                      {(\n                        images\n                          .filter(img => img.file_size)\n                          .reduce((total, img) => total + (img.file_size || 0), 0) / (1024 * 1024)\n                      ).toFixed(1)} MB\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between items-center text-sm mt-1\">\n                    <span className=\"text-gray-600\">Con texto alternativo:</span>\n                    <span className=\"font-medium text-gray-900\">\n                      {images.filter(img => img.alt && img.alt.trim()).length} de {images.length}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Tips */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h5 className=\"text-sm font-medium text-blue-800 mb-2\">\n              Consejos para mejores imagenes:\n            </h5>\n            <ul className=\"text-xs text-blue-700 space-y-1\">\n              <li>• Usa imagenes de alta calidad (minimo 800x800px)</li>\n              <li>• La primera imagen sera la imagen principal del producto</li>\n              <li>• Incluye diferentes angulos y detalles del producto</li>\n              <li>• Agrega texto alternativo para mejorar la accesibilidad</li>\n              <li>• Arrastra las imagenes para cambiar el orden</li>\n              {enableOptimization && (\n                <li>• Las imagenes se optimizan automaticamente para mejor rendimiento</li>\n              )}\n            </ul>\n          </div>\n        </div>\n      </AdminCard>\n    </div>\n  );\n}\n"],"names":["ProductImageManager","validateImageFile","file","maxSize","allowedTypes","includes","type","size","optimizeImage","maxWidth","quality","Promise","resolve","canvas","document","createElement","ctx","getContext","img","window","Image","onload","width","height","drawImage","toBlob","blob","optimizedFile","File","name","lastModified","Date","now","src","URL","createObjectURL","getImageDimensions","productId","images","onChange","error","maxImages","maxFileSize","enableOptimization","className","draggedIndex","setDraggedIndex","useState","editingIndex","setEditingIndex","editingAlt","setEditingAlt","uploading","setUploading","uploadErrors","setUploadErrors","isDragOver","setIsDragOver","fileInputRef","useRef","handleFileUpload","useCallback","files","length","remainingSlots","filesToUpload","Array","from","slice","errors","processedImages","validationError","push","dimensions","processedFile","url","newImage","id","Math","random","alt","replace","is_primary","file_size","file_type","upload_status","fileError","console","handleDragStart","index","handleDragOver","e","preventDefault","stopPropagation","handleDragEnter","handleDragLeave","currentTarget","contains","relatedTarget","handleDrop","dropIndex","dataTransfer","undefined","newImages","draggedImage","splice","actualDropIndex","handleFileInputChange","target","setPrimaryImage","map","i","removeImage","filter","_","startEditingAlt","saveAltText","cancelEditingAlt","div","cn","AdminCard","title","onDrop","onDragOver","onDragEnter","onDragLeave","Loader2","ImageIcon","p","label","htmlFor","span","input","ref","multiple","accept","join","disabled","split","toUpperCase","AlertCircle","XCircle","h4","ul","li","some","image","draggable","onDragStart","fill","upload_progress","style","round","CheckCircle","Star","toFixed","button","onClick","StarOff","Edit","Trash2","value","placeholder","current","click","Plus","h5","reduce","total","trim"],"mappings":"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"}