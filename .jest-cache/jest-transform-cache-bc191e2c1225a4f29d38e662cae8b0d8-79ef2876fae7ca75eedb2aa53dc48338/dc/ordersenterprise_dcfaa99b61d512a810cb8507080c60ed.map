{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\types\\orders-enterprise.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - ORDERS ENTERPRISE TYPES\n// ===================================\n\n// ===================================\n// ESTADOS DE ÓRDENES\n// ===================================\n\nexport type OrderStatus = \n  | 'pending'     // Pendiente de confirmación\n  | 'confirmed'   // Confirmada, preparando\n  | 'processing'  // En proceso de preparación\n  | 'shipped'     // Enviada\n  | 'delivered'   // Entregada\n  | 'cancelled'   // Cancelada\n  | 'refunded'    // Reembolsada\n  | 'returned';   // Devuelta\n\nexport type PaymentStatus = \n  | 'pending'     // Pendiente de pago\n  | 'paid'        // Pagado\n  | 'failed'      // Falló el pago\n  | 'refunded';   // Reembolsado\n\nexport type FulfillmentStatus = \n  | 'unfulfilled' // Sin procesar\n  | 'partial'     // Parcialmente procesado\n  | 'fulfilled';  // Completamente procesado\n\n// ===================================\n// TRANSICIONES DE ESTADOS\n// ===================================\n\nexport interface StateTransition {\n  from: OrderStatus;\n  to: OrderStatus;\n  allowed: boolean;\n  requiresReason: boolean;\n  description: string;\n}\n\nexport const ORDER_STATE_TRANSITIONS: Record<OrderStatus, OrderStatus[]> = {\n  pending: ['confirmed', 'cancelled'],\n  confirmed: ['processing', 'cancelled'],\n  processing: ['shipped', 'cancelled'],\n  shipped: ['delivered', 'returned'],\n  delivered: ['returned'],\n  cancelled: [],\n  refunded: [],\n  returned: ['refunded']\n};\n\nexport const ORDER_STATUS_DESCRIPTIONS: Record<OrderStatus, string> = {\n  pending: 'Pendiente de confirmación',\n  confirmed: 'Confirmada, preparando pedido',\n  processing: 'En proceso de preparación',\n  shipped: 'Enviada',\n  delivered: 'Entregada',\n  cancelled: 'Cancelada',\n  refunded: 'Reembolsada',\n  returned: 'Devuelta'\n};\n\n// ===================================\n// INTERFACES PRINCIPALES\n// ===================================\n\nexport interface OrderEnterprise {\n  id: string;\n  order_number: string;\n  user_id: string;\n  status: OrderStatus;\n  payment_status: PaymentStatus;\n  fulfillment_status: FulfillmentStatus;\n  total: number;\n  currency: string;\n  shipping_address?: ShippingAddress;\n  billing_address?: BillingAddress;\n  notes?: string;\n  admin_notes?: string;\n  tracking_number?: string;\n  carrier?: string;\n  estimated_delivery?: string;\n  metadata: Record<string, any>;\n  created_at: string;\n  updated_at: string;\n  \n  // Relaciones\n  user_profiles?: UserProfile;\n  order_items?: OrderItemEnterprise[];\n  status_history?: OrderStatusHistory[];\n  order_notes?: OrderNote[];\n}\n\nexport interface OrderItemEnterprise {\n  id: string;\n  order_id: string;\n  product_id: number;\n  quantity: number;\n  unit_price: number;\n  total_price: number;\n  product_snapshot?: Record<string, any>;\n  created_at: string;\n  \n  // Relaciones\n  products?: ProductBasic;\n}\n\nexport interface OrderStatusHistory {\n  id: string;\n  order_id: string;\n  previous_status?: OrderStatus;\n  new_status: OrderStatus;\n  changed_by?: string;\n  reason?: string;\n  metadata: Record<string, any>;\n  created_at: string;\n  \n  // Relaciones\n  user_profiles?: UserProfile;\n}\n\nexport interface OrderNote {\n  id: string;\n  order_id: string;\n  admin_id?: string;\n  note_type: 'internal' | 'customer' | 'system';\n  content: string;\n  is_visible_to_customer: boolean;\n  metadata: Record<string, any>;\n  created_at: string;\n  updated_at: string;\n  \n  // Relaciones\n  user_profiles?: UserProfile;\n}\n\nexport interface OrderMetrics {\n  id: string;\n  date: string;\n  total_orders: number;\n  total_revenue: number;\n  avg_order_value: number;\n  orders_by_status: Record<OrderStatus, number>;\n  orders_by_payment_status: Record<PaymentStatus, number>;\n  top_products: ProductSalesMetric[];\n  created_at: string;\n  updated_at: string;\n}\n\n// ===================================\n// INTERFACES DE SOPORTE\n// ===================================\n\nexport interface ShippingAddress {\n  street_name: string;\n  street_number: string;\n  zip_code: string;\n  city_name: string;\n  state_name: string;\n  country?: string;\n  additional_info?: string;\n}\n\nexport interface BillingAddress extends ShippingAddress {\n  company_name?: string;\n  tax_id?: string;\n}\n\nexport interface UserProfile {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  role?: string;\n}\n\nexport interface ProductBasic {\n  id: number;\n  name: string;\n  images?: string[];\n  sku?: string;\n  category?: string;\n}\n\nexport interface ProductSalesMetric {\n  product_id: number;\n  product_name: string;\n  total_quantity: number;\n  total_revenue: number;\n  avg_price: number;\n}\n\n// ===================================\n// FILTROS Y CONSULTAS\n// ===================================\n\nexport interface OrderFilters {\n  page?: number;\n  limit?: number;\n  status?: OrderStatus;\n  payment_status?: PaymentStatus;\n  date_from?: string;\n  date_to?: string;\n  search?: string;\n  sort_by?: 'created_at' | 'total' | 'order_number';\n  sort_order?: 'asc' | 'desc';\n}\n\nexport interface OrderListResponse {\n  orders: OrderEnterprise[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n    hasNextPage: boolean;\n    hasPreviousPage: boolean;\n  };\n  filters: OrderFilters;\n}\n\n// ===================================\n// OPERACIONES MASIVAS\n// ===================================\n\nexport interface BulkStatusUpdate {\n  order_ids: string[];\n  status: OrderStatus;\n  reason: string;\n  notify_customers?: boolean;\n}\n\nexport interface BulkStatusUpdateResult {\n  updated_orders: OrderEnterprise[];\n  invalid_orders: {\n    id: string;\n    order_number: string;\n    current_status: OrderStatus;\n    reason: string;\n  }[];\n  summary: {\n    total_requested: number;\n    successfully_updated: number;\n    failed_updates: number;\n  };\n}\n\nexport interface BulkExportOptions {\n  format: 'csv' | 'json';\n  filters?: OrderFilters;\n  include_items?: boolean;\n}\n\n// ===================================\n// ANALYTICS Y REPORTES\n// ===================================\n\nexport interface OrderAnalytics {\n  summary: {\n    total_orders: number;\n    total_revenue: number;\n    average_order_value: number;\n    revenue_growth_percentage: number;\n    period: {\n      start_date: string;\n      end_date: string;\n      period_type: string;\n    };\n  };\n  status_distribution: Record<OrderStatus, number>;\n  top_products: ProductSalesMetric[];\n  daily_trends: DailyTrend[];\n  filters: AnalyticsFilters;\n}\n\nexport interface AnalyticsFilters {\n  period: 'today' | 'week' | 'month' | 'quarter' | 'year' | 'custom';\n  date_from?: string;\n  date_to?: string;\n  group_by: 'day' | 'week' | 'month';\n  include_details?: boolean;\n}\n\nexport interface DailyTrend {\n  date: string;\n  total_orders: number;\n  total_revenue: number;\n  avg_order_value: number;\n}\n\n// ===================================\n// FORMULARIOS Y VALIDACIONES\n// ===================================\n\nexport interface CreateOrderRequest {\n  user_id: string;\n  items: {\n    product_id: number;\n    quantity: number;\n    unit_price: number;\n  }[];\n  shipping_address?: ShippingAddress;\n  notes?: string;\n}\n\nexport interface UpdateOrderRequest {\n  status?: OrderStatus;\n  payment_status?: PaymentStatus;\n  notes?: string;\n  tracking_number?: string;\n  carrier?: string;\n  shipping_address?: ShippingAddress;\n}\n\nexport interface StatusUpdateRequest {\n  status: OrderStatus;\n  reason: string;\n  notify_customer?: boolean;\n  tracking_number?: string;\n  carrier?: string;\n  estimated_delivery?: string;\n}\n\n// ===================================\n// NOTIFICACIONES\n// ===================================\n\nexport interface OrderNotification {\n  type: 'status_change' | 'payment_update' | 'shipping_update';\n  order_id: string;\n  order_number: string;\n  customer_email: string;\n  previous_status?: OrderStatus;\n  new_status: OrderStatus;\n  message: string;\n  metadata?: Record<string, any>;\n}\n\n// ===================================\n// HOOKS Y ESTADO\n// ===================================\n\nexport interface UseOrdersState {\n  orders: OrderEnterprise[];\n  loading: boolean;\n  error: string | null;\n  filters: OrderFilters;\n  pagination: OrderListResponse['pagination'];\n}\n\nexport interface UseOrderDetailState {\n  order: OrderEnterprise | null;\n  statusHistory: OrderStatusHistory[];\n  notes: OrderNote[];\n  loading: boolean;\n  error: string | null;\n  updating: boolean;\n}\n\nexport interface UseOrderAnalyticsState {\n  analytics: OrderAnalytics | null;\n  loading: boolean;\n  error: string | null;\n  refreshing: boolean;\n}\n\n// ===================================\n// VALIDACIONES\n// ===================================\n\nexport interface ValidationResult {\n  valid: boolean;\n  message?: string;\n  details?: string[];\n}\n\nexport interface StateTransitionValidation extends ValidationResult {\n  allowedTransitions?: OrderStatus[];\n}\n\n// ===================================\n// CONFIGURACIÓN\n// ===================================\n\nexport interface OrdersConfig {\n  defaultPageSize: number;\n  maxBulkOperations: number;\n  autoSaveInterval: number;\n  statusTransitions: Record<OrderStatus, OrderStatus[]>;\n  notificationSettings: {\n    enableCustomerNotifications: boolean;\n    enableAdminNotifications: boolean;\n    emailTemplates: Record<string, string>;\n  };\n}\n"],"names":["ORDER_STATE_TRANSITIONS","ORDER_STATUS_DESCRIPTIONS","pending","confirmed","processing","shipped","delivered","cancelled","refunded","returned"],"mappings":"AAAA,sCAAsC;AACtC,+CAA+C;AAC/C,sCAAsC;AAEtC,sCAAsC;AACtC,qBAAqB;AACrB,sCAAsC;;;;;;;;;;;;QAmCzBA;eAAAA;;QAWAC;eAAAA;;;AAXN,MAAMD,0BAA8D;IACzEE,SAAS;QAAC;QAAa;KAAY;IACnCC,WAAW;QAAC;QAAc;KAAY;IACtCC,YAAY;QAAC;QAAW;KAAY;IACpCC,SAAS;QAAC;QAAa;KAAW;IAClCC,WAAW;QAAC;KAAW;IACvBC,WAAW,EAAE;IACbC,UAAU,EAAE;IACZC,UAAU;QAAC;KAAW;AACxB;AAEO,MAAMR,4BAAyD;IACpEC,SAAS;IACTC,WAAW;IACXC,YAAY;IACZC,SAAS;IACTC,WAAW;IACXC,WAAW;IACXC,UAAU;IACVC,UAAU;AACZ"}