{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\cart-summary.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { PriceDisplay } from \"@/components/ui/price-display\"\r\nimport { ShippingInfo } from \"@/components/ui/shipping-info\"\r\nimport { EnhancedProductCard } from \"@/components/ui/product-card-enhanced\"\r\nimport { ShoppingCart, CreditCard, Truck, Gift, Percent } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface CartItem {\r\n  id: number | string\r\n  title: string\r\n  price: number\r\n  discountedPrice: number\r\n  quantity: number\r\n  image?: string\r\n  imgs?: {\r\n    thumbnails?: string[]\r\n    previews?: string[]\r\n  }\r\n  category?: string\r\n  weight?: number\r\n}\r\n\r\nexport interface CartSummaryProps {\r\n  /** Items del carrito */\r\n  cartItems: CartItem[]\r\n  /** Precio total sin envío ni descuentos */\r\n  totalPrice: number\r\n  /** Costo de envío */\r\n  shippingCost?: number\r\n  /** Descuento aplicado */\r\n  discount?: number\r\n  /** Total final */\r\n  finalTotal?: number\r\n  /** Método de envío seleccionado */\r\n  shippingMethod?: 'free' | 'standard' | 'express'\r\n  /** Cupón aplicado */\r\n  appliedCoupon?: {\r\n    code: string\r\n    discount: number\r\n    type: 'percentage' | 'fixed'\r\n  } | null\r\n  /** Variante del componente */\r\n  variant?: 'default' | 'compact' | 'detailed'\r\n  /** Mostrar productos como cards */\r\n  showProductCards?: boolean\r\n  /** Contexto para EnhancedProductCard */\r\n  productCardContext?: 'default' | 'productDetail' | 'checkout' | 'demo'\r\n  /** Callback para proceder al checkout */\r\n  onCheckout?: () => void\r\n  /** Callback para aplicar cupón */\r\n  onApplyCoupon?: (code: string) => void\r\n  /** Callback para remover cupón */\r\n  onRemoveCoupon?: () => void\r\n  /** Mostrar información de envío detallada */\r\n  showShippingDetails?: boolean\r\n  /** Clase CSS adicional */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * CartSummary avanzado con integración del Design System\r\n * \r\n * Características:\r\n * - Integra PriceDisplay para precios consistentes\r\n * - Usa ShippingInfo para información de envío\r\n * - Opción de mostrar productos como EnhancedProductCard\r\n * - Soporte para cupones y descuentos\r\n * - Múltiples variantes (default, compact, detailed)\r\n */\r\nexport const CartSummary = React.forwardRef<HTMLDivElement, CartSummaryProps>(\r\n  ({\r\n    cartItems = [],\r\n    totalPrice = 0,\r\n    shippingCost = 0,\r\n    discount = 0,\r\n    finalTotal,\r\n    shippingMethod = 'standard',\r\n    appliedCoupon,\r\n    variant = 'default',\r\n    showProductCards = false,\r\n    productCardContext = 'checkout',\r\n    onCheckout,\r\n    onApplyCoupon,\r\n    onRemoveCoupon,\r\n    showShippingDetails = false,\r\n    className,\r\n    ...props\r\n  }, ref) => {\r\n    const calculatedFinalTotal = finalTotal ?? (totalPrice + (shippingCost || 0) - (discount || 0))\r\n    const isCompact = variant === 'compact'\r\n    const isDetailed = variant === 'detailed'\r\n\r\n    // Calcular si califica para envío gratis\r\n    const qualifiesForFreeShipping = totalPrice >= 50000\r\n    const actualShippingCost = qualifiesForFreeShipping ? 0 : (shippingCost || 0)\r\n\r\n    return (\r\n      <Card ref={ref} className={cn(\"w-full\", className)} {...props}>\r\n        <CardHeader className={cn(\"pb-4\", isCompact && \"pb-2\")}>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <ShoppingCart className=\"w-5 h-5 text-primary\" />\r\n            Resumen del Pedido\r\n            <Badge variant=\"outline\" size=\"sm\">\r\n              {cartItems.length} {cartItems.length === 1 ? 'item' : 'items'}\r\n            </Badge>\r\n          </CardTitle>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Items del carrito */}\r\n          {cartItems.length > 0 ? (\r\n            <div className={cn(\r\n              \"space-y-3\",\r\n              isCompact ? \"max-h-40\" : \"max-h-80\",\r\n              \"overflow-y-auto\"\r\n            )}>\r\n              {cartItems.map((item, index) => (\r\n                <div key={`${item.id}-${index}`}>\r\n                  {showProductCards ? (\r\n                    // Mostrar como EnhancedProductCard\r\n                    <EnhancedProductCard\r\n                      context={productCardContext}\r\n                      image={item.image || item.imgs?.thumbnails?.[0] || item.imgs?.previews?.[0]}\r\n                      title={item.title}\r\n                      price={item.discountedPrice}\r\n                      originalPrice={item.discountedPrice < item.price ? item.price : undefined}\r\n                      stock={item.quantity}\r\n                      stockUnit=\"en carrito\"\r\n                      productId={item.id}\r\n                      badge={item.discountedPrice >= 15000 ? \"Envío gratis\" : undefined}\r\n                      cta={`Total: $${(item.discountedPrice * item.quantity).toLocaleString()}`}\r\n                      onAddToCart={() => {}}\r\n                      showCartAnimation={false}\r\n                      productData={{\r\n                        category: item.category,\r\n                        weight: item.weight,\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    // Mostrar como item simple\r\n                    <div className=\"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0\">\r\n                      <div className=\"flex-1 pr-4\">\r\n                        <p className=\"font-medium text-gray-900 line-clamp-2\">{item.title}</p>\r\n                        <p className=\"text-sm text-gray-500\">Cantidad: {item.quantity}</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <PriceDisplay\r\n                          amount={(item.discountedPrice * item.quantity) * 100}\r\n                          originalAmount={item.discountedPrice < item.price ? (item.price * item.quantity) * 100 : undefined}\r\n                          variant=\"compact\"\r\n                          size=\"sm\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <ShoppingCart className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\r\n              <p>No hay productos en el carrito</p>\r\n            </div>\r\n          )}\r\n\r\n          {cartItems.length > 0 && (\r\n            <>\r\n              <Separator />\r\n\r\n              {/* Totales */}\r\n              <div className=\"space-y-3\">\r\n                {/* Subtotal */}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-600\">Subtotal</span>\r\n                  <PriceDisplay\r\n                    amount={totalPrice * 100}\r\n                    variant=\"compact\"\r\n                    size=\"sm\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Envío */}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Truck className=\"w-4 h-4 text-gray-500\" />\r\n                    <span className=\"text-gray-600\">Envío</span>\r\n                    {qualifiesForFreeShipping && (\r\n                      <Badge variant=\"success\" size=\"sm\">Gratis</Badge>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    {qualifiesForFreeShipping ? (\r\n                      <span className=\"text-green-600 font-medium\">Gratis</span>\r\n                    ) : (\r\n                      <PriceDisplay\r\n                        amount={actualShippingCost * 100}\r\n                        variant=\"compact\"\r\n                        size=\"sm\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Descuento */}\r\n                {(discount > 0 || appliedCoupon) && (\r\n                  <div className=\"flex items-center justify-between text-green-600\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Percent className=\"w-4 h-4\" />\r\n                      <span>Descuento</span>\r\n                      {appliedCoupon && (\r\n                        <Badge variant=\"success\" size=\"sm\">\r\n                          {appliedCoupon.code}\r\n                        </Badge>\r\n                      )}\r\n                    </div>\r\n                    <PriceDisplay\r\n                      amount={-(discount * 100)}\r\n                      variant=\"compact\"\r\n                      size=\"sm\"\r\n                      className=\"text-green-600\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <Separator />\r\n\r\n                {/* Total final */}\r\n                <div className=\"flex items-center justify-between font-semibold text-lg\">\r\n                  <span>Total</span>\r\n                  <PriceDisplay\r\n                    amount={calculatedFinalTotal * 100}\r\n                    variant=\"default\"\r\n                    size=\"lg\"\r\n                    className=\"text-primary\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Información de envío detallada */}\r\n              {showShippingDetails && isDetailed && (\r\n                <>\r\n                  <Separator />\r\n                  <ShippingInfo\r\n                    variant=\"inline\"\r\n                    options={[\r\n                      {\r\n                        id: 'free',\r\n                        name: 'Envío gratis',\r\n                        price: 0,\r\n                        estimatedDays: { min: 5, max: 7 },\r\n                        isFree: true,\r\n                        description: 'En compras mayores a $50.000'\r\n                      },\r\n                      {\r\n                        id: 'standard',\r\n                        name: 'Envío estándar',\r\n                        price: 2500,\r\n                        estimatedDays: { min: 3, max: 5 },\r\n                        description: 'Entrega a domicilio'\r\n                      },\r\n                      {\r\n                        id: 'express',\r\n                        name: 'Envío express',\r\n                        price: 4500,\r\n                        estimatedDays: { min: 1, max: 2 },\r\n                        isExpress: true,\r\n                        description: 'Entrega prioritaria'\r\n                      }\r\n                    ]}\r\n                    selectedOption={shippingMethod}\r\n                    showCalculator={false}\r\n                    showGuarantees={true}\r\n                  />\r\n                </>\r\n              )}\r\n\r\n              {/* Beneficios */}\r\n              {!isCompact && (\r\n                <>\r\n                  <Separator />\r\n                  <div className=\"bg-green-50 p-3 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2 text-green-700 text-sm\">\r\n                      <Gift className=\"w-4 h-4\" />\r\n                      <span className=\"font-medium\">Compra protegida</span>\r\n                    </div>\r\n                    <p className=\"text-xs text-green-600 mt-1\">\r\n                      Tu dinero está protegido con MercadoPago\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Botón de checkout */}\r\n              {onCheckout && (\r\n                <>\r\n                  <Separator />\r\n                  <Button\r\n                    onClick={onCheckout}\r\n                    className=\"w-full\"\r\n                    size=\"lg\"\r\n                    disabled={cartItems.length === 0}\r\n                  >\r\n                    <CreditCard className=\"w-4 h-4 mr-2\" />\r\n                    Proceder al Pago\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n)\r\n\r\nCartSummary.displayName = \"CartSummary\"\r\n"],"names":["CartSummary","React","forwardRef","cartItems","totalPrice","shippingCost","discount","finalTotal","shippingMethod","appliedCoupon","variant","showProductCards","productCardContext","onCheckout","onApplyCoupon","onRemoveCoupon","showShippingDetails","className","props","ref","calculatedFinalTotal","isCompact","isDetailed","qualifiesForFreeShipping","actualShippingCost","Card","cn","CardHeader","CardTitle","ShoppingCart","Badge","size","length","CardContent","div","map","item","index","EnhancedProductCard","context","image","imgs","thumbnails","previews","title","price","discountedPrice","originalPrice","undefined","stock","quantity","stockUnit","productId","id","badge","cta","toLocaleString","onAddToCart","showCartAnimation","productData","category","weight","p","PriceDisplay","amount","originalAmount","Separator","span","Truck","Percent","code","ShippingInfo","options","name","estimatedDays","min","max","isFree","description","isExpress","selectedOption","showCalculator","showGuarantees","Gift","Button","onClick","disabled","CreditCard","displayName"],"mappings":"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"}