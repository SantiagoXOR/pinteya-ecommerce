95bf21c6c9d692d24decda40e558285b
// ===================================
// PINTEYA E-COMMERCE - ENTERPRISE ALERT SYSTEM
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get AlertLevel () {
        return AlertLevel;
    },
    get AlertStatus () {
        return AlertStatus;
    },
    get EnterpriseAlertSystem () {
        return EnterpriseAlertSystem;
    },
    get NotificationType () {
        return NotificationType;
    },
    get acknowledgeAlert () {
        return acknowledgeAlert;
    },
    get enterpriseAlertSystem () {
        return enterpriseAlertSystem;
    },
    get resolveAlert () {
        return resolveAlert;
    },
    get triggerAlert () {
        return triggerAlert;
    }
});
const _logger = require("../logger");
const _supabase = require("../supabase");
const _email = require("../notifications/email");
const _slack = require("../notifications/slack");
// ✅ IMPORT CONDICIONAL: Solo cargar CacheUtils en servidor para evitar errores de ioredis en cliente
let CacheUtils = null;
if (typeof window === 'undefined') {
    // Solo en servidor
    try {
        CacheUtils = require('@/lib/cache-manager').CacheUtils;
    } catch (error) {
        console.warn('[EnterpriseAlertSystem] CacheUtils not available:', error);
    }
}
var AlertLevel = /*#__PURE__*/ function(AlertLevel) {
    AlertLevel["INFO"] = "info";
    AlertLevel["WARNING"] = "warning";
    AlertLevel["CRITICAL"] = "critical";
    AlertLevel["EMERGENCY"] = "emergency";
    return AlertLevel;
}({});
var NotificationType = /*#__PURE__*/ function(NotificationType) {
    NotificationType["EMAIL"] = "email";
    NotificationType["SLACK"] = "slack";
    NotificationType["WEBHOOK"] = "webhook";
    NotificationType["SMS"] = "sms";
    NotificationType["PUSH"] = "push";
    NotificationType["LOG"] = "log";
    return NotificationType;
}({});
var AlertStatus = /*#__PURE__*/ function(AlertStatus) {
    AlertStatus["ACTIVE"] = "active";
    AlertStatus["ACKNOWLEDGED"] = "acknowledged";
    AlertStatus["RESOLVED"] = "resolved";
    AlertStatus["SUPPRESSED"] = "suppressed";
    return AlertStatus;
}({});
class EnterpriseAlertSystem {
    constructor(){
        this.alertRules = new Map();
        this.notificationChannels = new Map();
        this.escalationRules = new Map();
        this.activeAlerts = new Map();
        this.escalationInterval = null;
        this.initializeDefaultChannels();
        this.initializeDefaultRules();
        this.startEscalationMonitoring();
    }
    static getInstance() {
        if (!EnterpriseAlertSystem.instance) {
            EnterpriseAlertSystem.instance = new EnterpriseAlertSystem();
        }
        return EnterpriseAlertSystem.instance;
    }
    /**
   * Configura un canal de notificación
   */ setNotificationChannel(channel) {
        this.notificationChannels.set(channel.id, channel);
        _logger.logger.info(_logger.LogLevel.INFO, `Notification channel configured: ${channel.id}`, {
            type: channel.type,
            enabled: channel.enabled,
            levels: channel.levels
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Configura una regla de escalamiento
   */ setEscalationRule(rule) {
        this.escalationRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Escalation rule configured: ${rule.id}`, {
            level: rule.conditions.level,
            duration: rule.conditions.duration,
            enabled: rule.enabled
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Configura una regla de alerta
   */ setAlertRule(rule) {
        this.alertRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert rule configured: ${rule.id}`, {
            metricName: rule.metricName,
            threshold: rule.threshold,
            level: rule.level,
            enabled: rule.enabled
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Dispara una alerta
   */ async triggerAlert(ruleId, metricName, value, message) {
        const rule = this.alertRules.get(ruleId);
        if (!rule || !rule.enabled) {
            return null;
        }
        // Verificar cooldown
        const existingAlert = Array.from(this.activeAlerts.values()).find((alert)=>alert.ruleId === ruleId && alert.status === "active");
        if (existingAlert) {
            const cooldownEnd = new Date(existingAlert.triggeredAt);
            cooldownEnd.setMinutes(cooldownEnd.getMinutes() + rule.cooldownMinutes);
            if (new Date() < cooldownEnd) {
                return null; // Aún en cooldown
            }
        }
        // Crear nueva alerta
        const alert = {
            id: this.generateAlertId(),
            ruleId: rule.id,
            ruleName: rule.name,
            level: rule.level,
            status: "active",
            message: message || `${rule.description} - Value: ${value}, Threshold: ${rule.threshold}`,
            metricName,
            value,
            threshold: rule.threshold,
            triggeredAt: new Date().toISOString(),
            notificationsSent: [],
            tags: rule.tags,
            metadata: rule.metadata
        };
        this.activeAlerts.set(alert.id, alert);
        // Enviar notificaciones
        await this.sendNotifications(alert, rule.channels);
        // Almacenar en base de datos
        await this.storeAlert(alert);
        _logger.logger.warn(_logger.LogLevel.WARN, `Alert triggered: ${rule.name}`, {
            alertId: alert.id,
            level: alert.level,
            metricName: alert.metricName,
            value: alert.value,
            threshold: alert.threshold
        }, _logger.LogCategory.SYSTEM);
        return alert;
    }
    /**
   * Reconoce una alerta
   */ async acknowledgeAlert(alertId, userId) {
        const alert = this.activeAlerts.get(alertId);
        if (!alert || alert.status !== "active") {
            return false;
        }
        alert.status = "acknowledged";
        alert.acknowledgedAt = new Date().toISOString();
        alert.acknowledgedBy = userId;
        await this.updateAlert(alert);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert acknowledged: ${alertId}`, {
            userId,
            level: alert.level,
            ruleName: alert.ruleName
        }, _logger.LogCategory.SYSTEM);
        return true;
    }
    /**
   * Resuelve una alerta
   */ async resolveAlert(alertId, userId) {
        const alert = this.activeAlerts.get(alertId);
        if (!alert) {
            return false;
        }
        alert.status = "resolved";
        alert.resolvedAt = new Date().toISOString();
        alert.resolvedBy = userId;
        await this.updateAlert(alert);
        this.activeAlerts.delete(alertId);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert resolved: ${alertId}`, {
            userId,
            level: alert.level,
            ruleName: alert.ruleName,
            duration: this.calculateDuration(alert.triggeredAt, alert.resolvedAt)
        }, _logger.LogCategory.SYSTEM);
        return true;
    }
    /**
   * Envía notificaciones para una alerta
   */ async sendNotifications(alert, channelIds) {
        const notifications = await Promise.allSettled(channelIds.map((channelId)=>this.sendNotification(alert, channelId)));
        // Log resultados
        notifications.forEach((result, index)=>{
            const channelId = channelIds[index];
            if (result.status === 'fulfilled' && result.value) {
                alert.notificationsSent.push(result.value);
            } else if (result.status === 'rejected') {
                _logger.logger.error(_logger.LogLevel.ERROR, `Failed to send notification to channel: ${channelId}`, {
                    alertId: alert.id,
                    error: result.reason
                }, _logger.LogCategory.SYSTEM);
            }
        });
    }
    /**
   * Envía notificación a un canal específico
   */ async sendNotification(alert, channelId) {
        const channel = this.notificationChannels.get(channelId);
        if (!channel || !channel.enabled || !channel.levels.includes(alert.level)) {
            return null;
        }
        // Verificar rate limiting
        if (channel.rateLimit && !await this.checkRateLimit(channelId, channel.rateLimit)) {
            _logger.logger.warn(_logger.LogLevel.WARN, `Rate limit exceeded for channel: ${channelId}`, {
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
            return null;
        }
        const startTime = Date.now();
        let success = false;
        let error;
        try {
            switch(channel.type){
                case "email":
                    await this.sendEmailNotification(alert, channel);
                    break;
                case "slack":
                    await this.sendSlackNotification(alert, channel);
                    break;
                case "webhook":
                    await this.sendWebhookNotification(alert, channel);
                    break;
                case "sms":
                    await this.sendSMSNotification(alert, channel);
                    break;
                case "log":
                    await this.sendLogNotification(alert, channel);
                    break;
                default:
                    throw new Error(`Unsupported notification type: ${channel.type}`);
            }
            success = true;
        } catch (err) {
            error = err instanceof Error ? err.message : 'Unknown error';
        }
        const notificationLog = {
            id: this.generateNotificationId(),
            channelId,
            channelType: channel.type,
            sentAt: new Date().toISOString(),
            success,
            error,
            responseTime: Date.now() - startTime
        };
        return notificationLog;
    }
    /**
   * Monitoreo de escalamiento automático
   */ async checkEscalations() {
        for (const alert of this.activeAlerts.values()){
            if (alert.status !== "active") {
                continue;
            }
            const rule = this.alertRules.get(alert.ruleId);
            if (!rule) {
                continue;
            }
            // Verificar reglas de escalamiento
            for (const escalationRuleId of rule.escalationRules){
                const escalationRule = this.escalationRules.get(escalationRuleId);
                if (!escalationRule || !escalationRule.enabled) {
                    continue;
                }
                // Verificar condiciones de escalamiento
                if (this.shouldEscalate(alert, escalationRule)) {
                    await this.escalateAlert(alert, escalationRule);
                }
            }
        }
    }
    /**
   * Verifica si una alerta debe escalarse
   */ shouldEscalate(alert, rule) {
        // Verificar nivel
        if (alert.level !== rule.conditions.level) {
            return false;
        }
        // Verificar duración
        const alertAge = Date.now() - new Date(alert.triggeredAt).getTime();
        const requiredDuration = rule.conditions.duration * 60 * 1000; // convertir a ms
        if (alertAge < requiredDuration) {
            return false;
        }
        // Verificar si ya fue escalada
        if (alert.escalatedAt) {
            return false;
        }
        return true;
    }
    /**
   * Escala una alerta
   */ async escalateAlert(alert, rule) {
        const originalLevel = alert.level;
        // Actualizar nivel si es necesario
        if (rule.actions.escalateToLevel) {
            alert.level = rule.actions.escalateToLevel;
            alert.escalatedFrom = originalLevel;
        }
        alert.escalatedAt = new Date().toISOString();
        // Enviar notificaciones de escalamiento
        await this.sendNotifications(alert, rule.actions.notifyChannels);
        // Asignar a usuario si es necesario
        if (rule.actions.assignToUser) {
            alert.metadata = {
                ...alert.metadata,
                assignedTo: rule.actions.assignToUser
            };
        }
        await this.updateAlert(alert);
        _logger.logger.error(_logger.LogLevel.ERROR, `Alert escalated: ${alert.id}`, {
            originalLevel,
            newLevel: alert.level,
            escalationRule: rule.name,
            duration: this.calculateDuration(alert.triggeredAt, alert.escalatedAt)
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Implementaciones de notificación específicas
   */ async sendEmailNotification(alert, channel) {
        try {
            const subject = `[${alert.level.toUpperCase()}] ${alert.ruleName}`;
            const emailData = {
                to: channel.config.to || [
                    'admin@example.com'
                ],
                subject,
                template: 'alert-notification',
                data: {
                    alert,
                    level: alert.level.toUpperCase(),
                    timestamp: new Date(alert.triggeredAt).toLocaleString(),
                    message: alert.message,
                    metricName: alert.metricName,
                    value: alert.value,
                    threshold: alert.threshold
                },
                priority: alert.level === "critical" || alert.level === "emergency" ? 'high' : 'normal'
            };
            await _email.emailService.sendNotification(emailData);
            _logger.logger.info(_logger.LogLevel.INFO, `Email notification sent successfully`, {
                alertId: alert.id,
                to: channel.config.to,
                subject
            }, _logger.LogCategory.SYSTEM);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to send email notification`, {
                alertId: alert.id,
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
            throw error;
        }
    }
    async sendSlackNotification(alert, channel) {
        try {
            const alertData = {
                title: `${alert.level.toUpperCase()}: ${alert.ruleName}`,
                message: alert.message,
                severity: alert.level === "critical" || alert.level === "emergency" ? 'error' : alert.level === "warning" ? 'warning' : 'info',
                details: {
                    'Alert ID': alert.id,
                    'Timestamp': new Date(alert.triggeredAt).toLocaleString(),
                    'Metric': alert.metricName,
                    'Value': alert.value?.toString() || 'N/A',
                    'Threshold': alert.threshold?.toString() || 'N/A',
                    'Status': alert.status,
                    ...alert.tags
                }
            };
            await _slack.slackService.sendSystemAlert(alertData);
            _logger.logger.info(_logger.LogLevel.INFO, `Slack notification sent successfully`, {
                alertId: alert.id,
                channel: channel.config.channel,
                webhook: channel.config.webhookUrl ? 'configured' : 'missing'
            }, _logger.LogCategory.SYSTEM);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to send Slack notification`, {
                alertId: alert.id,
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
            throw error;
        }
    }
    async sendWebhookNotification(alert, channel) {
        if (!channel.config.url) {
            throw new Error('Webhook URL not configured');
        }
        const response = await fetch(channel.config.url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                ...channel.config.headers || {}
            },
            body: JSON.stringify({
                alert,
                timestamp: new Date().toISOString(),
                source: 'pinteya-ecommerce'
            })
        });
        if (!response.ok) {
            throw new Error(`Webhook failed: ${response.status} ${response.statusText}`);
        }
    }
    async sendSMSNotification(alert, channel) {
        // TODO: Implementar envío de SMS
        _logger.logger.info(_logger.LogLevel.INFO, `SMS notification sent`, {
            alertId: alert.id,
            to: channel.config.phoneNumber
        }, _logger.LogCategory.SYSTEM);
    }
    async sendLogNotification(alert, channel) {
        const logLevel = alert.level === "emergency" || alert.level === "critical" ? _logger.LogLevel.ERROR : _logger.LogLevel.WARN;
        _logger.logger.log(logLevel, `ALERT: ${alert.message}`, {
            alertId: alert.id,
            level: alert.level,
            metricName: alert.metricName,
            value: alert.value,
            threshold: alert.threshold,
            ruleName: alert.ruleName
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Inicializa canales por defecto
   */ initializeDefaultChannels() {
        // Canal de log por defecto
        this.setNotificationChannel({
            id: 'default_log',
            type: "log",
            name: 'Default Log Channel',
            config: {},
            enabled: true,
            levels: [
                "info",
                "warning",
                "critical",
                "emergency"
            ]
        });
        // Canal de webhook por defecto (deshabilitado)
        this.setNotificationChannel({
            id: 'default_webhook',
            type: "webhook",
            name: 'Default Webhook Channel',
            config: {
                url: process.env.ALERT_WEBHOOK_URL || ''
            },
            enabled: false,
            levels: [
                "critical",
                "emergency"
            ],
            rateLimit: {
                maxPerHour: 10,
                maxPerDay: 50
            }
        });
    }
    /**
   * Inicializa reglas por defecto
   */ initializeDefaultRules() {
        // Regla de escalamiento para alertas críticas
        this.setEscalationRule({
            id: 'critical_escalation',
            name: 'Critical Alert Escalation',
            enabled: true,
            conditions: {
                level: "critical",
                duration: 15 // 15 minutos
            },
            actions: {
                escalateToLevel: "emergency",
                notifyChannels: [
                    'default_log',
                    'default_webhook'
                ]
            }
        });
    }
    /**
   * Inicia monitoreo de escalamiento
   */ startEscalationMonitoring() {
        this.escalationInterval = setInterval(()=>{
            this.checkEscalations();
        }, 60000); // Verificar cada minuto
    }
    /**
   * Funciones auxiliares
   */ generateAlertId() {
        return `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    generateNotificationId() {
        return `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    calculateDuration(start, end) {
        return Math.round((new Date(end).getTime() - new Date(start).getTime()) / 1000 / 60); // minutos
    }
    async checkRateLimit(channelId, rateLimit) {
        // TODO: Implementar verificación de rate limiting con Redis
        return true;
    }
    async storeAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').insert({
                id: alert.id,
                rule_id: alert.ruleId,
                rule_name: alert.ruleName,
                level: alert.level,
                status: alert.status,
                message: alert.message,
                metric_name: alert.metricName,
                value: alert.value,
                threshold: alert.threshold,
                triggered_at: alert.triggeredAt,
                acknowledged_at: alert.acknowledgedAt,
                acknowledged_by: alert.acknowledgedBy,
                resolved_at: alert.resolvedAt,
                resolved_by: alert.resolvedBy,
                escalated_at: alert.escalatedAt,
                escalated_from: alert.escalatedFrom,
                notifications_sent: alert.notificationsSent,
                tags: alert.tags,
                metadata: alert.metadata
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to store alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    async updateAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').update({
                level: alert.level,
                status: alert.status,
                acknowledged_at: alert.acknowledgedAt,
                acknowledged_by: alert.acknowledgedBy,
                resolved_at: alert.resolvedAt,
                resolved_by: alert.resolvedBy,
                escalated_at: alert.escalatedAt,
                escalated_from: alert.escalatedFrom,
                notifications_sent: alert.notificationsSent,
                metadata: alert.metadata
            }).eq('id', alert.id);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to update alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Limpia recursos
   */ destroy() {
        if (this.escalationInterval) {
            clearInterval(this.escalationInterval);
            this.escalationInterval = null;
        }
    }
}
const enterpriseAlertSystem = EnterpriseAlertSystem.getInstance();
const triggerAlert = enterpriseAlertSystem.triggerAlert.bind(enterpriseAlertSystem);
const acknowledgeAlert = enterpriseAlertSystem.acknowledgeAlert.bind(enterpriseAlertSystem);
const resolveAlert = enterpriseAlertSystem.resolveAlert.bind(enterpriseAlertSystem);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxhbGVydC1zeXN0ZW0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEVOVEVSUFJJU0UgQUxFUlQgU1lTVEVNXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBsb2dnZXIsIExvZ0xldmVsLCBMb2dDYXRlZ29yeSB9IGZyb20gJ0AvbGliL2xvZ2dlcic7XG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IGVtYWlsU2VydmljZSB9IGZyb20gJ0AvbGliL25vdGlmaWNhdGlvbnMvZW1haWwnO1xuaW1wb3J0IHsgc2xhY2tTZXJ2aWNlIH0gZnJvbSAnQC9saWIvbm90aWZpY2F0aW9ucy9zbGFjayc7XG5cbi8vIOKchSBJTVBPUlQgQ09ORElDSU9OQUw6IFNvbG8gY2FyZ2FyIENhY2hlVXRpbHMgZW4gc2Vydmlkb3IgcGFyYSBldml0YXIgZXJyb3JlcyBkZSBpb3JlZGlzIGVuIGNsaWVudGVcbmxldCBDYWNoZVV0aWxzOiBhbnkgPSBudWxsO1xuaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gIC8vIFNvbG8gZW4gc2Vydmlkb3JcbiAgdHJ5IHtcbiAgICBDYWNoZVV0aWxzID0gcmVxdWlyZSgnQC9saWIvY2FjaGUtbWFuYWdlcicpLkNhY2hlVXRpbHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdbRW50ZXJwcmlzZUFsZXJ0U3lzdGVtXSBDYWNoZVV0aWxzIG5vdCBhdmFpbGFibGU6JywgZXJyb3IpO1xuICB9XG59XG5cbi8vIE5pdmVsZXMgZGUgYWxlcnRhIGNvbiBlc2NhbGFtaWVudG9cbmV4cG9ydCBlbnVtIEFsZXJ0TGV2ZWwge1xuICBJTkZPID0gJ2luZm8nLFxuICBXQVJOSU5HID0gJ3dhcm5pbmcnLCBcbiAgQ1JJVElDQUwgPSAnY3JpdGljYWwnLFxuICBFTUVSR0VOQ1kgPSAnZW1lcmdlbmN5J1xufVxuXG4vLyBUaXBvcyBkZSBub3RpZmljYWNpw7NuXG5leHBvcnQgZW51bSBOb3RpZmljYXRpb25UeXBlIHtcbiAgRU1BSUwgPSAnZW1haWwnLFxuICBTTEFDSyA9ICdzbGFjaycsXG4gIFdFQkhPT0sgPSAnd2ViaG9vaycsXG4gIFNNUyA9ICdzbXMnLFxuICBQVVNIID0gJ3B1c2gnLFxuICBMT0cgPSAnbG9nJ1xufVxuXG4vLyBFc3RhZG9zIGRlIGFsZXJ0YVxuZXhwb3J0IGVudW0gQWxlcnRTdGF0dXMge1xuICBBQ1RJVkUgPSAnYWN0aXZlJyxcbiAgQUNLTk9XTEVER0VEID0gJ2Fja25vd2xlZGdlZCcsXG4gIFJFU09MVkVEID0gJ3Jlc29sdmVkJyxcbiAgU1VQUFJFU1NFRCA9ICdzdXBwcmVzc2VkJ1xufVxuXG4vLyBDb25maWd1cmFjacOzbiBkZSBjYW5hbCBkZSBub3RpZmljYWNpw7NuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvbkNoYW5uZWwge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBOb3RpZmljYXRpb25UeXBlO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgbGV2ZWxzOiBBbGVydExldmVsW107XG4gIHJhdGVMaW1pdD86IHtcbiAgICBtYXhQZXJIb3VyOiBudW1iZXI7XG4gICAgbWF4UGVyRGF5OiBudW1iZXI7XG4gIH07XG59XG5cbi8vIFJlZ2xhIGRlIGVzY2FsYW1pZW50b1xuZXhwb3J0IGludGVyZmFjZSBFc2NhbGF0aW9uUnVsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgY29uZGl0aW9uczoge1xuICAgIGxldmVsOiBBbGVydExldmVsO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7IC8vIG1pbnV0b3Mgc2luIHJlc29sdWNpw7NuXG4gICAgcmVwZWF0Q291bnQ/OiBudW1iZXI7IC8vIG7Dum1lcm8gZGUgcmVwZXRpY2lvbmVzXG4gIH07XG4gIGFjdGlvbnM6IHtcbiAgICBlc2NhbGF0ZVRvTGV2ZWw/OiBBbGVydExldmVsO1xuICAgIG5vdGlmeUNoYW5uZWxzOiBzdHJpbmdbXTsgLy8gSURzIGRlIGNhbmFsZXNcbiAgICBhc3NpZ25Ub1VzZXI/OiBzdHJpbmc7XG4gIH07XG59XG5cbi8vIENvbmZpZ3VyYWNpw7NuIGRlIGFsZXJ0YVxuZXhwb3J0IGludGVyZmFjZSBBbGVydFJ1bGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIG1ldHJpY05hbWU6IHN0cmluZztcbiAgY29uZGl0aW9uOiAnZ3QnIHwgJ2x0JyB8ICdlcScgfCAnZ3RlJyB8ICdsdGUnO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgbGV2ZWw6IEFsZXJ0TGV2ZWw7XG4gIGNvb2xkb3duTWludXRlczogbnVtYmVyO1xuICBjaGFubmVsczogc3RyaW5nW107IC8vIElEcyBkZSBjYW5hbGVzIGRlIG5vdGlmaWNhY2nDs25cbiAgZXNjYWxhdGlvblJ1bGVzOiBzdHJpbmdbXTsgLy8gSURzIGRlIHJlZ2xhcyBkZSBlc2NhbGFtaWVudG9cbiAgdGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBBbGVydGEgYWN0aXZhXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0IHtcbiAgaWQ6IHN0cmluZztcbiAgcnVsZUlkOiBzdHJpbmc7XG4gIHJ1bGVOYW1lOiBzdHJpbmc7XG4gIGxldmVsOiBBbGVydExldmVsO1xuICBzdGF0dXM6IEFsZXJ0U3RhdHVzO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG1ldHJpY05hbWU6IHN0cmluZztcbiAgdmFsdWU6IG51bWJlcjtcbiAgdGhyZXNob2xkOiBudW1iZXI7XG4gIHRyaWdnZXJlZEF0OiBzdHJpbmc7XG4gIGFja25vd2xlZGdlZEF0Pzogc3RyaW5nO1xuICBhY2tub3dsZWRnZWRCeT86IHN0cmluZztcbiAgcmVzb2x2ZWRBdD86IHN0cmluZztcbiAgcmVzb2x2ZWRCeT86IHN0cmluZztcbiAgZXNjYWxhdGVkQXQ/OiBzdHJpbmc7XG4gIGVzY2FsYXRlZEZyb20/OiBBbGVydExldmVsO1xuICBub3RpZmljYXRpb25zU2VudDogTm90aWZpY2F0aW9uTG9nW107XG4gIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLy8gTG9nIGRlIG5vdGlmaWNhY2nDs25cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uTG9nIHtcbiAgaWQ6IHN0cmluZztcbiAgY2hhbm5lbElkOiBzdHJpbmc7XG4gIGNoYW5uZWxUeXBlOiBOb3RpZmljYXRpb25UeXBlO1xuICBzZW50QXQ6IHN0cmluZztcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHJlc3BvbnNlVGltZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFNpc3RlbWEgZGUgQWxlcnRhcyBFbnRlcnByaXNlIGNvbiBlc2NhbGFtaWVudG8gYXV0b23DoXRpY29cbiAqL1xuZXhwb3J0IGNsYXNzIEVudGVycHJpc2VBbGVydFN5c3RlbSB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBFbnRlcnByaXNlQWxlcnRTeXN0ZW07XG4gIHByaXZhdGUgYWxlcnRSdWxlczogTWFwPHN0cmluZywgQWxlcnRSdWxlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBub3RpZmljYXRpb25DaGFubmVsczogTWFwPHN0cmluZywgTm90aWZpY2F0aW9uQ2hhbm5lbD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZXNjYWxhdGlvblJ1bGVzOiBNYXA8c3RyaW5nLCBFc2NhbGF0aW9uUnVsZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYWN0aXZlQWxlcnRzOiBNYXA8c3RyaW5nLCBBbGVydD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZXNjYWxhdGlvbkludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRDaGFubmVscygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRSdWxlcygpO1xuICAgIHRoaXMuc3RhcnRFc2NhbGF0aW9uTW9uaXRvcmluZygpO1xuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEVudGVycHJpc2VBbGVydFN5c3RlbSB7XG4gICAgaWYgKCFFbnRlcnByaXNlQWxlcnRTeXN0ZW0uaW5zdGFuY2UpIHtcbiAgICAgIEVudGVycHJpc2VBbGVydFN5c3RlbS5pbnN0YW5jZSA9IG5ldyBFbnRlcnByaXNlQWxlcnRTeXN0ZW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIEVudGVycHJpc2VBbGVydFN5c3RlbS5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmEgdW4gY2FuYWwgZGUgbm90aWZpY2FjacOzblxuICAgKi9cbiAgc2V0Tm90aWZpY2F0aW9uQ2hhbm5lbChjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsKTogdm9pZCB7XG4gICAgdGhpcy5ub3RpZmljYXRpb25DaGFubmVscy5zZXQoY2hhbm5lbC5pZCwgY2hhbm5lbCk7XG4gICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgYE5vdGlmaWNhdGlvbiBjaGFubmVsIGNvbmZpZ3VyZWQ6ICR7Y2hhbm5lbC5pZH1gLCB7XG4gICAgICB0eXBlOiBjaGFubmVsLnR5cGUsXG4gICAgICBlbmFibGVkOiBjaGFubmVsLmVuYWJsZWQsXG4gICAgICBsZXZlbHM6IGNoYW5uZWwubGV2ZWxzXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmEgdW5hIHJlZ2xhIGRlIGVzY2FsYW1pZW50b1xuICAgKi9cbiAgc2V0RXNjYWxhdGlvblJ1bGUocnVsZTogRXNjYWxhdGlvblJ1bGUpOiB2b2lkIHtcbiAgICB0aGlzLmVzY2FsYXRpb25SdWxlcy5zZXQocnVsZS5pZCwgcnVsZSk7XG4gICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgYEVzY2FsYXRpb24gcnVsZSBjb25maWd1cmVkOiAke3J1bGUuaWR9YCwge1xuICAgICAgbGV2ZWw6IHJ1bGUuY29uZGl0aW9ucy5sZXZlbCxcbiAgICAgIGR1cmF0aW9uOiBydWxlLmNvbmRpdGlvbnMuZHVyYXRpb24sXG4gICAgICBlbmFibGVkOiBydWxlLmVuYWJsZWRcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYSB1bmEgcmVnbGEgZGUgYWxlcnRhXG4gICAqL1xuICBzZXRBbGVydFJ1bGUocnVsZTogQWxlcnRSdWxlKTogdm9pZCB7XG4gICAgdGhpcy5hbGVydFJ1bGVzLnNldChydWxlLmlkLCBydWxlKTtcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgQWxlcnQgcnVsZSBjb25maWd1cmVkOiAke3J1bGUuaWR9YCwge1xuICAgICAgbWV0cmljTmFtZTogcnVsZS5tZXRyaWNOYW1lLFxuICAgICAgdGhyZXNob2xkOiBydWxlLnRocmVzaG9sZCxcbiAgICAgIGxldmVsOiBydWxlLmxldmVsLFxuICAgICAgZW5hYmxlZDogcnVsZS5lbmFibGVkXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXJhIHVuYSBhbGVydGFcbiAgICovXG4gIGFzeW5jIHRyaWdnZXJBbGVydChcbiAgICBydWxlSWQ6IHN0cmluZyxcbiAgICBtZXRyaWNOYW1lOiBzdHJpbmcsXG4gICAgdmFsdWU6IG51bWJlcixcbiAgICBtZXNzYWdlPzogc3RyaW5nXG4gICk6IFByb21pc2U8QWxlcnQgfCBudWxsPiB7XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuYWxlcnRSdWxlcy5nZXQocnVsZUlkKTtcbiAgICBpZiAoIXJ1bGUgfHwgIXJ1bGUuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIGNvb2xkb3duXG4gICAgY29uc3QgZXhpc3RpbmdBbGVydCA9IEFycmF5LmZyb20odGhpcy5hY3RpdmVBbGVydHMudmFsdWVzKCkpXG4gICAgICAuZmluZChhbGVydCA9PiBhbGVydC5ydWxlSWQgPT09IHJ1bGVJZCAmJiBhbGVydC5zdGF0dXMgPT09IEFsZXJ0U3RhdHVzLkFDVElWRSk7XG5cbiAgICBpZiAoZXhpc3RpbmdBbGVydCkge1xuICAgICAgY29uc3QgY29vbGRvd25FbmQgPSBuZXcgRGF0ZShleGlzdGluZ0FsZXJ0LnRyaWdnZXJlZEF0KTtcbiAgICAgIGNvb2xkb3duRW5kLnNldE1pbnV0ZXMoY29vbGRvd25FbmQuZ2V0TWludXRlcygpICsgcnVsZS5jb29sZG93bk1pbnV0ZXMpO1xuICAgICAgXG4gICAgICBpZiAobmV3IERhdGUoKSA8IGNvb2xkb3duRW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBBw7puIGVuIGNvb2xkb3duXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXIgbnVldmEgYWxlcnRhXG4gICAgY29uc3QgYWxlcnQ6IEFsZXJ0ID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVBbGVydElkKCksXG4gICAgICBydWxlSWQ6IHJ1bGUuaWQsXG4gICAgICBydWxlTmFtZTogcnVsZS5uYW1lLFxuICAgICAgbGV2ZWw6IHJ1bGUubGV2ZWwsXG4gICAgICBzdGF0dXM6IEFsZXJ0U3RhdHVzLkFDVElWRSxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UgfHwgYCR7cnVsZS5kZXNjcmlwdGlvbn0gLSBWYWx1ZTogJHt2YWx1ZX0sIFRocmVzaG9sZDogJHtydWxlLnRocmVzaG9sZH1gLFxuICAgICAgbWV0cmljTmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgdGhyZXNob2xkOiBydWxlLnRocmVzaG9sZCxcbiAgICAgIHRyaWdnZXJlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBub3RpZmljYXRpb25zU2VudDogW10sXG4gICAgICB0YWdzOiBydWxlLnRhZ3MsXG4gICAgICBtZXRhZGF0YTogcnVsZS5tZXRhZGF0YVxuICAgIH07XG5cbiAgICB0aGlzLmFjdGl2ZUFsZXJ0cy5zZXQoYWxlcnQuaWQsIGFsZXJ0KTtcblxuICAgIC8vIEVudmlhciBub3RpZmljYWNpb25lc1xuICAgIGF3YWl0IHRoaXMuc2VuZE5vdGlmaWNhdGlvbnMoYWxlcnQsIHJ1bGUuY2hhbm5lbHMpO1xuXG4gICAgLy8gQWxtYWNlbmFyIGVuIGJhc2UgZGUgZGF0b3NcbiAgICBhd2FpdCB0aGlzLnN0b3JlQWxlcnQoYWxlcnQpO1xuXG4gICAgbG9nZ2VyLndhcm4oTG9nTGV2ZWwuV0FSTiwgYEFsZXJ0IHRyaWdnZXJlZDogJHtydWxlLm5hbWV9YCwge1xuICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICBsZXZlbDogYWxlcnQubGV2ZWwsXG4gICAgICBtZXRyaWNOYW1lOiBhbGVydC5tZXRyaWNOYW1lLFxuICAgICAgdmFsdWU6IGFsZXJ0LnZhbHVlLFxuICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGRcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuXG4gICAgcmV0dXJuIGFsZXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29ub2NlIHVuYSBhbGVydGFcbiAgICovXG4gIGFzeW5jIGFja25vd2xlZGdlQWxlcnQoYWxlcnRJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGFsZXJ0ID0gdGhpcy5hY3RpdmVBbGVydHMuZ2V0KGFsZXJ0SWQpO1xuICAgIGlmICghYWxlcnQgfHwgYWxlcnQuc3RhdHVzICE9PSBBbGVydFN0YXR1cy5BQ1RJVkUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhbGVydC5zdGF0dXMgPSBBbGVydFN0YXR1cy5BQ0tOT1dMRURHRUQ7XG4gICAgYWxlcnQuYWNrbm93bGVkZ2VkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgYWxlcnQuYWNrbm93bGVkZ2VkQnkgPSB1c2VySWQ7XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUFsZXJ0KGFsZXJ0KTtcblxuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBBbGVydCBhY2tub3dsZWRnZWQ6ICR7YWxlcnRJZH1gLCB7XG4gICAgICB1c2VySWQsXG4gICAgICBsZXZlbDogYWxlcnQubGV2ZWwsXG4gICAgICBydWxlTmFtZTogYWxlcnQucnVsZU5hbWVcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmVzdWVsdmUgdW5hIGFsZXJ0YVxuICAgKi9cbiAgYXN5bmMgcmVzb2x2ZUFsZXJ0KGFsZXJ0SWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFjdGl2ZUFsZXJ0cy5nZXQoYWxlcnRJZCk7XG4gICAgaWYgKCFhbGVydCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFsZXJ0LnN0YXR1cyA9IEFsZXJ0U3RhdHVzLlJFU09MVkVEO1xuICAgIGFsZXJ0LnJlc29sdmVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgYWxlcnQucmVzb2x2ZWRCeSA9IHVzZXJJZDtcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlQWxlcnQoYWxlcnQpO1xuICAgIHRoaXMuYWN0aXZlQWxlcnRzLmRlbGV0ZShhbGVydElkKTtcblxuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBBbGVydCByZXNvbHZlZDogJHthbGVydElkfWAsIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgIHJ1bGVOYW1lOiBhbGVydC5ydWxlTmFtZSxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uKGFsZXJ0LnRyaWdnZXJlZEF0LCBhbGVydC5yZXNvbHZlZEF0ISlcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRW52w61hIG5vdGlmaWNhY2lvbmVzIHBhcmEgdW5hIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTm90aWZpY2F0aW9ucyhhbGVydDogQWxlcnQsIGNoYW5uZWxJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChcbiAgICAgIGNoYW5uZWxJZHMubWFwKGNoYW5uZWxJZCA9PiB0aGlzLnNlbmROb3RpZmljYXRpb24oYWxlcnQsIGNoYW5uZWxJZCkpXG4gICAgKTtcblxuICAgIC8vIExvZyByZXN1bHRhZG9zXG4gICAgbm90aWZpY2F0aW9ucy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjaGFubmVsSWQgPSBjaGFubmVsSWRzW2luZGV4XTtcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiByZXN1bHQudmFsdWUpIHtcbiAgICAgICAgYWxlcnQubm90aWZpY2F0aW9uc1NlbnQucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgYEZhaWxlZCB0byBzZW5kIG5vdGlmaWNhdGlvbiB0byBjaGFubmVsOiAke2NoYW5uZWxJZH1gLCB7XG4gICAgICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICAgICAgZXJyb3I6IHJlc3VsdC5yZWFzb25cbiAgICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnbDrWEgbm90aWZpY2FjacOzbiBhIHVuIGNhbmFsIGVzcGVjw61maWNvXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNlbmROb3RpZmljYXRpb24oYWxlcnQ6IEFsZXJ0LCBjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8Tm90aWZpY2F0aW9uTG9nIHwgbnVsbD4ge1xuICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLm5vdGlmaWNhdGlvbkNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuICAgIGlmICghY2hhbm5lbCB8fCAhY2hhbm5lbC5lbmFibGVkIHx8ICFjaGFubmVsLmxldmVscy5pbmNsdWRlcyhhbGVydC5sZXZlbCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciByYXRlIGxpbWl0aW5nXG4gICAgaWYgKGNoYW5uZWwucmF0ZUxpbWl0ICYmICEoYXdhaXQgdGhpcy5jaGVja1JhdGVMaW1pdChjaGFubmVsSWQsIGNoYW5uZWwucmF0ZUxpbWl0KSkpIHtcbiAgICAgIGxvZ2dlci53YXJuKExvZ0xldmVsLldBUk4sIGBSYXRlIGxpbWl0IGV4Y2VlZGVkIGZvciBjaGFubmVsOiAke2NoYW5uZWxJZH1gLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuICAgIGxldCBlcnJvcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAoY2hhbm5lbC50eXBlKSB7XG4gICAgICAgIGNhc2UgTm90aWZpY2F0aW9uVHlwZS5FTUFJTDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbWFpbE5vdGlmaWNhdGlvbihhbGVydCwgY2hhbm5lbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm90aWZpY2F0aW9uVHlwZS5TTEFDSzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRTbGFja05vdGlmaWNhdGlvbihhbGVydCwgY2hhbm5lbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm90aWZpY2F0aW9uVHlwZS5XRUJIT09LOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZFdlYmhvb2tOb3RpZmljYXRpb24oYWxlcnQsIGNoYW5uZWwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5vdGlmaWNhdGlvblR5cGUuU01TOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZFNNU05vdGlmaWNhdGlvbihhbGVydCwgY2hhbm5lbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm90aWZpY2F0aW9uVHlwZS5MT0c6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kTG9nTm90aWZpY2F0aW9uKGFsZXJ0LCBjaGFubmVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG5vdGlmaWNhdGlvbiB0eXBlOiAke2NoYW5uZWwudHlwZX1gKTtcbiAgICAgIH1cbiAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZXJyb3IgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbkxvZzogTm90aWZpY2F0aW9uTG9nID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVOb3RpZmljYXRpb25JZCgpLFxuICAgICAgY2hhbm5lbElkLFxuICAgICAgY2hhbm5lbFR5cGU6IGNoYW5uZWwudHlwZSxcbiAgICAgIHNlbnRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc3VjY2VzcyxcbiAgICAgIGVycm9yLFxuICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgfTtcblxuICAgIHJldHVybiBub3RpZmljYXRpb25Mb2c7XG4gIH1cblxuICAvKipcbiAgICogTW9uaXRvcmVvIGRlIGVzY2FsYW1pZW50byBhdXRvbcOhdGljb1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjaGVja0VzY2FsYXRpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgYWxlcnQgb2YgdGhpcy5hY3RpdmVBbGVydHMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChhbGVydC5zdGF0dXMgIT09IEFsZXJ0U3RhdHVzLkFDVElWRSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcnVsZSA9IHRoaXMuYWxlcnRSdWxlcy5nZXQoYWxlcnQucnVsZUlkKTtcbiAgICAgIGlmICghcnVsZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZpY2FyIHJlZ2xhcyBkZSBlc2NhbGFtaWVudG9cbiAgICAgIGZvciAoY29uc3QgZXNjYWxhdGlvblJ1bGVJZCBvZiBydWxlLmVzY2FsYXRpb25SdWxlcykge1xuICAgICAgICBjb25zdCBlc2NhbGF0aW9uUnVsZSA9IHRoaXMuZXNjYWxhdGlvblJ1bGVzLmdldChlc2NhbGF0aW9uUnVsZUlkKTtcbiAgICAgICAgaWYgKCFlc2NhbGF0aW9uUnVsZSB8fCAhZXNjYWxhdGlvblJ1bGUuZW5hYmxlZCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmVyaWZpY2FyIGNvbmRpY2lvbmVzIGRlIGVzY2FsYW1pZW50b1xuICAgICAgICBpZiAodGhpcy5zaG91bGRFc2NhbGF0ZShhbGVydCwgZXNjYWxhdGlvblJ1bGUpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5lc2NhbGF0ZUFsZXJ0KGFsZXJ0LCBlc2NhbGF0aW9uUnVsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2kgdW5hIGFsZXJ0YSBkZWJlIGVzY2FsYXJzZVxuICAgKi9cbiAgcHJpdmF0ZSBzaG91bGRFc2NhbGF0ZShhbGVydDogQWxlcnQsIHJ1bGU6IEVzY2FsYXRpb25SdWxlKTogYm9vbGVhbiB7XG4gICAgLy8gVmVyaWZpY2FyIG5pdmVsXG4gICAgaWYgKGFsZXJ0LmxldmVsICE9PSBydWxlLmNvbmRpdGlvbnMubGV2ZWwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgZHVyYWNpw7NuXG4gICAgY29uc3QgYWxlcnRBZ2UgPSBEYXRlLm5vdygpIC0gbmV3IERhdGUoYWxlcnQudHJpZ2dlcmVkQXQpLmdldFRpbWUoKTtcbiAgICBjb25zdCByZXF1aXJlZER1cmF0aW9uID0gcnVsZS5jb25kaXRpb25zLmR1cmF0aW9uICogNjAgKiAxMDAwOyAvLyBjb252ZXJ0aXIgYSBtc1xuXG4gICAgaWYgKGFsZXJ0QWdlIDwgcmVxdWlyZWREdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBzaSB5YSBmdWUgZXNjYWxhZGFcbiAgICBpZiAoYWxlcnQuZXNjYWxhdGVkQXQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFc2NhbGEgdW5hIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlc2NhbGF0ZUFsZXJ0KGFsZXJ0OiBBbGVydCwgcnVsZTogRXNjYWxhdGlvblJ1bGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBvcmlnaW5hbExldmVsID0gYWxlcnQubGV2ZWw7XG4gICAgXG4gICAgLy8gQWN0dWFsaXphciBuaXZlbCBzaSBlcyBuZWNlc2FyaW9cbiAgICBpZiAocnVsZS5hY3Rpb25zLmVzY2FsYXRlVG9MZXZlbCkge1xuICAgICAgYWxlcnQubGV2ZWwgPSBydWxlLmFjdGlvbnMuZXNjYWxhdGVUb0xldmVsO1xuICAgICAgYWxlcnQuZXNjYWxhdGVkRnJvbSA9IG9yaWdpbmFsTGV2ZWw7XG4gICAgfVxuXG4gICAgYWxlcnQuZXNjYWxhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBFbnZpYXIgbm90aWZpY2FjaW9uZXMgZGUgZXNjYWxhbWllbnRvXG4gICAgYXdhaXQgdGhpcy5zZW5kTm90aWZpY2F0aW9ucyhhbGVydCwgcnVsZS5hY3Rpb25zLm5vdGlmeUNoYW5uZWxzKTtcblxuICAgIC8vIEFzaWduYXIgYSB1c3VhcmlvIHNpIGVzIG5lY2VzYXJpb1xuICAgIGlmIChydWxlLmFjdGlvbnMuYXNzaWduVG9Vc2VyKSB7XG4gICAgICBhbGVydC5tZXRhZGF0YSA9IHtcbiAgICAgICAgLi4uYWxlcnQubWV0YWRhdGEsXG4gICAgICAgIGFzc2lnbmVkVG86IHJ1bGUuYWN0aW9ucy5hc3NpZ25Ub1VzZXJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVBbGVydChhbGVydCk7XG5cbiAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsIGBBbGVydCBlc2NhbGF0ZWQ6ICR7YWxlcnQuaWR9YCwge1xuICAgICAgb3JpZ2luYWxMZXZlbCxcbiAgICAgIG5ld0xldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgIGVzY2FsYXRpb25SdWxlOiBydWxlLm5hbWUsXG4gICAgICBkdXJhdGlvbjogdGhpcy5jYWxjdWxhdGVEdXJhdGlvbihhbGVydC50cmlnZ2VyZWRBdCwgYWxlcnQuZXNjYWxhdGVkQXQpXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnRhY2lvbmVzIGRlIG5vdGlmaWNhY2nDs24gZXNwZWPDrWZpY2FzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNlbmRFbWFpbE5vdGlmaWNhdGlvbihhbGVydDogQWxlcnQsIGNoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3ViamVjdCA9IGBbJHthbGVydC5sZXZlbC50b1VwcGVyQ2FzZSgpfV0gJHthbGVydC5ydWxlTmFtZX1gO1xuICAgICAgY29uc3QgZW1haWxEYXRhID0ge1xuICAgICAgICB0bzogY2hhbm5lbC5jb25maWcudG8gfHwgWydhZG1pbkBleGFtcGxlLmNvbSddLFxuICAgICAgICBzdWJqZWN0LFxuICAgICAgICB0ZW1wbGF0ZTogJ2FsZXJ0LW5vdGlmaWNhdGlvbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBhbGVydCxcbiAgICAgICAgICBsZXZlbDogYWxlcnQubGV2ZWwudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKGFsZXJ0LnRyaWdnZXJlZEF0KS50b0xvY2FsZVN0cmluZygpLFxuICAgICAgICAgIG1lc3NhZ2U6IGFsZXJ0Lm1lc3NhZ2UsXG4gICAgICAgICAgbWV0cmljTmFtZTogYWxlcnQubWV0cmljTmFtZSxcbiAgICAgICAgICB2YWx1ZTogYWxlcnQudmFsdWUsXG4gICAgICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGRcbiAgICAgICAgfSxcbiAgICAgICAgcHJpb3JpdHk6IGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkNSSVRJQ0FMIHx8IGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkVNRVJHRU5DWSA/ICdoaWdoJyBhcyBjb25zdCA6ICdub3JtYWwnIGFzIGNvbnN0XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZE5vdGlmaWNhdGlvbihlbWFpbERhdGEpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgRW1haWwgbm90aWZpY2F0aW9uIHNlbnQgc3VjY2Vzc2Z1bGx5YCwge1xuICAgICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgICAgdG86IGNoYW5uZWwuY29uZmlnLnRvLFxuICAgICAgICBzdWJqZWN0XG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsIGBGYWlsZWQgdG8gc2VuZCBlbWFpbCBub3RpZmljYXRpb25gLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRTbGFja05vdGlmaWNhdGlvbihhbGVydDogQWxlcnQsIGNoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWxlcnREYXRhID0ge1xuICAgICAgICB0aXRsZTogYCR7YWxlcnQubGV2ZWwudG9VcHBlckNhc2UoKX06ICR7YWxlcnQucnVsZU5hbWV9YCxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgc2V2ZXJpdHk6IGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkNSSVRJQ0FMIHx8IGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkVNRVJHRU5DWSA/ICdlcnJvcicgYXMgY29uc3QgOiBcbiAgICAgICAgICAgICAgICAgYWxlcnQubGV2ZWwgPT09IEFsZXJ0TGV2ZWwuV0FSTklORyA/ICd3YXJuaW5nJyBhcyBjb25zdCA6ICdpbmZvJyBhcyBjb25zdCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICdBbGVydCBJRCc6IGFsZXJ0LmlkLFxuICAgICAgICAgICdUaW1lc3RhbXAnOiBuZXcgRGF0ZShhbGVydC50cmlnZ2VyZWRBdCkudG9Mb2NhbGVTdHJpbmcoKSxcbiAgICAgICAgICAnTWV0cmljJzogYWxlcnQubWV0cmljTmFtZSxcbiAgICAgICAgICAnVmFsdWUnOiBhbGVydC52YWx1ZT8udG9TdHJpbmcoKSB8fCAnTi9BJyxcbiAgICAgICAgICAnVGhyZXNob2xkJzogYWxlcnQudGhyZXNob2xkPy50b1N0cmluZygpIHx8ICdOL0EnLFxuICAgICAgICAgICdTdGF0dXMnOiBhbGVydC5zdGF0dXMsXG4gICAgICAgICAgLi4uYWxlcnQudGFnc1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBzbGFja1NlcnZpY2Uuc2VuZFN5c3RlbUFsZXJ0KGFsZXJ0RGF0YSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBTbGFjayBub3RpZmljYXRpb24gc2VudCBzdWNjZXNzZnVsbHlgLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgICBjaGFubmVsOiBjaGFubmVsLmNvbmZpZy5jaGFubmVsLFxuICAgICAgICB3ZWJob29rOiBjaGFubmVsLmNvbmZpZy53ZWJob29rVXJsID8gJ2NvbmZpZ3VyZWQnIDogJ21pc3NpbmcnXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsIGBGYWlsZWQgdG8gc2VuZCBTbGFjayBub3RpZmljYXRpb25gLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRXZWJob29rTm90aWZpY2F0aW9uKGFsZXJ0OiBBbGVydCwgY2hhbm5lbDogTm90aWZpY2F0aW9uQ2hhbm5lbCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghY2hhbm5lbC5jb25maWcudXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYmhvb2sgVVJMIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjaGFubmVsLmNvbmZpZy51cmwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAuLi4oY2hhbm5lbC5jb25maWcuaGVhZGVycyB8fCB7fSlcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGFsZXJ0LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc291cmNlOiAncGludGV5YS1lY29tbWVyY2UnXG4gICAgICB9KVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBXZWJob29rIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRTTVNOb3RpZmljYXRpb24oYWxlcnQ6IEFsZXJ0LCBjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50YXIgZW52w61vIGRlIFNNU1xuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBTTVMgbm90aWZpY2F0aW9uIHNlbnRgLCB7XG4gICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgIHRvOiBjaGFubmVsLmNvbmZpZy5waG9uZU51bWJlclxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRMb2dOb3RpZmljYXRpb24oYWxlcnQ6IEFsZXJ0LCBjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbG9nTGV2ZWwgPSBhbGVydC5sZXZlbCA9PT0gQWxlcnRMZXZlbC5FTUVSR0VOQ1kgfHwgYWxlcnQubGV2ZWwgPT09IEFsZXJ0TGV2ZWwuQ1JJVElDQUwgXG4gICAgICA/IExvZ0xldmVsLkVSUk9SIFxuICAgICAgOiBMb2dMZXZlbC5XQVJOO1xuXG4gICAgbG9nZ2VyLmxvZyhsb2dMZXZlbCwgYEFMRVJUOiAke2FsZXJ0Lm1lc3NhZ2V9YCwge1xuICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICBsZXZlbDogYWxlcnQubGV2ZWwsXG4gICAgICBtZXRyaWNOYW1lOiBhbGVydC5tZXRyaWNOYW1lLFxuICAgICAgdmFsdWU6IGFsZXJ0LnZhbHVlLFxuICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGQsXG4gICAgICBydWxlTmFtZTogYWxlcnQucnVsZU5hbWVcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaWNpYWxpemEgY2FuYWxlcyBwb3IgZGVmZWN0b1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdENoYW5uZWxzKCk6IHZvaWQge1xuICAgIC8vIENhbmFsIGRlIGxvZyBwb3IgZGVmZWN0b1xuICAgIHRoaXMuc2V0Tm90aWZpY2F0aW9uQ2hhbm5lbCh7XG4gICAgICBpZDogJ2RlZmF1bHRfbG9nJyxcbiAgICAgIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUuTE9HLFxuICAgICAgbmFtZTogJ0RlZmF1bHQgTG9nIENoYW5uZWwnLFxuICAgICAgY29uZmlnOiB7fSxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBsZXZlbHM6IFtBbGVydExldmVsLklORk8sIEFsZXJ0TGV2ZWwuV0FSTklORywgQWxlcnRMZXZlbC5DUklUSUNBTCwgQWxlcnRMZXZlbC5FTUVSR0VOQ1ldXG4gICAgfSk7XG5cbiAgICAvLyBDYW5hbCBkZSB3ZWJob29rIHBvciBkZWZlY3RvIChkZXNoYWJpbGl0YWRvKVxuICAgIHRoaXMuc2V0Tm90aWZpY2F0aW9uQ2hhbm5lbCh7XG4gICAgICBpZDogJ2RlZmF1bHRfd2ViaG9vaycsXG4gICAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlLldFQkhPT0ssXG4gICAgICBuYW1lOiAnRGVmYXVsdCBXZWJob29rIENoYW5uZWwnLFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIHVybDogcHJvY2Vzcy5lbnYuQUxFUlRfV0VCSE9PS19VUkwgfHwgJydcbiAgICAgIH0sXG4gICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIGxldmVsczogW0FsZXJ0TGV2ZWwuQ1JJVElDQUwsIEFsZXJ0TGV2ZWwuRU1FUkdFTkNZXSxcbiAgICAgIHJhdGVMaW1pdDoge1xuICAgICAgICBtYXhQZXJIb3VyOiAxMCxcbiAgICAgICAgbWF4UGVyRGF5OiA1MFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaWNpYWxpemEgcmVnbGFzIHBvciBkZWZlY3RvXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVEZWZhdWx0UnVsZXMoKTogdm9pZCB7XG4gICAgLy8gUmVnbGEgZGUgZXNjYWxhbWllbnRvIHBhcmEgYWxlcnRhcyBjcsOtdGljYXNcbiAgICB0aGlzLnNldEVzY2FsYXRpb25SdWxlKHtcbiAgICAgIGlkOiAnY3JpdGljYWxfZXNjYWxhdGlvbicsXG4gICAgICBuYW1lOiAnQ3JpdGljYWwgQWxlcnQgRXNjYWxhdGlvbicsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgY29uZGl0aW9uczoge1xuICAgICAgICBsZXZlbDogQWxlcnRMZXZlbC5DUklUSUNBTCxcbiAgICAgICAgZHVyYXRpb246IDE1IC8vIDE1IG1pbnV0b3NcbiAgICAgIH0sXG4gICAgICBhY3Rpb25zOiB7XG4gICAgICAgIGVzY2FsYXRlVG9MZXZlbDogQWxlcnRMZXZlbC5FTUVSR0VOQ1ksXG4gICAgICAgIG5vdGlmeUNoYW5uZWxzOiBbJ2RlZmF1bHRfbG9nJywgJ2RlZmF1bHRfd2ViaG9vayddXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pY2lhIG1vbml0b3JlbyBkZSBlc2NhbGFtaWVudG9cbiAgICovXG4gIHByaXZhdGUgc3RhcnRFc2NhbGF0aW9uTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICB0aGlzLmVzY2FsYXRpb25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tFc2NhbGF0aW9ucygpO1xuICAgIH0sIDYwMDAwKTsgLy8gVmVyaWZpY2FyIGNhZGEgbWludXRvXG4gIH1cblxuICAvKipcbiAgICogRnVuY2lvbmVzIGF1eGlsaWFyZXNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVBbGVydElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBhbGVydF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlTm90aWZpY2F0aW9uSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG5vdGlmXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQ6IHN0cmluZywgZW5kOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKChuZXcgRGF0ZShlbmQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKHN0YXJ0KS5nZXRUaW1lKCkpIC8gMTAwMCAvIDYwKTsgLy8gbWludXRvc1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja1JhdGVMaW1pdChjaGFubmVsSWQ6IHN0cmluZywgcmF0ZUxpbWl0OiB7IG1heFBlckhvdXI6IG51bWJlcjsgbWF4UGVyRGF5OiBudW1iZXIgfSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIHZlcmlmaWNhY2nDs24gZGUgcmF0ZSBsaW1pdGluZyBjb24gUmVkaXNcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVBbGVydChhbGVydDogQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCh0cnVlKTtcbiAgICAgIGlmICghc3VwYWJhc2UpIHJldHVybjtcblxuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZW50ZXJwcmlzZV9hbGVydHMnKS5pbnNlcnQoe1xuICAgICAgICBpZDogYWxlcnQuaWQsXG4gICAgICAgIHJ1bGVfaWQ6IGFsZXJ0LnJ1bGVJZCxcbiAgICAgICAgcnVsZV9uYW1lOiBhbGVydC5ydWxlTmFtZSxcbiAgICAgICAgbGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgICBzdGF0dXM6IGFsZXJ0LnN0YXR1cyxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgbWV0cmljX25hbWU6IGFsZXJ0Lm1ldHJpY05hbWUsXG4gICAgICAgIHZhbHVlOiBhbGVydC52YWx1ZSxcbiAgICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGQsXG4gICAgICAgIHRyaWdnZXJlZF9hdDogYWxlcnQudHJpZ2dlcmVkQXQsXG4gICAgICAgIGFja25vd2xlZGdlZF9hdDogYWxlcnQuYWNrbm93bGVkZ2VkQXQsXG4gICAgICAgIGFja25vd2xlZGdlZF9ieTogYWxlcnQuYWNrbm93bGVkZ2VkQnksXG4gICAgICAgIHJlc29sdmVkX2F0OiBhbGVydC5yZXNvbHZlZEF0LFxuICAgICAgICByZXNvbHZlZF9ieTogYWxlcnQucmVzb2x2ZWRCeSxcbiAgICAgICAgZXNjYWxhdGVkX2F0OiBhbGVydC5lc2NhbGF0ZWRBdCxcbiAgICAgICAgZXNjYWxhdGVkX2Zyb206IGFsZXJ0LmVzY2FsYXRlZEZyb20sXG4gICAgICAgIG5vdGlmaWNhdGlvbnNfc2VudDogYWxlcnQubm90aWZpY2F0aW9uc1NlbnQsXG4gICAgICAgIHRhZ3M6IGFsZXJ0LnRhZ3MsXG4gICAgICAgIG1ldGFkYXRhOiBhbGVydC5tZXRhZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgJ0ZhaWxlZCB0byBzdG9yZSBhbGVydCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUFsZXJ0KGFsZXJ0OiBBbGVydCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KHRydWUpO1xuICAgICAgaWYgKCFzdXBhYmFzZSkgcmV0dXJuO1xuXG4gICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZW50ZXJwcmlzZV9hbGVydHMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICBsZXZlbDogYWxlcnQubGV2ZWwsXG4gICAgICAgICAgc3RhdHVzOiBhbGVydC5zdGF0dXMsXG4gICAgICAgICAgYWNrbm93bGVkZ2VkX2F0OiBhbGVydC5hY2tub3dsZWRnZWRBdCxcbiAgICAgICAgICBhY2tub3dsZWRnZWRfYnk6IGFsZXJ0LmFja25vd2xlZGdlZEJ5LFxuICAgICAgICAgIHJlc29sdmVkX2F0OiBhbGVydC5yZXNvbHZlZEF0LFxuICAgICAgICAgIHJlc29sdmVkX2J5OiBhbGVydC5yZXNvbHZlZEJ5LFxuICAgICAgICAgIGVzY2FsYXRlZF9hdDogYWxlcnQuZXNjYWxhdGVkQXQsXG4gICAgICAgICAgZXNjYWxhdGVkX2Zyb206IGFsZXJ0LmVzY2FsYXRlZEZyb20sXG4gICAgICAgICAgbm90aWZpY2F0aW9uc19zZW50OiBhbGVydC5ub3RpZmljYXRpb25zU2VudCxcbiAgICAgICAgICBtZXRhZGF0YTogYWxlcnQubWV0YWRhdGFcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIGFsZXJ0LmlkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCAnRmFpbGVkIHRvIHVwZGF0ZSBhbGVydCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGltcGlhIHJlY3Vyc29zXG4gICAqL1xuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmVzY2FsYXRpb25JbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmVzY2FsYXRpb25JbnRlcnZhbCk7XG4gICAgICB0aGlzLmVzY2FsYXRpb25JbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8vIEluc3RhbmNpYSBzaW5nbGV0b25cbmV4cG9ydCBjb25zdCBlbnRlcnByaXNlQWxlcnRTeXN0ZW0gPSBFbnRlcnByaXNlQWxlcnRTeXN0ZW0uZ2V0SW5zdGFuY2UoKTtcblxuLy8gRnVuY2lvbmVzIGRlIGNvbnZlbmllbmNpYVxuZXhwb3J0IGNvbnN0IHRyaWdnZXJBbGVydCA9IGVudGVycHJpc2VBbGVydFN5c3RlbS50cmlnZ2VyQWxlcnQuYmluZChlbnRlcnByaXNlQWxlcnRTeXN0ZW0pO1xuZXhwb3J0IGNvbnN0IGFja25vd2xlZGdlQWxlcnQgPSBlbnRlcnByaXNlQWxlcnRTeXN0ZW0uYWNrbm93bGVkZ2VBbGVydC5iaW5kKGVudGVycHJpc2VBbGVydFN5c3RlbSk7XG5leHBvcnQgY29uc3QgcmVzb2x2ZUFsZXJ0ID0gZW50ZXJwcmlzZUFsZXJ0U3lzdGVtLnJlc29sdmVBbGVydC5iaW5kKGVudGVycHJpc2VBbGVydFN5c3RlbSk7XG4iXSwibmFtZXMiOlsiQWxlcnRMZXZlbCIsIkFsZXJ0U3RhdHVzIiwiRW50ZXJwcmlzZUFsZXJ0U3lzdGVtIiwiTm90aWZpY2F0aW9uVHlwZSIsImFja25vd2xlZGdlQWxlcnQiLCJlbnRlcnByaXNlQWxlcnRTeXN0ZW0iLCJyZXNvbHZlQWxlcnQiLCJ0cmlnZ2VyQWxlcnQiLCJDYWNoZVV0aWxzIiwid2luZG93IiwicmVxdWlyZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJhbGVydFJ1bGVzIiwiTWFwIiwibm90aWZpY2F0aW9uQ2hhbm5lbHMiLCJlc2NhbGF0aW9uUnVsZXMiLCJhY3RpdmVBbGVydHMiLCJlc2NhbGF0aW9uSW50ZXJ2YWwiLCJpbml0aWFsaXplRGVmYXVsdENoYW5uZWxzIiwiaW5pdGlhbGl6ZURlZmF1bHRSdWxlcyIsInN0YXJ0RXNjYWxhdGlvbk1vbml0b3JpbmciLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwic2V0Tm90aWZpY2F0aW9uQ2hhbm5lbCIsImNoYW5uZWwiLCJzZXQiLCJpZCIsImxvZ2dlciIsImluZm8iLCJMb2dMZXZlbCIsIklORk8iLCJ0eXBlIiwiZW5hYmxlZCIsImxldmVscyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwic2V0RXNjYWxhdGlvblJ1bGUiLCJydWxlIiwibGV2ZWwiLCJjb25kaXRpb25zIiwiZHVyYXRpb24iLCJzZXRBbGVydFJ1bGUiLCJtZXRyaWNOYW1lIiwidGhyZXNob2xkIiwicnVsZUlkIiwidmFsdWUiLCJtZXNzYWdlIiwiZ2V0IiwiZXhpc3RpbmdBbGVydCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbmQiLCJhbGVydCIsInN0YXR1cyIsImNvb2xkb3duRW5kIiwiRGF0ZSIsInRyaWdnZXJlZEF0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJjb29sZG93bk1pbnV0ZXMiLCJnZW5lcmF0ZUFsZXJ0SWQiLCJydWxlTmFtZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInRvSVNPU3RyaW5nIiwibm90aWZpY2F0aW9uc1NlbnQiLCJ0YWdzIiwibWV0YWRhdGEiLCJzZW5kTm90aWZpY2F0aW9ucyIsImNoYW5uZWxzIiwic3RvcmVBbGVydCIsIldBUk4iLCJhbGVydElkIiwidXNlcklkIiwiYWNrbm93bGVkZ2VkQXQiLCJhY2tub3dsZWRnZWRCeSIsInVwZGF0ZUFsZXJ0IiwicmVzb2x2ZWRBdCIsInJlc29sdmVkQnkiLCJkZWxldGUiLCJjYWxjdWxhdGVEdXJhdGlvbiIsImNoYW5uZWxJZHMiLCJub3RpZmljYXRpb25zIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJtYXAiLCJjaGFubmVsSWQiLCJzZW5kTm90aWZpY2F0aW9uIiwiZm9yRWFjaCIsInJlc3VsdCIsImluZGV4IiwicHVzaCIsIkVSUk9SIiwicmVhc29uIiwiaW5jbHVkZXMiLCJyYXRlTGltaXQiLCJjaGVja1JhdGVMaW1pdCIsInN0YXJ0VGltZSIsIm5vdyIsInN1Y2Nlc3MiLCJzZW5kRW1haWxOb3RpZmljYXRpb24iLCJzZW5kU2xhY2tOb3RpZmljYXRpb24iLCJzZW5kV2ViaG9va05vdGlmaWNhdGlvbiIsInNlbmRTTVNOb3RpZmljYXRpb24iLCJzZW5kTG9nTm90aWZpY2F0aW9uIiwiRXJyb3IiLCJlcnIiLCJub3RpZmljYXRpb25Mb2ciLCJnZW5lcmF0ZU5vdGlmaWNhdGlvbklkIiwiY2hhbm5lbFR5cGUiLCJzZW50QXQiLCJyZXNwb25zZVRpbWUiLCJjaGVja0VzY2FsYXRpb25zIiwiZXNjYWxhdGlvblJ1bGVJZCIsImVzY2FsYXRpb25SdWxlIiwic2hvdWxkRXNjYWxhdGUiLCJlc2NhbGF0ZUFsZXJ0IiwiYWxlcnRBZ2UiLCJnZXRUaW1lIiwicmVxdWlyZWREdXJhdGlvbiIsImVzY2FsYXRlZEF0Iiwib3JpZ2luYWxMZXZlbCIsImFjdGlvbnMiLCJlc2NhbGF0ZVRvTGV2ZWwiLCJlc2NhbGF0ZWRGcm9tIiwibm90aWZ5Q2hhbm5lbHMiLCJhc3NpZ25Ub1VzZXIiLCJhc3NpZ25lZFRvIiwibmV3TGV2ZWwiLCJzdWJqZWN0IiwidG9VcHBlckNhc2UiLCJlbWFpbERhdGEiLCJ0byIsImNvbmZpZyIsInRlbXBsYXRlIiwiZGF0YSIsInRpbWVzdGFtcCIsInRvTG9jYWxlU3RyaW5nIiwicHJpb3JpdHkiLCJlbWFpbFNlcnZpY2UiLCJhbGVydERhdGEiLCJ0aXRsZSIsInNldmVyaXR5IiwiZGV0YWlscyIsInRvU3RyaW5nIiwic2xhY2tTZXJ2aWNlIiwic2VuZFN5c3RlbUFsZXJ0Iiwid2ViaG9vayIsIndlYmhvb2tVcmwiLCJ1cmwiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic291cmNlIiwib2siLCJzdGF0dXNUZXh0IiwicGhvbmVOdW1iZXIiLCJsb2dMZXZlbCIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJBTEVSVF9XRUJIT09LX1VSTCIsIm1heFBlckhvdXIiLCJtYXhQZXJEYXkiLCJzZXRJbnRlcnZhbCIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHIiLCJzdGFydCIsImVuZCIsInJvdW5kIiwic3VwYWJhc2UiLCJnZXRTdXBhYmFzZUNsaWVudCIsImluc2VydCIsInJ1bGVfaWQiLCJydWxlX25hbWUiLCJtZXRyaWNfbmFtZSIsInRyaWdnZXJlZF9hdCIsImFja25vd2xlZGdlZF9hdCIsImFja25vd2xlZGdlZF9ieSIsInJlc29sdmVkX2F0IiwicmVzb2x2ZWRfYnkiLCJlc2NhbGF0ZWRfYXQiLCJlc2NhbGF0ZWRfZnJvbSIsIm5vdGlmaWNhdGlvbnNfc2VudCIsInVwZGF0ZSIsImVxIiwiZGVzdHJveSIsImNsZWFySW50ZXJ2YWwiLCJiaW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsK0NBQStDO0FBQy9DLHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBbUIxQkE7ZUFBQUE7O1FBa0JBQztlQUFBQTs7UUE0RkNDO2VBQUFBOztRQXRHREM7ZUFBQUE7O1FBK3NCQ0M7ZUFBQUE7O1FBSkFDO2VBQUFBOztRQUtBQztlQUFBQTs7UUFGQUM7ZUFBQUE7Ozt3QkF2dUJpQzswQkFDWjt1QkFDTDt1QkFDQTtBQUU3QixxR0FBcUc7QUFDckcsSUFBSUMsYUFBa0I7QUFDdEIsSUFBSSxPQUFPQyxXQUFXLGFBQWE7SUFDakMsbUJBQW1CO0lBQ25CLElBQUk7UUFDRkQsYUFBYUUsUUFBUSx1QkFBdUJGLFVBQVU7SUFDeEQsRUFBRSxPQUFPRyxPQUFPO1FBQ2RDLFFBQVFDLElBQUksQ0FBQyxxREFBcURGO0lBQ3BFO0FBQ0Y7QUFHTyxJQUFBLEFBQUtYLG9DQUFBQTs7Ozs7V0FBQUE7O0FBUUwsSUFBQSxBQUFLRywwQ0FBQUE7Ozs7Ozs7V0FBQUE7O0FBVUwsSUFBQSxBQUFLRixxQ0FBQUE7Ozs7O1dBQUFBOztBQTRGTCxNQUFNQztJQVFYLGFBQWM7YUFOTlksYUFBcUMsSUFBSUM7YUFDekNDLHVCQUF5RCxJQUFJRDthQUM3REUsa0JBQStDLElBQUlGO2FBQ25ERyxlQUFtQyxJQUFJSDthQUN2Q0kscUJBQTRDO1FBR2xELElBQUksQ0FBQ0MseUJBQXlCO1FBQzlCLElBQUksQ0FBQ0Msc0JBQXNCO1FBQzNCLElBQUksQ0FBQ0MseUJBQXlCO0lBQ2hDO0lBRUEsT0FBT0MsY0FBcUM7UUFDMUMsSUFBSSxDQUFDckIsc0JBQXNCc0IsUUFBUSxFQUFFO1lBQ25DdEIsc0JBQXNCc0IsUUFBUSxHQUFHLElBQUl0QjtRQUN2QztRQUNBLE9BQU9BLHNCQUFzQnNCLFFBQVE7SUFDdkM7SUFFQTs7R0FFQyxHQUNEQyx1QkFBdUJDLE9BQTRCLEVBQVE7UUFDekQsSUFBSSxDQUFDVixvQkFBb0IsQ0FBQ1csR0FBRyxDQUFDRCxRQUFRRSxFQUFFLEVBQUVGO1FBQzFDRyxjQUFNLENBQUNDLElBQUksQ0FBQ0MsZ0JBQVEsQ0FBQ0MsSUFBSSxFQUFFLENBQUMsaUNBQWlDLEVBQUVOLFFBQVFFLEVBQUUsRUFBRSxFQUFFO1lBQzNFSyxNQUFNUCxRQUFRTyxJQUFJO1lBQ2xCQyxTQUFTUixRQUFRUSxPQUFPO1lBQ3hCQyxRQUFRVCxRQUFRUyxNQUFNO1FBQ3hCLEdBQUdDLG1CQUFXLENBQUNDLE1BQU07SUFDdkI7SUFFQTs7R0FFQyxHQUNEQyxrQkFBa0JDLElBQW9CLEVBQVE7UUFDNUMsSUFBSSxDQUFDdEIsZUFBZSxDQUFDVSxHQUFHLENBQUNZLEtBQUtYLEVBQUUsRUFBRVc7UUFDbENWLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDQyxnQkFBUSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyw0QkFBNEIsRUFBRU8sS0FBS1gsRUFBRSxFQUFFLEVBQUU7WUFDbkVZLE9BQU9ELEtBQUtFLFVBQVUsQ0FBQ0QsS0FBSztZQUM1QkUsVUFBVUgsS0FBS0UsVUFBVSxDQUFDQyxRQUFRO1lBQ2xDUixTQUFTSyxLQUFLTCxPQUFPO1FBQ3ZCLEdBQUdFLG1CQUFXLENBQUNDLE1BQU07SUFDdkI7SUFFQTs7R0FFQyxHQUNETSxhQUFhSixJQUFlLEVBQVE7UUFDbEMsSUFBSSxDQUFDekIsVUFBVSxDQUFDYSxHQUFHLENBQUNZLEtBQUtYLEVBQUUsRUFBRVc7UUFDN0JWLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDQyxnQkFBUSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRU8sS0FBS1gsRUFBRSxFQUFFLEVBQUU7WUFDOURnQixZQUFZTCxLQUFLSyxVQUFVO1lBQzNCQyxXQUFXTixLQUFLTSxTQUFTO1lBQ3pCTCxPQUFPRCxLQUFLQyxLQUFLO1lBQ2pCTixTQUFTSyxLQUFLTCxPQUFPO1FBQ3ZCLEdBQUdFLG1CQUFXLENBQUNDLE1BQU07SUFDdkI7SUFFQTs7R0FFQyxHQUNELE1BQU05QixhQUNKdUMsTUFBYyxFQUNkRixVQUFrQixFQUNsQkcsS0FBYSxFQUNiQyxPQUFnQixFQUNPO1FBQ3ZCLE1BQU1ULE9BQU8sSUFBSSxDQUFDekIsVUFBVSxDQUFDbUMsR0FBRyxDQUFDSDtRQUNqQyxJQUFJLENBQUNQLFFBQVEsQ0FBQ0EsS0FBS0wsT0FBTyxFQUFFO1lBQzFCLE9BQU87UUFDVDtRQUVBLHFCQUFxQjtRQUNyQixNQUFNZ0IsZ0JBQWdCQyxNQUFNQyxJQUFJLENBQUMsSUFBSSxDQUFDbEMsWUFBWSxDQUFDbUMsTUFBTSxJQUN0REMsSUFBSSxDQUFDQyxDQUFBQSxRQUFTQSxNQUFNVCxNQUFNLEtBQUtBLFVBQVVTLE1BQU1DLE1BQU07UUFFeEQsSUFBSU4sZUFBZTtZQUNqQixNQUFNTyxjQUFjLElBQUlDLEtBQUtSLGNBQWNTLFdBQVc7WUFDdERGLFlBQVlHLFVBQVUsQ0FBQ0gsWUFBWUksVUFBVSxLQUFLdEIsS0FBS3VCLGVBQWU7WUFFdEUsSUFBSSxJQUFJSixTQUFTRCxhQUFhO2dCQUM1QixPQUFPLE1BQU0sa0JBQWtCO1lBQ2pDO1FBQ0Y7UUFFQSxxQkFBcUI7UUFDckIsTUFBTUYsUUFBZTtZQUNuQjNCLElBQUksSUFBSSxDQUFDbUMsZUFBZTtZQUN4QmpCLFFBQVFQLEtBQUtYLEVBQUU7WUFDZm9DLFVBQVV6QixLQUFLMEIsSUFBSTtZQUNuQnpCLE9BQU9ELEtBQUtDLEtBQUs7WUFDakJnQixNQUFNO1lBQ05SLFNBQVNBLFdBQVcsR0FBR1QsS0FBSzJCLFdBQVcsQ0FBQyxVQUFVLEVBQUVuQixNQUFNLGFBQWEsRUFBRVIsS0FBS00sU0FBUyxFQUFFO1lBQ3pGRDtZQUNBRztZQUNBRixXQUFXTixLQUFLTSxTQUFTO1lBQ3pCYyxhQUFhLElBQUlELE9BQU9TLFdBQVc7WUFDbkNDLG1CQUFtQixFQUFFO1lBQ3JCQyxNQUFNOUIsS0FBSzhCLElBQUk7WUFDZkMsVUFBVS9CLEtBQUsrQixRQUFRO1FBQ3pCO1FBRUEsSUFBSSxDQUFDcEQsWUFBWSxDQUFDUyxHQUFHLENBQUM0QixNQUFNM0IsRUFBRSxFQUFFMkI7UUFFaEMsd0JBQXdCO1FBQ3hCLE1BQU0sSUFBSSxDQUFDZ0IsaUJBQWlCLENBQUNoQixPQUFPaEIsS0FBS2lDLFFBQVE7UUFFakQsNkJBQTZCO1FBQzdCLE1BQU0sSUFBSSxDQUFDQyxVQUFVLENBQUNsQjtRQUV0QjFCLGNBQU0sQ0FBQ2hCLElBQUksQ0FBQ2tCLGdCQUFRLENBQUMyQyxJQUFJLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRW5DLEtBQUswQixJQUFJLEVBQUUsRUFBRTtZQUMxRFUsU0FBU3BCLE1BQU0zQixFQUFFO1lBQ2pCWSxPQUFPZSxNQUFNZixLQUFLO1lBQ2xCSSxZQUFZVyxNQUFNWCxVQUFVO1lBQzVCRyxPQUFPUSxNQUFNUixLQUFLO1lBQ2xCRixXQUFXVSxNQUFNVixTQUFTO1FBQzVCLEdBQUdULG1CQUFXLENBQUNDLE1BQU07UUFFckIsT0FBT2tCO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQU1uRCxpQkFBaUJ1RSxPQUFlLEVBQUVDLE1BQWMsRUFBb0I7UUFDeEUsTUFBTXJCLFFBQVEsSUFBSSxDQUFDckMsWUFBWSxDQUFDK0IsR0FBRyxDQUFDMEI7UUFDcEMsSUFBSSxDQUFDcEIsU0FBU0EsTUFBTUMsTUFBTSxlQUF5QjtZQUNqRCxPQUFPO1FBQ1Q7UUFFQUQsTUFBTUMsTUFBTTtRQUNaRCxNQUFNc0IsY0FBYyxHQUFHLElBQUluQixPQUFPUyxXQUFXO1FBQzdDWixNQUFNdUIsY0FBYyxHQUFHRjtRQUV2QixNQUFNLElBQUksQ0FBQ0csV0FBVyxDQUFDeEI7UUFFdkIxQixjQUFNLENBQUNDLElBQUksQ0FBQ0MsZ0JBQVEsQ0FBQ0MsSUFBSSxFQUFFLENBQUMsb0JBQW9CLEVBQUUyQyxTQUFTLEVBQUU7WUFDM0RDO1lBQ0FwQyxPQUFPZSxNQUFNZixLQUFLO1lBQ2xCd0IsVUFBVVQsTUFBTVMsUUFBUTtRQUMxQixHQUFHNUIsbUJBQVcsQ0FBQ0MsTUFBTTtRQUVyQixPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQU0vQixhQUFhcUUsT0FBZSxFQUFFQyxNQUFlLEVBQW9CO1FBQ3JFLE1BQU1yQixRQUFRLElBQUksQ0FBQ3JDLFlBQVksQ0FBQytCLEdBQUcsQ0FBQzBCO1FBQ3BDLElBQUksQ0FBQ3BCLE9BQU87WUFDVixPQUFPO1FBQ1Q7UUFFQUEsTUFBTUMsTUFBTTtRQUNaRCxNQUFNeUIsVUFBVSxHQUFHLElBQUl0QixPQUFPUyxXQUFXO1FBQ3pDWixNQUFNMEIsVUFBVSxHQUFHTDtRQUVuQixNQUFNLElBQUksQ0FBQ0csV0FBVyxDQUFDeEI7UUFDdkIsSUFBSSxDQUFDckMsWUFBWSxDQUFDZ0UsTUFBTSxDQUFDUDtRQUV6QjlDLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDQyxnQkFBUSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRTJDLFNBQVMsRUFBRTtZQUN2REM7WUFDQXBDLE9BQU9lLE1BQU1mLEtBQUs7WUFDbEJ3QixVQUFVVCxNQUFNUyxRQUFRO1lBQ3hCdEIsVUFBVSxJQUFJLENBQUN5QyxpQkFBaUIsQ0FBQzVCLE1BQU1JLFdBQVcsRUFBRUosTUFBTXlCLFVBQVU7UUFDdEUsR0FBRzVDLG1CQUFXLENBQUNDLE1BQU07UUFFckIsT0FBTztJQUNUO0lBRUE7O0dBRUMsR0FDRCxNQUFja0Msa0JBQWtCaEIsS0FBWSxFQUFFNkIsVUFBb0IsRUFBaUI7UUFDakYsTUFBTUMsZ0JBQWdCLE1BQU1DLFFBQVFDLFVBQVUsQ0FDNUNILFdBQVdJLEdBQUcsQ0FBQ0MsQ0FBQUEsWUFBYSxJQUFJLENBQUNDLGdCQUFnQixDQUFDbkMsT0FBT2tDO1FBRzNELGlCQUFpQjtRQUNqQkosY0FBY00sT0FBTyxDQUFDLENBQUNDLFFBQVFDO1lBQzdCLE1BQU1KLFlBQVlMLFVBQVUsQ0FBQ1MsTUFBTTtZQUNuQyxJQUFJRCxPQUFPcEMsTUFBTSxLQUFLLGVBQWVvQyxPQUFPN0MsS0FBSyxFQUFFO2dCQUNqRFEsTUFBTWEsaUJBQWlCLENBQUMwQixJQUFJLENBQUNGLE9BQU83QyxLQUFLO1lBQzNDLE9BQU8sSUFBSTZDLE9BQU9wQyxNQUFNLEtBQUssWUFBWTtnQkFDdkMzQixjQUFNLENBQUNsQixLQUFLLENBQUNvQixnQkFBUSxDQUFDZ0UsS0FBSyxFQUFFLENBQUMsd0NBQXdDLEVBQUVOLFdBQVcsRUFBRTtvQkFDbkZkLFNBQVNwQixNQUFNM0IsRUFBRTtvQkFDakJqQixPQUFPaUYsT0FBT0ksTUFBTTtnQkFDdEIsR0FBRzVELG1CQUFXLENBQUNDLE1BQU07WUFDdkI7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjcUQsaUJBQWlCbkMsS0FBWSxFQUFFa0MsU0FBaUIsRUFBbUM7UUFDL0YsTUFBTS9ELFVBQVUsSUFBSSxDQUFDVixvQkFBb0IsQ0FBQ2lDLEdBQUcsQ0FBQ3dDO1FBQzlDLElBQUksQ0FBQy9ELFdBQVcsQ0FBQ0EsUUFBUVEsT0FBTyxJQUFJLENBQUNSLFFBQVFTLE1BQU0sQ0FBQzhELFFBQVEsQ0FBQzFDLE1BQU1mLEtBQUssR0FBRztZQUN6RSxPQUFPO1FBQ1Q7UUFFQSwwQkFBMEI7UUFDMUIsSUFBSWQsUUFBUXdFLFNBQVMsSUFBSSxDQUFFLE1BQU0sSUFBSSxDQUFDQyxjQUFjLENBQUNWLFdBQVcvRCxRQUFRd0UsU0FBUyxHQUFJO1lBQ25GckUsY0FBTSxDQUFDaEIsSUFBSSxDQUFDa0IsZ0JBQVEsQ0FBQzJDLElBQUksRUFBRSxDQUFDLGlDQUFpQyxFQUFFZSxXQUFXLEVBQUU7Z0JBQzFFZCxTQUFTcEIsTUFBTTNCLEVBQUU7WUFDbkIsR0FBR1EsbUJBQVcsQ0FBQ0MsTUFBTTtZQUNyQixPQUFPO1FBQ1Q7UUFFQSxNQUFNK0QsWUFBWTFDLEtBQUsyQyxHQUFHO1FBQzFCLElBQUlDLFVBQVU7UUFDZCxJQUFJM0Y7UUFFSixJQUFJO1lBQ0YsT0FBUWUsUUFBUU8sSUFBSTtnQkFDbEI7b0JBQ0UsTUFBTSxJQUFJLENBQUNzRSxxQkFBcUIsQ0FBQ2hELE9BQU83QjtvQkFDeEM7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJLENBQUM4RSxxQkFBcUIsQ0FBQ2pELE9BQU83QjtvQkFDeEM7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJLENBQUMrRSx1QkFBdUIsQ0FBQ2xELE9BQU83QjtvQkFDMUM7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJLENBQUNnRixtQkFBbUIsQ0FBQ25ELE9BQU83QjtvQkFDdEM7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJLENBQUNpRixtQkFBbUIsQ0FBQ3BELE9BQU83QjtvQkFDdEM7Z0JBQ0Y7b0JBQ0UsTUFBTSxJQUFJa0YsTUFBTSxDQUFDLCtCQUErQixFQUFFbEYsUUFBUU8sSUFBSSxFQUFFO1lBQ3BFO1lBQ0FxRSxVQUFVO1FBQ1osRUFBRSxPQUFPTyxLQUFLO1lBQ1psRyxRQUFRa0csZUFBZUQsUUFBUUMsSUFBSTdELE9BQU8sR0FBRztRQUMvQztRQUVBLE1BQU04RCxrQkFBbUM7WUFDdkNsRixJQUFJLElBQUksQ0FBQ21GLHNCQUFzQjtZQUMvQnRCO1lBQ0F1QixhQUFhdEYsUUFBUU8sSUFBSTtZQUN6QmdGLFFBQVEsSUFBSXZELE9BQU9TLFdBQVc7WUFDOUJtQztZQUNBM0Y7WUFDQXVHLGNBQWN4RCxLQUFLMkMsR0FBRyxLQUFLRDtRQUM3QjtRQUVBLE9BQU9VO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQWNLLG1CQUFrQztRQUM5QyxLQUFLLE1BQU01RCxTQUFTLElBQUksQ0FBQ3JDLFlBQVksQ0FBQ21DLE1BQU0sR0FBSTtZQUM5QyxJQUFJRSxNQUFNQyxNQUFNLGVBQXlCO2dCQUN2QztZQUNGO1lBRUEsTUFBTWpCLE9BQU8sSUFBSSxDQUFDekIsVUFBVSxDQUFDbUMsR0FBRyxDQUFDTSxNQUFNVCxNQUFNO1lBQzdDLElBQUksQ0FBQ1AsTUFBTTtnQkFDVDtZQUNGO1lBRUEsbUNBQW1DO1lBQ25DLEtBQUssTUFBTTZFLG9CQUFvQjdFLEtBQUt0QixlQUFlLENBQUU7Z0JBQ25ELE1BQU1vRyxpQkFBaUIsSUFBSSxDQUFDcEcsZUFBZSxDQUFDZ0MsR0FBRyxDQUFDbUU7Z0JBQ2hELElBQUksQ0FBQ0Msa0JBQWtCLENBQUNBLGVBQWVuRixPQUFPLEVBQUU7b0JBQzlDO2dCQUNGO2dCQUVBLHdDQUF3QztnQkFDeEMsSUFBSSxJQUFJLENBQUNvRixjQUFjLENBQUMvRCxPQUFPOEQsaUJBQWlCO29CQUM5QyxNQUFNLElBQUksQ0FBQ0UsYUFBYSxDQUFDaEUsT0FBTzhEO2dCQUNsQztZQUNGO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUUMsZUFBZS9ELEtBQVksRUFBRWhCLElBQW9CLEVBQVc7UUFDbEUsa0JBQWtCO1FBQ2xCLElBQUlnQixNQUFNZixLQUFLLEtBQUtELEtBQUtFLFVBQVUsQ0FBQ0QsS0FBSyxFQUFFO1lBQ3pDLE9BQU87UUFDVDtRQUVBLHFCQUFxQjtRQUNyQixNQUFNZ0YsV0FBVzlELEtBQUsyQyxHQUFHLEtBQUssSUFBSTNDLEtBQUtILE1BQU1JLFdBQVcsRUFBRThELE9BQU87UUFDakUsTUFBTUMsbUJBQW1CbkYsS0FBS0UsVUFBVSxDQUFDQyxRQUFRLEdBQUcsS0FBSyxNQUFNLGlCQUFpQjtRQUVoRixJQUFJOEUsV0FBV0Usa0JBQWtCO1lBQy9CLE9BQU87UUFDVDtRQUVBLCtCQUErQjtRQUMvQixJQUFJbkUsTUFBTW9FLFdBQVcsRUFBRTtZQUNyQixPQUFPO1FBQ1Q7UUFFQSxPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQWNKLGNBQWNoRSxLQUFZLEVBQUVoQixJQUFvQixFQUFpQjtRQUM3RSxNQUFNcUYsZ0JBQWdCckUsTUFBTWYsS0FBSztRQUVqQyxtQ0FBbUM7UUFDbkMsSUFBSUQsS0FBS3NGLE9BQU8sQ0FBQ0MsZUFBZSxFQUFFO1lBQ2hDdkUsTUFBTWYsS0FBSyxHQUFHRCxLQUFLc0YsT0FBTyxDQUFDQyxlQUFlO1lBQzFDdkUsTUFBTXdFLGFBQWEsR0FBR0g7UUFDeEI7UUFFQXJFLE1BQU1vRSxXQUFXLEdBQUcsSUFBSWpFLE9BQU9TLFdBQVc7UUFFMUMsd0NBQXdDO1FBQ3hDLE1BQU0sSUFBSSxDQUFDSSxpQkFBaUIsQ0FBQ2hCLE9BQU9oQixLQUFLc0YsT0FBTyxDQUFDRyxjQUFjO1FBRS9ELG9DQUFvQztRQUNwQyxJQUFJekYsS0FBS3NGLE9BQU8sQ0FBQ0ksWUFBWSxFQUFFO1lBQzdCMUUsTUFBTWUsUUFBUSxHQUFHO2dCQUNmLEdBQUdmLE1BQU1lLFFBQVE7Z0JBQ2pCNEQsWUFBWTNGLEtBQUtzRixPQUFPLENBQUNJLFlBQVk7WUFDdkM7UUFDRjtRQUVBLE1BQU0sSUFBSSxDQUFDbEQsV0FBVyxDQUFDeEI7UUFFdkIxQixjQUFNLENBQUNsQixLQUFLLENBQUNvQixnQkFBUSxDQUFDZ0UsS0FBSyxFQUFFLENBQUMsaUJBQWlCLEVBQUV4QyxNQUFNM0IsRUFBRSxFQUFFLEVBQUU7WUFDM0RnRztZQUNBTyxVQUFVNUUsTUFBTWYsS0FBSztZQUNyQjZFLGdCQUFnQjlFLEtBQUswQixJQUFJO1lBQ3pCdkIsVUFBVSxJQUFJLENBQUN5QyxpQkFBaUIsQ0FBQzVCLE1BQU1JLFdBQVcsRUFBRUosTUFBTW9FLFdBQVc7UUFDdkUsR0FBR3ZGLG1CQUFXLENBQUNDLE1BQU07SUFDdkI7SUFFQTs7R0FFQyxHQUNELE1BQWNrRSxzQkFBc0JoRCxLQUFZLEVBQUU3QixPQUE0QixFQUFpQjtRQUM3RixJQUFJO1lBQ0YsTUFBTTBHLFVBQVUsQ0FBQyxDQUFDLEVBQUU3RSxNQUFNZixLQUFLLENBQUM2RixXQUFXLEdBQUcsRUFBRSxFQUFFOUUsTUFBTVMsUUFBUSxFQUFFO1lBQ2xFLE1BQU1zRSxZQUFZO2dCQUNoQkMsSUFBSTdHLFFBQVE4RyxNQUFNLENBQUNELEVBQUUsSUFBSTtvQkFBQztpQkFBb0I7Z0JBQzlDSDtnQkFDQUssVUFBVTtnQkFDVkMsTUFBTTtvQkFDSm5GO29CQUNBZixPQUFPZSxNQUFNZixLQUFLLENBQUM2RixXQUFXO29CQUM5Qk0sV0FBVyxJQUFJakYsS0FBS0gsTUFBTUksV0FBVyxFQUFFaUYsY0FBYztvQkFDckQ1RixTQUFTTyxNQUFNUCxPQUFPO29CQUN0QkosWUFBWVcsTUFBTVgsVUFBVTtvQkFDNUJHLE9BQU9RLE1BQU1SLEtBQUs7b0JBQ2xCRixXQUFXVSxNQUFNVixTQUFTO2dCQUM1QjtnQkFDQWdHLFVBQVV0RixNQUFNZixLQUFLLG1CQUE0QmUsTUFBTWYsS0FBSyxtQkFBNEIsU0FBa0I7WUFDNUc7WUFFQSxNQUFNc0csbUJBQVksQ0FBQ3BELGdCQUFnQixDQUFDNEM7WUFFcEN6RyxjQUFNLENBQUNDLElBQUksQ0FBQ0MsZ0JBQVEsQ0FBQ0MsSUFBSSxFQUFFLENBQUMsb0NBQW9DLENBQUMsRUFBRTtnQkFDakUyQyxTQUFTcEIsTUFBTTNCLEVBQUU7Z0JBQ2pCMkcsSUFBSTdHLFFBQVE4RyxNQUFNLENBQUNELEVBQUU7Z0JBQ3JCSDtZQUNGLEdBQUdoRyxtQkFBVyxDQUFDQyxNQUFNO1FBQ3ZCLEVBQUUsT0FBTzFCLE9BQU87WUFDZGtCLGNBQU0sQ0FBQ2xCLEtBQUssQ0FBQ29CLGdCQUFRLENBQUNnRSxLQUFLLEVBQUUsQ0FBQyxpQ0FBaUMsQ0FBQyxFQUFFO2dCQUNoRXBCLFNBQVNwQixNQUFNM0IsRUFBRTtnQkFDakJqQixPQUFPQSxpQkFBaUJpRyxRQUFRakcsTUFBTXFDLE9BQU8sR0FBRztZQUNsRCxHQUFHWixtQkFBVyxDQUFDQyxNQUFNO1lBQ3JCLE1BQU0xQjtRQUNSO0lBQ0Y7SUFFQSxNQUFjNkYsc0JBQXNCakQsS0FBWSxFQUFFN0IsT0FBNEIsRUFBaUI7UUFDN0YsSUFBSTtZQUNGLE1BQU1xSCxZQUFZO2dCQUNoQkMsT0FBTyxHQUFHekYsTUFBTWYsS0FBSyxDQUFDNkYsV0FBVyxHQUFHLEVBQUUsRUFBRTlFLE1BQU1TLFFBQVEsRUFBRTtnQkFDeERoQixTQUFTTyxNQUFNUCxPQUFPO2dCQUN0QmlHLFVBQVUxRixNQUFNZixLQUFLLG1CQUE0QmUsTUFBTWYsS0FBSyxtQkFBNEIsVUFDL0VlLE1BQU1mLEtBQUssaUJBQTBCLFlBQXFCO2dCQUNuRTBHLFNBQVM7b0JBQ1AsWUFBWTNGLE1BQU0zQixFQUFFO29CQUNwQixhQUFhLElBQUk4QixLQUFLSCxNQUFNSSxXQUFXLEVBQUVpRixjQUFjO29CQUN2RCxVQUFVckYsTUFBTVgsVUFBVTtvQkFDMUIsU0FBU1csTUFBTVIsS0FBSyxFQUFFb0csY0FBYztvQkFDcEMsYUFBYTVGLE1BQU1WLFNBQVMsRUFBRXNHLGNBQWM7b0JBQzVDLFVBQVU1RixNQUFNQyxNQUFNO29CQUN0QixHQUFHRCxNQUFNYyxJQUFJO2dCQUNmO1lBQ0Y7WUFFQSxNQUFNK0UsbUJBQVksQ0FBQ0MsZUFBZSxDQUFDTjtZQUVuQ2xILGNBQU0sQ0FBQ0MsSUFBSSxDQUFDQyxnQkFBUSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxvQ0FBb0MsQ0FBQyxFQUFFO2dCQUNqRTJDLFNBQVNwQixNQUFNM0IsRUFBRTtnQkFDakJGLFNBQVNBLFFBQVE4RyxNQUFNLENBQUM5RyxPQUFPO2dCQUMvQjRILFNBQVM1SCxRQUFROEcsTUFBTSxDQUFDZSxVQUFVLEdBQUcsZUFBZTtZQUN0RCxHQUFHbkgsbUJBQVcsQ0FBQ0MsTUFBTTtRQUN2QixFQUFFLE9BQU8xQixPQUFPO1lBQ2RrQixjQUFNLENBQUNsQixLQUFLLENBQUNvQixnQkFBUSxDQUFDZ0UsS0FBSyxFQUFFLENBQUMsaUNBQWlDLENBQUMsRUFBRTtnQkFDaEVwQixTQUFTcEIsTUFBTTNCLEVBQUU7Z0JBQ2pCakIsT0FBT0EsaUJBQWlCaUcsUUFBUWpHLE1BQU1xQyxPQUFPLEdBQUc7WUFDbEQsR0FBR1osbUJBQVcsQ0FBQ0MsTUFBTTtZQUNyQixNQUFNMUI7UUFDUjtJQUNGO0lBRUEsTUFBYzhGLHdCQUF3QmxELEtBQVksRUFBRTdCLE9BQTRCLEVBQWlCO1FBQy9GLElBQUksQ0FBQ0EsUUFBUThHLE1BQU0sQ0FBQ2dCLEdBQUcsRUFBRTtZQUN2QixNQUFNLElBQUk1QyxNQUFNO1FBQ2xCO1FBRUEsTUFBTTZDLFdBQVcsTUFBTUMsTUFBTWhJLFFBQVE4RyxNQUFNLENBQUNnQixHQUFHLEVBQUU7WUFDL0NHLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLEdBQUlsSSxRQUFROEcsTUFBTSxDQUFDb0IsT0FBTyxJQUFJLENBQUMsQ0FBQztZQUNsQztZQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25CeEc7Z0JBQ0FvRixXQUFXLElBQUlqRixPQUFPUyxXQUFXO2dCQUNqQzZGLFFBQVE7WUFDVjtRQUNGO1FBRUEsSUFBSSxDQUFDUCxTQUFTUSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJckQsTUFBTSxDQUFDLGdCQUFnQixFQUFFNkMsU0FBU2pHLE1BQU0sQ0FBQyxDQUFDLEVBQUVpRyxTQUFTUyxVQUFVLEVBQUU7UUFDN0U7SUFDRjtJQUVBLE1BQWN4RCxvQkFBb0JuRCxLQUFZLEVBQUU3QixPQUE0QixFQUFpQjtRQUMzRixpQ0FBaUM7UUFDakNHLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDQyxnQkFBUSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFO1lBQ2xEMkMsU0FBU3BCLE1BQU0zQixFQUFFO1lBQ2pCMkcsSUFBSTdHLFFBQVE4RyxNQUFNLENBQUMyQixXQUFXO1FBQ2hDLEdBQUcvSCxtQkFBVyxDQUFDQyxNQUFNO0lBQ3ZCO0lBRUEsTUFBY3NFLG9CQUFvQnBELEtBQVksRUFBRTdCLE9BQTRCLEVBQWlCO1FBQzNGLE1BQU0wSSxXQUFXN0csTUFBTWYsS0FBSyxvQkFBNkJlLE1BQU1mLEtBQUssa0JBQ2hFVCxnQkFBUSxDQUFDZ0UsS0FBSyxHQUNkaEUsZ0JBQVEsQ0FBQzJDLElBQUk7UUFFakI3QyxjQUFNLENBQUN3SSxHQUFHLENBQUNELFVBQVUsQ0FBQyxPQUFPLEVBQUU3RyxNQUFNUCxPQUFPLEVBQUUsRUFBRTtZQUM5QzJCLFNBQVNwQixNQUFNM0IsRUFBRTtZQUNqQlksT0FBT2UsTUFBTWYsS0FBSztZQUNsQkksWUFBWVcsTUFBTVgsVUFBVTtZQUM1QkcsT0FBT1EsTUFBTVIsS0FBSztZQUNsQkYsV0FBV1UsTUFBTVYsU0FBUztZQUMxQm1CLFVBQVVULE1BQU1TLFFBQVE7UUFDMUIsR0FBRzVCLG1CQUFXLENBQUNDLE1BQU07SUFDdkI7SUFFQTs7R0FFQyxHQUNELEFBQVFqQiw0QkFBa0M7UUFDeEMsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ0ssc0JBQXNCLENBQUM7WUFDMUJHLElBQUk7WUFDSkssSUFBSTtZQUNKZ0MsTUFBTTtZQUNOdUUsUUFBUSxDQUFDO1lBQ1R0RyxTQUFTO1lBQ1RDLFFBQVE7Ozs7O2FBQWdGO1FBQzFGO1FBRUEsK0NBQStDO1FBQy9DLElBQUksQ0FBQ1Ysc0JBQXNCLENBQUM7WUFDMUJHLElBQUk7WUFDSkssSUFBSTtZQUNKZ0MsTUFBTTtZQUNOdUUsUUFBUTtnQkFDTmdCLEtBQUtjLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLElBQUk7WUFDeEM7WUFDQXRJLFNBQVM7WUFDVEMsUUFBUTs7O2FBQTJDO1lBQ25EK0QsV0FBVztnQkFDVHVFLFlBQVk7Z0JBQ1pDLFdBQVc7WUFDYjtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELEFBQVFySix5QkFBK0I7UUFDckMsOENBQThDO1FBQzlDLElBQUksQ0FBQ2lCLGlCQUFpQixDQUFDO1lBQ3JCVixJQUFJO1lBQ0pxQyxNQUFNO1lBQ04vQixTQUFTO1lBQ1RPLFlBQVk7Z0JBQ1ZELEtBQUs7Z0JBQ0xFLFVBQVUsR0FBRyxhQUFhO1lBQzVCO1lBQ0FtRixTQUFTO2dCQUNQQyxlQUFlO2dCQUNmRSxnQkFBZ0I7b0JBQUM7b0JBQWU7aUJBQWtCO1lBQ3BEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTFHLDRCQUFrQztRQUN4QyxJQUFJLENBQUNILGtCQUFrQixHQUFHd0osWUFBWTtZQUNwQyxJQUFJLENBQUN4RCxnQkFBZ0I7UUFDdkIsR0FBRyxRQUFRLHdCQUF3QjtJQUNyQztJQUVBOztHQUVDLEdBQ0QsQUFBUXBELGtCQUEwQjtRQUNoQyxPQUFPLENBQUMsTUFBTSxFQUFFTCxLQUFLMkMsR0FBRyxHQUFHLENBQUMsRUFBRXVFLEtBQUtDLE1BQU0sR0FBRzFCLFFBQVEsQ0FBQyxJQUFJMkIsTUFBTSxDQUFDLEdBQUcsSUFBSTtJQUN6RTtJQUVRL0QseUJBQWlDO1FBQ3ZDLE9BQU8sQ0FBQyxNQUFNLEVBQUVyRCxLQUFLMkMsR0FBRyxHQUFHLENBQUMsRUFBRXVFLEtBQUtDLE1BQU0sR0FBRzFCLFFBQVEsQ0FBQyxJQUFJMkIsTUFBTSxDQUFDLEdBQUcsSUFBSTtJQUN6RTtJQUVRM0Ysa0JBQWtCNEYsS0FBYSxFQUFFQyxHQUFXLEVBQVU7UUFDNUQsT0FBT0osS0FBS0ssS0FBSyxDQUFDLEFBQUMsQ0FBQSxJQUFJdkgsS0FBS3NILEtBQUt2RCxPQUFPLEtBQUssSUFBSS9ELEtBQUtxSCxPQUFPdEQsT0FBTyxFQUFDLElBQUssT0FBTyxLQUFLLFVBQVU7SUFDbEc7SUFFQSxNQUFjdEIsZUFBZVYsU0FBaUIsRUFBRVMsU0FBb0QsRUFBb0I7UUFDdEgsNERBQTREO1FBQzVELE9BQU87SUFDVDtJQUVBLE1BQWN6QixXQUFXbEIsS0FBWSxFQUFpQjtRQUNwRCxJQUFJO1lBQ0YsTUFBTTJILFdBQVdDLElBQUFBLDJCQUFpQixFQUFDO1lBQ25DLElBQUksQ0FBQ0QsVUFBVTtZQUVmLE1BQU1BLFNBQVM5SCxJQUFJLENBQUMscUJBQXFCZ0ksTUFBTSxDQUFDO2dCQUM5Q3hKLElBQUkyQixNQUFNM0IsRUFBRTtnQkFDWnlKLFNBQVM5SCxNQUFNVCxNQUFNO2dCQUNyQndJLFdBQVcvSCxNQUFNUyxRQUFRO2dCQUN6QnhCLE9BQU9lLE1BQU1mLEtBQUs7Z0JBQ2xCZ0IsUUFBUUQsTUFBTUMsTUFBTTtnQkFDcEJSLFNBQVNPLE1BQU1QLE9BQU87Z0JBQ3RCdUksYUFBYWhJLE1BQU1YLFVBQVU7Z0JBQzdCRyxPQUFPUSxNQUFNUixLQUFLO2dCQUNsQkYsV0FBV1UsTUFBTVYsU0FBUztnQkFDMUIySSxjQUFjakksTUFBTUksV0FBVztnQkFDL0I4SCxpQkFBaUJsSSxNQUFNc0IsY0FBYztnQkFDckM2RyxpQkFBaUJuSSxNQUFNdUIsY0FBYztnQkFDckM2RyxhQUFhcEksTUFBTXlCLFVBQVU7Z0JBQzdCNEcsYUFBYXJJLE1BQU0wQixVQUFVO2dCQUM3QjRHLGNBQWN0SSxNQUFNb0UsV0FBVztnQkFDL0JtRSxnQkFBZ0J2SSxNQUFNd0UsYUFBYTtnQkFDbkNnRSxvQkFBb0J4SSxNQUFNYSxpQkFBaUI7Z0JBQzNDQyxNQUFNZCxNQUFNYyxJQUFJO2dCQUNoQkMsVUFBVWYsTUFBTWUsUUFBUTtZQUMxQjtRQUNGLEVBQUUsT0FBTzNELE9BQU87WUFDZGtCLGNBQU0sQ0FBQ2xCLEtBQUssQ0FBQ29CLGdCQUFRLENBQUNnRSxLQUFLLEVBQUUseUJBQXlCO2dCQUNwRHBGLE9BQU9BLGlCQUFpQmlHLFFBQVFqRyxNQUFNcUMsT0FBTyxHQUFHO2dCQUNoRDJCLFNBQVNwQixNQUFNM0IsRUFBRTtZQUNuQixHQUFHUSxtQkFBVyxDQUFDQyxNQUFNO1FBQ3ZCO0lBQ0Y7SUFFQSxNQUFjMEMsWUFBWXhCLEtBQVksRUFBaUI7UUFDckQsSUFBSTtZQUNGLE1BQU0ySCxXQUFXQyxJQUFBQSwyQkFBaUIsRUFBQztZQUNuQyxJQUFJLENBQUNELFVBQVU7WUFFZixNQUFNQSxTQUNIOUgsSUFBSSxDQUFDLHFCQUNMNEksTUFBTSxDQUFDO2dCQUNOeEosT0FBT2UsTUFBTWYsS0FBSztnQkFDbEJnQixRQUFRRCxNQUFNQyxNQUFNO2dCQUNwQmlJLGlCQUFpQmxJLE1BQU1zQixjQUFjO2dCQUNyQzZHLGlCQUFpQm5JLE1BQU11QixjQUFjO2dCQUNyQzZHLGFBQWFwSSxNQUFNeUIsVUFBVTtnQkFDN0I0RyxhQUFhckksTUFBTTBCLFVBQVU7Z0JBQzdCNEcsY0FBY3RJLE1BQU1vRSxXQUFXO2dCQUMvQm1FLGdCQUFnQnZJLE1BQU13RSxhQUFhO2dCQUNuQ2dFLG9CQUFvQnhJLE1BQU1hLGlCQUFpQjtnQkFDM0NFLFVBQVVmLE1BQU1lLFFBQVE7WUFDMUIsR0FDQzJILEVBQUUsQ0FBQyxNQUFNMUksTUFBTTNCLEVBQUU7UUFDdEIsRUFBRSxPQUFPakIsT0FBTztZQUNka0IsY0FBTSxDQUFDbEIsS0FBSyxDQUFDb0IsZ0JBQVEsQ0FBQ2dFLEtBQUssRUFBRSwwQkFBMEI7Z0JBQ3JEcEYsT0FBT0EsaUJBQWlCaUcsUUFBUWpHLE1BQU1xQyxPQUFPLEdBQUc7Z0JBQ2hEMkIsU0FBU3BCLE1BQU0zQixFQUFFO1lBQ25CLEdBQUdRLG1CQUFXLENBQUNDLE1BQU07UUFDdkI7SUFDRjtJQUVBOztHQUVDLEdBQ0Q2SixVQUFnQjtRQUNkLElBQUksSUFBSSxDQUFDL0ssa0JBQWtCLEVBQUU7WUFDM0JnTCxjQUFjLElBQUksQ0FBQ2hMLGtCQUFrQjtZQUNyQyxJQUFJLENBQUNBLGtCQUFrQixHQUFHO1FBQzVCO0lBQ0Y7QUFDRjtBQUdPLE1BQU1kLHdCQUF3Qkgsc0JBQXNCcUIsV0FBVztBQUcvRCxNQUFNaEIsZUFBZUYsc0JBQXNCRSxZQUFZLENBQUM2TCxJQUFJLENBQUMvTDtBQUM3RCxNQUFNRCxtQkFBbUJDLHNCQUFzQkQsZ0JBQWdCLENBQUNnTSxJQUFJLENBQUMvTDtBQUNyRSxNQUFNQyxlQUFlRCxzQkFBc0JDLFlBQVksQ0FBQzhMLElBQUksQ0FBQy9MIn0=