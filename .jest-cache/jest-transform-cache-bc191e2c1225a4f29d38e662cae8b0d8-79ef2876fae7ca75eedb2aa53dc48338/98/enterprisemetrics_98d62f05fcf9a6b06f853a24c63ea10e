b639f57850723e27b8acd63e10e85b0d
// ===================================
// PINTEYA E-COMMERCE - ENTERPRISE METRICS SYSTEM
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get AlertLevel () {
        return AlertLevel;
    },
    get BusinessMetricCategory () {
        return BusinessMetricCategory;
    },
    get EnterpriseMetricsCollector () {
        return EnterpriseMetricsCollector;
    },
    get MetricType () {
        return MetricType;
    },
    get enterpriseMetrics () {
        return enterpriseMetrics;
    },
    get recordBusinessMetric () {
        return recordBusinessMetric;
    },
    get recordPerformanceMetric () {
        return recordPerformanceMetric;
    },
    get recordSecurityMetric () {
        return recordSecurityMetric;
    },
    get recordUserExperienceMetric () {
        return recordUserExperienceMetric;
    }
});
const _logger = require("../logger");
const _supabase = require("../supabase");
const _cachemanager = require("../cache-manager");
const _alertsystem = require("./alert-system");
var MetricType = /*#__PURE__*/ function(MetricType) {
    MetricType["COUNTER"] = "counter";
    MetricType["GAUGE"] = "gauge";
    MetricType["HISTOGRAM"] = "histogram";
    MetricType["TIMER"] = "timer";
    MetricType["RATE"] = "rate"; // Tasa por unidad de tiempo
    return MetricType;
}({});
var BusinessMetricCategory = /*#__PURE__*/ function(BusinessMetricCategory) {
    BusinessMetricCategory["PERFORMANCE"] = "performance";
    BusinessMetricCategory["SECURITY"] = "security";
    BusinessMetricCategory["BUSINESS"] = "business";
    BusinessMetricCategory["INFRASTRUCTURE"] = "infrastructure";
    BusinessMetricCategory["USER_EXPERIENCE"] = "user_experience";
    return BusinessMetricCategory;
}({});
var AlertLevel = /*#__PURE__*/ function(AlertLevel) {
    AlertLevel["INFO"] = "info";
    AlertLevel["WARNING"] = "warning";
    AlertLevel["CRITICAL"] = "critical";
    AlertLevel["EMERGENCY"] = "emergency";
    return AlertLevel;
}({});
class EnterpriseMetricsCollector {
    constructor(){
        this.alertRules = new Map();
        this.activeAlerts = new Map();
        this.metricsBuffer = [];
        this.flushInterval = null;
        this.initializeDefaultAlerts();
        this.startMetricsFlush();
    }
    static getInstance() {
        if (!EnterpriseMetricsCollector.instance) {
            EnterpriseMetricsCollector.instance = new EnterpriseMetricsCollector();
        }
        return EnterpriseMetricsCollector.instance;
    }
    /**
   * Registra una métrica enterprise
   */ async recordMetric(name, value, type = "gauge", category = "performance", tags = {}, metadata) {
        try {
            const metric = {
                id: this.generateMetricId(),
                name,
                type,
                category,
                value,
                timestamp: new Date().toISOString(),
                tags,
                metadata
            };
            // Agregar a buffer para flush batch
            this.metricsBuffer.push(metric);
            // Verificar alertas
            await this.checkAlerts(metric);
            // Log para debugging
            _logger.logger.debug(_logger.LogLevel.DEBUG, `Metric recorded: ${name}`, {
                value,
                type,
                category,
                tags
            }, _logger.LogCategory.SYSTEM);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to record metric: ${name}`, {
                error: error instanceof Error ? error.message : 'Unknown error',
                value,
                type
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Métricas de performance específicas
   */ async recordPerformanceMetric(operation, duration, success, tags = {}) {
        await this.recordMetric(`performance.${operation}.duration`, duration, "timer", "performance", {
            ...tags,
            success: success.toString()
        });
        await this.recordMetric(`performance.${operation}.count`, 1, "counter", "performance", {
            ...tags,
            success: success.toString()
        });
    }
    /**
   * Métricas de negocio específicas
   */ async recordBusinessMetric(event, value = 1, tags = {}) {
        await this.recordMetric(`business.${event}`, value, "counter", "business", tags);
    }
    /**
   * Métricas de seguridad específicas
   */ async recordSecurityMetric(event, severity, tags = {}) {
        await this.recordMetric(`security.${event}`, 1, "counter", "security", {
            ...tags,
            severity
        });
    }
    /**
   * Métricas de experiencia de usuario
   */ async recordUserExperienceMetric(metric, value, userId, tags = {}) {
        await this.recordMetric(`ux.${metric}`, value, "gauge", "user_experience", {
            ...tags,
            userId: userId || 'anonymous'
        });
    }
    /**
   * Configura una regla de alerta
   */ setAlertRule(rule) {
        this.alertRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert rule configured: ${rule.id}`, {
            metricName: rule.metricName,
            threshold: rule.threshold,
            level: rule.level
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Verifica alertas para una métrica
   */ async checkAlerts(metric) {
        for (const rule of this.alertRules.values()){
            if (!rule.enabled || rule.metricName !== metric.name) {
                continue;
            }
            // Verificar si ya hay una alerta activa en cooldown
            const existingAlert = Array.from(this.activeAlerts.values()).find((alert)=>alert.ruleId === rule.id && !alert.resolvedAt);
            if (existingAlert) {
                const cooldownEnd = new Date(existingAlert.triggeredAt);
                cooldownEnd.setMinutes(cooldownEnd.getMinutes() + rule.cooldownMinutes);
                if (new Date() < cooldownEnd) {
                    continue; // Aún en cooldown
                }
            }
            // Evaluar condición
            const triggered = this.evaluateCondition(metric.value, rule.condition, rule.threshold);
            if (triggered) {
                await this.triggerAlert(rule, metric);
            }
        }
    }
    /**
   * Evalúa condición de alerta
   */ evaluateCondition(value, condition, threshold) {
        switch(condition){
            case 'gt':
                return value > threshold;
            case 'gte':
                return value >= threshold;
            case 'lt':
                return value < threshold;
            case 'lte':
                return value <= threshold;
            case 'eq':
                return value === threshold;
            default:
                return false;
        }
    }
    /**
   * Dispara una alerta usando el sistema enterprise
   */ async triggerAlert(rule, metric) {
        // Convertir nivel de alerta al sistema enterprise
        const alertLevel = this.convertToAlertSystemLevel(rule.level);
        // Usar el sistema de alertas enterprise
        const alert = await _alertsystem.enterpriseAlertSystem.triggerAlert(rule.id, rule.metricName, metric.value, `${rule.description} - Value: ${metric.value}, Threshold: ${rule.threshold}`);
        if (alert) {
            // Mantener referencia local para compatibilidad
            const localAlert = {
                id: alert.id,
                ruleId: alert.ruleId,
                metricName: alert.metricName,
                level: rule.level,
                message: alert.message,
                value: alert.value,
                threshold: alert.threshold,
                triggeredAt: alert.triggeredAt,
                metadata: {
                    metric: metric,
                    rule: rule
                }
            };
            this.activeAlerts.set(alert.id, localAlert);
            // Log alerta
            _logger.logger.warn(_logger.LogLevel.WARN, `Alert triggered via enterprise system: ${rule.id}`, {
                alertId: alert.id,
                level: alert.level,
                metricName: alert.metricName,
                value: alert.value,
                threshold: alert.threshold
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Ejecuta acción de alerta
   */ async executeAlertAction(action, alert) {
        try {
            switch(action.type){
                case 'log':
                    _logger.logger.error(_logger.LogLevel.ERROR, `ALERT: ${alert.message}`, {
                        alertId: alert.id,
                        level: alert.level
                    }, _logger.LogCategory.SYSTEM);
                    break;
                case 'webhook':
                    if (action.config.url) {
                        await fetch(action.config.url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(alert)
                        });
                    }
                    break;
                case 'email':
                    // TODO: Implementar envío de email
                    _logger.logger.info(_logger.LogLevel.INFO, `Email alert would be sent to: ${action.config.to}`, {
                        alertId: alert.id
                    }, _logger.LogCategory.SYSTEM);
                    break;
                case 'slack':
                    // TODO: Implementar notificación Slack
                    _logger.logger.info(_logger.LogLevel.INFO, `Slack alert would be sent to: ${action.config.channel}`, {
                        alertId: alert.id
                    }, _logger.LogCategory.SYSTEM);
                    break;
            }
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to execute alert action: ${action.type}`, {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Obtiene métricas agregadas
   */ async getAggregatedMetrics(metricName, period, startTime, endTime) {
        const cacheKey = `metrics:aggregated:${metricName}:${period}:${startTime}:${endTime}`;
        return _cachemanager.CacheUtils.cacheMetricsAggregation(cacheKey, async ()=>{
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) {
                throw new Error('Supabase client not available');
            }
            // Query con agregación SQL
            const { data, error } = await supabase.rpc('aggregate_metrics', {
                metric_name: metricName,
                period_interval: period,
                start_time: startTime,
                end_time: endTime
            });
            if (error) {
                throw new Error(`Failed to aggregate metrics: ${error.message}`);
            }
            return data || [];
        });
    }
    /**
   * Flush métricas a base de datos
   */ async flushMetrics() {
        if (this.metricsBuffer.length === 0) {
            return;
        }
        try {
            const metrics = [
                ...this.metricsBuffer
            ];
            this.metricsBuffer = [];
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) {
                _logger.logger.error(_logger.LogLevel.ERROR, 'Supabase client not available for metrics flush', {}, _logger.LogCategory.SYSTEM);
                return;
            }
            const { error } = await supabase.from('enterprise_metrics').insert(metrics.map((metric)=>({
                    id: metric.id,
                    name: metric.name,
                    type: metric.type,
                    category: metric.category,
                    value: metric.value,
                    timestamp: metric.timestamp,
                    tags: metric.tags,
                    metadata: metric.metadata
                })));
            if (error) {
                _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to flush metrics to database', {
                    error: error.message,
                    metricsCount: metrics.length
                }, _logger.LogCategory.SYSTEM);
            } else {
                _logger.logger.debug(_logger.LogLevel.DEBUG, `Flushed ${metrics.length} metrics to database`, {}, _logger.LogCategory.SYSTEM);
            }
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Error during metrics flush', {
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Inicializa alertas por defecto
   */ initializeDefaultAlerts() {
        // Alerta de response time alto
        this.setAlertRule({
            id: 'high_response_time',
            metricName: 'performance.api.duration',
            condition: 'gt',
            threshold: 5000,
            level: "warning",
            enabled: true,
            cooldownMinutes: 5,
            description: 'API response time is too high',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
        // Alerta de error rate alto
        this.setAlertRule({
            id: 'high_error_rate',
            metricName: 'performance.api.error_rate',
            condition: 'gt',
            threshold: 0.05,
            level: "critical",
            enabled: true,
            cooldownMinutes: 2,
            description: 'API error rate is too high',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
        // Alerta de violaciones de seguridad
        this.setAlertRule({
            id: 'security_violations',
            metricName: 'security.violation',
            condition: 'gte',
            threshold: 1,
            level: "emergency",
            enabled: true,
            cooldownMinutes: 1,
            description: 'Security violation detected',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
    }
    /**
   * Inicia flush automático de métricas
   */ startMetricsFlush() {
        this.flushInterval = setInterval(()=>{
            this.flushMetrics();
        }, 30000); // Flush cada 30 segundos
    }
    /**
   * Almacena alerta en base de datos
   */ async storeAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').insert({
                id: alert.id,
                rule_id: alert.ruleId,
                metric_name: alert.metricName,
                level: alert.level,
                message: alert.message,
                value: alert.value,
                threshold: alert.threshold,
                triggered_at: alert.triggeredAt,
                resolved_at: alert.resolvedAt,
                metadata: alert.metadata
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to store alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Genera ID único para métrica
   */ generateMetricId() {
        return `metric_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
   * Convierte nivel de alerta al sistema enterprise
   */ convertToAlertSystemLevel(level) {
        switch(level){
            case "info":
                return _alertsystem.AlertLevel.INFO;
            case "warning":
                return _alertsystem.AlertLevel.WARNING;
            case "critical":
                return _alertsystem.AlertLevel.CRITICAL;
            case "emergency":
                return _alertsystem.AlertLevel.EMERGENCY;
            default:
                return _alertsystem.AlertLevel.INFO;
        }
    }
    /**
   * Genera ID único para alerta
   */ generateAlertId() {
        return `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
   * Limpia recursos
   */ destroy() {
        if (this.flushInterval) {
            clearInterval(this.flushInterval);
            this.flushInterval = null;
        }
        this.flushMetrics(); // Flush final
    }
}
const enterpriseMetrics = EnterpriseMetricsCollector.getInstance();
const recordPerformanceMetric = enterpriseMetrics.recordPerformanceMetric.bind(enterpriseMetrics);
const recordBusinessMetric = enterpriseMetrics.recordBusinessMetric.bind(enterpriseMetrics);
const recordSecurityMetric = enterpriseMetrics.recordSecurityMetric.bind(enterpriseMetrics);
const recordUserExperienceMetric = enterpriseMetrics.recordUserExperienceMetric.bind(enterpriseMetrics);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxlbnRlcnByaXNlLW1ldHJpY3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEVOVEVSUFJJU0UgTUVUUklDUyBTWVNURU1cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IGxvZ2dlciwgTG9nTGV2ZWwsIExvZ0NhdGVnb3J5IH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcbmltcG9ydCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuaW1wb3J0IHsgQ2FjaGVVdGlscyB9IGZyb20gJ0AvbGliL2NhY2hlLW1hbmFnZXInO1xuaW1wb3J0IHsgZW50ZXJwcmlzZUFsZXJ0U3lzdGVtLCBBbGVydExldmVsIGFzIEFsZXJ0U3lzdGVtTGV2ZWwgfSBmcm9tICcuL2FsZXJ0LXN5c3RlbSc7XG5cbi8vIFRpcG9zIGRlIG3DqXRyaWNhcyBlbnRlcnByaXNlXG5leHBvcnQgZW51bSBNZXRyaWNUeXBlIHtcbiAgQ09VTlRFUiA9ICdjb3VudGVyJywgICAgICAgICAgIC8vIENvbnRhZG9yIGluY3JlbWVudGFsXG4gIEdBVUdFID0gJ2dhdWdlJywgICAgICAgICAgICAgIC8vIFZhbG9yIGFjdHVhbFxuICBISVNUT0dSQU0gPSAnaGlzdG9ncmFtJywgICAgICAgLy8gRGlzdHJpYnVjacOzbiBkZSB2YWxvcmVzXG4gIFRJTUVSID0gJ3RpbWVyJywgICAgICAgICAgICAgIC8vIE1lZGljacOzbiBkZSB0aWVtcG9cbiAgUkFURSA9ICdyYXRlJyAgICAgICAgICAgICAgICAgLy8gVGFzYSBwb3IgdW5pZGFkIGRlIHRpZW1wb1xufVxuXG4vLyBDYXRlZ29yw61hcyBkZSBtw6l0cmljYXMgZGUgbmVnb2Npb1xuZXhwb3J0IGVudW0gQnVzaW5lc3NNZXRyaWNDYXRlZ29yeSB7XG4gIFBFUkZPUk1BTkNFID0gJ3BlcmZvcm1hbmNlJyxcbiAgU0VDVVJJVFkgPSAnc2VjdXJpdHknLFxuICBCVVNJTkVTUyA9ICdidXNpbmVzcycsXG4gIElORlJBU1RSVUNUVVJFID0gJ2luZnJhc3RydWN0dXJlJyxcbiAgVVNFUl9FWFBFUklFTkNFID0gJ3VzZXJfZXhwZXJpZW5jZSdcbn1cblxuLy8gTml2ZWxlcyBkZSBhbGVydGFcbmV4cG9ydCBlbnVtIEFsZXJ0TGV2ZWwge1xuICBJTkZPID0gJ2luZm8nLFxuICBXQVJOSU5HID0gJ3dhcm5pbmcnLFxuICBDUklUSUNBTCA9ICdjcml0aWNhbCcsXG4gIEVNRVJHRU5DWSA9ICdlbWVyZ2VuY3knXG59XG5cbi8vIE3DqXRyaWNhIGVudGVycHJpc2VcbmV4cG9ydCBpbnRlcmZhY2UgRW50ZXJwcmlzZU1ldHJpYyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogTWV0cmljVHlwZTtcbiAgY2F0ZWdvcnk6IEJ1c2luZXNzTWV0cmljQ2F0ZWdvcnk7XG4gIHZhbHVlOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICB0YWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGFnZ3JlZ2F0aW9uUGVyaW9kPzogc3RyaW5nOyAvLyAnMW0nLCAnNW0nLCAnMWgnLCAnMWQnXG59XG5cbi8vIENvbmZpZ3VyYWNpw7NuIGRlIGFsZXJ0YVxuZXhwb3J0IGludGVyZmFjZSBBbGVydFJ1bGUge1xuICBpZDogc3RyaW5nO1xuICBtZXRyaWNOYW1lOiBzdHJpbmc7XG4gIGNvbmRpdGlvbjogJ2d0JyB8ICdsdCcgfCAnZXEnIHwgJ2d0ZScgfCAnbHRlJztcbiAgdGhyZXNob2xkOiBudW1iZXI7XG4gIGxldmVsOiBBbGVydExldmVsO1xuICBlbmFibGVkOiBib29sZWFuO1xuICBjb29sZG93bk1pbnV0ZXM6IG51bWJlcjtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYWN0aW9uczogQWxlcnRBY3Rpb25bXTtcbn1cblxuLy8gQWNjacOzbiBkZSBhbGVydGFcbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRBY3Rpb24ge1xuICB0eXBlOiAnZW1haWwnIHwgJ3dlYmhvb2snIHwgJ2xvZycgfCAnc2xhY2snO1xuICBjb25maWc6IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vIEFsZXJ0YSBhY3RpdmFcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZlQWxlcnQge1xuICBpZDogc3RyaW5nO1xuICBydWxlSWQ6IHN0cmluZztcbiAgbWV0cmljTmFtZTogc3RyaW5nO1xuICBsZXZlbDogQWxlcnRMZXZlbDtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB2YWx1ZTogbnVtYmVyO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgdHJpZ2dlcmVkQXQ6IHN0cmluZztcbiAgcmVzb2x2ZWRBdD86IHN0cmluZztcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBBZ3JlZ2FjacOzbiB0ZW1wb3JhbFxuZXhwb3J0IGludGVyZmFjZSBNZXRyaWNBZ2dyZWdhdGlvbiB7XG4gIHBlcmlvZDogc3RyaW5nO1xuICBzdGFydFRpbWU6IHN0cmluZztcbiAgZW5kVGltZTogc3RyaW5nO1xuICBjb3VudDogbnVtYmVyO1xuICBzdW06IG51bWJlcjtcbiAgYXZnOiBudW1iZXI7XG4gIG1pbjogbnVtYmVyO1xuICBtYXg6IG51bWJlcjtcbiAgcDUwOiBudW1iZXI7XG4gIHA5NTogbnVtYmVyO1xuICBwOTk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBTaXN0ZW1hIGRlIE3DqXRyaWNhcyBFbnRlcnByaXNlIGNvbiBhZ3JlZ2FjacOzbiB0ZW1wb3JhbCB5IGFsZXJ0YXNcbiAqL1xuZXhwb3J0IGNsYXNzIEVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yO1xuICBwcml2YXRlIGFsZXJ0UnVsZXM6IE1hcDxzdHJpbmcsIEFsZXJ0UnVsZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYWN0aXZlQWxlcnRzOiBNYXA8c3RyaW5nLCBBY3RpdmVBbGVydD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWV0cmljc0J1ZmZlcjogRW50ZXJwcmlzZU1ldHJpY1tdID0gW107XG4gIHByaXZhdGUgZmx1c2hJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0QWxlcnRzKCk7XG4gICAgdGhpcy5zdGFydE1ldHJpY3NGbHVzaCgpO1xuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yIHtcbiAgICBpZiAoIUVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yLmluc3RhbmNlKSB7XG4gICAgICBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3Rvci5pbnN0YW5jZSA9IG5ldyBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3RvcigpO1xuICAgIH1cbiAgICByZXR1cm4gRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3IuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgdW5hIG3DqXRyaWNhIGVudGVycHJpc2VcbiAgICovXG4gIGFzeW5jIHJlY29yZE1ldHJpYyhcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgdmFsdWU6IG51bWJlcixcbiAgICB0eXBlOiBNZXRyaWNUeXBlID0gTWV0cmljVHlwZS5HQVVHRSxcbiAgICBjYXRlZ29yeTogQnVzaW5lc3NNZXRyaWNDYXRlZ29yeSA9IEJ1c2luZXNzTWV0cmljQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsXG4gICAgdGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9LFxuICAgIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWV0cmljOiBFbnRlcnByaXNlTWV0cmljID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZU1ldHJpY0lkKCksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHRhZ3MsXG4gICAgICAgIG1ldGFkYXRhXG4gICAgICB9O1xuXG4gICAgICAvLyBBZ3JlZ2FyIGEgYnVmZmVyIHBhcmEgZmx1c2ggYmF0Y2hcbiAgICAgIHRoaXMubWV0cmljc0J1ZmZlci5wdXNoKG1ldHJpYyk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBhbGVydGFzXG4gICAgICBhd2FpdCB0aGlzLmNoZWNrQWxlcnRzKG1ldHJpYyk7XG5cbiAgICAgIC8vIExvZyBwYXJhIGRlYnVnZ2luZ1xuICAgICAgbG9nZ2VyLmRlYnVnKExvZ0xldmVsLkRFQlVHLCBgTWV0cmljIHJlY29yZGVkOiAke25hbWV9YCwge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHRhZ3NcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCBgRmFpbGVkIHRvIHJlY29yZCBtZXRyaWM6ICR7bmFtZX1gLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHR5cGVcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE3DqXRyaWNhcyBkZSBwZXJmb3JtYW5jZSBlc3BlY8OtZmljYXNcbiAgICovXG4gIGFzeW5jIHJlY29yZFBlcmZvcm1hbmNlTWV0cmljKFxuICAgIG9wZXJhdGlvbjogc3RyaW5nLFxuICAgIGR1cmF0aW9uOiBudW1iZXIsXG4gICAgc3VjY2VzczogYm9vbGVhbixcbiAgICB0YWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5yZWNvcmRNZXRyaWMoXG4gICAgICBgcGVyZm9ybWFuY2UuJHtvcGVyYXRpb259LmR1cmF0aW9uYCxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgTWV0cmljVHlwZS5USU1FUixcbiAgICAgIEJ1c2luZXNzTWV0cmljQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsXG4gICAgICB7IC4uLnRhZ3MsIHN1Y2Nlc3M6IHN1Y2Nlc3MudG9TdHJpbmcoKSB9XG4gICAgKTtcblxuICAgIGF3YWl0IHRoaXMucmVjb3JkTWV0cmljKFxuICAgICAgYHBlcmZvcm1hbmNlLiR7b3BlcmF0aW9ufS5jb3VudGAsXG4gICAgICAxLFxuICAgICAgTWV0cmljVHlwZS5DT1VOVEVSLFxuICAgICAgQnVzaW5lc3NNZXRyaWNDYXRlZ29yeS5QRVJGT1JNQU5DRSxcbiAgICAgIHsgLi4udGFncywgc3VjY2Vzczogc3VjY2Vzcy50b1N0cmluZygpIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE3DqXRyaWNhcyBkZSBuZWdvY2lvIGVzcGVjw61maWNhc1xuICAgKi9cbiAgYXN5bmMgcmVjb3JkQnVzaW5lc3NNZXRyaWMoXG4gICAgZXZlbnQ6IHN0cmluZyxcbiAgICB2YWx1ZTogbnVtYmVyID0gMSxcbiAgICB0YWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5yZWNvcmRNZXRyaWMoXG4gICAgICBgYnVzaW5lc3MuJHtldmVudH1gLFxuICAgICAgdmFsdWUsXG4gICAgICBNZXRyaWNUeXBlLkNPVU5URVIsXG4gICAgICBCdXNpbmVzc01ldHJpY0NhdGVnb3J5LkJVU0lORVNTLFxuICAgICAgdGFnc1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTcOpdHJpY2FzIGRlIHNlZ3VyaWRhZCBlc3BlY8OtZmljYXNcbiAgICovXG4gIGFzeW5jIHJlY29yZFNlY3VyaXR5TWV0cmljKFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnLFxuICAgIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnJlY29yZE1ldHJpYyhcbiAgICAgIGBzZWN1cml0eS4ke2V2ZW50fWAsXG4gICAgICAxLFxuICAgICAgTWV0cmljVHlwZS5DT1VOVEVSLFxuICAgICAgQnVzaW5lc3NNZXRyaWNDYXRlZ29yeS5TRUNVUklUWSxcbiAgICAgIHsgLi4udGFncywgc2V2ZXJpdHkgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTcOpdHJpY2FzIGRlIGV4cGVyaWVuY2lhIGRlIHVzdWFyaW9cbiAgICovXG4gIGFzeW5jIHJlY29yZFVzZXJFeHBlcmllbmNlTWV0cmljKFxuICAgIG1ldHJpYzogc3RyaW5nLFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgdXNlcklkPzogc3RyaW5nLFxuICAgIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnJlY29yZE1ldHJpYyhcbiAgICAgIGB1eC4ke21ldHJpY31gLFxuICAgICAgdmFsdWUsXG4gICAgICBNZXRyaWNUeXBlLkdBVUdFLFxuICAgICAgQnVzaW5lc3NNZXRyaWNDYXRlZ29yeS5VU0VSX0VYUEVSSUVOQ0UsXG4gICAgICB7IC4uLnRhZ3MsIHVzZXJJZDogdXNlcklkIHx8ICdhbm9ueW1vdXMnIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYSB1bmEgcmVnbGEgZGUgYWxlcnRhXG4gICAqL1xuICBzZXRBbGVydFJ1bGUocnVsZTogQWxlcnRSdWxlKTogdm9pZCB7XG4gICAgdGhpcy5hbGVydFJ1bGVzLnNldChydWxlLmlkLCBydWxlKTtcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgQWxlcnQgcnVsZSBjb25maWd1cmVkOiAke3J1bGUuaWR9YCwge1xuICAgICAgbWV0cmljTmFtZTogcnVsZS5tZXRyaWNOYW1lLFxuICAgICAgdGhyZXNob2xkOiBydWxlLnRocmVzaG9sZCxcbiAgICAgIGxldmVsOiBydWxlLmxldmVsXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBhbGVydGFzIHBhcmEgdW5hIG3DqXRyaWNhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNoZWNrQWxlcnRzKG1ldHJpYzogRW50ZXJwcmlzZU1ldHJpYyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLmFsZXJ0UnVsZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmICghcnVsZS5lbmFibGVkIHx8IHJ1bGUubWV0cmljTmFtZSAhPT0gbWV0cmljLm5hbWUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmaWNhciBzaSB5YSBoYXkgdW5hIGFsZXJ0YSBhY3RpdmEgZW4gY29vbGRvd25cbiAgICAgIGNvbnN0IGV4aXN0aW5nQWxlcnQgPSBBcnJheS5mcm9tKHRoaXMuYWN0aXZlQWxlcnRzLnZhbHVlcygpKVxuICAgICAgICAuZmluZChhbGVydCA9PiBhbGVydC5ydWxlSWQgPT09IHJ1bGUuaWQgJiYgIWFsZXJ0LnJlc29sdmVkQXQpO1xuXG4gICAgICBpZiAoZXhpc3RpbmdBbGVydCkge1xuICAgICAgICBjb25zdCBjb29sZG93bkVuZCA9IG5ldyBEYXRlKGV4aXN0aW5nQWxlcnQudHJpZ2dlcmVkQXQpO1xuICAgICAgICBjb29sZG93bkVuZC5zZXRNaW51dGVzKGNvb2xkb3duRW5kLmdldE1pbnV0ZXMoKSArIHJ1bGUuY29vbGRvd25NaW51dGVzKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXcgRGF0ZSgpIDwgY29vbGRvd25FbmQpIHtcbiAgICAgICAgICBjb250aW51ZTsgLy8gQcO6biBlbiBjb29sZG93blxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEV2YWx1YXIgY29uZGljacOzblxuICAgICAgY29uc3QgdHJpZ2dlcmVkID0gdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihtZXRyaWMudmFsdWUsIHJ1bGUuY29uZGl0aW9uLCBydWxlLnRocmVzaG9sZCk7XG5cbiAgICAgIGlmICh0cmlnZ2VyZWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VyQWxlcnQocnVsZSwgbWV0cmljKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXZhbMO6YSBjb25kaWNpw7NuIGRlIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBldmFsdWF0ZUNvbmRpdGlvbih2YWx1ZTogbnVtYmVyLCBjb25kaXRpb246IHN0cmluZywgdGhyZXNob2xkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBzd2l0Y2ggKGNvbmRpdGlvbikge1xuICAgICAgY2FzZSAnZ3QnOiByZXR1cm4gdmFsdWUgPiB0aHJlc2hvbGQ7XG4gICAgICBjYXNlICdndGUnOiByZXR1cm4gdmFsdWUgPj0gdGhyZXNob2xkO1xuICAgICAgY2FzZSAnbHQnOiByZXR1cm4gdmFsdWUgPCB0aHJlc2hvbGQ7XG4gICAgICBjYXNlICdsdGUnOiByZXR1cm4gdmFsdWUgPD0gdGhyZXNob2xkO1xuICAgICAgY2FzZSAnZXEnOiByZXR1cm4gdmFsdWUgPT09IHRocmVzaG9sZDtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGFyYSB1bmEgYWxlcnRhIHVzYW5kbyBlbCBzaXN0ZW1hIGVudGVycHJpc2VcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdHJpZ2dlckFsZXJ0KHJ1bGU6IEFsZXJ0UnVsZSwgbWV0cmljOiBFbnRlcnByaXNlTWV0cmljKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ29udmVydGlyIG5pdmVsIGRlIGFsZXJ0YSBhbCBzaXN0ZW1hIGVudGVycHJpc2VcbiAgICBjb25zdCBhbGVydExldmVsID0gdGhpcy5jb252ZXJ0VG9BbGVydFN5c3RlbUxldmVsKHJ1bGUubGV2ZWwpO1xuXG4gICAgLy8gVXNhciBlbCBzaXN0ZW1hIGRlIGFsZXJ0YXMgZW50ZXJwcmlzZVxuICAgIGNvbnN0IGFsZXJ0ID0gYXdhaXQgZW50ZXJwcmlzZUFsZXJ0U3lzdGVtLnRyaWdnZXJBbGVydChcbiAgICAgIHJ1bGUuaWQsXG4gICAgICBydWxlLm1ldHJpY05hbWUsXG4gICAgICBtZXRyaWMudmFsdWUsXG4gICAgICBgJHtydWxlLmRlc2NyaXB0aW9ufSAtIFZhbHVlOiAke21ldHJpYy52YWx1ZX0sIFRocmVzaG9sZDogJHtydWxlLnRocmVzaG9sZH1gXG4gICAgKTtcblxuICAgIGlmIChhbGVydCkge1xuICAgICAgLy8gTWFudGVuZXIgcmVmZXJlbmNpYSBsb2NhbCBwYXJhIGNvbXBhdGliaWxpZGFkXG4gICAgICBjb25zdCBsb2NhbEFsZXJ0OiBBY3RpdmVBbGVydCA9IHtcbiAgICAgICAgaWQ6IGFsZXJ0LmlkLFxuICAgICAgICBydWxlSWQ6IGFsZXJ0LnJ1bGVJZCxcbiAgICAgICAgbWV0cmljTmFtZTogYWxlcnQubWV0cmljTmFtZSxcbiAgICAgICAgbGV2ZWw6IHJ1bGUubGV2ZWwsXG4gICAgICAgIG1lc3NhZ2U6IGFsZXJ0Lm1lc3NhZ2UsXG4gICAgICAgIHZhbHVlOiBhbGVydC52YWx1ZSxcbiAgICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGQsXG4gICAgICAgIHRyaWdnZXJlZEF0OiBhbGVydC50cmlnZ2VyZWRBdCxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgICAgICBydWxlOiBydWxlXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuYWN0aXZlQWxlcnRzLnNldChhbGVydC5pZCwgbG9jYWxBbGVydCk7XG5cbiAgICAgIC8vIExvZyBhbGVydGFcbiAgICAgIGxvZ2dlci53YXJuKExvZ0xldmVsLldBUk4sIGBBbGVydCB0cmlnZ2VyZWQgdmlhIGVudGVycHJpc2Ugc3lzdGVtOiAke3J1bGUuaWR9YCwge1xuICAgICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgICAgbGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgICBtZXRyaWNOYW1lOiBhbGVydC5tZXRyaWNOYW1lLFxuICAgICAgICB2YWx1ZTogYWxlcnQudmFsdWUsXG4gICAgICAgIHRocmVzaG9sZDogYWxlcnQudGhyZXNob2xkXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFamVjdXRhIGFjY2nDs24gZGUgYWxlcnRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBbGVydEFjdGlvbihhY3Rpb246IEFsZXJ0QWN0aW9uLCBhbGVydDogQWN0aXZlQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdsb2cnOlxuICAgICAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgYEFMRVJUOiAke2FsZXJ0Lm1lc3NhZ2V9YCwge1xuICAgICAgICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICAgICAgICBsZXZlbDogYWxlcnQubGV2ZWxcbiAgICAgICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3dlYmhvb2snOlxuICAgICAgICAgIGlmIChhY3Rpb24uY29uZmlnLnVybCkge1xuICAgICAgICAgICAgYXdhaXQgZmV0Y2goYWN0aW9uLmNvbmZpZy51cmwsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhbGVydClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50YXIgZW52w61vIGRlIGVtYWlsXG4gICAgICAgICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgYEVtYWlsIGFsZXJ0IHdvdWxkIGJlIHNlbnQgdG86ICR7YWN0aW9uLmNvbmZpZy50b31gLCB7XG4gICAgICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnc2xhY2snOlxuICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudGFyIG5vdGlmaWNhY2nDs24gU2xhY2tcbiAgICAgICAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgU2xhY2sgYWxlcnQgd291bGQgYmUgc2VudCB0bzogJHthY3Rpb24uY29uZmlnLmNoYW5uZWx9YCwge1xuICAgICAgICAgICAgYWxlcnRJZDogYWxlcnQuaWRcbiAgICAgICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsIGBGYWlsZWQgdG8gZXhlY3V0ZSBhbGVydCBhY3Rpb246ICR7YWN0aW9uLnR5cGV9YCwge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRpZW5lIG3DqXRyaWNhcyBhZ3JlZ2FkYXNcbiAgICovXG4gIGFzeW5jIGdldEFnZ3JlZ2F0ZWRNZXRyaWNzKFxuICAgIG1ldHJpY05hbWU6IHN0cmluZyxcbiAgICBwZXJpb2Q6ICcxbScgfCAnNW0nIHwgJzFoJyB8ICcxZCcgfCAnN2QnLFxuICAgIHN0YXJ0VGltZTogc3RyaW5nLFxuICAgIGVuZFRpbWU6IHN0cmluZ1xuICApOiBQcm9taXNlPE1ldHJpY0FnZ3JlZ2F0aW9uW10+IHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGBtZXRyaWNzOmFnZ3JlZ2F0ZWQ6JHttZXRyaWNOYW1lfToke3BlcmlvZH06JHtzdGFydFRpbWV9OiR7ZW5kVGltZX1gO1xuICAgIFxuICAgIHJldHVybiBDYWNoZVV0aWxzLmNhY2hlTWV0cmljc0FnZ3JlZ2F0aW9uKGNhY2hlS2V5LCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KHRydWUpO1xuICAgICAgXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIH1cblxuICAgICAgLy8gUXVlcnkgY29uIGFncmVnYWNpw7NuIFNRTFxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdhZ2dyZWdhdGVfbWV0cmljcycsIHtcbiAgICAgICAgbWV0cmljX25hbWU6IG1ldHJpY05hbWUsXG4gICAgICAgIHBlcmlvZF9pbnRlcnZhbDogcGVyaW9kLFxuICAgICAgICBzdGFydF90aW1lOiBzdGFydFRpbWUsXG4gICAgICAgIGVuZF90aW1lOiBlbmRUaW1lXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFnZ3JlZ2F0ZSBtZXRyaWNzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIG3DqXRyaWNhcyBhIGJhc2UgZGUgZGF0b3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmx1c2hNZXRyaWNzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1ldHJpY3NCdWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBbLi4udGhpcy5tZXRyaWNzQnVmZmVyXTtcbiAgICAgIHRoaXMubWV0cmljc0J1ZmZlciA9IFtdO1xuXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KHRydWUpO1xuICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdTdXBhYmFzZSBjbGllbnQgbm90IGF2YWlsYWJsZSBmb3IgbWV0cmljcyBmbHVzaCcsIHt9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdlbnRlcnByaXNlX21ldHJpY3MnKVxuICAgICAgICAuaW5zZXJ0KG1ldHJpY3MubWFwKG1ldHJpYyA9PiAoe1xuICAgICAgICAgIGlkOiBtZXRyaWMuaWQsXG4gICAgICAgICAgbmFtZTogbWV0cmljLm5hbWUsXG4gICAgICAgICAgdHlwZTogbWV0cmljLnR5cGUsXG4gICAgICAgICAgY2F0ZWdvcnk6IG1ldHJpYy5jYXRlZ29yeSxcbiAgICAgICAgICB2YWx1ZTogbWV0cmljLnZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbWV0cmljLnRpbWVzdGFtcCxcbiAgICAgICAgICB0YWdzOiBtZXRyaWMudGFncyxcbiAgICAgICAgICBtZXRhZGF0YTogbWV0cmljLm1ldGFkYXRhXG4gICAgICAgIH0pKSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gZmx1c2ggbWV0cmljcyB0byBkYXRhYmFzZScsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBtZXRyaWNzQ291bnQ6IG1ldHJpY3MubGVuZ3RoXG4gICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIuZGVidWcoTG9nTGV2ZWwuREVCVUcsIGBGbHVzaGVkICR7bWV0cmljcy5sZW5ndGh9IG1ldHJpY3MgdG8gZGF0YWJhc2VgLCB7fSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdFcnJvciBkdXJpbmcgbWV0cmljcyBmbHVzaCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIGFsZXJ0YXMgcG9yIGRlZmVjdG9cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRBbGVydHMoKTogdm9pZCB7XG4gICAgLy8gQWxlcnRhIGRlIHJlc3BvbnNlIHRpbWUgYWx0b1xuICAgIHRoaXMuc2V0QWxlcnRSdWxlKHtcbiAgICAgIGlkOiAnaGlnaF9yZXNwb25zZV90aW1lJyxcbiAgICAgIG1ldHJpY05hbWU6ICdwZXJmb3JtYW5jZS5hcGkuZHVyYXRpb24nLFxuICAgICAgY29uZGl0aW9uOiAnZ3QnLFxuICAgICAgdGhyZXNob2xkOiA1MDAwLCAvLyA1IHNlZ3VuZG9zXG4gICAgICBsZXZlbDogQWxlcnRMZXZlbC5XQVJOSU5HLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGNvb2xkb3duTWludXRlczogNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQVBJIHJlc3BvbnNlIHRpbWUgaXMgdG9vIGhpZ2gnLFxuICAgICAgYWN0aW9uczogW3sgdHlwZTogJ2xvZycsIGNvbmZpZzoge30gfV1cbiAgICB9KTtcblxuICAgIC8vIEFsZXJ0YSBkZSBlcnJvciByYXRlIGFsdG9cbiAgICB0aGlzLnNldEFsZXJ0UnVsZSh7XG4gICAgICBpZDogJ2hpZ2hfZXJyb3JfcmF0ZScsXG4gICAgICBtZXRyaWNOYW1lOiAncGVyZm9ybWFuY2UuYXBpLmVycm9yX3JhdGUnLFxuICAgICAgY29uZGl0aW9uOiAnZ3QnLFxuICAgICAgdGhyZXNob2xkOiAwLjA1LCAvLyA1JVxuICAgICAgbGV2ZWw6IEFsZXJ0TGV2ZWwuQ1JJVElDQUwsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgY29vbGRvd25NaW51dGVzOiAyLFxuICAgICAgZGVzY3JpcHRpb246ICdBUEkgZXJyb3IgcmF0ZSBpcyB0b28gaGlnaCcsXG4gICAgICBhY3Rpb25zOiBbeyB0eXBlOiAnbG9nJywgY29uZmlnOiB7fSB9XVxuICAgIH0pO1xuXG4gICAgLy8gQWxlcnRhIGRlIHZpb2xhY2lvbmVzIGRlIHNlZ3VyaWRhZFxuICAgIHRoaXMuc2V0QWxlcnRSdWxlKHtcbiAgICAgIGlkOiAnc2VjdXJpdHlfdmlvbGF0aW9ucycsXG4gICAgICBtZXRyaWNOYW1lOiAnc2VjdXJpdHkudmlvbGF0aW9uJyxcbiAgICAgIGNvbmRpdGlvbjogJ2d0ZScsXG4gICAgICB0aHJlc2hvbGQ6IDEsXG4gICAgICBsZXZlbDogQWxlcnRMZXZlbC5FTUVSR0VOQ1ksXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgY29vbGRvd25NaW51dGVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTZWN1cml0eSB2aW9sYXRpb24gZGV0ZWN0ZWQnLFxuICAgICAgYWN0aW9uczogW3sgdHlwZTogJ2xvZycsIGNvbmZpZzoge30gfV1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWEgZmx1c2ggYXV0b23DoXRpY28gZGUgbcOpdHJpY2FzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0TWV0cmljc0ZsdXNoKCk6IHZvaWQge1xuICAgIHRoaXMuZmx1c2hJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuZmx1c2hNZXRyaWNzKCk7XG4gICAgfSwgMzAwMDApOyAvLyBGbHVzaCBjYWRhIDMwIHNlZ3VuZG9zXG4gIH1cblxuICAvKipcbiAgICogQWxtYWNlbmEgYWxlcnRhIGVuIGJhc2UgZGUgZGF0b3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVBbGVydChhbGVydDogQWN0aXZlQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCh0cnVlKTtcbiAgICAgIGlmICghc3VwYWJhc2UpIHJldHVybjtcblxuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZW50ZXJwcmlzZV9hbGVydHMnKS5pbnNlcnQoe1xuICAgICAgICBpZDogYWxlcnQuaWQsXG4gICAgICAgIHJ1bGVfaWQ6IGFsZXJ0LnJ1bGVJZCxcbiAgICAgICAgbWV0cmljX25hbWU6IGFsZXJ0Lm1ldHJpY05hbWUsXG4gICAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgdmFsdWU6IGFsZXJ0LnZhbHVlLFxuICAgICAgICB0aHJlc2hvbGQ6IGFsZXJ0LnRocmVzaG9sZCxcbiAgICAgICAgdHJpZ2dlcmVkX2F0OiBhbGVydC50cmlnZ2VyZWRBdCxcbiAgICAgICAgcmVzb2x2ZWRfYXQ6IGFsZXJ0LnJlc29sdmVkQXQsXG4gICAgICAgIG1ldGFkYXRhOiBhbGVydC5tZXRhZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgJ0ZhaWxlZCB0byBzdG9yZSBhbGVydCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhIElEIMO6bmljbyBwYXJhIG3DqXRyaWNhXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTWV0cmljSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG1ldHJpY18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29udmllcnRlIG5pdmVsIGRlIGFsZXJ0YSBhbCBzaXN0ZW1hIGVudGVycHJpc2VcbiAgICovXG4gIHByaXZhdGUgY29udmVydFRvQWxlcnRTeXN0ZW1MZXZlbChsZXZlbDogQWxlcnRMZXZlbCk6IEFsZXJ0U3lzdGVtTGV2ZWwge1xuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgQWxlcnRMZXZlbC5JTkZPOlxuICAgICAgICByZXR1cm4gQWxlcnRTeXN0ZW1MZXZlbC5JTkZPO1xuICAgICAgY2FzZSBBbGVydExldmVsLldBUk5JTkc6XG4gICAgICAgIHJldHVybiBBbGVydFN5c3RlbUxldmVsLldBUk5JTkc7XG4gICAgICBjYXNlIEFsZXJ0TGV2ZWwuQ1JJVElDQUw6XG4gICAgICAgIHJldHVybiBBbGVydFN5c3RlbUxldmVsLkNSSVRJQ0FMO1xuICAgICAgY2FzZSBBbGVydExldmVsLkVNRVJHRU5DWTpcbiAgICAgICAgcmV0dXJuIEFsZXJ0U3lzdGVtTGV2ZWwuRU1FUkdFTkNZO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEFsZXJ0U3lzdGVtTGV2ZWwuSU5GTztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhIElEIMO6bmljbyBwYXJhIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUFsZXJ0SWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGFsZXJ0XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW1waWEgcmVjdXJzb3NcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmx1c2hJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmZsdXNoSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5mbHVzaEludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5mbHVzaE1ldHJpY3MoKTsgLy8gRmx1c2ggZmluYWxcbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgc2luZ2xldG9uXG5leHBvcnQgY29uc3QgZW50ZXJwcmlzZU1ldHJpY3MgPSBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3Rvci5nZXRJbnN0YW5jZSgpO1xuXG4vLyBGdW5jaW9uZXMgZGUgY29udmVuaWVuY2lhXG5leHBvcnQgY29uc3QgcmVjb3JkUGVyZm9ybWFuY2VNZXRyaWMgPSBlbnRlcnByaXNlTWV0cmljcy5yZWNvcmRQZXJmb3JtYW5jZU1ldHJpYy5iaW5kKGVudGVycHJpc2VNZXRyaWNzKTtcbmV4cG9ydCBjb25zdCByZWNvcmRCdXNpbmVzc01ldHJpYyA9IGVudGVycHJpc2VNZXRyaWNzLnJlY29yZEJ1c2luZXNzTWV0cmljLmJpbmQoZW50ZXJwcmlzZU1ldHJpY3MpO1xuZXhwb3J0IGNvbnN0IHJlY29yZFNlY3VyaXR5TWV0cmljID0gZW50ZXJwcmlzZU1ldHJpY3MucmVjb3JkU2VjdXJpdHlNZXRyaWMuYmluZChlbnRlcnByaXNlTWV0cmljcyk7XG5leHBvcnQgY29uc3QgcmVjb3JkVXNlckV4cGVyaWVuY2VNZXRyaWMgPSBlbnRlcnByaXNlTWV0cmljcy5yZWNvcmRVc2VyRXhwZXJpZW5jZU1ldHJpYy5iaW5kKGVudGVycHJpc2VNZXRyaWNzKTtcbiJdLCJuYW1lcyI6WyJBbGVydExldmVsIiwiQnVzaW5lc3NNZXRyaWNDYXRlZ29yeSIsIkVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yIiwiTWV0cmljVHlwZSIsImVudGVycHJpc2VNZXRyaWNzIiwicmVjb3JkQnVzaW5lc3NNZXRyaWMiLCJyZWNvcmRQZXJmb3JtYW5jZU1ldHJpYyIsInJlY29yZFNlY3VyaXR5TWV0cmljIiwicmVjb3JkVXNlckV4cGVyaWVuY2VNZXRyaWMiLCJhbGVydFJ1bGVzIiwiTWFwIiwiYWN0aXZlQWxlcnRzIiwibWV0cmljc0J1ZmZlciIsImZsdXNoSW50ZXJ2YWwiLCJpbml0aWFsaXplRGVmYXVsdEFsZXJ0cyIsInN0YXJ0TWV0cmljc0ZsdXNoIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInJlY29yZE1ldHJpYyIsIm5hbWUiLCJ2YWx1ZSIsInR5cGUiLCJjYXRlZ29yeSIsInRhZ3MiLCJtZXRhZGF0YSIsIm1ldHJpYyIsImlkIiwiZ2VuZXJhdGVNZXRyaWNJZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJjaGVja0FsZXJ0cyIsImxvZ2dlciIsImRlYnVnIiwiTG9nTGV2ZWwiLCJERUJVRyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwiZXJyb3IiLCJFUlJPUiIsIkVycm9yIiwibWVzc2FnZSIsIm9wZXJhdGlvbiIsImR1cmF0aW9uIiwic3VjY2VzcyIsInRvU3RyaW5nIiwiZXZlbnQiLCJzZXZlcml0eSIsInVzZXJJZCIsInNldEFsZXJ0UnVsZSIsInJ1bGUiLCJzZXQiLCJpbmZvIiwiSU5GTyIsIm1ldHJpY05hbWUiLCJ0aHJlc2hvbGQiLCJsZXZlbCIsInZhbHVlcyIsImVuYWJsZWQiLCJleGlzdGluZ0FsZXJ0IiwiQXJyYXkiLCJmcm9tIiwiZmluZCIsImFsZXJ0IiwicnVsZUlkIiwicmVzb2x2ZWRBdCIsImNvb2xkb3duRW5kIiwidHJpZ2dlcmVkQXQiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsImNvb2xkb3duTWludXRlcyIsInRyaWdnZXJlZCIsImV2YWx1YXRlQ29uZGl0aW9uIiwiY29uZGl0aW9uIiwidHJpZ2dlckFsZXJ0IiwiYWxlcnRMZXZlbCIsImNvbnZlcnRUb0FsZXJ0U3lzdGVtTGV2ZWwiLCJlbnRlcnByaXNlQWxlcnRTeXN0ZW0iLCJkZXNjcmlwdGlvbiIsImxvY2FsQWxlcnQiLCJ3YXJuIiwiV0FSTiIsImFsZXJ0SWQiLCJleGVjdXRlQWxlcnRBY3Rpb24iLCJhY3Rpb24iLCJjb25maWciLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRvIiwiY2hhbm5lbCIsImdldEFnZ3JlZ2F0ZWRNZXRyaWNzIiwicGVyaW9kIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImNhY2hlS2V5IiwiQ2FjaGVVdGlscyIsImNhY2hlTWV0cmljc0FnZ3JlZ2F0aW9uIiwic3VwYWJhc2UiLCJnZXRTdXBhYmFzZUNsaWVudCIsImRhdGEiLCJycGMiLCJtZXRyaWNfbmFtZSIsInBlcmlvZF9pbnRlcnZhbCIsInN0YXJ0X3RpbWUiLCJlbmRfdGltZSIsImZsdXNoTWV0cmljcyIsImxlbmd0aCIsIm1ldHJpY3MiLCJpbnNlcnQiLCJtYXAiLCJtZXRyaWNzQ291bnQiLCJhY3Rpb25zIiwic2V0SW50ZXJ2YWwiLCJzdG9yZUFsZXJ0IiwicnVsZV9pZCIsInRyaWdnZXJlZF9hdCIsInJlc29sdmVkX2F0Iiwibm93IiwiTWF0aCIsInJhbmRvbSIsInN1YnN0ciIsIkFsZXJ0U3lzdGVtTGV2ZWwiLCJXQVJOSU5HIiwiQ1JJVElDQUwiLCJFTUVSR0VOQ1kiLCJnZW5lcmF0ZUFsZXJ0SWQiLCJkZXN0cm95IiwiY2xlYXJJbnRlcnZhbCIsImJpbmQiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QyxpREFBaUQ7QUFDakQsc0NBQXNDOzs7Ozs7Ozs7Ozs7UUEwQjFCQTtlQUFBQTs7UUFUQUM7ZUFBQUE7O1FBZ0ZDQztlQUFBQTs7UUF6RkRDO2VBQUFBOztRQTBrQkNDO2VBQUFBOztRQUlBQztlQUFBQTs7UUFEQUM7ZUFBQUE7O1FBRUFDO2VBQUFBOztRQUNBQztlQUFBQTs7O3dCQXRsQmlDOzBCQUNaOzhCQUNQOzZCQUMyQztBQUcvRCxJQUFBLEFBQUtMLG9DQUFBQTs7Ozs7aUNBS29CLDRCQUE0QjtXQUxoREE7O0FBU0wsSUFBQSxBQUFLRixnREFBQUE7Ozs7OztXQUFBQTs7QUFTTCxJQUFBLEFBQUtELG9DQUFBQTs7Ozs7V0FBQUE7O0FBdUVMLE1BQU1FO0lBT1gsYUFBYzthQUxOTyxhQUFxQyxJQUFJQzthQUN6Q0MsZUFBeUMsSUFBSUQ7YUFDN0NFLGdCQUFvQyxFQUFFO2FBQ3RDQyxnQkFBdUM7UUFHN0MsSUFBSSxDQUFDQyx1QkFBdUI7UUFDNUIsSUFBSSxDQUFDQyxpQkFBaUI7SUFDeEI7SUFFQSxPQUFPQyxjQUEwQztRQUMvQyxJQUFJLENBQUNkLDJCQUEyQmUsUUFBUSxFQUFFO1lBQ3hDZiwyQkFBMkJlLFFBQVEsR0FBRyxJQUFJZjtRQUM1QztRQUNBLE9BQU9BLDJCQUEyQmUsUUFBUTtJQUM1QztJQUVBOztHQUVDLEdBQ0QsTUFBTUMsYUFDSkMsSUFBWSxFQUNaQyxLQUFhLEVBQ2JDLGNBQW1DLEVBQ25DQyx3QkFBcUUsRUFDckVDLE9BQStCLENBQUMsQ0FBQyxFQUNqQ0MsUUFBOEIsRUFDZjtRQUNmLElBQUk7WUFDRixNQUFNQyxTQUEyQjtnQkFDL0JDLElBQUksSUFBSSxDQUFDQyxnQkFBZ0I7Z0JBQ3pCUjtnQkFDQUU7Z0JBQ0FDO2dCQUNBRjtnQkFDQVEsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dC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