1b6f7f27efac998bcf79ebd3deb4c99d
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useCheckout", {
    enumerable: true,
    get: function() {
        return useCheckout;
    }
});
const _react = require("react");
const _store = require("../redux/store");
const _cartslice = require("../redux/features/cart-slice");
const _useAuth = require("./useAuth");
const _validation = require("../lib/utils/validation");
const initialFormData = {
    billing: {
        firstName: '',
        lastName: '',
        dni: '',
        companyName: '',
        country: 'Argentina',
        streetAddress: '',
        apartment: '',
        city: '',
        state: '',
        zipCode: '',
        phone: '',
        email: '',
        orderNotes: '',
        observations: ''
    },
    shipping: {
        differentAddress: false
    },
    paymentMethod: 'mercadopago',
    shippingMethod: 'free',
    couponCode: ''
};
const useCheckout = ()=>{
    const dispatch = (0, _store.useAppDispatch)();
    const cartItems = (0, _store.useAppSelector)(_cartslice.selectCartItems);
    const totalPrice = (0, _store.useAppSelector)(_cartslice.selectTotalPrice);
    const { user, isLoaded } = (0, _useAuth.useAuth)();
    const [checkoutState, setCheckoutState] = (0, _react.useState)({
        formData: initialFormData,
        isLoading: false,
        errors: {},
        step: 'form',
        preferenceId: undefined,
        initPoint: undefined
    });
    // Estado para cupones
    const [appliedCoupon, setAppliedCoupon] = (0, _react.useState)(null);
    // ===================================
    // AUTO-COMPLETAR DATOS DEL USUARIO AUTENTICADO
    // ===================================
    (0, _react.useEffect)(()=>{
        if (isLoaded && user) {
            const userEmail = user.email || '';
            const fullName = user.name || '';
            const [firstName, ...lastNameParts] = fullName.split(' ');
            const lastName = lastNameParts.join(' ');
            // Auto-completar datos de facturaci√≥n con informaci√≥n de NextAuth
            setCheckoutState((prev)=>({
                    ...prev,
                    formData: {
                        ...prev.formData,
                        billing: {
                            ...prev.formData.billing,
                            firstName: firstName || prev.formData.billing.firstName,
                            lastName: lastName || prev.formData.billing.lastName,
                            email: userEmail || prev.formData.billing.email
                        }
                    }
                }));
        }
    }, [
        isLoaded,
        user
    ]);
    // ===================================
    // FUNCIONES DE C√ÅLCULO
    // ===================================
    const calculateShippingCost = (0, _react.useCallback)(()=>{
        const { shippingMethod } = checkoutState.formData;
        switch(shippingMethod){
            case 'free':
                return 0;
            case 'standard':
                return totalPrice > 50000 ? 0 : 5000; // Env√≠o gratis por compras mayores a $50,000
            case 'express':
                return 8000;
            default:
                return 0;
        }
    }, [
        checkoutState.formData.shippingMethod,
        totalPrice
    ]);
    const calculateDiscount = (0, _react.useCallback)(()=>{
        if (!appliedCoupon) return 0;
        if (appliedCoupon.type === 'percentage') {
            return Math.round(totalPrice * appliedCoupon.discount / 100);
        } else {
            return appliedCoupon.discount;
        }
    }, [
        appliedCoupon,
        totalPrice
    ]);
    const calculateTotal = (0, _react.useCallback)(()=>{
        const shipping = calculateShippingCost();
        const discount = calculateDiscount();
        const total = Math.max(0, totalPrice + shipping - discount);
        console.log('üîç calculateTotal:', {
            totalPrice,
            shipping,
            discount,
            total
        });
        return total;
    }, [
        totalPrice,
        calculateShippingCost,
        calculateDiscount
    ]);
    // Actualizar datos del formulario
    const updateFormData = (0, _react.useCallback)((updates)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    ...updates
                },
                errors: {}
            }));
    }, []);
    // Actualizar datos de facturaci√≥n
    const updateBillingData = (0, _react.useCallback)((billingData)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    billing: {
                        ...prev.formData.billing,
                        ...billingData
                    }
                },
                errors: {}
            }));
    }, []);
    // Actualizar datos de env√≠o
    const updateShippingData = (0, _react.useCallback)((shippingData)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    shipping: {
                        ...prev.formData.shipping,
                        ...shippingData
                    }
                },
                errors: {}
            }));
    }, []);
    // Aplicar cup√≥n de descuento
    const applyCoupon = (0, _react.useCallback)(async (couponCode)=>{
        if (!couponCode.trim()) {
            setCheckoutState((prev)=>({
                    ...prev,
                    errors: {
                        ...prev.errors,
                        coupon: 'Ingresa un c√≥digo de cup√≥n'
                    }
                }));
            return;
        }
        try {
            // Simular validaci√≥n de cup√≥n (aqu√≠ ir√≠a la llamada a la API)
            const validCoupons = {
                'DESCUENTO10': {
                    discount: 10,
                    type: 'percentage'
                },
                'ENVIOGRATIS': {
                    discount: 5000,
                    type: 'fixed'
                },
                'BIENVENIDO': {
                    discount: 15,
                    type: 'percentage'
                }
            };
            const coupon = validCoupons[couponCode.toUpperCase()];
            if (coupon) {
                setAppliedCoupon({
                    code: couponCode.toUpperCase(),
                    ...coupon
                });
                setCheckoutState((prev)=>({
                        ...prev,
                        formData: {
                            ...prev.formData,
                            couponCode: couponCode.toUpperCase()
                        },
                        errors: {
                            ...prev.errors,
                            coupon: undefined
                        }
                    }));
            } else {
                setCheckoutState((prev)=>({
                        ...prev,
                        errors: {
                            ...prev.errors,
                            coupon: 'C√≥digo de cup√≥n inv√°lido'
                        }
                    }));
            }
        } catch (error) {
            setCheckoutState((prev)=>({
                    ...prev,
                    errors: {
                        ...prev.errors,
                        coupon: 'Error validando el cup√≥n'
                    }
                }));
        }
    }, []);
    // ===================================
    // FUNCIONES DE VALIDACI√ìN
    // ===================================
    // Validar formulario completo
    const validateForm = (0, _react.useCallback)(()=>{
        const { billing, shipping } = checkoutState.formData;
        const errors = {};
        // Validaciones b√°sicas
        if (!billing.firstName?.trim()) errors.firstName = 'Nombre es requerido';
        if (!billing.lastName?.trim()) errors.lastName = 'Apellido es requerido';
        if (!billing.email?.trim()) errors.email = 'Email es requerido';
        if (!billing.phone?.trim()) errors.phone = 'Tel√©fono es requerido';
        if (!billing.streetAddress?.trim()) errors.streetAddress = 'Direcci√≥n es requerida';
        if (!billing.city?.trim()) errors.city = 'Ciudad es requerida';
        if (!billing.state?.trim()) errors.state = 'Provincia es requerida';
        if (!billing.zipCode?.trim()) errors.zipCode = 'C√≥digo postal es requerido';
        // Validaciones avanzadas
        if (billing.email && !(0, _validation.validateEmail)(billing.email)) {
            errors.email = 'Email inv√°lido';
        }
        if (billing.phone && !(0, _validation.validatePhoneNumber)(billing.phone)) {
            errors.phone = 'Tel√©fono inv√°lido. Formato: +54 351 XXX XXXX';
        }
        if (billing.streetAddress && billing.streetAddress.length < 10) {
            errors.streetAddress = 'La direcci√≥n debe tener al menos 10 caracteres';
        }
        // Validar c√≥digo postal argentino (formato XXXX o AXXXX)
        if (billing.zipCode && !/^[A-Z]?\d{4}$/.test(billing.zipCode.toUpperCase())) {
            errors.zipCode = 'C√≥digo postal inv√°lido';
        }
        // Validar env√≠o si es direcci√≥n diferente
        if (shipping.differentAddress) {
            if (!shipping.streetAddress?.trim()) errors.shippingStreetAddress = 'Direcci√≥n de env√≠o es requerida';
            if (!shipping.city?.trim()) errors.shippingCity = 'Ciudad de env√≠o es requerida';
            if (!shipping.state?.trim()) errors.shippingState = 'Provincia de env√≠o es requerida';
            if (!shipping.zipCode?.trim()) errors.shippingZipCode = 'C√≥digo postal de env√≠o es requerido';
            if (shipping.zipCode && !/^[A-Z]?\d{4}$/.test(shipping.zipCode.toUpperCase())) {
                errors.shippingZipCode = 'C√≥digo postal de env√≠o inv√°lido';
            }
        }
        // Validar que hay items en el carrito
        if (cartItems.length === 0) {
            errors.cart = 'El carrito est√° vac√≠o';
        }
        setCheckoutState((prev)=>({
                ...prev,
                errors
            }));
        return Object.keys(errors).length === 0;
    }, [
        checkoutState.formData,
        cartItems.length
    ]);
    // Validar formulario express (solo campos esenciales)
    const validateExpressForm = (0, _react.useCallback)(()=>{
        const { billing } = checkoutState.formData;
        const errors = {};
        console.log('üîç validateExpressForm - Datos del formulario:', {
            firstName: billing.firstName,
            lastName: billing.lastName,
            dni: billing.dni,
            email: billing.email,
            phone: billing.phone,
            streetAddress: billing.streetAddress,
            paymentMethod: checkoutState.formData.paymentMethod,
            cartItemsLength: cartItems.length,
            currentStep: checkoutState.step // ‚úÖ NUEVO: Agregar step actual
        });
        // Validaciones esenciales para checkout express
        if (!billing.firstName?.trim()) errors.firstName = 'Nombre es requerido';
        if (!billing.lastName?.trim()) errors.lastName = 'Apellido es requerido';
        if (!billing.dni?.trim()) errors.dni = 'DNI/CUIT es requerido';
        if (!billing.email?.trim()) errors.email = 'Email es requerido';
        if (!billing.phone?.trim()) errors.phone = 'Tel√©fono es requerido';
        if (!billing.streetAddress?.trim()) errors.streetAddress = 'Direcci√≥n es requerida';
        // Validaciones avanzadas
        if (billing.email && !(0, _validation.validateEmail)(billing.email)) {
            errors.email = 'Email inv√°lido';
        }
        if (billing.phone && !(0, _validation.validatePhoneNumber)(billing.phone)) {
            errors.phone = 'Tel√©fono inv√°lido. Formato: +54 351 XXX XXXX';
        }
        // Validaci√≥n de DNI/CUIT argentino
        if (billing.dni && !(0, _validation.validateDNI)(billing.dni)) {
            errors.dni = 'DNI/CUIT inv√°lido. Formato: 12345678 o 20-12345678-9';
        }
        // Validar m√©todo de pago
        if (!checkoutState.formData.paymentMethod) {
            errors.paymentMethod = 'M√©todo de pago es requerido';
        }
        // ‚úÖ NUEVO: Solo validar carrito si NO estamos en el step de pago
        // Durante el step 'payment', el carrito ya se vaci√≥ pero es normal
        if (checkoutState.step !== 'payment' && cartItems.length === 0) {
            errors.cart = 'El carrito est√° vac√≠o';
        }
        console.log('üîç validateExpressForm - Errores encontrados:', errors);
        console.log('üîç validateExpressForm - Formulario v√°lido:', Object.keys(errors).length === 0);
        setCheckoutState((prev)=>({
                ...prev,
                errors
            }));
        return Object.keys(errors).length === 0;
    }, [
        checkoutState.formData,
        checkoutState.step,
        cartItems.length
    ]); // ‚úÖ NUEVO: Agregar step a dependencias
    // ===================================
    // FUNCIONES DE PROCESAMIENTO
    // ===================================
    // Procesar checkout express
    const processExpressCheckout = (0, _react.useCallback)(async ()=>{
        if (!validateExpressForm()) {
            return;
        }
        // Marcar que el checkout est√° en progreso
        sessionStorage.setItem('checkout-in-progress', 'true');
        setCheckoutState((prev)=>({
                ...prev,
                isLoading: true,
                step: 'processing'
            }));
        try {
            const { billing } = checkoutState.formData;
            const shippingCost = calculateShippingCost();
            // Sanitizar tel√©fono para el backend (solo n√∫meros, formato argentino 10-11 d√≠gitos)
            let sanitizedPhone = billing.phone?.replace(/\D/g, '') || '';
            // Si empieza con 54 (c√≥digo de Argentina), remover el c√≥digo de pa√≠s
            if (sanitizedPhone.startsWith('54') && sanitizedPhone.length > 11) {
                sanitizedPhone = sanitizedPhone.substring(2); // Remover "54"
            }
            // Si empieza con 9 (c√≥digo de celular), mantenerlo para que sea 11 d√≠gitos
            // Si no empieza con 9, deber√≠a ser 10 d√≠gitos (tel√©fono fijo)
            console.log('üîç processExpressCheckout - Tel√©fono original:', billing.phone);
            console.log('üîç processExpressCheckout - Tel√©fono sanitizado:', sanitizedPhone);
            console.log('üîç processExpressCheckout - Longitud del tel√©fono:', sanitizedPhone.length);
            // Preparar datos para la API (Express Checkout - campos simplificados)
            const payload = {
                items: cartItems.map((item)=>({
                        id: item.id.toString(),
                        name: item.title,
                        price: item.discountedPrice,
                        quantity: item.quantity,
                        image: item.imgs?.previews?.[0] || ''
                    })),
                payer: {
                    name: billing.firstName || 'Cliente',
                    surname: billing.lastName || 'Express',
                    email: billing.email,
                    phone: sanitizedPhone
                },
                shipping: shippingCost > 0 ? {
                    cost: shippingCost,
                    address: {
                        street_name: billing.streetAddress,
                        street_number: "123",
                        zip_code: billing.zipCode || "5000",
                        city_name: billing.city || "C√≥rdoba",
                        state_name: billing.state || "C√≥rdoba"
                    }
                } : undefined,
                external_reference: `express_checkout_${Date.now()}`
            };
            console.log('üîç processExpressCheckout - Payload enviado:', payload);
            // Llamar a la API
            const response = await fetch('/api/payments/create-preference', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!result.success) {
                throw new Error(result.error || 'Error procesando el pago');
            }
            // ‚úÖ SOLUCI√ìN FINAL: Redirecci√≥n directa a MercadoPago
            // Esto evita el problema de hooks con el Wallet Brick embebido
            console.log('üîÑ Redirigiendo directamente a MercadoPago:', result.data.init_point);
            // Cambiar a estado de redirecci√≥n inmediatamente
            setCheckoutState((prev)=>({
                    ...prev,
                    step: 'redirect',
                    preferenceId: result.data.preference_id,
                    initPoint: result.data.init_point,
                    isLoading: false
                }));
        } catch (error) {
            console.error('Error en express checkout:', error);
            setCheckoutState((prev)=>({
                    ...prev,
                    isLoading: false,
                    step: 'form',
                    errors: {
                        general: error.message || 'Error procesando el pago'
                    }
                }));
        }
    }, [
        checkoutState.formData,
        cartItems,
        validateExpressForm,
        calculateShippingCost,
        dispatch
    ]);
    // Procesar checkout completo
    const processCheckout = (0, _react.useCallback)(async ()=>{
        if (!validateForm()) {
            return;
        }
        // Marcar que el checkout est√° en progreso
        sessionStorage.setItem('checkout-in-progress', 'true');
        setCheckoutState((prev)=>({
                ...prev,
                isLoading: true,
                step: 'processing'
            }));
        try {
            const { billing, shipping } = checkoutState.formData;
            const shippingCost = calculateShippingCost();
            // Preparar datos para la API
            const payload = {
                items: cartItems.map((item)=>({
                        id: item.id.toString(),
                        name: item.title,
                        price: item.discountedPrice,
                        quantity: item.quantity,
                        image: item.imgs?.previews?.[0] || ''
                    })),
                payer: {
                    name: billing.firstName,
                    surname: billing.lastName,
                    email: billing.email,
                    phone: billing.phone
                },
                shipping: shippingCost > 0 ? {
                    cost: shippingCost,
                    address: {
                        street_name: shipping.differentAddress ? shipping.streetAddress : billing.streetAddress,
                        street_number: "123",
                        zip_code: shipping.differentAddress ? shipping.zipCode : billing.zipCode,
                        city_name: shipping.differentAddress ? shipping.city : billing.city,
                        state_name: shipping.differentAddress ? shipping.state : billing.state
                    }
                } : undefined,
                external_reference: `checkout_${Date.now()}`
            };
            // Llamar a la API
            const response = await fetch('/api/payments/create-preference', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!result.success) {
                throw new Error(result.error || 'Error procesando el pago');
            }
            // Procesar resultado exitoso - mostrar paso de pago manual
            // NOTA: No limpiar el carrito aqu√≠, se limpiar√° cuando el pago se complete exitosamente
            // Usar Wallet Brick embebido (comportamiento por defecto)
            setCheckoutState((prev)=>({
                    ...prev,
                    step: 'payment',
                    preferenceId: result.data.preference_id,
                    initPoint: result.data.init_point
                }));
        } catch (error) {
            console.error('Error en checkout:', error);
            setCheckoutState((prev)=>({
                    ...prev,
                    isLoading: false,
                    step: 'form',
                    errors: {
                        general: error.message || 'Error procesando el pago'
                    }
                }));
        }
    }, [
        checkoutState.formData,
        cartItems,
        validateForm,
        calculateShippingCost,
        dispatch
    ]);
    // ===================================
    // CALLBACKS PARA WALLET BRICK
    // ===================================
    const handleWalletReady = (0, _react.useCallback)(()=>{
        console.log('Wallet Brick est√° listo');
    }, []);
    const handleWalletError = (0, _react.useCallback)((error)=>{
        console.error('Error en Wallet Brick:', error);
        setCheckoutState((prev)=>({
                ...prev,
                errors: {
                    payment: error.message || 'Error en el sistema de pagos'
                },
                isLoading: false
            }));
    }, []);
    const handleWalletSubmit = (0, _react.useCallback)((data)=>{
        console.log('üí≥ Wallet Submit - Pago enviado desde Wallet Brick:', data);
        console.log('üí≥ Wallet Submit - Cambiando a step redirect');
        // IMPORTANTE: NO limpiar el carrito aqu√≠
        // El carrito se limpiar√° solo cuando el pago sea confirmado como exitoso
        setCheckoutState((prev)=>({
                ...prev,
                step: 'redirect',
                isLoading: false
            }));
    }, []);
    // Memorizar valores calculados para evitar recursi√≥n infinita
    const memoizedShippingCost = (0, _react.useMemo)(()=>{
        try {
            const cost = calculateShippingCost();
            return typeof cost === 'number' && !isNaN(cost) ? cost : 0;
        } catch (error) {
            console.error('‚ùå Error calculating shippingCost:', error);
            return 0;
        }
    }, [
        calculateShippingCost
    ]);
    const memoizedDiscount = (0, _react.useMemo)(()=>{
        try {
            const disc = calculateDiscount();
            return typeof disc === 'number' && !isNaN(disc) ? disc : 0;
        } catch (error) {
            console.error('‚ùå Error calculating discount:', error);
            return 0;
        }
    }, [
        calculateDiscount
    ]);
    const memoizedFinalTotal = (0, _react.useMemo)(()=>{
        try {
            const total = calculateTotal();
            return typeof total === 'number' && !isNaN(total) ? total : 0;
        } catch (error) {
            console.error('‚ùå Error calculating finalTotal:', error);
            return 0;
        }
    }, [
        calculateTotal
    ]);
    return {
        // Estado
        formData: checkoutState.formData,
        isLoading: checkoutState.isLoading,
        errors: checkoutState.errors,
        step: checkoutState.step,
        // Datos para Wallet Brick
        preferenceId: checkoutState.preferenceId,
        initPoint: checkoutState.initPoint,
        // Datos calculados
        cartItems,
        totalPrice,
        shippingCost: memoizedShippingCost,
        discount: memoizedDiscount,
        finalTotal: memoizedFinalTotal,
        // Cupones
        appliedCoupon,
        applyCoupon,
        // Acciones
        updateFormData,
        updateBillingData,
        updateShippingData,
        validateForm,
        validateExpressForm,
        processCheckout,
        processExpressCheckout,
        // Callbacks para Wallet Brick
        handleWalletReady,
        handleWalletError,
        handleWalletSubmit
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUNoZWNrb3V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUFwcERpc3BhdGNoLCB1c2VBcHBTZWxlY3RvciB9IGZyb20gJ0AvcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgc2VsZWN0Q2FydEl0ZW1zLCBzZWxlY3RUb3RhbFByaWNlLCByZW1vdmVBbGxJdGVtc0Zyb21DYXJ0IH0gZnJvbSAnQC9yZWR1eC9mZWF0dXJlcy9jYXJ0LXNsaWNlJztcbmltcG9ydCB7IENoZWNrb3V0Rm9ybURhdGEsIENoZWNrb3V0U3RhdGUsIENyZWF0ZVByZWZlcmVuY2VQYXlsb2FkLCBQYXltZW50UHJlZmVyZW5jZVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9jaGVja291dCc7XG5pbXBvcnQgeyBBcGlSZXNwb25zZSB9IGZyb20gJ0AvdHlwZXMvYXBpJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuL3VzZUF1dGgnO1xuaW1wb3J0IHsgdmFsaWRhdGVFbWFpbCwgdmFsaWRhdGVQaG9uZU51bWJlciwgdmFsaWRhdGVETkkgfSBmcm9tICdAL2xpYi91dGlscy92YWxpZGF0aW9uJztcblxuY29uc3QgaW5pdGlhbEZvcm1EYXRhOiBDaGVja291dEZvcm1EYXRhID0ge1xuICBiaWxsaW5nOiB7XG4gICAgZmlyc3ROYW1lOiAnJyxcbiAgICBsYXN0TmFtZTogJycsXG4gICAgZG5pOiAnJyxcbiAgICBjb21wYW55TmFtZTogJycsXG4gICAgY291bnRyeTogJ0FyZ2VudGluYScsXG4gICAgc3RyZWV0QWRkcmVzczogJycsXG4gICAgYXBhcnRtZW50OiAnJyxcbiAgICBjaXR5OiAnJyxcbiAgICBzdGF0ZTogJycsXG4gICAgemlwQ29kZTogJycsXG4gICAgcGhvbmU6ICcnLFxuICAgIGVtYWlsOiAnJyxcbiAgICBvcmRlck5vdGVzOiAnJyxcbiAgICBvYnNlcnZhdGlvbnM6ICcnLFxuICB9LFxuICBzaGlwcGluZzoge1xuICAgIGRpZmZlcmVudEFkZHJlc3M6IGZhbHNlLFxuICB9LFxuICBwYXltZW50TWV0aG9kOiAnbWVyY2Fkb3BhZ28nLFxuICBzaGlwcGluZ01ldGhvZDogJ2ZyZWUnLFxuICBjb3Vwb25Db2RlOiAnJyxcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VDaGVja291dCA9ICgpID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICBjb25zdCBjYXJ0SXRlbXMgPSB1c2VBcHBTZWxlY3RvcihzZWxlY3RDYXJ0SXRlbXMpO1xuICBjb25zdCB0b3RhbFByaWNlID0gdXNlQXBwU2VsZWN0b3Ioc2VsZWN0VG90YWxQcmljZSk7XG4gIGNvbnN0IHsgdXNlciwgaXNMb2FkZWQgfSA9IHVzZUF1dGgoKTtcblxuICBjb25zdCBbY2hlY2tvdXRTdGF0ZSwgc2V0Q2hlY2tvdXRTdGF0ZV0gPSB1c2VTdGF0ZTxDaGVja291dFN0YXRlPih7XG4gICAgZm9ybURhdGE6IGluaXRpYWxGb3JtRGF0YSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIGVycm9yczoge30sXG4gICAgc3RlcDogJ2Zvcm0nLFxuICAgIHByZWZlcmVuY2VJZDogdW5kZWZpbmVkLFxuICAgIGluaXRQb2ludDogdW5kZWZpbmVkLFxuICB9KTtcblxuICAvLyBFc3RhZG8gcGFyYSBjdXBvbmVzXG4gIGNvbnN0IFthcHBsaWVkQ291cG9uLCBzZXRBcHBsaWVkQ291cG9uXSA9IHVzZVN0YXRlPHtcbiAgICBjb2RlOiBzdHJpbmc7XG4gICAgZGlzY291bnQ6IG51bWJlcjtcbiAgICB0eXBlOiAncGVyY2VudGFnZScgfCAnZml4ZWQnO1xuICB9IHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQVVUTy1DT01QTEVUQVIgREFUT1MgREVMIFVTVUFSSU8gQVVURU5USUNBRE9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNMb2FkZWQgJiYgdXNlcikge1xuICAgICAgY29uc3QgdXNlckVtYWlsID0gdXNlci5lbWFpbCB8fCAnJztcbiAgICAgIGNvbnN0IGZ1bGxOYW1lID0gdXNlci5uYW1lIHx8ICcnO1xuICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgLi4ubGFzdE5hbWVQYXJ0c10gPSBmdWxsTmFtZS5zcGxpdCgnICcpO1xuICAgICAgY29uc3QgbGFzdE5hbWUgPSBsYXN0TmFtZVBhcnRzLmpvaW4oJyAnKTtcblxuICAgICAgLy8gQXV0by1jb21wbGV0YXIgZGF0b3MgZGUgZmFjdHVyYWNpw7NuIGNvbiBpbmZvcm1hY2nDs24gZGUgTmV4dEF1dGhcbiAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBmb3JtRGF0YToge1xuICAgICAgICAgIC4uLnByZXYuZm9ybURhdGEsXG4gICAgICAgICAgYmlsbGluZzoge1xuICAgICAgICAgICAgLi4ucHJldi5mb3JtRGF0YS5iaWxsaW5nLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBmaXJzdE5hbWUgfHwgcHJldi5mb3JtRGF0YS5iaWxsaW5nLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZSB8fCBwcmV2LmZvcm1EYXRhLmJpbGxpbmcubGFzdE5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlckVtYWlsIHx8IHByZXYuZm9ybURhdGEuYmlsbGluZy5lbWFpbCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW2lzTG9hZGVkLCB1c2VyXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIEPDgUxDVUxPXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGNhbGN1bGF0ZVNoaXBwaW5nQ29zdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCB7IHNoaXBwaW5nTWV0aG9kIH0gPSBjaGVja291dFN0YXRlLmZvcm1EYXRhO1xuXG4gICAgc3dpdGNoIChzaGlwcGluZ01ldGhvZCkge1xuICAgICAgY2FzZSAnZnJlZSc6XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgY2FzZSAnc3RhbmRhcmQnOlxuICAgICAgICByZXR1cm4gdG90YWxQcmljZSA+IDUwMDAwID8gMCA6IDUwMDA7IC8vIEVudsOtbyBncmF0aXMgcG9yIGNvbXByYXMgbWF5b3JlcyBhICQ1MCwwMDBcbiAgICAgIGNhc2UgJ2V4cHJlc3MnOlxuICAgICAgICByZXR1cm4gODAwMDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEuc2hpcHBpbmdNZXRob2QsIHRvdGFsUHJpY2VdKTtcblxuICBjb25zdCBjYWxjdWxhdGVEaXNjb3VudCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWFwcGxpZWRDb3Vwb24pIHJldHVybiAwO1xuXG4gICAgaWYgKGFwcGxpZWRDb3Vwb24udHlwZSA9PT0gJ3BlcmNlbnRhZ2UnKSB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZCgodG90YWxQcmljZSAqIGFwcGxpZWRDb3Vwb24uZGlzY291bnQpIC8gMTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFwcGxpZWRDb3Vwb24uZGlzY291bnQ7XG4gICAgfVxuICB9LCBbYXBwbGllZENvdXBvbiwgdG90YWxQcmljZV0pO1xuXG4gIGNvbnN0IGNhbGN1bGF0ZVRvdGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBwaW5nID0gY2FsY3VsYXRlU2hpcHBpbmdDb3N0KCk7XG4gICAgY29uc3QgZGlzY291bnQgPSBjYWxjdWxhdGVEaXNjb3VudCgpO1xuICAgIGNvbnN0IHRvdGFsID0gTWF0aC5tYXgoMCwgdG90YWxQcmljZSArIHNoaXBwaW5nIC0gZGlzY291bnQpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIGNhbGN1bGF0ZVRvdGFsOicsIHsgdG90YWxQcmljZSwgc2hpcHBpbmcsIGRpc2NvdW50LCB0b3RhbCB9KTtcbiAgICByZXR1cm4gdG90YWw7XG4gIH0sIFt0b3RhbFByaWNlLCBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QsIGNhbGN1bGF0ZURpc2NvdW50XSk7XG5cbiAgLy8gQWN0dWFsaXphciBkYXRvcyBkZWwgZm9ybXVsYXJpb1xuICBjb25zdCB1cGRhdGVGb3JtRGF0YSA9IHVzZUNhbGxiYWNrKCh1cGRhdGVzOiBQYXJ0aWFsPENoZWNrb3V0Rm9ybURhdGE+KSA9PiB7XG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgZm9ybURhdGE6IHsgLi4ucHJldi5mb3JtRGF0YSwgLi4udXBkYXRlcyB9LFxuICAgICAgZXJyb3JzOiB7fSwgLy8gTGltcGlhciBlcnJvcmVzIGFsIGFjdHVhbGl6YXJcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICAvLyBBY3R1YWxpemFyIGRhdG9zIGRlIGZhY3R1cmFjacOzblxuICBjb25zdCB1cGRhdGVCaWxsaW5nRGF0YSA9IHVzZUNhbGxiYWNrKChiaWxsaW5nRGF0YTogUGFydGlhbDxDaGVja291dEZvcm1EYXRhWydiaWxsaW5nJ10+KSA9PiB7XG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgZm9ybURhdGE6IHtcbiAgICAgICAgLi4ucHJldi5mb3JtRGF0YSxcbiAgICAgICAgYmlsbGluZzogeyAuLi5wcmV2LmZvcm1EYXRhLmJpbGxpbmcsIC4uLmJpbGxpbmdEYXRhIH0sXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiB7fSwgLy8gTGltcGlhciBlcnJvcmVzIGFsIGFjdHVhbGl6YXJcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICAvLyBBY3R1YWxpemFyIGRhdG9zIGRlIGVudsOtb1xuICBjb25zdCB1cGRhdGVTaGlwcGluZ0RhdGEgPSB1c2VDYWxsYmFjaygoc2hpcHBpbmdEYXRhOiBQYXJ0aWFsPENoZWNrb3V0Rm9ybURhdGFbJ3NoaXBwaW5nJ10+KSA9PiB7XG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgZm9ybURhdGE6IHtcbiAgICAgICAgLi4ucHJldi5mb3JtRGF0YSxcbiAgICAgICAgc2hpcHBpbmc6IHsgLi4ucHJldi5mb3JtRGF0YS5zaGlwcGluZywgLi4uc2hpcHBpbmdEYXRhIH0sXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiB7fSwgLy8gTGltcGlhciBlcnJvcmVzIGFsIGFjdHVhbGl6YXJcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICAvLyBBcGxpY2FyIGN1cMOzbiBkZSBkZXNjdWVudG9cbiAgY29uc3QgYXBwbHlDb3Vwb24gPSB1c2VDYWxsYmFjayhhc3luYyAoY291cG9uQ29kZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFjb3Vwb25Db2RlLnRyaW0oKSkge1xuICAgICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIGVycm9yczogeyAuLi5wcmV2LmVycm9ycywgY291cG9uOiAnSW5ncmVzYSB1biBjw7NkaWdvIGRlIGN1cMOzbicgfVxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBTaW11bGFyIHZhbGlkYWNpw7NuIGRlIGN1cMOzbiAoYXF1w60gaXLDrWEgbGEgbGxhbWFkYSBhIGxhIEFQSSlcbiAgICAgIGNvbnN0IHZhbGlkQ291cG9ucyA9IHtcbiAgICAgICAgJ0RFU0NVRU5UTzEwJzogeyBkaXNjb3VudDogMTAsIHR5cGU6ICdwZXJjZW50YWdlJyBhcyBjb25zdCB9LFxuICAgICAgICAnRU5WSU9HUkFUSVMnOiB7IGRpc2NvdW50OiA1MDAwLCB0eXBlOiAnZml4ZWQnIGFzIGNvbnN0IH0sXG4gICAgICAgICdCSUVOVkVOSURPJzogeyBkaXNjb3VudDogMTUsIHR5cGU6ICdwZXJjZW50YWdlJyBhcyBjb25zdCB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY291cG9uID0gdmFsaWRDb3Vwb25zW2NvdXBvbkNvZGUudG9VcHBlckNhc2UoKSBhcyBrZXlvZiB0eXBlb2YgdmFsaWRDb3Vwb25zXTtcblxuICAgICAgaWYgKGNvdXBvbikge1xuICAgICAgICBzZXRBcHBsaWVkQ291cG9uKHtcbiAgICAgICAgICBjb2RlOiBjb3Vwb25Db2RlLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgLi4uY291cG9uXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIGZvcm1EYXRhOiB7IC4uLnByZXYuZm9ybURhdGEsIGNvdXBvbkNvZGU6IGNvdXBvbkNvZGUudG9VcHBlckNhc2UoKSB9LFxuICAgICAgICAgIGVycm9yczogeyAuLi5wcmV2LmVycm9ycywgY291cG9uOiB1bmRlZmluZWQgfVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIGVycm9yczogeyAuLi5wcmV2LmVycm9ycywgY291cG9uOiAnQ8OzZGlnbyBkZSBjdXDDs24gaW52w6FsaWRvJyB9XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIGVycm9yczogeyAuLi5wcmV2LmVycm9ycywgY291cG9uOiAnRXJyb3IgdmFsaWRhbmRvIGVsIGN1cMOzbicgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEZVTkNJT05FUyBERSBWQUxJREFDScOTTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8vIFZhbGlkYXIgZm9ybXVsYXJpbyBjb21wbGV0b1xuICBjb25zdCB2YWxpZGF0ZUZvcm0gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgeyBiaWxsaW5nLCBzaGlwcGluZyB9ID0gY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YTtcbiAgICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgIC8vIFZhbGlkYWNpb25lcyBiw6FzaWNhc1xuICAgIGlmICghYmlsbGluZy5maXJzdE5hbWU/LnRyaW0oKSkgZXJyb3JzLmZpcnN0TmFtZSA9ICdOb21icmUgZXMgcmVxdWVyaWRvJztcbiAgICBpZiAoIWJpbGxpbmcubGFzdE5hbWU/LnRyaW0oKSkgZXJyb3JzLmxhc3ROYW1lID0gJ0FwZWxsaWRvIGVzIHJlcXVlcmlkbyc7XG4gICAgaWYgKCFiaWxsaW5nLmVtYWlsPy50cmltKCkpIGVycm9ycy5lbWFpbCA9ICdFbWFpbCBlcyByZXF1ZXJpZG8nO1xuICAgIGlmICghYmlsbGluZy5waG9uZT8udHJpbSgpKSBlcnJvcnMucGhvbmUgPSAnVGVsw6lmb25vIGVzIHJlcXVlcmlkbyc7XG4gICAgaWYgKCFiaWxsaW5nLnN0cmVldEFkZHJlc3M/LnRyaW0oKSkgZXJyb3JzLnN0cmVldEFkZHJlc3MgPSAnRGlyZWNjacOzbiBlcyByZXF1ZXJpZGEnO1xuICAgIGlmICghYmlsbGluZy5jaXR5Py50cmltKCkpIGVycm9ycy5jaXR5ID0gJ0NpdWRhZCBlcyByZXF1ZXJpZGEnO1xuICAgIGlmICghYmlsbGluZy5zdGF0ZT8udHJpbSgpKSBlcnJvcnMuc3RhdGUgPSAnUHJvdmluY2lhIGVzIHJlcXVlcmlkYSc7XG4gICAgaWYgKCFiaWxsaW5nLnppcENvZGU/LnRyaW0oKSkgZXJyb3JzLnppcENvZGUgPSAnQ8OzZGlnbyBwb3N0YWwgZXMgcmVxdWVyaWRvJztcblxuICAgIC8vIFZhbGlkYWNpb25lcyBhdmFuemFkYXNcbiAgICBpZiAoYmlsbGluZy5lbWFpbCAmJiAhdmFsaWRhdGVFbWFpbChiaWxsaW5nLmVtYWlsKSkge1xuICAgICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGludsOhbGlkbyc7XG4gICAgfVxuXG4gICAgaWYgKGJpbGxpbmcucGhvbmUgJiYgIXZhbGlkYXRlUGhvbmVOdW1iZXIoYmlsbGluZy5waG9uZSkpIHtcbiAgICAgIGVycm9ycy5waG9uZSA9ICdUZWzDqWZvbm8gaW52w6FsaWRvLiBGb3JtYXRvOiArNTQgMzUxIFhYWCBYWFhYJztcbiAgICB9XG5cbiAgICBpZiAoYmlsbGluZy5zdHJlZXRBZGRyZXNzICYmIGJpbGxpbmcuc3RyZWV0QWRkcmVzcy5sZW5ndGggPCAxMCkge1xuICAgICAgZXJyb3JzLnN0cmVldEFkZHJlc3MgPSAnTGEgZGlyZWNjacOzbiBkZWJlIHRlbmVyIGFsIG1lbm9zIDEwIGNhcmFjdGVyZXMnO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgY8OzZGlnbyBwb3N0YWwgYXJnZW50aW5vIChmb3JtYXRvIFhYWFggbyBBWFhYWClcbiAgICBpZiAoYmlsbGluZy56aXBDb2RlICYmICEvXltBLVpdP1xcZHs0fSQvLnRlc3QoYmlsbGluZy56aXBDb2RlLnRvVXBwZXJDYXNlKCkpKSB7XG4gICAgICBlcnJvcnMuemlwQ29kZSA9ICdDw7NkaWdvIHBvc3RhbCBpbnbDoWxpZG8nO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgZW52w61vIHNpIGVzIGRpcmVjY2nDs24gZGlmZXJlbnRlXG4gICAgaWYgKHNoaXBwaW5nLmRpZmZlcmVudEFkZHJlc3MpIHtcbiAgICAgIGlmICghc2hpcHBpbmcuc3RyZWV0QWRkcmVzcz8udHJpbSgpKSBlcnJvcnMuc2hpcHBpbmdTdHJlZXRBZGRyZXNzID0gJ0RpcmVjY2nDs24gZGUgZW52w61vIGVzIHJlcXVlcmlkYSc7XG4gICAgICBpZiAoIXNoaXBwaW5nLmNpdHk/LnRyaW0oKSkgZXJyb3JzLnNoaXBwaW5nQ2l0eSA9ICdDaXVkYWQgZGUgZW52w61vIGVzIHJlcXVlcmlkYSc7XG4gICAgICBpZiAoIXNoaXBwaW5nLnN0YXRlPy50cmltKCkpIGVycm9ycy5zaGlwcGluZ1N0YXRlID0gJ1Byb3ZpbmNpYSBkZSBlbnbDrW8gZXMgcmVxdWVyaWRhJztcbiAgICAgIGlmICghc2hpcHBpbmcuemlwQ29kZT8udHJpbSgpKSBlcnJvcnMuc2hpcHBpbmdaaXBDb2RlID0gJ0PDs2RpZ28gcG9zdGFsIGRlIGVudsOtbyBlcyByZXF1ZXJpZG8nO1xuXG4gICAgICBpZiAoc2hpcHBpbmcuemlwQ29kZSAmJiAhL15bQS1aXT9cXGR7NH0kLy50ZXN0KHNoaXBwaW5nLnppcENvZGUudG9VcHBlckNhc2UoKSkpIHtcbiAgICAgICAgZXJyb3JzLnNoaXBwaW5nWmlwQ29kZSA9ICdDw7NkaWdvIHBvc3RhbCBkZSBlbnbDrW8gaW52w6FsaWRvJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBWYWxpZGFyIHF1ZSBoYXkgaXRlbXMgZW4gZWwgY2Fycml0b1xuICAgIGlmIChjYXJ0SXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJvcnMuY2FydCA9ICdFbCBjYXJyaXRvIGVzdMOhIHZhY8Otbyc7XG4gICAgfVxuXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9ycyB9KSk7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwO1xuICB9LCBbY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YSwgY2FydEl0ZW1zLmxlbmd0aF0pO1xuXG4gIC8vIFZhbGlkYXIgZm9ybXVsYXJpbyBleHByZXNzIChzb2xvIGNhbXBvcyBlc2VuY2lhbGVzKVxuICBjb25zdCB2YWxpZGF0ZUV4cHJlc3NGb3JtID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHsgYmlsbGluZyB9ID0gY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YTtcbiAgICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SNIHZhbGlkYXRlRXhwcmVzc0Zvcm0gLSBEYXRvcyBkZWwgZm9ybXVsYXJpbzonLCB7XG4gICAgICBmaXJzdE5hbWU6IGJpbGxpbmcuZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWU6IGJpbGxpbmcubGFzdE5hbWUsXG4gICAgICBkbmk6IGJpbGxpbmcuZG5pLFxuICAgICAgZW1haWw6IGJpbGxpbmcuZW1haWwsXG4gICAgICBwaG9uZTogYmlsbGluZy5waG9uZSxcbiAgICAgIHN0cmVldEFkZHJlc3M6IGJpbGxpbmcuc3RyZWV0QWRkcmVzcyxcbiAgICAgIHBheW1lbnRNZXRob2Q6IGNoZWNrb3V0U3RhdGUuZm9ybURhdGEucGF5bWVudE1ldGhvZCxcbiAgICAgIGNhcnRJdGVtc0xlbmd0aDogY2FydEl0ZW1zLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTdGVwOiBjaGVja291dFN0YXRlLnN0ZXAgLy8g4pyFIE5VRVZPOiBBZ3JlZ2FyIHN0ZXAgYWN0dWFsXG4gICAgfSk7XG5cbiAgICAvLyBWYWxpZGFjaW9uZXMgZXNlbmNpYWxlcyBwYXJhIGNoZWNrb3V0IGV4cHJlc3NcbiAgICBpZiAoIWJpbGxpbmcuZmlyc3ROYW1lPy50cmltKCkpIGVycm9ycy5maXJzdE5hbWUgPSAnTm9tYnJlIGVzIHJlcXVlcmlkbyc7XG4gICAgaWYgKCFiaWxsaW5nLmxhc3ROYW1lPy50cmltKCkpIGVycm9ycy5sYXN0TmFtZSA9ICdBcGVsbGlkbyBlcyByZXF1ZXJpZG8nO1xuICAgIGlmICghYmlsbGluZy5kbmk/LnRyaW0oKSkgZXJyb3JzLmRuaSA9ICdETkkvQ1VJVCBlcyByZXF1ZXJpZG8nO1xuICAgIGlmICghYmlsbGluZy5lbWFpbD8udHJpbSgpKSBlcnJvcnMuZW1haWwgPSAnRW1haWwgZXMgcmVxdWVyaWRvJztcbiAgICBpZiAoIWJpbGxpbmcucGhvbmU/LnRyaW0oKSkgZXJyb3JzLnBob25lID0gJ1RlbMOpZm9ubyBlcyByZXF1ZXJpZG8nO1xuICAgIGlmICghYmlsbGluZy5zdHJlZXRBZGRyZXNzPy50cmltKCkpIGVycm9ycy5zdHJlZXRBZGRyZXNzID0gJ0RpcmVjY2nDs24gZXMgcmVxdWVyaWRhJztcblxuICAgIC8vIFZhbGlkYWNpb25lcyBhdmFuemFkYXNcbiAgICBpZiAoYmlsbGluZy5lbWFpbCAmJiAhdmFsaWRhdGVFbWFpbChiaWxsaW5nLmVtYWlsKSkge1xuICAgICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGludsOhbGlkbyc7XG4gICAgfVxuXG4gICAgaWYgKGJpbGxpbmcucGhvbmUgJiYgIXZhbGlkYXRlUGhvbmVOdW1iZXIoYmlsbGluZy5waG9uZSkpIHtcbiAgICAgIGVycm9ycy5waG9uZSA9ICdUZWzDqWZvbm8gaW52w6FsaWRvLiBGb3JtYXRvOiArNTQgMzUxIFhYWCBYWFhYJztcbiAgICB9XG5cbiAgICAvLyBWYWxpZGFjacOzbiBkZSBETkkvQ1VJVCBhcmdlbnRpbm9cbiAgICBpZiAoYmlsbGluZy5kbmkgJiYgIXZhbGlkYXRlRE5JKGJpbGxpbmcuZG5pKSkge1xuICAgICAgZXJyb3JzLmRuaSA9ICdETkkvQ1VJVCBpbnbDoWxpZG8uIEZvcm1hdG86IDEyMzQ1Njc4IG8gMjAtMTIzNDU2NzgtOSc7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhciBtw6l0b2RvIGRlIHBhZ29cbiAgICBpZiAoIWNoZWNrb3V0U3RhdGUuZm9ybURhdGEucGF5bWVudE1ldGhvZCkge1xuICAgICAgZXJyb3JzLnBheW1lbnRNZXRob2QgPSAnTcOpdG9kbyBkZSBwYWdvIGVzIHJlcXVlcmlkbyc7XG4gICAgfVxuXG4gICAgLy8g4pyFIE5VRVZPOiBTb2xvIHZhbGlkYXIgY2Fycml0byBzaSBOTyBlc3RhbW9zIGVuIGVsIHN0ZXAgZGUgcGFnb1xuICAgIC8vIER1cmFudGUgZWwgc3RlcCAncGF5bWVudCcsIGVsIGNhcnJpdG8geWEgc2UgdmFjacOzIHBlcm8gZXMgbm9ybWFsXG4gICAgaWYgKGNoZWNrb3V0U3RhdGUuc3RlcCAhPT0gJ3BheW1lbnQnICYmIGNhcnRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGVycm9ycy5jYXJ0ID0gJ0VsIGNhcnJpdG8gZXN0w6EgdmFjw61vJztcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSB2YWxpZGF0ZUV4cHJlc3NGb3JtIC0gRXJyb3JlcyBlbmNvbnRyYWRvczonLCBlcnJvcnMpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHZhbGlkYXRlRXhwcmVzc0Zvcm0gLSBGb3JtdWxhcmlvIHbDoWxpZG86JywgT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDApO1xuXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9ycyB9KSk7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwO1xuICB9LCBbY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YSwgY2hlY2tvdXRTdGF0ZS5zdGVwLCBjYXJ0SXRlbXMubGVuZ3RoXSk7IC8vIOKchSBOVUVWTzogQWdyZWdhciBzdGVwIGEgZGVwZW5kZW5jaWFzXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIFBST0NFU0FNSUVOVE9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyBQcm9jZXNhciBjaGVja291dCBleHByZXNzXG4gIGNvbnN0IHByb2Nlc3NFeHByZXNzQ2hlY2tvdXQgPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCF2YWxpZGF0ZUV4cHJlc3NGb3JtKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBNYXJjYXIgcXVlIGVsIGNoZWNrb3V0IGVzdMOhIGVuIHByb2dyZXNvXG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2hlY2tvdXQtaW4tcHJvZ3Jlc3MnLCAndHJ1ZScpO1xuXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzTG9hZGluZzogdHJ1ZSwgc3RlcDogJ3Byb2Nlc3NpbmcnIH0pKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGJpbGxpbmcgfSA9IGNoZWNrb3V0U3RhdGUuZm9ybURhdGE7XG4gICAgICBjb25zdCBzaGlwcGluZ0Nvc3QgPSBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QoKTtcblxuICAgICAgLy8gU2FuaXRpemFyIHRlbMOpZm9ubyBwYXJhIGVsIGJhY2tlbmQgKHNvbG8gbsO6bWVyb3MsIGZvcm1hdG8gYXJnZW50aW5vIDEwLTExIGTDrWdpdG9zKVxuICAgICAgbGV0IHNhbml0aXplZFBob25lID0gYmlsbGluZy5waG9uZT8ucmVwbGFjZSgvXFxEL2csICcnKSB8fCAnJztcblxuICAgICAgLy8gU2kgZW1waWV6YSBjb24gNTQgKGPDs2RpZ28gZGUgQXJnZW50aW5hKSwgcmVtb3ZlciBlbCBjw7NkaWdvIGRlIHBhw61zXG4gICAgICBpZiAoc2FuaXRpemVkUGhvbmUuc3RhcnRzV2l0aCgnNTQnKSAmJiBzYW5pdGl6ZWRQaG9uZS5sZW5ndGggPiAxMSkge1xuICAgICAgICBzYW5pdGl6ZWRQaG9uZSA9IHNhbml0aXplZFBob25lLnN1YnN0cmluZygyKTsgLy8gUmVtb3ZlciBcIjU0XCJcbiAgICAgIH1cblxuICAgICAgLy8gU2kgZW1waWV6YSBjb24gOSAoY8OzZGlnbyBkZSBjZWx1bGFyKSwgbWFudGVuZXJsbyBwYXJhIHF1ZSBzZWEgMTEgZMOtZ2l0b3NcbiAgICAgIC8vIFNpIG5vIGVtcGllemEgY29uIDksIGRlYmVyw61hIHNlciAxMCBkw61naXRvcyAodGVsw6lmb25vIGZpam8pXG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIHByb2Nlc3NFeHByZXNzQ2hlY2tvdXQgLSBUZWzDqWZvbm8gb3JpZ2luYWw6JywgYmlsbGluZy5waG9uZSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBwcm9jZXNzRXhwcmVzc0NoZWNrb3V0IC0gVGVsw6lmb25vIHNhbml0aXphZG86Jywgc2FuaXRpemVkUGhvbmUpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gcHJvY2Vzc0V4cHJlc3NDaGVja291dCAtIExvbmdpdHVkIGRlbCB0ZWzDqWZvbm86Jywgc2FuaXRpemVkUGhvbmUubGVuZ3RoKTtcblxuICAgICAgLy8gUHJlcGFyYXIgZGF0b3MgcGFyYSBsYSBBUEkgKEV4cHJlc3MgQ2hlY2tvdXQgLSBjYW1wb3Mgc2ltcGxpZmljYWRvcylcbiAgICAgIGNvbnN0IHBheWxvYWQ6IENyZWF0ZVByZWZlcmVuY2VQYXlsb2FkID0ge1xuICAgICAgICBpdGVtczogY2FydEl0ZW1zLm1hcCgoaXRlbTogYW55KSA9PiAoe1xuICAgICAgICAgIGlkOiBpdGVtLmlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgbmFtZTogaXRlbS50aXRsZSxcbiAgICAgICAgICBwcmljZTogaXRlbS5kaXNjb3VudGVkUHJpY2UsXG4gICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgaW1hZ2U6IGl0ZW0uaW1ncz8ucHJldmlld3M/LlswXSB8fCAnJyxcbiAgICAgICAgfSkpLFxuICAgICAgICBwYXllcjoge1xuICAgICAgICAgIG5hbWU6IGJpbGxpbmcuZmlyc3ROYW1lIHx8ICdDbGllbnRlJywgLy8gVmFsb3IgcG9yIGRlZmVjdG8gcGFyYSBleHByZXNzIGNoZWNrb3V0XG4gICAgICAgICAgc3VybmFtZTogYmlsbGluZy5sYXN0TmFtZSB8fCAnRXhwcmVzcycsIC8vIFZhbG9yIHBvciBkZWZlY3RvIHBhcmEgZXhwcmVzcyBjaGVja291dFxuICAgICAgICAgIGVtYWlsOiBiaWxsaW5nLmVtYWlsLFxuICAgICAgICAgIHBob25lOiBzYW5pdGl6ZWRQaG9uZSwgLy8gVGVsw6lmb25vIHNhbml0aXphZG8gKHNvbG8gbsO6bWVyb3MpXG4gICAgICAgIH0sXG4gICAgICAgIHNoaXBwaW5nOiBzaGlwcGluZ0Nvc3QgPiAwID8ge1xuICAgICAgICAgIGNvc3Q6IHNoaXBwaW5nQ29zdCxcbiAgICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgICBzdHJlZXRfbmFtZTogYmlsbGluZy5zdHJlZXRBZGRyZXNzLFxuICAgICAgICAgICAgc3RyZWV0X251bWJlcjogXCIxMjNcIiwgLy8gTsO6bWVybyBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgemlwX2NvZGU6IGJpbGxpbmcuemlwQ29kZSB8fCBcIjUwMDBcIiwgLy8gQ8OzZGlnbyBwb3N0YWwgcG9yIGRlZmVjdG8gcGFyYSBDw7NyZG9iYVxuICAgICAgICAgICAgY2l0eV9uYW1lOiBiaWxsaW5nLmNpdHkgfHwgXCJDw7NyZG9iYVwiLFxuICAgICAgICAgICAgc3RhdGVfbmFtZTogYmlsbGluZy5zdGF0ZSB8fCBcIkPDs3Jkb2JhXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZXh0ZXJuYWxfcmVmZXJlbmNlOiBgZXhwcmVzc19jaGVja291dF8ke0RhdGUubm93KCl9YCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIHByb2Nlc3NFeHByZXNzQ2hlY2tvdXQgLSBQYXlsb2FkIGVudmlhZG86JywgcGF5bG9hZCk7XG5cbiAgICAgIC8vIExsYW1hciBhIGxhIEFQSVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXltZW50cy9jcmVhdGUtcHJlZmVyZW5jZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQ6IEFwaVJlc3BvbnNlPFBheW1lbnRQcmVmZXJlbmNlUmVzcG9uc2U+ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0Vycm9yIHByb2Nlc2FuZG8gZWwgcGFnbycpO1xuICAgICAgfVxuXG4gICAgICAvLyDinIUgU09MVUNJw5NOIEZJTkFMOiBSZWRpcmVjY2nDs24gZGlyZWN0YSBhIE1lcmNhZG9QYWdvXG4gICAgICAvLyBFc3RvIGV2aXRhIGVsIHByb2JsZW1hIGRlIGhvb2tzIGNvbiBlbCBXYWxsZXQgQnJpY2sgZW1iZWJpZG9cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJlZGlyaWdpZW5kbyBkaXJlY3RhbWVudGUgYSBNZXJjYWRvUGFnbzonLCByZXN1bHQuZGF0YS5pbml0X3BvaW50KTtcblxuICAgICAgLy8gQ2FtYmlhciBhIGVzdGFkbyBkZSByZWRpcmVjY2nDs24gaW5tZWRpYXRhbWVudGVcbiAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBzdGVwOiAncmVkaXJlY3QnLFxuICAgICAgICBwcmVmZXJlbmNlSWQ6IHJlc3VsdC5kYXRhLnByZWZlcmVuY2VfaWQsXG4gICAgICAgIGluaXRQb2ludDogcmVzdWx0LmRhdGEuaW5pdF9wb2ludCxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfSkpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gZXhwcmVzcyBjaGVja291dDonLCBlcnJvcik7XG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgc3RlcDogJ2Zvcm0nLFxuICAgICAgICBlcnJvcnM6IHsgZ2VuZXJhbDogZXJyb3IubWVzc2FnZSB8fCAnRXJyb3IgcHJvY2VzYW5kbyBlbCBwYWdvJyB9LFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEsIGNhcnRJdGVtcywgdmFsaWRhdGVFeHByZXNzRm9ybSwgY2FsY3VsYXRlU2hpcHBpbmdDb3N0LCBkaXNwYXRjaF0pO1xuXG4gIC8vIFByb2Nlc2FyIGNoZWNrb3V0IGNvbXBsZXRvXG4gIGNvbnN0IHByb2Nlc3NDaGVja291dCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBpZiAoIXZhbGlkYXRlRm9ybSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFyY2FyIHF1ZSBlbCBjaGVja291dCBlc3TDoSBlbiBwcm9ncmVzb1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2NoZWNrb3V0LWluLXByb2dyZXNzJywgJ3RydWUnKTtcblxuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0xvYWRpbmc6IHRydWUsIHN0ZXA6ICdwcm9jZXNzaW5nJyB9KSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBiaWxsaW5nLCBzaGlwcGluZyB9ID0gY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YTtcbiAgICAgIGNvbnN0IHNoaXBwaW5nQ29zdCA9IGNhbGN1bGF0ZVNoaXBwaW5nQ29zdCgpO1xuXG4gICAgICAvLyBQcmVwYXJhciBkYXRvcyBwYXJhIGxhIEFQSVxuICAgICAgY29uc3QgcGF5bG9hZDogQ3JlYXRlUHJlZmVyZW5jZVBheWxvYWQgPSB7XG4gICAgICAgIGl0ZW1zOiBjYXJ0SXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGl0ZW0uaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICBuYW1lOiBpdGVtLnRpdGxlLFxuICAgICAgICAgIHByaWNlOiBpdGVtLmRpc2NvdW50ZWRQcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICBpbWFnZTogaXRlbS5pbWdzPy5wcmV2aWV3cz8uWzBdIHx8ICcnLFxuICAgICAgICB9KSksXG4gICAgICAgIHBheWVyOiB7XG4gICAgICAgICAgbmFtZTogYmlsbGluZy5maXJzdE5hbWUsXG4gICAgICAgICAgc3VybmFtZTogYmlsbGluZy5sYXN0TmFtZSxcbiAgICAgICAgICBlbWFpbDogYmlsbGluZy5lbWFpbCxcbiAgICAgICAgICBwaG9uZTogYmlsbGluZy5waG9uZSxcbiAgICAgICAgfSxcbiAgICAgICAgc2hpcHBpbmc6IHNoaXBwaW5nQ29zdCA+IDAgPyB7XG4gICAgICAgICAgY29zdDogc2hpcHBpbmdDb3N0LFxuICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgIHN0cmVldF9uYW1lOiBzaGlwcGluZy5kaWZmZXJlbnRBZGRyZXNzID8gc2hpcHBpbmcuc3RyZWV0QWRkcmVzcyEgOiBiaWxsaW5nLnN0cmVldEFkZHJlc3MsXG4gICAgICAgICAgICBzdHJlZXRfbnVtYmVyOiBcIjEyM1wiLCAvLyBOw7ptZXJvIHBvciBkZWZlY3RvIGNvbW8gc3RyaW5nXG4gICAgICAgICAgICB6aXBfY29kZTogc2hpcHBpbmcuZGlmZmVyZW50QWRkcmVzcyA/IHNoaXBwaW5nLnppcENvZGUhIDogYmlsbGluZy56aXBDb2RlLFxuICAgICAgICAgICAgY2l0eV9uYW1lOiBzaGlwcGluZy5kaWZmZXJlbnRBZGRyZXNzID8gc2hpcHBpbmcuY2l0eSEgOiBiaWxsaW5nLmNpdHksXG4gICAgICAgICAgICBzdGF0ZV9uYW1lOiBzaGlwcGluZy5kaWZmZXJlbnRBZGRyZXNzID8gc2hpcHBpbmcuc3RhdGUhIDogYmlsbGluZy5zdGF0ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9IDogdW5kZWZpbmVkLFxuICAgICAgICBleHRlcm5hbF9yZWZlcmVuY2U6IGBjaGVja291dF8ke0RhdGUubm93KCl9YCxcbiAgICAgIH07XG5cbiAgICAgIC8vIExsYW1hciBhIGxhIEFQSVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXltZW50cy9jcmVhdGUtcHJlZmVyZW5jZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQ6IEFwaVJlc3BvbnNlPFBheW1lbnRQcmVmZXJlbmNlUmVzcG9uc2U+ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0Vycm9yIHByb2Nlc2FuZG8gZWwgcGFnbycpO1xuICAgICAgfVxuXG4gICAgICAvLyBQcm9jZXNhciByZXN1bHRhZG8gZXhpdG9zbyAtIG1vc3RyYXIgcGFzbyBkZSBwYWdvIG1hbnVhbFxuICAgICAgLy8gTk9UQTogTm8gbGltcGlhciBlbCBjYXJyaXRvIGFxdcOtLCBzZSBsaW1waWFyw6EgY3VhbmRvIGVsIHBhZ28gc2UgY29tcGxldGUgZXhpdG9zYW1lbnRlXG5cbiAgICAgIC8vIFVzYXIgV2FsbGV0IEJyaWNrIGVtYmViaWRvIChjb21wb3J0YW1pZW50byBwb3IgZGVmZWN0bylcbiAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBzdGVwOiAncGF5bWVudCcsXG4gICAgICAgIHByZWZlcmVuY2VJZDogcmVzdWx0LmRhdGEucHJlZmVyZW5jZV9pZCxcbiAgICAgICAgaW5pdFBvaW50OiByZXN1bHQuZGF0YS5pbml0X3BvaW50XG4gICAgICB9KSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBjaGVja291dDonLCBlcnJvcik7XG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgc3RlcDogJ2Zvcm0nLFxuICAgICAgICBlcnJvcnM6IHsgZ2VuZXJhbDogZXJyb3IubWVzc2FnZSB8fCAnRXJyb3IgcHJvY2VzYW5kbyBlbCBwYWdvJyB9LFxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEsIGNhcnRJdGVtcywgdmFsaWRhdGVGb3JtLCBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QsIGRpc3BhdGNoXSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQ0FMTEJBQ0tTIFBBUkEgV0FMTEVUIEJSSUNLXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGhhbmRsZVdhbGxldFJlYWR5ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdXYWxsZXQgQnJpY2sgZXN0w6EgbGlzdG8nKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZVdhbGxldEVycm9yID0gdXNlQ2FsbGJhY2soKGVycm9yOiBhbnkpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBXYWxsZXQgQnJpY2s6JywgZXJyb3IpO1xuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGVycm9yczogeyBwYXltZW50OiBlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBlbiBlbCBzaXN0ZW1hIGRlIHBhZ29zJyB9LFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVXYWxsZXRTdWJtaXQgPSB1c2VDYWxsYmFjaygoZGF0YTogYW55KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CfkrMgV2FsbGV0IFN1Ym1pdCAtIFBhZ28gZW52aWFkbyBkZXNkZSBXYWxsZXQgQnJpY2s6JywgZGF0YSk7XG4gICAgY29uc29sZS5sb2coJ/CfkrMgV2FsbGV0IFN1Ym1pdCAtIENhbWJpYW5kbyBhIHN0ZXAgcmVkaXJlY3QnKTtcblxuICAgIC8vIElNUE9SVEFOVEU6IE5PIGxpbXBpYXIgZWwgY2Fycml0byBhcXXDrVxuICAgIC8vIEVsIGNhcnJpdG8gc2UgbGltcGlhcsOhIHNvbG8gY3VhbmRvIGVsIHBhZ28gc2VhIGNvbmZpcm1hZG8gY29tbyBleGl0b3NvXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgc3RlcDogJ3JlZGlyZWN0JyxcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICAvLyBNZW1vcml6YXIgdmFsb3JlcyBjYWxjdWxhZG9zIHBhcmEgZXZpdGFyIHJlY3Vyc2nDs24gaW5maW5pdGFcbiAgY29uc3QgbWVtb2l6ZWRTaGlwcGluZ0Nvc3QgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29zdCA9IGNhbGN1bGF0ZVNoaXBwaW5nQ29zdCgpO1xuICAgICAgcmV0dXJuIHR5cGVvZiBjb3N0ID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oY29zdCkgPyBjb3N0IDogMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNhbGN1bGF0aW5nIHNoaXBwaW5nQ29zdDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH0sIFtjYWxjdWxhdGVTaGlwcGluZ0Nvc3RdKTtcblxuICBjb25zdCBtZW1vaXplZERpc2NvdW50ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpc2MgPSBjYWxjdWxhdGVEaXNjb3VudCgpO1xuICAgICAgcmV0dXJuIHR5cGVvZiBkaXNjID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oZGlzYykgPyBkaXNjIDogMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNhbGN1bGF0aW5nIGRpc2NvdW50OicsIGVycm9yKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSwgW2NhbGN1bGF0ZURpc2NvdW50XSk7XG5cbiAgY29uc3QgbWVtb2l6ZWRGaW5hbFRvdGFsID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRvdGFsID0gY2FsY3VsYXRlVG90YWwoKTtcbiAgICAgIHJldHVybiB0eXBlb2YgdG90YWwgPT09ICdudW1iZXInICYmICFpc05hTih0b3RhbCkgPyB0b3RhbCA6IDA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBjYWxjdWxhdGluZyBmaW5hbFRvdGFsOicsIGVycm9yKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSwgW2NhbGN1bGF0ZVRvdGFsXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBFc3RhZG9cbiAgICBmb3JtRGF0YTogY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YSxcbiAgICBpc0xvYWRpbmc6IGNoZWNrb3V0U3RhdGUuaXNMb2FkaW5nLFxuICAgIGVycm9yczogY2hlY2tvdXRTdGF0ZS5lcnJvcnMsXG4gICAgc3RlcDogY2hlY2tvdXRTdGF0ZS5zdGVwLFxuXG4gICAgLy8gRGF0b3MgcGFyYSBXYWxsZXQgQnJpY2tcbiAgICBwcmVmZXJlbmNlSWQ6IGNoZWNrb3V0U3RhdGUucHJlZmVyZW5jZUlkLFxuICAgIGluaXRQb2ludDogY2hlY2tvdXRTdGF0ZS5pbml0UG9pbnQsXG5cbiAgICAvLyBEYXRvcyBjYWxjdWxhZG9zXG4gICAgY2FydEl0ZW1zLFxuICAgIHRvdGFsUHJpY2UsXG4gICAgc2hpcHBpbmdDb3N0OiBtZW1vaXplZFNoaXBwaW5nQ29zdCxcbiAgICBkaXNjb3VudDogbWVtb2l6ZWREaXNjb3VudCxcbiAgICBmaW5hbFRvdGFsOiBtZW1vaXplZEZpbmFsVG90YWwsXG5cbiAgICAvLyBDdXBvbmVzXG4gICAgYXBwbGllZENvdXBvbixcbiAgICBhcHBseUNvdXBvbixcblxuICAgIC8vIEFjY2lvbmVzXG4gICAgdXBkYXRlRm9ybURhdGEsXG4gICAgdXBkYXRlQmlsbGluZ0RhdGEsXG4gICAgdXBkYXRlU2hpcHBpbmdEYXRhLFxuICAgIHZhbGlkYXRlRm9ybSxcbiAgICB2YWxpZGF0ZUV4cHJlc3NGb3JtLFxuICAgIHByb2Nlc3NDaGVja291dCxcbiAgICBwcm9jZXNzRXhwcmVzc0NoZWNrb3V0LFxuXG4gICAgLy8gQ2FsbGJhY2tzIHBhcmEgV2FsbGV0IEJyaWNrXG4gICAgaGFuZGxlV2FsbGV0UmVhZHksXG4gICAgaGFuZGxlV2FsbGV0RXJyb3IsXG4gICAgaGFuZGxlV2FsbGV0U3VibWl0LFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJ1c2VDaGVja291dCIsImluaXRpYWxGb3JtRGF0YSIsImJpbGxpbmciLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImRuaSIsImNvbXBhbnlOYW1lIiwiY291bnRyeSIsInN0cmVldEFkZHJlc3MiLCJhcGFydG1lbnQiLCJjaXR5Iiwic3RhdGUiLCJ6aXBDb2RlIiwicGhvbmUiLCJlbWFpbCIsIm9yZGVyTm90ZXMiLCJvYnNlcnZhdGlvbnMiLCJzaGlwcGluZyIsImRpZmZlcmVudEFkZHJlc3MiLCJwYXltZW50TWV0aG9kIiwic2hpcHBpbmdNZXRob2QiLCJjb3Vwb25Db2RlIiwiZGlzcGF0Y2giLCJ1c2VBcHBEaXNwYXRjaCIsImNhcnRJdGVtcyIsInVzZUFwcFNlbGVjdG9yIiwic2VsZWN0Q2FydEl0ZW1zIiwidG90YWxQcmljZSIsInNlbGVjdFRvdGFsUHJpY2UiLCJ1c2VyIiwiaXNMb2FkZWQiLCJ1c2VBdXRoIiwiY2hlY2tvdXRTdGF0ZSIsInNldENoZWNrb3V0U3RhdGUiLCJ1c2VTdGF0ZSIsImZvcm1EYXRhIiwiaXNMb2FkaW5nIiwiZXJyb3JzIiwic3RlcCIsInByZWZlcmVuY2VJZCIsInVuZGVmaW5lZCIsImluaXRQb2ludCIsImFwcGxpZWRDb3Vwb24iLCJzZXRBcHBsaWVkQ291cG9uIiwidXNlRWZmZWN0IiwidXNlckVtYWlsIiwiZnVsbE5hbWUiLCJuYW1lIiwibGFzdE5hbWVQYXJ0cyIsInNwbGl0Iiwiam9pbiIsInByZXYiLCJjYWxjdWxhdGVTaGlwcGluZ0Nvc3QiLCJ1c2VDYWxsYmFjayIsImNhbGN1bGF0ZURpc2NvdW50IiwidHlwZSIsIk1hdGgiLCJyb3VuZCIsImRpc2NvdW50IiwiY2FsY3VsYXRlVG90YWwiLCJ0b3RhbCIsIm1heCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVGb3JtRGF0YSIsInVwZGF0ZXMiLCJ1cGRhdGVCaWxsaW5nRGF0YSIsImJpbGxpbmdEYXRhIiwidXBkYXRlU2hpcHBpbmdEYXRhIiwic2hpcHBpbmdEYXRhIiwiYXBwbHlDb3Vwb24iLCJ0cmltIiwiY291cG9uIiwidmFsaWRDb3Vwb25zIiwidG9VcHBlckNhc2UiLCJjb2RlIiwiZXJyb3IiLCJ2YWxpZGF0ZUZvcm0iLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQaG9uZU51bWJlciIsImxlbmd0aCIsInRlc3QiLCJzaGlwcGluZ1N0cmVldEFkZHJlc3MiLCJzaGlwcGluZ0NpdHkiLCJzaGlwcGluZ1N0YXRlIiwic2hpcHBpbmdaaXBDb2RlIiwiY2FydCIsIk9iamVjdCIsImtleXMiLCJ2YWxpZGF0ZUV4cHJlc3NGb3JtIiwiY2FydEl0ZW1zTGVuZ3RoIiwiY3VycmVudFN0ZXAiLCJ2YWxpZGF0ZUROSSIsInByb2Nlc3NFeHByZXNzQ2hlY2tvdXQiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJzaGlwcGluZ0Nvc3QiLCJzYW5pdGl6ZWRQaG9uZSIsInJlcGxhY2UiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwicGF5bG9hZCIsIml0ZW1zIiwibWFwIiwiaXRlbSIsImlkIiwidG9TdHJpbmciLCJ0aXRsZSIsInByaWNlIiwiZGlzY291bnRlZFByaWNlIiwicXVhbnRpdHkiLCJpbWFnZSIsImltZ3MiLCJwcmV2aWV3cyIsInBheWVyIiwic3VybmFtZSIsImNvc3QiLCJhZGRyZXNzIiwic3RyZWV0X25hbWUiLCJzdHJlZXRfbnVtYmVyIiwiemlwX2NvZGUiLCJjaXR5X25hbWUiLCJzdGF0ZV9uYW1lIiwiZXh0ZXJuYWxfcmVmZXJlbmNlIiwiRGF0ZSIsIm5vdyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXN1bHQiLCJqc29uIiwic3VjY2VzcyIsIkVycm9yIiwiZGF0YSIsImluaXRfcG9pbnQiLCJwcmVmZXJlbmNlX2lkIiwiZ2VuZXJhbCIsIm1lc3NhZ2UiLCJwcm9jZXNzQ2hlY2tvdXQiLCJoYW5kbGVXYWxsZXRSZWFkeSIsImhhbmRsZVdhbGxldEVycm9yIiwicGF5bWVudCIsImhhbmRsZVdhbGxldFN1Ym1pdCIsIm1lbW9pemVkU2hpcHBpbmdDb3N0IiwidXNlTWVtbyIsImlzTmFOIiwibWVtb2l6ZWREaXNjb3VudCIsImRpc2MiLCJtZW1vaXplZEZpbmFsVG90YWwiLCJmaW5hbFRvdGFsIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBbUNhQTs7O2VBQUFBOzs7dUJBakM2Qzt1QkFDWDsyQkFDMkI7eUJBR2xEOzRCQUN3QztBQUVoRSxNQUFNQyxrQkFBb0M7SUFDeENDLFNBQVM7UUFDUEMsV0FBVztRQUNYQyxVQUFVO1FBQ1ZDLEtBQUs7UUFDTEMsYUFBYTtRQUNiQyxTQUFTO1FBQ1RDLGVBQWU7UUFDZkMsV0FBVztRQUNYQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsU0FBUztRQUNUQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsWUFBWTtRQUNaQyxjQUFjO0lBQ2hCO0lBQ0FDLFVBQVU7UUFDUkMsa0JBQWtCO0lB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