dd2ad81dc7a582aeba816c07bc82f0a3
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useProductFormReducer () {
        return useProductFormReducer;
    },
    get useProductFormValidation () {
        return useProductFormValidation;
    }
});
const _react = require("react");
// Estado inicial
const initialState = {
    // Información básica
    name: '',
    description: '',
    shortDescription: '',
    categoryId: '',
    status: 'draft',
    // Detalles del producto
    brand: '',
    model: '',
    sku: '',
    barcode: '',
    // Precios
    price: 0,
    comparePrice: 0,
    costPrice: 0,
    taxRate: 0,
    // Inventario
    trackInventory: true,
    stock: 0,
    lowStockThreshold: 5,
    allowBackorder: false,
    // Envío
    requiresShipping: true,
    weight: 0,
    dimensions: {
        length: 0,
        width: 0,
        height: 0
    },
    // SEO
    seoTitle: '',
    seoDescription: '',
    seoKeywords: [],
    // Imágenes y variantes
    images: [],
    variants: [],
    // Estado del formulario
    isLoading: false,
    isSaving: false,
    errors: {},
    isDirty: false,
    currentStep: 0,
    validationErrors: {}
};
// Reducer function
function productFormReducer(state, action) {
    switch(action.type){
        case 'SET_FIELD':
            return {
                ...state,
                [action.field]: action.value,
                isDirty: true,
                // Limpiar error del campo si existe
                errors: {
                    ...state.errors,
                    [action.field]: undefined
                }
            };
        case 'SET_MULTIPLE_FIELDS':
            return {
                ...state,
                ...action.fields,
                isDirty: true
            };
        case 'SET_LOADING':
            return {
                ...state,
                isLoading: action.payload
            };
        case 'SET_SAVING':
            return {
                ...state,
                isSaving: action.payload
            };
        case 'SET_ERROR':
            return {
                ...state,
                errors: {
                    ...state.errors,
                    [action.field]: action.error
                }
            };
        case 'CLEAR_ERROR':
            const { [action.field]: _, ...restErrors } = state.errors;
            return {
                ...state,
                errors: restErrors
            };
        case 'CLEAR_ALL_ERRORS':
            return {
                ...state,
                errors: {},
                validationErrors: {}
            };
        case 'SET_VALIDATION_ERRORS':
            return {
                ...state,
                validationErrors: action.errors
            };
        case 'SET_DIRTY':
            return {
                ...state,
                isDirty: action.payload
            };
        case 'SET_STEP':
            return {
                ...state,
                currentStep: Math.max(0, Math.min(4, action.step))
            };
        case 'NEXT_STEP':
            return {
                ...state,
                currentStep: Math.min(4, state.currentStep + 1)
            };
        case 'PREV_STEP':
            return {
                ...state,
                currentStep: Math.max(0, state.currentStep - 1)
            };
        case 'ADD_IMAGE':
            return {
                ...state,
                images: [
                    ...state.images,
                    action.image
                ],
                isDirty: true
            };
        case 'REMOVE_IMAGE':
            return {
                ...state,
                images: state.images.filter((_, index)=>index !== action.index),
                isDirty: true
            };
        case 'ADD_VARIANT':
            return {
                ...state,
                variants: [
                    ...state.variants,
                    action.variant
                ],
                isDirty: true
            };
        case 'REMOVE_VARIANT':
            return {
                ...state,
                variants: state.variants.filter((_, index)=>index !== action.index),
                isDirty: true
            };
        case 'UPDATE_VARIANT':
            return {
                ...state,
                variants: state.variants.map((variant, index)=>index === action.index ? action.variant : variant),
                isDirty: true
            };
        case 'ADD_SEO_KEYWORD':
            if (!state.seoKeywords.includes(action.keyword)) {
                return {
                    ...state,
                    seoKeywords: [
                        ...state.seoKeywords,
                        action.keyword
                    ],
                    isDirty: true
                };
            }
            return state;
        case 'REMOVE_SEO_KEYWORD':
            return {
                ...state,
                seoKeywords: state.seoKeywords.filter((_, index)=>index !== action.index),
                isDirty: true
            };
        case 'RESET_FORM':
            return initialState;
        case 'LOAD_PRODUCT':
            return {
                ...state,
                ...action.product,
                isDirty: false
            };
        default:
            return state;
    }
}
function useProductFormReducer() {
    const [state, dispatch] = (0, _react.useReducer)(productFormReducer, initialState);
    // Acciones memoizadas
    const actions = (0, _react.useMemo)(()=>({
            setField: (field, value)=>dispatch({
                    type: 'SET_FIELD',
                    field,
                    value
                }),
            setMultipleFields: (fields)=>dispatch({
                    type: 'SET_MULTIPLE_FIELDS',
                    fields
                }),
            setLoading: (loading)=>dispatch({
                    type: 'SET_LOADING',
                    payload: loading
                }),
            setSaving: (saving)=>dispatch({
                    type: 'SET_SAVING',
                    payload: saving
                }),
            setError: (field, error)=>dispatch({
                    type: 'SET_ERROR',
                    field,
                    error
                }),
            clearError: (field)=>dispatch({
                    type: 'CLEAR_ERROR',
                    field
                }),
            clearAllErrors: ()=>dispatch({
                    type: 'CLEAR_ALL_ERRORS'
                }),
            setValidationErrors: (errors)=>dispatch({
                    type: 'SET_VALIDATION_ERRORS',
                    errors
                }),
            setDirty: (dirty)=>dispatch({
                    type: 'SET_DIRTY',
                    payload: dirty
                }),
            setStep: (step)=>dispatch({
                    type: 'SET_STEP',
                    step
                }),
            nextStep: ()=>dispatch({
                    type: 'NEXT_STEP'
                }),
            prevStep: ()=>dispatch({
                    type: 'PREV_STEP'
                }),
            addImage: (image)=>dispatch({
                    type: 'ADD_IMAGE',
                    image
                }),
            removeImage: (index)=>dispatch({
                    type: 'REMOVE_IMAGE',
                    index
                }),
            addVariant: (variant)=>dispatch({
                    type: 'ADD_VARIANT',
                    variant
                }),
            removeVariant: (index)=>dispatch({
                    type: 'REMOVE_VARIANT',
                    index
                }),
            updateVariant: (index, variant)=>dispatch({
                    type: 'UPDATE_VARIANT',
                    index,
                    variant
                }),
            addSeoKeyword: (keyword)=>dispatch({
                    type: 'ADD_SEO_KEYWORD',
                    keyword
                }),
            removeSeoKeyword: (index)=>dispatch({
                    type: 'REMOVE_SEO_KEYWORD',
                    index
                }),
            resetForm: ()=>dispatch({
                    type: 'RESET_FORM'
                }),
            loadProduct: (product)=>dispatch({
                    type: 'LOAD_PRODUCT',
                    product
                })
        }), []);
    // Selectores memoizados
    const selectors = (0, _react.useMemo)(()=>({
            // Verificaciones de estado
            hasErrors: Object.keys(state.errors).length > 0,
            hasValidationErrors: Object.keys(state.validationErrors).length > 0,
            isFormValid: Object.keys(state.errors).length === 0 && state.name.trim() !== '',
            // Información de pasos
            isFirstStep: state.currentStep === 0,
            isLastStep: state.currentStep === 4,
            stepProgress: (state.currentStep + 1) / 5 * 100,
            // Cálculos de precios
            profitMargin: state.price > 0 && state.costPrice > 0 ? (state.price - state.costPrice) / state.price * 100 : 0,
            discountPercentage: state.comparePrice > 0 && state.price > 0 ? (state.comparePrice - state.price) / state.comparePrice * 100 : 0,
            // Estado de inventario
            isLowStock: state.stock <= state.lowStockThreshold,
            isOutOfStock: state.stock === 0,
            // Validaciones específicas
            isPriceValid: state.price > 0,
            isSkuValid: state.sku.length > 0,
            areDimensionsValid: state.dimensions.length > 0 && state.dimensions.width > 0 && state.dimensions.height > 0,
            // Contadores
            imageCount: state.images.length,
            variantCount: state.variants.length,
            keywordCount: state.seoKeywords.length,
            // Obtener errores por paso
            getStepErrors: (step)=>{
                const stepFields = {
                    0: [
                        'name',
                        'description',
                        'categoryId'
                    ],
                    1: [
                        'price',
                        'comparePrice',
                        'costPrice'
                    ],
                    2: [
                        'stock',
                        'lowStockThreshold'
                    ],
                    3: [
                        'images'
                    ],
                    4: [
                        'seoTitle',
                        'seoDescription'
                    ]
                };
                const fields = stepFields[step] || [];
                return fields.filter((field)=>state.errors[field]);
            }
        }), [
        state
    ]);
    return {
        state,
        actions,
        selectors
    };
}
function useProductFormValidation() {
    const { state, actions, selectors } = useProductFormReducer();
    const validateField = (0, _react.useCallback)((field, value)=>{
        let error = '';
        switch(field){
            case 'name':
                if (!value || value.trim().length === 0) {
                    error = 'El nombre es requerido';
                } else if (value.length > 255) {
                    error = 'Máximo 255 caracteres';
                }
                break;
            case 'price':
                if (value <= 0) {
                    error = 'El precio debe ser mayor a 0';
                } else if (value > 999999.99) {
                    error = 'Precio máximo excedido';
                }
                break;
            case 'comparePrice':
                if (value > 0 && value < state.price) {
                    error = 'El precio de comparación debe ser mayor al precio base';
                }
                break;
            case 'costPrice':
                if (value > 0 && value > state.price) {
                    error = 'El precio de costo debe ser menor al precio de venta';
                }
                break;
            case 'stock':
                if (value < 0) {
                    error = 'El stock debe ser mayor o igual a 0';
                } else if (value > 999999) {
                    error = 'Stock máximo excedido';
                }
                break;
            case 'sku':
                if (value && !/^[A-Z0-9\-_]+$/.test(value)) {
                    error = 'SKU debe contener solo letras mayúsculas, números, guiones y guiones bajos';
                }
                break;
        }
        if (error) {
            actions.setError(field, error);
        } else {
            actions.clearError(field);
        }
        return error === '';
    }, [
        state.price,
        actions
    ]);
    const validateForm = (0, _react.useCallback)(()=>{
        const fields = [
            'name',
            'price',
            'stock',
            'categoryId'
        ];
        let isValid = true;
        fields.forEach((field)=>{
            const fieldValid = validateField(field, state[field]);
            if (!fieldValid) isValid = false;
        });
        return isValid;
    }, [
        state,
        validateField
    ]);
    return {
        state,
        actions,
        selectors,
        validateField,
        validateForm
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXG9wdGltaXphdGlvblxcdXNlUHJvZHVjdEZvcm1SZWR1Y2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJlZHVjZXIsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG4vLyBUaXBvcyBwYXJhIGVsIGVzdGFkbyBkZWwgZm9ybXVsYXJpbyBkZSBwcm9kdWN0b3NcbmludGVyZmFjZSBQcm9kdWN0Rm9ybVN0YXRlIHtcbiAgLy8gSW5mb3JtYWNpw7NuIGLDoXNpY2FcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzaG9ydERlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5SWQ6IHN0cmluZztcbiAgc3RhdHVzOiAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgfCAnZHJhZnQnO1xuICBcbiAgLy8gRGV0YWxsZXMgZGVsIHByb2R1Y3RvXG4gIGJyYW5kOiBzdHJpbmc7XG4gIG1vZGVsOiBzdHJpbmc7XG4gIHNrdTogc3RyaW5nO1xuICBiYXJjb2RlOiBzdHJpbmc7XG4gIFxuICAvLyBQcmVjaW9zXG4gIHByaWNlOiBudW1iZXI7XG4gIGNvbXBhcmVQcmljZTogbnVtYmVyO1xuICBjb3N0UHJpY2U6IG51bWJlcjtcbiAgdGF4UmF0ZTogbnVtYmVyO1xuICBcbiAgLy8gSW52ZW50YXJpb1xuICB0cmFja0ludmVudG9yeTogYm9vbGVhbjtcbiAgc3RvY2s6IG51bWJlcjtcbiAgbG93U3RvY2tUaHJlc2hvbGQ6IG51bWJlcjtcbiAgYWxsb3dCYWNrb3JkZXI6IGJvb2xlYW47XG4gIFxuICAvLyBFbnbDrW9cbiAgcmVxdWlyZXNTaGlwcGluZzogYm9vbGVhbjtcbiAgd2VpZ2h0OiBudW1iZXI7XG4gIGRpbWVuc2lvbnM6IHtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xuICB9O1xuICBcbiAgLy8gU0VPXG4gIHNlb1RpdGxlOiBzdHJpbmc7XG4gIHNlb0Rlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHNlb0tleXdvcmRzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIEltw6FnZW5lcyB5IHZhcmlhbnRlc1xuICBpbWFnZXM6IHN0cmluZ1tdO1xuICB2YXJpYW50czogYW55W107XG4gIFxuICAvLyBFc3RhZG8gZGVsIGZvcm11bGFyaW9cbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBpc1NhdmluZzogYm9vbGVhbjtcbiAgZXJyb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBpc0RpcnR5OiBib29sZWFuO1xuICBjdXJyZW50U3RlcDogbnVtYmVyO1xuICB2YWxpZGF0aW9uRXJyb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT47XG59XG5cbi8vIFRpcG9zIGRlIGFjY2lvbmVzXG50eXBlIFByb2R1Y3RGb3JtQWN0aW9uID1cbiAgfCB7IHR5cGU6ICdTRVRfRklFTEQnOyBmaWVsZDoga2V5b2YgUHJvZHVjdEZvcm1TdGF0ZTsgdmFsdWU6IGFueSB9XG4gIHwgeyB0eXBlOiAnU0VUX01VTFRJUExFX0ZJRUxEUyc7IGZpZWxkczogUGFydGlhbDxQcm9kdWN0Rm9ybVN0YXRlPiB9XG4gIHwgeyB0eXBlOiAnU0VUX0xPQURJTkcnOyBwYXlsb2FkOiBib29sZWFuIH1cbiAgfCB7IHR5cGU6ICdTRVRfU0FWSU5HJzsgcGF5bG9hZDogYm9vbGVhbiB9XG4gIHwgeyB0eXBlOiAnU0VUX0VSUk9SJzsgZmllbGQ6IHN0cmluZzsgZXJyb3I6IHN0cmluZyB9XG4gIHwgeyB0eXBlOiAnQ0xFQVJfRVJST1InOyBmaWVsZDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6ICdDTEVBUl9BTExfRVJST1JTJyB9XG4gIHwgeyB0eXBlOiAnU0VUX1ZBTElEQVRJT05fRVJST1JTJzsgZXJyb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gfVxuICB8IHsgdHlwZTogJ1NFVF9ESVJUWSc7IHBheWxvYWQ6IGJvb2xlYW4gfVxuICB8IHsgdHlwZTogJ1NFVF9TVEVQJzsgc3RlcDogbnVtYmVyIH1cbiAgfCB7IHR5cGU6ICdORVhUX1NURVAnIH1cbiAgfCB7IHR5cGU6ICdQUkVWX1NURVAnIH1cbiAgfCB7IHR5cGU6ICdBRERfSU1BR0UnOyBpbWFnZTogc3RyaW5nIH1cbiAgfCB7IHR5cGU6ICdSRU1PVkVfSU1BR0UnOyBpbmRleDogbnVtYmVyIH1cbiAgfCB7IHR5cGU6ICdBRERfVkFSSUFOVCc7IHZhcmlhbnQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnUkVNT1ZFX1ZBUklBTlQnOyBpbmRleDogbnVtYmVyIH1cbiAgfCB7IHR5cGU6ICdVUERBVEVfVkFSSUFOVCc7IGluZGV4OiBudW1iZXI7IHZhcmlhbnQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnQUREX1NFT19LRVlXT1JEJzsga2V5d29yZDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6ICdSRU1PVkVfU0VPX0tFWVdPUkQnOyBpbmRleDogbnVtYmVyIH1cbiAgfCB7IHR5cGU6ICdSRVNFVF9GT1JNJyB9XG4gIHwgeyB0eXBlOiAnTE9BRF9QUk9EVUNUJzsgcHJvZHVjdDogUGFydGlhbDxQcm9kdWN0Rm9ybVN0YXRlPiB9O1xuXG4vLyBFc3RhZG8gaW5pY2lhbFxuY29uc3QgaW5pdGlhbFN0YXRlOiBQcm9kdWN0Rm9ybVN0YXRlID0ge1xuICAvLyBJbmZvcm1hY2nDs24gYsOhc2ljYVxuICBuYW1lOiAnJyxcbiAgZGVzY3JpcHRpb246ICcnLFxuICBzaG9ydERlc2NyaXB0aW9uOiAnJyxcbiAgY2F0ZWdvcnlJZDogJycsXG4gIHN0YXR1czogJ2RyYWZ0JyxcbiAgXG4gIC8vIERldGFsbGVzIGRlbCBwcm9kdWN0b1xuICBicmFuZDogJycsXG4gIG1vZGVsOiAnJyxcbiAgc2t1OiAnJyxcbiAgYmFyY29kZTogJycsXG4gIFxuICAvLyBQcmVjaW9zXG4gIHByaWNlOiAwLFxuICBjb21wYXJlUHJpY2U6IDAsXG4gIGNvc3RQcmljZTogMCxcbiAgdGF4UmF0ZTogMCxcbiAgXG4gIC8vIEludmVudGFyaW9cbiAgdHJhY2tJbnZlbnRvcnk6IHRydWUsXG4gIHN0b2NrOiAwLFxuICBsb3dTdG9ja1RocmVzaG9sZDogNSxcbiAgYWxsb3dCYWNrb3JkZXI6IGZhbHNlLFxuICBcbiAgLy8gRW52w61vXG4gIHJlcXVpcmVzU2hpcHBpbmc6IHRydWUsXG4gIHdlaWdodDogMCxcbiAgZGltZW5zaW9uczoge1xuICAgIGxlbmd0aDogMCxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDAsXG4gIH0sXG4gIFxuICAvLyBTRU9cbiAgc2VvVGl0bGU6ICcnLFxuICBzZW9EZXNjcmlwdGlvbjogJycsXG4gIHNlb0tleXdvcmRzOiBbXSxcbiAgXG4gIC8vIEltw6FnZW5lcyB5IHZhcmlhbnRlc1xuICBpbWFnZXM6IFtdLFxuICB2YXJpYW50czogW10sXG4gIFxuICAvLyBFc3RhZG8gZGVsIGZvcm11bGFyaW9cbiAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgaXNTYXZpbmc6IGZhbHNlLFxuICBlcnJvcnM6IHt9LFxuICBpc0RpcnR5OiBmYWxzZSxcbiAgY3VycmVudFN0ZXA6IDAsXG4gIHZhbGlkYXRpb25FcnJvcnM6IHt9LFxufTtcblxuLy8gUmVkdWNlciBmdW5jdGlvblxuZnVuY3Rpb24gcHJvZHVjdEZvcm1SZWR1Y2VyKFxuICBzdGF0ZTogUHJvZHVjdEZvcm1TdGF0ZSxcbiAgYWN0aW9uOiBQcm9kdWN0Rm9ybUFjdGlvblxuKTogUHJvZHVjdEZvcm1TdGF0ZSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdTRVRfRklFTEQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIFthY3Rpb24uZmllbGRdOiBhY3Rpb24udmFsdWUsXG4gICAgICAgIGlzRGlydHk6IHRydWUsXG4gICAgICAgIC8vIExpbXBpYXIgZXJyb3IgZGVsIGNhbXBvIHNpIGV4aXN0ZVxuICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5lcnJvcnMsXG4gICAgICAgICAgW2FjdGlvbi5maWVsZF06IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnU0VUX01VTFRJUExFX0ZJRUxEUyc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgLi4uYWN0aW9uLmZpZWxkcyxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnU0VUX0xPQURJTkcnOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGlzTG9hZGluZzogYWN0aW9uLnBheWxvYWQgfTtcbiAgICBcbiAgICBjYXNlICdTRVRfU0FWSU5HJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBpc1NhdmluZzogYWN0aW9uLnBheWxvYWQgfTtcbiAgICBcbiAgICBjYXNlICdTRVRfRVJST1InOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGVycm9yczoge1xuICAgICAgICAgIC4uLnN0YXRlLmVycm9ycyxcbiAgICAgICAgICBbYWN0aW9uLmZpZWxkXTogYWN0aW9uLmVycm9yLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICBcbiAgICBjYXNlICdDTEVBUl9FUlJPUic6XG4gICAgICBjb25zdCB7IFthY3Rpb24uZmllbGRdOiBfLCAuLi5yZXN0RXJyb3JzIH0gPSBzdGF0ZS5lcnJvcnM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgZXJyb3JzOiByZXN0RXJyb3JzLFxuICAgICAgfTtcbiAgICBcbiAgICBjYXNlICdDTEVBUl9BTExfRVJST1JTJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBlcnJvcnM6IHt9LFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7fSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnU0VUX1ZBTElEQVRJT05fRVJST1JTJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzOiBhY3Rpb24uZXJyb3JzLFxuICAgICAgfTtcbiAgICBcbiAgICBjYXNlICdTRVRfRElSVFknOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGlzRGlydHk6IGFjdGlvbi5wYXlsb2FkIH07XG4gICAgXG4gICAgY2FzZSAnU0VUX1NURVAnOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGN1cnJlbnRTdGVwOiBNYXRoLm1heCgwLCBNYXRoLm1pbig0LCBhY3Rpb24uc3RlcCkpIH07XG4gICAgXG4gICAgY2FzZSAnTkVYVF9TVEVQJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBjdXJyZW50U3RlcDogTWF0aC5taW4oNCwgc3RhdGUuY3VycmVudFN0ZXAgKyAxKSB9O1xuICAgIFxuICAgIGNhc2UgJ1BSRVZfU1RFUCc6XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudFN0ZXA6IE1hdGgubWF4KDAsIHN0YXRlLmN1cnJlbnRTdGVwIC0gMSkgfTtcbiAgICBcbiAgICBjYXNlICdBRERfSU1BR0UnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGltYWdlczogWy4uLnN0YXRlLmltYWdlcywgYWN0aW9uLmltYWdlXSxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnUkVNT1ZFX0lNQUdFJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpbWFnZXM6IHN0YXRlLmltYWdlcy5maWx0ZXIoKF8sIGluZGV4KSA9PiBpbmRleCAhPT0gYWN0aW9uLmluZGV4KSxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnQUREX1ZBUklBTlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHZhcmlhbnRzOiBbLi4uc3RhdGUudmFyaWFudHMsIGFjdGlvbi52YXJpYW50XSxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnUkVNT1ZFX1ZBUklBTlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHZhcmlhbnRzOiBzdGF0ZS52YXJpYW50cy5maWx0ZXIoKF8sIGluZGV4KSA9PiBpbmRleCAhPT0gYWN0aW9uLmluZGV4KSxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnVVBEQVRFX1ZBUklBTlQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHZhcmlhbnRzOiBzdGF0ZS52YXJpYW50cy5tYXAoKHZhcmlhbnQsIGluZGV4KSA9PlxuICAgICAgICAgIGluZGV4ID09PSBhY3Rpb24uaW5kZXggPyBhY3Rpb24udmFyaWFudCA6IHZhcmlhbnRcbiAgICAgICAgKSxcbiAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgIH07XG4gICAgXG4gICAgY2FzZSAnQUREX1NFT19LRVlXT1JEJzpcbiAgICAgIGlmICghc3RhdGUuc2VvS2V5d29yZHMuaW5jbHVkZXMoYWN0aW9uLmtleXdvcmQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgc2VvS2V5d29yZHM6IFsuLi5zdGF0ZS5zZW9LZXl3b3JkcywgYWN0aW9uLmtleXdvcmRdLFxuICAgICAgICAgIGlzRGlydHk6IHRydWUsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgXG4gICAgY2FzZSAnUkVNT1ZFX1NFT19LRVlXT1JEJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBzZW9LZXl3b3Jkczogc3RhdGUuc2VvS2V5d29yZHMuZmlsdGVyKChfLCBpbmRleCkgPT4gaW5kZXggIT09IGFjdGlvbi5pbmRleCksXG4gICAgICAgIGlzRGlydHk6IHRydWUsXG4gICAgICB9O1xuICAgIFxuICAgIGNhc2UgJ1JFU0VUX0ZPUk0nOlxuICAgICAgcmV0dXJuIGluaXRpYWxTdGF0ZTtcbiAgICBcbiAgICBjYXNlICdMT0FEX1BST0RVQ1QnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIC4uLmFjdGlvbi5wcm9kdWN0LFxuICAgICAgICBpc0RpcnR5OiBmYWxzZSxcbiAgICAgIH07XG4gICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG4vLyBIb29rIHBlcnNvbmFsaXphZG9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9kdWN0Rm9ybVJlZHVjZXIoKSB7XG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihwcm9kdWN0Rm9ybVJlZHVjZXIsIGluaXRpYWxTdGF0ZSk7XG5cbiAgLy8gQWNjaW9uZXMgbWVtb2l6YWRhc1xuICBjb25zdCBhY3Rpb25zID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIHNldEZpZWxkOiAoZmllbGQ6IGtleW9mIFByb2R1Y3RGb3JtU3RhdGUsIHZhbHVlOiBhbnkpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfRklFTEQnLCBmaWVsZCwgdmFsdWUgfSksXG4gICAgXG4gICAgc2V0TXVsdGlwbGVGaWVsZHM6IChmaWVsZHM6IFBhcnRpYWw8UHJvZHVjdEZvcm1TdGF0ZT4pID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTVVMVElQTEVfRklFTERTJywgZmllbGRzIH0pLFxuICAgIFxuICAgIHNldExvYWRpbmc6IChsb2FkaW5nOiBib29sZWFuKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBsb2FkaW5nIH0pLFxuICAgIFxuICAgIHNldFNhdmluZzogKHNhdmluZzogYm9vbGVhbikgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9TQVZJTkcnLCBwYXlsb2FkOiBzYXZpbmcgfSksXG4gICAgXG4gICAgc2V0RXJyb3I6IChmaWVsZDogc3RyaW5nLCBlcnJvcjogc3RyaW5nKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgZmllbGQsIGVycm9yIH0pLFxuICAgIFxuICAgIGNsZWFyRXJyb3I6IChmaWVsZDogc3RyaW5nKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnQ0xFQVJfRVJST1InLCBmaWVsZCB9KSxcbiAgICBcbiAgICBjbGVhckFsbEVycm9yczogKCkgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0NMRUFSX0FMTF9FUlJPUlMnIH0pLFxuICAgIFxuICAgIHNldFZhbGlkYXRpb25FcnJvcnM6IChlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPikgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9WQUxJREFUSU9OX0VSUk9SUycsIGVycm9ycyB9KSxcbiAgICBcbiAgICBzZXREaXJ0eTogKGRpcnR5OiBib29sZWFuKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0RJUlRZJywgcGF5bG9hZDogZGlydHkgfSksXG4gICAgXG4gICAgc2V0U3RlcDogKHN0ZXA6IG51bWJlcikgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9TVEVQJywgc3RlcCB9KSxcbiAgICBcbiAgICBuZXh0U3RlcDogKCkgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ05FWFRfU1RFUCcgfSksXG4gICAgXG4gICAgcHJldlN0ZXA6ICgpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdQUkVWX1NURVAnIH0pLFxuICAgIFxuICAgIGFkZEltYWdlOiAoaW1hZ2U6IHN0cmluZykgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0FERF9JTUFHRScsIGltYWdlIH0pLFxuICAgIFxuICAgIHJlbW92ZUltYWdlOiAoaW5kZXg6IG51bWJlcikgPT5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1JFTU9WRV9JTUFHRScsIGluZGV4IH0pLFxuICAgIFxuICAgIGFkZFZhcmlhbnQ6ICh2YXJpYW50OiBhbnkpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdBRERfVkFSSUFOVCcsIHZhcmlhbnQgfSksXG4gICAgXG4gICAgcmVtb3ZlVmFyaWFudDogKGluZGV4OiBudW1iZXIpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdSRU1PVkVfVkFSSUFOVCcsIGluZGV4IH0pLFxuICAgIFxuICAgIHVwZGF0ZVZhcmlhbnQ6IChpbmRleDogbnVtYmVyLCB2YXJpYW50OiBhbnkpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfVkFSSUFOVCcsIGluZGV4LCB2YXJpYW50IH0pLFxuICAgIFxuICAgIGFkZFNlb0tleXdvcmQ6IChrZXl3b3JkOiBzdHJpbmcpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdBRERfU0VPX0tFWVdPUkQnLCBrZXl3b3JkIH0pLFxuICAgIFxuICAgIHJlbW92ZVNlb0tleXdvcmQ6IChpbmRleDogbnVtYmVyKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnUkVNT1ZFX1NFT19LRVlXT1JEJywgaW5kZXggfSksXG4gICAgXG4gICAgcmVzZXRGb3JtOiAoKSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnUkVTRVRfRk9STScgfSksXG4gICAgXG4gICAgbG9hZFByb2R1Y3Q6IChwcm9kdWN0OiBQYXJ0aWFsPFByb2R1Y3RGb3JtU3RhdGU+KSA9PlxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnTE9BRF9QUk9EVUNUJywgcHJvZHVjdCB9KSxcbiAgfSksIFtdKTtcblxuICAvLyBTZWxlY3RvcmVzIG1lbW9pemFkb3NcbiAgY29uc3Qgc2VsZWN0b3JzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIC8vIFZlcmlmaWNhY2lvbmVzIGRlIGVzdGFkb1xuICAgIGhhc0Vycm9yczogT2JqZWN0LmtleXMoc3RhdGUuZXJyb3JzKS5sZW5ndGggPiAwLFxuICAgIGhhc1ZhbGlkYXRpb25FcnJvcnM6IE9iamVjdC5rZXlzKHN0YXRlLnZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDAsXG4gICAgaXNGb3JtVmFsaWQ6IE9iamVjdC5rZXlzKHN0YXRlLmVycm9ycykubGVuZ3RoID09PSAwICYmIHN0YXRlLm5hbWUudHJpbSgpICE9PSAnJyxcbiAgICBcbiAgICAvLyBJbmZvcm1hY2nDs24gZGUgcGFzb3NcbiAgICBpc0ZpcnN0U3RlcDogc3RhdGUuY3VycmVudFN0ZXAgPT09IDAsXG4gICAgaXNMYXN0U3RlcDogc3RhdGUuY3VycmVudFN0ZXAgPT09IDQsXG4gICAgc3RlcFByb2dyZXNzOiAoKHN0YXRlLmN1cnJlbnRTdGVwICsgMSkgLyA1KSAqIDEwMCxcbiAgICBcbiAgICAvLyBDw6FsY3Vsb3MgZGUgcHJlY2lvc1xuICAgIHByb2ZpdE1hcmdpbjogc3RhdGUucHJpY2UgPiAwICYmIHN0YXRlLmNvc3RQcmljZSA+IDAgXG4gICAgICA/ICgoc3RhdGUucHJpY2UgLSBzdGF0ZS5jb3N0UHJpY2UpIC8gc3RhdGUucHJpY2UpICogMTAwIFxuICAgICAgOiAwLFxuICAgIFxuICAgIGRpc2NvdW50UGVyY2VudGFnZTogc3RhdGUuY29tcGFyZVByaWNlID4gMCAmJiBzdGF0ZS5wcmljZSA+IDBcbiAgICAgID8gKChzdGF0ZS5jb21wYXJlUHJpY2UgLSBzdGF0ZS5wcmljZSkgLyBzdGF0ZS5jb21wYXJlUHJpY2UpICogMTAwXG4gICAgICA6IDAsXG4gICAgXG4gICAgLy8gRXN0YWRvIGRlIGludmVudGFyaW9cbiAgICBpc0xvd1N0b2NrOiBzdGF0ZS5zdG9jayA8PSBzdGF0ZS5sb3dTdG9ja1RocmVzaG9sZCxcbiAgICBpc091dE9mU3RvY2s6IHN0YXRlLnN0b2NrID09PSAwLFxuICAgIFxuICAgIC8vIFZhbGlkYWNpb25lcyBlc3BlY8OtZmljYXNcbiAgICBpc1ByaWNlVmFsaWQ6IHN0YXRlLnByaWNlID4gMCxcbiAgICBpc1NrdVZhbGlkOiBzdGF0ZS5za3UubGVuZ3RoID4gMCxcbiAgICBhcmVEaW1lbnNpb25zVmFsaWQ6IHN0YXRlLmRpbWVuc2lvbnMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGltZW5zaW9ucy53aWR0aCA+IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ID4gMCxcbiAgICBcbiAgICAvLyBDb250YWRvcmVzXG4gICAgaW1hZ2VDb3VudDogc3RhdGUuaW1hZ2VzLmxlbmd0aCxcbiAgICB2YXJpYW50Q291bnQ6IHN0YXRlLnZhcmlhbnRzLmxlbmd0aCxcbiAgICBrZXl3b3JkQ291bnQ6IHN0YXRlLnNlb0tleXdvcmRzLmxlbmd0aCxcbiAgICBcbiAgICAvLyBPYnRlbmVyIGVycm9yZXMgcG9yIHBhc29cbiAgICBnZXRTdGVwRXJyb3JzOiAoc3RlcDogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBzdGVwRmllbGRzID0ge1xuICAgICAgICAwOiBbJ25hbWUnLCAnZGVzY3JpcHRpb24nLCAnY2F0ZWdvcnlJZCddLFxuICAgICAgICAxOiBbJ3ByaWNlJywgJ2NvbXBhcmVQcmljZScsICdjb3N0UHJpY2UnXSxcbiAgICAgICAgMjogWydzdG9jaycsICdsb3dTdG9ja1RocmVzaG9sZCddLFxuICAgICAgICAzOiBbJ2ltYWdlcyddLFxuICAgICAgICA0OiBbJ3Nlb1RpdGxlJywgJ3Nlb0Rlc2NyaXB0aW9uJ10sXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBmaWVsZHMgPSBzdGVwRmllbGRzW3N0ZXAgYXMga2V5b2YgdHlwZW9mIHN0ZXBGaWVsZHNdIHx8IFtdO1xuICAgICAgcmV0dXJuIGZpZWxkcy5maWx0ZXIoZmllbGQgPT4gc3RhdGUuZXJyb3JzW2ZpZWxkXSk7XG4gICAgfSxcbiAgfSksIFtzdGF0ZV0pO1xuXG4gIHJldHVybiB7XG4gICAgc3RhdGUsXG4gICAgYWN0aW9ucyxcbiAgICBzZWxlY3RvcnMsXG4gIH07XG59XG5cbi8vIEhvb2sgcGFyYSB2YWxpZGFjacOzbiBlbiB0aWVtcG8gcmVhbFxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByb2R1Y3RGb3JtVmFsaWRhdGlvbigpIHtcbiAgY29uc3QgeyBzdGF0ZSwgYWN0aW9ucywgc2VsZWN0b3JzIH0gPSB1c2VQcm9kdWN0Rm9ybVJlZHVjZXIoKTtcbiAgXG4gIGNvbnN0IHZhbGlkYXRlRmllbGQgPSB1c2VDYWxsYmFjaygoZmllbGQ6IGtleW9mIFByb2R1Y3RGb3JtU3RhdGUsIHZhbHVlOiBhbnkpID0+IHtcbiAgICBsZXQgZXJyb3IgPSAnJztcbiAgICBcbiAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZXJyb3IgPSAnRWwgbm9tYnJlIGVzIHJlcXVlcmlkbyc7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoID4gMjU1KSB7XG4gICAgICAgICAgZXJyb3IgPSAnTcOheGltbyAyNTUgY2FyYWN0ZXJlcyc7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBcbiAgICAgIGNhc2UgJ3ByaWNlJzpcbiAgICAgICAgaWYgKHZhbHVlIDw9IDApIHtcbiAgICAgICAgICBlcnJvciA9ICdFbCBwcmVjaW8gZGViZSBzZXIgbWF5b3IgYSAwJztcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA+IDk5OTk5OS45OSkge1xuICAgICAgICAgIGVycm9yID0gJ1ByZWNpbyBtw6F4aW1vIGV4Y2VkaWRvJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgY2FzZSAnY29tcGFyZVByaWNlJzpcbiAgICAgICAgaWYgKHZhbHVlID4gMCAmJiB2YWx1ZSA8IHN0YXRlLnByaWNlKSB7XG4gICAgICAgICAgZXJyb3IgPSAnRWwgcHJlY2lvIGRlIGNvbXBhcmFjacOzbiBkZWJlIHNlciBtYXlvciBhbCBwcmVjaW8gYmFzZSc7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBcbiAgICAgIGNhc2UgJ2Nvc3RQcmljZSc6XG4gICAgICAgIGlmICh2YWx1ZSA+IDAgJiYgdmFsdWUgPiBzdGF0ZS5wcmljZSkge1xuICAgICAgICAgIGVycm9yID0gJ0VsIHByZWNpbyBkZSBjb3N0byBkZWJlIHNlciBtZW5vciBhbCBwcmVjaW8gZGUgdmVudGEnO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgICBjYXNlICdzdG9jayc6XG4gICAgICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgICBlcnJvciA9ICdFbCBzdG9jayBkZWJlIHNlciBtYXlvciBvIGlndWFsIGEgMCc7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiA5OTk5OTkpIHtcbiAgICAgICAgICBlcnJvciA9ICdTdG9jayBtw6F4aW1vIGV4Y2VkaWRvJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgY2FzZSAnc2t1JzpcbiAgICAgICAgaWYgKHZhbHVlICYmICEvXltBLVowLTlcXC1fXSskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIGVycm9yID0gJ1NLVSBkZWJlIGNvbnRlbmVyIHNvbG8gbGV0cmFzIG1hecO6c2N1bGFzLCBuw7ptZXJvcywgZ3Vpb25lcyB5IGd1aW9uZXMgYmFqb3MnO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGFjdGlvbnMuc2V0RXJyb3IoZmllbGQsIGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0aW9ucy5jbGVhckVycm9yKGZpZWxkKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGVycm9yID09PSAnJztcbiAgfSwgW3N0YXRlLnByaWNlLCBhY3Rpb25zXSk7XG4gIFxuICBjb25zdCB2YWxpZGF0ZUZvcm0gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZmllbGRzOiAoa2V5b2YgUHJvZHVjdEZvcm1TdGF0ZSlbXSA9IFtcbiAgICAgICduYW1lJywgJ3ByaWNlJywgJ3N0b2NrJywgJ2NhdGVnb3J5SWQnXG4gICAgXTtcbiAgICBcbiAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgY29uc3QgZmllbGRWYWxpZCA9IHZhbGlkYXRlRmllbGQoZmllbGQsIHN0YXRlW2ZpZWxkXSk7XG4gICAgICBpZiAoIWZpZWxkVmFsaWQpIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gaXNWYWxpZDtcbiAgfSwgW3N0YXRlLCB2YWxpZGF0ZUZpZWxkXSk7XG4gIFxuICByZXR1cm4ge1xuICAgIHN0YXRlLFxuICAgIGFjdGlvbnMsXG4gICAgc2VsZWN0b3JzLFxuICAgIHZhbGlkYXRlRmllbGQsXG4gICAgdmFsaWRhdGVGb3JtLFxuICB9O1xufVxuXG5leHBvcnQgdHlwZSB7IFByb2R1Y3RGb3JtU3RhdGUsIFByb2R1Y3RGb3JtQWN0aW9uIH07Il0sIm5hbWVzIjpbInVzZVByb2R1Y3RGb3JtUmVkdWNlciIsInVzZVByb2R1Y3RGb3JtVmFsaWRhdGlvbiIsImluaXRpYWxTdGF0ZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInNob3J0RGVzY3JpcHRpb24iLCJjYXRlZ29yeUlkIiwic3RhdHVzIiwiYnJhbmQiLCJtb2RlbCIsInNrdSIsImJhcmNvZGUiLCJwcmljZSIsImNvbXBhcmVQcmljZSIsImNvc3RQcmljZSIsInRheFJhdGUiLCJ0cmFja0ludmVudG9yeSIsInN0b2NrIiwibG93U3RvY2tUaHJlc2hvbGQiLCJhbGxvd0JhY2tvcmRlciIsInJlcXVpcmVzU2hpcHBpbmciLCJ3ZWlnaHQiLCJkaW1lbnNpb25zIiwibGVuZ3RoIiwid2lkdGgiLCJoZWlnaHQiLCJzZW9UaXRsZSIsInNlb0Rlc2NyaXB0aW9uIiwic2VvS2V5d29yZHMiLCJpbWFnZXMiLCJ2YXJpYW50cyIsImlzTG9hZGluZyIsImlzU2F2aW5nIiwiZXJyb3JzIiwiaXNEaXJ0eSIsImN1cnJlbnRTdGVwIiwidmFsaWRhdGlvbkVycm9ycyIsInByb2R1Y3RGb3JtUmVkdWNlciIsInN0YXRlIiwiYWN0aW9uIiwidHlwZSIsImZpZWxkIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJmaWVsZHMiLCJwYXlsb2FkIiwiZXJyb3IiLCJfIiwicmVzdEVycm9ycyIsIk1hdGgiLCJtYXgiLCJtaW4iLCJzdGVwIiwiaW1hZ2UiLCJmaWx0ZXIiLCJpbmRleCIsInZhcmlhbnQiLCJtYXAiLCJpbmNsdWRlcyIsImtleXdvcmQiLCJwcm9kdWN0IiwiZGlzcGF0Y2giLCJ1c2VSZWR1Y2VyIiwiYWN0aW9ucyIsInVzZU1lbW8iLCJzZXRGaWVsZCIsInNldE11bHRpcGxlRmllbGRzIiwic2V0TG9hZGluZyIsImxvYWRpbmciLCJzZXRTYXZpbmciLCJzYXZpbmciLCJzZXRFcnJvciIsImNsZWFyRXJyb3IiLCJjbGVhckFsbEVycm9ycyIsInNldFZhbGlkYXRpb25FcnJvcnMiLCJzZXREaXJ0eSIsImRpcnR5Iiwic2V0U3RlcCIsIm5leHRTdGVwIiwicHJldlN0ZXAiLCJhZGRJbWFnZSIsInJlbW92ZUltYWdlIiwiYWRkVmFyaWFudCIsInJlbW92ZVZhcmlhbnQiLCJ1cGRhdGVWYXJpYW50IiwiYWRkU2VvS2V5d29yZCIsInJlbW92ZVNlb0tleXdvcmQiLCJyZXNldEZvcm0iLCJsb2FkUHJvZHVjdCIsInNlbGVjdG9ycyIsImhhc0Vycm9ycyIsIk9iamVjdCIsImtleXMiLCJoYXNWYWxpZGF0aW9uRXJyb3JzIiwiaXNGb3JtVmFsaWQiLCJ0cmltIiwiaXNGaXJzdFN0ZXAiLCJpc0xhc3RTdGVwIiwic3RlcFByb2dyZXNzIiwicHJvZml0TWFyZ2luIiwiZGlzY291bnRQZXJjZW50YWdlIiwiaXNMb3dTdG9jayIsImlzT3V0T2ZTdG9jayIsImlzUHJpY2VWYWxpZCIsImlzU2t1VmFsaWQiLCJhcmVEaW1lbnNpb25zVmFsaWQiLCJpbWFnZUNvdW50IiwidmFyaWFudENvdW50Iiwia2V5d29yZENvdW50IiwiZ2V0U3RlcEVycm9ycyIsInN0ZXBGaWVsZHMiLCJ2YWxpZGF0ZUZpZWxkIiwidXNlQ2FsbGJhY2siLCJ0ZXN0IiwidmFsaWRhdGVGb3JtIiwiaXNWYWxpZCIsImZvckVhY2giLCJmaWVsZFZhbGlkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztRQW9SZ0JBO2VBQUFBOztRQWlJQUM7ZUFBQUE7Ozt1QkFyWmlDO0FBZ0ZqRCxpQkFBaUI7QUFDakIsTUFBTUMsZUFBaUM7SUFDckMscUJBQXFCO0lBQ3JCQyxNQUFNO0lBQ05DLGFBQWE7SUFDYkMsa0JBQWtCO0lBQ2xCQyxZQUFZO0lBQ1pDLFFBQVE7SUFFUix3QkFBd0I7SUFDeEJDLE9BQU87SUFDUEMsT0FBTztJQUNQQyxLQUFLO0lBQ0xDLFNBQVM7SUFFVCxVQUFVO0lBQ1ZDLE9BQU87SUFDUEMsY0FBYztJQUNkQyxXQUFXO0lBQ1hDLFNBQVM7SUFFVCxhQUFhO0lBQ2JDLGdCQUFnQjtJQUNoQkMsT0FBTztJQUNQQyxtQkFBbUI7SUFDbkJDLGdCQUFnQjtJQUVoQixRQUFRO0lBQ1JDLGtCQUFrQjtJQUNsQkMsUUFBUTtJQUNSQyxZQUFZO1FBQ1ZDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxRQUFRO0lBQ1Y7SUFFQSxNQUFNO0lBQ05DLFVBQVU7SUFDVkMsZ0JBQWdCO0lBQ2hCQyxhQUFhLEVBQUU7SUFFZix1QkFBdUI7SUFDdkJDLFFBQVEsRUFBRTtJQUNWQyxVQUFVLEVBQUU7SUFFWix3QkFBd0I7SUFDeEJDLFdBQVc7SUFDWEMsVUFBVTtJQUNWQyxRQUFRLENBQUM7SUFDVEMsU0FBUztJQUNUQyxhQUFhO0lBQ2JDLGtCQUFrQixDQUFDO0FBQ3JCO0FBRUEsbUJBQW1CO0FBQ25CLFNBQVNDLG1CQUNQQyxLQUF1QixFQUN2QkMsTUFBeUI7SUFFekIsT0FBUUEsT0FBT0MsSUFBSTtRQUNqQixLQUFLO1lBQ0gsT0FBTztnQkFDTCxHQUFHRixLQUFLO2dC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