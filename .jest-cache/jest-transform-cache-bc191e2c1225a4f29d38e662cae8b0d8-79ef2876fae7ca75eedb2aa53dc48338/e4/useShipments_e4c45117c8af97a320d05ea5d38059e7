93d1212769e7f51eadbcc8acf4cfe245
// =====================================================
// HOOK: SHIPMENTS MANAGEMENT ENTERPRISE
// Descripción: Hook para gestión completa de envíos
// Basado en: Patrones TanStack Query + React Hook Form
// =====================================================
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useBulkShipmentOperations () {
        return useBulkShipmentOperations;
    },
    get useCreateShipment () {
        return useCreateShipment;
    },
    get useDeleteShipment () {
        return useDeleteShipment;
    },
    get useShipmentFilters () {
        return useShipmentFilters;
    },
    get useShipmentStats () {
        return useShipmentStats;
    },
    get useShipments () {
        return useShipments;
    },
    get useUpdateShipment () {
        return useUpdateShipment;
    }
});
const _reactquery = require("@tanstack/react-query");
const _react = require("react");
const _sonner = require("sonner");
// =====================================================
// CONFIGURACIÓN DE QUERIES
// =====================================================
const SHIPMENTS_QUERY_KEY = [
    'admin',
    'logistics',
    'shipments'
];
const STALE_TIME = 30000; // 30 segundos
// =====================================================
// FUNCIONES DE API
// =====================================================
async function fetchShipments(params) {
    const searchParams = new URLSearchParams();
    Object.entries(params).forEach(([key, value])=>{
        if (value !== undefined && value !== null) {
            searchParams.append(key, value.toString());
        }
    });
    const response = await fetch(`/api/admin/logistics/shipments?${searchParams}`, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    return response.json();
}
async function createShipment(data) {
    const response = await fetch('/api/admin/logistics/shipments', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    const result = await response.json();
    return result.data;
}
async function updateShipment(id, data) {
    const response = await fetch(`/api/admin/logistics/shipments/${id}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    const result = await response.json();
    return result.data;
}
async function deleteShipment(id) {
    const response = await fetch(`/api/admin/logistics/shipments/${id}`, {
        method: 'DELETE',
        headers: {
            'Content-Type': 'application/json'
        }
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
}
function useShipments(params = {}) {
    const queryClient = (0, _reactquery.useQueryClient)();
    const queryKey = [
        ...SHIPMENTS_QUERY_KEY,
        params
    ];
    const { data, isLoading, error, refetch } = (0, _reactquery.useQuery)({
        queryKey,
        queryFn: ()=>fetchShipments(params),
        staleTime: STALE_TIME,
        retry: 3,
        retryDelay: (attemptIndex)=>Math.min(1000 * 2 ** attemptIndex, 30000)
    });
    return {
        data,
        isLoading,
        error: error,
        refetch
    };
}
function useCreateShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: createShipment,
        onSuccess: (newShipment)=>{
            // Invalidar cache de shipments
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            // Invalidar dashboard de logística
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío creado exitosamente', {
                description: `Número de envío: ${newShipment.shipment_number}`
            });
        },
        onError: (error)=>{
            _sonner.toast.error('Error al crear envío', {
                description: error.message
            });
        }
    });
}
function useUpdateShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: ({ id, data })=>updateShipment(id, data),
        onSuccess: (updatedShipment)=>{
            // Actualizar cache específico del shipment
            queryClient.setQueryData([
                'admin',
                'logistics',
                'shipment',
                updatedShipment.id
            ], updatedShipment);
            // Invalidar listas de shipments
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            // Invalidar dashboard si cambió el estado
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío actualizado exitosamente');
        },
        onError: (error)=>{
            _sonner.toast.error('Error al actualizar envío', {
                description: error.message
            });
        }
    });
}
function useDeleteShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: deleteShipment,
        onSuccess: (_, deletedId)=>{
            // Remover del cache
            queryClient.removeQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'shipment',
                    deletedId
                ]
            });
            // Invalidar listas
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío eliminado exitosamente');
        },
        onError: (error)=>{
            _sonner.toast.error('Error al eliminar envío', {
                description: error.message
            });
        }
    });
}
function useShipmentFilters() {
    const [filters, setFilters] = (0, _react.useState)({
        page: 1,
        limit: 20,
        order_by: 'created_at',
        order_direction: 'desc'
    });
    const updateFilter = (0, _react.useCallback)((key, value)=>{
        setFilters((prev)=>({
                ...prev,
                [key]: value,
                page: key !== 'page' ? 1 : value // Reset page when other filters change
            }));
    }, []);
    const resetFilters = (0, _react.useCallback)(()=>{
        setFilters({
            page: 1,
            limit: 20,
            order_by: 'created_at',
            order_direction: 'desc'
        });
    }, []);
    const setPage = (0, _react.useCallback)((page)=>{
        updateFilter('page', page);
    }, [
        updateFilter
    ]);
    const setStatus = (0, _react.useCallback)((status)=>{
        updateFilter('status', status);
    }, [
        updateFilter
    ]);
    const setSearch = (0, _react.useCallback)((search)=>{
        updateFilter('search', search || undefined);
    }, [
        updateFilter
    ]);
    const setDateRange = (0, _react.useCallback)((dateFrom, dateTo)=>{
        setFilters((prev)=>({
                ...prev,
                date_from: dateFrom,
                date_to: dateTo,
                page: 1
            }));
    }, []);
    return {
        filters,
        updateFilter,
        resetFilters,
        setPage,
        setStatus,
        setSearch,
        setDateRange
    };
}
function useShipmentStats(shipments) {
    return {
        total: shipments?.length || 0,
        byStatus: shipments?.reduce((acc, shipment)=>{
            acc[shipment.status] = (acc[shipment.status] || 0) + 1;
            return acc;
        }, {}) || {},
        totalCost: shipments?.reduce((acc, shipment)=>acc + shipment.total_cost, 0) || 0,
        averageCost: shipments?.length ? shipments.reduce((acc, shipment)=>acc + shipment.total_cost, 0) / shipments.length : 0
    };
}
function useBulkShipmentOperations() {
    const queryClient = (0, _reactquery.useQueryClient)();
    const [selectedShipments, setSelectedShipments] = (0, _react.useState)([]);
    const bulkUpdateStatus = (0, _reactquery.useMutation)({
        mutationFn: async ({ shipmentIds, status })=>{
            const promises = shipmentIds.map((id)=>updateShipment(id, {
                    status
                }));
            return Promise.all(promises);
        },
        onSuccess: (_, { shipmentIds, status })=>{
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success(`${shipmentIds.length} envíos actualizados a ${status}`);
            setSelectedShipments([]);
        },
        onError: (error)=>{
            _sonner.toast.error('Error en operación masiva', {
                description: error.message
            });
        }
    });
    const bulkDelete = (0, _reactquery.useMutation)({
        mutationFn: async (shipmentIds)=>{
            const promises = shipmentIds.map((id)=>deleteShipment(id));
            return Promise.all(promises);
        },
        onSuccess: (_, shipmentIds)=>{
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success(`${shipmentIds.length} envíos eliminados`);
            setSelectedShipments([]);
        },
        onError: (error)=>{
            _sonner.toast.error('Error al eliminar envíos', {
                description: error.message
            });
        }
    });
    const toggleSelection = (0, _react.useCallback)((shipmentId)=>{
        setSelectedShipments((prev)=>prev.includes(shipmentId) ? prev.filter((id)=>id !== shipmentId) : [
                ...prev,
                shipmentId
            ]);
    }, []);
    const selectAll = (0, _react.useCallback)((shipmentIds)=>{
        setSelectedShipments(shipmentIds);
    }, []);
    const clearSelection = (0, _react.useCallback)(()=>{
        setSelectedShipments([]);
    }, []);
    return {
        selectedShipments,
        toggleSelection,
        selectAll,
        clearSelection,
        bulkUpdateStatus,
        bulkDelete,
        isLoading: bulkUpdateStatus.isPending || bulkDelete.isPending
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VTaGlwbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0s6IFNISVBNRU5UUyBNQU5BR0VNRU5UIEVOVEVSUFJJU0Vcbi8vIERlc2NyaXBjacOzbjogSG9vayBwYXJhIGdlc3Rpw7NuIGNvbXBsZXRhIGRlIGVudsOtb3Ncbi8vIEJhc2FkbyBlbjogUGF0cm9uZXMgVGFuU3RhY2sgUXVlcnkgKyBSZWFjdCBIb29rIEZvcm1cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlUXVlcnksIHVzZU11dGF0aW9uLCB1c2VRdWVyeUNsaWVudCB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcic7XG5pbXBvcnQgeyBcbiAgU2hpcG1lbnQsXG4gIENyZWF0ZVNoaXBtZW50UmVxdWVzdCxcbiAgVXBkYXRlU2hpcG1lbnRSZXF1ZXN0LFxuICBHZXRTaGlwbWVudHNSZXF1ZXN0LFxuICBQYWdpbmF0ZWRSZXNwb25zZSxcbiAgVXNlU2hpcG1lbnRzUmV0dXJuLFxuICBTaGlwbWVudFN0YXR1cyBcbn0gZnJvbSAnQC90eXBlcy9sb2dpc3RpY3MnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBQ0nDk04gREUgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU0hJUE1FTlRTX1FVRVJZX0tFWSA9IFsnYWRtaW4nLCAnbG9naXN0aWNzJywgJ3NoaXBtZW50cyddO1xuY29uc3QgU1RBTEVfVElNRSA9IDMwMDAwOyAvLyAzMCBzZWd1bmRvc1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRlVOQ0lPTkVTIERFIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hTaGlwbWVudHMocGFyYW1zOiBHZXRTaGlwbWVudHNSZXF1ZXN0KTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxTaGlwbWVudD4+IHtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBcbiAgT2JqZWN0LmVudHJpZXMocGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfSk7XG4gIFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL2xvZ2lzdGljcy9zaGlwbWVudHM/JHtzZWFyY2hQYXJhbXN9YCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9XG4gIH0pO1xuICBcbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICB9XG4gIFxuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVTaGlwbWVudChkYXRhOiBDcmVhdGVTaGlwbWVudFJlcXVlc3QpOiBQcm9taXNlPFNoaXBtZW50PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWRtaW4vbG9naXN0aWNzL3NoaXBtZW50cycsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgfSk7XG4gIFxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZXJyb3IgfHwgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gIH1cbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgcmV0dXJuIHJlc3VsdC5kYXRhO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVTaGlwbWVudChpZDogbnVtYmVyLCBkYXRhOiBVcGRhdGVTaGlwbWVudFJlcXVlc3QpOiBQcm9taXNlPFNoaXBtZW50PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vbG9naXN0aWNzL3NoaXBtZW50cy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICB9KTtcbiAgXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgfVxuICBcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICByZXR1cm4gcmVzdWx0LmRhdGE7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNoaXBtZW50KGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9sb2dpc3RpY3Mvc2hpcG1lbnRzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9XG4gIH0pO1xuICBcbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBSSU5DSVBBTDogdXNlU2hpcG1lbnRzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRzKHBhcmFtczogR2V0U2hpcG1lbnRzUmVxdWVzdCA9IHt9KTogVXNlU2hpcG1lbnRzUmV0dXJuIHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBcbiAgY29uc3QgcXVlcnlLZXkgPSBbLi4uU0hJUE1FTlRTX1FVRVJZX0tFWSwgcGFyYW1zXTtcbiAgXG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGlzTG9hZGluZyxcbiAgICBlcnJvcixcbiAgICByZWZldGNoXG4gIH0gPSB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXksXG4gICAgcXVlcnlGbjogKCkgPT4gZmV0Y2hTaGlwbWVudHMocGFyYW1zKSxcbiAgICBzdGFsZVRpbWU6IFNUQUxFX1RJTUUsXG4gICAgcmV0cnk6IDMsXG4gICAgcmV0cnlEZWxheTogKGF0dGVtcHRJbmRleCkgPT4gTWF0aC5taW4oMTAwMCAqIDIgKiogYXR0ZW1wdEluZGV4LCAzMDAwMClcbiAgfSk7XG4gIFxuICByZXR1cm4ge1xuICAgIGRhdGEsXG4gICAgaXNMb2FkaW5nLFxuICAgIGVycm9yOiBlcnJvciBhcyBFcnJvciB8IG51bGwsXG4gICAgcmVmZXRjaFxuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlQ3JlYXRlU2hpcG1lbnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDcmVhdGVTaGlwbWVudCgpIHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBcbiAgcmV0dXJuIHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBjcmVhdGVTaGlwbWVudCxcbiAgICBvblN1Y2Nlc3M6IChuZXdTaGlwbWVudCkgPT4ge1xuICAgICAgLy8gSW52YWxpZGFyIGNhY2hlIGRlIHNoaXBtZW50c1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogU0hJUE1FTlRTX1FVRVJZX0tFWSB9KTtcbiAgICAgIFxuICAgICAgLy8gSW52YWxpZGFyIGRhc2hib2FyZCBkZSBsb2fDrXN0aWNhXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KTtcbiAgICAgIFxuICAgICAgdG9hc3Quc3VjY2VzcygnRW52w61vIGNyZWFkbyBleGl0b3NhbWVudGUnLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgTsO6bWVybyBkZSBlbnbDrW86ICR7bmV3U2hpcG1lbnQuc2hpcG1lbnRfbnVtYmVyfWBcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGVudsOtbycsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LOiB1c2VVcGRhdGVTaGlwbWVudFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVVwZGF0ZVNoaXBtZW50KCkge1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG4gIFxuICByZXR1cm4gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46ICh7IGlkLCBkYXRhIH06IHsgaWQ6IG51bWJlcjsgZGF0YTogVXBkYXRlU2hpcG1lbnRSZXF1ZXN0IH0pID0+IFxuICAgICAgdXBkYXRlU2hpcG1lbnQoaWQsIGRhdGEpLFxuICAgIG9uU3VjY2VzczogKHVwZGF0ZWRTaGlwbWVudCkgPT4ge1xuICAgICAgLy8gQWN0dWFsaXphciBjYWNoZSBlc3BlY8OtZmljbyBkZWwgc2hpcG1lbnRcbiAgICAgIHF1ZXJ5Q2xpZW50LnNldFF1ZXJ5RGF0YShcbiAgICAgICAgWydhZG1pbicsICdsb2dpc3RpY3MnLCAnc2hpcG1lbnQnLCB1cGRhdGVkU2hpcG1lbnQuaWRdLFxuICAgICAgICB1cGRhdGVkU2hpcG1lbnRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEludmFsaWRhciBsaXN0YXMgZGUgc2hpcG1lbnRzXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBTSElQTUVOVFNfUVVFUllfS0VZIH0pO1xuICAgICAgXG4gICAgICAvLyBJbnZhbGlkYXIgZGFzaGJvYXJkIHNpIGNhbWJpw7MgZWwgZXN0YWRvXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KTtcbiAgICAgIFxuICAgICAgdG9hc3Quc3VjY2VzcygnRW52w61vIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScpO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgZW52w61vJywge1xuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0s6IHVzZURlbGV0ZVNoaXBtZW50XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVsZXRlU2hpcG1lbnQoKSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcbiAgXG4gIHJldHVybiB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogZGVsZXRlU2hpcG1lbnQsXG4gICAgb25TdWNjZXNzOiAoXywgZGVsZXRlZElkKSA9PiB7XG4gICAgICAvLyBSZW1vdmVyIGRlbCBjYWNoZVxuICAgICAgcXVlcnlDbGllbnQucmVtb3ZlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdzaGlwbWVudCcsIGRlbGV0ZWRJZF0gfSk7XG4gICAgICBcbiAgICAgIC8vIEludmFsaWRhciBsaXN0YXNcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFNISVBNRU5UU19RVUVSWV9LRVkgfSk7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KTtcbiAgICAgIFxuICAgICAgdG9hc3Quc3VjY2VzcygnRW52w61vIGVsaW1pbmFkbyBleGl0b3NhbWVudGUnKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBlbGltaW5hciBlbnbDrW8nLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlU2hpcG1lbnRGaWx0ZXJzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRGaWx0ZXJzKCkge1xuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTxHZXRTaGlwbWVudHNSZXF1ZXN0Pih7XG4gICAgcGFnZTogMSxcbiAgICBsaW1pdDogMjAsXG4gICAgb3JkZXJfYnk6ICdjcmVhdGVkX2F0JyxcbiAgICBvcmRlcl9kaXJlY3Rpb246ICdkZXNjJ1xuICB9KTtcbiAgXG4gIGNvbnN0IHVwZGF0ZUZpbHRlciA9IHVzZUNhbGxiYWNrKChrZXk6IGtleW9mIEdldFNoaXBtZW50c1JlcXVlc3QsIHZhbHVlOiBhbnkpID0+IHtcbiAgICBzZXRGaWx0ZXJzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBba2V5XTogdmFsdWUsXG4gICAgICBwYWdlOiBrZXkgIT09ICdwYWdlJyA/IDEgOiB2YWx1ZSAvLyBSZXNldCBwYWdlIHdoZW4gb3RoZXIgZmlsdGVycyBjaGFuZ2VcbiAgICB9KSk7XG4gIH0sIFtdKTtcbiAgXG4gIGNvbnN0IHJlc2V0RmlsdGVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRGaWx0ZXJzKHtcbiAgICAgIHBhZ2U6IDEsXG4gICAgICBsaW1pdDogMjAsXG4gICAgICBvcmRlcl9ieTogJ2NyZWF0ZWRfYXQnLFxuICAgICAgb3JkZXJfZGlyZWN0aW9uOiAnZGVzYydcbiAgICB9KTtcbiAgfSwgW10pO1xuICBcbiAgY29uc3Qgc2V0UGFnZSA9IHVzZUNhbGxiYWNrKChwYWdlOiBudW1iZXIpID0+IHtcbiAgICB1cGRhdGVGaWx0ZXIoJ3BhZ2UnLCBwYWdlKTtcbiAgfSwgW3VwZGF0ZUZpbHRlcl0pO1xuICBcbiAgY29uc3Qgc2V0U3RhdHVzID0gdXNlQ2FsbGJhY2soKHN0YXR1czogU2hpcG1lbnRTdGF0dXMgfCB1bmRlZmluZWQpID0+IHtcbiAgICB1cGRhdGVGaWx0ZXIoJ3N0YXR1cycsIHN0YXR1cyk7XG4gIH0sIFt1cGRhdGVGaWx0ZXJdKTtcbiAgXG4gIGNvbnN0IHNldFNlYXJjaCA9IHVzZUNhbGxiYWNrKChzZWFyY2g6IHN0cmluZykgPT4ge1xuICAgIHVwZGF0ZUZpbHRlcignc2VhcmNoJywgc2VhcmNoIHx8IHVuZGVmaW5lZCk7XG4gIH0sIFt1cGRhdGVGaWx0ZXJdKTtcbiAgXG4gIGNvbnN0IHNldERhdGVSYW5nZSA9IHVzZUNhbGxiYWNrKChkYXRlRnJvbT86IHN0cmluZywgZGF0ZVRvPzogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmlsdGVycyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgZGF0ZV9mcm9tOiBkYXRlRnJvbSxcbiAgICAgIGRhdGVfdG86IGRhdGVUbyxcbiAgICAgIHBhZ2U6IDFcbiAgICB9KSk7XG4gIH0sIFtdKTtcbiAgXG4gIHJldHVybiB7XG4gICAgZmlsdGVycyxcbiAgICB1cGRhdGVGaWx0ZXIsXG4gICAgcmVzZXRGaWx0ZXJzLFxuICAgIHNldFBhZ2UsXG4gICAgc2V0U3RhdHVzLFxuICAgIHNldFNlYXJjaCxcbiAgICBzZXREYXRlUmFuZ2VcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0s6IHVzZVNoaXBtZW50U3RhdHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTaGlwbWVudFN0YXRzKHNoaXBtZW50cz86IFNoaXBtZW50W10pIHtcbiAgcmV0dXJuIHtcbiAgICB0b3RhbDogc2hpcG1lbnRzPy5sZW5ndGggfHwgMCxcbiAgICBieVN0YXR1czogc2hpcG1lbnRzPy5yZWR1Y2UoKGFjYywgc2hpcG1lbnQpID0+IHtcbiAgICAgIGFjY1tzaGlwbWVudC5zdGF0dXNdID0gKGFjY1tzaGlwbWVudC5zdGF0dXNdIHx8IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30gYXMgUmVjb3JkPFNoaXBtZW50U3RhdHVzLCBudW1iZXI+KSB8fCB7fSxcbiAgICB0b3RhbENvc3Q6IHNoaXBtZW50cz8ucmVkdWNlKChhY2MsIHNoaXBtZW50KSA9PiBhY2MgKyBzaGlwbWVudC50b3RhbF9jb3N0LCAwKSB8fCAwLFxuICAgIGF2ZXJhZ2VDb3N0OiBzaGlwbWVudHM/Lmxlbmd0aCBcbiAgICAgID8gKHNoaXBtZW50cy5yZWR1Y2UoKGFjYywgc2hpcG1lbnQpID0+IGFjYyArIHNoaXBtZW50LnRvdGFsX2Nvc3QsIDApIC8gc2hpcG1lbnRzLmxlbmd0aClcbiAgICAgIDogMFxuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlQnVsa1NoaXBtZW50T3BlcmF0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJ1bGtTaGlwbWVudE9wZXJhdGlvbnMoKSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcbiAgY29uc3QgW3NlbGVjdGVkU2hpcG1lbnRzLCBzZXRTZWxlY3RlZFNoaXBtZW50c10gPSB1c2VTdGF0ZTxudW1iZXJbXT4oW10pO1xuICBcbiAgY29uc3QgYnVsa1VwZGF0ZVN0YXR1cyA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoeyBzaGlwbWVudElkcywgc3RhdHVzIH06IHsgc2hpcG1lbnRJZHM6IG51bWJlcltdOyBzdGF0dXM6IFNoaXBtZW50U3RhdHVzIH0pID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gc2hpcG1lbnRJZHMubWFwKGlkID0+IHVwZGF0ZVNoaXBtZW50KGlkLCB7IHN0YXR1cyB9KSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoXywgeyBzaGlwbWVudElkcywgc3RhdHVzIH0pID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFNISVBNRU5UU19RVUVSWV9LRVkgfSk7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KTtcbiAgICAgIFxuICAgICAgdG9hc3Quc3VjY2VzcyhgJHtzaGlwbWVudElkcy5sZW5ndGh9IGVudsOtb3MgYWN0dWFsaXphZG9zIGEgJHtzdGF0dXN9YCk7XG4gICAgICBzZXRTZWxlY3RlZFNoaXBtZW50cyhbXSk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgZW4gb3BlcmFjacOzbiBtYXNpdmEnLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgY29uc3QgYnVsa0RlbGV0ZSA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoc2hpcG1lbnRJZHM6IG51bWJlcltdKSA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IHNoaXBtZW50SWRzLm1hcChpZCA9PiBkZWxldGVTaGlwbWVudChpZCkpO1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKF8sIHNoaXBtZW50SWRzKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBTSElQTUVOVFNfUVVFUllfS0VZIH0pO1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWydhZG1pbicsICdsb2dpc3RpY3MnLCAnZGFzaGJvYXJkJ10gfSk7XG4gICAgICBcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoYCR7c2hpcG1lbnRJZHMubGVuZ3RofSBlbnbDrW9zIGVsaW1pbmFkb3NgKTtcbiAgICAgIHNldFNlbGVjdGVkU2hpcG1lbnRzKFtdKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBlbGltaW5hciBlbnbDrW9zJywge1xuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIGNvbnN0IHRvZ2dsZVNlbGVjdGlvbiA9IHVzZUNhbGxiYWNrKChzaGlwbWVudElkOiBudW1iZXIpID0+IHtcbiAgICBzZXRTZWxlY3RlZFNoaXBtZW50cyhwcmV2ID0+IFxuICAgICAgcHJldi5pbmNsdWRlcyhzaGlwbWVudElkKVxuICAgICAgICA/IHByZXYuZmlsdGVyKGlkID0+IGlkICE9PSBzaGlwbWVudElkKVxuICAgICAgICA6IFsuLi5wcmV2LCBzaGlwbWVudElkXVxuICAgICk7XG4gIH0sIFtdKTtcbiAgXG4gIGNvbnN0IHNlbGVjdEFsbCA9IHVzZUNhbGxiYWNrKChzaGlwbWVudElkczogbnVtYmVyW10pID0+IHtcbiAgICBzZXRTZWxlY3RlZFNoaXBtZW50cyhzaGlwbWVudElkcyk7XG4gIH0sIFtdKTtcbiAgXG4gIGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNlbGVjdGVkU2hpcG1lbnRzKFtdKTtcbiAgfSwgW10pO1xuICBcbiAgcmV0dXJuIHtcbiAgICBzZWxlY3RlZFNoaXBtZW50cyxcbiAgICB0b2dnbGVTZWxlY3Rpb24sXG4gICAgc2VsZWN0QWxsLFxuICAgIGNsZWFyU2VsZWN0aW9uLFxuICAgIGJ1bGtVcGRhdGVTdGF0dXMsXG4gICAgYnVsa0RlbGV0ZSxcbiAgICBpc0xvYWRpbmc6IGJ1bGtVcGRhdGVTdGF0dXMuaXNQZW5kaW5nIHx8IGJ1bGtEZWxldGUuaXNQZW5kaW5nXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQnVsa1NoaXBtZW50T3BlcmF0aW9ucyIsInVzZUNyZWF0ZVNoaXBtZW50IiwidXNlRGVsZXRlU2hpcG1lbnQiLCJ1c2VTaGlwbWVudEZpbHRlcnMiLCJ1c2VTaGlwbWVudFN0YXRzIiwidXNlU2hpcG1lbnRzIiwidXNlVXBkYXRlU2hpcG1lbnQiLCJTSElQTUVOVFNfUVVFUllfS0VZIiwiU1RBTEVfVElNRSIsImZldGNoU2hpcG1lbnRzIiwicGFyYW1zIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImFwcGVuZCIsInRvU3RyaW5nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJvayIsImVycm9yRGF0YSIsImpzb24iLCJjYXRjaCIsIkVycm9yIiwiZXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiY3JlYXRlU2hpcG1lbnQiLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXN1bHQiLCJ1cGRhdGVTaGlwbWVudCIsImlkIiwiZGVsZXRlU2hpcG1lbnQiLCJxdWVyeUNsaWVudCIsInVzZVF1ZXJ5Q2xpZW50IiwicXVlcnlLZXkiLCJpc0xvYWRpbmciLCJyZWZldGNoIiwidXNlUXVlcnkiLCJxdWVyeUZuIiwic3RhbGVUaW1lIiwicmV0cnkiLCJyZXRyeURlbGF5IiwiYXR0ZW1wdEluZGV4IiwiTWF0aCIsIm1pbiIsInVzZU11dGF0aW9uIiwibXV0YXRpb25GbiIsIm9uU3VjY2VzcyIsIm5ld1NoaXBtZW50IiwiaW52YWxpZGF0ZVF1ZXJpZXMiLCJ0b2FzdCIsInN1Y2Nlc3MiLCJkZXNjcmlwdGlvbiIsInNoaXBtZW50X251bWJlciIsIm9uRXJyb3IiLCJtZXNzYWdlIiwidXBkYXRlZFNoaXBtZW50Iiwic2V0UXVlcnlEYXRhIiwiXyIsImRlbGV0ZWRJZCIsInJlbW92ZVF1ZXJpZXMiLCJmaWx0ZXJzIiwic2V0RmlsdGVycyIsInVzZVN0YXRlIiwicGFnZSIsImxpbWl0Iiwib3JkZXJfYnkiLCJvcmRlcl9kaXJlY3Rpb24iLCJ1cGRhdGVGaWx0ZXIiLCJ1c2VDYWxsYmFjayIsInByZXYiLCJyZXNldEZpbHRlcnMiLCJzZXRQYWdlIiwic2V0U3RhdHVzIiwic2V0U2VhcmNoIiwic2VhcmNoIiwic2V0RGF0ZVJhbmdlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwic2hpcG1lbnRzIiwidG90YWwiLCJsZW5ndGgiLCJieVN0YXR1cyIsInJlZHVjZSIsImFjYyIsInNoaXBtZW50IiwidG90YWxDb3N0IiwidG90YWxfY29zdCIsImF2ZXJhZ2VDb3N0Iiwic2VsZWN0ZWRTaGlwbWVudHMiLCJzZXRTZWxlY3RlZFNoaXBtZW50cyIsImJ1bGtVcGRhdGVTdGF0dXMiLCJzaGlwbWVudElkcyIsInByb21pc2VzIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsImJ1bGtEZWxldGUiLCJ0b2dnbGVTZWxlY3Rpb24iLCJzaGlwbWVudElkIiwiaW5jbHVkZXMiLCJmaWx0ZXIiLCJzZWxlY3RBbGwiLCJjbGVhclNlbGVjdGlvbiIsImlzUGVuZGluZyJdLCJtYXBwaW5ncyI6IkFBQUEsd0RBQXdEO0FBQ3hELHdDQUF3QztBQUN4QyxvREFBb0Q7QUFDcEQsdURBQXVEO0FBQ3ZELHdEQUF3RDtBQUV4RDs7Ozs7Ozs7Ozs7O1FBNlNnQkE7ZUFBQUE7O1FBdktBQztlQUFBQTs7UUE2REFDO2VBQUFBOztRQTJCQUM7ZUFBQUE7O1FBNkRBQztlQUFBQTs7UUFuTEFDO2VBQUFBOztRQTBEQUM7ZUFBQUE7Ozs0QkFoS3NDO3VCQUNoQjt3QkFDaEI7QUFXdEIsd0RBQXdEO0FBQ3hELDJCQUEyQjtBQUMzQix3REFBd0Q7QUFFeEQsTUFBTUMsc0JBQXNCO0lBQUM7SUFBUztJQUFhO0NBQVk7QUFDL0QsTUFBTUMsYUFBYSxPQUFPLGNBQWM7QUFFeEMsd0RBQXdEO0FBQ3hELG1CQUFtQjtBQUNuQix3REFBd0Q7QUFFeEQsZUFBZUMsZUFBZUMsTUFBMkI7SUFDdkQsTUFBTUMsZUFBZSxJQUFJQztJQUV6QkMsT0FBT0MsT0FBTyxDQUFDSixRQUFRSyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQzFDLElBQUlBLFVBQVVDLGFBQWFE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