{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\admin\\useProductList.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  stock: number;\r\n  category_id: number;\r\n  images: {\r\n    main: string;\r\n    gallery: string[];\r\n    previews: string[];\r\n    thumbnails: string[];\r\n  };\r\n  created_at: string;\r\n  updated_at: string;\r\n  category_name: string;\r\n}\r\n\r\ninterface ProductListResponse {\r\n  data: Product[];\r\n  total: number;\r\n  page: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n}\r\n\r\n/**\r\n * Hook est√°ndar para gesti√≥n de productos en el panel administrativo\r\n *\r\n * Funcionalidades:\r\n * - Consulta real a la API /api/admin/products\r\n * - Carga de 25 productos reales de Supabase por p√°gina\r\n * - Informaci√≥n de paginaci√≥n completa\r\n * - Datos completos (nombres, precios, stock, categor√≠as, im√°genes)\r\n *\r\n * @returns {Object} Estado del hook con productos, loading y error\r\n */\r\nexport function useProductList() {\r\n  console.log('üîß useProductList: Hook iniciado');\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        console.log('üîß useProductList: Iniciando fetch...');\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        const response = await fetch('/api/admin/products?limit=25', {\r\n          credentials: 'include',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        console.log('üîß useProductList: Response status:', response.status);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error ${response.status}: ${response.statusText}`);\r\n        }\r\n\r\n        const data: ProductListResponse = await response.json();\r\n        console.log('üîß useProductList: Respuesta completa:', data);\r\n        console.log('üîß useProductList: data.data:', data.data);\r\n\r\n        if (Array.isArray(data.data)) {\r\n          setProducts(data.data);\r\n          console.log('üîß useProductList: ‚úÖ Productos cargados:', data.data.length);\r\n        } else {\r\n          throw new Error('Estructura de respuesta inv√°lida - data no es un array');\r\n        }\r\n      } catch (err) {\r\n        console.error('üîß useProductList: ‚ùå Error:', err);\r\n        setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        setProducts([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  return {\r\n    products,\r\n    isLoading,\r\n    error\r\n  };\r\n}\r\n\r\nexport type { Product, ProductListResponse };\r\n"],"names":["useProductList","console","log","products","setProducts","useState","isLoading","setIsLoading","error","setError","useEffect","fetchProducts","response","fetch","credentials","headers","status","ok","Error","statusText","data","json","Array","isArray","length","err","message"],"mappings":";;;;+BAuCgBA;;;eAAAA;;;uBAvCoB;AAuC7B,SAASA;IACdC,QAAQC,GAAG,CAAC;IACZ,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAY,EAAE;IACtD,MAAM,CAACC,WAAWC,aAAa,GAAGF,IAAAA,eAAQ,EAAC;IAC3C,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAElDK,IAAAA,gBAAS,EAAC;QACR,MAAMC,gBAAgB;YACpB,IAAI;gBACFV,QAAQC,GAAG,CAAC;gBACZK,aAAa;gBACbE,SAAS;gBAET,MAAMG,WAAW,MAAMC,MAAM,gCAAgC;oBAC3DC,aAAa;oBACbC,SAAS;wBACP,gBAAgB;oBAClB;gBACF;gBACAd,QAAQC,GAAG,CAAC,uCAAuCU,SAASI,MAAM;gBAElE,IAAI,CAACJ,SAASK,EAAE,EAAE;oBAChB,MAAM,IAAIC,MAAM,CAAC,MAAM,EAAEN,SAASI,MAAM,CAAC,EAAE,EAAEJ,SAASO,UAAU,EAAE;gBACpE;gBAEA,MAAMC,OAA4B,MAAMR,SAASS,IAAI;gBACrDpB,QAAQC,GAAG,CAAC,0CAA0CkB;gBACtDnB,QAAQC,GAAG,CAAC,iCAAiCkB,KAAKA,IAAI;gBAEtD,IAAIE,MAAMC,OAAO,CAACH,KAAKA,IAAI,GAAG;oBAC5BhB,YAAYgB,KAAKA,IAAI;oBACrBnB,QAAQC,GAAG,CAAC,4CAA4CkB,KAAKA,IAAI,CAACI,MAAM;gBAC1E,OAAO;oBACL,MAAM,IAAIN,MAAM;gBAClB;YACF,EAAE,OAAOO,KAAK;gBACZxB,QAAQO,KAAK,CAAC,+BAA+BiB;gBAC7ChB,SAASgB,eAAeP,QAAQO,IAAIC,OAAO,GAAG;gBAC9CtB,YAAY,EAAE;YAChB,SAAU;gBACRG,aAAa;YACf;QACF;QAEAI;IACF,GAAG,EAAE;IAEL,OAAO;QACLR;QACAG;QACAE;IACF;AACF"}