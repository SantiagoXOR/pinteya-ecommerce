d4fb74078317f9d43a05815095331be1
// ===================================
// HOOK: useSearchOptimized - Sistema de b√∫squeda con TanStack Query
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return _default;
    },
    get useSearchOptimized () {
        return useSearchOptimized;
    }
});
const _react = require("react");
const _reactquery = require("@tanstack/react-query");
const _usedebounce = require("use-debounce");
const _products = require("../lib/api/products");
const _queryclient = require("../lib/query-client");
const _useSearchErrorHandler = require("./useSearchErrorHandler");
const _useSearchToast = require("./useSearchToast");
const _useSearchNavigation = require("./useSearchNavigation");
const _useTrendingSearches = require("./useTrendingSearches");
const _useRecentSearches = require("./useRecentSearches");
const _shop = require("../constants/shop");
function useSearchOptimized(options = {}) {
    const { debounceMs = 150, maxSuggestions = 6, searchLimit = 12, saveRecentSearches = true, enablePrefetch = true, onSearch, onSuggestionSelect } = options;
    // Estados locales
    const [query, setQuery] = (0, _react.useState)('');
    const [debouncedQuery, setDebouncedQuery] = (0, _react.useState)('');
    const [recentSearches, setRecentSearches] = (0, _react.useState)([]);
    const [hasSearched, setHasSearched] = (0, _react.useState)(false);
    // Hooks externos
    const queryClient = (0, _reactquery.useQueryClient)();
    const errorHandler = (0, _useSearchErrorHandler.useSearchErrorHandler)();
    const toastHandler = (0, _useSearchToast.useSearchToast)();
    const navigation = (0, _useSearchNavigation.useSearchNavigation)({
        scrollToTop: true,
        onBeforeNavigate: (url)=>console.log('üîç Navegando a:', url),
        onAfterNavigate: (url)=>console.log('‚úÖ Navegaci√≥n completada:', url)
    });
    // Hooks para trending y recent searches
    const { trendingSearches, trackSearch } = (0, _useTrendingSearches.useTrendingSearches)({
        limit: 4,
        enabled: true
    });
    const { recentSearches: recentSearchesList, addSearch: addRecentSearch, getRecentSearches } = (0, _useRecentSearches.useRecentSearches)({
        maxSearches: _shop.SEARCH_CONSTANTS.MAX_RECENT_SEARCHES,
        enablePersistence: saveRecentSearches,
        expirationDays: _shop.SEARCH_CONSTANTS.RECENT_SEARCHES_EXPIRATION_DAYS
    });
    // ===================================
    // DEBOUNCED QUERY UPDATE
    // ===================================
    const updateDebouncedQuery = (0, _usedebounce.useDebouncedCallback)((value)=>{
        setDebouncedQuery(value);
        // Analytics tracking
        if (value.trim() && process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: Query enabled condition will be:', !!value?.trim());
        }
    }, debounceMs, {
        maxWait: 2000,
        leading: false,
        trailing: true
    });
    // ===================================
    // TANSTACK QUERY INTEGRATION
    // ===================================
    // Query principal para b√∫squedas
    const { data: searchResults, isLoading, error, isFetching, isStale, dataUpdatedAt } = (0, _reactquery.useQuery)({
        queryKey: _queryclient.searchQueryKeys.search(debouncedQuery),
        queryFn: async ({ queryKey, signal })=>{
            const [, , searchQuery] = queryKey;
            if (!searchQuery?.trim()) return [];
            try {
                // Usar la API de b√∫squeda correcta
                const url = `/api/search?q=${encodeURIComponent(searchQuery)}&limit=${maxSuggestions}`;
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    signal
                });
                if (!response.ok) {
                    console.error('üîç useSearchOptimized: API response not ok:', response.status);
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data.products || [];
            } catch (error) {
                console.error('üîç useSearchOptimized: API call failed:', error);
                throw error;
            }
        },
        enabled: (()=>{
            const isEnabled = !!debouncedQuery?.trim() && debouncedQuery.length >= 2;
            return isEnabled;
        })(),
        ..._queryclient.searchQueryConfig
    });
    // ===================================
    // SUGGESTIONS GENERATION
    // ===================================
    if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
        console.log('üîç useSearchOptimized: Current state before suggestions:', {
            query,
            debouncedQuery,
            searchResults: searchResults?.length || 0,
            isLoading,
            error: !!error
        });
    }
    const suggestions = (0, _react.useMemo)(()=>{
        const allSuggestions = [];
        const hasQuery = !!debouncedQuery?.trim();
        if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: query (current):', `"${query}"`);
            console.log('üîç useSearchOptimized: searchResults isArray:', Array.isArray(searchResults));
        }
        if (hasQuery) {
            // CUANDO HAY TEXTO: Priorizar productos SIEMPRE
            // Extraer productos de la respuesta de la API
            let products = [];
            // Si searchResults es un array directamente
            if (Array.isArray(searchResults)) {
                products = searchResults;
            } else if (searchResults && typeof searchResults === 'object' && Array.isArray(searchResults.data)) {
                products = searchResults.data;
            } else if (searchResults && typeof searchResults === 'object' && Array.isArray(searchResults.products)) {
                products = searchResults.products;
            }
            if (products.length > 0) {
                const productSuggestions = products.map((product)=>{
                    return {
                        id: product.id.toString(),
                        type: 'product',
                        title: product.name,
                        subtitle: product.category?.name,
                        image: product.images?.previews?.[0] || product.images?.thumbnails?.[0],
                        badge: product.stock > 0 ? 'En stock' : 'Sin stock',
                        href: `/products/${product.id}`
                    };
                });
                allSuggestions.push(...productSuggestions);
            } else {
                if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
                    console.log('üîç useSearchOptimized: searchResults structure:', {
                        isArray: Array.isArray(searchResults),
                        hasData: searchResults?.data ? 'yes' : 'no',
                        hasProducts: searchResults?.products ? 'yes' : 'no',
                        dataLength: searchResults?.data?.length,
                        productsLength: searchResults?.products?.length,
                        keys: searchResults ? Object.keys(searchResults) : 'null'
                    });
                }
            }
            // Solo agregar recent/trending si hay muy pocos productos
            if (allSuggestions.length < 2) {
                const recentSuggestions = getRecentSearches(2).map((search, index)=>({
                        id: `recent-${index}`,
                        type: 'recent',
                        title: search,
                        href: `/shop?q=${encodeURIComponent(search)}`
                    }));
                allSuggestions.push(...recentSuggestions);
            }
        } else {
            // CUANDO NO HAY TEXTO: Mostrar trending y recent
            // Agregar b√∫squedas recientes primero
            const recentSuggestions = getRecentSearches(3).map((search, index)=>({
                    id: `recent-${index}`,
                    type: 'recent',
                    title: search,
                    href: `/shop?q=${encodeURIComponent(search)}`
                }));
            allSuggestions.push(...recentSuggestions);
            // Agregar trending searches
            if (allSuggestions.length < maxSuggestions) {
                const remainingSlots = maxSuggestions - allSuggestions.length;
                const trendingSuggestions = trendingSearches.slice(0, remainingSlots).map((trending)=>({
                        id: trending.id,
                        type: 'trending',
                        title: trending.query,
                        href: trending.href,
                        badge: trending.count ? `${trending.count}` : undefined
                    }));
                allSuggestions.push(...trendingSuggestions);
            }
        }
        const finalSuggestions = allSuggestions.slice(0, maxSuggestions);
        if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: Final suggestions types:', finalSuggestions.map((s)=>s.type));
            console.log('üîç useSearchOptimized: Final suggestions titles:', finalSuggestions.map((s)=>s.title));
        }
        return finalSuggestions;
    }, [
        debouncedQuery,
        searchResults,
        isLoading,
        error,
        maxSuggestions,
        trendingSearches
    ]);
    // ===================================
    // SEARCH FUNCTIONS
    // ===================================
    const searchWithDebounce = (0, _react.useCallback)((searchQuery)=>{
        setQuery(searchQuery);
        updateDebouncedQuery(searchQuery);
        // Prefetch si est√° habilitado y la query es v√°lida
        if (enablePrefetch && searchQuery.trim().length >= 1) {
            // Prefetch de datos de b√∫squeda
            queryClient.prefetchQuery({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery),
                queryFn: ()=>(0, _products.searchProducts)(searchQuery, maxSuggestions),
                ..._queryclient.searchQueryConfig
            });
            // Prefetch de p√°gina de resultados
            navigation.prefetchSearch(searchQuery.trim());
        }
    }, [
        updateDebouncedQuery,
        enablePrefetch,
        queryClient,
        maxSuggestions,
        navigation
    ]);
    const executeSearch = (0, _react.useCallback)(async (searchQuery)=>{
        if (!searchQuery.trim()) return;
        try {
            setHasSearched(true);
            // Guardar en historial usando el hook
            if (saveRecentSearches) {
                addRecentSearch(searchQuery.trim());
            }
            // Registrar en trending searches
            trackSearch(searchQuery.trim()).catch(console.warn);
            // Navegar a p√°gina de resultados usando navegaci√≥n optimizada
            navigation.navigateToSearch(searchQuery.trim());
            // Callback externo
            if (onSearch && searchResults) {
                onSearch(searchQuery, searchResults);
            }
            toastHandler.showSuccessToast(searchQuery, searchResults?.length || 0);
        } catch (error) {
            console.error('‚ùå useSearchOptimized: Error en executeSearch:', error);
            errorHandler.handleError(error);
        }
    }, [
        saveRecentSearches,
        recentSearches,
        navigation,
        onSearch,
        searchResults,
        toastHandler,
        errorHandler
    ]);
    const selectSuggestion = (0, _react.useCallback)((suggestion)=>{
        // Navegar seg√∫n el tipo de sugerencia
        if (suggestion.type === 'product') {
            navigation.navigateToProduct(suggestion.id);
        } else {
            // Para b√∫squedas recientes o trending, navegar a b√∫squeda
            navigation.navigateToSearch(suggestion.title);
        }
        // Callback externo
        if (onSuggestionSelect) {
            onSuggestionSelect(suggestion);
        }
        toastHandler.showInfoToast(`${suggestion.type === 'product' ? 'Producto' : 'B√∫squeda'} seleccionado`, suggestion.title);
    }, [
        navigation,
        onSuggestionSelect,
        toastHandler
    ]);
    const clearSearch = (0, _react.useCallback)(()=>{
        setQuery('');
        setDebouncedQuery('');
        setHasSearched(false);
        // Limpiar cache de b√∫squedas si es necesario
        queryClient.removeQueries({
            queryKey: _queryclient.searchQueryKeys.searches()
        });
    }, [
        queryClient
    ]);
    // ===================================
    // LIFECYCLE
    // ===================================
    const initialize = (0, _react.useCallback)(()=>{
        // Cargar b√∫squedas recientes
        if (saveRecentSearches) {
            try {
                const saved = localStorage.getItem('pinteya-recent-searches');
                if (saved && saved.trim() !== '' && saved !== '""' && saved !== "''") {
                    // Validar que no est√© corrupto
                    if (saved.includes('""') && saved.length < 5) {
                        console.warn('Detected corrupted recent searches data, cleaning up');
                        localStorage.removeItem('pinteya-recent-searches');
                        return;
                    }
                    const parsed = JSON.parse(saved);
                    // Verificar que sea un array v√°lido
                    if (Array.isArray(parsed)) {
                        setRecentSearches(parsed);
                    } else {
                        console.warn('Invalid recent searches format, resetting');
                        localStorage.removeItem('pinteya-recent-searches');
                    }
                }
            } catch (error) {
                console.warn('Error cargando b√∫squedas recientes:', error);
                // Limpiar datos corruptos
                localStorage.removeItem('pinteya-recent-searches');
            }
        }
    }, [
        saveRecentSearches
    ]);
    const cleanup = (0, _react.useCallback)(()=>{
        // Limpiar debounce y cache si es necesario
        updateDebouncedQuery.cancel();
    }, [
        updateDebouncedQuery
    ]);
    // Inicializar al montar
    (0, _react.useEffect)(()=>{
        initialize();
        return cleanup;
    }, [
        initialize,
        cleanup
    ]);
    // ===================================
    // RETURN
    // ===================================
    return {
        // Estado de b√∫squeda
        query,
        results: searchResults || [],
        suggestions,
        isLoading,
        error: error?.message || null,
        hasSearched,
        recentSearches: recentSearchesList,
        trendingSearches,
        // Estados de TanStack Query
        isFetching,
        isStale,
        dataUpdatedAt,
        // Estado de errores y toasts
        searchError: errorHandler.currentError,
        isRetrying: errorHandler.isRetrying,
        retryCount: errorHandler.retryCount,
        toasts: toastHandler.toasts,
        // Funciones principales
        searchWithDebounce,
        executeSearch,
        selectSuggestion,
        clearSearch,
        initialize,
        cleanup,
        // Funciones de manejo de errores
        clearError: errorHandler.clearError,
        retryManually: errorHandler.retryManually,
        // Funciones de toast
        removeToast: toastHandler.removeToast,
        clearToasts: toastHandler.clearToasts,
        // Utilidades de cache
        invalidateSearch: (searchQuery)=>queryClient.invalidateQueries({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery)
            }),
        prefetchSearch: (searchQuery)=>queryClient.prefetchQuery({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery),
                queryFn: ()=>(0, _products.searchProducts)(searchQuery, maxSuggestions),
                ..._queryclient.searchQueryConfig
            }),
        // Funciones de navegaci√≥n optimizada
        navigateToSearch: navigation.navigateToSearch,
        navigateToProduct: navigation.navigateToProduct,
        navigateToCategory: navigation.navigateToCategory,
        prefetchSearchPage: navigation.prefetchSearch,
        prefetchProductPage: navigation.prefetchProduct,
        getCurrentSearchQuery: navigation.getCurrentSearchQuery,
        buildSearchUrl: navigation.buildSearchUrl
    };
}
const _default = useSearchOptimized;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZVNlYXJjaE9wdGltaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBIT09LOiB1c2VTZWFyY2hPcHRpbWl6ZWQgLSBTaXN0ZW1hIGRlIGLDunNxdWVkYSBjb24gVGFuU3RhY2sgUXVlcnlcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VRdWVyeUNsaWVudCB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XHJcbmltcG9ydCB7IHVzZURlYm91bmNlZENhbGxiYWNrIH0gZnJvbSAndXNlLWRlYm91bmNlJztcclxuaW1wb3J0IHsgc2VhcmNoUHJvZHVjdHMgfSBmcm9tICdAL2xpYi9hcGkvcHJvZHVjdHMnO1xyXG5pbXBvcnQgeyBQcm9kdWN0V2l0aENhdGVnb3J5IH0gZnJvbSAnQC90eXBlcy9hcGknO1xyXG5pbXBvcnQgeyBzZWFyY2hRdWVyeUtleXMsIHNlYXJjaFF1ZXJ5Q29uZmlnIH0gZnJvbSAnQC9saWIvcXVlcnktY2xpZW50JztcclxuaW1wb3J0IHsgdXNlU2VhcmNoRXJyb3JIYW5kbGVyIH0gZnJvbSAnLi91c2VTZWFyY2hFcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hUb2FzdCB9IGZyb20gJy4vdXNlU2VhcmNoVG9hc3QnO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hOYXZpZ2F0aW9uIH0gZnJvbSAnLi91c2VTZWFyY2hOYXZpZ2F0aW9uJztcclxuaW1wb3J0IHsgdXNlVHJlbmRpbmdTZWFyY2hlcyB9IGZyb20gJy4vdXNlVHJlbmRpbmdTZWFyY2hlcyc7XHJcbmltcG9ydCB7IHVzZVJlY2VudFNlYXJjaGVzIH0gZnJvbSAnLi91c2VSZWNlbnRTZWFyY2hlcyc7XHJcbmltcG9ydCB7IFNFQVJDSF9DT05TVEFOVFMgfSBmcm9tICdAL2NvbnN0YW50cy9zaG9wJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFN1Z2dlc3Rpb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdHlwZTogJ3Byb2R1Y3QnIHwgJ2NhdGVnb3J5JyB8ICdyZWNlbnQnIHwgJ3RyZW5kaW5nJztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHN1YnRpdGxlPzogc3RyaW5nO1xyXG4gIGltYWdlPzogc3RyaW5nO1xyXG4gIGJhZGdlPzogc3RyaW5nO1xyXG4gIGhyZWY6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VTZWFyY2hPcHRpbWl6ZWRPcHRpb25zIHtcclxuICAvKiogVGllbXBvIGRlIGRlYm91bmNlIGVuIG1pbGlzZWd1bmRvcyAqL1xyXG4gIGRlYm91bmNlTXM/OiBudW1iZXI7XHJcbiAgLyoqIE7Dum1lcm8gbcOheGltbyBkZSBzdWdlcmVuY2lhcyAqL1xyXG4gIG1heFN1Z2dlc3Rpb25zPzogbnVtYmVyO1xyXG4gIC8qKiBMw61taXRlIGRlIHJlc3VsdGFkb3MgZGUgYsO6c3F1ZWRhICovXHJcbiAgc2VhcmNoTGltaXQ/OiBudW1iZXI7XHJcbiAgLyoqIEd1YXJkYXIgYsO6c3F1ZWRhcyByZWNpZW50ZXMgKi9cclxuICBzYXZlUmVjZW50U2VhcmNoZXM/OiBib29sZWFuO1xyXG4gIC8qKiBIYWJpbGl0YXIgcHJlZmV0Y2ggZGUgc3VnZXJlbmNpYXMgKi9cclxuICBlbmFibGVQcmVmZXRjaD86IGJvb2xlYW47XHJcbiAgLyoqIENhbGxiYWNrIGN1YW5kbyBzZSByZWFsaXphIHVuYSBiw7pzcXVlZGEgKi9cclxuICBvblNlYXJjaD86IChxdWVyeTogc3RyaW5nLCByZXN1bHRzOiBQcm9kdWN0V2l0aENhdGVnb3J5W10pID0+IHZvaWQ7XHJcbiAgLyoqIENhbGxiYWNrIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuYSBzdWdlcmVuY2lhICovXHJcbiAgb25TdWdnZXN0aW9uU2VsZWN0PzogKHN1Z2dlc3Rpb246IFNlYXJjaFN1Z2dlc3Rpb24pID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhPT0sgUFJJTkNJUEFMXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlU2VhcmNoT3B0aW1pemVkKG9wdGlvbnM6IFVzZVNlYXJjaE9wdGltaXplZE9wdGlvbnMgPSB7fSkge1xyXG4gIGNvbnN0IHtcclxuICAgIGRlYm91bmNlTXMgPSAxNTAsXHJcbiAgICBtYXhTdWdnZXN0aW9ucyA9IDYsXHJcbiAgICBzZWFyY2hMaW1pdCA9IDEyLFxyXG4gICAgc2F2ZVJlY2VudFNlYXJjaGVzID0gdHJ1ZSxcclxuICAgIGVuYWJsZVByZWZldGNoID0gdHJ1ZSxcclxuICAgIG9uU2VhcmNoLFxyXG4gICAgb25TdWdnZXN0aW9uU2VsZWN0LFxyXG4gIH0gPSBvcHRpb25zO1xyXG5cclxuICAvLyBFc3RhZG9zIGxvY2FsZXNcclxuICBjb25zdCBbcXVlcnksIHNldFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbZGVib3VuY2VkUXVlcnksIHNldERlYm91bmNlZFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbcmVjZW50U2VhcmNoZXMsIHNldFJlY2VudFNlYXJjaGVzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XHJcbiAgY29uc3QgW2hhc1NlYXJjaGVkLCBzZXRIYXNTZWFyY2hlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vIEhvb2tzIGV4dGVybm9zXHJcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xyXG4gIGNvbnN0IGVycm9ySGFuZGxlciA9IHVzZVNlYXJjaEVycm9ySGFuZGxlcigpO1xyXG4gIGNvbnN0IHRvYXN0SGFuZGxlciA9IHVzZVNlYXJjaFRvYXN0KCk7XHJcbiAgY29uc3QgbmF2aWdhdGlvbiA9IHVzZVNlYXJjaE5hdmlnYXRpb24oe1xyXG4gICAgc2Nyb2xsVG9Ub3A6IHRydWUsXHJcbiAgICBvbkJlZm9yZU5hdmlnYXRlOiAodXJsKSA9PiBjb25zb2xlLmxvZygn8J+UjSBOYXZlZ2FuZG8gYTonLCB1cmwpLFxyXG4gICAgb25BZnRlck5hdmlnYXRlOiAodXJsKSA9PiBjb25zb2xlLmxvZygn4pyFIE5hdmVnYWNpw7NuIGNvbXBsZXRhZGE6JywgdXJsKSxcclxuICB9KTtcclxuXHJcbiAgLy8gSG9va3MgcGFyYSB0cmVuZGluZyB5IHJlY2VudCBzZWFyY2hlc1xyXG4gIGNvbnN0IHsgdHJlbmRpbmdTZWFyY2hlcywgdHJhY2tTZWFyY2ggfSA9IHVzZVRyZW5kaW5nU2VhcmNoZXMoe1xyXG4gICAgbGltaXQ6IDQsXHJcbiAgICBlbmFibGVkOiB0cnVlXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHtcclxuICAgIHJlY2VudFNlYXJjaGVzOiByZWNlbnRTZWFyY2hlc0xpc3QsXHJcbiAgICBhZGRTZWFyY2g6IGFkZFJlY2VudFNlYXJjaCxcclxuICAgIGdldFJlY2VudFNlYXJjaGVzXHJcbiAgfSA9IHVzZVJlY2VudFNlYXJjaGVzKHtcclxuICAgIG1heFNlYXJjaGVzOiBTRUFSQ0hfQ09OU1RBTlRTLk1BWF9SRUNFTlRfU0VBUkNIRVMsXHJcbiAgICBlbmFibGVQZXJzaXN0ZW5jZTogc2F2ZVJlY2VudFNlYXJjaGVzLFxyXG4gICAgZXhwaXJhdGlvbkRheXM6IFNFQVJDSF9DT05TVEFOVFMuUkVDRU5UX1NFQVJDSEVTX0VYUElSQVRJT05fREFZU1xyXG4gIH0pO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIERFQk9VTkNFRCBRVUVSWSBVUERBVEVcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBjb25zdCB1cGRhdGVEZWJvdW5jZWRRdWVyeSA9IHVzZURlYm91bmNlZENhbGxiYWNrKFxyXG4gICAgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgc2V0RGVib3VuY2VkUXVlcnkodmFsdWUpO1xyXG5cclxuICAgICAgLy8gQW5hbHl0aWNzIHRyYWNraW5nXHJcbiAgICAgIGlmICh2YWx1ZS50cmltKCkgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIID09PSAndHJ1ZScpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IFF1ZXJ5IGVuYWJsZWQgY29uZGl0aW9uIHdpbGwgYmU6JywgISF2YWx1ZT8udHJpbSgpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlYm91bmNlTXMsXHJcbiAgICB7XHJcbiAgICAgIG1heFdhaXQ6IDIwMDAsXHJcbiAgICAgIGxlYWRpbmc6IGZhbHNlLFxyXG4gICAgICB0cmFpbGluZzogdHJ1ZSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFRBTlNUQUNLIFFVRVJZIElOVEVHUkFUSU9OXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLy8gUXVlcnkgcHJpbmNpcGFsIHBhcmEgYsO6c3F1ZWRhc1xyXG4gIGNvbnN0IHsgXHJcbiAgICBkYXRhOiBzZWFyY2hSZXN1bHRzLCBcclxuICAgIGlzTG9hZGluZywgXHJcbiAgICBlcnJvciwgXHJcbiAgICBpc0ZldGNoaW5nLFxyXG4gICAgaXNTdGFsZSxcclxuICAgIGRhdGFVcGRhdGVkQXQgXHJcbiAgfSA9IHVzZVF1ZXJ5KHtcclxuICAgIHF1ZXJ5S2V5OiBzZWFyY2hRdWVyeUtleXMuc2VhcmNoKGRlYm91bmNlZFF1ZXJ5KSxcclxuICAgIHF1ZXJ5Rm46IGFzeW5jICh7IHF1ZXJ5S2V5LCBzaWduYWwgfSkgPT4ge1xyXG4gICAgICBjb25zdCBbLCAsIHNlYXJjaFF1ZXJ5XSA9IHF1ZXJ5S2V5O1xyXG4gICAgICBpZiAoIXNlYXJjaFF1ZXJ5Py50cmltKCkpIHJldHVybiBbXTtcclxuXHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFVzYXIgbGEgQVBJIGRlIGLDunNxdWVkYSBjb3JyZWN0YVxyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaFF1ZXJ5KX0mbGltaXQ9JHttYXhTdWdnZXN0aW9uc31gO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzaWduYWwsIC8vIFVzYXIgQWJvcnRDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflI0gdXNlU2VhcmNoT3B0aW1pemVkOiBBUEkgcmVzcG9uc2Ugbm90IG9rOicsIHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YS5wcm9kdWN0cyB8fCBbXTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5SNIHVzZVNlYXJjaE9wdGltaXplZDogQVBJIGNhbGwgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGVuYWJsZWQ6ICgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzRW5hYmxlZCA9ICEhZGVib3VuY2VkUXVlcnk/LnRyaW0oKSAmJiBkZWJvdW5jZWRRdWVyeS5sZW5ndGggPj0gMjtcclxuICAgICAgcmV0dXJuIGlzRW5hYmxlZDtcclxuICAgIH0pKCksXHJcbiAgICAuLi5zZWFyY2hRdWVyeUNvbmZpZyxcclxuICB9KTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBTVUdHRVNUSU9OUyBHRU5FUkFUSU9OXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX1NFQVJDSCA9PT0gJ3RydWUnKSB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEN1cnJlbnQgc3RhdGUgYmVmb3JlIHN1Z2dlc3Rpb25zOicsIHtcclxuICAgICAgcXVlcnksXHJcbiAgICAgIGRlYm91bmNlZFF1ZXJ5LFxyXG4gICAgICBzZWFyY2hSZXN1bHRzOiBzZWFyY2hSZXN1bHRzPy5sZW5ndGggfHwgMCxcclxuICAgICAgaXNMb2FkaW5nLFxyXG4gICAgICBlcnJvcjogISFlcnJvclxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdWdnZXN0aW9uczogU2VhcmNoU3VnZ2VzdGlvbltdID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBhbGxTdWdnZXN0aW9uczogU2VhcmNoU3VnZ2VzdGlvbltdID0gW107XHJcbiAgICBjb25zdCBoYXNRdWVyeSA9ICEhZGVib3VuY2VkUXVlcnk/LnRyaW0oKTtcclxuXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIID09PSAndHJ1ZScpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflI0gdXNlU2VhcmNoT3B0aW1pemVkOiBxdWVyeSAoY3VycmVudCk6JywgYFwiJHtxdWVyeX1cImApO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IHNlYXJjaFJlc3VsdHMgaXNBcnJheTonLCBBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGFzUXVlcnkpIHtcclxuICAgICAgLy8gQ1VBTkRPIEhBWSBURVhUTzogUHJpb3JpemFyIHByb2R1Y3RvcyBTSUVNUFJFXHJcblxyXG4gICAgICAvLyBFeHRyYWVyIHByb2R1Y3RvcyBkZSBsYSByZXNwdWVzdGEgZGUgbGEgQVBJXHJcbiAgICAgIGxldCBwcm9kdWN0cyA9IFtdO1xyXG5cclxuICAgICAgLy8gU2kgc2VhcmNoUmVzdWx0cyBlcyB1biBhcnJheSBkaXJlY3RhbWVudGVcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cykpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHM7XHJcbiAgICAgIH1cclxuICAgICAgLy8gU2kgc2VhcmNoUmVzdWx0cyBlcyB1biBvYmpldG8gY29uIHByb3BpZWRhZCBkYXRhIChyZXNwdWVzdGEgZGUgQVBJKVxyXG4gICAgICBlbHNlIGlmIChzZWFyY2hSZXN1bHRzICYmIHR5cGVvZiBzZWFyY2hSZXN1bHRzID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMuZGF0YSkpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHMuZGF0YTtcclxuICAgICAgfVxyXG4gICAgICAvLyBTaSBzZWFyY2hSZXN1bHRzIGVzIHVuIG9iamV0byBjb24gcHJvcGllZGFkIHByb2R1Y3RzXHJcbiAgICAgIGVsc2UgaWYgKHNlYXJjaFJlc3VsdHMgJiYgdHlwZW9mIHNlYXJjaFJlc3VsdHMgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cy5wcm9kdWN0cykpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHMucHJvZHVjdHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdFN1Z2dlc3Rpb25zID0gcHJvZHVjdHMubWFwKChwcm9kdWN0OiBQcm9kdWN0V2l0aENhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogcHJvZHVjdC5pZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICB0eXBlOiAncHJvZHVjdCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgICAgIHN1YnRpdGxlOiBwcm9kdWN0LmNhdGVnb3J5Py5uYW1lLFxyXG4gICAgICAgICAgICBpbWFnZTogcHJvZHVjdC5pbWFnZXM/LnByZXZpZXdzPy5bMF0gfHwgcHJvZHVjdC5pbWFnZXM/LnRodW1ibmFpbHM/LlswXSxcclxuICAgICAgICAgICAgYmFkZ2U6IHByb2R1Y3Quc3RvY2sgPiAwID8gJ0VuIHN0b2NrJyA6ICdTaW4gc3RvY2snLFxyXG4gICAgICAgICAgICBocmVmOiBgL3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH1gLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnByb2R1Y3RTdWdnZXN0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX1NFQVJDSCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IHNlYXJjaFJlc3VsdHMgc3RydWN0dXJlOicsIHtcclxuICAgICAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSxcclxuICAgICAgICAgICAgaGFzRGF0YTogc2VhcmNoUmVzdWx0cz8uZGF0YSA/ICd5ZXMnIDogJ25vJyxcclxuICAgICAgICAgICAgaGFzUHJvZHVjdHM6IHNlYXJjaFJlc3VsdHM/LnByb2R1Y3RzID8gJ3llcycgOiAnbm8nLFxyXG4gICAgICAgICAgICBkYXRhTGVuZ3RoOiBzZWFyY2hSZXN1bHRzPy5kYXRhPy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzTGVuZ3RoOiBzZWFyY2hSZXN1bHRzPy5wcm9kdWN0cz8ubGVuZ3RoLFxyXG4gICAgICAgICAgICBrZXlzOiBzZWFyY2hSZXN1bHRzID8gT2JqZWN0LmtleXMoc2VhcmNoUmVzdWx0cykgOiAnbnVsbCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU29sbyBhZ3JlZ2FyIHJlY2VudC90cmVuZGluZyBzaSBoYXkgbXV5IHBvY29zIHByb2R1Y3Rvc1xyXG4gICAgICBpZiAoYWxsU3VnZ2VzdGlvbnMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgIGNvbnN0IHJlY2VudFN1Z2dlc3Rpb25zID0gZ2V0UmVjZW50U2VhcmNoZXMoMikubWFwKChzZWFyY2gsIGluZGV4KSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IGByZWNlbnQtJHtpbmRleH1gLFxyXG4gICAgICAgICAgdHlwZTogJ3JlY2VudCcgYXMgY29uc3QsXHJcbiAgICAgICAgICB0aXRsZTogc2VhcmNoLFxyXG4gICAgICAgICAgaHJlZjogYC9zaG9wP3E9JHtlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoKX1gLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnJlY2VudFN1Z2dlc3Rpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ1VBTkRPIE5PIEhBWSBURVhUTzogTW9zdHJhciB0cmVuZGluZyB5IHJlY2VudFxyXG5cclxuICAgICAgLy8gQWdyZWdhciBiw7pzcXVlZGFzIHJlY2llbnRlcyBwcmltZXJvXHJcbiAgICAgIGNvbnN0IHJlY2VudFN1Z2dlc3Rpb25zID0gZ2V0UmVjZW50U2VhcmNoZXMoMykubWFwKChzZWFyY2gsIGluZGV4KSA9PiAoe1xyXG4gICAgICAgIGlkOiBgcmVjZW50LSR7aW5kZXh9YCxcclxuICAgICAgICB0eXBlOiAncmVjZW50JyBhcyBjb25zdCxcclxuICAgICAgICB0aXRsZTogc2VhcmNoLFxyXG4gICAgICAgIGhyZWY6IGAvc2hvcD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaCl9YCxcclxuICAgICAgfSkpO1xyXG4gICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnJlY2VudFN1Z2dlc3Rpb25zKTtcclxuXHJcbiAgICAgIC8vIEFncmVnYXIgdHJlbmRpbmcgc2VhcmNoZXNcclxuICAgICAgaWYgKGFsbFN1Z2dlc3Rpb25zLmxlbmd0aCA8IG1heFN1Z2dlc3Rpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nU2xvdHMgPSBtYXhTdWdnZXN0aW9ucyAtIGFsbFN1Z2dlc3Rpb25zLmxlbmd0aDtcclxuICAgICAgICBjb25zdCB0cmVuZGluZ1N1Z2dlc3Rpb25zID0gdHJlbmRpbmdTZWFyY2hlcy5zbGljZSgwLCByZW1haW5pbmdTbG90cykubWFwKHRyZW5kaW5nID0+ICh7XHJcbiAgICAgICAgICBpZDogdHJlbmRpbmcuaWQsXHJcbiAgICAgICAgICB0eXBlOiAndHJlbmRpbmcnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgdGl0bGU6IHRyZW5kaW5nLnF1ZXJ5LFxyXG4gICAgICAgICAgaHJlZjogdHJlbmRpbmcuaHJlZixcclxuICAgICAgICAgIGJhZGdlOiB0cmVuZGluZy5jb3VudCA/IGAke3RyZW5kaW5nLmNvdW50fWAgOiB1bmRlZmluZWRcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYWxsU3VnZ2VzdGlvbnMucHVzaCguLi50cmVuZGluZ1N1Z2dlc3Rpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbmFsU3VnZ2VzdGlvbnMgPSBhbGxTdWdnZXN0aW9ucy5zbGljZSgwLCBtYXhTdWdnZXN0aW9ucyk7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIID09PSAndHJ1ZScpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflI0gdXNlU2VhcmNoT3B0aW1pemVkOiBGaW5hbCBzdWdnZXN0aW9ucyB0eXBlczonLCBmaW5hbFN1Z2dlc3Rpb25zLm1hcChzID0+IHMudHlwZSkpO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEZpbmFsIHN1Z2dlc3Rpb25zIHRpdGxlczonLCBmaW5hbFN1Z2dlc3Rpb25zLm1hcChzID0+IHMudGl0bGUpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmluYWxTdWdnZXN0aW9ucztcclxuICB9LCBbZGVib3VuY2VkUXVlcnksIHNlYXJjaFJlc3VsdHMsIGlzTG9hZGluZywgZXJyb3IsIG1heFN1Z2dlc3Rpb25zLCB0cmVuZGluZ1NlYXJjaGVzXSk7XHJcblxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFNFQVJDSCBGVU5DVElPTlNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBjb25zdCBzZWFyY2hXaXRoRGVib3VuY2UgPSB1c2VDYWxsYmFjaygoc2VhcmNoUXVlcnk6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0UXVlcnkoc2VhcmNoUXVlcnkpO1xyXG4gICAgdXBkYXRlRGVib3VuY2VkUXVlcnkoc2VhcmNoUXVlcnkpO1xyXG5cclxuICAgIC8vIFByZWZldGNoIHNpIGVzdMOhIGhhYmlsaXRhZG8geSBsYSBxdWVyeSBlcyB2w6FsaWRhXHJcbiAgICBpZiAoZW5hYmxlUHJlZmV0Y2ggJiYgc2VhcmNoUXVlcnkudHJpbSgpLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgIC8vIFByZWZldGNoIGRlIGRhdG9zIGRlIGLDunNxdWVkYVxyXG4gICAgICBxdWVyeUNsaWVudC5wcmVmZXRjaFF1ZXJ5KHtcclxuICAgICAgICBxdWVyeUtleTogc2VhcmNoUXVlcnlLZXlzLnNlYXJjaChzZWFyY2hRdWVyeSksXHJcbiAgICAgICAgcXVlcnlGbjogKCkgPT4gc2VhcmNoUHJvZHVjdHMoc2VhcmNoUXVlcnksIG1heFN1Z2dlc3Rpb25zKSxcclxuICAgICAgICAuLi5zZWFyY2hRdWVyeUNvbmZpZyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBQcmVmZXRjaCBkZSBww6FnaW5hIGRlIHJlc3VsdGFkb3NcclxuICAgICAgbmF2aWdhdGlvbi5wcmVmZXRjaFNlYXJjaChzZWFyY2hRdWVyeS50cmltKCkpO1xyXG4gICAgfVxyXG4gIH0sIFt1cGRhdGVEZWJvdW5jZWRRdWVyeSwgZW5hYmxlUHJlZmV0Y2gsIHF1ZXJ5Q2xpZW50LCBtYXhTdWdnZXN0aW9ucywgbmF2aWdhdGlvbl0pO1xyXG5cclxuICBjb25zdCBleGVjdXRlU2VhcmNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlYXJjaFF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuICAgIGlmICghc2VhcmNoUXVlcnkudHJpbSgpKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SGFzU2VhcmNoZWQodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHdWFyZGFyIGVuIGhpc3RvcmlhbCB1c2FuZG8gZWwgaG9va1xyXG4gICAgICBpZiAoc2F2ZVJlY2VudFNlYXJjaGVzKSB7XHJcbiAgICAgICAgYWRkUmVjZW50U2VhcmNoKHNlYXJjaFF1ZXJ5LnRyaW0oKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlZ2lzdHJhciBlbiB0cmVuZGluZyBzZWFyY2hlc1xyXG4gICAgICB0cmFja1NlYXJjaChzZWFyY2hRdWVyeS50cmltKCkpLmNhdGNoKGNvbnNvbGUud2Fybik7XHJcblxyXG4gICAgICAvLyBOYXZlZ2FyIGEgcMOhZ2luYSBkZSByZXN1bHRhZG9zIHVzYW5kbyBuYXZlZ2FjacOzbiBvcHRpbWl6YWRhXHJcbiAgICAgIG5hdmlnYXRpb24ubmF2aWdhdGVUb1NlYXJjaChzZWFyY2hRdWVyeS50cmltKCkpO1xyXG5cclxuICAgICAgLy8gQ2FsbGJhY2sgZXh0ZXJub1xyXG4gICAgICBpZiAob25TZWFyY2ggJiYgc2VhcmNoUmVzdWx0cykge1xyXG4gICAgICAgIG9uU2VhcmNoKHNlYXJjaFF1ZXJ5LCBzZWFyY2hSZXN1bHRzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdG9hc3RIYW5kbGVyLnNob3dTdWNjZXNzVG9hc3Qoc2VhcmNoUXVlcnksIHNlYXJjaFJlc3VsdHM/Lmxlbmd0aCB8fCAwKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgdXNlU2VhcmNoT3B0aW1pemVkOiBFcnJvciBlbiBleGVjdXRlU2VhcmNoOicsIGVycm9yKTtcclxuICAgICAgZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9LCBbc2F2ZVJlY2VudFNlYXJjaGVzLCByZWNlbnRTZWFyY2hlcywgbmF2aWdhdGlvbiwgb25TZWFyY2gsIHNlYXJjaFJlc3VsdHMsIHRvYXN0SGFuZGxlciwgZXJyb3JIYW5kbGVyXSk7XHJcblxyXG4gIGNvbnN0IHNlbGVjdFN1Z2dlc3Rpb24gPSB1c2VDYWxsYmFjaygoc3VnZ2VzdGlvbjogU2VhcmNoU3VnZ2VzdGlvbikgPT4ge1xyXG5cclxuICAgIC8vIE5hdmVnYXIgc2Vnw7puIGVsIHRpcG8gZGUgc3VnZXJlbmNpYVxyXG4gICAgaWYgKHN1Z2dlc3Rpb24udHlwZSA9PT0gJ3Byb2R1Y3QnKSB7XHJcbiAgICAgIG5hdmlnYXRpb24ubmF2aWdhdGVUb1Byb2R1Y3Qoc3VnZ2VzdGlvbi5pZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQYXJhIGLDunNxdWVkYXMgcmVjaWVudGVzIG8gdHJlbmRpbmcsIG5hdmVnYXIgYSBiw7pzcXVlZGFcclxuICAgICAgbmF2aWdhdGlvbi5uYXZpZ2F0ZVRvU2VhcmNoKHN1Z2dlc3Rpb24udGl0bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGxiYWNrIGV4dGVybm9cclxuICAgIGlmIChvblN1Z2dlc3Rpb25TZWxlY3QpIHtcclxuICAgICAgb25TdWdnZXN0aW9uU2VsZWN0KHN1Z2dlc3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvYXN0SGFuZGxlci5zaG93SW5mb1RvYXN0KGAke3N1Z2dlc3Rpb24udHlwZSA9PT0gJ3Byb2R1Y3QnID8gJ1Byb2R1Y3RvJyA6ICdCw7pzcXVlZGEnfSBzZWxlY2Npb25hZG9gLCBzdWdnZXN0aW9uLnRpdGxlKTtcclxuICB9LCBbbmF2aWdhdGlvbiwgb25TdWdnZXN0aW9uU2VsZWN0LCB0b2FzdEhhbmRsZXJdKTtcclxuXHJcbiAgY29uc3QgY2xlYXJTZWFyY2ggPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBzZXRRdWVyeSgnJyk7XHJcbiAgICBzZXREZWJvdW5jZWRRdWVyeSgnJyk7XHJcbiAgICBzZXRIYXNTZWFyY2hlZChmYWxzZSk7XHJcbiAgICBcclxuICAgIC8vIExpbXBpYXIgY2FjaGUgZGUgYsO6c3F1ZWRhcyBzaSBlcyBuZWNlc2FyaW9cclxuICAgIHF1ZXJ5Q2xpZW50LnJlbW92ZVF1ZXJpZXMoeyBxdWVyeUtleTogc2VhcmNoUXVlcnlLZXlzLnNlYXJjaGVzKCkgfSk7XHJcbiAgfSwgW3F1ZXJ5Q2xpZW50XSk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gTElGRUNZQ0xFXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIC8vIENhcmdhciBiw7pzcXVlZGFzIHJlY2llbnRlc1xyXG4gICAgaWYgKHNhdmVSZWNlbnRTZWFyY2hlcykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BpbnRleWEtcmVjZW50LXNlYXJjaGVzJyk7XHJcbiAgICAgICAgaWYgKHNhdmVkICYmIHNhdmVkLnRyaW0oKSAhPT0gJycgJiYgc2F2ZWQgIT09ICdcIlwiJyAmJiBzYXZlZCAhPT0gXCInJ1wiKSB7XHJcbiAgICAgICAgICAvLyBWYWxpZGFyIHF1ZSBubyBlc3TDqSBjb3JydXB0b1xyXG4gICAgICAgICAgaWYgKHNhdmVkLmluY2x1ZGVzKCdcIlwiJykgJiYgc2F2ZWQubGVuZ3RoIDwgNSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RldGVjdGVkIGNvcnJ1cHRlZCByZWNlbnQgc2VhcmNoZXMgZGF0YSwgY2xlYW5pbmcgdXAnKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BpbnRleWEtcmVjZW50LXNlYXJjaGVzJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHNhdmVkKTtcclxuICAgICAgICAgIC8vIFZlcmlmaWNhciBxdWUgc2VhIHVuIGFycmF5IHbDoWxpZG9cclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZCkpIHtcclxuICAgICAgICAgICAgc2V0UmVjZW50U2VhcmNoZXMocGFyc2VkKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCByZWNlbnQgc2VhcmNoZXMgZm9ybWF0LCByZXNldHRpbmcnKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BpbnRleWEtcmVjZW50LXNlYXJjaGVzJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgY2FyZ2FuZG8gYsO6c3F1ZWRhcyByZWNpZW50ZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIC8vIExpbXBpYXIgZGF0b3MgY29ycnVwdG9zXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BpbnRleWEtcmVjZW50LXNlYXJjaGVzJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbc2F2ZVJlY2VudFNlYXJjaGVzXSk7XHJcblxyXG4gIGNvbnN0IGNsZWFudXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAvLyBMaW1waWFyIGRlYm91bmNlIHkgY2FjaGUgc2kgZXMgbmVjZXNhcmlvXHJcbiAgICB1cGRhdGVEZWJvdW5jZWRRdWVyeS5jYW5jZWwoKTtcclxuICB9LCBbdXBkYXRlRGVib3VuY2VkUXVlcnldKTtcclxuXHJcbiAgLy8gSW5pY2lhbGl6YXIgYWwgbW9udGFyXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiBjbGVhbnVwO1xyXG4gIH0sIFtpbml0aWFsaXplLCBjbGVhbnVwXSk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gUkVUVVJOXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIEVzdGFkbyBkZSBiw7pzcXVlZGFcclxuICAgIHF1ZXJ5LFxyXG4gICAgcmVzdWx0czogc2VhcmNoUmVzdWx0cyB8fCBbXSxcclxuICAgIHN1Z2dlc3Rpb25zLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3I6IGVycm9yPy5tZXNzYWdlIHx8IG51bGwsXHJcbiAgICBoYXNTZWFyY2hlZCxcclxuICAgIHJlY2VudFNlYXJjaGVzOiByZWNlbnRTZWFyY2hlc0xpc3QsXHJcbiAgICB0cmVuZGluZ1NlYXJjaGVzLFxyXG5cclxuICAgIC8vIEVzdGFkb3MgZGUgVGFuU3RhY2sgUXVlcnlcclxuICAgIGlzRmV0Y2hpbmcsXHJcbiAgICBpc1N0YWxlLFxyXG4gICAgZGF0YVVwZGF0ZWRBdCxcclxuXHJcbiAgICAvLyBFc3RhZG8gZGUgZXJyb3JlcyB5IHRvYXN0c1xyXG4gICAgc2VhcmNoRXJyb3I6IGVycm9ySGFuZGxlci5jdXJyZW50RXJyb3IsXHJcbiAgICBpc1JldHJ5aW5nOiBlcnJvckhhbmRsZXIuaXNSZXRyeWluZyxcclxuICAgIHJldHJ5Q291bnQ6IGVycm9ySGFuZGxlci5yZXRyeUNvdW50LFxyXG4gICAgdG9hc3RzOiB0b2FzdEhhbmRsZXIudG9hc3RzLFxyXG5cclxuICAgIC8vIEZ1bmNpb25lcyBwcmluY2lwYWxlc1xyXG4gICAgc2VhcmNoV2l0aERlYm91bmNlLFxyXG4gICAgZXhlY3V0ZVNlYXJjaCxcclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24sXHJcbiAgICBjbGVhclNlYXJjaCxcclxuICAgIGluaXRpYWxpemUsXHJcbiAgICBjbGVhbnVwLFxyXG5cclxuICAgIC8vIEZ1bmNpb25lcyBkZSBtYW5lam8gZGUgZXJyb3Jlc1xyXG4gICAgY2xlYXJFcnJvcjogZXJyb3JIYW5kbGVyLmNsZWFyRXJyb3IsXHJcbiAgICByZXRyeU1hbnVhbGx5OiBlcnJvckhhbmRsZXIucmV0cnlNYW51YWxseSxcclxuXHJcbiAgICAvLyBGdW5jaW9uZXMgZGUgdG9hc3RcclxuICAgIHJlbW92ZVRvYXN0OiB0b2FzdEhhbmRsZXIucmVtb3ZlVG9hc3QsXHJcbiAgICBjbGVhclRvYXN0czogdG9hc3RIYW5kbGVyLmNsZWFyVG9hc3RzLFxyXG5cclxuICAgIC8vIFV0aWxpZGFkZXMgZGUgY2FjaGVcclxuICAgIGludmFsaWRhdGVTZWFyY2g6IChzZWFyY2hRdWVyeTogc3RyaW5nKSA9PlxyXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBzZWFyY2hRdWVyeUtleXMuc2VhcmNoKHNlYXJjaFF1ZXJ5KSB9KSxcclxuICAgIHByZWZldGNoU2VhcmNoOiAoc2VhcmNoUXVlcnk6IHN0cmluZykgPT5cclxuICAgICAgcXVlcnlDbGllbnQucHJlZmV0Y2hRdWVyeSh7XHJcbiAgICAgICAgcXVlcnlLZXk6IHNlYXJjaFF1ZXJ5S2V5cy5zZWFyY2goc2VhcmNoUXVlcnkpLFxyXG4gICAgICAgIHF1ZXJ5Rm46ICgpID0+IHNlYXJjaFByb2R1Y3RzKHNlYXJjaFF1ZXJ5LCBtYXhTdWdnZXN0aW9ucyksXHJcbiAgICAgICAgLi4uc2VhcmNoUXVlcnlDb25maWcsXHJcbiAgICAgIH0pLFxyXG5cclxuICAgIC8vIEZ1bmNpb25lcyBkZSBuYXZlZ2FjacOzbiBvcHRpbWl6YWRhXHJcbiAgICBuYXZpZ2F0ZVRvU2VhcmNoOiBuYXZpZ2F0aW9uLm5hdmlnYXRlVG9TZWFyY2gsXHJcbiAgICBuYXZpZ2F0ZVRvUHJvZHVjdDogbmF2aWdhdGlvbi5uYXZpZ2F0ZVRvUHJvZHVjdCxcclxuICAgIG5hdmlnYXRlVG9DYXRlZ29yeTogbmF2aWdhdGlvbi5uYXZpZ2F0ZVRvQ2F0ZWdvcnksXHJcbiAgICBwcmVmZXRjaFNlYXJjaFBhZ2U6IG5hdmlnYXRpb24ucHJlZmV0Y2hTZWFyY2gsXHJcbiAgICBwcmVmZXRjaFByb2R1Y3RQYWdlOiBuYXZpZ2F0aW9uLnByZWZldGNoUHJvZHVjdCxcclxuICAgIGdldEN1cnJlbnRTZWFyY2hRdWVyeTogbmF2aWdhdGlvbi5nZXRDdXJyZW50U2VhcmNoUXVlcnksXHJcbiAgICBidWlsZFNlYXJjaFVybDogbmF2aWdhdGlvbi5idWlsZFNlYXJjaFVybCxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VTZWFyY2hPcHRpbWl6ZWQ7XHJcbiJdLCJuYW1lcyI6WyJ1c2VTZWFyY2hPcHRpbWl6ZWQiLCJvcHRpb25zIiwiZGVib3VuY2VNcyIsIm1heFN1Z2dlc3Rpb25zIiwic2VhcmNoTGltaXQiLCJzYXZlUmVjZW50U2VhcmNoZXMiLCJlbmFibGVQcmVmZXRjaCIsIm9uU2VhcmNoIiwib25TdWdnZXN0aW9uU2VsZWN0IiwicXVlcnkiLCJzZXRRdWVyeSIsInVzZVN0YXRlIiwiZGVib3VuY2VkUXVlcnkiLCJzZXREZWJvdW5jZWRRdWVyeSIsInJlY2VudFNlYXJjaGVzIiwic2V0UmVjZW50U2VhcmNoZXMiLCJoYXNTZWFyY2hlZCIsInNldEhhc1NlYXJjaGVkIiwicXVlcnlDbGllbnQiLCJ1c2VRdWVyeUNsaWVudCIsImVycm9ySGFuZGxlciIsInVzZVNlYXJjaEVycm9ySGFuZGxlciIsInRvYXN0SGFuZGxlciIsInVzZVNlYXJjaFRvYXN0IiwibmF2aWdhdGlvbiIsInVzZVNlYXJjaE5hdmlnYXRpb24iLCJzY3JvbGxUb1RvcCIsIm9uQmVmb3JlTmF2aWdhdGUiLCJ1cmwiLCJjb25zb2xlIiwibG9nIiwib25BZnRlck5hdmlnYXRlIiwidHJlbmRpbmdTZWFyY2hlcyIsInRyYWNrU2VhcmNoIiwidXNlVHJlbmRpbmdTZWFyY2hlcyIsImxpbWl0IiwiZW5hYmxlZCIsInJlY2VudFNlYXJjaGVzTGlzdCIsImFkZFNlYXJjaCIsImFkZFJlY2VudFNlYXJjaCIsImdldFJlY2VudFNlYXJjaGVzIiwidXNlUmVjZW50U2VhcmNoZXMiLCJtYXhTZWFyY2hlcyIsIlNFQVJDSF9DT05TVEFOVFMiLCJNQVhfUkVDRU5UX1NFQVJDSEVTIiwiZW5hYmxlUGVyc2lzdGVuY2UiLCJleHBpcmF0aW9uRGF5cyIsIlJFQ0VOVF9TRUFSQ0hFU19FWFBJUkFUSU9OX0RBWVMiLCJ1cGRhdGVEZWJvdW5jZWRRdWVyeSIsInVzZURlYm91bmNlZENhbGxiYWNrIiwidmFsdWUiLCJ0cmltIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIIiwibWF4V2FpdCIsImxlYWRpbmciLCJ0cmFpbGluZyIsImRhdGEiLCJzZWFyY2hSZXN1bHRzIiwiaXNMb2FkaW5nIiwiZXJyb3IiLCJpc0ZldGNoaW5nIiwiaXNTdGFsZSIsImRhdGFVcGRhdGVkQXQiLCJ1c2VRdWVyeSIsInF1ZXJ5S2V5Iiwic2VhcmNoUXVlcnlLZXlzIiwic2VhcmNoIiwicXVlcnlGbiIsInNpZ25hbCIsInNlYXJjaFF1ZXJ5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJvayIsInN0YXR1cyIsIkVycm9yIiwianNvbiIsInByb2R1Y3RzIiwiaXNFbmFibGVkIiwibGVuZ3RoIiwic2VhcmNoUXVlcnlDb25maWciLCJzdWdnZXN0aW9ucyIsInVzZU1lbW8iLCJhbGxTdWdnZXN0aW9ucyIsImhhc1F1ZXJ5IiwiQXJyYXkiLCJpc0FycmF5IiwicHJvZHVjdFN1Z2dlc3Rpb25zIiwibWFwIiwicHJvZHVjdCIsImlkIiwidG9TdHJpbmciLCJ0eXBlIiwidGl0bGUiLCJuYW1lIiwic3VidGl0bGUiLCJjYXRlZ29yeSIsImltYWdlIiwiaW1hZ2VzIiwicHJldmlld3MiLCJ0aHVtYm5haWxzIiwiYmFkZ2UiLCJzdG9jayIsImhyZWYiLCJwdXNoIiwiaGFzRGF0YSIsImhhc1Byb2R1Y3RzIiwiZGF0YUxlbmd0aCIsInByb2R1Y3RzTGVuZ3RoIiwia2V5cyIsIk9iamVjdCIsInJlY2VudFN1Z2dlc3Rpb25zIiwiaW5kZXgiLCJyZW1haW5pbmdTbG90cyIsInRyZW5kaW5nU3VnZ2VzdGlvbnMiLCJzbGljZSIsInRyZW5kaW5nIiwiY291bnQiLCJ1bmRlZmluZWQiLCJmaW5hbFN1Z2dlc3Rpb25zIiwicyIsInNlYXJjaFdpdGhEZWJvdW5jZSIsInVzZUNhbGxiYWNrIiwicHJlZmV0Y2hRdWVyeSIsInNlYXJjaFByb2R1Y3RzIiwicHJlZmV0Y2hTZWFyY2giLCJleGVjdXRlU2VhcmNoIiwiY2F0Y2giLCJ3YXJuIiwibmF2aWdhdGVUb1NlYXJjaCIsInNob3dTdWNjZXNzVG9hc3QiLCJoYW5kbGVFcnJvciIsInNlbGVjdFN1Z2dlc3Rpb24iLCJzdWdnZXN0aW9uIiwibmF2aWdhdGVUb1Byb2R1Y3QiLCJzaG93SW5mb1RvYXN0IiwiY2xlYXJTZWFyY2giLCJyZW1vdmVRdWVyaWVzIiwic2VhcmNoZXMiLCJpbml0aWFsaXplIiwic2F2ZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaW5jbHVkZXMiLCJyZW1vdmVJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiY2xlYW51cCIsImNhbmNlbCIsInVzZUVmZmVjdCIsInJlc3VsdHMiLCJtZXNzYWdlIiwic2VhcmNoRXJyb3IiLCJjdXJyZW50RXJyb3IiLCJpc1JldHJ5aW5nIiwicmV0cnlDb3VudCIsInRvYXN0cyIsImNsZWFyRXJyb3IiLCJyZXRyeU1hbnVhbGx5IiwicmVtb3ZlVG9hc3QiLCJjbGVhclRvYXN0cyIsImludmFsaWRhdGVTZWFyY2giLCJpbnZhbGlkYXRlUXVlcmllcyIsIm5hdmlnYXRlVG9DYXRlZ29yeSIsInByZWZldGNoU2VhcmNoUGFnZSIsInByZWZldGNoUHJvZHVjdFBhZ2UiLCJwcmVmZXRjaFByb2R1Y3QiLCJnZXRDdXJyZW50U2VhcmNoUXVlcnkiLCJidWlsZFNlYXJjaFVybCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLG9F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