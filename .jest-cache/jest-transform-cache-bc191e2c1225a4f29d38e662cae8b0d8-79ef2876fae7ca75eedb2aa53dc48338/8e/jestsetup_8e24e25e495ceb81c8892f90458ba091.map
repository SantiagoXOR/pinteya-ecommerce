{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\setup\\jest.setup.js"],"sourcesContent":["// ðŸ§ª Enterprise Jest Setup Configuration\n\nimport '@testing-library/jest-dom';\nimport 'jest-axe/extend-expect';\n\n// Mock Next.js router\njest.mock('next/router', () => ({\n  useRouter() {\n    return {\n      route: '/',\n      pathname: '/',\n      query: {},\n      asPath: '/',\n      push: jest.fn(),\n      pop: jest.fn(),\n      reload: jest.fn(),\n      back: jest.fn(),\n      prefetch: jest.fn().mockResolvedValue(undefined),\n      beforePopState: jest.fn(),\n      events: {\n        on: jest.fn(),\n        off: jest.fn(),\n        emit: jest.fn(),\n      },\n      isFallback: false,\n    };\n  },\n}));\n\n// Mock Next.js navigation\njest.mock('next/navigation', () => ({\n  useRouter() {\n    return {\n      push: jest.fn(),\n      replace: jest.fn(),\n      prefetch: jest.fn(),\n      back: jest.fn(),\n      forward: jest.fn(),\n      refresh: jest.fn(),\n    };\n  },\n  useSearchParams() {\n    return new URLSearchParams();\n  },\n  usePathname() {\n    return '/';\n  },\n}));\n\n// Mock Next.js Image component\njest.mock('next/image', () => ({\n  __esModule: true,\n  default: (props) => {\n    // eslint-disable-next-line @next/next/no-img-element\n    return <img {...props} alt={props.alt} />;\n  },\n}));\n\n// Mock Clerk authentication\njest.mock('@clerk/nextjs', () => ({\n  useAuth: () => ({\n    isLoaded: true,\n    isSignedIn: true,\n    userId: 'test-user-id',\n    sessionId: 'test-session-id',\n    getToken: jest.fn().mockResolvedValue('test-token'),\n  }),\n  useUser: () => ({\n    isLoaded: true,\n    isSignedIn: true,\n    user: {\n      id: 'test-user-id',\n      emailAddresses: [{ emailAddress: 'test@example.com' }],\n      firstName: 'Test',\n      lastName: 'User',\n    },\n  }),\n  SignInButton: ({ children }) => <button>{children}</button>,\n  SignOutButton: ({ children }) => <button>{children}</button>,\n  UserButton: () => <div data-testid=\"user-button\">User</div>,\n  ClerkProvider: ({ children }) => <div>{children}</div>,\n  auth: () => ({\n    userId: 'test-user-id',\n    sessionId: 'test-session-id',\n    getToken: jest.fn().mockResolvedValue('test-token'),\n  }),\n  currentUser: () => ({\n    id: 'test-user-id',\n    emailAddresses: [{ emailAddress: 'test@example.com' }],\n    firstName: 'Test',\n    lastName: 'User',\n  }),\n}));\n\n// Mock React Query\njest.mock('@tanstack/react-query', () => ({\n  useQuery: jest.fn(() => ({\n    data: undefined,\n    error: null,\n    isLoading: false,\n    isError: false,\n    refetch: jest.fn(),\n  })),\n  useMutation: jest.fn(() => ({\n    mutate: jest.fn(),\n    mutateAsync: jest.fn(),\n    isLoading: false,\n    isError: false,\n    error: null,\n    data: undefined,\n    reset: jest.fn(),\n  })),\n  useQueryClient: jest.fn(() => ({\n    invalidateQueries: jest.fn(),\n    setQueryData: jest.fn(),\n    getQueryData: jest.fn(),\n    refetchQueries: jest.fn(),\n  })),\n  QueryClient: jest.fn(() => ({\n    invalidateQueries: jest.fn(),\n    setQueryData: jest.fn(),\n    getQueryData: jest.fn(),\n    refetchQueries: jest.fn(),\n  })),\n  QueryClientProvider: ({ children }) => children,\n}));\n\n// Mock React Hot Toast\njest.mock('react-hot-toast', () => ({\n  toast: {\n    success: jest.fn(),\n    error: jest.fn(),\n    loading: jest.fn(),\n    dismiss: jest.fn(),\n  },\n  Toaster: () => null,\n}));\n\n// Mock Supabase\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn(),\n          order: jest.fn(() => ({\n            order: jest.fn(),\n          })),\n        })),\n      })),\n      insert: jest.fn(() => ({\n        select: jest.fn(() => ({\n          single: jest.fn(),\n        })),\n      })),\n      update: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          select: jest.fn(() => ({\n            single: jest.fn(),\n          })),\n        })),\n      })),\n      delete: jest.fn(() => ({\n        eq: jest.fn(),\n      })),\n    })),\n    storage: {\n      from: jest.fn(() => ({\n        upload: jest.fn(),\n        getPublicUrl: jest.fn(),\n        remove: jest.fn(),\n      })),\n    },\n    auth: {\n      getUser: jest.fn(),\n      signInWithPassword: jest.fn(),\n      signOut: jest.fn(),\n    },\n  })),\n}));\n\n// Mock environment variables\nprocess.env.NODE_ENV = 'test';\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-key';\nprocess.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY = 'test-clerk-key';\nprocess.env.CLERK_SECRET_KEY = 'test-clerk-secret';\n\n// Mock Next.js server components and API utilities\njest.mock('next/server', () => ({\n  NextRequest: jest.fn().mockImplementation((url, options) => ({\n    url: url || 'http://localhost:3000/test',\n    method: options?.method || 'GET',\n    headers: new Map(),\n    json: jest.fn().mockResolvedValue({}),\n    formData: jest.fn().mockResolvedValue(new FormData()),\n    text: jest.fn().mockResolvedValue(''),\n    ...options,\n  })),\n  NextResponse: {\n    json: jest.fn().mockImplementation((data, options) => ({\n      status: options?.status || 200,\n      json: () => Promise.resolve(data),\n      ...data,\n    })),\n    redirect: jest.fn(),\n    rewrite: jest.fn(),\n    next: jest.fn(),\n  },\n}));\n\n// Mock fetch globally with better implementation\nglobal.fetch = jest.fn(() =>\n  Promise.resolve({\n    ok: true,\n    status: 200,\n    json: () => Promise.resolve({ success: true, data: {} }),\n    text: () => Promise.resolve(''),\n    blob: () => Promise.resolve(new Blob()),\n  })\n);\n\n// Mock ResizeObserver\nglobal.ResizeObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(), // deprecated\n    removeListener: jest.fn(), // deprecated\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\n// Mock window.scrollTo\nObject.defineProperty(window, 'scrollTo', {\n  writable: true,\n  value: jest.fn(),\n});\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Mock sessionStorage\nconst sessionStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'sessionStorage', {\n  value: sessionStorageMock,\n});\n\n// Mock File and FileReader\nglobal.File = class File {\n  constructor(chunks, filename, options = {}) {\n    this.chunks = chunks;\n    this.name = filename;\n    this.size = chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n    this.type = options.type || '';\n    this.lastModified = options.lastModified || Date.now();\n  }\n};\n\nglobal.FileReader = class FileReader {\n  constructor() {\n    this.readyState = 0;\n    this.result = null;\n    this.error = null;\n  }\n  \n  readAsDataURL() {\n    this.readyState = 2;\n    this.result = 'data:image/jpeg;base64,fake-base64-data';\n    if (this.onload) this.onload();\n  }\n  \n  readAsText() {\n    this.readyState = 2;\n    this.result = 'fake-text-content';\n    if (this.onload) this.onload();\n  }\n};\n\n// Mock FormData\nglobal.FormData = class FormData {\n  constructor() {\n    this.data = new Map();\n  }\n  \n  append(key, value) {\n    this.data.set(key, value);\n  }\n  \n  get(key) {\n    return this.data.get(key);\n  }\n  \n  set(key, value) {\n    this.data.set(key, value);\n  }\n  \n  delete(key) {\n    this.data.delete(key);\n  }\n  \n  has(key) {\n    return this.data.has(key);\n  }\n};\n\n// Console error suppression for known issues\nconst originalError = console.error;\nbeforeAll(() => {\n  console.error = (...args) => {\n    if (\n      typeof args[0] === 'string' &&\n      (args[0].includes('Warning: ReactDOM.render is deprecated') ||\n       args[0].includes('Warning: An invalid form control') ||\n       args[0].includes('Warning: validateDOMNesting'))\n    ) {\n      return;\n    }\n    originalError.call(console, ...args);\n  };\n});\n\nafterAll(() => {\n  console.error = originalError;\n});\n\n// Global test utilities\nglobal.testUtils = {\n  // Helper to create mock API responses\n  createMockApiResponse: (data, success = true, status = 200) => ({\n    ok: status >= 200 && status < 300,\n    status,\n    json: async () => ({ data, success, message: success ? 'Success' : 'Error' }),\n  }),\n  \n  // Helper to create mock form data\n  createMockFormData: (data) => {\n    const formData = new FormData();\n    Object.entries(data).forEach(([key, value]) => {\n      formData.append(key, value);\n    });\n    return formData;\n  },\n  \n  // Helper to wait for async operations\n  waitFor: (ms) => new Promise(resolve => setTimeout(resolve, ms)),\n  \n  // Helper to create mock file\n  createMockFile: (name = 'test.jpg', type = 'image/jpeg', content = 'test') => \n    new File([content], name, { type }),\n};\n\n// Mock Web APIs for Node.js environment\nglobal.Request = jest.fn().mockImplementation((url, options) => ({\n  url: url || 'http://localhost:3000/test',\n  method: options?.method || 'GET',\n  headers: new Map(Object.entries(options?.headers || {})),\n  json: jest.fn().mockResolvedValue({}),\n  formData: jest.fn().mockResolvedValue(new FormData()),\n  text: jest.fn().mockResolvedValue(''),\n  blob: jest.fn().mockResolvedValue(new Blob()),\n  ...options,\n}));\n\nglobal.Response = jest.fn().mockImplementation((body, options) => ({\n  ok: (options?.status || 200) >= 200 && (options?.status || 200) < 300,\n  status: options?.status || 200,\n  statusText: options?.statusText || 'OK',\n  headers: new Map(Object.entries(options?.headers || {})),\n  json: jest.fn().mockResolvedValue(typeof body === 'string' ? JSON.parse(body) : body),\n  text: jest.fn().mockResolvedValue(typeof body === 'string' ? body : JSON.stringify(body)),\n  blob: jest.fn().mockResolvedValue(new Blob([body])),\n}));\n\n// Mock Headers for Web API compatibility\nglobal.Headers = jest.fn().mockImplementation((init) => {\n  const map = new Map();\n  if (init) {\n    if (Array.isArray(init)) {\n      init.forEach(([key, value]) => map.set(key.toLowerCase(), value));\n    } else if (typeof init === 'object') {\n      Object.entries(init).forEach(([key, value]) => map.set(key.toLowerCase(), value));\n    }\n  }\n  return {\n    get: (key) => map.get(key.toLowerCase()),\n    set: (key, value) => map.set(key.toLowerCase(), value),\n    has: (key) => map.has(key.toLowerCase()),\n    delete: (key) => map.delete(key.toLowerCase()),\n    entries: () => map.entries(),\n    keys: () => map.keys(),\n    values: () => map.values(),\n    forEach: (callback) => map.forEach(callback),\n  };\n});\n\n// Increase timeout for integration tests\njest.setTimeout(30000);\n"],"names":["jest","mock","useRouter","route","pathname","query","asPath","push","fn","pop","reload","back","prefetch","mockResolvedValue","undefined","beforePopState","events","on","off","emit","isFallback","replace","forward","refresh","useSearchParams","URLSearchParams","usePathname","__esModule","default","props","img","alt","useAuth","isLoaded","isSignedIn","userId","sessionId","getToken","useUser","user","id","emailAddresses","emailAddress","firstName","lastName","SignInButton","children","button","SignOutButton","UserButton","div","data-testid","ClerkProvider","auth","currentUser","useQuery","data","error","isLoading","isError","refetch","useMutation","mutate","mutateAsync","reset","useQueryClient","invalidateQueries","setQueryData","getQueryData","refetchQueries","QueryClient","QueryClientProvider","toast","success","loading","dismiss","Toaster","createClient","from","select","eq","single","order","insert","update","delete","storage","upload","getPublicUrl","remove","getUser","signInWithPassword","signOut","NextRequest","mockImplementation","url","options","method","headers","Map","json","formData","FormData","text","NextResponse","status","Promise","resolve","redirect","rewrite","next","process","env","NODE_ENV","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY","CLERK_SECRET_KEY","global","fetch","ok","blob","Blob","ResizeObserver","observe","unobserve","disconnect","IntersectionObserver","Object","defineProperty","window","writable","value","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","localStorageMock","getItem","setItem","removeItem","clear","sessionStorageMock","File","constructor","chunks","filename","name","size","reduce","acc","chunk","length","type","lastModified","Date","now","FileReader","readyState","result","readAsDataURL","onload","readAsText","append","key","set","get","has","originalError","console","beforeAll","args","includes","call","afterAll","testUtils","createMockApiResponse","message","createMockFormData","entries","forEach","waitFor","ms","setTimeout","createMockFile","content","Request","Response","body","statusText","JSON","parse","stringify","Headers","init","map","Array","isArray","toLowerCase","keys","values","callback"],"mappings":"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"}