{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\__mocks__\\api-mocks.ts"],"sourcesContent":["// ===================================\n// MOCKS CENTRALIZADOS PARA APIs - PINTEYA E-COMMERCE\n// ===================================\n\n/**\n * Mocks centralizados y reutilizables para todas las APIs del proyecto\n * Incluye respuestas realistas y manejo completo de casos edge\n */\n\n// ===================================\n// TIPOS Y INTERFACES\n// ===================================\n\nexport interface MockResponseOptions {\n  ok?: boolean;\n  status?: number;\n  statusText?: string;\n  delay?: number;\n}\n\nexport interface MockApiResponse {\n  success: boolean;\n  data?: any;\n  error?: string;\n  message?: string;\n  pagination?: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\n// ===================================\n// DATOS MOCK REALISTAS\n// ===================================\n\nexport const mockProducts = [\n  {\n    id: 1,\n    name: 'Pintura Látex Interior Blanco 4L',\n    slug: 'pintura-latex-interior-blanco-4l',\n    description: 'Pintura látex de alta calidad para interiores, acabado mate',\n    price: 2500,\n    discounted_price: 2200,\n    stock: 15,\n    brand: 'Sherwin Williams',\n    category_id: 1,\n    images: { \n      previews: ['/images/products/pintura-latex-blanco.jpg'],\n      main: '/images/products/pintura-latex-blanco-main.jpg'\n    },\n    category: { \n      id: 1, \n      name: 'Pinturas', \n      slug: 'pinturas' \n    },\n    created_at: '2024-01-15T10:00:00Z',\n    updated_at: '2024-01-20T15:30:00Z'\n  },\n  {\n    id: 2,\n    name: 'Taladro Percutor 650W',\n    slug: 'taladro-percutor-650w',\n    description: 'Taladro percutor profesional con mandril de 13mm',\n    price: 8500,\n    discounted_price: null,\n    stock: 8,\n    brand: 'Bosch',\n    category_id: 2,\n    images: { \n      previews: ['/images/products/taladro-bosch.jpg'],\n      main: '/images/products/taladro-bosch-main.jpg'\n    },\n    category: { \n      id: 2, \n      name: 'Herramientas', \n      slug: 'herramientas' \n    },\n    created_at: '2024-01-10T08:00:00Z',\n    updated_at: '2024-01-18T12:00:00Z'\n  },\n  {\n    id: 3,\n    name: 'Cemento Portland 50kg',\n    slug: 'cemento-portland-50kg',\n    description: 'Cemento Portland tipo I para construcción general',\n    price: 1200,\n    discounted_price: 1100,\n    stock: 25,\n    brand: 'Loma Negra',\n    category_id: 3,\n    images: { \n      previews: ['/images/products/cemento-portland.jpg'],\n      main: '/images/products/cemento-portland-main.jpg'\n    },\n    category: { \n      id: 3, \n      name: 'Materiales', \n      slug: 'materiales' \n    },\n    created_at: '2024-01-05T09:00:00Z',\n    updated_at: '2024-01-22T11:00:00Z'\n  }\n];\n\nexport const mockCategories = [\n  { id: 1, name: 'Pinturas', slug: 'pinturas', description: 'Pinturas para interior y exterior' },\n  { id: 2, name: 'Herramientas', slug: 'herramientas', description: 'Herramientas manuales y eléctricas' },\n  { id: 3, name: 'Materiales', slug: 'materiales', description: 'Materiales de construcción' },\n  { id: 4, name: 'Ferretería', slug: 'ferreteria', description: 'Artículos de ferretería general' }\n];\n\nexport const mockOrders = [\n  {\n    id: 1,\n    user_id: 'user_123',\n    status: 'pending',\n    total: 5800,\n    items: [\n      { product_id: 1, quantity: 2, price: 2200 },\n      { product_id: 3, quantity: 1, price: 1100 }\n    ],\n    created_at: '2024-01-25T14:30:00Z',\n    updated_at: '2024-01-25T14:30:00Z'\n  },\n  {\n    id: 2,\n    user_id: 'user_456',\n    status: 'confirmed',\n    total: 8500,\n    items: [\n      { product_id: 2, quantity: 1, price: 8500 }\n    ],\n    created_at: '2024-01-24T10:15:00Z',\n    updated_at: '2024-01-24T16:20:00Z'\n  }\n];\n\n// ===================================\n// HELPER PARA CREAR RESPUESTAS MOCK COMPLETAS\n// ===================================\n\n/**\n * Crea una respuesta mock completa compatible con fetch API\n */\nexport function createMockResponse(\n  data: any, \n  options: MockResponseOptions = {}\n): Response {\n  const {\n    ok = true,\n    status = 200,\n    statusText = 'OK',\n    delay = 0\n  } = options;\n\n  const response = {\n    ok,\n    status,\n    statusText,\n    headers: new Headers({\n      'Content-Type': 'application/json',\n      'X-Mock-Response': 'true'\n    }),\n    url: 'http://localhost:3000/api/mock',\n    json: async () => {\n      if (delay > 0) {\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n      return data;\n    },\n    text: async () => {\n      if (delay > 0) {\n        await new Promise(resolve => setTimeout(resolve, delay));\n      }\n      return JSON.stringify(data);\n    },\n    clone: jest.fn(() => response),\n    arrayBuffer: async () => new ArrayBuffer(0),\n    blob: async () => new Blob(),\n    formData: async () => new FormData(),\n    body: null,\n    bodyUsed: false,\n    redirected: false,\n    type: 'basic' as ResponseType\n  } as Response;\n\n  return response;\n}\n\n// ===================================\n// RESPUESTAS MOCK PREDEFINIDAS\n// ===================================\n\nexport const mockApiResponses = {\n  // Productos\n  products: {\n    success: {\n      success: true,\n      data: mockProducts,\n      pagination: {\n        page: 1,\n        limit: 12,\n        total: mockProducts.length,\n        totalPages: 1\n      }\n    },\n    empty: {\n      success: true,\n      data: [],\n      pagination: {\n        page: 1,\n        limit: 12,\n        total: 0,\n        totalPages: 0\n      }\n    },\n    error: {\n      success: false,\n      data: [],\n      error: 'Error obteniendo productos',\n      pagination: {\n        page: 1,\n        limit: 12,\n        total: 0,\n        totalPages: 0\n      }\n    }\n  },\n\n  // Categorías\n  categories: {\n    success: {\n      success: true,\n      data: mockCategories\n    },\n    error: {\n      success: false,\n      data: [],\n      error: 'Error obteniendo categorías'\n    }\n  },\n\n  // Órdenes\n  orders: {\n    success: {\n      success: true,\n      data: mockOrders,\n      pagination: {\n        page: 1,\n        limit: 10,\n        total: mockOrders.length,\n        totalPages: 1\n      }\n    },\n    error: {\n      success: false,\n      data: [],\n      error: 'Error obteniendo órdenes',\n      pagination: {\n        page: 1,\n        limit: 10,\n        total: 0,\n        totalPages: 0\n      }\n    }\n  }\n};\n\n// ===================================\n// CONFIGURACIONES MOCK COMUNES\n// ===================================\n\nexport const mockConfigurations = {\n  // Respuesta exitosa estándar\n  success: () => createMockResponse(mockApiResponses.products.success),\n  \n  // Error de red\n  networkError: () => {\n    throw new Error('Network Error');\n  },\n  \n  // Error HTTP 500\n  serverError: () => createMockResponse(\n    { error: 'Internal Server Error' },\n    { ok: false, status: 500, statusText: 'Internal Server Error' }\n  ),\n  \n  // Error HTTP 404\n  notFound: () => createMockResponse(\n    { error: 'Not Found' },\n    { ok: false, status: 404, statusText: 'Not Found' }\n  ),\n  \n  // Error HTTP 400\n  badRequest: () => createMockResponse(\n    { error: 'Bad Request' },\n    { ok: false, status: 400, statusText: 'Bad Request' }\n  ),\n  \n  // Respuesta con delay (para testing de loading states)\n  delayed: (data: any = mockApiResponses.products.success, delayMs: number = 1000) => \n    createMockResponse(data, { delay: delayMs })\n};\n\n// ===================================\n// SETUP HELPER PARA TESTS\n// ===================================\n\n/**\n * Configura mocks básicos para fetch en tests\n */\nexport function setupApiMocks() {\n  const mockFetch = jest.fn();\n  global.fetch = mockFetch;\n  \n  // Configuración por defecto: respuesta exitosa\n  mockFetch.mockResolvedValue(mockConfigurations.success());\n  \n  return {\n    mockFetch,\n    resetMocks: () => {\n      jest.clearAllMocks();\n      mockFetch.mockResolvedValue(mockConfigurations.success());\n    },\n    mockSuccess: (data?: any) => {\n      mockFetch.mockResolvedValueOnce(createMockResponse(data || mockApiResponses.products.success));\n    },\n    mockError: (error: string = 'API Error') => {\n      mockFetch.mockRejectedValueOnce(new Error(error));\n    },\n    mockHttpError: (status: number = 500, statusText: string = 'Internal Server Error') => {\n      mockFetch.mockResolvedValueOnce(createMockResponse(\n        { error: statusText },\n        { ok: false, status, statusText }\n      ));\n    }\n  };\n}\n"],"names":["createMockResponse","mockApiResponses","mockCategories","mockConfigurations","mockOrders","mockProducts","setupApiMocks","id","name","slug","description","price","discounted_price","stock","brand","category_id","images","previews","main","category","created_at","updated_at","user_id","status","total","items","product_id","quantity","data","options","ok","statusText","delay","response","headers","Headers","url","json","Promise","resolve","setTimeout","text","JSON","stringify","clone","jest","fn","arrayBuffer","ArrayBuffer","blob","Blob","formData","FormData","body","bodyUsed","redirected","type","products","success","pagination","page","limit","length","totalPages","empty","error","categories","orders","networkError","Error","serverError","notFound","badRequest","delayed","delayMs","mockFetch","global","fetch","mockResolvedValue","resetMocks","clearAllMocks","mockSuccess","mockResolvedValueOnce","mockError","mockRejectedValueOnce","mockHttpError"],"mappings":"AAAA,sCAAsC;AACtC,qDAAqD;AACrD,sCAAsC;AAEtC;;;CAGC,GAED,sCAAsC;AACtC,qBAAqB;AACrB,sCAAsC;;;;;;;;;;;;QAuItBA;eAAAA;;QAiDHC;eAAAA;;QAzFAC;eAAAA;;QAwKAC;eAAAA;;QAjKAC;eAAAA;;QA5EAC;eAAAA;;QAoRGC;eAAAA;;;AApRT,MAAMD,eAAe;IAC1B;QACEE,IAAI;QACJC,MAAM;QACNC,MAAM;QACNC,aAAa;QACbC,OAAO;QACPC,kBAAkB;QAClBC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,QAAQ;YACNC,UAAU;gBAAC;aAA4C;YACvDC,MAAM;QACR;QACAC,UAAU;YACRZ,IAAI;YACJC,MAAM;YACNC,MAAM;QACR;QACAW,YAAY;QACZC,YAAY;IACd;IACA;QACEd,IAAI;QACJC,MAAM;QACNC,MAAM;QACNC,aAAa;QACbC,OAAO;QACPC,kBAAkB;QAClBC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,QAAQ;YACNC,UAAU;gBAAC;aAAqC;YAChDC,MAAM;QACR;QACAC,UAAU;YACRZ,IAAI;YACJC,MAAM;YACNC,MAAM;QACR;QACAW,YAAY;QACZC,YAAY;IACd;IACA;QACEd,IAAI;QACJC,MAAM;QACNC,MAAM;QACNC,aAAa;QACbC,OAAO;QACPC,kBAAkB;QAClBC,OAAO;QACPC,OAAO;QACPC,aAAa;QACbC,QAAQ;YACNC,UAAU;gBAAC;aAAwC;YACnDC,MAAM;QACR;QACAC,UAAU;YACRZ,IAAI;YACJC,MAAM;YACNC,MAAM;QACR;QACAW,YAAY;QACZC,YAAY;IACd;CACD;AAEM,MAAMnB,iBAAiB;IAC5B;QAAEK,IAAI;QAAGC,MAAM;QAAYC,MAAM;QAAYC,aAAa;IAAoC;IAC9F;QAAEH,IAAI;QAAGC,MAAM;QAAgBC,MAAM;QAAgBC,aAAa;IAAqC;IACvG;QAAEH,IAAI;QAAGC,MAAM;QAAcC,MAAM;QAAcC,aAAa;IAA6B;IAC3F;QAAEH,IAAI;QAAGC,MAAM;QAAcC,MAAM;QAAcC,aAAa;IAAkC;CACjG;AAEM,MAAMN,aAAa;IACxB;QACEG,IAAI;QACJe,SAAS;QACTC,QAAQ;QACRC,OAAO;QACPC,OAAO;YACL;gBAAEC,YAAY;gBAAGC,UAAU;gBAAGhB,OAAO;YAAK;YAC1C;gBAAEe,YAAY;gBAAGC,UAAU;gBAAGhB,OAAO;YAAK;SAC3C;QACDS,YAAY;QACZC,YAAY;IACd;IACA;QACEd,IAAI;QACJe,SAAS;QACTC,QAAQ;QACRC,OAAO;QACPC,OAAO;YACL;gBAAEC,YAAY;gBAAGC,UAAU;gBAAGhB,OAAO;YAAK;SAC3C;QACDS,YAAY;QACZC,YAAY;IACd;CACD;AASM,SAASrB,mBACd4B,IAAS,EACTC,UAA+B,CAAC,CAAC;IAEjC,MAAM,EACJC,KAAK,IAAI,EACTP,SAAS,GAAG,EACZQ,aAAa,IAAI,EACjBC,QAAQ,CAAC,EACV,GAAGH;IAEJ,MAAMI,WAAW;QACfH;QACAP;QACAQ;QACAG,SAAS,IAAIC,QAAQ;YACnB,gBAAgB;YAChB,mBAAmB;QACrB;QACAC,KAAK;QACLC,MAAM;YACJ,IAAIL,QAAQ,GAAG;gBACb,MAAM,IAAIM,QAAQC,CAAAA,UAAWC,WAAWD,SAASP;YACnD;YACA,OAAOJ;QACT;QACAa,MAAM;YACJ,IAAIT,QAAQ,GAAG;gBACb,MAAM,IAAIM,QAAQC,CAAAA,UAAWC,WAAWD,SAASP;YACnD;YACA,OAAOU,KAAKC,SAAS,CAACf;QACxB;QACAgB,OAAOC,KAAKC,EAAE,CAAC,IAAMb;QACrBc,aAAa,UAAY,IAAIC,YAAY;QACzCC,MAAM,UAAY,IAAIC;QACtBC,UAAU,UAAY,IAAIC;QAC1BC,MAAM;QACNC,UAAU;QACVC,YAAY;QACZC,MAAM;IACR;IAEA,OAAOvB;AACT;AAMO,MAAMhC,mBAAmB;IAC9B,YAAY;IACZwD,UAAU;QACRC,SAAS;YACPA,SAAS;YACT9B,MAAMvB;YACNsD,YAAY;gBACVC,MAAM;gBACNC,OAAO;gBACPrC,OAAOnB,aAAayD,MAAM;gBAC1BC,YAAY;YACd;QACF;QACAC,OAAO;YACLN,SAAS;YACT9B,MAAM,EAAE;YACR+B,YAAY;gBACVC,MAAM;gBACNC,OAAO;gBACPrC,OAAO;gBACPuC,YAAY;YACd;QACF;QACAE,OAAO;YACLP,SAAS;YACT9B,MAAM,EAAE;YACRqC,OAAO;YACPN,YAAY;gBACVC,MAAM;gBACNC,OAAO;gBACPrC,OAAO;gBACPuC,YAAY;YACd;QACF;IACF;IAEA,aAAa;IACbG,YAAY;QACVR,SAAS;YACPA,SAAS;YACT9B,MAAM1B;QACR;QACA+D,OAAO;YACLP,SAAS;YACT9B,MAAM,EAAE;YACRqC,OAAO;QACT;IACF;IAEA,UAAU;IACVE,QAAQ;QACNT,SAAS;YACPA,SAAS;YACT9B,MAAMxB;YACNuD,YAAY;gBACVC,MAAM;gBACNC,OAAO;gBACPrC,OAAOpB,WAAW0D,MAAM;gBACxBC,YAAY;YACd;QACF;QACAE,OAAO;YACLP,SAAS;YACT9B,MAAM,EAAE;YACRqC,OAAO;YACPN,YAAY;gBACVC,MAAM;gBACNC,OAAO;gBACPrC,OAAO;gBACPuC,YAAY;YACd;QACF;IACF;AACF;AAMO,MAAM5D,qBAAqB;IAChC,6BAA6B;IAC7BuD,SAAS,IAAM1D,mBAAmBC,iBAAiBwD,QAAQ,CAACC,OAAO;IAEnE,eAAe;IACfU,cAAc;QACZ,MAAM,IAAIC,MAAM;IAClB;IAEA,iBAAiB;IACjBC,aAAa,IAAMtE,mBACjB;YAAEiE,OAAO;QAAwB,GACjC;YAAEnC,IAAI;YAAOP,QAAQ;YAAKQ,YAAY;QAAwB;IAGhE,iBAAiB;IACjBwC,UAAU,IAAMvE,mBACd;YAAEiE,OAAO;QAAY,GACrB;YAAEnC,IAAI;YAAOP,QAAQ;YAAKQ,YAAY;QAAY;IAGpD,iBAAiB;IACjByC,YAAY,IAAMxE,mBAChB;YAAEiE,OAAO;QAAc,GACvB;YAAEnC,IAAI;YAAOP,QAAQ;YAAKQ,YAAY;QAAc;IAGtD,uDAAuD;IACvD0C,SAAS,CAAC7C,OAAY3B,iBAAiBwD,QAAQ,CAACC,OAAO,EAAEgB,UAAkB,IAAI,GAC7E1E,mBAAmB4B,MAAM;YAAEI,OAAO0C;QAAQ;AAC9C;AASO,SAASpE;IACd,MAAMqE,YAAY9B,KAAKC,EAAE;IACzB8B,OAAOC,KAAK,GAAGF;IAEf,+CAA+C;IAC/CA,UAAUG,iBAAiB,CAAC3E,mBAAmBuD,OAAO;IAEtD,OAAO;QACLiB;QACAI,YAAY;YACVlC,KAAKmC,aAAa;YAClBL,UAAUG,iBAAiB,CAAC3E,mBAAmBuD,OAAO;QACxD;QACAuB,aAAa,CAACrD;YACZ+C,UAAUO,qBAAqB,CAAClF,mBAAmB4B,QAAQ3B,iBAAiBwD,QAAQ,CAACC,OAAO;QAC9F;QACAyB,WAAW,CAAClB,QAAgB,WAAW;YACrCU,UAAUS,qBAAqB,CAAC,IAAIf,MAAMJ;QAC5C;QACAoB,eAAe,CAAC9D,SAAiB,GAAG,EAAEQ,aAAqB,uBAAuB;YAChF4C,UAAUO,qBAAqB,CAAClF,mBAC9B;gBAAEiE,OAAOlC;YAAW,GACpB;gBAAED,IAAI;gBAAOP;gBAAQQ;YAAW;QAEpC;IACF;AACF"}