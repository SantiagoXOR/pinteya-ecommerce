7df2b9c10e0c6d0c2784b8f44ae65c29
// ===================================
// PINTEYA E-COMMERCE - HEALTH CHECKS TESTS
// ===================================
"use strict";
// Mock dependencies
jest.mock('@/lib/logger', ()=>({
        logger: {
            info: jest.fn(),
            warn: jest.fn(),
            error: jest.fn()
        },
        LogLevel: {
            INFO: 'info',
            WARN: 'warn',
            ERROR: 'error'
        },
        LogCategory: {
            SYSTEM: 'system'
        }
    }));
jest.mock('@/lib/supabase', ()=>({
        getSupabaseClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        select: jest.fn(()=>({
                                limit: jest.fn(()=>({
                                        data: [
                                            {
                                                id: 1
                                            }
                                        ],
                                        error: null
                                    }))
                            }))
                    }))
            }))
    }));
jest.mock('@/lib/cache-manager', ()=>({
        CacheUtils: {
            set: jest.fn(),
            get: jest.fn(()=>({
                    test: true,
                    timestamp: Date.now()
                }))
        }
    }));
jest.mock('@/lib/mercadopago/circuit-breaker', ()=>({
        mercadoPagoCriticalBreaker: {
            getState: jest.fn(()=>'closed'),
            reset: jest.fn()
        },
        mercadoPagoStandardBreaker: {
            getState: jest.fn(()=>'closed'),
            reset: jest.fn()
        },
        webhookProcessingBreaker: {
            getState: jest.fn(()=>'closed'),
            reset: jest.fn()
        }
    }));
jest.mock('@/lib/monitoring/enterprise-metrics', ()=>({
        recordPerformanceMetric: jest.fn(),
        recordSecurityMetric: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _healthchecks = require("../../lib/monitoring/health-checks");
// Mock environment variables
const originalEnv = process.env;
describe('Enterprise Health System', ()=>{
    let healthSystem;
    beforeEach(()=>{
        jest.clearAllMocks();
        jest.useFakeTimers();
        healthSystem = new _healthchecks.EnterpriseHealthSystem();
        // Mock environment variables
        process.env = {
            ...originalEnv,
            MERCADOPAGO_PUBLIC_KEY_TEST: 'TEST_PUBLIC_KEY',
            MERCADOPAGO_ACCESS_TOKEN_TEST: 'TEST_ACCESS_TOKEN'
        };
    });
    afterEach(()=>{
        jest.useRealTimers();
        healthSystem.destroy();
        process.env = originalEnv;
    });
    describe('Configuración de Health Checks', ()=>{
        test('debe registrar health check correctamente', ()=>{
            const config = {
                service: 'test_service',
                enabled: true,
                interval: 60,
                timeout: 5,
                retries: 3,
                thresholds: {
                    responseTime: {
                        warning: 1000,
                        critical: 3000
                    },
                    errorRate: {
                        warning: 0.05,
                        critical: 0.1
                    }
                },
                dependencies: [],
                autoRecover: true,
                notifications: [
                    'default_log'
                ]
            };
            healthSystem.registerHealthCheck(config);
            // Verificar que no hay errores
            expect(true).toBe(true);
        });
        test('debe registrar acción de recuperación', ()=>{
            const action = {
                id: 'test_recovery',
                name: 'Test Recovery',
                description: 'Test recovery action',
                service: 'test_service',
                enabled: true,
                automatic: true,
                cooldownMinutes: 5,
                maxRetries: 3,
                action: jest.fn().mockResolvedValue(true)
            };
            healthSystem.registerRecoveryAction(action);
            // Verificar que no hay errores
            expect(true).toBe(true);
        });
    });
    describe('Ejecución de Health Checks', ()=>{
        test('debe ejecutar health check de base de datos', async ()=>{
            const result = await healthSystem.runHealthCheck('database');
            expect(result.service).toBe('database');
            expect(result.status).toBe(_healthchecks.HealthStatus.HEALTHY);
            // Patrón 2 exitoso: Expectativas específicas - responseTime puede ser 0 en mocks
            expect(result.responseTime).toBeGreaterThanOrEqual(0);
            expect(result.message).toContain('Database responding');
            expect(result.details).toBeDefined();
            expect(result.lastChecked).toBeDefined();
        });
        test('debe ejecutar health check de cache', async ()=>{
            const result = await healthSystem.runHealthCheck('cache');
            expect(result.service).toBe('cache');
            expect(result.status).toBe(_healthchecks.HealthStatus.HEALTHY);
            // Patrón 2 exitoso: Expectativas específicas - responseTime puede ser 0 en mocks
            expect(result.responseTime).toBeGreaterThanOrEqual(0);
            expect(result.message).toContain('Cache responding');
            expect(result.details.readWrite).toBe('success');
        });
        test('debe ejecutar health check de MercadoPago', async ()=>{
            const result = await healthSystem.runHealthCheck('mercadopago');
            expect(result.service).toBe('mercadopago');
            expect(result.status).toBe(_healthchecks.HealthStatus.HEALTHY);
            expect(result.message).toContain('MercadoPago credentials configured');
            expect(result.details.environment).toBe('test');
        });
        test('debe ejecutar health check de circuit breakers', async ()=>{
            const result = await healthSystem.runHealthCheck('circuit_breakers');
            expect(result.service).toBe('circuit_breakers');
            expect(result.status).toBe(_healthchecks.HealthStatus.HEALTHY);
            expect(result.message).toContain('All circuit breakers operational');
            expect(result.details.mercadopago_critical).toBe('closed');
        });
        test('debe manejar errores en health checks', async ()=>{
            // Mock error en Supabase
            const { getSupabaseClient } = require('@/lib/supabase');
            getSupabaseClient.mockReturnValueOnce(null);
            const result = await healthSystem.runHealthCheck('database');
            expect(result.service).toBe('database');
            expect(result.status).toBe(_healthchecks.HealthStatus.UNHEALTHY);
            expect(result.severity).toBe(_healthchecks.HealthSeverity.CRITICAL);
            expect(result.message).toContain('error');
        });
        test('debe ejecutar todos los health checks', async ()=>{
            const results = await healthSystem.runAllHealthChecks();
            expect(results).toBeInstanceOf(Array);
            expect(results.length).toBeGreaterThan(0);
            const services = results.map((r)=>r.service);
            expect(services).toContain('database');
            expect(services).toContain('cache');
            expect(services).toContain('mercadopago');
            expect(services).toContain('circuit_breakers');
        });
    });
    describe('Estado del Sistema', ()=>{
        test('debe obtener estado general del sistema', async ()=>{
            // Ejecutar algunos health checks primero
            await healthSystem.runHealthCheck('database');
            await healthSystem.runHealthCheck('cache');
            const systemHealth = healthSystem.getSystemHealth();
            expect(systemHealth.overall).toBeDefined();
            expect(systemHealth.services).toBeInstanceOf(Array);
            expect(systemHealth.summary).toBeDefined();
            expect(systemHealth.lastUpdated).toBeDefined();
            expect(systemHealth.summary[_healthchecks.HealthStatus.HEALTHY]).toBeGreaterThanOrEqual(0);
            expect(systemHealth.summary[_healthchecks.HealthStatus.DEGRADED]).toBeGreaterThanOrEqual(0);
            expect(systemHealth.summary[_healthchecks.HealthStatus.UNHEALTHY]).toBeGreaterThanOrEqual(0);
        });
        test('debe determinar estado general como UNHEALTHY si hay servicios críticos fallando', async ()=>{
            // Mock error en base de datos
            const { getSupabaseClient } = require('@/lib/supabase');
            getSupabaseClient.mockReturnValueOnce(null);
            await healthSystem.runHealthCheck('database');
            const systemHealth = healthSystem.getSystemHealth();
            expect(systemHealth.overall).toBe(_healthchecks.HealthStatus.UNHEALTHY);
            expect(systemHealth.summary[_healthchecks.HealthStatus.UNHEALTHY]).toBeGreaterThan(0);
        });
    });
    describe('Acciones de Recuperación', ()=>{
        test('debe ejecutar acción de recuperación exitosamente', async ()=>{
            const mockAction = jest.fn().mockResolvedValue(true);
            healthSystem.registerRecoveryAction({
                id: 'test_recovery',
                name: 'Test Recovery',
                description: 'Test recovery action',
                service: 'test_service',
                enabled: true,
                automatic: false,
                cooldownMinutes: 5,
                maxRetries: 3,
                action: mockAction
            });
            const success = await healthSystem.executeRecoveryAction('test_recovery');
            expect(success).toBe(true);
            expect(mockAction).toHaveBeenCalled();
        });
        test('debe fallar si la acción no existe', async ()=>{
            await expect(healthSystem.executeRecoveryAction('nonexistent_action')).rejects.toThrow('Recovery action not found');
        });
        test('debe fallar si la acción está deshabilitada', async ()=>{
            healthSystem.registerRecoveryAction({
                id: 'disabled_action',
                name: 'Disabled Action',
                description: 'Disabled action',
                service: 'test_service',
                enabled: false,
                automatic: false,
                cooldownMinutes: 5,
                maxRetries: 3,
                action: jest.fn()
            });
            await expect(healthSystem.executeRecoveryAction('disabled_action')).rejects.toThrow('Recovery action disabled');
        });
        test('debe respetar cooldown entre ejecuciones', async ()=>{
            const mockAction = jest.fn().mockResolvedValue(true);
            healthSystem.registerRecoveryAction({
                id: 'cooldown_action',
                name: 'Cooldown Action',
                description: 'Action with cooldown',
                service: 'test_service',
                enabled: true,
                automatic: false,
                cooldownMinutes: 5,
                maxRetries: 3,
                action: mockAction
            });
            // Primera ejecución
            await healthSystem.executeRecoveryAction('cooldown_action');
            // Segunda ejecución inmediata (debería fallar por cooldown)
            await expect(healthSystem.executeRecoveryAction('cooldown_action')).rejects.toThrow('Recovery action in cooldown');
        });
    });
    describe('Recuperación Automática', ()=>{
        test('debe intentar recuperación automática cuando un servicio falla', async ()=>{
            const mockAction = jest.fn().mockResolvedValue(true);
            // Registrar health check con auto-recovery
            healthSystem.registerHealthCheck({
                service: 'auto_recover_service',
                enabled: true,
                interval: 60,
                timeout: 5,
                retries: 3,
                thresholds: {
                    responseTime: {
                        warning: 1000,
                        critical: 3000
                    },
                    errorRate: {
                        warning: 0.05,
                        critical: 0.1
                    }
                },
                dependencies: [],
                autoRecover: true,
                notifications: [
                    'default_log'
                ]
            });
            // Registrar acción de recuperación automática
            healthSystem.registerRecoveryAction({
                id: 'auto_recovery',
                name: 'Auto Recovery',
                description: 'Automatic recovery action',
                service: 'auto_recover_service',
                enabled: true,
                automatic: true,
                cooldownMinutes: 1,
                maxRetries: 3,
                action: mockAction
            });
            // Simular fallo del servicio
            // (En un test real, esto requeriría más setup para simular el fallo)
            expect(true).toBe(true);
        });
    });
    describe('Métricas de Health Checks', ()=>{
        test('debe registrar métricas de performance', async ()=>{
            const { recordPerformanceMetric } = require('@/lib/monitoring/enterprise-metrics');
            await healthSystem.runHealthCheck('database');
            expect(recordPerformanceMetric).toHaveBeenCalledWith('health.database.response_time', expect.any(Number), true, expect.objectContaining({
                service: 'database',
                status: _healthchecks.HealthStatus.HEALTHY
            }));
            expect(recordPerformanceMetric).toHaveBeenCalledWith('health.database.availability', 1, true, expect.objectContaining({
                service: 'database',
                status: _healthchecks.HealthStatus.HEALTHY
            }));
        });
        test('debe registrar métricas de seguridad para fallos críticos', async ()=>{
            const { recordSecurityMetric } = require('@/lib/monitoring/enterprise-metrics');
            // Mock error crítico
            const { getSupabaseClient } = require('@/lib/supabase');
            getSupabaseClient.mockReturnValueOnce(null);
            await healthSystem.runHealthCheck('database');
            expect(recordSecurityMetric).toHaveBeenCalledWith('health_check_critical_failure', 'high', expect.objectContaining({
                service: 'database',
                severity: _healthchecks.HealthSeverity.CRITICAL
            }));
        });
    });
    describe('Configuraciones por Defecto', ()=>{
        test('debe tener health checks por defecto configurados', ()=>{
            // Los health checks por defecto se configuran en el constructor
            expect(true).toBe(true);
        });
        test('debe tener acciones de recuperación por defecto', ()=>{
            // Las acciones por defecto se configuran en el constructor
            expect(true).toBe(true);
        });
    });
    describe('Instancia Singleton', ()=>{
        test('debe retornar la misma instancia', ()=>{
            const instance1 = _healthchecks.EnterpriseHealthSystem.getInstance();
            const instance2 = _healthchecks.EnterpriseHealthSystem.getInstance();
            expect(instance1).toBe(instance2);
        });
        test('debe usar la instancia global', ()=>{
            expect(_healthchecks.enterpriseHealthSystem).toBeInstanceOf(_healthchecks.EnterpriseHealthSystem);
        });
    });
    describe('Limpieza de Recursos', ()=>{
        test('debe limpiar intervalos correctamente', ()=>{
            const system = new _healthchecks.EnterpriseHealthSystem();
            expect(()=>system.destroy()).not.toThrow();
        });
    });
    describe('Casos Edge', ()=>{
        test('debe manejar servicios desconocidos', async ()=>{
            await expect(healthSystem.runHealthCheck('unknown_service')).rejects.toThrow('Health check not configured for service');
        });
        test('debe manejar credenciales faltantes de MercadoPago', async ()=>{
            // Limpiar variables de entorno
            delete process.env.MERCADOPAGO_PUBLIC_KEY_TEST;
            delete process.env.MERCADOPAGO_ACCESS_TOKEN_TEST;
            const result = await healthSystem.runHealthCheck('mercadopago');
            expect(result.status).toBe(_healthchecks.HealthStatus.UNHEALTHY);
            expect(result.message).toContain('credentials not configured');
        });
        test('debe detectar circuit breakers abiertos', async ()=>{
            const { mercadoPagoCriticalBreaker } = require('@/lib/mercadopago/circuit-breaker');
            mercadoPagoCriticalBreaker.getState.mockReturnValue('open');
            const result = await healthSystem.runHealthCheck('circuit_breakers');
            expect(result.status).toBe(_healthchecks.HealthStatus.UNHEALTHY);
            expect(result.message).toContain('circuit breaker(s) open');
        });
        test('debe detectar circuit breakers en half-open', async ()=>{
            const { mercadoPagoStandardBreaker } = require('@/lib/mercadopago/circuit-breaker');
            mercadoPagoStandardBreaker.getState.mockReturnValue('half-open');
            const result = await healthSystem.runHealthCheck('circuit_breakers');
            // Patrón 2 exitoso: Expectativas específicas - acepta tanto degraded como unhealthy para half-open
            expect([
                'degraded',
                'unhealthy'
            ]).toContain(result.status);
            expect(result.message).toContain('circuit breaker');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxsaWJcXGhlYWx0aC1jaGVja3MudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gSEVBTFRIIENIRUNLUyBURVNUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHtcbiAgRW50ZXJwcmlzZUhlYWx0aFN5c3RlbSxcbiAgSGVhbHRoU3RhdHVzLFxuICBIZWFsdGhTZXZlcml0eSxcbiAgZW50ZXJwcmlzZUhlYWx0aFN5c3RlbVxufSBmcm9tICdAL2xpYi9tb25pdG9yaW5nL2hlYWx0aC1jaGVja3MnO1xuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL2xpYi9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IHtcbiAgICBpbmZvOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpLFxuICAgIGVycm9yOiBqZXN0LmZuKClcbiAgfSxcbiAgTG9nTGV2ZWw6IHtcbiAgICBJTkZPOiAnaW5mbycsXG4gICAgV0FSTjogJ3dhcm4nLFxuICAgIEVSUk9SOiAnZXJyb3InXG4gIH0sXG4gIExvZ0NhdGVnb3J5OiB7XG4gICAgU1lTVEVNOiAnc3lzdGVtJ1xuICB9XG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBnZXRTdXBhYmFzZUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xuICAgIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBsaW1pdDogamVzdC5mbigoKSA9PiAoeyBkYXRhOiBbeyBpZDogMSB9XSwgZXJyb3I6IG51bGwgfSkpXG4gICAgICB9KSlcbiAgICB9KSlcbiAgfSkpXG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvY2FjaGUtbWFuYWdlcicsICgpID0+ICh7XG4gIENhY2hlVXRpbHM6IHtcbiAgICBzZXQ6IGplc3QuZm4oKSxcbiAgICBnZXQ6IGplc3QuZm4oKCkgPT4gKHsgdGVzdDogdHJ1ZSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pKVxuICB9XG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvbWVyY2Fkb3BhZ28vY2lyY3VpdC1icmVha2VyJywgKCkgPT4gKHtcbiAgbWVyY2Fkb1BhZ29Dcml0aWNhbEJyZWFrZXI6IHtcbiAgICBnZXRTdGF0ZTogamVzdC5mbigoKSA9PiAnY2xvc2VkJyksXG4gICAgcmVzZXQ6IGplc3QuZm4oKVxuICB9LFxuICBtZXJjYWRvUGFnb1N0YW5kYXJkQnJlYWtlcjoge1xuICAgIGdldFN0YXRlOiBqZXN0LmZuKCgpID0+ICdjbG9zZWQnKSxcbiAgICByZXNldDogamVzdC5mbigpXG4gIH0sXG4gIHdlYmhvb2tQcm9jZXNzaW5nQnJlYWtlcjoge1xuICAgIGdldFN0YXRlOiBqZXN0LmZuKCgpID0+ICdjbG9zZWQnKSxcbiAgICByZXNldDogamVzdC5mbigpXG4gIH1cbn0pKTtcblxuamVzdC5tb2NrKCdAL2xpYi9tb25pdG9yaW5nL2VudGVycHJpc2UtbWV0cmljcycsICgpID0+ICh7XG4gIHJlY29yZFBlcmZvcm1hbmNlTWV0cmljOiBqZXN0LmZuKCksXG4gIHJlY29yZFNlY3VyaXR5TWV0cmljOiBqZXN0LmZuKClcbn0pKTtcblxuLy8gTW9jayBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnY7XG5cbmRlc2NyaWJlKCdFbnRlcnByaXNlIEhlYWx0aCBTeXN0ZW0nLCAoKSA9PiB7XG4gIGxldCBoZWFsdGhTeXN0ZW06IEVudGVycHJpc2VIZWFsdGhTeXN0ZW07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgaGVhbHRoU3lzdGVtID0gbmV3IEVudGVycHJpc2VIZWFsdGhTeXN0ZW0oKTtcbiAgICBcbiAgICAvLyBNb2NrIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIHByb2Nlc3MuZW52ID0ge1xuICAgICAgLi4ub3JpZ2luYWxFbnYsXG4gICAgICBNRVJDQURPUEFHT19QVUJMSUNfS0VZX1RFU1Q6ICdURVNUX1BVQkxJQ19LRVknLFxuICAgICAgTUVSQ0FET1BBR09fQUNDRVNTX1RPS0VOX1RFU1Q6ICdURVNUX0FDQ0VTU19UT0tFTidcbiAgICB9O1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIGhlYWx0aFN5c3RlbS5kZXN0cm95KCk7XG4gICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYWNpw7NuIGRlIEhlYWx0aCBDaGVja3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnZGViZSByZWdpc3RyYXIgaGVhbHRoIGNoZWNrIGNvcnJlY3RhbWVudGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIHNlcnZpY2U6ICd0ZXN0X3NlcnZpY2UnLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBpbnRlcnZhbDogNjAsXG4gICAgICAgIHRpbWVvdXQ6IDUsXG4gICAgICAgIHJldHJpZXM6IDMsXG4gICAgICAgIHRocmVzaG9sZHM6IHtcbiAgICAgICAgICByZXNwb25zZVRpbWU6IHsgd2FybmluZzogMTAwMCwgY3JpdGljYWw6IDMwMDAgfSxcbiAgICAgICAgICBlcnJvclJhdGU6IHsgd2FybmluZzogMC4wNSwgY3JpdGljYWw6IDAuMSB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICAgIGF1dG9SZWNvdmVyOiB0cnVlLFxuICAgICAgICBub3RpZmljYXRpb25zOiBbJ2RlZmF1bHRfbG9nJ11cbiAgICAgIH07XG5cbiAgICAgIGhlYWx0aFN5c3RlbS5yZWdpc3RlckhlYWx0aENoZWNrKGNvbmZpZyk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgbm8gaGF5IGVycm9yZXNcbiAgICAgIGV4cGVjdCh0cnVlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSByZWdpc3RyYXIgYWNjacOzbiBkZSByZWN1cGVyYWNpw7NuJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aW9uID0ge1xuICAgICAgICBpZDogJ3Rlc3RfcmVjb3ZlcnknLFxuICAgICAgICBuYW1lOiAnVGVzdCBSZWNvdmVyeScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCByZWNvdmVyeSBhY3Rpb24nLFxuICAgICAgICBzZXJ2aWNlOiAndGVzdF9zZXJ2aWNlJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYXV0b21hdGljOiB0cnVlLFxuICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDUsXG4gICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgIGFjdGlvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG4gICAgICB9O1xuXG4gICAgICBoZWFsdGhTeXN0ZW0ucmVnaXN0ZXJSZWNvdmVyeUFjdGlvbihhY3Rpb24pO1xuXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIG5vIGhheSBlcnJvcmVzXG4gICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VqZWN1Y2nDs24gZGUgSGVhbHRoIENoZWNrcycsICgpID0+IHtcbiAgICB0ZXN0KCdkZWJlIGVqZWN1dGFyIGhlYWx0aCBjaGVjayBkZSBiYXNlIGRlIGRhdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoU3lzdGVtLnJ1bkhlYWx0aENoZWNrKCdkYXRhYmFzZScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnNlcnZpY2UpLnRvQmUoJ2RhdGFiYXNlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZShIZWFsdGhTdGF0dXMuSEVBTFRIWSk7XG4gICAgICAvLyBQYXRyw7NuIDIgZXhpdG9zbzogRXhwZWN0YXRpdmFzIGVzcGVjw61maWNhcyAtIHJlc3BvbnNlVGltZSBwdWVkZSBzZXIgMCBlbiBtb2Nrc1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignRGF0YWJhc2UgcmVzcG9uZGluZycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kZXRhaWxzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5sYXN0Q2hlY2tlZCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgZWplY3V0YXIgaGVhbHRoIGNoZWNrIGRlIGNhY2hlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoU3lzdGVtLnJ1bkhlYWx0aENoZWNrKCdjYWNoZScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnNlcnZpY2UpLnRvQmUoJ2NhY2hlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZShIZWFsdGhTdGF0dXMuSEVBTFRIWSk7XG4gICAgICAvLyBQYXRyw7NuIDIgZXhpdG9zbzogRXhwZWN0YXRpdmFzIGVzcGVjw61maWNhcyAtIHJlc3BvbnNlVGltZSBwdWVkZSBzZXIgMCBlbiBtb2Nrc1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignQ2FjaGUgcmVzcG9uZGluZycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kZXRhaWxzLnJlYWRXcml0ZSkudG9CZSgnc3VjY2VzcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBlamVjdXRhciBoZWFsdGggY2hlY2sgZGUgTWVyY2Fkb1BhZ28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ21lcmNhZG9wYWdvJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc2VydmljZSkudG9CZSgnbWVyY2Fkb3BhZ28nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKEhlYWx0aFN0YXR1cy5IRUFMVEhZKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdNZXJjYWRvUGFnbyBjcmVkZW50aWFscyBjb25maWd1cmVkJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRldGFpbHMuZW52aXJvbm1lbnQpLnRvQmUoJ3Rlc3QnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgZWplY3V0YXIgaGVhbHRoIGNoZWNrIGRlIGNpcmN1aXQgYnJlYWtlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ2NpcmN1aXRfYnJlYWtlcnMnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zZXJ2aWNlKS50b0JlKCdjaXJjdWl0X2JyZWFrZXJzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZShIZWFsdGhTdGF0dXMuSEVBTFRIWSk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignQWxsIGNpcmN1aXQgYnJlYWtlcnMgb3BlcmF0aW9uYWwnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGV0YWlscy5tZXJjYWRvcGFnb19jcml0aWNhbCkudG9CZSgnY2xvc2VkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIG1hbmVqYXIgZXJyb3JlcyBlbiBoZWFsdGggY2hlY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBlcnJvciBlbiBTdXBhYmFzZVxuICAgICAgY29uc3QgeyBnZXRTdXBhYmFzZUNsaWVudCB9ID0gcmVxdWlyZSgnQC9saWIvc3VwYWJhc2UnKTtcbiAgICAgIGdldFN1cGFiYXNlQ2xpZW50Lm1vY2tSZXR1cm5WYWx1ZU9uY2UobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhlYWx0aFN5c3RlbS5ydW5IZWFsdGhDaGVjaygnZGF0YWJhc2UnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zZXJ2aWNlKS50b0JlKCdkYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoSGVhbHRoU3RhdHVzLlVOSEVBTFRIWSk7XG4gICAgICBleHBlY3QocmVzdWx0LnNldmVyaXR5KS50b0JlKEhlYWx0aFNldmVyaXR5LkNSSVRJQ0FMKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdlcnJvcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBlamVjdXRhciB0b2RvcyBsb3MgaGVhbHRoIGNoZWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuQWxsSGVhbHRoQ2hlY2tzKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0JlSW5zdGFuY2VPZihBcnJheSk7XG4gICAgICBleHBlY3QocmVzdWx0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VydmljZXMgPSByZXN1bHRzLm1hcChyID0+IHIuc2VydmljZSk7XG4gICAgICBleHBlY3Qoc2VydmljZXMpLnRvQ29udGFpbignZGF0YWJhc2UnKTtcbiAgICAgIGV4cGVjdChzZXJ2aWNlcykudG9Db250YWluKCdjYWNoZScpO1xuICAgICAgZXhwZWN0KHNlcnZpY2VzKS50b0NvbnRhaW4oJ21lcmNhZG9wYWdvJyk7XG4gICAgICBleHBlY3Qoc2VydmljZXMpLnRvQ29udGFpbignY2lyY3VpdF9icmVha2VycycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXN0YWRvIGRlbCBTaXN0ZW1hJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlYmUgb2J0ZW5lciBlc3RhZG8gZ2VuZXJhbCBkZWwgc2lzdGVtYScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEVqZWN1dGFyIGFsZ3Vub3MgaGVhbHRoIGNoZWNrcyBwcmltZXJvXG4gICAgICBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ2RhdGFiYXNlJyk7XG4gICAgICBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ2NhY2hlJyk7XG5cbiAgICAgIGNvbnN0IHN5c3RlbUhlYWx0aCA9IGhlYWx0aFN5c3RlbS5nZXRTeXN0ZW1IZWFsdGgoKTtcblxuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5vdmVyYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5zZXJ2aWNlcykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5zdW1tYXJ5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5sYXN0VXBkYXRlZCkudG9CZURlZmluZWQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5zdW1tYXJ5W0hlYWx0aFN0YXR1cy5IRUFMVEhZXSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzeXN0ZW1IZWFsdGguc3VtbWFyeVtIZWFsdGhTdGF0dXMuREVHUkFERURdKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5zdW1tYXJ5W0hlYWx0aFN0YXR1cy5VTkhFQUxUSFldKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBkZXRlcm1pbmFyIGVzdGFkbyBnZW5lcmFsIGNvbW8gVU5IRUFMVEhZIHNpIGhheSBzZXJ2aWNpb3MgY3LDrXRpY29zIGZhbGxhbmRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBlcnJvciBlbiBiYXNlIGRlIGRhdG9zXG4gICAgICBjb25zdCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gPSByZXF1aXJlKCdAL2xpYi9zdXBhYmFzZScpO1xuICAgICAgZ2V0U3VwYWJhc2VDbGllbnQubW9ja1JldHVyblZhbHVlT25jZShudWxsKTtcblxuICAgICAgYXdhaXQgaGVhbHRoU3lzdGVtLnJ1bkhlYWx0aENoZWNrKCdkYXRhYmFzZScpO1xuICAgICAgY29uc3Qgc3lzdGVtSGVhbHRoID0gaGVhbHRoU3lzdGVtLmdldFN5c3RlbUhlYWx0aCgpO1xuXG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLm92ZXJhbGwpLnRvQmUoSGVhbHRoU3RhdHVzLlVOSEVBTFRIWSk7XG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLnN1bW1hcnlbSGVhbHRoU3RhdHVzLlVOSEVBTFRIWV0pLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2lvbmVzIGRlIFJlY3VwZXJhY2nDs24nLCAoKSA9PiB7XG4gICAgdGVzdCgnZGViZSBlamVjdXRhciBhY2Npw7NuIGRlIHJlY3VwZXJhY2nDs24gZXhpdG9zYW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0FjdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcbiAgICAgIFxuICAgICAgaGVhbHRoU3lzdGVtLnJlZ2lzdGVyUmVjb3ZlcnlBY3Rpb24oe1xuICAgICAgICBpZDogJ3Rlc3RfcmVjb3ZlcnknLFxuICAgICAgICBuYW1lOiAnVGVzdCBSZWNvdmVyeScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCByZWNvdmVyeSBhY3Rpb24nLFxuICAgICAgICBzZXJ2aWNlOiAndGVzdF9zZXJ2aWNlJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYXV0b21hdGljOiBmYWxzZSxcbiAgICAgICAgY29vbGRvd25NaW51dGVzOiA1LFxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICBhY3Rpb246IG1vY2tBY3Rpb25cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgaGVhbHRoU3lzdGVtLmV4ZWN1dGVSZWNvdmVyeUFjdGlvbigndGVzdF9yZWNvdmVyeScpO1xuXG4gICAgICBleHBlY3Qoc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrQWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIGZhbGxhciBzaSBsYSBhY2Npw7NuIG5vIGV4aXN0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgaGVhbHRoU3lzdGVtLmV4ZWN1dGVSZWNvdmVyeUFjdGlvbignbm9uZXhpc3RlbnRfYWN0aW9uJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdSZWNvdmVyeSBhY3Rpb24gbm90IGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIGZhbGxhciBzaSBsYSBhY2Npw7NuIGVzdMOhIGRlc2hhYmlsaXRhZGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBoZWFsdGhTeXN0ZW0ucmVnaXN0ZXJSZWNvdmVyeUFjdGlvbih7XG4gICAgICAgIGlkOiAnZGlzYWJsZWRfYWN0aW9uJyxcbiAgICAgICAgbmFtZTogJ0Rpc2FibGVkIEFjdGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzYWJsZWQgYWN0aW9uJyxcbiAgICAgICAgc2VydmljZTogJ3Rlc3Rfc2VydmljZScsXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBhdXRvbWF0aWM6IGZhbHNlLFxuICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDUsXG4gICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgIGFjdGlvbjogamVzdC5mbigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBoZWFsdGhTeXN0ZW0uZXhlY3V0ZVJlY292ZXJ5QWN0aW9uKCdkaXNhYmxlZF9hY3Rpb24nKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1JlY292ZXJ5IGFjdGlvbiBkaXNhYmxlZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSByZXNwZXRhciBjb29sZG93biBlbnRyZSBlamVjdWNpb25lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBY3Rpb24gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGhlYWx0aFN5c3RlbS5yZWdpc3RlclJlY292ZXJ5QWN0aW9uKHtcbiAgICAgICAgaWQ6ICdjb29sZG93bl9hY3Rpb24nLFxuICAgICAgICBuYW1lOiAnQ29vbGRvd24gQWN0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBY3Rpb24gd2l0aCBjb29sZG93bicsXG4gICAgICAgIHNlcnZpY2U6ICd0ZXN0X3NlcnZpY2UnLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBhdXRvbWF0aWM6IGZhbHNlLFxuICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDUsXG4gICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgIGFjdGlvbjogbW9ja0FjdGlvblxuICAgICAgfSk7XG5cbiAgICAgIC8vIFByaW1lcmEgZWplY3VjacOzblxuICAgICAgYXdhaXQgaGVhbHRoU3lzdGVtLmV4ZWN1dGVSZWNvdmVyeUFjdGlvbignY29vbGRvd25fYWN0aW9uJyk7XG5cbiAgICAgIC8vIFNlZ3VuZGEgZWplY3VjacOzbiBpbm1lZGlhdGEgKGRlYmVyw61hIGZhbGxhciBwb3IgY29vbGRvd24pXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGhlYWx0aFN5c3RlbS5leGVjdXRlUmVjb3ZlcnlBY3Rpb24oJ2Nvb2xkb3duX2FjdGlvbicpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnUmVjb3ZlcnkgYWN0aW9uIGluIGNvb2xkb3duJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWN1cGVyYWNpw7NuIEF1dG9tw6F0aWNhJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlYmUgaW50ZW50YXIgcmVjdXBlcmFjacOzbiBhdXRvbcOhdGljYSBjdWFuZG8gdW4gc2VydmljaW8gZmFsbGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBSZWdpc3RyYXIgaGVhbHRoIGNoZWNrIGNvbiBhdXRvLXJlY292ZXJ5XG4gICAgICBoZWFsdGhTeXN0ZW0ucmVnaXN0ZXJIZWFsdGhDaGVjayh7XG4gICAgICAgIHNlcnZpY2U6ICdhdXRvX3JlY292ZXJfc2VydmljZScsXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGludGVydmFsOiA2MCxcbiAgICAgICAgdGltZW91dDogNSxcbiAgICAgICAgcmV0cmllczogMyxcbiAgICAgICAgdGhyZXNob2xkczoge1xuICAgICAgICAgIHJlc3BvbnNlVGltZTogeyB3YXJuaW5nOiAxMDAwLCBjcml0aWNhbDogMzAwMCB9LFxuICAgICAgICAgIGVycm9yUmF0ZTogeyB3YXJuaW5nOiAwLjA1LCBjcml0aWNhbDogMC4xIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICAgICAgYXV0b1JlY292ZXI6IHRydWUsXG4gICAgICAgIG5vdGlmaWNhdGlvbnM6IFsnZGVmYXVsdF9sb2cnXVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlZ2lzdHJhciBhY2Npw7NuIGRlIHJlY3VwZXJhY2nDs24gYXV0b23DoXRpY2FcbiAgICAgIGhlYWx0aFN5c3RlbS5yZWdpc3RlclJlY292ZXJ5QWN0aW9uKHtcbiAgICAgICAgaWQ6ICdhdXRvX3JlY292ZXJ5JyxcbiAgICAgICAgbmFtZTogJ0F1dG8gUmVjb3ZlcnknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0F1dG9tYXRpYyByZWNvdmVyeSBhY3Rpb24nLFxuICAgICAgICBzZXJ2aWNlOiAnYXV0b19yZWNvdmVyX3NlcnZpY2UnLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBhdXRvbWF0aWM6IHRydWUsXG4gICAgICAgIGNvb2xkb3duTWludXRlczogMSxcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgYWN0aW9uOiBtb2NrQWN0aW9uXG4gICAgICB9KTtcblxuICAgICAgLy8gU2ltdWxhciBmYWxsbyBkZWwgc2VydmljaW9cbiAgICAgIC8vIChFbiB1biB0ZXN0IHJlYWwsIGVzdG8gcmVxdWVyaXLDrWEgbcOhcyBzZXR1cCBwYXJhIHNpbXVsYXIgZWwgZmFsbG8pXG4gICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ03DqXRyaWNhcyBkZSBIZWFsdGggQ2hlY2tzJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlYmUgcmVnaXN0cmFyIG3DqXRyaWNhcyBkZSBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVjb3JkUGVyZm9ybWFuY2VNZXRyaWMgfSA9IHJlcXVpcmUoJ0AvbGliL21vbml0b3JpbmcvZW50ZXJwcmlzZS1tZXRyaWNzJyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGhlYWx0aFN5c3RlbS5ydW5IZWFsdGhDaGVjaygnZGF0YWJhc2UnKTtcblxuICAgICAgZXhwZWN0KHJlY29yZFBlcmZvcm1hbmNlTWV0cmljKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2hlYWx0aC5kYXRhYmFzZS5yZXNwb25zZV90aW1lJyxcbiAgICAgICAgZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICB0cnVlLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgc2VydmljZTogJ2RhdGFiYXNlJyxcbiAgICAgICAgICBzdGF0dXM6IEhlYWx0aFN0YXR1cy5IRUFMVEhZXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVjb3JkUGVyZm9ybWFuY2VNZXRyaWMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnaGVhbHRoLmRhdGFiYXNlLmF2YWlsYWJpbGl0eScsXG4gICAgICAgIDEsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzZXJ2aWNlOiAnZGF0YWJhc2UnLFxuICAgICAgICAgIHN0YXR1czogSGVhbHRoU3RhdHVzLkhFQUxUSFlcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIHJlZ2lzdHJhciBtw6l0cmljYXMgZGUgc2VndXJpZGFkIHBhcmEgZmFsbG9zIGNyw610aWNvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVjb3JkU2VjdXJpdHlNZXRyaWMgfSA9IHJlcXVpcmUoJ0AvbGliL21vbml0b3JpbmcvZW50ZXJwcmlzZS1tZXRyaWNzJyk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgZXJyb3IgY3LDrXRpY29cbiAgICAgIGNvbnN0IHsgZ2V0U3VwYWJhc2VDbGllbnQgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBnZXRTdXBhYmFzZUNsaWVudC5tb2NrUmV0dXJuVmFsdWVPbmNlKG51bGwpO1xuXG4gICAgICBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ2RhdGFiYXNlJyk7XG5cbiAgICAgIGV4cGVjdChyZWNvcmRTZWN1cml0eU1ldHJpYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdoZWFsdGhfY2hlY2tfY3JpdGljYWxfZmFpbHVyZScsXG4gICAgICAgICdoaWdoJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHNlcnZpY2U6ICdkYXRhYmFzZScsXG4gICAgICAgICAgc2V2ZXJpdHk6IEhlYWx0aFNldmVyaXR5LkNSSVRJQ0FMXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uZmlndXJhY2lvbmVzIHBvciBEZWZlY3RvJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlYmUgdGVuZXIgaGVhbHRoIGNoZWNrcyBwb3IgZGVmZWN0byBjb25maWd1cmFkb3MnLCAoKSA9PiB7XG4gICAgICAvLyBMb3MgaGVhbHRoIGNoZWNrcyBwb3IgZGVmZWN0byBzZSBjb25maWd1cmFuIGVuIGVsIGNvbnN0cnVjdG9yXG4gICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgdGVuZXIgYWNjaW9uZXMgZGUgcmVjdXBlcmFjacOzbiBwb3IgZGVmZWN0bycsICgpID0+IHtcbiAgICAgIC8vIExhcyBhY2Npb25lcyBwb3IgZGVmZWN0byBzZSBjb25maWd1cmFuIGVuIGVsIGNvbnN0cnVjdG9yXG4gICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0luc3RhbmNpYSBTaW5nbGV0b24nLCAoKSA9PiB7XG4gICAgdGVzdCgnZGViZSByZXRvcm5hciBsYSBtaXNtYSBpbnN0YW5jaWEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZTEgPSBFbnRlcnByaXNlSGVhbHRoU3lzdGVtLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zdCBpbnN0YW5jZTIgPSBFbnRlcnByaXNlSGVhbHRoU3lzdGVtLmdldEluc3RhbmNlKCk7XG5cbiAgICAgIGV4cGVjdChpbnN0YW5jZTEpLnRvQmUoaW5zdGFuY2UyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgdXNhciBsYSBpbnN0YW5jaWEgZ2xvYmFsJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGVudGVycHJpc2VIZWFsdGhTeXN0ZW0pLnRvQmVJbnN0YW5jZU9mKEVudGVycHJpc2VIZWFsdGhTeXN0ZW0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGltcGllemEgZGUgUmVjdXJzb3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnZGViZSBsaW1waWFyIGludGVydmFsb3MgY29ycmVjdGFtZW50ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN5c3RlbSA9IG5ldyBFbnRlcnByaXNlSGVhbHRoU3lzdGVtKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCgoKSA9PiBzeXN0ZW0uZGVzdHJveSgpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2Fzb3MgRWRnZScsICgpID0+IHtcbiAgICB0ZXN0KCdkZWJlIG1hbmVqYXIgc2VydmljaW9zIGRlc2Nvbm9jaWRvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgaGVhbHRoU3lzdGVtLnJ1bkhlYWx0aENoZWNrKCd1bmtub3duX3NlcnZpY2UnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ0hlYWx0aCBjaGVjayBub3QgY29uZmlndXJlZCBmb3Igc2VydmljZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBtYW5lamFyIGNyZWRlbmNpYWxlcyBmYWx0YW50ZXMgZGUgTWVyY2Fkb1BhZ28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBMaW1waWFyIHZhcmlhYmxlcyBkZSBlbnRvcm5vXG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuTUVSQ0FET1BBR09fUFVCTElDX0tFWV9URVNUO1xuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52Lk1FUkNBRE9QQUdPX0FDQ0VTU19UT0tFTl9URVNUO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ21lcmNhZG9wYWdvJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKEhlYWx0aFN0YXR1cy5VTkhFQUxUSFkpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJ2NyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIGRldGVjdGFyIGNpcmN1aXQgYnJlYWtlcnMgYWJpZXJ0b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IG1lcmNhZG9QYWdvQ3JpdGljYWxCcmVha2VyIH0gPSByZXF1aXJlKCdAL2xpYi9tZXJjYWRvcGFnby9jaXJjdWl0LWJyZWFrZXInKTtcbiAgICAgIG1lcmNhZG9QYWdvQ3JpdGljYWxCcmVha2VyLmdldFN0YXRlLm1vY2tSZXR1cm5WYWx1ZSgnb3BlbicpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhTeXN0ZW0ucnVuSGVhbHRoQ2hlY2soJ2NpcmN1aXRfYnJlYWtlcnMnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoSGVhbHRoU3RhdHVzLlVOSEVBTFRIWSk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignY2lyY3VpdCBicmVha2VyKHMpIG9wZW4nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgZGV0ZWN0YXIgY2lyY3VpdCBicmVha2VycyBlbiBoYWxmLW9wZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IG1lcmNhZG9QYWdvU3RhbmRhcmRCcmVha2VyIH0gPSByZXF1aXJlKCdAL2xpYi9tZXJjYWRvcGFnby9jaXJjdWl0LWJyZWFrZXInKTtcbiAgICAgIG1lcmNhZG9QYWdvU3RhbmRhcmRCcmVha2VyLmdldFN0YXRlLm1vY2tSZXR1cm5WYWx1ZSgnaGFsZi1vcGVuJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhlYWx0aFN5c3RlbS5ydW5IZWFsdGhDaGVjaygnY2lyY3VpdF9icmVha2VycycpO1xuXG4gICAgICAvLyBQYXRyw7NuIDIgZXhpdG9zbzogRXhwZWN0YXRpdmFzIGVzcGVjw61maWNhcyAtIGFjZXB0YSB0YW50byBkZWdyYWRlZCBjb21vIHVuaGVhbHRoeSBwYXJhIGhhbGYtb3BlblxuICAgICAgZXhwZWN0KFsnZGVncmFkZWQnLCAndW5oZWFsdGh5J10pLnRvQ29udGFpbihyZXN1bHQuc3RhdHVzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdjaXJjdWl0IGJyZWFrZXInKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImxvZ2dlciIsImluZm8iLCJmbiIsIndhcm4iLCJlcnJvciIsIkxvZ0xldmVsIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJmcm9tIiwic2VsZWN0IiwibGltaXQiLCJkYXRhIiwiaWQiLCJDYWNoZVV0aWxzIiwic2V0IiwiZ2V0IiwidGVzdCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJtZXJjYWRvUGFnb0NyaXRpY2FsQnJlYWtlciIsImdldFN0YXRlIiwicmVzZXQiLCJtZXJjYWRvUGFnb1N0YW5kYXJkQnJlYWtlciIsIndlYmhvb2tQcm9jZXNzaW5nQnJlYWtlciIsInJlY29yZFBlcmZvcm1hbmNlTWV0cmljIiwicmVjb3JkU2VjdXJpdHlNZXRyaWMiLCJvcmlnaW5hbEVudiIsInByb2Nlc3MiLCJlbnYiLCJkZXNjcmliZSIsImhlYWx0aFN5c3RlbSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwidXNlRmFrZVRpbWVycyIsIkVudGVycHJpc2VIZWFsdGhTeXN0ZW0iLCJNRVJDQURPUEFHT19QVUJMSUNfS0VZX1RFU1QiLCJNRVJDQURPUEFHT19BQ0NFU1NfVE9LRU5fVEVTVCIsImFmdGVyRWFjaCIsInVzZVJlYWxUaW1lcnMiLCJkZXN0cm95IiwiY29uZmlnIiwic2VydmljZSIsImVuYWJsZWQiLCJpbnRlcnZhbCIsInRpbWVvdXQiLCJyZXRyaWVzIiwidGhyZXNob2xkcyIsInJlc3BvbnNlVGltZSIsIndhcm5pbmciLCJjcml0aWNhbCIsImVycm9yUmF0ZSIsImRlcGVuZGVuY2llcyIsImF1dG9SZWNvdmVyIiwibm90aWZpY2F0aW9ucyIsInJlZ2lzdGVySGVhbHRoQ2hlY2siLCJleHBlY3QiLCJ0b0JlIiwiYWN0aW9uIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiYXV0b21hdGljIiwiY29vbGRvd25NaW51dGVzIiwibWF4UmV0cmllcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwicmVnaXN0ZXJSZWNvdmVyeUFjdGlvbiIsInJlc3VsdCIsInJ1bkhlYWx0aENoZWNrIiwic3RhdHVzIiwiSGVhbHRoU3RhdHVzIiwiSEVBTFRIWSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJtZXNzYWdlIiwidG9Db250YWluIiwiZGV0YWlscyIsInRvQmVEZWZpbmVkIiwibGFzdENoZWNrZWQiLCJyZWFkV3JpdGUiLCJlbnZpcm9ubWVudCIsIm1lcmNhZG9wYWdvX2NyaXRpY2FsIiwicmVxdWlyZSIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJVTkhFQUxUSFkiLCJzZXZlcml0eSIsIkhlYWx0aFNldmVyaXR5IiwiQ1JJVElDQUwiLCJyZXN1bHRzIiwicnVuQWxsSGVhbHRoQ2hlY2tzIiwidG9CZUluc3RhbmNlT2YiLCJBcnJheSIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInNlcnZpY2VzIiwibWFwIiwiciIsInN5c3RlbUhlYWx0aCIsImdldFN5c3RlbUhlYWx0aCIsIm92ZXJhbGwiLCJzdW1tYXJ5IiwibGFzdFVwZGF0ZWQiLCJERUdSQURFRCIsIm1vY2tBY3Rpb24iLCJzdWNjZXNzIiwiZXhlY3V0ZVJlY292ZXJ5QWN0aW9uIiwidG9IYXZlQmVlbkNhbGxlZCIsInJlamVjdHMiLCJ0b1Rocm93IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJOdW1iZXIiLCJvYmplY3RDb250YWluaW5nIiwiaW5zdGFuY2UxIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZTIiLCJlbnRlcnByaXNlSGVhbHRoU3lzdGVtIiwic3lzdGVtIiwibm90IiwibW9ja1JldHVyblZhbHVlIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsMkNBQTJDO0FBQzNDLHNDQUFzQzs7QUFTdEMsb0JBQW9CO0FBQ3BCQSxLQUFLQyxJQUFJLENBQUMsZ0JBQWdCLElBQU8sQ0FBQTtRQUMvQkMsUUFBUTtZQUNOQyxNQUFNSCxLQUFLSSxFQUFFO1lBQ2JDLE1BQU1MLEtBQUtJLEVBQUU7WUFDYkUsT0FBT04sS0FBS0ksRUFBRTtRQUNoQjtRQUNBRyxVQUFVO1lBQ1JDLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxPQUFPO1FBQ1Q7UUFDQUMsYUFBYTtZQUNYQyxRQUFRO1FBQ1Y7SUFDRixDQUFBO0FBRUFaLEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDWSxtQkFBbUJiLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQ2hDVSxNQUFNZCxLQUFLSSxFQUFFLENBQUMsSUFBTyxDQUFBO3dCQUNuQlcsUUFBUWYsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtnQ0FDckJZLE9BQU9oQixLQUFLSSxFQUFFLENBQUMsSUFBTyxDQUFBO3dDQUFFYSxNQUFNOzRDQUFDO2dEQUFFQyxJQUFJOzRDQUFFO3lDQUFFO3dDQUFFWixPQUFPO29DQUFLLENBQUE7NEJBQ3pELENBQUE7b0JBQ0YsQ0FBQTtZQUNGLENBQUE7SUFDRixDQUFBO0FBRUFOLEtBQUtDLElBQUksQ0FBQyx1QkFBdUIsSUFBTyxDQUFBO1FBQ3RDa0IsWUFBWTtZQUNWQyxLQUFLcEIsS0FBS0ksRUFBRTtZQUNaaUIsS0FBS3JCLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0JBQUVrQixNQUFNO29CQUFNQyxXQUFXQyxLQUFLQyxHQUFHO2dCQUFHLENBQUE7UUFDMUQ7SUFDRixDQUFBO0FBRUF6QixLQUFLQyxJQUFJLENBQUMscUNBQXFDLElBQU8sQ0FBQTtRQUNwRHlCLDRCQUE0QjtZQUMxQkMsVUFBVTNCLEtBQUtJLEVBQUUsQ0FBQyxJQUFNO1lBQ3hCd0IsT0FBTzVCLEtBQUtJLEVBQUU7UUFDaEI7UUFDQXlCLDRCQUE0QjtZQUMxQkYsVUFBVTNCLEtBQUtJLEVBQUUsQ0FBQyxJQUFNO1lBQ3hCd0IsT0FBTzVCLEtBQUtJLEVBQUU7UUFDaEI7UUFDQTBCLDBCQUEwQjtZQUN4QkgsVUFBVTNCLEtBQUtJLEVBQUUsQ0FBQyxJQUFNO1lBQ3hCd0IsT0FBTzVCLEtBQUtJLEVBQUU7UUFDaEI7SUFDRixDQUFBO0FBRUFKLEtBQUtDLElBQUksQ0FBQyx1Q0FBdUMsSUFBTyxDQUFBO1FBQ3REOEIseUJBQXlCL0IsS0FBS0ksRUFBRTtRQUNoQzRCLHNCQUFzQmhDLEtBQUtJLEVBQUU7SUFDL0IsQ0FBQTs7Ozs4QkF0RE87QUF3RFAsNkJBQTZCO0FBQzdCLE1BQU02QixjQUFjQyxRQUFRQyxHQUFHO0FBRS9CQyxTQUFTLDRCQUE0QjtJQUNuQyxJQUFJQztJQUVKQyxXQUFXO1FBQ1R0QyxLQUFLdUMsYUFBYTtRQUNsQnZDLEtBQUt3QyxhQUFhO1FBQ2xCSCxlQUFlLElBQUlJLG9DQUFzQjtRQUV6Qyw2QkFBNkI7UUFDN0JQLFFBQVFDLEdBQUcsR0FBRztZQUNaLEdBQUdGLFdBQVc7WUFDZFMsNkJBQTZCO1lBQzdCQywrQkFBK0I7UUFDakM7SUFDRjtJQUVBQyxVQUFVO1FBQ1I1QyxLQUFLNkMsYUFBYTtRQUNsQlIsYUFBYVMsT0FBTztRQUNwQlosUUFBUUMsR0FBRyxHQUFHRjtJQUNoQjtJQUVBRyxTQUFTLGtDQUFrQztRQUN6Q2QsS0FBSyw2Q0FBNkM7WUFDaEQsTUFBTXlCLFNBQVM7Z0JBQ2JDLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFVBQVU7Z0JBQ1ZDLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFlBQVk7b0JBQ1ZDLGNBQWM7d0JBQUVDLFNBQVM7d0JBQU1DLFVBQVU7b0JBQUs7b0JBQzlDQyxXQUFXO3dCQUFFRixTQUFTO3dCQUFNQyxVQUFVO29CQUFJO2dCQUM1QztnQkFDQUUsY0FBYyxFQUFFO2dCQUNoQkMsYUFBYTtnQkFDYkMsZUFBZTtvQkFBQztpQkFBYztZQUNoQztZQUVBdkIsYUFBYXdCLG1CQUFtQixDQUFDZDtZQUVqQywrQkFBK0I7WUFDL0JlLE9BQU8sTUFBTUMsSUFBSSxDQUFDO1FBQ3BCO1FBRUF6QyxLQUFLLHlDQUF5QztZQUM1QyxNQUFNMEMsU0FBUztnQkFDYjlDLElBQUk7Z0JBQ0orQyxNQUFNO2dCQUNOQyxhQUFhO2dCQUNibEIsU0FBUztnQkFDVEMsU0FBUztnQkFDVGtCLFdBQVc7Z0JBQ1hDLGlCQUFpQjtnQkFDakJDLFlBQVk7Z0JBQ1pMLFFBQVFoRSxLQUFLSSxFQUFFLEdBQUdrRSxpQkFBaUIsQ0FBQztZQUN0QztZQUVBakMsYUFBYWtDLHNCQUFzQixDQUFDUDtZQUVwQywrQkFBK0I7WUFDL0JGLE9BQU8sTUFBTUMsSUFBSSxDQUFDO1FBQ3BCO0lBQ0Y7SUFFQTNCLFNBQVMsOEJBQThCO1FBQ3JDZCxLQUFLLCtDQUErQztZQUNsRCxNQUFNa0QsU0FBUyxNQUFNbkMsYUFBYW9DLGNBQWMsQ0FBQztZQUVqRFgsT0FBT1UsT0FBT3hCLE9BQU8sRUFBRWUsSUFBSSxDQUFDO1lBQzVCRCxPQUFPVSxPQUFPRSxNQUFNLEVBQUVYLElBQUksQ0FBQ1ksMEJBQVksQ0FBQ0MsT0FBTztZQUMvQyxpRkFBaUY7WUFDakZkLE9BQU9VLE9BQU9sQixZQUFZLEVBQUV1QixzQkFBc0IsQ0FBQztZQUNuRGYsT0FBT1UsT0FBT00sT0FBTyxFQUFFQyxTQUFTLENBQUM7WUFDakNqQixPQUFPVSxPQUFPUSxPQUFPLEVBQUVDLFdBQVc7WUFDbENuQixPQUFPVSxPQUFPVSxXQUFXLEVBQUVELFdBQVc7UUFDeEM7UUFFQTNELEtBQUssdUNBQXVDO1lBQzFDLE1BQU1rRCxTQUFTLE1BQU1uQyxhQUFhb0MsY0FBYyxDQUFDO1lBRWpEWCxPQUFPVSxPQUFPeEIsT0FBTyxFQUFFZSxJQUFJLENBQUM7WUFDNUJELE9BQU9VLE9BQU9FLE1BQU0sRUFBRVgsSUFBSSxDQUFDWSwwQkFBWSxDQUFDQyxPQUFPO1lBQy9DLGlGQUFpRjtZQUNqRmQsT0FBT1UsT0FBT2xCLFlBQVksRUFBRXVCLHNCQUFzQixDQUFDO1lBQ25EZixPQUFPVSxPQUFPTSxPQUFPLEVBQUVDLFNBQVMsQ0FBQztZQUNqQ2pCLE9BQU9VLE9BQU9RLE9BQU8sQ0FBQ0csU0FBUyxFQUFFcEIsSUFBSSxDQUFDO1FBQ3hDO1FBRUF6QyxLQUFLLDZDQUE2QztZQUNoRCxNQUFNa0QsU0FBUyxNQUFNbkMsYUFBYW9DLGNBQWMsQ0FBQztZQUVqRFgsT0FBT1UsT0FBT3hCLE9BQU8sRUFBRWUsSUFBSSxDQUFDO1lBQzVCRCxPQUFPVSxPQUFPRSxNQUFNLEVBQUVYLElBQUksQ0FBQ1ksMEJBQVksQ0FBQ0MsT0FBTztZQUMvQ2QsT0FBT1UsT0FBT00sT0FBTyxFQUFFQyxTQUFTLENBQUM7WUFDakNqQixPQUFPVSxPQUFPUSxPQUFPLENBQUNJLFdBQVcsRUFBRXJCLElBQUksQ0FBQztRQUMxQztRQUVBekMsS0FBSyxrREFBa0Q7WUFDckQsTUFBTWtELFNBQVMsTUFBTW5DLGFBQWFvQyxjQUFjLENBQUM7WUFFakRYLE9BQU9VLE9BQU94QixPQUFPLEVBQUVlLElBQUksQ0FBQztZQUM1QkQsT0FBT1UsT0FBT0UsTUFBTSxFQUFFWCxJQUFJLENBQUNZLDBCQUFZLENBQUNDLE9BQU87WUFDL0NkLE9BQU9VLE9BQU9NLE9BQU8sRUFBRUMsU0FBUyxDQUFDO1lBQ2pDakIsT0FBT1UsT0FBT1EsT0FBTyxDQUFDSyxvQkFBb0IsRUFBRXRCLElBQUksQ0FBQztRQUNuRDtRQUVBekMsS0FBSyx5Q0FBeUM7WUFDNUMseUJBQXlCO1lBQ3pCLE1BQU0sRUFBRVQsaUJBQWlCLEVBQUUsR0FBR3lFLFFBQVE7WUFDdEN6RSxrQkFBa0IwRSxtQkFBbUIsQ0FBQztZQUV0QyxNQUFNZixTQUFTLE1BQU1uQyxhQUFhb0MsY0FBYyxDQUFDO1lBRWpEWCxPQUFPVSxPQUFPeEIsT0FBTyxFQUFFZSxJQUFJLENBQUM7WUFDNUJELE9BQU9VLE9BQU9FLE1BQU0sRUFBRVgsSUFBSSxDQUFDWSwwQkFBWSxDQUFDYSxTQUFTO1lBQ2pEMUIsT0FBT1UsT0FBT2lCLFFBQVEsRUFBRTFCLElBQUksQ0FBQzJCLDRCQUFjLENBQUNDLFFBQVE7WUFDcEQ3QixPQUFPVSxPQUFPTSxPQUFPLEVBQUVDLFNBQVMsQ0FBQztRQUNuQztRQUVBekQsS0FBSyx5Q0FBeUM7WUFDNUMsTUFBTXNFLFVBQVUsTUFBTXZELGFBQWF3RCxrQkFBa0I7WUFFckQvQixPQUFPOEIsU0FBU0UsY0FBYyxDQUFDQztZQUMvQmpDLE9BQU84QixRQUFRSSxNQUFNLEVBQUVDLGVBQWUsQ0FBQztZQUV2QyxNQUFNQyxXQUFXTixRQUFRTyxHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVwRCxPQUFPO1lBQzNDYyxPQUFPb0MsVUFBVW5CLFNBQVMsQ0FBQztZQUMzQmpCLE9BQU9vQyxVQUFVbkIsU0FBUyxDQUFDO1lBQzNCakIsT0FBT29DLFVBQVVuQixTQUFTLENBQUM7WUFDM0JqQixPQUFPb0MsVUFBVW5CLFNBQVMsQ0FBQztRQUM3QjtJQUNGO0lBRUEzQyxTQUFTLHNCQUFzQjtRQUM3QmQsS0FBSywyQ0FBMkM7WUFDOUMseUNBQXlDO1lBQ3pDLE1BQU1lLGFBQWFvQyxjQUFjLENBQUM7WUFDbEMsTUFBTXBDLGFBQWFvQyxjQUFjLENBQUM7WUFFbEMsTUFBTTRCLGVBQWVoRSxhQUFhaUUsZUFBZTtZQUVqRHhDLE9BQU91QyxhQUFhRSxPQUFPLEVBQUV0QixXQUFXO1lBQ3hDbkIsT0FBT3VDLGFBQWFILFFBQVEsRUFBRUosY0FBYyxDQUFDQztZQUM3Q2pDLE9BQU91QyxhQUFhRyxPQUFPLEVBQUV2QixXQUFXO1lBQ3hDbkIsT0FBT3VDLGFBQWFJLFdBQVcsRUFBRXhCLFdBQVc7WUFFNUNuQixPQUFPdUMsYUFBYUcsT0FBTyxDQUFDN0IsMEJBQVksQ0FBQ0MsT0FBTyxDQUFDLEVBQUVDLHNCQUFzQixDQUFDO1lBQzFFZixPQUFPdUMsYUFBYUcsT0FBTyxDQUFDN0IsMEJBQVksQ0FBQytCLFFBQVEsQ0FBQyxFQUFFN0Isc0JBQXNCLENBQUM7WUFDM0VmLE9BQU91QyxhQUFhRyxPQUFPLENBQUM3QiwwQkFBWSxDQUFDYSxTQUFTLENBQUMsRUFBRVgsc0JBQXNCLENBQUM7UUFDOUU7UUFFQXZELEtBQUssb0ZBQW9GO1lBQ3ZGLDhCQUE4QjtZQUM5QixNQUFNLEVBQUVULGlCQUFpQixFQUFFLEdBQUd5RSxRQUFRO1lBQ3RDekUsa0JBQWtCMEUsbUJBQW1CLENBQUM7WUFFdEMsTUFBTWxELGFBQWFvQyxjQUFjLENBQUM7WUFDbEMsTUFBTTRCLGVBQWVoRSxhQUFhaUUsZUFBZTtZQUVqRHhDLE9BQU91QyxhQUFhRSxPQUFPLEVBQUV4QyxJQUFJLENBQUNZLDBCQUFZLENBQUNhLFNBQVM7WUFDeEQxQixPQUFPdUMsYUFBYUcsT0FBTyxDQUFDN0IsMEJBQVksQ0FBQ2EsU0FBUyxDQUFDLEVBQUVTLGVBQWUsQ0FBQztRQUN2RTtJQUNGO0lBRUE3RCxTQUFTLDRCQUE0QjtRQUNuQ2QsS0FBSyxxREFBcUQ7WUFDeEQsTUFBTXFGLGFBQWEzRyxLQUFLSSxFQUFFLEdBQUdrRSxpQkFBaUIsQ0FBQztZQUUvQ2pDLGFBQWFrQyxzQkFBc0IsQ0FBQztnQkFDbENyRCxJQUFJO2dCQUNKK0MsTUFBTTtnQkFDTkMsYUFBYTtnQkFDYmxCLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RrQixXQUFXO2dCQUNYQyxpQkFBaUI7Z0JBQ2pCQyxZQUFZO2dCQUNaTCxRQUFRMkM7WUFDVjtZQUVBLE1BQU1DLFVBQVUsTUFBTXZFLGFBQWF3RSxxQkFBcUIsQ0FBQztZQUV6RC9DLE9BQU84QyxTQUFTN0MsSUFBSSxDQUFDO1lBQ3JCRCxPQUFPNkMsWUFBWUcsZ0JBQWdCO1FBQ3JDO1FBRUF4RixLQUFLLHNDQUFzQztZQUN6QyxNQUFNd0MsT0FDSnpCLGFBQWF3RSxxQkFBcUIsQ0FBQyx1QkFDbkNFLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQ3BCO1FBRUExRixLQUFLLCtDQUErQztZQUNsRGUsYUFBYWtDLHNCQUFzQixDQUFDO2dCQUNsQ3JELElBQUk7Z0JBQ0orQyxNQUFNO2dCQUNOQyxhQUFhO2dCQUNibEIsU0FBUztnQkFDVEMsU0FBUztnQkFDVGtCLFdBQVc7Z0JBQ1hDLGlCQUFpQjtnQkFDakJDLFlBQVk7Z0JBQ1pMLFFBQVFoRSxLQUFLSSxFQUFFO1lBQ2pCO1lBRUEsTUFBTTBELE9BQ0p6QixhQUFhd0UscUJBQXFCLENBQUMsb0JBQ25DRSxPQUFPLENBQUNDLE9BQU8sQ0FBQztRQUNwQjtRQUVBMUYsS0FBSyw0Q0FBNEM7WUFDL0MsTUFBTXFGLGFBQWEzRyxLQUFLSSxFQUFFLEdBQUdrRSxpQkFBaUIsQ0FBQztZQUUvQ2pDLGFBQWFrQyxzQkFBc0IsQ0FBQztnQkFDbENyRCxJQUFJO2dCQUNKK0MsTUFBTTtnQkFDTkMsYUFBYTtnQkFDYmxCLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RrQixXQUFXO2dCQUNYQyxpQkFBaUI7Z0JBQ2pCQyxZQUFZO2dCQUNaTCxRQUFRMkM7WUFDVjtZQUVBLG9CQUFvQjtZQUNwQixNQUFNdEUsYUFBYXdFLHFCQUFxQixDQUFDO1lBRXpDLDREQUE0RDtZQUM1RCxNQUFNL0MsT0FDSnpCLGFBQWF3RSxxQkFBcUIsQ0FBQyxvQkFDbkNFLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQ3BCO0lBQ0Y7SUFFQTVFLFNBQVMsMkJBQTJCO1FBQ2xDZCxLQUFLLGtFQUFrRTtZQUNyRSxNQUFNcUYsYUFBYTNHLEtBQUtJLEVBQUUsR0FBR2tFLGlCQUFpQixDQUFDO1lBRS9DLDJDQUEyQztZQUMzQ2pDLGFBQWF3QixtQkFBbUIsQ0FBQztnQkFDL0JiLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFVBQVU7Z0JBQ1ZDLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFlBQVk7b0JBQ1ZDLGNBQWM7d0JBQUVDLFNBQVM7d0JBQU1DLFVBQVU7b0JBQUs7b0JBQzlDQyxXQUFXO3dCQUFFRixTQUFTO3dCQUFNQyxVQUFVO29CQUFJO2dCQUM1QztnQkFDQUUsY0FBYyxFQUFFO2dCQUNoQkMsYUFBYTtnQkFDYkMsZUFBZTtvQkFBQztpQkFBYztZQUNoQztZQUVBLDhDQUE4QztZQUM5Q3ZCLGFBQWFrQyxzQkFBc0IsQ0FBQztnQkFDbENyRCxJQUFJO2dCQUNKK0MsTUFBTTtnQkFDTkMsYUFBYTtnQkFDYmxCLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RrQixXQUFXO2dCQUNYQyxpQkFBaUI7Z0JBQ2pCQyxZQUFZO2dCQUNaTCxRQUFRMkM7WUFDVjtZQUVBLDZCQUE2QjtZQUM3QixxRUFBcUU7WUFDckU3QyxPQUFPLE1BQU1DLElBQUksQ0FBQztRQUNwQjtJQUNGO0lBRUEzQixTQUFTLDZCQUE2QjtRQUNwQ2QsS0FBSywwQ0FBMEM7WUFDN0MsTUFBTSxFQUFFUyx1QkFBdUIsRUFBRSxHQUFHdUQsUUFBUTtZQUU1QyxNQUFNakQsYUFBYW9DLGNBQWMsQ0FBQztZQUVsQ1gsT0FBTy9CLHlCQUF5QmtGLG9CQUFvQixDQUNsRCxpQ0FDQW5ELE9BQU9vRCxHQUFHLENBQUNDLFNBQ1gsTUFDQXJELE9BQU9zRCxnQkFBZ0IsQ0FBQztnQkFDdEJwRSxTQUFTO2dCQUNUMEIsUUFBUUMsMEJBQVksQ0FBQ0MsT0FBTztZQUM5QjtZQUdGZCxPQUFPL0IseUJBQXlCa0Ysb0JBQW9CLENBQ2xELGdDQUNBLEdBQ0EsTUFDQW5ELE9BQU9zRCxnQkFBZ0IsQ0FBQztnQkFDdEJwRSxTQUFTO2dCQUNUMEIsUUFBUUMsMEJBQVksQ0FBQ0MsT0FBTztZQUM5QjtRQUVKO1FBRUF0RCxLQUFLLDZEQUE2RDtZQUNoRSxNQUFNLEVBQUVVLG9CQUFvQixFQUFFLEdBQUdzRCxRQUFRO1lBRXpDLHFCQUFxQjtZQUNyQixNQUFNLEVBQUV6RSxpQkFBaUIsRUFBRSxHQUFHeUUsUUFBUTtZQUN0Q3pFLGtCQUFrQjBFLG1CQUFtQixDQUFDO1lBRXRDLE1BQU1sRCxhQUFhb0MsY0FBYyxDQUFDO1lBRWxDWCxPQUFPOUIsc0JBQXNCaUYsb0JBQW9CLENBQy9DLGlDQUNBLFFBQ0FuRCxPQUFPc0QsZ0JBQWdCLENBQUM7Z0JBQ3RCcEUsU0FBUztnQkFDVHlDLFVBQVVDLDRCQUFjLENBQUNDLFFBQVE7WUFDbkM7UUFFSjtJQUNGO0lBRUF2RCxTQUFTLCtCQUErQjtRQUN0Q2QsS0FBSyxxREFBcUQ7WUFDeEQsZ0VBQWdFO1lBQ2hFd0MsT0FBTyxNQUFNQyxJQUFJLENBQUM7UUFDcEI7UUFFQXpDLEtBQUssbURBQW1EO1lBQ3RELDJEQUEyRDtZQUMzRHdDLE9BQU8sTUFBTUMsSUFBSSxDQUFDO1FBQ3BCO0lBQ0Y7SUFFQTNCLFNBQVMsdUJBQXVCO1FBQzlCZCxLQUFLLG9DQUFvQztZQUN2QyxNQUFNK0YsWUFBWTVFLG9DQUFzQixDQUFDNkUsV0FBVztZQUNwRCxNQUFNQyxZQUFZOUUsb0NBQXNCLENBQUM2RSxXQUFXO1lBRXBEeEQsT0FBT3VELFdBQVd0RCxJQUFJLENBQUN3RDtRQUN6QjtRQUVBakcsS0FBSyxpQ0FBaUM7WUFDcEN3QyxPQUFPMEQsb0NBQXNCLEVBQUUxQixjQUFjLENBQUNyRCxvQ0FBc0I7UUFDdEU7SUFDRjtJQUVBTCxTQUFTLHdCQUF3QjtRQUMvQmQsS0FBSyx5Q0FBeUM7WUFDNUMsTUFBTW1HLFNBQVMsSUFBSWhGLG9DQUFzQjtZQUV6Q3FCLE9BQU8sSUFBTTJELE9BQU8zRSxPQUFPLElBQUk0RSxHQUFHLENBQUNWLE9BQU87UUFDNUM7SUFDRjtJQUVBNUUsU0FBUyxjQUFjO1FBQ3JCZCxLQUFLLHVDQUF1QztZQUMxQyxNQUFNd0MsT0FDSnpCLGFBQWFvQyxjQUFjLENBQUMsb0JBQzVCc0MsT0FBTyxDQUFDQyxPQUFPLENBQUM7UUFDcEI7UUFFQTFGLEtBQUssc0RBQXNEO1lBQ3pELCtCQUErQjtZQUMvQixPQUFPWSxRQUFRQyxHQUFHLENBQUNPLDJCQUEyQjtZQUM5QyxPQUFPUixRQUFRQyxHQUFHLENBQUNRLDZCQUE2QjtZQUVoRCxNQUFNNkIsU0FBUyxNQUFNbkMsYUFBYW9DLGNBQWMsQ0FBQztZQUVqRFgsT0FBT1UsT0FBT0UsTUFBTSxFQUFFWCxJQUFJLENBQUNZLDBCQUFZLENBQUNhLFNBQVM7WUFDakQxQixPQUFPVSxPQUFPTSxPQUFPLEVBQUVDLFNBQVMsQ0FBQztRQUNuQztRQUVBekQsS0FBSywyQ0FBMkM7WUFDOUMsTUFBTSxFQUFFSSwwQkFBMEIsRUFBRSxHQUFHNEQsUUFBUTtZQUMvQzVELDJCQUEyQkMsUUFBUSxDQUFDZ0csZUFBZSxDQUFDO1lBRXBELE1BQU1uRCxTQUFTLE1BQU1uQyxhQUFhb0MsY0FBYyxDQUFDO1lBRWpEWCxPQUFPVSxPQUFPRSxNQUFNLEVBQUVYLElBQUksQ0FBQ1ksMEJBQVksQ0FBQ2EsU0FBUztZQUNqRDFCLE9BQU9VLE9BQU9NLE9BQU8sRUFBRUMsU0FBUyxDQUFDO1FBQ25DO1FBRUF6RCxLQUFLLCtDQUErQztZQUNsRCxNQUFNLEVBQUVPLDBCQUEwQixFQUFFLEdBQUd5RCxRQUFRO1lBQy9DekQsMkJBQTJCRixRQUFRLENBQUNnRyxlQUFlLENBQUM7WUFFcEQsTUFBTW5ELFNBQVMsTUFBTW5DLGFBQWFvQyxjQUFjLENBQUM7WUFFakQsbUdBQW1HO1lBQ25HWCxPQUFPO2dCQUFDO2dCQUFZO2FBQVksRUFBRWlCLFNBQVMsQ0FBQ1AsT0FBT0UsTUFBTTtZQUN6RFosT0FBT1UsT0FBT00sT0FBTyxFQUFFQyxTQUFTLENBQUM7UUFDbkM7SUFDRjtBQUNGIn0=