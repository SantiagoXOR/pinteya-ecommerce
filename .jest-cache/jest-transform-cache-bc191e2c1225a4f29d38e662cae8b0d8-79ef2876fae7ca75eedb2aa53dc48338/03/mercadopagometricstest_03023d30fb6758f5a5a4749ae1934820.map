{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\api\\admin\\mercadopago-metrics.test.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - MERCADOPAGO METRICS API TESTS\r\n// ===================================\r\n\r\nimport { NextRequest } from 'next/server';\r\nimport { GET, POST } from '@/app/api/admin/mercadopago/metrics/route';\r\n\r\n// NextAuth se mockea automáticamente\r\njest.mock('@/auth', () => ({ auth: jest.fn() }));\r\n\r\n// Mock del metrics collector\r\njest.mock('@/lib/metrics', () => ({\r\n  metricsCollector: {\r\n    getMercadoPagoMetrics: jest.fn(() => Promise.resolve({\r\n      payment_creation: {\r\n        requests: { total: 100, success: 95, error: 5, rate_limited: 2 },\r\n        response_times: { avg: 250, min: 100, max: 500, p95: 400, p99: 450 },\r\n        retry_stats: { total_retries: 3, successful_retries: 2, failed_retries: 1 },\r\n      },\r\n      payment_queries: {\r\n        requests: { total: 50, success: 48, error: 2, rate_limited: 1 },\r\n        response_times: { avg: 150, min: 80, max: 300, p95: 250, p99: 280 },\r\n        retry_stats: { total_retries: 1, successful_retries: 1, failed_retries: 0 },\r\n      },\r\n      webhook_processing: {\r\n        requests: { total: 200, success: 195, error: 5, rate_limited: 0 },\r\n        response_times: { avg: 100, min: 50, max: 200, p95: 180, p99: 190 },\r\n        retry_stats: { total_retries: 2, successful_retries: 2, failed_retries: 0 },\r\n      },\r\n    })),\r\n  },\r\n}));\r\n\r\n// Mock de Redis\r\njest.mock('@/lib/redis', () => ({\r\n  isRedisAvailable: jest.fn(() => Promise.resolve(true)),\r\n}));\r\n\r\n// Mock del logger\r\njest.mock('@/lib/logger', () => ({\r\n  logger: {\r\n    info: jest.fn(),\r\n    error: jest.fn(),\r\n    warn: jest.fn(),\r\n  },\r\n  LogCategory: {\r\n    API: 'api',\r\n  },\r\n}));\r\n\r\ndescribe('/api/admin/mercadopago/metrics', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('GET /api/admin/mercadopago/metrics', () => {\r\n    it('should return metrics successfully for authenticated user', async () => {\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(data.success).toBe(true);\r\n      expect(data.data).toBeDefined();\r\n      expect(data.data.realTimeMetrics).toBeDefined();\r\n      expect(data.data.endpointMetrics).toBeDefined();\r\n      expect(data.data.systemHealth).toBeDefined();\r\n      expect(data.data.alerts).toBeDefined();\r\n    });\r\n\r\n    it('should calculate real-time metrics correctly', async () => {\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      const realTimeMetrics = data.data.realTimeMetrics;\r\n      \r\n      // Total requests = 100 + 50 + 200 = 350\r\n      expect(realTimeMetrics.totalRequests).toBe(350);\r\n      \r\n      // Success rate = (95 + 48 + 195) / 350 = 338/350 = 96.57%\r\n      expect(realTimeMetrics.successRate).toBeCloseTo(96.57, 1);\r\n      \r\n      // Error rate = (5 + 2 + 5) / 350 = 12/350 = 3.43%\r\n      expect(realTimeMetrics.errorRate).toBeCloseTo(3.43, 1);\r\n      \r\n      // Rate limit hits = 2 + 1 + 0 = 3\r\n      expect(realTimeMetrics.rateLimitHits).toBe(3);\r\n      \r\n      // Retry attempts = 3 + 1 + 2 = 6\r\n      expect(realTimeMetrics.retryAttempts).toBe(6);\r\n    });\r\n\r\n    it('should include endpoint-specific metrics', async () => {\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      const endpointMetrics = data.data.endpointMetrics;\r\n      \r\n      // Create Preference metrics\r\n      expect(endpointMetrics.createPreference.requests).toBe(100);\r\n      expect(endpointMetrics.createPreference.successRate).toBe(95);\r\n      expect(endpointMetrics.createPreference.averageResponseTime).toBe(250);\r\n      expect(endpointMetrics.createPreference.errorCount).toBe(5);\r\n      \r\n      // Webhook metrics\r\n      expect(endpointMetrics.webhook.requests).toBe(200);\r\n      expect(endpointMetrics.webhook.successRate).toBe(97.5);\r\n      expect(endpointMetrics.webhook.averageResponseTime).toBe(100);\r\n      expect(endpointMetrics.webhook.errorCount).toBe(5);\r\n      \r\n      // Payment Query metrics\r\n      expect(endpointMetrics.paymentQuery.requests).toBe(50);\r\n      expect(endpointMetrics.paymentQuery.successRate).toBe(96);\r\n      expect(endpointMetrics.paymentQuery.averageResponseTime).toBe(150);\r\n      expect(endpointMetrics.paymentQuery.errorCount).toBe(2);\r\n    });\r\n\r\n    it('should include system health information', async () => {\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      const systemHealth = data.data.systemHealth;\r\n      \r\n      expect(systemHealth.redisStatus).toBe('connected');\r\n      expect(systemHealth.lastUpdate).toBeDefined();\r\n      expect(systemHealth.uptime).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should generate alerts for high error rates', async () => {\r\n      // Mock high error rate scenario\r\n      const { metricsCollector } = require('@/lib/metrics');\r\n      metricsCollector.getMercadoPagoMetrics.mockResolvedValueOnce({\r\n        payment_creation: {\r\n          requests: { total: 100, success: 80, error: 20, rate_limited: 0 },\r\n          response_times: { avg: 250 },\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n        payment_queries: {\r\n          requests: { total: 0, success: 0, error: 0, rate_limited: 0 },\r\n          response_times: { avg: 0 },\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n        webhook_processing: {\r\n          requests: { total: 0, success: 0, error: 0, rate_limited: 0 },\r\n          response_times: { avg: 0 },\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n      });\r\n\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      const alerts = data.data.alerts;\r\n      \r\n      // Should have an error alert for high error rate (20%)\r\n      expect(alerts).toHaveLength(1);\r\n      expect(alerts[0].type).toBe('error');\r\n      expect(alerts[0].message).toContain('Tasa de error alta');\r\n    });\r\n\r\n    it('should generate alerts for high response times', async () => {\r\n      // Mock high response time scenario\r\n      const { metricsCollector } = require('@/lib/metrics');\r\n      metricsCollector.getMercadoPagoMetrics.mockResolvedValueOnce({\r\n        payment_creation: {\r\n          requests: { total: 100, success: 100, error: 0, rate_limited: 0 },\r\n          response_times: { avg: 5000 }, // 5 seconds\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n        payment_queries: {\r\n          requests: { total: 0, success: 0, error: 0, rate_limited: 0 },\r\n          response_times: { avg: 0 },\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n        webhook_processing: {\r\n          requests: { total: 0, success: 0, error: 0, rate_limited: 0 },\r\n          response_times: { avg: 0 },\r\n          retry_stats: { total_retries: 0, successful_retries: 0, failed_retries: 0 },\r\n        },\r\n      });\r\n\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      const alerts = data.data.alerts;\r\n      \r\n      // Should have a warning alert for high response time\r\n      expect(alerts).toHaveLength(1);\r\n      expect(alerts[0].type).toBe('warning');\r\n      expect(alerts[0].message).toContain('Tiempo de respuesta alto');\r\n    });\r\n\r\n    it('should return 401 for unauthenticated requests', async () => {\r\n      // Mock unauthenticated user\r\n      const { auth } = require('@clerk/nextjs/server');\r\n      auth.mockReturnValueOnce({ userId: null });\r\n\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics');\r\n      \r\n      const response = await GET(request);\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(data.success).toBe(false);\r\n      expect(data.error).toBe('No autorizado');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/admin/mercadopago/metrics', () => {\r\n    it('should reset metrics successfully for authenticated user', async () => {\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics', {\r\n        method: 'POST',\r\n      });\r\n      \r\n      const response = await POST(request);\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(data.success).toBe(true);\r\n      expect(data.message).toBe('Métricas reiniciadas correctamente');\r\n    });\r\n\r\n    it('should return 401 for unauthenticated requests', async () => {\r\n      // Mock unauthenticated user\r\n      const { auth } = require('@clerk/nextjs/server');\r\n      auth.mockReturnValueOnce({ userId: null });\r\n\r\n      const request = new NextRequest('http://localhost:3000/api/admin/mercadopago/metrics', {\r\n        method: 'POST',\r\n      });\r\n      \r\n      const response = await POST(request);\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(data.success).toBe(false);\r\n      expect(data.error).toBe('No autorizado');\r\n    });\r\n  });\r\n});\r\n"],"names":["jest","mock","auth","fn","metricsCollector","getMercadoPagoMetrics","Promise","resolve","payment_creation","requests","total","success","error","rate_limited","response_times","avg","min","max","p95","p99","retry_stats","total_retries","successful_retries","failed_retries","payment_queries","webhook_processing","isRedisAvailable","logger","info","warn","LogCategory","API","describe","beforeEach","clearAllMocks","it","request","NextRequest","response","GET","data","json","expect","status","toBe","toBeDefined","realTimeMetrics","endpointMetrics","systemHealth","alerts","totalRequests","successRate","toBeCloseTo","errorRate","rateLimitHits","retryAttempts","createPreference","averageResponseTime","errorCount","webhook","paymentQuery","redisStatus","lastUpdate","uptime","toBeGreaterThan","require","mockResolvedValueOnce","toHaveLength","type","message","toContain","mockReturnValueOnce","userId","method","POST"],"mappings":"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"}