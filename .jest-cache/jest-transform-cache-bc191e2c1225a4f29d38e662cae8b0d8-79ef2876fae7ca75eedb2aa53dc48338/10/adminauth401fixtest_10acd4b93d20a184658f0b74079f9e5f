9b79e01e92ff81fe27799868bde1b3ba
// ===================================
// PINTEYA E-COMMERCE - TEST PARA VERIFICAR CORRECCIÓN ERROR 401
// ===================================
"use strict";
// Mocks
jest.mock('@clerk/nextjs/server', ()=>({
        auth: jest.fn(),
        currentUser: jest.fn(),
        getAuth: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _adminauth = require("../../lib/auth/admin-auth");
const _server = require("@clerk/nextjs/server");
const mockAuth = _server.auth;
const mockCurrentUser = _server.currentUser;
describe('Admin Auth 401 Fix', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        console.log = jest.fn(); // Silenciar logs en tests
        console.warn = jest.fn();
    });
    describe('getAuthenticatedUser - Verificación de Roles Corregida', ()=>{
        it('debe verificar admin usando publicMetadata correctamente', async ()=>{
            // Simular usuario admin con rol en publicMetadata
            mockAuth.mockResolvedValue({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 'admin'
                    },
                    privateMetadata: {}
                }
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                isAdmin: true
            });
        });
        it('debe verificar admin usando privateMetadata correctamente', async ()=>{
            // Simular usuario admin con rol en privateMetadata
            mockAuth.mockResolvedValue({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {},
                    privateMetadata: {
                        role: 'admin'
                    }
                }
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                isAdmin: true
            });
        });
        it('debe usar fallback a currentUser cuando sessionClaims no tiene rol', async ()=>{
            // Simular sessionClaims sin rol
            mockAuth.mockResolvedValue({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {},
                    privateMetadata: {}
                }
            });
            // Simular currentUser con rol admin
            mockCurrentUser.mockResolvedValue({
                id: 'user_admin123',
                publicMetadata: {
                    role: 'admin'
                },
                privateMetadata: {}
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                isAdmin: true
            });
            expect(mockCurrentUser).toHaveBeenCalled();
        });
        it('debe identificar usuario no-admin correctamente', async ()=>{
            // Simular usuario regular
            mockAuth.mockResolvedValue({
                userId: 'user_regular123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 'customer'
                    },
                    privateMetadata: {}
                }
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_regular123',
                sessionId: 'sess_123',
                isAdmin: false
            });
        });
        it('debe manejar usuario sin rol definido', async ()=>{
            // Simular usuario sin rol
            mockAuth.mockResolvedValue({
                userId: 'user_norole123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {},
                    privateMetadata: {}
                }
            });
            // Simular currentUser también sin rol
            mockCurrentUser.mockResolvedValue({
                id: 'user_norole123',
                publicMetadata: {},
                privateMetadata: {}
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_norole123',
                sessionId: 'sess_123',
                isAdmin: false
            });
        });
        it('debe manejar error en fallback gracefully', async ()=>{
            // Simular sessionClaims sin rol
            mockAuth.mockResolvedValue({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {},
                    privateMetadata: {}
                }
            });
            // Simular error en currentUser
            mockCurrentUser.mockRejectedValue(new Error('Clerk API error'));
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result).toEqual({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                isAdmin: false
            });
            expect(console.warn).toHaveBeenCalledWith('[AUTH] Error en fallback de verificación de admin:', expect.any(Error));
        });
    });
    describe('getAuthenticatedAdmin - Integración Completa', ()=>{
        it('debe retornar admin válido cuando usuario tiene rol correcto', async ()=>{
            // Mock getAuthenticatedUser para retornar admin
            mockAuth.mockResolvedValue({
                userId: 'user_admin123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 'admin'
                    },
                    privateMetadata: {}
                }
            });
            const result = await (0, _adminauth.getAuthenticatedAdmin)();
            expect(result.userId).toBe('user_admin123');
            expect(result.isAdmin).toBe(true);
            expect(result.error).toBeUndefined();
            expect(result.status).toBeUndefined();
        });
        it('debe retornar error 401 cuando usuario no está autenticado', async ()=>{
            // Mock usuario no autenticado
            mockAuth.mockResolvedValue({
                userId: null,
                sessionId: null,
                sessionClaims: null
            });
            const result = await (0, _adminauth.getAuthenticatedAdmin)();
            expect(result.userId).toBeNull();
            expect(result.isAdmin).toBe(false);
            expect(result.error).toBe('Usuario no autenticado');
            expect(result.status).toBe(401);
        });
        it('debe retornar error 403 cuando usuario no es admin', async ()=>{
            // Mock usuario autenticado pero no admin
            mockAuth.mockResolvedValue({
                userId: 'user_regular123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 'customer'
                    },
                    privateMetadata: {}
                }
            });
            const result = await (0, _adminauth.getAuthenticatedAdmin)();
            expect(result.userId).toBe('user_regular123');
            expect(result.isAdmin).toBe(false);
            expect(result.error).toBe('Permisos de administrador requeridos');
            expect(result.status).toBe(403);
        });
    });
    describe('Casos Edge - Compatibilidad con Producción', ()=>{
        it('debe manejar sessionClaims null/undefined', async ()=>{
            mockAuth.mockResolvedValue({
                userId: 'user_123',
                sessionId: 'sess_123',
                sessionClaims: null
            });
            mockCurrentUser.mockResolvedValue({
                id: 'user_123',
                publicMetadata: {
                    role: 'admin'
                },
                privateMetadata: {}
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result.isAdmin).toBe(true);
            expect(mockCurrentUser).toHaveBeenCalled();
        });
        it('debe manejar metadata con valores no-string', async ()=>{
            mockAuth.mockResolvedValue({
                userId: 'user_123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 123
                    },
                    privateMetadata: {}
                }
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result.isAdmin).toBe(false);
        });
        it('debe priorizar publicMetadata sobre privateMetadata', async ()=>{
            mockAuth.mockResolvedValue({
                userId: 'user_123',
                sessionId: 'sess_123',
                sessionClaims: {
                    publicMetadata: {
                        role: 'admin'
                    },
                    privateMetadata: {
                        role: 'customer'
                    }
                }
            });
            const result = await (0, _adminauth.getAuthenticatedUser)();
            expect(result.isAdmin).toBe(true);
        });
    });
});
describe('Regresión - Verificar que NO se usa metadata directamente', ()=>{
    it('NO debe usar sessionClaims.metadata.role (bug anterior)', async ()=>{
        // Simular el caso problemático anterior
        mockAuth.mockResolvedValue({
            userId: 'user_admin123',
            sessionId: 'sess_123',
            sessionClaims: {
                metadata: {
                    role: 'admin'
                },
                publicMetadata: {},
                privateMetadata: {}
            }
        });
        mockCurrentUser.mockResolvedValue({
            id: 'user_admin123',
            publicMetadata: {},
            privateMetadata: {}
        });
        const result = await (0, _adminauth.getAuthenticatedUser)();
        // Debe ser false porque no está en publicMetadata/privateMetadata
        expect(result.isAdmin).toBe(false);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxhdXRoXFxhZG1pbi1hdXRoLTQwMS1maXgudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gVEVTVCBQQVJBIFZFUklGSUNBUiBDT1JSRUNDScOTTiBFUlJPUiA0MDFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IGdldEF1dGhlbnRpY2F0ZWRBZG1pbiwgZ2V0QXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICdAL2xpYi9hdXRoL2FkbWluLWF1dGgnO1xuaW1wb3J0IHsgYXV0aCwgY3VycmVudFVzZXIgfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XG5cbi8vIE1vY2tzXG5qZXN0Lm1vY2soJ0BjbGVyay9uZXh0anMvc2VydmVyJywgKCkgPT4gKHtcbiAgYXV0aDogamVzdC5mbigpLFxuICBjdXJyZW50VXNlcjogamVzdC5mbigpLFxuICBnZXRBdXRoOiBqZXN0LmZuKCksXG59KSk7XG5cbmNvbnN0IG1vY2tBdXRoID0gYXV0aCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBhdXRoPjtcbmNvbnN0IG1vY2tDdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGN1cnJlbnRVc2VyPjtcblxuZGVzY3JpYmUoJ0FkbWluIEF1dGggNDAxIEZpeCcsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgY29uc29sZS5sb2cgPSBqZXN0LmZuKCk7IC8vIFNpbGVuY2lhciBsb2dzIGVuIHRlc3RzXG4gICAgY29uc29sZS53YXJuID0gamVzdC5mbigpO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0QXV0aGVudGljYXRlZFVzZXIgLSBWZXJpZmljYWNpw7NuIGRlIFJvbGVzIENvcnJlZ2lkYScsICgpID0+IHtcbiAgICBpdCgnZGViZSB2ZXJpZmljYXIgYWRtaW4gdXNhbmRvIHB1YmxpY01ldGFkYXRhIGNvcnJlY3RhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGFyIHVzdWFyaW8gYWRtaW4gY29uIHJvbCBlbiBwdWJsaWNNZXRhZGF0YVxuICAgICAgbW9ja0F1dGgubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiB7XG4gICAgICAgICAgcHVibGljTWV0YWRhdGE6IHsgcm9sZTogJ2FkbWluJyB9LFxuICAgICAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBpc0FkbWluOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIHZlcmlmaWNhciBhZG1pbiB1c2FuZG8gcHJpdmF0ZU1ldGFkYXRhIGNvcnJlY3RhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGFyIHVzdWFyaW8gYWRtaW4gY29uIHJvbCBlbiBwcml2YXRlTWV0YWRhdGFcbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgICAgc2Vzc2lvbkNsYWltczoge1xuICAgICAgICAgIHB1YmxpY01ldGFkYXRhOiB7fSxcbiAgICAgICAgICBwcml2YXRlTWV0YWRhdGE6IHsgcm9sZTogJ2FkbWluJyB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlcigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgICAgaXNBZG1pbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSB1c2FyIGZhbGxiYWNrIGEgY3VycmVudFVzZXIgY3VhbmRvIHNlc3Npb25DbGFpbXMgbm8gdGllbmUgcm9sJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciBzZXNzaW9uQ2xhaW1zIHNpbiByb2xcbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgICAgc2Vzc2lvbkNsYWltczoge1xuICAgICAgICAgIHB1YmxpY01ldGFkYXRhOiB7fSxcbiAgICAgICAgICBwcml2YXRlTWV0YWRhdGE6IHt9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaW11bGFyIGN1cnJlbnRVc2VyIGNvbiByb2wgYWRtaW5cbiAgICAgIG1vY2tDdXJyZW50VXNlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIHB1YmxpY01ldGFkYXRhOiB7IHJvbGU6ICdhZG1pbicgfSxcbiAgICAgICAgcHJpdmF0ZU1ldGFkYXRhOiB7fVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBpc0FkbWluOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tDdXJyZW50VXNlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgaWRlbnRpZmljYXIgdXN1YXJpbyBuby1hZG1pbiBjb3JyZWN0YW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciB1c3VhcmlvIHJlZ3VsYXJcbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9yZWd1bGFyMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiB7XG4gICAgICAgICAgcHVibGljTWV0YWRhdGE6IHsgcm9sZTogJ2N1c3RvbWVyJyB9LFxuICAgICAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX3JlZ3VsYXIxMjMnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdzZXNzXzEyMycsXG4gICAgICAgIGlzQWRtaW46IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgdXN1YXJpbyBzaW4gcm9sIGRlZmluaWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhciB1c3VhcmlvIHNpbiByb2xcbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9ub3JvbGUxMjMnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdzZXNzXzEyMycsXG4gICAgICAgIHNlc3Npb25DbGFpbXM6IHtcbiAgICAgICAgICBwdWJsaWNNZXRhZGF0YToge30sXG4gICAgICAgICAgcHJpdmF0ZU1ldGFkYXRhOiB7fVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gU2ltdWxhciBjdXJyZW50VXNlciB0YW1iacOpbiBzaW4gcm9sXG4gICAgICBtb2NrQ3VycmVudFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpZDogJ3VzZXJfbm9yb2xlMTIzJyxcbiAgICAgICAgcHVibGljTWV0YWRhdGE6IHt9LFxuICAgICAgICBwcml2YXRlTWV0YWRhdGE6IHt9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFVzZXIoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfbm9yb2xlMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBpc0FkbWluOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBtYW5lamFyIGVycm9yIGVuIGZhbGxiYWNrIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGFyIHNlc3Npb25DbGFpbXMgc2luIHJvbFxuICAgICAgbW9ja0F1dGgubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiB7XG4gICAgICAgICAgcHVibGljTWV0YWRhdGE6IHt9LFxuICAgICAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNpbXVsYXIgZXJyb3IgZW4gY3VycmVudFVzZXJcbiAgICAgIG1vY2tDdXJyZW50VXNlci5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0NsZXJrIEFQSSBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFVzZXIoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfYWRtaW4xMjMnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdzZXNzXzEyMycsXG4gICAgICAgIGlzQWRtaW46IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGUud2FybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdbQVVUSF0gRXJyb3IgZW4gZmFsbGJhY2sgZGUgdmVyaWZpY2FjacOzbiBkZSBhZG1pbjonLFxuICAgICAgICBleHBlY3QuYW55KEVycm9yKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEF1dGhlbnRpY2F0ZWRBZG1pbiAtIEludGVncmFjacOzbiBDb21wbGV0YScsICgpID0+IHtcbiAgICBpdCgnZGViZSByZXRvcm5hciBhZG1pbiB2w6FsaWRvIGN1YW5kbyB1c3VhcmlvIHRpZW5lIHJvbCBjb3JyZWN0bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZ2V0QXV0aGVudGljYXRlZFVzZXIgcGFyYSByZXRvcm5hciBhZG1pblxuICAgICAgbW9ja0F1dGgubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiB7XG4gICAgICAgICAgcHVibGljTWV0YWRhdGE6IHsgcm9sZTogJ2FkbWluJyB9LFxuICAgICAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRBZG1pbigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnVzZXJJZCkudG9CZSgndXNlcl9hZG1pbjEyMycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pc0FkbWluKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIHJldG9ybmFyIGVycm9yIDQwMSBjdWFuZG8gdXN1YXJpbyBubyBlc3TDoSBhdXRlbnRpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdXN1YXJpbyBubyBhdXRlbnRpY2Fkb1xuICAgICAgbW9ja0F1dGgubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VySWQ6IG51bGwsXG4gICAgICAgIHNlc3Npb25JZDogbnVsbCxcbiAgICAgICAgc2Vzc2lvbkNsYWltczogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRBZG1pbigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnVzZXJJZCkudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNBZG1pbikudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdVc3VhcmlvIG5vIGF1dGVudGljYWRvJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSg0MDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgcmV0b3JuYXIgZXJyb3IgNDAzIGN1YW5kbyB1c3VhcmlvIG5vIGVzIGFkbWluJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayB1c3VhcmlvIGF1dGVudGljYWRvIHBlcm8gbm8gYWRtaW5cbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl9yZWd1bGFyMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiB7XG4gICAgICAgICAgcHVibGljTWV0YWRhdGE6IHsgcm9sZTogJ2N1c3RvbWVyJyB9LFxuICAgICAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRBZG1pbigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnVzZXJJZCkudG9CZSgndXNlcl9yZWd1bGFyMTIzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmlzQWRtaW4pLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnUGVybWlzb3MgZGUgYWRtaW5pc3RyYWRvciByZXF1ZXJpZG9zJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSg0MDMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2Fzb3MgRWRnZSAtIENvbXBhdGliaWxpZGFkIGNvbiBQcm9kdWNjacOzbicsICgpID0+IHtcbiAgICBpdCgnZGViZSBtYW5lamFyIHNlc3Npb25DbGFpbXMgbnVsbC91bmRlZmluZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXV0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnLFxuICAgICAgICBzZXNzaW9uQ2xhaW1zOiBudWxsXG4gICAgICB9KTtcblxuICAgICAgbW9ja0N1cnJlbnRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6ICd1c2VyXzEyMycsXG4gICAgICAgIHB1YmxpY01ldGFkYXRhOiB7IHJvbGU6ICdhZG1pbicgfSxcbiAgICAgICAgcHJpdmF0ZU1ldGFkYXRhOiB7fVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNBZG1pbikudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrQ3VycmVudFVzZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgbWV0YWRhdGEgY29uIHZhbG9yZXMgbm8tc3RyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0F1dGgubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgICAgc2Vzc2lvbkNsYWltczoge1xuICAgICAgICAgIHB1YmxpY01ldGFkYXRhOiB7IHJvbGU6IDEyMyB9LCAvLyBWYWxvciBuby1zdHJpbmdcbiAgICAgICAgICBwcml2YXRlTWV0YWRhdGE6IHt9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlcigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzQWRtaW4pLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgcHJpb3JpemFyIHB1YmxpY01ldGFkYXRhIHNvYnJlIHByaXZhdGVNZXRhZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdzZXNzXzEyMycsXG4gICAgICAgIHNlc3Npb25DbGFpbXM6IHtcbiAgICAgICAgICBwdWJsaWNNZXRhZGF0YTogeyByb2xlOiAnYWRtaW4nIH0sXG4gICAgICAgICAgcHJpdmF0ZU1ldGFkYXRhOiB7IHJvbGU6ICdjdXN0b21lcicgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QXV0aGVudGljYXRlZFVzZXIoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0FkbWluKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnUmVncmVzacOzbiAtIFZlcmlmaWNhciBxdWUgTk8gc2UgdXNhIG1ldGFkYXRhIGRpcmVjdGFtZW50ZScsICgpID0+IHtcbiAgaXQoJ05PIGRlYmUgdXNhciBzZXNzaW9uQ2xhaW1zLm1ldGFkYXRhLnJvbGUgKGJ1ZyBhbnRlcmlvciknLCBhc3luYyAoKSA9PiB7XG4gICAgLy8gU2ltdWxhciBlbCBjYXNvIHByb2JsZW3DoXRpY28gYW50ZXJpb3JcbiAgICBtb2NrQXV0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgIHNlc3Npb25DbGFpbXM6IHtcbiAgICAgICAgbWV0YWRhdGE6IHsgcm9sZTogJ2FkbWluJyB9LCAvLyBVYmljYWNpw7NuIGluY29ycmVjdGFcbiAgICAgICAgcHVibGljTWV0YWRhdGE6IHt9LFxuICAgICAgICBwcml2YXRlTWV0YWRhdGE6IHt9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBtb2NrQ3VycmVudFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgaWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgIHB1YmxpY01ldGFkYXRhOiB7fSxcbiAgICAgIHByaXZhdGVNZXRhZGF0YToge31cbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRVc2VyKCk7XG5cbiAgICAvLyBEZWJlIHNlciBmYWxzZSBwb3JxdWUgbm8gZXN0w6EgZW4gcHVibGljTWV0YWRhdGEvcHJpdmF0ZU1ldGFkYXRhXG4gICAgZXhwZWN0KHJlc3VsdC5pc0FkbWluKS50b0JlKGZhbHNlKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImF1dGgiLCJmbiIsImN1cnJlbnRVc2VyIiwiZ2V0QXV0aCIsIm1vY2tBdXRoIiwibW9ja0N1cnJlbnRVc2VyIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiaXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVzZXJJZCIsInNlc3Npb25JZCIsInNlc3Npb25DbGFpbXMiLCJwdWJsaWNNZXRhZGF0YSIsInJvbGUiLCJwcml2YXRlTWV0YWRhdGEiLCJyZXN1bHQiLCJnZXRBdXRoZW50aWNhdGVkVXNlciIsImV4cGVjdCIsInRvRXF1YWwiLCJpc0FkbWluIiwiaWQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYW55IiwiZ2V0QXV0aGVudGljYXRlZEFkbWluIiwidG9CZSIsImVycm9yIiwidG9CZVVuZGVmaW5lZCIsInN0YXR1cyIsInRvQmVOdWxsIiwibWV0YWRhdGEiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QyxnRUFBZ0U7QUFDaEUsc0NBQXNDOztBQUt0QyxRQUFRO0FBQ1JBLEtBQUtDLElBQUksQ0FBQyx3QkFBd0IsSUFBTyxDQUFBO1FBQ3ZDQyxNQUFNRixLQUFLRyxFQUFFO1FBQ2JDLGFBQWFKLEtBQUtHLEVBQUU7UUFDcEJFLFNBQVNMLEtBQUtHLEVBQUU7SUFDbEIsQ0FBQTs7OzsyQkFSNEQ7d0JBQzFCO0FBU2xDLE1BQU1HLFdBQVdKLFlBQUk7QUFDckIsTUFBTUssa0JBQWtCSCxtQkFBVztBQUVuQ0ksU0FBUyxzQkFBc0I7SUFDN0JDLFdBQVc7UUFDVFQsS0FBS1UsYUFBYTtRQUNsQkMsUUFBUUMsR0FBRyxHQUFHWixLQUFLRyxFQUFFLElBQUksMEJBQTBCO1FBQ25EUSxRQUFRRSxJQUFJLEdBQUdiLEtBQUtHLEVBQUU7SUFDeEI7SUFFQUssU0FBUywwREFBMEQ7UUFDakVNLEdBQUcsNERBQTREO1lBQzdELGtEQUFrRDtZQUNsRFIsU0FBU1MsaUJBQWlCLENBQUM7Z0JBQ3pCQyxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYQyxlQUFlO29CQUNiQyxnQkFBZ0I7d0JBQUVDLE1BQU07b0JBQVE7b0JBQ2hDQyxpQkFBaUIsQ0FBQztnQkFDcEI7WUFDRjtZQUVBLE1BQU1DLFNBQVMsTUFBTUMsSUFBQUEsK0JBQW9CO1lBRXpDQyxPQUFPRixRQUFRRyxPQUFPLENBQUM7Z0JBQ3JCVCxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYUyxTQUFTO1lBQ1g7UUFDRjtRQUVBWixHQUFHLDZEQUE2RDtZQUM5RCxtREFBbUQ7WUFDbkRSLFNBQVNTLGlCQUFpQixDQUFDO2dCQUN6QkMsUUFBUTtnQkFDUkMsV0FBVztnQkFDWEMsZUFBZTtvQkFDYkMsZ0JBQWdCLENBQUM7b0JBQ2pCRSxpQkFBaUI7d0JBQUVELE1BQU07b0JBQVE7Z0JBQ25DO1lBQ0Y7WUFFQSxNQUFNRSxTQUFTLE1BQU1DLElBQUFBLCtCQUFvQjtZQUV6Q0MsT0FBT0YsUUFBUUcsT0FBTyxDQUFDO2dCQUNyQlQsUUFBUTtnQkFDUkMsV0FBVztnQkFDWFMsU0FBUztZQUNYO1FBQ0Y7UUFFQVosR0FBRyxzRUFBc0U7WUFDdkUsZ0NBQWdDO1lBQ2hDUixTQUFTUyxpQkFBaUIsQ0FBQztnQkFDekJDLFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hDLGVBQWU7b0JBQ2JDLGdCQUFnQixDQUFDO29CQUNqQkUsaUJBQWlCLENBQUM7Z0JBQ3BCO1lBQ0Y7WUFFQSxvQ0FBb0M7WUFDcENkLGdCQUFnQlEsaUJBQWlCLENBQUM7Z0JBQ2hDWSxJQUFJO2dCQUNKUixnQkFBZ0I7b0JBQUVDLE1BQU07Z0JBQVE7Z0JBQ2hDQyxpQkFBaUIsQ0FBQztZQUNwQjtZQUVBLE1BQU1DLFNBQVMsTUFBTUMsSUFBQUEsK0JBQW9CO1lBRXpDQyxPQUFPRixRQUFRRyxPQUFPLENBQUM7Z0JBQ3JCVCxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYUyxTQUFTO1lBQ1g7WUFFQUYsT0FBT2pCLGlCQUFpQnFCLGdCQUFnQjtRQUMxQztRQUVBZCxHQUFHLG1EQUFtRDtZQUNwRCwwQkFBMEI7WUFDMUJSLFNBQVNTLGlCQUFpQixDQUFDO2dCQUN6QkMsUUFBUTtnQkFDUkMsV0FBVztnQkFDWEMsZUFBZTtvQkFDYkMsZ0JBQWdCO3dCQUFFQyxNQUFNO29CQUFXO29CQUNuQ0MsaUJBQWlCLENBQUM7Z0JBQ3BCO1lBQ0Y7WUFFQSxNQUFNQyxTQUFTLE1BQU1DLElBQUFBLCtCQUFvQjtZQUV6Q0MsT0FBT0YsUUFBUUcsT0FBTyxDQUFDO2dCQUNyQlQsUUFBUTtnQkFDUkMsV0FBVztnQkFDWFMsU0FBUztZQUNYO1FBQ0Y7UUFFQVosR0FBRyx5Q0FBeUM7WUFDMUMsMEJBQTBCO1lBQzFCUixTQUFTUyxpQkFBaUIsQ0FBQztnQkFDekJDLFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hDLGVBQWU7b0JBQ2JDLGdCQUFnQixDQUFDO29CQUNqQkUsaUJBQWlCLENBQUM7Z0JBQ3BCO1lBQ0Y7WUFFQSxzQ0FBc0M7WUFDdENkLGdCQUFnQlEsaUJBQWlCLENBQUM7Z0JBQ2hDWSxJQUFJO2dCQUNKUixnQkFBZ0IsQ0FBQztnQkFDakJFLGlCQUFpQixDQUFDO1lBQ3BCO1lBRUEsTUFBTUMsU0FBUyxNQUFNQyxJQUFBQSwrQkFBb0I7WUFFekNDLE9BQU9GLFFBQVFHLE9BQU8sQ0FBQztnQkFDckJULFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hTLFNBQVM7WUFDWDtRQUNGO1FBRUFaLEdBQUcsNkNBQTZDO1lBQzlDLGdDQUFnQztZQUNoQ1IsU0FBU1MsaUJBQWlCLENBQUM7Z0JBQ3pCQyxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYQyxlQUFlO29CQUNiQyxnQkFBZ0IsQ0FBQztvQkFDakJFLGlCQUFpQixDQUFDO2dCQUNwQjtZQUNGO1lBRUEsK0JBQStCO1lBQy9CZCxnQkFBZ0JzQixpQkFBaUIsQ0FBQyxJQUFJQyxNQUFNO1lBRTVDLE1BQU1SLFNBQVMsTUFBTUMsSUFBQUEsK0JBQW9CO1lBRXpDQyxPQUFPRixRQUFRRyxPQUFPLENBQUM7Z0JBQ3JCVCxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYUyxTQUFTO1lBQ1g7WUFFQUYsT0FBT2IsUUFBUUUsSUFBSSxFQUFFa0Isb0JBQW9CLENBQ3ZDLHNEQUNBUCxPQUFPUSxHQUFHLENBQUNGO1FBRWY7SUFDRjtJQUVBdEIsU0FBUyxnREFBZ0Q7UUFDdkRNLEdBQUcsZ0VBQWdFO1lBQ2pFLGdEQUFnRDtZQUNoRFIsU0FBU1MsaUJBQWlCLENBQUM7Z0JBQ3pCQyxRQUFRO2dCQUNSQyxXQUFXO2dCQUNYQyxlQUFlO29CQUNiQyxnQkFBZ0I7d0JBQUVDLE1BQU07b0JBQVE7b0JBQ2hDQyxpQkFBaUIsQ0FBQztnQkFDcEI7WUFDRjtZQUVBLE1BQU1DLFNBQVMsTUFBTVcsSUFBQUEsZ0NBQXFCO1lBRTFDVCxPQUFPRixPQUFPTixNQUFNLEVBQUVrQixJQUFJLENBQUM7WUFDM0JWLE9BQU9GLE9BQU9JLE9BQU8sRUFBRVEsSUFBSSxDQUFDO1lBQzVCVixPQUFPRixPQUFPYSxLQUFLLEVBQUVDLGFBQWE7WUFDbENaLE9BQU9GLE9BQU9lLE1BQU0sRUFBRUQsYUFBYTtRQUNyQztRQUVBdEIsR0FBRyw4REFBOEQ7WUFDL0QsOEJBQThCO1lBQzlCUixTQUFTUyxpQkFBaUIsQ0FBQztnQkFDekJDLFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hDLGVBQWU7WUFDakI7WUFFQSxNQUFNSSxTQUFTLE1BQU1XLElBQUFBLGdDQUFxQjtZQUUxQ1QsT0FBT0YsT0FBT04sTUFBTSxFQUFFc0IsUUFBUTtZQUM5QmQsT0FBT0YsT0FBT0ksT0FBTyxFQUFFUSxJQUFJLENBQUM7WUFDNUJWLE9BQU9GLE9BQU9hLEtBQUssRUFBRUQsSUFBSSxDQUFDO1lBQzFCVixPQUFPRixPQUFPZSxNQUFNLEVBQUVILElBQUksQ0FBQztRQUM3QjtRQUVBcEIsR0FBRyxzREFBc0Q7WUFDdkQseUNBQXlDO1lBQ3pDUixTQUFTUyxpQkFBaUIsQ0FBQztnQkFDekJDLFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hDLGVBQWU7b0JBQ2JDLGdCQUFnQjt3QkFBRUMsTUFBTTtvQkFBVztvQkFDbkNDLGlCQUFpQixDQUFDO2dCQUNwQjtZQUNGO1lBRUEsTUFBTUMsU0FBUyxNQUFNVyxJQUFBQSxnQ0FBcUI7WUFFMUNULE9BQU9GLE9BQU9OLE1BQU0sRUFBRWtCLElBQUksQ0FBQztZQUMzQlYsT0FBT0YsT0FBT0ksT0FBTyxFQUFFUSxJQUFJLENBQUM7WUFDNUJWLE9BQU9GLE9BQU9hLEtBQUssRUFBRUQsSUFBSSxDQUFDO1lBQzFCVixPQUFPRixPQUFPZSxNQUFNLEVBQUVILElBQUksQ0FBQztRQUM3QjtJQUNGO0lBRUExQixTQUFTLDhDQUE4QztRQUNyRE0sR0FBRyw2Q0FBNkM7WUFDOUNSLFNBQVNTLGlCQUFpQixDQUFDO2dCQUN6QkMsUUFBUTtnQkFDUkMsV0FBVztnQkFDWEMsZUFBZTtZQUNqQjtZQUVBWCxnQkFBZ0JRLGlCQUFpQixDQUFDO2dCQUNoQ1ksSUFBSTtnQkFDSlIsZ0JBQWdCO29CQUFFQyxNQUFNO2dCQUFRO2dCQUNoQ0MsaUJBQWlCLENBQUM7WUFDcEI7WUFFQSxNQUFNQyxTQUFTLE1BQU1DLElBQUFBLCtCQUFvQjtZQUV6Q0MsT0FBT0YsT0FBT0ksT0FBTyxFQUFFUSxJQUFJLENBQUM7WUFDNUJWLE9BQU9qQixpQkFBaUJxQixnQkFBZ0I7UUFDMUM7UUFFQWQsR0FBRywrQ0FBK0M7WUFDaERSLFNBQVNTLGlCQUFpQixDQUFDO2dCQUN6QkMsUUFBUTtnQkFDUkMsV0FBVztnQkFDWEMsZUFBZTtvQkFDYkMsZ0JBQWdCO3dCQUFFQyxNQUFNO29CQUFJO29CQUM1QkMsaUJBQWlCLENBQUM7Z0JBQ3BCO1lBQ0Y7WUFFQSxNQUFNQyxTQUFTLE1BQU1DLElBQUFBLCtCQUFvQjtZQUV6Q0MsT0FBT0YsT0FBT0ksT0FBTyxFQUFFUSxJQUFJLENBQUM7UUFDOUI7UUFFQXBCLEdBQUcsdURBQXVEO1lBQ3hEUixTQUFTUyxpQkFBaUIsQ0FBQztnQkFDekJDLFFBQVE7Z0JBQ1JDLFdBQVc7Z0JBQ1hDLGVBQWU7b0JBQ2JDLGdCQUFnQjt3QkFBRUMsTUFBTTtvQkFBUTtvQkFDaENDLGlCQUFpQjt3QkFBRUQsTUFBTTtvQkFBVztnQkFDdEM7WUFDRjtZQUVBLE1BQU1FLFNBQVMsTUFBTUMsSUFBQUEsK0JBQW9CO1lBRXpDQyxPQUFPRixPQUFPSSxPQUFPLEVBQUVRLElBQUksQ0FBQztRQUM5QjtJQUNGO0FBQ0Y7QUFFQTFCLFNBQVMsNkRBQTZEO0lBQ3BFTSxHQUFHLDJEQUEyRDtRQUM1RCx3Q0FBd0M7UUFDeENSLFNBQVNTLGlCQUFpQixDQUFDO1lBQ3pCQyxRQUFRO1lBQ1JDLFdBQVc7WUFDWEMsZUFBZTtnQkFDYnFCLFVBQVU7b0JBQUVuQixNQUFNO2dCQUFRO2dCQUMxQkQsZ0JBQWdCLENBQUM7Z0JBQ2pCRSxpQkFBaUIsQ0FBQztZQUNwQjtRQUNGO1FBRUFkLGdCQUFnQlEsaUJBQWlCLENBQUM7WUFDaENZLElBQUk7WUFDSlIsZ0JBQWdCLENBQUM7WUFDakJFLGlCQUFpQixDQUFDO1FBQ3BCO1FBRUEsTUFBTUMsU0FBUyxNQUFNQyxJQUFBQSwrQkFBb0I7UUFFekMsa0VBQWtFO1FBQ2xFQyxPQUFPRixPQUFPSSxPQUFPLEVBQUVRLElBQUksQ0FBQztJQUM5QjtBQUNGIn0=