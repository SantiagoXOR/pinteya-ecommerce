baf4cadf3974c8e22d44a9dd4d4cfb2d
// =====================================================
// UTILIDADES: VALIDACIÓN DE DATOS
// Descripción: Funciones para validar datos de logística
// Basado en: Zod + patrones enterprise
// =====================================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get addressSchema () {
        return addressSchema;
    },
    get sanitizePhoneNumber () {
        return sanitizePhoneNumber;
    },
    get sanitizePostalCode () {
        return sanitizePostalCode;
    },
    get sanitizeString () {
        return sanitizeString;
    },
    get sanitizeTrackingNumber () {
        return sanitizeTrackingNumber;
    },
    get shipmentSchema () {
        return shipmentSchema;
    },
    get validateAddress () {
        return validateAddress;
    },
    get validateCoordinates () {
        return validateCoordinates;
    },
    get validateDNI () {
        return validateDNI;
    },
    get validateDeliveryDate () {
        return validateDeliveryDate;
    },
    get validateDimensions () {
        return validateDimensions;
    },
    get validateEmail () {
        return validateEmail;
    },
    get validatePackageValue () {
        return validatePackageValue;
    },
    get validatePhoneNumber () {
        return validatePhoneNumber;
    },
    get validatePostalCode () {
        return validatePostalCode;
    },
    get validateShipment () {
        return validateShipment;
    },
    get validateShippingCost () {
        return validateShippingCost;
    },
    get validateTrackingNumber () {
        return validateTrackingNumber;
    },
    get validateWeight () {
        return validateWeight;
    }
});
const _zod = require("zod");
const addressSchema = _zod.z.object({
    street: _zod.z.string().min(1, 'La calle es requerida'),
    number: _zod.z.string().min(1, 'El número es requerido'),
    apartment: _zod.z.string().optional(),
    neighborhood: _zod.z.string().min(1, 'El barrio es requerido'),
    city: _zod.z.string().min(1, 'La ciudad es requerida'),
    state: _zod.z.string().min(1, 'La provincia es requerida'),
    postal_code: _zod.z.string().min(4, 'El código postal debe tener al menos 4 dígitos'),
    country: _zod.z.string().default('AR'),
    latitude: _zod.z.number().optional(),
    longitude: _zod.z.number().optional(),
    reference: _zod.z.string().optional()
});
const shipmentSchema = _zod.z.object({
    tracking_number: _zod.z.string().min(1, 'El número de tracking es requerido'),
    courier_id: _zod.z.number().min(1, 'El courier es requerido'),
    service_type: _zod.z.enum([
        'standard',
        'express',
        'next_day',
        'same_day'
    ]),
    origin_address: addressSchema,
    destination_address: addressSchema,
    package_details: _zod.z.object({
        weight: _zod.z.number().min(0.1, 'El peso debe ser mayor a 0'),
        dimensions: _zod.z.object({
            length: _zod.z.number().min(1, 'El largo debe ser mayor a 0'),
            width: _zod.z.number().min(1, 'El ancho debe ser mayor a 0'),
            height: _zod.z.number().min(1, 'La altura debe ser mayor a 0')
        }),
        declared_value: _zod.z.number().min(0, 'El valor declarado debe ser mayor o igual a 0'),
        description: _zod.z.string().min(1, 'La descripción es requerida')
    }),
    estimated_delivery: _zod.z.string().optional(),
    special_instructions: _zod.z.string().optional()
});
function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}
function validatePhoneNumber(phone) {
    // Formato argentino: +54 9 351 123 4567, +54 351 123-4567, 351 123 4567, etc.
    // Limpiar el teléfono de espacios, guiones y paréntesis
    const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
    // Patrones aceptados:
    // +54351234567 (con código país)
    // +549351234567 (con código país y 9)
    // 351234567 (sin código país)
    const phoneRegex = /^(\+54(9)?)?\d{10}$|^\d{10}$/;
    return phoneRegex.test(cleanPhone) && cleanPhone.length >= 10;
}
function validateDNI(dni) {
    // Limpiar el DNI de espacios, guiones y puntos
    const cleanDNI = dni.replace(/[\s\-\.]/g, '');
    // Patrones aceptados:
    // DNI: 8 dígitos (12345678)
    // CUIT: 11 dígitos (20123456789)
    const dniRegex = /^\d{8}$/;
    const cuitRegex = /^\d{11}$/;
    if (dniRegex.test(cleanDNI)) {
        // Validar DNI (8 dígitos)
        return cleanDNI.length === 8 && parseInt(cleanDNI) > 0;
    } else if (cuitRegex.test(cleanDNI)) {
        // Validar CUIT (11 dígitos) - validación básica
        return cleanDNI.length === 11 && parseInt(cleanDNI) > 0;
    }
    return false;
}
function validatePostalCode(postalCode) {
    // Código postal argentino: 4 dígitos
    const postalCodeRegex = /^\d{4}$/;
    return postalCodeRegex.test(postalCode);
}
function validateTrackingNumber(trackingNumber) {
    // Formato general: al menos 6 caracteres alfanuméricos
    const trackingRegex = /^[A-Z0-9]{6,}$/i;
    return trackingRegex.test(trackingNumber);
}
function validateCoordinates(lat, lng) {
    return lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180;
}
function validateWeight(weight) {
    return weight > 0 && weight <= 1000; // Máximo 1000kg
}
function validateDimensions(dimensions) {
    const { length, width, height } = dimensions;
    return length > 0 && length <= 200 && // Máximo 200cm
    width > 0 && width <= 200 && height > 0 && height <= 200;
}
function validateDeliveryDate(date) {
    const deliveryDate = new Date(date);
    const today = new Date();
    const maxDate = new Date();
    maxDate.setDate(today.getDate() + 30); // Máximo 30 días
    return deliveryDate >= today && deliveryDate <= maxDate;
}
function validateShippingCost(cost) {
    return cost >= 0 && cost <= 100000; // Máximo $100,000
}
function validatePackageValue(value) {
    return value >= 0 && value <= 1000000; // Máximo $1,000,000
}
function sanitizeString(input) {
    return input.trim().replace(/[<>]/g, '');
}
function sanitizePhoneNumber(phone) {
    return phone.replace(/\D/g, '');
}
function sanitizePostalCode(postalCode) {
    return postalCode.replace(/\D/g, '').substring(0, 4);
}
function sanitizeTrackingNumber(trackingNumber) {
    return trackingNumber.toUpperCase().replace(/[^A-Z0-9]/g, '');
}
function validateAddress(address) {
    try {
        addressSchema.parse(address);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}
function validateShipment(shipment) {
    try {
        shipmentSchema.parse(shipment);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx1dGlsc1xcdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFUzogVkFMSURBQ0nDk04gREUgREFUT1Ncbi8vIERlc2NyaXBjacOzbjogRnVuY2lvbmVzIHBhcmEgdmFsaWRhciBkYXRvcyBkZSBsb2fDrXN0aWNhXG4vLyBCYXNhZG8gZW46IFpvZCArIHBhdHJvbmVzIGVudGVycHJpc2Vcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0NIRU1BUyBERSBWQUxJREFDScOTTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IGFkZHJlc3NTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN0cmVldDogei5zdHJpbmcoKS5taW4oMSwgJ0xhIGNhbGxlIGVzIHJlcXVlcmlkYScpLFxuICBudW1iZXI6IHouc3RyaW5nKCkubWluKDEsICdFbCBuw7ptZXJvIGVzIHJlcXVlcmlkbycpLFxuICBhcGFydG1lbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbmVpZ2hib3Job29kOiB6LnN0cmluZygpLm1pbigxLCAnRWwgYmFycmlvIGVzIHJlcXVlcmlkbycpLFxuICBjaXR5OiB6LnN0cmluZygpLm1pbigxLCAnTGEgY2l1ZGFkIGVzIHJlcXVlcmlkYScpLFxuICBzdGF0ZTogei5zdHJpbmcoKS5taW4oMSwgJ0xhIHByb3ZpbmNpYSBlcyByZXF1ZXJpZGEnKSxcbiAgcG9zdGFsX2NvZGU6IHouc3RyaW5nKCkubWluKDQsICdFbCBjw7NkaWdvIHBvc3RhbCBkZWJlIHRlbmVyIGFsIG1lbm9zIDQgZMOtZ2l0b3MnKSxcbiAgY291bnRyeTogei5zdHJpbmcoKS5kZWZhdWx0KCdBUicpLFxuICBsYXRpdHVkZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBsb25naXR1ZGU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgcmVmZXJlbmNlOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuXG5leHBvcnQgY29uc3Qgc2hpcG1lbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRyYWNraW5nX251bWJlcjogei5zdHJpbmcoKS5taW4oMSwgJ0VsIG7Dum1lcm8gZGUgdHJhY2tpbmcgZXMgcmVxdWVyaWRvJyksXG4gIGNvdXJpZXJfaWQ6IHoubnVtYmVyKCkubWluKDEsICdFbCBjb3VyaWVyIGVzIHJlcXVlcmlkbycpLFxuICBzZXJ2aWNlX3R5cGU6IHouZW51bShbJ3N0YW5kYXJkJywgJ2V4cHJlc3MnLCAnbmV4dF9kYXknLCAnc2FtZV9kYXknXSksXG4gIG9yaWdpbl9hZGRyZXNzOiBhZGRyZXNzU2NoZW1hLFxuICBkZXN0aW5hdGlvbl9hZGRyZXNzOiBhZGRyZXNzU2NoZW1hLFxuICBwYWNrYWdlX2RldGFpbHM6IHoub2JqZWN0KHtcbiAgICB3ZWlnaHQ6IHoubnVtYmVyKCkubWluKDAuMSwgJ0VsIHBlc28gZGViZSBzZXIgbWF5b3IgYSAwJyksXG4gICAgZGltZW5zaW9uczogei5vYmplY3Qoe1xuICAgICAgbGVuZ3RoOiB6Lm51bWJlcigpLm1pbigxLCAnRWwgbGFyZ28gZGViZSBzZXIgbWF5b3IgYSAwJyksXG4gICAgICB3aWR0aDogei5udW1iZXIoKS5taW4oMSwgJ0VsIGFuY2hvIGRlYmUgc2VyIG1heW9yIGEgMCcpLFxuICAgICAgaGVpZ2h0OiB6Lm51bWJlcigpLm1pbigxLCAnTGEgYWx0dXJhIGRlYmUgc2VyIG1heW9yIGEgMCcpXG4gICAgfSksXG4gICAgZGVjbGFyZWRfdmFsdWU6IHoubnVtYmVyKCkubWluKDAsICdFbCB2YWxvciBkZWNsYXJhZG8gZGViZSBzZXIgbWF5b3IgbyBpZ3VhbCBhIDAnKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5taW4oMSwgJ0xhIGRlc2NyaXBjacOzbiBlcyByZXF1ZXJpZGEnKVxuICB9KSxcbiAgZXN0aW1hdGVkX2RlbGl2ZXJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHNwZWNpYWxfaW5zdHJ1Y3Rpb25zOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRlVOQ0lPTkVTIERFIFZBTElEQUNJw5NOXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLztcbiAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBob25lTnVtYmVyKHBob25lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gRm9ybWF0byBhcmdlbnRpbm86ICs1NCA5IDM1MSAxMjMgNDU2NywgKzU0IDM1MSAxMjMtNDU2NywgMzUxIDEyMyA0NTY3LCBldGMuXG4gIC8vIExpbXBpYXIgZWwgdGVsw6lmb25vIGRlIGVzcGFjaW9zLCBndWlvbmVzIHkgcGFyw6ludGVzaXNcbiAgY29uc3QgY2xlYW5QaG9uZSA9IHBob25lLnJlcGxhY2UoL1tcXHNcXC1cXChcXCldL2csICcnKTtcblxuICAvLyBQYXRyb25lcyBhY2VwdGFkb3M6XG4gIC8vICs1NDM1MTIzNDU2NyAoY29uIGPDs2RpZ28gcGHDrXMpXG4gIC8vICs1NDkzNTEyMzQ1NjcgKGNvbiBjw7NkaWdvIHBhw61zIHkgOSlcbiAgLy8gMzUxMjM0NTY3IChzaW4gY8OzZGlnbyBwYcOtcylcbiAgY29uc3QgcGhvbmVSZWdleCA9IC9eKFxcKzU0KDkpPyk/XFxkezEwfSR8XlxcZHsxMH0kLztcblxuICByZXR1cm4gcGhvbmVSZWdleC50ZXN0KGNsZWFuUGhvbmUpICYmIGNsZWFuUGhvbmUubGVuZ3RoID49IDEwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVETkkoZG5pOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gTGltcGlhciBlbCBETkkgZGUgZXNwYWNpb3MsIGd1aW9uZXMgeSBwdW50b3NcbiAgY29uc3QgY2xlYW5ETkkgPSBkbmkucmVwbGFjZSgvW1xcc1xcLVxcLl0vZywgJycpO1xuXG4gIC8vIFBhdHJvbmVzIGFjZXB0YWRvczpcbiAgLy8gRE5JOiA4IGTDrWdpdG9zICgxMjM0NTY3OClcbiAgLy8gQ1VJVDogMTEgZMOtZ2l0b3MgKDIwMTIzNDU2Nzg5KVxuICBjb25zdCBkbmlSZWdleCA9IC9eXFxkezh9JC87XG4gIGNvbnN0IGN1aXRSZWdleCA9IC9eXFxkezExfSQvO1xuXG4gIGlmIChkbmlSZWdleC50ZXN0KGNsZWFuRE5JKSkge1xuICAgIC8vIFZhbGlkYXIgRE5JICg4IGTDrWdpdG9zKVxuICAgIHJldHVybiBjbGVhbkROSS5sZW5ndGggPT09IDggJiYgcGFyc2VJbnQoY2xlYW5ETkkpID4gMDtcbiAgfSBlbHNlIGlmIChjdWl0UmVnZXgudGVzdChjbGVhbkROSSkpIHtcbiAgICAvLyBWYWxpZGFyIENVSVQgKDExIGTDrWdpdG9zKSAtIHZhbGlkYWNpw7NuIGLDoXNpY2FcbiAgICByZXR1cm4gY2xlYW5ETkkubGVuZ3RoID09PSAxMSAmJiBwYXJzZUludChjbGVhbkROSSkgPiAwO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBDw7NkaWdvIHBvc3RhbCBhcmdlbnRpbm86IDQgZMOtZ2l0b3NcbiAgY29uc3QgcG9zdGFsQ29kZVJlZ2V4ID0gL15cXGR7NH0kLztcbiAgcmV0dXJuIHBvc3RhbENvZGVSZWdleC50ZXN0KHBvc3RhbENvZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUcmFja2luZ051bWJlcih0cmFja2luZ051bWJlcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEZvcm1hdG8gZ2VuZXJhbDogYWwgbWVub3MgNiBjYXJhY3RlcmVzIGFsZmFudW3DqXJpY29zXG4gIGNvbnN0IHRyYWNraW5nUmVnZXggPSAvXltBLVowLTldezYsfSQvaTtcbiAgcmV0dXJuIHRyYWNraW5nUmVnZXgudGVzdCh0cmFja2luZ051bWJlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvb3JkaW5hdGVzKGxhdDogbnVtYmVyLCBsbmc6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGxhdCA+PSAtOTAgJiYgbGF0IDw9IDkwICYmXG4gICAgbG5nID49IC0xODAgJiYgbG5nIDw9IDE4MFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVXZWlnaHQod2VpZ2h0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIHdlaWdodCA+IDAgJiYgd2VpZ2h0IDw9IDEwMDA7IC8vIE3DoXhpbW8gMTAwMGtnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURpbWVuc2lvbnMoZGltZW5zaW9uczoge1xuICBsZW5ndGg6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59KTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbGVuZ3RoLCB3aWR0aCwgaGVpZ2h0IH0gPSBkaW1lbnNpb25zO1xuICByZXR1cm4gKFxuICAgIGxlbmd0aCA+IDAgJiYgbGVuZ3RoIDw9IDIwMCAmJiAvLyBNw6F4aW1vIDIwMGNtXG4gICAgd2lkdGggPiAwICYmIHdpZHRoIDw9IDIwMCAmJlxuICAgIGhlaWdodCA+IDAgJiYgaGVpZ2h0IDw9IDIwMFxuICApO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0lPTkVTIERFIE5FR09DSU9cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURlbGl2ZXJ5RGF0ZShkYXRlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZGVsaXZlcnlEYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbWF4RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIG1heERhdGUuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyAzMCk7IC8vIE3DoXhpbW8gMzAgZMOtYXNcbiAgXG4gIHJldHVybiBkZWxpdmVyeURhdGUgPj0gdG9kYXkgJiYgZGVsaXZlcnlEYXRlIDw9IG1heERhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNoaXBwaW5nQ29zdChjb3N0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvc3QgPj0gMCAmJiBjb3N0IDw9IDEwMDAwMDsgLy8gTcOheGltbyAkMTAwLDAwMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQYWNrYWdlVmFsdWUodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAxMDAwMDAwOyAvLyBNw6F4aW1vICQxLDAwMCwwMDBcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNBTklUSVpBQ0nDk04gREUgREFUT1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVN0cmluZyhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGlucHV0LnRyaW0oKS5yZXBsYWNlKC9bPD5dL2csICcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUGhvbmVOdW1iZXIocGhvbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwaG9uZS5yZXBsYWNlKC9cXEQvZywgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwb3N0YWxDb2RlLnJlcGxhY2UoL1xcRC9nLCAnJykuc3Vic3RyaW5nKDAsIDQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVUcmFja2luZ051bWJlcih0cmFja2luZ051bWJlcjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRyYWNraW5nTnVtYmVyLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvW15BLVowLTldL2csICcnKTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIERFIFZBTElEQUNJw5NOXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQWRkcmVzcyhhZGRyZXNzOiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdHJ5IHtcbiAgICBhZGRyZXNzU2NoZW1hLnBhcnNlKGFkZHJlc3MpO1xuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIGVycm9yczogW10gfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3JzOiBlcnJvci5lcnJvcnMubWFwKGVyciA9PiBlcnIubWVzc2FnZSlcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcnM6IFsnRXJyb3IgZGUgdmFsaWRhY2nDs24gZGVzY29ub2NpZG8nXSB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNoaXBtZW50KHNoaXBtZW50OiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdHJ5IHtcbiAgICBzaGlwbWVudFNjaGVtYS5wYXJzZShzaGlwbWVudCk7XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcnM6IGVycm9yLmVycm9ycy5tYXAoZXJyID0+IGVyci5tZXNzYWdlKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yczogWydFcnJvciBkZSB2YWxpZGFjacOzbiBkZXNjb25vY2lkbyddIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJhZGRyZXNzU2NoZW1hIiwic2FuaXRpemVQaG9uZU51bWJlciIsInNhbml0aXplUG9zdGFsQ29kZSIsInNhbml0aXplU3RyaW5nIiwic2FuaXRpemVUcmFja2luZ051bWJlciIsInNoaXBtZW50U2NoZW1hIiwidmFsaWRhdGVBZGRyZXNzIiwidmFsaWRhdGVDb29yZGluYXRlcyIsInZhbGlkYXRlRE5JIiwidmFsaWRhdGVEZWxpdmVyeURhdGUiLCJ2YWxpZGF0ZURpbWVuc2lvbnMiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQYWNrYWdlVmFsdWUiLCJ2YWxpZGF0ZVBob25lTnVtYmVyIiwidmFsaWRhdGVQb3N0YWxDb2RlIiwidmFsaWRhdGVTaGlwbWVudCIsInZhbGlkYXRlU2hpcHBpbmdDb3N0IiwidmFsaWRhdGVUcmFja2luZ051bWJlciIsInZhbGlkYXRlV2VpZ2h0IiwieiIsIm9iamVjdCIsInN0cmVldCIsInN0cmluZyIsIm1pbiIsIm51bWJlciIsImFwYXJ0bWVudCIsIm9wdGlvbmFsIiwibmVpZ2hib3Job29kIiwiY2l0eSIsInN0YXRlIiwicG9zdGFsX2NvZGUiLCJjb3VudHJ5IiwiZGVmYXVsdCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwicmVmZXJlbmNlIiwidHJhY2tpbmdfbnVtYmVyIiwiY291cmllcl9pZCIsInNlcnZpY2VfdHlwZSIsImVudW0iLCJvcmlnaW5fYWRkcmVzcyIsImRlc3RpbmF0aW9uX2FkZHJlc3MiLCJwYWNrYWdlX2RldGFpbHMiLCJ3ZWlnaHQiLCJkaW1lbnNpb25zIiwibGVuZ3RoIiwid2lkdGgiLCJoZWlnaHQiLCJkZWNsYXJlZF92YWx1ZSIsImRlc2NyaXB0aW9uIiwiZXN0aW1hdGVkX2RlbGl2ZXJ5Iiwic3BlY2lhbF9pbnN0cnVjdGlvbnMiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwicGhvbmUiLCJjbGVhblBob25lIiwicmVwbGFjZSIsInBob25lUmVnZXgiLCJkbmkiLCJjbGVhbkROSSIsImRuaVJlZ2V4IiwiY3VpdFJlZ2V4IiwicGFyc2VJbnQiLCJwb3N0YWxDb2RlIiwicG9zdGFsQ29kZVJlZ2V4IiwidHJhY2tpbmdOdW1iZXIiLCJ0cmFja2luZ1JlZ2V4IiwibGF0IiwibG5nIiwiZGF0ZSIsImRlbGl2ZXJ5RGF0ZSIsIkRhdGUiLCJ0b2RheSIsIm1heERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNvc3QiLCJ2YWx1ZSIsImlucHV0IiwidHJpbSIsInN1YnN0cmluZyIsInRvVXBwZXJDYXNlIiwiYWRkcmVzcyIsInBhcnNlIiwiaXNWYWxpZCIsImVycm9ycyIsImVycm9yIiwiWm9kRXJyb3IiLCJtYXAiLCJlcnIiLCJtZXNzYWdlIiwic2hpcG1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLHdEQUF3RDtBQUN4RCxrQ0FBa0M7QUFDbEMseURBQXlEO0FBQ3pELHVDQUF1QztBQUN2Qyx3REFBd0Q7Ozs7Ozs7Ozs7OztRQVEzQ0E7ZUFBQUE7O1FBK0lHQztlQUFBQTs7UUFJQUM7ZUFBQUE7O1FBUkFDO2VBQUFBOztRQVlBQztlQUFBQTs7UUF6SUhDO2VBQUFBOztRQXNKR0M7ZUFBQUE7O1FBMUVBQztlQUFBQTs7UUFqQ0FDO2VBQUFBOztRQTZEQUM7ZUFBQUE7O1FBakJBQztlQUFBQTs7UUEvREFDO2VBQUFBOztRQTZGQUM7ZUFBQUE7O1FBeEZBQztlQUFBQTs7UUFtQ0FDO2VBQUFBOztRQXFHQUM7ZUFBQUE7O1FBcERBQztlQUFBQTs7UUEzQ0FDO2VBQUFBOztRQWFBQztlQUFBQTs7O3FCQXZHRTtBQU1YLE1BQU1sQixnQkFBZ0JtQixNQUFDLENBQUNDLE1BQU0sQ0FBQztJQUNwQ0MsUUFBUUYsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQzFCQyxRQUFRTCxNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDMUJFLFdBQVdOLE1BQUMsQ0FBQ0csTUFBTSxHQUFHSSxRQUFRO0lBQzlCQyxjQUFjUixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDaENLLE1BQU1ULE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUN4Qk0sT0FBT1YsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ3pCTyxhQUFhWCxNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDL0JRLFNBQVNaLE1BQUMsQ0FBQ0csTUFBTSxHQUFHVSxPQUFPLENBQUM7SUFDNUJDLFVBQVVkLE1BQUMs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