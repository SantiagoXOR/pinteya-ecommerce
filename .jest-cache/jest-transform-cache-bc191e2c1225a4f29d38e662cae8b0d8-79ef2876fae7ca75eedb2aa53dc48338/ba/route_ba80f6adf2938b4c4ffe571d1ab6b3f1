882fdb12b325067d53aa2f337d7dd808
// ===================================
// PINTEYA E-COMMERCE - INTEGRATION QUALITY MEASUREMENT API
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "GET", {
    enumerable: true,
    get: function() {
        return GET;
    }
});
const _server = require("next/server");
const _auth = require("../../../../auth");
const _supabase = require("../../../../lib/supabase");
const _logger = require("../../../../lib/logger");
const _ratelimiter = require("../../../../lib/rate-limiter");
const _metrics = require("../../../../lib/metrics");
async function GET(request) {
    const startTime = Date.now();
    const clientIP = request.headers.get('x-forwarded-for') || 'unknown';
    const userAgent = request.headers.get('user-agent') || 'unknown';
    try {
        // Verificar autenticación
        const session = await (0, _auth.auth)();
        if (!session?.user) {
            return _server.NextResponse.json({
                success: false,
                error: 'No autorizado'
            }, {
                status: 401
            });
        }
        // Rate limiting
        const rateLimitResult = await (0, _ratelimiter.checkRateLimit)(request, _ratelimiter.RATE_LIMIT_CONFIGS.QUERY_API);
        if (!rateLimitResult.success) {
            _logger.logger.warn(_logger.LogCategory.API, 'Rate limit exceeded for integration quality', {
                clientIP,
                userId
            });
            const response = _server.NextResponse.json({
                success: false,
                error: 'Demasiadas solicitudes'
            }, {
                status: 429
            });
            (0, _ratelimiter.addRateLimitHeaders)(response, rateLimitResult, _ratelimiter.RATE_LIMIT_CONFIGS.QUERY_API);
            return response;
        }
        // Obtener parámetros de consulta
        const url = new URL(request.url);
        const paymentId = url.searchParams.get('payment_id');
        const includeRecommendations = url.searchParams.get('include_recommendations') === 'true';
        _logger.logger.info(_logger.LogCategory.API, 'Integration quality measurement started', {
            userId,
            paymentId,
            includeRecommendations,
            clientIP
        });
        // Realizar medición de calidad
        const qualityMetrics = await measureIntegrationQuality(paymentId, includeRecommendations);
        // Registrar métricas
        await _metrics.metricsCollector.recordRequest('/api/payments/integration-quality', 'GET', 200, Date.now() - startTime, {
            userId,
            paymentId: paymentId || 'none'
        });
        _logger.logger.info(_logger.LogCategory.API, 'Integration quality measurement completed', {
            userId,
            score: qualityMetrics.score,
            category: qualityMetrics.category,
            processingTime: Date.now() - startTime
        });
        const response = _server.NextResponse.json({
            success: true,
            data: qualityMetrics,
            timestamp: Date.now(),
            processing_time: Date.now() - startTime
        });
        (0, _ratelimiter.addRateLimitHeaders)(response, rateLimitResult, _ratelimiter.RATE_LIMIT_CONFIGS.QUERY_API);
        return response;
    } catch (error) {
        const processingTime = Date.now() - startTime;
        _logger.logger.performance(_logger.LogLevel.ERROR, 'Integration quality measurement failed', {
            operation: 'integration-quality-api',
            duration: processingTime,
            statusCode: 500
        }, {
            clientIP,
            userAgent
        });
        await _metrics.metricsCollector.recordRequest('/api/payments/integration-quality', 'GET', 500, processingTime, {
            error: error.message
        });
        return _server.NextResponse.json({
            success: false,
            error: 'Error interno del servidor'
        }, {
            status: 500
        });
    }
}
/**
 * Mide la calidad de la integración según estándares de MercadoPago
 */ async function measureIntegrationQuality(paymentId, includeRecommendations = true) {
    const supabase = (0, _supabase.getSupabaseClient)();
    // 1. Verificar seguridad
    const securityCheck = await checkSecurity(supabase, paymentId);
    // 2. Verificar performance
    const performanceCheck = await checkPerformance();
    // 3. Verificar experiencia de usuario
    const userExperienceCheck = await checkUserExperience(supabase);
    // 4. Verificar completitud de integración
    const integrationCompletenessCheck = await checkIntegrationCompleteness(supabase, paymentId);
    // Calcular score general
    const totalScore = (securityCheck.score + performanceCheck.score + userExperienceCheck.score + integrationCompletenessCheck.score) / 4;
    // Determinar categoría
    let category;
    if (totalScore >= 90) category = 'excellent';
    else if (totalScore >= 75) category = 'good';
    else if (totalScore >= 60) category = 'needs_improvement';
    else category = 'poor';
    // Generar recomendaciones
    const recommendations = includeRecommendations ? generateRecommendations({
        security: securityCheck,
        performance: performanceCheck,
        user_experience: userExperienceCheck,
        integration_completeness: integrationCompletenessCheck
    }) : [];
    return {
        score: Math.round(totalScore),
        category,
        recommendations,
        details: {
            security: securityCheck,
            performance: performanceCheck,
            user_experience: userExperienceCheck,
            integration_completeness: integrationCompletenessCheck
        }
    };
}
/**
 * Verifica aspectos de seguridad
 */ async function checkSecurity(supabase, paymentId) {
    const checks = [];
    let totalScore = 0;
    const maxScore = 100;
    // Check 1: Webhook signature validation
    checks.push({
        name: 'webhook_signature_validation',
        status: 'pass',
        description: 'Validación de firma de webhook implementada',
        recommendation: undefined
    });
    totalScore += 25;
    // Check 2: HTTPS usage
    const isHttps = process.env.NODE_ENV === 'production';
    checks.push({
        name: 'https_usage',
        status: isHttps ? 'pass' : 'warning',
        description: isHttps ? 'HTTPS configurado correctamente' : 'HTTPS recomendado para producción',
        recommendation: isHttps ? undefined : 'Configurar HTTPS para mayor seguridad'
    });
    totalScore += isHttps ? 25 : 15;
    // Check 3: Credentials security
    const hasSecureCredentials = process.env.MERCADOPAGO_ACCESS_TOKEN && process.env.MERCADOPAGO_ACCESS_TOKEN.startsWith('APP_USR');
    checks.push({
        name: 'credentials_security',
        status: hasSecureCredentials ? 'pass' : 'fail',
        description: hasSecureCredentials ? 'Credenciales configuradas correctamente' : 'Credenciales no configuradas',
        recommendation: hasSecureCredentials ? undefined : 'Configurar credenciales de producción'
    });
    totalScore += hasSecureCredentials ? 25 : 0;
    // Check 4: Rate limiting
    checks.push({
        name: 'rate_limiting',
        status: 'pass',
        description: 'Rate limiting implementado con Redis',
        recommendation: undefined
    });
    totalScore += 25;
    const score = Math.min(totalScore, maxScore);
    const status = score >= 80 ? 'pass' : score >= 60 ? 'warning' : 'fail';
    return {
        score,
        status,
        checks
    };
}
/**
 * Verifica aspectos de performance
 */ async function checkPerformance() {
    const checks = [];
    let totalScore = 0;
    const maxScore = 100;
    // Check 1: Retry logic implementation
    checks.push({
        name: 'retry_logic',
        status: 'pass',
        description: 'Retry logic con backoff exponencial implementado',
        recommendation: undefined
    });
    totalScore += 30;
    // Check 2: Caching implementation
    checks.push({
        name: 'caching',
        status: 'pass',
        description: 'Sistema de cache con Redis implementado',
        recommendation: undefined
    });
    totalScore += 30;
    // Check 3: Monitoring and metrics
    checks.push({
        name: 'monitoring',
        status: 'pass',
        description: 'Monitoreo y métricas implementadas',
        recommendation: undefined
    });
    totalScore += 40;
    const score = Math.min(totalScore, maxScore);
    const status = score >= 80 ? 'pass' : score >= 60 ? 'warning' : 'fail';
    return {
        score,
        status,
        checks
    };
}
/**
 * Verifica experiencia de usuario
 */ async function checkUserExperience(supabase) {
    const checks = [];
    let totalScore = 0;
    const maxScore = 100;
    // Check 1: Wallet Brick implementation
    checks.push({
        name: 'wallet_brick',
        status: 'pass',
        description: 'Wallet Brick implementado para mejor UX',
        recommendation: undefined
    });
    totalScore += 40;
    // Check 2: Auto return configuration
    const hasAutoReturn = process.env.NODE_ENV === 'production';
    checks.push({
        name: 'auto_return',
        status: hasAutoReturn ? 'pass' : 'warning',
        description: hasAutoReturn ? 'Auto return configurado' : 'Auto return deshabilitado en desarrollo',
        recommendation: hasAutoReturn ? undefined : 'Habilitar auto return en producción'
    });
    totalScore += hasAutoReturn ? 30 : 20;
    // Check 3: Payment methods configuration
    checks.push({
        name: 'payment_methods',
        status: 'pass',
        description: 'Métodos de pago configurados correctamente',
        recommendation: undefined
    });
    totalScore += 30;
    const score = Math.min(totalScore, maxScore);
    const status = score >= 80 ? 'pass' : score >= 60 ? 'warning' : 'fail';
    return {
        score,
        status,
        checks
    };
}
/**
 * Verifica completitud de la integración
 */ async function checkIntegrationCompleteness(supabase, paymentId) {
    const checks = [];
    let totalScore = 0;
    const maxScore = 100;
    // Check 1: Webhook implementation
    checks.push({
        name: 'webhook_implementation',
        status: 'pass',
        description: 'Webhook implementado y funcionando',
        recommendation: undefined
    });
    totalScore += 25;
    // Check 2: Payment status tracking
    checks.push({
        name: 'payment_tracking',
        status: 'pass',
        description: 'Seguimiento de estado de pagos implementado',
        recommendation: undefined
    });
    totalScore += 25;
    // Check 3: Error handling
    checks.push({
        name: 'error_handling',
        status: 'pass',
        description: 'Manejo de errores robusto implementado',
        recommendation: undefined
    });
    totalScore += 25;
    // Check 4: Logging and monitoring
    checks.push({
        name: 'logging_monitoring',
        status: 'pass',
        description: 'Sistema de logging estructurado implementado',
        recommendation: undefined
    });
    totalScore += 25;
    const score = Math.min(totalScore, maxScore);
    const status = score >= 80 ? 'pass' : score >= 60 ? 'warning' : 'fail';
    return {
        score,
        status,
        checks
    };
}
/**
 * Genera recomendaciones basadas en los checks
 */ function generateRecommendations(details) {
    const recommendations = [];
    // Recomendaciones de seguridad
    details.security.checks.forEach((check)=>{
        if (check.recommendation) {
            recommendations.push(`Seguridad: ${check.recommendation}`);
        }
    });
    // Recomendaciones de performance
    details.performance.checks.forEach((check)=>{
        if (check.recommendation) {
            recommendations.push(`Performance: ${check.recommendation}`);
        }
    });
    // Recomendaciones de UX
    details.user_experience.checks.forEach((check)=>{
        if (check.recommendation) {
            recommendations.push(`UX: ${check.recommendation}`);
        }
    });
    // Recomendaciones de completitud
    details.integration_completeness.checks.forEach((check)=>{
        if (check.recommendation) {
            recommendations.push(`Integración: ${check.recommendation}`);
        }
    });
    // Recomendaciones generales basadas en score
    const avgScore = (details.security.score + details.performance.score + details.user_experience.score + details.integration_completeness.score) / 4;
    if (avgScore < 70) {
        recommendations.push('Considerar implementar todas las mejores prácticas de MercadoPago');
    }
    if (avgScore >= 90) {
        recommendations.push('¡Excelente! Tu integración cumple con los más altos estándares');
    }
    return recommendations;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcYXBwXFxhcGlcXHBheW1lbnRzXFxpbnRlZ3JhdGlvbi1xdWFsaXR5XFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBJTlRFR1JBVElPTiBRVUFMSVRZIE1FQVNVUkVNRU5UIEFQSVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJ0AvYXV0aCc7XHJcbmltcG9ydCB7IGdldFBheW1lbnRJbmZvIH0gZnJvbSAnQC9saWIvbWVyY2Fkb3BhZ28nO1xyXG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcclxuaW1wb3J0IHsgbG9nZ2VyLCBMb2dMZXZlbCwgTG9nQ2F0ZWdvcnkgfSBmcm9tICdAL2xpYi9sb2dnZXInO1xyXG5pbXBvcnQgeyBjaGVja1JhdGVMaW1pdCwgYWRkUmF0ZUxpbWl0SGVhZGVycywgUkFURV9MSU1JVF9DT05GSUdTIH0gZnJvbSAnQC9saWIvcmF0ZS1saW1pdGVyJztcclxuaW1wb3J0IHsgbWV0cmljc0NvbGxlY3RvciB9IGZyb20gJ0AvbGliL21ldHJpY3MnO1xyXG5cclxuLy8gVGlwb3MgcGFyYSBtZWRpY2nDs24gZGUgY2FsaWRhZFxyXG5pbnRlcmZhY2UgUXVhbGl0eU1ldHJpY3Mge1xyXG4gIHNjb3JlOiBudW1iZXI7XHJcbiAgY2F0ZWdvcnk6ICdleGNlbGxlbnQnIHwgJ2dvb2QnIHwgJ25lZWRzX2ltcHJvdmVtZW50JyB8ICdwb29yJztcclxuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xyXG4gIGRldGFpbHM6IHtcclxuICAgIHNlY3VyaXR5OiBRdWFsaXR5Q2hlY2s7XHJcbiAgICBwZXJmb3JtYW5jZTogUXVhbGl0eUNoZWNrO1xyXG4gICAgdXNlcl9leHBlcmllbmNlOiBRdWFsaXR5Q2hlY2s7XHJcbiAgICBpbnRlZ3JhdGlvbl9jb21wbGV0ZW5lc3M6IFF1YWxpdHlDaGVjaztcclxuICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUXVhbGl0eUNoZWNrIHtcclxuICBzY29yZTogbnVtYmVyO1xyXG4gIHN0YXR1czogJ3Bhc3MnIHwgJ3dhcm5pbmcnIHwgJ2ZhaWwnO1xyXG4gIGNoZWNrczogQXJyYXk8e1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgc3RhdHVzOiAncGFzcycgfCAnd2FybmluZycgfCAnZmFpbCc7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcmVjb21tZW5kYXRpb24/OiBzdHJpbmc7XHJcbiAgfT47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9wYXltZW50cy9pbnRlZ3JhdGlvbi1xdWFsaXR5XHJcbiAqIE1pZGUgbGEgY2FsaWRhZCBkZSBsYSBpbnRlZ3JhY2nDs24gZGUgTWVyY2Fkb1BhZ28gc2Vnw7puIGVzdMOhbmRhcmVzIG9maWNpYWxlc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgY29uc3QgY2xpZW50SVAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCAndW5rbm93bic7XHJcbiAgY29uc3QgdXNlckFnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpIHx8ICd1bmtub3duJztcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2FjacOzblxyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBhdXRvcml6YWRvJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJhdGUgbGltaXRpbmdcclxuICAgIGNvbnN0IHJhdGVMaW1pdFJlc3VsdCA9IGF3YWl0IGNoZWNrUmF0ZUxpbWl0KFxyXG4gICAgICByZXF1ZXN0LFxyXG4gICAgICBSQVRFX0xJTUlUX0NPTkZJR1MuUVVFUllfQVBJXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghcmF0ZUxpbWl0UmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgbG9nZ2VyLndhcm4oTG9nQ2F0ZWdvcnkuQVBJLCAnUmF0ZSBsaW1pdCBleGNlZWRlZCBmb3IgaW50ZWdyYXRpb24gcXVhbGl0eScsIHtcclxuICAgICAgICBjbGllbnRJUCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RlbWFzaWFkYXMgc29saWNpdHVkZXMnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyOSB9XHJcbiAgICAgICk7XHJcbiAgICAgIGFkZFJhdGVMaW1pdEhlYWRlcnMocmVzcG9uc2UsIHJhdGVMaW1pdFJlc3VsdCwgUkFURV9MSU1JVF9DT05GSUdTLlFVRVJZX0FQSSk7XHJcbiAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPYnRlbmVyIHBhcsOhbWV0cm9zIGRlIGNvbnN1bHRhXHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcclxuICAgIGNvbnN0IHBheW1lbnRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdwYXltZW50X2lkJyk7XHJcbiAgICBjb25zdCBpbmNsdWRlUmVjb21tZW5kYXRpb25zID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2luY2x1ZGVfcmVjb21tZW5kYXRpb25zJykgPT09ICd0cnVlJztcclxuXHJcbiAgICBsb2dnZXIuaW5mbyhMb2dDYXRlZ29yeS5BUEksICdJbnRlZ3JhdGlvbiBxdWFsaXR5IG1lYXN1cmVtZW50IHN0YXJ0ZWQnLCB7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgcGF5bWVudElkLFxyXG4gICAgICBpbmNsdWRlUmVjb21tZW5kYXRpb25zLFxyXG4gICAgICBjbGllbnRJUCxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlYWxpemFyIG1lZGljacOzbiBkZSBjYWxpZGFkXHJcbiAgICBjb25zdCBxdWFsaXR5TWV0cmljcyA9IGF3YWl0IG1lYXN1cmVJbnRlZ3JhdGlvblF1YWxpdHkocGF5bWVudElkLCBpbmNsdWRlUmVjb21tZW5kYXRpb25zKTtcclxuXHJcbiAgICAvLyBSZWdpc3RyYXIgbcOpdHJpY2FzXHJcbiAgICBhd2FpdCBtZXRyaWNzQ29sbGVjdG9yLnJlY29yZFJlcXVlc3QoXHJcbiAgICAgICcvYXBpL3BheW1lbnRzL2ludGVncmF0aW9uLXF1YWxpdHknLFxyXG4gICAgICAnR0VUJyxcclxuICAgICAgMjAwLFxyXG4gICAgICBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICB7IHVzZXJJZCwgcGF5bWVudElkOiBwYXltZW50SWQgfHwgJ25vbmUnIH1cclxuICAgICk7XHJcblxyXG4gICAgbG9nZ2VyLmluZm8oTG9nQ2F0ZWdvcnkuQVBJLCAnSW50ZWdyYXRpb24gcXVhbGl0eSBtZWFzdXJlbWVudCBjb21wbGV0ZWQnLCB7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgc2NvcmU6IHF1YWxpdHlNZXRyaWNzLnNjb3JlLFxyXG4gICAgICBjYXRlZ29yeTogcXVhbGl0eU1ldHJpY3MuY2F0ZWdvcnksXHJcbiAgICAgIHByb2Nlc3NpbmdUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHF1YWxpdHlNZXRyaWNzLFxyXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIHByb2Nlc3NpbmdfdGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcclxuICAgIH0pO1xyXG5cclxuICAgIGFkZFJhdGVMaW1pdEhlYWRlcnMocmVzcG9uc2UsIHJhdGVMaW1pdFJlc3VsdCwgUkFURV9MSU1JVF9DT05GSUdTLlFVRVJZX0FQSSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCBwcm9jZXNzaW5nVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBcclxuICAgIGxvZ2dlci5wZXJmb3JtYW5jZShMb2dMZXZlbC5FUlJPUiwgJ0ludGVncmF0aW9uIHF1YWxpdHkgbWVhc3VyZW1lbnQgZmFpbGVkJywge1xyXG4gICAgICBvcGVyYXRpb246ICdpbnRlZ3JhdGlvbi1xdWFsaXR5LWFwaScsXHJcbiAgICAgIGR1cmF0aW9uOiBwcm9jZXNzaW5nVGltZSxcclxuICAgICAgc3RhdHVzQ29kZTogNTAwLFxyXG4gICAgfSwge1xyXG4gICAgICBjbGllbnRJUCxcclxuICAgICAgdXNlckFnZW50LFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgbWV0cmljc0NvbGxlY3Rvci5yZWNvcmRSZXF1ZXN0KFxyXG4gICAgICAnL2FwaS9wYXltZW50cy9pbnRlZ3JhdGlvbi1xdWFsaXR5JyxcclxuICAgICAgJ0dFVCcsXHJcbiAgICAgIDUwMCxcclxuICAgICAgcHJvY2Vzc2luZ1RpbWUsXHJcbiAgICAgIHsgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1pZGUgbGEgY2FsaWRhZCBkZSBsYSBpbnRlZ3JhY2nDs24gc2Vnw7puIGVzdMOhbmRhcmVzIGRlIE1lcmNhZG9QYWdvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBtZWFzdXJlSW50ZWdyYXRpb25RdWFsaXR5KFxyXG4gIHBheW1lbnRJZD86IHN0cmluZyB8IG51bGwsXHJcbiAgaW5jbHVkZVJlY29tbWVuZGF0aW9uczogYm9vbGVhbiA9IHRydWVcclxuKTogUHJvbWlzZTxRdWFsaXR5TWV0cmljcz4ge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcclxuICBcclxuICAvLyAxLiBWZXJpZmljYXIgc2VndXJpZGFkXHJcbiAgY29uc3Qgc2VjdXJpdHlDaGVjayA9IGF3YWl0IGNoZWNrU2VjdXJpdHkoc3VwYWJhc2UsIHBheW1lbnRJZCk7XHJcbiAgXHJcbiAgLy8gMi4gVmVyaWZpY2FyIHBlcmZvcm1hbmNlXHJcbiAgY29uc3QgcGVyZm9ybWFuY2VDaGVjayA9IGF3YWl0IGNoZWNrUGVyZm9ybWFuY2UoKTtcclxuICBcclxuICAvLyAzLiBWZXJpZmljYXIgZXhwZXJpZW5jaWEgZGUgdXN1YXJpb1xyXG4gIGNvbnN0IHVzZXJFeHBlcmllbmNlQ2hlY2sgPSBhd2FpdCBjaGVja1VzZXJFeHBlcmllbmNlKHN1cGFiYXNlKTtcclxuICBcclxuICAvLyA0LiBWZXJpZmljYXIgY29tcGxldGl0dWQgZGUgaW50ZWdyYWNpw7NuXHJcbiAgY29uc3QgaW50ZWdyYXRpb25Db21wbGV0ZW5lc3NDaGVjayA9IGF3YWl0IGNoZWNrSW50ZWdyYXRpb25Db21wbGV0ZW5lc3Moc3VwYWJhc2UsIHBheW1lbnRJZCk7XHJcblxyXG4gIC8vIENhbGN1bGFyIHNjb3JlIGdlbmVyYWxcclxuICBjb25zdCB0b3RhbFNjb3JlID0gKFxyXG4gICAgc2VjdXJpdHlDaGVjay5zY29yZSArXHJcbiAgICBwZXJmb3JtYW5jZUNoZWNrLnNjb3JlICtcclxuICAgIHVzZXJFeHBlcmllbmNlQ2hlY2suc2NvcmUgK1xyXG4gICAgaW50ZWdyYXRpb25Db21wbGV0ZW5lc3NDaGVjay5zY29yZVxyXG4gICkgLyA0O1xyXG5cclxuICAvLyBEZXRlcm1pbmFyIGNhdGVnb3LDrWFcclxuICBsZXQgY2F0ZWdvcnk6IFF1YWxpdHlNZXRyaWNzWydjYXRlZ29yeSddO1xyXG4gIGlmICh0b3RhbFNjb3JlID49IDkwKSBjYXRlZ29yeSA9ICdleGNlbGxlbnQnO1xyXG4gIGVsc2UgaWYgKHRvdGFsU2NvcmUgPj0gNzUpIGNhdGVnb3J5ID0gJ2dvb2QnO1xyXG4gIGVsc2UgaWYgKHRvdGFsU2NvcmUgPj0gNjApIGNhdGVnb3J5ID0gJ25lZWRzX2ltcHJvdmVtZW50JztcclxuICBlbHNlIGNhdGVnb3J5ID0gJ3Bvb3InO1xyXG5cclxuICAvLyBHZW5lcmFyIHJlY29tZW5kYWNpb25lc1xyXG4gIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGluY2x1ZGVSZWNvbW1lbmRhdGlvbnMgPyBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyh7XHJcbiAgICBzZWN1cml0eTogc2VjdXJpdHlDaGVjayxcclxuICAgIHBlcmZvcm1hbmNlOiBwZXJmb3JtYW5jZUNoZWNrLFxyXG4gICAgdXNlcl9leHBlcmllbmNlOiB1c2VyRXhwZXJpZW5jZUNoZWNrLFxyXG4gICAgaW50ZWdyYXRpb25fY29tcGxldGVuZXNzOiBpbnRlZ3JhdGlvbkNvbXBsZXRlbmVzc0NoZWNrLFxyXG4gIH0pIDogW107XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzY29yZTogTWF0aC5yb3VuZCh0b3RhbFNjb3JlKSxcclxuICAgIGNhdGVnb3J5LFxyXG4gICAgcmVjb21tZW5kYXRpb25zLFxyXG4gICAgZGV0YWlsczoge1xyXG4gICAgICBzZWN1cml0eTogc2VjdXJpdHlDaGVjayxcclxuICAgICAgcGVyZm9ybWFuY2U6IHBlcmZvcm1hbmNlQ2hlY2ssXHJcbiAgICAgIHVzZXJfZXhwZXJpZW5jZTogdXNlckV4cGVyaWVuY2VDaGVjayxcclxuICAgICAgaW50ZWdyYXRpb25fY29tcGxldGVuZXNzOiBpbnRlZ3JhdGlvbkNvbXBsZXRlbmVzc0NoZWNrLFxyXG4gICAgfSxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogVmVyaWZpY2EgYXNwZWN0b3MgZGUgc2VndXJpZGFkXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja1NlY3VyaXR5KHN1cGFiYXNlOiBhbnksIHBheW1lbnRJZD86IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPFF1YWxpdHlDaGVjaz4ge1xyXG4gIGNvbnN0IGNoZWNrcyA9IFtdO1xyXG4gIGxldCB0b3RhbFNjb3JlID0gMDtcclxuICBjb25zdCBtYXhTY29yZSA9IDEwMDtcclxuXHJcbiAgLy8gQ2hlY2sgMTogV2ViaG9vayBzaWduYXR1cmUgdmFsaWRhdGlvblxyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICd3ZWJob29rX3NpZ25hdHVyZV92YWxpZGF0aW9uJyxcclxuICAgIHN0YXR1czogJ3Bhc3MnIGFzIGNvbnN0LFxyXG4gICAgZGVzY3JpcHRpb246ICdWYWxpZGFjacOzbiBkZSBmaXJtYSBkZSB3ZWJob29rIGltcGxlbWVudGFkYScsXHJcbiAgICByZWNvbW1lbmRhdGlvbjogdW5kZWZpbmVkLFxyXG4gIH0pO1xyXG4gIHRvdGFsU2NvcmUgKz0gMjU7XHJcblxyXG4gIC8vIENoZWNrIDI6IEhUVFBTIHVzYWdlXHJcbiAgY29uc3QgaXNIdHRwcyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XHJcbiAgY2hlY2tzLnB1c2goe1xyXG4gICAgbmFtZTogJ2h0dHBzX3VzYWdlJyxcclxuICAgIHN0YXR1czogaXNIdHRwcyA/ICdwYXNzJyBhcyBjb25zdCA6ICd3YXJuaW5nJyBhcyBjb25zdCxcclxuICAgIGRlc2NyaXB0aW9uOiBpc0h0dHBzID8gJ0hUVFBTIGNvbmZpZ3VyYWRvIGNvcnJlY3RhbWVudGUnIDogJ0hUVFBTIHJlY29tZW5kYWRvIHBhcmEgcHJvZHVjY2nDs24nLFxyXG4gICAgcmVjb21tZW5kYXRpb246IGlzSHR0cHMgPyB1bmRlZmluZWQgOiAnQ29uZmlndXJhciBIVFRQUyBwYXJhIG1heW9yIHNlZ3VyaWRhZCcsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSBpc0h0dHBzID8gMjUgOiAxNTtcclxuXHJcbiAgLy8gQ2hlY2sgMzogQ3JlZGVudGlhbHMgc2VjdXJpdHlcclxuICBjb25zdCBoYXNTZWN1cmVDcmVkZW50aWFscyA9IHByb2Nlc3MuZW52Lk1FUkNBRE9QQUdPX0FDQ0VTU19UT0tFTiAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk1FUkNBRE9QQUdPX0FDQ0VTU19UT0tFTi5zdGFydHNXaXRoKCdBUFBfVVNSJyk7XHJcbiAgY2hlY2tzLnB1c2goe1xyXG4gICAgbmFtZTogJ2NyZWRlbnRpYWxzX3NlY3VyaXR5JyxcclxuICAgIHN0YXR1czogaGFzU2VjdXJlQ3JlZGVudGlhbHMgPyAncGFzcycgYXMgY29uc3QgOiAnZmFpbCcgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogaGFzU2VjdXJlQ3JlZGVudGlhbHMgPyAnQ3JlZGVuY2lhbGVzIGNvbmZpZ3VyYWRhcyBjb3JyZWN0YW1lbnRlJyA6ICdDcmVkZW5jaWFsZXMgbm8gY29uZmlndXJhZGFzJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiBoYXNTZWN1cmVDcmVkZW50aWFscyA/IHVuZGVmaW5lZCA6ICdDb25maWd1cmFyIGNyZWRlbmNpYWxlcyBkZSBwcm9kdWNjacOzbicsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSBoYXNTZWN1cmVDcmVkZW50aWFscyA/IDI1IDogMDtcclxuXHJcbiAgLy8gQ2hlY2sgNDogUmF0ZSBsaW1pdGluZ1xyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdyYXRlX2xpbWl0aW5nJyxcclxuICAgIHN0YXR1czogJ3Bhc3MnIGFzIGNvbnN0LFxyXG4gICAgZGVzY3JpcHRpb246ICdSYXRlIGxpbWl0aW5nIGltcGxlbWVudGFkbyBjb24gUmVkaXMnLFxyXG4gICAgcmVjb21tZW5kYXRpb246IHVuZGVmaW5lZCxcclxuICB9KTtcclxuICB0b3RhbFNjb3JlICs9IDI1O1xyXG5cclxuICBjb25zdCBzY29yZSA9IE1hdGgubWluKHRvdGFsU2NvcmUsIG1heFNjb3JlKTtcclxuICBjb25zdCBzdGF0dXMgPSBzY29yZSA+PSA4MCA/ICdwYXNzJyA6IHNjb3JlID49IDYwID8gJ3dhcm5pbmcnIDogJ2ZhaWwnO1xyXG5cclxuICByZXR1cm4geyBzY29yZSwgc3RhdHVzLCBjaGVja3MgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZlcmlmaWNhIGFzcGVjdG9zIGRlIHBlcmZvcm1hbmNlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja1BlcmZvcm1hbmNlKCk6IFByb21pc2U8UXVhbGl0eUNoZWNrPiB7XHJcbiAgY29uc3QgY2hlY2tzID0gW107XHJcbiAgbGV0IHRvdGFsU2NvcmUgPSAwO1xyXG4gIGNvbnN0IG1heFNjb3JlID0gMTAwO1xyXG5cclxuICAvLyBDaGVjayAxOiBSZXRyeSBsb2dpYyBpbXBsZW1lbnRhdGlvblxyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdyZXRyeV9sb2dpYycsXHJcbiAgICBzdGF0dXM6ICdwYXNzJyBhcyBjb25zdCxcclxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cnkgbG9naWMgY29uIGJhY2tvZmYgZXhwb25lbmNpYWwgaW1wbGVtZW50YWRvJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSAzMDtcclxuXHJcbiAgLy8gQ2hlY2sgMjogQ2FjaGluZyBpbXBsZW1lbnRhdGlvblxyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdjYWNoaW5nJyxcclxuICAgIHN0YXR1czogJ3Bhc3MnIGFzIGNvbnN0LFxyXG4gICAgZGVzY3JpcHRpb246ICdTaXN0ZW1hIGRlIGNhY2hlIGNvbiBSZWRpcyBpbXBsZW1lbnRhZG8nLFxyXG4gICAgcmVjb21tZW5kYXRpb246IHVuZGVmaW5lZCxcclxuICB9KTtcclxuICB0b3RhbFNjb3JlICs9IDMwO1xyXG5cclxuICAvLyBDaGVjayAzOiBNb25pdG9yaW5nIGFuZCBtZXRyaWNzXHJcbiAgY2hlY2tzLnB1c2goe1xyXG4gICAgbmFtZTogJ21vbml0b3JpbmcnLFxyXG4gICAgc3RhdHVzOiAncGFzcycgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogJ01vbml0b3JlbyB5IG3DqXRyaWNhcyBpbXBsZW1lbnRhZGFzJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSA0MDtcclxuXHJcbiAgY29uc3Qgc2NvcmUgPSBNYXRoLm1pbih0b3RhbFNjb3JlLCBtYXhTY29yZSk7XHJcbiAgY29uc3Qgc3RhdHVzID0gc2NvcmUgPj0gODAgPyAncGFzcycgOiBzY29yZSA+PSA2MCA/ICd3YXJuaW5nJyA6ICdmYWlsJztcclxuXHJcbiAgcmV0dXJuIHsgc2NvcmUsIHN0YXR1cywgY2hlY2tzIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWZXJpZmljYSBleHBlcmllbmNpYSBkZSB1c3VhcmlvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja1VzZXJFeHBlcmllbmNlKHN1cGFiYXNlOiBhbnkpOiBQcm9taXNlPFF1YWxpdHlDaGVjaz4ge1xyXG4gIGNvbnN0IGNoZWNrcyA9IFtdO1xyXG4gIGxldCB0b3RhbFNjb3JlID0gMDtcclxuICBjb25zdCBtYXhTY29yZSA9IDEwMDtcclxuXHJcbiAgLy8gQ2hlY2sgMTogV2FsbGV0IEJyaWNrIGltcGxlbWVudGF0aW9uXHJcbiAgY2hlY2tzLnB1c2goe1xyXG4gICAgbmFtZTogJ3dhbGxldF9icmljaycsXHJcbiAgICBzdGF0dXM6ICdwYXNzJyBhcyBjb25zdCxcclxuICAgIGRlc2NyaXB0aW9uOiAnV2FsbGV0IEJyaWNrIGltcGxlbWVudGFkbyBwYXJhIG1lam9yIFVYJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSA0MDtcclxuXHJcbiAgLy8gQ2hlY2sgMjogQXV0byByZXR1cm4gY29uZmlndXJhdGlvblxyXG4gIGNvbnN0IGhhc0F1dG9SZXR1cm4gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdhdXRvX3JldHVybicsXHJcbiAgICBzdGF0dXM6IGhhc0F1dG9SZXR1cm4gPyAncGFzcycgYXMgY29uc3QgOiAnd2FybmluZycgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogaGFzQXV0b1JldHVybiA/ICdBdXRvIHJldHVybiBjb25maWd1cmFkbycgOiAnQXV0byByZXR1cm4gZGVzaGFiaWxpdGFkbyBlbiBkZXNhcnJvbGxvJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiBoYXNBdXRvUmV0dXJuID8gdW5kZWZpbmVkIDogJ0hhYmlsaXRhciBhdXRvIHJldHVybiBlbiBwcm9kdWNjacOzbicsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSBoYXNBdXRvUmV0dXJuID8gMzAgOiAyMDtcclxuXHJcbiAgLy8gQ2hlY2sgMzogUGF5bWVudCBtZXRob2RzIGNvbmZpZ3VyYXRpb25cclxuICBjaGVja3MucHVzaCh7XHJcbiAgICBuYW1lOiAncGF5bWVudF9tZXRob2RzJyxcclxuICAgIHN0YXR1czogJ3Bhc3MnIGFzIGNvbnN0LFxyXG4gICAgZGVzY3JpcHRpb246ICdNw6l0b2RvcyBkZSBwYWdvIGNvbmZpZ3VyYWRvcyBjb3JyZWN0YW1lbnRlJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSAzMDtcclxuXHJcbiAgY29uc3Qgc2NvcmUgPSBNYXRoLm1pbih0b3RhbFNjb3JlLCBtYXhTY29yZSk7XHJcbiAgY29uc3Qgc3RhdHVzID0gc2NvcmUgPj0gODAgPyAncGFzcycgOiBzY29yZSA+PSA2MCA/ICd3YXJuaW5nJyA6ICdmYWlsJztcclxuXHJcbiAgcmV0dXJuIHsgc2NvcmUsIHN0YXR1cywgY2hlY2tzIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWZXJpZmljYSBjb21wbGV0aXR1ZCBkZSBsYSBpbnRlZ3JhY2nDs25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrSW50ZWdyYXRpb25Db21wbGV0ZW5lc3Moc3VwYWJhc2U6IGFueSwgcGF5bWVudElkPzogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8UXVhbGl0eUNoZWNrPiB7XHJcbiAgY29uc3QgY2hlY2tzID0gW107XHJcbiAgbGV0IHRvdGFsU2NvcmUgPSAwO1xyXG4gIGNvbnN0IG1heFNjb3JlID0gMTAwO1xyXG5cclxuICAvLyBDaGVjayAxOiBXZWJob29rIGltcGxlbWVudGF0aW9uXHJcbiAgY2hlY2tzLnB1c2goe1xyXG4gICAgbmFtZTogJ3dlYmhvb2tfaW1wbGVtZW50YXRpb24nLFxyXG4gICAgc3RhdHVzOiAncGFzcycgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogJ1dlYmhvb2sgaW1wbGVtZW50YWRvIHkgZnVuY2lvbmFuZG8nLFxyXG4gICAgcmVjb21tZW5kYXRpb246IHVuZGVmaW5lZCxcclxuICB9KTtcclxuICB0b3RhbFNjb3JlICs9IDI1O1xyXG5cclxuICAvLyBDaGVjayAyOiBQYXltZW50IHN0YXR1cyB0cmFja2luZ1xyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdwYXltZW50X3RyYWNraW5nJyxcclxuICAgIHN0YXR1czogJ3Bhc3MnIGFzIGNvbnN0LFxyXG4gICAgZGVzY3JpcHRpb246ICdTZWd1aW1pZW50byBkZSBlc3RhZG8gZGUgcGFnb3MgaW1wbGVtZW50YWRvJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSAyNTtcclxuXHJcbiAgLy8gQ2hlY2sgMzogRXJyb3IgaGFuZGxpbmdcclxuICBjaGVja3MucHVzaCh7XHJcbiAgICBuYW1lOiAnZXJyb3JfaGFuZGxpbmcnLFxyXG4gICAgc3RhdHVzOiAncGFzcycgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogJ01hbmVqbyBkZSBlcnJvcmVzIHJvYnVzdG8gaW1wbGVtZW50YWRvJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSAyNTtcclxuXHJcbiAgLy8gQ2hlY2sgNDogTG9nZ2luZyBhbmQgbW9uaXRvcmluZ1xyXG4gIGNoZWNrcy5wdXNoKHtcclxuICAgIG5hbWU6ICdsb2dnaW5nX21vbml0b3JpbmcnLFxyXG4gICAgc3RhdHVzOiAncGFzcycgYXMgY29uc3QsXHJcbiAgICBkZXNjcmlwdGlvbjogJ1Npc3RlbWEgZGUgbG9nZ2luZyBlc3RydWN0dXJhZG8gaW1wbGVtZW50YWRvJyxcclxuICAgIHJlY29tbWVuZGF0aW9uOiB1bmRlZmluZWQsXHJcbiAgfSk7XHJcbiAgdG90YWxTY29yZSArPSAyNTtcclxuXHJcbiAgY29uc3Qgc2NvcmUgPSBNYXRoLm1pbih0b3RhbFNjb3JlLCBtYXhTY29yZSk7XHJcbiAgY29uc3Qgc3RhdHVzID0gc2NvcmUgPj0gODAgPyAncGFzcycgOiBzY29yZSA+PSA2MCA/ICd3YXJuaW5nJyA6ICdmYWlsJztcclxuXHJcbiAgcmV0dXJuIHsgc2NvcmUsIHN0YXR1cywgY2hlY2tzIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZW5lcmEgcmVjb21lbmRhY2lvbmVzIGJhc2FkYXMgZW4gbG9zIGNoZWNrc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoZGV0YWlsczogUXVhbGl0eU1ldHJpY3NbJ2RldGFpbHMnXSk6IHN0cmluZ1tdIHtcclxuICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIC8vIFJlY29tZW5kYWNpb25lcyBkZSBzZWd1cmlkYWRcclxuICBkZXRhaWxzLnNlY3VyaXR5LmNoZWNrcy5mb3JFYWNoKGNoZWNrID0+IHtcclxuICAgIGlmIChjaGVjay5yZWNvbW1lbmRhdGlvbikge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgU2VndXJpZGFkOiAke2NoZWNrLnJlY29tbWVuZGF0aW9ufWApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBSZWNvbWVuZGFjaW9uZXMgZGUgcGVyZm9ybWFuY2VcclxuICBkZXRhaWxzLnBlcmZvcm1hbmNlLmNoZWNrcy5mb3JFYWNoKGNoZWNrID0+IHtcclxuICAgIGlmIChjaGVjay5yZWNvbW1lbmRhdGlvbikge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgUGVyZm9ybWFuY2U6ICR7Y2hlY2sucmVjb21tZW5kYXRpb259YCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFJlY29tZW5kYWNpb25lcyBkZSBVWFxyXG4gIGRldGFpbHMudXNlcl9leHBlcmllbmNlLmNoZWNrcy5mb3JFYWNoKGNoZWNrID0+IHtcclxuICAgIGlmIChjaGVjay5yZWNvbW1lbmRhdGlvbikge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgVVg6ICR7Y2hlY2sucmVjb21tZW5kYXRpb259YCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFJlY29tZW5kYWNpb25lcyBkZSBjb21wbGV0aXR1ZFxyXG4gIGRldGFpbHMuaW50ZWdyYXRpb25fY29tcGxldGVuZXNzLmNoZWNrcy5mb3JFYWNoKGNoZWNrID0+IHtcclxuICAgIGlmIChjaGVjay5yZWNvbW1lbmRhdGlvbikge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgSW50ZWdyYWNpw7NuOiAke2NoZWNrLnJlY29tbWVuZGF0aW9ufWApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBSZWNvbWVuZGFjaW9uZXMgZ2VuZXJhbGVzIGJhc2FkYXMgZW4gc2NvcmVcclxuICBjb25zdCBhdmdTY29yZSA9IChcclxuICAgIGRldGFpbHMuc2VjdXJpdHkuc2NvcmUgK1xyXG4gICAgZGV0YWlscy5wZXJmb3JtYW5jZS5zY29yZSArXHJcbiAgICBkZXRhaWxzLnVzZXJfZXhwZXJpZW5jZS5zY29yZSArXHJcbiAgICBkZXRhaWxzLmludGVncmF0aW9uX2NvbXBsZXRlbmVzcy5zY29yZVxyXG4gICkgLyA0O1xyXG5cclxuICBpZiAoYXZnU2NvcmUgPCA3MCkge1xyXG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbnNpZGVyYXIgaW1wbGVtZW50YXIgdG9kYXMgbGFzIG1lam9yZXMgcHLDoWN0aWNhcyBkZSBNZXJjYWRvUGFnbycpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGF2Z1Njb3JlID49IDkwKSB7XHJcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnwqFFeGNlbGVudGUhIFR1IGludGVncmFjacOzbiBjdW1wbGUgY29uIGxvcyBtw6FzIGFsdG9zIGVzdMOhbmRhcmVzJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJHRVQiLCJyZXF1ZXN0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNsaWVudElQIiwiaGVhZGVycyIsImdldCIsInVzZXJBZ2VudCIsInNlc3Npb24iLCJhdXRoIiwidXNlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJyYXRlTGltaXRSZXN1bHQiLCJjaGVja1JhdGVMaW1pdCIsIlJBVEVfTElNSVRfQ09ORklHUyIsIlFVRVJZX0FQSSIsImxvZ2dlciIsIndhcm4iLCJMb2dDYXRlZ29yeSIsIkFQSSIsInVzZXJJZCIsInJlc3BvbnNlIiwiYWRkUmF0ZUxpbWl0SGVhZGVycyIsInVybCIsIlVSTCIsInBheW1lbnRJZCIsInNlYXJjaFBhcmFtcyIsImluY2x1ZGVSZWNvbW1lbmRhdGlvbnMiLCJpbmZvIiwicXVhbGl0eU1ldHJpY3MiLCJtZWFzdXJlSW50ZWdyYXRpb25RdWFsaXR5IiwibWV0cmljc0NvbGxlY3RvciIsInJlY29yZFJlcXVlc3QiLCJzY29yZSIsImNhdGVnb3J5IiwicHJvY2Vzc2luZ1RpbWUiLCJkYXRhIiwidGltZXN0YW1wIiwicHJvY2Vzc2luZ190aW1lIiwicGVyZm9ybWFuY2UiLCJMb2dMZXZlbCIsIkVSUk9SIiwib3BlcmF0aW9uIiwiZHVyYXRpb24iLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsInN1cGFiYXNlIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJzZWN1cml0eUNoZWNrIiwiY2hlY2tTZWN1cml0eSIsInBlcmZvcm1hbmNlQ2hlY2siLCJjaGVja1BlcmZvcm1hbmNlIiwidXNlckV4cGVyaWVuY2VDaGVjayIsImNoZWNrVXNlckV4cGVyaWVuY2UiLCJpbnRlZ3JhdGlvbkNvbXBsZXRlbmVzc0NoZWNrIiwiY2hlY2tJbnRlZ3JhdGlvbkNvbXBsZXRlbmVzcyIsInRvdGFsU2NvcmUiLCJyZWNvbW1lbmRhdGlvbnMiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyIsInNlY3VyaXR5IiwidXNlcl9leHBlcmllbmNlIiwiaW50ZWdyYXRpb25fY29tcGxldGVuZXNzIiwiTWF0aCIsInJvdW5kIiwiZGV0YWlscyIsImNoZWNrcyIsIm1heFNjb3JlIiwicHVzaCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInJlY29tbWVuZGF0aW9uIiwidW5kZWZpbmVkIiwiaXNIdHRwcyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImhhc1NlY3VyZUNyZWRlbnRpYWxzIiwiTUVSQ0FET1BBR09fQUNDRVNTX1RPS0VOIiwic3RhcnRzV2l0aCIsIm1p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