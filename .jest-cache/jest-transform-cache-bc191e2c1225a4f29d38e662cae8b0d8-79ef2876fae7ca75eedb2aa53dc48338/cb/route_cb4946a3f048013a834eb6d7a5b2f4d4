2926f8793333011f81f06381771a3eb5
// ===================================
// API: /api/search/trending - B√∫squedas populares/trending
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    GET: function() {
        return GET;
    },
    POST: function() {
        return POST;
    }
});
const _server = require("next/server");
const _supabase = require("../../../../lib/supabase");
// B√∫squedas trending por defecto (fallback)
const defaultTrendingSearches = [
    {
        id: "trending-1",
        query: "Pintura l√°tex",
        count: 156,
        category: "pinturas",
        href: "/search?q=pintura+latex",
        type: "trending"
    },
    {
        id: "trending-2",
        query: "Sherwin Williams",
        count: 142,
        category: "marcas",
        href: "/search?q=sherwin+williams",
        type: "trending"
    },
    {
        id: "trending-3",
        query: "Rodillos premium",
        count: 98,
        category: "herramientas",
        href: "/search?q=rodillos+premium",
        type: "trending"
    },
    {
        id: "trending-4",
        query: "Pinceles",
        count: 87,
        category: "herramientas",
        href: "/search?q=pinceles",
        type: "trending"
    },
    {
        id: "trending-5",
        query: "Impermeabilizante",
        count: 76,
        category: "pinturas",
        href: "/search?q=impermeabilizante",
        type: "trending"
    },
    {
        id: "trending-6",
        query: "Petrilac",
        count: 65,
        category: "marcas",
        href: "/search?q=petrilac",
        type: "trending"
    }
];
async function GET(request) {
    try {
        const { searchParams } = new URL(request.url);
        const limit = parseInt(searchParams.get('limit') || '6');
        const days = parseInt(searchParams.get('days') || '7');
        const category = searchParams.get('category');
        console.log('üî• API /api/search/trending: Obteniendo b√∫squedas trending', {
            limit,
            days,
            category
        });
        const supabase = (0, _supabase.getSupabaseClient)();
        let trendingSearches = [];
        // Intentar obtener b√∫squedas trending reales del sistema de analytics
        if (supabase) {
            try {
                const startDate = new Date();
                startDate.setDate(startDate.getDate() - days);
                // Query para obtener b√∫squedas m√°s populares de analytics_events
                let query = supabase.from('analytics_events').select('label, metadata').eq('category', 'search').eq('action', 'search_query').gte('created_at', startDate.toISOString()).not('label', 'is', null);
                if (category) {
                    query = query.eq('metadata->>category', category);
                }
                const { data: analyticsData, error } = await query;
                if (!error && analyticsData && analyticsData.length > 0) {
                    // Procesar datos de analytics para obtener trending
                    const searchCounts = new Map();
                    const searchCategories = new Map();
                    analyticsData.forEach((event)=>{
                        if (event.label) {
                            const query = event.label.toLowerCase().trim();
                            if (query.length > 2) {
                                searchCounts.set(query, (searchCounts.get(query) || 0) + 1);
                                // Extraer categor√≠a del metadata si existe
                                if (event.metadata && event.metadata.category) {
                                    searchCategories.set(query, event.metadata.category);
                                }
                            }
                        }
                    });
                    // Convertir a array y ordenar por popularidad
                    const sortedSearches = Array.from(searchCounts.entries()).sort((a, b)=>b[1] - a[1]).slice(0, limit);
                    trendingSearches = sortedSearches.map(([query, count], index)=>({
                            id: `trending-real-${index + 1}`,
                            query: query.charAt(0).toUpperCase() + query.slice(1),
                            count,
                            category: searchCategories.get(query),
                            href: `/search?q=${encodeURIComponent(query)}`,
                            type: 'trending'
                        }));
                    console.log('‚úÖ B√∫squedas trending obtenidas de analytics:', trendingSearches.length);
                }
            } catch (analyticsError) {
                console.warn('‚ö†Ô∏è Error obteniendo trending de analytics, usando fallback:', analyticsError);
            }
        }
        // Si no hay datos reales o hay pocos, usar datos por defecto
        if (trendingSearches.length < 3) {
            console.log('üìã Usando b√∫squedas trending por defecto');
            let filteredDefaults = defaultTrendingSearches;
            // Filtrar por categor√≠a si se especifica
            if (category) {
                filteredDefaults = defaultTrendingSearches.filter((search)=>search.category === category);
            }
            // Combinar datos reales con defaults si es necesario
            const needed = limit - trendingSearches.length;
            const additionalSearches = filteredDefaults.slice(0, needed);
            trendingSearches = [
                ...trendingSearches,
                ...additionalSearches
            ];
        }
        // Limitar al n√∫mero solicitado
        trendingSearches = trendingSearches.slice(0, limit);
        const response = {
            data: {
                trending: trendingSearches,
                lastUpdated: new Date().toISOString()
            },
            success: true
        };
        console.log('üî• Trending searches response:', {
            count: trendingSearches.length,
            hasRealData: trendingSearches.some((s)=>s.id.includes('real')),
            categories: [
                ...new Set(trendingSearches.map((s)=>s.category).filter(Boolean))
            ]
        });
        return _server.NextResponse.json(response);
    } catch (error) {
        console.error('‚ùå Error en /api/search/trending:', error);
        // En caso de error, devolver b√∫squedas por defecto
        const fallbackResponse = {
            data: {
                trending: defaultTrendingSearches.slice(0, parseInt(request.nextUrl.searchParams.get('limit') || '6')),
                lastUpdated: new Date().toISOString()
            },
            success: true
        };
        return _server.NextResponse.json(fallbackResponse);
    }
}
async function POST(request) {
    try {
        // Validar que el request tenga contenido
        const contentType = request.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            return _server.NextResponse.json({
                error: 'Content-Type debe ser application/json'
            }, {
                status: 400
            });
        }
        // Obtener el texto del body primero para validar
        const bodyText = await request.text();
        if (!bodyText || bodyText.trim() === '' || bodyText === '""' || bodyText === "''") {
            return _server.NextResponse.json({
                error: 'Body de la request no puede estar vac√≠o'
            }, {
                status: 400
            });
        }
        // Parsear JSON de forma segura
        let requestData;
        try {
            requestData = JSON.parse(bodyText);
        } catch (parseError) {
            console.error('Error parsing JSON in POST /api/search/trending:', parseError);
            return _server.NextResponse.json({
                error: 'JSON inv√°lido en el body de la request'
            }, {
                status: 400
            });
        }
        const { query, category, userId, sessionId } = requestData;
        if (!query || typeof query !== 'string') {
            return _server.NextResponse.json({
                error: 'Query de b√∫squeda requerida'
            }, {
                status: 400
            });
        }
        const supabase = (0, _supabase.getSupabaseClient)();
        if (supabase) {
            // Registrar la b√∫squeda en analytics
            const { error } = await supabase.from('analytics_events').insert({
                event_name: 'search_query',
                category: 'search',
                action: 'search_query',
                label: query.toLowerCase().trim(),
                user_id: userId,
                session_id: sessionId || 'anonymous',
                page: '/search',
                metadata: {
                    category: category,
                    timestamp: new Date().toISOString()
                }
            });
            if (error) {
                console.error('Error registrando b√∫squeda en analytics:', error);
            } else {
                console.log('‚úÖ B√∫squeda registrada en analytics:', query);
            }
        }
        return _server.NextResponse.json({
            success: true
        });
    } catch (error) {
        console.error('‚ùå Error registrando b√∫squeda:', error);
        return _server.NextResponse.json({
            error: 'Error interno del servidor'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcYXBwXFxhcGlcXHNlYXJjaFxcdHJlbmRpbmdcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEk6IC9hcGkvc2VhcmNoL3RyZW5kaW5nIC0gQsO6c3F1ZWRhcyBwb3B1bGFyZXMvdHJlbmRpbmdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IEFwaVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9hcGknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyZW5kaW5nU2VhcmNoIHtcbiAgaWQ6IHN0cmluZztcbiAgcXVlcnk6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIGhyZWY6IHN0cmluZztcbiAgdHlwZTogJ3RyZW5kaW5nJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmVuZGluZ1NlYXJjaGVzUmVzcG9uc2Uge1xuICB0cmVuZGluZzogVHJlbmRpbmdTZWFyY2hbXTtcbiAgbGFzdFVwZGF0ZWQ6IHN0cmluZztcbn1cblxuLy8gQsO6c3F1ZWRhcyB0cmVuZGluZyBwb3IgZGVmZWN0byAoZmFsbGJhY2spXG5jb25zdCBkZWZhdWx0VHJlbmRpbmdTZWFyY2hlczogVHJlbmRpbmdTZWFyY2hbXSA9IFtcbiAge1xuICAgIGlkOiBcInRyZW5kaW5nLTFcIixcbiAgICBxdWVyeTogXCJQaW50dXJhIGzDoXRleFwiLFxuICAgIGNvdW50OiAxNTYsXG4gICAgY2F0ZWdvcnk6IFwicGludHVyYXNcIixcbiAgICBocmVmOiBcIi9zZWFyY2g/cT1waW50dXJhK2xhdGV4XCIsXG4gICAgdHlwZTogXCJ0cmVuZGluZ1wiXG4gIH0sXG4gIHtcbiAgICBpZDogXCJ0cmVuZGluZy0yXCIsIFxuICAgIHF1ZXJ5OiBcIlNoZXJ3aW4gV2lsbGlhbXNcIixcbiAgICBjb3VudDogMTQyLFxuICAgIGNhdGVnb3J5OiBcIm1hcmNhc1wiLFxuICAgIGhyZWY6IFwiL3NlYXJjaD9xPXNoZXJ3aW4rd2lsbGlhbXNcIixcbiAgICB0eXBlOiBcInRyZW5kaW5nXCJcbiAgfSxcbiAge1xuICAgIGlkOiBcInRyZW5kaW5nLTNcIixcbiAgICBxdWVyeTogXCJSb2RpbGxvcyBwcmVtaXVtXCIsXG4gICAgY291bnQ6IDk4LFxuICAgIGNhdGVnb3J5OiBcImhlcnJhbWllbnRhc1wiLFxuICAgIGhyZWY6IFwiL3NlYXJjaD9xPXJvZGlsbG9zK3ByZW1pdW1cIixcbiAgICB0eXBlOiBcInRyZW5kaW5nXCJcbiAgfSxcbiAge1xuICAgIGlkOiBcInRyZW5kaW5nLTRcIixcbiAgICBxdWVyeTogXCJQaW5jZWxlc1wiLFxuICAgIGNvdW50OiA4NyxcbiAgICBjYXRlZ29yeTogXCJoZXJyYW1pZW50YXNcIiwgXG4gICAgaHJlZjogXCIvc2VhcmNoP3E9cGluY2VsZXNcIixcbiAgICB0eXBlOiBcInRyZW5kaW5nXCJcbiAgfSxcbiAge1xuICAgIGlkOiBcInRyZW5kaW5nLTVcIixcbiAgICBxdWVyeTogXCJJbXBlcm1lYWJpbGl6YW50ZVwiLFxuICAgIGNvdW50OiA3NixcbiAgICBjYXRlZ29yeTogXCJwaW50dXJhc1wiLFxuICAgIGhyZWY6IFwiL3NlYXJjaD9xPWltcGVybWVhYmlsaXphbnRlXCIsXG4gICAgdHlwZTogXCJ0cmVuZGluZ1wiXG4gIH0sXG4gIHtcbiAgICBpZDogXCJ0cmVuZGluZy02XCIsXG4gICAgcXVlcnk6IFwiUGV0cmlsYWNcIixcbiAgICBjb3VudDogNjUsXG4gICAgY2F0ZWdvcnk6IFwibWFyY2FzXCIsXG4gICAgaHJlZjogXCIvc2VhcmNoP3E9cGV0cmlsYWNcIixcbiAgICB0eXBlOiBcInRyZW5kaW5nXCJcbiAgfVxuXTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzYnKTtcbiAgICBjb25zdCBkYXlzID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnZGF5cycpIHx8ICc3Jyk7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjYXRlZ29yeScpO1xuXG4gICAgY29uc29sZS5sb2coJ/CflKUgQVBJIC9hcGkvc2VhcmNoL3RyZW5kaW5nOiBPYnRlbmllbmRvIGLDunNxdWVkYXMgdHJlbmRpbmcnLCB7XG4gICAgICBsaW1pdCxcbiAgICAgIGRheXMsXG4gICAgICBjYXRlZ29yeVxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgbGV0IHRyZW5kaW5nU2VhcmNoZXM6IFRyZW5kaW5nU2VhcmNoW10gPSBbXTtcblxuICAgIC8vIEludGVudGFyIG9idGVuZXIgYsO6c3F1ZWRhcyB0cmVuZGluZyByZWFsZXMgZGVsIHNpc3RlbWEgZGUgYW5hbHl0aWNzXG4gICAgaWYgKHN1cGFiYXNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gZGF5cyk7XG5cbiAgICAgICAgLy8gUXVlcnkgcGFyYSBvYnRlbmVyIGLDunNxdWVkYXMgbcOhcyBwb3B1bGFyZXMgZGUgYW5hbHl0aWNzX2V2ZW50c1xuICAgICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCdhbmFseXRpY3NfZXZlbnRzJylcbiAgICAgICAgICAuc2VsZWN0KCdsYWJlbCwgbWV0YWRhdGEnKVxuICAgICAgICAgIC5lcSgnY2F0ZWdvcnknLCAnc2VhcmNoJylcbiAgICAgICAgICAuZXEoJ2FjdGlvbicsICdzZWFyY2hfcXVlcnknKVxuICAgICAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgICAgICAubm90KCdsYWJlbCcsICdpcycsIG51bGwpO1xuXG4gICAgICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ21ldGFkYXRhLT4+Y2F0ZWdvcnknLCBjYXRlZ29yeSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGRhdGE6IGFuYWx5dGljc0RhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcblxuICAgICAgICBpZiAoIWVycm9yICYmIGFuYWx5dGljc0RhdGEgJiYgYW5hbHl0aWNzRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gUHJvY2VzYXIgZGF0b3MgZGUgYW5hbHl0aWNzIHBhcmEgb2J0ZW5lciB0cmVuZGluZ1xuICAgICAgICAgIGNvbnN0IHNlYXJjaENvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICAgICAgY29uc3Qgc2VhcmNoQ2F0ZWdvcmllcyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAgICAgICBhbmFseXRpY3NEYXRhLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQubGFiZWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBldmVudC5sYWJlbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCA+IDIpIHsgLy8gU29sbyBxdWVyaWVzIGRlIG3DoXMgZGUgMiBjYXJhY3RlcmVzXG4gICAgICAgICAgICAgICAgc2VhcmNoQ291bnRzLnNldChxdWVyeSwgKHNlYXJjaENvdW50cy5nZXQocXVlcnkpIHx8IDApICsgMSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRXh0cmFlciBjYXRlZ29yw61hIGRlbCBtZXRhZGF0YSBzaSBleGlzdGVcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubWV0YWRhdGEgJiYgZXZlbnQubWV0YWRhdGEuY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICAgIHNlYXJjaENhdGVnb3JpZXMuc2V0KHF1ZXJ5LCBldmVudC5tZXRhZGF0YS5jYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBDb252ZXJ0aXIgYSBhcnJheSB5IG9yZGVuYXIgcG9yIHBvcHVsYXJpZGFkXG4gICAgICAgICAgY29uc3Qgc29ydGVkU2VhcmNoZXMgPSBBcnJheS5mcm9tKHNlYXJjaENvdW50cy5lbnRyaWVzKCkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXG4gICAgICAgICAgICAuc2xpY2UoMCwgbGltaXQpO1xuXG4gICAgICAgICAgdHJlbmRpbmdTZWFyY2hlcyA9IHNvcnRlZFNlYXJjaGVzLm1hcCgoW3F1ZXJ5LCBjb3VudF0sIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGB0cmVuZGluZy1yZWFsLSR7aW5kZXggKyAxfWAsXG4gICAgICAgICAgICBxdWVyeTogcXVlcnkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeS5zbGljZSgxKSxcbiAgICAgICAgICAgIGNvdW50LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHNlYXJjaENhdGVnb3JpZXMuZ2V0KHF1ZXJ5KSxcbiAgICAgICAgICAgIGhyZWY6IGAvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWAsXG4gICAgICAgICAgICB0eXBlOiAndHJlbmRpbmcnIGFzIGNvbnN0XG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBCw7pzcXVlZGFzIHRyZW5kaW5nIG9idGVuaWRhcyBkZSBhbmFseXRpY3M6JywgdHJlbmRpbmdTZWFyY2hlcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChhbmFseXRpY3NFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBFcnJvciBvYnRlbmllbmRvIHRyZW5kaW5nIGRlIGFuYWx5dGljcywgdXNhbmRvIGZhbGxiYWNrOicsIGFuYWx5dGljc0Vycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaSBubyBoYXkgZGF0b3MgcmVhbGVzIG8gaGF5IHBvY29zLCB1c2FyIGRhdG9zIHBvciBkZWZlY3RvXG4gICAgaWYgKHRyZW5kaW5nU2VhcmNoZXMubGVuZ3RoIDwgMykge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgVXNhbmRvIGLDunNxdWVkYXMgdHJlbmRpbmcgcG9yIGRlZmVjdG8nKTtcbiAgICAgIFxuICAgICAgbGV0IGZpbHRlcmVkRGVmYXVsdHMgPSBkZWZhdWx0VHJlbmRpbmdTZWFyY2hlcztcbiAgICAgIFxuICAgICAgLy8gRmlsdHJhciBwb3IgY2F0ZWdvcsOtYSBzaSBzZSBlc3BlY2lmaWNhXG4gICAgICBpZiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgZmlsdGVyZWREZWZhdWx0cyA9IGRlZmF1bHRUcmVuZGluZ1NlYXJjaGVzLmZpbHRlcihcbiAgICAgICAgICBzZWFyY2ggPT4gc2VhcmNoLmNhdGVnb3J5ID09PSBjYXRlZ29yeVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb21iaW5hciBkYXRvcyByZWFsZXMgY29uIGRlZmF1bHRzIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgY29uc3QgbmVlZGVkID0gbGltaXQgLSB0cmVuZGluZ1NlYXJjaGVzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxTZWFyY2hlcyA9IGZpbHRlcmVkRGVmYXVsdHMuc2xpY2UoMCwgbmVlZGVkKTtcbiAgICAgIFxuICAgICAgdHJlbmRpbmdTZWFyY2hlcyA9IFsuLi50cmVuZGluZ1NlYXJjaGVzLCAuLi5hZGRpdGlvbmFsU2VhcmNoZXNdO1xuICAgIH1cblxuICAgIC8vIExpbWl0YXIgYWwgbsO6bWVybyBzb2xpY2l0YWRvXG4gICAgdHJlbmRpbmdTZWFyY2hlcyA9IHRyZW5kaW5nU2VhcmNoZXMuc2xpY2UoMCwgbGltaXQpO1xuXG4gICAgY29uc3QgcmVzcG9uc2U6IEFwaVJlc3BvbnNlPFRyZW5kaW5nU2VhcmNoZXNSZXNwb25zZT4gPSB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRyZW5kaW5nOiB0cmVuZGluZ1NlYXJjaGVzLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygn8J+UpSBUcmVuZGluZyBzZWFyY2hlcyByZXNwb25zZTonLCB7XG4gICAgICBjb3VudDogdHJlbmRpbmdTZWFyY2hlcy5sZW5ndGgsXG4gICAgICBoYXNSZWFsRGF0YTogdHJlbmRpbmdTZWFyY2hlcy5zb21lKHMgPT4gcy5pZC5pbmNsdWRlcygncmVhbCcpKSxcbiAgICAgIGNhdGVnb3JpZXM6IFsuLi5uZXcgU2V0KHRyZW5kaW5nU2VhcmNoZXMubWFwKHMgPT4gcy5jYXRlZ29yeSkuZmlsdGVyKEJvb2xlYW4pKV1cbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZW4gL2FwaS9zZWFyY2gvdHJlbmRpbmc6JywgZXJyb3IpO1xuXG4gICAgLy8gRW4gY2FzbyBkZSBlcnJvciwgZGV2b2x2ZXIgYsO6c3F1ZWRhcyBwb3IgZGVmZWN0b1xuICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2U6IEFwaVJlc3BvbnNlPFRyZW5kaW5nU2VhcmNoZXNSZXNwb25zZT4gPSB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRyZW5kaW5nOiBkZWZhdWx0VHJlbmRpbmdTZWFyY2hlcy5zbGljZSgwLCBwYXJzZUludChyZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnNicpKSxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGZhbGxiYWNrUmVzcG9uc2UpO1xuICB9XG59XG5cbi8vIE3DqXRvZG8gUE9TVCBwYXJhIHJlZ2lzdHJhciB1bmEgYsO6c3F1ZWRhIChwYXJhIGFuYWx5dGljcylcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhciBxdWUgZWwgcmVxdWVzdCB0ZW5nYSBjb250ZW5pZG9cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0NvbnRlbnQtVHlwZSBkZWJlIHNlciBhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gT2J0ZW5lciBlbCB0ZXh0byBkZWwgYm9keSBwcmltZXJvIHBhcmEgdmFsaWRhclxuICAgIGNvbnN0IGJvZHlUZXh0ID0gYXdhaXQgcmVxdWVzdC50ZXh0KCk7XG4gICAgaWYgKCFib2R5VGV4dCB8fCBib2R5VGV4dC50cmltKCkgPT09ICcnIHx8IGJvZHlUZXh0ID09PSAnXCJcIicgfHwgYm9keVRleHQgPT09IFwiJydcIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQm9keSBkZSBsYSByZXF1ZXN0IG5vIHB1ZWRlIGVzdGFyIHZhY8OtbycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFBhcnNlYXIgSlNPTiBkZSBmb3JtYSBzZWd1cmFcbiAgICBsZXQgcmVxdWVzdERhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHJlcXVlc3REYXRhID0gSlNPTi5wYXJzZShib2R5VGV4dCk7XG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBKU09OIGluIFBPU1QgL2FwaS9zZWFyY2gvdHJlbmRpbmc6JywgcGFyc2VFcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdKU09OIGludsOhbGlkbyBlbiBlbCBib2R5IGRlIGxhIHJlcXVlc3QnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHF1ZXJ5LCBjYXRlZ29yeSwgdXNlcklkLCBzZXNzaW9uSWQgfSA9IHJlcXVlc3REYXRhO1xuXG4gICAgaWYgKCFxdWVyeSB8fCB0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdRdWVyeSBkZSBiw7pzcXVlZGEgcmVxdWVyaWRhJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgaWYgKHN1cGFiYXNlKSB7XG4gICAgICAvLyBSZWdpc3RyYXIgbGEgYsO6c3F1ZWRhIGVuIGFuYWx5dGljc1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FuYWx5dGljc19ldmVudHMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICBldmVudF9uYW1lOiAnc2VhcmNoX3F1ZXJ5JyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3NlYXJjaCcsXG4gICAgICAgICAgYWN0aW9uOiAnc2VhcmNoX3F1ZXJ5JyxcbiAgICAgICAgICBsYWJlbDogcXVlcnkudG9Mb3dlckNhc2UoKS50cmltKCksXG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCB8fCAnYW5vbnltb3VzJyxcbiAgICAgICAgICBwYWdlOiAnL3NlYXJjaCcsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZ2lzdHJhbmRvIGLDunNxdWVkYSBlbiBhbmFseXRpY3M6JywgZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBCw7pzcXVlZGEgcmVnaXN0cmFkYSBlbiBhbmFseXRpY3M6JywgcXVlcnkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgcmVnaXN0cmFuZG8gYsO6c3F1ZWRhOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiR0VUIiwiUE9TVCIsImRlZmF1bHRUcmVuZGluZ1NlYXJjaGVzIiwiaWQiLCJxdWVyeSIsImNvdW50IiwiY2F0ZWdvcnkiLCJocmVmIiwidHlwZSIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJsaW1pdCIsInBhcnNlSW50IiwiZ2V0IiwiZGF5cyIsImNvbnNvbGUiLCJsb2ciLCJzdXBhYmFzZSIsImdldFN1cGFiYXNlQ2xpZW50IiwidHJlbmRpbmdTZWFyY2hlcyIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImd0ZSIsInRvSVNPU3RyaW5nIiwibm90IiwiZGF0YSIsImFuYWx5dGljc0RhdGEiLCJlcnJvciIsImxlbmd0aCIsInNlYXJjaENvdW50cyIsIk1hcCIsInNlYXJjaENhdGVnb3JpZXMiLCJmb3JFYWNoIiwiZXZlbnQiLCJsYWJlbCIsInRvTG93ZXJDYXNlIiwidHJpbSIsInNldCIsIm1ldGFkYXRhIiwic29ydGVkU2VhcmNoZXMiLCJBcnJheSIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIm1hcCIsImluZGV4IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhbmFseXRpY3NFcnJvciIsIndhcm4iLCJmaWx0ZXJlZERlZmF1bHRzIiwiZmlsdGVyIiwic2VhcmNoIiwibmVlZGVkIiwiYWRkaXRpb25hbFNlYXJjaGVzIiwicmVzcG9uc2UiLCJ0cmVuZGluZyIsImxhc3RVcGRhdGVkIiwic3VjY2VzcyIsImhhc1JlYWxEYXRhIiwic29tZSIsInMiLCJpbmNsdWRlcyIsImNhdGVnb3JpZXMiLCJTZXQiLCJCb29sZWFuIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsImZhbGxiYWNrUmVzcG9uc2UiLCJuZXh0VXJsIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwic3RhdHVzIiwiYm9keVRleHQiLCJ0ZXh0IiwicmVxdWVzdERhdGEiLCJKU09OIiwicGFyc2UiLCJwYXJzZUVycm9yIiwidXNlcklkIiwic2Vzc2lvbklkIiwiaW5zZXJ0IiwiZXZlbnRfbmFtZSIsImFjdGlvbiIsInVzZXJfaWQiLCJzZXNzaW9uX2lkIiwicGFnZSIsInRpbWVzdGFtcCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDJEQUEyRDtBQUMzRCxzQ0FBc0M7Ozs7Ozs7Ozs7OztJQXdFaEJBLEdBQUc7ZUFBSEE7O0lBc0lBQyxJQUFJO2VBQUpBOzs7d0JBNU1vQjswQkFDUjtBQWlCbEMsNENBQTRDO0FBQzVDLE1BQU1DLDBCQUE0QztJQUNoRDtRQUNFQyxJQUFJO1FBQ0pDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLE1BQU07UUFDTkMsTUFBTTtJQUNSO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxNQUFNO1FBQ05DLE1BQU07SUFDUjtJQUNBO1FBQ0VMLElBQUk7UUFDSkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7SUFDQTtRQUNFTCxJQUFJO1FBQ0pDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLE1BQU07UUFDTkMsTUFBTTtJQUNSO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxNQUFNO1FBQ05DLE1BQU07SUFDUjtJQUNBO1FBQ0VMLElBQUk7UUFDSkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7Q0FDRDtBQUVNLGVBQWVSLElBQUlTLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlG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