b34dde5d9cfdaaaa8648a530a66bef15
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get getActiveFiltersCount () {
        return getActiveFiltersCount;
    },
    get hasActiveFilters () {
        return hasActiveFilters;
    },
    get useCategoryProductCounts () {
        return useCategoryProductCounts;
    },
    get useFilteredProducts () {
        return useFilteredProducts;
    },
    get useProductCount () {
        return useProductCount;
    }
});
const _reactquery = require("@tanstack/react-query");
const _jsonutils = require("../lib/json-utils");
const useFilteredProducts = (filters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'filtered-products',
            filters
        ],
        queryFn: async ()=>{
            // Construir URL con parámetros
            const searchParams = new URLSearchParams();
            // Filtros básicos
            if (filters.category) searchParams.set('category', filters.category);
            if (filters.brand) searchParams.set('brand', filters.brand);
            if (filters.search) searchParams.set('search', filters.search);
            if (filters.priceMin !== undefined) searchParams.set('priceMin', filters.priceMin.toString());
            if (filters.priceMax !== undefined) searchParams.set('priceMax', filters.priceMax.toString());
            // Filtros avanzados (arrays)
            if (filters.categories && filters.categories.length > 0) {
                searchParams.set('categories', filters.categories.join(','));
            }
            if (filters.brands && filters.brands.length > 0) {
                searchParams.set('brands', filters.brands.join(','));
            }
            if (filters.paintTypes && filters.paintTypes.length > 0) {
                searchParams.set('paintTypes', filters.paintTypes.join(','));
            }
            // Paginación y ordenamiento
            if (filters.page) searchParams.set('page', filters.page.toString());
            if (filters.limit) searchParams.set('limit', filters.limit.toString());
            if (filters.sortBy) searchParams.set('sortBy', filters.sortBy);
            if (filters.sortOrder) searchParams.set('sortOrder', filters.sortOrder);
            const url = `/api/products?${searchParams.toString()}`;
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
            const result = await (0, _jsonutils.safeApiResponseJson)(response);
            if (!result.success) {
                throw new Error(result.error || 'Error parsing response');
            }
            return result.data;
        },
        staleTime: 5 * 60 * 1000,
        gcTime: 10 * 60 * 1000,
        retry: 2,
        retryDelay: (attemptIndex)=>Math.min(1000 * 2 ** attemptIndex, 30000),
        enabled: true
    });
};
const useProductCount = (filters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'product-count',
            filters
        ],
        queryFn: async ()=>{
            // Usar los mismos filtros pero con limit=1 para obtener solo el count
            const countFilters = {
                ...filters,
                page: 1,
                limit: 1
            };
            const searchParams = new URLSearchParams();
            // Aplicar los mismos filtros que useFilteredProducts
            if (countFilters.category) searchParams.set('category', countFilters.category);
            if (countFilters.brand) searchParams.set('brand', countFilters.brand);
            if (countFilters.search) searchParams.set('search', countFilters.search);
            if (countFilters.priceMin !== undefined) searchParams.set('priceMin', countFilters.priceMin.toString());
            if (countFilters.priceMax !== undefined) searchParams.set('priceMax', countFilters.priceMax.toString());
            if (countFilters.categories && countFilters.categories.length > 0) {
                searchParams.set('categories', countFilters.categories.join(','));
            }
            if (countFilters.brands && countFilters.brands.length > 0) {
                searchParams.set('brands', countFilters.brands.join(','));
            }
            if (countFilters.paintTypes && countFilters.paintTypes.length > 0) {
                searchParams.set('paintTypes', countFilters.paintTypes.join(','));
            }
            searchParams.set('page', '1');
            searchParams.set('limit', '1');
            const url = `/api/products?${searchParams.toString()}`;
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
            const result = await (0, _jsonutils.safeApiResponseJson)(response);
            if (!result.success) {
                throw new Error(result.error || 'Error parsing response');
            }
            const count = result.data?.pagination?.total || 0;
            return count;
        },
        staleTime: 5 * 60 * 1000,
        gcTime: 10 * 60 * 1000,
        retry: 2,
        enabled: true
    });
};
const useCategoryProductCounts = (categoryIds, baseFilters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'category-product-counts',
            categoryIds,
            baseFilters
        ],
        queryFn: async ()=>{
            const counts = {};
            // Obtener conteo para cada categoría individualmente
            const promises = categoryIds.map(async (categoryId)=>{
                const filters = {
                    ...baseFilters,
                    categories: [
                        categoryId
                    ]
                };
                const searchParams = new URLSearchParams();
                // IMPORTANTE: Aplicar filtro de categoría PRIMERO para evitar conflictos de parámetros
                searchParams.set('categories', categoryId);
                // Aplicar filtros base
                if (filters.brand) searchParams.set('brand', filters.brand);
                if (filters.search) searchParams.set('search', filters.search);
                if (filters.priceMin !== undefined) searchParams.set('priceMin', filters.priceMin.toString());
                if (filters.priceMax !== undefined) searchParams.set('priceMax', filters.priceMax.toString());
                if (filters.brands && filters.brands.length > 0) {
                    searchParams.set('brands', filters.brands.join(','));
                }
                if (filters.paintTypes && filters.paintTypes.length > 0) {
                    searchParams.set('paintTypes', filters.paintTypes.join(','));
                }
                // Aplicar paginación al final
                searchParams.set('limit', '1');
                searchParams.set('page', '1');
                const url = `/api/products?${searchParams.toString()}`;
                const response = await fetch(url);
                if (!response.ok) {
                    return {
                        categoryId,
                        count: 0
                    };
                }
                const result = await (0, _jsonutils.safeApiResponseJson)(response);
                if (!result.success) {
                    return {
                        categoryId,
                        count: 0
                    };
                }
                const count = result.data?.pagination?.total || 0;
                return {
                    categoryId,
                    count
                };
            });
            const results = await Promise.all(promises);
            results.forEach(({ categoryId, count })=>{
                counts[categoryId] = count;
            });
            return counts;
        },
        staleTime: 2 * 60 * 1000,
        gcTime: 5 * 60 * 1000,
        retry: 1,
        enabled: categoryIds.length > 0
    });
};
const getActiveFiltersCount = (filters)=>{
    let count = 0;
    if (filters.categories && filters.categories.length > 0) count += filters.categories.length;
    if (filters.brands && filters.brands.length > 0) count += filters.brands.length;
    if (filters.paintTypes && filters.paintTypes.length > 0) count += filters.paintTypes.length;
    if (filters.priceMin !== undefined || filters.priceMax !== undefined) count += 1;
    if (filters.search) count += 1;
    return count;
};
const hasActiveFilters = (filters)=>{
    return getActiveFiltersCount(filters) > 0;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUZpbHRlcmVkUHJvZHVjdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBQcm9kdWN0V2l0aENhdGVnb3J5LCBQYWdpbmF0ZWRSZXNwb25zZSB9IGZyb20gJ0AvdHlwZXMvYXBpJztcbmltcG9ydCB7IHNhZmVBcGlSZXNwb25zZUpzb24gfSBmcm9tICdAL2xpYi9qc29uLXV0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIFBBUkEgRklMVFJPUyBERSBQUk9EVUNUT1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdEZpbHRlcnMge1xuICAvLyBGaWx0cm9zIGLDoXNpY29zXG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xuICBicmFuZD86IHN0cmluZztcbiAgc2VhcmNoPzogc3RyaW5nO1xuICBwcmljZU1pbj86IG51bWJlcjtcbiAgcHJpY2VNYXg/OiBudW1iZXI7XG4gIFxuICAvLyBGaWx0cm9zIGF2YW56YWRvcyAobcO6bHRpcGxlcyB2YWxvcmVzKVxuICBjYXRlZ29yaWVzPzogc3RyaW5nW107XG4gIGJyYW5kcz86IHN0cmluZ1tdO1xuICBwYWludFR5cGVzPzogc3RyaW5nW107XG4gIFxuICAvLyBQYWdpbmFjacOzbiB5IG9yZGVuYW1pZW50b1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbiAgc29ydEJ5PzogJ3ByaWNlJyB8ICduYW1lJyB8ICdjcmVhdGVkX2F0JyB8ICdicmFuZCc7XG4gIHNvcnRPcmRlcj86ICdhc2MnIHwgJ2Rlc2MnO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSyBQQVJBIFBST0RVQ1RPUyBGSUxUUkFET1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCB1c2VGaWx0ZXJlZFByb2R1Y3RzID0gKGZpbHRlcnM6IFByb2R1Y3RGaWx0ZXJzID0ge30pID0+IHtcbiAgcmV0dXJuIHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWydmaWx0ZXJlZC1wcm9kdWN0cycsIGZpbHRlcnNdLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpOiBQcm9taXNlPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PiA9PiB7XG4gICAgICBcbiAgICAgIC8vIENvbnN0cnVpciBVUkwgY29uIHBhcsOhbWV0cm9zXG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICBcbiAgICAgIC8vIEZpbHRyb3MgYsOhc2ljb3NcbiAgICAgIGlmIChmaWx0ZXJzLmNhdGVnb3J5KSBzZWFyY2hQYXJhbXMuc2V0KCdjYXRlZ29yeScsIGZpbHRlcnMuY2F0ZWdvcnkpO1xuICAgICAgaWYgKGZpbHRlcnMuYnJhbmQpIHNlYXJjaFBhcmFtcy5zZXQoJ2JyYW5kJywgZmlsdGVycy5icmFuZCk7XG4gICAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHNlYXJjaFBhcmFtcy5zZXQoJ3NlYXJjaCcsIGZpbHRlcnMuc2VhcmNoKTtcbiAgICAgIGlmIChmaWx0ZXJzLnByaWNlTWluICE9PSB1bmRlZmluZWQpIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWluJywgZmlsdGVycy5wcmljZU1pbi50b1N0cmluZygpKTtcbiAgICAgIGlmIChmaWx0ZXJzLnByaWNlTWF4ICE9PSB1bmRlZmluZWQpIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWF4JywgZmlsdGVycy5wcmljZU1heC50b1N0cmluZygpKTtcbiAgICAgIFxuICAgICAgLy8gRmlsdHJvcyBhdmFuemFkb3MgKGFycmF5cylcbiAgICAgIGlmIChmaWx0ZXJzLmNhdGVnb3JpZXMgJiYgZmlsdGVycy5jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnY2F0ZWdvcmllcycsIGZpbHRlcnMuY2F0ZWdvcmllcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMuYnJhbmRzICYmIGZpbHRlcnMuYnJhbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnYnJhbmRzJywgZmlsdGVycy5icmFuZHMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLnBhaW50VHlwZXMgJiYgZmlsdGVycy5wYWludFR5cGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgncGFpbnRUeXBlcycsIGZpbHRlcnMucGFpbnRUeXBlcy5qb2luKCcsJykpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQYWdpbmFjacOzbiB5IG9yZGVuYW1pZW50b1xuICAgICAgaWYgKGZpbHRlcnMucGFnZSkgc2VhcmNoUGFyYW1zLnNldCgncGFnZScsIGZpbHRlcnMucGFnZS50b1N0cmluZygpKTtcbiAgICAgIGlmIChmaWx0ZXJzLmxpbWl0KSBzZWFyY2hQYXJhbXMuc2V0KCdsaW1pdCcsIGZpbHRlcnMubGltaXQudG9TdHJpbmcoKSk7XG4gICAgICBpZiAoZmlsdGVycy5zb3J0QnkpIHNlYXJjaFBhcmFtcy5zZXQoJ3NvcnRCeScsIGZpbHRlcnMuc29ydEJ5KTtcbiAgICAgIGlmIChmaWx0ZXJzLnNvcnRPcmRlcikgc2VhcmNoUGFyYW1zLnNldCgnc29ydE9yZGVyJywgZmlsdGVycy5zb3J0T3JkZXIpO1xuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9wcm9kdWN0cz8ke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWA7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlQXBpUmVzcG9uc2VKc29uPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PihyZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnRXJyb3IgcGFyc2luZyByZXNwb25zZScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGEhO1xuICAgIH0sXG4gICAgc3RhbGVUaW1lOiA1ICogNjAgKiAxMDAwLCAvLyA1IG1pbnV0b3NcbiAgICBnY1RpbWU6IDEwICogNjAgKiAxMDAwLCAvLyAxMCBtaW51dG9zXG4gICAgcmV0cnk6IDIsXG4gICAgcmV0cnlEZWxheTogKGF0dGVtcHRJbmRleCkgPT4gTWF0aC5taW4oMTAwMCAqIDIgKiogYXR0ZW1wdEluZGV4LCAzMDAwMCksXG4gICAgZW5hYmxlZDogdHJ1ZSwgLy8gU2llbXByZSBoYWJpbGl0YWRvLCBpbmNsdXNvIHNpbiBmaWx0cm9zXG4gIH0pO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0sgUEFSQSBDT05URU8gREUgUFJPRFVDVE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgdXNlUHJvZHVjdENvdW50ID0gKGZpbHRlcnM6IE9taXQ8UHJvZHVjdEZpbHRlcnMsICdwYWdlJyB8ICdsaW1pdCc+ID0ge30pID0+IHtcbiAgcmV0dXJuIHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWydwcm9kdWN0LWNvdW50JywgZmlsdGVyc10sXG4gICAgcXVlcnlGbjogYXN5bmMgKCk6IFByb21pc2U8bnVtYmVyPiA9PiB7XG5cbiAgICAgIC8vIFVzYXIgbG9zIG1pc21vcyBmaWx0cm9zIHBlcm8gY29uIGxpbWl0PTEgcGFyYSBvYnRlbmVyIHNvbG8gZWwgY291bnRcbiAgICAgIGNvbnN0IGNvdW50RmlsdGVycyA9IHsgLi4uZmlsdGVycywgcGFnZTogMSwgbGltaXQ6IDEgfTtcbiAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblxuICAgICAgLy8gQXBsaWNhciBsb3MgbWlzbW9zIGZpbHRyb3MgcXVlIHVzZUZpbHRlcmVkUHJvZHVjdHNcbiAgICAgIGlmIChjb3VudEZpbHRlcnMuY2F0ZWdvcnkpIHNlYXJjaFBhcmFtcy5zZXQoJ2NhdGVnb3J5JywgY291bnRGaWx0ZXJzLmNhdGVnb3J5KTtcbiAgICAgIGlmIChjb3VudEZpbHRlcnMuYnJhbmQpIHNlYXJjaFBhcmFtcy5zZXQoJ2JyYW5kJywgY291bnRGaWx0ZXJzLmJyYW5kKTtcbiAgICAgIGlmIChjb3VudEZpbHRlcnMuc2VhcmNoKSBzZWFyY2hQYXJhbXMuc2V0KCdzZWFyY2gnLCBjb3VudEZpbHRlcnMuc2VhcmNoKTtcbiAgICAgIGlmIChjb3VudEZpbHRlcnMucHJpY2VNaW4gIT09IHVuZGVmaW5lZCkgc2VhcmNoUGFyYW1zLnNldCgncHJpY2VNaW4nLCBjb3VudEZpbHRlcnMucHJpY2VNaW4udG9TdHJpbmcoKSk7XG4gICAgICBpZiAoY291bnRGaWx0ZXJzLnByaWNlTWF4ICE9PSB1bmRlZmluZWQpIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWF4JywgY291bnRGaWx0ZXJzLnByaWNlTWF4LnRvU3RyaW5nKCkpO1xuXG4gICAgICBpZiAoY291bnRGaWx0ZXJzLmNhdGVnb3JpZXMgJiYgY291bnRGaWx0ZXJzLmNhdGVnb3JpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdjYXRlZ29yaWVzJywgY291bnRGaWx0ZXJzLmNhdGVnb3JpZXMuam9pbignLCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb3VudEZpbHRlcnMuYnJhbmRzICYmIGNvdW50RmlsdGVycy5icmFuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdicmFuZHMnLCBjb3VudEZpbHRlcnMuYnJhbmRzLmpvaW4oJywnKSk7XG4gICAgICB9XG4gICAgICBpZiAoY291bnRGaWx0ZXJzLnBhaW50VHlwZXMgJiYgY291bnRGaWx0ZXJzLnBhaW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwYWludFR5cGVzJywgY291bnRGaWx0ZXJzLnBhaW50VHlwZXMuam9pbignLCcpKTtcbiAgICAgIH1cblxuICAgICAgc2VhcmNoUGFyYW1zLnNldCgncGFnZScsICcxJyk7XG4gICAgICBzZWFyY2hQYXJhbXMuc2V0KCdsaW1pdCcsICcxJyk7XG5cbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3Byb2R1Y3RzPyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlQXBpUmVzcG9uc2VKc29uPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PihyZXNwb25zZSk7XG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnRXJyb3IgcGFyc2luZyByZXNwb25zZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3VudCA9IHJlc3VsdC5kYXRhPy5wYWdpbmF0aW9uPy50b3RhbCB8fCAwO1xuXG4gICAgICByZXR1cm4gY291bnQ7XG4gICAgfSxcbiAgICBzdGFsZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRvc1xuICAgIGdjVGltZTogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0b3NcbiAgICByZXRyeTogMixcbiAgICBlbmFibGVkOiB0cnVlLFxuICB9KTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBBUkEgQ09OVEVPIERJTsOBTUlDTyBQT1IgQ0FURUdPUsONQVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHVzZUNhdGVnb3J5UHJvZHVjdENvdW50cyA9IChcbiAgY2F0ZWdvcnlJZHM6IHN0cmluZ1tdLFxuICBiYXNlRmlsdGVyczogT21pdDxQcm9kdWN0RmlsdGVycywgJ2NhdGVnb3JpZXMnIHwgJ2NhdGVnb3J5Jz4gPSB7fVxuKSA9PiB7XG4gIHJldHVybiB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXk6IFsnY2F0ZWdvcnktcHJvZHVjdC1jb3VudHMnLCBjYXRlZ29yeUlkcywgYmFzZUZpbHRlcnNdLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0+IHtcbiAgICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgICAvLyBPYnRlbmVyIGNvbnRlbyBwYXJhIGNhZGEgY2F0ZWdvcsOtYSBpbmRpdmlkdWFsbWVudGVcbiAgICAgIGNvbnN0IHByb21pc2VzID0gY2F0ZWdvcnlJZHMubWFwKGFzeW5jIChjYXRlZ29yeUlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSB7IC4uLmJhc2VGaWx0ZXJzLCBjYXRlZ29yaWVzOiBbY2F0ZWdvcnlJZF0gfTtcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXG4gICAgICAgIC8vIElNUE9SVEFOVEU6IEFwbGljYXIgZmlsdHJvIGRlIGNhdGVnb3LDrWEgUFJJTUVSTyBwYXJhIGV2aXRhciBjb25mbGljdG9zIGRlIHBhcsOhbWV0cm9zXG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2NhdGVnb3JpZXMnLCBjYXRlZ29yeUlkKTtcblxuICAgICAgICAvLyBBcGxpY2FyIGZpbHRyb3MgYmFzZVxuICAgICAgICBpZiAoZmlsdGVycy5icmFuZCkgc2VhcmNoUGFyYW1zLnNldCgnYnJhbmQnLCBmaWx0ZXJzLmJyYW5kKTtcbiAgICAgICAgaWYgKGZpbHRlcnMuc2VhcmNoKSBzZWFyY2hQYXJhbXMuc2V0KCdzZWFyY2gnLCBmaWx0ZXJzLnNlYXJjaCk7XG4gICAgICAgIGlmIChmaWx0ZXJzLnByaWNlTWluICE9PSB1bmRlZmluZWQpIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWluJywgZmlsdGVycy5wcmljZU1pbi50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKGZpbHRlcnMucHJpY2VNYXggIT09IHVuZGVmaW5lZCkgc2VhcmNoUGFyYW1zLnNldCgncHJpY2VNYXgnLCBmaWx0ZXJzLnByaWNlTWF4LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAoZmlsdGVycy5icmFuZHMgJiYgZmlsdGVycy5icmFuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2JyYW5kcycsIGZpbHRlcnMuYnJhbmRzLmpvaW4oJywnKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlcnMucGFpbnRUeXBlcyAmJiBmaWx0ZXJzLnBhaW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ3BhaW50VHlwZXMnLCBmaWx0ZXJzLnBhaW50VHlwZXMuam9pbignLCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwbGljYXIgcGFnaW5hY2nDs24gYWwgZmluYWxcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnbGltaXQnLCAnMScpO1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwYWdlJywgJzEnKTtcblxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9wcm9kdWN0cz8ke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWA7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICByZXR1cm4geyBjYXRlZ29yeUlkLCBjb3VudDogMCB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FmZUFwaVJlc3BvbnNlSnNvbjxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj4ocmVzcG9uc2UpO1xuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4geyBjYXRlZ29yeUlkLCBjb3VudDogMCB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY291bnQgPSByZXN1bHQuZGF0YT8ucGFnaW5hdGlvbj8udG90YWwgfHwgMDtcbiAgICAgICAgcmV0dXJuIHsgY2F0ZWdvcnlJZCwgY291bnQgfTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2goKHsgY2F0ZWdvcnlJZCwgY291bnQgfSkgPT4ge1xuICAgICAgICBjb3VudHNbY2F0ZWdvcnlJZF0gPSBjb3VudDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gY291bnRzO1xuICAgIH0sXG4gICAgc3RhbGVUaW1lOiAyICogNjAgKiAxMDAwLCAvLyAyIG1pbnV0b3MgKG3DoXMgZnJlY3VlbnRlIHBhcmEgY29udGVvcyBkaW7DoW1pY29zKVxuICAgIGdjVGltZTogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dG9zXG4gICAgcmV0cnk6IDEsXG4gICAgZW5hYmxlZDogY2F0ZWdvcnlJZHMubGVuZ3RoID4gMCxcbiAgfSk7XG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IGdldEFjdGl2ZUZpbHRlcnNDb3VudCA9IChmaWx0ZXJzOiBQcm9kdWN0RmlsdGVycyk6IG51bWJlciA9PiB7XG4gIGxldCBjb3VudCA9IDA7XG4gIFxuICBpZiAoZmlsdGVycy5jYXRlZ29yaWVzICYmIGZpbHRlcnMuY2F0ZWdvcmllcy5sZW5ndGggPiAwKSBjb3VudCArPSBmaWx0ZXJzLmNhdGVnb3JpZXMubGVuZ3RoO1xuICBpZiAoZmlsdGVycy5icmFuZHMgJiYgZmlsdGVycy5icmFuZHMubGVuZ3RoID4gMCkgY291bnQgKz0gZmlsdGVycy5icmFuZHMubGVuZ3RoO1xuICBpZiAoZmlsdGVycy5wYWludFR5cGVzICYmIGZpbHRlcnMucGFpbnRUeXBlcy5sZW5ndGggPiAwKSBjb3VudCArPSBmaWx0ZXJzLnBhaW50VHlwZXMubGVuZ3RoO1xuICBpZiAoZmlsdGVycy5wcmljZU1pbiAhPT0gdW5kZWZpbmVkIHx8IGZpbHRlcnMucHJpY2VNYXggIT09IHVuZGVmaW5lZCkgY291bnQgKz0gMTtcbiAgaWYgKGZpbHRlcnMuc2VhcmNoKSBjb3VudCArPSAxO1xuICBcbiAgcmV0dXJuIGNvdW50O1xufTtcblxuZXhwb3J0IGNvbnN0IGhhc0FjdGl2ZUZpbHRlcnMgPSAoZmlsdGVyczogUHJvZHVjdEZpbHRlcnMpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGdldEFjdGl2ZUZpbHRlcnNDb3VudChmaWx0ZXJzKSA+IDA7XG59O1xuIl0sIm5hbWVzIjpbImdldEFjdGl2ZUZpbHRlcnNDb3VudCIsImhhc0FjdGl2ZUZpbHRlcnMiLCJ1c2VDYXRlZ29yeVByb2R1Y3RDb3VudHMiLCJ1c2VGaWx0ZXJlZFByb2R1Y3RzIiwidXNlUHJvZHVjdENvdW50IiwiZmlsdGVycyIsInVzZVF1ZXJ5IiwicXVlcnlLZXkiLCJxdWVyeUZuIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiY2F0ZWdvcnkiLCJzZXQiLCJicmFuZCIsInNlYXJjaCIsInByaWNlTWluIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJwcmljZU1heCIsImNhdGVnb3JpZXMiLCJsZW5ndGgiLCJqb2luIiwiYnJhbmRzIiwicGFpbnRUeXBlcyIsInBhZ2UiLCJsaW1pdCIsInNvcnRCeSIsInNvcnRPcmRlciIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInJlc3VsdCIsInNhZmVBcGlSZXNwb25zZUpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJkYXRhIiwic3RhbGVUaW1lIiwiZ2NUaW1lIiwicmV0cnkiLCJyZXRyeURlbGF5IiwiYXR0ZW1wdEluZGV4IiwiTWF0aCIsIm1pbiIsImVuYWJsZWQiLCJjb3VudEZpbHRlcnMiLCJjb3VudCIsInBhZ2luYXRpb24iLCJ0b3RhbCIsImNhdGVnb3J5SWRzIiwiYmFzZUZpbHRlcnMiLCJjb3VudHMiLCJwcm9taXNlcyIsIm1hcCIsImNhdGVnb3J5SWQiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImZvckVhY2giXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7UUE2TmFBO2VBQUFBOztRQVlBQztlQUFBQTs7UUFsRkFDO2VBQUFBOztRQXJIQUM7ZUFBQUE7O1FBNERBQztlQUFBQTs7OzRCQTVGWTsyQkFFVztBQThCN0IsTUFBTUQsc0JBQXNCLENBQUNFLFVBQTBCLENBQUMsQ0FBQztJQUM5RCxPQUFPQyxJQUFBQSxvQkFBUSxFQUFDO1FBQ2RDLFVBQVU7WUFBQztZQUFxQkY7U0FBUTtRQUN4Q0csU0FBUztZQUVQLCtCQUErQjtZQUMvQixNQUFNQyxlQUFlLElBQUlDO1lBRXpCLGtCQUFrQjtZQUNsQixJQUFJTCxRQUFRTSxRQUFRLEVBQUVGLGFBQWFHLEdBQUcsQ0FBQyxZQUFZUCxRQUFRTSxRQUFRO1lBQ25FLElBQUlOLFFBQVFRLEtBQUssRUFBRUosYUFBYUcsR0FBRyxDQUFDLFNBQVNQLFFBQVFRLEtBQUs7WUFDMUQsSUFBSVIsUUFBUVMsTUFBTSxFQUFFTCxhQUFhRyxHQUFHLENBQUMsVUFBVVAsUUFBUVMsTUFBTTtZQUM3RCxJQUFJVCxRQUFRVSxRQUFRLEtBQUtDLFdBQVdQLGFBQWFHLEdBQUcsQ0FBQyxZQUFZUCxRQUFRVSxRQUFRLENBQUNFLFFBQVE7WUFDMUYsSUFBSVosUUFBUWEsUUFBUSxLQUFLRixXQUFXUCxhQUFhRyxHQUFHLENBQUMsWUFBWVAsUUFBUWEsUUFBUSxDQUFDRCxRQUFRO1lBRTFGLDZCQUE2QjtZQUM3QixJQUFJWixRQUFRYyxVQUFVLElBQUlkLFFBQVFjLFVBQVUsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7Z0JBQ3ZEWCxhQUFhRyxHQUFHLENBQUMsY0FBY1AsUUFBUWMsVUFBVSxDQUFDRSxJQUFJLENBQUM7WUFDekQ7WUFDQSxJQUFJaEIsUUFBUWlCLE1BQU0sSUFBSWpCLFFBQVFpQixNQUFNLENBQUNGLE1BQU0sR0FBRyxHQUFHO2dCQUMvQ1gsYUFBYUcsR0FBRyxDQUFDLFVBQVVQLFFBQVFpQixNQUFNLENBQUNELElBQUksQ0FBQztZQUNqRDtZQUNBLElBQUloQixRQUFRa0IsVUFBVSxJQUFJbEIsUUFBUWtCLFVBQVUsQ0FBQ0gsTUFBTSxHQUFHLEdBQUc7Z0JBQ3ZEWCxhQUFhRyxHQUFHLENBQUMsY0FBY1AsUUFBUWtCLFVBQVUsQ0FBQ0YsSUFBSSxDQUFDO1lBQ3pEO1lBRUEsNEJBQTRCO1lBQzVCLElBQUloQixRQUFRbUIsSUFBSSxFQUFFZixhQUFhRyxHQUFHLENBQUMsUUFBUVAsUUFBUW1CLElBQUksQ0FBQ1AsUUFBUTtZQUNoRSxJQUFJWixRQUFRb0IsS0FBSyxFQUFFaEIsYUFBYUcsR0FBRyxDQUFDLFNBQVNQLFFBQVFvQixLQUFLLENBQUNSLFFBQVE7WUFDbkUsSUFBSVosUUFBUXFCLE1BQU0sRUFBRWpCLGFBQWFHLEdBQUcsQ0FBQyxVQUFVUCxRQUFRcUIsTUFBTTtZQUM3RCxJQUFJckIsUUFBUXNCLFNBQVMsRUFBRWxCLGFBQWFHLEdBQUcsQ0FBQyxhQUFhUCxRQUFRc0IsU0FBUztZQUV0RSxNQUFNQyxNQUFNLENBQUMsY0FBYyxFQUFFbkIsYUFBYVEsUUFBUSxJQUFJO1lBRXRELE1BQU1ZLFdBQVcsTUFBTUMsTUFBTUY7WUFFN0IsSUFBSSxDQUFDQyxTQUFTRSxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLE1BQU0sRUFBRUgsU0FBU0ksTUFBTSxDQUFDLEVBQUUsRUFBRUosU0FBU0ssVUFBVSxFQUFFO1lBQ3BFO1lBRUEsTUFBTUMsU0FBUyxNQUFNQyxJQUFBQSw4QkFBbUIsRUFBeUNQO1lBRWpGLElBQUksQ0FBQ00sT0FBT0UsT0FBTyxFQUFFO2dCQUNuQixNQUFNLElBQUlMLE1BQU1HLE9BQU9HLEtBQUssSUFBSTtZQUNsQztZQUVBLE9BQU9ILE9BQU9JLElBQUk7UUFDcEI7UUFDQUMsV0FBVyxJQUFJLEtBQUs7UUFDcEJDLFFBQVEsS0FBSyxLQUFLO1FBQ2xCQyxPQUFPO1FBQ1BDLFlBQVksQ0FBQ0MsZUFBaUJDLEtBQUtDLEdBQUcsQ0FBQyxPQUFPLEtBQUtGLGNBQWM7UUFDakVHLFNBQVM7SUFDWDtBQUNGO0FBTU8sTUFBTTNDLGtCQUFrQixDQUFDQyxVQUFrRCxDQUFDLENBQUM7SUFDbEYsT0FBT0MsSUFBQUEsb0JBQVEsRUFBQztRQUNkQyxVQUFVO1lBQUM7WUFBaUJGO1NBQVE7UUFDcENHLFNBQVM7WUFFUCxzRUFBc0U7WUFDdEUsTUFBTXdDLGVBQWU7Z0JBQUUsR0FBRzNDLE9BQU87Z0JBQUVtQixNQUFNO2dCQUFHQyxPQUFPO1lBQUU7WUFDckQsTUFBTWhCLGVBQWUsSUFBSUM7WUFFekIscURBQXFEO1lBQ3JELElBQUlzQyxhQUFhckMsUUFBUSxFQUFFRixhQUFhRyxHQUFHLENBQUMsWUFBWW9DLGFBQWFyQyxRQUFRO1lBQzdFLElBQUlxQyxhQUFhbkMsS0FBSyxFQUFFSixhQUFhRyxHQUFHLENBQUMsU0FBU29DLGFBQWFuQyxLQUFLO1lBQ3BFLElBQUltQyxhQUFhbEMsTUFBTSxFQUFFTCxhQUFhRyxHQUFHLENBQUMsVUFBVW9DLGFBQWFsQyxNQUFNO1lBQ3ZFLElBQUlrQyxhQUFhakMsUUFBUSxLQUFLQyxXQUFXUCxhQUFhRyxHQUFHLENBQUMsWUFBWW9DLGFBQWFqQyxRQUFRLENBQUNFLFFBQVE7WUFDcEcsSUFBSStCLGFBQWE5QixRQUFRLEtBQUtGLFdBQVdQLGFBQWFHLEdBQUcsQ0FBQyxZQUFZb0MsYUFBYTlCLFFBQVEsQ0FBQ0QsUUFBUTtZQUVwRyxJQUFJK0IsYUFBYTdCLFVBQVUsSUFBSTZCLGFBQWE3QixVQUFVLENBQUNDLE1BQU0sR0FBRyxHQUFHO2dCQUNqRVgsYUFBYUcsR0FBRyxDQUFDLGNBQWNvQyxhQUFhN0IsVUFBVSxDQUFDRSxJQUFJLENBQUM7WUFDOUQ7WUFDQSxJQUFJMkIsYUFBYTFCLE1BQU0sSUFBSTBCLGFBQWExQixNQUFNLENBQUNGLE1BQU0sR0FBRyxHQUFHO2dCQUN6RFgsYUFBYUcsR0FBRyxDQUFDLFVBQVVvQyxhQUFhMUIsTUFBTSxDQUFDRCxJQUFJLENBQUM7WUFDdEQ7WUFDQSxJQUFJMkIsYUFBYXpCLFVBQVUsSUFBSXlCLGFBQWF6QixVQUFVLENBQUNILE1BQU0sR0FBRyxHQUFHO2dCQUNqRVgsYUFBYUcsR0FBRyxDQUFDLGNBQWNvQyxhQUFhekIsVUFBVSxDQUFDRixJQUFJLENBQUM7WUFDOUQ7WUFFQVosYUFBYUcsR0FBRyxDQUFDLFFBQVE7WUFDekJILGFBQWFHLEdBQUcsQ0FBQyxTQUFTO1lBRTFCLE1BQU1nQixNQUFNLENBQUMsY0FBYyxFQUFFbkIsYUFBYVEsUUFBUSxJQUFJO1lBQ3RELE1BQU1ZLFdBQVcsTUFBTUMsTUFBTUY7WUFFN0IsSUFBSSxDQUFDQyxTQUFTRSxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLE1BQU0sRUFBRUgsU0FBU0ksTUFBTSxDQUFDLEVBQUUsRUFBRUosU0FBU0ssVUFBVSxFQUFFO1lBQ3BFO1lBRUEsTUFBTUMsU0FBUyxNQUFNQyxJQUFBQSw4QkFBbUIsRUFBeUNQO1lBRWpGLElBQUksQ0FBQ00sT0FBT0UsT0FBTyxFQUFFO2dCQUNuQixNQUFNLElBQUlMLE1BQU1HLE9BQU9HLEtBQUssSUFBSTtZQUNsQztZQUVBLE1BQU1XLFFBQVFkLE9BQU9JLElBQUksRUFBRVcsWUFBWUMsU0FBUztZQUVoRCxPQUFPRjtRQUNUO1FBQ0FULFdBQVcsSUFBSSxLQUFLO1FBQ3BCQyxRQUFRLEtBQUssS0FBSztRQUNsQkMsT0FBTztRQUNQSyxTQUFTO0lBQ1g7QUFDRjtBQU1PLE1BQU03QywyQkFBMkIsQ0FDdENrRCxhQUNBQyxjQUErRCxDQUFDLENBQUM7SUFFakUsT0FBTy9DLElBQUFBLG9CQUFRLEVBQUM7UUFDZEMsVUFBVTtZQUFDO1lBQTJCNkM7WUFBYUM7U0FBWTtRQUMvRDdDLFNBQVM7WUFDUCxNQUFNOEMsU0FBaUMsQ0FBQztZQUV4QyxxREFBcUQ7WUFDckQsTUFBTUMsV0FBV0gsWUFBWUksR0FBRyxDQUFDLE9BQU9DO2dCQUN0QyxNQUFNcEQsVUFBVTtvQkFBRSxHQUFHZ0QsV0FBVztvQkFBRWxDLFlBQVk7d0JBQUNzQztxQkFBVztnQkFBQztnQkFDM0QsTUFBTWhELGVBQWUsSUFBSUM7Z0JBRXpCLHVGQUF1RjtnQkFDdkZELGFBQWFHLEdBQUcsQ0FBQyxjQUFjNkM7Z0JBRS9CLHVCQUF1QjtnQkFDdkIsSUFBSXBELFFBQVFRLEtBQUssRUFBRUosYUFBYUcsR0FBRyxDQUFDLFNBQVNQLFFBQVFRLEtBQUs7Z0JBQzFELElBQUlSLFFBQVFTLE1BQU0sRUFBRUwsYUFBYUcsR0FBRyxDQUFDLFVBQVVQLFFBQVFTLE1BQU07Z0JBQzdELElBQUlULFFBQVFVLFFBQVEsS0FBS0MsV0FBV1AsYUFBYUcsR0FBRyxDQUFDLFlBQVlQLFFBQVFVLFFBQVEsQ0FBQ0UsUUFBUTtnQkFDMUYsSUFBSVosUUFBUWEsUUFBUSxLQUFLRixXQUFXUCxhQUFhRyxHQUFHLENBQUMsWUFBWVAsUUFBUWEsUUFBUSxDQUFDRCxRQUFRO2dCQUMxRixJQUFJWixRQUFRaUIsTUFBTSxJQUFJakIsUUFBUWlCLE1BQU0sQ0FBQ0YsTUFBTSxHQUFHLEdBQUc7b0JBQy9DWCxhQUFhRyxHQUFHLENBQUMsVUFBVVAsUUFBUWlCLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDO2dCQUNqRDtnQkFDQSxJQUFJaEIsUUFBUWtCLFVBQVUsSUFBSWxCLFFBQVFrQixVQUFVLENBQUNILE1BQU0sR0FBRyxHQUFHO29CQUN2RFgsYUFBYUcsR0FBRyxDQUFDLGNBQWNQLFFBQVFrQixVQUFVLENBQUNGLElBQUksQ0FBQztnQkFDekQ7Z0JBRUEsOEJBQThCO2dCQUM5QlosYUFBYUcsR0FBRyxDQUFDLFNBQVM7Z0JBQzFCSCxhQUFhRyxHQUFHLENBQUMsUUFBUTtnQkFFekIsTUFBTWdCLE1BQU0sQ0FBQyxjQUFjLEVBQUVuQixhQUFhUSxRQUFRLElBQUk7Z0JBRXRELE1BQU1ZLFdBQVcsTUFBTUMsTUFBTUY7Z0JBRTdCLElBQUksQ0FBQ0MsU0FBU0UsRUFBRSxFQUFFO29CQUNoQixPQUFPO3dCQUFFMEI7d0JBQVlSLE9BQU87b0JBQUU7Z0JBQ2hDO2dCQUVBLE1BQU1kLFNBQVMsTUFBTUMsSUFBQUEsOEJBQW1CLEVBQXlDUDtnQkFFakYsSUFBSSxDQUFDTSxPQUFPRSxPQUFPLEVBQUU7b0JBQ25CLE9BQU87d0JBQUVvQjt3QkFBWVIsT0FBTztvQkFBRTtnQkFDaEM7Z0JBRUEsTUFBTUEsUUFBUWQsT0FBT0ksSUFBSSxFQUFFVyxZQUFZQyxTQUFTO2dCQUNoRCxPQUFPO29CQUFFTTtvQkFBWVI7Z0JBQU07WUFDN0I7WUFFQSxNQUFNUyxVQUFVLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0w7WUFFbENHLFFBQVFHLE9BQU8sQ0FBQyxDQUFDLEVBQUVKLFVBQVUsRUFBRVIsS0FBSyxFQUFFO2dCQUNwQ0ssTUFBTSxDQUFDRyxXQUFXLEdBQUdSO1lBQ3ZCO1lBRUEsT0FBT0s7UUFDVDtRQUNBZCxXQUFXLElBQUksS0FBSztRQUNwQkMsUUFBUSxJQUFJLEtBQUs7UUFDakJDLE9BQU87UUFDUEssU0FBU0ssWUFBWWhDLE1BQU0sR0FBRztJQUNoQztBQUNGO0FBTU8sTUFBTXBCLHdCQUF3QixDQUFDSztJQUNwQyxJQUFJNEMsUUFBUTtJQUVaLElBQUk1QyxRQUFRYyxVQUFVLElBQUlkLFFBQVFjLFVBQVUsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc2QixTQUFTNUMsUUFBUWMsVUFBVSxDQUFDQyxNQUFNO0lBQzNGLElBQUlmLFFBQVFpQixNQUFNLElBQUlqQixRQUFRaUIsTUFBTSxDQUFDRixNQUFNLEdBQUcsR0FBRzZCLFNBQVM1QyxRQUFRaUIsTUFBTSxDQUFDRixNQUFNO0lBQy9FLElBQUlmLFFBQVFrQixVQUFVLElBQUlsQixRQUFRa0IsVUFBVSxDQUFDSCxNQUFNLEdBQUcsR0FBRzZCLFNBQVM1QyxRQUFRa0IsVUFBVSxDQUFDSCxNQUFNO0lBQzNGLElBQUlmLFFBQVFVLFFBQVEsS0FBS0MsYUFBYVgsUUFBUWEsUUFBUSxLQUFLRixXQUFXaUMsU0FBUztJQUMvRSxJQUFJNUMsUUFBUVMsTUFBTSxFQUFFbUMsU0FBUztJQUU3QixPQUFPQTtBQUNUO0FBRU8sTUFBTWhELG1CQUFtQixDQUFDSTtJQUMvQixPQUFPTCxzQkFBc0JLLFdBQVc7QUFDMUMifQ==