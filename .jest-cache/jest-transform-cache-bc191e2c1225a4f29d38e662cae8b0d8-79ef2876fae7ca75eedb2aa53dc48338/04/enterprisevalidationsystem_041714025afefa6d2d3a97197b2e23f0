a2ccb3ccf8794f8c184c3b334b3eaae4
/**
 * Sistema Enterprise de Validación y Sanitización
 * Unifica y extiende todas las validaciones con capacidades enterprise
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ENTERPRISE_VALIDATION_CONFIGS: function() {
        return ENTERPRISE_VALIDATION_CONFIGS;
    },
    EnterpriseSanitizer: function() {
        return EnterpriseSanitizer;
    },
    EnterpriseValidator: function() {
        return EnterpriseValidator;
    },
    basicSanitizer: function() {
        return basicSanitizer;
    },
    basicValidator: function() {
        return basicValidator;
    },
    criticalSanitizer: function() {
        return criticalSanitizer;
    },
    criticalValidator: function() {
        return criticalValidator;
    },
    highSanitizer: function() {
        return highSanitizer;
    },
    highValidator: function() {
        return highValidator;
    },
    standardSanitizer: function() {
        return standardSanitizer;
    },
    standardValidator: function() {
        return standardValidator;
    }
});
const _isomorphicdompurify = /*#__PURE__*/ _interop_require_default(require("isomorphic-dompurify"));
const _validator = /*#__PURE__*/ _interop_require_default(require("validator"));
const _enterpriseauditsystem = require("../security/enterprise-audit-system");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const ENTERPRISE_VALIDATION_CONFIGS = {
    // Validación crítica para operaciones admin
    CRITICAL_ADMIN: {
        enableSanitization: true,
        enableSecurityValidation: true,
        enableAuditLogging: true,
        securityLevel: 'critical',
        allowedTags: [],
        maxStringLength: 1000,
        maxArrayLength: 100,
        maxObjectDepth: 5
    },
    // Validación alta para APIs de pagos
    HIGH_PAYMENT: {
        enableSanitization: true,
        enableSecurityValidation: true,
        enableAuditLogging: true,
        securityLevel: 'high',
        allowedTags: [],
        maxStringLength: 500,
        maxArrayLength: 50,
        maxObjectDepth: 3
    },
    // Validación estándar para APIs públicas
    STANDARD_PUBLIC: {
        enableSanitization: true,
        enableSecurityValidation: true,
        enableAuditLogging: false,
        securityLevel: 'standard',
        allowedTags: [
            'b',
            'i',
            'em',
            'strong'
        ],
        maxStringLength: 2000,
        maxArrayLength: 200,
        maxObjectDepth: 4
    },
    // Validación básica para contenido de usuario
    BASIC_USER: {
        enableSanitization: true,
        enableSecurityValidation: false,
        enableAuditLogging: false,
        securityLevel: 'basic',
        allowedTags: [
            'b',
            'i',
            'em',
            'strong',
            'p',
            'br'
        ],
        maxStringLength: 5000,
        maxArrayLength: 500,
        maxObjectDepth: 3
    }
};
class EnterpriseSanitizer {
    constructor(config = ENTERPRISE_VALIDATION_CONFIGS.STANDARD_PUBLIC){
        this.config = config;
    }
    /**
   * Sanitiza una cadena de texto
   */ sanitizeString(value, options = {}) {
        if (typeof value !== 'string') {
            return String(value || '');
        }
        let sanitized = value;
        // Remover scripts maliciosos
        if (options.removeScripts !== false) {
            sanitized = sanitized.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
            sanitized = sanitized.replace(/javascript:/gi, '');
            sanitized = sanitized.replace(/on\w+\s*=/gi, '');
        }
        // Remover HTML si está configurado
        if (options.removeHtml) {
            sanitized = _isomorphicdompurify.default.sanitize(sanitized, {
                ALLOWED_TAGS: this.config.allowedTags || [],
                ALLOWED_ATTR: this.config.allowedAttributes || []
            });
        }
        // Escapar HTML
        if (options.escapeHtml) {
            sanitized = _validator.default.escape(sanitized);
        }
        // Normalizar espacios en blanco
        if (options.normalizeWhitespace !== false) {
            sanitized = sanitized.replace(/\s+/g, ' ');
        }
        // Trim strings
        if (options.trimStrings !== false) {
            sanitized = sanitized.trim();
        }
        // Remover emojis si está configurado
        if (options.removeEmojis) {
            sanitized = sanitized.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]/gu, '');
        }
        // Remover palabras clave SQL sospechosas
        if (options.removeSqlKeywords) {
            const sqlKeywords = /\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT)\b/gi;
            sanitized = sanitized.replace(sqlKeywords, '');
        }
        // Aplicar longitud máxima
        const maxLength = options.maxLength || this.config.maxStringLength || 10000;
        if (sanitized.length > maxLength) {
            sanitized = sanitized.substring(0, maxLength);
        }
        // Validar caracteres permitidos
        if (options.allowedCharacters) {
            sanitized = sanitized.replace(options.allowedCharacters, '');
        }
        return sanitized;
    }
    /**
   * Sanitiza un objeto recursivamente
   */ sanitizeObject(obj, depth = 0) {
        const maxDepth = this.config.maxObjectDepth || 10;
        if (depth > maxDepth) {
            throw new Error(`Objeto excede la profundidad máxima permitida (${maxDepth})`);
        }
        if (obj === null || obj === undefined) {
            return obj;
        }
        if (typeof obj === 'string') {
            return this.sanitizeString(obj, {
                removeHtml: this.config.securityLevel === 'critical',
                removeScripts: true,
                removeSqlKeywords: this.config.securityLevel !== 'basic'
            });
        }
        if (typeof obj === 'number' || typeof obj === 'boolean') {
            return obj;
        }
        if (Array.isArray(obj)) {
            const maxLength = this.config.maxArrayLength || 1000;
            if (obj.length > maxLength) {
                throw new Error(`Array excede la longitud máxima permitida (${maxLength})`);
            }
            return obj.map((item)=>this.sanitizeObject(item, depth + 1));
        }
        if (typeof obj === 'object') {
            const sanitized = {};
            for (const [key, value] of Object.entries(obj)){
                const sanitizedKey = this.sanitizeString(key, {
                    removeHtml: true,
                    removeScripts: true
                });
                sanitized[sanitizedKey] = this.sanitizeObject(value, depth + 1);
            }
            return sanitized;
        }
        return obj;
    }
    /**
   * Sanitiza datos de formulario
   */ sanitizeFormData(formData) {
        const sanitized = {};
        for (const [key, value] of formData.entries()){
            const sanitizedKey = this.sanitizeString(key, {
                removeHtml: true
            });
            if (value instanceof File) {
                // Validar archivo
                sanitized[sanitizedKey] = this.sanitizeFile(value);
            } else {
                sanitized[sanitizedKey] = this.sanitizeString(value.toString());
            }
        }
        return sanitized;
    }
    /**
   * Sanitiza información de archivos
   */ sanitizeFile(file) {
        const allowedTypes = [
            'image/jpeg',
            'image/png',
            'image/gif',
            'image/webp',
            'application/pdf',
            'text/plain',
            'text/csv'
        ];
        const sanitizedName = this.sanitizeString(file.name, {
            removeHtml: true,
            removeScripts: true,
            allowedCharacters: /[^a-zA-Z0-9._-]/g
        });
        if (!allowedTypes.includes(file.type)) {
            throw new Error(`Tipo de archivo no permitido: ${file.type}`);
        }
        const maxSize = 10 * 1024 * 1024; // 10MB
        if (file.size > maxSize) {
            throw new Error(`Archivo excede el tamaño máximo permitido (${maxSize} bytes)`);
        }
        return {
            name: sanitizedName,
            size: file.size,
            type: file.type
        };
    }
}
class EnterpriseValidator {
    constructor(config = ENTERPRISE_VALIDATION_CONFIGS.STANDARD_PUBLIC){
        this.config = config;
        this.sanitizer = new EnterpriseSanitizer(config);
    }
    /**
   * Valida y sanitiza datos usando un schema de Zod
   */ async validateAndSanitize(schema, data, context, request) {
        const startTime = Date.now();
        const rulesApplied = [];
        try {
            // 1. Sanitización si está habilitada
            let sanitizedData = data;
            if (this.config.enableSanitization) {
                sanitizedData = this.sanitizer.sanitizeObject(data);
                rulesApplied.push('sanitization');
            }
            // 2. Validación con Zod
            const validationResult = schema.safeParse(sanitizedData);
            if (!validationResult.success) {
                const errors = validationResult.error.errors.map((err)=>({
                        field: err.path.join('.'),
                        message: err.message,
                        code: err.code,
                        value: err.input,
                        severity: this.determineSeverity(err.code, err.path)
                    }));
                // Registrar errores de validación si está habilitado
                if (this.config.enableAuditLogging && context) {
                    await this.logValidationEvent('VALIDATION_FAILED', errors, context, request);
                }
                return {
                    success: false,
                    errors,
                    metadata: {
                        validatedAt: new Date().toISOString(),
                        validatedBy: context?.userId,
                        sanitizationApplied: this.config.enableSanitization || false,
                        securityLevel: this.config.securityLevel || 'standard',
                        rulesApplied,
                        performanceMs: Date.now() - startTime
                    }
                };
            }
            // 3. Validaciones de seguridad adicionales
            if (this.config.enableSecurityValidation) {
                const securityValidation = await this.performSecurityValidation(validationResult.data);
                if (!securityValidation.success) {
                    return securityValidation;
                }
                rulesApplied.push('security_validation');
            }
            // 4. Registrar validación exitosa
            if (this.config.enableAuditLogging && context) {
                await this.logValidationEvent('VALIDATION_SUCCESS', [], context, request);
            }
            return {
                success: true,
                data: validationResult.data,
                sanitized: sanitizedData,
                metadata: {
                    validatedAt: new Date().toISOString(),
                    validatedBy: context?.userId,
                    sanitizationApplied: this.config.enableSanitization || false,
                    securityLevel: this.config.securityLevel || 'standard',
                    rulesApplied,
                    performanceMs: Date.now() - startTime
                }
            };
        } catch (error) {
            const validationError = {
                field: 'general',
                message: error instanceof Error ? error.message : 'Error de validación desconocido',
                code: 'VALIDATION_ERROR',
                severity: 'high'
            };
            // Registrar error crítico
            if (this.config.enableAuditLogging && context) {
                await this.logValidationEvent('VALIDATION_ERROR', [
                    validationError
                ], context, request);
            }
            return {
                success: false,
                errors: [
                    validationError
                ],
                metadata: {
                    validatedAt: new Date().toISOString(),
                    validatedBy: context?.userId,
                    sanitizationApplied: false,
                    securityLevel: this.config.securityLevel || 'standard',
                    rulesApplied,
                    performanceMs: Date.now() - startTime
                }
            };
        }
    }
    /**
   * Determina la severidad de un error de validación
   */ determineSeverity(code, path) {
        // Campos críticos
        const criticalFields = [
            'password',
            'email',
            'payment',
            'admin',
            'auth'
        ];
        const highFields = [
            'user_id',
            'amount',
            'price',
            'quantity'
        ];
        const fieldPath = path.join('.').toLowerCase();
        if (criticalFields.some((field)=>fieldPath.includes(field))) {
            return 'critical';
        }
        if (highFields.some((field)=>fieldPath.includes(field))) {
            return 'high';
        }
        // Códigos críticos
        const criticalCodes = [
            'invalid_type',
            'custom'
        ];
        if (criticalCodes.includes(code)) {
            return 'high';
        }
        return 'medium';
    }
    /**
   * Realiza validaciones de seguridad adicionales
   */ async performSecurityValidation(data) {
        try {
            // Detectar patrones sospechosos
            const dataString = JSON.stringify(data).toLowerCase();
            // Patrones de inyección SQL
            const sqlPatterns = [
                /(\bselect\b.*\bfrom\b)/i,
                /(\bunion\b.*\bselect\b)/i,
                /(\binsert\b.*\binto\b)/i,
                /(\bupdate\b.*\bset\b)/i,
                /(\bdelete\b.*\bfrom\b)/i,
                /(\bdrop\b.*\btable\b)/i
            ];
            for (const pattern of sqlPatterns){
                if (pattern.test(dataString)) {
                    return {
                        success: false,
                        errors: [
                            {
                                field: 'security',
                                message: 'Patrón de inyección SQL detectado',
                                code: 'SQL_INJECTION_DETECTED',
                                severity: 'critical'
                            }
                        ]
                    };
                }
            }
            // Patrones de XSS
            const xssPatterns = [
                /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
                /javascript:/i,
                /on\w+\s*=/i,
                /eval\s*\(/i,
                /expression\s*\(/i
            ];
            for (const pattern of xssPatterns){
                if (pattern.test(dataString)) {
                    return {
                        success: false,
                        errors: [
                            {
                                field: 'security',
                                message: 'Patrón de XSS detectado',
                                code: 'XSS_DETECTED',
                                severity: 'critical'
                            }
                        ]
                    };
                }
            }
            return {
                success: true
            };
        } catch (error) {
            return {
                success: false,
                errors: [
                    {
                        field: 'security',
                        message: 'Error en validación de seguridad',
                        code: 'SECURITY_VALIDATION_ERROR',
                        severity: 'high'
                    }
                ]
            };
        }
    }
    /**
   * Registra eventos de validación en el sistema de auditoría
   */ async logValidationEvent(eventType, errors, context, request) {
        try {
            await _enterpriseauditsystem.enterpriseAuditSystem.logEnterpriseEvent({
                user_id: context.userId,
                event_type: eventType,
                event_category: 'data_validation',
                severity: errors.some((e)=>e.severity === 'critical') ? 'critical' : errors.some((e)=>e.severity === 'high') ? 'high' : 'low',
                description: `Validación de datos: ${eventType}`,
                metadata: {
                    errors_count: errors.length,
                    errors: errors.map((e)=>({
                            field: e.field,
                            code: e.code,
                            severity: e.severity
                        })),
                    security_level: this.config.securityLevel
                },
                ip_address: this.getClientIP(request),
                user_agent: this.getUserAgent(request)
            }, context, request);
        } catch (error) {
            console.error('[ENTERPRISE_VALIDATION] Error logging validation event:', error);
        }
    }
    getClientIP(request) {
        if (!request) return 'unknown';
        if ('headers' in request && typeof request.headers.get === 'function') {
            return request.headers.get('x-forwarded-for') || 'unknown';
        } else if ('headers' in request) {
            const headerValue = request.headers['x-forwarded-for'];
            return Array.isArray(headerValue) ? headerValue[0] : headerValue || 'unknown';
        }
        return 'unknown';
    }
    getUserAgent(request) {
        if (!request) return 'unknown';
        if ('headers' in request && typeof request.headers.get === 'function') {
            return request.headers.get('user-agent') || 'unknown';
        } else if ('headers' in request) {
            const headerValue = request.headers['user-agent'];
            return Array.isArray(headerValue) ? headerValue[0] : headerValue || 'unknown';
        }
        return 'unknown';
    }
}
const criticalValidator = new EnterpriseValidator(ENTERPRISE_VALIDATION_CONFIGS.CRITICAL_ADMIN);
const highValidator = new EnterpriseValidator(ENTERPRISE_VALIDATION_CONFIGS.HIGH_PAYMENT);
const standardValidator = new EnterpriseValidator(ENTERPRISE_VALIDATION_CONFIGS.STANDARD_PUBLIC);
const basicValidator = new EnterpriseValidator(ENTERPRISE_VALIDATION_CONFIGS.BASIC_USER);
const criticalSanitizer = new EnterpriseSanitizer(ENTERPRISE_VALIDATION_CONFIGS.CRITICAL_ADMIN);
const highSanitizer = new EnterpriseSanitizer(ENTERPRISE_VALIDATION_CONFIGS.HIGH_PAYMENT);
const standardSanitizer = new EnterpriseSanitizer(ENTERPRISE_VALIDATION_CONFIGS.STANDARD_PUBLIC);
const basicSanitizer = new EnterpriseSanitizer(ENTERPRISE_VALIDATION_CONFIGS.BASIC_USER);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx2YWxpZGF0aW9uXFxlbnRlcnByaXNlLXZhbGlkYXRpb24tc3lzdGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2lzdGVtYSBFbnRlcnByaXNlIGRlIFZhbGlkYWNpw7NuIHkgU2FuaXRpemFjacOzblxuICogVW5pZmljYSB5IGV4dGllbmRlIHRvZGFzIGxhcyB2YWxpZGFjaW9uZXMgY29uIGNhcGFjaWRhZGVzIGVudGVycHJpc2VcbiAqL1xuXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnO1xuaW1wb3J0IERPTVB1cmlmeSBmcm9tICdpc29tb3JwaGljLWRvbXB1cmlmeSc7XG5pbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5pbXBvcnQgeyBlbnRlcnByaXNlQXVkaXRTeXN0ZW0gfSBmcm9tICdAL2xpYi9zZWN1cml0eS9lbnRlcnByaXNlLWF1ZGl0LXN5c3RlbSc7XG5pbXBvcnQgdHlwZSB7IEVudGVycHJpc2VBdXRoQ29udGV4dCB9IGZyb20gJ0AvbGliL2F1dGgvZW50ZXJwcmlzZS1hdXRoLXV0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIFkgSU5URVJGQUNFUyBFTlRFUlBSSVNFXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25SZXN1bHQ8VCA9IGFueT4ge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkYXRhPzogVDtcbiAgZXJyb3JzPzogVmFsaWRhdGlvbkVycm9yW107XG4gIHNhbml0aXplZD86IFQ7XG4gIG1ldGFkYXRhPzogVmFsaWRhdGlvbk1ldGFkYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25FcnJvciB7XG4gIGZpZWxkOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICB2YWx1ZT86IGFueTtcbiAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25NZXRhZGF0YSB7XG4gIHZhbGlkYXRlZEF0OiBzdHJpbmc7XG4gIHZhbGlkYXRlZEJ5Pzogc3RyaW5nO1xuICBzYW5pdGl6YXRpb25BcHBsaWVkOiBib29sZWFuO1xuICBzZWN1cml0eUxldmVsOiAnYmFzaWMnIHwgJ3N0YW5kYXJkJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIHJ1bGVzQXBwbGllZDogc3RyaW5nW107XG4gIHBlcmZvcm1hbmNlTXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRlcnByaXNlVmFsaWRhdGlvbkNvbmZpZyB7XG4gIGVuYWJsZVNhbml0aXphdGlvbj86IGJvb2xlYW47XG4gIGVuYWJsZVNlY3VyaXR5VmFsaWRhdGlvbj86IGJvb2xlYW47XG4gIGVuYWJsZUF1ZGl0TG9nZ2luZz86IGJvb2xlYW47XG4gIHNlY3VyaXR5TGV2ZWw/OiAnYmFzaWMnIHwgJ3N0YW5kYXJkJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIGN1c3RvbVNhbml0aXplcnM/OiBSZWNvcmQ8c3RyaW5nLCAodmFsdWU6IGFueSkgPT4gYW55PjtcbiAgY3VzdG9tVmFsaWRhdG9ycz86IFJlY29yZDxzdHJpbmcsIHouWm9kU2NoZW1hPjtcbiAgYWxsb3dlZFRhZ3M/OiBzdHJpbmdbXTtcbiAgYWxsb3dlZEF0dHJpYnV0ZXM/OiBzdHJpbmdbXTtcbiAgbWF4U3RyaW5nTGVuZ3RoPzogbnVtYmVyO1xuICBtYXhBcnJheUxlbmd0aD86IG51bWJlcjtcbiAgbWF4T2JqZWN0RGVwdGg/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FuaXRpemF0aW9uT3B0aW9ucyB7XG4gIHJlbW92ZUh0bWw/OiBib29sZWFuO1xuICByZW1vdmVTY3JpcHRzPzogYm9vbGVhbjtcbiAgbm9ybWFsaXplV2hpdGVzcGFjZT86IGJvb2xlYW47XG4gIHRyaW1TdHJpbmdzPzogYm9vbGVhbjtcbiAgZXNjYXBlSHRtbD86IGJvb2xlYW47XG4gIHJlbW92ZUVtb2ppcz86IGJvb2xlYW47XG4gIHJlbW92ZVNxbEtleXdvcmRzPzogYm9vbGVhbjtcbiAgbWF4TGVuZ3RoPzogbnVtYmVyO1xuICBhbGxvd2VkQ2hhcmFjdGVycz86IFJlZ0V4cDtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTkZJR1VSQUNJT05FUyBQUkVERUZJTklEQVMgRU5URVJQUklTRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IEVOVEVSUFJJU0VfVkFMSURBVElPTl9DT05GSUdTOiBSZWNvcmQ8c3RyaW5nLCBFbnRlcnByaXNlVmFsaWRhdGlvbkNvbmZpZz4gPSB7XG4gIC8vIFZhbGlkYWNpw7NuIGNyw610aWNhIHBhcmEgb3BlcmFjaW9uZXMgYWRtaW5cbiAgQ1JJVElDQUxfQURNSU46IHtcbiAgICBlbmFibGVTYW5pdGl6YXRpb246IHRydWUsXG4gICAgZW5hYmxlU2VjdXJpdHlWYWxpZGF0aW9uOiB0cnVlLFxuICAgIGVuYWJsZUF1ZGl0TG9nZ2luZzogdHJ1ZSxcbiAgICBzZWN1cml0eUxldmVsOiAnY3JpdGljYWwnLFxuICAgIGFsbG93ZWRUYWdzOiBbXSwgLy8gTm8gSFRNTCBwZXJtaXRpZG9cbiAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMDAsXG4gICAgbWF4QXJyYXlMZW5ndGg6IDEwMCxcbiAgICBtYXhPYmplY3REZXB0aDogNVxuICB9LFxuXG4gIC8vIFZhbGlkYWNpw7NuIGFsdGEgcGFyYSBBUElzIGRlIHBhZ29zXG4gIEhJR0hfUEFZTUVOVDoge1xuICAgIGVuYWJsZVNhbml0aXphdGlvbjogdHJ1ZSxcbiAgICBlbmFibGVTZWN1cml0eVZhbGlkYXRpb246IHRydWUsXG4gICAgZW5hYmxlQXVkaXRMb2dnaW5nOiB0cnVlLFxuICAgIHNlY3VyaXR5TGV2ZWw6ICdoaWdoJyxcbiAgICBhbGxvd2VkVGFnczogW10sXG4gICAgbWF4U3RyaW5nTGVuZ3RoOiA1MDAsXG4gICAgbWF4QXJyYXlMZW5ndGg6IDUwLFxuICAgIG1heE9iamVjdERlcHRoOiAzXG4gIH0sXG5cbiAgLy8gVmFsaWRhY2nDs24gZXN0w6FuZGFyIHBhcmEgQVBJcyBww7pibGljYXNcbiAgU1RBTkRBUkRfUFVCTElDOiB7XG4gICAgZW5hYmxlU2FuaXRpemF0aW9uOiB0cnVlLFxuICAgIGVuYWJsZVNlY3VyaXR5VmFsaWRhdGlvbjogdHJ1ZSxcbiAgICBlbmFibGVBdWRpdExvZ2dpbmc6IGZhbHNlLFxuICAgIHNlY3VyaXR5TGV2ZWw6ICdzdGFuZGFyZCcsXG4gICAgYWxsb3dlZFRhZ3M6IFsnYicsICdpJywgJ2VtJywgJ3N0cm9uZyddLFxuICAgIG1heFN0cmluZ0xlbmd0aDogMjAwMCxcbiAgICBtYXhBcnJheUxlbmd0aDogMjAwLFxuICAgIG1heE9iamVjdERlcHRoOiA0XG4gIH0sXG5cbiAgLy8gVmFsaWRhY2nDs24gYsOhc2ljYSBwYXJhIGNvbnRlbmlkbyBkZSB1c3VhcmlvXG4gIEJBU0lDX1VTRVI6IHtcbiAgICBlbmFibGVTYW5pdGl6YXRpb246IHRydWUsXG4gICAgZW5hYmxlU2VjdXJpdHlWYWxpZGF0aW9uOiBmYWxzZSxcbiAgICBlbmFibGVBdWRpdExvZ2dpbmc6IGZhbHNlLFxuICAgIHNlY3VyaXR5TGV2ZWw6ICdiYXNpYycsXG4gICAgYWxsb3dlZFRhZ3M6IFsnYicsICdpJywgJ2VtJywgJ3N0cm9uZycsICdwJywgJ2JyJ10sXG4gICAgbWF4U3RyaW5nTGVuZ3RoOiA1MDAwLFxuICAgIG1heEFycmF5TGVuZ3RoOiA1MDAsXG4gICAgbWF4T2JqZWN0RGVwdGg6IDNcbiAgfVxufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNBTklUSVpBRE9SRVMgRU5URVJQUklTRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIEVudGVycHJpc2VTYW5pdGl6ZXIge1xuICBwcml2YXRlIGNvbmZpZzogRW50ZXJwcmlzZVZhbGlkYXRpb25Db25maWc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBFbnRlcnByaXNlVmFsaWRhdGlvbkNvbmZpZyA9IEVOVEVSUFJJU0VfVkFMSURBVElPTl9DT05GSUdTLlNUQU5EQVJEX1BVQkxJQykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXphIHVuYSBjYWRlbmEgZGUgdGV4dG9cbiAgICovXG4gIHNhbml0aXplU3RyaW5nKHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IFNhbml0aXphdGlvbk9wdGlvbnMgPSB7fSk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBTdHJpbmcodmFsdWUgfHwgJycpO1xuICAgIH1cblxuICAgIGxldCBzYW5pdGl6ZWQgPSB2YWx1ZTtcblxuICAgIC8vIFJlbW92ZXIgc2NyaXB0cyBtYWxpY2lvc29zXG4gICAgaWYgKG9wdGlvbnMucmVtb3ZlU2NyaXB0cyAhPT0gZmFsc2UpIHtcbiAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC88c2NyaXB0XFxiW148XSooPzooPyE8XFwvc2NyaXB0Pik8W148XSopKjxcXC9zY3JpcHQ+L2dpLCAnJyk7XG4gICAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvamF2YXNjcmlwdDovZ2ksICcnKTtcbiAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9vblxcdytcXHMqPS9naSwgJycpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZXIgSFRNTCBzaSBlc3TDoSBjb25maWd1cmFkb1xuICAgIGlmIChvcHRpb25zLnJlbW92ZUh0bWwpIHtcbiAgICAgIHNhbml0aXplZCA9IERPTVB1cmlmeS5zYW5pdGl6ZShzYW5pdGl6ZWQsIHsgXG4gICAgICAgIEFMTE9XRURfVEFHUzogdGhpcy5jb25maWcuYWxsb3dlZFRhZ3MgfHwgW10sXG4gICAgICAgIEFMTE9XRURfQVRUUjogdGhpcy5jb25maWcuYWxsb3dlZEF0dHJpYnV0ZXMgfHwgW11cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEVzY2FwYXIgSFRNTFxuICAgIGlmIChvcHRpb25zLmVzY2FwZUh0bWwpIHtcbiAgICAgIHNhbml0aXplZCA9IHZhbGlkYXRvci5lc2NhcGUoc2FuaXRpemVkKTtcbiAgICB9XG5cbiAgICAvLyBOb3JtYWxpemFyIGVzcGFjaW9zIGVuIGJsYW5jb1xuICAgIGlmIChvcHRpb25zLm5vcm1hbGl6ZVdoaXRlc3BhY2UgIT09IGZhbHNlKSB7XG4gICAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgIH1cblxuICAgIC8vIFRyaW0gc3RyaW5nc1xuICAgIGlmIChvcHRpb25zLnRyaW1TdHJpbmdzICE9PSBmYWxzZSkge1xuICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnRyaW0oKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmVyIGVtb2ppcyBzaSBlc3TDoSBjb25maWd1cmFkb1xuICAgIGlmIChvcHRpb25zLnJlbW92ZUVtb2ppcykge1xuICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL1tcXHV7MUY2MDB9LVxcdXsxRjY0Rn1dfFtcXHV7MUYzMDB9LVxcdXsxRjVGRn1dfFtcXHV7MUY2ODB9LVxcdXsxRjZGRn1dfFtcXHV7MUYxRTB9LVxcdXsxRjFGRn1dL2d1LCAnJyk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlciBwYWxhYnJhcyBjbGF2ZSBTUUwgc29zcGVjaG9zYXNcbiAgICBpZiAob3B0aW9ucy5yZW1vdmVTcWxLZXl3b3Jkcykge1xuICAgICAgY29uc3Qgc3FsS2V5d29yZHMgPSAvXFxiKFNFTEVDVHxJTlNFUlR8VVBEQVRFfERFTEVURXxEUk9QfENSRUFURXxBTFRFUnxFWEVDfFVOSU9OfFNDUklQVClcXGIvZ2k7XG4gICAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZShzcWxLZXl3b3JkcywgJycpO1xuICAgIH1cblxuICAgIC8vIEFwbGljYXIgbG9uZ2l0dWQgbcOheGltYVxuICAgIGNvbnN0IG1heExlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoIHx8IHRoaXMuY29uZmlnLm1heFN0cmluZ0xlbmd0aCB8fCAxMDAwMDtcbiAgICBpZiAoc2FuaXRpemVkLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnN1YnN0cmluZygwLCBtYXhMZW5ndGgpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgY2FyYWN0ZXJlcyBwZXJtaXRpZG9zXG4gICAgaWYgKG9wdGlvbnMuYWxsb3dlZENoYXJhY3RlcnMpIHtcbiAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKG9wdGlvbnMuYWxsb3dlZENoYXJhY3RlcnMsICcnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXphIHVuIG9iamV0byByZWN1cnNpdmFtZW50ZVxuICAgKi9cbiAgc2FuaXRpemVPYmplY3Qob2JqOiBhbnksIGRlcHRoOiBudW1iZXIgPSAwKTogYW55IHtcbiAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMuY29uZmlnLm1heE9iamVjdERlcHRoIHx8IDEwO1xuICAgIFxuICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9iamV0byBleGNlZGUgbGEgcHJvZnVuZGlkYWQgbcOheGltYSBwZXJtaXRpZGEgKCR7bWF4RGVwdGh9KWApO1xuICAgIH1cblxuICAgIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZVN0cmluZyhvYmosIHtcbiAgICAgICAgcmVtb3ZlSHRtbDogdGhpcy5jb25maWcuc2VjdXJpdHlMZXZlbCA9PT0gJ2NyaXRpY2FsJyxcbiAgICAgICAgcmVtb3ZlU2NyaXB0czogdHJ1ZSxcbiAgICAgICAgcmVtb3ZlU3FsS2V5d29yZHM6IHRoaXMuY29uZmlnLnNlY3VyaXR5TGV2ZWwgIT09ICdiYXNpYydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygb2JqID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgY29uc3QgbWF4TGVuZ3RoID0gdGhpcy5jb25maWcubWF4QXJyYXlMZW5ndGggfHwgMTAwMDtcbiAgICAgIGlmIChvYmoubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXJyYXkgZXhjZWRlIGxhIGxvbmdpdHVkIG3DoXhpbWEgcGVybWl0aWRhICgke21heExlbmd0aH0pYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqLm1hcChpdGVtID0+IHRoaXMuc2FuaXRpemVPYmplY3QoaXRlbSwgZGVwdGggKyAxKSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBzYW5pdGl6ZWQ6IGFueSA9IHt9O1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRLZXkgPSB0aGlzLnNhbml0aXplU3RyaW5nKGtleSwgeyByZW1vdmVIdG1sOiB0cnVlLCByZW1vdmVTY3JpcHRzOiB0cnVlIH0pO1xuICAgICAgICBzYW5pdGl6ZWRbc2FuaXRpemVkS2V5XSA9IHRoaXMuc2FuaXRpemVPYmplY3QodmFsdWUsIGRlcHRoICsgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2FuaXRpemVkO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKipcbiAgICogU2FuaXRpemEgZGF0b3MgZGUgZm9ybXVsYXJpb1xuICAgKi9cbiAgc2FuaXRpemVGb3JtRGF0YShmb3JtRGF0YTogRm9ybURhdGEpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSkge1xuICAgICAgY29uc3Qgc2FuaXRpemVkS2V5ID0gdGhpcy5zYW5pdGl6ZVN0cmluZyhrZXksIHsgcmVtb3ZlSHRtbDogdHJ1ZSB9KTtcbiAgICAgIFxuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAvLyBWYWxpZGFyIGFyY2hpdm9cbiAgICAgICAgc2FuaXRpemVkW3Nhbml0aXplZEtleV0gPSB0aGlzLnNhbml0aXplRmlsZSh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzYW5pdGl6ZWRbc2FuaXRpemVkS2V5XSA9IHRoaXMuc2FuaXRpemVTdHJpbmcodmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbml0aXplZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6YSBpbmZvcm1hY2nDs24gZGUgYXJjaGl2b3NcbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVGaWxlKGZpbGU6IEZpbGUpOiB7IG5hbWU6IHN0cmluZzsgc2l6ZTogbnVtYmVyOyB0eXBlOiBzdHJpbmcgfSB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gW1xuICAgICAgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL2dpZicsICdpbWFnZS93ZWJwJyxcbiAgICAgICdhcHBsaWNhdGlvbi9wZGYnLCAndGV4dC9wbGFpbicsICd0ZXh0L2NzdidcbiAgICBdO1xuXG4gICAgY29uc3Qgc2FuaXRpemVkTmFtZSA9IHRoaXMuc2FuaXRpemVTdHJpbmcoZmlsZS5uYW1lLCB7XG4gICAgICByZW1vdmVIdG1sOiB0cnVlLFxuICAgICAgcmVtb3ZlU2NyaXB0czogdHJ1ZSxcbiAgICAgIGFsbG93ZWRDaGFyYWN0ZXJzOiAvW15hLXpBLVowLTkuXy1dL2dcbiAgICB9KTtcblxuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGlwbyBkZSBhcmNoaXZvIG5vIHBlcm1pdGlkbzogJHtmaWxlLnR5cGV9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgbWF4U2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUJcbiAgICBpZiAoZmlsZS5zaXplID4gbWF4U2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBcmNoaXZvIGV4Y2VkZSBlbCB0YW1hw7FvIG3DoXhpbW8gcGVybWl0aWRvICgke21heFNpemV9IGJ5dGVzKWApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBzYW5pdGl6ZWROYW1lLFxuICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgdHlwZTogZmlsZS50eXBlXG4gICAgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBRE9SRVMgRU5URVJQUklTRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIEVudGVycHJpc2VWYWxpZGF0b3Ige1xuICBwcml2YXRlIHNhbml0aXplcjogRW50ZXJwcmlzZVNhbml0aXplcjtcbiAgcHJpdmF0ZSBjb25maWc6IEVudGVycHJpc2VWYWxpZGF0aW9uQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogRW50ZXJwcmlzZVZhbGlkYXRpb25Db25maWcgPSBFTlRFUlBSSVNFX1ZBTElEQVRJT05fQ09ORklHUy5TVEFOREFSRF9QVUJMSUMpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNhbml0aXplciA9IG5ldyBFbnRlcnByaXNlU2FuaXRpemVyKGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhIHkgc2FuaXRpemEgZGF0b3MgdXNhbmRvIHVuIHNjaGVtYSBkZSBab2RcbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlQW5kU2FuaXRpemU8VD4oXG4gICAgc2NoZW1hOiB6LlpvZFNjaGVtYTxUPixcbiAgICBkYXRhOiB1bmtub3duLFxuICAgIGNvbnRleHQ/OiBFbnRlcnByaXNlQXV0aENvbnRleHQsXG4gICAgcmVxdWVzdD86IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3RcbiAgKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzdWx0PFQ+PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBydWxlc0FwcGxpZWQ6IHN0cmluZ1tdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8gMS4gU2FuaXRpemFjacOzbiBzaSBlc3TDoSBoYWJpbGl0YWRhXG4gICAgICBsZXQgc2FuaXRpemVkRGF0YSA9IGRhdGE7XG4gICAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlU2FuaXRpemF0aW9uKSB7XG4gICAgICAgIHNhbml0aXplZERhdGEgPSB0aGlzLnNhbml0aXplci5zYW5pdGl6ZU9iamVjdChkYXRhKTtcbiAgICAgICAgcnVsZXNBcHBsaWVkLnB1c2goJ3Nhbml0aXphdGlvbicpO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiBWYWxpZGFjacOzbiBjb24gWm9kXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShzYW5pdGl6ZWREYXRhKTtcbiAgICAgIFxuICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXSA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4gKHtcbiAgICAgICAgICBmaWVsZDogZXJyLnBhdGguam9pbignLicpLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgICAgIGNvZGU6IGVyci5jb2RlLFxuICAgICAgICAgIHZhbHVlOiBlcnIuaW5wdXQsXG4gICAgICAgICAgc2V2ZXJpdHk6IHRoaXMuZGV0ZXJtaW5lU2V2ZXJpdHkoZXJyLmNvZGUsIGVyci5wYXRoKVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUmVnaXN0cmFyIGVycm9yZXMgZGUgdmFsaWRhY2nDs24gc2kgZXN0w6EgaGFiaWxpdGFkb1xuICAgICAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlQXVkaXRMb2dnaW5nICYmIGNvbnRleHQpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmxvZ1ZhbGlkYXRpb25FdmVudCgnVkFMSURBVElPTl9GQUlMRUQnLCBlcnJvcnMsIGNvbnRleHQsIHJlcXVlc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHZhbGlkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB2YWxpZGF0ZWRCeTogY29udGV4dD8udXNlcklkLFxuICAgICAgICAgICAgc2FuaXRpemF0aW9uQXBwbGllZDogdGhpcy5jb25maWcuZW5hYmxlU2FuaXRpemF0aW9uIHx8IGZhbHNlLFxuICAgICAgICAgICAgc2VjdXJpdHlMZXZlbDogdGhpcy5jb25maWcuc2VjdXJpdHlMZXZlbCB8fCAnc3RhbmRhcmQnLFxuICAgICAgICAgICAgcnVsZXNBcHBsaWVkLFxuICAgICAgICAgICAgcGVyZm9ybWFuY2VNczogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gMy4gVmFsaWRhY2lvbmVzIGRlIHNlZ3VyaWRhZCBhZGljaW9uYWxlc1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVNlY3VyaXR5VmFsaWRhdGlvbikge1xuICAgICAgICBjb25zdCBzZWN1cml0eVZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnBlcmZvcm1TZWN1cml0eVZhbGlkYXRpb24odmFsaWRhdGlvblJlc3VsdC5kYXRhKTtcbiAgICAgICAgaWYgKCFzZWN1cml0eVZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgICAgIHJldHVybiBzZWN1cml0eVZhbGlkYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcnVsZXNBcHBsaWVkLnB1c2goJ3NlY3VyaXR5X3ZhbGlkYXRpb24nKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gUmVnaXN0cmFyIHZhbGlkYWNpw7NuIGV4aXRvc2FcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVBdWRpdExvZ2dpbmcgJiYgY29udGV4dCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvZ1ZhbGlkYXRpb25FdmVudCgnVkFMSURBVElPTl9TVUNDRVNTJywgW10sIGNvbnRleHQsIHJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB2YWxpZGF0aW9uUmVzdWx0LmRhdGEsXG4gICAgICAgIHNhbml0aXplZDogc2FuaXRpemVkRGF0YSBhcyBULFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHZhbGlkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdmFsaWRhdGVkQnk6IGNvbnRleHQ/LnVzZXJJZCxcbiAgICAgICAgICBzYW5pdGl6YXRpb25BcHBsaWVkOiB0aGlzLmNvbmZpZy5lbmFibGVTYW5pdGl6YXRpb24gfHwgZmFsc2UsXG4gICAgICAgICAgc2VjdXJpdHlMZXZlbDogdGhpcy5jb25maWcuc2VjdXJpdHlMZXZlbCB8fCAnc3RhbmRhcmQnLFxuICAgICAgICAgIHJ1bGVzQXBwbGllZCxcbiAgICAgICAgICBwZXJmb3JtYW5jZU1zOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yOiBWYWxpZGF0aW9uRXJyb3IgPSB7XG4gICAgICAgIGZpZWxkOiAnZ2VuZXJhbCcsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Vycm9yIGRlIHZhbGlkYWNpw7NuIGRlc2Nvbm9jaWRvJyxcbiAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICBzZXZlcml0eTogJ2hpZ2gnXG4gICAgICB9O1xuXG4gICAgICAvLyBSZWdpc3RyYXIgZXJyb3IgY3LDrXRpY29cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVBdWRpdExvZ2dpbmcgJiYgY29udGV4dCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvZ1ZhbGlkYXRpb25FdmVudCgnVkFMSURBVElPTl9FUlJPUicsIFt2YWxpZGF0aW9uRXJyb3JdLCBjb250ZXh0LCByZXF1ZXN0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yczogW3ZhbGlkYXRpb25FcnJvcl0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgdmFsaWRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB2YWxpZGF0ZWRCeTogY29udGV4dD8udXNlcklkLFxuICAgICAgICAgIHNhbml0aXphdGlvbkFwcGxpZWQ6IGZhbHNlLFxuICAgICAgICAgIHNlY3VyaXR5TGV2ZWw6IHRoaXMuY29uZmlnLnNlY3VyaXR5TGV2ZWwgfHwgJ3N0YW5kYXJkJyxcbiAgICAgICAgICBydWxlc0FwcGxpZWQsXG4gICAgICAgICAgcGVyZm9ybWFuY2VNczogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmEgbGEgc2V2ZXJpZGFkIGRlIHVuIGVycm9yIGRlIHZhbGlkYWNpw7NuXG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZVNldmVyaXR5KGNvZGU6IHN0cmluZywgcGF0aDogKHN0cmluZyB8IG51bWJlcilbXSk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnIHtcbiAgICAvLyBDYW1wb3MgY3LDrXRpY29zXG4gICAgY29uc3QgY3JpdGljYWxGaWVsZHMgPSBbJ3Bhc3N3b3JkJywgJ2VtYWlsJywgJ3BheW1lbnQnLCAnYWRtaW4nLCAnYXV0aCddO1xuICAgIGNvbnN0IGhpZ2hGaWVsZHMgPSBbJ3VzZXJfaWQnLCAnYW1vdW50JywgJ3ByaWNlJywgJ3F1YW50aXR5J107XG4gICAgXG4gICAgY29uc3QgZmllbGRQYXRoID0gcGF0aC5qb2luKCcuJykudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICBpZiAoY3JpdGljYWxGaWVsZHMuc29tZShmaWVsZCA9PiBmaWVsZFBhdGguaW5jbHVkZXMoZmllbGQpKSkge1xuICAgICAgcmV0dXJuICdjcml0aWNhbCc7XG4gICAgfVxuICAgIFxuICAgIGlmIChoaWdoRmllbGRzLnNvbWUoZmllbGQgPT4gZmllbGRQYXRoLmluY2x1ZGVzKGZpZWxkKSkpIHtcbiAgICAgIHJldHVybiAnaGlnaCc7XG4gICAgfVxuICAgIFxuICAgIC8vIEPDs2RpZ29zIGNyw610aWNvc1xuICAgIGNvbnN0IGNyaXRpY2FsQ29kZXMgPSBbJ2ludmFsaWRfdHlwZScsICdjdXN0b20nXTtcbiAgICBpZiAoY3JpdGljYWxDb2Rlcy5pbmNsdWRlcyhjb2RlKSkge1xuICAgICAgcmV0dXJuICdoaWdoJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICdtZWRpdW0nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWxpemEgdmFsaWRhY2lvbmVzIGRlIHNlZ3VyaWRhZCBhZGljaW9uYWxlc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtU2VjdXJpdHlWYWxpZGF0aW9uKGRhdGE6IGFueSk6IFByb21pc2U8VmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBEZXRlY3RhciBwYXRyb25lcyBzb3NwZWNob3Nvc1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIC8vIFBhdHJvbmVzIGRlIGlueWVjY2nDs24gU1FMXG4gICAgICBjb25zdCBzcWxQYXR0ZXJucyA9IFtcbiAgICAgICAgLyhcXGJzZWxlY3RcXGIuKlxcYmZyb21cXGIpL2ksXG4gICAgICAgIC8oXFxidW5pb25cXGIuKlxcYnNlbGVjdFxcYikvaSxcbiAgICAgICAgLyhcXGJpbnNlcnRcXGIuKlxcYmludG9cXGIpL2ksXG4gICAgICAgIC8oXFxidXBkYXRlXFxiLipcXGJzZXRcXGIpL2ksXG4gICAgICAgIC8oXFxiZGVsZXRlXFxiLipcXGJmcm9tXFxiKS9pLFxuICAgICAgICAvKFxcYmRyb3BcXGIuKlxcYnRhYmxlXFxiKS9pXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc3FsUGF0dGVybnMpIHtcbiAgICAgICAgaWYgKHBhdHRlcm4udGVzdChkYXRhU3RyaW5nKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICAgICAgZmllbGQ6ICdzZWN1cml0eScsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXRyw7NuIGRlIGlueWVjY2nDs24gU1FMIGRldGVjdGFkbycsXG4gICAgICAgICAgICAgIGNvZGU6ICdTUUxfSU5KRUNUSU9OX0RFVEVDVEVEJyxcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCdcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXRyb25lcyBkZSBYU1NcbiAgICAgIGNvbnN0IHhzc1BhdHRlcm5zID0gW1xuICAgICAgICAvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naSxcbiAgICAgICAgL2phdmFzY3JpcHQ6L2ksXG4gICAgICAgIC9vblxcdytcXHMqPS9pLFxuICAgICAgICAvZXZhbFxccypcXCgvaSxcbiAgICAgICAgL2V4cHJlc3Npb25cXHMqXFwoL2lcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB4c3NQYXR0ZXJucykge1xuICAgICAgICBpZiAocGF0dGVybi50ZXN0KGRhdGFTdHJpbmcpKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JzOiBbe1xuICAgICAgICAgICAgICBmaWVsZDogJ3NlY3VyaXR5JyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ1BhdHLDs24gZGUgWFNTIGRldGVjdGFkbycsXG4gICAgICAgICAgICAgIGNvZGU6ICdYU1NfREVURUNURUQnLFxuICAgICAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICBmaWVsZDogJ3NlY3VyaXR5JyxcbiAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgZW4gdmFsaWRhY2nDs24gZGUgc2VndXJpZGFkJyxcbiAgICAgICAgICBjb2RlOiAnU0VDVVJJVFlfVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJ1xuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgZXZlbnRvcyBkZSB2YWxpZGFjacOzbiBlbiBlbCBzaXN0ZW1hIGRlIGF1ZGl0b3LDrWFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9nVmFsaWRhdGlvbkV2ZW50KFxuICAgIGV2ZW50VHlwZTogc3RyaW5nLFxuICAgIGVycm9yczogVmFsaWRhdGlvbkVycm9yW10sXG4gICAgY29udGV4dDogRW50ZXJwcmlzZUF1dGhDb250ZXh0LFxuICAgIHJlcXVlc3Q/OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBlbnRlcnByaXNlQXVkaXRTeXN0ZW0ubG9nRW50ZXJwcmlzZUV2ZW50KHtcbiAgICAgICAgdXNlcl9pZDogY29udGV4dC51c2VySWQsXG4gICAgICAgIGV2ZW50X3R5cGU6IGV2ZW50VHlwZSBhcyBhbnksXG4gICAgICAgIGV2ZW50X2NhdGVnb3J5OiAnZGF0YV92YWxpZGF0aW9uJyxcbiAgICAgICAgc2V2ZXJpdHk6IGVycm9ycy5zb21lKGUgPT4gZS5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykgPyAnY3JpdGljYWwnIDpcbiAgICAgICAgICAgICAgICAgZXJyb3JzLnNvbWUoZSA9PiBlLnNldmVyaXR5ID09PSAnaGlnaCcpID8gJ2hpZ2gnIDogJ2xvdycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVmFsaWRhY2nDs24gZGUgZGF0b3M6ICR7ZXZlbnRUeXBlfWAsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgZXJyb3JzX2NvdW50OiBlcnJvcnMubGVuZ3RoLFxuICAgICAgICAgIGVycm9yczogZXJyb3JzLm1hcChlID0+ICh7IGZpZWxkOiBlLmZpZWxkLCBjb2RlOiBlLmNvZGUsIHNldmVyaXR5OiBlLnNldmVyaXR5IH0pKSxcbiAgICAgICAgICBzZWN1cml0eV9sZXZlbDogdGhpcy5jb25maWcuc2VjdXJpdHlMZXZlbFxuICAgICAgICB9LFxuICAgICAgICBpcF9hZGRyZXNzOiB0aGlzLmdldENsaWVudElQKHJlcXVlc3QpLFxuICAgICAgICB1c2VyX2FnZW50OiB0aGlzLmdldFVzZXJBZ2VudChyZXF1ZXN0KVxuICAgICAgfSwgY29udGV4dCwgcmVxdWVzdCBhcyBOZXh0UmVxdWVzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tFTlRFUlBSSVNFX1ZBTElEQVRJT05dIEVycm9yIGxvZ2dpbmcgdmFsaWRhdGlvbiBldmVudDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDbGllbnRJUChyZXF1ZXN0PzogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gICAgaWYgKCFyZXF1ZXN0KSByZXR1cm4gJ3Vua25vd24nO1xuICAgIFxuICAgIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCAmJiB0eXBlb2YgcmVxdWVzdC5oZWFkZXJzLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIChyZXF1ZXN0IGFzIE5leHRSZXF1ZXN0KS5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nO1xuICAgIH0gZWxzZSBpZiAoJ2hlYWRlcnMnIGluIHJlcXVlc3QpIHtcbiAgICAgIGNvbnN0IGhlYWRlclZhbHVlID0gKHJlcXVlc3QgYXMgTmV4dEFwaVJlcXVlc3QpLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddO1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaGVhZGVyVmFsdWUpID8gaGVhZGVyVmFsdWVbMF0gOiBoZWFkZXJWYWx1ZSB8fCAndW5rbm93bic7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudChyZXF1ZXN0PzogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gICAgaWYgKCFyZXF1ZXN0KSByZXR1cm4gJ3Vua25vd24nO1xuICAgIFxuICAgIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCAmJiB0eXBlb2YgcmVxdWVzdC5oZWFkZXJzLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIChyZXF1ZXN0IGFzIE5leHRSZXF1ZXN0KS5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpIHx8ICd1bmtub3duJztcbiAgICB9IGVsc2UgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0KSB7XG4gICAgICBjb25zdCBoZWFkZXJWYWx1ZSA9IChyZXF1ZXN0IGFzIE5leHRBcGlSZXF1ZXN0KS5oZWFkZXJzWyd1c2VyLWFnZW50J107XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShoZWFkZXJWYWx1ZSkgPyBoZWFkZXJWYWx1ZVswXSA6IGhlYWRlclZhbHVlIHx8ICd1bmtub3duJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5TVEFOQ0lBUyBHTE9CQUxFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gSW5zdGFuY2lhcyBwcmVkZWZpbmlkYXMgcGFyYSBkaWZlcmVudGVzIG5pdmVsZXMgZGUgc2VndXJpZGFkXG5leHBvcnQgY29uc3QgY3JpdGljYWxWYWxpZGF0b3IgPSBuZXcgRW50ZXJwcmlzZVZhbGlkYXRvcihFTlRFUlBSSVNFX1ZBTElEQVRJT05fQ09ORklHUy5DUklUSUNBTF9BRE1JTik7XG5leHBvcnQgY29uc3QgaGlnaFZhbGlkYXRvciA9IG5ldyBFbnRlcnByaXNlVmFsaWRhdG9yKEVOVEVSUFJJU0VfVkFMSURBVElPTl9DT05GSUdTLkhJR0hfUEFZTUVOVCk7XG5leHBvcnQgY29uc3Qgc3RhbmRhcmRWYWxpZGF0b3IgPSBuZXcgRW50ZXJwcmlzZVZhbGlkYXRvcihFTlRFUlBSSVNFX1ZBTElEQVRJT05fQ09ORklHUy5TVEFOREFSRF9QVUJMSUMpO1xuZXhwb3J0IGNvbnN0IGJhc2ljVmFsaWRhdG9yID0gbmV3IEVudGVycHJpc2VWYWxpZGF0b3IoRU5URVJQUklTRV9WQUxJREFUSU9OX0NPTkZJR1MuQkFTSUNfVVNFUik7XG5cbi8vIFNhbml0aXphZG9yZXMgcHJlZGVmaW5pZG9zXG5leHBvcnQgY29uc3QgY3JpdGljYWxTYW5pdGl6ZXIgPSBuZXcgRW50ZXJwcmlzZVNhbml0aXplcihFTlRFUlBSSVNFX1ZBTElEQVRJT05fQ09ORklHUy5DUklUSUNBTF9BRE1JTik7XG5leHBvcnQgY29uc3QgaGlnaFNhbml0aXplciA9IG5ldyBFbnRlcnByaXNlU2FuaXRpemVyKEVOVEVSUFJJU0VfVkFMSURBVElPTl9DT05GSUdTLkhJR0hfUEFZTUVOVCk7XG5leHBvcnQgY29uc3Qgc3RhbmRhcmRTYW5pdGl6ZXIgPSBuZXcgRW50ZXJwcmlzZVNhbml0aXplcihFTlRFUlBSSVNFX1ZBTElEQVRJT05fQ09ORklHUy5TVEFOREFSRF9QVUJMSUMpO1xuZXhwb3J0IGNvbnN0IGJhc2ljU2FuaXRpemVyID0gbmV3IEVudGVycHJpc2VTYW5pdGl6ZXIoRU5URVJQUklTRV9WQUxJREFUSU9OX0NPTkZJR1MuQkFTSUNfVVNFUik7XG4iXSwibmFtZXMiOlsiRU5URVJQUklTRV9WQUxJREFUSU9OX0NPTkZJR1MiLCJFbnRlcnByaXNlU2FuaXRpemVyIiwiRW50ZXJwcmlzZVZhbGlkYXRvciIsImJhc2ljU2FuaXRpemVyIiwiYmFzaWNWYWxpZGF0b3IiLCJjcml0aWNhbFNhbml0aXplciIsImNyaXRpY2FsVmFsaWRhdG9yIiwiaGlnaFNhbml0aXplciIsImhpZ2hWYWxpZGF0b3IiLCJzdGFuZGFyZFNhbml0aXplciIsInN0YW5kYXJkVmFsaWRhdG9yIiwiQ1JJVElDQUxfQURNSU4iLCJlbmFibGVTYW5pdGl6YXRpb24iLCJlbmFibGVTZWN1cml0eVZhbGlkYXRpb24iLCJlbmFibGVBdWRpdExvZ2dpbmciLCJzZWN1cml0eUxldmVsIiwiYWxsb3dlZFRhZ3MiLCJtYXhTdHJpbmdMZW5ndGgiLCJtYXhBcnJheUxlbmd0aCIsIm1heE9iamVjdERlcHRoIiwiSElHSF9QQVlNRU5UIiwiU1RBTkRBUkRfUFVCTElDIiwiQkFTSUNfVVNFUiIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwic2FuaXRpemVTdHJpbmciLCJ2YWx1ZSIsIm9wdGlvbnMiLCJTdHJpbmciLCJzYW5pdGl6ZWQiLCJyZW1vdmVTY3JpcHRzIiwicmVwbGFjZSIsInJlbW92ZUh0bWwiLCJET01QdXJpZnkiLCJzYW5pdGl6ZSIsIkFMTE9XRURfVEFHUyIsIkFMTE9XRURfQVRUUiIsImFsbG93ZWRBdHRyaWJ1dGVzIiwiZXNjYXBlSHRtbCIsInZhbGlkYXRvciIsImVzY2FwZSIsIm5vcm1hbGl6ZVdoaXRlc3BhY2UiLCJ0cmltU3RyaW5ncyIsInRyaW0iLCJyZW1vdmVFbW9qaXMiLCJyZW1vdmVTcWxLZXl3b3JkcyIsInNxbEtleXdvcmRzIiwibWF4TGVuZ3RoIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwiYWxsb3dlZENoYXJhY3RlcnMiLCJzYW5pdGl6ZU9iamVjdCIsIm9iaiIsImRlcHRoIiwibWF4RGVwdGgiLCJFcnJvciIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIml0ZW0iLCJrZXkiLCJPYmplY3QiLCJlbnRyaWVzIiwic2FuaXRpemVkS2V5Iiwic2FuaXRpemVGb3JtRGF0YSIsImZvcm1EYXRhIiwiRmlsZSIsInNhbml0aXplRmlsZSIsInRvU3RyaW5nIiwiZmlsZSIsImFsbG93ZWRUeXBlcyIsInNhbml0aXplZE5hbWUiLCJuYW1lIiwiaW5jbHVkZXMiLCJ0eXBlIiwibWF4U2l6ZSIsInNpemUiLCJzYW5pdGl6ZXIiLCJ2YWxpZGF0ZUFuZFNhbml0aXplIiwic2NoZW1hIiwiZGF0YSIsImNvbnRleHQiLCJyZXF1ZXN0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInJ1bGVzQXBwbGllZCIsInNhbml0aXplZERhdGEiLCJwdXNoIiwidmFsaWRhdGlvblJlc3VsdCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJlcnJvcnMiLCJlcnJvciIsImVyciIsImZpZWxkIiwicGF0aCIsImpvaW4iLCJtZXNzYWdlIiwiY29kZSIsImlucHV0Iiwic2V2ZXJpdHkiLCJkZXRlcm1pbmVTZXZlcml0eSIsImxvZ1ZhbGlkYXRpb25FdmVudCIsIm1ldGFkYXRhIiwidmFsaWRhdGVkQXQiLCJ0b0lTT1N0cmluZyIsInZhbGlkYXRlZEJ5IiwidXNlcklkIiwic2FuaXRpemF0aW9uQXBwbGllZCIsInBlcmZvcm1hbmNlTXMiLCJzZWN1cml0eVZhbGlkYXRpb24iLCJwZXJmb3JtU2VjdXJpdHlWYWxpZGF0aW9uIiwidmFsaWRhdGlvbkVycm9yIiwiY3JpdGljYWxGaWVsZHMiLCJoaWdoRmllbGRzIiwiZmllbGRQYXRoIiwidG9Mb3dlckNhc2UiLCJzb21lIiwiY3JpdGljYWxDb2RlcyIsImRhdGFTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5Iiwic3FsUGF0dGVybnMiLCJwYXR0ZXJuIiwidGVzdCIsInhzc1BhdHRlcm5zIiwiZXZlbnRUeXBlIiwiZW50ZXJwcmlzZUF1ZGl0U3lzdGVtIiwibG9nRW50ZXJwcmlzZUV2ZW50IiwidXNlcl9pZCIsImV2ZW50X3R5cGUiLCJldmVudF9jYXRlZ29yeSIsImUiLCJkZXNjcmlwdGlvbiIsImVycm9yc19jb3VudCIsInNlY3VyaXR5X2xldmVsIiwiaXBfYWRkcmVzcyIsImdldENsaWVudElQIiwidXNlcl9hZ2VudCIsImdldFVzZXJBZ2VudCIsImNvbnNvbGUiLCJoZWFkZXJzIiwiZ2V0IiwiaGVhZGVyVmFsdWUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7Ozs7Ozs7Ozs7SUFxRVlBLDZCQUE2QjtlQUE3QkE7O0lBc0RBQyxtQkFBbUI7ZUFBbkJBOztJQThLQUMsbUJBQW1CO2VBQW5CQTs7SUEyUkFDLGNBQWM7ZUFBZEE7O0lBTkFDLGNBQWM7ZUFBZEE7O0lBR0FDLGlCQUFpQjtlQUFqQkE7O0lBTkFDLGlCQUFpQjtlQUFqQkE7O0lBT0FDLGFBQWE7ZUFBYkE7O0lBTkFDLGFBQWE7ZUFBYkE7O0lBT0FDLGlCQUFpQjtlQUFqQkE7O0lBTkFDLGlCQUFpQjtlQUFqQkE7Ozs0RUF4akJTO2tFQUNBO3VDQUNnQjs7Ozs7O0FBOEQvQixNQUFNVixnQ0FBNEU7SUFDdkYsNENBQTRDO0lBQzVDVyxnQkFBZ0I7UUFDZEMsb0JBQW9CO1FBQ3BCQywwQkFBMEI7UUFDMUJDLG9CQUFvQjtRQUNwQkMsZUFBZTtRQUNmQyxhQUFhLEVBQUU7UUFDZkMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGdCQUFnQjtJQUNsQjtJQUVBLHFDQUFxQztJQUNyQ0MsY0FBYztRQUNaUixvQkFBb0I7UUFDcEJDLDBCQUEwQjtRQUMxQkMsb0JBQW9CO1FBQ3BCQyxlQUFlO1FBQ2ZDLGFBQWEsRUFBRTtRQUNmQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsZ0JBQWdCO0lBQ2xCO0lBRUEseUNBQXlDO0lBQ3pDRSxpQkFBaUI7UUFDZlQsb0JBQW9CO1FBQ3BCQywwQkFBMEI7UUFDMUJDLG9CQUFvQjtR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