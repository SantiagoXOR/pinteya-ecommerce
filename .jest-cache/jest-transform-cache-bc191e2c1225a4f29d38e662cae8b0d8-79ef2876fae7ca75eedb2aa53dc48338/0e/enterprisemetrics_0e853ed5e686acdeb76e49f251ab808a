c182256e2cbced821fede999d3c95198
// ===================================
// PINTEYA E-COMMERCE - ENTERPRISE METRICS SYSTEM
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get AlertLevel () {
        return AlertLevel;
    },
    get BusinessMetricCategory () {
        return BusinessMetricCategory;
    },
    get EnterpriseMetricsCollector () {
        return EnterpriseMetricsCollector;
    },
    get MetricType () {
        return MetricType;
    },
    get enterpriseMetrics () {
        return enterpriseMetrics;
    },
    get recordBusinessMetric () {
        return recordBusinessMetric;
    },
    get recordPerformanceMetric () {
        return recordPerformanceMetric;
    },
    get recordSecurityMetric () {
        return recordSecurityMetric;
    },
    get recordUserExperienceMetric () {
        return recordUserExperienceMetric;
    }
});
const _logger = require("../logger");
const _supabase = require("../supabase");
const _alertsystem = require("./alert-system");
// ✅ IMPORT CONDICIONAL: Solo cargar CacheUtils en servidor para evitar errores de ioredis en cliente
let CacheUtils = null;
if (typeof window === 'undefined') {
    // Solo en servidor
    try {
        CacheUtils = require('@/lib/cache-manager').CacheUtils;
    } catch (error) {
        console.warn('[EnterpriseMetrics] CacheUtils not available:', error);
    }
}
var MetricType = /*#__PURE__*/ function(MetricType) {
    MetricType["COUNTER"] = "counter";
    MetricType["GAUGE"] = "gauge";
    MetricType["HISTOGRAM"] = "histogram";
    MetricType["TIMER"] = "timer";
    MetricType["RATE"] = "rate"; // Tasa por unidad de tiempo
    return MetricType;
}({});
var BusinessMetricCategory = /*#__PURE__*/ function(BusinessMetricCategory) {
    BusinessMetricCategory["PERFORMANCE"] = "performance";
    BusinessMetricCategory["SECURITY"] = "security";
    BusinessMetricCategory["BUSINESS"] = "business";
    BusinessMetricCategory["INFRASTRUCTURE"] = "infrastructure";
    BusinessMetricCategory["USER_EXPERIENCE"] = "user_experience";
    return BusinessMetricCategory;
}({});
var AlertLevel = /*#__PURE__*/ function(AlertLevel) {
    AlertLevel["INFO"] = "info";
    AlertLevel["WARNING"] = "warning";
    AlertLevel["CRITICAL"] = "critical";
    AlertLevel["EMERGENCY"] = "emergency";
    return AlertLevel;
}({});
class EnterpriseMetricsCollector {
    constructor(){
        this.alertRules = new Map();
        this.activeAlerts = new Map();
        this.metricsBuffer = [];
        this.flushInterval = null;
        this.initializeDefaultAlerts();
        this.startMetricsFlush();
    }
    static getInstance() {
        if (!EnterpriseMetricsCollector.instance) {
            EnterpriseMetricsCollector.instance = new EnterpriseMetricsCollector();
        }
        return EnterpriseMetricsCollector.instance;
    }
    /**
   * Registra una métrica enterprise
   */ async recordMetric(name, value, type = "gauge", category = "performance", tags = {}, metadata) {
        try {
            const metric = {
                id: this.generateMetricId(),
                name,
                type,
                category,
                value,
                timestamp: new Date().toISOString(),
                tags,
                metadata
            };
            // Agregar a buffer para flush batch
            this.metricsBuffer.push(metric);
            // Verificar alertas
            await this.checkAlerts(metric);
            // Log para debugging
            _logger.logger.debug(_logger.LogLevel.DEBUG, `Metric recorded: ${name}`, {
                value,
                type,
                category,
                tags
            }, _logger.LogCategory.SYSTEM);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to record metric: ${name}`, {
                error: error instanceof Error ? error.message : 'Unknown error',
                value,
                type
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Métricas de performance específicas
   */ async recordPerformanceMetric(operation, duration, success, tags = {}) {
        await this.recordMetric(`performance.${operation}.duration`, duration, "timer", "performance", {
            ...tags,
            success: success.toString()
        });
        await this.recordMetric(`performance.${operation}.count`, 1, "counter", "performance", {
            ...tags,
            success: success.toString()
        });
    }
    /**
   * Métricas de negocio específicas
   */ async recordBusinessMetric(event, value = 1, tags = {}) {
        await this.recordMetric(`business.${event}`, value, "counter", "business", tags);
    }
    /**
   * Métricas de seguridad específicas
   */ async recordSecurityMetric(event, severity, tags = {}) {
        await this.recordMetric(`security.${event}`, 1, "counter", "security", {
            ...tags,
            severity
        });
    }
    /**
   * Métricas de experiencia de usuario
   */ async recordUserExperienceMetric(metric, value, userId, tags = {}) {
        await this.recordMetric(`ux.${metric}`, value, "gauge", "user_experience", {
            ...tags,
            userId: userId || 'anonymous'
        });
    }
    /**
   * Configura una regla de alerta
   */ setAlertRule(rule) {
        this.alertRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert rule configured: ${rule.id}`, {
            metricName: rule.metricName,
            threshold: rule.threshold,
            level: rule.level
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Verifica alertas para una métrica
   */ async checkAlerts(metric) {
        for (const rule of this.alertRules.values()){
            if (!rule.enabled || rule.metricName !== metric.name) {
                continue;
            }
            // Verificar si ya hay una alerta activa en cooldown
            const existingAlert = Array.from(this.activeAlerts.values()).find((alert)=>alert.ruleId === rule.id && !alert.resolvedAt);
            if (existingAlert) {
                const cooldownEnd = new Date(existingAlert.triggeredAt);
                cooldownEnd.setMinutes(cooldownEnd.getMinutes() + rule.cooldownMinutes);
                if (new Date() < cooldownEnd) {
                    continue; // Aún en cooldown
                }
            }
            // Evaluar condición
            const triggered = this.evaluateCondition(metric.value, rule.condition, rule.threshold);
            if (triggered) {
                await this.triggerAlert(rule, metric);
            }
        }
    }
    /**
   * Evalúa condición de alerta
   */ evaluateCondition(value, condition, threshold) {
        switch(condition){
            case 'gt':
                return value > threshold;
            case 'gte':
                return value >= threshold;
            case 'lt':
                return value < threshold;
            case 'lte':
                return value <= threshold;
            case 'eq':
                return value === threshold;
            default:
                return false;
        }
    }
    /**
   * Dispara una alerta usando el sistema enterprise
   */ async triggerAlert(rule, metric) {
        // Convertir nivel de alerta al sistema enterprise
        const alertLevel = this.convertToAlertSystemLevel(rule.level);
        // Usar el sistema de alertas enterprise
        const alert = await _alertsystem.enterpriseAlertSystem.triggerAlert(rule.id, rule.metricName, metric.value, `${rule.description} - Value: ${metric.value}, Threshold: ${rule.threshold}`);
        if (alert) {
            // Mantener referencia local para compatibilidad
            const localAlert = {
                id: alert.id,
                ruleId: alert.ruleId,
                metricName: alert.metricName,
                level: rule.level,
                message: alert.message,
                value: alert.value,
                threshold: alert.threshold,
                triggeredAt: alert.triggeredAt,
                metadata: {
                    metric: metric,
                    rule: rule
                }
            };
            this.activeAlerts.set(alert.id, localAlert);
            // Log alerta
            _logger.logger.warn(_logger.LogLevel.WARN, `Alert triggered via enterprise system: ${rule.id}`, {
                alertId: alert.id,
                level: alert.level,
                metricName: alert.metricName,
                value: alert.value,
                threshold: alert.threshold
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Ejecuta acción de alerta
   */ async executeAlertAction(action, alert) {
        try {
            switch(action.type){
                case 'log':
                    _logger.logger.error(_logger.LogLevel.ERROR, `ALERT: ${alert.message}`, {
                        alertId: alert.id,
                        level: alert.level
                    }, _logger.LogCategory.SYSTEM);
                    break;
                case 'webhook':
                    if (action.config.url) {
                        await fetch(action.config.url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(alert)
                        });
                    }
                    break;
                case 'email':
                    // TODO: Implementar envío de email
                    _logger.logger.info(_logger.LogLevel.INFO, `Email alert would be sent to: ${action.config.to}`, {
                        alertId: alert.id
                    }, _logger.LogCategory.SYSTEM);
                    break;
                case 'slack':
                    // TODO: Implementar notificación Slack
                    _logger.logger.info(_logger.LogLevel.INFO, `Slack alert would be sent to: ${action.config.channel}`, {
                        alertId: alert.id
                    }, _logger.LogCategory.SYSTEM);
                    break;
            }
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, `Failed to execute alert action: ${action.type}`, {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Obtiene métricas agregadas
   */ async getAggregatedMetrics(metricName, period, startTime, endTime) {
        const cacheKey = `metrics:aggregated:${metricName}:${period}:${startTime}:${endTime}`;
        // ✅ CACHE CONDICIONAL: Solo usar cache en servidor
        const fetchData = async ()=>{
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) {
                throw new Error('Supabase client not available');
            }
            // Query con agregación SQL
            const { data, error } = await supabase.rpc('aggregate_metrics', {
                metric_name: metricName,
                period_interval: period,
                start_time: startTime,
                end_time: endTime
            });
            if (error) {
                throw new Error(`Failed to aggregate metrics: ${error.message}`);
            }
            return data || [];
        };
        // Usar cache solo si está disponible (servidor)
        if (CacheUtils && typeof window === 'undefined') {
            return CacheUtils.cacheMetricsAggregation(cacheKey, fetchData);
        } else {
            return fetchData();
        }
    }
    /**
   * Flush métricas a base de datos
   */ async flushMetrics() {
        if (this.metricsBuffer.length === 0) {
            return;
        }
        try {
            const metrics = [
                ...this.metricsBuffer
            ];
            this.metricsBuffer = [];
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) {
                _logger.logger.error(_logger.LogLevel.ERROR, 'Supabase client not available for metrics flush', {}, _logger.LogCategory.SYSTEM);
                return;
            }
            const { error } = await supabase.from('enterprise_metrics').insert(metrics.map((metric)=>({
                    id: metric.id,
                    name: metric.name,
                    type: metric.type,
                    category: metric.category,
                    value: metric.value,
                    timestamp: metric.timestamp,
                    tags: metric.tags,
                    metadata: metric.metadata
                })));
            if (error) {
                _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to flush metrics to database', {
                    error: error.message,
                    metricsCount: metrics.length
                }, _logger.LogCategory.SYSTEM);
            } else {
                _logger.logger.debug(_logger.LogLevel.DEBUG, `Flushed ${metrics.length} metrics to database`, {}, _logger.LogCategory.SYSTEM);
            }
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Error during metrics flush', {
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Inicializa alertas por defecto
   */ initializeDefaultAlerts() {
        // Alerta de response time alto
        this.setAlertRule({
            id: 'high_response_time',
            metricName: 'performance.api.duration',
            condition: 'gt',
            threshold: 5000,
            level: "warning",
            enabled: true,
            cooldownMinutes: 5,
            description: 'API response time is too high',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
        // Alerta de error rate alto
        this.setAlertRule({
            id: 'high_error_rate',
            metricName: 'performance.api.error_rate',
            condition: 'gt',
            threshold: 0.05,
            level: "critical",
            enabled: true,
            cooldownMinutes: 2,
            description: 'API error rate is too high',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
        // Alerta de violaciones de seguridad
        this.setAlertRule({
            id: 'security_violations',
            metricName: 'security.violation',
            condition: 'gte',
            threshold: 1,
            level: "emergency",
            enabled: true,
            cooldownMinutes: 1,
            description: 'Security violation detected',
            actions: [
                {
                    type: 'log',
                    config: {}
                }
            ]
        });
    }
    /**
   * Inicia flush automático de métricas
   */ startMetricsFlush() {
        this.flushInterval = setInterval(()=>{
            this.flushMetrics();
        }, 30000); // Flush cada 30 segundos
    }
    /**
   * Almacena alerta en base de datos
   */ async storeAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').insert({
                id: alert.id,
                rule_id: alert.ruleId,
                metric_name: alert.metricName,
                level: alert.level,
                message: alert.message,
                value: alert.value,
                threshold: alert.threshold,
                triggered_at: alert.triggeredAt,
                resolved_at: alert.resolvedAt,
                metadata: alert.metadata
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to store alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Genera ID único para métrica
   */ generateMetricId() {
        return `metric_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
   * Convierte nivel de alerta al sistema enterprise
   */ convertToAlertSystemLevel(level) {
        switch(level){
            case "info":
                return _alertsystem.AlertLevel.INFO;
            case "warning":
                return _alertsystem.AlertLevel.WARNING;
            case "critical":
                return _alertsystem.AlertLevel.CRITICAL;
            case "emergency":
                return _alertsystem.AlertLevel.EMERGENCY;
            default:
                return _alertsystem.AlertLevel.INFO;
        }
    }
    /**
   * Genera ID único para alerta
   */ generateAlertId() {
        return `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
   * Limpia recursos
   */ destroy() {
        if (this.flushInterval) {
            clearInterval(this.flushInterval);
            this.flushInterval = null;
        }
        this.flushMetrics(); // Flush final
    }
}
const enterpriseMetrics = EnterpriseMetricsCollector.getInstance();
const recordPerformanceMetric = enterpriseMetrics.recordPerformanceMetric.bind(enterpriseMetrics);
const recordBusinessMetric = enterpriseMetrics.recordBusinessMetric.bind(enterpriseMetrics);
const recordSecurityMetric = enterpriseMetrics.recordSecurityMetric.bind(enterpriseMetrics);
const recordUserExperienceMetric = enterpriseMetrics.recordUserExperienceMetric.bind(enterpriseMetrics);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxlbnRlcnByaXNlLW1ldHJpY3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEVOVEVSUFJJU0UgTUVUUklDUyBTWVNURU1cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IGxvZ2dlciwgTG9nTGV2ZWwsIExvZ0NhdGVnb3J5IH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcbmltcG9ydCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuaW1wb3J0IHsgZW50ZXJwcmlzZUFsZXJ0U3lzdGVtLCBBbGVydExldmVsIGFzIEFsZXJ0U3lzdGVtTGV2ZWwgfSBmcm9tICcuL2FsZXJ0LXN5c3RlbSc7XG5cbi8vIOKchSBJTVBPUlQgQ09ORElDSU9OQUw6IFNvbG8gY2FyZ2FyIENhY2hlVXRpbHMgZW4gc2Vydmlkb3IgcGFyYSBldml0YXIgZXJyb3JlcyBkZSBpb3JlZGlzIGVuIGNsaWVudGVcbmxldCBDYWNoZVV0aWxzOiBhbnkgPSBudWxsO1xuaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gIC8vIFNvbG8gZW4gc2Vydmlkb3JcbiAgdHJ5IHtcbiAgICBDYWNoZVV0aWxzID0gcmVxdWlyZSgnQC9saWIvY2FjaGUtbWFuYWdlcicpLkNhY2hlVXRpbHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdbRW50ZXJwcmlzZU1ldHJpY3NdIENhY2hlVXRpbHMgbm90IGF2YWlsYWJsZTonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gVGlwb3MgZGUgbcOpdHJpY2FzIGVudGVycHJpc2VcbmV4cG9ydCBlbnVtIE1ldHJpY1R5cGUge1xuICBDT1VOVEVSID0gJ2NvdW50ZXInLCAgICAgICAgICAgLy8gQ29udGFkb3IgaW5jcmVtZW50YWxcbiAgR0FVR0UgPSAnZ2F1Z2UnLCAgICAgICAgICAgICAgLy8gVmFsb3IgYWN0dWFsXG4gIEhJU1RPR1JBTSA9ICdoaXN0b2dyYW0nLCAgICAgICAvLyBEaXN0cmlidWNpw7NuIGRlIHZhbG9yZXNcbiAgVElNRVIgPSAndGltZXInLCAgICAgICAgICAgICAgLy8gTWVkaWNpw7NuIGRlIHRpZW1wb1xuICBSQVRFID0gJ3JhdGUnICAgICAgICAgICAgICAgICAvLyBUYXNhIHBvciB1bmlkYWQgZGUgdGllbXBvXG59XG5cbi8vIENhdGVnb3LDrWFzIGRlIG3DqXRyaWNhcyBkZSBuZWdvY2lvXG5leHBvcnQgZW51bSBCdXNpbmVzc01ldHJpY0NhdGVnb3J5IHtcbiAgUEVSRk9STUFOQ0UgPSAncGVyZm9ybWFuY2UnLFxuICBTRUNVUklUWSA9ICdzZWN1cml0eScsXG4gIEJVU0lORVNTID0gJ2J1c2luZXNzJyxcbiAgSU5GUkFTVFJVQ1RVUkUgPSAnaW5mcmFzdHJ1Y3R1cmUnLFxuICBVU0VSX0VYUEVSSUVOQ0UgPSAndXNlcl9leHBlcmllbmNlJ1xufVxuXG4vLyBOaXZlbGVzIGRlIGFsZXJ0YVxuZXhwb3J0IGVudW0gQWxlcnRMZXZlbCB7XG4gIElORk8gPSAnaW5mbycsXG4gIFdBUk5JTkcgPSAnd2FybmluZycsXG4gIENSSVRJQ0FMID0gJ2NyaXRpY2FsJyxcbiAgRU1FUkdFTkNZID0gJ2VtZXJnZW5jeSdcbn1cblxuLy8gTcOpdHJpY2EgZW50ZXJwcmlzZVxuZXhwb3J0IGludGVyZmFjZSBFbnRlcnByaXNlTWV0cmljIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBNZXRyaWNUeXBlO1xuICBjYXRlZ29yeTogQnVzaW5lc3NNZXRyaWNDYXRlZ29yeTtcbiAgdmFsdWU6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgYWdncmVnYXRpb25QZXJpb2Q/OiBzdHJpbmc7IC8vICcxbScsICc1bScsICcxaCcsICcxZCdcbn1cblxuLy8gQ29uZmlndXJhY2nDs24gZGUgYWxlcnRhXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0UnVsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG1ldHJpY05hbWU6IHN0cmluZztcbiAgY29uZGl0aW9uOiAnZ3QnIHwgJ2x0JyB8ICdlcScgfCAnZ3RlJyB8ICdsdGUnO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgbGV2ZWw6IEFsZXJ0TGV2ZWw7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIGNvb2xkb3duTWludXRlczogbnVtYmVyO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBhY3Rpb25zOiBBbGVydEFjdGlvbltdO1xufVxuXG4vLyBBY2Npw7NuIGRlIGFsZXJ0YVxuZXhwb3J0IGludGVyZmFjZSBBbGVydEFjdGlvbiB7XG4gIHR5cGU6ICdlbWFpbCcgfCAnd2ViaG9vaycgfCAnbG9nJyB8ICdzbGFjayc7XG4gIGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLy8gQWxlcnRhIGFjdGl2YVxuZXhwb3J0IGludGVyZmFjZSBBY3RpdmVBbGVydCB7XG4gIGlkOiBzdHJpbmc7XG4gIHJ1bGVJZDogc3RyaW5nO1xuICBtZXRyaWNOYW1lOiBzdHJpbmc7XG4gIGxldmVsOiBBbGVydExldmVsO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHZhbHVlOiBudW1iZXI7XG4gIHRocmVzaG9sZDogbnVtYmVyO1xuICB0cmlnZ2VyZWRBdDogc3RyaW5nO1xuICByZXNvbHZlZEF0Pzogc3RyaW5nO1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vIEFncmVnYWNpw7NuIHRlbXBvcmFsXG5leHBvcnQgaW50ZXJmYWNlIE1ldHJpY0FnZ3JlZ2F0aW9uIHtcbiAgcGVyaW9kOiBzdHJpbmc7XG4gIHN0YXJ0VGltZTogc3RyaW5nO1xuICBlbmRUaW1lOiBzdHJpbmc7XG4gIGNvdW50OiBudW1iZXI7XG4gIHN1bTogbnVtYmVyO1xuICBhdmc6IG51bWJlcjtcbiAgbWluOiBudW1iZXI7XG4gIG1heDogbnVtYmVyO1xuICBwNTA6IG51bWJlcjtcbiAgcDk1OiBudW1iZXI7XG4gIHA5OTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFNpc3RlbWEgZGUgTcOpdHJpY2FzIEVudGVycHJpc2UgY29uIGFncmVnYWNpw7NuIHRlbXBvcmFsIHkgYWxlcnRhc1xuICovXG5leHBvcnQgY2xhc3MgRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3Ige1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3I7XG4gIHByaXZhdGUgYWxlcnRSdWxlczogTWFwPHN0cmluZywgQWxlcnRSdWxlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhY3RpdmVBbGVydHM6IE1hcDxzdHJpbmcsIEFjdGl2ZUFsZXJ0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtZXRyaWNzQnVmZmVyOiBFbnRlcnByaXNlTWV0cmljW10gPSBbXTtcbiAgcHJpdmF0ZSBmbHVzaEludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRBbGVydHMoKTtcbiAgICB0aGlzLnN0YXJ0TWV0cmljc0ZsdXNoKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3Ige1xuICAgIGlmICghRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3IuaW5zdGFuY2UpIHtcbiAgICAgIEVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yLmluc3RhbmNlID0gbmV3IEVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3Rvci5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSB1bmEgbcOpdHJpY2EgZW50ZXJwcmlzZVxuICAgKi9cbiAgYXN5bmMgcmVjb3JkTWV0cmljKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIHR5cGU6IE1ldHJpY1R5cGUgPSBNZXRyaWNUeXBlLkdBVUdFLFxuICAgIGNhdGVnb3J5OiBCdXNpbmVzc01ldHJpY0NhdGVnb3J5ID0gQnVzaW5lc3NNZXRyaWNDYXRlZ29yeS5QRVJGT1JNQU5DRSxcbiAgICB0YWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge30sXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRyaWM6IEVudGVycHJpc2VNZXRyaWMgPSB7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTWV0cmljSWQoKSxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdGFncyxcbiAgICAgICAgbWV0YWRhdGFcbiAgICAgIH07XG5cbiAgICAgIC8vIEFncmVnYXIgYSBidWZmZXIgcGFyYSBmbHVzaCBiYXRjaFxuICAgICAgdGhpcy5tZXRyaWNzQnVmZmVyLnB1c2gobWV0cmljKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIGFsZXJ0YXNcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tBbGVydHMobWV0cmljKTtcblxuICAgICAgLy8gTG9nIHBhcmEgZGVidWdnaW5nXG4gICAgICBsb2dnZXIuZGVidWcoTG9nTGV2ZWwuREVCVUcsIGBNZXRyaWMgcmVjb3JkZWQ6ICR7bmFtZX1gLCB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlLFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgdGFnc1xuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsIGBGYWlsZWQgdG8gcmVjb3JkIG1ldHJpYzogJHtuYW1lfWAsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdHlwZVxuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTcOpdHJpY2FzIGRlIHBlcmZvcm1hbmNlIGVzcGVjw61maWNhc1xuICAgKi9cbiAgYXN5bmMgcmVjb3JkUGVyZm9ybWFuY2VNZXRyaWMoXG4gICAgb3BlcmF0aW9uOiBzdHJpbmcsXG4gICAgZHVyYXRpb246IG51bWJlcixcbiAgICBzdWNjZXNzOiBib29sZWFuLFxuICAgIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnJlY29yZE1ldHJpYyhcbiAgICAgIGBwZXJmb3JtYW5jZS4ke29wZXJhdGlvbn0uZHVyYXRpb25gLFxuICAgICAgZHVyYXRpb24sXG4gICAgICBNZXRyaWNUeXBlLlRJTUVSLFxuICAgICAgQnVzaW5lc3NNZXRyaWNDYXRlZ29yeS5QRVJGT1JNQU5DRSxcbiAgICAgIHsgLi4udGFncywgc3VjY2Vzczogc3VjY2Vzcy50b1N0cmluZygpIH1cbiAgICApO1xuXG4gICAgYXdhaXQgdGhpcy5yZWNvcmRNZXRyaWMoXG4gICAgICBgcGVyZm9ybWFuY2UuJHtvcGVyYXRpb259LmNvdW50YCxcbiAgICAgIDEsXG4gICAgICBNZXRyaWNUeXBlLkNPVU5URVIsXG4gICAgICBCdXNpbmVzc01ldHJpY0NhdGVnb3J5LlBFUkZPUk1BTkNFLFxuICAgICAgeyAuLi50YWdzLCBzdWNjZXNzOiBzdWNjZXNzLnRvU3RyaW5nKCkgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTcOpdHJpY2FzIGRlIG5lZ29jaW8gZXNwZWPDrWZpY2FzXG4gICAqL1xuICBhc3luYyByZWNvcmRCdXNpbmVzc01ldHJpYyhcbiAgICBldmVudDogc3RyaW5nLFxuICAgIHZhbHVlOiBudW1iZXIgPSAxLFxuICAgIHRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnJlY29yZE1ldHJpYyhcbiAgICAgIGBidXNpbmVzcy4ke2V2ZW50fWAsXG4gICAgICB2YWx1ZSxcbiAgICAgIE1ldHJpY1R5cGUuQ09VTlRFUixcbiAgICAgIEJ1c2luZXNzTWV0cmljQ2F0ZWdvcnkuQlVTSU5FU1MsXG4gICAgICB0YWdzXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNw6l0cmljYXMgZGUgc2VndXJpZGFkIGVzcGVjw61maWNhc1xuICAgKi9cbiAgYXN5bmMgcmVjb3JkU2VjdXJpdHlNZXRyaWMoXG4gICAgZXZlbnQ6IHN0cmluZyxcbiAgICBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcsXG4gICAgdGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucmVjb3JkTWV0cmljKFxuICAgICAgYHNlY3VyaXR5LiR7ZXZlbnR9YCxcbiAgICAgIDEsXG4gICAgICBNZXRyaWNUeXBlLkNPVU5URVIsXG4gICAgICBCdXNpbmVzc01ldHJpY0NhdGVnb3J5LlNFQ1VSSVRZLFxuICAgICAgeyAuLi50YWdzLCBzZXZlcml0eSB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNw6l0cmljYXMgZGUgZXhwZXJpZW5jaWEgZGUgdXN1YXJpb1xuICAgKi9cbiAgYXN5bmMgcmVjb3JkVXNlckV4cGVyaWVuY2VNZXRyaWMoXG4gICAgbWV0cmljOiBzdHJpbmcsXG4gICAgdmFsdWU6IG51bWJlcixcbiAgICB1c2VySWQ/OiBzdHJpbmcsXG4gICAgdGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucmVjb3JkTWV0cmljKFxuICAgICAgYHV4LiR7bWV0cmljfWAsXG4gICAgICB2YWx1ZSxcbiAgICAgIE1ldHJpY1R5cGUuR0FVR0UsXG4gICAgICBCdXNpbmVzc01ldHJpY0NhdGVnb3J5LlVTRVJfRVhQRVJJRU5DRSxcbiAgICAgIHsgLi4udGFncywgdXNlcklkOiB1c2VySWQgfHwgJ2Fub255bW91cycgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJhIHVuYSByZWdsYSBkZSBhbGVydGFcbiAgICovXG4gIHNldEFsZXJ0UnVsZShydWxlOiBBbGVydFJ1bGUpOiB2b2lkIHtcbiAgICB0aGlzLmFsZXJ0UnVsZXMuc2V0KHJ1bGUuaWQsIHJ1bGUpO1xuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBBbGVydCBydWxlIGNvbmZpZ3VyZWQ6ICR7cnVsZS5pZH1gLCB7XG4gICAgICBtZXRyaWNOYW1lOiBydWxlLm1ldHJpY05hbWUsXG4gICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgbGV2ZWw6IHJ1bGUubGV2ZWxcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIGFsZXJ0YXMgcGFyYSB1bmEgbcOpdHJpY2FcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tBbGVydHMobWV0cmljOiBFbnRlcnByaXNlTWV0cmljKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMuYWxlcnRSdWxlcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKCFydWxlLmVuYWJsZWQgfHwgcnVsZS5tZXRyaWNOYW1lICE9PSBtZXRyaWMubmFtZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZpY2FyIHNpIHlhIGhheSB1bmEgYWxlcnRhIGFjdGl2YSBlbiBjb29sZG93blxuICAgICAgY29uc3QgZXhpc3RpbmdBbGVydCA9IEFycmF5LmZyb20odGhpcy5hY3RpdmVBbGVydHMudmFsdWVzKCkpXG4gICAgICAgIC5maW5kKGFsZXJ0ID0+IGFsZXJ0LnJ1bGVJZCA9PT0gcnVsZS5pZCAmJiAhYWxlcnQucmVzb2x2ZWRBdCk7XG5cbiAgICAgIGlmIChleGlzdGluZ0FsZXJ0KSB7XG4gICAgICAgIGNvbnN0IGNvb2xkb3duRW5kID0gbmV3IERhdGUoZXhpc3RpbmdBbGVydC50cmlnZ2VyZWRBdCk7XG4gICAgICAgIGNvb2xkb3duRW5kLnNldE1pbnV0ZXMoY29vbGRvd25FbmQuZ2V0TWludXRlcygpICsgcnVsZS5jb29sZG93bk1pbnV0ZXMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG5ldyBEYXRlKCkgPCBjb29sZG93bkVuZCkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvLyBBw7puIGVuIGNvb2xkb3duXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRXZhbHVhciBjb25kaWNpw7NuXG4gICAgICBjb25zdCB0cmlnZ2VyZWQgPSB0aGlzLmV2YWx1YXRlQ29uZGl0aW9uKG1ldHJpYy52YWx1ZSwgcnVsZS5jb25kaXRpb24sIHJ1bGUudGhyZXNob2xkKTtcblxuICAgICAgaWYgKHRyaWdnZXJlZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJBbGVydChydWxlLCBtZXRyaWMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsw7phIGNvbmRpY2nDs24gZGUgYWxlcnRhXG4gICAqL1xuICBwcml2YXRlIGV2YWx1YXRlQ29uZGl0aW9uKHZhbHVlOiBudW1iZXIsIGNvbmRpdGlvbjogc3RyaW5nLCB0aHJlc2hvbGQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHN3aXRjaCAoY29uZGl0aW9uKSB7XG4gICAgICBjYXNlICdndCc6IHJldHVybiB2YWx1ZSA+IHRocmVzaG9sZDtcbiAgICAgIGNhc2UgJ2d0ZSc6IHJldHVybiB2YWx1ZSA+PSB0aHJlc2hvbGQ7XG4gICAgICBjYXNlICdsdCc6IHJldHVybiB2YWx1ZSA8IHRocmVzaG9sZDtcbiAgICAgIGNhc2UgJ2x0ZSc6IHJldHVybiB2YWx1ZSA8PSB0aHJlc2hvbGQ7XG4gICAgICBjYXNlICdlcSc6IHJldHVybiB2YWx1ZSA9PT0gdGhyZXNob2xkO1xuICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXJhIHVuYSBhbGVydGEgdXNhbmRvIGVsIHNpc3RlbWEgZW50ZXJwcmlzZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQWxlcnQocnVsZTogQWxlcnRSdWxlLCBtZXRyaWM6IEVudGVycHJpc2VNZXRyaWMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDb252ZXJ0aXIgbml2ZWwgZGUgYWxlcnRhIGFsIHNpc3RlbWEgZW50ZXJwcmlzZVxuICAgIGNvbnN0IGFsZXJ0TGV2ZWwgPSB0aGlzLmNvbnZlcnRUb0FsZXJ0U3lzdGVtTGV2ZWwocnVsZS5sZXZlbCk7XG5cbiAgICAvLyBVc2FyIGVsIHNpc3RlbWEgZGUgYWxlcnRhcyBlbnRlcnByaXNlXG4gICAgY29uc3QgYWxlcnQgPSBhd2FpdCBlbnRlcnByaXNlQWxlcnRTeXN0ZW0udHJpZ2dlckFsZXJ0KFxuICAgICAgcnVsZS5pZCxcbiAgICAgIHJ1bGUubWV0cmljTmFtZSxcbiAgICAgIG1ldHJpYy52YWx1ZSxcbiAgICAgIGAke3J1bGUuZGVzY3JpcHRpb259IC0gVmFsdWU6ICR7bWV0cmljLnZhbHVlfSwgVGhyZXNob2xkOiAke3J1bGUudGhyZXNob2xkfWBcbiAgICApO1xuXG4gICAgaWYgKGFsZXJ0KSB7XG4gICAgICAvLyBNYW50ZW5lciByZWZlcmVuY2lhIGxvY2FsIHBhcmEgY29tcGF0aWJpbGlkYWRcbiAgICAgIGNvbnN0IGxvY2FsQWxlcnQ6IEFjdGl2ZUFsZXJ0ID0ge1xuICAgICAgICBpZDogYWxlcnQuaWQsXG4gICAgICAgIHJ1bGVJZDogYWxlcnQucnVsZUlkLFxuICAgICAgICBtZXRyaWNOYW1lOiBhbGVydC5tZXRyaWNOYW1lLFxuICAgICAgICBsZXZlbDogcnVsZS5sZXZlbCxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgdmFsdWU6IGFsZXJ0LnZhbHVlLFxuICAgICAgICB0aHJlc2hvbGQ6IGFsZXJ0LnRocmVzaG9sZCxcbiAgICAgICAgdHJpZ2dlcmVkQXQ6IGFsZXJ0LnRyaWdnZXJlZEF0LFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIG1ldHJpYzogbWV0cmljLFxuICAgICAgICAgIHJ1bGU6IHJ1bGVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5hY3RpdmVBbGVydHMuc2V0KGFsZXJ0LmlkLCBsb2NhbEFsZXJ0KTtcblxuICAgICAgLy8gTG9nIGFsZXJ0YVxuICAgICAgbG9nZ2VyLndhcm4oTG9nTGV2ZWwuV0FSTiwgYEFsZXJ0IHRyaWdnZXJlZCB2aWEgZW50ZXJwcmlzZSBzeXN0ZW06ICR7cnVsZS5pZH1gLCB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgICBsZXZlbDogYWxlcnQubGV2ZWwsXG4gICAgICAgIG1ldHJpY05hbWU6IGFsZXJ0Lm1ldHJpY05hbWUsXG4gICAgICAgIHZhbHVlOiBhbGVydC52YWx1ZSxcbiAgICAgICAgdGhyZXNob2xkOiBhbGVydC50aHJlc2hvbGRcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVqZWN1dGEgYWNjacOzbiBkZSBhbGVydGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUFsZXJ0QWN0aW9uKGFjdGlvbjogQWxlcnRBY3Rpb24sIGFsZXJ0OiBBY3RpdmVBbGVydCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2xvZyc6XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCBgQUxFUlQ6ICR7YWxlcnQubWVzc2FnZX1gLCB7XG4gICAgICAgICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgICAgICAgIGxldmVsOiBhbGVydC5sZXZlbFxuICAgICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnd2ViaG9vayc6XG4gICAgICAgICAgaWYgKGFjdGlvbi5jb25maWcudXJsKSB7XG4gICAgICAgICAgICBhd2FpdCBmZXRjaChhY3Rpb24uY29uZmlnLnVybCwge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGFsZXJ0KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnRhciBlbnbDrW8gZGUgZW1haWxcbiAgICAgICAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgRW1haWwgYWxlcnQgd291bGQgYmUgc2VudCB0bzogJHthY3Rpb24uY29uZmlnLnRvfWAsIHtcbiAgICAgICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkXG4gICAgICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdzbGFjayc6XG4gICAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50YXIgbm90aWZpY2FjacOzbiBTbGFja1xuICAgICAgICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBTbGFjayBhbGVydCB3b3VsZCBiZSBzZW50IHRvOiAke2FjdGlvbi5jb25maWcuY2hhbm5lbH1gLCB7XG4gICAgICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgYEZhaWxlZCB0byBleGVjdXRlIGFsZXJ0IGFjdGlvbjogJHthY3Rpb24udHlwZX1gLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgYWxlcnRJZDogYWxlcnQuaWRcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9idGllbmUgbcOpdHJpY2FzIGFncmVnYWRhc1xuICAgKi9cbiAgYXN5bmMgZ2V0QWdncmVnYXRlZE1ldHJpY3MoXG4gICAgbWV0cmljTmFtZTogc3RyaW5nLFxuICAgIHBlcmlvZDogJzFtJyB8ICc1bScgfCAnMWgnIHwgJzFkJyB8ICc3ZCcsXG4gICAgc3RhcnRUaW1lOiBzdHJpbmcsXG4gICAgZW5kVGltZTogc3RyaW5nXG4gICk6IFByb21pc2U8TWV0cmljQWdncmVnYXRpb25bXT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYG1ldHJpY3M6YWdncmVnYXRlZDoke21ldHJpY05hbWV9OiR7cGVyaW9kfToke3N0YXJ0VGltZX06JHtlbmRUaW1lfWA7XG4gICAgXG4gICAgLy8g4pyFIENBQ0hFIENPTkRJQ0lPTkFMOiBTb2xvIHVzYXIgY2FjaGUgZW4gc2Vydmlkb3JcbiAgICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KHRydWUpO1xuXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIH1cblxuICAgICAgLy8gUXVlcnkgY29uIGFncmVnYWNpw7NuIFNRTFxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdhZ2dyZWdhdGVfbWV0cmljcycsIHtcbiAgICAgICAgbWV0cmljX25hbWU6IG1ldHJpY05hbWUsXG4gICAgICAgIHBlcmlvZF9pbnRlcnZhbDogcGVyaW9kLFxuICAgICAgICBzdGFydF90aW1lOiBzdGFydFRpbWUsXG4gICAgICAgIGVuZF90aW1lOiBlbmRUaW1lXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFnZ3JlZ2F0ZSBtZXRyaWNzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH07XG5cbiAgICAvLyBVc2FyIGNhY2hlIHNvbG8gc2kgZXN0w6EgZGlzcG9uaWJsZSAoc2Vydmlkb3IpXG4gICAgaWYgKENhY2hlVXRpbHMgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBDYWNoZVV0aWxzLmNhY2hlTWV0cmljc0FnZ3JlZ2F0aW9uKGNhY2hlS2V5LCBmZXRjaERhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmV0Y2hEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIG3DqXRyaWNhcyBhIGJhc2UgZGUgZGF0b3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmx1c2hNZXRyaWNzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1ldHJpY3NCdWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBbLi4udGhpcy5tZXRyaWNzQnVmZmVyXTtcbiAgICAgIHRoaXMubWV0cmljc0J1ZmZlciA9IFtdO1xuXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KHRydWUpO1xuICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdTdXBhYmFzZSBjbGllbnQgbm90IGF2YWlsYWJsZSBmb3IgbWV0cmljcyBmbHVzaCcsIHt9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdlbnRlcnByaXNlX21ldHJpY3MnKVxuICAgICAgICAuaW5zZXJ0KG1ldHJpY3MubWFwKG1ldHJpYyA9PiAoe1xuICAgICAgICAgIGlkOiBtZXRyaWMuaWQsXG4gICAgICAgICAgbmFtZTogbWV0cmljLm5hbWUsXG4gICAgICAgICAgdHlwZTogbWV0cmljLnR5cGUsXG4gICAgICAgICAgY2F0ZWdvcnk6IG1ldHJpYy5jYXRlZ29yeSxcbiAgICAgICAgICB2YWx1ZTogbWV0cmljLnZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbWV0cmljLnRpbWVzdGFtcCxcbiAgICAgICAgICB0YWdzOiBtZXRyaWMudGFncyxcbiAgICAgICAgICBtZXRhZGF0YTogbWV0cmljLm1ldGFkYXRhXG4gICAgICAgIH0pKSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gZmx1c2ggbWV0cmljcyB0byBkYXRhYmFzZScsIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBtZXRyaWNzQ291bnQ6IG1ldHJpY3MubGVuZ3RoXG4gICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIuZGVidWcoTG9nTGV2ZWwuREVCVUcsIGBGbHVzaGVkICR7bWV0cmljcy5sZW5ndGh9IG1ldHJpY3MgdG8gZGF0YWJhc2VgLCB7fSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdFcnJvciBkdXJpbmcgbWV0cmljcyBmbHVzaCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIGFsZXJ0YXMgcG9yIGRlZmVjdG9cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRBbGVydHMoKTogdm9pZCB7XG4gICAgLy8gQWxlcnRhIGRlIHJlc3BvbnNlIHRpbWUgYWx0b1xuICAgIHRoaXMuc2V0QWxlcnRSdWxlKHtcbiAgICAgIGlkOiAnaGlnaF9yZXNwb25zZV90aW1lJyxcbiAgICAgIG1ldHJpY05hbWU6ICdwZXJmb3JtYW5jZS5hcGkuZHVyYXRpb24nLFxuICAgICAgY29uZGl0aW9uOiAnZ3QnLFxuICAgICAgdGhyZXNob2xkOiA1MDAwLCAvLyA1IHNlZ3VuZG9zXG4gICAgICBsZXZlbDogQWxlcnRMZXZlbC5XQVJOSU5HLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGNvb2xkb3duTWludXRlczogNSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQVBJIHJlc3BvbnNlIHRpbWUgaXMgdG9vIGhpZ2gnLFxuICAgICAgYWN0aW9uczogW3sgdHlwZTogJ2xvZycsIGNvbmZpZzoge30gfV1cbiAgICB9KTtcblxuICAgIC8vIEFsZXJ0YSBkZSBlcnJvciByYXRlIGFsdG9cbiAgICB0aGlzLnNldEFsZXJ0UnVsZSh7XG4gICAgICBpZDogJ2hpZ2hfZXJyb3JfcmF0ZScsXG4gICAgICBtZXRyaWNOYW1lOiAncGVyZm9ybWFuY2UuYXBpLmVycm9yX3JhdGUnLFxuICAgICAgY29uZGl0aW9uOiAnZ3QnLFxuICAgICAgdGhyZXNob2xkOiAwLjA1LCAvLyA1JVxuICAgICAgbGV2ZWw6IEFsZXJ0TGV2ZWwuQ1JJVElDQUwsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgY29vbGRvd25NaW51dGVzOiAyLFxuICAgICAgZGVzY3JpcHRpb246ICdBUEkgZXJyb3IgcmF0ZSBpcyB0b28gaGlnaCcsXG4gICAgICBhY3Rpb25zOiBbeyB0eXBlOiAnbG9nJywgY29uZmlnOiB7fSB9XVxuICAgIH0pO1xuXG4gICAgLy8gQWxlcnRhIGRlIHZpb2xhY2lvbmVzIGRlIHNlZ3VyaWRhZFxuICAgIHRoaXMuc2V0QWxlcnRSdWxlKHtcbiAgICAgIGlkOiAnc2VjdXJpdHlfdmlvbGF0aW9ucycsXG4gICAgICBtZXRyaWNOYW1lOiAnc2VjdXJpdHkudmlvbGF0aW9uJyxcbiAgICAgIGNvbmRpdGlvbjogJ2d0ZScsXG4gICAgICB0aHJlc2hvbGQ6IDEsXG4gICAgICBsZXZlbDogQWxlcnRMZXZlbC5FTUVSR0VOQ1ksXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgY29vbGRvd25NaW51dGVzOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdTZWN1cml0eSB2aW9sYXRpb24gZGV0ZWN0ZWQnLFxuICAgICAgYWN0aW9uczogW3sgdHlwZTogJ2xvZycsIGNvbmZpZzoge30gfV1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWEgZmx1c2ggYXV0b23DoXRpY28gZGUgbcOpdHJpY2FzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0TWV0cmljc0ZsdXNoKCk6IHZvaWQge1xuICAgIHRoaXMuZmx1c2hJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuZmx1c2hNZXRyaWNzKCk7XG4gICAgfSwgMzAwMDApOyAvLyBGbHVzaCBjYWRhIDMwIHNlZ3VuZG9zXG4gIH1cblxuICAvKipcbiAgICogQWxtYWNlbmEgYWxlcnRhIGVuIGJhc2UgZGUgZGF0b3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVBbGVydChhbGVydDogQWN0aXZlQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCh0cnVlKTtcbiAgICAgIGlmICghc3VwYWJhc2UpIHJldHVybjtcblxuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZW50ZXJwcmlzZV9hbGVydHMnKS5pbnNlcnQoe1xuICAgICAgICBpZDogYWxlcnQuaWQsXG4gICAgICAgIHJ1bGVfaWQ6IGFsZXJ0LnJ1bGVJZCxcbiAgICAgICAgbWV0cmljX25hbWU6IGFsZXJ0Lm1ldHJpY05hbWUsXG4gICAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgdmFsdWU6IGFsZXJ0LnZhbHVlLFxuICAgICAgICB0aHJlc2hvbGQ6IGFsZXJ0LnRocmVzaG9sZCxcbiAgICAgICAgdHJpZ2dlcmVkX2F0OiBhbGVydC50cmlnZ2VyZWRBdCxcbiAgICAgICAgcmVzb2x2ZWRfYXQ6IGFsZXJ0LnJlc29sdmVkQXQsXG4gICAgICAgIG1ldGFkYXRhOiBhbGVydC5tZXRhZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgJ0ZhaWxlZCB0byBzdG9yZSBhbGVydCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBhbGVydElkOiBhbGVydC5pZFxuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhIElEIMO6bmljbyBwYXJhIG3DqXRyaWNhXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTWV0cmljSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG1ldHJpY18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29udmllcnRlIG5pdmVsIGRlIGFsZXJ0YSBhbCBzaXN0ZW1hIGVudGVycHJpc2VcbiAgICovXG4gIHByaXZhdGUgY29udmVydFRvQWxlcnRTeXN0ZW1MZXZlbChsZXZlbDogQWxlcnRMZXZlbCk6IEFsZXJ0U3lzdGVtTGV2ZWwge1xuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgQWxlcnRMZXZlbC5JTkZPOlxuICAgICAgICByZXR1cm4gQWxlcnRTeXN0ZW1MZXZlbC5JTkZPO1xuICAgICAgY2FzZSBBbGVydExldmVsLldBUk5JTkc6XG4gICAgICAgIHJldHVybiBBbGVydFN5c3RlbUxldmVsLldBUk5JTkc7XG4gICAgICBjYXNlIEFsZXJ0TGV2ZWwuQ1JJVElDQUw6XG4gICAgICAgIHJldHVybiBBbGVydFN5c3RlbUxldmVsLkNSSVRJQ0FMO1xuICAgICAgY2FzZSBBbGVydExldmVsLkVNRVJHRU5DWTpcbiAgICAgICAgcmV0dXJuIEFsZXJ0U3lzdGVtTGV2ZWwuRU1FUkdFTkNZO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEFsZXJ0U3lzdGVtTGV2ZWwuSU5GTztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhIElEIMO6bmljbyBwYXJhIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUFsZXJ0SWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGFsZXJ0XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW1waWEgcmVjdXJzb3NcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmx1c2hJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmZsdXNoSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5mbHVzaEludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5mbHVzaE1ldHJpY3MoKTsgLy8gRmx1c2ggZmluYWxcbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgc2luZ2xldG9uXG5leHBvcnQgY29uc3QgZW50ZXJwcmlzZU1ldHJpY3MgPSBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3Rvci5nZXRJbnN0YW5jZSgpO1xuXG4vLyBGdW5jaW9uZXMgZGUgY29udmVuaWVuY2lhXG5leHBvcnQgY29uc3QgcmVjb3JkUGVyZm9ybWFuY2VNZXRyaWMgPSBlbnRlcnByaXNlTWV0cmljcy5yZWNvcmRQZXJmb3JtYW5jZU1ldHJpYy5iaW5kKGVudGVycHJpc2VNZXRyaWNzKTtcbmV4cG9ydCBjb25zdCByZWNvcmRCdXNpbmVzc01ldHJpYyA9IGVudGVycHJpc2VNZXRyaWNzLnJlY29yZEJ1c2luZXNzTWV0cmljLmJpbmQoZW50ZXJwcmlzZU1ldHJpY3MpO1xuZXhwb3J0IGNvbnN0IHJlY29yZFNlY3VyaXR5TWV0cmljID0gZW50ZXJwcmlzZU1ldHJpY3MucmVjb3JkU2VjdXJpdHlNZXRyaWMuYmluZChlbnRlcnByaXNlTWV0cmljcyk7XG5leHBvcnQgY29uc3QgcmVjb3JkVXNlckV4cGVyaWVuY2VNZXRyaWMgPSBlbnRlcnByaXNlTWV0cmljcy5yZWNvcmRVc2VyRXhwZXJpZW5jZU1ldHJpYy5iaW5kKGVudGVycHJpc2VNZXRyaWNzKTtcbiJdLCJuYW1lcyI6WyJBbGVydExldmVsIiwiQnVzaW5lc3NNZXRyaWNDYXRlZ29yeSIsIkVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yIiwiTWV0cmljVHlwZSIsImVudGVycHJpc2VNZXRyaWNzIiwicmVjb3JkQnVzaW5lc3NNZXRyaWMiLCJyZWNvcmRQZXJmb3JtYW5jZU1ldHJpYyIsInJlY29yZFNlY3VyaXR5TWV0cmljIiwicmVjb3JkVXNlckV4cGVyaWVuY2VNZXRyaWMiLCJDYWNoZVV0aWxzIiwid2luZG93IiwicmVxdWlyZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJhbGVydFJ1bGVzIiwiTWFwIiwiYWN0aXZlQWxlcnRzIiwibWV0cmljc0J1ZmZlciIsImZsdXNoSW50ZXJ2YWwiLCJpbml0aWFsaXplRGVmYXVsdEFsZXJ0cyIsInN0YXJ0TWV0cmljc0ZsdXNoIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInJlY29yZE1ldHJpYyIsIm5hbWUiLCJ2YWx1ZSIsInR5cGUiLCJjYXRlZ29yeSIsInRhZ3MiLCJtZXRhZGF0YSIsIm1ldHJpYyIsImlkIiwiZ2VuZXJhdGVNZXRyaWNJZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJjaGVja0FsZXJ0cyIsImxvZ2dlciIsImRlYnVnIiwiTG9nTGV2ZWwiLCJERUJVRyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwiRVJST1IiLCJFcnJvciIsIm1lc3NhZ2UiLCJvcGVyYXRpb24iLCJkdXJhdGlvbiIsInN1Y2Nlc3MiLCJ0b1N0cmluZyIsImV2ZW50Iiwic2V2ZXJpdHkiLCJ1c2VySWQiLCJzZXRBbGVydFJ1bGUiLCJydWxlIiwic2V0IiwiaW5mbyIsIklORk8iLCJtZXRyaWNOYW1lIiwidGhyZXNob2xkIiwibGV2ZWwiLCJ2YWx1ZXMiLCJlbmFibGVkIiwiZXhpc3RpbmdBbGVydCIsIkFycmF5IiwiZnJvbSIsImZpbmQiLCJhbGVydCIsInJ1bGVJZCIsInJlc29sdmVkQXQiLCJjb29sZG93bkVuZCIsInRyaWdnZXJlZEF0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJjb29sZG93bk1pbnV0ZXMiLCJ0cmlnZ2VyZWQiLCJldmFsdWF0ZUNvbmRpdGlvbiIsImNvbmRpdGlvbiIsInRyaWdnZXJBbGVydCIsImFsZXJ0TGV2ZWwiLCJjb252ZXJ0VG9BbGVydFN5c3RlbUxldmVsIiwiZW50ZXJwcmlzZUFsZXJ0U3lzdGVtIiwiZGVzY3JpcHRpb24iLCJsb2NhbEFsZXJ0IiwiV0FSTiIsImFsZXJ0SWQiLCJleGVjdXRlQWxlcnRBY3Rpb24iLCJhY3Rpb24iLCJjb25maWciLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRvIiwiY2hhbm5lbCIsImdldEFnZ3JlZ2F0ZWRNZXRyaWNzIiwicGVyaW9kIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImNhY2hlS2V5IiwiZmV0Y2hEYXRhIiwic3VwYWJhc2UiLCJnZXRTdXBhYmFzZUNsaWVudCIsImRhdGEiLCJycGMiLCJtZXRyaWNfbmFtZSIsInBlcmlvZF9pbnRlcnZhbCIsInN0YXJ0X3RpbWUiLCJlbmRfdGltZSIsImNhY2hlTWV0cmljc0FnZ3JlZ2F0aW9uIiwiZmx1c2hNZXRyaWNzIiwibGVuZ3RoIiwibWV0cmljcyIsImluc2VydCIsIm1hcCIsIm1ldHJpY3NDb3VudCIsImFjdGlvbnMiLCJzZXRJbnRlcnZhbCIsInN0b3JlQWxlcnQiLCJydWxlX2lkIiwidHJpZ2dlcmVkX2F0IiwicmVzb2x2ZWRfYXQiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwiQWxlcnRTeXN0ZW1MZXZlbCIsIldBUk5JTkciLCJDUklUSUNBTCIsIkVNRVJHRU5DWSIsImdlbmVyYXRlQWxlcnRJZCIsImRlc3Ryb3kiLCJjbGVhckludGVydmFsIiwiYmluZCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLGlEQUFpRDtBQUNqRCxzQ0FBc0M7Ozs7Ozs7Ozs7OztRQW9DMUJBO2VBQUFBOztRQVRBQztlQUFBQTs7UUFnRkNDO2VBQUFBOztRQXpGREM7ZUFBQUE7O1FBa2xCQ0M7ZUFBQUE7O1FBSUFDO2VBQUFBOztRQURBQztlQUFBQTs7UUFFQUM7ZUFBQUE7O1FBQ0FDO2VBQUFBOzs7d0JBeG1CaUM7MEJBQ1o7NkJBQ29DO0FBRXRFLHFH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