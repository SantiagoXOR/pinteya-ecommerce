bdecb352220c08c18da75b33ce344acd
// ===================================
// PINTEYA E-COMMERCE - TEST PARA VERIFICAR CORRECCIÓN requireAdminAuth
// ===================================
"use strict";
// Mock completo de supabase-auth-utils
jest.mock('@/lib/auth/supabase-auth-utils', ()=>({
        requireAdminAuth: jest.fn()
    }));
// Mock de getAuthenticatedAdmin
jest.mock('@/lib/auth/admin-auth', ()=>({
        getAuthenticatedAdmin: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const mockGetAuthenticatedAdmin = getAuthenticatedAdmin;
describe('requireAdminAuth - Corrección Error 401', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        console.log = jest.fn(); // Silenciar logs en tests
        console.warn = jest.fn();
    });
    it('debe usar getAuthenticatedAdmin corregida y autorizar admin correctamente', async ()=>{
        // Mock de usuario admin válido
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_admin123',
            sessionId: 'sess_123',
            isAdmin: true,
            user: {
                id: 'user_admin123',
                email: 'santiago@xor.com.ar'
            }
        });
        const mockRequest = new _server.NextRequest('https://example.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result).toEqual({
            success: true,
            user: {
                id: 'user_admin123',
                email: 'santiago@xor.com.ar',
                role: 'admin',
                permissions: {}
            },
            supabase: undefined,
            isAdmin: true
        });
        expect(mockGetAuthenticatedAdmin).toHaveBeenCalledWith(mockRequest);
    });
    it('debe rechazar usuario no autenticado', async ()=>{
        // Mock de usuario no autenticado
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: null,
            isAdmin: false,
            error: 'Usuario no autenticado',
            status: 401
        });
        const mockRequest = new _server.NextRequest('https://example.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result).toEqual({
            success: false,
            error: 'Usuario no autenticado',
            status: 401
        });
    });
    it('debe rechazar usuario autenticado pero no admin', async ()=>{
        // Mock de usuario regular (no admin)
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_regular123',
            isAdmin: false,
            user: {
                id: 'user_regular123',
                email: 'user@example.com'
            }
        });
        const mockRequest = new _server.NextRequest('https://example.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result).toEqual({
            success: false,
            error: 'Acceso denegado: se requiere rol de administrador',
            status: 403
        });
    });
    it('debe manejar errores de getAuthenticatedAdmin', async ()=>{
        // Mock de error en getAuthenticatedAdmin
        mockGetAuthenticatedAdmin.mockRejectedValue(new Error('Clerk API error'));
        const mockRequest = new _server.NextRequest('https://example.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result).toEqual({
            success: false,
            error: 'Error interno del servidor',
            status: 500
        });
    });
    it('debe manejar usuario admin sin objeto user completo', async ()=>{
        // Mock de admin con datos mínimos
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_admin123',
            isAdmin: true,
            user: undefined // Sin objeto user completo
        });
        const mockRequest = new _server.NextRequest('https://example.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result).toEqual({
            success: true,
            user: {
                id: 'user_admin123',
                email: 'unknown',
                role: 'admin',
                permissions: {}
            },
            supabase: undefined,
            isAdmin: true
        });
    });
});
describe('requireAdminAuth - Integración con APIs de Monitoreo', ()=>{
    it('debe funcionar correctamente para /api/admin/monitoring', async ()=>{
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_admin123',
            isAdmin: true,
            user: {
                id: 'user_admin123',
                email: 'santiago@xor.com.ar'
            }
        });
        const mockRequest = new _server.NextRequest('https://pinteya.com/api/admin/monitoring');
        const result = await requireAdminAuth(mockRequest);
        expect(result.success).toBe(true);
        expect(result.user?.role).toBe('admin');
    });
    it('debe funcionar correctamente para /api/admin/monitoring/enterprise-metrics', async ()=>{
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_admin123',
            isAdmin: true,
            user: {
                id: 'user_admin123',
                email: 'santiago@xor.com.ar'
            }
        });
        const mockRequest = new _server.NextRequest('https://pinteya.com/api/admin/monitoring/enterprise-metrics');
        const result = await requireAdminAuth(mockRequest, [
            'admin_access',
            'monitoring_access'
        ]);
        expect(result.success).toBe(true);
        expect(result.isAdmin).toBe(true);
    });
});
describe('requireAdminAuth - Verificación de Regresión', ()=>{
    it('NO debe usar la función getAuthenticatedUser antigua (que esperaba Bearer token)', async ()=>{
        // Este test verifica que ya no se use la función que esperaba Bearer tokens
        mockGetAuthenticatedAdmin.mockResolvedValue({
            userId: 'user_admin123',
            isAdmin: true,
            user: {
                id: 'user_admin123',
                email: 'santiago@xor.com.ar'
            }
        });
        const mockRequest = new _server.NextRequest('https://pinteya.com/api/admin/monitoring');
        // NO agregar header Authorization - debe funcionar con cookies de sesión
        const result = await requireAdminAuth(mockRequest);
        expect(result.success).toBe(true);
        expect(mockGetAuthenticatedAdmin).toHaveBeenCalledWith(mockRequest);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxhdXRoXFxyZXF1aXJlLWFkbWluLWF1dGgtZml4LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIFRFU1QgUEFSQSBWRVJJRklDQVIgQ09SUkVDQ0nDk04gcmVxdWlyZUFkbWluQXV0aFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbi8vIE1vY2sgY29tcGxldG8gZGUgc3VwYWJhc2UtYXV0aC11dGlsc1xuamVzdC5tb2NrKCdAL2xpYi9hdXRoL3N1cGFiYXNlLWF1dGgtdXRpbHMnLCAoKSA9PiAoe1xuICByZXF1aXJlQWRtaW5BdXRoOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgZGUgZ2V0QXV0aGVudGljYXRlZEFkbWluXG5qZXN0Lm1vY2soJ0AvbGliL2F1dGgvYWRtaW4tYXV0aCcsICgpID0+ICh7XG4gIGdldEF1dGhlbnRpY2F0ZWRBZG1pbjogamVzdC5mbigpLFxufSkpO1xuXG5jb25zdCBtb2NrR2V0QXV0aGVudGljYXRlZEFkbWluID0gZ2V0QXV0aGVudGljYXRlZEFkbWluIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGdldEF1dGhlbnRpY2F0ZWRBZG1pbj47XG5cbmRlc2NyaWJlKCdyZXF1aXJlQWRtaW5BdXRoIC0gQ29ycmVjY2nDs24gRXJyb3IgNDAxJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBjb25zb2xlLmxvZyA9IGplc3QuZm4oKTsgLy8gU2lsZW5jaWFyIGxvZ3MgZW4gdGVzdHNcbiAgICBjb25zb2xlLndhcm4gPSBqZXN0LmZuKCk7XG4gIH0pO1xuXG4gIGl0KCdkZWJlIHVzYXIgZ2V0QXV0aGVudGljYXRlZEFkbWluIGNvcnJlZ2lkYSB5IGF1dG9yaXphciBhZG1pbiBjb3JyZWN0YW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1vY2sgZGUgdXN1YXJpbyBhZG1pbiB2w6FsaWRvXG4gICAgbW9ja0dldEF1dGhlbnRpY2F0ZWRBZG1pbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VySWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJyxcbiAgICAgIGlzQWRtaW46IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIGVtYWlsOiAnc2FudGlhZ29AeG9yLmNvbS5hcidcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwczovL2V4YW1wbGUuY29tL2FwaS9hZG1pbi9tb25pdG9yaW5nJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUFkbWluQXV0aChtb2NrUmVxdWVzdCk7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICAgIGVtYWlsOiAnc2FudGlhZ29AeG9yLmNvbS5hcicsXG4gICAgICAgIHJvbGU6ICdhZG1pbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7fVxuICAgICAgfSxcbiAgICAgIHN1cGFiYXNlOiB1bmRlZmluZWQsXG4gICAgICBpc0FkbWluOiB0cnVlXG4gICAgfSk7XG5cbiAgICBleHBlY3QobW9ja0dldEF1dGhlbnRpY2F0ZWRBZG1pbikudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1JlcXVlc3QpO1xuICB9KTtcblxuICBpdCgnZGViZSByZWNoYXphciB1c3VhcmlvIG5vIGF1dGVudGljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1vY2sgZGUgdXN1YXJpbyBubyBhdXRlbnRpY2Fkb1xuICAgIG1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgdXNlcklkOiBudWxsLFxuICAgICAgaXNBZG1pbjogZmFsc2UsXG4gICAgICBlcnJvcjogJ1VzdWFyaW8gbm8gYXV0ZW50aWNhZG8nLFxuICAgICAgc3RhdHVzOiA0MDFcbiAgICB9KTtcblxuICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwczovL2V4YW1wbGUuY29tL2FwaS9hZG1pbi9tb25pdG9yaW5nJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUFkbWluQXV0aChtb2NrUmVxdWVzdCk7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdVc3VhcmlvIG5vIGF1dGVudGljYWRvJyxcbiAgICAgIHN0YXR1czogNDAxXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdkZWJlIHJlY2hhemFyIHVzdWFyaW8gYXV0ZW50aWNhZG8gcGVybyBubyBhZG1pbicsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIGRlIHVzdWFyaW8gcmVndWxhciAobm8gYWRtaW4pXG4gICAgbW9ja0dldEF1dGhlbnRpY2F0ZWRBZG1pbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VySWQ6ICd1c2VyX3JlZ3VsYXIxMjMnLFxuICAgICAgaXNBZG1pbjogZmFsc2UsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiAndXNlcl9yZWd1bGFyMTIzJyxcbiAgICAgICAgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9ja1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXBpL2FkbWluL21vbml0b3JpbmcnKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1aXJlQWRtaW5BdXRoKG1vY2tSZXF1ZXN0KTtcblxuICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0FjY2VzbyBkZW5lZ2Fkbzogc2UgcmVxdWllcmUgcm9sIGRlIGFkbWluaXN0cmFkb3InLFxuICAgICAgc3RhdHVzOiA0MDNcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2RlYmUgbWFuZWphciBlcnJvcmVzIGRlIGdldEF1dGhlbnRpY2F0ZWRBZG1pbicsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIGRlIGVycm9yIGVuIGdldEF1dGhlbnRpY2F0ZWRBZG1pblxuICAgIG1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4ubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDbGVyayBBUEkgZXJyb3InKSk7XG5cbiAgICBjb25zdCBtb2NrUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cHM6Ly9leGFtcGxlLmNvbS9hcGkvYWRtaW4vbW9uaXRvcmluZycpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcXVpcmVBZG1pbkF1dGgobW9ja1JlcXVlc3QpO1xuXG4gICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InLFxuICAgICAgc3RhdHVzOiA1MDBcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ2RlYmUgbWFuZWphciB1c3VhcmlvIGFkbWluIHNpbiBvYmpldG8gdXNlciBjb21wbGV0bycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIGRlIGFkbWluIGNvbiBkYXRvcyBtw61uaW1vc1xuICAgIG1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgdXNlcklkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgdXNlcjogdW5kZWZpbmVkIC8vIFNpbiBvYmpldG8gdXNlciBjb21wbGV0b1xuICAgIH0pO1xuXG4gICAgY29uc3QgbW9ja1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXBpL2FkbWluL21vbml0b3JpbmcnKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1aXJlQWRtaW5BdXRoKG1vY2tSZXF1ZXN0KTtcblxuICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgZW1haWw6ICd1bmtub3duJyxcbiAgICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgICAgcGVybWlzc2lvbnM6IHt9XG4gICAgICB9LFxuICAgICAgc3VwYWJhc2U6IHVuZGVmaW5lZCxcbiAgICAgIGlzQWRtaW46IHRydWVcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ3JlcXVpcmVBZG1pbkF1dGggLSBJbnRlZ3JhY2nDs24gY29uIEFQSXMgZGUgTW9uaXRvcmVvJywgKCkgPT4ge1xuICBpdCgnZGViZSBmdW5jaW9uYXIgY29ycmVjdGFtZW50ZSBwYXJhIC9hcGkvYWRtaW4vbW9uaXRvcmluZycsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0QXV0aGVudGljYXRlZEFkbWluLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHVzZXJJZDogJ3VzZXJfYWRtaW4xMjMnLFxuICAgICAgaXNBZG1pbjogdHJ1ZSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgZW1haWw6ICdzYW50aWFnb0B4b3IuY29tLmFyJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9ja1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHBzOi8vcGludGV5YS5jb20vYXBpL2FkbWluL21vbml0b3JpbmcnKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1aXJlQWRtaW5BdXRoKG1vY2tSZXF1ZXN0KTtcblxuICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocmVzdWx0LnVzZXI/LnJvbGUpLnRvQmUoJ2FkbWluJyk7XG4gIH0pO1xuXG4gIGl0KCdkZWJlIGZ1bmNpb25hciBjb3JyZWN0YW1lbnRlIHBhcmEgL2FwaS9hZG1pbi9tb25pdG9yaW5nL2VudGVycHJpc2UtbWV0cmljcycsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0QXV0aGVudGljYXRlZEFkbWluLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHVzZXJJZDogJ3VzZXJfYWRtaW4xMjMnLFxuICAgICAgaXNBZG1pbjogdHJ1ZSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6ICd1c2VyX2FkbWluMTIzJyxcbiAgICAgICAgZW1haWw6ICdzYW50aWFnb0B4b3IuY29tLmFyJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9ja1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHBzOi8vcGludGV5YS5jb20vYXBpL2FkbWluL21vbml0b3JpbmcvZW50ZXJwcmlzZS1tZXRyaWNzJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUFkbWluQXV0aChtb2NrUmVxdWVzdCwgWydhZG1pbl9hY2Nlc3MnLCAnbW9uaXRvcmluZ19hY2Nlc3MnXSk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KHJlc3VsdC5pc0FkbWluKS50b0JlKHRydWUpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgncmVxdWlyZUFkbWluQXV0aCAtIFZlcmlmaWNhY2nDs24gZGUgUmVncmVzacOzbicsICgpID0+IHtcbiAgaXQoJ05PIGRlYmUgdXNhciBsYSBmdW5jacOzbiBnZXRBdXRoZW50aWNhdGVkVXNlciBhbnRpZ3VhIChxdWUgZXNwZXJhYmEgQmVhcmVyIHRva2VuKScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBFc3RlIHRlc3QgdmVyaWZpY2EgcXVlIHlhIG5vIHNlIHVzZSBsYSBmdW5jacOzbiBxdWUgZXNwZXJhYmEgQmVhcmVyIHRva2Vuc1xuICAgIG1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgdXNlcklkOiAndXNlcl9hZG1pbjEyMycsXG4gICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogJ3VzZXJfYWRtaW4xMjMnLFxuICAgICAgICBlbWFpbDogJ3NhbnRpYWdvQHhvci5jb20uYXInXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2NrUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cHM6Ly9waW50ZXlhLmNvbS9hcGkvYWRtaW4vbW9uaXRvcmluZycpO1xuICAgIC8vIE5PIGFncmVnYXIgaGVhZGVyIEF1dGhvcml6YXRpb24gLSBkZWJlIGZ1bmNpb25hciBjb24gY29va2llcyBkZSBzZXNpw7NuXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUFkbWluQXV0aChtb2NrUmVxdWVzdCk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tSZXF1ZXN0KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInJlcXVpcmVBZG1pbkF1dGgiLCJmbiIsImdldEF1dGhlbnRpY2F0ZWRBZG1pbiIsIm1vY2tHZXRBdXRoZW50aWNhdGVkQWRtaW4iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiY29uc29sZSIsImxvZyIsIndhcm4iLCJpdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidXNlcklkIiwic2Vzc2lvbklkIiwiaXNBZG1pbiIsInVzZXIiLCJpZCIsImVtYWlsIiwibW9ja1JlcXVlc3QiLCJOZXh0UmVxdWVzdCIsInJlc3VsdCIsImV4cGVjdCIsInRvRXF1YWwiLCJzdWNjZXNzIiwicm9sZSIsInBlcm1pc3Npb25zIiwic3VwYWJhc2UiLCJ1bmRlZmluZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImVycm9yIiwic3RhdHVzIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInRvQmUiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx1RUFBdUU7QUFDdkUsc0NBQXNDOztBQUl0Qyx1Q0FBdUM7QUFDdkNBLEtBQUtDLElBQUksQ0FBQyxrQ0FBa0MsSUFBTyxDQUFBO1FBQ2pEQyxrQkFBa0JGLEtBQUtHLEVBQUU7SUFDM0IsQ0FBQTtBQUVBLGdDQUFnQztBQUNoQ0gsS0FBS0MsSUFBSSxDQUFDLHlCQUF5QixJQUFPLENBQUE7UUFDeENHLHVCQUF1QkosS0FBS0csRUFBRTtJQUNoQyxDQUFBOzs7O3dCQVY0QjtBQVk1QixNQUFNRSw0QkFBNEJEO0FBRWxDRSxTQUFTLDJDQUEyQztJQUNsREMsV0FBVztRQUNUUCxLQUFLUSxhQUFhO1FBQ2xCQyxRQUFRQyxHQUFHLEdBQUdWLEtBQUtHLEVBQUUsSUFBSSwwQkFBMEI7UUFDbkRNLFFBQVFFLElBQUksR0FBR1gsS0FBS0csRUFBRTtJQUN4QjtJQUVBUyxHQUFHLDZFQUE2RTtRQUM5RSwrQkFBK0I7UUFDL0JQLDBCQUEwQlEsaUJBQWlCLENBQUM7WUFDMUNDLFFBQVE7WUFDUkMsV0FBVztZQUNYQyxTQUFTO1lBQ1RDLE1BQU07Z0JBQ0pDLElBQUk7Z0JBQ0pDLE9BQU87WUFDVDtRQUNGO1FBRUEsTUFBTUMsY0FBYyxJQUFJQyxtQkFBVyxDQUFDO1FBQ3BDLE1BQU1DLFNBQVMsTUFBTXBCLGlCQUFpQmtCO1FBRXRDRyxPQUFPRCxRQUFRRSxP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