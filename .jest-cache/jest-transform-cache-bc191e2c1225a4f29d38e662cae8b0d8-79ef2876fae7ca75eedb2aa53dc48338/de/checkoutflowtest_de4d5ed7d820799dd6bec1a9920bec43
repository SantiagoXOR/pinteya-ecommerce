b028d7b05a674a79e8f886d15b2b04d1
"use strict";
// Mock de los componentes del Design System
jest.mock('../shipping-info', ()=>({
        ShippingInfo: ({ options, selectedOption })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "shipping-info",
                children: [
                    "Shipping options for: ",
                    selectedOption
                ]
            })
    }));
jest.mock('../cart-summary', ()=>({
        CartSummary: ({ cartItems, variant })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "cart-summary",
                children: [
                    "Cart Summary - ",
                    cartItems.length,
                    " items - ",
                    variant
                ]
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const _checkoutflow = require("../checkout-flow");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockCartItems = [
    {
        id: 1,
        title: 'Pintura Sherwin Williams 4L',
        price: 10000,
        discountedPrice: 8500,
        quantity: 2
    }
];
const mockCheckoutData = {
    totalPrice: 17000,
    shippingCost: 2500,
    discount: 0,
    finalTotal: 19500,
    shippingMethod: 'standard'
};
describe('CheckoutFlow', ()=>{
    const defaultProps = {
        cartItems: mockCartItems,
        checkoutData: mockCheckoutData
    };
    it('renders checkout flow with basic elements', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Finalizar Compra')).toBeInTheDocument();
        expect(_react1.screen.getByRole('button', {
            name: /completar pedido/i
        })).toBeInTheDocument();
        expect(_react1.screen.getByTestId('cart-summary')).toBeInTheDocument();
    });
    it('renders without errors when no errors provided', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        // No debería mostrar sección de errores
        expect(_react1.screen.queryByText('Errores:')).not.toBeInTheDocument();
    });
    it('displays cart summary correctly', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        // Verificar que CartSummary se renderiza con los datos correctos
        expect(_react1.screen.getByTestId('cart-summary')).toBeInTheDocument();
    });
    it('renders with proper accessibility', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        // Verificar elementos accesibles
        expect(_react1.screen.getByRole('button', {
            name: /completar pedido/i
        })).toBeInTheDocument();
    });
    it('renders with custom className', ()=>{
        const customClass = 'custom-checkout-class';
        const { container } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            className: customClass
        }));
        // Verificar que la clase se aplica al contenedor principal
        expect(container.firstChild).toHaveClass(customClass);
    });
    it('shows cart summary by default', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        expect(_react1.screen.getByTestId('cart-summary')).toBeInTheDocument();
        expect(_react1.screen.getByText('Cart Summary - 1 items - compact')).toBeInTheDocument();
    });
    it('renders with empty cart items', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            cartItems: []
        }));
        expect(_react1.screen.getByTestId('cart-summary')).toBeInTheDocument();
        expect(_react1.screen.getByText('Cart Summary - 0 items - compact')).toBeInTheDocument();
    });
    it('calls onComplete when complete button is clicked', ()=>{
        const mockOnComplete = jest.fn();
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            onComplete: mockOnComplete
        }));
        const completeButton = _react1.screen.getByRole('button', {
            name: /completar pedido/i
        });
        _react1.fireEvent.click(completeButton);
        expect(mockOnComplete).toHaveBeenCalledTimes(1);
    });
    it('disables complete button when loading', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            isLoading: true
        }));
        const completeButton = _react1.screen.getByRole('button', {
            name: /procesando/i
        });
        expect(completeButton).toBeDisabled();
    });
    it('shows complete button by default', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Finalizar Compra')).toBeInTheDocument();
        expect(_react1.screen.getByRole('button', {
            name: /completar pedido/i
        })).toBeInTheDocument();
    });
    it('calls onComplete when finish button is clicked', ()=>{
        const mockOnComplete = jest.fn();
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            onComplete: mockOnComplete
        }));
        const finishButton = _react1.screen.getByRole('button', {
            name: /completar pedido/i
        });
        _react1.fireEvent.click(finishButton);
        expect(mockOnComplete).toHaveBeenCalledTimes(1);
    });
    it('shows loading state', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            isLoading: true
        }));
        expect(_react1.screen.getByText('Procesando...')).toBeInTheDocument();
    });
    it('displays errors when present', ()=>{
        const errors = {
            email: 'Email es requerido',
            address: 'Dirección es requerida'
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            errors: errors
        }));
        expect(_react1.screen.getByText('Errores:')).toBeInTheDocument();
        expect(_react1.screen.getByText('• Email es requerido')).toBeInTheDocument();
        expect(_react1.screen.getByText('• Dirección es requerida')).toBeInTheDocument();
    });
    it('renders with custom children content', ()=>{
        const customContent = /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            children: "Custom checkout content"
        });
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            children: customContent
        }));
        expect(_react1.screen.getByText('Custom checkout content')).toBeInTheDocument();
        expect(_react1.screen.getByText('Finalizar Compra')).toBeInTheDocument();
    });
    it('renders cart summary with correct data', ()=>{
        const checkoutData = {
            totalPrice: 100,
            shippingCost: 10,
            discount: 5,
            finalTotal: 105
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            checkoutData: checkoutData
        }));
        // Verificar que el componente se renderiza (CartSummary está presente)
        expect(_react1.screen.getByText('Finalizar Compra')).toBeInTheDocument();
    });
    it('shows loading state correctly', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            isLoading: true
        }));
        // Verificar que muestra el estado de carga
        expect(_react1.screen.getByText('Procesando...')).toBeInTheDocument();
        // Verificar que el botón está deshabilitado
        const button = _react1.screen.getByRole('button', {
            name: /procesando/i
        });
        expect(button).toBeDisabled();
    });
    it('renders children content', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_checkoutflow.CheckoutFlow, {
            ...defaultProps,
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "custom-content",
                children: "Custom step content"
            })
        }));
        expect(_react1.screen.getByTestId('custom-content')).toBeInTheDocument();
        expect(_react1.screen.getByText('Custom step content')).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXF9fdGVzdHNfX1xcY2hlY2tvdXQtZmxvdy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xyXG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nXHJcbmltcG9ydCB7IENoZWNrb3V0RmxvdyB9IGZyb20gJy4uL2NoZWNrb3V0LWZsb3cnXHJcblxyXG4vLyBNb2NrIGRlIGxvcyBjb21wb25lbnRlcyBkZWwgRGVzaWduIFN5c3RlbVxyXG5qZXN0Lm1vY2soJy4uL3NoaXBwaW5nLWluZm8nLCAoKSA9PiAoe1xyXG4gIFNoaXBwaW5nSW5mbzogKHsgb3B0aW9ucywgc2VsZWN0ZWRPcHRpb24gfTogYW55KSA9PiAoXHJcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2hpcHBpbmctaW5mb1wiPlxyXG4gICAgICBTaGlwcGluZyBvcHRpb25zIGZvcjoge3NlbGVjdGVkT3B0aW9ufVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59KSlcclxuXHJcbmplc3QubW9jaygnLi4vY2FydC1zdW1tYXJ5JywgKCkgPT4gKHtcclxuICBDYXJ0U3VtbWFyeTogKHsgY2FydEl0ZW1zLCB2YXJpYW50IH06IGFueSkgPT4gKFxyXG4gICAgPGRpdiBkYXRhLXRlc3RpZD1cImNhcnQtc3VtbWFyeVwiPlxyXG4gICAgICBDYXJ0IFN1bW1hcnkgLSB7Y2FydEl0ZW1zLmxlbmd0aH0gaXRlbXMgLSB7dmFyaWFudH1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufSkpXHJcblxyXG5jb25zdCBtb2NrQ2FydEl0ZW1zID0gW1xyXG4gIHtcclxuICAgIGlkOiAxLFxyXG4gICAgdGl0bGU6ICdQaW50dXJhIFNoZXJ3aW4gV2lsbGlhbXMgNEwnLFxyXG4gICAgcHJpY2U6IDEwMDAwLFxyXG4gICAgZGlzY291bnRlZFByaWNlOiA4NTAwLFxyXG4gICAgcXVhbnRpdHk6IDJcclxuICB9XHJcbl1cclxuXHJcbmNvbnN0IG1vY2tDaGVja291dERhdGEgPSB7XHJcbiAgdG90YWxQcmljZTogMTcwMDAsXHJcbiAgc2hpcHBpbmdDb3N0OiAyNTAwLFxyXG4gIGRpc2NvdW50OiAwLFxyXG4gIGZpbmFsVG90YWw6IDE5NTAwLFxyXG4gIHNoaXBwaW5nTWV0aG9kOiAnc3RhbmRhcmQnIGFzIGNvbnN0XHJcbn1cclxuXHJcbmRlc2NyaWJlKCdDaGVja291dEZsb3cnLCAoKSA9PiB7XHJcbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgY2FydEl0ZW1zOiBtb2NrQ2FydEl0ZW1zLFxyXG4gICAgY2hlY2tvdXREYXRhOiBtb2NrQ2hlY2tvdXREYXRhXHJcbiAgfVxyXG5cclxuICBpdCgncmVuZGVycyBjaGVja291dCBmbG93IHdpdGggYmFzaWMgZWxlbWVudHMnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENoZWNrb3V0RmxvdyB7Li4uZGVmYXVsdFByb3BzfSAvPilcclxuXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmluYWxpemFyIENvbXByYScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY29tcGxldGFyIHBlZGlkby9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjYXJ0LXN1bW1hcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIHdpdGhvdXQgZXJyb3JzIHdoZW4gbm8gZXJyb3JzIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxDaGVja291dEZsb3cgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcblxyXG4gICAgLy8gTm8gZGViZXLDrWEgbW9zdHJhciBzZWNjacOzbiBkZSBlcnJvcmVzXHJcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdFcnJvcmVzOicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdkaXNwbGF5cyBjYXJ0IHN1bW1hcnkgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxDaGVja291dEZsb3cgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcblxyXG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBDYXJ0U3VtbWFyeSBzZSByZW5kZXJpemEgY29uIGxvcyBkYXRvcyBjb3JyZWN0b3NcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NhcnQtc3VtbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ3JlbmRlcnMgd2l0aCBwcm9wZXIgYWNjZXNzaWJpbGl0eScsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBlbGVtZW50b3MgYWNjZXNpYmxlc1xyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NvbXBsZXRhciBwZWRpZG8vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIHdpdGggY3VzdG9tIGNsYXNzTmFtZScsICgpID0+IHtcclxuICAgIGNvbnN0IGN1c3RvbUNsYXNzID0gJ2N1c3RvbS1jaGVja291dC1jbGFzcydcclxuXHJcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxyXG4gICAgICA8Q2hlY2tvdXRGbG93XHJcbiAgICAgICAgey4uLmRlZmF1bHRQcm9wc31cclxuICAgICAgICBjbGFzc05hbWU9e2N1c3RvbUNsYXNzfVxyXG4gICAgICAvPlxyXG4gICAgKVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBxdWUgbGEgY2xhc2Ugc2UgYXBsaWNhIGFsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXHJcbiAgICBleHBlY3QoY29udGFpbmVyLmZpcnN0Q2hpbGQpLnRvSGF2ZUNsYXNzKGN1c3RvbUNsYXNzKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdzaG93cyBjYXJ0IHN1bW1hcnkgYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxyXG5cclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NhcnQtc3VtbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ2FydCBTdW1tYXJ5IC0gMSBpdGVtcyAtIGNvbXBhY3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIHdpdGggZW1wdHkgY2FydCBpdGVtcycsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9IGNhcnRJdGVtcz17W119IC8+KVxyXG5cclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NhcnQtc3VtbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ2FydCBTdW1tYXJ5IC0gMCBpdGVtcyAtIGNvbXBhY3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdjYWxscyBvbkNvbXBsZXRlIHdoZW4gY29tcGxldGUgYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrT25Db21wbGV0ZSA9IGplc3QuZm4oKVxyXG5cclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9IG9uQ29tcGxldGU9e21vY2tPbkNvbXBsZXRlfSAvPilcclxuXHJcbiAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NvbXBsZXRhciBwZWRpZG8vaSB9KVxyXG4gICAgZmlyZUV2ZW50LmNsaWNrKGNvbXBsZXRlQnV0dG9uKVxyXG5cclxuICAgIGV4cGVjdChtb2NrT25Db21wbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2Rpc2FibGVzIGNvbXBsZXRlIGJ1dHRvbiB3aGVuIGxvYWRpbmcnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENoZWNrb3V0RmxvdyB7Li4uZGVmYXVsdFByb3BzfSBpc0xvYWRpbmc9e3RydWV9IC8+KVxyXG5cclxuICAgIGNvbnN0IGNvbXBsZXRlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcHJvY2VzYW5kby9pIH0pXHJcbiAgICBleHBlY3QoY29tcGxldGVCdXR0b24pLnRvQmVEaXNhYmxlZCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ3Nob3dzIGNvbXBsZXRlIGJ1dHRvbiBieSBkZWZhdWx0JywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxDaGVja291dEZsb3cgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZpbmFsaXphciBDb21wcmEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NvbXBsZXRhciBwZWRpZG8vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdjYWxscyBvbkNvbXBsZXRlIHdoZW4gZmluaXNoIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9ja09uQ29tcGxldGUgPSBqZXN0LmZuKClcclxuXHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxDaGVja291dEZsb3dcclxuICAgICAgICB7Li4uZGVmYXVsdFByb3BzfVxyXG4gICAgICAgIG9uQ29tcGxldGU9e21vY2tPbkNvbXBsZXRlfVxyXG4gICAgICAvPlxyXG4gICAgKVxyXG5cclxuICAgIGNvbnN0IGZpbmlzaEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NvbXBsZXRhciBwZWRpZG8vaSB9KVxyXG4gICAgZmlyZUV2ZW50LmNsaWNrKGZpbmlzaEJ1dHRvbilcclxuXHJcbiAgICBleHBlY3QobW9ja09uQ29tcGxldGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdzaG93cyBsb2FkaW5nIHN0YXRlJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8Q2hlY2tvdXRGbG93XHJcbiAgICAgICAgey4uLmRlZmF1bHRQcm9wc31cclxuICAgICAgICBpc0xvYWRpbmc9e3RydWV9XHJcbiAgICAgIC8+XHJcbiAgICApXHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb2Nlc2FuZG8uLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdkaXNwbGF5cyBlcnJvcnMgd2hlbiBwcmVzZW50JywgKCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JzID0ge1xyXG4gICAgICBlbWFpbDogJ0VtYWlsIGVzIHJlcXVlcmlkbycsXHJcbiAgICAgIGFkZHJlc3M6ICdEaXJlY2Npw7NuIGVzIHJlcXVlcmlkYSdcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoPENoZWNrb3V0RmxvdyB7Li4uZGVmYXVsdFByb3BzfSBlcnJvcnM9e2Vycm9yc30gLz4pXHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Vycm9yZXM6JykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfigKIgRW1haWwgZXMgcmVxdWVyaWRvJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfigKIgRGlyZWNjacOzbiBlcyByZXF1ZXJpZGEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIHdpdGggY3VzdG9tIGNoaWxkcmVuIGNvbnRlbnQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBjdXN0b21Db250ZW50ID0gPGRpdj5DdXN0b20gY2hlY2tvdXQgY29udGVudDwvZGl2PlxyXG5cclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9PntjdXN0b21Db250ZW50fTwvQ2hlY2tvdXRGbG93PilcclxuXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ3VzdG9tIGNoZWNrb3V0IGNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZpbmFsaXphciBDb21wcmEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIGNhcnQgc3VtbWFyeSB3aXRoIGNvcnJlY3QgZGF0YScsICgpID0+IHtcclxuICAgIGNvbnN0IGNoZWNrb3V0RGF0YSA9IHtcclxuICAgICAgdG90YWxQcmljZTogMTAwLFxyXG4gICAgICBzaGlwcGluZ0Nvc3Q6IDEwLFxyXG4gICAgICBkaXNjb3VudDogNSxcclxuICAgICAgZmluYWxUb3RhbDogMTA1XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKDxDaGVja291dEZsb3cgey4uLmRlZmF1bHRQcm9wc30gY2hlY2tvdXREYXRhPXtjaGVja291dERhdGF9IC8+KVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBxdWUgZWwgY29tcG9uZW50ZSBzZSByZW5kZXJpemEgKENhcnRTdW1tYXJ5IGVzdMOhIHByZXNlbnRlKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZpbmFsaXphciBDb21wcmEnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdzaG93cyBsb2FkaW5nIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9IGlzTG9hZGluZz17dHJ1ZX0gLz4pXHJcblxyXG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBtdWVzdHJhIGVsIGVzdGFkbyBkZSBjYXJnYVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb2Nlc2FuZG8uLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBxdWUgZWwgYm90w7NuIGVzdMOhIGRlc2hhYmlsaXRhZG9cclxuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3Byb2Nlc2FuZG8vaSB9KVxyXG4gICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKClcclxuICB9KVxyXG5cclxuICBpdCgncmVuZGVycyBjaGlsZHJlbiBjb250ZW50JywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8Q2hlY2tvdXRGbG93IHsuLi5kZWZhdWx0UHJvcHN9PlxyXG4gICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJjdXN0b20tY29udGVudFwiPkN1c3RvbSBzdGVwIGNvbnRlbnQ8L2Rpdj5cclxuICAgICAgPC9DaGVja291dEZsb3c+XHJcbiAgICApXHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY3VzdG9tLWNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0N1c3RvbSBzdGVwIGNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcbn0pXHJcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIlNoaXBwaW5nSW5mbyIsIm9wdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsImRpdiIsImRhdGEtdGVzdGlkIiwiQ2FydFN1bW1hcnkiLCJjYXJ0SXRlbXMiLCJ2YXJpYW50IiwibGVuZ3RoIiwibW9ja0NhcnRJdGVtcyIsImlkIiwidGl0bGUiLCJwcmljZSIsImRpc2NvdW50ZWRQcmljZSIsInF1YW50aXR5IiwibW9ja0NoZWNrb3V0RGF0YSIsInRvdGFsUHJpY2UiLCJzaGlwcGluZ0Nvc3QiLCJkaXNjb3VudCIsImZpbmFsVG90YWwiLCJzaGlwcGluZ01ldGhvZCIsImRlc2NyaWJlIiwiZGVmYXVsdFByb3BzIiwiY2hlY2tvdXREYXRhIiwiaXQiLCJyZW5kZXIiLCJDaGVja291dEZsb3ciLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImdldEJ5Um9sZSIsIm5hbWUiLCJnZXRCeVRlc3RJZCIsInF1ZXJ5QnlUZXh0Iiwibm90IiwiY3VzdG9tQ2xhc3MiLCJjb250YWluZXIiLCJjbGFzc05hbWUiLCJmaXJzdENoaWxkIiwidG9IYXZlQ2xhc3MiLCJtb2NrT25Db21wbGV0ZSIsImZuIiwib25Db21wbGV0ZSIsImNvbXBsZXRlQnV0dG9uIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJpc0xvYWRpbmciLCJ0b0JlRGlzYWJsZWQiLCJmaW5pc2hCdXR0b24iLCJlcnJvcnMiLCJlbWFpbCIsImFkZHJlc3MiLCJjdXN0b21Db250ZW50IiwiYnV0dG9uIl0sIm1hcHBpbmdzIjoiO0FBS0EsNENBQTRDO0FBQzVDQSxLQUFLQyxJQUFJLENBQUMsb0JBQW9CLElBQU8sQ0FBQTtRQUNuQ0MsY0FBYyxDQUFDLEVBQUVDLE9BQU8sRUFBRUMsY0FBYyxFQUFPLGlCQUM3QyxzQkFBQ0M7Z0JBQUlDLGVBQVk7O29CQUFnQjtvQkFDUkY7OztJQUc3QixDQUFBO0FBRUFKLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDTSxhQUFhLENBQUMsRUFBRUMsU0FBUyxFQUFFQyxPQUFPLEVBQU8s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