{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\TopBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { Phone, MapPin, ChevronDown, Navigation, Loader2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuSeparator,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { useGeolocation } from \"@/hooks/useGeolocation\";\r\n\r\nconst TopBar = () => {\r\n  const {\r\n    detectedZone,\r\n    isLoading,\r\n    error,\r\n    permissionStatus,\r\n    requestLocation,\r\n    selectZone,\r\n    deliveryZones\r\n  } = useGeolocation();\r\n\r\n  // Zona actual: detectada automáticamente o Córdoba Capital por defecto\r\n  const currentZone = detectedZone || deliveryZones.find(zone => zone.id === \"cordoba-capital\");\r\n\r\n  return (\r\n    <div className=\"bg-blaze-orange text-white border-b border-blaze-orange-600 hidden lg:block topbar-slide relative z-topbar\">\r\n      <div className=\"max-w-[1170px] mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex items-center justify-between py-2\">\r\n          {/* Información de contacto - Izquierda */}\r\n          <div className=\"flex items-center gap-6\">\r\n            {/* Teléfono clickeable - NÚMERO CORREGIDO */}\r\n            <Link\r\n              href=\"tel:+5493513411796\"\r\n              className=\"flex items-center gap-2 hover:text-accent-200 transition-colors duration-200\"\r\n            >\r\n              <Phone className=\"w-4 h-4\" />\r\n              <span className=\"text-sm font-medium\">\r\n                (351) 341-1796\r\n              </span>\r\n            </Link>\r\n\r\n            {/* Separador */}\r\n            <span className=\"w-px h-4 bg-accent-500\"></span>\r\n\r\n            {/* Asesoramiento 24/7 */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-2 h-2 bg-fun-green-400 rounded-full animate-pulse\"></div>\r\n              <span className=\"text-sm font-medium\">Asesoramiento 24/7</span>\r\n            </div>\r\n\r\n            {/* Separador */}\r\n            <span className=\"w-px h-4 bg-accent-500\"></span>\r\n\r\n            {/* Indicador de ubicación mejorado */}\r\n            {detectedZone && (\r\n              <div className=\"flex items-center gap-2 max-w-48 overflow-hidden\">\r\n                <MapPin className=\"w-4 h-4 text-fun-green-400 flex-shrink-0\" />\r\n                <div className=\"overflow-hidden\">\r\n                  <div className=\"text-sm font-medium whitespace-nowrap animate-marquee\">\r\n                    Ubicación detectada: {detectedZone.name}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Zona de entrega con geolocalización - Derecha */}\r\n          <div className=\"flex items-center gap-4\">\r\n\r\n            {/* Selector de zona de entrega con geolocalización */}\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  className=\"text-white hover:text-accent-200 hover:bg-accent-700 gap-2 px-3 py-1\"\r\n                  aria-expanded=\"false\"\r\n                  aria-haspopup=\"menu\"\r\n                  data-testid=\"delivery-zone-selector\"\r\n                >\r\n                  {isLoading ? (\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  ) : (\r\n                    <MapPin className=\"w-4 h-4\" />\r\n                  )}\r\n                  <span className=\"text-sm\">\r\n                    Envíos en {currentZone?.name || 'Seleccionar zona'}\r\n                  </span>\r\n                  <ChevronDown className=\"w-3 h-3\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\" className=\"w-64\" data-testid=\"delivery-zone-dropdown\">\r\n                {/* Opción de geolocalización */}\r\n                {permissionStatus !== 'granted' && !detectedZone && (\r\n                  <>\r\n                    <DropdownMenuItem\r\n                      onClick={requestLocation}\r\n                      className=\"flex items-center gap-2 py-3 text-primary-600 hover:text-primary-700\"\r\n                    >\r\n                      <Navigation className=\"w-4 h-4\" />\r\n                      <div className=\"flex flex-col\">\r\n                        <span className=\"font-medium\">Detectar mi ubicación</span>\r\n                        <span className=\"text-xs text-gray-500\">\r\n                          Para mostrar la zona más cercana\r\n                        </span>\r\n                      </div>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuSeparator />\r\n                  </>\r\n                )}\r\n\r\n                {/* Estado de geolocalización */}\r\n                {detectedZone && (\r\n                  <>\r\n                    <div className=\"px-3 py-2 bg-fun-green-50 border-l-2 border-fun-green-400\">\r\n                      <div className=\"flex items-center gap-2 text-fun-green-700\">\r\n                        <Navigation className=\"w-3 h-3\" />\r\n                        <span className=\"text-xs font-medium\">Ubicación detectada</span>\r\n                      </div>\r\n                    </div>\r\n                    <DropdownMenuSeparator />\r\n                  </>\r\n                )}\r\n\r\n                {/* Error de geolocalización */}\r\n                {error && (\r\n                  <>\r\n                    <div className=\"px-3 py-2 text-xs text-gray-500\">\r\n                      {error}\r\n                    </div>\r\n                    <DropdownMenuSeparator />\r\n                  </>\r\n                )}\r\n\r\n                {/* Lista de zonas */}\r\n                {deliveryZones.map((zone) => (\r\n                  <DropdownMenuItem\r\n                    key={zone.id}\r\n                    onClick={() => selectZone(zone.id)}\r\n                    className={`flex items-center justify-between py-2 ${\r\n                      currentZone?.id === zone.id ? 'bg-accent-50' : ''\r\n                    }`}\r\n                    data-testid={`zone-${zone.id}`}\r\n                  >\r\n                    <span className={`font-medium ${\r\n                      currentZone?.id === zone.id ? 'text-accent-600' : ''\r\n                    }`}>\r\n                      {zone.name}\r\n                    </span>\r\n                    {zone.available ? (\r\n                      <span className=\"text-xs text-fun-green-600 font-medium\">\r\n                        Disponible\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-xs text-gray-400\">\r\n                        Próximamente\r\n                      </span>\r\n                    )}\r\n                  </DropdownMenuItem>\r\n                ))}\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopBar;\r\n"],"names":["TopBar","detectedZone","isLoading","error","permissionStatus","requestLocation","selectZone","deliveryZones","useGeolocation","currentZone","find","zone","id","div","className","Link","href","Phone","span","MapPin","name","DropdownMenu","DropdownMenuTrigger","asChild","Button","variant","size","aria-expanded","aria-haspopup","data-testid","Loader2","ChevronDown","DropdownMenuContent","align","DropdownMenuItem","onClick","Navigation","DropdownMenuSeparator","map","available"],"mappings":"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"}