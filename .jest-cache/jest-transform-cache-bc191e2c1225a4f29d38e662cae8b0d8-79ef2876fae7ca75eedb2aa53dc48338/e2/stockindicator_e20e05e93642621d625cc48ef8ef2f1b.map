{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\stock-indicator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Package, AlertTriangle, XCircle, Check } from \"lucide-react\";\r\n\r\nconst stockIndicatorVariants = cva(\r\n  \"flex items-center gap-2 text-sm font-medium\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"flex-row\",\r\n        compact: \"flex-row gap-1\",\r\n        badge: \"inline-flex px-2 py-1 rounded-full text-xs\",\r\n        minimal: \"flex-row gap-1 text-xs\",\r\n      },\r\n      status: {\r\n        inStock: \"text-green-600\",\r\n        lowStock: \"text-yellow-600\",\r\n        outOfStock: \"text-red-600\",\r\n        preOrder: \"text-blue-600\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      status: \"inStock\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface StockIndicatorProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof stockIndicatorVariants> {\r\n  /** Cantidad disponible en stock */\r\n  quantity: number\r\n  /** Umbral para considerar stock bajo */\r\n  lowStockThreshold?: number\r\n  /** Mostrar cantidad exacta */\r\n  showExactQuantity?: boolean\r\n  /** Texto personalizado para diferentes estados */\r\n  customTexts?: {\r\n    inStock?: string\r\n    lowStock?: string\r\n    outOfStock?: string\r\n    preOrder?: string\r\n  }\r\n  /** Mostrar ícono */\r\n  showIcon?: boolean\r\n  /** Permitir pre-orden cuando no hay stock */\r\n  allowPreOrder?: boolean\r\n  /** Tiempo estimado de reposición */\r\n  restockDate?: Date\r\n  /** Unidad de medida (ej: \"unidades\", \"litros\", \"kg\") */\r\n  unit?: string\r\n}\r\n\r\n/**\r\n * Determina el estado del stock basado en la cantidad\r\n */\r\nconst getStockStatus = (\r\n  quantity: number, \r\n  lowStockThreshold: number = 5,\r\n  allowPreOrder: boolean = false\r\n): \"inStock\" | \"lowStock\" | \"outOfStock\" | \"preOrder\" => {\r\n  if (quantity === 0) {\r\n    return allowPreOrder ? \"preOrder\" : \"outOfStock\"\r\n  }\r\n  if (quantity <= lowStockThreshold) {\r\n    return \"lowStock\"\r\n  }\r\n  return \"inStock\"\r\n}\r\n\r\n/**\r\n * Obtiene el ícono apropiado para cada estado\r\n */\r\nconst getStatusIcon = (status: string) => {\r\n  switch (status) {\r\n    case \"inStock\":\r\n      return <Check className=\"w-4 h-4\" />\r\n    case \"lowStock\":\r\n      return <AlertTriangle className=\"w-4 h-4\" />\r\n    case \"outOfStock\":\r\n      return <XCircle className=\"w-4 h-4\" />\r\n    case \"preOrder\":\r\n      return <Package className=\"w-4 h-4\" />\r\n    default:\r\n      return <Check className=\"w-4 h-4\" />\r\n  }\r\n}\r\n\r\n/**\r\n * Obtiene el texto por defecto para cada estado\r\n */\r\nconst getDefaultText = (\r\n  status: string,\r\n  quantity: number,\r\n  showExactQuantity: boolean,\r\n  unit: string = \"unidades\"\r\n): string => {\r\n  switch (status) {\r\n    case \"inStock\":\r\n      return showExactQuantity \r\n        ? `${quantity} ${unit} disponibles`\r\n        : \"En stock\"\r\n    case \"lowStock\":\r\n      return showExactQuantity \r\n        ? `¡Solo ${quantity} ${unit} disponibles!`\r\n        : \"Pocas unidades\"\r\n    case \"outOfStock\":\r\n      return \"Sin stock\"\r\n    case \"preOrder\":\r\n      return \"Disponible por encargo\"\r\n    default:\r\n      return \"En stock\"\r\n  }\r\n}\r\n\r\n/**\r\n * Formatea la fecha de reposición\r\n */\r\nconst formatRestockDate = (date: Date): string => {\r\n  const now = new Date()\r\n  const diffTime = date.getTime() - now.getTime()\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n  \r\n  if (diffDays <= 0) {\r\n    return \"Disponible pronto\"\r\n  } else if (diffDays === 1) {\r\n    return \"Disponible mañana\"\r\n  } else if (diffDays <= 7) {\r\n    return `Disponible en ${diffDays} días`\r\n  } else {\r\n    return `Disponible el ${date.toLocaleDateString('es-AR')}`\r\n  }\r\n}\r\n\r\nconst StockIndicator = React.forwardRef<HTMLDivElement, StockIndicatorProps>(\r\n  ({ \r\n    className, \r\n    variant, \r\n    quantity,\r\n    lowStockThreshold = 5,\r\n    showExactQuantity = false,\r\n    customTexts = {},\r\n    showIcon = true,\r\n    allowPreOrder = false,\r\n    restockDate,\r\n    unit = \"unidades\",\r\n    ...props \r\n  }, ref) => {\r\n    const status = getStockStatus(quantity, lowStockThreshold, allowPreOrder)\r\n    \r\n    const statusText = customTexts[status] || getDefaultText(\r\n      status, \r\n      quantity, \r\n      showExactQuantity, \r\n      unit\r\n    )\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(stockIndicatorVariants({ variant, status, className }))}\r\n        {...props}\r\n      >\r\n        {/* Ícono de estado */}\r\n        {showIcon && getStatusIcon(status)}\r\n        \r\n        {/* Texto principal */}\r\n        <span>{statusText}</span>\r\n        \r\n        {/* Información de reposición */}\r\n        {status === \"outOfStock\" && restockDate && (\r\n          <span className=\"text-xs text-muted-foreground ml-1\">\r\n            ({formatRestockDate(restockDate)})\r\n          </span>\r\n        )}\r\n        \r\n        {/* Badge de estado para variante badge */}\r\n        {variant === \"badge\" && (\r\n          <div className={cn(\r\n            \"absolute -top-1 -right-1 w-3 h-3 rounded-full\",\r\n            {\r\n              \"bg-green-500\": status === \"inStock\",\r\n              \"bg-yellow-500\": status === \"lowStock\", \r\n              \"bg-red-500\": status === \"outOfStock\",\r\n              \"bg-blue-500\": status === \"preOrder\",\r\n            }\r\n          )} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nStockIndicator.displayName = \"StockIndicator\"\r\n\r\nexport { StockIndicator, stockIndicatorVariants }\r\n"],"names":["StockIndicator","stockIndicatorVariants","cva","variants","variant","default","compact","badge","minimal","status","inStock","lowStock","outOfStock","preOrder","defaultVariants","getStockStatus","quantity","lowStockThreshold","allowPreOrder","getStatusIcon","Check","className","AlertTriangle","XCircle","Package","getDefaultText","showExactQuantity","unit","formatRestockDate","date","now","Date","diffTime","getTime","diffDays","Math","ceil","toLocaleDateString","React","forwardRef","customTexts","showIcon","restockDate","props","ref","statusText","div","cn","span","displayName"],"mappings":"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"}