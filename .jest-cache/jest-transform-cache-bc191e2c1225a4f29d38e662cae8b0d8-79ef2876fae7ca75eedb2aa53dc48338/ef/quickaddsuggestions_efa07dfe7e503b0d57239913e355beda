3ebb31895a997e0ff03b0bd88613082c
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _button = require("./button");
const _lucidereact = require("lucide-react");
const _utils = require("../../lib/utils");
const _products = require("../../lib/api/products");
const _productadapter = require("../../lib/adapters/product-adapter");
const _image = /*#__PURE__*/ _interop_require_default(require("next/image"));
const _reactredux = require("react-redux");
const _cartslice = require("../../redux/features/cart-slice");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const QuickAddSuggestions = ({ onAddToCart, onClose, className })=>{
    const [products, setProducts] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const dispatch = (0, _reactredux.useDispatch)();
    (0, _react.useEffect)(()=>{
        const abortController = new AbortController();
        const fetchPopularProducts = async ()=>{
            try {
                setLoading(true);
                setError(null);
                // Obtener productos con descuento (populares) limitados a 3
                const response = await (0, _products.getProducts)({
                    limit: 3,
                    sortBy: 'created_at',
                    sortOrder: 'desc'
                }, abortController.signal);
                // Verificar si el componente aún está montado
                if (abortController.signal.aborted) {
                    return;
                }
                if (response.success && response.data) {
                    setProducts(response.data);
                } else {
                    setError('No se pudieron cargar los productos');
                }
            } catch (err) {
                // Solo mostrar error si no fue cancelado
                if (!abortController.signal.aborted && err instanceof Error && err.name !== 'AbortError') {
                    console.error('Error fetching popular products:', err);
                    setError('Error al cargar productos populares');
                }
            } finally{
                // Solo actualizar loading si no fue cancelado
                if (!abortController.signal.aborted) {
                    setLoading(false);
                }
            }
        };
        fetchPopularProducts();
        // Cleanup: cancelar la request si el componente se desmonta
        return ()=>{
            abortController.abort();
        };
    }, []);
    const handleAddToCart = (productId)=>{
        // Buscar el producto en la lista
        const product = products.find((p)=>p.id.toString() === productId);
        if (product) {
            // Convertir el producto al formato esperado por el carrito
            const cartItem = {
                id: product.id,
                title: product.name,
                brand: product.brand || '',
                price: product.price,
                discountedPrice: product.discounted_price || product.price,
                imgs: {
                    thumbnails: product.images ? [
                        product.images[0]
                    ] : [],
                    previews: product.images || []
                },
                reviews: 0,
                quantity: 1
            };
            dispatch((0, _cartslice.addItemToCart)(cartItem));
        }
        // Llamar callback personalizado si existe
        if (onAddToCart) {
            onAddToCart(productId);
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: (0, _utils.cn)("bg-white rounded-xl border border-gray-200 p-4", className),
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "flex items-center justify-between mb-4",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                            className: "font-bold text-gray-900 text-sm",
                            children: "Productos Populares"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-xs text-gray-600",
                            children: "Agrega r\xe1pidamente a tu carrito"
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "space-y-3",
                children: loading ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center py-8",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Loader2, {
                            className: "w-6 h-6 animate-spin text-gray-400"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "ml-2 text-sm text-gray-500",
                            children: "Cargando productos..."
                        })
                    ]
                }) : error ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "text-center py-4",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-red-500",
                        children: error
                    })
                }) : products.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "text-center py-4",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-gray-500",
                        children: "No hay productos disponibles"
                    })
                }) : products.map((product)=>{
                    const currentPrice = product.discounted_price || product.price;
                    const originalPrice = product.discounted_price ? product.price : null;
                    const hasDiscount = originalPrice && currentPrice < originalPrice;
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-16 h-16 bg-gray-200 rounded-xl overflow-hidden flex-shrink-0 shadow-sm border border-gray-300",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_image.default, {
                                    src: (0, _productadapter.getValidImageUrl)(product.images?.[0]),
                                    alt: product.name,
                                    width: 64,
                                    height: 64,
                                    className: "w-full h-full object-cover"
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex-1 min-w-0",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h5", {
                                        className: "font-semibold text-xs text-gray-900 line-clamp-1",
                                        children: product.name
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-2xs text-gray-500 mb-1",
                                        children: product.brand || 'Sin marca'
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "font-bold text-sm",
                                                style: {
                                                    color: '#ea5a17'
                                                },
                                                children: [
                                                    "$",
                                                    currentPrice.toLocaleString()
                                                ]
                                            }),
                                            hasDiscount && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "text-2xs text-gray-400 line-through",
                                                children: [
                                                    "$",
                                                    originalPrice.toLocaleString()
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "flex items-center gap-1 mt-1",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "text-2xs text-gray-600",
                                            children: product.category?.name || 'General'
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                                size: "sm",
                                onClick: ()=>handleAddToCart(product.id.toString()),
                                className: "h-10 w-10 p-0 bg-yellow-400 hover:bg-yellow-500 text-black rounded-xl shadow-md hover:shadow-lg transition-all duration-200",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Plus, {
                                    className: "w-5 h-5"
                                })
                            })
                        ]
                    }, product.id);
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "mt-4 pt-3 border-t border-gray-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                    variant: "ghost",
                    size: "sm",
                    onClick: onClose,
                    className: "w-full text-xs text-gray-600 hover:text-gray-900",
                    children: "Ver todos los productos →"
                })
            })
        ]
    });
};
const _default = QuickAddSuggestions;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXHF1aWNrLWFkZC1zdWdnZXN0aW9ucy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgUGx1cywgU3RhciwgTG9hZGVyMiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRQcm9kdWN0cyB9IGZyb20gXCJAL2xpYi9hcGkvcHJvZHVjdHNcIjtcbmltcG9ydCB7IFByb2R1Y3RXaXRoQ2F0ZWdvcnkgfSBmcm9tIFwiQC90eXBlcy9hcGlcIjtcbmltcG9ydCB7IGdldFZhbGlkSW1hZ2VVcmwgfSBmcm9tIFwiQC9saWIvYWRhcHRlcnMvcHJvZHVjdC1hZGFwdGVyXCI7XG5pbXBvcnQgSW1hZ2UgZnJvbSBcIm5leHQvaW1hZ2VcIjtcbmltcG9ydCB7IHVzZURpc3BhdGNoIH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBBcHBEaXNwYXRjaCB9IGZyb20gXCJAL3JlZHV4L3N0b3JlXCI7XG5pbXBvcnQgeyBhZGRJdGVtVG9DYXJ0IH0gZnJvbSBcIkAvcmVkdXgvZmVhdHVyZXMvY2FydC1zbGljZVwiO1xuXG5pbnRlcmZhY2UgUXVpY2tBZGRTdWdnZXN0aW9uc1Byb3BzIHtcbiAgb25BZGRUb0NhcnQ/OiAocHJvZHVjdElkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmNvbnN0IFF1aWNrQWRkU3VnZ2VzdGlvbnM6IFJlYWN0LkZDPFF1aWNrQWRkU3VnZ2VzdGlvbnNQcm9wcz4gPSAoe1xuICBvbkFkZFRvQ2FydCxcbiAgb25DbG9zZSxcbiAgY2xhc3NOYW1lXG59KSA9PiB7XG4gIGNvbnN0IFtwcm9kdWN0cywgc2V0UHJvZHVjdHNdID0gdXNlU3RhdGU8UHJvZHVjdFdpdGhDYXRlZ29yeVtdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoPEFwcERpc3BhdGNoPigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgY29uc3QgZmV0Y2hQb3B1bGFyUHJvZHVjdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcblxuICAgICAgICAvLyBPYnRlbmVyIHByb2R1Y3RvcyBjb24gZGVzY3VlbnRvIChwb3B1bGFyZXMpIGxpbWl0YWRvcyBhIDNcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQcm9kdWN0cyh7XG4gICAgICAgICAgbGltaXQ6IDMsXG4gICAgICAgICAgc29ydEJ5OiAnY3JlYXRlZF9hdCcsXG4gICAgICAgICAgc29ydE9yZGVyOiAnZGVzYydcbiAgICAgICAgfSwgYWJvcnRDb250cm9sbGVyLnNpZ25hbCk7XG5cbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGNvbXBvbmVudGUgYcO6biBlc3TDoSBtb250YWRvXG4gICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgc2V0UHJvZHVjdHMocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0RXJyb3IoJ05vIHNlIHB1ZGllcm9uIGNhcmdhciBsb3MgcHJvZHVjdG9zJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBTb2xvIG1vc3RyYXIgZXJyb3Igc2kgbm8gZnVlIGNhbmNlbGFkb1xuICAgICAgICBpZiAoIWFib3J0Q29udHJvbGxlci5zaWduYWwuYWJvcnRlZCAmJiBlcnIgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnIubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcG9wdWxhciBwcm9kdWN0czonLCBlcnIpO1xuICAgICAgICAgIHNldEVycm9yKCdFcnJvciBhbCBjYXJnYXIgcHJvZHVjdG9zIHBvcHVsYXJlcycpO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBTb2xvIGFjdHVhbGl6YXIgbG9hZGluZyBzaSBubyBmdWUgY2FuY2VsYWRvXG4gICAgICAgIGlmICghYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZmV0Y2hQb3B1bGFyUHJvZHVjdHMoKTtcblxuICAgIC8vIENsZWFudXA6IGNhbmNlbGFyIGxhIHJlcXVlc3Qgc2kgZWwgY29tcG9uZW50ZSBzZSBkZXNtb250YVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQWRkVG9DYXJ0ID0gKHByb2R1Y3RJZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gQnVzY2FyIGVsIHByb2R1Y3RvIGVuIGxhIGxpc3RhXG4gICAgY29uc3QgcHJvZHVjdCA9IHByb2R1Y3RzLmZpbmQocCA9PiBwLmlkLnRvU3RyaW5nKCkgPT09IHByb2R1Y3RJZCk7XG5cbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgLy8gQ29udmVydGlyIGVsIHByb2R1Y3RvIGFsIGZvcm1hdG8gZXNwZXJhZG8gcG9yIGVsIGNhcnJpdG9cbiAgICAgIGNvbnN0IGNhcnRJdGVtID0ge1xuICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgdGl0bGU6IHByb2R1Y3QubmFtZSxcbiAgICAgICAgYnJhbmQ6IHByb2R1Y3QuYnJhbmQgfHwgJycsXG4gICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxuICAgICAgICBkaXNjb3VudGVkUHJpY2U6IHByb2R1Y3QuZGlzY291bnRlZF9wcmljZSB8fCBwcm9kdWN0LnByaWNlLFxuICAgICAgICBpbWdzOiB7XG4gICAgICAgICAgdGh1bWJuYWlsczogcHJvZHVjdC5pbWFnZXMgPyBbcHJvZHVjdC5pbWFnZXNbMF1dIDogW10sXG4gICAgICAgICAgcHJldmlld3M6IHByb2R1Y3QuaW1hZ2VzIHx8IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHJldmlld3M6IDAsIC8vIE5vIHRlbmVtb3MgcmV2aWV3cyBlbiBsYSBBUEkgYWN0dWFsXG4gICAgICAgIHF1YW50aXR5OiAxXG4gICAgICB9O1xuXG4gICAgICBkaXNwYXRjaChhZGRJdGVtVG9DYXJ0KGNhcnRJdGVtKSk7XG4gICAgfVxuXG4gICAgLy8gTGxhbWFyIGNhbGxiYWNrIHBlcnNvbmFsaXphZG8gc2kgZXhpc3RlXG4gICAgaWYgKG9uQWRkVG9DYXJ0KSB7XG4gICAgICBvbkFkZFRvQ2FydChwcm9kdWN0SWQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTRcIiwgY2xhc3NOYW1lKX0+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1ncmF5LTkwMCB0ZXh0LXNtXCI+UHJvZHVjdG9zIFBvcHVsYXJlczwvaDQ+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+QWdyZWdhIHLDoXBpZGFtZW50ZSBhIHR1IGNhcnJpdG88L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBMaXN0YSBkZSBwcm9kdWN0b3MgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LThcIj5cbiAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cInctNiBoLTYgYW5pbWF0ZS1zcGluIHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5DYXJnYW5kbyBwcm9kdWN0b3MuLi48L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiBlcnJvciA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTRcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNTAwXCI+e2Vycm9yfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IHByb2R1Y3RzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTRcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPk5vIGhheSBwcm9kdWN0b3MgZGlzcG9uaWJsZXM8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgcHJvZHVjdHMubWFwKChwcm9kdWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBwcm9kdWN0LmRpc2NvdW50ZWRfcHJpY2UgfHwgcHJvZHVjdC5wcmljZTtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUHJpY2UgPSBwcm9kdWN0LmRpc2NvdW50ZWRfcHJpY2UgPyBwcm9kdWN0LnByaWNlIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGhhc0Rpc2NvdW50ID0gb3JpZ2luYWxQcmljZSAmJiBjdXJyZW50UHJpY2UgPCBvcmlnaW5hbFByaWNlO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtwcm9kdWN0LmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHAtMyBiZy1ncmF5LTUwIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsvKiBJbWFnZW4gZGVsIHByb2R1Y3RvICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xNiBoLTE2IGJnLWdyYXktMjAwIHJvdW5kZWQteGwgb3ZlcmZsb3ctaGlkZGVuIGZsZXgtc2hyaW5rLTAgc2hhZG93LXNtIGJvcmRlciBib3JkZXItZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICBzcmM9e2dldFZhbGlkSW1hZ2VVcmwocHJvZHVjdC5pbWFnZXM/LlswXSl9XG4gICAgICAgICAgICAgICAgICAgIGFsdD17cHJvZHVjdC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17NjR9XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD17NjR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7LyogSW5mbyBkZWwgcHJvZHVjdG8gKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC14cyB0ZXh0LWdyYXktOTAwIGxpbmUtY2xhbXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7cHJvZHVjdC5uYW1lfVxuICAgICAgICAgICAgICAgICAgPC9oNT5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtMnhzIHRleHQtZ3JheS01MDAgbWItMVwiPntwcm9kdWN0LmJyYW5kIHx8ICdTaW4gbWFyY2EnfTwvcD5cblxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbVwiIHN0eWxlPXt7IGNvbG9yOiAnI2VhNWExNycgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgJHtjdXJyZW50UHJpY2UudG9Mb2NhbGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICB7aGFzRGlzY291bnQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhzIHRleHQtZ3JheS00MDAgbGluZS10aHJvdWdoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke29yaWdpbmFsUHJpY2UhLnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBDYXRlZ29yw61hICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhzIHRleHQtZ3JheS02MDBcIj57cHJvZHVjdC5jYXRlZ29yeT8ubmFtZSB8fCAnR2VuZXJhbCd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7LyogQm90w7NuIGFncmVnYXIgKi99XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFkZFRvQ2FydChwcm9kdWN0LmlkLnRvU3RyaW5nKCkpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIHAtMCBiZy15ZWxsb3ctNDAwIGhvdmVyOmJnLXllbGxvdy01MDAgdGV4dC1ibGFjayByb3VuZGVkLXhsIHNoYWRvdy1tZCBob3ZlcjpzaGFkb3ctbGcgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pXG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEZvb3RlciBjb24gZW5sYWNlIGEgdmVyIG3DoXMgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LXhzIHRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTkwMFwiXG4gICAgICAgID5cbiAgICAgICAgICBWZXIgdG9kb3MgbG9zIHByb2R1Y3RvcyDihpJcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFF1aWNrQWRkU3VnZ2VzdGlvbnM7XG4iXSwibmFtZXMiOlsiUXVpY2tBZGRTdWdnZXN0aW9ucyIsIm9uQWRkVG9DYXJ0Iiwib25DbG9zZSIsImNsYXNzTmFtZSIsInByb2R1Y3RzIiwic2V0UHJvZHVjdHMiLCJ1c2VTdGF0ZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImRpc3BhdGNoIiwidXNlRGlzcGF0Y2giLCJ1c2VFZmZlY3QiLCJhYm9ydENvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJmZXRjaFBvcHVsYXJQcm9kdWN0cyIsInJlc3BvbnNlIiwiZ2V0UHJvZHVjdHMiLCJsaW1pdCIsInNvcnRCeSIsInNvcnRPcmRlciIsInNpZ25hbCIsImFib3J0ZWQiLCJzdWNjZXNzIiwiZGF0YSIsImVyciIsIkVycm9yIiwibmFtZSIsImNvbnNvbGUiLCJhYm9ydCIsImhhbmRsZUFkZFRvQ2FydCIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJmaW5kIiwicCIsImlkIiwidG9TdHJpbmciLCJjYXJ0SXRlbSIsInRpdGxlIiwiYnJhbmQiLCJwcmljZSIsImRpc2NvdW50ZWRQcmljZSIsImRpc2NvdW50ZWRfcHJpY2UiLCJpbWdzIiwidGh1bWJuYWlscyIsImltYWdlcyIsInByZXZpZXdzIiwicmV2aWV3cyIsInF1YW50aXR5IiwiYWRkSXRlbVRvQ2FydCIsImRpdiIsImNuIiwiaDQiLCJMb2FkZXIyIiwic3BhbiIsImxlbmd0aCIsIm1hcCIsImN1cnJlbnRQcmljZSIsIm9yaWdpbmFsUHJpY2UiLCJoYXNEaXNjb3VudCIsIkltYWdlIiwic3JjIiwiZ2V0VmFsaWRJbWFnZVVybCIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwiaDUiLCJzdHlsZSIsImNvbG9yIiwidG9Mb2NhbGVTdHJpbmciLCJjYXRlZ29yeSIsIkJ1dHRvbiIsInNpemUiLCJvbkNsaWNrIiwiUGx1cyIsInZhcmlhbnQiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkE4TUE7OztlQUFBOzs7OytEQTVNMkM7d0JBQ3BCOzZCQUNhO3VCQUNqQjswQkFDUztnQ0FFSzs4REFDZjs0QkFDVTsyQkFFRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFROUIsTUFBTUEsc0JBQTBELENBQUMsRUFDL0RDLFdBQVcsRUFDWEMsT0FBTyxFQUNQQyxTQUFTLEVBQ1Y7SUFDQyxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR0MsSUFBQUEsZUFBUSxFQUF3QixFQUFFO0lBQ2xFLE1BQU0sQ0FBQ0MsU0FBU0MsV0FBVyxHQUFHRixJQUFBQSxlQUFRLEVBQUM7SUFDdkMsTUFBTSxDQUFDRyxPQUFPQyxTQUFTLEdBQUdKLElBQUFBLGVBQVEsRUFBZ0I7SUFDbEQsTUFBTUssV0FBV0MsSUFBQUEsdUJBQVc7SUFFNUJDLElBQUFBLGdCQUFTLEVBQUM7UUFDUixNQUFNQyxrQkFBa0IsSUFBSUM7UUFFNUIsTUFBTUMsdUJBQXVCO1lBQzNCLElBQUk7Z0JBQ0ZSLFdBQVc7Z0JBQ1hFLFNBQVM7Z0JBRVQsNERBQTREO2dCQUM1RCxNQUFNTyxXQUFX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