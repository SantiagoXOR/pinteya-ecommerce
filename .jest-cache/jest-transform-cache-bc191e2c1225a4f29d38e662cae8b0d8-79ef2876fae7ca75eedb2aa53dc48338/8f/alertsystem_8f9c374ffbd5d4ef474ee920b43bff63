7c977a37d05968e6f5b8b092295105fe
// ===================================
// PINTEYA E-COMMERCE - ENTERPRISE ALERT SYSTEM
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    AlertLevel: function() {
        return AlertLevel;
    },
    AlertStatus: function() {
        return AlertStatus;
    },
    EnterpriseAlertSystem: function() {
        return EnterpriseAlertSystem;
    },
    NotificationType: function() {
        return NotificationType;
    },
    acknowledgeAlert: function() {
        return acknowledgeAlert;
    },
    enterpriseAlertSystem: function() {
        return enterpriseAlertSystem;
    },
    resolveAlert: function() {
        return resolveAlert;
    },
    triggerAlert: function() {
        return triggerAlert;
    }
});
const _logger = require("../logger");
const _supabase = require("../supabase");
var AlertLevel = /*#__PURE__*/ function(AlertLevel) {
    AlertLevel["INFO"] = "info";
    AlertLevel["WARNING"] = "warning";
    AlertLevel["CRITICAL"] = "critical";
    AlertLevel["EMERGENCY"] = "emergency";
    return AlertLevel;
}({});
var NotificationType = /*#__PURE__*/ function(NotificationType) {
    NotificationType["EMAIL"] = "email";
    NotificationType["SLACK"] = "slack";
    NotificationType["WEBHOOK"] = "webhook";
    NotificationType["SMS"] = "sms";
    NotificationType["PUSH"] = "push";
    NotificationType["LOG"] = "log";
    return NotificationType;
}({});
var AlertStatus = /*#__PURE__*/ function(AlertStatus) {
    AlertStatus["ACTIVE"] = "active";
    AlertStatus["ACKNOWLEDGED"] = "acknowledged";
    AlertStatus["RESOLVED"] = "resolved";
    AlertStatus["SUPPRESSED"] = "suppressed";
    return AlertStatus;
}({});
class EnterpriseAlertSystem {
    constructor(){
        this.alertRules = new Map();
        this.notificationChannels = new Map();
        this.escalationRules = new Map();
        this.activeAlerts = new Map();
        this.escalationInterval = null;
        this.initializeDefaultChannels();
        this.initializeDefaultRules();
        this.startEscalationMonitoring();
    }
    static getInstance() {
        if (!EnterpriseAlertSystem.instance) {
            EnterpriseAlertSystem.instance = new EnterpriseAlertSystem();
        }
        return EnterpriseAlertSystem.instance;
    }
    /**
   * Configura un canal de notificación
   */ setNotificationChannel(channel) {
        this.notificationChannels.set(channel.id, channel);
        _logger.logger.info(_logger.LogLevel.INFO, `Notification channel configured: ${channel.id}`, {
            type: channel.type,
            enabled: channel.enabled,
            levels: channel.levels
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Configura una regla de escalamiento
   */ setEscalationRule(rule) {
        this.escalationRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Escalation rule configured: ${rule.id}`, {
            level: rule.conditions.level,
            duration: rule.conditions.duration,
            enabled: rule.enabled
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Configura una regla de alerta
   */ setAlertRule(rule) {
        this.alertRules.set(rule.id, rule);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert rule configured: ${rule.id}`, {
            metricName: rule.metricName,
            threshold: rule.threshold,
            level: rule.level,
            enabled: rule.enabled
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Dispara una alerta
   */ async triggerAlert(ruleId, metricName, value, message) {
        const rule = this.alertRules.get(ruleId);
        if (!rule || !rule.enabled) {
            return null;
        }
        // Verificar cooldown
        const existingAlert = Array.from(this.activeAlerts.values()).find((alert)=>alert.ruleId === ruleId && alert.status === "active");
        if (existingAlert) {
            const cooldownEnd = new Date(existingAlert.triggeredAt);
            cooldownEnd.setMinutes(cooldownEnd.getMinutes() + rule.cooldownMinutes);
            if (new Date() < cooldownEnd) {
                return null; // Aún en cooldown
            }
        }
        // Crear nueva alerta
        const alert = {
            id: this.generateAlertId(),
            ruleId: rule.id,
            ruleName: rule.name,
            level: rule.level,
            status: "active",
            message: message || `${rule.description} - Value: ${value}, Threshold: ${rule.threshold}`,
            metricName,
            value,
            threshold: rule.threshold,
            triggeredAt: new Date().toISOString(),
            notificationsSent: [],
            tags: rule.tags,
            metadata: rule.metadata
        };
        this.activeAlerts.set(alert.id, alert);
        // Enviar notificaciones
        await this.sendNotifications(alert, rule.channels);
        // Almacenar en base de datos
        await this.storeAlert(alert);
        _logger.logger.warn(_logger.LogLevel.WARN, `Alert triggered: ${rule.name}`, {
            alertId: alert.id,
            level: alert.level,
            metricName: alert.metricName,
            value: alert.value,
            threshold: alert.threshold
        }, _logger.LogCategory.SYSTEM);
        return alert;
    }
    /**
   * Reconoce una alerta
   */ async acknowledgeAlert(alertId, userId) {
        const alert = this.activeAlerts.get(alertId);
        if (!alert || alert.status !== "active") {
            return false;
        }
        alert.status = "acknowledged";
        alert.acknowledgedAt = new Date().toISOString();
        alert.acknowledgedBy = userId;
        await this.updateAlert(alert);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert acknowledged: ${alertId}`, {
            userId,
            level: alert.level,
            ruleName: alert.ruleName
        }, _logger.LogCategory.SYSTEM);
        return true;
    }
    /**
   * Resuelve una alerta
   */ async resolveAlert(alertId, userId) {
        const alert = this.activeAlerts.get(alertId);
        if (!alert) {
            return false;
        }
        alert.status = "resolved";
        alert.resolvedAt = new Date().toISOString();
        alert.resolvedBy = userId;
        await this.updateAlert(alert);
        this.activeAlerts.delete(alertId);
        _logger.logger.info(_logger.LogLevel.INFO, `Alert resolved: ${alertId}`, {
            userId,
            level: alert.level,
            ruleName: alert.ruleName,
            duration: this.calculateDuration(alert.triggeredAt, alert.resolvedAt)
        }, _logger.LogCategory.SYSTEM);
        return true;
    }
    /**
   * Envía notificaciones para una alerta
   */ async sendNotifications(alert, channelIds) {
        const notifications = await Promise.allSettled(channelIds.map((channelId)=>this.sendNotification(alert, channelId)));
        // Log resultados
        notifications.forEach((result, index)=>{
            const channelId = channelIds[index];
            if (result.status === 'fulfilled' && result.value) {
                alert.notificationsSent.push(result.value);
            } else if (result.status === 'rejected') {
                _logger.logger.error(_logger.LogLevel.ERROR, `Failed to send notification to channel: ${channelId}`, {
                    alertId: alert.id,
                    error: result.reason
                }, _logger.LogCategory.SYSTEM);
            }
        });
    }
    /**
   * Envía notificación a un canal específico
   */ async sendNotification(alert, channelId) {
        const channel = this.notificationChannels.get(channelId);
        if (!channel || !channel.enabled || !channel.levels.includes(alert.level)) {
            return null;
        }
        // Verificar rate limiting
        if (channel.rateLimit && !await this.checkRateLimit(channelId, channel.rateLimit)) {
            _logger.logger.warn(_logger.LogLevel.WARN, `Rate limit exceeded for channel: ${channelId}`, {
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
            return null;
        }
        const startTime = Date.now();
        let success = false;
        let error;
        try {
            switch(channel.type){
                case "email":
                    await this.sendEmailNotification(alert, channel);
                    break;
                case "slack":
                    await this.sendSlackNotification(alert, channel);
                    break;
                case "webhook":
                    await this.sendWebhookNotification(alert, channel);
                    break;
                case "sms":
                    await this.sendSMSNotification(alert, channel);
                    break;
                case "log":
                    await this.sendLogNotification(alert, channel);
                    break;
                default:
                    throw new Error(`Unsupported notification type: ${channel.type}`);
            }
            success = true;
        } catch (err) {
            error = err instanceof Error ? err.message : 'Unknown error';
        }
        const notificationLog = {
            id: this.generateNotificationId(),
            channelId,
            channelType: channel.type,
            sentAt: new Date().toISOString(),
            success,
            error,
            responseTime: Date.now() - startTime
        };
        return notificationLog;
    }
    /**
   * Monitoreo de escalamiento automático
   */ async checkEscalations() {
        for (const alert of this.activeAlerts.values()){
            if (alert.status !== "active") {
                continue;
            }
            const rule = this.alertRules.get(alert.ruleId);
            if (!rule) {
                continue;
            }
            // Verificar reglas de escalamiento
            for (const escalationRuleId of rule.escalationRules){
                const escalationRule = this.escalationRules.get(escalationRuleId);
                if (!escalationRule || !escalationRule.enabled) {
                    continue;
                }
                // Verificar condiciones de escalamiento
                if (this.shouldEscalate(alert, escalationRule)) {
                    await this.escalateAlert(alert, escalationRule);
                }
            }
        }
    }
    /**
   * Verifica si una alerta debe escalarse
   */ shouldEscalate(alert, rule) {
        // Verificar nivel
        if (alert.level !== rule.conditions.level) {
            return false;
        }
        // Verificar duración
        const alertAge = Date.now() - new Date(alert.triggeredAt).getTime();
        const requiredDuration = rule.conditions.duration * 60 * 1000; // convertir a ms
        if (alertAge < requiredDuration) {
            return false;
        }
        // Verificar si ya fue escalada
        if (alert.escalatedAt) {
            return false;
        }
        return true;
    }
    /**
   * Escala una alerta
   */ async escalateAlert(alert, rule) {
        const originalLevel = alert.level;
        // Actualizar nivel si es necesario
        if (rule.actions.escalateToLevel) {
            alert.level = rule.actions.escalateToLevel;
            alert.escalatedFrom = originalLevel;
        }
        alert.escalatedAt = new Date().toISOString();
        // Enviar notificaciones de escalamiento
        await this.sendNotifications(alert, rule.actions.notifyChannels);
        // Asignar a usuario si es necesario
        if (rule.actions.assignToUser) {
            alert.metadata = {
                ...alert.metadata,
                assignedTo: rule.actions.assignToUser
            };
        }
        await this.updateAlert(alert);
        _logger.logger.error(_logger.LogLevel.ERROR, `Alert escalated: ${alert.id}`, {
            originalLevel,
            newLevel: alert.level,
            escalationRule: rule.name,
            duration: this.calculateDuration(alert.triggeredAt, alert.escalatedAt)
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Implementaciones de notificación específicas
   */ async sendEmailNotification(alert, channel) {
        // TODO: Implementar envío de email
        _logger.logger.info(_logger.LogLevel.INFO, `Email notification sent`, {
            alertId: alert.id,
            to: channel.config.to,
            subject: `[${alert.level.toUpperCase()}] ${alert.ruleName}`
        }, _logger.LogCategory.SYSTEM);
    }
    async sendSlackNotification(alert, channel) {
        // TODO: Implementar notificación Slack
        _logger.logger.info(_logger.LogLevel.INFO, `Slack notification sent`, {
            alertId: alert.id,
            channel: channel.config.channel,
            webhook: channel.config.webhookUrl ? 'configured' : 'missing'
        }, _logger.LogCategory.SYSTEM);
    }
    async sendWebhookNotification(alert, channel) {
        if (!channel.config.url) {
            throw new Error('Webhook URL not configured');
        }
        const response = await fetch(channel.config.url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                ...channel.config.headers || {}
            },
            body: JSON.stringify({
                alert,
                timestamp: new Date().toISOString(),
                source: 'pinteya-ecommerce'
            })
        });
        if (!response.ok) {
            throw new Error(`Webhook failed: ${response.status} ${response.statusText}`);
        }
    }
    async sendSMSNotification(alert, channel) {
        // TODO: Implementar envío de SMS
        _logger.logger.info(_logger.LogLevel.INFO, `SMS notification sent`, {
            alertId: alert.id,
            to: channel.config.phoneNumber
        }, _logger.LogCategory.SYSTEM);
    }
    async sendLogNotification(alert, channel) {
        const logLevel = alert.level === "emergency" || alert.level === "critical" ? _logger.LogLevel.ERROR : _logger.LogLevel.WARN;
        _logger.logger.log(logLevel, `ALERT: ${alert.message}`, {
            alertId: alert.id,
            level: alert.level,
            metricName: alert.metricName,
            value: alert.value,
            threshold: alert.threshold,
            ruleName: alert.ruleName
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Inicializa canales por defecto
   */ initializeDefaultChannels() {
        // Canal de log por defecto
        this.setNotificationChannel({
            id: 'default_log',
            type: "log",
            name: 'Default Log Channel',
            config: {},
            enabled: true,
            levels: [
                "info",
                "warning",
                "critical",
                "emergency"
            ]
        });
        // Canal de webhook por defecto (deshabilitado)
        this.setNotificationChannel({
            id: 'default_webhook',
            type: "webhook",
            name: 'Default Webhook Channel',
            config: {
                url: process.env.ALERT_WEBHOOK_URL || ''
            },
            enabled: false,
            levels: [
                "critical",
                "emergency"
            ],
            rateLimit: {
                maxPerHour: 10,
                maxPerDay: 50
            }
        });
    }
    /**
   * Inicializa reglas por defecto
   */ initializeDefaultRules() {
        // Regla de escalamiento para alertas críticas
        this.setEscalationRule({
            id: 'critical_escalation',
            name: 'Critical Alert Escalation',
            enabled: true,
            conditions: {
                level: "critical",
                duration: 15 // 15 minutos
            },
            actions: {
                escalateToLevel: "emergency",
                notifyChannels: [
                    'default_log',
                    'default_webhook'
                ]
            }
        });
    }
    /**
   * Inicia monitoreo de escalamiento
   */ startEscalationMonitoring() {
        this.escalationInterval = setInterval(()=>{
            this.checkEscalations();
        }, 60000); // Verificar cada minuto
    }
    /**
   * Funciones auxiliares
   */ generateAlertId() {
        return `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    generateNotificationId() {
        return `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    calculateDuration(start, end) {
        return Math.round((new Date(end).getTime() - new Date(start).getTime()) / 1000 / 60); // minutos
    }
    async checkRateLimit(channelId, rateLimit) {
        // TODO: Implementar verificación de rate limiting con Redis
        return true;
    }
    async storeAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').insert({
                id: alert.id,
                rule_id: alert.ruleId,
                rule_name: alert.ruleName,
                level: alert.level,
                status: alert.status,
                message: alert.message,
                metric_name: alert.metricName,
                value: alert.value,
                threshold: alert.threshold,
                triggered_at: alert.triggeredAt,
                acknowledged_at: alert.acknowledgedAt,
                acknowledged_by: alert.acknowledgedBy,
                resolved_at: alert.resolvedAt,
                resolved_by: alert.resolvedBy,
                escalated_at: alert.escalatedAt,
                escalated_from: alert.escalatedFrom,
                notifications_sent: alert.notificationsSent,
                tags: alert.tags,
                metadata: alert.metadata
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to store alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    async updateAlert(alert) {
        try {
            const supabase = (0, _supabase.getSupabaseClient)(true);
            if (!supabase) return;
            await supabase.from('enterprise_alerts').update({
                level: alert.level,
                status: alert.status,
                acknowledged_at: alert.acknowledgedAt,
                acknowledged_by: alert.acknowledgedBy,
                resolved_at: alert.resolvedAt,
                resolved_by: alert.resolvedBy,
                escalated_at: alert.escalatedAt,
                escalated_from: alert.escalatedFrom,
                notifications_sent: alert.notificationsSent,
                metadata: alert.metadata
            }).eq('id', alert.id);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to update alert', {
                error: error instanceof Error ? error.message : 'Unknown error',
                alertId: alert.id
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Limpia recursos
   */ destroy() {
        if (this.escalationInterval) {
            clearInterval(this.escalationInterval);
            this.escalationInterval = null;
        }
    }
}
const enterpriseAlertSystem = EnterpriseAlertSystem.getInstance();
const triggerAlert = enterpriseAlertSystem.triggerAlert.bind(enterpriseAlertSystem);
const acknowledgeAlert = enterpriseAlertSystem.acknowledgeAlert.bind(enterpriseAlertSystem);
const resolveAlert = enterpriseAlertSystem.resolveAlert.bind(enterpriseAlertSystem);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxhbGVydC1zeXN0ZW0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEVOVEVSUFJJU0UgQUxFUlQgU1lTVEVNXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBsb2dnZXIsIExvZ0xldmVsLCBMb2dDYXRlZ29yeSB9IGZyb20gJ0AvbGliL2xvZ2dlcic7XG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IENhY2hlVXRpbHMgfSBmcm9tICdAL2xpYi9jYWNoZS1tYW5hZ2VyJztcblxuLy8gTml2ZWxlcyBkZSBhbGVydGEgY29uIGVzY2FsYW1pZW50b1xuZXhwb3J0IGVudW0gQWxlcnRMZXZlbCB7XG4gIElORk8gPSAnaW5mbycsXG4gIFdBUk5JTkcgPSAnd2FybmluZycsIFxuICBDUklUSUNBTCA9ICdjcml0aWNhbCcsXG4gIEVNRVJHRU5DWSA9ICdlbWVyZ2VuY3knXG59XG5cbi8vIFRpcG9zIGRlIG5vdGlmaWNhY2nDs25cbmV4cG9ydCBlbnVtIE5vdGlmaWNhdGlvblR5cGUge1xuICBFTUFJTCA9ICdlbWFpbCcsXG4gIFNMQUNLID0gJ3NsYWNrJyxcbiAgV0VCSE9PSyA9ICd3ZWJob29rJyxcbiAgU01TID0gJ3NtcycsXG4gIFBVU0ggPSAncHVzaCcsXG4gIExPRyA9ICdsb2cnXG59XG5cbi8vIEVzdGFkb3MgZGUgYWxlcnRhXG5leHBvcnQgZW51bSBBbGVydFN0YXR1cyB7XG4gIEFDVElWRSA9ICdhY3RpdmUnLFxuICBBQ0tOT1dMRURHRUQgPSAnYWNrbm93bGVkZ2VkJyxcbiAgUkVTT0xWRUQgPSAncmVzb2x2ZWQnLFxuICBTVVBQUkVTU0VEID0gJ3N1cHByZXNzZWQnXG59XG5cbi8vIENvbmZpZ3VyYWNpw7NuIGRlIGNhbmFsIGRlIG5vdGlmaWNhY2nDs25cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uQ2hhbm5lbCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6IE5vdGlmaWNhdGlvblR5cGU7XG4gIG5hbWU6IHN0cmluZztcbiAgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBlbmFibGVkOiBib29sZWFuO1xuICBsZXZlbHM6IEFsZXJ0TGV2ZWxbXTtcbiAgcmF0ZUxpbWl0Pzoge1xuICAgIG1heFBlckhvdXI6IG51bWJlcjtcbiAgICBtYXhQZXJEYXk6IG51bWJlcjtcbiAgfTtcbn1cblxuLy8gUmVnbGEgZGUgZXNjYWxhbWllbnRvXG5leHBvcnQgaW50ZXJmYWNlIEVzY2FsYXRpb25SdWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbmFibGVkOiBib29sZWFuO1xuICBjb25kaXRpb25zOiB7XG4gICAgbGV2ZWw6IEFsZXJ0TGV2ZWw7XG4gICAgZHVyYXRpb246IG51bWJlcjsgLy8gbWludXRvcyBzaW4gcmVzb2x1Y2nDs25cbiAgICByZXBlYXRDb3VudD86IG51bWJlcjsgLy8gbsO6bWVybyBkZSByZXBldGljaW9uZXNcbiAgfTtcbiAgYWN0aW9uczoge1xuICAgIGVzY2FsYXRlVG9MZXZlbD86IEFsZXJ0TGV2ZWw7XG4gICAgbm90aWZ5Q2hhbm5lbHM6IHN0cmluZ1tdOyAvLyBJRHMgZGUgY2FuYWxlc1xuICAgIGFzc2lnblRvVXNlcj86IHN0cmluZztcbiAgfTtcbn1cblxuLy8gQ29uZmlndXJhY2nDs24gZGUgYWxlcnRhXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0UnVsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgbWV0cmljTmFtZTogc3RyaW5nO1xuICBjb25kaXRpb246ICdndCcgfCAnbHQnIHwgJ2VxJyB8ICdndGUnIHwgJ2x0ZSc7XG4gIHRocmVzaG9sZDogbnVtYmVyO1xuICBsZXZlbDogQWxlcnRMZXZlbDtcbiAgY29vbGRvd25NaW51dGVzOiBudW1iZXI7XG4gIGNoYW5uZWxzOiBzdHJpbmdbXTsgLy8gSURzIGRlIGNhbmFsZXMgZGUgbm90aWZpY2FjacOzblxuICBlc2NhbGF0aW9uUnVsZXM6IHN0cmluZ1tdOyAvLyBJRHMgZGUgcmVnbGFzIGRlIGVzY2FsYW1pZW50b1xuICB0YWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vIEFsZXJ0YSBhY3RpdmFcbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnQge1xuICBpZDogc3RyaW5nO1xuICBydWxlSWQ6IHN0cmluZztcbiAgcnVsZU5hbWU6IHN0cmluZztcbiAgbGV2ZWw6IEFsZXJ0TGV2ZWw7XG4gIHN0YXR1czogQWxlcnRTdGF0dXM7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgbWV0cmljTmFtZTogc3RyaW5nO1xuICB2YWx1ZTogbnVtYmVyO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgdHJpZ2dlcmVkQXQ6IHN0cmluZztcbiAgYWNrbm93bGVkZ2VkQXQ/OiBzdHJpbmc7XG4gIGFja25vd2xlZGdlZEJ5Pzogc3RyaW5nO1xuICByZXNvbHZlZEF0Pzogc3RyaW5nO1xuICByZXNvbHZlZEJ5Pzogc3RyaW5nO1xuICBlc2NhbGF0ZWRBdD86IHN0cmluZztcbiAgZXNjYWxhdGVkRnJvbT86IEFsZXJ0TGV2ZWw7XG4gIG5vdGlmaWNhdGlvbnNTZW50OiBOb3RpZmljYXRpb25Mb2dbXTtcbiAgdGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBMb2cgZGUgbm90aWZpY2FjacOzblxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb25Mb2cge1xuICBpZDogc3RyaW5nO1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgY2hhbm5lbFR5cGU6IE5vdGlmaWNhdGlvblR5cGU7XG4gIHNlbnRBdDogc3RyaW5nO1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZztcbiAgcmVzcG9uc2VUaW1lOiBudW1iZXI7XG59XG5cbi8qKlxuICogU2lzdGVtYSBkZSBBbGVydGFzIEVudGVycHJpc2UgY29uIGVzY2FsYW1pZW50byBhdXRvbcOhdGljb1xuICovXG5leHBvcnQgY2xhc3MgRW50ZXJwcmlzZUFsZXJ0U3lzdGVtIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEVudGVycHJpc2VBbGVydFN5c3RlbTtcbiAgcHJpdmF0ZSBhbGVydFJ1bGVzOiBNYXA8c3RyaW5nLCBBbGVydFJ1bGU+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBNYXA8c3RyaW5nLCBOb3RpZmljYXRpb25DaGFubmVsPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBlc2NhbGF0aW9uUnVsZXM6IE1hcDxzdHJpbmcsIEVzY2FsYXRpb25SdWxlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhY3RpdmVBbGVydHM6IE1hcDxzdHJpbmcsIEFsZXJ0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBlc2NhbGF0aW9uSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdENoYW5uZWxzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdFJ1bGVzKCk7XG4gICAgdGhpcy5zdGFydEVzY2FsYXRpb25Nb25pdG9yaW5nKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRW50ZXJwcmlzZUFsZXJ0U3lzdGVtIHtcbiAgICBpZiAoIUVudGVycHJpc2VBbGVydFN5c3RlbS5pbnN0YW5jZSkge1xuICAgICAgRW50ZXJwcmlzZUFsZXJ0U3lzdGVtLmluc3RhbmNlID0gbmV3IEVudGVycHJpc2VBbGVydFN5c3RlbSgpO1xuICAgIH1cbiAgICByZXR1cm4gRW50ZXJwcmlzZUFsZXJ0U3lzdGVtLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYSB1biBjYW5hbCBkZSBub3RpZmljYWNpw7NuXG4gICAqL1xuICBzZXROb3RpZmljYXRpb25DaGFubmVsKGNoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwpOiB2b2lkIHtcbiAgICB0aGlzLm5vdGlmaWNhdGlvbkNoYW5uZWxzLnNldChjaGFubmVsLmlkLCBjaGFubmVsKTtcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgTm90aWZpY2F0aW9uIGNoYW5uZWwgY29uZmlndXJlZDogJHtjaGFubmVsLmlkfWAsIHtcbiAgICAgIHR5cGU6IGNoYW5uZWwudHlwZSxcbiAgICAgIGVuYWJsZWQ6IGNoYW5uZWwuZW5hYmxlZCxcbiAgICAgIGxldmVsczogY2hhbm5lbC5sZXZlbHNcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYSB1bmEgcmVnbGEgZGUgZXNjYWxhbWllbnRvXG4gICAqL1xuICBzZXRFc2NhbGF0aW9uUnVsZShydWxlOiBFc2NhbGF0aW9uUnVsZSk6IHZvaWQge1xuICAgIHRoaXMuZXNjYWxhdGlvblJ1bGVzLnNldChydWxlLmlkLCBydWxlKTtcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgRXNjYWxhdGlvbiBydWxlIGNvbmZpZ3VyZWQ6ICR7cnVsZS5pZH1gLCB7XG4gICAgICBsZXZlbDogcnVsZS5jb25kaXRpb25zLmxldmVsLFxuICAgICAgZHVyYXRpb246IHJ1bGUuY29uZGl0aW9ucy5kdXJhdGlvbixcbiAgICAgIGVuYWJsZWQ6IHJ1bGUuZW5hYmxlZFxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJhIHVuYSByZWdsYSBkZSBhbGVydGFcbiAgICovXG4gIHNldEFsZXJ0UnVsZShydWxlOiBBbGVydFJ1bGUpOiB2b2lkIHtcbiAgICB0aGlzLmFsZXJ0UnVsZXMuc2V0KHJ1bGUuaWQsIHJ1bGUpO1xuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBBbGVydCBydWxlIGNvbmZpZ3VyZWQ6ICR7cnVsZS5pZH1gLCB7XG4gICAgICBtZXRyaWNOYW1lOiBydWxlLm1ldHJpY05hbWUsXG4gICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgbGV2ZWw6IHJ1bGUubGV2ZWwsXG4gICAgICBlbmFibGVkOiBydWxlLmVuYWJsZWRcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhcmEgdW5hIGFsZXJ0YVxuICAgKi9cbiAgYXN5bmMgdHJpZ2dlckFsZXJ0KFxuICAgIHJ1bGVJZDogc3RyaW5nLFxuICAgIG1ldHJpY05hbWU6IHN0cmluZyxcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIG1lc3NhZ2U/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxBbGVydCB8IG51bGw+IHtcbiAgICBjb25zdCBydWxlID0gdGhpcy5hbGVydFJ1bGVzLmdldChydWxlSWQpO1xuICAgIGlmICghcnVsZSB8fCAhcnVsZS5lbmFibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgY29vbGRvd25cbiAgICBjb25zdCBleGlzdGluZ0FsZXJ0ID0gQXJyYXkuZnJvbSh0aGlzLmFjdGl2ZUFsZXJ0cy52YWx1ZXMoKSlcbiAgICAgIC5maW5kKGFsZXJ0ID0+IGFsZXJ0LnJ1bGVJZCA9PT0gcnVsZUlkICYmIGFsZXJ0LnN0YXR1cyA9PT0gQWxlcnRTdGF0dXMuQUNUSVZFKTtcblxuICAgIGlmIChleGlzdGluZ0FsZXJ0KSB7XG4gICAgICBjb25zdCBjb29sZG93bkVuZCA9IG5ldyBEYXRlKGV4aXN0aW5nQWxlcnQudHJpZ2dlcmVkQXQpO1xuICAgICAgY29vbGRvd25FbmQuc2V0TWludXRlcyhjb29sZG93bkVuZC5nZXRNaW51dGVzKCkgKyBydWxlLmNvb2xkb3duTWludXRlcyk7XG4gICAgICBcbiAgICAgIGlmIChuZXcgRGF0ZSgpIDwgY29vbGRvd25FbmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEHDum4gZW4gY29vbGRvd25cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhciBudWV2YSBhbGVydGFcbiAgICBjb25zdCBhbGVydDogQWxlcnQgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUFsZXJ0SWQoKSxcbiAgICAgIHJ1bGVJZDogcnVsZS5pZCxcbiAgICAgIHJ1bGVOYW1lOiBydWxlLm5hbWUsXG4gICAgICBsZXZlbDogcnVsZS5sZXZlbCxcbiAgICAgIHN0YXR1czogQWxlcnRTdGF0dXMuQUNUSVZFLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZSB8fCBgJHtydWxlLmRlc2NyaXB0aW9ufSAtIFZhbHVlOiAke3ZhbHVlfSwgVGhyZXNob2xkOiAke3J1bGUudGhyZXNob2xkfWAsXG4gICAgICBtZXRyaWNOYW1lLFxuICAgICAgdmFsdWUsXG4gICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgdHJpZ2dlcmVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG5vdGlmaWNhdGlvbnNTZW50OiBbXSxcbiAgICAgIHRhZ3M6IHJ1bGUudGFncyxcbiAgICAgIG1ldGFkYXRhOiBydWxlLm1ldGFkYXRhXG4gICAgfTtcblxuICAgIHRoaXMuYWN0aXZlQWxlcnRzLnNldChhbGVydC5pZCwgYWxlcnQpO1xuXG4gICAgLy8gRW52aWFyIG5vdGlmaWNhY2lvbmVzXG4gICAgYXdhaXQgdGhpcy5zZW5kTm90aWZpY2F0aW9ucyhhbGVydCwgcnVsZS5jaGFubmVscyk7XG5cbiAgICAvLyBBbG1hY2VuYXIgZW4gYmFzZSBkZSBkYXRvc1xuICAgIGF3YWl0IHRoaXMuc3RvcmVBbGVydChhbGVydCk7XG5cbiAgICBsb2dnZXIud2FybihMb2dMZXZlbC5XQVJOLCBgQWxlcnQgdHJpZ2dlcmVkOiAke3J1bGUubmFtZX1gLCB7XG4gICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgIG1ldHJpY05hbWU6IGFsZXJ0Lm1ldHJpY05hbWUsXG4gICAgICB2YWx1ZTogYWxlcnQudmFsdWUsXG4gICAgICB0aHJlc2hvbGQ6IGFsZXJ0LnRocmVzaG9sZFxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG5cbiAgICByZXR1cm4gYWxlcnQ7XG4gIH1cblxuICAvKipcbiAgICogUmVjb25vY2UgdW5hIGFsZXJ0YVxuICAgKi9cbiAgYXN5bmMgYWNrbm93bGVkZ2VBbGVydChhbGVydElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFjdGl2ZUFsZXJ0cy5nZXQoYWxlcnRJZCk7XG4gICAgaWYgKCFhbGVydCB8fCBhbGVydC5zdGF0dXMgIT09IEFsZXJ0U3RhdHVzLkFDVElWRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFsZXJ0LnN0YXR1cyA9IEFsZXJ0U3RhdHVzLkFDS05PV0xFREdFRDtcbiAgICBhbGVydC5hY2tub3dsZWRnZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBhbGVydC5hY2tub3dsZWRnZWRCeSA9IHVzZXJJZDtcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlQWxlcnQoYWxlcnQpO1xuXG4gICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgYEFsZXJ0IGFja25vd2xlZGdlZDogJHthbGVydElkfWAsIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgIHJ1bGVOYW1lOiBhbGVydC5ydWxlTmFtZVxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1ZWx2ZSB1bmEgYWxlcnRhXG4gICAqL1xuICBhc3luYyByZXNvbHZlQWxlcnQoYWxlcnRJZDogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBhbGVydCA9IHRoaXMuYWN0aXZlQWxlcnRzLmdldChhbGVydElkKTtcbiAgICBpZiAoIWFsZXJ0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgYWxlcnQuc3RhdHVzID0gQWxlcnRTdGF0dXMuUkVTT0xWRUQ7XG4gICAgYWxlcnQucmVzb2x2ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBhbGVydC5yZXNvbHZlZEJ5ID0gdXNlcklkO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVBbGVydChhbGVydCk7XG4gICAgdGhpcy5hY3RpdmVBbGVydHMuZGVsZXRlKGFsZXJ0SWQpO1xuXG4gICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgYEFsZXJ0IHJlc29sdmVkOiAke2FsZXJ0SWR9YCwge1xuICAgICAgdXNlcklkLFxuICAgICAgbGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgcnVsZU5hbWU6IGFsZXJ0LnJ1bGVOYW1lLFxuICAgICAgZHVyYXRpb246IHRoaXMuY2FsY3VsYXRlRHVyYXRpb24oYWxlcnQudHJpZ2dlcmVkQXQsIGFsZXJ0LnJlc29sdmVkQXQhKVxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnbDrWEgbm90aWZpY2FjaW9uZXMgcGFyYSB1bmEgYWxlcnRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNlbmROb3RpZmljYXRpb25zKGFsZXJ0OiBBbGVydCwgY2hhbm5lbElkczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3RpZmljYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgICAgY2hhbm5lbElkcy5tYXAoY2hhbm5lbElkID0+IHRoaXMuc2VuZE5vdGlmaWNhdGlvbihhbGVydCwgY2hhbm5lbElkKSlcbiAgICApO1xuXG4gICAgLy8gTG9nIHJlc3VsdGFkb3NcbiAgICBub3RpZmljYXRpb25zLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGNoYW5uZWxJZHNbaW5kZXhdO1xuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHJlc3VsdC52YWx1ZSkge1xuICAgICAgICBhbGVydC5ub3RpZmljYXRpb25zU2VudC5wdXNoKHJlc3VsdC52YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCBgRmFpbGVkIHRvIHNlbmQgbm90aWZpY2F0aW9uIHRvIGNoYW5uZWw6ICR7Y2hhbm5lbElkfWAsIHtcbiAgICAgICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgICAgICBlcnJvcjogcmVzdWx0LnJlYXNvblxuICAgICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEVudsOtYSBub3RpZmljYWNpw7NuIGEgdW4gY2FuYWwgZXNwZWPDrWZpY29cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2VuZE5vdGlmaWNhdGlvbihhbGVydDogQWxlcnQsIGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxOb3RpZmljYXRpb25Mb2cgfCBudWxsPiB7XG4gICAgY29uc3QgY2hhbm5lbCA9IHRoaXMubm90aWZpY2F0aW9uQ2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG4gICAgaWYgKCFjaGFubmVsIHx8ICFjaGFubmVsLmVuYWJsZWQgfHwgIWNoYW5uZWwubGV2ZWxzLmluY2x1ZGVzKGFsZXJ0LmxldmVsKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHJhdGUgbGltaXRpbmdcbiAgICBpZiAoY2hhbm5lbC5yYXRlTGltaXQgJiYgIShhd2FpdCB0aGlzLmNoZWNrUmF0ZUxpbWl0KGNoYW5uZWxJZCwgY2hhbm5lbC5yYXRlTGltaXQpKSkge1xuICAgICAgbG9nZ2VyLndhcm4oTG9nTGV2ZWwuV0FSTiwgYFJhdGUgbGltaXQgZXhjZWVkZWQgZm9yIGNoYW5uZWw6ICR7Y2hhbm5lbElkfWAsIHtcbiAgICAgICAgYWxlcnRJZDogYWxlcnQuaWRcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gICAgbGV0IGVycm9yOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgc3dpdGNoIChjaGFubmVsLnR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RpZmljYXRpb25UeXBlLkVNQUlMOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZEVtYWlsTm90aWZpY2F0aW9uKGFsZXJ0LCBjaGFubmVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb3RpZmljYXRpb25UeXBlLlNMQUNLOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZFNsYWNrTm90aWZpY2F0aW9uKGFsZXJ0LCBjaGFubmVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb3RpZmljYXRpb25UeXBlLldFQkhPT0s6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kV2ViaG9va05vdGlmaWNhdGlvbihhbGVydCwgY2hhbm5lbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm90aWZpY2F0aW9uVHlwZS5TTVM6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kU01TTm90aWZpY2F0aW9uKGFsZXJ0LCBjaGFubmVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb3RpZmljYXRpb25UeXBlLkxPRzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRMb2dOb3RpZmljYXRpb24oYWxlcnQsIGNoYW5uZWwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbm90aWZpY2F0aW9uIHR5cGU6ICR7Y2hhbm5lbC50eXBlfWApO1xuICAgICAgfVxuICAgICAgc3VjY2VzcyA9IHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBlcnJvciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uTG9nOiBOb3RpZmljYXRpb25Mb2cgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZU5vdGlmaWNhdGlvbklkKCksXG4gICAgICBjaGFubmVsSWQsXG4gICAgICBjaGFubmVsVHlwZTogY2hhbm5lbC50eXBlLFxuICAgICAgc2VudEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBzdWNjZXNzLFxuICAgICAgZXJyb3IsXG4gICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbkxvZztcbiAgfVxuXG4gIC8qKlxuICAgKiBNb25pdG9yZW8gZGUgZXNjYWxhbWllbnRvIGF1dG9tw6F0aWNvXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNoZWNrRXNjYWxhdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFjdGl2ZUFsZXJ0cy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGFsZXJ0LnN0YXR1cyAhPT0gQWxlcnRTdGF0dXMuQUNUSVZFKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBydWxlID0gdGhpcy5hbGVydFJ1bGVzLmdldChhbGVydC5ydWxlSWQpO1xuICAgICAgaWYgKCFydWxlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZmljYXIgcmVnbGFzIGRlIGVzY2FsYW1pZW50b1xuICAgICAgZm9yIChjb25zdCBlc2NhbGF0aW9uUnVsZUlkIG9mIHJ1bGUuZXNjYWxhdGlvblJ1bGVzKSB7XG4gICAgICAgIGNvbnN0IGVzY2FsYXRpb25SdWxlID0gdGhpcy5lc2NhbGF0aW9uUnVsZXMuZ2V0KGVzY2FsYXRpb25SdWxlSWQpO1xuICAgICAgICBpZiAoIWVzY2FsYXRpb25SdWxlIHx8ICFlc2NhbGF0aW9uUnVsZS5lbmFibGVkKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWZXJpZmljYXIgY29uZGljaW9uZXMgZGUgZXNjYWxhbWllbnRvXG4gICAgICAgIGlmICh0aGlzLnNob3VsZEVzY2FsYXRlKGFsZXJ0LCBlc2NhbGF0aW9uUnVsZSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmVzY2FsYXRlQWxlcnQoYWxlcnQsIGVzY2FsYXRpb25SdWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzaSB1bmEgYWxlcnRhIGRlYmUgZXNjYWxhcnNlXG4gICAqL1xuICBwcml2YXRlIHNob3VsZEVzY2FsYXRlKGFsZXJ0OiBBbGVydCwgcnVsZTogRXNjYWxhdGlvblJ1bGUpOiBib29sZWFuIHtcbiAgICAvLyBWZXJpZmljYXIgbml2ZWxcbiAgICBpZiAoYWxlcnQubGV2ZWwgIT09IHJ1bGUuY29uZGl0aW9ucy5sZXZlbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBkdXJhY2nDs25cbiAgICBjb25zdCBhbGVydEFnZSA9IERhdGUubm93KCkgLSBuZXcgRGF0ZShhbGVydC50cmlnZ2VyZWRBdCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IHJlcXVpcmVkRHVyYXRpb24gPSBydWxlLmNvbmRpdGlvbnMuZHVyYXRpb24gKiA2MCAqIDEwMDA7IC8vIGNvbnZlcnRpciBhIG1zXG5cbiAgICBpZiAoYWxlcnRBZ2UgPCByZXF1aXJlZER1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHNpIHlhIGZ1ZSBlc2NhbGFkYVxuICAgIGlmIChhbGVydC5lc2NhbGF0ZWRBdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVzY2FsYSB1bmEgYWxlcnRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVzY2FsYXRlQWxlcnQoYWxlcnQ6IEFsZXJ0LCBydWxlOiBFc2NhbGF0aW9uUnVsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG9yaWdpbmFsTGV2ZWwgPSBhbGVydC5sZXZlbDtcbiAgICBcbiAgICAvLyBBY3R1YWxpemFyIG5pdmVsIHNpIGVzIG5lY2VzYXJpb1xuICAgIGlmIChydWxlLmFjdGlvbnMuZXNjYWxhdGVUb0xldmVsKSB7XG4gICAgICBhbGVydC5sZXZlbCA9IHJ1bGUuYWN0aW9ucy5lc2NhbGF0ZVRvTGV2ZWw7XG4gICAgICBhbGVydC5lc2NhbGF0ZWRGcm9tID0gb3JpZ2luYWxMZXZlbDtcbiAgICB9XG5cbiAgICBhbGVydC5lc2NhbGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIC8vIEVudmlhciBub3RpZmljYWNpb25lcyBkZSBlc2NhbGFtaWVudG9cbiAgICBhd2FpdCB0aGlzLnNlbmROb3RpZmljYXRpb25zKGFsZXJ0LCBydWxlLmFjdGlvbnMubm90aWZ5Q2hhbm5lbHMpO1xuXG4gICAgLy8gQXNpZ25hciBhIHVzdWFyaW8gc2kgZXMgbmVjZXNhcmlvXG4gICAgaWYgKHJ1bGUuYWN0aW9ucy5hc3NpZ25Ub1VzZXIpIHtcbiAgICAgIGFsZXJ0Lm1ldGFkYXRhID0ge1xuICAgICAgICAuLi5hbGVydC5tZXRhZGF0YSxcbiAgICAgICAgYXNzaWduZWRUbzogcnVsZS5hY3Rpb25zLmFzc2lnblRvVXNlclxuICAgICAgfTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUFsZXJ0KGFsZXJ0KTtcblxuICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgYEFsZXJ0IGVzY2FsYXRlZDogJHthbGVydC5pZH1gLCB7XG4gICAgICBvcmlnaW5hbExldmVsLFxuICAgICAgbmV3TGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgZXNjYWxhdGlvblJ1bGU6IHJ1bGUubmFtZSxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uKGFsZXJ0LnRyaWdnZXJlZEF0LCBhbGVydC5lc2NhbGF0ZWRBdClcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGFjaW9uZXMgZGUgbm90aWZpY2FjacOzbiBlc3BlY8OtZmljYXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2VuZEVtYWlsTm90aWZpY2F0aW9uKGFsZXJ0OiBBbGVydCwgY2hhbm5lbDogTm90aWZpY2F0aW9uQ2hhbm5lbCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGVudsOtbyBkZSBlbWFpbFxuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBFbWFpbCBub3RpZmljYXRpb24gc2VudGAsIHtcbiAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgdG86IGNoYW5uZWwuY29uZmlnLnRvLFxuICAgICAgc3ViamVjdDogYFske2FsZXJ0LmxldmVsLnRvVXBwZXJDYXNlKCl9XSAke2FsZXJ0LnJ1bGVOYW1lfWBcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kU2xhY2tOb3RpZmljYXRpb24oYWxlcnQ6IEFsZXJ0LCBjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50YXIgbm90aWZpY2FjacOzbiBTbGFja1xuICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sIGBTbGFjayBub3RpZmljYXRpb24gc2VudGAsIHtcbiAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgY2hhbm5lbDogY2hhbm5lbC5jb25maWcuY2hhbm5lbCxcbiAgICAgIHdlYmhvb2s6IGNoYW5uZWwuY29uZmlnLndlYmhvb2tVcmwgPyAnY29uZmlndXJlZCcgOiAnbWlzc2luZydcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kV2ViaG9va05vdGlmaWNhdGlvbihhbGVydDogQWxlcnQsIGNoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIWNoYW5uZWwuY29uZmlnLnVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJob29rIFVSTCBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY2hhbm5lbC5jb25maWcudXJsLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgLi4uKGNoYW5uZWwuY29uZmlnLmhlYWRlcnMgfHwge30pXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhbGVydCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHNvdXJjZTogJ3BpbnRleWEtZWNvbW1lcmNlJ1xuICAgICAgfSlcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgV2ViaG9vayBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kU01TTm90aWZpY2F0aW9uKGFsZXJ0OiBBbGVydCwgY2hhbm5lbDogTm90aWZpY2F0aW9uQ2hhbm5lbCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGVudsOtbyBkZSBTTVNcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCBgU01TIG5vdGlmaWNhdGlvbiBzZW50YCwge1xuICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICB0bzogY2hhbm5lbC5jb25maWcucGhvbmVOdW1iZXJcbiAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTG9nTm90aWZpY2F0aW9uKGFsZXJ0OiBBbGVydCwgY2hhbm5lbDogTm90aWZpY2F0aW9uQ2hhbm5lbCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGxvZ0xldmVsID0gYWxlcnQubGV2ZWwgPT09IEFsZXJ0TGV2ZWwuRU1FUkdFTkNZIHx8IGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkNSSVRJQ0FMIFxuICAgICAgPyBMb2dMZXZlbC5FUlJPUiBcbiAgICAgIDogTG9nTGV2ZWwuV0FSTjtcblxuICAgIGxvZ2dlci5sb2cobG9nTGV2ZWwsIGBBTEVSVDogJHthbGVydC5tZXNzYWdlfWAsIHtcbiAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgbGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgbWV0cmljTmFtZTogYWxlcnQubWV0cmljTmFtZSxcbiAgICAgIHZhbHVlOiBhbGVydC52YWx1ZSxcbiAgICAgIHRocmVzaG9sZDogYWxlcnQudGhyZXNob2xkLFxuICAgICAgcnVsZU5hbWU6IGFsZXJ0LnJ1bGVOYW1lXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIGNhbmFsZXMgcG9yIGRlZmVjdG9cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRDaGFubmVscygpOiB2b2lkIHtcbiAgICAvLyBDYW5hbCBkZSBsb2cgcG9yIGRlZmVjdG9cbiAgICB0aGlzLnNldE5vdGlmaWNhdGlvbkNoYW5uZWwoe1xuICAgICAgaWQ6ICdkZWZhdWx0X2xvZycsXG4gICAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlLkxPRyxcbiAgICAgIG5hbWU6ICdEZWZhdWx0IExvZyBDaGFubmVsJyxcbiAgICAgIGNvbmZpZzoge30sXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgbGV2ZWxzOiBbQWxlcnRMZXZlbC5JTkZPLCBBbGVydExldmVsLldBUk5JTkcsIEFsZXJ0TGV2ZWwuQ1JJVElDQUwsIEFsZXJ0TGV2ZWwuRU1FUkdFTkNZXVxuICAgIH0pO1xuXG4gICAgLy8gQ2FuYWwgZGUgd2ViaG9vayBwb3IgZGVmZWN0byAoZGVzaGFiaWxpdGFkbylcbiAgICB0aGlzLnNldE5vdGlmaWNhdGlvbkNoYW5uZWwoe1xuICAgICAgaWQ6ICdkZWZhdWx0X3dlYmhvb2snLFxuICAgICAgdHlwZTogTm90aWZpY2F0aW9uVHlwZS5XRUJIT09LLFxuICAgICAgbmFtZTogJ0RlZmF1bHQgV2ViaG9vayBDaGFubmVsJyxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICB1cmw6IHByb2Nlc3MuZW52LkFMRVJUX1dFQkhPT0tfVVJMIHx8ICcnXG4gICAgICB9LFxuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBsZXZlbHM6IFtBbGVydExldmVsLkNSSVRJQ0FMLCBBbGVydExldmVsLkVNRVJHRU5DWV0sXG4gICAgICByYXRlTGltaXQ6IHtcbiAgICAgICAgbWF4UGVySG91cjogMTAsXG4gICAgICAgIG1heFBlckRheTogNTBcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIHJlZ2xhcyBwb3IgZGVmZWN0b1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdFJ1bGVzKCk6IHZvaWQge1xuICAgIC8vIFJlZ2xhIGRlIGVzY2FsYW1pZW50byBwYXJhIGFsZXJ0YXMgY3LDrXRpY2FzXG4gICAgdGhpcy5zZXRFc2NhbGF0aW9uUnVsZSh7XG4gICAgICBpZDogJ2NyaXRpY2FsX2VzY2FsYXRpb24nLFxuICAgICAgbmFtZTogJ0NyaXRpY2FsIEFsZXJ0IEVzY2FsYXRpb24nLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGNvbmRpdGlvbnM6IHtcbiAgICAgICAgbGV2ZWw6IEFsZXJ0TGV2ZWwuQ1JJVElDQUwsXG4gICAgICAgIGR1cmF0aW9uOiAxNSAvLyAxNSBtaW51dG9zXG4gICAgICB9LFxuICAgICAgYWN0aW9uczoge1xuICAgICAgICBlc2NhbGF0ZVRvTGV2ZWw6IEFsZXJ0TGV2ZWwuRU1FUkdFTkNZLFxuICAgICAgICBub3RpZnlDaGFubmVsczogWydkZWZhdWx0X2xvZycsICdkZWZhdWx0X3dlYmhvb2snXVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaWNpYSBtb25pdG9yZW8gZGUgZXNjYWxhbWllbnRvXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0RXNjYWxhdGlvbk1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5lc2NhbGF0aW9uSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRXNjYWxhdGlvbnMoKTtcbiAgICB9LCA2MDAwMCk7IC8vIFZlcmlmaWNhciBjYWRhIG1pbnV0b1xuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmNpb25lcyBhdXhpbGlhcmVzXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQWxlcnRJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgYWxlcnRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZU5vdGlmaWNhdGlvbklkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBub3RpZl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0OiBzdHJpbmcsIGVuZDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgobmV3IERhdGUoZW5kKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShzdGFydCkuZ2V0VGltZSgpKSAvIDEwMDAgLyA2MCk7IC8vIG1pbnV0b3NcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tSYXRlTGltaXQoY2hhbm5lbElkOiBzdHJpbmcsIHJhdGVMaW1pdDogeyBtYXhQZXJIb3VyOiBudW1iZXI7IG1heFBlckRheTogbnVtYmVyIH0pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnRhciB2ZXJpZmljYWNpw7NuIGRlIHJhdGUgbGltaXRpbmcgY29uIFJlZGlzXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0b3JlQWxlcnQoYWxlcnQ6IEFsZXJ0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQodHJ1ZSk7XG4gICAgICBpZiAoIXN1cGFiYXNlKSByZXR1cm47XG5cbiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2VudGVycHJpc2VfYWxlcnRzJykuaW5zZXJ0KHtcbiAgICAgICAgaWQ6IGFsZXJ0LmlkLFxuICAgICAgICBydWxlX2lkOiBhbGVydC5ydWxlSWQsXG4gICAgICAgIHJ1bGVfbmFtZTogYWxlcnQucnVsZU5hbWUsXG4gICAgICAgIGxldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgICAgc3RhdHVzOiBhbGVydC5zdGF0dXMsXG4gICAgICAgIG1lc3NhZ2U6IGFsZXJ0Lm1lc3NhZ2UsXG4gICAgICAgIG1ldHJpY19uYW1lOiBhbGVydC5tZXRyaWNOYW1lLFxuICAgICAgICB2YWx1ZTogYWxlcnQudmFsdWUsXG4gICAgICAgIHRocmVzaG9sZDogYWxlcnQudGhyZXNob2xkLFxuICAgICAgICB0cmlnZ2VyZWRfYXQ6IGFsZXJ0LnRyaWdnZXJlZEF0LFxuICAgICAgICBhY2tub3dsZWRnZWRfYXQ6IGFsZXJ0LmFja25vd2xlZGdlZEF0LFxuICAgICAgICBhY2tub3dsZWRnZWRfYnk6IGFsZXJ0LmFja25vd2xlZGdlZEJ5LFxuICAgICAgICByZXNvbHZlZF9hdDogYWxlcnQucmVzb2x2ZWRBdCxcbiAgICAgICAgcmVzb2x2ZWRfYnk6IGFsZXJ0LnJlc29sdmVkQnksXG4gICAgICAgIGVzY2FsYXRlZF9hdDogYWxlcnQuZXNjYWxhdGVkQXQsXG4gICAgICAgIGVzY2FsYXRlZF9mcm9tOiBhbGVydC5lc2NhbGF0ZWRGcm9tLFxuICAgICAgICBub3RpZmljYXRpb25zX3NlbnQ6IGFsZXJ0Lm5vdGlmaWNhdGlvbnNTZW50LFxuICAgICAgICB0YWdzOiBhbGVydC50YWdzLFxuICAgICAgICBtZXRhZGF0YTogYWxlcnQubWV0YWRhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gc3RvcmUgYWxlcnQnLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgYWxlcnRJZDogYWxlcnQuaWRcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVBbGVydChhbGVydDogQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCh0cnVlKTtcbiAgICAgIGlmICghc3VwYWJhc2UpIHJldHVybjtcblxuICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2VudGVycHJpc2VfYWxlcnRzJylcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgbGV2ZWw6IGFsZXJ0LmxldmVsLFxuICAgICAgICAgIHN0YXR1czogYWxlcnQuc3RhdHVzLFxuICAgICAgICAgIGFja25vd2xlZGdlZF9hdDogYWxlcnQuYWNrbm93bGVkZ2VkQXQsXG4gICAgICAgICAgYWNrbm93bGVkZ2VkX2J5OiBhbGVydC5hY2tub3dsZWRnZWRCeSxcbiAgICAgICAgICByZXNvbHZlZF9hdDogYWxlcnQucmVzb2x2ZWRBdCxcbiAgICAgICAgICByZXNvbHZlZF9ieTogYWxlcnQucmVzb2x2ZWRCeSxcbiAgICAgICAgICBlc2NhbGF0ZWRfYXQ6IGFsZXJ0LmVzY2FsYXRlZEF0LFxuICAgICAgICAgIGVzY2FsYXRlZF9mcm9tOiBhbGVydC5lc2NhbGF0ZWRGcm9tLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbnNfc2VudDogYWxlcnQubm90aWZpY2F0aW9uc1NlbnQsXG4gICAgICAgICAgbWV0YWRhdGE6IGFsZXJ0Lm1ldGFkYXRhXG4gICAgICAgIH0pXG4gICAgICAgIC5lcSgnaWQnLCBhbGVydC5pZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgJ0ZhaWxlZCB0byB1cGRhdGUgYWxlcnQnLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgYWxlcnRJZDogYWxlcnQuaWRcbiAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExpbXBpYSByZWN1cnNvc1xuICAgKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5lc2NhbGF0aW9uSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5lc2NhbGF0aW9uSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5lc2NhbGF0aW9uSW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgc2luZ2xldG9uXG5leHBvcnQgY29uc3QgZW50ZXJwcmlzZUFsZXJ0U3lzdGVtID0gRW50ZXJwcmlzZUFsZXJ0U3lzdGVtLmdldEluc3RhbmNlKCk7XG5cbi8vIEZ1bmNpb25lcyBkZSBjb252ZW5pZW5jaWFcbmV4cG9ydCBjb25zdCB0cmlnZ2VyQWxlcnQgPSBlbnRlcnByaXNlQWxlcnRTeXN0ZW0udHJpZ2dlckFsZXJ0LmJpbmQoZW50ZXJwcmlzZUFsZXJ0U3lzdGVtKTtcbmV4cG9ydCBjb25zdCBhY2tub3dsZWRnZUFsZXJ0ID0gZW50ZXJwcmlzZUFsZXJ0U3lzdGVtLmFja25vd2xlZGdlQWxlcnQuYmluZChlbnRlcnByaXNlQWxlcnRTeXN0ZW0pO1xuZXhwb3J0IGNvbnN0IHJlc29sdmVBbGVydCA9IGVudGVycHJpc2VBbGVydFN5c3RlbS5yZXNvbHZlQWxlcnQuYmluZChlbnRlcnByaXNlQWxlcnRTeXN0ZW0pO1xuIl0sIm5hbWVzIjpbIkFsZXJ0TGV2ZWwiLCJBbGVydFN0YXR1cyIsIkVudGVycHJpc2VBbGVydFN5c3RlbSIsIk5vdGlmaWNhdGlvblR5cGUiLCJhY2tub3dsZWRnZUFsZXJ0IiwiZW50ZXJwcmlzZUFsZXJ0U3lzdGVtIiwicmVzb2x2ZUFsZXJ0IiwidHJpZ2dlckFsZXJ0IiwiY29uc3RydWN0b3IiLCJhbGVydFJ1bGVzIiwiTWFwIiwibm90aWZpY2F0aW9uQ2hhbm5lbHMiLCJlc2NhbGF0aW9uUnVsZXMiLCJhY3RpdmVBbGVydHMiLCJlc2NhbGF0aW9uSW50ZXJ2YWwiLCJpbml0aWFsaXplRGVmYXVsdENoYW5uZWxzIiwiaW5pdGlhbGl6ZURlZmF1bHRSdWxlcyIsInN0YXJ0RXNjYWxhdGlvbk1vbml0b3JpbmciLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwic2V0Tm90aWZpY2F0aW9uQ2hhbm5lbCIsImNoYW5uZWwiLCJzZXQiLCJpZCIsImxvZ2dlciIsImluZm8iLCJMb2dMZXZlbCIsIklORk8iLCJ0eXBlIiwiZW5hYmxlZCIsImxldmVscyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwic2V0RXNjYWxhdGlvblJ1bGUiLCJydWxlIiwibGV2ZWwiLCJjb25kaXRpb25zIiwiZHVyYXRpb24iLCJzZXRBbGVydFJ1bGUiLCJtZXRyaWNOYW1lIiwidGhyZXNob2xkIiwicnVsZUlkIiwidmFsdWUiLCJtZXNzYWdlIiwiZ2V0IiwiZXhpc3RpbmdBbGVydCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbmQiLCJhbGVydCIsInN0YXR1cyIsImNvb2xkb3duRW5kIiwiRGF0ZSIsInRyaWdnZXJlZEF0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJjb29sZG93bk1pbnV0ZXMiLCJnZW5lcmF0ZUFsZXJ0SWQiLCJydWxlTmFtZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInRvSVNPU3RyaW5nIiwibm90aWZpY2F0aW9uc1NlbnQiLCJ0YWdzIiwibWV0YWRhdGEiLCJzZW5kTm90aWZpY2F0aW9ucyIsImNoYW5uZWxzIiwic3RvcmVBbGVydCIsIndhcm4iLCJXQVJOIiwiYWxlcnRJZCIsInVzZXJJZCIsImFja25vd2xlZGdlZEF0IiwiYWNrbm93bGVkZ2VkQnkiLCJ1cGRhdGVBbGVydCIsInJlc29sdmVkQXQiLCJyZXNvbHZlZEJ5IiwiZGVsZXRlIiwiY2FsY3VsYXRlRHVyYXRpb24iLCJjaGFubmVsSWRzIiwibm90aWZpY2F0aW9ucyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwibWFwIiwiY2hhbm5lbElkIiwic2VuZE5vdGlmaWNhdGlvbiIsImZvckVhY2giLCJyZXN1bHQiLCJpbmRleCIsInB1c2giLCJlcnJvciIsIkVSUk9SIiwicmVhc29uIiwiaW5jbHVkZXMiLCJyYXRlTGltaXQiLCJjaGVja1JhdGVMaW1pdCIsInN0YXJ0VGltZSIsIm5vdyIsInN1Y2Nlc3MiLCJzZW5kRW1haWxOb3RpZmljYXRpb24iLCJzZW5kU2xhY2tOb3RpZmljYXRpb24iLCJzZW5kV2ViaG9va05vdGlmaWNhdGlvbiIsInNlbmRTTVNOb3RpZmljYXRpb24iLCJzZW5kTG9nTm90aWZpY2F0aW9uIiwiRXJyb3IiLCJlcnIiLCJub3RpZmljYXRpb25Mb2ciLCJnZW5lcmF0ZU5vdGlmaWNhdGlvbklkIiwiY2hhbm5lbFR5cGUiLCJzZW50QXQiLCJyZXNwb25zZVRpbWUiLCJjaGVja0VzY2FsYXRpb25zIiwiZXNjYWxhdGlvblJ1bGVJZCIsImVzY2FsYXRpb25SdWxlIiwic2hvdWxkRXNjYWxhdGUiLCJlc2NhbGF0ZUFsZXJ0IiwiYWxlcnRBZ2UiLCJnZXRUaW1lIiwicmVxdWlyZWREdXJhdGlvbiIsImVzY2FsYXRlZEF0Iiwib3JpZ2luYWxMZXZlbCIsImFjdGlvbnMiLCJlc2NhbGF0ZVRvTGV2ZWwiLCJlc2NhbGF0ZWRGcm9tIiwibm90aWZ5Q2hhbm5lbHMiLCJhc3NpZ25Ub1VzZXIiLCJhc3NpZ25lZFRvIiwibmV3TGV2ZWwiLCJ0byIsImNvbmZpZyIsInN1YmplY3QiLCJ0b1VwcGVyQ2FzZSIsIndlYmhvb2siLCJ3ZWJob29rVXJsIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRpbWVzdGFtcCIsInNvdXJjZSIsIm9rIiwic3RhdHVzVGV4dCIsInBob25lTnVtYmVyIiwibG9nTGV2ZWwiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiQUxFUlRfV0VCSE9PS19VUkwiLCJtYXhQZXJIb3VyIiwibWF4UGVyRGF5Iiwic2V0SW50ZXJ2YWwiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJzdGFydCIsImVuZCIsInJvdW5kIiwic3VwYWJhc2UiLCJnZXRTdXBhYmFzZUNsaWVudCIsImluc2VydCIsInJ1bGVfaWQiLCJydWxlX25hbWUiLCJtZXRyaWNfbmFtZSIsInRyaWdnZXJlZF9hdCIsImFja25vd2xlZGdlZF9hdCIsImFja25vd2xlZGdlZF9ieSIsInJlc29sdmVkX2F0IiwicmVzb2x2ZWRfYnkiLCJlc2NhbGF0ZWRfYXQiLCJlc2NhbGF0ZWRfZnJvbSIsIm5vdGlmaWNhdGlvbnNfc2VudCIsInVwZGF0ZSIsImVxIiwiZGVzdHJveSIsImNsZWFySW50ZXJ2YWwiLCJiaW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsK0NBQStDO0FBQy9DLHNDQUFzQzs7Ozs7Ozs7Ozs7O0lBTzFCQSxVQUFVO2VBQVZBOztJQWtCQUMsV0FBVztlQUFYQTs7SUE0RkNDLHFCQUFxQjtlQUFyQkE7O0lBdEdEQyxnQkFBZ0I7ZUFBaEJBOztJQTRwQkNDLGdCQUFnQjtlQUFoQkE7O0lBSkFDLHFCQUFxQjtlQUFyQkE7O0lBS0FDLFlBQVk7ZUFBWkE7O0lBRkFDLFlBQVk7ZUFBWkE7Ozt3QkF4cUJpQzswQkFDWjtBQUkzQixJQUFBLEFBQUtQLG9DQUFBQTs7Ozs7V0FBQUE7O0FBUUwsSUFBQSxBQUFLRywwQ0FBQUE7Ozs7Ozs7V0FBQUE7O0FBVUwsSUFBQSxBQUFLRixxQ0FBQUE7Ozs7O1dBQUFBOztBQTRGTCxNQUFNQztJQVFYTSxhQUFjO2FBTk5DLGFBQXFDLElBQUlDO2FBQ3pDQyx1QkFBeUQsSUFBSUQ7YUFDN0RFLGtCQUErQyxJQUFJRjthQUNuREcsZUFBbUMsSUFBSUg7YUFDdkNJLHFCQUE0QztRQUdsRCxJQUFJLENBQUNDLHlCQUF5QjtRQUM5QixJQUFJLENBQUNDLHNCQUFzQjtRQUMzQixJQUFJLENBQUNDLHlCQUF5QjtJQUNoQztJQUVBLE9BQU9DLGNBQXFDO1FBQzFDLElBQUksQ0FBQ2hCLHNCQUFzQmlCLFFBQVEsRUFBRTtZQUNuQ2pCLHNCQUFzQmlCLFFBQVEsR0FBRyxJQUFJakI7UUFDdkM7UUFDQSxPQUFPQSxzQkFBc0JpQixRQUFRO0lBQ3ZDO0lBRUE7O0dBRUMsR0FDREMsdUJBQXVC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