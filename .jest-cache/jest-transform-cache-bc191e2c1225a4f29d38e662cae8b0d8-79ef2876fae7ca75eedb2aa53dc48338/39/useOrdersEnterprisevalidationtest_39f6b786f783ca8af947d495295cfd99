e745d33110bf21ea84f2fe586a88f77e
// ===================================
// PINTEYA E-COMMERCE - VALIDATION TESTS
// Pruebas específicas para validación de datos en useOrdersEnterprise
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _globals = require("@jest/globals");
const _useOrdersEnterprise = require("../../hooks/useOrdersEnterprise");
// ===================================
// MOCKS
// ===================================
const mockFetch = _globals.jest.fn();
global.fetch = mockFetch;
const mockConsoleWarn = _globals.jest.spyOn(console, 'warn').mockImplementation(()=>{});
// Datos de prueba con valores problemáticos
const mockOrdersWithInvalidData = [
    {
        id: 'order-1',
        order_number: 'ORD-001',
        status: 'pending',
        total: undefined,
        created_at: '2024-01-01T10:00:00Z'
    },
    {
        id: 'order-2',
        order_number: 'ORD-002',
        status: 'confirmed',
        total: NaN,
        created_at: '2024-01-02T10:00:00Z'
    },
    {
        id: 'order-3',
        order_number: 'ORD-003',
        status: 'shipped',
        total: 'invalid',
        created_at: '2024-01-03T10:00:00Z'
    },
    {
        id: 'order-4',
        order_number: 'ORD-004',
        status: 'delivered',
        total: 15000,
        created_at: '2024-01-04T10:00:00Z'
    },
    {
        id: 'order-5',
        order_number: 'ORD-005',
        status: 'cancelled',
        total: 25000,
        created_at: '2024-01-05T10:00:00Z'
    }
];
const mockApiResponse = {
    data: {
        orders: mockOrdersWithInvalidData,
        pagination: {
            page: 1,
            limit: 20,
            total: mockOrdersWithInvalidData.length,
            totalPages: 1,
            hasNextPage: false,
            hasPreviousPage: false
        },
        filters: {}
    }
};
// ===================================
// SETUP Y CLEANUP
// ===================================
(0, _globals.beforeEach)(()=>{
    _globals.jest.clearAllMocks();
    mockFetch.mockResolvedValue({
        ok: true,
        status: 200,
        json: async ()=>mockApiResponse
    });
});
(0, _globals.afterEach)(()=>{
    _globals.jest.clearAllTimers();
});
// ===================================
// TESTS DE VALIDACIÓN
// ===================================
(0, _globals.describe)('useOrdersEnterprise - Validación de Datos', ()=>{
    (0, _globals.it)('debe manejar valores undefined en total sin retornar NaN', async ()=>{
        // Arrange
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        // Wait for initial fetch
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        (0, _globals.expect)(totalRevenue).not.toBeNaN();
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
        (0, _globals.expect)(typeof totalRevenue).toBe('number');
        (0, _globals.expect)(typeof avgOrderValue).toBe('number');
        // Solo debe contar la orden válida (order-4: 15000)
        (0, _globals.expect)(totalRevenue).toBe(15000);
        (0, _globals.expect)(avgOrderValue).toBe(15000);
        // Debe mostrar warnings para valores inválidos
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', undefined);
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', NaN);
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', 'invalid');
    });
    (0, _globals.it)('debe excluir órdenes canceladas del cálculo', async ()=>{
        // Arrange
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        // No debe incluir la orden cancelada (order-5: 25000)
        (0, _globals.expect)(totalRevenue).toBe(15000); // Solo order-4
        (0, _globals.expect)(avgOrderValue).toBe(15000); // Solo order-4
    });
    (0, _globals.it)('debe retornar 0 cuando no hay órdenes válidas', async ()=>{
        // Arrange - Mock con solo órdenes inválidas
        const invalidOrdersOnly = mockOrdersWithInvalidData.filter((order)=>order.status === 'cancelled' || order.total === undefined || isNaN(order.total) || typeof order.total === 'string');
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: async ()=>({
                    data: {
                        orders: invalidOrdersOnly,
                        pagination: {
                            page: 1,
                            limit: 20,
                            total: invalidOrdersOnly.length,
                            totalPages: 1
                        },
                        filters: {}
                    }
                })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        (0, _globals.expect)(totalRevenue).toBe(0);
        (0, _globals.expect)(avgOrderValue).toBe(0);
        (0, _globals.expect)(totalRevenue).not.toBeNaN();
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
    });
    (0, _globals.it)('debe redondear correctamente el valor promedio', async ()=>{
        // Arrange - Mock con valores que requieren redondeo
        const ordersWithDecimals = [
            {
                id: 'order-1',
                status: 'delivered',
                total: 33.33,
                created_at: '2024-01-01T10:00:00Z'
            },
            {
                id: 'order-2',
                status: 'delivered',
                total: 33.33,
                created_at: '2024-01-02T10:00:00Z'
            },
            {
                id: 'order-3',
                status: 'delivered',
                total: 33.34,
                created_at: '2024-01-03T10:00:00Z'
            }
        ];
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: async ()=>({
                    data: {
                        orders: ordersWithDecimals,
                        pagination: {
                            page: 1,
                            limit: 20,
                            total: ordersWithDecimals.length,
                            totalPages: 1
                        },
                        filters: {}
                    }
                })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        // (33.33 + 33.33 + 33.34) / 3 = 33.333... -> redondeado a 33.33
        (0, _globals.expect)(avgOrderValue).toBe(33.33);
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcdXNlT3JkZXJzRW50ZXJwcmlzZS12YWxpZGF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIFZBTElEQVRJT04gVEVTVFNcbi8vIFBydWViYXMgZXNwZWPDrWZpY2FzIHBhcmEgdmFsaWRhY2nDs24gZGUgZGF0b3MgZW4gdXNlT3JkZXJzRW50ZXJwcmlzZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgcmVuZGVySG9vaywgYWN0LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyB1c2VPcmRlcnNFbnRlcnByaXNlIH0gZnJvbSAnQC9ob29rcy91c2VPcmRlcnNFbnRlcnByaXNlJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1PQ0tTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBtb2NrRmV0Y2ggPSBqZXN0LmZuKCk7XG5nbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2g7XG5cbmNvbnN0IG1vY2tDb25zb2xlV2FybiA9IGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4vLyBEYXRvcyBkZSBwcnVlYmEgY29uIHZhbG9yZXMgcHJvYmxlbcOhdGljb3NcbmNvbnN0IG1vY2tPcmRlcnNXaXRoSW52YWxpZERhdGEgPSBbXG4gIHtcbiAgICBpZDogJ29yZGVyLTEnLFxuICAgIG9yZGVyX251bWJlcjogJ09SRC0wMDEnLFxuICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgIHRvdGFsOiB1bmRlZmluZWQsIC8vIFZhbG9yIHByb2JsZW3DoXRpY29cbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQxMDowMDowMFonXG4gIH0sXG4gIHtcbiAgICBpZDogJ29yZGVyLTInLCBcbiAgICBvcmRlcl9udW1iZXI6ICdPUkQtMDAyJyxcbiAgICBzdGF0dXM6ICdjb25maXJtZWQnLFxuICAgIHRvdGFsOiBOYU4sIC8vIFZhbG9yIHByb2JsZW3DoXRpY29cbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMlQxMDowMDowMFonXG4gIH0sXG4gIHtcbiAgICBpZDogJ29yZGVyLTMnLFxuICAgIG9yZGVyX251bWJlcjogJ09SRC0wMDMnLCBcbiAgICBzdGF0dXM6ICdzaGlwcGVkJyxcbiAgICB0b3RhbDogJ2ludmFsaWQnLCAvLyBWYWxvciBwcm9ibGVtw6F0aWNvXG4gICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDNUMTA6MDA6MDBaJ1xuICB9LFxuICB7XG4gICAgaWQ6ICdvcmRlci00JyxcbiAgICBvcmRlcl9udW1iZXI6ICdPUkQtMDA0JyxcbiAgICBzdGF0dXM6ICdkZWxpdmVyZWQnLFxuICAgIHRvdGFsOiAxNTAwMCwgLy8gVmFsb3IgdsOhbGlkb1xuICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTA0VDEwOjAwOjAwWidcbiAgfSxcbiAge1xuICAgIGlkOiAnb3JkZXItNScsXG4gICAgb3JkZXJfbnVtYmVyOiAnT1JELTAwNScsXG4gICAgc3RhdHVzOiAnY2FuY2VsbGVkJyxcbiAgICB0b3RhbDogMjUwMDAsIC8vIFZhbG9yIHbDoWxpZG8gcGVybyBjYW5jZWxhZG9cbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wNVQxMDowMDowMFonXG4gIH1cbl07XG5cbmNvbnN0IG1vY2tBcGlSZXNwb25zZSA9IHtcbiAgZGF0YToge1xuICAgIG9yZGVyczogbW9ja09yZGVyc1dpdGhJbnZhbGlkRGF0YSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlOiAxLFxuICAgICAgbGltaXQ6IDIwLFxuICAgICAgdG90YWw6IG1vY2tPcmRlcnNXaXRoSW52YWxpZERhdGEubGVuZ3RoLFxuICAgICAgdG90YWxQYWdlczogMSxcbiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICAgIGhhc1ByZXZpb3VzUGFnZTogZmFsc2VcbiAgICB9LFxuICAgIGZpbHRlcnM6IHt9XG4gIH1cbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTRVRVUCBZIENMRUFOVVBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmJlZm9yZUVhY2goKCkgPT4ge1xuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgXG4gIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgb2s6IHRydWUsXG4gICAgc3RhdHVzOiAyMDAsXG4gICAganNvbjogYXN5bmMgKCkgPT4gbW9ja0FwaVJlc3BvbnNlXG4gIH0pO1xufSk7XG5cbmFmdGVyRWFjaCgoKSA9PiB7XG4gIGplc3QuY2xlYXJBbGxUaW1lcnMoKTtcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVEVTVFMgREUgVkFMSURBQ0nDk05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlc2NyaWJlKCd1c2VPcmRlcnNFbnRlcnByaXNlIC0gVmFsaWRhY2nDs24gZGUgRGF0b3MnLCAoKSA9PiB7XG4gIGl0KCdkZWJlIG1hbmVqYXIgdmFsb3JlcyB1bmRlZmluZWQgZW4gdG90YWwgc2luIHJldG9ybmFyIE5hTicsIGFzeW5jICgpID0+IHtcbiAgICAvLyBBcnJhbmdlXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzRW50ZXJwcmlzZSgpKTtcblxuICAgIC8vIFdhaXQgZm9yIGluaXRpYWwgZmV0Y2hcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIC8vIEFjdFxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHJlc3VsdC5jdXJyZW50LmdldFRvdGFsUmV2ZW51ZSgpO1xuICAgIGNvbnN0IGF2Z09yZGVyVmFsdWUgPSByZXN1bHQuY3VycmVudC5nZXRBdmVyYWdlT3JkZXJWYWx1ZSgpO1xuXG4gICAgLy8gQXNzZXJ0XG4gICAgZXhwZWN0KHRvdGFsUmV2ZW51ZSkubm90LnRvQmVOYU4oKTtcbiAgICBleHBlY3QoYXZnT3JkZXJWYWx1ZSkubm90LnRvQmVOYU4oKTtcbiAgICBleHBlY3QodHlwZW9mIHRvdGFsUmV2ZW51ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBhdmdPcmRlclZhbHVlKS50b0JlKCdudW1iZXInKTtcbiAgICBcbiAgICAvLyBTb2xvIGRlYmUgY29udGFyIGxhIG9yZGVuIHbDoWxpZGEgKG9yZGVyLTQ6IDE1MDAwKVxuICAgIGV4cGVjdCh0b3RhbFJldmVudWUpLnRvQmUoMTUwMDApO1xuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS50b0JlKDE1MDAwKTtcbiAgICBcbiAgICAvLyBEZWJlIG1vc3RyYXIgd2FybmluZ3MgcGFyYSB2YWxvcmVzIGludsOhbGlkb3NcbiAgICBleHBlY3QobW9ja0NvbnNvbGVXYXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICdbdXNlT3JkZXJzRW50ZXJwcmlzZV0gSW52YWxpZCBvcmRlciB0b3RhbCBkZXRlY3RlZDonLCBcbiAgICAgIHVuZGVmaW5lZFxuICAgICk7XG4gICAgZXhwZWN0KG1vY2tDb25zb2xlV2FybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAnW3VzZU9yZGVyc0VudGVycHJpc2VdIEludmFsaWQgb3JkZXIgdG90YWwgZGV0ZWN0ZWQ6JywgXG4gICAgICBOYU5cbiAgICApO1xuICAgIGV4cGVjdChtb2NrQ29uc29sZVdhcm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgJ1t1c2VPcmRlcnNFbnRlcnByaXNlXSBJbnZhbGlkIG9yZGVyIHRvdGFsIGRldGVjdGVkOicsIFxuICAgICAgJ2ludmFsaWQnXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ2RlYmUgZXhjbHVpciDDs3JkZW5lcyBjYW5jZWxhZGFzIGRlbCBjw6FsY3VsbycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBBcnJhbmdlXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzRW50ZXJwcmlzZSgpKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmxvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgLy8gQWN0XG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gcmVzdWx0LmN1cnJlbnQuZ2V0VG90YWxSZXZlbnVlKCk7XG4gICAgY29uc3QgYXZnT3JkZXJWYWx1ZSA9IHJlc3VsdC5jdXJyZW50LmdldEF2ZXJhZ2VPcmRlclZhbHVlKCk7XG5cbiAgICAvLyBBc3NlcnRcbiAgICAvLyBObyBkZWJlIGluY2x1aXIgbGEgb3JkZW4gY2FuY2VsYWRhIChvcmRlci01OiAyNTAwMClcbiAgICBleHBlY3QodG90YWxSZXZlbnVlKS50b0JlKDE1MDAwKTsgLy8gU29sbyBvcmRlci00XG4gICAgZXhwZWN0KGF2Z09yZGVyVmFsdWUpLnRvQmUoMTUwMDApOyAvLyBTb2xvIG9yZGVyLTRcbiAgfSk7XG5cbiAgaXQoJ2RlYmUgcmV0b3JuYXIgMCBjdWFuZG8gbm8gaGF5IMOzcmRlbmVzIHbDoWxpZGFzJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIEFycmFuZ2UgLSBNb2NrIGNvbiBzb2xvIMOzcmRlbmVzIGludsOhbGlkYXNcbiAgICBjb25zdCBpbnZhbGlkT3JkZXJzT25seSA9IG1vY2tPcmRlcnNXaXRoSW52YWxpZERhdGEuZmlsdGVyKG9yZGVyID0+IFxuICAgICAgb3JkZXIuc3RhdHVzID09PSAnY2FuY2VsbGVkJyB8fCBvcmRlci50b3RhbCA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKG9yZGVyLnRvdGFsKSB8fCB0eXBlb2Ygb3JkZXIudG90YWwgPT09ICdzdHJpbmcnXG4gICAgKTtcbiAgICBcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBvcmRlcnM6IGludmFsaWRPcmRlcnNPbmx5LFxuICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDIwLCB0b3RhbDogaW52YWxpZE9yZGVyc09ubHkubGVuZ3RoLCB0b3RhbFBhZ2VzOiAxIH0sXG4gICAgICAgICAgZmlsdGVyczoge31cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0VudGVycHJpc2UoKSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sb2FkaW5nKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIC8vIEFjdFxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHJlc3VsdC5jdXJyZW50LmdldFRvdGFsUmV2ZW51ZSgpO1xuICAgIGNvbnN0IGF2Z09yZGVyVmFsdWUgPSByZXN1bHQuY3VycmVudC5nZXRBdmVyYWdlT3JkZXJWYWx1ZSgpO1xuXG4gICAgLy8gQXNzZXJ0XG4gICAgZXhwZWN0KHRvdGFsUmV2ZW51ZSkudG9CZSgwKTtcbiAgICBleHBlY3QoYXZnT3JkZXJWYWx1ZSkudG9CZSgwKTtcbiAgICBleHBlY3QodG90YWxSZXZlbnVlKS5ub3QudG9CZU5hTigpO1xuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS5ub3QudG9CZU5hTigpO1xuICB9KTtcblxuICBpdCgnZGViZSByZWRvbmRlYXIgY29ycmVjdGFtZW50ZSBlbCB2YWxvciBwcm9tZWRpbycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBBcnJhbmdlIC0gTW9jayBjb24gdmFsb3JlcyBxdWUgcmVxdWllcmVuIHJlZG9uZGVvXG4gICAgY29uc3Qgb3JkZXJzV2l0aERlY2ltYWxzID0gW1xuICAgICAgeyBpZDogJ29yZGVyLTEnLCBzdGF0dXM6ICdkZWxpdmVyZWQnLCB0b3RhbDogMzMuMzMsIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDEwOjAwOjAwWicgfSxcbiAgICAgIHsgaWQ6ICdvcmRlci0yJywgc3RhdHVzOiAnZGVsaXZlcmVkJywgdG90YWw6IDMzLjMzLCBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMlQxMDowMDowMFonIH0sXG4gICAgICB7IGlkOiAnb3JkZXItMycsIHN0YXR1czogJ2RlbGl2ZXJlZCcsIHRvdGFsOiAzMy4zNCwgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDNUMTA6MDA6MDBaJyB9XG4gICAgXTtcbiAgICBcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBvcmRlcnM6IG9yZGVyc1dpdGhEZWNpbWFscyxcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiAyMCwgdG90YWw6IG9yZGVyc1dpdGhEZWNpbWFscy5sZW5ndGgsIHRvdGFsUGFnZXM6IDEgfSxcbiAgICAgICAgICBmaWx0ZXJzOiB7fVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pO1xuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzRW50ZXJwcmlzZSgpKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmxvYWRpbmcpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgLy8gQWN0XG4gICAgY29uc3QgYXZnT3JkZXJWYWx1ZSA9IHJlc3VsdC5jdXJyZW50LmdldEF2ZXJhZ2VPcmRlclZhbHVlKCk7XG5cbiAgICAvLyBBc3NlcnRcbiAgICAvLyAoMzMuMzMgKyAzMy4zMyArIDMzLjM0KSAvIDMgPSAzMy4zMzMuLi4gLT4gcmVkb25kZWFkbyBhIDMzLjMzXG4gICAgZXhwZWN0KGF2Z09yZGVyVmFsdWUpLnRvQmUoMzMuMzMpO1xuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS5ub3QudG9CZU5hTigpO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbIm1vY2tGZXRjaCIsImplc3QiLCJmbiIsImdsb2JhbCIsImZldGNoIiwibW9ja0NvbnNvbGVXYXJuIiwic3B5T24iLCJjb25zb2xlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwibW9ja09yZGVyc1dpdGhJbnZhbGlkRGF0YSIsImlkIiwib3JkZXJfbnVtYmVyIiwic3RhdHVzIiwidG90YWwiLCJ1bmRlZmluZWQiLCJjcmVhdGVkX2F0IiwiTmFOIiwibW9ja0FwaVJlc3BvbnNlIiwiZGF0YSIsIm9yZGVycyIsInBhZ2luYXRpb24iLCJwYWdlIiwibGltaXQiLCJsZW5ndGgiLCJ0b3RhbFBhZ2VzIiwiaGFzTmV4dFBhZ2UiLCJoYXNQcmV2aW91c1BhZ2UiLCJmaWx0ZXJzIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIm9rIiwianNvbiIsImFmdGVyRWFjaCIsImNsZWFyQWxsVGltZXJzIiwiZGVzY3JpYmUiLCJpdCIsInJlc3VsdCIsInJlbmRlckhvb2siLCJ1c2VPcmRlcnNFbnRlcnByaXNlIiwid2FpdEZvciIsImV4cGVjdCIsImN1cnJlbnQiLCJsb2FkaW5nIiwidG9CZSIsInRvdGFsUmV2ZW51ZSIsImdldFRvdGFsUmV2ZW51ZSIsImF2Z09yZGVyVmFsdWUiLCJnZXRBdmVyYWdlT3JkZXJWYWx1ZSIsIm5vdCIsInRvQmVOYU4iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImludmFsaWRPcmRlcnNPbmx5IiwiZmlsdGVyIiwib3JkZXIiLCJpc05hTiIsIm9yZGVyc1dpdGhEZWNpbWFscyJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLHdDQUF3QztBQUN4QyxzRUFBc0U7QUFDdEUsc0NBQXNDOzs7Ozt1QkFFRzt5QkFDbUI7cUNBRXhCO0FBRXBDLHNDQUFzQztBQUN0QyxRQUFRO0FBQ1Isc0NBQXNDO0FBRXRDLE1BQU1BLFlBQVlDLGFBQUksQ0FBQ0MsRUFBRTtBQUN6QkMsT0FBT0MsS0FBSyxHQUFHSjtBQUVmLE1BQU1LLGtCQUFrQkosYUFBSSxDQUFDSyxLQUFLLENBQUNDLFNBQVMsUUFBUUMsa0JBQWtCLENBQUMsS0FBTztBQUU5RSw0Q0FBNEM7QUFDNUMsTUFBTUMsNEJBQTRCO0lBQ2hDO1FBQ0VDLElBQUk7UUFDSkMsY0FBYztRQUNkQyxRQUFRO1FBQ1JDLE9BQU9DO1FBQ1BDLFlBQVk7SUFDZDtJQUNBO1FBQ0VMLElBQUk7UUFDSkMsY0FBYztRQUNkQyxRQUFRO1FBQ1JDLE9BQU9HO1FBQ1BELFlBQVk7SUFDZDtJQUNBO1FBQ0VMLElBQUk7UUFDSkMsY0FBYztRQUNkQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEUsWUFBWTtJQUNkO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxjQUFjO1FBQ2RDLFFBQVE7UUFDUkMsT0FBTztRQUNQRSxZQUFZO0lBQ2Q7SUFDQTtRQUNFTCxJQUFJO1FBQ0pDLGNBQWM7UUFDZEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BFLFlBQVk7SUFDZDtDQUNEO0FBRUQsTUFBTUUsa0JBQWtCO0lBQ3RCQyxNQUFNO1FBQ0pDLFFBQVFWO1FBQ1JXLFlBQVk7WUFDVkMsTUFBTTtZQUNO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