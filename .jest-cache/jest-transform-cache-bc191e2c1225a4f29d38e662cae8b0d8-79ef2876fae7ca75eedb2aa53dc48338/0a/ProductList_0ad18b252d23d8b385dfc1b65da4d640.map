{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductList.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport { AdminDataTable } from '../ui/AdminDataTable';\nimport { ProductFilters } from './ProductFilters';\nimport { ProductActions, ProductRowActions } from './ProductActions';\nimport { useProductList } from '@/hooks/admin/useProductList';\nimport { cn } from '@/lib/utils';\nimport { Package, AlertCircle, CheckCircle, Clock } from 'lucide-react';\n\ninterface Product {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  stock: number;\n  category_id: string;\n  category_name?: string;\n  image_url?: string;\n  status: 'active' | 'inactive' | 'draft';\n  created_at: string;\n  updated_at: string;\n}\n\ninterface ProductListProps {\n  className?: string;\n}\n\n// Status Badge Component\nfunction StatusBadge({ status }: { status: Product['status'] }) {\n  const statusConfig = {\n    active: {\n      label: 'Activo',\n      icon: CheckCircle,\n      className: 'bg-green-100 text-green-800 border-green-200'\n    },\n    inactive: {\n      label: 'Inactivo',\n      icon: AlertCircle,\n      className: 'bg-red-100 text-red-800 border-red-200'\n    },\n    draft: {\n      label: 'Borrador',\n      icon: Clock,\n      className: 'bg-yellow-100 text-yellow-800 border-yellow-200'\n    }\n  };\n\n  const config = statusConfig[status];\n  const Icon = config && config.icon ? config.icon : Package;\n\n  return (\n    <span className={cn(\n      \"inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full border\",\n      config && config.className ? config.className : 'bg-gray-100 text-gray-800 border-gray-200'\n    )}>\n      <Icon className=\"w-3 h-3\" />\n      <span>{config && config.label ? config.label : 'Estado'}</span>\n    </span>\n  );\n}\n\n// Stock Badge Component\nfunction StockBadge({ stock }: { stock: number }) {\n  if (stock === 0) {\n    return (\n      <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full\">\n        Sin stock\n      </span>\n    );\n  }\n  \n  if (stock <= 10) {\n    return (\n      <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full\">\n        Stock bajo\n      </span>\n    );\n  }\n  \n  return (\n    <span className=\"text-sm text-gray-900\">\n      {stock} unidades\n    </span>\n  );\n}\n\nexport function ProductList({ className }: ProductListProps) {\n  console.log('ðŸ”§ ProductList: Componente iniciado');\n  const router = useRouter();\n  const [selectedProducts, setSelectedProducts] = useState<Product[]>([]);\n\n  const {\n    products,\n    isLoading,\n    error\n  } = useProductList();\n\n  // Valores temporales para compatibilidad\n  const total = 53; // Total real de la base de datos\n  const currentPage = 1;\n  const currentPageSize = 25;\n  const params = { filters: {} };\n  const updateFilters = () => {};\n  const clearFilters = () => {};\n  const goToPage = () => {};\n  const changePageSize = () => {};\n  const deleteProduct = () => {};\n  const bulkDelete = () => {};\n  const isDeleting = false;\n  const isBulkDeleting = false;\n\n  // Table columns configuration\n  const columns = [\n    {\n      key: 'image_url',\n      title: 'Imagen',\n      width: '80px',\n      render: (imageUrl: string, product: Product) => (\n        <div className=\"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center\">\n          {imageUrl ? (\n            <Image\n              src={imageUrl}\n              alt={product.name}\n              width={48}\n              height={48}\n              className=\"object-cover\"\n            />\n          ) : (\n            <Package className=\"w-6 h-6 text-gray-400\" />\n          )}\n        </div>\n      )\n    },\n    {\n      key: 'name',\n      title: 'Producto',\n      sortable: true,\n      render: (name: string, product: Product) => (\n        <div>\n          <div className=\"font-medium text-gray-900\">{name}</div>\n          <div className=\"text-sm text-gray-500 truncate max-w-xs\">\n            {product.description}\n          </div>\n        </div>\n      )\n    },\n    {\n      key: 'category_name',\n      title: 'CategorÃ­a',\n      sortable: true,\n      render: (categoryName: string) => (\n        <span className=\"text-sm text-gray-900\">\n          {categoryName || 'Sin categorÃ­a'}\n        </span>\n      )\n    },\n    {\n      key: 'price',\n      title: 'Precio',\n      align: 'right' as const,\n      sortable: true,\n      render: (price: number) => (\n        <span className=\"font-medium text-gray-900\">\n          ${price.toLocaleString('es-AR')}\n        </span>\n      )\n    },\n    {\n      key: 'stock',\n      title: 'Stock',\n      align: 'center' as const,\n      sortable: true,\n      render: (stock: number) => <StockBadge stock={stock} />\n    },\n    {\n      key: 'status',\n      title: 'Estado',\n      align: 'center' as const,\n      sortable: true,\n      render: (status: Product['status']) => <StatusBadge status={status} />\n    },\n    {\n      key: 'created_at',\n      title: 'Creado',\n      sortable: true,\n      render: (createdAt: string) => (\n        <span className=\"text-sm text-gray-500\">\n          {new Date(createdAt).toLocaleDateString('es-AR')}\n        </span>\n      )\n    },\n    {\n      key: 'actions',\n      title: 'Acciones',\n      width: '60px',\n      render: (_: any, product: Product) => (\n        <ProductRowActions\n          product={product}\n          onView={(id) => router.push(`/admin/products/${id}`)}\n          onEdit={(id) => router.push(`/admin/products/${id}/edit`)}\n          onDelete={handleDeleteProduct}\n          onDuplicate={handleDuplicateProduct}\n          isLoading={isDeleting}\n        />\n      )\n    }\n  ];\n\n  // Event handlers\n  const handleDeleteProduct = async (productId: string) => {\n    const result = await deleteProduct(productId);\n    if (!result.success) {\n      // Handle error (show toast, etc.)\n      console.error('Error deleting product:', result.error);\n    }\n  };\n\n  const handleBulkDelete = async (productIds: string[]) => {\n    const result = await bulkDelete(productIds);\n    if (result.success) {\n      setSelectedProducts([]);\n    } else {\n      // Handle error\n      console.error('Error bulk deleting products:', result.error);\n    }\n  };\n\n  const handleDuplicateProduct = (productId: string) => {\n    // TODO: Implement product duplication\n    console.log('Duplicate product:', productId);\n  };\n\n  const handleCreateProduct = () => {\n    router.push('/admin/products/new');\n  };\n\n  const handleExportProducts = () => {\n    // TODO: Implement export functionality\n    console.log('Export products');\n  };\n\n  const handleImportProducts = () => {\n    // TODO: Implement import functionality\n    console.log('Import products');\n  };\n\n  const handleRowClick = (product: Product) => {\n    router.push(`/admin/products/${product.id}`);\n  };\n\n  // Pagination configuration\n  const paginationConfig = {\n    page: currentPage,\n    pageSize: currentPageSize,\n    total,\n    onPageChange: goToPage,\n    onPageSizeChange: changePageSize\n  };\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n        <div className=\"flex items-center space-x-3\">\n          <AlertCircle className=\"w-6 h-6 text-red-600\" />\n          <div>\n            <h3 className=\"text-lg font-medium text-red-800\">\n              Error al cargar productos\n            </h3>\n            <p className=\"text-red-700 mt-1\">\n              {error.message}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Filters */}\n      <ProductFilters\n        filters={params.filters || {}}\n        onFiltersChange={updateFilters}\n        onClearFilters={clearFilters}\n        categories={[]} // TODO: Load categories from API\n      />\n\n      {/* Actions */}\n      <ProductActions\n        selectedProducts={selectedProducts}\n        onCreateProduct={handleCreateProduct}\n        onBulkDelete={handleBulkDelete}\n        onExportProducts={handleExportProducts}\n        onImportProducts={handleImportProducts}\n        isLoading={isDeleting || isBulkDeleting}\n      />\n\n      {/* Data Table */}\n      <AdminDataTable\n        data={Array.isArray(products) ? products : []}\n        columns={columns}\n        loading={isLoading}\n        pagination={paginationConfig}\n        selectable\n        onRowClick={handleRowClick}\n        onSelectionChange={setSelectedProducts}\n        className=\"shadow-sm\"\n      />\n\n      {/* Summary */}\n      {!isLoading && (\n        <div className=\"text-sm text-gray-600 text-center\">\n          Mostrando {products.length} de {total} productos\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["ProductList","StatusBadge","status","statusConfig","active","label","icon","CheckCircle","className","inactive","AlertCircle","draft","Clock","config","Icon","Package","span","cn","StockBadge","stock","console","log","router","useRouter","selectedProducts","setSelectedProducts","useState","products","isLoading","error","useProductList","total","currentPage","currentPageSize","params","filters","updateFilters","clearFilters","goToPage","changePageSize","deleteProduct","bulkDelete","isDeleting","isBulkDeleting","columns","key","title","width","render","imageUrl","product","div","Image","src","alt","name","height","sortable","description","categoryName","align","price","toLocaleString","createdAt","Date","toLocaleDateString","_","ProductRowActions","onView","id","push","onEdit","onDelete","handleDeleteProduct","onDuplicate","handleDuplicateProduct","productId","result","success","handleBulkDelete","productIds","handleCreateProduct","handleExportProducts","handleImportProducts","handleRowClick","paginationConfig","page","pageSize","onPageChange","onPageSizeChange","h3","p","message","ProductFilters","onFiltersChange","onClearFilters","categories","ProductActions","onCreateProduct","onBulkDelete","onExportProducts","onImportProducts","AdminDataTable","data","Array","isArray","loading","pagination","selectable","onRowClick","onSelectionChange","length"],"mappings":"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"}