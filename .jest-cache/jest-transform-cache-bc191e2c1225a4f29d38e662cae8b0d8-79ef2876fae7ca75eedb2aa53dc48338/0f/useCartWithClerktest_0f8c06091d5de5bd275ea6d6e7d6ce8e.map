{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useCartWithClerk.test.ts"],"sourcesContent":["/**\n * Tests completos para useCartWithClerk\n * Cubre funcionalidades de migración, persistencia y autenticación\n */\n\nimport React from 'react'\nimport { renderHook, act, waitFor } from '@testing-library/react'\nimport { Provider } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { useAuth } from '@/hooks/useAuth'\nimport cartReducer, { addItemToCart } from '@/redux/features/cart-slice'\nimport { useCartWithClerk } from '@/hooks/useCartWithClerk'\nimport * as cartPersistence from '@/redux/middleware/cartPersistence'\n\n// Mock para evitar problemas de dependencias\njest.mock('@/hooks/useAuth', () => ({\n  useAuth: jest.fn()\n}))\n\n// Mock cart persistence functions\njest.mock('@/redux/middleware/cartPersistence', () => ({\n  loadCartFromStorage: jest.fn(() => []),\n  clearCartFromStorage: jest.fn(),\n  migrateTemporaryCart: jest.fn(() => Promise.resolve(true)),\n  loadUserCart: jest.fn(() => Promise.resolve([])),\n  saveUserCart: jest.fn(() => Promise.resolve())\n}))\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(() => null),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn()\n}\nObject.defineProperty(window, 'localStorage', { value: localStorageMock })\n\n// Mock console.error to avoid noise in tests\nconst originalConsoleError = console.error\nbeforeAll(() => {\n  console.error = jest.fn()\n})\n\nafterAll(() => {\n  console.error = originalConsoleError\n})\n\n// Mock user data\nconst mockUser = {\n  id: 'user_123',\n  name: 'Juan Pérez',\n  email: 'juan@example.com'\n}\n\n// Mock product data\nconst mockProduct = {\n  id: 1,\n  name: 'Pintura Latex Interior',\n  price: 5000,\n  category: 'Pinturas'\n}\n\ndescribe('useCartWithClerk Hook', () => {\n  let store: any\n  const mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>\n  const mockCartPersistence = cartPersistence as jest.Mocked<typeof cartPersistence>\n\n  const renderHookWithStore = () => {\n    store = configureStore({\n      reducer: {\n        cartReducer\n      }\n    })\n\n    const wrapper = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(Provider, { store }, children)\n\n    return renderHook(() => useCartWithClerk(), { wrapper })\n  }\n\n  beforeEach(() => {\n    jest.clearAllMocks()\n    localStorageMock.getItem.mockReturnValue(null)\n    mockCartPersistence.loadCartFromStorage.mockReturnValue([])\n    mockCartPersistence.migrateTemporaryCart.mockResolvedValue(true)\n    mockCartPersistence.loadUserCart.mockResolvedValue([])\n    mockCartPersistence.saveUserCart.mockResolvedValue()\n  })\n\n  describe('Unauthenticated User', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: null,\n        isLoaded: true,\n        isSignedIn: false,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: null,\n        status: 'unauthenticated'\n      } as any)\n    })\n\n    it('should handle unauthenticated user correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(false)\n      expect(result.current.userId).toBeUndefined()\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n  })\n\n  describe('Authenticated User', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('should identify authenticated user correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(true)\n      expect(result.current.userId).toBe(mockUser.id)\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n\n    it('should handle cart changes for authenticated user', () => {\n      const { result } = renderHookWithStore()\n\n      // Verificar estado inicial\n      expect(result.current.isAuthenticated).toBe(true)\n      expect(result.current.cartItems).toHaveLength(0)\n\n      // Agregar item al carrito usando Redux dispatch\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      // Verificar que el item se agregó correctamente\n      expect(result.current.cartItems).toHaveLength(1)\n      expect(result.current.cartItems[0]).toEqual(expect.objectContaining({\n        id: mockProduct.id,\n        price: mockProduct.price\n      }))\n    })\n  })\n\n  describe('Loading State', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: null,\n        isLoaded: false,\n        isSignedIn: false,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: null,\n        status: 'loading'\n      } as any)\n    })\n\n    it('should handle loading state correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(false)\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n\n    it('should not trigger effects during loading', () => {\n      renderHookWithStore()\n\n      expect(mockCartPersistence.loadCartFromStorage).not.toHaveBeenCalled()\n      expect(mockCartPersistence.migrateTemporaryCart).not.toHaveBeenCalled()\n    })\n  })\n\n  describe('Cart Migration', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('should migrate temporary cart when user logs in', async () => {\n      const temporaryItems = [mockProduct]\n      mockCartPersistence.loadCartFromStorage.mockReturnValue(temporaryItems)\n      mockCartPersistence.loadUserCart.mockResolvedValue([])\n\n      const { result } = renderHookWithStore()\n\n      await waitFor(() => {\n        expect(mockCartPersistence.migrateTemporaryCart).toHaveBeenCalledWith(\n          temporaryItems,\n          mockUser.id\n        )\n      })\n\n      expect(mockCartPersistence.clearCartFromStorage).toHaveBeenCalled()\n      expect(mockCartPersistence.loadUserCart).toHaveBeenCalledWith(mockUser.id)\n    })\n\n    it('should load user cart after migration', async () => {\n      const userCartItems = [{ ...mockProduct, id: 2 }]\n      mockCartPersistence.loadUserCart.mockResolvedValue(userCartItems)\n\n      const { result } = renderHookWithStore()\n\n      await waitFor(() => {\n        expect(result.current.cartItems).toHaveLength(1)\n        expect(result.current.cartItems[0].id).toBe(2)\n      })\n    })\n\n    it('should handle migration errors gracefully', async () => {\n      mockCartPersistence.migrateTemporaryCart.mockRejectedValue(new Error('Migration failed'))\n\n      const { result } = renderHookWithStore()\n\n      await waitFor(() => {\n        expect(console.error).toHaveBeenCalledWith(\n          'Error during cart migration:',\n          expect.any(Error)\n        )\n      })\n\n      // Hook should still work despite migration error\n      expect(result.current.isAuthenticated).toBe(true)\n    })\n  })\n\n  describe('Cart Persistence', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('should save cart when items change', async () => {\n      const { result } = renderHookWithStore()\n\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      await waitFor(() => {\n        expect(mockCartPersistence.saveUserCart).toHaveBeenCalledWith(\n          mockUser.id,\n          expect.arrayContaining([expect.objectContaining({ id: mockProduct.id })])\n        )\n      }, { timeout: 2000 })\n    })\n\n    it('should handle save errors gracefully', async () => {\n      mockCartPersistence.saveUserCart.mockRejectedValue(new Error('Save failed'))\n\n      const { result } = renderHookWithStore()\n\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      await waitFor(() => {\n        expect(console.error).toHaveBeenCalledWith(\n          'Error saving user cart:',\n          expect.any(Error)\n        )\n      })\n    })\n  })\n\n  describe('Sign Out Handling', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('should clear cart and storage on sign out', () => {\n      const { result } = renderHookWithStore()\n\n      // Add item first\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      expect(result.current.cartItems).toHaveLength(1)\n\n      // Sign out\n      act(() => {\n        result.current.handleSignOut()\n      })\n\n      expect(result.current.cartItems).toHaveLength(0)\n      expect(mockCartPersistence.clearCartFromStorage).toHaveBeenCalled()\n    })\n  })\n\n  describe('Hook Functions', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('should provide migrateCart function', async () => {\n      const { result } = renderHookWithStore()\n\n      expect(typeof result.current.migrateCart).toBe('function')\n\n      await act(async () => {\n        await result.current.migrateCart('test-user-id')\n      })\n\n      expect(mockCartPersistence.loadCartFromStorage).toHaveBeenCalled()\n      expect(mockCartPersistence.loadUserCart).toHaveBeenCalledWith('test-user-id')\n    })\n\n    it('should provide saveCart function', async () => {\n      const { result } = renderHookWithStore()\n\n      expect(typeof result.current.saveCart).toBe('function')\n\n      // Add item to cart first\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      await act(async () => {\n        await result.current.saveCart('test-user-id')\n      })\n\n      expect(mockCartPersistence.saveUserCart).toHaveBeenCalledWith(\n        'test-user-id',\n        expect.arrayContaining([expect.objectContaining({ id: mockProduct.id })])\n      )\n    })\n  })\n})\n"],"names":["jest","mock","useAuth","fn","loadCartFromStorage","clearCartFromStorage","migrateTemporaryCart","Promise","resolve","loadUserCart","saveUserCart","localStorageMock","getItem","setItem","removeItem","clear","Object","defineProperty","window","value","originalConsoleError","console","error","beforeAll","afterAll","mockUser","id","name","email","mockProduct","price","category","describe","store","mockUseAuth","mockCartPersistence","cartPersistence","renderHookWithStore","configureStore","reducer","cartReducer","wrapper","children","React","createElement","Provider","renderHook","useCartWithClerk","beforeEach","clearAllMocks","mockReturnValue","mockResolvedValue","user","isLoaded","isSignedIn","signIn","signOut","session","status","it","result","expect","current","isAuthenticated","toBe","userId","toBeUndefined","Array","isArray","cartItems","toHaveLength","act","dispatch","addItemToCart","toEqual","objectContaining","not","toHaveBeenCalled","temporaryItems","waitFor","toHaveBeenCalledWith","userCartItems","mockRejectedValue","Error","any","arrayContaining","timeout","handleSignOut","migrateCart","saveCart"],"mappings":"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"}