b9d6507c2b05153b8c021c1c29ba31de
/**
 * Sistema Enterprise de Rate Limiting
 * Unifica todas las implementaciones de rate limiting con Redis y fallback en memoria
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get ENTERPRISE_RATE_LIMIT_CONFIGS () {
        return ENTERPRISE_RATE_LIMIT_CONFIGS;
    },
    get checkEnterpriseRateLimit () {
        return checkEnterpriseRateLimit;
    },
    get endpointKeyGenerator () {
        return endpointKeyGenerator;
    },
    get hybridKeyGenerator () {
        return hybridKeyGenerator;
    },
    get ipKeyGenerator () {
        return ipKeyGenerator;
    },
    get memoryStore () {
        return memoryStore;
    },
    get metricsCollector () {
        return metricsCollector;
    },
    get userKeyGenerator () {
        return userKeyGenerator;
    }
});
const _redis = require("../redis");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const ENTERPRISE_RATE_LIMIT_CONFIGS = {
    // Autenticación crítica
    CRITICAL_AUTH: {
        windowMs: 15 * 60 * 1000,
        maxRequests: 3,
        message: 'Demasiados intentos de autenticación crítica. Intenta en 15 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Admin APIs
    ADMIN_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 50,
        message: 'Límite de requests administrativas excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de pagos
    PAYMENT_API: {
        windowMs: 10 * 60 * 1000,
        maxRequests: 15,
        message: 'Límite de requests de pagos excedido. Intenta en 10 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true,
        onLimitReached: (key, request)=>{
            console.warn(`[PAYMENT_RATE_LIMIT] Límite excedido para ${key}`);
        }
    },
    // APIs públicas de productos
    PUBLIC_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 100,
        message: 'Límite de requests públicas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false // No loggear APIs públicas
    },
    // Webhooks
    WEBHOOK_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 200,
        message: 'Límite de webhooks excedido.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Búsquedas y consultas
    SEARCH_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 60,
        message: 'Límite de búsquedas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false
    },
    // Upload de archivos
    UPLOAD_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 10,
        message: 'Límite de uploads excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de desarrollo/debug
    DEBUG_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 30,
        message: 'Límite de debug APIs excedido.',
        enableRedis: false,
        enableMetrics: true,
        enableLogging: true
    }
};
function ipKeyGenerator(request) {
    const ip = getClientIP(request);
    return `ip:${ip}`;
}
function userKeyGenerator(request) {
    // Intentar obtener user ID de diferentes fuentes
    const userId = getUserId(request);
    const ip = getClientIP(request);
    return userId ? `user:${userId}` : `ip:${ip}`;
}
function endpointKeyGenerator(request) {
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    return `endpoint:${ip}:${endpoint}`;
}
function hybridKeyGenerator(request) {
    const userId = getUserId(request);
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    const userPart = userId ? `user:${userId}` : `ip:${ip}`;
    return `${userPart}:${endpoint}`;
}
// =====================================================
// UTILIDADES
// =====================================================
/**
 * Obtiene la IP del cliente
 */ function getClientIP(request) {
    // Intentar diferentes headers de IP
    const headers = [
        'x-forwarded-for',
        'x-real-ip',
        'x-client-ip',
        'cf-connecting-ip'
    ];
    for (const header of headers){
        let ip = null;
        if ('headers' in request && typeof request.headers.get === 'function') {
            // NextRequest
            ip = request.headers.get(header);
        } else if ('headers' in request) {
            // NextApiRequest
            const headerValue = request.headers[header];
            ip = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
        }
        if (ip) {
            // Tomar la primera IP si hay múltiples
            return ip.split(',')[0].trim();
        }
    }
    return 'unknown';
}
/**
 * Obtiene el ID del usuario autenticado
 */ function getUserId(request) {
    // Intentar obtener de diferentes fuentes
    // 1. Headers de Clerk
    let userId = null;
    if ('headers' in request && typeof request.headers.get === 'function') {
        // NextRequest
        userId = request.headers.get('x-clerk-user-id');
    } else if ('headers' in request) {
        // NextApiRequest
        const headerValue = request.headers['x-clerk-user-id'];
        userId = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
    }
    // 2. Contexto enterprise si está disponible
    if (!userId && request.enterpriseAuth?.userId) {
        userId = request.enterpriseAuth.userId;
    }
    // 3. Contexto de autenticación si está disponible
    if (!userId && request.auth?.userId) {
        userId = request.auth.userId;
    }
    return userId;
}
/**
 * Obtiene el endpoint de la request
 */ function getEndpoint(request) {
    if ('nextUrl' in request) {
        // NextRequest
        return request.nextUrl.pathname;
    } else if ('url' in request) {
        // NextApiRequest
        try {
            const url = new URL(request.url || '', 'http://localhost');
            return url.pathname;
        } catch  {
            return '/unknown';
        }
    }
    return '/unknown';
}
class MemoryRateLimitStore {
    constructor(){
        this.store = new Map();
        // Limpiar entradas expiradas cada 5 minutos
        this.cleanupInterval = setInterval(()=>{
            this.cleanup();
        }, 5 * 60 * 1000);
    }
    get(key) {
        const entry = this.store.get(key);
        if (!entry) {
            return null;
        }
        // Verificar si ha expirado
        if (Date.now() > entry.resetTime) {
            this.store.delete(key);
            return null;
        }
        return entry;
    }
    set(key, entry) {
        this.store.set(key, entry);
    }
    increment(key) {
        const entry = this.get(key);
        if (entry) {
            entry.count++;
            this.set(key, entry);
            return entry.count;
        }
        return 0;
    }
    cleanup() {
        const now = Date.now();
        let cleaned = 0;
        for (const [key, entry] of this.store.entries()){
            if (now > entry.resetTime) {
                this.store.delete(key);
                cleaned++;
            }
        }
        if (cleaned > 0) {
            console.log(`[MEMORY_RATE_LIMIT] Limpiadas ${cleaned} entradas expiradas`);
        }
    }
    getStats() {
        const entries = this.store.size;
        const memoryUsage = JSON.stringify([
            ...this.store.entries()
        ]).length;
        return {
            entries,
            memoryUsage
        };
    }
    destroy() {
        if (this.cleanupInterval) {
            clearInterval(this.cleanupInterval);
        }
        this.store.clear();
    }
}
// Instancia global del store en memoria
const memoryStore = new MemoryRateLimitStore();
// =====================================================
// MÉTRICAS GLOBALES
// =====================================================
class RateLimitMetricsCollector {
    recordRequest(result, ip, endpoint) {
        this.metrics.totalRequests++;
        if (result.allowed) {
            this.metrics.allowedRequests++;
        } else {
            this.metrics.blockedRequests++;
            // Registrar IP bloqueada
            const currentCount = this.blockedIPs.get(ip) || 0;
            this.blockedIPs.set(ip, currentCount + 1);
        }
        // Registrar fuente
        if (result.source === 'redis') {
            this.metrics.redisHits++;
        } else if (result.source === 'memory') {
            this.metrics.memoryFallbacks++;
        } else if (result.source === 'error') {
            this.metrics.errors++;
        }
        // Registrar tiempo de respuesta
        if (result.metrics?.responseTime) {
            this.responseTimes.push(result.metrics.responseTime);
            // Mantener solo los últimos 1000 tiempos
            if (this.responseTimes.length > 1000) {
                this.responseTimes = this.responseTimes.slice(-1000);
            }
            // Calcular promedio
            this.metrics.averageResponseTime = this.responseTimes.reduce((a, b)=>a + b, 0) / this.responseTimes.length;
        }
        // Registrar endpoint
        const endpointCount = this.endpointCounts.get(endpoint) || 0;
        this.endpointCounts.set(endpoint, endpointCount + 1);
        // Actualizar tops
        this.updateTopLists();
    }
    updateTopLists() {
        // Top IPs bloqueadas
        this.metrics.topBlockedIPs = Array.from(this.blockedIPs.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([ip, count])=>({
                ip,
                count
            }));
        // Top endpoints
        this.metrics.topEndpoints = Array.from(this.endpointCounts.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([endpoint, count])=>({
                endpoint,
                count
            }));
    }
    getMetrics() {
        return {
            ...this.metrics
        };
    }
    reset() {
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs.clear();
        this.endpointCounts.clear();
    }
    constructor(){
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs = new Map();
        this.endpointCounts = new Map();
    }
}
// Instancia global del collector de métricas
const metricsCollector = new RateLimitMetricsCollector();
// =====================================================
// IMPLEMENTACIÓN REDIS
// =====================================================
// Función isRedisAvailable ahora se importa desde @/lib/redis
/**
 * Rate limiting con Redis
 */ async function rateLimitWithRedis(key, config) {
    const startTime = Date.now();
    try {
        // Usar la función importada de Redis
        const result = await (0, _redis.enterpriseRateLimit)(key, config);
        if (result) {
            return {
                allowed: result.allowed,
                limit: result.limit || config.maxRequests,
                remaining: result.remaining || 0,
                resetTime: result.resetTime || Date.now() + config.windowMs,
                retryAfter: result.allowed ? undefined : Math.ceil(config.windowMs / 1000),
                source: 'redis',
                metrics: {
                    responseTime: Date.now() - startTime,
                    cacheHit: true,
                    keyGenerated: key
                }
            };
        }
        // Si no hay resultado, usar implementación manual
        const { redis } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../redis")));
        const now = Date.now();
        const window = Math.floor(now / config.windowMs);
        const redisKey = `rate_limit:${key}:${window}`;
        // Usar pipeline para operaciones atómicas
        const pipeline = redis.pipeline();
        pipeline.incr(redisKey);
        pipeline.expire(redisKey, Math.ceil(config.windowMs / 1000));
        const results = await pipeline.exec();
        const count = results?.[0]?.[1] || 1;
        const remaining = Math.max(0, config.maxRequests - count);
        const resetTime = (window + 1) * config.windowMs;
        const allowed = count <= config.maxRequests;
        return {
            allowed,
            limit: config.maxRequests,
            remaining,
            resetTime,
            retryAfter: allowed ? undefined : Math.ceil((resetTime - now) / 1000),
            source: 'redis',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: true,
                keyGenerated: redisKey
            }
        };
    } catch (error) {
        console.error('[RATE_LIMIT] Error en Redis:', error);
        // Fallback a memoria en caso de error
        return rateLimitWithMemory(key, config);
    }
}
/**
 * Rate limiting con memoria (fallback)
 */ function rateLimitWithMemory(key, config) {
    const startTime = Date.now();
    const now = Date.now();
    let entry = memoryStore.get(key);
    if (!entry) {
        // Primera request en esta ventana
        entry = {
            count: 1,
            resetTime: now + config.windowMs,
            firstRequest: now
        };
        memoryStore.set(key, entry);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests - 1,
            resetTime: entry.resetTime,
            source: 'memory',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: false,
                keyGenerated: key
            }
        };
    }
    // Incrementar contador
    entry.count++;
    memoryStore.set(key, entry);
    const allowed = entry.count <= config.maxRequests;
    const remaining = Math.max(0, config.maxRequests - entry.count);
    return {
        allowed,
        limit: config.maxRequests,
        remaining,
        resetTime: entry.resetTime,
        retryAfter: allowed ? undefined : Math.ceil((entry.resetTime - now) / 1000),
        source: 'memory',
        metrics: {
            responseTime: Date.now() - startTime,
            cacheHit: true,
            keyGenerated: key
        }
    };
}
async function checkEnterpriseRateLimit(request, configName, customConfig) {
    const baseConfig = ENTERPRISE_RATE_LIMIT_CONFIGS[configName];
    if (!baseConfig) {
        return {
            allowed: true,
            limit: 1000,
            remaining: 999,
            resetTime: Date.now() + 60000,
            error: `Configuración '${configName}' no encontrada`,
            code: 'CONFIG_NOT_FOUND',
            source: 'error'
        };
    }
    const config = {
        ...baseConfig,
        ...customConfig
    };
    const keyGenerator = config.keyGenerator || hybridKeyGenerator;
    const key = keyGenerator(request);
    let result;
    try {
        // Intentar Redis primero si está habilitado
        if (config.enableRedis !== false && await (0, _redis.isRedisAvailable)()) {
            result = await rateLimitWithRedis(key, config);
        } else {
            result = rateLimitWithMemory(key, config);
        }
        // Registrar métricas si está habilitado
        if (config.enableMetrics) {
            const ip = getClientIP(request);
            const endpoint = getEndpoint(request);
            metricsCollector.recordRequest(result, ip, endpoint);
        }
        // Logging si está habilitado
        if (config.enableLogging) {
            if (!result.allowed) {
                console.warn(`[RATE_LIMIT] Límite excedido para ${key}: ${result.remaining}/${result.limit}`);
                // Callback personalizado si está definido
                if (config.onLimitReached) {
                    config.onLimitReached(key, request);
                }
            }
        }
        return result;
    } catch (error) {
        console.error('[RATE_LIMIT] Error en checkEnterpriseRateLimit:', error);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests,
            resetTime: Date.now() + config.windowMs,
            error: 'Error interno en rate limiting',
            code: 'INTERNAL_ERROR',
            source: 'error'
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxyYXRlLWxpbWl0aW5nXFxlbnRlcnByaXNlLXJhdGUtbGltaXRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpc3RlbWEgRW50ZXJwcmlzZSBkZSBSYXRlIExpbWl0aW5nXG4gKiBVbmlmaWNhIHRvZGFzIGxhcyBpbXBsZW1lbnRhY2lvbmVzIGRlIHJhdGUgbGltaXRpbmcgY29uIFJlZGlzIHkgZmFsbGJhY2sgZW4gbWVtb3JpYVxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgaXNSZWRpc0F2YWlsYWJsZSwgZW50ZXJwcmlzZVJhdGVMaW1pdCB9IGZyb20gJ0AvbGliL3JlZGlzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIFkgSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRlcnByaXNlUmF0ZUxpbWl0Q29uZmlnIHtcbiAgd2luZG93TXM6IG51bWJlcjtcbiAgbWF4UmVxdWVzdHM6IG51bWJlcjtcbiAgbWVzc2FnZT86IHN0cmluZztcbiAga2V5R2VuZXJhdG9yPzogKHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QpID0+IHN0cmluZztcbiAgc2tpcFN1Y2Nlc3NmdWxSZXF1ZXN0cz86IGJvb2xlYW47XG4gIHNraXBGYWlsZWRSZXF1ZXN0cz86IGJvb2xlYW47XG4gIGVuYWJsZVJlZGlzPzogYm9vbGVhbjtcbiAgZW5hYmxlTWVtb3J5RmFsbGJhY2s/OiBib29sZWFuO1xuICBlbmFibGVNZXRyaWNzPzogYm9vbGVhbjtcbiAgZW5hYmxlTG9nZ2luZz86IGJvb2xlYW47XG4gIGN1c3RvbUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBvbkxpbWl0UmVhY2hlZD86IChrZXk6IHN0cmluZywgcmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0IHtcbiAgYWxsb3dlZDogYm9vbGVhbjtcbiAgbGltaXQ6IG51bWJlcjtcbiAgcmVtYWluaW5nOiBudW1iZXI7XG4gIHJlc2V0VGltZTogbnVtYmVyO1xuICByZXRyeUFmdGVyPzogbnVtYmVyO1xuICBlcnJvcj86IHN0cmluZztcbiAgY29kZT86IHN0cmluZztcbiAgc291cmNlOiAncmVkaXMnIHwgJ21lbW9yeScgfCAnZXJyb3InO1xuICBtZXRyaWNzPzoge1xuICAgIHJlc3BvbnNlVGltZTogbnVtYmVyO1xuICAgIGNhY2hlSGl0OiBib29sZWFuO1xuICAgIGtleUdlbmVyYXRlZDogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhdGVMaW1pdE1ldHJpY3Mge1xuICB0b3RhbFJlcXVlc3RzOiBudW1iZXI7XG4gIGFsbG93ZWRSZXF1ZXN0czogbnVtYmVyO1xuICBibG9ja2VkUmVxdWVzdHM6IG51bWJlcjtcbiAgcmVkaXNIaXRzOiBudW1iZXI7XG4gIG1lbW9yeUZhbGxiYWNrczogbnVtYmVyO1xuICBlcnJvcnM6IG51bWJlcjtcbiAgYXZlcmFnZVJlc3BvbnNlVGltZTogbnVtYmVyO1xuICB0b3BCbG9ja2VkSVBzOiBBcnJheTx7IGlwOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT47XG4gIHRvcEVuZHBvaW50czogQXJyYXk8eyBlbmRwb2ludDogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBQ0lPTkVTIFBSRURFRklOSURBUyBFTlRFUlBSSVNFXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1M6IFJlY29yZDxzdHJpbmcsIEVudGVycHJpc2VSYXRlTGltaXRDb25maWc+ID0ge1xuICAvLyBBdXRlbnRpY2FjacOzbiBjcsOtdGljYVxuICBDUklUSUNBTF9BVVRIOiB7XG4gICAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dG9zXG4gICAgbWF4UmVxdWVzdHM6IDMsIC8vIDMgaW50ZW50b3MgcG9yIDE1IG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnRGVtYXNpYWRvcyBpbnRlbnRvcyBkZSBhdXRlbnRpY2FjacOzbiBjcsOtdGljYS4gSW50ZW50YSBlbiAxNSBtaW51dG9zLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlXG4gIH0sXG5cbiAgLy8gQWRtaW4gQVBJc1xuICBBRE1JTl9BUEk6IHtcbiAgICB3aW5kb3dNczogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dG9zXG4gICAgbWF4UmVxdWVzdHM6IDUwLCAvLyA1MCByZXF1ZXN0cyBwb3IgNSBtaW51dG9zXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgcmVxdWVzdHMgYWRtaW5pc3RyYXRpdmFzIGV4Y2VkaWRvLiBJbnRlbnRhIGVuIDUgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZVxuICB9LFxuXG4gIC8vIEFQSXMgZGUgcGFnb3NcbiAgUEFZTUVOVF9BUEk6IHtcbiAgICB3aW5kb3dNczogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogMTUsIC8vIDE1IHJlcXVlc3RzIHBvciAxMCBtaW51dG9zXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgcmVxdWVzdHMgZGUgcGFnb3MgZXhjZWRpZG8uIEludGVudGEgZW4gMTAgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZSxcbiAgICBvbkxpbWl0UmVhY2hlZDogKGtleSwgcmVxdWVzdCkgPT4ge1xuICAgICAgY29uc29sZS53YXJuKGBbUEFZTUVOVF9SQVRFX0xJTUlUXSBMw61taXRlIGV4Y2VkaWRvIHBhcmEgJHtrZXl9YCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEFQSXMgcMO6YmxpY2FzIGRlIHByb2R1Y3Rvc1xuICBQVUJMSUNfQVBJOiB7XG4gICAgd2luZG93TXM6IDEgKiA2MCAqIDEwMDAsIC8vIDEgbWludXRvXG4gICAgbWF4UmVxdWVzdHM6IDEwMCwgLy8gMTAwIHJlcXVlc3RzIHBvciBtaW51dG9cbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSByZXF1ZXN0cyBww7pibGljYXMgZXhjZWRpZG8uIEludGVudGEgZW4gMSBtaW51dG8uJyxcbiAgICBlbmFibGVSZWRpczogdHJ1ZSxcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IGZhbHNlIC8vIE5vIGxvZ2dlYXIgQVBJcyBww7pibGljYXNcbiAgfSxcblxuICAvLyBXZWJob29rc1xuICBXRUJIT09LX0FQSToge1xuICAgIHdpbmRvd01zOiAxICogNjAgKiAxMDAwLCAvLyAxIG1pbnV0b1xuICAgIG1heFJlcXVlc3RzOiAyMDAsIC8vIDIwMCB3ZWJob29rcyBwb3IgbWludXRvXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgd2ViaG9va3MgZXhjZWRpZG8uJyxcbiAgICBlbmFibGVSZWRpczogdHJ1ZSxcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IHRydWVcbiAgfSxcblxuICAvLyBCw7pzcXVlZGFzIHkgY29uc3VsdGFzXG4gIFNFQVJDSF9BUEk6IHtcbiAgICB3aW5kb3dNczogMSAqIDYwICogMTAwMCwgLy8gMSBtaW51dG9cbiAgICBtYXhSZXF1ZXN0czogNjAsIC8vIDYwIGLDunNxdWVkYXMgcG9yIG1pbnV0b1xuICAgIG1lc3NhZ2U6ICdMw61taXRlIGRlIGLDunNxdWVkYXMgZXhjZWRpZG8uIEludGVudGEgZW4gMSBtaW51dG8uJyxcbiAgICBlbmFibGVSZWRpczogdHJ1ZSxcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IGZhbHNlXG4gIH0sXG5cbiAgLy8gVXBsb2FkIGRlIGFyY2hpdm9zXG4gIFVQTE9BRF9BUEk6IHtcbiAgICB3aW5kb3dNczogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dG9zXG4gICAgbWF4UmVxdWVzdHM6IDEwLCAvLyAxMCB1cGxvYWRzIHBvciA1IG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSB1cGxvYWRzIGV4Y2VkaWRvLiBJbnRlbnRhIGVuIDUgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZVxuICB9LFxuXG4gIC8vIEFQSXMgZGUgZGVzYXJyb2xsby9kZWJ1Z1xuICBERUJVR19BUEk6IHtcbiAgICB3aW5kb3dNczogMSAqIDYwICogMTAwMCwgLy8gMSBtaW51dG9cbiAgICBtYXhSZXF1ZXN0czogMzAsIC8vIDMwIHJlcXVlc3RzIHBvciBtaW51dG9cbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSBkZWJ1ZyBBUElzIGV4Y2VkaWRvLicsXG4gICAgZW5hYmxlUmVkaXM6IGZhbHNlLCAvLyBVc2FyIG1lbW9yaWEgcGFyYSBkZWJ1Z1xuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZVxuICB9XG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR0VORVJBRE9SRVMgREUgQ0xBVkVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdlbmVyYWRvciBkZSBjbGF2ZSBwb3IgSVBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlwS2V5R2VuZXJhdG9yKHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBpcCA9IGdldENsaWVudElQKHJlcXVlc3QpO1xuICByZXR1cm4gYGlwOiR7aXB9YDtcbn1cblxuLyoqXG4gKiBHZW5lcmFkb3IgZGUgY2xhdmUgcG9yIHVzdWFyaW8gYXV0ZW50aWNhZG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXJLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIC8vIEludGVudGFyIG9idGVuZXIgdXNlciBJRCBkZSBkaWZlcmVudGVzIGZ1ZW50ZXNcbiAgY29uc3QgdXNlcklkID0gZ2V0VXNlcklkKHJlcXVlc3QpO1xuICBjb25zdCBpcCA9IGdldENsaWVudElQKHJlcXVlc3QpO1xuICBcbiAgcmV0dXJuIHVzZXJJZCA/IGB1c2VyOiR7dXNlcklkfWAgOiBgaXA6JHtpcH1gO1xufVxuXG4vKipcbiAqIEdlbmVyYWRvciBkZSBjbGF2ZSBwb3IgZW5kcG9pbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuZHBvaW50S2V5R2VuZXJhdG9yKHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBpcCA9IGdldENsaWVudElQKHJlcXVlc3QpO1xuICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KHJlcXVlc3QpO1xuICBcbiAgcmV0dXJuIGBlbmRwb2ludDoke2lwfToke2VuZHBvaW50fWA7XG59XG5cbi8qKlxuICogR2VuZXJhZG9yIGRlIGNsYXZlIGjDrWJyaWRvICh1c3VhcmlvICsgZW5kcG9pbnQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoeWJyaWRLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IHVzZXJJZCA9IGdldFVzZXJJZChyZXF1ZXN0KTtcbiAgY29uc3QgaXAgPSBnZXRDbGllbnRJUChyZXF1ZXN0KTtcbiAgY29uc3QgZW5kcG9pbnQgPSBnZXRFbmRwb2ludChyZXF1ZXN0KTtcbiAgXG4gIGNvbnN0IHVzZXJQYXJ0ID0gdXNlcklkID8gYHVzZXI6JHt1c2VySWR9YCA6IGBpcDoke2lwfWA7XG4gIHJldHVybiBgJHt1c2VyUGFydH06JHtlbmRwb2ludH1gO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBPYnRpZW5lIGxhIElQIGRlbCBjbGllbnRlXG4gKi9cbmZ1bmN0aW9uIGdldENsaWVudElQKHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcge1xuICAvLyBJbnRlbnRhciBkaWZlcmVudGVzIGhlYWRlcnMgZGUgSVBcbiAgY29uc3QgaGVhZGVycyA9IFtcbiAgICAneC1mb3J3YXJkZWQtZm9yJyxcbiAgICAneC1yZWFsLWlwJyxcbiAgICAneC1jbGllbnQtaXAnLFxuICAgICdjZi1jb25uZWN0aW5nLWlwJ1xuICBdO1xuXG4gIGZvciAoY29uc3QgaGVhZGVyIG9mIGhlYWRlcnMpIHtcbiAgICBsZXQgaXA6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCAmJiB0eXBlb2YgcmVxdWVzdC5oZWFkZXJzLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gTmV4dFJlcXVlc3RcbiAgICAgIGlwID0gKHJlcXVlc3QgYXMgTmV4dFJlcXVlc3QpLmhlYWRlcnMuZ2V0KGhlYWRlcik7XG4gICAgfSBlbHNlIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gTmV4dEFwaVJlcXVlc3RcbiAgICAgIGNvbnN0IGhlYWRlclZhbHVlID0gKHJlcXVlc3QgYXMgTmV4dEFwaVJlcXVlc3QpLmhlYWRlcnNbaGVhZGVyXTtcbiAgICAgIGlwID0gQXJyYXkuaXNBcnJheShoZWFkZXJWYWx1ZSkgPyBoZWFkZXJWYWx1ZVswXSA6IGhlYWRlclZhbHVlIHx8IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGlwKSB7XG4gICAgICAvLyBUb21hciBsYSBwcmltZXJhIElQIHNpIGhheSBtw7psdGlwbGVzXG4gICAgICByZXR1cm4gaXAuc3BsaXQoJywnKVswXS50cmltKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICd1bmtub3duJztcbn1cblxuLyoqXG4gKiBPYnRpZW5lIGVsIElEIGRlbCB1c3VhcmlvIGF1dGVudGljYWRvXG4gKi9cbmZ1bmN0aW9uIGdldFVzZXJJZChyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIEludGVudGFyIG9idGVuZXIgZGUgZGlmZXJlbnRlcyBmdWVudGVzXG4gIFxuICAvLyAxLiBIZWFkZXJzIGRlIENsZXJrXG4gIGxldCB1c2VySWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBcbiAgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0ICYmIHR5cGVvZiByZXF1ZXN0LmhlYWRlcnMuZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gTmV4dFJlcXVlc3RcbiAgICB1c2VySWQgPSAocmVxdWVzdCBhcyBOZXh0UmVxdWVzdCkuaGVhZGVycy5nZXQoJ3gtY2xlcmstdXNlci1pZCcpO1xuICB9IGVsc2UgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0KSB7XG4gICAgLy8gTmV4dEFwaVJlcXVlc3RcbiAgICBjb25zdCBoZWFkZXJWYWx1ZSA9IChyZXF1ZXN0IGFzIE5leHRBcGlSZXF1ZXN0KS5oZWFkZXJzWyd4LWNsZXJrLXVzZXItaWQnXTtcbiAgICB1c2VySWQgPSBBcnJheS5pc0FycmF5KGhlYWRlclZhbHVlKSA/IGhlYWRlclZhbHVlWzBdIDogaGVhZGVyVmFsdWUgfHwgbnVsbDtcbiAgfVxuXG4gIC8vIDIuIENvbnRleHRvIGVudGVycHJpc2Ugc2kgZXN0w6EgZGlzcG9uaWJsZVxuICBpZiAoIXVzZXJJZCAmJiAocmVxdWVzdCBhcyBhbnkpLmVudGVycHJpc2VBdXRoPy51c2VySWQpIHtcbiAgICB1c2VySWQgPSAocmVxdWVzdCBhcyBhbnkpLmVudGVycHJpc2VBdXRoLnVzZXJJZDtcbiAgfVxuXG4gIC8vIDMuIENvbnRleHRvIGRlIGF1dGVudGljYWNpw7NuIHNpIGVzdMOhIGRpc3BvbmlibGVcbiAgaWYgKCF1c2VySWQgJiYgKHJlcXVlc3QgYXMgYW55KS5hdXRoPy51c2VySWQpIHtcbiAgICB1c2VySWQgPSAocmVxdWVzdCBhcyBhbnkpLmF1dGgudXNlcklkO1xuICB9XG5cbiAgcmV0dXJuIHVzZXJJZDtcbn1cblxuLyoqXG4gKiBPYnRpZW5lIGVsIGVuZHBvaW50IGRlIGxhIHJlcXVlc3RcbiAqL1xuZnVuY3Rpb24gZ2V0RW5kcG9pbnQocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGlmICgnbmV4dFVybCcgaW4gcmVxdWVzdCkge1xuICAgIC8vIE5leHRSZXF1ZXN0XG4gICAgcmV0dXJuIChyZXF1ZXN0IGFzIE5leHRSZXF1ZXN0KS5uZXh0VXJsLnBhdGhuYW1lO1xuICB9IGVsc2UgaWYgKCd1cmwnIGluIHJlcXVlc3QpIHtcbiAgICAvLyBOZXh0QXBpUmVxdWVzdFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKChyZXF1ZXN0IGFzIE5leHRBcGlSZXF1ZXN0KS51cmwgfHwgJycsICdodHRwOi8vbG9jYWxob3N0Jyk7XG4gICAgICByZXR1cm4gdXJsLnBhdGhuYW1lO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICcvdW5rbm93bic7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gJy91bmtub3duJztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNUT1JFIEVOIE1FTU9SSUEgKEZBTExCQUNLKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIE1lbW9yeVJhdGVMaW1pdEVudHJ5IHtcbiAgY291bnQ6IG51bWJlcjtcbiAgcmVzZXRUaW1lOiBudW1iZXI7XG4gIGZpcnN0UmVxdWVzdDogbnVtYmVyO1xufVxuXG5jbGFzcyBNZW1vcnlSYXRlTGltaXRTdG9yZSB7XG4gIHByaXZhdGUgc3RvcmUgPSBuZXcgTWFwPHN0cmluZywgTWVtb3J5UmF0ZUxpbWl0RW50cnk+KCk7XG4gIHByaXZhdGUgY2xlYW51cEludGVydmFsOiBOb2RlSlMuVGltZW91dDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBMaW1waWFyIGVudHJhZGFzIGV4cGlyYWRhcyBjYWRhIDUgbWludXRvc1xuICAgIHRoaXMuY2xlYW51cEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSwgNSAqIDYwICogMTAwMCk7XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcpOiBNZW1vcnlSYXRlTGltaXRFbnRyeSB8IG51bGwge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5zdG9yZS5nZXQoa2V5KTtcbiAgICBcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgc2kgaGEgZXhwaXJhZG9cbiAgICBpZiAoRGF0ZS5ub3coKSA+IGVudHJ5LnJlc2V0VGltZSkge1xuICAgICAgdGhpcy5zdG9yZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIHNldChrZXk6IHN0cmluZywgZW50cnk6IE1lbW9yeVJhdGVMaW1pdEVudHJ5KTogdm9pZCB7XG4gICAgdGhpcy5zdG9yZS5zZXQoa2V5LCBlbnRyeSk7XG4gIH1cblxuICBpbmNyZW1lbnQoa2V5OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5nZXQoa2V5KTtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGVudHJ5LmNvdW50Kys7XG4gICAgICB0aGlzLnNldChrZXksIGVudHJ5KTtcbiAgICAgIHJldHVybiBlbnRyeS5jb3VudDtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGNsZWFudXAoKTogdm9pZCB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgY2xlYW5lZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiB0aGlzLnN0b3JlLmVudHJpZXMoKSkge1xuICAgICAgaWYgKG5vdyA+IGVudHJ5LnJlc2V0VGltZSkge1xuICAgICAgICB0aGlzLnN0b3JlLmRlbGV0ZShrZXkpO1xuICAgICAgICBjbGVhbmVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsZWFuZWQgPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW01FTU9SWV9SQVRFX0xJTUlUXSBMaW1waWFkYXMgJHtjbGVhbmVkfSBlbnRyYWRhcyBleHBpcmFkYXNgKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdGF0cygpOiB7IGVudHJpZXM6IG51bWJlcjsgbWVtb3J5VXNhZ2U6IG51bWJlciB9IHtcbiAgICBjb25zdCBlbnRyaWVzID0gdGhpcy5zdG9yZS5zaXplO1xuICAgIGNvbnN0IG1lbW9yeVVzYWdlID0gSlNPTi5zdHJpbmdpZnkoWy4uLnRoaXMuc3RvcmUuZW50cmllcygpXSkubGVuZ3RoO1xuICAgIFxuICAgIHJldHVybiB7IGVudHJpZXMsIG1lbW9yeVVzYWdlIH07XG4gIH1cblxuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsZWFudXBJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNsZWFudXBJbnRlcnZhbCk7XG4gICAgfVxuICAgIHRoaXMuc3RvcmUuY2xlYXIoKTtcbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgZ2xvYmFsIGRlbCBzdG9yZSBlbiBtZW1vcmlhXG5jb25zdCBtZW1vcnlTdG9yZSA9IG5ldyBNZW1vcnlSYXRlTGltaXRTdG9yZSgpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTcOJVFJJQ0FTIEdMT0JBTEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBSYXRlTGltaXRNZXRyaWNzQ29sbGVjdG9yIHtcbiAgcHJpdmF0ZSBtZXRyaWNzOiBSYXRlTGltaXRNZXRyaWNzID0ge1xuICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgYWxsb3dlZFJlcXVlc3RzOiAwLFxuICAgIGJsb2NrZWRSZXF1ZXN0czogMCxcbiAgICByZWRpc0hpdHM6IDAsXG4gICAgbWVtb3J5RmFsbGJhY2tzOiAwLFxuICAgIGVycm9yczogMCxcbiAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLFxuICAgIHRvcEJsb2NrZWRJUHM6IFtdLFxuICAgIHRvcEVuZHBvaW50czogW11cbiAgfTtcblxuICBwcml2YXRlIHJlc3BvbnNlVGltZXM6IG51bWJlcltdID0gW107XG4gIHByaXZhdGUgYmxvY2tlZElQcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIHByaXZhdGUgZW5kcG9pbnRDb3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXG4gIHJlY29yZFJlcXVlc3QocmVzdWx0OiBFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0LCBpcDogc3RyaW5nLCBlbmRwb2ludDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5tZXRyaWNzLnRvdGFsUmVxdWVzdHMrKztcblxuICAgIGlmIChyZXN1bHQuYWxsb3dlZCkge1xuICAgICAgdGhpcy5tZXRyaWNzLmFsbG93ZWRSZXF1ZXN0cysrO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1ldHJpY3MuYmxvY2tlZFJlcXVlc3RzKys7XG4gICAgICBcbiAgICAgIC8vIFJlZ2lzdHJhciBJUCBibG9xdWVhZGFcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuYmxvY2tlZElQcy5nZXQoaXApIHx8IDA7XG4gICAgICB0aGlzLmJsb2NrZWRJUHMuc2V0KGlwLCBjdXJyZW50Q291bnQgKyAxKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RyYXIgZnVlbnRlXG4gICAgaWYgKHJlc3VsdC5zb3VyY2UgPT09ICdyZWRpcycpIHtcbiAgICAgIHRoaXMubWV0cmljcy5yZWRpc0hpdHMrKztcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5zb3VyY2UgPT09ICdtZW1vcnknKSB7XG4gICAgICB0aGlzLm1ldHJpY3MubWVtb3J5RmFsbGJhY2tzKys7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQuc291cmNlID09PSAnZXJyb3InKSB7XG4gICAgICB0aGlzLm1ldHJpY3MuZXJyb3JzKys7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIHRpZW1wbyBkZSByZXNwdWVzdGFcbiAgICBpZiAocmVzdWx0Lm1ldHJpY3M/LnJlc3BvbnNlVGltZSkge1xuICAgICAgdGhpcy5yZXNwb25zZVRpbWVzLnB1c2gocmVzdWx0Lm1ldHJpY3MucmVzcG9uc2VUaW1lKTtcbiAgICAgIFxuICAgICAgLy8gTWFudGVuZXIgc29sbyBsb3Mgw7psdGltb3MgMTAwMCB0aWVtcG9zXG4gICAgICBpZiAodGhpcy5yZXNwb25zZVRpbWVzLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgdGhpcy5yZXNwb25zZVRpbWVzID0gdGhpcy5yZXNwb25zZVRpbWVzLnNsaWNlKC0xMDAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXIgcHJvbWVkaW9cbiAgICAgIHRoaXMubWV0cmljcy5hdmVyYWdlUmVzcG9uc2VUaW1lID0gXG4gICAgICAgIHRoaXMucmVzcG9uc2VUaW1lcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIHRoaXMucmVzcG9uc2VUaW1lcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIGVuZHBvaW50XG4gICAgY29uc3QgZW5kcG9pbnRDb3VudCA9IHRoaXMuZW5kcG9pbnRDb3VudHMuZ2V0KGVuZHBvaW50KSB8fCAwO1xuICAgIHRoaXMuZW5kcG9pbnRDb3VudHMuc2V0KGVuZHBvaW50LCBlbmRwb2ludENvdW50ICsgMSk7XG5cbiAgICAvLyBBY3R1YWxpemFyIHRvcHNcbiAgICB0aGlzLnVwZGF0ZVRvcExpc3RzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRvcExpc3RzKCk6IHZvaWQge1xuICAgIC8vIFRvcCBJUHMgYmxvcXVlYWRhc1xuICAgIHRoaXMubWV0cmljcy50b3BCbG9ja2VkSVBzID0gQXJyYXkuZnJvbSh0aGlzLmJsb2NrZWRJUHMuZW50cmllcygpKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKVxuICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgLm1hcCgoW2lwLCBjb3VudF0pID0+ICh7IGlwLCBjb3VudCB9KSk7XG5cbiAgICAvLyBUb3AgZW5kcG9pbnRzXG4gICAgdGhpcy5tZXRyaWNzLnRvcEVuZHBvaW50cyA9IEFycmF5LmZyb20odGhpcy5lbmRwb2ludENvdW50cy5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXG4gICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAubWFwKChbZW5kcG9pbnQsIGNvdW50XSkgPT4gKHsgZW5kcG9pbnQsIGNvdW50IH0pKTtcbiAgfVxuXG4gIGdldE1ldHJpY3MoKTogUmF0ZUxpbWl0TWV0cmljcyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5tZXRyaWNzIH07XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICB0b3RhbFJlcXVlc3RzOiAwLFxuICAgICAgYWxsb3dlZFJlcXVlc3RzOiAwLFxuICAgICAgYmxvY2tlZFJlcXVlc3RzOiAwLFxuICAgICAgcmVkaXNIaXRzOiAwLFxuICAgICAgbWVtb3J5RmFsbGJhY2tzOiAwLFxuICAgICAgZXJyb3JzOiAwLFxuICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMCxcbiAgICAgIHRvcEJsb2NrZWRJUHM6IFtdLFxuICAgICAgdG9wRW5kcG9pbnRzOiBbXVxuICAgIH07XG4gICAgdGhpcy5yZXNwb25zZVRpbWVzID0gW107XG4gICAgdGhpcy5ibG9ja2VkSVBzLmNsZWFyKCk7XG4gICAgdGhpcy5lbmRwb2ludENvdW50cy5jbGVhcigpO1xuICB9XG59XG5cbi8vIEluc3RhbmNpYSBnbG9iYWwgZGVsIGNvbGxlY3RvciBkZSBtw6l0cmljYXNcbmNvbnN0IG1ldHJpY3NDb2xsZWN0b3IgPSBuZXcgUmF0ZUxpbWl0TWV0cmljc0NvbGxlY3RvcigpO1xuXG4vLyBFeHBvcnRhciBwYXJhIHVzbyBleHRlcm5vXG5leHBvcnQgeyBtZW1vcnlTdG9yZSwgbWV0cmljc0NvbGxlY3RvciB9O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU1QTEVNRU5UQUNJw5NOIFJFRElTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBGdW5jacOzbiBpc1JlZGlzQXZhaWxhYmxlIGFob3JhIHNlIGltcG9ydGEgZGVzZGUgQC9saWIvcmVkaXNcblxuLyoqXG4gKiBSYXRlIGxpbWl0aW5nIGNvbiBSZWRpc1xuICovXG5hc3luYyBmdW5jdGlvbiByYXRlTGltaXRXaXRoUmVkaXMoXG4gIGtleTogc3RyaW5nLFxuICBjb25maWc6IEVudGVycHJpc2VSYXRlTGltaXRDb25maWdcbik6IFByb21pc2U8RW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdD4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gIHRyeSB7XG4gICAgLy8gVXNhciBsYSBmdW5jacOzbiBpbXBvcnRhZGEgZGUgUmVkaXNcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbnRlcnByaXNlUmF0ZUxpbWl0KGtleSwgY29uZmlnKTtcblxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFsbG93ZWQ6IHJlc3VsdC5hbGxvd2VkLFxuICAgICAgICBsaW1pdDogcmVzdWx0LmxpbWl0IHx8IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgICAgcmVtYWluaW5nOiByZXN1bHQucmVtYWluaW5nIHx8IDAsXG4gICAgICAgIHJlc2V0VGltZTogcmVzdWx0LnJlc2V0VGltZSB8fCBEYXRlLm5vdygpICsgY29uZmlnLndpbmRvd01zLFxuICAgICAgICByZXRyeUFmdGVyOiByZXN1bHQuYWxsb3dlZCA/IHVuZGVmaW5lZCA6IE1hdGguY2VpbChjb25maWcud2luZG93TXMgLyAxMDAwKSxcbiAgICAgICAgc291cmNlOiAncmVkaXMnLFxuICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIGNhY2hlSGl0OiB0cnVlLFxuICAgICAgICAgIGtleUdlbmVyYXRlZDoga2V5XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gU2kgbm8gaGF5IHJlc3VsdGFkbywgdXNhciBpbXBsZW1lbnRhY2nDs24gbWFudWFsXG4gICAgY29uc3QgeyByZWRpcyB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9yZWRpcycpO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgd2luZG93ID0gTWF0aC5mbG9vcihub3cgLyBjb25maWcud2luZG93TXMpO1xuICAgIGNvbnN0IHJlZGlzS2V5ID0gYHJhdGVfbGltaXQ6JHtrZXl9OiR7d2luZG93fWA7XG5cbiAgICAvLyBVc2FyIHBpcGVsaW5lIHBhcmEgb3BlcmFjaW9uZXMgYXTDs21pY2FzXG4gICAgY29uc3QgcGlwZWxpbmUgPSByZWRpcy5waXBlbGluZSgpO1xuICAgIHBpcGVsaW5lLmluY3IocmVkaXNLZXkpO1xuICAgIHBpcGVsaW5lLmV4cGlyZShyZWRpc0tleSwgTWF0aC5jZWlsKGNvbmZpZy53aW5kb3dNcyAvIDEwMDApKTtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBwaXBlbGluZS5leGVjKCk7XG4gICAgY29uc3QgY291bnQgPSByZXN1bHRzPy5bMF0/LlsxXSBhcyBudW1iZXIgfHwgMTtcblxuICAgIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGNvbmZpZy5tYXhSZXF1ZXN0cyAtIGNvdW50KTtcbiAgICBjb25zdCByZXNldFRpbWUgPSAod2luZG93ICsgMSkgKiBjb25maWcud2luZG93TXM7XG4gICAgY29uc3QgYWxsb3dlZCA9IGNvdW50IDw9IGNvbmZpZy5tYXhSZXF1ZXN0cztcblxuICAgIHJldHVybiB7XG4gICAgICBhbGxvd2VkLFxuICAgICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlbWFpbmluZyxcbiAgICAgIHJlc2V0VGltZSxcbiAgICAgIHJldHJ5QWZ0ZXI6IGFsbG93ZWQgPyB1bmRlZmluZWQgOiBNYXRoLmNlaWwoKHJlc2V0VGltZSAtIG5vdykgLyAxMDAwKSxcbiAgICAgIHNvdXJjZTogJ3JlZGlzJyxcbiAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBjYWNoZUhpdDogdHJ1ZSxcbiAgICAgICAga2V5R2VuZXJhdGVkOiByZWRpc0tleVxuICAgICAgfVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1JBVEVfTElNSVRdIEVycm9yIGVuIFJlZGlzOicsIGVycm9yKTtcblxuICAgIC8vIEZhbGxiYWNrIGEgbWVtb3JpYSBlbiBjYXNvIGRlIGVycm9yXG4gICAgcmV0dXJuIHJhdGVMaW1pdFdpdGhNZW1vcnkoa2V5LCBjb25maWcpO1xuICB9XG59XG5cbi8qKlxuICogUmF0ZSBsaW1pdGluZyBjb24gbWVtb3JpYSAoZmFsbGJhY2spXG4gKi9cbmZ1bmN0aW9uIHJhdGVMaW1pdFdpdGhNZW1vcnkoXG4gIGtleTogc3RyaW5nLFxuICBjb25maWc6IEVudGVycHJpc2VSYXRlTGltaXRDb25maWdcbik6IEVudGVycHJpc2VSYXRlTGltaXRSZXN1bHQge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gIGxldCBlbnRyeSA9IG1lbW9yeVN0b3JlLmdldChrZXkpO1xuXG4gIGlmICghZW50cnkpIHtcbiAgICAvLyBQcmltZXJhIHJlcXVlc3QgZW4gZXN0YSB2ZW50YW5hXG4gICAgZW50cnkgPSB7XG4gICAgICBjb3VudDogMSxcbiAgICAgIHJlc2V0VGltZTogbm93ICsgY29uZmlnLndpbmRvd01zLFxuICAgICAgZmlyc3RSZXF1ZXN0OiBub3dcbiAgICB9O1xuICAgIG1lbW9yeVN0b3JlLnNldChrZXksIGVudHJ5KTtcblxuICAgIHJldHVybiB7XG4gICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlbWFpbmluZzogY29uZmlnLm1heFJlcXVlc3RzIC0gMSxcbiAgICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lLFxuICAgICAgc291cmNlOiAnbWVtb3J5JyxcbiAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBjYWNoZUhpdDogZmFsc2UsXG4gICAgICAgIGtleUdlbmVyYXRlZDoga2V5XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIEluY3JlbWVudGFyIGNvbnRhZG9yXG4gIGVudHJ5LmNvdW50Kys7XG4gIG1lbW9yeVN0b3JlLnNldChrZXksIGVudHJ5KTtcblxuICBjb25zdCBhbGxvd2VkID0gZW50cnkuY291bnQgPD0gY29uZmlnLm1heFJlcXVlc3RzO1xuICBjb25zdCByZW1haW5pbmcgPSBNYXRoLm1heCgwLCBjb25maWcubWF4UmVxdWVzdHMgLSBlbnRyeS5jb3VudCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbGxvd2VkLFxuICAgIGxpbWl0OiBjb25maWcubWF4UmVxdWVzdHMsXG4gICAgcmVtYWluaW5nLFxuICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lLFxuICAgIHJldHJ5QWZ0ZXI6IGFsbG93ZWQgPyB1bmRlZmluZWQgOiBNYXRoLmNlaWwoKGVudHJ5LnJlc2V0VGltZSAtIG5vdykgLyAxMDAwKSxcbiAgICBzb3VyY2U6ICdtZW1vcnknLFxuICAgIG1ldHJpY3M6IHtcbiAgICAgIHJlc3BvbnNlVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgIGNhY2hlSGl0OiB0cnVlLFxuICAgICAga2V5R2VuZXJhdGVkOiBrZXlcbiAgICB9XG4gIH07XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DScOTTiBQUklOQ0lQQUwgREUgUkFURSBMSU1JVElOR1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBGdW5jacOzbiBwcmluY2lwYWwgZGUgcmF0ZSBsaW1pdGluZyBlbnRlcnByaXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0VudGVycHJpc2VSYXRlTGltaXQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QsXG4gIGNvbmZpZ05hbWU6IGtleW9mIHR5cGVvZiBFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHUyxcbiAgY3VzdG9tQ29uZmlnPzogUGFydGlhbDxFbnRlcnByaXNlUmF0ZUxpbWl0Q29uZmlnPlxuKTogUHJvbWlzZTxFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0PiB7XG4gIGNvbnN0IGJhc2VDb25maWcgPSBFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHU1tjb25maWdOYW1lXTtcblxuICBpZiAoIWJhc2VDb25maWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWxsb3dlZDogdHJ1ZSxcbiAgICAgIGxpbWl0OiAxMDAwLFxuICAgICAgcmVtYWluaW5nOiA5OTksXG4gICAgICByZXNldFRpbWU6IERhdGUubm93KCkgKyA2MDAwMCxcbiAgICAgIGVycm9yOiBgQ29uZmlndXJhY2nDs24gJyR7Y29uZmlnTmFtZX0nIG5vIGVuY29udHJhZGFgLFxuICAgICAgY29kZTogJ0NPTkZJR19OT1RfRk9VTkQnLFxuICAgICAgc291cmNlOiAnZXJyb3InXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IHsgLi4uYmFzZUNvbmZpZywgLi4uY3VzdG9tQ29uZmlnIH07XG4gIGNvbnN0IGtleUdlbmVyYXRvciA9IGNvbmZpZy5rZXlHZW5lcmF0b3IgfHwgaHlicmlkS2V5R2VuZXJhdG9yO1xuICBjb25zdCBrZXkgPSBrZXlHZW5lcmF0b3IocmVxdWVzdCk7XG5cbiAgbGV0IHJlc3VsdDogRW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdDtcblxuICB0cnkge1xuICAgIC8vIEludGVudGFyIFJlZGlzIHByaW1lcm8gc2kgZXN0w6EgaGFiaWxpdGFkb1xuICAgIGlmIChjb25maWcuZW5hYmxlUmVkaXMgIT09IGZhbHNlICYmIGF3YWl0IGlzUmVkaXNBdmFpbGFibGUoKSkge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgcmF0ZUxpbWl0V2l0aFJlZGlzKGtleSwgY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gcmF0ZUxpbWl0V2l0aE1lbW9yeShrZXksIGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIG3DqXRyaWNhcyBzaSBlc3TDoSBoYWJpbGl0YWRvXG4gICAgaWYgKGNvbmZpZy5lbmFibGVNZXRyaWNzKSB7XG4gICAgICBjb25zdCBpcCA9IGdldENsaWVudElQKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZW5kcG9pbnQgPSBnZXRFbmRwb2ludChyZXF1ZXN0KTtcbiAgICAgIG1ldHJpY3NDb2xsZWN0b3IucmVjb3JkUmVxdWVzdChyZXN1bHQsIGlwLCBlbmRwb2ludCk7XG4gICAgfVxuXG4gICAgLy8gTG9nZ2luZyBzaSBlc3TDoSBoYWJpbGl0YWRvXG4gICAgaWYgKGNvbmZpZy5lbmFibGVMb2dnaW5nKSB7XG4gICAgICBpZiAoIXJlc3VsdC5hbGxvd2VkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW1JBVEVfTElNSVRdIEzDrW1pdGUgZXhjZWRpZG8gcGFyYSAke2tleX06ICR7cmVzdWx0LnJlbWFpbmluZ30vJHtyZXN1bHQubGltaXR9YCk7XG5cbiAgICAgICAgLy8gQ2FsbGJhY2sgcGVyc29uYWxpemFkbyBzaSBlc3TDoSBkZWZpbmlkb1xuICAgICAgICBpZiAoY29uZmlnLm9uTGltaXRSZWFjaGVkKSB7XG4gICAgICAgICAgY29uZmlnLm9uTGltaXRSZWFjaGVkKGtleSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tSQVRFX0xJTUlUXSBFcnJvciBlbiBjaGVja0VudGVycHJpc2VSYXRlTGltaXQ6JywgZXJyb3IpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQ6IHRydWUsIC8vIFBlcm1pdGlyIGVuIGNhc28gZGUgZXJyb3JcbiAgICAgIGxpbWl0OiBjb25maWcubWF4UmVxdWVzdHMsXG4gICAgICByZW1haW5pbmc6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlc2V0VGltZTogRGF0ZS5ub3coKSArIGNvbmZpZy53aW5kb3dNcyxcbiAgICAgIGVycm9yOiAnRXJyb3IgaW50ZXJubyBlbiByYXRlIGxpbWl0aW5nJyxcbiAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgICBzb3VyY2U6ICdlcnJvcidcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1MiLCJjaGVja0VudGVycHJpc2VSYXRlTGltaXQiLCJlbmRwb2ludEtleUdlbmVyYXRvciIsImh5YnJpZEtleUdlbmVyYXRvciIsImlwS2V5R2VuZXJhdG9yIiwibWVtb3J5U3RvcmUiLCJtZXRyaWNzQ29sbGVjdG9yIiwidXNlcktleUdlbmVyYXRvciIsIkNSSVRJQ0FMX0FVVEgiLCJ3aW5kb3dNcyIsIm1heFJlcXVlc3RzIiwibWVzc2FnZSIsImVuYWJsZVJlZGlzIiwiZW5hYmxlTWV0cmljcyIsImVuYWJsZUxvZ2dpbmciLCJBRE1JTl9BUEkiLCJQQVlNRU5UX0FQSSIsIm9uTGltaXRSZWFjaGVkIiwia2V5IiwicmVxdWVzdCIsImNvbnNvbGUiLCJ3YXJuIiwiUFVCTElDX0FQSSIsIldFQkhPT0tfQVBJIiwiU0VBUkNIX0FQSSIsIlVQTE9BRF9BUEkiLCJERUJVR19BUEkiLCJpcCIsImdldENsaWVudElQIiwidXNlcklkIiwiZ2V0VXNlcklkIiwiZW5kcG9pbnQiLCJnZXRFbmRwb2ludCIsInVzZXJQYXJ0IiwiaGVhZGVycyIsImhlYWRlciIsImdldCIsImhlYWRlclZhbHVlIiwiQXJyYXkiLCJpc0FycmF5Iiwic3BsaXQiLCJ0cmltIiwiZW50ZXJwcmlzZUF1dGgiLCJhdXRoIiwibmV4dFVybCIsInBhdGhuYW1lIiwidXJsIiwiVVJMIiwiTWVtb3J5UmF0ZUxpbWl0U3RvcmUiLCJzdG9yZSIsIk1hcCIsImNsZWFudXBJbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYW51cCIsImVudHJ5IiwiRGF0ZSIsIm5vdyIsInJlc2V0VGltZSIsImRlbGV0ZSIsInNldCIsImluY3JlbWVudCIsImNvdW50IiwiY2xlYW5lZCIsImVudHJpZXMiLCJsb2ciLCJnZXRTdGF0cyIsInNpemUiLCJtZW1vcnlVc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJkZXN0cm95IiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiUmF0ZUxpbWl0TWV0cmljc0NvbGxlY3RvciIsInJlY29yZFJlcXVlc3QiLCJyZXN1bHQiLCJtZXRyaWNzIiwidG90YWxSZXF1ZXN0cyIsImFsbG93ZWQiLCJhbGxvd2VkUmVxdWVzdHMiLCJibG9ja2VkUmVxdWVzdHMiLCJjdXJyZW50Q291bnQiLCJibG9ja2VkSVBzIiwic291cmNlIiwicmVkaXNIaXRzIiwibWVtb3J5RmFsbGJhY2tzIiwiZXJyb3JzIiwicmVzcG9uc2VUaW1lIiwicmVzcG9uc2VUaW1lcyIsInB1c2giLCJzbGljZSIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJyZWR1Y2UiLCJhIiwiYiIsImVuZHBvaW50Q291bnQiLCJlbmRwb2ludENvdW50cyIsInVwZGF0ZVRvcExpc3RzIiwidG9wQmxvY2tlZElQcyIsImZyb20iLCJzb3J0IiwibWFwIiwidG9wRW5kcG9pbnRzIiwiZ2V0TWV0cmljcyIsInJlc2V0IiwicmF0ZUxpbWl0V2l0aFJlZGlzIiwiY29uZmlnIiwic3RhcnRUaW1lIiwiZW50ZXJwcmlzZVJhdGVMaW1pdCIsImxpbWl0IiwicmVtYWluaW5nIiwicmV0cnlBZnRlciIsInVuZGVmaW5lZCIsIk1hdGgiLCJjZWlsIiwiY2FjaGVIaXQiLCJrZXlHZW5lcmF0ZWQiLCJyZWRpcyIsIndpbmRvdyIsImZsb29yIiwicmVkaXNLZXkiLCJwaXBlbGluZSIsImluY3IiLCJleHBpcmUiLCJyZXN1bHRzIiwiZXhlYyIsIm1heCIsImVycm9yIiwicmF0ZUxpbWl0V2l0aE1lbW9yeSIsImZpcnN0UmVxdWVzdCIsImNvbmZpZ05hbWUiLCJjdXN0b21Db25maWciLCJiYXNlQ29uZmlnIiwiY29kZSIsImtleUdlbmVyYXRvciIsImlzUmVkaXNBdmFpbGFibGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7Ozs7Ozs7Ozs7UUF5RFlBO2VBQUFBOztRQW9pQlNDO2VBQUFBOztRQXJiTkM7ZUFBQUE7O1FBVUFDO2VBQUFBOztRQTdCQUM7ZUFBQUE7O1FBNFRQQztlQUFBQTs7UUFBYUM7ZUFBQUE7O1FBcFROQztlQUFBQTs7O3VCQXpKc0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFEL0MsTUFBTVAsZ0NBQTJFO0lBQ3RGLHdCQUF3QjtJQUN4QlEsZUFBZTtRQUNiQyxVQUFVLEtBQUssS0FBSztRQUNwQkMsYUFBYTtRQUNiQyxTQUFTO1FBQ1RDLGFBQWE7UUFDYkMsZUFBZTtRQUNmQyxlQUFlO0lBQ2pCO0lBRUEsYUFBYTtJQUNiQyxXQUFXO1FBQ1ROLFVBQVUsSUFBSSxLQUFLO1FBQ25CQyxhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsYUFBYTtRQUNiQyxlQUFlO1FBQ2ZDLGVBQWU7SUFDakI7SUFFQSxnQkFBZ0I7SUFDaEJFLGFBQWE7UUFDWFAsVUFBVSxLQUFLLEtBQUs7UUFDcEJDLGFBQWE7UUFDYkMsU0FBUztRQUNUQyxhQUFhO1FBQ2JDLGVBQWU7UUFDZkMsZUFBZTtRQUNmRyxnQkFBZ0IsQ0FBQ0MsS0FBS0M7WUFDcEJDLFFBQVFDLElBQUksQ0FBQyxDQUFDLDBDQUEwQyxFQUFFSCxLQUFLO1FBQ2pFO0lBQ0Y7SUFFQSw2QkFBNkI7SUFDN0JJLFlBQVk7UUFDVmIsVUFBVSxJQUFJLEtBQUs7UUFDbkJDLGFBQWE7UUFDYkMsU0FBUztRQUNUQyxhQUFhO1FBQ2JDLGVBQWU7UUFDZkMsZUFBZSxNQUFNLDJCQUEyQjtJQUNs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