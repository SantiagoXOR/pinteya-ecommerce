4efec7b95a25125fa502ccf9af9d9f9d
// ===================================
// PINTEYA E-COMMERCE - CART PERSISTENCE MIDDLEWARE
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    cartPersistenceMiddleware: function() {
        return cartPersistenceMiddleware;
    },
    clearCartFromStorage: function() {
        return clearCartFromStorage;
    },
    loadCartFromStorage: function() {
        return loadCartFromStorage;
    },
    loadUserCart: function() {
        return loadUserCart;
    },
    migrateTemporaryCart: function() {
        return migrateTemporaryCart;
    },
    saveUserCart: function() {
        return saveUserCart;
    },
    useCartPersistence: function() {
        return useCartPersistence;
    }
});
// Clave para localStorage
const CART_STORAGE_KEY = 'pinteya-cart';
const loadCartFromStorage = ()=>{
    // Solo ejecutar en el cliente
    if (typeof window === 'undefined') {
        return [];
    }
    try {
        const stored = localStorage.getItem(CART_STORAGE_KEY);
        if (!stored) {
            return [];
        }
        const parsed = JSON.parse(stored);
        // Verificar que no sea muy antiguo (7 días)
        const maxAge = 7 * 24 * 60 * 60 * 1000; // 7 días en ms
        const isExpired = Date.now() - parsed.timestamp > maxAge;
        if (isExpired) {
            localStorage.removeItem(CART_STORAGE_KEY);
            return [];
        }
        return parsed.items || [];
    } catch (error) {
        console.warn('Error loading cart from localStorage:', error);
        // Limpiar localStorage corrupto
        localStorage.removeItem(CART_STORAGE_KEY);
        return [];
    }
};
// Función para guardar el carrito en localStorage
const saveCartToStorage = (cartItems)=>{
    // Solo ejecutar en el cliente
    if (typeof window === 'undefined') {
        return;
    }
    try {
        // Si el carrito está vacío, limpiar localStorage
        if (cartItems.length === 0) {
            localStorage.removeItem(CART_STORAGE_KEY);
            return;
        }
        const dataToStore = {
            items: cartItems,
            timestamp: Date.now(),
            version: '1.0.0'
        };
        localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(dataToStore));
    } catch (error) {
        console.warn('Error saving cart to localStorage:', error);
    }
};
const clearCartFromStorage = ()=>{
    if (typeof window === 'undefined') {
        return;
    }
    try {
        localStorage.removeItem(CART_STORAGE_KEY);
    } catch (error) {
        console.warn('Error clearing cart from localStorage:', error);
    }
};
// Variable para manejar debounce
let saveTimeout = null;
const cartPersistenceMiddleware = (store)=>(next)=>(action)=>{
            // Ejecutar la acción primero
            const result = next(action);
            // Solo persistir acciones relacionadas con el carrito
            if (action.type?.startsWith('cart/')) {
                const state = store.getState();
                const cartItems = state.cartReducer.items;
                // Limpiar timeout anterior si existe
                if (saveTimeout) {
                    clearTimeout(saveTimeout);
                }
                // Guardar en localStorage con debounce más largo para evitar escrituras excesivas
                saveTimeout = setTimeout(()=>{
                    // Solo guardar si hay items o si se está vaciando el carrito
                    if (cartItems.length > 0 || action.type === 'cart/removeAllItemsFromCart') {
                        saveCartToStorage(cartItems);
                    }
                    saveTimeout = null;
                }, 500); // Aumentado de 100ms a 500ms
            }
            return result;
        };
const useCartPersistence = ()=>{
    const loadCart = ()=>loadCartFromStorage();
    const clearCart = ()=>clearCartFromStorage();
    return {
        loadCart,
        clearCart
    };
};
const migrateTemporaryCart = async (temporaryCartItems, userId)=>{
    try {
        // Aquí se podría implementar la lógica para guardar el carrito
        // en la base de datos asociado al usuario
        // Por ahora, simplemente limpiamos el localStorage
        // ya que el carrito se mantendrá en Redux
        console.log(`Migrating ${temporaryCartItems.length} items for user ${userId}`);
        // En una implementación completa, aquí haríamos:
        // 1. Enviar los items al backend para asociarlos al usuario
        // 2. Limpiar el localStorage
        // 3. Cargar el carrito del usuario desde el backend
        return true;
    } catch (error) {
        console.error('Error migrating temporary cart:', error);
        return false;
    }
};
const loadUserCart = async (userId)=>{
    try {
        // Aquí se implementaría la lógica para cargar el carrito
        // del usuario desde la base de datos
        console.log(`Loading cart for user ${userId}`);
        // En una implementación completa, aquí haríamos:
        // 1. Hacer una petición al backend para obtener el carrito del usuario
        // 2. Retornar los items del carrito
        // Por ahora, retornamos un array vacío
        return [];
    } catch (error) {
        console.error('Error loading user cart:', error);
        return [];
    }
};
const saveUserCart = async (userId, cartItems)=>{
    try {
        // Aquí se implementaría la lógica para guardar el carrito
        // del usuario en la base de datos
        console.log(`Saving ${cartItems.length} items for user ${userId}`);
        // En una implementación completa, aquí haríamos:
        // 1. Enviar los items al backend para guardarlos asociados al usuario
        // 2. Manejar la respuesta del backend
        return true;
    } catch (error) {
        console.error('Error saving user cart:', error);
        return false;
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xccmVkdXhcXG1pZGRsZXdhcmVcXGNhcnRQZXJzaXN0ZW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBDQVJUIFBFUlNJU1RFTkNFIE1JRERMRVdBUkVcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IE1pZGRsZXdhcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcclxuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xyXG5cclxuLy8gQ2xhdmUgcGFyYSBsb2NhbFN0b3JhZ2VcclxuY29uc3QgQ0FSVF9TVE9SQUdFX0tFWSA9ICdwaW50ZXlhLWNhcnQnO1xyXG5cclxuLy8gVGlwb3MgcGFyYSBlbCBlc3RhZG8gcGVyc2lzdGlkb1xyXG5pbnRlcmZhY2UgUGVyc2lzdGVkQ2FydFN0YXRlIHtcclxuICBpdGVtczogYW55W107XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgdmVyc2lvbjogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBGdW5jacOzbiBwYXJhIGNhcmdhciBlbCBjYXJyaXRvIGRlc2RlIGxvY2FsU3RvcmFnZVxyXG5leHBvcnQgY29uc3QgbG9hZENhcnRGcm9tU3RvcmFnZSA9ICgpOiBhbnlbXSA9PiB7XHJcbiAgLy8gU29sbyBlamVjdXRhciBlbiBlbCBjbGllbnRlXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQ0FSVF9TVE9SQUdFX0tFWSk7XHJcbiAgICBpZiAoIXN0b3JlZCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFyc2VkOiBQZXJzaXN0ZWRDYXJ0U3RhdGUgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICBcclxuICAgIC8vIFZlcmlmaWNhciBxdWUgbm8gc2VhIG11eSBhbnRpZ3VvICg3IGTDrWFzKVxyXG4gICAgY29uc3QgbWF4QWdlID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDcgZMOtYXMgZW4gbXNcclxuICAgIGNvbnN0IGlzRXhwaXJlZCA9IERhdGUubm93KCkgLSBwYXJzZWQudGltZXN0YW1wID4gbWF4QWdlO1xyXG4gICAgXHJcbiAgICBpZiAoaXNFeHBpcmVkKSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKENBUlRfU1RPUkFHRV9LRVkpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZC5pdGVtcyB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS53YXJuKCdFcnJvciBsb2FkaW5nIGNhcnQgZnJvbSBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xyXG4gICAgLy8gTGltcGlhciBsb2NhbFN0b3JhZ2UgY29ycnVwdG9cclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKENBUlRfU1RPUkFHRV9LRVkpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgZ3VhcmRhciBlbCBjYXJyaXRvIGVuIGxvY2FsU3RvcmFnZVxyXG5jb25zdCBzYXZlQ2FydFRvU3RvcmFnZSA9IChjYXJ0SXRlbXM6IGFueVtdKTogdm9pZCA9PiB7XHJcbiAgLy8gU29sbyBlamVjdXRhciBlbiBlbCBjbGllbnRlXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gU2kgZWwgY2Fycml0byBlc3TDoSB2YWPDrW8sIGxpbXBpYXIgbG9jYWxTdG9yYWdlXHJcbiAgICBpZiAoY2FydEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShDQVJUX1NUT1JBR0VfS0VZKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGFUb1N0b3JlOiBQZXJzaXN0ZWRDYXJ0U3RhdGUgPSB7XHJcbiAgICAgIGl0ZW1zOiBjYXJ0SXRlbXMsXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgdmVyc2lvbjogJzEuMC4wJ1xyXG4gICAgfTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShDQVJUX1NUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhVG9TdG9yZSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHNhdmluZyBjYXJ0IHRvIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRnVuY2nDs24gcGFyYSBsaW1waWFyIGVsIGNhcnJpdG8gZGVsIGxvY2FsU3RvcmFnZVxyXG5leHBvcnQgY29uc3QgY2xlYXJDYXJ0RnJvbVN0b3JhZ2UgPSAoKTogdm9pZCA9PiB7XHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQ0FSVF9TVE9SQUdFX0tFWSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybignRXJyb3IgY2xlYXJpbmcgY2FydCBmcm9tIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gVmFyaWFibGUgcGFyYSBtYW5lamFyIGRlYm91bmNlXHJcbmxldCBzYXZlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbi8vIE1pZGRsZXdhcmUgcGFyYSBwZXJzaXN0aXIgZWwgY2Fycml0byBhdXRvbcOhdGljYW1lbnRlXHJcbmV4cG9ydCBjb25zdCBjYXJ0UGVyc2lzdGVuY2VNaWRkbGV3YXJlOiBNaWRkbGV3YXJlID1cclxuICAoc3RvcmUpID0+IChuZXh0KSA9PiAoYWN0aW9uOiBhbnkpID0+IHtcclxuICAgIC8vIEVqZWN1dGFyIGxhIGFjY2nDs24gcHJpbWVyb1xyXG4gICAgY29uc3QgcmVzdWx0ID0gbmV4dChhY3Rpb24pO1xyXG5cclxuICAgIC8vIFNvbG8gcGVyc2lzdGlyIGFjY2lvbmVzIHJlbGFjaW9uYWRhcyBjb24gZWwgY2Fycml0b1xyXG4gICAgaWYgKGFjdGlvbi50eXBlPy5zdGFydHNXaXRoKCdjYXJ0LycpKSB7XHJcbiAgICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKSBhcyBSb290U3RhdGU7XHJcbiAgICAgIGNvbnN0IGNhcnRJdGVtcyA9IHN0YXRlLmNhcnRSZWR1Y2VyLml0ZW1zO1xyXG5cclxuICAgICAgLy8gTGltcGlhciB0aW1lb3V0IGFudGVyaW9yIHNpIGV4aXN0ZVxyXG4gICAgICBpZiAoc2F2ZVRpbWVvdXQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHdWFyZGFyIGVuIGxvY2FsU3RvcmFnZSBjb24gZGVib3VuY2UgbcOhcyBsYXJnbyBwYXJhIGV2aXRhciBlc2NyaXR1cmFzIGV4Y2VzaXZhc1xyXG4gICAgICBzYXZlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vIFNvbG8gZ3VhcmRhciBzaSBoYXkgaXRlbXMgbyBzaSBzZSBlc3TDoSB2YWNpYW5kbyBlbCBjYXJyaXRvXHJcbiAgICAgICAgaWYgKGNhcnRJdGVtcy5sZW5ndGggPiAwIHx8IGFjdGlvbi50eXBlID09PSAnY2FydC9yZW1vdmVBbGxJdGVtc0Zyb21DYXJ0Jykge1xyXG4gICAgICAgICAgc2F2ZUNhcnRUb1N0b3JhZ2UoY2FydEl0ZW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2F2ZVRpbWVvdXQgPSBudWxsO1xyXG4gICAgICB9LCA1MDApOyAvLyBBdW1lbnRhZG8gZGUgMTAwbXMgYSA1MDBtc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxuXHJcbi8vIEhvb2sgcGVyc29uYWxpemFkbyBwYXJhIG1hbmVqYXIgbGEgcGVyc2lzdGVuY2lhIGRlbCBjYXJyaXRvXHJcbmV4cG9ydCBjb25zdCB1c2VDYXJ0UGVyc2lzdGVuY2UgPSAoKSA9PiB7XHJcbiAgY29uc3QgbG9hZENhcnQgPSAoKSA9PiBsb2FkQ2FydEZyb21TdG9yYWdlKCk7XHJcbiAgY29uc3QgY2xlYXJDYXJ0ID0gKCkgPT4gY2xlYXJDYXJ0RnJvbVN0b3JhZ2UoKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxvYWRDYXJ0LFxyXG4gICAgY2xlYXJDYXJ0XHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgbWlncmFyIGNhcnJpdG8gdGVtcG9yYWwgYSB1c3VhcmlvIGF1dGVudGljYWRvXHJcbmV4cG9ydCBjb25zdCBtaWdyYXRlVGVtcG9yYXJ5Q2FydCA9IGFzeW5jIChcclxuICB0ZW1wb3JhcnlDYXJ0SXRlbXM6IGFueVtdLFxyXG4gIHVzZXJJZDogc3RyaW5nXHJcbik6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBBcXXDrSBzZSBwb2Ryw61hIGltcGxlbWVudGFyIGxhIGzDs2dpY2EgcGFyYSBndWFyZGFyIGVsIGNhcnJpdG9cclxuICAgIC8vIGVuIGxhIGJhc2UgZGUgZGF0b3MgYXNvY2lhZG8gYWwgdXN1YXJpb1xyXG4gICAgLy8gUG9yIGFob3JhLCBzaW1wbGVtZW50ZSBsaW1waWFtb3MgZWwgbG9jYWxTdG9yYWdlXHJcbiAgICAvLyB5YSBxdWUgZWwgY2Fycml0byBzZSBtYW50ZW5kcsOhIGVuIFJlZHV4XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgJHt0ZW1wb3JhcnlDYXJ0SXRlbXMubGVuZ3RofSBpdGVtcyBmb3IgdXNlciAke3VzZXJJZH1gKTtcclxuICAgIFxyXG4gICAgLy8gRW4gdW5hIGltcGxlbWVudGFjacOzbiBjb21wbGV0YSwgYXF1w60gaGFyw61hbW9zOlxyXG4gICAgLy8gMS4gRW52aWFyIGxvcyBpdGVtcyBhbCBiYWNrZW5kIHBhcmEgYXNvY2lhcmxvcyBhbCB1c3VhcmlvXHJcbiAgICAvLyAyLiBMaW1waWFyIGVsIGxvY2FsU3RvcmFnZVxyXG4gICAgLy8gMy4gQ2FyZ2FyIGVsIGNhcnJpdG8gZGVsIHVzdWFyaW8gZGVzZGUgZWwgYmFja2VuZFxyXG4gICAgXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbWlncmF0aW5nIHRlbXBvcmFyeSBjYXJ0OicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGdW5jacOzbiBwYXJhIGNhcmdhciBjYXJyaXRvIGRlIHVzdWFyaW8gYXV0ZW50aWNhZG9cclxuZXhwb3J0IGNvbnN0IGxvYWRVc2VyQ2FydCA9IGFzeW5jICh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+ID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQXF1w60gc2UgaW1wbGVtZW50YXLDrWEgbGEgbMOzZ2ljYSBwYXJhIGNhcmdhciBlbCBjYXJyaXRvXHJcbiAgICAvLyBkZWwgdXN1YXJpbyBkZXNkZSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIGNhcnQgZm9yIHVzZXIgJHt1c2VySWR9YCk7XHJcbiAgICBcclxuICAgIC8vIEVuIHVuYSBpbXBsZW1lbnRhY2nDs24gY29tcGxldGEsIGFxdcOtIGhhcsOtYW1vczpcclxuICAgIC8vIDEuIEhhY2VyIHVuYSBwZXRpY2nDs24gYWwgYmFja2VuZCBwYXJhIG9idGVuZXIgZWwgY2Fycml0byBkZWwgdXN1YXJpb1xyXG4gICAgLy8gMi4gUmV0b3JuYXIgbG9zIGl0ZW1zIGRlbCBjYXJyaXRvXHJcbiAgICBcclxuICAgIC8vIFBvciBhaG9yYSwgcmV0b3JuYW1vcyB1biBhcnJheSB2YWPDrW9cclxuICAgIHJldHVybiBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyB1c2VyIGNhcnQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgZ3VhcmRhciBjYXJyaXRvIGRlIHVzdWFyaW8gYXV0ZW50aWNhZG9cclxuZXhwb3J0IGNvbnN0IHNhdmVVc2VyQ2FydCA9IGFzeW5jIChcclxuICB1c2VySWQ6IHN0cmluZywgXHJcbiAgY2FydEl0ZW1zOiBhbnlbXVxyXG4pOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQXF1w60gc2UgaW1wbGVtZW50YXLDrWEgbGEgbMOzZ2ljYSBwYXJhIGd1YXJkYXIgZWwgY2Fycml0b1xyXG4gICAgLy8gZGVsIHVzdWFyaW8gZW4gbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgU2F2aW5nICR7Y2FydEl0ZW1zLmxlbmd0aH0gaXRlbXMgZm9yIHVzZXIgJHt1c2VySWR9YCk7XHJcbiAgICBcclxuICAgIC8vIEVuIHVuYSBpbXBsZW1lbnRhY2nDs24gY29tcGxldGEsIGFxdcOtIGhhcsOtYW1vczpcclxuICAgIC8vIDEuIEVudmlhciBsb3MgaXRlbXMgYWwgYmFja2VuZCBwYXJhIGd1YXJkYXJsb3MgYXNvY2lhZG9zIGFsIHVzdWFyaW9cclxuICAgIC8vIDIuIE1hbmVqYXIgbGEgcmVzcHVlc3RhIGRlbCBiYWNrZW5kXHJcbiAgICBcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgdXNlciBjYXJ0OicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJjYXJ0UGVyc2lzdGVuY2VNaWRkbGV3YXJlIiwiY2xlYXJDYXJ0RnJvbVN0b3JhZ2UiLCJsb2FkQ2FydEZyb21TdG9yYWdlIiwibG9hZFVzZXJDYXJ0IiwibWlncmF0ZVRlbXBvcmFyeUNhcnQiLCJzYXZlVXNlckNhcnQiLCJ1c2VDYXJ0UGVyc2lzdGVuY2UiLCJDQVJUX1NUT1JBR0VfS0VZIiwid2luZG93Iiwic3RvcmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsIm1heEFnZSIsImlzRXhwaXJlZCIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXAiLCJyZW1vdmVJdGVtIiwiaXRlbXMiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwic2F2ZUNhcnRUb1N0b3JhZ2UiLCJjYXJ0SXRlbXMiLCJsZW5ndGgiLCJkYXRhVG9TdG9yZSIsInZlcnNpb24iLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2F2ZVRpbWVvdXQiLCJzdG9yZSIsIm5leHQiLCJhY3Rpb24iLCJyZXN1bHQiLCJ0eXBlIiwic3RhcnRzV2l0aCIsInN0YXRlIiwiZ2V0U3RhdGUiLCJjYXJ0UmVkdWNlciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJsb2FkQ2FydCIsImNsZWFyQ2FydCIsInRlbXBvcmFyeUNhcnRJdGVtcyIsInVzZXJJZCIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLG1EQUFtRDtBQUNuRCxzQ0FBc0M7Ozs7Ozs7Ozs7OztJQTJGekJBLHlCQUF5QjtlQUF6QkE7O0lBaEJBQyxvQkFBb0I7ZUFBcEJBOztJQTNEQUMsbUJBQW1CO2VBQW5CQTs7SUE0SUFDLFlBQVk7ZUFBWkE7O0lBekJB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