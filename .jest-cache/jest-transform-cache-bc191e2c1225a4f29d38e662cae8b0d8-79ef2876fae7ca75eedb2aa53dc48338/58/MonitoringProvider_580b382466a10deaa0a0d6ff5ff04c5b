171ed3645452804b016492c1763c13da
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get MonitoringProvider () {
        return MonitoringProvider;
    },
    get MonitoringStatus () {
        return MonitoringStatus;
    },
    get useErrorReporting () {
        return useErrorReporting;
    },
    get useMonitoring () {
        return useMonitoring;
    },
    get useMonitoringStats () {
        return useMonitoringStats;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _proactivemonitoring = require("../lib/monitoring/proactive-monitoring");
const _logger = require("../lib/logger");
const _ErrorBoundary = require("../components/ErrorBoundary");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const MonitoringContext = /*#__PURE__*/ (0, _react.createContext)({
    isInitialized: false,
    isMonitoring: false,
    error: null
});
const useMonitoring = ()=>{
    const context = (0, _react.useContext)(MonitoringContext);
    if (!context) {
        throw new Error('useMonitoring must be used within a MonitoringProvider');
    }
    return context;
};
function MonitoringProvider({ children, autoStart = true, enableErrorBoundary = true }) {
    const [isInitialized, setIsInitialized] = (0, _react.useState)(false);
    const [isMonitoring, setIsMonitoring] = (0, _react.useState)(false);
    const [error, setError] = (0, _react.useState)(null);
    (0, _react.useEffect)(()=>{
        const initializeMonitoring = async ()=>{
            try {
                _logger.logger.info(_logger.LogLevel.INFO, 'Initializing proactive monitoring system', {}, _logger.LogCategory.SYSTEM);
                // Configurar el sistema de monitoreo
                _proactivemonitoring.proactiveMonitoring.updateConfig({
                    enabled: true,
                    checkInterval: 30,
                    errorThreshold: 5,
                    responseTimeThreshold: 2000,
                    memoryThreshold: 80,
                    cpuThreshold: 80,
                    enableAutoRecovery: false,
                    notificationChannels: [
                        'email',
                        'slack'
                    ]
                });
                // Iniciar monitoreo automáticamente si está habilitado
                if (autoStart) {
                    (0, _proactivemonitoring.startMonitoring)();
                    setIsMonitoring(true);
                    _logger.logger.info(_logger.LogLevel.INFO, 'Proactive monitoring started automatically', {}, _logger.LogCategory.SYSTEM);
                }
                // Configurar listeners para errores no capturados
                if (typeof window !== 'undefined') {
                    // Errores de JavaScript no capturados
                    window.addEventListener('error', handleGlobalError);
                    // Promesas rechazadas no capturadas
                    window.addEventListener('unhandledrejection', handleUnhandledRejection);
                    // Errores de recursos (imágenes, scripts, etc.)
                    window.addEventListener('error', handleResourceError, true);
                }
                setIsInitialized(true);
                setError(null);
                _logger.logger.info(_logger.LogLevel.INFO, 'Proactive monitoring system initialized successfully', {
                    autoStart,
                    enableErrorBoundary
                }, _logger.LogCategory.SYSTEM);
            } catch (err) {
                const errorMessage = err instanceof Error ? err.message : 'Failed to initialize monitoring';
                setError(errorMessage);
                _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to initialize monitoring system', {
                    error: errorMessage
                }, _logger.LogCategory.SYSTEM);
            }
        };
        initializeMonitoring();
        // Cleanup
        return ()=>{
            if (typeof window !== 'undefined') {
                window.removeEventListener('error', handleGlobalError);
                window.removeEventListener('unhandledrejection', handleUnhandledRejection);
                window.removeEventListener('error', handleResourceError, true);
            }
        };
    }, [
        autoStart
    ]);
    const handleGlobalError = async (event)=>{
        try {
            await _proactivemonitoring.proactiveMonitoring.reportError(event.error || new Error(event.message), {
                source: 'global_error_handler',
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                timestamp: new Date().toISOString(),
                url: window.location.href,
                userAgent: navigator.userAgent
            });
        } catch (reportingError) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to report global error', {
                originalError: event.message,
                reportingError: reportingError instanceof Error ? reportingError.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    };
    const handleUnhandledRejection = async (event)=>{
        try {
            const error = event.reason instanceof Error ? event.reason : new Error(String(event.reason));
            await _proactivemonitoring.proactiveMonitoring.reportError(error, {
                source: 'unhandled_promise_rejection',
                timestamp: new Date().toISOString(),
                url: window.location.href,
                userAgent: navigator.userAgent,
                reason: String(event.reason)
            });
        } catch (reportingError) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to report unhandled promise rejection', {
                originalReason: String(event.reason),
                reportingError: reportingError instanceof Error ? reportingError.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    };
    const handleResourceError = async (event)=>{
        if (event.target && event.target !== window) {
            const target = event.target;
            const tagName = target.tagName?.toLowerCase();
            const src = target.src || target.href;
            if (src && [
                'img',
                'script',
                'link',
                'iframe'
            ].includes(tagName)) {
                try {
                    await _proactivemonitoring.proactiveMonitoring.reportError(new Error(`Resource loading failed: ${tagName} - ${src}`), {
                        source: 'resource_error',
                        resourceType: tagName,
                        resourceUrl: src,
                        timestamp: new Date().toISOString(),
                        url: window.location.href
                    });
                } catch (reportingError) {
                    _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to report resource error', {
                        resourceUrl: src,
                        resourceType: tagName,
                        reportingError: reportingError instanceof Error ? reportingError.message : 'Unknown error'
                    }, _logger.LogCategory.SYSTEM);
                }
            }
        }
    };
    const contextValue = {
        isInitialized,
        isMonitoring,
        error
    };
    const content = /*#__PURE__*/ (0, _jsxruntime.jsx)(MonitoringContext.Provider, {
        value: contextValue,
        children: children
    });
    // Envolver con Error Boundary si está habilitado
    if (enableErrorBoundary) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_ErrorBoundary.ErrorBoundaryWrapper, {
            showDetails: process.env.NODE_ENV === 'development',
            enableReporting: true,
            children: content
        });
    }
    return content;
}
function useErrorReporting() {
    const { isInitialized } = useMonitoring();
    const reportError = _react.default.useCallback(async (error, context)=>{
        if (!isInitialized) {
            _logger.logger.warn(_logger.LogLevel.WARN, 'Monitoring not initialized, error not reported', {
                error: error instanceof Error ? error.message : error
            }, _logger.LogCategory.SYSTEM);
            return;
        }
        try {
            await _proactivemonitoring.proactiveMonitoring.reportError(error, {
                ...context,
                source: 'manual_report',
                timestamp: new Date().toISOString(),
                url: typeof window !== 'undefined' ? window.location.href : 'unknown'
            });
        } catch (reportingError) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to report error manually', {
                originalError: error instanceof Error ? error.message : error,
                reportingError: reportingError instanceof Error ? reportingError.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    }, [
        isInitialized
    ]);
    return {
        reportError,
        isInitialized
    };
}
function useMonitoringStats() {
    const { isInitialized } = useMonitoring();
    const [stats, setStats] = (0, _react.useState)(null);
    const [loading, setLoading] = (0, _react.useState)(false);
    const refreshStats = _react.default.useCallback(async ()=>{
        if (!isInitialized) return;
        try {
            setLoading(true);
            const newStats = await _proactivemonitoring.proactiveMonitoring.getMonitoringStats();
            setStats(newStats);
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to fetch monitoring stats', {
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        } finally{
            setLoading(false);
        }
    }, [
        isInitialized
    ]);
    _react.default.useEffect(()=>{
        if (isInitialized) {
            refreshStats();
            // Actualizar estadísticas cada 30 segundos
            const interval = setInterval(refreshStats, 30000);
            return ()=>clearInterval(interval);
        }
    }, [
        isInitialized,
        refreshStats
    ]);
    return {
        stats,
        loading,
        refreshStats
    };
}
function MonitoringStatus() {
    const { isInitialized, isMonitoring, error } = useMonitoring();
    if (process.env.NODE_ENV !== 'development') {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "fixed bottom-4 right-4 z-50 bg-black text-white text-xs p-2 rounded shadow-lg",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    "Monitoring: ",
                    isInitialized ? '✅' : '❌'
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    "Active: ",
                    isMonitoring ? '✅' : '❌'
                ]
            }),
            error && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "text-red-300",
                children: [
                    "Error: ",
                    error
                ]
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xccHJvdmlkZXJzXFxNb25pdG9yaW5nUHJvdmlkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBwcm9hY3RpdmVNb25pdG9yaW5nLCBzdGFydE1vbml0b3JpbmcgfSBmcm9tICcuLi9saWIvbW9uaXRvcmluZy9wcm9hY3RpdmUtbW9uaXRvcmluZydcbmltcG9ydCB7IGxvZ2dlciwgTG9nTGV2ZWwsIExvZ0NhdGVnb3J5IH0gZnJvbSAnLi4vbGliL2xvZ2dlcidcbmltcG9ydCB7IEVycm9yQm91bmRhcnlXcmFwcGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5J1xuXG5pbnRlcmZhY2UgTW9uaXRvcmluZ0NvbnRleHRUeXBlIHtcbiAgaXNJbml0aWFsaXplZDogYm9vbGVhblxuICBpc01vbml0b3Jpbmc6IGJvb2xlYW5cbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbn1cblxuY29uc3QgTW9uaXRvcmluZ0NvbnRleHQgPSBjcmVhdGVDb250ZXh0PE1vbml0b3JpbmdDb250ZXh0VHlwZT4oe1xuICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgaXNNb25pdG9yaW5nOiBmYWxzZSxcbiAgZXJyb3I6IG51bGxcbn0pXG5cbmV4cG9ydCBjb25zdCB1c2VNb25pdG9yaW5nID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChNb25pdG9yaW5nQ29udGV4dClcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VNb25pdG9yaW5nIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBNb25pdG9yaW5nUHJvdmlkZXInKVxuICB9XG4gIHJldHVybiBjb250ZXh0XG59XG5cbmludGVyZmFjZSBNb25pdG9yaW5nUHJvdmlkZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGVcbiAgYXV0b1N0YXJ0PzogYm9vbGVhblxuICBlbmFibGVFcnJvckJvdW5kYXJ5PzogYm9vbGVhblxufVxuXG5leHBvcnQgZnVuY3Rpb24gTW9uaXRvcmluZ1Byb3ZpZGVyKHtcbiAgY2hpbGRyZW4sXG4gIGF1dG9TdGFydCA9IHRydWUsXG4gIGVuYWJsZUVycm9yQm91bmRhcnkgPSB0cnVlXG59OiBNb25pdG9yaW5nUHJvdmlkZXJQcm9wcykge1xuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2lzTW9uaXRvcmluZywgc2V0SXNNb25pdG9yaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplTW9uaXRvcmluZyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sICdJbml0aWFsaXppbmcgcHJvYWN0aXZlIG1vbml0b3Jpbmcgc3lzdGVtJywge30sIExvZ0NhdGVnb3J5LlNZU1RFTSlcbiAgICAgICAgXG4gICAgICAgIC8vIENvbmZpZ3VyYXIgZWwgc2lzdGVtYSBkZSBtb25pdG9yZW9cbiAgICAgICAgcHJvYWN0aXZlTW9uaXRvcmluZy51cGRhdGVDb25maWcoe1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgY2hlY2tJbnRlcnZhbDogMzAsIC8vIDMwIHNlZ3VuZG9zXG4gICAgICAgICAgZXJyb3JUaHJlc2hvbGQ6IDUsIC8vIDUlIGRlIGVycm9yZXNcbiAgICAgICAgICByZXNwb25zZVRpbWVUaHJlc2hvbGQ6IDIwMDAsIC8vIDIgc2VndW5kb3NcbiAgICAgICAgICBtZW1vcnlUaHJlc2hvbGQ6IDgwLCAvLyA4MCUgZGUgbWVtb3JpYVxuICAgICAgICAgIGNwdVRocmVzaG9sZDogODAsIC8vIDgwJSBkZSBDUFVcbiAgICAgICAgICBlbmFibGVBdXRvUmVjb3Zlcnk6IGZhbHNlLCAvLyBEZXNoYWJpbGl0YWRvIHBvciBzZWd1cmlkYWRcbiAgICAgICAgICBub3RpZmljYXRpb25DaGFubmVsczogWydlbWFpbCcsICdzbGFjayddXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gSW5pY2lhciBtb25pdG9yZW8gYXV0b23DoXRpY2FtZW50ZSBzaSBlc3TDoSBoYWJpbGl0YWRvXG4gICAgICAgIGlmIChhdXRvU3RhcnQpIHtcbiAgICAgICAgICBzdGFydE1vbml0b3JpbmcoKVxuICAgICAgICAgIHNldElzTW9uaXRvcmluZyh0cnVlKVxuICAgICAgICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sICdQcm9hY3RpdmUgbW9uaXRvcmluZyBzdGFydGVkIGF1dG9tYXRpY2FsbHknLCB7fSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29uZmlndXJhciBsaXN0ZW5lcnMgcGFyYSBlcnJvcmVzIG5vIGNhcHR1cmFkb3NcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gRXJyb3JlcyBkZSBKYXZhU2NyaXB0IG5vIGNhcHR1cmFkb3NcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBoYW5kbGVHbG9iYWxFcnJvcilcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcm9tZXNhcyByZWNoYXphZGFzIG5vIGNhcHR1cmFkYXNcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgaGFuZGxlVW5oYW5kbGVkUmVqZWN0aW9uKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVycm9yZXMgZGUgcmVjdXJzb3MgKGltw6FnZW5lcywgc2NyaXB0cywgZXRjLilcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBoYW5kbGVSZXNvdXJjZUVycm9yLCB0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKVxuICAgICAgICBzZXRFcnJvcihudWxsKVxuICAgICAgICBcbiAgICAgICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgJ1Byb2FjdGl2ZSBtb25pdG9yaW5nIHN5c3RlbSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgICAgYXV0b1N0YXJ0LFxuICAgICAgICAgIGVuYWJsZUVycm9yQm91bmRhcnlcbiAgICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBpbml0aWFsaXplIG1vbml0b3JpbmcnXG4gICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCAnRmFpbGVkIHRvIGluaXRpYWxpemUgbW9uaXRvcmluZyBzeXN0ZW0nLCB7XG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZU1vbml0b3JpbmcoKVxuXG4gICAgLy8gQ2xlYW51cFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgaGFuZGxlR2xvYmFsRXJyb3IpXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCBoYW5kbGVVbmhhbmRsZWRSZWplY3Rpb24pXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGhhbmRsZVJlc291cmNlRXJyb3IsIHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbYXV0b1N0YXJ0XSlcblxuICBjb25zdCBoYW5kbGVHbG9iYWxFcnJvciA9IGFzeW5jIChldmVudDogRXJyb3JFdmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcm9hY3RpdmVNb25pdG9yaW5nLnJlcG9ydEVycm9yKGV2ZW50LmVycm9yIHx8IG5ldyBFcnJvcihldmVudC5tZXNzYWdlKSwge1xuICAgICAgICBzb3VyY2U6ICdnbG9iYWxfZXJyb3JfaGFuZGxlcicsXG4gICAgICAgIGZpbGVuYW1lOiBldmVudC5maWxlbmFtZSxcbiAgICAgICAgbGluZW5vOiBldmVudC5saW5lbm8sXG4gICAgICAgIGNvbG5vOiBldmVudC5jb2xubyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChyZXBvcnRpbmdFcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCAnRmFpbGVkIHRvIHJlcG9ydCBnbG9iYWwgZXJyb3InLCB7XG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGV2ZW50Lm1lc3NhZ2UsXG4gICAgICAgIHJlcG9ydGluZ0Vycm9yOiByZXBvcnRpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVwb3J0aW5nRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbiA9IGFzeW5jIChldmVudDogUHJvbWlzZVJlamVjdGlvbkV2ZW50KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVycm9yID0gZXZlbnQucmVhc29uIGluc3RhbmNlb2YgRXJyb3IgPyBldmVudC5yZWFzb24gOiBuZXcgRXJyb3IoU3RyaW5nKGV2ZW50LnJlYXNvbikpXG4gICAgICBhd2FpdCBwcm9hY3RpdmVNb25pdG9yaW5nLnJlcG9ydEVycm9yKGVycm9yLCB7XG4gICAgICAgIHNvdXJjZTogJ3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbicsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICB1c2VyQWdlbnQ6IG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIHJlYXNvbjogU3RyaW5nKGV2ZW50LnJlYXNvbilcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAocmVwb3J0aW5nRXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dMZXZlbC5FUlJPUiwgJ0ZhaWxlZCB0byByZXBvcnQgdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywge1xuICAgICAgICBvcmlnaW5hbFJlYXNvbjogU3RyaW5nKGV2ZW50LnJlYXNvbiksXG4gICAgICAgIHJlcG9ydGluZ0Vycm9yOiByZXBvcnRpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVwb3J0aW5nRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVJlc291cmNlRXJyb3IgPSBhc3luYyAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQgIT09IHdpbmRvdykge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgIGNvbnN0IHNyYyA9ICh0YXJnZXQgYXMgYW55KS5zcmMgfHwgKHRhcmdldCBhcyBhbnkpLmhyZWZcbiAgICAgIFxuICAgICAgaWYgKHNyYyAmJiBbJ2ltZycsICdzY3JpcHQnLCAnbGluaycsICdpZnJhbWUnXS5pbmNsdWRlcyh0YWdOYW1lKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHByb2FjdGl2ZU1vbml0b3JpbmcucmVwb3J0RXJyb3IoXG4gICAgICAgICAgICBuZXcgRXJyb3IoYFJlc291cmNlIGxvYWRpbmcgZmFpbGVkOiAke3RhZ05hbWV9IC0gJHtzcmN9YCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Jlc291cmNlX2Vycm9yJyxcbiAgICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiB0YWdOYW1lLFxuICAgICAgICAgICAgICByZXNvdXJjZVVybDogc3JjLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgfSBjYXRjaCAocmVwb3J0aW5nRXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gcmVwb3J0IHJlc291cmNlIGVycm9yJywge1xuICAgICAgICAgICAgcmVzb3VyY2VVcmw6IHNyYyxcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogdGFnTmFtZSxcbiAgICAgICAgICAgIHJlcG9ydGluZ0Vycm9yOiByZXBvcnRpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVwb3J0aW5nRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogTW9uaXRvcmluZ0NvbnRleHRUeXBlID0ge1xuICAgIGlzSW5pdGlhbGl6ZWQsXG4gICAgaXNNb25pdG9yaW5nLFxuICAgIGVycm9yXG4gIH1cblxuICBjb25zdCBjb250ZW50ID0gKFxuICAgIDxNb25pdG9yaW5nQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dFZhbHVlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L01vbml0b3JpbmdDb250ZXh0LlByb3ZpZGVyPlxuICApXG5cbiAgLy8gRW52b2x2ZXIgY29uIEVycm9yIEJvdW5kYXJ5IHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgaWYgKGVuYWJsZUVycm9yQm91bmRhcnkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEVycm9yQm91bmRhcnlXcmFwcGVyXG4gICAgICAgIHNob3dEZXRhaWxzPXtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J31cbiAgICAgICAgZW5hYmxlUmVwb3J0aW5nPXt0cnVlfVxuICAgICAgPlxuICAgICAgICB7Y29udGVudH1cbiAgICAgIDwvRXJyb3JCb3VuZGFyeVdyYXBwZXI+XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnRcbn1cblxuLyoqXG4gKiBIb29rIHBhcmEgcmVwb3J0YXIgZXJyb3JlcyBtYW51YWxtZW50ZSBkZXNkZSBjb21wb25lbnRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRXJyb3JSZXBvcnRpbmcoKSB7XG4gIGNvbnN0IHsgaXNJbml0aWFsaXplZCB9ID0gdXNlTW9uaXRvcmluZygpXG5cbiAgY29uc3QgcmVwb3J0RXJyb3IgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZXJyb3I6IEVycm9yIHwgc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIGlmICghaXNJbml0aWFsaXplZCkge1xuICAgICAgbG9nZ2VyLndhcm4oTG9nTGV2ZWwuV0FSTiwgJ01vbml0b3Jpbmcgbm90IGluaXRpYWxpemVkLCBlcnJvciBub3QgcmVwb3J0ZWQnLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHJvYWN0aXZlTW9uaXRvcmluZy5yZXBvcnRFcnJvcihlcnJvciwge1xuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICBzb3VyY2U6ICdtYW51YWxfcmVwb3J0JyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVybDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6ICd1bmtub3duJ1xuICAgICAgfSlcbiAgICB9IGNhdGNoIChyZXBvcnRpbmdFcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCAnRmFpbGVkIHRvIHJlcG9ydCBlcnJvciBtYW51YWxseScsIHtcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcixcbiAgICAgICAgcmVwb3J0aW5nRXJyb3I6IHJlcG9ydGluZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyByZXBvcnRpbmdFcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pXG4gICAgfVxuICB9LCBbaXNJbml0aWFsaXplZF0pXG5cbiAgcmV0dXJuIHsgcmVwb3J0RXJyb3IsIGlzSW5pdGlhbGl6ZWQgfVxufVxuXG4vKipcbiAqIEhvb2sgcGFyYSBvYnRlbmVyIGVzdGFkw61zdGljYXMgZGUgbW9uaXRvcmVvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNb25pdG9yaW5nU3RhdHMoKSB7XG4gIGNvbnN0IHsgaXNJbml0aWFsaXplZCB9ID0gdXNlTW9uaXRvcmluZygpXG4gIGNvbnN0IFtzdGF0cywgc2V0U3RhdHNdID0gdXNlU3RhdGU8YW55PihudWxsKVxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCByZWZyZXNoU3RhdHMgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpc0luaXRpYWxpemVkKSByZXR1cm5cblxuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpXG4gICAgICBjb25zdCBuZXdTdGF0cyA9IGF3YWl0IHByb2FjdGl2ZU1vbml0b3JpbmcuZ2V0TW9uaXRvcmluZ1N0YXRzKClcbiAgICAgIHNldFN0YXRzKG5ld1N0YXRzKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gZmV0Y2ggbW9uaXRvcmluZyBzdGF0cycsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9LCBbaXNJbml0aWFsaXplZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNJbml0aWFsaXplZCkge1xuICAgICAgcmVmcmVzaFN0YXRzKClcbiAgICAgIFxuICAgICAgLy8gQWN0dWFsaXphciBlc3RhZMOtc3RpY2FzIGNhZGEgMzAgc2VndW5kb3NcbiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwocmVmcmVzaFN0YXRzLCAzMDAwMClcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKVxuICAgIH1cbiAgfSwgW2lzSW5pdGlhbGl6ZWQsIHJlZnJlc2hTdGF0c10pXG5cbiAgcmV0dXJuIHsgc3RhdHMsIGxvYWRpbmcsIHJlZnJlc2hTdGF0cyB9XG59XG5cbi8qKlxuICogQ29tcG9uZW50ZSBkZSBlc3RhZG8gZGVsIG1vbml0b3JlbyAocGFyYSBkZWJ1Z2dpbmcpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBNb25pdG9yaW5nU3RhdHVzKCkge1xuICBjb25zdCB7IGlzSW5pdGlhbGl6ZWQsIGlzTW9uaXRvcmluZywgZXJyb3IgfSA9IHVzZU1vbml0b3JpbmcoKVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgcmlnaHQtNCB6LTUwIGJnLWJsYWNrIHRleHQtd2hpdGUgdGV4dC14cyBwLTIgcm91bmRlZCBzaGFkb3ctbGdcIj5cbiAgICAgIDxkaXY+TW9uaXRvcmluZzoge2lzSW5pdGlhbGl6ZWQgPyAn4pyFJyA6ICfinYwnfTwvZGl2PlxuICAgICAgPGRpdj5BY3RpdmU6IHtpc01vbml0b3JpbmcgPyAn4pyFJyA6ICfinYwnfTwvZGl2PlxuICAgICAge2Vycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yZWQtMzAwXCI+RXJyb3I6IHtlcnJvcn08L2Rpdj59XG4gICAgPC9kaXY+XG4gIClcbn0iXSwibmFtZXMiOlsiTW9uaXRvcmluZ1Byb3ZpZGVyIiwiTW9uaXRvcmluZ1N0YXR1cyIsInVzZUVycm9yUmVwb3J0aW5nIiwidXNlTW9uaXRvcmluZyIsInVzZU1vbml0b3JpbmdTdGF0cyIsIk1vbml0b3JpbmdDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsImlzSW5pdGlhbGl6ZWQiLCJpc01vbml0b3JpbmciLCJlcnJvciIsImNvbnRleHQiLCJ1c2VDb250ZXh0IiwiRXJyb3IiLCJjaGlsZHJlbiIsImF1dG9TdGFydCIsImVuYWJsZUVycm9yQm91bmRhcnkiLCJzZXRJc0luaXRpYWxpemVkIiwidXNlU3RhdGUiLCJzZXRJc01vbml0b3JpbmciLCJzZXRFcnJvciIsInVzZUVmZmVjdCIsImluaXRpYWxpemVNb25pdG9yaW5nIiwibG9nZ2VyIiwiaW5mbyIsIkxvZ0xldmVsIiwiSU5GTyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwicHJvYWN0aXZlTW9uaXRvcmluZyIsInVwZGF0ZUNvbmZpZyIsImVuYWJsZWQiLCJjaGVja0ludGVydmFsIiwiZXJyb3JUaHJlc2hvbGQiLCJyZXNwb25zZVRpbWVUaHJlc2hvbGQiLCJtZW1vcnlUaHJlc2hvbGQiLCJjcHVUaHJlc2hvbGQiLCJlbmFibGVBdXRvUmVjb3ZlcnkiLCJub3RpZmljYXRpb25DaGFubmVscyIsInN0YXJ0TW9uaXRvcmluZyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVHbG9iYWxFcnJvciIsImhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbiIsImhhbmRsZVJlc291cmNlRXJyb3IiLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwiRVJST1IiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZXBvcnRFcnJvciIsInNvdXJjZSIsImZpbGVuYW1lIiwibGluZW5vIiwiY29sbm8iLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJyZXBvcnRpbmdFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJyZWFzb24iLCJTdHJpbmciLCJvcmlnaW5hbFJlYXNvbiIsInRhcmdldCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInNyYyIsImluY2x1ZGVzIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VVcmwiLCJjb250ZXh0VmFsdWUiLCJjb250ZW50IiwiUHJvdmlkZXIiLCJ2YWx1ZSIsIkVycm9yQm91bmRhcnlXcmFwcGVyIiwic2hvd0RldGFpbHMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJlbmFibGVSZXBvcnRpbmciLCJSZWFjdCIsInVzZUNhbGxiYWNrIiwid2FybiIsIldBUk4iLCJzdGF0cyIsInNldFN0YXRzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJyZWZyZXNoU3RhdHMiLCJuZXdTdGF0cyIsImdldE1vbml0b3JpbmdTdGF0cyIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiZGl2IiwiY2xhc3NOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O1FBaUNnQkE7ZUFBQUE7O1FBK09BQztlQUFBQTs7UUFyRUFDO2VBQUFBOztRQXhMSEM7ZUFBQUE7O1FBd05HQztlQUFBQTs7OzsrREF6T2lFO3FDQUM1Qjt3QkFDUDsrQkFDVDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUXJDLE1BQU1DLGtDQUFvQkMsSUFBQUEsb0JBQWEsRUFBd0I7SUFDN0RDLGVBQWU7SUFDZkMsY0FBYztJQUNkQyxPQUFPO0FBQ1Q7QUFFTyxNQUFNTixnQkFBZ0I7SUFDM0IsTUFBTU8sVUFBVUMsSUFBQUEsaUJBQVUsRUFBQ047SUFDM0IsSUFBSSxDQUFDSyxTQUFTO1FBQ1osTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0lBQ0EsT0FBT0Y7QUFDVDtBQVFPLFNBQVNWLG1CQUFtQixFQUNqQ2EsUUFBUSxFQUNSQyxZQUFZLElBQUksRUFDaEJDLHNCQUFzQixJQUFJLEVBQ0Y7SUFDeEIsTUFBTSxDQUFDUixlQUFlUyxpQkFBaUIsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lBQ25ELE1BQU0sQ0FBQ1QsY0FBY1UsZ0JBQWdCLEdBQUdELElBQUFBLGVBQVEsRUFBQztJQUNqRCxNQUFNLENBQUNSLE9BQU9VLFNBQVMsR0FBR0YsSUFBQUEsZUFBUSxFQUFnQjtJQUVsREcsSUFBQUEsZ0JBQVMsRUFBQztRQUNS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