5f6496b89232d4c769fc4adde62f8f33
/**
 * Tests para las Utilidades de Autenticación Enterprise
 * Verifica que las nuevas utilidades enterprise funcionan correctamente
 */ // Mock de Clerk
"use strict";
jest.mock('@clerk/nextjs/server', ()=>({
        getAuth: jest.fn(),
        auth: jest.fn(),
        clerkClient: jest.fn()
    }));
// Mock de Supabase
jest.mock('@/lib/supabase', ()=>({
        supabaseAdmin: {
            from: jest.fn(()=>({
                    select: jest.fn(()=>({
                            eq: jest.fn(()=>({
                                    single: jest.fn()
                                }))
                        }))
                }))
        }
    }));
// Mock de validaciones de seguridad
jest.mock('@/lib/auth/jwt-validation', ()=>({
        validateJWTIntegrity: jest.fn(),
        validateJWTPermissions: jest.fn()
    }));
jest.mock('@/lib/auth/csrf-protection', ()=>({
        validateRequestOrigin: jest.fn()
    }));
jest.mock('@/lib/auth/rate-limiting', ()=>({
        checkRateLimit: jest.fn(),
        RATE_LIMIT_CONFIGS: {
            admin: {
                windowMs: 300000,
                maxRequests: 30
            },
            general: {
                windowMs: 60000,
                maxRequests: 100
            }
        }
    }));
jest.mock('@/lib/auth/security-audit', ()=>({
        logAuthSuccess: jest.fn(),
        logAuthFailure: jest.fn(),
        logPermissionDenied: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _enterpriseauthutils = require("../lib/auth/enterprise-auth-utils");
const _server = require("@clerk/nextjs/server");
const _jwtvalidation = require("../lib/auth/jwt-validation");
const _csrfprotection = require("../lib/auth/csrf-protection");
const _ratelimiting = require("../lib/auth/rate-limiting");
const _supabase = require("../lib/supabase");
describe('Utilidades de Autenticación Enterprise', ()=>{
    let mockGetAuth;
    let mockAuth;
    let mockValidateJWT;
    let mockValidateJWTPermissions;
    let mockValidateOrigin;
    let mockCheckRateLimit;
    beforeEach(()=>{
        mockGetAuth = _server.getAuth;
        mockAuth = _server.auth;
        mockValidateJWT = _jwtvalidation.validateJWTIntegrity;
        mockValidateJWTPermissions = _jwtvalidation.validateJWTPermissions;
        mockValidateOrigin = _csrfprotection.validateRequestOrigin;
        mockCheckRateLimit = _ratelimiting.checkRateLimit;
        jest.clearAllMocks();
        // Setup default mocks
        mockCheckRateLimit.mockResolvedValue({
            allowed: true,
            limit: 30,
            remaining: 29,
            resetTime: Date.now() + 300000
        });
        mockValidateOrigin.mockResolvedValue({
            valid: true
        });
        mockValidateJWT.mockResolvedValue({
            valid: true,
            payload: {
                sub: 'user_123',
                iss: 'clerk'
            }
        });
        mockValidateJWTPermissions.mockResolvedValue({
            valid: true,
            payload: {
                sub: 'user_123',
                metadata: {
                    role: 'admin'
                }
            }
        });
        // Mock Supabase response
        _supabase.supabaseAdmin.from.mockReturnValue({
            select: jest.fn().mockReturnValue({
                eq: jest.fn().mockReturnValue({
                    single: jest.fn().mockResolvedValue({
                        data: {
                            id: 'profile_123',
                            email: 'admin@test.com',
                            role: 'admin',
                            permissions: [
                                'admin_access',
                                'user_management'
                            ],
                            metadata: {
                                test: true
                            }
                        },
                        error: null
                    })
                })
            })
        });
    });
    describe('getEnterpriseAuthContext', ()=>{
        it('debe crear contexto enterprise completo para usuario admin', async ()=>{
            const mockRequest = {
                query: {},
                headers: {},
                url: 'http://localhost:3000/api/test',
                method: 'GET'
            };
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest, {
                securityLevel: 'critical',
                enableJWTValidation: true,
                enableCSRFProtection: true,
                enableRateLimit: true
            });
            expect(result.success).toBe(true);
            expect(result.context).toBeDefined();
            expect(result.context?.userId).toBe('user_123');
            expect(result.context?.role).toBe('admin');
            expect(result.context?.permissions).toContain('admin_access');
            expect(result.context?.securityLevel).toBe('critical');
            expect(result.context?.validations.jwtValid).toBe(true);
            expect(result.context?.validations.csrfValid).toBe(true);
            expect(result.context?.validations.rateLimitPassed).toBe(true);
        });
        it('debe fallar si rate limit es excedido', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockCheckRateLimit.mockResolvedValue({
                allowed: false,
                limit: 30,
                remaining: 0,
                resetTime: Date.now() + 300000,
                retryAfter: 300,
                error: 'Rate limit exceeded',
                code: 'RATE_LIMIT_EXCEEDED'
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest, {
                enableRateLimit: true,
                rateLimitType: 'admin'
            });
            expect(result.success).toBe(false);
            expect(result.error).toBe('Rate limit exceeded');
            expect(result.code).toBe('RATE_LIMIT_EXCEEDED');
            expect(result.status).toBe(429);
            expect(result.retryAfter).toBe(300);
        });
        it('debe fallar si validación CSRF falla', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockValidateOrigin.mockResolvedValue({
                valid: false,
                error: 'Invalid origin',
                code: 'INVALID_ORIGIN'
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest, {
                enableCSRFProtection: true
            });
            expect(result.success).toBe(false);
            expect(result.error).toBe('Invalid origin');
            expect(result.code).toBe('CSRF_VALIDATION_FAILED');
            expect(result.status).toBe(403);
        });
        it('debe fallar si usuario no está autenticado', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockGetAuth.mockReturnValue({
                userId: null,
                sessionId: null
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest);
            expect(result.success).toBe(false);
            expect(result.error).toBe('Usuario no autenticado');
            expect(result.code).toBe('NOT_AUTHENTICATED');
            expect(result.status).toBe(401);
        });
        it('debe fallar si JWT es inválido', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            mockValidateJWT.mockResolvedValue({
                valid: false,
                error: 'Invalid JWT token',
                code: 'INVALID_TOKEN'
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest, {
                enableJWTValidation: true
            });
            expect(result.success).toBe(false);
            expect(result.error).toBe('Invalid JWT token');
            expect(result.code).toBe('JWT_VALIDATION_FAILED');
            expect(result.status).toBe(401);
        });
        it('debe fallar si permisos son insuficientes', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            // Mock usuario sin permisos admin
            _supabase.supabaseAdmin.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'profile_123',
                                email: 'user@test.com',
                                role: 'user',
                                permissions: [
                                    'basic_access'
                                ]
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _enterpriseauthutils.getEnterpriseAuthContext)(mockRequest, {
                requiredRole: 'admin',
                requiredPermissions: [
                    'admin_access'
                ]
            });
            expect(result.success).toBe(false);
            expect(result.error).toBe('Rol requerido: admin');
            expect(result.code).toBe('INSUFFICIENT_ROLE');
            expect(result.status).toBe(403);
        });
    });
    describe('Funciones de conveniencia', ()=>{
        it('requireCriticalAuth debe usar configuración crítica', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            const result = await (0, _enterpriseauthutils.requireCriticalAuth)(mockRequest);
            expect(result.success).toBe(true);
            expect(result.context?.securityLevel).toBe('critical');
            expect(mockCheckRateLimit).toHaveBeenCalled();
            expect(mockValidateOrigin).toHaveBeenCalled();
            expect(mockValidateJWT).toHaveBeenCalled();
        });
        it('requireAdminAuth debe requerir rol admin', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            const result = await (0, _enterpriseauthutils.requireAdminAuth)(mockRequest, [
                'user_management'
            ]);
            expect(result.success).toBe(true);
            expect(result.context?.role).toBe('admin');
            expect(result.context?.permissions).toContain('user_management');
        });
        it('requireBasicAuth debe usar configuración básica', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            mockAuth.mockResolvedValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            const result = await (0, _enterpriseauthutils.requireBasicAuth)(mockRequest);
            expect(result.success).toBe(true);
            expect(result.context?.securityLevel).toBe('low');
        });
    });
    describe('withEnterpriseAuth middleware', ()=>{
        it('debe ejecutar handler si autenticación es exitosa', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            const mockResponse = {
                status: jest.fn(),
                json: jest.fn()
            };
            const mockHandler = jest.fn().mockResolvedValue({
                success: true
            });
            mockGetAuth.mockReturnValue({
                userId: 'user_123',
                sessionId: 'sess_123'
            });
            const authFunction = jest.fn().mockResolvedValue({
                success: true,
                context: {
                    userId: 'user_123',
                    role: 'admin',
                    permissions: [
                        'admin_access'
                    ]
                }
            });
            const middleware = (0, _enterpriseauthutils.withEnterpriseAuth)(authFunction);
            const wrappedHandler = middleware(mockHandler);
            const result = await wrappedHandler(mockRequest, mockResponse);
            expect(authFunction).toHaveBeenCalledWith(mockRequest);
            expect(mockHandler).toHaveBeenCalledWith(mockRequest, mockResponse);
            expect(mockRequest.enterpriseAuth).toBeDefined();
        });
        it('debe retornar error si autenticación falla', async ()=>{
            const mockRequest = {
                query: {},
                headers: {}
            };
            const mockResponse = {
                status: jest.fn().mockReturnThis(),
                json: jest.fn(),
                setHeader: jest.fn()
            };
            const mockHandler = jest.fn();
            const authFunction = jest.fn().mockResolvedValue({
                success: false,
                error: 'Authentication failed',
                code: 'AUTH_FAILED',
                status: 401
            });
            const middleware = (0, _enterpriseauthutils.withEnterpriseAuth)(authFunction);
            const wrappedHandler = middleware(mockHandler);
            await wrappedHandler(mockRequest, mockResponse);
            expect(authFunction).toHaveBeenCalledWith(mockRequest);
            expect(mockHandler).not.toHaveBeenCalled();
            expect(mockResponse.status).toHaveBeenCalledWith(401);
            expect(mockResponse.json).toHaveBeenCalledWith(expect.objectContaining({
                success: false,
                error: 'Authentication failed',
                code: 'AUTH_FAILED',
                enterprise: true
            }));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxlbnRlcnByaXNlLWF1dGgtdXRpbHMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3RzIHBhcmEgbGFzIFV0aWxpZGFkZXMgZGUgQXV0ZW50aWNhY2nDs24gRW50ZXJwcmlzZVxuICogVmVyaWZpY2EgcXVlIGxhcyBudWV2YXMgdXRpbGlkYWRlcyBlbnRlcnByaXNlIGZ1bmNpb25hbiBjb3JyZWN0YW1lbnRlXG4gKi9cblxuLy8gTW9jayBkZSBDbGVya1xuamVzdC5tb2NrKCdAY2xlcmsvbmV4dGpzL3NlcnZlcicsICgpID0+ICh7XG4gIGdldEF1dGg6IGplc3QuZm4oKSxcbiAgYXV0aDogamVzdC5mbigpLFxuICBjbGVya0NsaWVudDogamVzdC5mbigpXG59KSk7XG5cbi8vIE1vY2sgZGUgU3VwYWJhc2Vcbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBzdXBhYmFzZUFkbWluOiB7XG4gICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKClcbiAgICAgICAgfSkpXG4gICAgICB9KSlcbiAgICB9KSlcbiAgfVxufSkpO1xuXG4vLyBNb2NrIGRlIHZhbGlkYWNpb25lcyBkZSBzZWd1cmlkYWRcbmplc3QubW9jaygnQC9saWIvYXV0aC9qd3QtdmFsaWRhdGlvbicsICgpID0+ICh7XG4gIHZhbGlkYXRlSldUSW50ZWdyaXR5OiBqZXN0LmZuKCksXG4gIHZhbGlkYXRlSldUUGVybWlzc2lvbnM6IGplc3QuZm4oKVxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvbGliL2F1dGgvY3NyZi1wcm90ZWN0aW9uJywgKCkgPT4gKHtcbiAgdmFsaWRhdGVSZXF1ZXN0T3JpZ2luOiBqZXN0LmZuKClcbn0pKTtcblxuamVzdC5tb2NrKCdAL2xpYi9hdXRoL3JhdGUtbGltaXRpbmcnLCAoKSA9PiAoe1xuICBjaGVja1JhdGVMaW1pdDogamVzdC5mbigpLFxuICBSQVRFX0xJTUlUX0NPTkZJR1M6IHtcbiAgICBhZG1pbjogeyB3aW5kb3dNczogMzAwMDAwLCBtYXhSZXF1ZXN0czogMzAgfSxcbiAgICBnZW5lcmFsOiB7IHdpbmRvd01zOiA2MDAwMCwgbWF4UmVxdWVzdHM6IDEwMCB9XG4gIH1cbn0pKTtcblxuamVzdC5tb2NrKCdAL2xpYi9hdXRoL3NlY3VyaXR5LWF1ZGl0JywgKCkgPT4gKHtcbiAgbG9nQXV0aFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgbG9nQXV0aEZhaWx1cmU6IGplc3QuZm4oKSxcbiAgbG9nUGVybWlzc2lvbkRlbmllZDogamVzdC5mbigpXG59KSk7XG5cbmltcG9ydCB7XG4gIGdldEVudGVycHJpc2VBdXRoQ29udGV4dCxcbiAgcmVxdWlyZUNyaXRpY2FsQXV0aCxcbiAgcmVxdWlyZUFkbWluQXV0aCxcbiAgcmVxdWlyZUJhc2ljQXV0aCxcbiAgd2l0aEVudGVycHJpc2VBdXRoXG59IGZyb20gJ0AvbGliL2F1dGgvZW50ZXJwcmlzZS1hdXRoLXV0aWxzJztcbmltcG9ydCB7IGdldEF1dGgsIGF1dGggfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XG5pbXBvcnQgeyB2YWxpZGF0ZUpXVEludGVncml0eSwgdmFsaWRhdGVKV1RQZXJtaXNzaW9ucyB9IGZyb20gJ0AvbGliL2F1dGgvand0LXZhbGlkYXRpb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVSZXF1ZXN0T3JpZ2luIH0gZnJvbSAnQC9saWIvYXV0aC9jc3JmLXByb3RlY3Rpb24nO1xuaW1wb3J0IHsgY2hlY2tSYXRlTGltaXQgfSBmcm9tICdAL2xpYi9hdXRoL3JhdGUtbGltaXRpbmcnO1xuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcblxuZGVzY3JpYmUoJ1V0aWxpZGFkZXMgZGUgQXV0ZW50aWNhY2nDs24gRW50ZXJwcmlzZScsICgpID0+IHtcbiAgbGV0IG1vY2tHZXRBdXRoOiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBnZXRBdXRoPjtcbiAgbGV0IG1vY2tBdXRoOiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBhdXRoPjtcbiAgbGV0IG1vY2tWYWxpZGF0ZUpXVDogamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdmFsaWRhdGVKV1RJbnRlZ3JpdHk+O1xuICBsZXQgbW9ja1ZhbGlkYXRlSldUUGVybWlzc2lvbnM6IGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHZhbGlkYXRlSldUUGVybWlzc2lvbnM+O1xuICBsZXQgbW9ja1ZhbGlkYXRlT3JpZ2luOiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB2YWxpZGF0ZVJlcXVlc3RPcmlnaW4+O1xuICBsZXQgbW9ja0NoZWNrUmF0ZUxpbWl0OiBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBjaGVja1JhdGVMaW1pdD47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja0dldEF1dGggPSBnZXRBdXRoIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGdldEF1dGg+O1xuICAgIG1vY2tBdXRoID0gYXV0aCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBhdXRoPjtcbiAgICBtb2NrVmFsaWRhdGVKV1QgPSB2YWxpZGF0ZUpXVEludGVncml0eSBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB2YWxpZGF0ZUpXVEludGVncml0eT47XG4gICAgbW9ja1ZhbGlkYXRlSldUUGVybWlzc2lvbnMgPSB2YWxpZGF0ZUpXVFBlcm1pc3Npb25zIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHZhbGlkYXRlSldUUGVybWlzc2lvbnM+O1xuICAgIG1vY2tWYWxpZGF0ZU9yaWdpbiA9IHZhbGlkYXRlUmVxdWVzdE9yaWdpbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB2YWxpZGF0ZVJlcXVlc3RPcmlnaW4+O1xuICAgIG1vY2tDaGVja1JhdGVMaW1pdCA9IGNoZWNrUmF0ZUxpbWl0IGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGNoZWNrUmF0ZUxpbWl0PjtcbiAgICBcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIFNldHVwIGRlZmF1bHQgbW9ja3NcbiAgICBtb2NrQ2hlY2tSYXRlTGltaXQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgYWxsb3dlZDogdHJ1ZSxcbiAgICAgIGxpbWl0OiAzMCxcbiAgICAgIHJlbWFpbmluZzogMjksXG4gICAgICByZXNldFRpbWU6IERhdGUubm93KCkgKyAzMDAwMDBcbiAgICB9KTtcblxuICAgIG1vY2tWYWxpZGF0ZU9yaWdpbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB2YWxpZDogdHJ1ZVxuICAgIH0pO1xuXG4gICAgbW9ja1ZhbGlkYXRlSldULm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgcGF5bG9hZDogeyBzdWI6ICd1c2VyXzEyMycsIGlzczogJ2NsZXJrJyB9XG4gICAgfSk7XG5cbiAgICBtb2NrVmFsaWRhdGVKV1RQZXJtaXNzaW9ucy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgIHBheWxvYWQ6IHsgc3ViOiAndXNlcl8xMjMnLCBtZXRhZGF0YTogeyByb2xlOiAnYWRtaW4nIH0gfVxuICAgIH0pO1xuXG4gICAgLy8gTW9jayBTdXBhYmFzZSByZXNwb25zZVxuICAgIChzdXBhYmFzZUFkbWluLmZyb20gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6ICdwcm9maWxlXzEyMycsXG4gICAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AdGVzdC5jb20nLFxuICAgICAgICAgICAgICByb2xlOiAnYWRtaW4nLFxuICAgICAgICAgICAgICBwZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnLCAndXNlcl9tYW5hZ2VtZW50J10sXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7IHRlc3Q6IHRydWUgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFbnRlcnByaXNlQXV0aENvbnRleHQnLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgY3JlYXIgY29udGV4dG8gZW50ZXJwcmlzZSBjb21wbGV0byBwYXJhIHVzdWFyaW8gYWRtaW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgcXVlcnk6IHt9LFxuICAgICAgICBoZWFkZXJzOiB7fSxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS90ZXN0JyxcbiAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tHZXRBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RW50ZXJwcmlzZUF1dGhDb250ZXh0KG1vY2tSZXF1ZXN0LCB7XG4gICAgICAgIHNlY3VyaXR5TGV2ZWw6ICdjcml0aWNhbCcsXG4gICAgICAgIGVuYWJsZUpXVFZhbGlkYXRpb246IHRydWUsXG4gICAgICAgIGVuYWJsZUNTUkZQcm90ZWN0aW9uOiB0cnVlLFxuICAgICAgICBlbmFibGVSYXRlTGltaXQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRleHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRleHQ/LnVzZXJJZCkudG9CZSgndXNlcl8xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8ucm9sZSkudG9CZSgnYWRtaW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8ucGVybWlzc2lvbnMpLnRvQ29udGFpbignYWRtaW5fYWNjZXNzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRleHQ/LnNlY3VyaXR5TGV2ZWwpLnRvQmUoJ2NyaXRpY2FsJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRleHQ/LnZhbGlkYXRpb25zLmp3dFZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZXh0Py52YWxpZGF0aW9ucy5jc3JmVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRleHQ/LnZhbGlkYXRpb25zLnJhdGVMaW1pdFBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIGZhbGxhciBzaSByYXRlIGxpbWl0IGVzIGV4Y2VkaWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7XG4gICAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgICAgaGVhZGVyczoge31cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBtb2NrQ2hlY2tSYXRlTGltaXQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBhbGxvd2VkOiBmYWxzZSxcbiAgICAgICAgbGltaXQ6IDMwLFxuICAgICAgICByZW1haW5pbmc6IDAsXG4gICAgICAgIHJlc2V0VGltZTogRGF0ZS5ub3coKSArIDMwMDAwMCxcbiAgICAgICAgcmV0cnlBZnRlcjogMzAwLFxuICAgICAgICBlcnJvcjogJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxuICAgICAgICBjb2RlOiAnUkFURV9MSU1JVF9FWENFRURFRCdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRFbnRlcnByaXNlQXV0aENvbnRleHQobW9ja1JlcXVlc3QsIHtcbiAgICAgICAgZW5hYmxlUmF0ZUxpbWl0OiB0cnVlLFxuICAgICAgICByYXRlTGltaXRUeXBlOiAnYWRtaW4nXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1JhdGUgbGltaXQgZXhjZWVkZWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29kZSkudG9CZSgnUkFURV9MSU1JVF9FWENFRURFRCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoNDI5KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmV0cnlBZnRlcikudG9CZSgzMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgZmFsbGFyIHNpIHZhbGlkYWNpw7NuIENTUkYgZmFsbGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgcXVlcnk6IHt9LFxuICAgICAgICBoZWFkZXJzOiB7fVxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tWYWxpZGF0ZU9yaWdpbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIG9yaWdpbicsXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX09SSUdJTidcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRFbnRlcnByaXNlQXV0aENvbnRleHQobW9ja1JlcXVlc3QsIHtcbiAgICAgICAgZW5hYmxlQ1NSRlByb3RlY3Rpb246IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnSW52YWxpZCBvcmlnaW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29kZSkudG9CZSgnQ1NSRl9WQUxJREFUSU9OX0ZBSUxFRCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIGZhbGxhciBzaSB1c3VhcmlvIG5vIGVzdMOhIGF1dGVudGljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7XG4gICAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgICAgaGVhZGVyczoge31cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBtb2NrR2V0QXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VySWQ6IG51bGwsXG4gICAgICAgIHNlc3Npb25JZDogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEVudGVycHJpc2VBdXRoQ29udGV4dChtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdVc3VhcmlvIG5vIGF1dGVudGljYWRvJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvZGUpLnRvQmUoJ05PVF9BVVRIRU5USUNBVEVEJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSg0MDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgZmFsbGFyIHNpIEpXVCBlcyBpbnbDoWxpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHtcbiAgICAgICAgcXVlcnk6IHt9LFxuICAgICAgICBoZWFkZXJzOiB7fVxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tHZXRBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnXG4gICAgICB9KTtcblxuICAgICAgbW9ja1ZhbGlkYXRlSldULm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgSldUIHRva2VuJyxcbiAgICAgICAgY29kZTogJ0lOVkFMSURfVE9LRU4nXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RW50ZXJwcmlzZUF1dGhDb250ZXh0KG1vY2tSZXF1ZXN0LCB7XG4gICAgICAgIGVuYWJsZUpXVFZhbGlkYXRpb246IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnSW52YWxpZCBKV1QgdG9rZW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29kZSkudG9CZSgnSldUX1ZBTElEQVRJT05fRkFJTEVEJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSg0MDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgZmFsbGFyIHNpIHBlcm1pc29zIHNvbiBpbnN1ZmljaWVudGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7XG4gICAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgICAgaGVhZGVyczoge31cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBtb2NrR2V0QXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vY2sgdXN1YXJpbyBzaW4gcGVybWlzb3MgYWRtaW5cbiAgICAgIChzdXBhYmFzZUFkbWluLmZyb20gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAncHJvZmlsZV8xMjMnLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAndXNlckB0ZXN0LmNvbScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBbJ2Jhc2ljX2FjY2VzcyddXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RW50ZXJwcmlzZUF1dGhDb250ZXh0KG1vY2tSZXF1ZXN0LCB7XG4gICAgICAgIHJlcXVpcmVkUm9sZTogJ2FkbWluJyxcbiAgICAgICAgcmVxdWlyZWRQZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnXVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdSb2wgcmVxdWVyaWRvOiBhZG1pbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb2RlKS50b0JlKCdJTlNVRkZJQ0lFTlRfUk9MRScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Z1bmNpb25lcyBkZSBjb252ZW5pZW5jaWEnLCAoKSA9PiB7XG4gICAgaXQoJ3JlcXVpcmVDcml0aWNhbEF1dGggZGViZSB1c2FyIGNvbmZpZ3VyYWNpw7NuIGNyw610aWNhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7IHF1ZXJ5OiB7fSwgaGVhZGVyczoge30gfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tHZXRBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUNyaXRpY2FsQXV0aChtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8uc2VjdXJpdHlMZXZlbCkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgIGV4cGVjdChtb2NrQ2hlY2tSYXRlTGltaXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVmFsaWRhdGVPcmlnaW4pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVmFsaWRhdGVKV1QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXF1aXJlQWRtaW5BdXRoIGRlYmUgcmVxdWVyaXIgcm9sIGFkbWluJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7IHF1ZXJ5OiB7fSwgaGVhZGVyczoge30gfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tHZXRBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUFkbWluQXV0aChtb2NrUmVxdWVzdCwgWyd1c2VyX21hbmFnZW1lbnQnXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8ucm9sZSkudG9CZSgnYWRtaW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8ucGVybWlzc2lvbnMpLnRvQ29udGFpbigndXNlcl9tYW5hZ2VtZW50Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVxdWlyZUJhc2ljQXV0aCBkZWJlIHVzYXIgY29uZmlndXJhY2nDs24gYsOhc2ljYScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0geyBxdWVyeToge30sIGhlYWRlcnM6IHt9IH0gYXMgYW55O1xuXG4gICAgICBtb2NrQXV0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnc2Vzc18xMjMnXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWlyZUJhc2ljQXV0aChtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8uc2VjdXJpdHlMZXZlbCkudG9CZSgnbG93Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd3aXRoRW50ZXJwcmlzZUF1dGggbWlkZGxld2FyZScsICgpID0+IHtcbiAgICBpdCgnZGViZSBlamVjdXRhciBoYW5kbGVyIHNpIGF1dGVudGljYWNpw7NuIGVzIGV4aXRvc2EnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVxdWVzdCA9IHsgcXVlcnk6IHt9LCBoZWFkZXJzOiB7fSB9IGFzIGFueTtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHsgc3RhdHVzOiBqZXN0LmZuKCksIGpzb246IGplc3QuZm4oKSB9O1xuICAgICAgY29uc3QgbW9ja0hhbmRsZXIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiB0cnVlIH0pO1xuXG4gICAgICBtb2NrR2V0QXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXG4gICAgICAgIHNlc3Npb25JZDogJ3Nlc3NfMTIzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGF1dGhGdW5jdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXG4gICAgICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgICAgICBwZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnXVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbWlkZGxld2FyZSA9IHdpdGhFbnRlcnByaXNlQXV0aChhdXRoRnVuY3Rpb24pO1xuICAgICAgY29uc3Qgd3JhcHBlZEhhbmRsZXIgPSBtaWRkbGV3YXJlKG1vY2tIYW5kbGVyKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd3JhcHBlZEhhbmRsZXIobW9ja1JlcXVlc3QsIG1vY2tSZXNwb25zZSk7XG5cbiAgICAgIGV4cGVjdChhdXRoRnVuY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChtb2NrSGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1JlcXVlc3QsIG1vY2tSZXNwb25zZSk7XG4gICAgICBleHBlY3QobW9ja1JlcXVlc3QuZW50ZXJwcmlzZUF1dGgpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSByZXRvcm5hciBlcnJvciBzaSBhdXRlbnRpY2FjacOzbiBmYWxsYScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0geyBxdWVyeToge30sIGhlYWRlcnM6IHt9IH0gYXMgYW55O1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0geyBcbiAgICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSwgXG4gICAgICAgIGpzb246IGplc3QuZm4oKSxcbiAgICAgICAgc2V0SGVhZGVyOiBqZXN0LmZuKClcbiAgICAgIH07XG4gICAgICBjb25zdCBtb2NrSGFuZGxlciA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgYXV0aEZ1bmN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyxcbiAgICAgICAgY29kZTogJ0FVVEhfRkFJTEVEJyxcbiAgICAgICAgc3RhdHVzOiA0MDFcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtaWRkbGV3YXJlID0gd2l0aEVudGVycHJpc2VBdXRoKGF1dGhGdW5jdGlvbik7XG4gICAgICBjb25zdCB3cmFwcGVkSGFuZGxlciA9IG1pZGRsZXdhcmUobW9ja0hhbmRsZXIpO1xuXG4gICAgICBhd2FpdCB3cmFwcGVkSGFuZGxlcihtb2NrUmVxdWVzdCwgbW9ja1Jlc3BvbnNlKTtcblxuICAgICAgZXhwZWN0KGF1dGhGdW5jdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1JlcXVlc3QpO1xuICAgICAgZXhwZWN0KG1vY2tIYW5kbGVyKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMSk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIGNvZGU6ICdBVVRIX0ZBSUxFRCcsXG4gICAgICAgICAgZW50ZXJwcmlzZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImdldEF1dGgiLCJmbiIsImF1dGgiLCJjbGVya0NsaWVudCIsInN1cGFiYXNlQWRtaW4iLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJ2YWxpZGF0ZUpXVEludGVncml0eSIsInZhbGlkYXRlSldUUGVybWlzc2lvbnMiLCJ2YWxpZGF0ZVJlcXVlc3RPcmlnaW4iLCJjaGVja1JhdGVMaW1pdCIsIlJBVEVfTElNSVRfQ09ORklHUyIsImFkbWluIiwid2luZG93TXMiLCJtYXhSZXF1ZXN0cyIsImdlbmVyYWwiLCJsb2dBdXRoU3VjY2VzcyIsImxvZ0F1dGhGYWlsdXJlIiwibG9nUGVybWlzc2lvbkRlbmllZCIsImRlc2NyaWJlIiwibW9ja0dldEF1dGgiLCJtb2NrQXV0aCIsIm1vY2tWYWxpZGF0ZUpXVCIsIm1vY2tWYWxpZGF0ZUpXVFBlcm1pc3Npb25zIiwibW9ja1ZhbGlkYXRlT3JpZ2luIiwibW9ja0NoZWNrUmF0ZUxpbWl0IiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImFsbG93ZWQiLCJsaW1pdCIsInJlbWFpbmluZyIsInJlc2V0VGltZSIsIkRhdGUiLCJub3ciLCJ2YWxpZCIsInBheWxvYWQiLCJzdWIiLCJpc3MiLCJtZXRhZGF0YSIsInJvbGUiLCJtb2NrUmV0dXJuVmFsdWUiLCJkYXRhIiwiaWQiLCJlbWFpbCIsInBlcm1pc3Npb25zIiwidGVzdCIsImVycm9yIiwiaXQiLCJtb2NrUmVxdWVzdCIsInF1ZXJ5IiwiaGVhZGVycyIsInVybCIsIm1ldGhvZCIsInVzZXJJZCIsInNlc3Npb25JZCIsInJlc3VsdCIsImdldEVudGVycHJpc2VBdXRoQ29udGV4dCIsInNlY3VyaXR5TGV2ZWwiLCJlbmFibGVKV1RWYWxpZGF0aW9uIiwiZW5hYmxlQ1NSRlByb3RlY3Rpb24iLCJlbmFibGVSYXRlTGltaXQiLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsImNvbnRleHQiLCJ0b0JlRGVmaW5lZCIsInRvQ29udGFpbiIsInZhbGlkYXRpb25zIiwiand0VmFsaWQiLCJjc3JmVmFsaWQiLCJyYXRlTGltaXRQYXNzZWQiLCJyZXRyeUFmdGVyIiwiY29kZSIsInJhdGVMaW1pdFR5cGUiLCJzdGF0dXMiLCJyZXF1aXJlZFJvbGUiLCJyZXF1aXJlZFBlcm1pc3Npb25zIiwicmVxdWlyZUNyaXRpY2FsQXV0aCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJyZXF1aXJlQWRtaW5BdXRoIiwicmVxdWlyZUJhc2ljQXV0aCIsIm1vY2tSZXNwb25zZSIsImpzb24iLCJtb2NrSGFuZGxlciIsImF1dGhGdW5jdGlvbiIsIm1pZGRsZXdhcmUiLCJ3aXRoRW50ZXJwcmlzZUF1dGgiLCJ3cmFwcGVkSGFuZGxlciIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZW50ZXJwcmlzZUF1dGgiLCJtb2NrUmV0dXJuVGhpcyIsInNldEhlYWRlciIsIm5vdCIsIm9iamVjdENvbnRhaW5pbmciLCJlbnRlcnByaXNlIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0MsR0FFRCxnQkFBZ0I7O0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMsd0JBQXdCLElBQU8sQ0FBQTtRQUN2Q0MsU0FBU0YsS0FBS0csRUFBRTtRQUNoQkMsTUFBTUosS0FBS0csRUFBRTtRQUNiRSxhQUFhTCxLQUFLRyxFQUFFO0lBQ3RCLENBQUE7QUFFQSxtQkFBbUI7QUFDbkJILEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDSyxlQUFlO1lBQ2JDLE1BQU1QLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0JBQ25CSyxRQUFRUixLQUFLRyxFQUFFLENBQUMsSUFBTyxDQUFBOzRCQUNyQk0sSUFBSVQsS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTtvQ0FD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