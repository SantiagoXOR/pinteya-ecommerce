a2b9adeb8d0d5e1866e4c891f93abd85
// ===================================
// PINTEYA E-COMMERCE - CREATE PAYMENT PREFERENCE API
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "POST", {
    enumerable: true,
    get: function() {
        return POST;
    }
});
const _server = require("next/server");
const _supabase = require("../../../../lib/supabase");
const _mercadopago = require("../../../../lib/mercadopago");
const _server1 = require("@clerk/nextjs/server");
const _shop = require("../../../../constants/shop");
const _zod = require("zod");
const _logger = require("../../../../lib/logger");
const _ratelimiter = require("../../../../lib/rate-limiter");
const _metrics = require("../../../../lib/metrics");
// Schema de validación para la entrada
const CreatePreferenceSchema = _zod.z.object({
    items: _zod.z.array(_zod.z.object({
        id: _zod.z.string().min(1, 'ID de producto requerido'),
        quantity: _zod.z.number().min(1, 'Cantidad debe ser mayor a 0').max(99, 'Cantidad máxima excedida')
    })).min(1, 'Al menos un producto es requerido'),
    payer: _zod.z.object({
        name: _zod.z.string().min(_shop.VALIDATION_CONSTANTS.MIN_NAME_LENGTH, 'Nombre requerido'),
        surname: _zod.z.string().min(_shop.VALIDATION_CONSTANTS.MIN_NAME_LENGTH, 'Apellido requerido'),
        email: _zod.z.string().email('Email inválido'),
        phone: _zod.z.string().regex(_shop.VALIDATION_CONSTANTS.PHONE_REGEX, 'Teléfono inválido').optional(),
        identification: _zod.z.object({
            type: _zod.z.string().min(1, 'Tipo de identificación requerido'),
            number: _zod.z.string().min(1, 'Número de identificación requerido')
        }).optional()
    }),
    shipping: _zod.z.object({
        cost: _zod.z.number().min(0, 'Costo de envío inválido'),
        address: _zod.z.object({
            street_name: _zod.z.string().min(1, 'Nombre de calle requerido'),
            street_number: _zod.z.string().min(1, 'Número de calle requerido'),
            zip_code: _zod.z.string().min(1, 'Código postal requerido'),
            city_name: _zod.z.string().min(1, 'Ciudad requerida'),
            state_name: _zod.z.string().min(1, 'Provincia requerida')
        })
    }).optional(),
    external_reference: _zod.z.string().optional()
});
// Función helper para calcular precio final
function getFinalPrice(product) {
    return product.discounted_price || product.price;
}
// Función helper para crear usuario temporal
async function createTemporaryUser(userId, email, name) {
    if (!_supabase.supabaseAdmin) {
        throw new Error('Cliente administrativo de Supabase no disponible');
    }
    const { error } = await _supabase.supabaseAdmin.from('users').insert({
        id: userId,
        clerk_id: 'temp-user',
        email,
        name
    });
    if (error) {
        console.error('Error creating temporary user:', error);
        throw new Error('Error creando usuario temporal');
    }
}
async function POST(request) {
    const requestStart = Date.now();
    const clientIP = request.headers.get('x-forwarded-for') || 'unknown';
    const userAgent = request.headers.get('user-agent') || 'unknown';
    // ✅ NUEVO: Logging estructurado del inicio de la request
    _logger.logger.info(_logger.LogCategory.PAYMENT, 'Create preference request started', {
        endpoint: '/api/payments/create-preference',
        method: 'POST'
    }, {
        clientIP,
        userAgent
    });
    // ✅ NUEVO: Rate limiting avanzado para API de pagos
    const rateLimitConfig = {
        ..._ratelimiter.RATE_LIMIT_CONFIGS.PAYMENT_API,
        keyGenerator: (0, _ratelimiter.endpointKeyGenerator)('create-preference')
    };
    const rateLimitResult = await (0, _ratelimiter.checkRateLimit)(request, rateLimitConfig);
    if (!rateLimitResult.success) {
        _logger.logger.warn(_logger.LogCategory.SECURITY, 'Rate limit exceeded for create-preference', {
            clientIP,
            limit: rateLimitResult.limit,
            retryAfter: rateLimitResult.retryAfter
        });
        return _server.NextResponse.json({
            success: false,
            error: rateLimitConfig.message,
            retryAfter: rateLimitResult.retryAfter
        }, {
            status: 429,
            headers: {
                'RateLimit-Limit': rateLimitResult.limit.toString(),
                'RateLimit-Remaining': rateLimitResult.remaining.toString(),
                'RateLimit-Reset': new Date(rateLimitResult.resetTime).toISOString(),
                'Retry-After': rateLimitResult.retryAfter?.toString() || '60'
            }
        });
    }
    try {
        // Verificar que el cliente administrativo esté disponible
        if (!_supabase.supabaseAdmin) {
            _logger.logger.error(_logger.LogCategory.PAYMENT, 'Supabase admin client not available', undefined, {
                clientIP
            });
            const errorResponse = {
                data: null,
                success: false,
                error: 'Servicio de base de datos no disponible'
            };
            return _server.NextResponse.json(errorResponse, {
                status: 503
            });
        }
        // Validar entrada
        const rawData = await request.json();
        const validationResult = CreatePreferenceSchema.safeParse(rawData);
        if (!validationResult.success) {
            const errorResponse = {
                data: null,
                success: false,
                error: `Datos inválidos: ${validationResult.error.errors.map((e)=>e.message).join(', ')}`
            };
            return _server.NextResponse.json(errorResponse, {
                status: 400
            });
        }
        const orderData = validationResult.data;
        const productIds = orderData.items.map((item)=>parseInt(item.id));
        const shippingCost = orderData.shipping?.cost || 0;
        // ===================================
        // OBTENER USUARIO AUTENTICADO CON CLERK
        // ===================================
        let userId = null;
        let userEmail = null;
        try {
            // Intentar obtener usuario autenticado de Clerk
            const clerkUser = await (0, _server1.currentUser)();
            if (clerkUser) {
                userId = clerkUser.id;
                userEmail = clerkUser.emailAddresses[0]?.emailAddress || null;
                // Verificar si el usuario existe en nuestra base de datos
                const { data: existingUser, error: userError } = await _supabase.supabaseAdmin.from('users').select('id, clerk_id').eq('clerk_id', clerkUser.id).single();
                if (userError && userError.code !== 'PGRST116') {
                    console.error('Error checking user in database:', userError);
                }
                // Si el usuario no existe en nuestra DB, crearlo
                if (!existingUser) {
                    const { data: newUser, error: createUserError } = await _supabase.supabaseAdmin.from('users').insert({
                        clerk_id: clerkUser.id,
                        email: userEmail,
                        name: `${clerkUser.firstName || ''} ${clerkUser.lastName || ''}`.trim() || 'Usuario'
                    }).select('id').single();
                    if (createUserError) {
                        console.error('Error creating user in database:', createUserError);
                        // Continuar con usuario temporal si falla la creación
                        userId = null;
                    } else if (newUser) {
                        userId = newUser.id;
                    } else {
                        console.error('Error: newUser is null after insertion');
                        userId = null;
                    }
                } else {
                    userId = existingUser.id;
                }
            }
        } catch (clerkError) {
            console.error('Error getting Clerk user:', clerkError);
        // Continuar sin usuario autenticado
        }
        // Si no hay usuario autenticado, usar usuario temporal
        if (!userId) {
            console.log('No authenticated user found, using temporary user');
            userId = '00000000-0000-4000-8000-000000000000';
            userEmail = orderData.payer.email;
            // Verificar que el usuario temporal existe
            const { data: tempUser, error: tempUserError } = await _supabase.supabaseAdmin.from('users').select('id').eq('id', userId).single();
            if (tempUserError) {
                // Crear usuario temporal si no existe
                const { error: createTempError } = await _supabase.supabaseAdmin.from('users').insert({
                    id: userId,
                    clerk_id: 'temp-user',
                    email: userEmail,
                    name: `${orderData.payer.name} ${orderData.payer.surname}`.trim()
                });
                if (createTempError) {
                    console.error('Error creating temporary user:', createTempError);
                }
            }
        }
        // ===================================
        // OBTENER PRODUCTOS Y VALIDAR STOCK
        // ===================================
        const { data: products, error: productsError } = await _supabase.supabaseAdmin.from('products').select(`
        id,
        name,
        price,
        discounted_price,
        stock,
        images,
        category:categories (
          name,
          slug
        )
      `).in('id', productIds);
        if (productsError || !products) {
            console.error('Error fetching products:', productsError);
            const errorResponse = {
                data: null,
                success: false,
                error: 'Error obteniendo productos'
            };
            return _server.NextResponse.json(errorResponse, {
                status: 500
            });
        }
        // Convertir productos para tener categoría como objeto
        const typedProducts = products.map((product)=>({
                ...product,
                category: product.category && product.category.length > 0 ? product.category[0] : null
            }));
        // Validar stock disponible
        for (const item of orderData.items){
            const product = typedProducts.find((p)=>p.id === parseInt(item.id));
            if (!product) {
                const errorResponse = {
                    data: null,
                    success: false,
                    error: `Producto ${item.id} no encontrado`
                };
                return _server.NextResponse.json(errorResponse, {
                    status: 400
                });
            }
            if (product.stock < item.quantity) {
                const errorResponse = {
                    data: null,
                    success: false,
                    error: `Stock insuficiente para ${product.name}. Disponible: ${product.stock}, solicitado: ${item.quantity}`
                };
                return _server.NextResponse.json(errorResponse, {
                    status: 400
                });
            }
        }
        // ===================================
        // CALCULAR TOTALES CON PRECIOS CORRECTOS
        // ===================================
        const itemsTotal = orderData.items.reduce((total, item)=>{
            const product = typedProducts.find((p)=>p.id === parseInt(item.id));
            if (!product) return total;
            // Usar precio con descuento si existe, sino precio normal
            const finalPrice = getFinalPrice(product);
            return total + finalPrice * item.quantity;
        }, 0);
        const totalAmount = itemsTotal + shippingCost;
        // ===================================
        // CREAR ORDEN EN BASE DE DATOS
        // ===================================
        const { data: order, error: orderError } = await _supabase.supabaseAdmin.from('orders').insert({
            user_id: userId,
            status: 'pending',
            total: totalAmount,
            shipping_address: orderData.shipping?.address ? JSON.stringify(orderData.shipping.address) : null,
            external_reference: orderData.external_reference || `order_${Date.now()}`
        }).select().single();
        if (orderError || !order) {
            console.error('Error creating order:', orderError);
            console.error('Order data attempted:', {
                user_id: userId,
                status: 'pending',
                total: totalAmount,
                shipping_address: orderData.shipping?.address ? JSON.stringify(orderData.shipping.address) : null,
                external_reference: orderData.external_reference || `order_${Date.now()}`
            });
            const errorResponse = {
                data: null,
                success: false,
                error: `Error creando orden: ${orderError?.message || 'Unknown error'}`
            };
            return _server.NextResponse.json(errorResponse, {
                status: 500
            });
        }
        // ===================================
        // CREAR ITEMS DE LA ORDEN CON PRECIOS CORRECTOS
        // ===================================
        const orderItems = orderData.items.map((item)=>{
            const product = typedProducts.find((p)=>p.id === parseInt(item.id));
            if (!product) {
                throw new Error(`Producto ${item.id} no encontrado`);
            }
            // Usar precio con descuento si existe, sino precio normal
            const finalPrice = getFinalPrice(product);
            return {
                order_id: order.id,
                product_id: parseInt(item.id),
                quantity: item.quantity,
                price: finalPrice
            };
        });
        const { error: itemsError } = await _supabase.supabaseAdmin.from('order_items').insert(orderItems);
        if (itemsError) {
            console.error('Error creating order items:', itemsError);
            // Rollback: eliminar orden creada
            await _supabase.supabaseAdmin.from('orders').delete().eq('id', order.id);
            const errorResponse = {
                data: null,
                success: false,
                error: 'Error creando items de orden'
            };
            return _server.NextResponse.json(errorResponse, {
                status: 500
            });
        }
        // ===================================
        // CONVERTIR ITEMS PARA MERCADOPAGO
        // ===================================
        const mercadoPagoItems = typedProducts.map((product)=>{
            const orderItem = orderData.items.find((item)=>item.id === product.id.toString());
            if (!orderItem) {
                throw new Error(`Order item not found for product ${product.id}`);
            }
            // Usar precio con descuento si existe, sino precio normal
            const finalPrice = getFinalPrice(product);
            return {
                id: product.id.toString(),
                title: product.name,
                description: `Producto de pinturería - ${product.category?.name || 'General'}`,
                picture_url: product.images?.previews?.[0] || '',
                category_id: product.category?.slug || 'general',
                quantity: orderItem.quantity,
                currency_id: 'ARS',
                unit_price: finalPrice
            };
        });
        // Agregar costo de envío si existe
        if (shippingCost > 0) {
            mercadoPagoItems.push({
                id: 'shipping',
                title: 'Costo de envío',
                description: 'Envío a domicilio',
                category_id: 'shipping',
                quantity: 1,
                currency_id: 'ARS',
                unit_price: shippingCost
            });
        }
        // ✅ MEJORADO: Usar nueva función con configuración avanzada
        const preferenceResult = await (0, _mercadopago.createPaymentPreference)({
            items: mercadoPagoItems,
            payer: {
                name: orderData.payer.name,
                surname: orderData.payer.surname,
                email: orderData.payer.email,
                phone: orderData.payer.phone ? {
                    area_code: orderData.payer.phone.substring(0, 3),
                    number: orderData.payer.phone.substring(3)
                } : undefined,
                identification: orderData.payer.identification,
                address: orderData.shipping ? {
                    street_name: orderData.shipping.address.street_name,
                    street_number: orderData.shipping.address.street_number,
                    zip_code: orderData.shipping.address.zip_code
                } : undefined
            },
            back_urls: {
                success: `${process.env.NEXT_PUBLIC_APP_URL}/checkout/success?order_id=${order.id}`,
                failure: `${process.env.NEXT_PUBLIC_APP_URL}/checkout/failure?order_id=${order.id}`,
                pending: `${process.env.NEXT_PUBLIC_APP_URL}/checkout/pending?order_id=${order.id}`
            },
            external_reference: order.id.toString(),
            shipments: orderData.shipping ? {
                cost: orderData.shipping.cost,
                receiver_address: {
                    zip_code: orderData.shipping.address.zip_code,
                    street_name: orderData.shipping.address.street_name,
                    street_number: orderData.shipping.address.street_number,
                    city_name: orderData.shipping.address.city_name,
                    state_name: orderData.shipping.address.state_name
                }
            } : undefined
        });
        // ✅ MEJORADO: Manejar resultado de la nueva función
        if (!preferenceResult.success) {
            throw new Error('error' in preferenceResult ? preferenceResult.error : 'Error creando preferencia de pago');
        }
        // Actualizar orden con ID de preferencia
        const preferenceData = 'data' in preferenceResult ? preferenceResult.data : null;
        const { error: updateError } = await _supabase.supabaseAdmin.from('orders').update({
            payment_preference_id: preferenceData?.id
        }).eq('id', order.id);
        if (updateError) {
            _logger.logger.warn(_logger.LogCategory.PAYMENT, 'Failed to update order with preference ID', {
                updateError
            }, {
                clientIP
            });
        }
        // ✅ NUEVO: Logging exitoso de creación de preferencia
        const processingTime = Date.now() - requestStart;
        _logger.logger.payment(_logger.LogLevel.INFO, 'Payment preference created successfully', {
            orderId: order.id.toString(),
            preferenceId: preferenceData?.id,
            amount: totalAmount,
            currency: 'ARS',
            method: 'mercadopago'
        }, {
            clientIP,
            userAgent
        });
        _logger.logger.performance(_logger.LogLevel.INFO, 'Create preference request completed', {
            operation: 'create-preference',
            duration: processingTime,
            endpoint: '/api/payments/create-preference',
            statusCode: 200
        }, {
            clientIP
        });
        // ✅ NUEVO: Crear respuesta con headers de rate limiting
        const response = _server.NextResponse.json({
            success: true,
            data: {
                init_point: preferenceData?.init_point,
                preference_id: preferenceData?.id
            }
        });
        // ✅ NUEVO: Registrar métricas de éxito
        await _metrics.metricsCollector.recordRequest('create-preference', 'POST', 200, Date.now() - requestStart, {
            clientIP,
            userAgent
        });
        // Agregar headers de rate limiting a la respuesta exitosa
        return (0, _ratelimiter.addRateLimitHeaders)(response, rateLimitResult, rateLimitConfig);
    } catch (error) {
        // ✅ MEJORADO: Logging estructurado de errores
        const processingTime = Date.now() - requestStart;
        _logger.logger.error(_logger.LogCategory.PAYMENT, 'Failed to create payment preference', error, {
            clientIP,
            userAgent
        });
        _logger.logger.performance(_logger.LogLevel.ERROR, 'Create preference request failed', {
            operation: 'create-preference',
            duration: processingTime,
            endpoint: '/api/payments/create-preference',
            statusCode: 500
        }, {
            clientIP
        });
        // ✅ NUEVO: Registrar métricas de error
        await _metrics.metricsCollector.recordRequest('create-preference', 'POST', 500, processingTime, {
            clientIP,
            userAgent,
            error: error.message
        });
        return _server.NextResponse.json({
            success: false,
            error: process.env.NODE_ENV === 'development' ? error.message : 'Error interno del servidor'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcYXBwXFxhcGlcXHBheW1lbnRzXFxjcmVhdGUtcHJlZmVyZW5jZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gQ1JFQVRFIFBBWU1FTlQgUFJFRkVSRU5DRSBBUElcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XHJcbmltcG9ydCB7IENyZWF0ZVByZWZlcmVuY2VQYXlsb2FkIH0gZnJvbSAnQC90eXBlcy9jaGVja291dCc7XHJcbmltcG9ydCB7IEFwaVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9hcGknO1xyXG5pbXBvcnQgeyBjcmVhdGVQYXltZW50UHJlZmVyZW5jZSB9IGZyb20gJ0AvbGliL21lcmNhZG9wYWdvJztcclxuaW1wb3J0IHR5cGUgeyBNZXJjYWRvUGFnb0l0ZW0gfSBmcm9tICdAL2xpYi9tZXJjYWRvcGFnbyc7XHJcbmltcG9ydCB7IGN1cnJlbnRVc2VyIH0gZnJvbSAnQGNsZXJrL25leHRqcy9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBDSEVDS09VVF9DT05TVEFOVFMsIFZBTElEQVRJT05fQ09OU1RBTlRTIH0gZnJvbSAnQC9jb25zdGFudHMvc2hvcCc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgeyBsb2dnZXIsIExvZ0xldmVsLCBMb2dDYXRlZ29yeSB9IGZyb20gJ0AvbGliL2xvZ2dlcic7XHJcbmltcG9ydCB7IGNoZWNrUmF0ZUxpbWl0LCBhZGRSYXRlTGltaXRIZWFkZXJzLCBSQVRFX0xJTUlUX0NPTkZJR1MsIGVuZHBvaW50S2V5R2VuZXJhdG9yIH0gZnJvbSAnQC9saWIvcmF0ZS1saW1pdGVyJztcclxuaW1wb3J0IHsgbWV0cmljc0NvbGxlY3RvciB9IGZyb20gJ0AvbGliL21ldHJpY3MnO1xyXG5cclxuLy8gU2NoZW1hIGRlIHZhbGlkYWNpw7NuIHBhcmEgbGEgZW50cmFkYVxyXG5jb25zdCBDcmVhdGVQcmVmZXJlbmNlU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIGl0ZW1zOiB6LmFycmF5KHoub2JqZWN0KHtcclxuICAgIGlkOiB6LnN0cmluZygpLm1pbigxLCAnSUQgZGUgcHJvZHVjdG8gcmVxdWVyaWRvJyksXHJcbiAgICBxdWFudGl0eTogei5udW1iZXIoKS5taW4oMSwgJ0NhbnRpZGFkIGRlYmUgc2VyIG1heW9yIGEgMCcpLm1heCg5OSwgJ0NhbnRpZGFkIG3DoXhpbWEgZXhjZWRpZGEnKSxcclxuICB9KSkubWluKDEsICdBbCBtZW5vcyB1biBwcm9kdWN0byBlcyByZXF1ZXJpZG8nKSxcclxuICBwYXllcjogei5vYmplY3Qoe1xyXG4gICAgbmFtZTogei5zdHJpbmcoKS5taW4oVkFMSURBVElPTl9DT05TVEFOVFMuTUlOX05BTUVfTEVOR1RILCAnTm9tYnJlIHJlcXVlcmlkbycpLFxyXG4gICAgc3VybmFtZTogei5zdHJpbmcoKS5taW4oVkFMSURBVElPTl9DT05TVEFOVFMuTUlOX05BTUVfTEVOR1RILCAnQXBlbGxpZG8gcmVxdWVyaWRvJyksXHJcbiAgICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgnRW1haWwgaW52w6FsaWRvJyksXHJcbiAgICBwaG9uZTogei5zdHJpbmcoKS5yZWdleChWQUxJREFUSU9OX0NPTlNUQU5UUy5QSE9ORV9SRUdFWCwgJ1RlbMOpZm9ubyBpbnbDoWxpZG8nKS5vcHRpb25hbCgpLFxyXG4gICAgaWRlbnRpZmljYXRpb246IHoub2JqZWN0KHtcclxuICAgICAgdHlwZTogei5zdHJpbmcoKS5taW4oMSwgJ1RpcG8gZGUgaWRlbnRpZmljYWNpw7NuIHJlcXVlcmlkbycpLFxyXG4gICAgICBudW1iZXI6IHouc3RyaW5nKCkubWluKDEsICdOw7ptZXJvIGRlIGlkZW50aWZpY2FjacOzbiByZXF1ZXJpZG8nKSxcclxuICAgIH0pLm9wdGlvbmFsKCksXHJcbiAgfSksXHJcbiAgc2hpcHBpbmc6IHoub2JqZWN0KHtcclxuICAgIGNvc3Q6IHoubnVtYmVyKCkubWluKDAsICdDb3N0byBkZSBlbnbDrW8gaW52w6FsaWRvJyksXHJcbiAgICBhZGRyZXNzOiB6Lm9iamVjdCh7XHJcbiAgICAgIHN0cmVldF9uYW1lOiB6LnN0cmluZygpLm1pbigxLCAnTm9tYnJlIGRlIGNhbGxlIHJlcXVlcmlkbycpLFxyXG4gICAgICBzdHJlZXRfbnVtYmVyOiB6LnN0cmluZygpLm1pbigxLCAnTsO6bWVybyBkZSBjYWxsZSByZXF1ZXJpZG8nKSxcclxuICAgICAgemlwX2NvZGU6IHouc3RyaW5nKCkubWluKDEsICdDw7NkaWdvIHBvc3RhbCByZXF1ZXJpZG8nKSxcclxuICAgICAgY2l0eV9uYW1lOiB6LnN0cmluZygpLm1pbigxLCAnQ2l1ZGFkIHJlcXVlcmlkYScpLFxyXG4gICAgICBzdGF0ZV9uYW1lOiB6LnN0cmluZygpLm1pbigxLCAnUHJvdmluY2lhIHJlcXVlcmlkYScpLFxyXG4gICAgfSksXHJcbiAgfSkub3B0aW9uYWwoKSxcclxuICBleHRlcm5hbF9yZWZlcmVuY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG5pbnRlcmZhY2UgUHJvZHVjdCB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgcHJpY2U6IG51bWJlcjtcclxuICBkaXNjb3VudGVkX3ByaWNlPzogbnVtYmVyO1xyXG4gIGltYWdlcz86IHtcclxuICAgIHByZXZpZXdzOiBzdHJpbmdbXTtcclxuICB9O1xyXG4gIGNhdGVnb3J5Pzoge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgc2x1Zzogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIGhlbHBlciBwYXJhIGNhbGN1bGFyIHByZWNpbyBmaW5hbFxyXG5mdW5jdGlvbiBnZXRGaW5hbFByaWNlKHByb2R1Y3Q6IHsgcHJpY2U6IG51bWJlcjsgZGlzY291bnRlZF9wcmljZT86IG51bWJlciB8IG51bGwgfSk6IG51bWJlciB7XHJcbiAgcmV0dXJuIHByb2R1Y3QuZGlzY291bnRlZF9wcmljZSB8fCBwcm9kdWN0LnByaWNlO1xyXG59XHJcblxyXG4vLyBGdW5jacOzbiBoZWxwZXIgcGFyYSBjcmVhciB1c3VhcmlvIHRlbXBvcmFsXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRlbXBvcmFyeVVzZXIodXNlcklkOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG4gIGlmICghc3VwYWJhc2VBZG1pbikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnRlIGFkbWluaXN0cmF0aXZvIGRlIFN1cGFiYXNlIG5vIGRpc3BvbmlibGUnKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAuaW5zZXJ0KHtcclxuICAgICAgaWQ6IHVzZXJJZCxcclxuICAgICAgY2xlcmtfaWQ6ICd0ZW1wLXVzZXInLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgbmFtZSxcclxuICAgIH0pO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHRlbXBvcmFyeSB1c2VyOicsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYW5kbyB1c3VhcmlvIHRlbXBvcmFsJyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHJlcXVlc3RTdGFydCA9IERhdGUubm93KCk7XHJcbiAgY29uc3QgY2xpZW50SVAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCAndW5rbm93bic7XHJcbiAgY29uc3QgdXNlckFnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpIHx8ICd1bmtub3duJztcclxuXHJcbiAgLy8g4pyFIE5VRVZPOiBMb2dnaW5nIGVzdHJ1Y3R1cmFkbyBkZWwgaW5pY2lvIGRlIGxhIHJlcXVlc3RcclxuICBsb2dnZXIuaW5mbyhMb2dDYXRlZ29yeS5QQVlNRU5ULCAnQ3JlYXRlIHByZWZlcmVuY2UgcmVxdWVzdCBzdGFydGVkJywge1xyXG4gICAgZW5kcG9pbnQ6ICcvYXBpL3BheW1lbnRzL2NyZWF0ZS1wcmVmZXJlbmNlJyxcclxuICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gIH0sIHtcclxuICAgIGNsaWVudElQLFxyXG4gICAgdXNlckFnZW50LFxyXG4gIH0pO1xyXG5cclxuICAvLyDinIUgTlVFVk86IFJhdGUgbGltaXRpbmcgYXZhbnphZG8gcGFyYSBBUEkgZGUgcGFnb3NcclxuICBjb25zdCByYXRlTGltaXRDb25maWcgPSB7XHJcbiAgICAuLi5SQVRFX0xJTUlUX0NPTkZJR1MuUEFZTUVOVF9BUEksXHJcbiAgICBrZXlHZW5lcmF0b3I6IGVuZHBvaW50S2V5R2VuZXJhdG9yKCdjcmVhdGUtcHJlZmVyZW5jZScpLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJhdGVMaW1pdFJlc3VsdCA9IGF3YWl0IGNoZWNrUmF0ZUxpbWl0KHJlcXVlc3QsIHJhdGVMaW1pdENvbmZpZyk7XHJcblxyXG4gIGlmICghcmF0ZUxpbWl0UmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgIGxvZ2dlci53YXJuKExvZ0NhdGVnb3J5LlNFQ1VSSVRZLCAnUmF0ZSBsaW1pdCBleGNlZWRlZCBmb3IgY3JlYXRlLXByZWZlcmVuY2UnLCB7XHJcbiAgICAgIGNsaWVudElQLFxyXG4gICAgICBsaW1pdDogcmF0ZUxpbWl0UmVzdWx0LmxpbWl0LFxyXG4gICAgICByZXRyeUFmdGVyOiByYXRlTGltaXRSZXN1bHQucmV0cnlBZnRlcixcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogcmF0ZUxpbWl0Q29uZmlnLm1lc3NhZ2UsXHJcbiAgICAgIHJldHJ5QWZ0ZXI6IHJhdGVMaW1pdFJlc3VsdC5yZXRyeUFmdGVyLFxyXG4gICAgfSwge1xyXG4gICAgICBzdGF0dXM6IDQyOSxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdSYXRlTGltaXQtTGltaXQnOiByYXRlTGltaXRSZXN1bHQubGltaXQudG9TdHJpbmcoKSxcclxuICAgICAgICAnUmF0ZUxpbWl0LVJlbWFpbmluZyc6IHJhdGVMaW1pdFJlc3VsdC5yZW1haW5pbmcudG9TdHJpbmcoKSxcclxuICAgICAgICAnUmF0ZUxpbWl0LVJlc2V0JzogbmV3IERhdGUocmF0ZUxpbWl0UmVzdWx0LnJlc2V0VGltZSkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAnUmV0cnktQWZ0ZXInOiByYXRlTGltaXRSZXN1bHQucmV0cnlBZnRlcj8udG9TdHJpbmcoKSB8fCAnNjAnLFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBWZXJpZmljYXIgcXVlIGVsIGNsaWVudGUgYWRtaW5pc3RyYXRpdm8gZXN0w6kgZGlzcG9uaWJsZVxyXG4gICAgaWYgKCFzdXBhYmFzZUFkbWluKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dDYXRlZ29yeS5QQVlNRU5ULCAnU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vdCBhdmFpbGFibGUnLCB1bmRlZmluZWQsIHsgY2xpZW50SVAgfSk7XHJcbiAgICAgIGNvbnN0IGVycm9yUmVzcG9uc2U6IEFwaVJlc3BvbnNlPG51bGw+ID0ge1xyXG4gICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdTZXJ2aWNpbyBkZSBiYXNlIGRlIGRhdG9zIG5vIGRpc3BvbmlibGUnLFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZXJyb3JSZXNwb25zZSwgeyBzdGF0dXM6IDUwMyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGFyIGVudHJhZGFcclxuICAgIGNvbnN0IHJhd0RhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBDcmVhdGVQcmVmZXJlbmNlU2NoZW1hLnNhZmVQYXJzZShyYXdEYXRhKTtcclxuXHJcbiAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICBjb25zdCBlcnJvclJlc3BvbnNlOiBBcGlSZXNwb25zZTxudWxsPiA9IHtcclxuICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBgRGF0b3MgaW52w6FsaWRvczogJHt2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmVycm9ycy5tYXAoZSA9PiBlLm1lc3NhZ2UpLmpvaW4oJywgJyl9YCxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3JkZXJEYXRhID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xyXG4gICAgY29uc3QgcHJvZHVjdElkcyA9IG9yZGVyRGF0YS5pdGVtcy5tYXAoaXRlbSA9PiBwYXJzZUludChpdGVtLmlkKSk7XHJcbiAgICBjb25zdCBzaGlwcGluZ0Nvc3QgPSBvcmRlckRhdGEuc2hpcHBpbmc/LmNvc3QgfHwgMDtcclxuXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgLy8gT0JURU5FUiBVU1VBUklPIEFVVEVOVElDQURPIENPTiBDTEVSS1xyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGxldCB1c2VySWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gICAgbGV0IHVzZXJFbWFpbDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciB1c3VhcmlvIGF1dGVudGljYWRvIGRlIENsZXJrXHJcbiAgICAgIGNvbnN0IGNsZXJrVXNlciA9IGF3YWl0IGN1cnJlbnRVc2VyKCk7XHJcbiAgICAgIGlmIChjbGVya1VzZXIpIHtcclxuICAgICAgICB1c2VySWQgPSBjbGVya1VzZXIuaWQ7XHJcbiAgICAgICAgdXNlckVtYWlsID0gY2xlcmtVc2VyLmVtYWlsQWRkcmVzc2VzWzBdPy5lbWFpbEFkZHJlc3MgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gZXhpc3RlIGVuIG51ZXN0cmEgYmFzZSBkZSBkYXRvc1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyLCBlcnJvcjogdXNlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnaWQsIGNsZXJrX2lkJylcclxuICAgICAgICAgIC5lcSgnY2xlcmtfaWQnLCBjbGVya1VzZXIuaWQpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmICh1c2VyRXJyb3IgJiYgdXNlckVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHVzZXIgaW4gZGF0YWJhc2U6JywgdXNlckVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gbm8gZXhpc3RlIGVuIG51ZXN0cmEgREIsIGNyZWFybG9cclxuICAgICAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBuZXdVc2VyLCBlcnJvcjogY3JlYXRlVXNlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgICAgIGNsZXJrX2lkOiBjbGVya1VzZXIuaWQsXHJcbiAgICAgICAgICAgICAgZW1haWw6IHVzZXJFbWFpbCxcclxuICAgICAgICAgICAgICBuYW1lOiBgJHtjbGVya1VzZXIuZmlyc3ROYW1lIHx8ICcnfSAke2NsZXJrVXNlci5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKSB8fCAnVXN1YXJpbycsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgICAgIGlmIChjcmVhdGVVc2VyRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlciBpbiBkYXRhYmFzZTonLCBjcmVhdGVVc2VyRXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51YXIgY29uIHVzdWFyaW8gdGVtcG9yYWwgc2kgZmFsbGEgbGEgY3JlYWNpw7NuXHJcbiAgICAgICAgICAgIHVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1VzZXIpIHtcclxuICAgICAgICAgICAgdXNlcklkID0gbmV3VXNlci5pZDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBuZXdVc2VyIGlzIG51bGwgYWZ0ZXIgaW5zZXJ0aW9uJyk7XHJcbiAgICAgICAgICAgIHVzZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHVzZXJJZCA9IGV4aXN0aW5nVXNlci5pZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGNsZXJrRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBDbGVyayB1c2VyOicsIGNsZXJrRXJyb3IpO1xyXG4gICAgICAvLyBDb250aW51YXIgc2luIHVzdWFyaW8gYXV0ZW50aWNhZG9cclxuICAgIH1cclxuXHJcbiAgICAvLyBTaSBubyBoYXkgdXN1YXJpbyBhdXRlbnRpY2FkbywgdXNhciB1c3VhcmlvIHRlbXBvcmFsXHJcbiAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kLCB1c2luZyB0ZW1wb3JhcnkgdXNlcicpO1xyXG4gICAgICB1c2VySWQgPSAnMDAwMDAwMDAtMDAwMC00MDAwLTgwMDAtMDAwMDAwMDAwMDAwJztcclxuICAgICAgdXNlckVtYWlsID0gb3JkZXJEYXRhLnBheWVyLmVtYWlsO1xyXG5cclxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBlbCB1c3VhcmlvIHRlbXBvcmFsIGV4aXN0ZVxyXG4gICAgICBjb25zdCB7IGRhdGE6IHRlbXBVc2VyLCBlcnJvcjogdGVtcFVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKHRlbXBVc2VyRXJyb3IpIHtcclxuICAgICAgICAvLyBDcmVhciB1c3VhcmlvIHRlbXBvcmFsIHNpIG5vIGV4aXN0ZVxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IGNyZWF0ZVRlbXBFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgICBpZDogdXNlcklkLFxyXG4gICAgICAgICAgICBjbGVya19pZDogJ3RlbXAtdXNlcicsXHJcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyRW1haWwsXHJcbiAgICAgICAgICAgIG5hbWU6IGAke29yZGVyRGF0YS5wYXllci5uYW1lfSAke29yZGVyRGF0YS5wYXllci5zdXJuYW1lfWAudHJpbSgpLFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChjcmVhdGVUZW1wRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHRlbXBvcmFyeSB1c2VyOicsIGNyZWF0ZVRlbXBFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIE9CVEVORVIgUFJPRFVDVE9TIFkgVkFMSURBUiBTVE9DS1xyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZHVjdHMsIGVycm9yOiBwcm9kdWN0c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgZGlzY291bnRlZF9wcmljZSxcclxuICAgICAgICBzdG9jayxcclxuICAgICAgICBpbWFnZXMsXHJcbiAgICAgICAgY2F0ZWdvcnk6Y2F0ZWdvcmllcyAoXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgc2x1Z1xyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLmluKCdpZCcsIHByb2R1Y3RJZHMpO1xyXG5cclxuICAgIGlmIChwcm9kdWN0c0Vycm9yIHx8ICFwcm9kdWN0cykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9kdWN0czonLCBwcm9kdWN0c0Vycm9yKTtcclxuICAgICAgY29uc3QgZXJyb3JSZXNwb25zZTogQXBpUmVzcG9uc2U8bnVsbD4gPSB7XHJcbiAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0Vycm9yIG9idGVuaWVuZG8gcHJvZHVjdG9zJyxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVmaW5pciB0aXBvIHBhcmEgcHJvZHVjdG9zIGNvbiBjYXRlZ29yw61hIChjb21vIHZpZW5lIGRlIFN1cGFiYXNlKVxyXG4gICAgdHlwZSBTdXBhYmFzZVByb2R1Y3QgPSB7XHJcbiAgICAgIGlkOiBudW1iZXI7XHJcbiAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgcHJpY2U6IG51bWJlcjtcclxuICAgICAgZGlzY291bnRlZF9wcmljZTogbnVtYmVyIHwgbnVsbDtcclxuICAgICAgc3RvY2s6IG51bWJlcjtcclxuICAgICAgaW1hZ2VzOiBhbnk7XHJcbiAgICAgIGNhdGVnb3J5OiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgIHNsdWc6IHN0cmluZztcclxuICAgICAgfVtdIHwgbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ29udmVydGlyIHByb2R1Y3RvcyBwYXJhIHRlbmVyIGNhdGVnb3LDrWEgY29tbyBvYmpldG9cclxuICAgIGNvbnN0IHR5cGVkUHJvZHVjdHMgPSAocHJvZHVjdHMgYXMgU3VwYWJhc2VQcm9kdWN0W10pLm1hcChwcm9kdWN0ID0+ICh7XHJcbiAgICAgIC4uLnByb2R1Y3QsXHJcbiAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LmNhdGVnb3J5ICYmIHByb2R1Y3QuY2F0ZWdvcnkubGVuZ3RoID4gMCA/IHByb2R1Y3QuY2F0ZWdvcnlbMF0gOiBudWxsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gVmFsaWRhciBzdG9jayBkaXNwb25pYmxlXHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3JkZXJEYXRhLml0ZW1zKSB7XHJcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSB0eXBlZFByb2R1Y3RzLmZpbmQocCA9PiBwLmlkID09PSBwYXJzZUludChpdGVtLmlkKSk7XHJcbiAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yUmVzcG9uc2U6IEFwaVJlc3BvbnNlPG51bGw+ID0ge1xyXG4gICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IGBQcm9kdWN0byAke2l0ZW0uaWR9IG5vIGVuY29udHJhZG9gLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9kdWN0LnN0b2NrIDwgaXRlbS5xdWFudGl0eSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yUmVzcG9uc2U6IEFwaVJlc3BvbnNlPG51bGw+ID0ge1xyXG4gICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IGBTdG9jayBpbnN1ZmljaWVudGUgcGFyYSAke3Byb2R1Y3QubmFtZX0uIERpc3BvbmlibGU6ICR7cHJvZHVjdC5zdG9ja30sIHNvbGljaXRhZG86ICR7aXRlbS5xdWFudGl0eX1gLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgLy8gQ0FMQ1VMQVIgVE9UQUxFUyBDT04gUFJFQ0lPUyBDT1JSRUNUT1NcclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBjb25zdCBpdGVtc1RvdGFsID0gb3JkZXJEYXRhLml0ZW1zLnJlZHVjZSgodG90YWwsIGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgcHJvZHVjdCA9IHR5cGVkUHJvZHVjdHMuZmluZChwID0+IHAuaWQgPT09IHBhcnNlSW50KGl0ZW0uaWQpKTtcclxuICAgICAgaWYgKCFwcm9kdWN0KSByZXR1cm4gdG90YWw7XHJcblxyXG4gICAgICAvLyBVc2FyIHByZWNpbyBjb24gZGVzY3VlbnRvIHNpIGV4aXN0ZSwgc2lubyBwcmVjaW8gbm9ybWFsXHJcbiAgICAgIGNvbnN0IGZpbmFsUHJpY2UgPSBnZXRGaW5hbFByaWNlKHByb2R1Y3QpO1xyXG4gICAgICByZXR1cm4gdG90YWwgKyAoZmluYWxQcmljZSAqIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgfSwgMCk7XHJcblxyXG4gICAgY29uc3QgdG90YWxBbW91bnQgPSBpdGVtc1RvdGFsICsgc2hpcHBpbmdDb3N0O1xyXG5cclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLyBDUkVBUiBPUkRFTiBFTiBCQVNFIERFIERBVE9TXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgY29uc3QgeyBkYXRhOiBvcmRlciwgZXJyb3I6IG9yZGVyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICB0b3RhbDogdG90YWxBbW91bnQsXHJcbiAgICAgICAgc2hpcHBpbmdfYWRkcmVzczogb3JkZXJEYXRhLnNoaXBwaW5nPy5hZGRyZXNzID8gSlNPTi5zdHJpbmdpZnkob3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3MpIDogbnVsbCxcclxuICAgICAgICBleHRlcm5hbF9yZWZlcmVuY2U6IG9yZGVyRGF0YS5leHRlcm5hbF9yZWZlcmVuY2UgfHwgYG9yZGVyXyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB9KVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChvcmRlckVycm9yIHx8ICFvcmRlcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBvcmRlckVycm9yKTtcclxuICAgICAgY29uc29sZS5lcnJvcignT3JkZXIgZGF0YSBhdHRlbXB0ZWQ6Jywge1xyXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICB0b3RhbDogdG90YWxBbW91bnQsXHJcbiAgICAgICAgc2hpcHBpbmdfYWRkcmVzczogb3JkZXJEYXRhLnNoaXBwaW5nPy5hZGRyZXNzID8gSlNPTi5zdHJpbmdpZnkob3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3MpIDogbnVsbCxcclxuICAgICAgICBleHRlcm5hbF9yZWZlcmVuY2U6IG9yZGVyRGF0YS5leHRlcm5hbF9yZWZlcmVuY2UgfHwgYG9yZGVyXyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgZXJyb3JSZXNwb25zZTogQXBpUmVzcG9uc2U8bnVsbD4gPSB7XHJcbiAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYEVycm9yIGNyZWFuZG8gb3JkZW46ICR7b3JkZXJFcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCxcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIENSRUFSIElURU1TIERFIExBIE9SREVOIENPTiBQUkVDSU9TIENPUlJFQ1RPU1xyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGNvbnN0IG9yZGVySXRlbXMgPSBvcmRlckRhdGEuaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBwcm9kdWN0ID0gdHlwZWRQcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcGFyc2VJbnQoaXRlbS5pZCkpO1xyXG4gICAgICBpZiAoIXByb2R1Y3QpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2R1Y3RvICR7aXRlbS5pZH0gbm8gZW5jb250cmFkb2ApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2FyIHByZWNpbyBjb24gZGVzY3VlbnRvIHNpIGV4aXN0ZSwgc2lubyBwcmVjaW8gbm9ybWFsXHJcbiAgICAgIGNvbnN0IGZpbmFsUHJpY2UgPSBnZXRGaW5hbFByaWNlKHByb2R1Y3QpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBvcmRlcl9pZDogb3JkZXIuaWQsXHJcbiAgICAgICAgcHJvZHVjdF9pZDogcGFyc2VJbnQoaXRlbS5pZCksXHJcbiAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgcHJpY2U6IGZpbmFsUHJpY2UsXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiBpdGVtc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdvcmRlcl9pdGVtcycpXHJcbiAgICAgIC5pbnNlcnQob3JkZXJJdGVtcyk7XHJcblxyXG4gICAgaWYgKGl0ZW1zRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgb3JkZXIgaXRlbXM6JywgaXRlbXNFcnJvcik7XHJcbiAgICAgIC8vIFJvbGxiYWNrOiBlbGltaW5hciBvcmRlbiBjcmVhZGFcclxuICAgICAgYXdhaXQgc3VwYWJhc2VBZG1pbi5mcm9tKCdvcmRlcnMnKS5kZWxldGUoKS5lcSgnaWQnLCBvcmRlci5pZCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvclJlc3BvbnNlOiBBcGlSZXNwb25zZTxudWxsPiA9IHtcclxuICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRXJyb3IgY3JlYW5kbyBpdGVtcyBkZSBvcmRlbicsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihlcnJvclJlc3BvbnNlLCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLyBDT05WRVJUSVIgSVRFTVMgUEFSQSBNRVJDQURPUEFHT1xyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGNvbnN0IG1lcmNhZG9QYWdvSXRlbXM6IE1lcmNhZG9QYWdvSXRlbVtdID0gdHlwZWRQcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IHtcclxuICAgICAgY29uc3Qgb3JkZXJJdGVtID0gb3JkZXJEYXRhLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBwcm9kdWN0LmlkLnRvU3RyaW5nKCkpO1xyXG4gICAgICBpZiAoIW9yZGVySXRlbSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT3JkZXIgaXRlbSBub3QgZm91bmQgZm9yIHByb2R1Y3QgJHtwcm9kdWN0LmlkfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2FyIHByZWNpbyBjb24gZGVzY3VlbnRvIHNpIGV4aXN0ZSwgc2lubyBwcmVjaW8gbm9ybWFsXHJcbiAgICAgIGNvbnN0IGZpbmFsUHJpY2UgPSBnZXRGaW5hbFByaWNlKHByb2R1Y3QpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogcHJvZHVjdC5pZC50b1N0cmluZygpLFxyXG4gICAgICAgIHRpdGxlOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGBQcm9kdWN0byBkZSBwaW50dXJlcsOtYSAtICR7cHJvZHVjdC5jYXRlZ29yeT8ubmFtZSB8fCAnR2VuZXJhbCd9YCxcclxuICAgICAgICBwaWN0dXJlX3VybDogcHJvZHVjdC5pbWFnZXM/LnByZXZpZXdzPy5bMF0gfHwgJycsXHJcbiAgICAgICAgY2F0ZWdvcnlfaWQ6IHByb2R1Y3QuY2F0ZWdvcnk/LnNsdWcgfHwgJ2dlbmVyYWwnLFxyXG4gICAgICAgIHF1YW50aXR5OiBvcmRlckl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgY3VycmVuY3lfaWQ6ICdBUlMnLFxyXG4gICAgICAgIHVuaXRfcHJpY2U6IGZpbmFsUHJpY2UsXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBZ3JlZ2FyIGNvc3RvIGRlIGVudsOtbyBzaSBleGlzdGVcclxuICAgIGlmIChzaGlwcGluZ0Nvc3QgPiAwKSB7XHJcbiAgICAgIG1lcmNhZG9QYWdvSXRlbXMucHVzaCh7XHJcbiAgICAgICAgaWQ6ICdzaGlwcGluZycsXHJcbiAgICAgICAgdGl0bGU6ICdDb3N0byBkZSBlbnbDrW8nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRW52w61vIGEgZG9taWNpbGlvJyxcclxuICAgICAgICBjYXRlZ29yeV9pZDogJ3NoaXBwaW5nJyxcclxuICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICBjdXJyZW5jeV9pZDogJ0FSUycsXHJcbiAgICAgICAgdW5pdF9wcmljZTogc2hpcHBpbmdDb3N0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDinIUgTUVKT1JBRE86IFVzYXIgbnVldmEgZnVuY2nDs24gY29uIGNvbmZpZ3VyYWNpw7NuIGF2YW56YWRhXHJcbiAgICBjb25zdCBwcmVmZXJlbmNlUmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFByZWZlcmVuY2Uoe1xyXG4gICAgICBpdGVtczogbWVyY2Fkb1BhZ29JdGVtcyxcclxuICAgICAgcGF5ZXI6IHtcclxuICAgICAgICBuYW1lOiBvcmRlckRhdGEucGF5ZXIubmFtZSxcclxuICAgICAgICBzdXJuYW1lOiBvcmRlckRhdGEucGF5ZXIuc3VybmFtZSxcclxuICAgICAgICBlbWFpbDogb3JkZXJEYXRhLnBheWVyLmVtYWlsLFxyXG4gICAgICAgIHBob25lOiBvcmRlckRhdGEucGF5ZXIucGhvbmUgPyB7XHJcbiAgICAgICAgICBhcmVhX2NvZGU6IG9yZGVyRGF0YS5wYXllci5waG9uZS5zdWJzdHJpbmcoMCwgMyksXHJcbiAgICAgICAgICBudW1iZXI6IG9yZGVyRGF0YS5wYXllci5waG9uZS5zdWJzdHJpbmcoMyksXHJcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcclxuICAgICAgICBpZGVudGlmaWNhdGlvbjogb3JkZXJEYXRhLnBheWVyLmlkZW50aWZpY2F0aW9uLFxyXG4gICAgICAgIGFkZHJlc3M6IG9yZGVyRGF0YS5zaGlwcGluZyA/IHtcclxuICAgICAgICAgIHN0cmVldF9uYW1lOiBvcmRlckRhdGEuc2hpcHBpbmcuYWRkcmVzcy5zdHJlZXRfbmFtZSxcclxuICAgICAgICAgIHN0cmVldF9udW1iZXI6IG9yZGVyRGF0YS5zaGlwcGluZy5hZGRyZXNzLnN0cmVldF9udW1iZXIsXHJcbiAgICAgICAgICB6aXBfY29kZTogb3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3MuemlwX2NvZGUsXHJcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgYmFja191cmxzOiB7XHJcbiAgICAgICAgc3VjY2VzczogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vY2hlY2tvdXQvc3VjY2Vzcz9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXHJcbiAgICAgICAgZmFpbHVyZTogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vY2hlY2tvdXQvZmFpbHVyZT9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXHJcbiAgICAgICAgcGVuZGluZzogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vY2hlY2tvdXQvcGVuZGluZz9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXHJcbiAgICAgIH0sXHJcbiAgICAgIGV4dGVybmFsX3JlZmVyZW5jZTogb3JkZXIuaWQudG9TdHJpbmcoKSxcclxuICAgICAgc2hpcG1lbnRzOiBvcmRlckRhdGEuc2hpcHBpbmcgPyB7XHJcbiAgICAgICAgY29zdDogb3JkZXJEYXRhLnNoaXBwaW5nLmNvc3QsXHJcbiAgICAgICAgcmVjZWl2ZXJfYWRkcmVzczoge1xyXG4gICAgICAgICAgemlwX2NvZGU6IG9yZGVyRGF0YS5zaGlwcGluZy5hZGRyZXNzLnppcF9jb2RlLFxyXG4gICAgICAgICAgc3RyZWV0X25hbWU6IG9yZGVyRGF0YS5zaGlwcGluZy5hZGRyZXNzLnN0cmVldF9uYW1lLFxyXG4gICAgICAgICAgc3RyZWV0X251bWJlcjogb3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3Muc3RyZWV0X251bWJlcixcclxuICAgICAgICAgIGNpdHlfbmFtZTogb3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3MuY2l0eV9uYW1lLFxyXG4gICAgICAgICAgc3RhdGVfbmFtZTogb3JkZXJEYXRhLnNoaXBwaW5nLmFkZHJlc3Muc3RhdGVfbmFtZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9IDogdW5kZWZpbmVkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g4pyFIE1FSk9SQURPOiBNYW5lamFyIHJlc3VsdGFkbyBkZSBsYSBudWV2YSBmdW5jacOzblxyXG4gICAgaWYgKCFwcmVmZXJlbmNlUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvcicgaW4gcHJlZmVyZW5jZVJlc3VsdCA/IHByZWZlcmVuY2VSZXN1bHQuZXJyb3IgOiAnRXJyb3IgY3JlYW5kbyBwcmVmZXJlbmNpYSBkZSBwYWdvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0dWFsaXphciBvcmRlbiBjb24gSUQgZGUgcHJlZmVyZW5jaWFcclxuICAgIGNvbnN0IHByZWZlcmVuY2VEYXRhID0gJ2RhdGEnIGluIHByZWZlcmVuY2VSZXN1bHQgPyBwcmVmZXJlbmNlUmVzdWx0LmRhdGEgOiBudWxsO1xyXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIHBheW1lbnRfcHJlZmVyZW5jZV9pZDogcHJlZmVyZW5jZURhdGE/LmlkLFxyXG4gICAgICB9KVxyXG4gICAgICAuZXEoJ2lkJywgb3JkZXIuaWQpO1xyXG5cclxuICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICBsb2dnZXIud2FybihMb2dDYXRlZ29yeS5QQVlNRU5ULCAnRmFpbGVkIHRvIHVwZGF0ZSBvcmRlciB3aXRoIHByZWZlcmVuY2UgSUQnLCB7IHVwZGF0ZUVycm9yIH0sIHsgY2xpZW50SVAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g4pyFIE5VRVZPOiBMb2dnaW5nIGV4aXRvc28gZGUgY3JlYWNpw7NuIGRlIHByZWZlcmVuY2lhXHJcbiAgICBjb25zdCBwcm9jZXNzaW5nVGltZSA9IERhdGUubm93KCkgLSByZXF1ZXN0U3RhcnQ7XHJcbiAgICBsb2dnZXIucGF5bWVudChMb2dMZXZlbC5JTkZPLCAnUGF5bWVudCBwcmVmZXJlbmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xyXG4gICAgICBvcmRlcklkOiBvcmRlci5pZC50b1N0cmluZygpLFxyXG4gICAgICBwcmVmZXJlbmNlSWQ6IHByZWZlcmVuY2VEYXRhPy5pZCxcclxuICAgICAgYW1vdW50OiB0b3RhbEFtb3VudCxcclxuICAgICAgY3VycmVuY3k6ICdBUlMnLFxyXG4gICAgICBtZXRob2Q6ICdtZXJjYWRvcGFnbycsXHJcbiAgICB9LCB7XHJcbiAgICAgIGNsaWVudElQLFxyXG4gICAgICB1c2VyQWdlbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBsb2dnZXIucGVyZm9ybWFuY2UoTG9nTGV2ZWwuSU5GTywgJ0NyZWF0ZSBwcmVmZXJlbmNlIHJlcXVlc3QgY29tcGxldGVkJywge1xyXG4gICAgICBvcGVyYXRpb246ICdjcmVhdGUtcHJlZmVyZW5jZScsXHJcbiAgICAgIGR1cmF0aW9uOiBwcm9jZXNzaW5nVGltZSxcclxuICAgICAgZW5kcG9pbnQ6ICcvYXBpL3BheW1lbnRzL2NyZWF0ZS1wcmVmZXJlbmNlJyxcclxuICAgICAgc3RhdHVzQ29kZTogMjAwLFxyXG4gICAgfSwgeyBjbGllbnRJUCB9KTtcclxuXHJcbiAgICAvLyDinIUgTlVFVk86IENyZWFyIHJlc3B1ZXN0YSBjb24gaGVhZGVycyBkZSByYXRlIGxpbWl0aW5nXHJcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGluaXRfcG9pbnQ6IHByZWZlcmVuY2VEYXRhPy5pbml0X3BvaW50LFxyXG4gICAgICAgIHByZWZlcmVuY2VfaWQ6IHByZWZlcmVuY2VEYXRhPy5pZCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOKchSBOVUVWTzogUmVnaXN0cmFyIG3DqXRyaWNhcyBkZSDDqXhpdG9cclxuICAgIGF3YWl0IG1ldHJpY3NDb2xsZWN0b3IucmVjb3JkUmVxdWVzdChcclxuICAgICAgJ2NyZWF0ZS1wcmVmZXJlbmNlJyxcclxuICAgICAgJ1BPU1QnLFxyXG4gICAgICAyMDAsXHJcbiAgICAgIERhdGUubm93KCkgLSByZXF1ZXN0U3RhcnQsXHJcbiAgICAgIHsgY2xpZW50SVAsIHVzZXJBZ2VudCB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIEFncmVnYXIgaGVhZGVycyBkZSByYXRlIGxpbWl0aW5nIGEgbGEgcmVzcHVlc3RhIGV4aXRvc2FcclxuICAgIHJldHVybiBhZGRSYXRlTGltaXRIZWFkZXJzKHJlc3BvbnNlLCByYXRlTGltaXRSZXN1bHQsIHJhdGVMaW1pdENvbmZpZyk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIC8vIOKchSBNRUpPUkFETzogTG9nZ2luZyBlc3RydWN0dXJhZG8gZGUgZXJyb3Jlc1xyXG4gICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBEYXRlLm5vdygpIC0gcmVxdWVzdFN0YXJ0O1xyXG5cclxuICAgIGxvZ2dlci5lcnJvcihMb2dDYXRlZ29yeS5QQVlNRU5ULCAnRmFpbGVkIHRvIGNyZWF0ZSBwYXltZW50IHByZWZlcmVuY2UnLCBlcnJvciwge1xyXG4gICAgICBjbGllbnRJUCxcclxuICAgICAgdXNlckFnZW50LFxyXG4gICAgfSk7XHJcblxyXG4gICAgbG9nZ2VyLnBlcmZvcm1hbmNlKExvZ0xldmVsLkVSUk9SLCAnQ3JlYXRlIHByZWZlcmVuY2UgcmVxdWVzdCBmYWlsZWQnLCB7XHJcbiAgICAgIG9wZXJhdGlvbjogJ2NyZWF0ZS1wcmVmZXJlbmNlJyxcclxuICAgICAgZHVyYXRpb246IHByb2Nlc3NpbmdUaW1lLFxyXG4gICAgICBlbmRwb2ludDogJy9hcGkvcGF5bWVudHMvY3JlYXRlLXByZWZlcmVuY2UnLFxyXG4gICAgICBzdGF0dXNDb2RlOiA1MDAsXHJcbiAgICB9LCB7IGNsaWVudElQIH0pO1xyXG5cclxuICAgIC8vIOKchSBOVUVWTzogUmVnaXN0cmFyIG3DqXRyaWNhcyBkZSBlcnJvclxyXG4gICAgYXdhaXQgbWV0cmljc0NvbGxlY3Rvci5yZWNvcmRSZXF1ZXN0KFxyXG4gICAgICAnY3JlYXRlLXByZWZlcmVuY2UnLFxyXG4gICAgICAnUE9TVCcsXHJcbiAgICAgIDUwMCxcclxuICAgICAgcHJvY2Vzc2luZ1RpbWUsXHJcbiAgICAgIHsgY2xpZW50SVAsIHVzZXJBZ2VudCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUE9TVCIsIkNyZWF0ZVByZWZlcmVuY2VTY2hlbWEiLCJ6Iiwib2JqZWN0IiwiaXRlbXMiLCJhcnJheSIsImlkIiwic3RyaW5nIiwibWluIiwicXVhbnRpdHkiLCJudW1iZXIiLCJtYXgiLCJwYXllciIsIm5hbWUiLCJWQUxJREFUSU9OX0NPTlNUQU5UUyIsIk1JTl9OQU1FX0xFTkdUSCIsInN1cm5hbWUiLCJlbWFpbCIsInBob25lIiwicmVnZXgiLCJQSE9ORV9SRUdFWCIsIm9wdGlvbmFsIiwiaWRlbnRpZmljYXRpb24iLCJ0eXBlIiwic2hpcHBpbmciLCJjb3N0IiwiYWRkcmVzcyIsInN0cmVldF9uYW1lIiwic3RyZWV0X251bWJlciIsInppcF9jb2RlIiwiY2l0eV9uYW1lIiwic3RhdGVfbmFtZSIsImV4dGVybmFsX3JlZmVyZW5jZSIsImdldEZpbmFsUHJpY2UiLCJwcm9kdWN0IiwiZGlzY291bnRlZF9wcmljZSIsInByaWNlIiwiY3JlYXRlVGVtcG9yYXJ5VXNlciIsInVzZXJJZCIsInN1cGFiYXNlQWRtaW4iLCJFcnJvciIsImVycm9yIiwiZnJvbSIsImluc2VydCIsImNsZXJrX2lkIiwiY29uc29sZSIsInJlcXVlc3QiLCJyZXF1ZXN0U3RhcnQiLCJEYXRlIiwibm93IiwiY2xpZW50SVAiLCJoZWFkZXJzIiwiZ2V0IiwidXNlckFnZW50IiwibG9nZ2VyIiwiaW5mbyIsIkxvZ0NhdGVnb3J5IiwiUEFZTUVOVCIsImVuZHBvaW50IiwibWV0aG9kIiwicmF0ZUxpbWl0Q29uZmlnIiwiUkFURV9MSU1JVF9DT05GSUdTIiwiUEFZTUVOVF9BUEkiLCJrZXlHZW5lcmF0b3IiLCJlbmRwb2ludEtleUdlbmVyYXRvciIsInJhdGVMaW1pdFJlc3VsdCIsImNoZWNrUmF0ZUxpbWl0Iiwic3VjY2VzcyIsIndhcm4iLCJTRUNVUklUWSIsImxpbWl0IiwicmV0cnlBZnRlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJtZXNzYWdlIiwic3RhdHVzIiwidG9TdHJpbmciLCJyZW1haW5pbmciLCJyZXNldFRpbWUiLCJ0b0lTT1N0cmluZyIsInVuZGVmaW5lZCIsImVycm9yUmVzcG9uc2UiLCJkYXRhIiwicmF3RGF0YSIsInZhbGlkYXRpb25SZXN1bHQiLCJzYWZlUGFyc2UiLCJlcnJvcnMiLCJtYXAiLCJlIiwiam9pbiIsIm9yZGVyRGF0YSIsInByb2R1Y3RJZHMiLCJpdGVtIiwicGFyc2VJbnQiLCJzaGlwcGluZ0Nvc3QiLCJ1c2VyRW1haWwiLCJjbGVya1VzZXIiLCJjdXJyZW50VXNlciIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwiZXhpc3RpbmdVc2VyIiwidXNlckVycm9yIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjb2RlIiwibmV3VXNlciIsImNyZWF0ZVVzZXJFcnJvciIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidHJpbSIsImNsZXJrRXJyb3IiLCJsb2ciLCJ0ZW1wVXNlciIsInRlbXBVc2VyRXJyb3IiLCJjcmVhdGVUZW1wRXJyb3IiLCJwcm9kdWN0cyIsInByb2R1Y3RzRXJyb3IiLCJpbiIsInR5cGVkUHJvZHVjdHMiLCJjYXRlZ29yeSIsImxlbmd0aCIsImZpbmQiLCJwIiwic3RvY2siLCJpdGVtc1RvdGFsIiwicmVkdWNlIiwidG90YWwiLCJmaW5hbFByaWNlIiwidG90YWxBbW91bnQiLCJvcmRlciIsIm9yZGVyRXJyb3IiLCJ1c2VyX2lkIiwic2hpcHBpbmdfYWRkcmVzcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJvcmRlckl0ZW1zIiwib3JkZXJfaWQiLCJwcm9kdWN0X2lkIiwiaXRlbXNFcnJvciIsImRlbGV0ZSIsIm1lcmNhZG9QYWdvSXRlbXMiLCJvcmRlckl0ZW0iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGljdHVyZV91cmwiLCJpbWFnZXMiLCJwcmV2aWV3cyIsImNhdGVnb3J5X2lkIiwic2x1ZyIsImN1cnJlbmN5X2lkIiwidW5pdF9wcmljZSIsInB1c2giLCJwcmVmZXJlbmNlUmVzdWx0IiwiY3JlYXRlUGF5bWVudFByZWZlcmVuY2UiLCJhcmVhX2NvZGUiLCJzdWJzdHJpbmciLCJiYWNrX3VybHMiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsImZhaWx1cmUiLCJwZW5kaW5nIiwic2hpcG1lbnRzIiwicmVjZWl2ZXJfYWRkcmVzcyIsInByZWZlcmVuY2VEYXRhIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJwYXltZW50X3ByZWZlcmVuY2VfaWQiLCJwcm9jZXNzaW5nVGltZSIsInBheW1lbnQiLCJMb2dMZXZlbCIsIklORk8iLCJvcmRlcklkIiwicHJlZmVyZW5jZUlkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJwZXJmb3JtYW5jZSIsIm9wZXJhdGlvbiIsImR1cmF0aW9uIiwic3RhdHVzQ29kZSIsInJlc3BvbnNlIiwiaW5pdF9wb2ludCIsInByZWZlcmVuY2VfaWQiLCJtZXRyaWNzQ29sbGVjdG9yIiwicmVjb3JkUmVxdWVzdCIsImFkZFJhdGVMaW1pdEhlYWRlcnMiLCJFUlJPUiIsIk5PREVfRU5WIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELHNDQUFzQzs7Ozs7K0JBb0ZoQkE7OztlQUFBQTs7O3dCQWxGb0I7MEJBQ1o7NkJBR1U7eUJBRVo7c0JBQzZC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