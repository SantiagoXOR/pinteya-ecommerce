{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\CartSidebarModal\\SingleItem.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppDispatch } from \"@/redux/store\";\r\nimport { removeItemFromCart, updateCartItemQuantity } from \"@/redux/features/cart-slice\";\r\nimport { getValidImageUrl } from \"@/lib/adapters/product-adapter\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Minus, Plus, Trash2 } from \"lucide-react\";\r\n\r\nconst SingleItem = ({ item }: { item: any }) => {\r\n  const [quantity, setQuantity] = useState(item.quantity);\r\n  const dispatch = useDispatch<AppDispatch>();\r\n\r\n  const handleRemoveFromCart = () => {\r\n    dispatch(removeItemFromCart(item.id));\r\n  };\r\n\r\n  const handleIncreaseQuantity = () => {\r\n    setQuantity(quantity + 1);\r\n    dispatch(updateCartItemQuantity({ id: item.id, quantity: quantity + 1 }));\r\n  };\r\n\r\n  const handleDecreaseQuantity = () => {\r\n    if (quantity > 1) {\r\n      setQuantity(quantity - 1);\r\n      dispatch(updateCartItemQuantity({ id: item.id, quantity: quantity - 1 }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl border border-gray-200 p-4 shadow-sm hover:shadow-md transition-all duration-200\" data-testid=\"cart-item\">\r\n      {/* Product Info */}\r\n      <div className=\"flex items-start gap-4 mb-4\">\r\n        <div className=\"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0\">\r\n          <Image\r\n            src={getValidImageUrl(item.imgs?.thumbnails?.[0])}\r\n            alt={item.title}\r\n            width={64}\r\n            height={64}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className=\"font-semibold text-gray-900 text-sm line-clamp-2 mb-1\">\r\n            {item.title}\r\n          </h3>\r\n          <p className=\"font-bold text-lg\" style={{ color: '#ea5a17' }}>\r\n            ${item.discountedPrice.toLocaleString()}\r\n          </p>\r\n          {item.price && item.discountedPrice && item.discountedPrice < item.price && (\r\n            <p className=\"text-xs text-gray-500 line-through\">\r\n              ${item.price.toLocaleString()}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Remove Button */}\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={handleRemoveFromCart}\r\n          aria-label=\"Eliminar producto del carrito\"\r\n          data-testid=\"remove-from-cart\"\r\n          className=\"text-red-500 hover:text-red-700 hover:bg-red-50 p-1 h-8 w-8\"\r\n        >\r\n          <Trash2 className=\"w-4 h-4\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Quantity Controls */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center rounded-lg border-2 border-yellow-400 bg-white shadow-sm overflow-hidden\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleDecreaseQuantity}\r\n            disabled={quantity <= 1}\r\n            aria-label=\"Disminuir cantidad\"\r\n            className=\"h-8 w-8 rounded-none bg-yellow-400 hover:bg-yellow-500 text-black font-bold disabled:opacity-50 disabled:bg-gray-200\"\r\n          >\r\n            <Minus className=\"w-3 h-3\" />\r\n          </Button>\r\n\r\n          <div className=\"flex items-center justify-center w-12 h-8 bg-white font-bold text-sm text-gray-900 border-x-2 border-yellow-400\">\r\n            {quantity}\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleIncreaseQuantity}\r\n            aria-label=\"Aumentar cantidad\"\r\n            className=\"h-8 w-8 rounded-none bg-yellow-400 hover:bg-yellow-500 text-black font-bold\"\r\n          >\r\n            <Plus className=\"w-3 h-3\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Subtotal */}\r\n        <div className=\"text-right\">\r\n          <p className=\"font-bold text-sm\" style={{ color: '#ea5a17' }}>\r\n            ${(item.discountedPrice * quantity).toLocaleString()}\r\n          </p>\r\n          {item.price && item.discountedPrice && item.discountedPrice < item.price && (\r\n            <p className=\"text-xs text-green-600 font-semibold\">\r\n              Ahorro: ${((item.price - item.discountedPrice) * quantity).toLocaleString()}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleItem;\r\n"],"names":["SingleItem","item","quantity","setQuantity","useState","dispatch","useDispatch","handleRemoveFromCart","removeItemFromCart","id","handleIncreaseQuantity","updateCartItemQuantity","handleDecreaseQuantity","div","className","data-testid","Image","src","getValidImageUrl","imgs","thumbnails","alt","title","width","height","h3","p","style","color","discountedPrice","toLocaleString","price","Button","variant","size","onClick","aria-label","Trash2","disabled","Minus","Plus"],"mappings":"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"}