{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\EnhancedSearchBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useCallback } from \"react\";\r\nimport { Search, ChevronDown, Palette, Brush, Wrench, Package, Sparkles } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { SearchAutocompleteIntegrated } from \"@/components/ui/SearchAutocompleteIntegrated\";\r\nimport { type SearchSuggestion } from \"@/hooks/useSearch\";\r\n\r\n// Definición de categorías con iconos\r\nconst categories = [\r\n  { id: \"all\", name: \"Todas las Categorías\", icon: Package, placeholder: \"Busco productos de pinturería...\" },\r\n  { id: \"pinturas\", name: \"Pinturas\", icon: Palette, placeholder: \"Busco pinturas...\" },\r\n  { id: \"herramientas\", name: \"Herramientas\", icon: Wrench, placeholder: \"Busco herramientas...\" },\r\n  { id: \"accesorios\", name: \"Accesorios\", icon: Package, placeholder: \"Busco accesorios...\" },\r\n  { id: \"barnices\", name: \"Barnices\", icon: Sparkles, placeholder: \"Busco barnices...\" },\r\n  { id: \"esmaltes\", name: \"Esmaltes\", icon: Brush, placeholder: \"Busco esmaltes...\" },\r\n];\r\n\r\ninterface EnhancedSearchBarProps {\r\n  className?: string;\r\n  onSearch?: (query: string, category?: string) => void;\r\n  onSuggestionSelect?: (suggestion: SearchSuggestion) => void;\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  \"data-testid\"?: string;\r\n}\r\n\r\nconst EnhancedSearchBar: React.FC<EnhancedSearchBarProps> = ({\r\n  className,\r\n  onSearch,\r\n  onSuggestionSelect,\r\n  size = \"md\",\r\n  \"data-testid\": testId,\r\n}) => {\r\n  const [selectedCategory, setSelectedCategory] = useState(categories[0]);\r\n\r\n  const handleCategorySelect = useCallback((category: typeof categories[0]) => {\r\n    setSelectedCategory(category);\r\n  }, []);\r\n\r\n  const handleSearch = useCallback((query: string) => {\r\n    // Llamar al callback externo (que manejará la búsqueda)\r\n    onSearch?.(query, selectedCategory.id !== \"all\" ? selectedCategory.id : undefined);\r\n  }, [onSearch, selectedCategory.id]);\r\n\r\n  const handleSuggestionSelect = useCallback((suggestion: SearchSuggestion) => {\r\n    // Llamar al callback externo (que manejará la selección)\r\n    onSuggestionSelect?.(suggestion);\r\n  }, [onSuggestionSelect]);\r\n\r\n  const sizeClasses = {\r\n    sm: \"h-10\",\r\n    md: \"h-12\",\r\n    lg: \"h-14\"\r\n  };\r\n\r\n  const buttonSizeClasses = {\r\n    sm: \"h-10 px-4\",\r\n    md: \"h-12 px-6\",\r\n    lg: \"h-14 px-8\"\r\n  };\r\n\r\n  const categorySizeClasses = {\r\n    sm: \"h-10 px-3 text-xs\",\r\n    md: \"h-12 px-4 text-sm\",\r\n    lg: \"h-14 px-5 text-base\"\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"w-full max-w-2xl\", className)}>\r\n      {/* Formulario de búsqueda con selector de categorías */}\r\n      <div className=\"flex items-center bg-white border-2 border-white/20 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-white focus-within:border-white shadow-lg search-focus-ring\">\r\n        {/* Selector de categorías */}\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button\r\n              variant=\"ghost\"\r\n              className={cn(\r\n                \"flex-shrink-0 border-0 rounded-none border-r border-gray-200 bg-gray-50 hover:bg-gray-100 text-gray-700 hover:text-gray-900 gap-2\",\r\n                categorySizeClasses[size]\r\n              )}\r\n              aria-expanded=\"false\"\r\n              aria-haspopup=\"menu\"\r\n              data-testid=\"category-selector\"\r\n            >\r\n              <selectedCategory.icon className=\"w-4 h-4\" />\r\n              <span className=\"hidden sm:inline font-medium\">{selectedCategory.name}</span>\r\n              <span className=\"sm:hidden font-medium\">\r\n                {selectedCategory.id === \"all\" ? \"Todo\" : selectedCategory.name}\r\n              </span>\r\n              <ChevronDown className=\"w-3 h-3\" />\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"start\" className=\"w-56\" data-testid=\"category-dropdown\">\r\n            {categories.map((category) => (\r\n              <DropdownMenuItem\r\n                key={category.id}\r\n                onClick={() => handleCategorySelect(category)}\r\n                className={cn(\r\n                  \"flex items-center gap-3 py-2\",\r\n                  selectedCategory.id === category.id && \"bg-accent\"\r\n                )}\r\n                data-testid={`category-${category.id}`}\r\n              >\r\n                <category.icon className=\"w-4 h-4\" />\r\n                <span>{category.name}</span>\r\n              </DropdownMenuItem>\r\n            ))}\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n\r\n        {/* Campo de búsqueda con autocompletado */}\r\n        <div className=\"flex-1 relative\">\r\n          <SearchAutocompleteIntegrated\r\n            // Props de configuración\r\n            placeholder={selectedCategory.placeholder}\r\n            onSearch={handleSearch}\r\n            onSuggestionSelect={handleSuggestionSelect}\r\n            size={size}\r\n            className=\"w-full [&>div>div>input]:border-0 [&>div>div>input]:rounded-none [&>div>div>input]:bg-white [&>div>div>input]:focus:ring-0 [&>div>div>input]:focus:border-gray-300\"\r\n            maxSuggestions={6}\r\n            debounceMs={150}\r\n            showRecentSearches={true}\r\n            showTrendingSearches={true}\r\n            data-testid={testId || \"search-input\"}\r\n          />\r\n        </div>\r\n\r\n        {/* Botón de búsqueda - SIN ícono duplicado */}\r\n        <Button\r\n          type=\"submit\"\r\n          className={cn(\r\n            \"rounded-l-none bg-bright-sun hover:bg-bright-sun-600 text-black border-bright-sun hover:border-bright-sun-600 flex-shrink-0 button-hover-lift font-bold transition-all duration-200\",\r\n            buttonSizeClasses[size]\r\n          )}\r\n          onClick={() => {\r\n            // Trigger search from SearchAutocomplete if needed\r\n            const searchInput = document.querySelector('[data-testid=\"search-input\"]') as HTMLInputElement;\r\n            if (searchInput?.value) {\r\n              handleSearch(searchInput.value);\r\n            }\r\n          }}\r\n        >\r\n          <span className=\"font-medium\">Buscar</span>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EnhancedSearchBar;\r\n"],"names":["categories","id","name","icon","Package","placeholder","Palette","Wrench","Sparkles","Brush","EnhancedSearchBar","className","onSearch","onSuggestionSelect","size","testId","selectedCategory","setSelectedCategory","useState","handleCategorySelect","useCallback","category","handleSearch","query","undefined","handleSuggestionSelect","suggestion","sizeClasses","sm","md","lg","buttonSizeClasses","categorySizeClasses","div","cn","DropdownMenu","DropdownMenuTrigger","asChild","Button","variant","aria-expanded","aria-haspopup","data-testid","span","ChevronDown","DropdownMenuContent","align","map","DropdownMenuItem","onClick","SearchAutocompleteIntegrated","maxSuggestions","debounceMs","showRecentSearches","showTrendingSearches","type","searchInput","document","querySelector","value"],"mappings":"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"}