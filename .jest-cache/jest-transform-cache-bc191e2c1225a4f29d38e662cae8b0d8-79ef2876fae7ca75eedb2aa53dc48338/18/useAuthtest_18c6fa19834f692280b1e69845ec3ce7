8e1814d1fee281e4058310ea36b08667
// ===================================
// TESTS PARA HOOK DE AUTENTICACIÓN
// Tests unitarios e integración para useAuth
// ===================================
"use strict";
// Mocks
jest.mock('@/lib/supabase', ()=>({
        supabase: {
            auth: {
                signUp: jest.fn(),
                signInWithPassword: jest.fn(),
                signOut: jest.fn(),
                getUser: jest.fn(),
                onAuthStateChange: jest.fn(),
                getSession: jest.fn()
            },
            from: jest.fn(()=>({
                    select: jest.fn(()=>({
                            eq: jest.fn(()=>({
                                    single: jest.fn()
                                }))
                        }))
                }))
        }
    }));
jest.mock('sonner', ()=>({
        toast: {
            success: jest.fn(),
            error: jest.fn(),
            loading: jest.fn()
        }
    }));
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _reactquery = require("@tanstack/react-query");
const _useAuth = require("../../hooks/useAuth");
const _supabase = require("../../lib/supabase");
const _sonner = require("sonner");
const _navigation = require("next/navigation");
const _react1 = /*#__PURE__*/ _interop_require_default(require("react"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockRouter = {
    push: jest.fn(),
    replace: jest.fn(),
    refresh: jest.fn()
};
// Wrapper para React Query
const createWrapper = ()=>{
    const queryClient = new _reactquery.QueryClient({
        defaultOptions: {
            queries: {
                retry: false
            }
        }
    });
    return ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
            client: queryClient,
            children: children
        });
};
describe('useAuth Hook', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        _navigation.useRouter.mockReturnValue(mockRouter);
    });
    describe('Registro de Usuario', ()=>{
        it('debe registrar un usuario exitosamente', async ()=>{
            const mockUser = {
                id: 'user-123',
                email: 'test@example.com',
                user_metadata: {
                    full_name: 'Test User'
                }
            };
            _supabase.supabase.auth.signUp.mockResolvedValue({
                data: {
                    user: mockUser
                },
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signUp({
                    email: 'test@example.com',
                    password: 'Password123!',
                    full_name: 'Test User'
                });
            });
            expect(_supabase.supabase.auth.signUp).toHaveBeenCalledWith({
                email: 'test@example.com',
                password: 'Password123!',
                options: {
                    data: {
                        full_name: 'Test User'
                    }
                }
            });
            expect(_sonner.toast.success).toHaveBeenCalledWith('Registro exitoso. Revisa tu email para confirmar tu cuenta.');
        });
        it('debe manejar errores de registro', async ()=>{
            _supabase.supabase.auth.signUp.mockResolvedValue({
                data: null,
                error: {
                    message: 'Email already registered'
                }
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signUp({
                    email: 'existing@example.com',
                    password: 'Password123!',
                    full_name: 'Test User'
                });
            });
            expect(_sonner.toast.error).toHaveBeenCalledWith('Email already registered');
        });
        it('debe validar datos de entrada antes del registro', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signUp({
                    email: 'invalid-email',
                    password: '123',
                    full_name: ''
                });
            });
            expect(_supabase.supabase.auth.signUp).not.toHaveBeenCalled();
            expect(_sonner.toast.error).toHaveBeenCalledWith(expect.stringContaining('datos válidos'));
        });
    });
    describe('Inicio de Sesión', ()=>{
        it('debe iniciar sesión exitosamente', async ()=>{
            const mockUser = {
                id: 'user-123',
                email: 'test@example.com'
            };
            _supabase.supabase.auth.signInWithPassword.mockResolvedValue({
                data: {
                    user: mockUser
                },
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'Password123!'
                });
            });
            expect(_supabase.supabase.auth.signInWithPassword).toHaveBeenCalledWith({
                email: 'test@example.com',
                password: 'Password123!'
            });
            expect(_sonner.toast.success).toHaveBeenCalledWith('¡Bienvenido de vuelta!');
            expect(mockRouter.push).toHaveBeenCalledWith('/dashboard');
        });
        it('debe manejar credenciales inválidas', async ()=>{
            _supabase.supabase.auth.signInWithPassword.mockResolvedValue({
                data: null,
                error: {
                    message: 'Invalid login credentials'
                }
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'wrongpassword'
                });
            });
            expect(_sonner.toast.error).toHaveBeenCalledWith('Credenciales inválidas');
            expect(mockRouter.push).not.toHaveBeenCalled();
        });
        it('debe validar email y contraseña antes del login', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: '',
                    password: ''
                });
            });
            expect(_supabase.supabase.auth.signInWithPassword).not.toHaveBeenCalled();
            expect(_sonner.toast.error).toHaveBeenCalledWith('Por favor ingresa email y contraseña');
        });
    });
    describe('Cierre de Sesión', ()=>{
        it('debe cerrar sesión exitosamente', async ()=>{
            _supabase.supabase.auth.signOut.mockResolvedValue({
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signOut();
            });
            expect(_supabase.supabase.auth.signOut).toHaveBeenCalled();
            expect(_sonner.toast.success).toHaveBeenCalledWith('Sesión cerrada exitosamente');
            expect(mockRouter.push).toHaveBeenCalledWith('/');
        });
        it('debe manejar errores al cerrar sesión', async ()=>{
            _supabase.supabase.auth.signOut.mockResolvedValue({
                error: {
                    message: 'Sign out failed'
                }
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signOut();
            });
            expect(_sonner.toast.error).toHaveBeenCalledWith('Error al cerrar sesión');
        });
    });
    describe('Estado de Autenticación', ()=>{
        it('debe obtener el usuario actual', async ()=>{
            const mockUser = {
                id: 'user-123',
                email: 'test@example.com'
            };
            _supabase.supabase.auth.getUser.mockResolvedValue({
                data: {
                    user: mockUser
                },
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.user).toEqual(mockUser);
                expect(result.current.isAuthenticated).toBe(true);
            });
        });
        it('debe manejar usuario no autenticado', async ()=>{
            _supabase.supabase.auth.getUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.user).toBeNull();
                expect(result.current.isAuthenticated).toBe(false);
            });
        });
        it('debe mostrar estado de carga inicial', ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            expect(result.current.isLoading).toBe(true);
        });
    });
    describe('Perfil de Usuario', ()=>{
        it('debe obtener el perfil del usuario', async ()=>{
            const mockUser = {
                id: 'user-123',
                email: 'test@example.com'
            };
            const mockProfile = {
                id: 'user-123',
                full_name: 'Test User',
                avatar_url: 'https://example.com/avatar.jpg',
                phone: '+1234567890'
            };
            _supabase.supabase.auth.getUser.mockResolvedValue({
                data: {
                    user: mockUser
                },
                error: null
            });
            _supabase.supabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: mockProfile,
                            error: null
                        })
                    })
                })
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.profile).toEqual(mockProfile);
            });
        });
        it('debe manejar errores al obtener el perfil', async ()=>{
            const mockUser = {
                id: 'user-123',
                email: 'test@example.com'
            };
            _supabase.supabase.auth.getUser.mockResolvedValue({
                data: {
                    user: mockUser
                },
                error: null
            });
            _supabase.supabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'Profile not found'
                            }
                        })
                    })
                })
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.waitFor)(()=>{
                expect(result.current.profile).toBeNull();
            });
        });
    });
    describe('Cambios de Estado de Autenticación', ()=>{
        it('debe escuchar cambios de estado de autenticación', ()=>{
            const mockCallback = jest.fn();
            _supabase.supabase.auth.onAuthStateChange.mockReturnValue({
                data: {
                    subscription: {
                        unsubscribe: jest.fn()
                    }
                }
            });
            (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            expect(_supabase.supabase.auth.onAuthStateChange).toHaveBeenCalled();
        });
        it('debe limpiar la suscripción al desmontar', ()=>{
            const mockUnsubscribe = jest.fn();
            _supabase.supabase.auth.onAuthStateChange.mockReturnValue({
                data: {
                    subscription: {
                        unsubscribe: mockUnsubscribe
                    }
                }
            });
            const { unmount } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            unmount();
            expect(mockUnsubscribe).toHaveBeenCalled();
        });
    });
    describe('Casos Edge', ()=>{
        it('debe manejar errores de red', async ()=>{
            _supabase.supabase.auth.signInWithPassword.mockRejectedValue(new Error('Network error'));
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'Password123!'
                });
            });
            expect(_sonner.toast.error).toHaveBeenCalledWith('Error de conexión. Verifica tu internet.');
        });
        it('debe manejar respuestas inesperadas del servidor', async ()=>{
            _supabase.supabase.auth.signUp.mockResolvedValue(null);
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signUp({
                    email: 'test@example.com',
                    password: 'Password123!',
                    full_name: 'Test User'
                });
            });
            expect(_sonner.toast.error).toHaveBeenCalledWith('Error inesperado. Intenta nuevamente.');
        });
        it('debe prevenir múltiples llamadas simultáneas', async ()=>{
            let resolveSignIn;
            const signInPromise = new Promise((resolve)=>{
                resolveSignIn = resolve;
            });
            _supabase.supabase.auth.signInWithPassword.mockReturnValue(signInPromise);
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            // Iniciar dos llamadas simultáneas
            const promise1 = (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'Password123!'
                });
            });
            const promise2 = (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'Password123!'
                });
            });
            // Resolver la primera llamada
            resolveSignIn({
                data: {
                    user: {
                        id: 'user-123'
                    }
                },
                error: null
            });
            await Promise.all([
                promise1,
                promise2
            ]);
            // Solo debe haberse llamado una vez
            expect(_supabase.supabase.auth.signInWithPassword).toHaveBeenCalledTimes(1);
        });
    });
    describe('Integración con Router', ()=>{
        it('debe redirigir después del login exitoso', async ()=>{
            _supabase.supabase.auth.signInWithPassword.mockResolvedValue({
                data: {
                    user: {
                        id: 'user-123'
                    }
                },
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signIn({
                    email: 'test@example.com',
                    password: 'Password123!'
                });
            });
            expect(mockRouter.push).toHaveBeenCalledWith('/dashboard');
        });
        it('debe redirigir a home después del logout', async ()=>{
            _supabase.supabase.auth.signOut.mockResolvedValue({
                error: null
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useAuth.useAuth)(), {
                wrapper: createWrapper()
            });
            await (0, _react.act)(async ()=>{
                await result.current.signOut();
            });
            expect(mockRouter.push).toHaveBeenCalledWith('/');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcdXNlQXV0aC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVEVTVFMgUEFSQSBIT09LIERFIEFVVEVOVElDQUNJw5NOXG4vLyBUZXN0cyB1bml0YXJpb3MgZSBpbnRlZ3JhY2nDs24gcGFyYSB1c2VBdXRoXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2hvb2tzL3VzZUF1dGgnO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcic7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLy8gTW9ja3Ncbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBzdXBhYmFzZToge1xuICAgIGF1dGg6IHtcbiAgICAgIHNpZ25VcDogamVzdC5mbigpLFxuICAgICAgc2lnbkluV2l0aFBhc3N3b3JkOiBqZXN0LmZuKCksXG4gICAgICBzaWduT3V0OiBqZXN0LmZuKCksXG4gICAgICBnZXRVc2VyOiBqZXN0LmZuKCksXG4gICAgICBvbkF1dGhTdGF0ZUNoYW5nZTogamVzdC5mbigpLFxuICAgICAgZ2V0U2Vzc2lvbjogamVzdC5mbigpXG4gICAgfSxcbiAgICBmcm9tOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKVxuICAgICAgICB9KSlcbiAgICAgIH0pKVxuICAgIH0pKVxuICB9XG59KSk7XG5cbmplc3QubW9jaygnc29ubmVyJywgKCkgPT4gKHtcbiAgdG9hc3Q6IHtcbiAgICBzdWNjZXNzOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgICBsb2FkaW5nOiBqZXN0LmZuKClcbiAgfVxufSkpO1xuXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpXG59KSk7XG5cbmNvbnN0IG1vY2tSb3V0ZXIgPSB7XG4gIHB1c2g6IGplc3QuZm4oKSxcbiAgcmVwbGFjZTogamVzdC5mbigpLFxuICByZWZyZXNoOiBqZXN0LmZuKClcbn07XG5cbi8vIFdyYXBwZXIgcGFyYSBSZWFjdCBRdWVyeVxuY29uc3QgY3JlYXRlV3JhcHBlciA9ICgpID0+IHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBuZXcgUXVlcnlDbGllbnQoe1xuICAgIGRlZmF1bHRPcHRpb25zOiB7XG4gICAgICBxdWVyaWVzOiB7XG4gICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIFxuICByZXR1cm4gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pID0+IChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT57Y2hpbGRyZW59PC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICApO1xufTtcblxuZGVzY3JpYmUoJ3VzZUF1dGggSG9vaycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgKHVzZVJvdXRlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrUm91dGVyKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlZ2lzdHJvIGRlIFVzdWFyaW8nLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgcmVnaXN0cmFyIHVuIHVzdWFyaW8gZXhpdG9zYW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7XG4gICAgICAgIGlkOiAndXNlci0xMjMnLFxuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICB1c2VyX21ldGFkYXRhOiB7IGZ1bGxfbmFtZTogJ1Rlc3QgVXNlcicgfVxuICAgICAgfTtcblxuICAgICAgKHN1cGFiYXNlLmF1dGguc2lnblVwIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG1vY2tVc2VyIH0sXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNpZ25VcCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzIScsXG4gICAgICAgICAgZnVsbF9uYW1lOiAnVGVzdCBVc2VyJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3VwYWJhc2UuYXV0aC5zaWduVXApLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdQYXNzd29yZDEyMyEnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnVsbF9uYW1lOiAnVGVzdCBVc2VyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh0b2FzdC5zdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ1JlZ2lzdHJvIGV4aXRvc28uIFJldmlzYSB0dSBlbWFpbCBwYXJhIGNvbmZpcm1hciB0dSBjdWVudGEuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgZXJyb3JlcyBkZSByZWdpc3RybycsIGFzeW5jICgpID0+IHtcbiAgICAgIChzdXBhYmFzZS5hdXRoLnNpZ25VcCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZCcgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zaWduVXAoe1xuICAgICAgICAgIGVtYWlsOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJyxcbiAgICAgICAgICBmdWxsX25hbWU6ICdUZXN0IFVzZXInXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh0b2FzdC5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgdmFsaWRhciBkYXRvcyBkZSBlbnRyYWRhIGFudGVzIGRlbCByZWdpc3RybycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zaWduVXAoe1xuICAgICAgICAgIGVtYWlsOiAnaW52YWxpZC1lbWFpbCcsXG4gICAgICAgICAgcGFzc3dvcmQ6ICcxMjMnLFxuICAgICAgICAgIGZ1bGxfbmFtZTogJydcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHN1cGFiYXNlLmF1dGguc2lnblVwKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHRvYXN0LmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2RhdG9zIHbDoWxpZG9zJylcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbmljaW8gZGUgU2VzacOzbicsICgpID0+IHtcbiAgICBpdCgnZGViZSBpbmljaWFyIHNlc2nDs24gZXhpdG9zYW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7XG4gICAgICAgIGlkOiAndXNlci0xMjMnLFxuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nXG4gICAgICB9O1xuXG4gICAgICAoc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgdXNlcjogbW9ja1VzZXIgfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2lnbkluKHtcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdQYXNzd29yZDEyMyEnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHRvYXN0LnN1Y2Nlc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfCoUJpZW52ZW5pZG8gZGUgdnVlbHRhIScpO1xuICAgICAgZXhwZWN0KG1vY2tSb3V0ZXIucHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9kYXNoYm9hcmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgY3JlZGVuY2lhbGVzIGludsOhbGlkYXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdJbnZhbGlkIGxvZ2luIGNyZWRlbnRpYWxzJyB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNpZ25Jbih7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3dyb25ncGFzc3dvcmQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh0b2FzdC5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0NyZWRlbmNpYWxlcyBpbnbDoWxpZGFzJyk7XG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgdmFsaWRhciBlbWFpbCB5IGNvbnRyYXNlw7FhIGFudGVzIGRlbCBsb2dpbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zaWduSW4oe1xuICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICBwYXNzd29yZDogJydcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHRvYXN0LmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ1BvciBmYXZvciBpbmdyZXNhIGVtYWlsIHkgY29udHJhc2XDsWEnXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2llcnJlIGRlIFNlc2nDs24nLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgY2VycmFyIHNlc2nDs24gZXhpdG9zYW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHN1cGFiYXNlLmF1dGguc2lnbk91dCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2lnbk91dCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzdXBhYmFzZS5hdXRoLnNpZ25PdXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdCh0b2FzdC5zdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnU2VzacOzbiBjZXJyYWRhIGV4aXRvc2FtZW50ZScpO1xuICAgICAgZXhwZWN0KG1vY2tSb3V0ZXIucHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgZXJyb3JlcyBhbCBjZXJyYXIgc2VzacOzbicsIGFzeW5jICgpID0+IHtcbiAgICAgIChzdXBhYmFzZS5hdXRoLnNpZ25PdXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdTaWduIG91dCBmYWlsZWQnIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2lnbk91dCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh0b2FzdC5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0Vycm9yIGFsIGNlcnJhciBzZXNpw7NuJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFc3RhZG8gZGUgQXV0ZW50aWNhY2nDs24nLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgb2J0ZW5lciBlbCB1c3VhcmlvIGFjdHVhbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgICAgICBpZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJ1xuICAgICAgfTtcblxuICAgICAgKHN1cGFiYXNlLmF1dGguZ2V0VXNlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBtb2NrVXNlciB9LFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVzZXIpLnRvRXF1YWwobW9ja1VzZXIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBtYW5lamFyIHVzdWFyaW8gbm8gYXV0ZW50aWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc3VwYWJhc2UuYXV0aC5nZXRVc2VyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyKS50b0JlTnVsbCgpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgbW9zdHJhciBlc3RhZG8gZGUgY2FyZ2EgaW5pY2lhbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZmlsIGRlIFVzdWFyaW8nLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgb2J0ZW5lciBlbCBwZXJmaWwgZGVsIHVzdWFyaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICAgICAgaWQ6ICd1c2VyLTEyMycsXG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tQcm9maWxlID0ge1xuICAgICAgICBpZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZnVsbF9uYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgICAgYXZhdGFyX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXZhdGFyLmpwZycsXG4gICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnXG4gICAgICB9O1xuXG4gICAgICAoc3VwYWJhc2UuYXV0aC5nZXRVc2VyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG1vY2tVc2VyIH0sXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9KTtcblxuICAgICAgKHN1cGFiYXNlLmZyb20gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YTogbW9ja1Byb2ZpbGUsXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQucHJvZmlsZSkudG9FcXVhbChtb2NrUHJvZmlsZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgZXJyb3JlcyBhbCBvYnRlbmVyIGVsIHBlcmZpbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgICAgICBpZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJ1xuICAgICAgfTtcblxuICAgICAgKHN1cGFiYXNlLmF1dGguZ2V0VXNlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBtb2NrVXNlciB9LFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIChzdXBhYmFzZS5mcm9tIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdQcm9maWxlIG5vdCBmb3VuZCcgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnByb2ZpbGUpLnRvQmVOdWxsKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbWJpb3MgZGUgRXN0YWRvIGRlIEF1dGVudGljYWNpw7NuJywgKCkgPT4ge1xuICAgIGl0KCdkZWJlIGVzY3VjaGFyIGNhbWJpb3MgZGUgZXN0YWRvIGRlIGF1dGVudGljYWNpw7NuJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrID0gamVzdC5mbigpO1xuICAgICAgKHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHN1YnNjcmlwdGlvbjogeyB1bnN1YnNjcmliZTogamVzdC5mbigpIH0gfVxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBsaW1waWFyIGxhIHN1c2NyaXBjacOzbiBhbCBkZXNtb250YXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVW5zdWJzY3JpYmUgPSBqZXN0LmZuKCk7XG4gICAgICAoc3VwYWJhc2UuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc3Vic2NyaXB0aW9uOiB7IHVuc3Vic2NyaWJlOiBtb2NrVW5zdWJzY3JpYmUgfSB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUF1dGgoKSwge1xuICAgICAgICB3cmFwcGVyOiBjcmVhdGVXcmFwcGVyKClcbiAgICAgIH0pO1xuXG4gICAgICB1bm1vdW50KCk7XG5cbiAgICAgIGV4cGVjdChtb2NrVW5zdWJzY3JpYmUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Nhc29zIEVkZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ2RlYmUgbWFuZWphciBlcnJvcmVzIGRlIHJlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNpZ25Jbih7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzISdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHRvYXN0LmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ0Vycm9yIGRlIGNvbmV4acOzbi4gVmVyaWZpY2EgdHUgaW50ZXJuZXQuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZWJlIG1hbmVqYXIgcmVzcHVlc3RhcyBpbmVzcGVyYWRhcyBkZWwgc2Vydmlkb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc3VwYWJhc2UuYXV0aC5zaWduVXAgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpLCB7XG4gICAgICAgIHdyYXBwZXI6IGNyZWF0ZVdyYXBwZXIoKVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNpZ25VcCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzIScsXG4gICAgICAgICAgZnVsbF9uYW1lOiAnVGVzdCBVc2VyJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QodG9hc3QuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnRXJyb3IgaW5lc3BlcmFkby4gSW50ZW50YSBudWV2YW1lbnRlLidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGViZSBwcmV2ZW5pciBtw7psdGlwbGVzIGxsYW1hZGFzIHNpbXVsdMOhbmVhcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCByZXNvbHZlU2lnbkluOiAodmFsdWU6IGFueSkgPT4gdm9pZDtcbiAgICAgIGNvbnN0IHNpZ25JblByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcmVzb2x2ZVNpZ25JbiA9IHJlc29sdmU7XG4gICAgICB9KTtcblxuICAgICAgKHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHNpZ25JblByb21pc2UpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgLy8gSW5pY2lhciBkb3MgbGxhbWFkYXMgc2ltdWx0w6FuZWFzXG4gICAgICBjb25zdCBwcm9taXNlMSA9IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNpZ25Jbih7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzISdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJvbWlzZTIgPSBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zaWduSW4oe1xuICAgICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICdQYXNzd29yZDEyMyEnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlc29sdmVyIGxhIHByaW1lcmEgbGxhbWFkYVxuICAgICAgcmVzb2x2ZVNpZ25JbiEoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEyMycgfSB9LFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtwcm9taXNlMSwgcHJvbWlzZTJdKTtcblxuICAgICAgLy8gU29sbyBkZWJlIGhhYmVyc2UgbGxhbWFkbyB1bmEgdmV6XG4gICAgICBleHBlY3Qoc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmFjacOzbiBjb24gUm91dGVyJywgKCkgPT4ge1xuICAgIGl0KCdkZWJlIHJlZGlyaWdpciBkZXNwdcOpcyBkZWwgbG9naW4gZXhpdG9zbycsIGFzeW5jICgpID0+IHtcbiAgICAgIChzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiB7IGlkOiAndXNlci0xMjMnIH0gfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2lnbkluKHtcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2Rhc2hib2FyZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYmUgcmVkaXJpZ2lyIGEgaG9tZSBkZXNwdcOpcyBkZWwgbG9nb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHN1cGFiYXNlLmF1dGguc2lnbk91dCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCksIHtcbiAgICAgICAgd3JhcHBlcjogY3JlYXRlV3JhcHBlcigpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2lnbk91dCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrUm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwic3VwYWJhc2UiLCJhdXRoIiwic2lnblVwIiwiZm4iLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJzaWduT3V0IiwiZ2V0VXNlciIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZ2V0U2Vzc2lvbiIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInRvYXN0Iiwic3VjY2VzcyIsImVycm9yIiwibG9hZGluZyIsInVzZVJvdXRlciIsIm1vY2tSb3V0ZXIiLCJwdXNoIiwicmVwbGFjZSIsInJlZnJlc2giLCJjcmVhdGVXcmFwcGVyIiwicXVlcnlDbGllbnQiLCJRdWVyeUNsaWVudCIsImRlZmF1bHRPcHRpb25zIiwicXVlcmllcyIsInJldHJ5IiwiY2hpbGRyZW4iLCJRdWVyeUNsaWVudFByb3ZpZGVyIiwiY2xpZW50IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsIml0IiwibW9ja1VzZXIiLCJpZCIsImVtYWlsIiwidXNlcl9tZXRhZGF0YSIsImZ1bGxfbmFtZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsInVzZXIiLCJyZXN1bHQiLCJyZW5kZXJIb29rIiwidXNlQXV0aCIsIndyYXBwZXIiLCJhY3QiLCJjdXJyZW50IiwicGFzc3dvcmQiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9wdGlvbnMiLCJtZXNzYWdlIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsInN0cmluZ0NvbnRhaW5pbmciLCJzaWduSW4iLCJ3YWl0Rm9yIiwidG9FcXVhbCIsImlzQXV0aGVudGljYXRlZCIsInRvQmUiLCJ0b0JlTnVsbCIsImlzTG9hZGluZyIsIm1vY2tQcm9maWxlIiwiYXZhdGFyX3VybCIsInBob25lIiwicHJvZmlsZSIsIm1vY2tDYWxsYmFjayIsInN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwibW9ja1Vuc3Vic2NyaWJlIiwidW5tb3VudCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJyZXNvbHZlU2lnbkluIiwic2lnbkluUHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicHJvbWlzZTEiLCJwcm9taXNlMiIsImFsbCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLG1DQUFtQztBQUNuQyw2Q0FBNkM7QUFDN0Msc0NBQXNDOztBQVV0QyxRQUFRO0FBQ1JBLEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDQyxVQUFVO1lBQ1JDLE1BQU07Z0JBQ0pDLFFBQVFKLEtBQUtLLEVBQUU7Z0JBQ2ZDLG9CQUFvQk4sS0FBS0ssRUFBRTtnQkFDM0JFLFNBQVNQLEtBQUtLLEVBQUU7Z0JBQ2hCRyxTQUFTUixLQUFLSyxFQUFFO2dCQUNoQkksbUJBQW1CVCxLQUFLSyxFQUFFO2dCQUMxQkssWUFBWVYsS0FBS0ssRUFBRTtZQUNyQjtZQUNBTSxNQUFNWCxLQUFLSyxFQUFFLENBQUMsSUFBTyxDQUFBO29CQUNuQk8sUUFBUVosS0FBS0ssRUFBRSxDQUFDLElBQU8sQ0FBQTs0QkFDckJRLElBQUliLEtBQUtLLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0NBQ2pCUyxRQUFRZCxLQUFLSyxFQUFFO2dDQUNqQixDQUFBO3dC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