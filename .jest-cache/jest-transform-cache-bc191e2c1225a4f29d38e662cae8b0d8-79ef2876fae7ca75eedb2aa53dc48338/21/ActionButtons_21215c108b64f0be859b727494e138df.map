{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\ActionButtons.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { User, ShoppingCart, LogIn } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useCartModalContext } from \"@/app/context/CartSidebarModalContext\";\r\nimport { useAppSelector } from \"@/redux/store\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectTotalPrice } from \"@/redux/features/cart-slice\";\r\n\r\n// Componente para el icono de Google\r\nconst GoogleIcon = ({ className }: { className?: string }) => (\r\n  <svg\r\n    className={className}\r\n    viewBox=\"0 0 24 24\"\r\n    fill=\"currentColor\"\r\n  >\r\n    <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\"/>\r\n    <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\"/>\r\n    <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" fill=\"#FBBC05\"/>\r\n    <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\"/>\r\n  </svg>\r\n);\r\n\r\ninterface ActionButtonsProps {\r\n  className?: string;\r\n  variant?: \"header\" | \"mobile\";\r\n}\r\n\r\nconst ActionButtons: React.FC<ActionButtonsProps> = ({\r\n  className,\r\n  variant = \"header\"\r\n}) => {\r\n  // Integración con Clerk\r\n  const { isSignedIn, user, isLoaded } = useUser();\r\n\r\n  // Integración con carrito\r\n  const { openCartModal } = useCartModalContext();\r\n  const cartItems = useAppSelector((state) => state.cartReducer.items);\r\n  const totalPrice = useSelector(selectTotalPrice);\r\n  const cartItemCount = cartItems.length;\r\n\r\n  const handleCartClick = () => {\r\n    openCartModal();\r\n  };\r\n\r\n  // Componente skeleton para estado de carga\r\n  const AuthSkeleton = () => (\r\n    <div className=\"flex items-center gap-2\">\r\n      <div className=\"h-8 w-24 bg-white/20 rounded animate-pulse\" />\r\n    </div>\r\n  );\r\n\r\n  if (variant === \"mobile\") {\r\n    return (\r\n      <div className={cn(\"flex items-center gap-2\", className)}>\r\n        {/* Carrito móvil */}\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={handleCartClick}\r\n          className=\"relative p-2 text-white hover:text-black hover:bg-bright-sun transition-all duration-200\"\r\n          data-testid=\"cart-icon\"\r\n        >\r\n          <Image\r\n            src=\"/images/categories/carrito.png\"\r\n            alt=\"Carrito\"\r\n            width={20}\r\n            height={20}\r\n            className=\"w-5 h-5\"\r\n          />\r\n          {cartItemCount > 0 && (\r\n            <Badge\r\n              className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs font-bold text-white shadow-md\"\r\n              style={{ backgroundColor: '#007639' }}\r\n            >\r\n              {cartItemCount}\r\n            </Badge>\r\n          )}\r\n        </Button>\r\n\r\n        {/* Usuario móvil con integración Clerk */}\r\n        {!isLoaded ? (\r\n          <AuthSkeleton />\r\n        ) : isSignedIn ? (\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"ghost\" size=\"sm\" className=\"p-1 hover:bg-bright-sun hover:text-black transition-all duration-200 rounded-full\">\r\n                <Avatar className=\"h-8 w-8 ring-2 ring-transparent hover:ring-bright-sun transition-all duration-200\">\r\n                  <AvatarImage src={user?.imageUrl} />\r\n                  <AvatarFallback className=\"bg-primary-100 text-primary-700 text-sm font-medium\">\r\n                    {user?.firstName?.[0] || user?.emailAddresses?.[0]?.emailAddress?.[0]?.toUpperCase() || 'U'}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n              <DropdownMenuItem>\r\n                <User className=\"mr-2 h-4 w-4\" />\r\n                Mi Perfil\r\n              </DropdownMenuItem>\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem>\r\n                Cerrar Sesión\r\n              </DropdownMenuItem>\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        ) : (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"p-2 hover:bg-bright-sun text-white hover:text-black transition-all duration-200\"\r\n          >\r\n            <div className=\"flex items-center gap-1\">\r\n              <GoogleIcon className=\"w-4 h-4\" />\r\n              <User className=\"w-4 h-4\" />\r\n            </div>\r\n          </Button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Versión desktop con integración Clerk\r\n  return (\r\n    <div className={cn(\"flex items-center gap-3\", className)}>\r\n      {/* Carrito desktop */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"sm\"\r\n        onClick={handleCartClick}\r\n        className=\"relative text-white hover:text-black hover:bg-bright-sun px-3 py-2 transition-all duration-200\"\r\n        data-testid=\"cart-icon\"\r\n        aria-label={`Carrito con ${cartItemCount} productos`}\r\n      >\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"relative\">\r\n            <Image\r\n              src=\"/images/categories/carrito.png\"\r\n              alt=\"Carrito\"\r\n              width={20}\r\n              height={20}\r\n              className=\"w-5 h-5\"\r\n            />\r\n            {cartItemCount > 0 && (\r\n              <Badge\r\n                className=\"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs font-bold text-white shadow-md\"\r\n                style={{ backgroundColor: '#007639' }}\r\n              >\r\n                {cartItemCount}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <span className=\"text-sm font-medium hidden lg:inline\">\r\n            Carrito {cartItemCount > 0 && `(${cartItemCount})`}\r\n          </span>\r\n        </div>\r\n      </Button>\r\n\r\n      {/* Usuario desktop */}\r\n      {!isLoaded ? (\r\n        <AuthSkeleton />\r\n      ) : isSignedIn ? (\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"flex items-center gap-2 px-3 py-2 text-white hover:text-black hover:bg-bright-sun transition-all duration-200 rounded-full\">\r\n              <Avatar className=\"h-8 w-8 ring-2 ring-transparent hover:ring-bright-sun transition-all duration-200\">\r\n                <AvatarImage src={user?.imageUrl} />\r\n                <AvatarFallback className=\"bg-white text-blaze-orange-700 text-sm font-medium\">\r\n                  {user?.firstName?.[0] || user?.emailAddresses?.[0]?.emailAddress?.[0]?.toUpperCase() || 'U'}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <span className=\"text-sm font-medium\">\r\n                {user?.firstName || user?.emailAddresses?.[0]?.emailAddress?.split('@')[0] || 'Usuario'}\r\n              </span>\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n            <DropdownMenuItem>\r\n              <User className=\"mr-2 h-4 w-4\" />\r\n              Mi Perfil\r\n            </DropdownMenuItem>\r\n            <DropdownMenuSeparator />\r\n            <DropdownMenuItem>\r\n              Cerrar Sesión\r\n            </DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n      ) : (\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Botón \"Iniciar Sesión\" */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"text-white hover:text-black hover:bg-bright-sun transition-all duration-200\"\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <LogIn className=\"w-4 h-4\" />\r\n              <span className=\"text-sm font-medium\">Iniciar Sesión</span>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ActionButtons;\r\n"],"names":["GoogleIcon","className","svg","viewBox","fill","path","d","ActionButtons","variant","isSignedIn","user","isLoaded","useUser","openCartModal","useCartModalContext","cartItems","useAppSelector","state","cartReducer","items","totalPrice","useSelector","selectTotalPrice","cartItemCount","length","handleCartClick","AuthSkeleton","div","cn","Button","size","onClick","data-testid","Image","src","alt","width","height","Badge","style","backgroundColor","DropdownMenu","DropdownMenuTrigger","asChild","Avatar","AvatarImage","imageUrl","AvatarFallback","firstName","emailAddresses","emailAddress","toUpperCase","DropdownMenuContent","align","DropdownMenuItem","User","DropdownMenuSeparator","aria-label","span","split","LogIn"],"mappings":"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"}