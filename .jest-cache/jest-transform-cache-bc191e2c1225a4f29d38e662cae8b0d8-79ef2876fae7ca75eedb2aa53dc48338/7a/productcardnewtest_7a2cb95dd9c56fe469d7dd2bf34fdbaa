74c8eedc9645d2a1d22449261e45b860
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _card = require("../card");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe('ProductCard - Nuevo Diseño', ()=>{
    const defaultProps = {
        image: '/test-image.jpg',
        title: 'Pintura Látex Premium Sherwin Williams',
        price: 2500,
        originalPrice: 3200,
        discount: '25%',
        badge: 'Llega gratis hoy',
        cta: 'Agregar al carrito',
        stock: 10,
        onAddToCart: jest.fn()
    };
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('renderiza correctamente con todas las props', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByTestId('product-card')).toBeInTheDocument();
        expect(_react1.screen.getByTestId('product-name')).toHaveTextContent('Pintura Látex Premium Sherwin Williams');
        expect(_react1.screen.getByTestId('product-price')).toBeInTheDocument();
        expect(_react1.screen.getByTestId('add-to-cart-btn')).toHaveTextContent('Agregar al carrito');
    });
    it('muestra el badge de descuento correctamente', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('25%')).toBeInTheDocument();
        expect(_react1.screen.getByText('Descuento')).toBeInTheDocument();
        expect(_react1.screen.getByText('especial')).toBeInTheDocument();
    });
    it('muestra el badge de envío', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Llega gratis hoy')).toBeInTheDocument();
    });
    it('muestra precios correctamente formateados', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('$2.500')).toBeInTheDocument();
        expect(_react1.screen.getByText('$3.200')).toBeInTheDocument();
    });
    it('no muestra precio original si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            originalPrice: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('$2.500')).toBeInTheDocument();
        expect(_react1.screen.queryByText('$3.200')).not.toBeInTheDocument();
    });
    it('no muestra badge de descuento si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            discount: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.queryByText('25%')).not.toBeInTheDocument();
        expect(_react1.screen.queryByText('Descuento especial')).not.toBeInTheDocument();
    });
    it('muestra placeholder cuando no hay imagen', ()=>{
        const props = {
            ...defaultProps,
            image: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        // Verifica que se muestra el placeholder SVG
        const placeholder = _react1.screen.getByTestId('product-card').querySelector('svg');
        expect(placeholder).toBeInTheDocument();
    });
    it('llama a onAddToCart cuando se hace click en el botón', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        _react1.fireEvent.click(button);
        expect(defaultProps.onAddToCart).toHaveBeenCalledTimes(1);
    });
    it('muestra animación de carga al agregar al carrito', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            showCartAnimation: true
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        _react1.fireEvent.click(button);
        // Debe mostrar "Agregando..." inmediatamente
        expect(_react1.screen.getByText('Agregando...')).toBeInTheDocument();
        expect(button).toBeDisabled();
        // Debe volver al estado original después de 1 segundo
        await (0, _react1.waitFor)(()=>{
            expect(_react1.screen.getByText('Agregar al carrito')).toBeInTheDocument();
            expect(button).not.toBeDisabled();
        }, {
            timeout: 1500
        });
    });
    it('deshabilita el botón cuando stock es 0', ()=>{
        const props = {
            ...defaultProps,
            stock: 0
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        expect(button).toBeDisabled();
        expect(button).toHaveTextContent('Sin stock');
    });
    it('permite personalizar el texto del CTA', ()=>{
        const props = {
            ...defaultProps,
            cta: 'Comprar ahora'
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('Comprar ahora')).toBeInTheDocument();
    });
    it('usa CTA por defecto si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            cta: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('Agregar al carrito')).toBeInTheDocument();
    });
    it('renderiza link al producto si se proporciona productId', ()=>{
        const props = {
            ...defaultProps,
            productId: '123'
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        const link = _react1.screen.getByRole('link');
        expect(link).toHaveAttribute('href', '/shop-details/123');
    });
    it('no renderiza link si no se proporciona productId', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.queryByRole('link')).not.toBeInTheDocument();
    });
    it('aplica clases CSS correctas para el diseño', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveClass('bg-white');
        expect(card).toHaveClass('rounded-xl') // Mobile-first: rounded-xl
        ;
        expect(card).toHaveClass('md:rounded-2xl') // Desktop: rounded-2xl
        ;
        expect(card).toHaveClass('md:max-w-[300px]') // Desktop: max-width
        ;
    });
    it('muestra ícono de carrito en el botón CTA', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        const icon = button.querySelector('svg');
        expect(icon).toBeInTheDocument();
    });
    it('maneja correctamente productos sin precio', ()=>{
        const props = {
            ...defaultProps,
            price: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        // El ProductCard siempre muestra el precio, incluso si es undefined (muestra $0)
        expect(_react1.screen.getByTestId('product-price')).toBeInTheDocument();
        expect(_react1.screen.getByText('$0')).toBeInTheDocument();
    });
    it('renderiza children adicionales si se proporcionan', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "custom-content",
                children: "Contenido personalizado"
            })
        }));
        expect(_react1.screen.getByTestId('custom-content')).toBeInTheDocument();
        expect(_react1.screen.getByText('Contenido personalizado')).toBeInTheDocument();
    });
    it('aplica className personalizada', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            className: "custom-class"
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveClass('custom-class');
    });
    it('pasa props adicionales al componente Card', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            "data-custom": "test-value"
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveAttribute('data-custom', 'test-value');
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXF9fdGVzdHNfX1xccHJvZHVjdC1jYXJkLW5ldy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xyXG5pbXBvcnQgeyBQcm9kdWN0Q2FyZCB9IGZyb20gJy4uL2NhcmQnXHJcblxyXG5kZXNjcmliZSgnUHJvZHVjdENhcmQgLSBOdWV2byBEaXNlw7FvJywgKCkgPT4ge1xyXG4gIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcclxuICAgIGltYWdlOiAnL3Rlc3QtaW1hZ2UuanBnJyxcclxuICAgIHRpdGxlOiAnUGludHVyYSBMw6F0ZXggUHJlbWl1bSBTaGVyd2luIFdpbGxpYW1zJyxcclxuICAgIHByaWNlOiAyNTAwLFxyXG4gICAgb3JpZ2luYWxQcmljZTogMzIwMCxcclxuICAgIGRpc2NvdW50OiAnMjUlJyxcclxuICAgIGJhZGdlOiAnTGxlZ2EgZ3JhdGlzIGhveScsXHJcbiAgICBjdGE6ICdBZ3JlZ2FyIGFsIGNhcnJpdG8nLFxyXG4gICAgc3RvY2s6IDEwLCAvLyBBZ3JlZ2Ftb3Mgc3RvY2sgcGFyYSBxdWUgbm8gYXBhcmV6Y2EgXCJTaW4gc3RvY2tcIlxyXG4gICAgb25BZGRUb0NhcnQ6IGplc3QuZm4oKSxcclxuICB9XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcclxuICB9KVxyXG5cclxuICBpdCgncmVuZGVyaXphIGNvcnJlY3RhbWVudGUgY29uIHRvZGFzIGxhcyBwcm9wcycsICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtY2FyZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm9kdWN0LW5hbWUnKSkudG9IYXZlVGV4dENvbnRlbnQoJ1BpbnR1cmEgTMOhdGV4IFByZW1pdW0gU2hlcndpbiBXaWxsaWFtcycpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm9kdWN0LXByaWNlJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC10by1jYXJ0LWJ0bicpKS50b0hhdmVUZXh0Q29udGVudCgnQWdyZWdhciBhbCBjYXJyaXRvJylcclxuICB9KVxyXG5cclxuICBpdCgnbXVlc3RyYSBlbCBiYWRnZSBkZSBkZXNjdWVudG8gY29ycmVjdGFtZW50ZScsICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzI1JScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRGVzY3VlbnRvJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdlc3BlY2lhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ211ZXN0cmEgZWwgYmFkZ2UgZGUgZW52w61vJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4uZGVmYXVsdFByb3BzfSAvPilcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0xsZWdhIGdyYXRpcyBob3knKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdtdWVzdHJhIHByZWNpb3MgY29ycmVjdGFtZW50ZSBmb3JtYXRlYWRvcycsICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCckMi41MDAnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyQzLjIwMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ25vIG11ZXN0cmEgcHJlY2lvIG9yaWdpbmFsIHNpIG5vIHNlIHByb3BvcmNpb25hJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgb3JpZ2luYWxQcmljZTogdW5kZWZpbmVkIH1cclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyQyLjUwMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCckMy4yMDAnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnbm8gbXVlc3RyYSBiYWRnZSBkZSBkZXNjdWVudG8gc2kgbm8gc2UgcHJvcG9yY2lvbmEnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHsgLi4uZGVmYXVsdFByb3BzLCBkaXNjb3VudDogdW5kZWZpbmVkIH1cclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnMjUlJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdEZXNjdWVudG8gZXNwZWNpYWwnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnbXVlc3RyYSBwbGFjZWhvbGRlciBjdWFuZG8gbm8gaGF5IGltYWdlbicsICgpID0+IHtcclxuICAgIGNvbnN0IHByb3BzID0geyAuLi5kZWZhdWx0UHJvcHMsIGltYWdlOiB1bmRlZmluZWQgfVxyXG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxyXG5cclxuICAgIC8vIFZlcmlmaWNhIHF1ZSBzZSBtdWVzdHJhIGVsIHBsYWNlaG9sZGVyIFNWR1xyXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtY2FyZCcpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXHJcbiAgICBleHBlY3QocGxhY2Vob2xkZXIpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnbGxhbWEgYSBvbkFkZFRvQ2FydCBjdWFuZG8gc2UgaGFjZSBjbGljayBlbiBlbCBib3TDs24nLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxyXG4gICAgXHJcbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC10by1jYXJ0LWJ0bicpXHJcbiAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKVxyXG4gICAgXHJcbiAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uQWRkVG9DYXJ0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSlcclxuICB9KVxyXG5cclxuICBpdCgnbXVlc3RyYSBhbmltYWNpw7NuIGRlIGNhcmdhIGFsIGFncmVnYXIgYWwgY2Fycml0bycsIGFzeW5jICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gc2hvd0NhcnRBbmltYXRpb249e3RydWV9IC8+KVxyXG5cclxuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXRvLWNhcnQtYnRuJylcclxuICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pXHJcblxyXG4gICAgLy8gRGViZSBtb3N0cmFyIFwiQWdyZWdhbmRvLi4uXCIgaW5tZWRpYXRhbWVudGVcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZ3JlZ2FuZG8uLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKClcclxuXHJcbiAgICAvLyBEZWJlIHZvbHZlciBhbCBlc3RhZG8gb3JpZ2luYWwgZGVzcHXDqXMgZGUgMSBzZWd1bmRvXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FncmVnYXIgYWwgY2Fycml0bycpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIGV4cGVjdChidXR0b24pLm5vdC50b0JlRGlzYWJsZWQoKVxyXG4gICAgfSwgeyB0aW1lb3V0OiAxNTAwIH0pXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2Rlc2hhYmlsaXRhIGVsIGJvdMOzbiBjdWFuZG8gc3RvY2sgZXMgMCcsICgpID0+IHtcclxuICAgIGNvbnN0IHByb3BzID0geyAuLi5kZWZhdWx0UHJvcHMsIHN0b2NrOiAwIH1cclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcclxuICAgIFxyXG4gICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtdG8tY2FydC1idG4nKVxyXG4gICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKClcclxuICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCdTaW4gc3RvY2snKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdwZXJtaXRlIHBlcnNvbmFsaXphciBlbCB0ZXh0byBkZWwgQ1RBJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgY3RhOiAnQ29tcHJhciBhaG9yYScgfVxyXG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxyXG4gICAgXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29tcHJhciBhaG9yYScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ3VzYSBDVEEgcG9yIGRlZmVjdG8gc2kgbm8gc2UgcHJvcG9yY2lvbmEnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHsgLi4uZGVmYXVsdFByb3BzLCBjdGE6IHVuZGVmaW5lZCB9XHJcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5wcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZ3JlZ2FyIGFsIGNhcnJpdG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJpemEgbGluayBhbCBwcm9kdWN0byBzaSBzZSBwcm9wb3JjaW9uYSBwcm9kdWN0SWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHsgLi4uZGVmYXVsdFByb3BzLCBwcm9kdWN0SWQ6ICcxMjMnIH1cclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcclxuICAgIFxyXG4gICAgY29uc3QgbGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnKVxyXG4gICAgZXhwZWN0KGxpbmspLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvc2hvcC1kZXRhaWxzLzEyMycpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ25vIHJlbmRlcml6YSBsaW5rIHNpIG5vIHNlIHByb3BvcmNpb25hIHByb2R1Y3RJZCcsICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVJvbGUoJ2xpbmsnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnYXBsaWNhIGNsYXNlcyBDU1MgY29ycmVjdGFzIHBhcmEgZWwgZGlzZcOxbycsICgpID0+IHtcclxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcblxyXG4gICAgY29uc3QgY2FyZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvZHVjdC1jYXJkJylcclxuICAgIGV4cGVjdChjYXJkKS50b0hhdmVDbGFzcygnYmctd2hpdGUnKVxyXG4gICAgZXhwZWN0KGNhcmQpLnRvSGF2ZUNsYXNzKCdyb3VuZGVkLXhsJykgLy8gTW9iaWxlLWZpcnN0OiByb3VuZGVkLXhsXHJcbiAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ21kOnJvdW5kZWQtMnhsJykgLy8gRGVza3RvcDogcm91bmRlZC0yeGxcclxuICAgIGV4cGVjdChjYXJkKS50b0hhdmVDbGFzcygnbWQ6bWF4LXctWzMwMHB4XScpIC8vIERlc2t0b3A6IG1heC13aWR0aFxyXG4gIH0pXHJcblxyXG4gIGl0KCdtdWVzdHJhIMOtY29ubyBkZSBjYXJyaXRvIGVuIGVsIGJvdMOzbiBDVEEnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxyXG4gICAgXHJcbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC10by1jYXJ0LWJ0bicpXHJcbiAgICBjb25zdCBpY29uID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXHJcbiAgICBleHBlY3QoaWNvbikudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdtYW5lamEgY29ycmVjdGFtZW50ZSBwcm9kdWN0b3Mgc2luIHByZWNpbycsICgpID0+IHtcclxuICAgIGNvbnN0IHByb3BzID0geyAuLi5kZWZhdWx0UHJvcHMsIHByaWNlOiB1bmRlZmluZWQgfVxyXG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxyXG5cclxuICAgIC8vIEVsIFByb2R1Y3RDYXJkIHNpZW1wcmUgbXVlc3RyYSBlbCBwcmVjaW8sIGluY2x1c28gc2kgZXMgdW5kZWZpbmVkIChtdWVzdHJhICQwKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvZHVjdC1wcmljZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDAnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJpemEgY2hpbGRyZW4gYWRpY2lvbmFsZXMgc2kgc2UgcHJvcG9yY2lvbmFuJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30+XHJcbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImN1c3RvbS1jb250ZW50XCI+Q29udGVuaWRvIHBlcnNvbmFsaXphZG88L2Rpdj5cclxuICAgICAgPC9Qcm9kdWN0Q2FyZD5cclxuICAgIClcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY3VzdG9tLWNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NvbnRlbmlkbyBwZXJzb25hbGl6YWRvJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnYXBsaWNhIGNsYXNzTmFtZSBwZXJzb25hbGl6YWRhJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4uZGVmYXVsdFByb3BzfSBjbGFzc05hbWU9XCJjdXN0b20tY2xhc3NcIiAvPilcclxuICAgIFxyXG4gICAgY29uc3QgY2FyZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvZHVjdC1jYXJkJylcclxuICAgIGV4cGVjdChjYXJkKS50b0hhdmVDbGFzcygnY3VzdG9tLWNsYXNzJylcclxuICB9KVxyXG5cclxuICBpdCgncGFzYSBwcm9wcyBhZGljaW9uYWxlcyBhbCBjb21wb25lbnRlIENhcmQnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IGRhdGEtY3VzdG9tPVwidGVzdC12YWx1ZVwiIC8+KVxyXG4gICAgXHJcbiAgICBjb25zdCBjYXJkID0gc2NyZWVuLmdldEJ5VGVzdElkKCdwcm9kdWN0LWNhcmQnKVxyXG4gICAgZXhwZWN0KGNhcmQpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS1jdXN0b20nLCAndGVzdC12YWx1ZScpXHJcbiAgfSlcclxufSlcclxuIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwiZGVmYXVsdFByb3BzIiwiaW1hZ2UiLCJ0aXRsZSIsInByaWNlIiwib3JpZ2luYWxQcmljZSIsImRpc2NvdW50IiwiYmFkZ2UiLCJjdGEiLCJzdG9jayIsIm9uQWRkVG9DYXJ0IiwiamVzdCIsImZuIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIlByb2R1Y3RDYXJkIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXN0SWQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRvSGF2ZVRleHRDb250ZW50IiwiZ2V0QnlUZXh0IiwicHJvcHMiLCJ1bmRlZmluZWQiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInBsYWNlaG9sZGVyIiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbiIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwic2hvd0NhcnRBbmltYXRpb24iLCJ0b0JlRGlzYWJsZWQiLCJ3YWl0Rm9yIiwidGltZW91dCIsInByb2R1Y3RJZCIsImxpbmsiLCJnZXRCeVJvbGUiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJxdWVyeUJ5Um9sZSIsImNhcmQiLCJ0b0hhdmVDbGFzcyIsImljb24iLCJkaXYiLCJkYXRhLXRlc3RpZCIsImNsYXNzTmFtZSIsImRhdGEtY3VzdG9tIl0sIm1hcHBpbmdzIjoiOzs7Ozs4REFBa0I7d0JBQ2lDO3NCQUN2Qjs7Ozs7O0FBRTVCQSxTQUFTLDhCQUE4QjtJQUNyQyxNQUFNQyxl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