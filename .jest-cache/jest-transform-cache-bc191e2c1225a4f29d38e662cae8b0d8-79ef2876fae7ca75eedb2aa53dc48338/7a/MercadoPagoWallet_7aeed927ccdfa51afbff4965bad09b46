c5957c2a360edae2ebc0d5f0f65b03bc
// ===================================
// PINTEYA E-COMMERCE - MERCADOPAGO WALLET BRICK
// ===================================
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    MercadoPagoWalletFallback: function() {
        return MercadoPagoWalletFallback;
    },
    default: function() {
        return MercadoPagoWallet;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _card = require("../ui/card");
const _button = require("../ui/button");
const _lucidereact = require("lucide-react");
function MercadoPagoWallet({ preferenceId, onReady, onError, onSubmit, className = "" }) {
    const walletRef = (0, _react.useRef)(null);
    const [isLoading, setIsLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const [isReady, setIsReady] = (0, _react.useState)(false);
    const [sdkLoaded, setSdkLoaded] = (0, _react.useState)(false);
    // Verificar si el SDK ya está cargado
    (0, _react.useEffect)(()=>{
        if (window.MercadoPago) {
            setSdkLoaded(true);
            return;
        }
        // Verificar si ya existe un script del SDK
        const existingScript = document.querySelector('script[src*="sdk.mercadopago.com"]');
        if (existingScript) {
            existingScript.addEventListener('load', ()=>setSdkLoaded(true));
            return;
        }
        // Cargar el SDK de MercadoPago
        const script = document.createElement('script');
        script.src = 'https://sdk.mercadopago.com/js/v2';
        script.async = true;
        script.onload = ()=>{
            setSdkLoaded(true);
        };
        script.onerror = ()=>{
            setError('Error al cargar el SDK de MercadoPago');
            setIsLoading(false);
            onError?.('Error al cargar el SDK de MercadoPago');
        };
        document.head.appendChild(script);
        return ()=>{
        // No remover el script para evitar problemas de recarga
        };
    }, [
        onError
    ]);
    // Inicializar el Wallet Brick cuando el SDK esté listo
    (0, _react.useEffect)(()=>{
        if (!sdkLoaded || !preferenceId) return;
        const initializeWallet = async ()=>{
            try {
                setIsLoading(true);
                setError(null);
                // Verificar que tenemos la clave pública
                const publicKey = process.env.NEXT_PUBLIC_MERCADOPAGO_PUBLIC_KEY;
                if (!publicKey) {
                    throw new Error('Clave pública de MercadoPago no configurada');
                }
                // Inicializar MercadoPago
                const mp = new window.MercadoPago(publicKey);
                // Limpiar contenedor anterior si existe
                const container = document.getElementById('wallet_container');
                if (container) {
                    container.innerHTML = '';
                }
                // Crear el Wallet Brick
                await mp.bricks().create("wallet", "wallet_container", {
                    initialization: {
                        preferenceId: preferenceId,
                        redirectMode: "self" // Mantener en la misma pestaña
                    },
                    callbacks: {
                        onReady: ()=>{
                            setIsLoading(false);
                            setIsReady(true);
                            onReady?.();
                        },
                        onError: (error)=>{
                            console.error('Error en Wallet Brick:', error);
                            setError(error.message || 'Error en el procesamiento del pago');
                            setIsLoading(false);
                            onError?.(error);
                        },
                        onSubmit: (data)=>{
                            console.log('Pago enviado:', data);
                            onSubmit?.(data);
                        }
                    },
                    customization: {
                        texts: {
                            valueProp: 'smart_option'
                        },
                        visual: {
                            buttonBackground: 'default',
                            borderRadius: '8px'
                        }
                    }
                });
            } catch (error) {
                console.error('Error inicializando Wallet Brick:', error);
                setError(error.message || 'Error inicializando el sistema de pagos');
                setIsLoading(false);
                onError?.(error);
            }
        };
        initializeWallet();
    }, [
        sdkLoaded,
        preferenceId,
        onReady,
        onError,
        onSubmit
    ]);
    const handleRetry = ()=>{
        setError(null);
        setIsLoading(true);
        setIsReady(false);
        // Recargar la página para reiniciar el proceso
        window.location.reload();
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.Card, {
        className: `w-full ${className}`,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardHeader, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardTitle, {
                    className: "flex items-center gap-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CreditCard, {
                            className: "w-5 h-5 text-primary"
                        }),
                        "M\xe9todo de Pago"
                    ]
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardContent, {
                children: [
                    isLoading && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex flex-col items-center justify-center py-8 space-y-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Loader2, {
                                className: "w-8 h-8 animate-spin text-primary"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sm text-gray-600",
                                children: "Cargando opciones de pago seguras..."
                            })
                        ]
                    }),
                    error && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex flex-col items-center justify-center py-8 space-y-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.AlertTriangle, {
                                className: "w-8 h-8 text-red-500"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "text-center",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sm text-red-600 mb-2",
                                        children: error
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                                        onClick: handleRetry,
                                        variant: "outline",
                                        size: "sm",
                                        children: "Reintentar"
                                    })
                                ]
                            })
                        ]
                    }),
                    isReady && !error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center gap-2 text-green-800",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CheckCircle, {
                                    className: "w-4 h-4"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                    className: "text-sm font-medium",
                                    children: "Sistema de pagos cargado correctamente"
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        id: "wallet_container",
                        ref: walletRef,
                        className: `min-h-[200px] ${isLoading || error ? 'hidden' : 'block'}`
                    }),
                    isReady && !error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                            className: "text-sm text-blue-800",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("strong", {
                                    children: "Pago seguro con MercadoPago:"
                                }),
                                " Acepta tarjetas de cr\xe9dito, d\xe9bito, efectivo y transferencias bancarias. Tus datos est\xe1n protegidos con encriptaci\xf3n de nivel bancario."
                            ]
                        })
                    })
                ]
            })
        ]
    });
}
function MercadoPagoWalletFallback({ initPoint, className = "" }) {
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.Card, {
        className: `w-full ${className}`,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardHeader, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardTitle, {
                    className: "flex items-center gap-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CreditCard, {
                            className: "w-5 h-5 text-primary"
                        }),
                        "M\xe9todo de Pago"
                    ]
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardContent, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center py-6",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-sm text-gray-600 mb-4",
                            children: "Contin\xfaa con el pago en MercadoPago"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                            onClick: ()=>window.open(initPoint, '_blank'),
                            className: "w-full bg-blue-500 hover:bg-blue-600",
                            children: "Pagar con MercadoPago"
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcQ2hlY2tvdXRcXE1lcmNhZG9QYWdvV2FsbGV0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBNRVJDQURPUEFHTyBXQUxMRVQgQlJJQ0tcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcblwidXNlIGNsaWVudFwiO1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xyXG5pbXBvcnQgeyBMb2FkZXIyLCBDcmVkaXRDYXJkLCBBbGVydFRyaWFuZ2xlLCBDaGVja0NpcmNsZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcblxyXG4vLyBUaXBvcyBwYXJhIGVsIFNESyBkZSBNZXJjYWRvUGFnb1xyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICBNZXJjYWRvUGFnbzogYW55O1xyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIE1lcmNhZG9QYWdvV2FsbGV0UHJvcHMge1xyXG4gIHByZWZlcmVuY2VJZDogc3RyaW5nO1xyXG4gIG9uUmVhZHk/OiAoKSA9PiB2b2lkO1xyXG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcclxuICBvblN1Ym1pdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZXJjYWRvUGFnb1dhbGxldCh7IFxyXG4gIHByZWZlcmVuY2VJZCwgXHJcbiAgb25SZWFkeSwgXHJcbiAgb25FcnJvcixcclxuICBvblN1Ym1pdCxcclxuICBjbGFzc05hbWUgPSBcIlwiXHJcbn06IE1lcmNhZG9QYWdvV2FsbGV0UHJvcHMpIHtcclxuICBjb25zdCB3YWxsZXRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpc1JlYWR5LCBzZXRJc1JlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc2RrTG9hZGVkLCBzZXRTZGtMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBWZXJpZmljYXIgc2kgZWwgU0RLIHlhIGVzdMOhIGNhcmdhZG9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5NZXJjYWRvUGFnbykge1xyXG4gICAgICBzZXRTZGtMb2FkZWQodHJ1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZmljYXIgc2kgeWEgZXhpc3RlIHVuIHNjcmlwdCBkZWwgU0RLXHJcbiAgICBjb25zdCBleGlzdGluZ1NjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtzcmMqPVwic2RrLm1lcmNhZG9wYWdvLmNvbVwiXScpO1xyXG4gICAgaWYgKGV4aXN0aW5nU2NyaXB0KSB7XHJcbiAgICAgIGV4aXN0aW5nU2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBzZXRTZGtMb2FkZWQodHJ1ZSkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FyZ2FyIGVsIFNESyBkZSBNZXJjYWRvUGFnb1xyXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vc2RrLm1lcmNhZG9wYWdvLmNvbS9qcy92Mic7XHJcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgXHJcbiAgICBzY3JpcHQub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBzZXRTZGtMb2FkZWQodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBzY3JpcHQub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgc2V0RXJyb3IoJ0Vycm9yIGFsIGNhcmdhciBlbCBTREsgZGUgTWVyY2Fkb1BhZ28nKTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgb25FcnJvcj8uKCdFcnJvciBhbCBjYXJnYXIgZWwgU0RLIGRlIE1lcmNhZG9QYWdvJyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICBcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIC8vIE5vIHJlbW92ZXIgZWwgc2NyaXB0IHBhcmEgZXZpdGFyIHByb2JsZW1hcyBkZSByZWNhcmdhXHJcbiAgICB9O1xyXG4gIH0sIFtvbkVycm9yXSk7XHJcblxyXG4gIC8vIEluaWNpYWxpemFyIGVsIFdhbGxldCBCcmljayBjdWFuZG8gZWwgU0RLIGVzdMOpIGxpc3RvXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc2RrTG9hZGVkIHx8ICFwcmVmZXJlbmNlSWQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpbml0aWFsaXplV2FsbGV0ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICAgICAgLy8gVmVyaWZpY2FyIHF1ZSB0ZW5lbW9zIGxhIGNsYXZlIHDDumJsaWNhXHJcbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTUVSQ0FET1BBR09fUFVCTElDX0tFWTtcclxuICAgICAgICBpZiAoIXB1YmxpY0tleSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGF2ZSBww7pibGljYSBkZSBNZXJjYWRvUGFnbyBubyBjb25maWd1cmFkYScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5pY2lhbGl6YXIgTWVyY2Fkb1BhZ29cclxuICAgICAgICBjb25zdCBtcCA9IG5ldyB3aW5kb3cuTWVyY2Fkb1BhZ28ocHVibGljS2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaW1waWFyIGNvbnRlbmVkb3IgYW50ZXJpb3Igc2kgZXhpc3RlXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhbGxldF9jb250YWluZXInKTtcclxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhciBlbCBXYWxsZXQgQnJpY2tcclxuICAgICAgICBhd2FpdCBtcC5icmlja3MoKS5jcmVhdGUoXCJ3YWxsZXRcIiwgXCJ3YWxsZXRfY29udGFpbmVyXCIsIHtcclxuICAgICAgICAgIGluaXRpYWxpemF0aW9uOiB7XHJcbiAgICAgICAgICAgIHByZWZlcmVuY2VJZDogcHJlZmVyZW5jZUlkLFxyXG4gICAgICAgICAgICByZWRpcmVjdE1vZGU6IFwic2VsZlwiIC8vIE1hbnRlbmVyIGVuIGxhIG1pc21hIHBlc3Rhw7FhXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2FsbGJhY2tzOiB7XHJcbiAgICAgICAgICAgIG9uUmVhZHk6ICgpID0+IHtcclxuICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNldElzUmVhZHkodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgb25SZWFkeT8uKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gV2FsbGV0IEJyaWNrOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBlbiBlbCBwcm9jZXNhbWllbnRvIGRlbCBwYWdvJyk7XHJcbiAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICBvbkVycm9yPy4oZXJyb3IpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblN1Ym1pdDogKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYWdvIGVudmlhZG86JywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgb25TdWJtaXQ/LihkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjdXN0b21pemF0aW9uOiB7XHJcbiAgICAgICAgICAgIHRleHRzOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWVQcm9wOiAnc21hcnRfb3B0aW9uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmlzdWFsOiB7XHJcbiAgICAgICAgICAgICAgYnV0dG9uQmFja2dyb3VuZDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzhweCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaWNpYWxpemFuZG8gV2FsbGV0IEJyaWNrOicsIGVycm9yKTtcclxuICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBpbmljaWFsaXphbmRvIGVsIHNpc3RlbWEgZGUgcGFnb3MnKTtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIG9uRXJyb3I/LihlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaW5pdGlhbGl6ZVdhbGxldCgpO1xyXG4gIH0sIFtzZGtMb2FkZWQsIHByZWZlcmVuY2VJZCwgb25SZWFkeSwgb25FcnJvciwgb25TdWJtaXRdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmV0cnkgPSAoKSA9PiB7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgIHNldElzUmVhZHkoZmFsc2UpO1xyXG4gICAgXHJcbiAgICAvLyBSZWNhcmdhciBsYSBww6FnaW5hIHBhcmEgcmVpbmljaWFyIGVsIHByb2Nlc29cclxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPENhcmQgY2xhc3NOYW1lPXtgdy1mdWxsICR7Y2xhc3NOYW1lfWB9PlxyXG4gICAgICA8Q2FyZEhlYWRlcj5cclxuICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICA8Q3JlZGl0Q2FyZCBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtcHJpbWFyeVwiIC8+XHJcbiAgICAgICAgICBNw6l0b2RvIGRlIFBhZ29cclxuICAgICAgICA8L0NhcmRUaXRsZT5cclxuICAgICAgPC9DYXJkSGVhZGVyPlxyXG4gICAgICA8Q2FyZENvbnRlbnQ+XHJcbiAgICAgICAgey8qIEVzdGFkbyBkZSBjYXJnYSAqL31cclxuICAgICAgICB7aXNMb2FkaW5nICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktOCBzcGFjZS15LTRcIj5cclxuICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy04IGgtOCBhbmltYXRlLXNwaW4gdGV4dC1wcmltYXJ5XCIgLz5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+XHJcbiAgICAgICAgICAgICAgQ2FyZ2FuZG8gb3BjaW9uZXMgZGUgcGFnbyBzZWd1cmFzLi4uXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIHsvKiBFc3RhZG8gZGUgZXJyb3IgKi99XHJcbiAgICAgICAge2Vycm9yICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktOCBzcGFjZS15LTRcIj5cclxuICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgY2xhc3NOYW1lPVwidy04IGgtOCB0ZXh0LXJlZC01MDBcIiAvPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXJlZC02MDAgbWItMlwiPntlcnJvcn08L3A+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvbiBcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJldHJ5fVxyXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICBSZWludGVudGFyXHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAgey8qIEVzdGFkbyBsaXN0byAqL31cclxuICAgICAgICB7aXNSZWFkeSAmJiAhZXJyb3IgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHAtMyBiZy1ncmVlbi01MCBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCByb3VuZGVkLWxnXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1ncmVlbi04MDBcIj5cclxuICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPlxyXG4gICAgICAgICAgICAgICAgU2lzdGVtYSBkZSBwYWdvcyBjYXJnYWRvIGNvcnJlY3RhbWVudGVcclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAgey8qIENvbnRlbmVkb3IgZGVsIFdhbGxldCBCcmljayAqL31cclxuICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgaWQ9XCJ3YWxsZXRfY29udGFpbmVyXCIgXHJcbiAgICAgICAgICByZWY9e3dhbGxldFJlZn1cclxuICAgICAgICAgIGNsYXNzTmFtZT17YG1pbi1oLVsyMDBweF0gJHtpc0xvYWRpbmcgfHwgZXJyb3IgPyAnaGlkZGVuJyA6ICdibG9jayd9YH1cclxuICAgICAgICAvPlxyXG5cclxuICAgICAgICB7LyogSW5mb3JtYWNpw7NuIGFkaWNpb25hbCAqL31cclxuICAgICAgICB7aXNSZWFkeSAmJiAhZXJyb3IgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHAtNCBiZy1ibHVlLTUwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgcm91bmRlZC1sZ1wiPlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtYmx1ZS04MDBcIj5cclxuICAgICAgICAgICAgICA8c3Ryb25nPlBhZ28gc2VndXJvIGNvbiBNZXJjYWRvUGFnbzo8L3N0cm9uZz4gQWNlcHRhIHRhcmpldGFzIGRlIGNyw6lkaXRvLCBcclxuICAgICAgICAgICAgICBkw6liaXRvLCBlZmVjdGl2byB5IHRyYW5zZmVyZW5jaWFzIGJhbmNhcmlhcy4gVHVzIGRhdG9zIGVzdMOhbiBwcm90ZWdpZG9zIFxyXG4gICAgICAgICAgICAgIGNvbiBlbmNyaXB0YWNpw7NuIGRlIG5pdmVsIGJhbmNhcmlvLlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L0NhcmRDb250ZW50PlxyXG4gICAgPC9DYXJkPlxyXG4gICk7XHJcbn1cclxuXHJcbi8vIENvbXBvbmVudGUgZGUgZmFsbGJhY2sgcGFyYSBjYXNvcyBkZSBlcnJvciBjcsOtdGljb1xyXG5leHBvcnQgZnVuY3Rpb24gTWVyY2Fkb1BhZ29XYWxsZXRGYWxsYmFjayh7IFxyXG4gIGluaXRQb2ludCwgXHJcbiAgY2xhc3NOYW1lID0gXCJcIiBcclxufTogeyBcclxuICBpbml0UG9pbnQ6IHN0cmluZzsgXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nOyBcclxufSkge1xyXG4gIHJldHVybiAoXHJcbiAgICA8Q2FyZCBjbGFzc05hbWU9e2B3LWZ1bGwgJHtjbGFzc05hbWV9YH0+XHJcbiAgICAgIDxDYXJkSGVhZGVyPlxyXG4gICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgIDxDcmVkaXRDYXJkIGNsYXNzTmFtZT1cInctNSBoLTUgdGV4dC1wcmltYXJ5XCIgLz5cclxuICAgICAgICAgIE3DqXRvZG8gZGUgUGFnb1xyXG4gICAgICAgIDwvQ2FyZFRpdGxlPlxyXG4gICAgICA8L0NhcmRIZWFkZXI+XHJcbiAgICAgIDxDYXJkQ29udGVudD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTZcIj5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBtYi00XCI+XHJcbiAgICAgICAgICAgIENvbnRpbsO6YSBjb24gZWwgcGFnbyBlbiBNZXJjYWRvUGFnb1xyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPEJ1dHRvbiBcclxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93Lm9wZW4oaW5pdFBvaW50LCAnX2JsYW5rJyl9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1ibHVlLTUwMCBob3ZlcjpiZy1ibHVlLTYwMFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIFBhZ2FyIGNvbiBNZXJjYWRvUGFnb1xyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICA8L0NhcmQ+XHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsiTWVyY2Fkb1BhZ29XYWxsZXRGYWxsYmFjayIsIk1lcmNhZG9QYWdvV2FsbGV0IiwicHJlZmVyZW5jZUlkIiwib25SZWFkeSIsIm9uRXJyb3IiLCJvblN1Ym1pdCIsImNsYXNzTmFtZSIsIndhbGxldFJlZiIsInVzZVJlZiIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInVzZVN0YXRlIiwiZXJyb3IiLCJzZXRFcnJvciIsImlzUmVhZHkiLCJzZXRJc1JlYWR5Iiwic2RrTG9hZGVkIiwic2V0U2RrTG9hZGVkIiwidXNlRWZmZWN0Iiwid2luZG93IiwiTWVyY2Fkb1BhZ28iLCJleGlzdGluZ1NjcmlwdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYXN5bmMiLCJvbmxvYWQiLCJvbmVycm9yIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaW5pdGlhbGl6ZVdhbGxldCIsInB1YmxpY0tleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19NRVJDQURPUEFHT19QVUJMSUNfS0VZIiwiRXJyb3IiLCJtcCIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiYnJpY2tzIiwiY3JlYXRlIiwiaW5pdGlhbGl6YXRpb24iLCJyZWRpcmVjdE1vZGUiLCJjYWxsYmFja3MiLCJjb25zb2xlIiwibWVzc2FnZSIsImRhdGEiLCJsb2ciLCJjdXN0b21pemF0aW9uIiwidGV4dHMiLCJ2YWx1ZVByb3AiLCJ2aXN1YWwiLCJidXR0b25CYWNrZ3JvdW5kIiwiYm9yZGVyUmFkaXVzIiwiaGFuZGxlUmV0cnkiLCJsb2NhdGlvbiIsInJlbG9hZCIsIkNhcmQiLCJDYXJkSGVhZGVyIiwiQ2FyZFRpdGxlIiwiQ3JlZGl0Q2FyZCIsIkNhcmRDb250ZW50IiwiZGl2IiwiTG9hZGVyMiIsInAiLCJBbGVydFRyaWFuZ2xlIiwiQnV0dG9uIiwib25DbGljayIsInZhcmlhbnQiLCJzaXplIiwiQ2hlY2tDaXJjbGUiLCJzcGFuIiwiaWQiLCJyZWYiLCJzdHJvbmciLCJpbml0UG9pbnQiLCJvcGVuIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsZ0RBQWdEO0FBQ2hELHNDQUFzQztBQUV0Qzs7Ozs7Ozs7Ozs7O0lBMk5nQkEseUJBQXlCO2VBQXpCQTs7SUF0TWhCLE9BbU1DO2VBbk11QkM7Ozs7dUJBcEJvQjtzQkFDYTt3QkFDbEM7NkJBQ3lDO0FBaUJqRCxTQUFTQSxrQkFBa0IsRUFDeENDLFlBQVksRUFDWkMsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLFFBQVEsRUFDUkMsWUFBWSxFQUFFLEVBQ1M7SUFDdkIsTUFBTUMsWUFBWUMsSUFBQUEsYUFBTSxFQUFpQjtJQUN6QyxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lB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