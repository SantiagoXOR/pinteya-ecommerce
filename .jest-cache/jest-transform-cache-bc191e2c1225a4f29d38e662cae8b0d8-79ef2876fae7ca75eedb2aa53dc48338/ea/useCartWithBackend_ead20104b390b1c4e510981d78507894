7916ced6434ad7a99c331dd35caa17d6
// ===================================
// PINTEYA E-COMMERCE - HOOK DE CARRITO CON BACKEND
// ===================================
// Hook optimizado que conecta el carrito frontend con las APIs del backend
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return _default;
    },
    get useCartWithBackend () {
        return useCartWithBackend;
    }
});
const _react = require("react");
const _react1 = require("next-auth/react");
const _sonner = require("sonner");
const useCartWithBackend = ()=>{
    const { data: session, status } = (0, _react1.useSession)();
    const [cartState, setCartState] = (0, _react.useState)({
        items: [],
        totalItems: 0,
        totalAmount: 0,
        itemCount: 0,
        loading: false,
        error: null
    });
    // Función para hacer requests a la API
    const apiRequest = (0, _react.useCallback)(async (url, options = {})=>{
        try {
            const response = await fetch(url, {
                headers: {
                    'Content-Type': 'application/json',
                    ...options.headers
                },
                ...options
            });
            const data = await response.json();
            if (!response.ok) {
                throw new Error(data.error || `HTTP ${response.status}`);
            }
            return data;
        } catch (error) {
            console.error(`API Error (${url}):`, error);
            throw error;
        }
    }, []);
    // Cargar carrito desde el backend
    const loadCart = (0, _react.useCallback)(async ()=>{
        if (status === 'loading') return;
        if (!session?.user) {
            // Usuario no autenticado - carrito vacío
            setCartState((prev)=>({
                    ...prev,
                    items: [],
                    totalItems: 0,
                    totalAmount: 0,
                    itemCount: 0,
                    loading: false,
                    error: null
                }));
            return;
        }
        setCartState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const data = await apiRequest('/api/cart');
            setCartState((prev)=>({
                    ...prev,
                    items: data.items || [],
                    totalItems: data.totalItems || 0,
                    totalAmount: data.totalAmount || 0,
                    itemCount: data.itemCount || 0,
                    loading: false,
                    error: null
                }));
            console.log('✅ Carrito cargado:', data.itemCount, 'productos únicos');
        } catch (error) {
            console.error('❌ Error cargando carrito:', error);
            setCartState((prev)=>({
                    ...prev,
                    loading: false,
                    error: error.message || 'Error cargando carrito'
                }));
        }
    }, [
        session,
        status,
        apiRequest
    ]);
    // Agregar item al carrito
    const addItem = (0, _react.useCallback)(async (productId, quantity = 1)=>{
        if (!session?.user) {
            _sonner.toast.error('Debes iniciar sesión para agregar productos al carrito');
            return false;
        }
        setCartState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const data = await apiRequest('/api/cart/add', {
                method: 'POST',
                body: JSON.stringify({
                    productId,
                    quantity
                })
            });
            if (data.success) {
                // Recargar carrito para obtener estado actualizado
                await loadCart();
                _sonner.toast.success(data.message || 'Producto agregado al carrito');
                console.log('✅ Producto agregado:', data.item?.productName);
                return true;
            } else {
                throw new Error(data.error || 'Error agregando producto');
            }
        } catch (error) {
            console.error('❌ Error agregando al carrito:', error);
            setCartState((prev)=>({
                    ...prev,
                    loading: false,
                    error: error.message
                }));
            if (error.message.includes('Stock insuficiente')) {
                _sonner.toast.error(error.message);
            } else if (error.message.includes('autenticado')) {
                _sonner.toast.error('Debes iniciar sesión para agregar productos');
            } else {
                _sonner.toast.error('Error agregando producto al carrito');
            }
            return false;
        }
    }, [
        session,
        apiRequest,
        loadCart
    ]);
    // Remover item del carrito
    const removeItem = (0, _react.useCallback)(async (productId, quantity)=>{
        if (!session?.user) {
            _sonner.toast.error('Debes iniciar sesión');
            return false;
        }
        setCartState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const data = await apiRequest('/api/cart/remove', {
                method: 'DELETE',
                body: JSON.stringify({
                    productId,
                    quantity
                })
            });
            if (data.success) {
                await loadCart();
                _sonner.toast.success(data.message || 'Producto removido del carrito');
                console.log('✅ Producto removido:', data.item?.productName);
                return true;
            } else {
                throw new Error(data.error || 'Error removiendo producto');
            }
        } catch (error) {
            console.error('❌ Error removiendo del carrito:', error);
            setCartState((prev)=>({
                    ...prev,
                    loading: false,
                    error: error.message
                }));
            _sonner.toast.error('Error removiendo producto del carrito');
            return false;
        }
    }, [
        session,
        apiRequest,
        loadCart
    ]);
    // Actualizar cantidad de un item
    const updateQuantity = (0, _react.useCallback)(async (productId, quantity)=>{
        if (!session?.user) {
            _sonner.toast.error('Debes iniciar sesión');
            return false;
        }
        setCartState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const data = await apiRequest('/api/cart/update', {
                method: 'PUT',
                body: JSON.stringify({
                    productId,
                    quantity
                })
            });
            if (data.success) {
                await loadCart();
                _sonner.toast.success(data.message || 'Cantidad actualizada');
                console.log('✅ Cantidad actualizada:', data.item?.productName);
                return true;
            } else {
                throw new Error(data.error || 'Error actualizando cantidad');
            }
        } catch (error) {
            console.error('❌ Error actualizando cantidad:', error);
            setCartState((prev)=>({
                    ...prev,
                    loading: false,
                    error: error.message
                }));
            _sonner.toast.error('Error actualizando cantidad');
            return false;
        }
    }, [
        session,
        apiRequest,
        loadCart
    ]);
    // Limpiar carrito completo
    const clearCart = (0, _react.useCallback)(async ()=>{
        if (!session?.user) {
            _sonner.toast.error('Debes iniciar sesión');
            return false;
        }
        setCartState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const data = await apiRequest('/api/cart', {
                method: 'DELETE'
            });
            if (data.success) {
                await loadCart();
                _sonner.toast.success('Carrito limpiado');
                console.log('✅ Carrito limpiado');
                return true;
            } else {
                throw new Error(data.error || 'Error limpiando carrito');
            }
        } catch (error) {
            console.error('❌ Error limpiando carrito:', error);
            setCartState((prev)=>({
                    ...prev,
                    loading: false,
                    error: error.message
                }));
            _sonner.toast.error('Error limpiando carrito');
            return false;
        }
    }, [
        session,
        apiRequest,
        loadCart
    ]);
    // Obtener cantidad de un producto específico en el carrito
    const getItemQuantity = (0, _react.useCallback)((productId)=>{
        const item = cartState.items.find((item)=>item.product_id === productId);
        return item?.quantity || 0;
    }, [
        cartState.items
    ]);
    // Verificar si un producto está en el carrito
    const isInCart = (0, _react.useCallback)((productId)=>{
        return cartState.items.some((item)=>item.product_id === productId);
    }, [
        cartState.items
    ]);
    // Refrescar carrito (alias para loadCart)
    const refreshCart = (0, _react.useCallback)(async ()=>{
        await loadCart();
    }, [
        loadCart
    ]);
    // Cargar carrito al montar el componente o cuando cambie la sesión
    (0, _react.useEffect)(()=>{
        loadCart();
    }, [
        loadCart
    ]);
    return {
        ...cartState,
        addItem,
        removeItem,
        updateQuantity,
        clearCart,
        loadCart,
        getItemQuantity,
        isInCart,
        refreshCart
    };
};
const _default = useCartWithBackend;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUNhcnRXaXRoQmFja2VuZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gSE9PSyBERSBDQVJSSVRPIENPTiBCQUNLRU5EXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSG9vayBvcHRpbWl6YWRvIHF1ZSBjb25lY3RhIGVsIGNhcnJpdG8gZnJvbnRlbmQgY29uIGxhcyBBUElzIGRlbCBiYWNrZW5kXG5cbid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnc29ubmVyJztcblxuLy8gVGlwb3MgcGFyYSBlbCBjYXJyaXRvXG5pbnRlcmZhY2UgQ2FydFByb2R1Y3Qge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIHByaWNlOiBudW1iZXI7XG4gIGRpc2NvdW50ZWRfcHJpY2U/OiBudW1iZXI7XG4gIGltYWdlcz86IGFueTtcbiAgc3RvY2s6IG51bWJlcjtcbiAgYnJhbmQ/OiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzoge1xuICAgIGlkOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgQ2FydEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICB1c2VyX2lkOiBzdHJpbmc7XG4gIHByb2R1Y3RfaWQ6IG51bWJlcjtcbiAgcXVhbnRpdHk6IG51bWJlcjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIHByb2R1Y3RzOiBDYXJ0UHJvZHVjdDtcbn1cblxuaW50ZXJmYWNlIENhcnRTdGF0ZSB7XG4gIGl0ZW1zOiBDYXJ0SXRlbVtdO1xuICB0b3RhbEl0ZW1zOiBudW1iZXI7XG4gIHRvdGFsQW1vdW50OiBudW1iZXI7XG4gIGl0ZW1Db3VudDogbnVtYmVyO1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIFVzZUNhcnRXaXRoQmFja2VuZFJldHVybiBleHRlbmRzIENhcnRTdGF0ZSB7XG4gIGFkZEl0ZW06IChwcm9kdWN0SWQ6IG51bWJlciwgcXVhbnRpdHk/OiBudW1iZXIpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIHJlbW92ZUl0ZW06IChwcm9kdWN0SWQ6IG51bWJlciwgcXVhbnRpdHk/OiBudW1iZXIpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIHVwZGF0ZVF1YW50aXR5OiAocHJvZHVjdElkOiBudW1iZXIsIHF1YW50aXR5OiBudW1iZXIpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGNsZWFyQ2FydDogKCkgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgbG9hZENhcnQ6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGdldEl0ZW1RdWFudGl0eTogKHByb2R1Y3RJZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gIGlzSW5DYXJ0OiAocHJvZHVjdElkOiBudW1iZXIpID0+IGJvb2xlYW47XG4gIHJlZnJlc2hDYXJ0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vKipcbiAqIEhvb2sgcGFyYSBtYW5lamFyIGVsIGNhcnJpdG8gY29uIGludGVncmFjacOzbiBjb21wbGV0YSBhbCBiYWNrZW5kXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VDYXJ0V2l0aEJhY2tlbmQgPSAoKTogVXNlQ2FydFdpdGhCYWNrZW5kUmV0dXJuID0+IHtcbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uLCBzdGF0dXMgfSA9IHVzZVNlc3Npb24oKTtcbiAgY29uc3QgW2NhcnRTdGF0ZSwgc2V0Q2FydFN0YXRlXSA9IHVzZVN0YXRlPENhcnRTdGF0ZT4oe1xuICAgIGl0ZW1zOiBbXSxcbiAgICB0b3RhbEl0ZW1zOiAwLFxuICAgIHRvdGFsQW1vdW50OiAwLFxuICAgIGl0ZW1Db3VudDogMCxcbiAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICBlcnJvcjogbnVsbFxuICB9KTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGhhY2VyIHJlcXVlc3RzIGEgbGEgQVBJXG4gIGNvbnN0IGFwaVJlcXVlc3QgPSB1c2VDYWxsYmFjayhhc3luYyAodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzXG4gICAgICAgIH0sXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBBUEkgRXJyb3IgKCR7dXJsfSk6YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gQ2FyZ2FyIGNhcnJpdG8gZGVzZGUgZWwgYmFja2VuZFxuICBjb25zdCBsb2FkQ2FydCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoc3RhdHVzID09PSAnbG9hZGluZycpIHJldHVybjtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24/LnVzZXIpIHtcbiAgICAgIC8vIFVzdWFyaW8gbm8gYXV0ZW50aWNhZG8gLSBjYXJyaXRvIHZhY8Otb1xuICAgICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICB0b3RhbEl0ZW1zOiAwLFxuICAgICAgICB0b3RhbEFtb3VudDogMCxcbiAgICAgICAgaXRlbUNvdW50OiAwLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRDYXJ0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFwaVJlcXVlc3QoJy9hcGkvY2FydCcpO1xuICAgICAgXG4gICAgICBzZXRDYXJ0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBpdGVtczogZGF0YS5pdGVtcyB8fCBbXSxcbiAgICAgICAgdG90YWxJdGVtczogZGF0YS50b3RhbEl0ZW1zIHx8IDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiBkYXRhLnRvdGFsQW1vdW50IHx8IDAsXG4gICAgICAgIGl0ZW1Db3VudDogZGF0YS5pdGVtQ291bnQgfHwgMCxcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2Fycml0byBjYXJnYWRvOicsIGRhdGEuaXRlbUNvdW50LCAncHJvZHVjdG9zIMO6bmljb3MnKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgY2FyZ2FuZG8gY2Fycml0bzonLCBlcnJvcik7XG4gICAgICBzZXRDYXJ0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGNhcmdhbmRvIGNhcnJpdG8nXG4gICAgICB9KSk7XG4gICAgfVxuICB9LCBbc2Vzc2lvbiwgc3RhdHVzLCBhcGlSZXF1ZXN0XSk7XG5cbiAgLy8gQWdyZWdhciBpdGVtIGFsIGNhcnJpdG9cbiAgY29uc3QgYWRkSXRlbSA9IHVzZUNhbGxiYWNrKGFzeW5jIChwcm9kdWN0SWQ6IG51bWJlciwgcXVhbnRpdHk6IG51bWJlciA9IDEpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAoIXNlc3Npb24/LnVzZXIpIHtcbiAgICAgIHRvYXN0LmVycm9yKCdEZWJlcyBpbmljaWFyIHNlc2nDs24gcGFyYSBhZ3JlZ2FyIHByb2R1Y3RvcyBhbCBjYXJyaXRvJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhcGlSZXF1ZXN0KCcvYXBpL2NhcnQvYWRkJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwcm9kdWN0SWQsIHF1YW50aXR5IH0pXG4gICAgICB9KTtcblxuICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBSZWNhcmdhciBjYXJyaXRvIHBhcmEgb2J0ZW5lciBlc3RhZG8gYWN0dWFsaXphZG9cbiAgICAgICAgYXdhaXQgbG9hZENhcnQoKTtcbiAgICAgICAgXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoZGF0YS5tZXNzYWdlIHx8ICdQcm9kdWN0byBhZ3JlZ2FkbyBhbCBjYXJyaXRvJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgUHJvZHVjdG8gYWdyZWdhZG86JywgZGF0YS5pdGVtPy5wcm9kdWN0TmFtZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGFncmVnYW5kbyBwcm9kdWN0bycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBhZ3JlZ2FuZG8gYWwgY2Fycml0bzonLCBlcnJvcik7XG4gICAgICBzZXRDYXJ0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSkpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnU3RvY2sgaW5zdWZpY2llbnRlJykpIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2F1dGVudGljYWRvJykpIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoJ0RlYmVzIGluaWNpYXIgc2VzacOzbiBwYXJhIGFncmVnYXIgcHJvZHVjdG9zJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2FzdC5lcnJvcignRXJyb3IgYWdyZWdhbmRvIHByb2R1Y3RvIGFsIGNhcnJpdG8nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwgW3Nlc3Npb24sIGFwaVJlcXVlc3QsIGxvYWRDYXJ0XSk7XG5cbiAgLy8gUmVtb3ZlciBpdGVtIGRlbCBjYXJyaXRvXG4gIGNvbnN0IHJlbW92ZUl0ZW0gPSB1c2VDYWxsYmFjayhhc3luYyAocHJvZHVjdElkOiBudW1iZXIsIHF1YW50aXR5PzogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICB0b2FzdC5lcnJvcignRGViZXMgaW5pY2lhciBzZXNpw7NuJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhcGlSZXF1ZXN0KCcvYXBpL2NhcnQvcmVtb3ZlJywge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHByb2R1Y3RJZCwgcXVhbnRpdHkgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIGF3YWl0IGxvYWRDYXJ0KCk7XG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoZGF0YS5tZXNzYWdlIHx8ICdQcm9kdWN0byByZW1vdmlkbyBkZWwgY2Fycml0bycpO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFByb2R1Y3RvIHJlbW92aWRvOicsIGRhdGEuaXRlbT8ucHJvZHVjdE5hbWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICdFcnJvciByZW1vdmllbmRvIHByb2R1Y3RvJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHJlbW92aWVuZG8gZGVsIGNhcnJpdG86JywgZXJyb3IpO1xuICAgICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pKTtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciByZW1vdmllbmRvIHByb2R1Y3RvIGRlbCBjYXJyaXRvJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbc2Vzc2lvbiwgYXBpUmVxdWVzdCwgbG9hZENhcnRdKTtcblxuICAvLyBBY3R1YWxpemFyIGNhbnRpZGFkIGRlIHVuIGl0ZW1cbiAgY29uc3QgdXBkYXRlUXVhbnRpdHkgPSB1c2VDYWxsYmFjayhhc3luYyAocHJvZHVjdElkOiBudW1iZXIsIHF1YW50aXR5OiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAoIXNlc3Npb24/LnVzZXIpIHtcbiAgICAgIHRvYXN0LmVycm9yKCdEZWJlcyBpbmljaWFyIHNlc2nDs24nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBzZXRDYXJ0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFwaVJlcXVlc3QoJy9hcGkvY2FydC91cGRhdGUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcHJvZHVjdElkLCBxdWFudGl0eSB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgYXdhaXQgbG9hZENhcnQoKTtcbiAgICAgICAgdG9hc3Quc3VjY2VzcyhkYXRhLm1lc3NhZ2UgfHwgJ0NhbnRpZGFkIGFjdHVhbGl6YWRhJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2FudGlkYWQgYWN0dWFsaXphZGE6JywgZGF0YS5pdGVtPy5wcm9kdWN0TmFtZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGFjdHVhbGl6YW5kbyBjYW50aWRhZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBhY3R1YWxpemFuZG8gY2FudGlkYWQ6JywgZXJyb3IpO1xuICAgICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pKTtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhY3R1YWxpemFuZG8gY2FudGlkYWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFtzZXNzaW9uLCBhcGlSZXF1ZXN0LCBsb2FkQ2FydF0pO1xuXG4gIC8vIExpbXBpYXIgY2Fycml0byBjb21wbGV0b1xuICBjb25zdCBjbGVhckNhcnQgPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICB0b2FzdC5lcnJvcignRGViZXMgaW5pY2lhciBzZXNpw7NuJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0Q2FydFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhcGlSZXF1ZXN0KCcvYXBpL2NhcnQnLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIGF3YWl0IGxvYWRDYXJ0KCk7XG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0NhcnJpdG8gbGltcGlhZG8nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBDYXJyaXRvIGxpbXBpYWRvJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGxpbXBpYW5kbyBjYXJyaXRvJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGxpbXBpYW5kbyBjYXJyaXRvOicsIGVycm9yKTtcbiAgICAgIHNldENhcnRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSk7XG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgbGltcGlhbmRvIGNhcnJpdG8nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFtzZXNzaW9uLCBhcGlSZXF1ZXN0LCBsb2FkQ2FydF0pO1xuXG4gIC8vIE9idGVuZXIgY2FudGlkYWQgZGUgdW4gcHJvZHVjdG8gZXNwZWPDrWZpY28gZW4gZWwgY2Fycml0b1xuICBjb25zdCBnZXRJdGVtUXVhbnRpdHkgPSB1c2VDYWxsYmFjaygocHJvZHVjdElkOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBjYXJ0U3RhdGUuaXRlbXMuZmluZChpdGVtID0+IGl0ZW0ucHJvZHVjdF9pZCA9PT0gcHJvZHVjdElkKTtcbiAgICByZXR1cm4gaXRlbT8ucXVhbnRpdHkgfHwgMDtcbiAgfSwgW2NhcnRTdGF0ZS5pdGVtc10pO1xuXG4gIC8vIFZlcmlmaWNhciBzaSB1biBwcm9kdWN0byBlc3TDoSBlbiBlbCBjYXJyaXRvXG4gIGNvbnN0IGlzSW5DYXJ0ID0gdXNlQ2FsbGJhY2soKHByb2R1Y3RJZDogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIGNhcnRTdGF0ZS5pdGVtcy5zb21lKGl0ZW0gPT4gaXRlbS5wcm9kdWN0X2lkID09PSBwcm9kdWN0SWQpO1xuICB9LCBbY2FydFN0YXRlLml0ZW1zXSk7XG5cbiAgLy8gUmVmcmVzY2FyIGNhcnJpdG8gKGFsaWFzIHBhcmEgbG9hZENhcnQpXG4gIGNvbnN0IHJlZnJlc2hDYXJ0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGxvYWRDYXJ0KCk7XG4gIH0sIFtsb2FkQ2FydF0pO1xuXG4gIC8vIENhcmdhciBjYXJyaXRvIGFsIG1vbnRhciBlbCBjb21wb25lbnRlIG8gY3VhbmRvIGNhbWJpZSBsYSBzZXNpw7NuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9hZENhcnQoKTtcbiAgfSwgW2xvYWRDYXJ0XSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jYXJ0U3RhdGUsXG4gICAgYWRkSXRlbSxcbiAgICByZW1vdmVJdGVtLFxuICAgIHVwZGF0ZVF1YW50aXR5LFxuICAgIGNsZWFyQ2FydCxcbiAgICBsb2FkQ2FydCxcbiAgICBnZXRJdGVtUXVhbnRpdHksXG4gICAgaXNJbkNhcnQsXG4gICAgcmVmcmVzaENhcnRcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUNhcnRXaXRoQmFja2VuZDtcbiJdLCJuYW1lcyI6WyJ1c2VDYXJ0V2l0aEJhY2tlbmQiLCJkYXRhIiwic2Vzc2lvbiIsInN0YXR1cyIsInVzZVNlc3Npb24iLCJjYXJ0U3RhdGUiLCJzZXRDYXJ0U3RhdGUiLCJ1c2VTdGF0ZSIsIml0ZW1zIiwidG90YWxJdGVtcyIsInRvdGFsQW1vdW50IiwiaXRlbUNvdW50IiwibG9hZGluZyIsImVycm9yIiwiYXBpUmVxdWVzdCIsInVzZUNhbGxiYWNrIiwidXJsIiwib3B0aW9ucyIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwianNvbiIsIm9rIiwiRXJyb3IiLCJjb25zb2xlIiwibG9hZENhcnQiLCJ1c2VyIiwicHJldiIsImxvZyIsIm1lc3NhZ2UiLCJhZGRJdGVtIiwicHJvZHVjdElkIiwicXVhbnRpdHkiLCJ0b2FzdCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic3VjY2VzcyIsIml0ZW0iLCJwcm9kdWN0TmFtZSIsImluY2x1ZGVzIiwicmVtb3ZlSXRlbSIsInVwZGF0ZVF1YW50aXR5IiwiY2xlYXJDYXJ0IiwiZ2V0SXRlbVF1YW50aXR5IiwiZmluZCIsInByb2R1Y3RfaWQiLCJpc0luQ2FydCIsInNvbWUiLCJyZWZyZXNoQ2FydCIsInVzZUVmZmVjdCJdLCJt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