{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\admin\\useProductList.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  stock: number;\r\n  category_id: number;\r\n  images: {\r\n    main: string;\r\n    gallery: string[];\r\n    previews: string[];\r\n    thumbnails: string[];\r\n  };\r\n  created_at: string;\r\n  updated_at: string;\r\n  category_name: string;\r\n}\r\n\r\ninterface ProductListResponse {\r\n  success: boolean;\r\n  data: {\r\n    products: Product[];\r\n    total: number;\r\n    pagination: {\r\n      page: number;\r\n      limit: number;\r\n      offset: number;\r\n      totalPages: number;\r\n      hasMore: boolean;\r\n      hasPrevious: boolean;\r\n    };\r\n  };\r\n  meta: {\r\n    timestamp: string;\r\n    method: string;\r\n    user: string;\r\n    role: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Hook est√°ndar para gesti√≥n de productos en el panel administrativo\r\n *\r\n * Funcionalidades:\r\n * - Consulta real a la API /api/admin/products-direct\r\n * - Carga de 25 productos reales de Supabase por p√°gina\r\n * - Informaci√≥n de paginaci√≥n completa\r\n * - Datos completos (nombres, precios, stock, categor√≠as, im√°genes)\r\n *\r\n * @returns {Object} Estado del hook con productos, loading y error\r\n */\r\nexport function useProductList() {\r\n  console.log('üîß useProductList: Hook iniciado');\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        console.log('üîß useProductList: Iniciando fetch...');\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        const response = await fetch('/api/admin/products-direct?limit=25');\r\n        console.log('üîß useProductList: Response status:', response.status);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error ${response.status}: ${response.statusText}`);\r\n        }\r\n\r\n        const data: ProductListResponse = await response.json();\r\n        console.log('üîß useProductList: Respuesta completa:', data);\r\n        console.log('üîß useProductList: data.success:', data.success);\r\n        console.log('üîß useProductList: data.data:', data.data);\r\n        console.log('üîß useProductList: data.data.products:', data.data?.products);\r\n\r\n        if (data.success && data.data && Array.isArray(data.data.products)) {\r\n          setProducts(data.data.products);\r\n          console.log('üîß useProductList: ‚úÖ Productos cargados:', data.data.products.length);\r\n        } else {\r\n          throw new Error('Estructura de respuesta inv√°lida');\r\n        }\r\n      } catch (err) {\r\n        console.error('üîß useProductList: ‚ùå Error:', err);\r\n        setError(err instanceof Error ? err.message : 'Error desconocido');\r\n        setProducts([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  return {\r\n    products,\r\n    isLoading,\r\n    error\r\n  };\r\n}\r\n\r\nexport type { Product, ProductListResponse };\r\n"],"names":["useProductList","console","log","products","setProducts","useState","isLoading","setIsLoading","error","setError","useEffect","fetchProducts","response","fetch","status","ok","Error","statusText","data","json","success","Array","isArray","length","err","message"],"mappings":";;;;+BAqDgBA;;;eAAAA;;;uBArDoB;AAqD7B,SAASA;IACdC,QAAQC,GAAG,CAAC;IACZ,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAY,EAAE;IACtD,MAAM,CAACC,WAAWC,aAAa,GAAGF,IAAAA,eAAQ,EAAC;IAC3C,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAElDK,IAAAA,gBAAS,EAAC;QACR,MAAMC,gBAAgB;YACpB,IAAI;gBACFV,QAAQC,GAAG,CAAC;gBACZK,aAAa;gBACbE,SAAS;gBAET,MAAMG,WAAW,MAAMC,MAAM;gBAC7BZ,QAAQC,GAAG,CAAC,uCAAuCU,SAASE,MAAM;gBAElE,IAAI,CAACF,SAASG,EAAE,EAAE;oBAChB,MAAM,IAAIC,MAAM,CAAC,MAAM,EAAEJ,SAASE,MAAM,CAAC,EAAE,EAAEF,SAASK,UAAU,EAAE;gBACpE;gBAEA,MAAMC,OAA4B,MAAMN,SAASO,IAAI;gBACrDlB,QAAQC,GAAG,CAAC,0CAA0CgB;gBACtDjB,QAAQC,GAAG,CAAC,oCAAoCgB,KAAKE,OAAO;gBAC5DnB,QAAQC,GAAG,CAAC,iCAAiCgB,KAAKA,IAAI;gBACtDjB,QAAQC,GAAG,CAAC,0CAA0CgB,KAAKA,IAAI,EAAEf;gBAEjE,IAAIe,KAAKE,OAAO,IAAIF,KAAKA,IAAI,IAAIG,MAAMC,OAAO,CAACJ,KAAKA,IAAI,CAACf,QAAQ,GAAG;oBAClEC,YAAYc,KAAKA,IAAI,CAACf,QAAQ;oBAC9BF,QAAQC,GAAG,CAAC,4CAA4CgB,KAAKA,IAAI,CAACf,QAAQ,CAACoB,MAAM;gBACnF,OAAO;oBACL,MAAM,IAAIP,MAAM;gBAClB;YACF,EAAE,OAAOQ,KAAK;gBACZvB,QAAQO,KAAK,CAAC,+BAA+BgB;gBAC7Cf,SAASe,eAAeR,QAAQQ,IAAIC,OAAO,GAAG;gBAC9CrB,YAAY,EAAE;YAChB,SAAU;gBACRG,aAAa;YACf;QACF;QAEAI;IACF,GAAG,EAAE;IAEL,OAAO;QACLR;QACAG;QACAE;IACF;AACF"}