{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductPricing.tsx"],"sourcesContent":["'use client';\n\nimport { UseFormReturn, FieldErrors } from 'react-hook-form';\nimport { AdminCard } from '../ui/AdminCard';\nimport { Calculator, DollarSign, TrendingUp, AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ProductFormData {\n  price: number;\n  compare_price?: number;\n  cost_price?: number;\n}\n\ninterface ProductPricingProps {\n  form: UseFormReturn<any>;\n  errors: FieldErrors<any>;\n  className?: string;\n}\n\nexport function ProductPricing({ form, errors, className }: ProductPricingProps) {\n  const { register, watch, setValue } = form;\n  const watchedData = watch();\n\n  // Calculate profit margin\n  const calculateMargin = () => {\n    const price = watchedData.price || 0;\n    const cost = watchedData.cost_price || 0;\n    \n    if (cost === 0) return 0;\n    return ((price - cost) / price) * 100;\n  };\n\n  // Calculate markup\n  const calculateMarkup = () => {\n    const price = watchedData.price || 0;\n    const cost = watchedData.cost_price || 0;\n    \n    if (cost === 0) return 0;\n    return ((price - cost) / cost) * 100;\n  };\n\n  // Calculate discount percentage\n  const calculateDiscount = () => {\n    const price = watchedData.price || 0;\n    const comparePrice = watchedData.compare_price || 0;\n    \n    if (comparePrice === 0 || comparePrice <= price) return 0;\n    return ((comparePrice - price) / comparePrice) * 100;\n  };\n\n  const margin = calculateMargin();\n  const markup = calculateMarkup();\n  const discount = calculateDiscount();\n\n  // Pricing suggestions\n  const suggestPricing = (cost: number) => {\n    if (cost === 0) return [];\n    \n    return [\n      { label: '50% Margen', value: cost / 0.5 },\n      { label: '60% Margen', value: cost / 0.4 },\n      { label: '70% Margen', value: cost / 0.3 },\n    ];\n  };\n\n  const suggestions = suggestPricing(watchedData.cost_price || 0);\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Main Pricing */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          <AdminCard title=\"Configuración de Precios\" className=\"p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Selling Price */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Precio de Venta *\n                </label>\n                <div className=\"relative\">\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    {...register('price', { valueAsNumber: true })}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                {errors.price && (\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.price.message}</p>\n                )}\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Precio al que se venderá el producto\n                </p>\n              </div>\n\n              {/* Compare Price */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Precio de Comparación\n                </label>\n                <div className=\"relative\">\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    {...register('compare_price', { valueAsNumber: true })}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                {errors.compare_price && (\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.compare_price.message}</p>\n                )}\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Precio original para mostrar descuentos\n                </p>\n              </div>\n\n              {/* Cost Price */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Precio de Costo\n                </label>\n                <div className=\"relative\">\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    {...register('cost_price', { valueAsNumber: true })}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                {errors.cost_price && (\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.cost_price.message}</p>\n                )}\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Costo del producto (no visible para clientes)\n                </p>\n              </div>\n\n              {/* Discount Display */}\n              {discount > 0 && (\n                <div className=\"flex items-center space-x-2 p-3 bg-green-50 rounded-lg\">\n                  <TrendingUp className=\"w-5 h-5 text-green-600\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-green-800\">\n                      Descuento: {discount.toFixed(1)}%\n                    </p>\n                    <p className=\"text-xs text-green-600\">\n                      Ahorro: ${((watchedData.compare_price || 0) - (watchedData.price || 0)).toFixed(2)}\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </AdminCard>\n\n          {/* Pricing Suggestions */}\n          {suggestions.length > 0 && (\n            <AdminCard title=\"Sugerencias de Precio\" className=\"p-6\">\n              <div className=\"space-y-3\">\n                <p className=\"text-sm text-gray-600\">\n                  Basado en tu precio de costo de ${(watchedData.cost_price || 0).toFixed(2)}:\n                </p>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  {suggestions.map((suggestion, index) => (\n                    <button\n                      key={index}\n                      type=\"button\"\n                      onClick={() => setValue('price', suggestion.value)}\n                      className=\"p-3 border border-gray-200 rounded-lg hover:border-blaze-orange-300 hover:bg-blaze-orange-50 transition-colors text-left\"\n                    >\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {suggestion.label}\n                      </div>\n                      <div className=\"text-lg font-bold text-blaze-orange-600\">\n                        ${suggestion.value.toFixed(2)}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </AdminCard>\n          )}\n        </div>\n\n        {/* Pricing Analytics */}\n        <div className=\"space-y-6\">\n          {/* Profit Metrics */}\n          <AdminCard title=\"Métricas de Rentabilidad\" className=\"p-6\">\n            <div className=\"space-y-4\">\n              {/* Profit Margin */}\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-700\">Margen de Ganancia</p>\n                  <p className=\"text-xs text-gray-500\">Ganancia / Precio de Venta</p>\n                </div>\n                <div className=\"text-right\">\n                  <p className={cn(\n                    \"text-lg font-bold\",\n                    margin >= 50 ? \"text-green-600\" : \n                    margin >= 30 ? \"text-yellow-600\" : \"text-red-600\"\n                  )}>\n                    {margin.toFixed(1)}%\n                  </p>\n                </div>\n              </div>\n\n              {/* Markup */}\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-700\">Markup</p>\n                  <p className=\"text-xs text-gray-500\">Ganancia / Costo</p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-lg font-bold text-gray-900\">\n                    {markup.toFixed(1)}%\n                  </p>\n                </div>\n              </div>\n\n              {/* Profit Amount */}\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-700\">Ganancia por Unidad</p>\n                  <p className=\"text-xs text-gray-500\">Precio - Costo</p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-lg font-bold text-gray-900\">\n                    ${((watchedData.price || 0) - (watchedData.cost_price || 0)).toFixed(2)}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </AdminCard>\n\n          {/* Pricing Alerts */}\n          <AdminCard title=\"Alertas de Precio\" className=\"p-6\">\n            <div className=\"space-y-3\">\n              {margin < 20 && watchedData.cost_price > 0 && (\n                <div className=\"flex items-start space-x-2 p-3 bg-red-50 rounded-lg\">\n                  <AlertCircle className=\"w-5 h-5 text-red-500 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-red-800\">\n                      Margen Bajo\n                    </p>\n                    <p className=\"text-xs text-red-600\">\n                      El margen de ganancia es menor al 20%\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {watchedData.compare_price > 0 && watchedData.price >= watchedData.compare_price && (\n                <div className=\"flex items-start space-x-2 p-3 bg-yellow-50 rounded-lg\">\n                  <AlertCircle className=\"w-5 h-5 text-yellow-500 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-yellow-800\">\n                      Sin Descuento\n                    </p>\n                    <p className=\"text-xs text-yellow-600\">\n                      El precio de venta debe ser menor al precio de comparación\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {!watchedData.cost_price && (\n                <div className=\"flex items-start space-x-2 p-3 bg-blue-50 rounded-lg\">\n                  <Calculator className=\"w-5 h-5 text-blue-500 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-blue-800\">\n                      Agrega el Costo\n                    </p>\n                    <p className=\"text-xs text-blue-600\">\n                      Ingresa el precio de costo para ver métricas de rentabilidad\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </AdminCard>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ProductPricing","form","errors","className","register","watch","setValue","watchedData","calculateMargin","price","cost","cost_price","calculateMarkup","calculateDiscount","comparePrice","compare_price","margin","markup","discount","suggestPricing","label","value","suggestions","div","cn","AdminCard","title","DollarSign","input","type","step","min","valueAsNumber","placeholder","p","message","TrendingUp","toFixed","length","map","suggestion","index","button","onClick","AlertCircle","Calculator"],"mappings":"AAAA;;;;;+BAmBgBA;;;eAAAA;;;;2BAhBU;6BACsC;uBAC7C;AAcZ,SAASA,eAAe,EAAEC,IAAI,EAAEC,MAAM,EAAEC,SAAS,EAAuB;IAC7E,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,EAAE,GAAGL;IACtC,MAAMM,cAAcF;IAEpB,0BAA0B;IAC1B,MAAMG,kBAAkB;QACtB,MAAMC,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMC,OAAOH,YAAYI,UAAU,IAAI;QAEvC,IAAID,SAAS,GAAG,OAAO;QACvB,OAAO,AAAED,CAAAA,QAAQC,IAAG,IAAKD,QAAS;IACpC;IAEA,mBAAmB;IACnB,MAAMG,kBAAkB;QACtB,MAAMH,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMC,OAAOH,YAAYI,UAAU,IAAI;QAEvC,IAAID,SAAS,GAAG,OAAO;QACvB,OAAO,AAAED,CAAAA,QAAQC,IAAG,IAAKA,OAAQ;IACnC;IAEA,gCAAgC;IAChC,MAAMG,oBAAoB;QACxB,MAAMJ,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMK,eAAeP,YAAYQ,aAAa,IAAI;QAElD,IAAID,iBAAiB,KAAKA,gBAAgBL,OAAO,OAAO;QACxD,OAAO,AAAEK,CAAAA,eAAeL,KAAI,IAAKK,eAAgB;IACnD;IAEA,MAAME,SAASR;IACf,MAAMS,SAASL;IACf,MAAMM,WAAWL;IAEjB,sBAAsB;IACtB,MAAMM,iBAAiB,CAACT;QACtB,IAAIA,SAAS,GAAG,OAAO,EAAE;QAEzB,OAAO;YACL;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;YACzC;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;YACzC;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;SAC1C;IACH;IAEA,MAAMY,cAAcH,eAAeZ,YAAYI,UAAU,IAAI;IAE7D,qBACE,qBAACY;QAAIpB,WAAWqB,IAAAA,SAAE,EAAC,aAAarB;kBAC9B,cAAA,sBAACoB;YAAIpB,WAAU;;8BAEb,sBAACoB;oBAAIpB,WAAU;;sCACb,qBAACsB,oBAAS;4BAACC,OAAM;4BAA2BvB,WAAU;sCACpD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDAEb,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,SAAS;4DAAE4B,eAAe;wDAAK,EAAE;wDAC9C7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOO,KAAK,kBACX,qBAACyB;gDAAE/B,WAAU;0DAA6BD,OAAOO,KAAK,CAAC0B,OAAO;;0DAEhE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;kDAM5C,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,iBAAiB;4DAAE4B,eAAe;wDAAK,EAAE;wDACtD7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOa,aAAa,kBACnB,qBAACmB;gDAAE/B,WAAU;0DAA6BD,OAAOa,aAAa,CAACoB,OAAO;;0DAExE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;kDAM5C,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,cAAc;4DAAE4B,eAAe;wDAAK,EAAE;wDACnD7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOS,UAAU,kBAChB,qBAACuB;gDAAE/B,WAAU;0DAA6BD,OAAOS,UAAU,CAACwB,OAAO;;0DAErE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;oCAM3Ce,WAAW,mBACV,sBAACK;wCAAIpB,WAAU;;0DACb,qBAACiC,uBAAU;gDAACjC,WAAU;;0DACtB,sBAACoB;;kEACC,sBAACW;wDAAE/B,WAAU;;4DAAqC;4DACpCe,SAASmB,OAAO,CAAC;4DAAG;;;kEAElC,sBAACH;wDAAE/B,WAAU;;4DAAyB;4DACzB,CAAA,AAACI,CAAAA,YAAYQ,aAAa,IAAI,CAAA,IAAMR,CAAAA,YAAYE,KAAK,IAAI,CAAA,CAAC,EAAG4B,OAAO,CAAC;;;;;;;;;;wBAS3Ff,YAAYgB,MAAM,GAAG,mBACpB,qBAACb,oBAAS;4BAACC,OAAM;4BAAwBvB,WAAU;sCACjD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDACb,sBAAC+B;wCAAE/B,WAAU;;4CAAwB;4CACAI,CAAAA,YAAYI,UAAU,IAAI,CAAA,EAAG0B,OAAO,CAAC;4CAAG;;;kDAE7E,qBAACd;wCAAIpB,WAAU;kDACZmB,YAAYiB,GAAG,CAAC,CAACC,YAAYC,sBAC5B,sBAACC;gDAECb,MAAK;gDACLc,SAAS,IAAMrC,SAAS,SAASkC,WAAWnB,KAAK;gDACjDlB,WAAU;;kEAEV,qBAACoB;wDAAIpB,WAAU;kEACZqC,WAAWpB,KAAK;;kEAEnB,sBAACG;wDAAIpB,WAAU;;4DAA0C;4DACrDqC,WAAWnB,KAAK,CAACgB,OAAO,CAAC;;;;+CATxBI;;;;;;;8BAoBnB,sBAAClB;oBAAIpB,WAAU;;sCAEb,qBAACsB,oBAAS;4BAACC,OAAM;4BAA2BvB,WAAU;sCACpD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDAEb,sBAACoB;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAWqB,IAAAA,SAAE,EACd,qBACAR,UAAU,KAAK,mBACfA,UAAU,KAAK,oBAAoB;;wDAElCA,OAAOqB,OAAO,CAAC;wDAAG;;;;;;kDAMzB,sBAACd;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAU;;wDACVc,OAAOoB,OAAO,CAAC;wDAAG;;;;;;kDAMzB,sBAACd;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAU;;wDAAkC;wDAC1C,CAAA,AAACI,CAAAA,YAAYE,KAAK,IAAI,CAAA,IAAMF,CAAAA,YAAYI,UAAU,IAAI,CAAA,CAAC,EAAG0B,OAAO,CAAC;;;;;;;;;sCAQ/E,qBAACZ,oBAAS;4BAACC,OAAM;4BAAoBvB,WAAU;sCAC7C,cAAA,sBAACoB;gCAAIpB,WAAU;;oCACZa,SAAS,MAAMT,YAAYI,UAAU,GAAG,mBACvC,sBAACY;wCAAIpB,WAAU;;0DACb,qBAACyC,wBAAW;gDAACzC,WAAU;;0DACvB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAmC;;kEAGhD,qBAAC+B;wDAAE/B,WAAU;kEAAuB;;;;;;oCAOzCI,YAAYQ,aAAa,GAAG,KAAKR,YAAYE,KAAK,IAAIF,YAAYQ,aAAa,kBAC9E,sBAACQ;wCAAIpB,WAAU;;0DACb,qBAACyC,wBAAW;gDAACzC,WAAU;;0DACvB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAsC;;kEAGnD,qBAAC+B;wDAAE/B,WAAU;kEAA0B;;;;;;oCAO5C,CAACI,YAAYI,UAAU,kBACtB,sBAACY;wCAAIpB,WAAU;;0DACb,qBAAC0C,uBAAU;gDAAC1C,WAAU;;0DACtB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEAGjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;;;;;;;;;;;AAYzD"}