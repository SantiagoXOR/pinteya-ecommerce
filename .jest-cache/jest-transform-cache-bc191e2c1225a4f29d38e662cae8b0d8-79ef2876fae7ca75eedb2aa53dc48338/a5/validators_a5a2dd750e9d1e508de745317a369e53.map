{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\utils\\validators.ts"],"sourcesContent":["// ===================================\n// UTILIDADES DE VALIDACIÓN\n// Funciones para validar datos críticos del sistema\n// ===================================\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n  message?: string;\n}\n\nexport interface ProductData {\n  name: string;\n  description?: string;\n  price: number;\n  stock: number;\n  category_id: number;\n  brand: string;\n  images: string[];\n}\n\nexport interface OrderItem {\n  product_id: number;\n  quantity: number;\n  price: number;\n}\n\nexport interface Address {\n  street: string;\n  city: string;\n  state: string;\n  postal_code: string;\n  country: string;\n}\n\nexport interface OrderData {\n  user_id: string;\n  items: OrderItem[];\n  total: number;\n  shipping_address: Address;\n  payment_method: string;\n}\n\nexport interface PaymentData {\n  method: string;\n  amount: number;\n  currency: string;\n  payment_method_id?: string;\n  installments?: number;\n  payer?: {\n    email: string;\n    identification?: {\n      type: string;\n      number: string;\n    };\n  };\n}\n\nexport interface DiscountData {\n  type: 'percentage' | 'fixed';\n  value: number;\n  currency?: string;\n}\n\n// ===================================\n// VALIDACIÓN DE EMAIL\n// ===================================\n\nexport function validateEmail(email: any): boolean {\n  // Handle null, undefined, and non-string values\n  if (!email || typeof email !== 'string') {\n    return false;\n  }\n\n  // Validar longitud total del email\n  if (email.length > 254) {\n    return false;\n  }\n\n  // Validar que no empiece o termine con punto\n  if (email.startsWith('.') || email.endsWith('.')) {\n    return false;\n  }\n\n  // Validar que tenga exactamente un @\n  if (email.split('@').length !== 2) {\n    return false;\n  }\n\n  // Validar longitud de partes locales y dominio\n  const [localPart, domain] = email.split('@');\n  if (localPart.length === 0 || localPart.length > 64) {\n    return false;\n  }\n  if (domain.length === 0 || domain.length > 253) {\n    return false;\n  }\n\n  // Validar que no tenga puntos consecutivos\n  if (email.includes('..')) {\n    return false;\n  }\n\n  // El dominio debe tener al menos un punto (TLD requerido)\n  if (!domain.includes('.')) {\n    return false;\n  }\n\n  // Regex para validación de email\n  const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/\n  \n  return emailRegex.test(email);\n}\n\n// ===================================\n// VALIDACIÓN DE CONTRASEÑA\n// ===================================\n\nexport function validatePassword(password: any): ValidationResult {\n  const errors: string[] = [];\n  let message = '';\n\n  if (!password || typeof password !== 'string') {\n    return {\n      isValid: false,\n      errors: ['invalid_type'],\n      message: 'La contraseña debe ser una cadena de texto'\n    };\n  }\n\n  // Validar longitud mínima\n  if (password.length < 8) {\n    errors.push('length');\n  }\n\n  // Validar mayúscula\n  if (!/[A-Z]/.test(password)) {\n    errors.push('uppercase');\n  }\n\n  // Validar minúscula\n  if (!/[a-z]/.test(password)) {\n    errors.push('lowercase');\n  }\n\n  // Validar número\n  if (!/\\d/.test(password)) {\n    errors.push('number');\n  }\n\n  // Validar carácter especial\n  if (!/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password)) {\n    errors.push('special');\n  }\n\n  // Generar mensaje de error\n  if (errors.length > 0) {\n    const errorMessages = {\n      length: 'al menos 8 caracteres',\n      uppercase: 'al menos una letra mayúscula',\n      lowercase: 'al menos una letra minúscula',\n      number: 'al menos un número',\n      special: 'al menos un carácter especial'\n    };\n\n    message = `La contraseña debe contener: ${errors.map(e => errorMessages[e as keyof typeof errorMessages]).join(', ')}`;\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    message\n  };\n}\n\n// ===================================\n// VALIDACIÓN DE TELÉFONO\n// ===================================\n\nexport function validatePhone(phone: any, country: 'AR' | 'INTERNATIONAL' = 'AR'): boolean {\n  if (!phone || typeof phone !== 'string') {\n    return false;\n  }\n\n  // Limpiar el teléfono de espacios y caracteres especiales\n  const cleanPhone = phone.replace(/[\\s\\-\\(\\)]/g, '');\n\n  if (country === 'AR') {\n    // Validar teléfonos argentinos\n    // Formatos válidos: +541123456789, 1123456789, 01123456789\n    const argPhoneRegex = /^(\\+54)?0?11\\d{8}$|^(\\+54)?0?\\d{10}$/;\n    return argPhoneRegex.test(cleanPhone);\n  }\n\n  if (country === 'INTERNATIONAL') {\n    // Validar formato internacional básico\n    const intPhoneRegex = /^\\+\\d{10,15}$/;\n    return intPhoneRegex.test(cleanPhone);\n  }\n\n  return false;\n}\n\n// ===================================\n// VALIDACIÓN DE DATOS DE PRODUCTO\n// ===================================\n\nexport function validateProductData(product: any): ValidationResult {\n  const errors: string[] = [];\n\n  if (!product || typeof product !== 'object') {\n    return {\n      isValid: false,\n      errors: ['invalid_type'],\n      message: 'Los datos del producto deben ser un objeto'\n    };\n  }\n\n  // Validar nombre\n  if (!product.name || typeof product.name !== 'string') {\n    errors.push('name');\n  } else if (product.name.length < 3 || product.name.length > 200) {\n    errors.push('name_length');\n  } else if (/<script|javascript:|on\\w+=/i.test(product.name)) {\n    errors.push('name_security');\n  }\n\n  // Validar precio\n  if (typeof product.price !== 'number' || product.price <= 0) {\n    errors.push('price');\n  } else if (product.price > 9999999) {\n    errors.push('price_too_high');\n  }\n\n  // Validar stock\n  if (typeof product.stock !== 'number' || product.stock < 0) {\n    errors.push('stock');\n  }\n\n  // Validar categoría\n  if (!product.category_id || typeof product.category_id !== 'number') {\n    errors.push('category_id');\n  }\n\n  // Validar marca\n  if (!product.brand || typeof product.brand !== 'string') {\n    errors.push('brand');\n  }\n\n  // Validar imágenes\n  if (!Array.isArray(product.images) || product.images.length === 0) {\n    errors.push('images');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n// ===================================\n// VALIDACIÓN DE DATOS DE ORDEN\n// ===================================\n\nexport function validateOrderData(order: any): ValidationResult {\n  const errors: string[] = [];\n\n  if (!order || typeof order !== 'object') {\n    return {\n      isValid: false,\n      errors: ['invalid_type']\n    };\n  }\n\n  // Validar user_id\n  if (!order.user_id || typeof order.user_id !== 'string') {\n    errors.push('user_id');\n  }\n\n  // Validar items\n  if (!Array.isArray(order.items) || order.items.length === 0) {\n    errors.push('items_empty');\n  } else {\n    // Validar cada item\n    order.items.forEach((item: any, index: number) => {\n      if (!item.product_id || typeof item.product_id !== 'number') {\n        errors.push(`item_${index}_product_id`);\n      }\n      if (!item.quantity || typeof item.quantity !== 'number' || item.quantity <= 0) {\n        errors.push(`item_${index}_quantity`);\n      }\n      if (typeof item.price !== 'number' || item.price <= 0) {\n        errors.push(`item_${index}_price`);\n      }\n    });\n  }\n\n  // Validar total\n  if (typeof order.total !== 'number' || order.total <= 0) {\n    errors.push('total');\n  } else if (Array.isArray(order.items) && order.items.length > 0) {\n    // Verificar que el total coincida con la suma de items\n    const calculatedTotal = order.items.reduce((sum: number, item: any) => {\n      return sum + (item.quantity * item.price);\n    }, 0);\n    \n    if (Math.abs(calculatedTotal - order.total) > 0.01) {\n      errors.push('total_mismatch');\n    }\n  }\n\n  // Validar dirección de envío\n  const addressValidation = validateAddress(order.shipping_address);\n  if (!addressValidation.isValid) {\n    errors.push('shipping_address');\n  }\n\n  // Validar método de pago\n  if (!order.payment_method || typeof order.payment_method !== 'string') {\n    errors.push('payment_method');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n// ===================================\n// VALIDACIÓN DE DATOS DE PAGO\n// ===================================\n\nexport function validatePaymentData(payment: any): ValidationResult {\n  const errors: string[] = [];\n\n  if (!payment || typeof payment !== 'object') {\n    return {\n      isValid: false,\n      errors: ['invalid_type']\n    };\n  }\n\n  // Validar método\n  if (!payment.method || typeof payment.method !== 'string') {\n    errors.push('method');\n  }\n\n  // Validar monto\n  if (typeof payment.amount !== 'number' || payment.amount <= 0) {\n    errors.push('amount');\n  }\n\n  // Validar moneda\n  if (!validateCurrency(payment.currency)) {\n    errors.push('currency');\n  }\n\n  // Validaciones específicas para MercadoPago\n  if (payment.method === 'mercadopago') {\n    if (payment.payer && !validateEmail(payment.payer.email)) {\n      errors.push('payer_email');\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n// ===================================\n// VALIDACIÓN DE DIRECCIÓN\n// ===================================\n\nexport function validateAddress(address: any): ValidationResult {\n  const errors: string[] = [];\n\n  if (!address || typeof address !== 'object') {\n    return {\n      isValid: false,\n      errors: ['invalid_type']\n    };\n  }\n\n  // Validar campos requeridos básicos\n  const requiredFields = ['street', 'city', 'postal_code', 'country'];\n  requiredFields.forEach(field => {\n    if (!address[field] || typeof address[field] !== 'string' || address[field].trim() === '') {\n      errors.push(field);\n    }\n  });\n\n  // Validar código postal por país\n  if (address.country && address.postal_code) {\n    const postalCodeValid = validatePostalCode(address.postal_code, address.country);\n    if (!postalCodeValid) {\n      errors.push('postal_code_format');\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n// ===================================\n// VALIDACIÓN DE CÓDIGO POSTAL\n// ===================================\n\nfunction validatePostalCode(postalCode: string, country: string): boolean {\n  const patterns: { [key: string]: RegExp } = {\n    'Argentina': /^\\d{4}$/,\n    'USA': /^\\d{5}(-\\d{4})?$/,\n    'US': /^\\d{5}(-\\d{4})?$/,\n    'Brazil': /^\\d{5}-\\d{3}$/,\n    'Chile': /^\\d{7}$/,\n    'Canada': /^[A-Za-z]\\d[A-Za-z] \\d[A-Za-z]\\d$/,\n    'UK': /^[A-Z]{1,2}\\d[A-Z\\d]? \\d[A-Z]{2}$/i,\n    'Germany': /^\\d{5}$/,\n    'France': /^\\d{5}$/,\n    'Spain': /^\\d{5}$/,\n    'Italy': /^\\d{5}$/,\n    'Mexico': /^\\d{5}$/\n  };\n\n  const pattern = patterns[country];\n  return pattern ? pattern.test(postalCode) : true; // Si no hay patrón, aceptar\n}\n\n// ===================================\n// VALIDACIÓN DE MONEDA\n// ===================================\n\nexport function validateCurrency(currency: any): boolean {\n  if (!currency || typeof currency !== 'string') {\n    return false;\n  }\n\n  const supportedCurrencies = ['ARS', 'USD', 'EUR', 'BRL', 'CLP', 'UYU'];\n  return supportedCurrencies.includes(currency.toUpperCase());\n}\n\n// ===================================\n// VALIDACIÓN DE CANTIDAD\n// ===================================\n\nexport function validateQuantity(quantity: any): boolean {\n  if (typeof quantity !== 'number') {\n    return false;\n  }\n\n  // Debe ser un entero positivo\n  if (!Number.isInteger(quantity) || quantity <= 0) {\n    return false;\n  }\n\n  // Límite máximo de cantidad\n  if (quantity > 999) {\n    return false;\n  }\n\n  return true;\n}\n\n// ===================================\n// VALIDACIÓN DE DESCUENTO\n// ===================================\n\nexport function validateDiscount(discount: any): boolean {\n  if (!discount || typeof discount !== 'object') {\n    return false;\n  }\n\n  // Validar tipo\n  if (!['percentage', 'fixed'].includes(discount.type)) {\n    return false;\n  }\n\n  // Validar valor\n  if (typeof discount.value !== 'number' || discount.value < 0) {\n    return false;\n  }\n\n  // Validaciones específicas por tipo\n  if (discount.type === 'percentage') {\n    // Porcentaje no puede ser mayor a 100\n    if (discount.value > 100) {\n      return false;\n    }\n  }\n\n  if (discount.type === 'fixed') {\n    // Descuento fijo debe tener moneda\n    if (!discount.currency || !validateCurrency(discount.currency)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n// ===================================\n// UTILIDADES ADICIONALES\n// ===================================\n\n/**\n * Sanitiza una cadena de texto removiendo caracteres peligrosos\n */\nexport function sanitizeString(input: string): string {\n  if (typeof input !== 'string') {\n    return '';\n  }\n\n  return input\n    .replace(/<script[^>]*>.*?<\\/script>/gi, '') // Remover scripts\n    .replace(/<[^>]*>/g, '') // Remover HTML tags\n    .replace(/javascript:/gi, '') // Remover javascript:\n    .replace(/on\\w+=/gi, '') // Remover event handlers\n    .trim();\n}\n\n/**\n * Valida que un objeto tenga todas las propiedades requeridas\n */\nexport function validateRequiredFields(obj: any, requiredFields: string[]): ValidationResult {\n  const errors: string[] = [];\n\n  if (!obj || typeof obj !== 'object') {\n    return {\n      isValid: false,\n      errors: ['invalid_object']\n    };\n  }\n\n  requiredFields.forEach(field => {\n    if (!(field in obj) || obj[field] === null || obj[field] === undefined || obj[field] === '') {\n      errors.push(field);\n    }\n  });\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n/**\n * Valida un rango numérico\n */\nexport function validateNumberRange(value: any, min: number, max: number): boolean {\n  if (typeof value !== 'number') {\n    return false;\n  }\n\n  return value >= min && value <= max;\n}\n\n/**\n * Valida una fecha\n */\nexport function validateDate(date: any): boolean {\n  if (!date) {\n    return false;\n  }\n\n  const parsedDate = new Date(date);\n  return !isNaN(parsedDate.getTime());\n}\n\n/**\n * Valida una URL\n */\nexport function validateURL(url: any): boolean {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}"],"names":["sanitizeString","validateAddress","validateCurrency","validateDate","validateDiscount","validateEmail","validateNumberRange","validateOrderData","validatePassword","validatePaymentData","validatePhone","validateProductData","validateQuantity","validateRequiredFields","validateURL","email","length","startsWith","endsWith","split","localPart","domain","includes","emailRegex","test","password","errors","message","isValid","push","errorMessages","uppercase","lowercase","number","special","map","e","join","phone","country","cleanPhone","replace","argPhoneRegex","intPhoneRegex","product","name","price","stock","category_id","brand","Array","isArray","images","order","user_id","items","forEach","item","index","product_id","quantity","total","calculatedTotal","reduce","sum","Math","abs","addressValidation","shipping_address","payment_method","payment","method","amount","currency","payer","address","requiredFields","field","trim","postal_code","postalCodeValid","validatePostalCode","postalCode","patterns","pattern","supportedCurrencies","toUpperCase","Number","isInteger","discount","type","value","input","obj","undefined","min","max","date","parsedDate","Date","isNaN","getTime","url","URL"],"mappings":"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"}