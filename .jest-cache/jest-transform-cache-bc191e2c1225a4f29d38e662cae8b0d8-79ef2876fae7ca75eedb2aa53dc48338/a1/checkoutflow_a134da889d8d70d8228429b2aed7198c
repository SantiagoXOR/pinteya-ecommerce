21467e0eeffde019820b61b48ba63291
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "CheckoutFlow", {
    enumerable: true,
    get: function() {
        return CheckoutFlow;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _card = require("./card");
const _button = require("./button");
const _badge = require("./badge");
const _shippinginfo = require("./shipping-info");
const _cartsummary = require("./cart-summary");
const _lucidereact = require("lucide-react");
const _utils = require("../../lib/utils");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const defaultSteps = [
    {
        id: 'cart',
        title: 'Carrito',
        description: 'Revisar productos',
        icon: _lucidereact.Package
    },
    {
        id: 'shipping',
        title: 'Envío',
        description: 'Dirección y método',
        icon: _lucidereact.Truck
    },
    {
        id: 'billing',
        title: 'Facturación',
        description: 'Datos personales',
        icon: _lucidereact.User
    },
    {
        id: 'payment',
        title: 'Pago',
        description: 'Método de pago',
        icon: _lucidereact.CreditCard
    },
    {
        id: 'confirmation',
        title: 'Confirmación',
        description: 'Revisar pedido',
        icon: _lucidereact.CheckCircle
    }
];
const CheckoutFlow = /*#__PURE__*/ _react.forwardRef(({ currentStep = 0, steps = defaultSteps, cartItems = [], checkoutData = {}, isLoading = false, errors = {}, onStepChange, onContinue, onGoBack, onComplete, showCartSummary = true, variant = 'default', className, children, ...props }, ref)=>{
    const isCompact = variant === 'compact';
    const isDetailed = variant === 'detailed';
    // Calcular progreso
    const progress = (currentStep + 1) / steps.length * 100;
    // Paso actual
    const activeStep = steps[currentStep];
    // Marcar pasos como completados/activos
    const stepsWithStatus = steps.map((step, index)=>({
            ...step,
            isCompleted: index < currentStep,
            isActive: index === currentStep,
            isDisabled: index > currentStep
        }));
    const handleStepClick = (stepIndex)=>{
        if (onStepChange && stepIndex <= currentStep) {
            onStepChange(stepIndex);
        }
    };
    const canGoBack = currentStep > 0;
    const canContinue = currentStep < steps.length - 1;
    const isLastStep = currentStep === steps.length - 1;
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        ref: ref,
        className: (0, _utils.cn)("w-full space-y-6", className),
        ...props,
        children: [
            !isCompact && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.Card, {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardHeader, {
                        className: "pb-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center justify-between mb-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardTitle, {
                                        className: "text-lg",
                                        children: "Proceso de Compra"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_badge.Badge, {
                                        variant: "outline",
                                        children: [
                                            "Paso ",
                                            currentStep + 1,
                                            " de ",
                                            steps.length
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-full bg-gray-200 rounded-full h-2",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "bg-primary h-2 rounded-full transition-all duration-300",
                                    style: {
                                        width: `${progress}%`
                                    }
                                })
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardContent, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "flex items-center justify-between",
                            children: stepsWithStatus.map((step, index)=>{
                                const Icon = step.icon;
                                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: (0, _utils.cn)("flex flex-col items-center cursor-pointer transition-colors", step.isActive && "text-primary", step.isCompleted && "text-green-600", step.isDisabled && "text-gray-400 cursor-not-allowed"),
                                    onClick: ()=>handleStepClick(index),
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: (0, _utils.cn)("w-10 h-10 rounded-full border-2 flex items-center justify-center mb-2 transition-colors", step.isActive && "border-primary bg-primary text-white", step.isCompleted && "border-green-600 bg-green-600 text-white", step.isDisabled && "border-gray-300"),
                                            children: step.isCompleted ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CheckCircle, {
                                                className: "w-5 h-5"
                                            }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(Icon, {
                                                className: "w-5 h-5"
                                            })
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "text-center",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: (0, _utils.cn)("text-sm font-medium", step.isActive && "text-primary", step.isCompleted && "text-green-600"),
                                                    children: step.title
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-xs text-gray-500 hidden sm:block",
                                                    children: step.description
                                                })
                                            ]
                                        })
                                    ]
                                }, step.id);
                            })
                        })
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: (0, _utils.cn)("grid gap-6", showCartSummary ? "lg:grid-cols-3" : "lg:grid-cols-1"),
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: (0, _utils.cn)(showCartSummary ? "lg:col-span-2" : "lg:col-span-1"),
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.Card, {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardHeader, {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardTitle, {
                                            className: "flex items-center gap-2",
                                            children: activeStep && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(activeStep.icon, {
                                                        className: "w-5 h-5 text-primary"
                                                    }),
                                                    activeStep.title
                                                ]
                                            })
                                        }),
                                        activeStep?.description && /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-gray-600",
                                            children: activeStep.description
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardContent, {
                                    children: [
                                        Object.keys(errors).length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "mb-4 p-4 bg-red-50 border border-red-200 rounded-md",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center gap-2 text-red-800 mb-2",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.AlertCircle, {
                                                            className: "w-4 h-4"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-medium",
                                                            children: "Hay errores que corregir:"
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("ul", {
                                                    className: "text-sm text-red-700 space-y-1",
                                                    children: Object.entries(errors).map(([field, error])=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("li", {
                                                            children: [
                                                                "• ",
                                                                error
                                                            ]
                                                        }, field))
                                                })
                                            ]
                                        }),
                                        children,
                                        activeStep?.id === 'shipping' && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "mt-6",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                                    className: "text-lg font-semibold mb-4",
                                                    children: "Opciones de Env\xedo"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_shippinginfo.ShippingInfo, {
                                                    variant: isDetailed ? "card" : "default",
                                                    options: [
                                                        {
                                                            id: 'free',
                                                            name: 'Envío gratis',
                                                            price: 0,
                                                            estimatedDays: {
                                                                min: 5,
                                                                max: 7
                                                            },
                                                            isFree: true,
                                                            description: 'En compras mayores a $50.000'
                                                        },
                                                        {
                                                            id: 'standard',
                                                            name: 'Envío estándar',
                                                            price: 2500,
                                                            estimatedDays: {
                                                                min: 3,
                                                                max: 5
                                                            },
                                                            description: 'Entrega a domicilio'
                                                        },
                                                        {
                                                            id: 'express',
                                                            name: 'Envío express',
                                                            price: 4500,
                                                            estimatedDays: {
                                                                min: 1,
                                                                max: 2
                                                            },
                                                            isExpress: true,
                                                            description: 'Entrega prioritaria'
                                                        }
                                                    ],
                                                    selectedOption: checkoutData.shippingMethod,
                                                    showCalculator: true,
                                                    showGuarantees: true
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center justify-between mt-8 pt-6 border-t",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_button.Button, {
                                                    variant: "outline",
                                                    onClick: onGoBack,
                                                    disabled: !canGoBack || isLoading,
                                                    className: "flex items-center gap-2",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.ArrowLeft, {
                                                            className: "w-4 h-4"
                                                        }),
                                                        "Anterior"
                                                    ]
                                                }),
                                                isLastStep ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                                                    onClick: onComplete,
                                                    disabled: isLoading,
                                                    className: "flex items-center gap-2",
                                                    size: "lg",
                                                    children: isLoading ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                                className: "w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"
                                                            }),
                                                            "Procesando..."
                                                        ]
                                                    }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CheckCircle, {
                                                                className: "w-4 h-4"
                                                            }),
                                                            "Finalizar Compra"
                                                        ]
                                                    })
                                                }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)(_button.Button, {
                                                    onClick: onContinue,
                                                    disabled: !canContinue || isLoading,
                                                    className: "flex items-center gap-2",
                                                    children: [
                                                        "Continuar",
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.ArrowRight, {
                                                            className: "w-4 h-4"
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        })
                    }),
                    showCartSummary && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "lg:col-span-1",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "sticky top-4",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
                                cartItems: cartItems,
                                totalPrice: checkoutData.totalPrice || 0,
                                shippingCost: checkoutData.shippingCost,
                                discount: checkoutData.discount,
                                finalTotal: checkoutData.finalTotal,
                                shippingMethod: checkoutData.shippingMethod,
                                appliedCoupon: checkoutData.appliedCoupon,
                                variant: isCompact ? "compact" : "default",
                                showProductCards: isDetailed,
                                productCardContext: "checkout",
                                showShippingDetails: activeStep?.id === 'shipping'
                            })
                        })
                    })
                ]
            })
        ]
    });
});
CheckoutFlow.displayName = "CheckoutFlow";

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXGNoZWNrb3V0LWZsb3cudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiXHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIlxyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jYXJkXCJcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIlxyXG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYmFkZ2VcIlxyXG4vLyBQcm9ncmVzcyBjb21wb25lbnQgaW5saW5lIChzaW1wbGUgaW1wbGVtZW50YXRpb24pXHJcbmltcG9ydCB7IFNlcGFyYXRvciB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvc2VwYXJhdG9yXCJcclxuaW1wb3J0IHsgU2hpcHBpbmdJbmZvIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zaGlwcGluZy1pbmZvXCJcclxuaW1wb3J0IHsgQ2FydFN1bW1hcnkgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcnQtc3VtbWFyeVwiXHJcbmltcG9ydCB7IFxyXG4gIENoZWNrQ2lyY2xlLCBcclxuICBDcmVkaXRDYXJkLCBcclxuICBNYXBQaW4sIFxyXG4gIFBhY2thZ2UsIFxyXG4gIFRydWNrLCBcclxuICBVc2VyLFxyXG4gIEFycm93TGVmdCxcclxuICBBcnJvd1JpZ2h0LFxyXG4gIEFsZXJ0Q2lyY2xlXHJcbn0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiXHJcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCJcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2tvdXRTdGVwIHtcclxuICBpZDogc3RyaW5nXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICBpY29uOiBSZWFjdC5Db21wb25lbnRUeXBlPHsgY2xhc3NOYW1lPzogc3RyaW5nIH0+XHJcbiAgaXNDb21wbGV0ZWQ/OiBib29sZWFuXHJcbiAgaXNBY3RpdmU/OiBib29sZWFuXHJcbiAgaXNEaXNhYmxlZD86IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGVja291dEZsb3dQcm9wcyB7XHJcbiAgLyoqIFBhc28gYWN0dWFsIGRlbCBjaGVja291dCAqL1xyXG4gIGN1cnJlbnRTdGVwOiBudW1iZXJcclxuICAvKiogUGFzb3MgZGVsIGNoZWNrb3V0ICovXHJcbiAgc3RlcHM/OiBDaGVja291dFN0ZXBbXVxyXG4gIC8qKiBJdGVtcyBkZWwgY2Fycml0byAqL1xyXG4gIGNhcnRJdGVtczogYW55W11cclxuICAvKiogRGF0b3MgZGVsIGNoZWNrb3V0ICovXHJcbiAgY2hlY2tvdXREYXRhPzoge1xyXG4gICAgdG90YWxQcmljZTogbnVtYmVyXHJcbiAgICBzaGlwcGluZ0Nvc3Q/OiBudW1iZXJcclxuICAgIGRpc2NvdW50PzogbnVtYmVyXHJcbiAgICBmaW5hbFRvdGFsPzogbnVtYmVyXHJcbiAgICBzaGlwcGluZ01ldGhvZD86ICdmcmVlJyB8ICdzdGFuZGFyZCcgfCAnZXhwcmVzcydcclxuICAgIGFwcGxpZWRDb3Vwb24/OiBhbnlcclxuICB9XHJcbiAgLyoqIEVzdGFkbyBkZSBjYXJnYSAqL1xyXG4gIGlzTG9hZGluZz86IGJvb2xlYW5cclxuICAvKiogRXJyb3JlcyAqL1xyXG4gIGVycm9ycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cclxuICAvKiogQ2FsbGJhY2sgcGFyYSBjYW1iaWFyIHBhc28gKi9cclxuICBvblN0ZXBDaGFuZ2U/OiAoc3RlcDogbnVtYmVyKSA9PiB2b2lkXHJcbiAgLyoqIENhbGxiYWNrIHBhcmEgY29udGludWFyICovXHJcbiAgb25Db250aW51ZT86ICgpID0+IHZvaWRcclxuICAvKiogQ2FsbGJhY2sgcGFyYSByZXRyb2NlZGVyICovXHJcbiAgb25Hb0JhY2s/OiAoKSA9PiB2b2lkXHJcbiAgLyoqIENhbGxiYWNrIHBhcmEgZmluYWxpemFyIGNoZWNrb3V0ICovXHJcbiAgb25Db21wbGV0ZT86ICgpID0+IHZvaWRcclxuICAvKiogTW9zdHJhciByZXN1bWVuIGRlbCBjYXJyaXRvICovXHJcbiAgc2hvd0NhcnRTdW1tYXJ5PzogYm9vbGVhblxyXG4gIC8qKiBWYXJpYW50ZSBkZWwgY29tcG9uZW50ZSAqL1xyXG4gIHZhcmlhbnQ/OiAnZGVmYXVsdCcgfCAnY29tcGFjdCcgfCAnZGV0YWlsZWQnXHJcbiAgLyoqIENsYXNlIENTUyBhZGljaW9uYWwgKi9cclxuICBjbGFzc05hbWU/OiBzdHJpbmdcclxuICAvKiogQ29udGVuaWRvIHBlcnNvbmFsaXphZG8gcGFyYSBjYWRhIHBhc28gKi9cclxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0U3RlcHM6IENoZWNrb3V0U3RlcFtdID0gW1xyXG4gIHtcclxuICAgIGlkOiAnY2FydCcsXHJcbiAgICB0aXRsZTogJ0NhcnJpdG8nLFxyXG4gICAgZGVzY3JpcHRpb246ICdSZXZpc2FyIHByb2R1Y3RvcycsXHJcbiAgICBpY29uOiBQYWNrYWdlLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdzaGlwcGluZycsXHJcbiAgICB0aXRsZTogJ0VudsOtbycsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0RpcmVjY2nDs24geSBtw6l0b2RvJyxcclxuICAgIGljb246IFRydWNrLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdiaWxsaW5nJyxcclxuICAgIHRpdGxlOiAnRmFjdHVyYWNpw7NuJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRGF0b3MgcGVyc29uYWxlcycsXHJcbiAgICBpY29uOiBVc2VyLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdwYXltZW50JyxcclxuICAgIHRpdGxlOiAnUGFnbycsXHJcbiAgICBkZXNjcmlwdGlvbjogJ03DqXRvZG8gZGUgcGFnbycsXHJcbiAgICBpY29uOiBDcmVkaXRDYXJkLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdjb25maXJtYXRpb24nLFxyXG4gICAgdGl0bGU6ICdDb25maXJtYWNpw7NuJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnUmV2aXNhciBwZWRpZG8nLFxyXG4gICAgaWNvbjogQ2hlY2tDaXJjbGUsXHJcbiAgfSxcclxuXVxyXG5cclxuLyoqXHJcbiAqIENoZWNrb3V0RmxvdyBhdmFuemFkbyBjb24gaW50ZWdyYWNpw7NuIGRlbCBEZXNpZ24gU3lzdGVtXHJcbiAqIFxyXG4gKiBDYXJhY3RlcsOtc3RpY2FzOlxyXG4gKiAtIEZsdWpvIHBhc28gYSBwYXNvIGNvbiBpbmRpY2Fkb3IgZGUgcHJvZ3Jlc29cclxuICogLSBJbnRlZ3JhIFNoaXBwaW5nSW5mbyBwYXJhIG9wY2lvbmVzIGRlIGVudsOtb1xyXG4gKiAtIEludGVncmEgQ2FydFN1bW1hcnkgcGFyYSByZXN1bWVuIGRlbCBwZWRpZG9cclxuICogLSBNYW5lam8gZGUgZXN0YWRvcyAobG9hZGluZywgZXJyb3JlcywgdmFsaWRhY2nDs24pXHJcbiAqIC0gTmF2ZWdhY2nDs24gZW50cmUgcGFzb3NcclxuICogLSBSZXNwb25zaXZlIGRlc2lnblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IENoZWNrb3V0RmxvdyA9IFJlYWN0LmZvcndhcmRSZWY8SFRNTERpdkVsZW1lbnQsIENoZWNrb3V0Rmxvd1Byb3BzPihcclxuICAoe1xyXG4gICAgY3VycmVudFN0ZXAgPSAwLFxyXG4gICAgc3RlcHMgPSBkZWZhdWx0U3RlcHMsXHJcbiAgICBjYXJ0SXRlbXMgPSBbXSxcclxuICAgIGNoZWNrb3V0RGF0YSA9IHt9LFxyXG4gICAgaXNMb2FkaW5nID0gZmFsc2UsXHJcbiAgICBlcnJvcnMgPSB7fSxcclxuICAgIG9uU3RlcENoYW5nZSxcclxuICAgIG9uQ29udGludWUsXHJcbiAgICBvbkdvQmFjayxcclxuICAgIG9uQ29tcGxldGUsXHJcbiAgICBzaG93Q2FydFN1bW1hcnkgPSB0cnVlLFxyXG4gICAgdmFyaWFudCA9ICdkZWZhdWx0JyxcclxuICAgIGNsYXNzTmFtZSxcclxuICAgIGNoaWxkcmVuLFxyXG4gICAgLi4ucHJvcHNcclxuICB9LCByZWYpID0+IHtcclxuICAgIGNvbnN0IGlzQ29tcGFjdCA9IHZhcmlhbnQgPT09ICdjb21wYWN0J1xyXG4gICAgY29uc3QgaXNEZXRhaWxlZCA9IHZhcmlhbnQgPT09ICdkZXRhaWxlZCdcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXIgcHJvZ3Jlc29cclxuICAgIGNvbnN0IHByb2dyZXNzID0gKChjdXJyZW50U3RlcCArIDEpIC8gc3RlcHMubGVuZ3RoKSAqIDEwMFxyXG4gICAgXHJcbiAgICAvLyBQYXNvIGFjdHVhbFxyXG4gICAgY29uc3QgYWN0aXZlU3RlcCA9IHN0ZXBzW2N1cnJlbnRTdGVwXVxyXG4gICAgXHJcbiAgICAvLyBNYXJjYXIgcGFzb3MgY29tbyBjb21wbGV0YWRvcy9hY3Rpdm9zXHJcbiAgICBjb25zdCBzdGVwc1dpdGhTdGF0dXMgPSBzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiAoe1xyXG4gICAgICAuLi5zdGVwLFxyXG4gICAgICBpc0NvbXBsZXRlZDogaW5kZXggPCBjdXJyZW50U3RlcCxcclxuICAgICAgaXNBY3RpdmU6IGluZGV4ID09PSBjdXJyZW50U3RlcCxcclxuICAgICAgaXNEaXNhYmxlZDogaW5kZXggPiBjdXJyZW50U3RlcCxcclxuICAgIH0pKVxyXG5cclxuICAgIGNvbnN0IGhhbmRsZVN0ZXBDbGljayA9IChzdGVwSW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICBpZiAob25TdGVwQ2hhbmdlICYmIHN0ZXBJbmRleCA8PSBjdXJyZW50U3RlcCkge1xyXG4gICAgICAgIG9uU3RlcENoYW5nZShzdGVwSW5kZXgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYW5Hb0JhY2sgPSBjdXJyZW50U3RlcCA+IDBcclxuICAgIGNvbnN0IGNhbkNvbnRpbnVlID0gY3VycmVudFN0ZXAgPCBzdGVwcy5sZW5ndGggLSAxXHJcbiAgICBjb25zdCBpc0xhc3RTdGVwID0gY3VycmVudFN0ZXAgPT09IHN0ZXBzLmxlbmd0aCAtIDFcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IHJlZj17cmVmfSBjbGFzc05hbWU9e2NuKFwidy1mdWxsIHNwYWNlLXktNlwiLCBjbGFzc05hbWUpfSB7Li4ucHJvcHN9PlxyXG4gICAgICAgIHsvKiBJbmRpY2Fkb3IgZGUgcHJvZ3Jlc28gKi99XHJcbiAgICAgICAgeyFpc0NvbXBhY3QgJiYgKFxyXG4gICAgICAgICAgPENhcmQ+XHJcbiAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT1cInBiLTRcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0yXCI+XHJcbiAgICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT1cInRleHQtbGdcIj5Qcm9jZXNvIGRlIENvbXByYTwvQ2FyZFRpdGxlPlxyXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJvdXRsaW5lXCI+XHJcbiAgICAgICAgICAgICAgICAgIFBhc28ge2N1cnJlbnRTdGVwICsgMX0gZGUge3N0ZXBzLmxlbmd0aH1cclxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgey8qIFByb2dyZXNzIGJhciBzaW1wbGUgKi99XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1wcmltYXJ5IGgtMiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCJcclxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke3Byb2dyZXNzfSVgIH19XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0NhcmRIZWFkZXI+XHJcbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cclxuICAgICAgICAgICAgICB7LyogUGFzb3MgKi99XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgIHtzdGVwc1dpdGhTdGF0dXMubWFwKChzdGVwLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBJY29uID0gc3RlcC5pY29uXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtzdGVwLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmlzQWN0aXZlICYmIFwidGV4dC1wcmltYXJ5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAuaXNDb21wbGV0ZWQgJiYgXCJ0ZXh0LWdyZWVuLTYwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmlzRGlzYWJsZWQgJiYgXCJ0ZXh0LWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3RlcENsaWNrKGluZGV4KX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJvcmRlci0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1iLTIgdHJhbnNpdGlvbi1jb2xvcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmlzQWN0aXZlICYmIFwiYm9yZGVyLXByaW1hcnkgYmctcHJpbWFyeSB0ZXh0LXdoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC5pc0NvbXBsZXRlZCAmJiBcImJvcmRlci1ncmVlbi02MDAgYmctZ3JlZW4tNjAwIHRleHQtd2hpdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmlzRGlzYWJsZWQgJiYgXCJib3JkZXItZ3JheS0zMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c3RlcC5pc0NvbXBsZXRlZCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInRleHQtc20gZm9udC1tZWRpdW1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwLmlzQWN0aXZlICYmIFwidGV4dC1wcmltYXJ5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC5pc0NvbXBsZXRlZCAmJiBcInRleHQtZ3JlZW4tNjAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3N0ZXAudGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIGhpZGRlbiBzbTpibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGVwLmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICA8L0NhcmQ+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAgey8qIENvbnRlbmlkbyBwcmluY2lwYWwgKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgXCJncmlkIGdhcC02XCIsXHJcbiAgICAgICAgICBzaG93Q2FydFN1bW1hcnkgPyBcImxnOmdyaWQtY29scy0zXCIgOiBcImxnOmdyaWQtY29scy0xXCJcclxuICAgICAgICApfT5cclxuICAgICAgICAgIHsvKiBDb250ZW5pZG8gZGVsIHBhc28gYWN0dWFsICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NuKHNob3dDYXJ0U3VtbWFyeSA/IFwibGc6Y29sLXNwYW4tMlwiIDogXCJsZzpjb2wtc3Bhbi0xXCIpfT5cclxuICAgICAgICAgICAgPENhcmQ+XHJcbiAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XHJcbiAgICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgIHthY3RpdmVTdGVwICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGFjdGl2ZVN0ZXAuaWNvbiBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtcHJpbWFyeVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlU3RlcC50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvQ2FyZFRpdGxlPlxyXG4gICAgICAgICAgICAgICAge2FjdGl2ZVN0ZXA/LmRlc2NyaXB0aW9uICYmIChcclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPnthY3RpdmVTdGVwLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9DYXJkSGVhZGVyPlxyXG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudD5cclxuICAgICAgICAgICAgICAgIHsvKiBFcnJvcmVzICovfVxyXG4gICAgICAgICAgICAgICAge09iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBwLTQgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLW1kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXJlZC04MDAgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5IYXkgZXJyb3JlcyBxdWUgY29ycmVnaXI6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTcwMCBzcGFjZS15LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyhlcnJvcnMpLm1hcCgoW2ZpZWxkLCBlcnJvcl0pID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGtleT17ZmllbGR9PuKAoiB7ZXJyb3J9PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogQ29udGVuaWRvIGVzcGVjw61maWNvIGRlbCBwYXNvICovfVxyXG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBJbmZvcm1hY2nDs24gZGUgZW52w61vIGVuIGVsIHBhc28gY29ycmVzcG9uZGllbnRlICovfVxyXG4gICAgICAgICAgICAgICAge2FjdGl2ZVN0ZXA/LmlkID09PSAnc2hpcHBpbmcnICYmIChcclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCBtYi00XCI+T3BjaW9uZXMgZGUgRW52w61vPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICA8U2hpcHBpbmdJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtpc0RldGFpbGVkID8gXCJjYXJkXCIgOiBcImRlZmF1bHRcIn1cclxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnZnJlZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0VudsOtbyBncmF0aXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZERheXM6IHsgbWluOiA1LCBtYXg6IDcgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZyZWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFbiBjb21wcmFzIG1heW9yZXMgYSAkNTAuMDAwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdzdGFuZGFyZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0VudsOtbyBlc3TDoW5kYXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiAyNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZERheXM6IHsgbWluOiAzLCBtYXg6IDUgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0VudHJlZ2EgYSBkb21pY2lsaW8nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2V4cHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdFbnbDrW8gZXhwcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IDQ1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkRGF5czogeyBtaW46IDEsIG1heDogMiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhwcmVzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0VudHJlZ2EgcHJpb3JpdGFyaWEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbj17Y2hlY2tvdXREYXRhLnNoaXBwaW5nTWV0aG9kfVxyXG4gICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbGN1bGF0b3I9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICBzaG93R3VhcmFudGVlcz17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIE5hdmVnYWNpw7NuICovfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbXQtOCBwdC02IGJvcmRlci10XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25Hb0JhY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5Hb0JhY2sgfHwgaXNMb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBcnJvd0xlZnQgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgQW50ZXJpb3JcclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICB7aXNMYXN0U3RlcCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNvbXBsZXRlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJsZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAge2lzTG9hZGluZyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgYm9yZGVyLTIgYm9yZGVyLXdoaXRlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFByb2Nlc2FuZG8uLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja0NpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBGaW5hbGl6YXIgQ29tcHJhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNvbnRpbnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5Db250aW51ZSB8fCBpc0xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgQ29udGludWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICA8QXJyb3dSaWdodCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIHsvKiBSZXN1bWVuIGRlbCBjYXJyaXRvICovfVxyXG4gICAgICAgICAge3Nob3dDYXJ0U3VtbWFyeSAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGc6Y29sLXNwYW4tMVwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RpY2t5IHRvcC00XCI+XHJcbiAgICAgICAgICAgICAgICA8Q2FydFN1bW1hcnlcclxuICAgICAgICAgICAgICAgICAgY2FydEl0ZW1zPXtjYXJ0SXRlbXN9XHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2U9e2NoZWNrb3V0RGF0YS50b3RhbFByaWNlIHx8IDB9XHJcbiAgICAgICAgICAgICAgICAgIHNoaXBwaW5nQ29zdD17Y2hlY2tvdXREYXRhLnNoaXBwaW5nQ29zdH1cclxuICAgICAgICAgICAgICAgICAgZGlzY291bnQ9e2NoZWNrb3V0RGF0YS5kaXNjb3VudH1cclxuICAgICAgICAgICAgICAgICAgZmluYWxUb3RhbD17Y2hlY2tvdXREYXRhLmZpbmFsVG90YWx9XHJcbiAgICAgICAgICAgICAgICAgIHNoaXBwaW5nTWV0aG9kPXtjaGVja291dERhdGEuc2hpcHBpbmdNZXRob2R9XHJcbiAgICAgICAgICAgICAgICAgIGFwcGxpZWRDb3Vwb249e2NoZWNrb3V0RGF0YS5hcHBsaWVkQ291cG9ufVxyXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PXtpc0NvbXBhY3QgPyBcImNvbXBhY3RcIiA6IFwiZGVmYXVsdFwifVxyXG4gICAgICAgICAgICAgICAgICBzaG93UHJvZHVjdENhcmRzPXtpc0RldGFpbGVkfVxyXG4gICAgICAgICAgICAgICAgICBwcm9kdWN0Q2FyZENvbnRleHQ9XCJjaGVja291dFwiXHJcbiAgICAgICAgICAgICAgICAgIHNob3dTaGlwcGluZ0RldGFpbHM9e2FjdGl2ZVN0ZXA/LmlkID09PSAnc2hpcHBpbmcnfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbilcclxuXHJcbkNoZWNrb3V0Rmxvdy5kaXNwbGF5TmFtZSA9IFwiQ2hlY2tvdXRGbG93XCJcclxuIl0sIm5hbWVzIjpbIkNoZWNrb3V0RmxvdyIsImRlZmF1bHRTdGVwcyIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImljb24iLCJQYWNrYWdlIiwiVHJ1Y2siLCJVc2VyIiwiQ3JlZGl0Q2FyZCIsIkNoZWNrQ2lyY2xlIiwiUmVhY3QiLCJmb3J3YXJkUmVmIiwiY3VycmVudFN0ZXAiLCJzdGVwcyIsImNhcnRJdGVtcyIsImNoZWNrb3V0RGF0YSIsImlzTG9hZGluZyIsImVycm9ycyIsIm9uU3RlcENoYW5nZSIsIm9uQ29udGludWUiLCJvbkdvQmFjayIsIm9uQ29tcGxldGUiLCJzaG93Q2FydFN1bW1hcnkiLCJ2YXJpYW50IiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJwcm9wcyIsInJlZiIsImlzQ29tcGFjdCIsImlzRGV0YWlsZWQiLCJwcm9ncmVzcyIsImxlbmd0aCIsImFjdGl2ZVN0ZXAiLCJzdGVwc1dpdGhTdGF0dXMiLCJtYXAiLCJzdGVwIiwiaW5kZXgiLCJpc0NvbXBsZXRlZCIsImlzQWN0aXZlIiwiaXNEaXNhYmxlZCIsImhhbmRsZVN0ZXBDbGljayIsInN0ZXBJbmRleCIsImNhbkdvQmFjayIsImNhbkNvbnRpbnVlIiwiaXNMYXN0U3RlcCIsImRpdiIsImNuIiwiQ2FyZCIsIkNhcmRIZWFkZXIiLCJDYXJkVGl0bGUiLCJCYWRnZSIsInN0eWxlIiwid2lkdGgiLCJDYXJkQ29udGVudCIsIkljb24iLCJvbkNsaWNrIiwicCIsIk9iamVjdCIsImtleXMiLCJBbGVydENpcmNsZSIsInNwYW4iLCJ1bCIsImVudHJpZXMiLCJmaWVsZCIsImVycm9yIiwibGkiLCJoMyIsIlNoaXBwaW5nSW5mbyIsIm9wdGlvbnMiLCJuYW1lIiwicHJpY2UiLCJlc3RpbWF0ZWREYXlzIiwibWluIiwibWF4IiwiaXNGcmVlIiwiaXNFeHByZXNzIiwic2VsZWN0ZWRPcHRpb24iLCJzaGlwcGluZ01ldGhvZCIsInNob3dDYWxjdWxhdG9yIiwic2hvd0d1YXJhbnRlZXMiLCJCdXR0b24iLCJkaXNhYmxlZCIsIkFycm93TGVmdCIsInNpemUiLCJBcnJvd1JpZ2h0IiwiQ2FydFN1bW1hcnkiLCJ0b3RhbFByaWNlIiwic2hpcHBpbmdDb3N0IiwiZGlzY291bnQiLCJmaW5hbFRvdGFsIiwiYXBwbGllZENvdXBvbiIsInNob3dQcm9kdWN0Q2FyZHMiLCJwcm9kdWN0Q2FyZENvbnRleHQiLCJzaG93U2hpcHBpbmdEZXRhaWxzIiwiZGlzcGxheU5hbWUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkFtSGFBOzs7ZUFBQUE7Ozs7K0RBakhVO3NCQUNrQzt3QkFDbEM7dUJBQ0Q7OEJBR087NkJBQ0Q7NkJBV3JCO3VCQUNZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrRG5CLE1BQU1DLGVBQStCO0lBQ25DO1FBQ0VDLElBQUk7UUFDSkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLE1BQU1DLG9CQUFPO0lBQ2Y7SUFDQTtRQUNFSixJQUFJO1FBQ0pDLE9BQU87UUFDUEMsYUFBYTtRQUNiQyxNQUFNRSxrQkFBSztJQUNiO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsTUFBTUcsaUJBQUk7SUFDWjtJQUNBO1FBQ0VOLElBQUk7UUFDSkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLE1BQU1JLHVCQUFVO0lBQ2xCO0lBQ0E7UUFDRVAsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsTUFBTUssd0JBQVc7SUFDbkI7Q0FDRDtBQWFNLE1BQU1WLDZCQUFlVyxPQUFNQyxVQUFVLENBQzFDLENBQUMsRUFDQ0MsY0FBYyxDQUFDLEVBQ2ZDLFFBQVFiLFlBQVksRUFDcEJjLFlBQVksRUFBRSxFQUNkQyxlQUFlLENBQUMsQ0FBQyxFQUNqQkMsWUFBWSxLQUFLLEVBQ2pCQyxTQUFTLENBQUMsQ0FBQyxFQUNYQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxVQUFVLEVBQ1ZDLGtCQUFrQixJQUFJLEVBQ3RCQyxVQUFVLFNBQVMsRUFDbkJDLFNBQVMsRUFDVEMsUUFBUSxFQUNSLEdBQUdDLE9BQ0osRUFBRUM7SUFDRCxNQUFNQyxZQUFZTCxZQUFZO0lB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