{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\__tests__\\AuthSection.test.tsx"],"sourcesContent":["/**\n * AuthSection Enterprise Test - Versión NextAuth\n * Enfocado en validar la nueva estructura NextAuth sin dependencias Clerk\n */\n\nimport React from 'react'\nimport { render, screen, fireEvent } from '@testing-library/react'\nimport { useSession, signIn } from 'next-auth/react'\nimport AuthSection from '../AuthSection'\n\n// Mock NextAuth\njest.mock('next-auth/react', () => ({\n  useSession: jest.fn(),\n  signIn: jest.fn()\n}))\n\nconst mockUseSession = useSession as jest.MockedFunction<typeof useSession>\nconst mockSignIn = signIn as jest.MockedFunction<typeof signIn>\n\n// Mock user data\nconst mockUser = {\n  id: 'user_123',\n  name: 'Juan Pérez',\n  email: 'juan@example.com'\n}\n\ndescribe('AuthSection Enterprise - NextAuth Structure', () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  describe('Usuario no autenticado', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated'\n      } as any)\n    })\n\n    it('debe renderizar botón de Google sign in', () => {\n      render(<AuthSection />)\n      \n      const button = screen.getByRole('button')\n      expect(button).toBeInTheDocument()\n      expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30')\n    })\n\n    it('debe mostrar SVG de Google en el botón', () => {\n      render(<AuthSection />)\n      \n      const svg = screen.getByRole('button').querySelector('svg')\n      expect(svg).toBeInTheDocument()\n      expect(svg).toHaveClass('w-5', 'h-5')\n    })\n\n    it('debe llamar signIn cuando se hace click', () => {\n      render(<AuthSection />)\n      \n      const button = screen.getByRole('button')\n      fireEvent.click(button)\n      \n      expect(mockSignIn).toHaveBeenCalledWith('google')\n    })\n\n    it('debe tener estilos correctos para botón translúcido', () => {\n      render(<AuthSection />)\n      \n      const button = screen.getByRole('button')\n      expect(button).toHaveClass(\n        'backdrop-blur-sm',\n        'border-2',\n        'border-white/30',\n        'rounded-full',\n        'shadow-lg'\n      )\n    })\n  })\n\n  describe('Usuario autenticado', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('debe mostrar enlace de admin cuando está autenticado', () => {\n      render(<AuthSection />)\n      \n      const adminLink = screen.getByRole('link')\n      expect(adminLink).toBeInTheDocument()\n      expect(adminLink).toHaveAttribute('href', '/admin')\n    })\n\n    it('debe mostrar avatar del usuario', () => {\n      render(<AuthSection />)\n\n      const avatar = screen.getByText('J') // Primera letra de Juan\n      expect(avatar).toBeInTheDocument()\n      // Verificar que tiene un contenedor padre\n      expect(avatar.parentElement).toBeInTheDocument()\n    })\n\n    it('debe tener botón admin con estilos correctos', () => {\n      render(<AuthSection />)\n      \n      const adminLink = screen.getByRole('link')\n      expect(adminLink).toHaveClass(\n        'bg-orange-600',\n        'hover:bg-orange-700',\n        'text-white'\n      )\n    })\n\n    it('debe mostrar texto Admin en desktop', () => {\n      render(<AuthSection />)\n      \n      const adminText = screen.getByText('Admin')\n      expect(adminText).toBeInTheDocument()\n    })\n  })\n\n  describe('Estado de carga', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'loading'\n      } as any)\n    })\n\n    it('debe mostrar skeleton de carga', () => {\n      render(<AuthSection />)\n      \n      const skeleton = screen.getByText((content, element) => {\n        return element?.classList.contains('animate-pulse') || false\n      })\n      expect(skeleton).toBeInTheDocument()\n    })\n  })\n\n  describe('Variantes del componente', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated'\n      } as any)\n    })\n\n    it('debe renderizar variante mobile correctamente', () => {\n      render(<AuthSection variant=\"mobile\" />)\n      \n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('hover:scale-110')\n    })\n\n    it('debe renderizar variante topbar con texto', () => {\n      render(<AuthSection variant=\"topbar\" />)\n      \n      const button = screen.getByText('Iniciar Sesión')\n      expect(button).toBeInTheDocument()\n      expect(button).toHaveClass('text-gray-800')\n    })\n\n    it('debe renderizar variante default con efectos', () => {\n      render(<AuthSection variant=\"default\" />)\n      \n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('hover:scale-105')\n    })\n  })\n\n  describe('Variante mobile autenticado', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('debe mostrar botón admin y avatar en mobile', () => {\n      render(<AuthSection variant=\"mobile\" />)\n      \n      const adminLink = screen.getByRole('link')\n      const avatar = screen.getByText('J')\n      \n      expect(adminLink).toHaveAttribute('href', '/admin')\n      expect(avatar).toBeInTheDocument()\n    })\n  })\n\n  describe('Variante topbar autenticado', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: { user: mockUser },\n        status: 'authenticated'\n      } as any)\n    })\n\n    it('debe mostrar solo avatar en topbar', () => {\n      render(<AuthSection variant=\"topbar\" />)\n\n      const avatar = screen.getByText('J')\n      expect(avatar).toBeInTheDocument()\n      // Verificar que tiene un contenedor padre apropiado\n      expect(avatar.parentElement).toBeInTheDocument()\n    })\n  })\n\n  describe('Accesibilidad básica', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated'\n      } as any)\n    })\n\n    it('debe ser accesible por teclado', () => {\n      render(<AuthSection />)\n      \n      const button = screen.getByRole('button')\n      button.focus()\n      expect(document.activeElement).toBe(button)\n    })\n\n    it('debe tener rol de botón correcto', () => {\n      render(<AuthSection />)\n      \n      const button = screen.getByRole('button')\n      expect(button).toBeInTheDocument()\n    })\n  })\n\n  describe('Colores de Google branding', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated'\n      } as any)\n    })\n\n    it('debe tener colores correctos de Google en SVG', () => {\n      render(<AuthSection />)\n      \n      const svg = screen.getByRole('button').querySelector('svg')\n      const paths = svg?.querySelectorAll('path')\n      \n      expect(paths).toHaveLength(4)\n      \n      const colors = Array.from(paths || []).map(path => path.getAttribute('fill'))\n      expect(colors).toContain('#4285F4') // Google Blue\n      expect(colors).toContain('#34A853') // Google Green\n      expect(colors).toContain('#FBBC05') // Google Yellow\n      expect(colors).toContain('#EA4335') // Google Red\n    })\n  })\n})\n"],"names":["jest","mock","useSession","fn","signIn","mockUseSession","mockSignIn","mockUser","id","name","email","describe","beforeEach","clearAllMocks","mockReturnValue","data","status","it","render","AuthSection","button","screen","getByRole","expect","toBeInTheDocument","toHaveClass","svg","querySelector","fireEvent","click","toHaveBeenCalledWith","user","adminLink","toHaveAttribute","avatar","getByText","parentElement","adminText","skeleton","content","element","classList","contains","variant","focus","document","activeElement","toBe","paths","querySelectorAll","toHaveLength","colors","Array","from","map","path","getAttribute","toContain"],"mappings":"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"}