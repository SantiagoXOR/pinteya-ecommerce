b3471c9b9c27373b44e31b89876e8d6b
/**
 * AuthSection Enterprise Test - Versión NextAuth
 * Enfocado en validar la nueva estructura NextAuth sin dependencias Clerk
 */ "use strict";
// Mock NextAuth
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn(),
        signIn: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _AuthSection = /*#__PURE__*/ _interop_require_default(require("../AuthSection"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockUseSession = _react2.useSession;
const mockSignIn = _react2.signIn;
// Mock user data
const mockUser = {
    id: 'user_123',
    name: 'Juan Pérez',
    email: 'juan@example.com'
};
describe('AuthSection Enterprise - NextAuth Structure', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Usuario no autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe renderizar botón de Google sign in', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30');
        });
        it('debe mostrar SVG de Google en el botón', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            expect(svg).toBeInTheDocument();
            expect(svg).toHaveClass('w-5', 'h-5');
        });
        it('debe llamar signIn cuando se hace click', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockSignIn).toHaveBeenCalledWith('google');
        });
        it('debe tener estilos correctos para botón translúcido', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('backdrop-blur-sm', 'border-2', 'border-white/30', 'rounded-full', 'shadow-lg');
        });
    });
    describe('Usuario autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar enlace de admin cuando está autenticado', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toBeInTheDocument();
            expect(adminLink).toHaveAttribute('href', '/admin');
        });
        it('debe mostrar avatar del usuario', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const avatar = _react1.screen.getByText('J') // Primera letra de Juan
            ;
            expect(avatar).toBeInTheDocument();
            // Verificar que tiene un contenedor padre
            expect(avatar.parentElement).toBeInTheDocument();
        });
        it('debe tener botón admin con estilos correctos', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toHaveClass('bg-orange-600', 'hover:bg-orange-700', 'text-white');
        });
        it('debe mostrar texto Admin en desktop', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminText = _react1.screen.getByText('Admin');
            expect(adminText).toBeInTheDocument();
        });
    });
    describe('Estado de carga', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'loading'
            });
        });
        it('debe mostrar skeleton de carga', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const skeleton = _react1.screen.getByText((content, element)=>{
                return element?.classList.contains('animate-pulse') || false;
            });
            expect(skeleton).toBeInTheDocument();
        });
    });
    describe('Variantes del componente', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe renderizar variante mobile correctamente', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-110');
        });
        it('debe renderizar variante topbar con texto', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const button = _react1.screen.getByText('Iniciar Sesión');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('text-gray-800');
        });
        it('debe renderizar variante default con efectos', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "default"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-105');
        });
    });
    describe('Variante mobile autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar botón admin y avatar en mobile', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const adminLink = _react1.screen.getByRole('link');
            const avatar = _react1.screen.getByText('J');
            expect(adminLink).toHaveAttribute('href', '/admin');
            expect(avatar).toBeInTheDocument();
        });
    });
    describe('Variante topbar autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar solo avatar en topbar', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const avatar = _react1.screen.getByText('J');
            expect(avatar).toBeInTheDocument();
            // Verificar que tiene un contenedor padre apropiado
            expect(avatar.parentElement).toBeInTheDocument();
        });
    });
    describe('Accesibilidad básica', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe ser accesible por teclado', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            button.focus();
            expect(document.activeElement).toBe(button);
        });
        it('debe tener rol de botón correcto', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
        });
    });
    describe('Colores de Google branding', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe tener colores correctos de Google en SVG', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            const paths = svg?.querySelectorAll('path');
            expect(paths).toHaveLength(4);
            const colors = Array.from(paths || []).map((path)=>path.getAttribute('fill'));
            expect(colors).toContain('#4285F4'); // Google Blue
            expect(colors).toContain('#34A853'); // Google Green
            expect(colors).toContain('#FBBC05'); // Google Yellow
            expect(colors).toContain('#EA4335'); // Google Red
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcSGVhZGVyXFxfX3Rlc3RzX19cXEF1dGhTZWN0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0aFNlY3Rpb24gRW50ZXJwcmlzZSBUZXN0IC0gVmVyc2nDs24gTmV4dEF1dGhcbiAqIEVuZm9jYWRvIGVuIHZhbGlkYXIgbGEgbnVldmEgZXN0cnVjdHVyYSBOZXh0QXV0aCBzaW4gZGVwZW5kZW5jaWFzIENsZXJrXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyB1c2VTZXNzaW9uLCBzaWduSW4gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnXG5pbXBvcnQgQXV0aFNlY3Rpb24gZnJvbSAnLi4vQXV0aFNlY3Rpb24nXG5cbi8vIE1vY2sgTmV4dEF1dGhcbmplc3QubW9jaygnbmV4dC1hdXRoL3JlYWN0JywgKCkgPT4gKHtcbiAgdXNlU2Vzc2lvbjogamVzdC5mbigpLFxuICBzaWduSW46IGplc3QuZm4oKVxufSkpXG5cbmNvbnN0IG1vY2tVc2VTZXNzaW9uID0gdXNlU2Vzc2lvbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VTZXNzaW9uPlxuY29uc3QgbW9ja1NpZ25JbiA9IHNpZ25JbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBzaWduSW4+XG5cbi8vIE1vY2sgdXNlciBkYXRhXG5jb25zdCBtb2NrVXNlciA9IHtcbiAgaWQ6ICd1c2VyXzEyMycsXG4gIG5hbWU6ICdKdWFuIFDDqXJleicsXG4gIGVtYWlsOiAnanVhbkBleGFtcGxlLmNvbSdcbn1cblxuZGVzY3JpYmUoJ0F1dGhTZWN0aW9uIEVudGVycHJpc2UgLSBOZXh0QXV0aCBTdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1VzdWFyaW8gbm8gYXV0ZW50aWNhZG8nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgcmVuZGVyaXphciBib3TDs24gZGUgR29vZ2xlIHNpZ24gaW4nLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2JnLXdoaXRlLzIwJywgJ2hvdmVyOmJnLXdoaXRlLzMwJylcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgbW9zdHJhciBTVkcgZGUgR29vZ2xlIGVuIGVsIGJvdMOzbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IHN2ZyA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICBleHBlY3Qoc3ZnKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc3ZnKS50b0hhdmVDbGFzcygndy01JywgJ2gtNScpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlIGxsYW1hciBzaWduSW4gY3VhbmRvIHNlIGhhY2UgY2xpY2snLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbilcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tTaWduSW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdnb29nbGUnKVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSB0ZW5lciBlc3RpbG9zIGNvcnJlY3RvcyBwYXJhIGJvdMOzbiB0cmFuc2zDumNpZG8nLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoXG4gICAgICAgICdiYWNrZHJvcC1ibHVyLXNtJyxcbiAgICAgICAgJ2JvcmRlci0yJyxcbiAgICAgICAgJ2JvcmRlci13aGl0ZS8zMCcsXG4gICAgICAgICdyb3VuZGVkLWZ1bGwnLFxuICAgICAgICAnc2hhZG93LWxnJ1xuICAgICAgKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1VzdWFyaW8gYXV0ZW50aWNhZG8nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG1vY2tVc2VyIH0sXG4gICAgICAgIHN0YXR1czogJ2F1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgbW9zdHJhciBlbmxhY2UgZGUgYWRtaW4gY3VhbmRvIGVzdMOhIGF1dGVudGljYWRvJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYWRtaW5MaW5rID0gc2NyZWVuLmdldEJ5Um9sZSgnbGluaycpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnL2FkbWluJylcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgbW9zdHJhciBhdmF0YXIgZGVsIHVzdWFyaW8nLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuXG4gICAgICBjb25zdCBhdmF0YXIgPSBzY3JlZW4uZ2V0QnlUZXh0KCdKJykgLy8gUHJpbWVyYSBsZXRyYSBkZSBKdWFuXG4gICAgICBleHBlY3QoYXZhdGFyKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIHRpZW5lIHVuIGNvbnRlbmVkb3IgcGFkcmVcbiAgICAgIGV4cGVjdChhdmF0YXIucGFyZW50RWxlbWVudCkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSB0ZW5lciBib3TDs24gYWRtaW4gY29uIGVzdGlsb3MgY29ycmVjdG9zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYWRtaW5MaW5rID0gc2NyZWVuLmdldEJ5Um9sZSgnbGluaycpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0hhdmVDbGFzcyhcbiAgICAgICAgJ2JnLW9yYW5nZS02MDAnLFxuICAgICAgICAnaG92ZXI6Ymctb3JhbmdlLTcwMCcsXG4gICAgICAgICd0ZXh0LXdoaXRlJ1xuICAgICAgKVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSBtb3N0cmFyIHRleHRvIEFkbWluIGVuIGRlc2t0b3AnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBhZG1pblRleHQgPSBzY3JlZW4uZ2V0QnlUZXh0KCdBZG1pbicpXG4gICAgICBleHBlY3QoYWRtaW5UZXh0KS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRXN0YWRvIGRlIGNhcmdhJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAnbG9hZGluZydcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSBtb3N0cmFyIHNrZWxldG9uIGRlIGNhcmdhJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcbiAgICAgIFxuICAgICAgY29uc3Qgc2tlbGV0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KChjb250ZW50LCBlbGVtZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUtcHVsc2UnKSB8fCBmYWxzZVxuICAgICAgfSlcbiAgICAgIGV4cGVjdChza2VsZXRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1ZhcmlhbnRlcyBkZWwgY29tcG9uZW50ZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCdcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSByZW5kZXJpemFyIHZhcmlhbnRlIG1vYmlsZSBjb3JyZWN0YW1lbnRlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PVwibW9iaWxlXCIgLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygnaG92ZXI6c2NhbGUtMTEwJylcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgcmVuZGVyaXphciB2YXJpYW50ZSB0b3BiYXIgY29uIHRleHRvJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PVwidG9wYmFyXCIgLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0luaWNpYXIgU2VzacOzbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygndGV4dC1ncmF5LTgwMCcpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlIHJlbmRlcml6YXIgdmFyaWFudGUgZGVmYXVsdCBjb24gZWZlY3RvcycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gdmFyaWFudD1cImRlZmF1bHRcIiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdob3ZlcjpzY2FsZS0xMDUnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1ZhcmlhbnRlIG1vYmlsZSBhdXRlbnRpY2FkbycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgdXNlcjogbW9ja1VzZXIgfSxcbiAgICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCdcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnZGViZSBtb3N0cmFyIGJvdMOzbiBhZG1pbiB5IGF2YXRhciBlbiBtb2JpbGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJtb2JpbGVcIiAvPilcbiAgICAgIFxuICAgICAgY29uc3QgYWRtaW5MaW5rID0gc2NyZWVuLmdldEJ5Um9sZSgnbGluaycpXG4gICAgICBjb25zdCBhdmF0YXIgPSBzY3JlZW4uZ2V0QnlUZXh0KCdKJylcbiAgICAgIFxuICAgICAgZXhwZWN0KGFkbWluTGluaykudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy9hZG1pbicpXG4gICAgICBleHBlY3QoYXZhdGFyKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnVmFyaWFudGUgdG9wYmFyIGF1dGVudGljYWRvJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBtb2NrVXNlciB9LFxuICAgICAgICBzdGF0dXM6ICdhdXRoZW50aWNhdGVkJ1xuICAgICAgfSBhcyBhbnkpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlIG1vc3RyYXIgc29sbyBhdmF0YXIgZW4gdG9wYmFyJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PVwidG9wYmFyXCIgLz4pXG5cbiAgICAgIGNvbnN0IGF2YXRhciA9IHNjcmVlbi5nZXRCeVRleHQoJ0onKVxuICAgICAgZXhwZWN0KGF2YXRhcikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSB0aWVuZSB1biBjb250ZW5lZG9yIHBhZHJlIGFwcm9waWFkb1xuICAgICAgZXhwZWN0KGF2YXRhci5wYXJlbnRFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnQWNjZXNpYmlsaWRhZCBiw6FzaWNhJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJ1xuICAgICAgfSBhcyBhbnkpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlIHNlciBhY2Nlc2libGUgcG9yIHRlY2xhZG8nLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgYnV0dG9uLmZvY3VzKClcbiAgICAgIGV4cGVjdChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS50b0JlKGJ1dHRvbilcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgdGVuZXIgcm9sIGRlIGJvdMOzbiBjb3JyZWN0bycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnQ29sb3JlcyBkZSBHb29nbGUgYnJhbmRpbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmUgdGVuZXIgY29sb3JlcyBjb3JyZWN0b3MgZGUgR29vZ2xlIGVuIFNWRycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IHN2ZyA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICBjb25zdCBwYXRocyA9IHN2Zz8ucXVlcnlTZWxlY3RvckFsbCgncGF0aCcpXG4gICAgICBcbiAgICAgIGV4cGVjdChwYXRocykudG9IYXZlTGVuZ3RoKDQpXG4gICAgICBcbiAgICAgIGNvbnN0IGNvbG9ycyA9IEFycmF5LmZyb20ocGF0aHMgfHwgW10pLm1hcChwYXRoID0+IHBhdGguZ2V0QXR0cmlidXRlKCdmaWxsJykpXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyM0Mjg1RjQnKSAvLyBHb29nbGUgQmx1ZVxuICAgICAgZXhwZWN0KGNvbG9ycykudG9Db250YWluKCcjMzRBODUzJykgLy8gR29vZ2xlIEdyZWVuXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyNGQkJDMDUnKSAvLyBHb29nbGUgWWVsbG93XG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyNFQTQzMzUnKSAvLyBHb29nbGUgUmVkXG4gICAgfSlcbiAgfSlcbn0pXG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VTZXNzaW9uIiwiZm4iLCJzaWduSW4iLCJtb2NrVXNlU2Vzc2lvbiIsIm1vY2tTaWduSW4iLCJtb2NrVXNlciIsImlkIiwibmFtZSIsImVtYWlsIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImRhdGEiLCJzdGF0dXMiLCJpdCIsInJlbmRlciIsIkF1dGhTZWN0aW9uIiwiYnV0dG9uIiwic2NyZWVuIiwiZ2V0QnlSb2xlIiwiZXhwZWN0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJ0b0hhdmVDbGFzcyIsInN2ZyIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJlRXZlbnQiLCJjbGljayIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidXNlciIsImFkbWluTGluayIsInRvSGF2ZUF0dHJpYnV0ZSIsImF2YXRhciIsImdldEJ5VGV4dCIsInBhcmVudEVsZW1lbnQiLCJhZG1pblRleHQiLCJza2VsZXRvbiIsImNvbnRlbnQiLCJlbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ2YXJpYW50IiwiZm9jdXMiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJ0b0JlIiwicGF0aHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9IYXZlTGVuZ3RoIiwiY29sb3JzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwicGF0aCIsImdldEF0dHJpYnV0ZSIsInRvQ29udGFpbiJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDO0FBT0QsZ0JBQWdCO0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsWUFBWUYsS0FBS0csRUFBRTtRQUNuQkMsUUFBUUosS0FBS0csRUFBRTtJQUNqQixDQUFBOzs7Ozs4REFUa0I7d0JBQ3dCO3dCQUNQO29FQUNYOzs7Ozs7QUFReEIsTUFBTUUsaUJBQWlCSCxrQkFBVTtBQUNqQyxNQUFNSSxhQUFhRixjQUFNO0FBRXpCLGlCQUFpQjtBQUNqQixNQUFNRyxXQUFXO0lBQ2ZDLElBQUk7SUFDSkMsTUFBTTtJQUNOQyxPQUFPO0FBQ1Q7QUFFQUMsU0FBUywrQ0FBK0M7SUFDdERDLFdBQVc7UUFDVFosS0FBS2EsYUFBYTtJQUNwQjtJQUVBRixTQUFTLDBCQUEwQjtRQUNqQ0MsV0FBVztZQUNUUCxlQUFlUyxlQUFlLENBQUM7Z0JBQzdCQyxNQUFNO2dCQUNOQyxRQUFRO1lBQ1Y7UUFDRjtRQUVBQyxHQUFHLDJDQUEyQztZQUM1Q0MsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ0Msb0JBQVc7WUFFbkIsTUFBTUMsU0FBU0MsY0FBTSxDQUFDQyxTQUFTLENBQUM7WUFDaENDLE9BQU9ILFFBQVFJLGlCQUFpQjtZQUNoQ0QsT0FBT0gsUUFBUUssV0FBVyxDQUFDLGVBQWU7UUFDNUM7UUFFQVIsR0FBRywwQ0FBMEM7WUFDM0NDLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNDLG9CQUFXO1lBRW5CLE1BQU1PLE1BQU1MLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFVBQVVLLGFBQWEsQ0FBQztZQUNyREosT0FBT0csS0FBS0YsaUJBQWlCO1lBQzdCRCxPQUFPRyxLQUFLRCxXQUFXLENBQUMsT0FBTztRQUNqQztRQUVBUixHQUFHLDJDQUEyQztZQUM1Q0MsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ0Msb0JBQVc7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