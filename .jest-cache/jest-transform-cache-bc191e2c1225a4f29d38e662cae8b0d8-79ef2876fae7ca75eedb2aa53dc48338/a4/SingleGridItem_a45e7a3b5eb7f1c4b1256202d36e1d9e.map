{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Shop\\SingleGridItem.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Product } from \"@/types/product\";\r\nimport { useModalContext } from \"@/app/context/QuickViewModalContext\";\r\nimport { updateQuickView } from \"@/redux/features/quickView-slice\";\r\nimport { addItemToCart } from \"@/redux/features/cart-slice\";\r\nimport { addItemToWishlist } from \"@/redux/features/wishlist-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppDispatch } from \"@/redux/store\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { CommercialProductCard } from \"@/components/ui/product-card-commercial\";\r\nimport { ExtendedProduct, calculateProductFeatures } from \"@/lib/adapters/productAdapter\";\r\n\r\nconst SingleGridItem = ({ item }: { item: ExtendedProduct }) => {\r\n  const { openModal } = useModalContext();\r\n\r\n  const dispatch = useDispatch<AppDispatch>();\r\n\r\n  // update the QuickView state\r\n  const handleQuickViewUpdate = () => {\r\n    dispatch(updateQuickView({ ...item }));\r\n  };\r\n\r\n  // add to cart\r\n  const handleAddToCart = () => {\r\n    dispatch(\r\n      addItemToCart({\r\n        ...item,\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleItemToWishList = () => {\r\n    dispatch(\r\n      addItemToWishlist({\r\n        ...item,\r\n        status: \"available\",\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n\r\n  // Calcular características del producto usando el adaptador\r\n  const features = calculateProductFeatures(item);\r\n\r\n  // FIX DIRECTO: Limpiar \"Poxipol\" del título si está presente\r\n  let cleanTitle = item.name || item.title;\r\n  if (cleanTitle && cleanTitle.includes('Poximix') && cleanTitle.includes('Poxipol')) {\r\n    cleanTitle = cleanTitle.replace(/\\s*Poxipol\\s*$/, '').trim();\r\n  }\r\n\r\n  return (\r\n    <CommercialProductCard\r\n      className=\"bg-white\" // Forzar fondo blanco\r\n      image={item.images?.previews?.[0] || item.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\r\n      title={cleanTitle}\r\n      brand={item.brand}\r\n      price={features.discount ? Math.round(item.price * (1 - features.discount / 100)) : features.currentPrice}\r\n      originalPrice={features.discount ? item.price : undefined}\r\n      discount={features.discount ? `${features.discount}%` : undefined}\r\n      isNew={features.isNew}\r\n      stock={features.stock}\r\n      productId={item.id}\r\n      cta=\"Agregar al carrito\"\r\n      onAddToCart={handleAddToCart}\r\n      showCartAnimation={true}\r\n      // Información de cuotas automática\r\n      installments={features.currentPrice >= 5000 ? {\r\n        quantity: 3,\r\n        amount: Math.round(features.currentPrice / 3),\r\n        interestFree: true\r\n      } : undefined}\r\n      // Envío gratis automático para productos >= $15000\r\n      freeShipping={features.freeShipping || features.currentPrice >= 15000}\r\n      shippingText={features.freeShipping ? \"Envío gratis\" : features.fastShipping ? \"Envío rápido\" : undefined}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SingleGridItem;\r\n"],"names":["SingleGridItem","item","openModal","useModalContext","dispatch","useDispatch","handleQuickViewUpdate","updateQuickView","handleAddToCart","addItemToCart","quantity","handleItemToWishList","addItemToWishlist","status","features","calculateProductFeatures","cleanTitle","name","title","includes","replace","trim","CommercialProductCard","className","image","images","previews","imgs","brand","price","discount","Math","round","currentPrice","originalPrice","undefined","isNew","stock","productId","id","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText","fastShipping"],"mappings":"AAAA;;;;;+BAiFA;;;eAAA;;;;8DAhFkB;uCAEc;gCACA;2BACF;+BACI;4BACN;uCAIU;gCACoB;;;;;;AAE1D,MAAMA,iBAAiB,CAAC,EAAEC,IAAI,EAA6B;IACzD,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,sCAAe;IAErC,MAAMC,WAAWC,IAAAA,uBAAW;IAE5B,6BAA6B;IAC7B,MAAMC,wBAAwB;QAC5BF,SAASG,IAAAA,+BAAe,EAAC;YAAE,GAAGN,IAAI;QAAC;IACrC;IAEA,cAAc;IACd,MAAMO,kBAAkB;QACtBJ,SACEK,IAAAA,wBAAa,EAAC;YACZ,GAAGR,IAAI;YACPS,UAAU;QACZ;IAEJ;IAEA,MAAMC,uBAAuB;QAC3BP,SACEQ,IAAAA,gCAAiB,EAAC;YAChB,GAAGX,IAAI;YACPY,QAAQ;YACRH,UAAU;QACZ;IAEJ;IAEA,4DAA4D;IAC5D,MAAMI,WAAWC,IAAAA,wCAAwB,EAACd;IAE1C,6DAA6D;IAC7D,IAAIe,aAAaf,KAAKgB,IAAI,IAAIhB,KAAKiB,KAAK;IACxC,IAAIF,cAAcA,WAAWG,QAAQ,CAAC,cAAcH,WAAWG,QAAQ,CAAC,YAAY;QAClFH,aAAaA,WAAWI,OAAO,CAAC,kBAAkB,IAAIC,IAAI;IAC5D;IAEA,qBACE,qBAACC,4CAAqB;QACpBC,WAAU,WAAW,sBAAsB;;QAC3CC,OAAOvB,KAAKwB,MAAM,EAAEC,UAAU,CAAC,EAAE,IAAIzB,KAAK0B,IAAI,EAAED,UAAU,CAAC,EAAE,IAAI;QACjER,OAAOF;QACPY,OAAO3B,KAAK2B,KAAK;QACjBC,OAAOf,SAASgB,QAAQ,GAAGC,KAAKC,KAAK,CAAC/B,KAAK4B,KAAK,GAAI,CAAA,IAAIf,SAASgB,QAAQ,GAAG,GAAE,KAAMhB,SAASmB,YAAY;QACzGC,eAAepB,SAASgB,QAAQ,GAAG7B,KAAK4B,KAAK,GAAGM;QAChDL,UAAUhB,SAASgB,QAAQ,GAAG,GAAGhB,SAASgB,QAAQ,CAAC,CAAC,CAAC,GAAGK;QACxDC,OAAOtB,SAASsB,KAAK;QACrBC,OAAOvB,SAASuB,KAAK;QACrBC,WAAWrC,KAAKsC,EAAE;QAClBC,KAAI;QACJC,aAAajC;QACbkC,mBAAmB;QACnB,mCAAmC;QACnCC,cAAc7B,SAASmB,YAAY,IAAI,OAAO;YAC5CvB,UAAU;YACVkC,QAAQb,KAAKC,KAAK,CAAClB,SAASmB,YAAY,GAAG;YAC3CY,cAAc;QAChB,IAAIV;QACJ,mDAAmD;QACnDW,cAAchC,SAASgC,YAAY,IAAIhC,SAASmB,YAAY,IAAI;QAChEc,cAAcjC,SAASgC,YAAY,GAAG,iBAAiBhC,SAASkC,YAAY,GAAG,iBAAiBb;;AAGtG;MAEA,WAAenC"}