8491df8edd0dfe5422f1dc0b6899490f
// ===================================
// PINTEYA E-COMMERCE - TEST HEADER COMPONENT
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _reactredux = require("react-redux");
const _toolkit = require("@reduxjs/toolkit");
const _Header = /*#__PURE__*/ _interop_require_default(require("../../components/Header"));
const _cartslice = /*#__PURE__*/ _interop_require_default(require("../../redux/features/cart-slice"));
const _wishlistslice = /*#__PURE__*/ _interop_require_default(require("../../redux/features/wishlist-slice"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock store setup - Estructura corregida para coincidir con store real
const createMockStore = (initialState = {})=>{
    return (0, _toolkit.configureStore)({
        reducer: {
            cartReducer: _cartslice.default,
            wishlistReducer: _wishlistslice.default
        },
        preloadedState: {
            cartReducer: {
                items: [],
                ...initialState.cartReducer
            },
            wishlistReducer: {
                items: [],
                ...initialState.wishlistReducer
            }
        }
    });
};
// Clerk components are mocked globally in jest.setup.js
// Helper function to render with Redux store
const renderWithStore = (component, initialState = {})=>{
    const store = createMockStore(initialState);
    return {
        ...(0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactredux.Provider, {
            store: store,
            children: component
        })),
        store
    };
};
describe('Header Component', ()=>{
    beforeEach(()=>{
        // Reset mocks before each test
        jest.clearAllMocks();
    });
    it('renders header with logo', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Check if logo images are present (mobile and desktop)
        const logos = _react.screen.getAllByAltText('Pinteya Logo');
        expect(logos).toHaveLength(2) // Mobile and desktop logos
        ;
        expect(logos[0]).toBeInTheDocument();
    });
    it('displays cart icon with item count', ()=>{
        const initialState = {
            cartReducer: {
                items: [
                    {
                        id: 1,
                        title: 'Test Product',
                        price: 100,
                        discountedPrice: 100,
                        quantity: 2
                    },
                    {
                        id: 2,
                        title: 'Test Product 2',
                        price: 200,
                        discountedPrice: 200,
                        quantity: 1
                    }
                ]
            }
        };
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}), initialState);
        // Check if cart count is displayed (number of different items, not total quantity)
        const cartCount = _react.screen.getByText('2') // 2 different items
        ;
        expect(cartCount).toBeInTheDocument();
    });
    it('displays wishlist link', ()=>{
        const initialState = {
            wishlistReducer: {
                items: [
                    {
                        id: 1,
                        name: 'Wishlist Product 1'
                    },
                    {
                        id: 2,
                        name: 'Wishlist Product 2'
                    }
                ]
            }
        };
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}), initialState);
        // Check if wishlist links are present (there might be multiple)
        const wishlistLinks = _react.screen.getAllByText('Wishlist');
        expect(wishlistLinks.length).toBeGreaterThan(0);
        expect(wishlistLinks[0].closest('a')).toHaveAttribute('href', '/wishlist');
    });
    it('shows navigation menu items', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Check for main navigation items based on menuData
        expect(_react.screen.getByText('Popular')).toBeInTheDocument();
        expect(_react.screen.getByText('Tienda')).toBeInTheDocument();
        // Contact appears multiple times, so use getAllByText
        const contactLinks = _react.screen.getAllByText('Contact');
        expect(contactLinks.length).toBeGreaterThan(0);
    });
    it('opens mobile menu when hamburger is clicked', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Just verify the component renders without errors
        // Mobile menu functionality would need specific implementation details
        const logos = _react.screen.getAllByAltText('Pinteya Logo');
        expect(logos[0]).toBeInTheDocument();
    });
    it('shows mobile-specific elements correctly', ()=>{
        // Mock window.innerWidth for mobile view
        Object.defineProperty(window, 'innerWidth', {
            writable: true,
            configurable: true,
            value: 375
        });
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Verify mobile search fields exist (mobile and desktop versions)
        const searchInputs = _react.screen.getAllByPlaceholderText('Busco productos de pinturería...');
        expect(searchInputs.length).toBeGreaterThanOrEqual(1);
        // Verify location text is present
        const locationText = _react.screen.getByText(/Envíos a/);
        expect(locationText).toBeInTheDocument();
    });
    it('displays correct logo for mobile and desktop', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Both logos should be present but with different visibility classes
        const logos = _react.screen.getAllByAltText('Pinteya Logo');
        expect(logos).toHaveLength(2) // One for mobile, one for desktop
        ;
    });
    it('renders authentication section when signed out', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Check if signed out state is rendered
        expect(_react.screen.getByTestId('signed-out')).toBeInTheDocument();
        expect(_react.screen.getByText('Iniciar Sesión')).toBeInTheDocument();
        expect(_react.screen.getByText('Registrarse')).toBeInTheDocument();
    });
    it('renders user button when signed in', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // First verify we're in signed out state
        expect(_react.screen.getByTestId('signed-out')).toBeInTheDocument();
        // Click the "Iniciar Sesión" button to simulate sign in
        const signInButton = _react.screen.getByText('Iniciar Sesión');
        _react.fireEvent.click(signInButton);
        // Note: Since this is a Link component, we can't actually change the auth state
        // in this test. The actual sign-in flow would happen on a different page.
        // For now, we'll just verify the button exists and is clickable
        expect(signInButton).toBeInTheDocument();
    });
    it('handles search functionality', ()=>{
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Check if search inputs are present (mobile and desktop)
        const searchInputs = _react.screen.getAllByPlaceholderText('Busco productos de pinturería...');
        expect(searchInputs.length).toBeGreaterThanOrEqual(1);
        expect(searchInputs[0]).toBeInTheDocument();
        // Check if search button is present
        const searchButtons = _react.screen.getAllByLabelText('Search');
        expect(searchButtons.length).toBeGreaterThanOrEqual(1);
        expect(searchButtons[0]).toBeInTheDocument();
    });
    it('displays correct cart total', ()=>{
        const initialState = {
            cartReducer: {
                items: [
                    {
                        id: 1,
                        title: 'Product 1',
                        price: 1500,
                        discountedPrice: 1500,
                        quantity: 2
                    },
                    {
                        id: 2,
                        title: 'Product 2',
                        price: 2500,
                        discountedPrice: 2500,
                        quantity: 1
                    }
                ]
            }
        };
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}), initialState);
        // Check if total is displayed (1500*2 + 2500*1 = 5500)
        expect(_react.screen.getByText('$5500')).toBeInTheDocument();
    });
    it('is responsive and shows mobile layout on small screens', ()=>{
        // Mock window.innerWidth for mobile
        Object.defineProperty(window, 'innerWidth', {
            writable: true,
            configurable: true,
            value: 375
        });
        renderWithStore(/*#__PURE__*/ (0, _jsxruntime.jsx)(_Header.default, {}));
        // Just verify the component renders without errors
        const logos = _react.screen.getAllByAltText('Pinteya Logo');
        expect(logos[0]).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxjb21wb25lbnRzXFxIZWFkZXIudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gVEVTVCBIRUFERVIgQ09NUE9ORU5UXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcclxuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1yZWR1eCdcclxuaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xyXG5pbXBvcnQgSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9IZWFkZXInXHJcbmltcG9ydCBjYXJ0UmVkdWNlciBmcm9tICdAL3JlZHV4L2ZlYXR1cmVzL2NhcnQtc2xpY2UnXHJcbmltcG9ydCB3aXNobGlzdFJlZHVjZXIgZnJvbSAnQC9yZWR1eC9mZWF0dXJlcy93aXNobGlzdC1zbGljZSdcclxuXHJcbi8vIE1vY2sgc3RvcmUgc2V0dXAgLSBFc3RydWN0dXJhIGNvcnJlZ2lkYSBwYXJhIGNvaW5jaWRpciBjb24gc3RvcmUgcmVhbFxyXG5jb25zdCBjcmVhdGVNb2NrU3RvcmUgPSAoaW5pdGlhbFN0YXRlID0ge30pID0+IHtcclxuICByZXR1cm4gY29uZmlndXJlU3RvcmUoe1xyXG4gICAgcmVkdWNlcjoge1xyXG4gICAgICBjYXJ0UmVkdWNlcjogY2FydFJlZHVjZXIsXHJcbiAgICAgIHdpc2hsaXN0UmVkdWNlcjogd2lzaGxpc3RSZWR1Y2VyLFxyXG4gICAgfSxcclxuICAgIHByZWxvYWRlZFN0YXRlOiB7XHJcbiAgICAgIGNhcnRSZWR1Y2VyOiB7XHJcbiAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIC4uLmluaXRpYWxTdGF0ZS5jYXJ0UmVkdWNlcixcclxuICAgICAgfSxcclxuICAgICAgd2lzaGxpc3RSZWR1Y2VyOiB7XHJcbiAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIC4uLmluaXRpYWxTdGF0ZS53aXNobGlzdFJlZHVjZXIsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0pXHJcbn1cclxuXHJcbi8vIENsZXJrIGNvbXBvbmVudHMgYXJlIG1vY2tlZCBnbG9iYWxseSBpbiBqZXN0LnNldHVwLmpzXHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gcmVuZGVyIHdpdGggUmVkdXggc3RvcmVcclxuY29uc3QgcmVuZGVyV2l0aFN0b3JlID0gKGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50LCBpbml0aWFsU3RhdGUgPSB7fSkgPT4ge1xyXG4gIGNvbnN0IHN0b3JlID0gY3JlYXRlTW9ja1N0b3JlKGluaXRpYWxTdGF0ZSlcclxuICByZXR1cm4ge1xyXG4gICAgLi4ucmVuZGVyKFxyXG4gICAgICA8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cclxuICAgICAgICB7Y29tcG9uZW50fVxyXG4gICAgICA8L1Byb3ZpZGVyPlxyXG4gICAgKSxcclxuICAgIHN0b3JlLFxyXG4gIH1cclxufVxyXG5cclxuZGVzY3JpYmUoJ0hlYWRlciBDb21wb25lbnQnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAvLyBSZXNldCBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdyZW5kZXJzIGhlYWRlciB3aXRoIGxvZ28nLCAoKSA9PiB7XHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPilcclxuXHJcbiAgICAvLyBDaGVjayBpZiBsb2dvIGltYWdlcyBhcmUgcHJlc2VudCAobW9iaWxlIGFuZCBkZXNrdG9wKVxyXG4gICAgY29uc3QgbG9nb3MgPSBzY3JlZW4uZ2V0QWxsQnlBbHRUZXh0KCdQaW50ZXlhIExvZ28nKVxyXG4gICAgZXhwZWN0KGxvZ29zKS50b0hhdmVMZW5ndGgoMikgLy8gTW9iaWxlIGFuZCBkZXNrdG9wIGxvZ29zXHJcbiAgICBleHBlY3QobG9nb3NbMF0pLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnZGlzcGxheXMgY2FydCBpY29uIHdpdGggaXRlbSBjb3VudCcsICgpID0+IHtcclxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcclxuICAgICAgY2FydFJlZHVjZXI6IHtcclxuICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgeyBpZDogMSwgdGl0bGU6ICdUZXN0IFByb2R1Y3QnLCBwcmljZTogMTAwLCBkaXNjb3VudGVkUHJpY2U6IDEwMCwgcXVhbnRpdHk6IDIgfSxcclxuICAgICAgICAgIHsgaWQ6IDIsIHRpdGxlOiAnVGVzdCBQcm9kdWN0IDInLCBwcmljZTogMjAwLCBkaXNjb3VudGVkUHJpY2U6IDIwMCwgcXVhbnRpdHk6IDEgfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcldpdGhTdG9yZSg8SGVhZGVyIC8+LCBpbml0aWFsU3RhdGUpXHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgY2FydCBjb3VudCBpcyBkaXNwbGF5ZWQgKG51bWJlciBvZiBkaWZmZXJlbnQgaXRlbXMsIG5vdCB0b3RhbCBxdWFudGl0eSlcclxuICAgIGNvbnN0IGNhcnRDb3VudCA9IHNjcmVlbi5nZXRCeVRleHQoJzInKSAvLyAyIGRpZmZlcmVudCBpdGVtc1xyXG4gICAgZXhwZWN0KGNhcnRDb3VudCkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdkaXNwbGF5cyB3aXNobGlzdCBsaW5rJywgKCkgPT4ge1xyXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0ge1xyXG4gICAgICB3aXNobGlzdFJlZHVjZXI6IHtcclxuICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgeyBpZDogMSwgbmFtZTogJ1dpc2hsaXN0IFByb2R1Y3QgMScgfSxcclxuICAgICAgICAgIHsgaWQ6IDIsIG5hbWU6ICdXaXNobGlzdCBQcm9kdWN0IDInIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgfSxcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPiwgaW5pdGlhbFN0YXRlKVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHdpc2hsaXN0IGxpbmtzIGFyZSBwcmVzZW50ICh0aGVyZSBtaWdodCBiZSBtdWx0aXBsZSlcclxuICAgIGNvbnN0IHdpc2hsaXN0TGlua3MgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdXaXNobGlzdCcpXHJcbiAgICBleHBlY3Qod2lzaGxpc3RMaW5rcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgZXhwZWN0KHdpc2hsaXN0TGlua3NbMF0uY2xvc2VzdCgnYScpKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnL3dpc2hsaXN0JylcclxuICB9KVxyXG5cclxuICBpdCgnc2hvd3MgbmF2aWdhdGlvbiBtZW51IGl0ZW1zJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyV2l0aFN0b3JlKDxIZWFkZXIgLz4pXHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIG1haW4gbmF2aWdhdGlvbiBpdGVtcyBiYXNlZCBvbiBtZW51RGF0YVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BvcHVsYXInKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RpZW5kYScpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcblxyXG4gICAgLy8gQ29udGFjdCBhcHBlYXJzIG11bHRpcGxlIHRpbWVzLCBzbyB1c2UgZ2V0QWxsQnlUZXh0XHJcbiAgICBjb25zdCBjb250YWN0TGlua3MgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb250YWN0JylcclxuICAgIGV4cGVjdChjb250YWN0TGlua3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcclxuICB9KVxyXG5cclxuICBpdCgnb3BlbnMgbW9iaWxlIG1lbnUgd2hlbiBoYW1idXJnZXIgaXMgY2xpY2tlZCcsICgpID0+IHtcclxuICAgIHJlbmRlcldpdGhTdG9yZSg8SGVhZGVyIC8+KVxyXG5cclxuICAgIC8vIEp1c3QgdmVyaWZ5IHRoZSBjb21wb25lbnQgcmVuZGVycyB3aXRob3V0IGVycm9yc1xyXG4gICAgLy8gTW9iaWxlIG1lbnUgZnVuY3Rpb25hbGl0eSB3b3VsZCBuZWVkIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGRldGFpbHNcclxuICAgIGNvbnN0IGxvZ29zID0gc2NyZWVuLmdldEFsbEJ5QWx0VGV4dCgnUGludGV5YSBMb2dvJylcclxuICAgIGV4cGVjdChsb2dvc1swXSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdzaG93cyBtb2JpbGUtc3BlY2lmaWMgZWxlbWVudHMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgLy8gTW9jayB3aW5kb3cuaW5uZXJXaWR0aCBmb3IgbW9iaWxlIHZpZXdcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywge1xyXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICB2YWx1ZTogMzc1LFxyXG4gICAgfSlcclxuXHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPilcclxuXHJcbiAgICAvLyBWZXJpZnkgbW9iaWxlIHNlYXJjaCBmaWVsZHMgZXhpc3QgKG1vYmlsZSBhbmQgZGVza3RvcCB2ZXJzaW9ucylcclxuICAgIGNvbnN0IHNlYXJjaElucHV0cyA9IHNjcmVlbi5nZXRBbGxCeVBsYWNlaG9sZGVyVGV4dCgnQnVzY28gcHJvZHVjdG9zIGRlIHBpbnR1cmVyw61hLi4uJylcclxuICAgIGV4cGVjdChzZWFyY2hJbnB1dHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpXHJcblxyXG4gICAgLy8gVmVyaWZ5IGxvY2F0aW9uIHRleHQgaXMgcHJlc2VudFxyXG4gICAgY29uc3QgbG9jYXRpb25UZXh0ID0gc2NyZWVuLmdldEJ5VGV4dCgvRW52w61vcyBhLylcclxuICAgIGV4cGVjdChsb2NhdGlvblRleHQpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnZGlzcGxheXMgY29ycmVjdCBsb2dvIGZvciBtb2JpbGUgYW5kIGRlc2t0b3AnLCAoKSA9PiB7XHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPilcclxuXHJcbiAgICAvLyBCb3RoIGxvZ29zIHNob3VsZCBiZSBwcmVzZW50IGJ1dCB3aXRoIGRpZmZlcmVudCB2aXNpYmlsaXR5IGNsYXNzZXNcclxuICAgIGNvbnN0IGxvZ29zID0gc2NyZWVuLmdldEFsbEJ5QWx0VGV4dCgnUGludGV5YSBMb2dvJylcclxuICAgIGV4cGVjdChsb2dvcykudG9IYXZlTGVuZ3RoKDIpIC8vIE9uZSBmb3IgbW9iaWxlLCBvbmUgZm9yIGRlc2t0b3BcclxuICB9KVxyXG5cclxuICBpdCgncmVuZGVycyBhdXRoZW50aWNhdGlvbiBzZWN0aW9uIHdoZW4gc2lnbmVkIG91dCcsICgpID0+IHtcclxuICAgIHJlbmRlcldpdGhTdG9yZSg8SGVhZGVyIC8+KVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBzaWduZWQgb3V0IHN0YXRlIGlzIHJlbmRlcmVkXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzaWduZWQtb3V0JykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmljaWFyIFNlc2nDs24nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JlZ2lzdHJhcnNlJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgncmVuZGVycyB1c2VyIGJ1dHRvbiB3aGVuIHNpZ25lZCBpbicsICgpID0+IHtcclxuICAgIHJlbmRlcldpdGhTdG9yZSg8SGVhZGVyIC8+KVxyXG5cclxuICAgIC8vIEZpcnN0IHZlcmlmeSB3ZSdyZSBpbiBzaWduZWQgb3V0IHN0YXRlXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzaWduZWQtb3V0JykpLnRvQmVJblRoZURvY3VtZW50KClcclxuXHJcbiAgICAvLyBDbGljayB0aGUgXCJJbmljaWFyIFNlc2nDs25cIiBidXR0b24gdG8gc2ltdWxhdGUgc2lnbiBpblxyXG4gICAgY29uc3Qgc2lnbkluQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnSW5pY2lhciBTZXNpw7NuJylcclxuICAgIGZpcmVFdmVudC5jbGljayhzaWduSW5CdXR0b24pXHJcblxyXG4gICAgLy8gTm90ZTogU2luY2UgdGhpcyBpcyBhIExpbmsgY29tcG9uZW50LCB3ZSBjYW4ndCBhY3R1YWxseSBjaGFuZ2UgdGhlIGF1dGggc3RhdGVcclxuICAgIC8vIGluIHRoaXMgdGVzdC4gVGhlIGFjdHVhbCBzaWduLWluIGZsb3cgd291bGQgaGFwcGVuIG9uIGEgZGlmZmVyZW50IHBhZ2UuXHJcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHZlcmlmeSB0aGUgYnV0dG9uIGV4aXN0cyBhbmQgaXMgY2xpY2thYmxlXHJcbiAgICBleHBlY3Qoc2lnbkluQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2hhbmRsZXMgc2VhcmNoIGZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPilcclxuXHJcbiAgICAvLyBDaGVjayBpZiBzZWFyY2ggaW5wdXRzIGFyZSBwcmVzZW50IChtb2JpbGUgYW5kIGRlc2t0b3ApXHJcbiAgICBjb25zdCBzZWFyY2hJbnB1dHMgPSBzY3JlZW4uZ2V0QWxsQnlQbGFjZWhvbGRlclRleHQoJ0J1c2NvIHByb2R1Y3RvcyBkZSBwaW50dXJlcsOtYS4uLicpXHJcbiAgICBleHBlY3Qoc2VhcmNoSW5wdXRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKVxyXG4gICAgZXhwZWN0KHNlYXJjaElucHV0c1swXSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHNlYXJjaCBidXR0b24gaXMgcHJlc2VudFxyXG4gICAgY29uc3Qgc2VhcmNoQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgnU2VhcmNoJylcclxuICAgIGV4cGVjdChzZWFyY2hCdXR0b25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKVxyXG4gICAgZXhwZWN0KHNlYXJjaEJ1dHRvbnNbMF0pLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnZGlzcGxheXMgY29ycmVjdCBjYXJ0IHRvdGFsJywgKCkgPT4ge1xyXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0ge1xyXG4gICAgICBjYXJ0UmVkdWNlcjoge1xyXG4gICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICB7IGlkOiAxLCB0aXRsZTogJ1Byb2R1Y3QgMScsIHByaWNlOiAxNTAwLCBkaXNjb3VudGVkUHJpY2U6IDE1MDAsIHF1YW50aXR5OiAyIH0sXHJcbiAgICAgICAgICB7IGlkOiAyLCB0aXRsZTogJ1Byb2R1Y3QgMicsIHByaWNlOiAyNTAwLCBkaXNjb3VudGVkUHJpY2U6IDI1MDAsIHF1YW50aXR5OiAxIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgfSxcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJXaXRoU3RvcmUoPEhlYWRlciAvPiwgaW5pdGlhbFN0YXRlKVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRvdGFsIGlzIGRpc3BsYXllZCAoMTUwMCoyICsgMjUwMCoxID0gNTUwMClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCckNTUwMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2lzIHJlc3BvbnNpdmUgYW5kIHNob3dzIG1vYmlsZSBsYXlvdXQgb24gc21hbGwgc2NyZWVucycsICgpID0+IHtcclxuICAgIC8vIE1vY2sgd2luZG93LmlubmVyV2lkdGggZm9yIG1vYmlsZVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2lubmVyV2lkdGgnLCB7XHJcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIHZhbHVlOiAzNzUsXHJcbiAgICB9KVxyXG5cclxuICAgIHJlbmRlcldpdGhTdG9yZSg8SGVhZGVyIC8+KVxyXG5cclxuICAgIC8vIEp1c3QgdmVyaWZ5IHRoZSBjb21wb25lbnQgcmVuZGVycyB3aXRob3V0IGVycm9yc1xyXG4gICAgY29uc3QgbG9nb3MgPSBzY3JlZW4uZ2V0QWxsQnlBbHRUZXh0KCdQaW50ZXlhIExvZ28nKVxyXG4gICAgZXhwZWN0KGxvZ29zWzBdKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxufSlcclxuIl0sIm5hbWVzIjpbImNyZWF0ZU1vY2tTdG9yZSIsImluaXRpYWxTdGF0ZSIsImNvbmZpZ3VyZVN0b3JlIiwicmVkdWNlciIsImNhcnRSZWR1Y2VyIiwid2lzaGxpc3RSZWR1Y2VyIiwicHJlbG9hZGVkU3RhdGUiLCJpdGVtcyIsInJlbmRlcldpdGhTdG9yZSIsImNvbXBvbmVudCIsInN0b3JlIiwicmVuZGVyIiwiUHJvdmlkZXIiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJqZXN0IiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiSGVhZGVyIiwibG9nb3MiLCJzY3JlZW4iLCJnZXRBbGxCeUFsdFRleHQiLCJleHBlY3QiLCJ0b0hhdmVMZW5ndGgiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImlkIiwidGl0bGUiLCJwcmljZSIsImRpc2NvdW50ZWRQcmljZSIsInF1YW50aXR5IiwiY2FydENvdW50IiwiZ2V0QnlUZXh0IiwibmFtZSIsIndpc2hsaXN0TGlua3MiLCJnZXRBbGxCeVRleHQiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJjbG9zZXN0IiwidG9IYXZlQXR0cmlidXRlIiwiY29udGFjdExpbmtzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInZhbHVlIiwic2VhcmNoSW5wdXRzIiwiZ2V0QWxsQnlQbGFjZWhvbGRlclRleHQiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwibG9jYXRpb25UZXh0IiwiZ2V0QnlUZXN0SWQiLCJzaWduSW5CdXR0b24iLCJmaXJlRXZlbnQiLCJjbGljayIsInNlYXJjaEJ1dHRvbnMiLCJnZXRBbGxCeUxhYmVsVGV4dCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDZDQUE2QztBQUM3QyxzQ0FBc0M7Ozs7Ozt1QkFFSTs0QkFDakI7eUJBQ007K0RBQ1o7a0VBQ0s7c0VBQ0k7Ozs7OztBQUU1Qix3RUFBd0U7QUFDeEUsTUFBTUEsa0JBQWtCLENBQUNDLGVBQWUsQ0FBQyxDQUFDO0lBQ3hDLE9BQU9DLElBQUFBLHVCQUFjLEVBQUM7UUFDcEJDLFNBQVM7WUFDUEMsYUFBYUEsa0JBQVc7WUFDeEJDLGlCQUFpQkEsc0JBQWU7UUFDbEM7UUFDQUMsZ0JBQWdCO1lBQ2RGLGFBQWE7Z0JBQ1hHLE9BQU8sRUFBRTtnQkFDVCxHQUFHTixhQUFhRyxXQUFXO1lBQzdCO1lBQ0FDLGlCQUFpQjtnQkFDZkUsT0FBTyxFQUFFO2dCQUNULEdBQUdOLGFBQWFJLGVBQWU7WUFDakM7UUFDRjtJQUNGO0FBQ0Y7QUFFQSx3REFBd0Q7QUFFeEQsNkNBQTZDO0FBQzdDLE1BQU1HLGtCQUFrQixDQUFDQyxXQUErQlIsZUFBZSxDQUFDLENBQUM7SUFDdkUsTUFBTVMsUUFBUVYsZ0JBQWdCQztJQUM5QixPQUFPO1FBQ0wsR0FBR1UsSUFBQUEsYUFBTSxnQkFDUCxx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