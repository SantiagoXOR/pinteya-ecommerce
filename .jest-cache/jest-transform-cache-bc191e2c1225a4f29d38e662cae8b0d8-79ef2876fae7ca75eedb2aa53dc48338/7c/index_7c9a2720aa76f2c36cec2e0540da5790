e49e4db259e5a3761562d2412b989a29
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _navigation = require("next/navigation");
const _Breadcrumb = /*#__PURE__*/ _interop_require_default(require("../Common/Breadcrumb"));
const _Shipping = /*#__PURE__*/ _interop_require_default(require("./Shipping"));
const _ShippingMethod = /*#__PURE__*/ _interop_require_default(require("./ShippingMethod"));
const _PaymentMethod = /*#__PURE__*/ _interop_require_default(require("./PaymentMethod"));
const _Billing = /*#__PURE__*/ _interop_require_default(require("./Billing"));
const _OrderSummary = /*#__PURE__*/ _interop_require_default(require("./OrderSummary"));
const _Coupon = /*#__PURE__*/ _interop_require_default(require("./Coupon"));
const _UserInfo = /*#__PURE__*/ _interop_require_default(require("./UserInfo"));
const _useCheckout = require("../../hooks/useCheckout");
const _card = require("../ui/card");
const _form = require("../ui/form");
const _lucidereact = require("lucide-react");
const _MercadoPagoWallet = /*#__PURE__*/ _interop_require_wildcard(require("./MercadoPagoWallet"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const Checkout = ()=>{
    const router = (0, _navigation.useRouter)();
    const { formData, isLoading, errors, step, cartItems, totalPrice, shippingCost, discount, finalTotal, appliedCoupon, applyCoupon, updateBillingData, updateShippingData, updateFormData, processCheckout, // ✅ NUEVO: Propiedades para Wallet Brick
    preferenceId, initPoint, handleWalletReady, handleWalletError, handleWalletSubmit } = (0, _useCheckout.useCheckout)();
    // Redirigir si el carrito está vacío
    _react.default.useEffect(()=>{
        if (cartItems.length === 0 && step === 'form') {
            router.push('/cart');
        }
    }, [
        cartItems.length,
        step,
        router
    ]);
    const handleSubmit = async (e)=>{
        e.preventDefault();
        await processCheckout();
    };
    const handlePaymentMethodChange = (method)=>{
        updateFormData({
            paymentMethod: method
        });
    };
    const handleShippingMethodChange = (method)=>{
        updateFormData({
            shippingMethod: method
        });
    };
    if (step === 'processing') {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_Breadcrumb.default, {
                    title: "Checkout",
                    pages: [
                        "checkout"
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("section", {
                    className: "overflow-hidden py-20 bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.Card, {
                            className: "max-w-md mx-auto",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardContent, {
                                className: "p-12 text-center",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex flex-col items-center gap-4",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Loader2, {
                                                className: "w-8 h-8 text-primary animate-spin"
                                            })
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                                    className: "text-xl font-semibold text-gray-900 mb-2",
                                                    children: "Procesando tu pedido..."
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-gray-600 text-sm",
                                                    children: "Por favor espera mientras preparamos tu pago."
                                                })
                                            ]
                                        })
                                    ]
                                })
                            })
                        })
                    })
                })
            ]
        });
    }
    // ✅ NUEVO: Paso de pago con Wallet Brick
    if (step === 'payment') {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_Breadcrumb.default, {
                    title: "Checkout - Pago",
                    pages: [
                        "checkout",
                        "pago"
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("section", {
                    className: "overflow-hidden py-20 bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "max-w-2xl mx-auto",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "mb-8 text-center",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                            className: "text-2xl font-bold text-gray-900 mb-2",
                                            children: "Finalizar Pago"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-gray-600",
                                            children: "Completa tu compra de forma segura con MercadoPago"
                                        })
                                    ]
                                }),
                                preferenceId ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_MercadoPagoWallet.default, {
                                    preferenceId: preferenceId,
                                    onReady: handleWalletReady,
                                    onError: handleWalletError,
                                    onSubmit: handleWalletSubmit
                                }) : // Fallback si no hay preferenceId
                                initPoint && /*#__PURE__*/ (0, _jsxruntime.jsx)(_MercadoPagoWallet.MercadoPagoWalletFallback, {
                                    initPoint: initPoint
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "mt-8",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.Card, {
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardContent, {
                                            className: "p-6",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                                    className: "font-semibold text-gray-900 mb-4",
                                                    children: "Resumen del Pedido"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "space-y-2 text-sm",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                            className: "flex justify-between",
                                                            children: [
                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                    children: "Subtotal:"
                                                                }),
                                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                                    children: [
                                                                        "$",
                                                                        totalPrice.toFixed(2)
                                                                    ]
                                                                })
                                                            ]
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                            className: "flex justify-between",
                                                            children: [
                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                    children: "Env\xedo:"
                                                                }),
                                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                                    children: [
                                                                        "$",
                                                                        shippingCost.toFixed(2)
                                                                    ]
                                                                })
                                                            ]
                                                        }),
                                                        discount > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                            className: "flex justify-between text-green-600",
                                                            children: [
                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                    children: "Descuento:"
                                                                }),
                                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                                    children: [
                                                                        "-$",
                                                                        discount.toFixed(2)
                                                                    ]
                                                                })
                                                            ]
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                            className: "border-t pt-2 flex justify-between font-semibold",
                                                            children: [
                                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                    children: "Total:"
                                                                }),
                                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                                    children: [
                                                                        "$",
                                                                        finalTotal.toFixed(2)
                                                                    ]
                                                                })
                                                            ]
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    })
                                })
                            ]
                        })
                    })
                })
            ]
        });
    }
    if (step === 'redirect') {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_Breadcrumb.default, {
                    title: "Checkout",
                    pages: [
                        "checkout"
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("section", {
                    className: "overflow-hidden py-20 bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.Card, {
                            className: "max-w-md mx-auto",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardContent, {
                                className: "p-12 text-center",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex flex-col items-center gap-4",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.CreditCard, {
                                                className: "w-8 h-8 text-blue-600"
                                            })
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                                    className: "text-xl font-semibold text-gray-900 mb-2",
                                                    children: "Procesando Pago..."
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-gray-600 text-sm",
                                                    children: "Tu pago est\xe1 siendo procesado. Ser\xe1s redirigido autom\xe1ticamente."
                                                })
                                            ]
                                        })
                                    ]
                                })
                            })
                        })
                    })
                })
            ]
        });
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Breadcrumb.default, {
                title: "Checkout",
                pages: [
                    "checkout"
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("section", {
                className: "overflow-hidden py-20 bg-gray-2",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("form", {
                        onSubmit: handleSubmit,
                        role: "form",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex flex-col lg:flex-row gap-7.5 xl:gap-11",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "lg:max-w-[670px] w-full",
                                    children: [
                                        errors.general && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "mb-6",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_form.FormMessage, {
                                                variant: "error",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center gap-2",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.AlertTriangle, {
                                                            className: "w-4 h-4"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            children: errors.general
                                                        })
                                                    ]
                                                })
                                            })
                                        }),
                                        errors.cart && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-yellow-800",
                                                children: errors.cart
                                            })
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Billing.default, {
                                            billingData: formData.billing,
                                            errors: errors,
                                            onBillingChange: updateBillingData
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Shipping.default, {
                                            shippingData: formData.shipping,
                                            billingData: formData.billing,
                                            errors: errors,
                                            onShippingChange: updateShippingData
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_ShippingMethod.default, {
                                            selectedMethod: formData.shippingMethod,
                                            totalPrice: totalPrice,
                                            onMethodChange: handleShippingMethodChange
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_PaymentMethod.default, {
                                            selectedMethod: formData.paymentMethod,
                                            onMethodChange: handlePaymentMethodChange
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "max-w-[455px] w-full",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_UserInfo.default, {
                                            className: "mb-6"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_OrderSummary.default, {
                                            cartItems: cartItems,
                                            totalPrice: totalPrice,
                                            shippingCost: shippingCost,
                                            discount: discount,
                                            finalTotal: finalTotal,
                                            shippingMethod: formData.shippingMethod,
                                            appliedCoupon: appliedCoupon
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Coupon.default, {
                                            onCouponApply: applyCoupon,
                                            appliedCoupon: appliedCoupon,
                                            isLoading: isLoading
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            type: "submit",
                                            disabled: isLoading || cartItems.length === 0,
                                            className: `w-full flex justify-center font-medium text-white py-3 px-6 rounded-md ease-out duration-200 mt-7.5 ${isLoading || cartItems.length === 0 ? 'bg-gray-400 cursor-not-allowed' : 'bg-tahiti-gold-500 hover:bg-tahiti-gold-700'}`,
                                            children: isLoading ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                className: "flex items-center gap-2",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                        className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white"
                                                    }),
                                                    "Procesando..."
                                                ]
                                            }) : 'Procesar Pedido'
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                                className: "text-xs text-gray-600",
                                                children: [
                                                    'Al hacer clic en "Procesar Pedido", aceptas nuestros',
                                                    ' ',
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                        href: "/terms",
                                                        className: "text-blue hover:underline",
                                                        children: "t\xe9rminos y condiciones"
                                                    }),
                                                    ' ',
                                                    "y",
                                                    ' ',
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                        href: "/privacy",
                                                        className: "text-blue hover:underline",
                                                        children: "pol\xedtica de privacidad"
                                                    }),
                                                    "."
                                                ]
                                            })
                                        })
                                    ]
                                })
                            ]
                        })
                    })
                })
            })
        ]
    });
};
const _default = Checkout;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcQ2hlY2tvdXRcXGluZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XHJcbmltcG9ydCBCcmVhZGNydW1iIGZyb20gXCIuLi9Db21tb24vQnJlYWRjcnVtYlwiO1xyXG5pbXBvcnQgU2hpcHBpbmcgZnJvbSBcIi4vU2hpcHBpbmdcIjtcclxuaW1wb3J0IFNoaXBwaW5nTWV0aG9kIGZyb20gXCIuL1NoaXBwaW5nTWV0aG9kXCI7XHJcbmltcG9ydCBQYXltZW50TWV0aG9kIGZyb20gXCIuL1BheW1lbnRNZXRob2RcIjtcclxuaW1wb3J0IEJpbGxpbmcgZnJvbSBcIi4vQmlsbGluZ1wiO1xyXG5pbXBvcnQgT3JkZXJTdW1tYXJ5IGZyb20gXCIuL09yZGVyU3VtbWFyeVwiO1xyXG5pbXBvcnQgQ291cG9uIGZyb20gXCIuL0NvdXBvblwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vVXNlckluZm9cIjtcclxuaW1wb3J0IHsgdXNlQ2hlY2tvdXQgfSBmcm9tIFwiQC9ob29rcy91c2VDaGVja291dFwiO1xyXG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvY2FyZFwiO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBGb3JtTWVzc2FnZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvZm9ybVwiO1xyXG5pbXBvcnQgeyBMb2FkZXIyLCBDcmVkaXRDYXJkLCBBbGVydFRyaWFuZ2xlIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xyXG5pbXBvcnQgTWVyY2Fkb1BhZ29XYWxsZXQsIHsgTWVyY2Fkb1BhZ29XYWxsZXRGYWxsYmFjayB9IGZyb20gXCIuL01lcmNhZG9QYWdvV2FsbGV0XCI7XHJcblxyXG5jb25zdCBDaGVja291dCA9ICgpID0+IHtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCB7XHJcbiAgICBmb3JtRGF0YSxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9ycyxcclxuICAgIHN0ZXAsXHJcbiAgICBjYXJ0SXRlbXMsXHJcbiAgICB0b3RhbFByaWNlLFxyXG4gICAgc2hpcHBpbmdDb3N0LFxyXG4gICAgZGlzY291bnQsXHJcbiAgICBmaW5hbFRvdGFsLFxyXG4gICAgYXBwbGllZENvdXBvbixcclxuICAgIGFwcGx5Q291cG9uLFxyXG4gICAgdXBkYXRlQmlsbGluZ0RhdGEsXHJcbiAgICB1cGRhdGVTaGlwcGluZ0RhdGEsXHJcbiAgICB1cGRhdGVGb3JtRGF0YSxcclxuICAgIHByb2Nlc3NDaGVja291dCxcclxuICAgIC8vIOKchSBOVUVWTzogUHJvcGllZGFkZXMgcGFyYSBXYWxsZXQgQnJpY2tcclxuICAgIHByZWZlcmVuY2VJZCxcclxuICAgIGluaXRQb2ludCxcclxuICAgIGhhbmRsZVdhbGxldFJlYWR5LFxyXG4gICAgaGFuZGxlV2FsbGV0RXJyb3IsXHJcbiAgICBoYW5kbGVXYWxsZXRTdWJtaXQsXHJcbiAgfSA9IHVzZUNoZWNrb3V0KCk7XHJcblxyXG4gIC8vIFJlZGlyaWdpciBzaSBlbCBjYXJyaXRvIGVzdMOhIHZhY8Otb1xyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoY2FydEl0ZW1zLmxlbmd0aCA9PT0gMCAmJiBzdGVwID09PSAnZm9ybScpIHtcclxuICAgICAgcm91dGVyLnB1c2goJy9jYXJ0Jyk7XHJcbiAgICB9XHJcbiAgfSwgW2NhcnRJdGVtcy5sZW5ndGgsIHN0ZXAsIHJvdXRlcl0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBhd2FpdCBwcm9jZXNzQ2hlY2tvdXQoKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVQYXltZW50TWV0aG9kQ2hhbmdlID0gKG1ldGhvZDogc3RyaW5nKSA9PiB7XHJcbiAgICB1cGRhdGVGb3JtRGF0YSh7IHBheW1lbnRNZXRob2Q6IG1ldGhvZCBhcyAnbWVyY2Fkb3BhZ28nIHwgJ2JhbmsnIHwgJ2Nhc2gnIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNoaXBwaW5nTWV0aG9kQ2hhbmdlID0gKG1ldGhvZDogJ2ZyZWUnIHwgJ2V4cHJlc3MnIHwgJ3BpY2t1cCcpID0+IHtcclxuICAgIHVwZGF0ZUZvcm1EYXRhKHsgc2hpcHBpbmdNZXRob2Q6IG1ldGhvZCB9KTtcclxuICB9O1xyXG5cclxuICBpZiAoc3RlcCA9PT0gJ3Byb2Nlc3NpbmcnKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIDxCcmVhZGNydW1iIHRpdGxlPXtcIkNoZWNrb3V0XCJ9IHBhZ2VzPXtbXCJjaGVja291dFwiXX0gLz5cclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJvdmVyZmxvdy1oaWRkZW4gcHktMjAgYmctZ3JheS01MFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy1bMTE3MHB4XSB3LWZ1bGwgbXgtYXV0byBweC00IHNtOnB4LTggeGw6cHgtMFwiPlxyXG4gICAgICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJtYXgtdy1tZCBteC1hdXRvXCI+XHJcbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInAtMTIgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgcm91bmRlZC1mdWxsIGJnLXByaW1hcnkvMTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTggaC04IHRleHQtcHJpbWFyeSBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgUHJvY2VzYW5kbyB0dSBwZWRpZG8uLi5cclxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgdGV4dC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgUG9yIGZhdm9yIGVzcGVyYSBtaWVudHJhcyBwcmVwYXJhbW9zIHR1IHBhZ28uXHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8g4pyFIE5VRVZPOiBQYXNvIGRlIHBhZ28gY29uIFdhbGxldCBCcmlja1xyXG4gIGlmIChzdGVwID09PSAncGF5bWVudCcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDw+XHJcbiAgICAgICAgPEJyZWFkY3J1bWIgdGl0bGU9e1wiQ2hlY2tvdXQgLSBQYWdvXCJ9IHBhZ2VzPXtbXCJjaGVja291dFwiLCBcInBhZ29cIl19IC8+XHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwib3ZlcmZsb3ctaGlkZGVuIHB5LTIwIGJnLWdyYXktNTBcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctWzExNzBweF0gdy1mdWxsIG14LWF1dG8gcHgtNCBzbTpweC04IHhsOnB4LTBcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0b1wiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOCB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj5cclxuICAgICAgICAgICAgICAgICAgRmluYWxpemFyIFBhZ29cclxuICAgICAgICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+XHJcbiAgICAgICAgICAgICAgICAgIENvbXBsZXRhIHR1IGNvbXByYSBkZSBmb3JtYSBzZWd1cmEgY29uIE1lcmNhZG9QYWdvXHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIHsvKiBXYWxsZXQgQnJpY2sgKi99XHJcbiAgICAgICAgICAgICAge3ByZWZlcmVuY2VJZCA/IChcclxuICAgICAgICAgICAgICAgIDxNZXJjYWRvUGFnb1dhbGxldFxyXG4gICAgICAgICAgICAgICAgICBwcmVmZXJlbmNlSWQ9e3ByZWZlcmVuY2VJZH1cclxuICAgICAgICAgICAgICAgICAgb25SZWFkeT17aGFuZGxlV2FsbGV0UmVhZHl9XHJcbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9e2hhbmRsZVdhbGxldEVycm9yfVxyXG4gICAgICAgICAgICAgICAgICBvblN1Ym1pdD17aGFuZGxlV2FsbGV0U3VibWl0fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgc2kgbm8gaGF5IHByZWZlcmVuY2VJZFxyXG4gICAgICAgICAgICAgICAgaW5pdFBvaW50ICYmIChcclxuICAgICAgICAgICAgICAgICAgPE1lcmNhZG9QYWdvV2FsbGV0RmFsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICBpbml0UG9pbnQ9e2luaXRQb2ludH1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICB7LyogUmVzdW1lbiBkZWwgcGVkaWRvICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOFwiPlxyXG4gICAgICAgICAgICAgICAgPENhcmQ+XHJcbiAgICAgICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJwLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTRcIj5SZXN1bWVuIGRlbCBQZWRpZG88L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yIHRleHQtc21cIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+U3VidG90YWw6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3RvdGFsUHJpY2UudG9GaXhlZCgyKX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RW52w61vOjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtzaGlwcGluZ0Nvc3QudG9GaXhlZCgyKX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtkaXNjb3VudCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQtZ3JlZW4tNjAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RGVzY3VlbnRvOjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4tJHtkaXNjb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBwdC0yIGZsZXgganVzdGlmeS1iZXR3ZWVuIGZvbnQtc2VtaWJvbGRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+VG90YWw6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2ZpbmFsVG90YWwudG9GaXhlZCgyKX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cclxuICAgICAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgIDwvPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChzdGVwID09PSAncmVkaXJlY3QnKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIDxCcmVhZGNydW1iIHRpdGxlPXtcIkNoZWNrb3V0XCJ9IHBhZ2VzPXtbXCJjaGVja291dFwiXX0gLz5cclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJvdmVyZmxvdy1oaWRkZW4gcHktMjAgYmctZ3JheS01MFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy1bMTE3MHB4XSB3LWZ1bGwgbXgtYXV0byBweC00IHNtOnB4LTggeGw6cHgtMFwiPlxyXG4gICAgICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJtYXgtdy1tZCBteC1hdXRvXCI+XHJcbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInAtMTIgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgcm91bmRlZC1mdWxsIGJnLWJsdWUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPENyZWRpdENhcmQgY2xhc3NOYW1lPVwidy04IGgtOCB0ZXh0LWJsdWUtNjAwXCIgLz5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIFByb2Nlc2FuZG8gUGFnby4uLlxyXG4gICAgICAgICAgICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCB0ZXh0LXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICBUdSBwYWdvIGVzdMOhIHNpZW5kbyBwcm9jZXNhZG8uIFNlcsOhcyByZWRpcmlnaWRvIGF1dG9tw6F0aWNhbWVudGUuXHJcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxCcmVhZGNydW1iIHRpdGxlPXtcIkNoZWNrb3V0XCJ9IHBhZ2VzPXtbXCJjaGVja291dFwiXX0gLz5cclxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwib3ZlcmZsb3ctaGlkZGVuIHB5LTIwIGJnLWdyYXktMlwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctWzExNzBweF0gdy1mdWxsIG14LWF1dG8gcHgtNCBzbTpweC04IHhsOnB4LTBcIj5cclxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IHJvbGU9XCJmb3JtXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBsZzpmbGV4LXJvdyBnYXAtNy41IHhsOmdhcC0xMVwiPlxyXG4gICAgICAgICAgICAgIHsvKiBDaGVja291dCBsZWZ0ICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGc6bWF4LXctWzY3MHB4XSB3LWZ1bGxcIj5cclxuICAgICAgICAgICAgICAgIHsvKiBFcnJvciBnZW5lcmFsIC0gTWlncmFkbyBhbCBEZXNpZ24gU3lzdGVtICovfVxyXG4gICAgICAgICAgICAgICAge2Vycm9ycy5nZW5lcmFsICYmIChcclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIHZhcmlhbnQ9XCJlcnJvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QWxlcnRUcmlhbmdsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2Vycm9ycy5nZW5lcmFsfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybU1lc3NhZ2U+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogRXJyb3IgZGUgY2Fycml0byB2YWPDrW8gKi99XHJcbiAgICAgICAgICAgICAgICB7ZXJyb3JzLmNhcnQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTYgcC00IGJnLXllbGxvdy01MCBib3JkZXIgYm9yZGVyLXllbGxvdy0yMDAgcm91bmRlZC1tZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteWVsbG93LTgwMFwiPntlcnJvcnMuY2FydH08L3A+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogQmlsbGluZyBkZXRhaWxzICovfVxyXG4gICAgICAgICAgICAgICAgPEJpbGxpbmdcclxuICAgICAgICAgICAgICAgICAgYmlsbGluZ0RhdGE9e2Zvcm1EYXRhLmJpbGxpbmd9XHJcbiAgICAgICAgICAgICAgICAgIGVycm9ycz17ZXJyb3JzfVxyXG4gICAgICAgICAgICAgICAgICBvbkJpbGxpbmdDaGFuZ2U9e3VwZGF0ZUJpbGxpbmdEYXRhfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogU2hpcHBpbmcgYWRkcmVzcyAqL31cclxuICAgICAgICAgICAgICAgIDxTaGlwcGluZ1xyXG4gICAgICAgICAgICAgICAgICBzaGlwcGluZ0RhdGE9e2Zvcm1EYXRhLnNoaXBwaW5nfVxyXG4gICAgICAgICAgICAgICAgICBiaWxsaW5nRGF0YT17Zm9ybURhdGEuYmlsbGluZ31cclxuICAgICAgICAgICAgICAgICAgZXJyb3JzPXtlcnJvcnN9XHJcbiAgICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdDaGFuZ2U9e3VwZGF0ZVNoaXBwaW5nRGF0YX1cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIFNoaXBwaW5nIG1ldGhvZCAqL31cclxuICAgICAgICAgICAgICAgIDxTaGlwcGluZ01ldGhvZFxyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZE1ldGhvZD17Zm9ybURhdGEuc2hpcHBpbmdNZXRob2R9XHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2U9e3RvdGFsUHJpY2V9XHJcbiAgICAgICAgICAgICAgICAgIG9uTWV0aG9kQ2hhbmdlPXtoYW5kbGVTaGlwcGluZ01ldGhvZENoYW5nZX1cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIFBheW1lbnQgbWV0aG9kICovfVxyXG4gICAgICAgICAgICAgICAgPFBheW1lbnRNZXRob2RcclxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNZXRob2Q9e2Zvcm1EYXRhLnBheW1lbnRNZXRob2R9XHJcbiAgICAgICAgICAgICAgICAgIG9uTWV0aG9kQ2hhbmdlPXtoYW5kbGVQYXltZW50TWV0aG9kQ2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgey8qIENoZWNrb3V0IHJpZ2h0ICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctWzQ1NXB4XSB3LWZ1bGxcIj5cclxuICAgICAgICAgICAgICAgIHsvKiBVc2VyIGluZm8gKi99XHJcbiAgICAgICAgICAgICAgICA8VXNlckluZm8gY2xhc3NOYW1lPVwibWItNlwiIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIE9yZGVyIHN1bW1hcnkgKi99XHJcbiAgICAgICAgICAgICAgICA8T3JkZXJTdW1tYXJ5XHJcbiAgICAgICAgICAgICAgICAgIGNhcnRJdGVtcz17Y2FydEl0ZW1zfVxyXG4gICAgICAgICAgICAgICAgICB0b3RhbFByaWNlPXt0b3RhbFByaWNlfVxyXG4gICAgICAgICAgICAgICAgICBzaGlwcGluZ0Nvc3Q9e3NoaXBwaW5nQ29zdH1cclxuICAgICAgICAgICAgICAgICAgZGlzY291bnQ9e2Rpc2NvdW50fVxyXG4gICAgICAgICAgICAgICAgICBmaW5hbFRvdGFsPXtmaW5hbFRvdGFsfVxyXG4gICAgICAgICAgICAgICAgICBzaGlwcGluZ01ldGhvZD17Zm9ybURhdGEuc2hpcHBpbmdNZXRob2R9XHJcbiAgICAgICAgICAgICAgICAgIGFwcGxpZWRDb3Vwb249e2FwcGxpZWRDb3Vwb259XHJcbiAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBDb3Vwb24gKi99XHJcbiAgICAgICAgICAgICAgICA8Q291cG9uXHJcbiAgICAgICAgICAgICAgICAgIG9uQ291cG9uQXBwbHk9e2FwcGx5Q291cG9ufVxyXG4gICAgICAgICAgICAgICAgICBhcHBsaWVkQ291cG9uPXthcHBsaWVkQ291cG9ufVxyXG4gICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZ31cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIENoZWNrb3V0IGJ1dHRvbiAqL31cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgY2FydEl0ZW1zLmxlbmd0aCA9PT0gMH1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgZm9udC1tZWRpdW0gdGV4dC13aGl0ZSBweS0zIHB4LTYgcm91bmRlZC1tZCBlYXNlLW91dCBkdXJhdGlvbi0yMDAgbXQtNy41ICR7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nIHx8IGNhcnRJdGVtcy5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXRhaGl0aS1nb2xkLTUwMCBob3ZlcjpiZy10YWhpdGktZ29sZC03MDAnXHJcbiAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7aXNMb2FkaW5nID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTQgdy00IGJvcmRlci1iLTIgYm9yZGVyLXdoaXRlXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICBQcm9jZXNhbmRvLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgJ1Byb2Nlc2FyIFBlZGlkbydcclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBUZXJtcyBhbmQgY29uZGl0aW9ucyAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCBwLTMgYmctZ3JheS01MCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbWRcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgQWwgaGFjZXIgY2xpYyBlbiAmcXVvdDtQcm9jZXNhciBQZWRpZG8mcXVvdDssIGFjZXB0YXMgbnVlc3Ryb3N7JyAnfVxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvdGVybXNcIiBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUgaG92ZXI6dW5kZXJsaW5lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB0w6lybWlub3MgeSBjb25kaWNpb25lc1xyXG4gICAgICAgICAgICAgICAgICAgIDwvYT57JyAnfVxyXG4gICAgICAgICAgICAgICAgICAgIHl7JyAnfVxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvcHJpdmFjeVwiIGNsYXNzTmFtZT1cInRleHQtYmx1ZSBob3Zlcjp1bmRlcmxpbmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHBvbMOtdGljYSBkZSBwcml2YWNpZGFkXHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIC5cclxuICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L3NlY3Rpb24+XHJcbiAgICA8Lz5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tvdXQ7XHJcbiJdLCJuYW1lcyI6WyJDaGVja291dCIsInJvdXRlciIsInVzZVJvdXRlciIsImZvcm1EYXRhIiwiaXNMb2FkaW5nIiwiZXJyb3JzIiwic3RlcCIsImNhcnRJdGVtcyIsInRvdGFsUHJpY2UiLCJzaGlwcGluZ0Nvc3QiLCJkaXNjb3VudCIsImZpbmFsVG90YWwiLCJhcHBsaWVkQ291cG9uIiwiYXBwbHlDb3Vwb24iLCJ1cGRhdGVCaWxsaW5nRGF0YSIsInVwZGF0ZVNoaXBwaW5nRGF0YSIsInVwZGF0ZUZvcm1EYXRhIiwicHJvY2Vzc0NoZWNrb3V0IiwicHJlZmVyZW5jZUlkIiwiaW5pdFBvaW50IiwiaGFuZGxlV2FsbGV0UmVhZHkiLCJoYW5kbGVXYWxsZXRFcnJvciIsImhhbmRsZVdhbGxldFN1Ym1pdCIsInVzZUNoZWNrb3V0IiwiUmVhY3QiLCJ1c2VFZmZlY3QiLCJsZW5ndGgiLCJwdXNoIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiaGFuZGxlUGF5bWVudE1ldGhvZENoYW5nZSIsIm1ldGhvZCIsInBheW1lbnRNZXRob2QiLCJoYW5kbGVTaGlwcGluZ01ldGhvZENoYW5nZSIsInNoaXBwaW5nTWV0aG9kIiwiQnJlYWRjcnVtYiIsInRpdGxlIiwicGFnZXMiLCJzZWN0aW9uIiwiY2xhc3NOYW1lIiwiZGl2IiwiQ2FyZCIsIkNhcmRDb250ZW50IiwiTG9hZGVyMiIsImgyIiwicCIsIk1lcmNhZG9QYWdvV2FsbGV0Iiwib25SZWFkeSIsIm9uRXJyb3IiLCJvblN1Ym1pdCIsIk1lcmNhZG9QYWdvV2FsbGV0RmFsbGJhY2siLCJoMyIsInNwYW4iLCJ0b0ZpeGVkIiwiQ3JlZGl0Q2FyZCIsImZvcm0iLCJyb2xlIiwiZ2VuZXJhbCIsIkZvcm1NZXNzYWdlIiwidmFyaWFudCIsIkFsZXJ0VHJpYW5nbGUiLCJjYXJ0IiwiQmlsbGluZyIsImJpbGxpbmdEYXRhIiwiYmlsbGluZyIsIm9uQmlsbGluZ0NoYW5nZSIsIlNoaXBwaW5nIiwic2hpcHBpbmdEYXRhIiwic2hpcHBpbmciLCJvblNoaXBwaW5nQ2hhbmdlIiwiU2hpcHBpbmdNZXRob2QiLCJzZWxlY3RlZE1ldGhvZCIsIm9uTWV0aG9kQ2hhbmdlIiwiUGF5bWVudE1ldGhvZCIsIlVzZXJJbmZvIiwiT3JkZXJTdW1tYXJ5IiwiQ291cG9uIiwib25Db3Vwb25BcHBseSIsImJ1dHRvbiIsInR5cGUiLCJkaXNhYmxlZCIsImEiLCJocmVmIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBMFRBOzs7ZUFBQTs7Ozs4REF6VGtCOzRCQUNRO21FQUNIO2lFQUNGO3VFQUNNO3NFQUNEO2dFQUNOO3FFQUNLOytEQUNOO2lFQUNFOzZCQUNPO3NCQUNNO3NCQUVOOzZCQUN1QjsyRUFDVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFN0QsTUFBTUEsV0FBVztJQUNmLE1BQU1DLFNBQVNDLElBQUFBLHFCQUFTO0lBQ3hCLE1BQU0sRUFDSkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1RDLE1BQU0sRUFDTkMsSUFBSSxFQUNKQyxTQUFTLEVBQ1RDLFVBQVUsRUFDVkMsWUFBWSxFQUNaQyxRQUFRLEVBQ1JDLFVBQVUsRUFDVkMsYUFBYSxFQUNiQyxXQUFXLEVBQ1hDLGlCQUFpQixFQUNqQkMsa0JBQWtCLEVBQ2xCQyxjQUFjLEVBQ2RDLGVBQWUsRUFDZix5Q0FBeUM7SUFDekNDLFlBQVksRUFDWkMsU0FBUyxFQUNUQyxpQkFBaUIsRUFDakJDLGlCQUFpQixFQUNqQkMsa0JBQWtCLEVBQ25CLEdBQUdDLElBQUFBLHdCQUFXO0lBRWYscUNBQXFDO0lBQ3JDQyxjQUFLLENBQUNDLFNBQVMsQ0FBQztRQUNkLElBQUlsQixVQUFVbUIsTUFBTSxLQUFLLEtBQUtwQixTQUFTLFFBQVE7WUFDN0NMLE9BQU8wQixJQUFJLENBQUM7UUFDZDtJQUNGLEdBQUc7UUFBQ3BCLFVBQVVtQixNQUFNO1FBQUVwQjtRQUFNTDtLQUFPO0lBRW5DLE1B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