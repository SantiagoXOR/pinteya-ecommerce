a038c3c4612aa57cc6196ea32915356d
/**
 * Hook para geolocalizaci√≥n autom√°tica y detecci√≥n de zona de entrega
 * Detecta la ubicaci√≥n del usuario y determina la zona de entrega m√°s cercana
 */ 'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useGeolocation", {
    enumerable: true,
    get: function() {
        return useGeolocation;
    }
});
const _react = require("react");
// Zonas de entrega con coordenadas aproximadas
const DELIVERY_ZONES = [
    {
        id: "cordoba-capital",
        name: "C√≥rdoba Capital",
        available: true,
        coordinates: {
            lat: -31.4201,
            lng: -64.1888
        },
        radius: 15
    },
    {
        id: "cordoba-interior",
        name: "Interior de C√≥rdoba",
        available: true,
        coordinates: {
            lat: -31.4201,
            lng: -64.1888
        },
        radius: 100
    },
    {
        id: "buenos-aires",
        name: "Buenos Aires",
        available: false,
        coordinates: {
            lat: -34.6118,
            lng: -58.3960
        },
        radius: 50
    },
    {
        id: "rosario",
        name: "Rosario",
        available: false,
        coordinates: {
            lat: -32.9442,
            lng: -60.6505
        },
        radius: 30
    }
];
// Funci√≥n para calcular distancia entre dos puntos (f√≥rmula de Haversine)
function calculateDistance(lat1, lng1, lat2, lng2) {
    const R = 6371; // Radio de la Tierra en km
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLng = (lng2 - lng1) * Math.PI / 180;
    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLng / 2) * Math.sin(dLng / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}
// Funci√≥n para detectar la zona m√°s cercana
function detectNearestZone(userLat, userLng) {
    console.log('üó∫Ô∏è === DETECTING NEAREST ZONE ===');
    console.log('üó∫Ô∏è User coordinates:', userLat, userLng);
    let nearestZone = null;
    let minDistance = Infinity;
    for (const zone of DELIVERY_ZONES){
        console.log('üó∫Ô∏è Checking zone:', zone.name, zone.id);
        if (zone.coordinates) {
            const distance = calculateDistance(userLat, userLng, zone.coordinates.lat, zone.coordinates.lng);
            console.log(`üó∫Ô∏è Distance to ${zone.name}: ${distance.toFixed(2)}km (radius: ${zone.radius}km)`);
            // Verificar si est√° dentro del radio de la zona
            if (zone.radius && distance <= zone.radius && distance < minDistance) {
                console.log(`üó∫Ô∏è ‚úÖ ${zone.name} is within range and closer!`);
                nearestZone = zone;
                minDistance = distance;
            } else {
                console.log(`üó∫Ô∏è ‚ùå ${zone.name} is out of range or farther`);
            }
        } else {
            console.log(`üó∫Ô∏è ‚ö†Ô∏è ${zone.name} has no coordinates`);
        }
    }
    // Si no encuentra una zona espec√≠fica, usar C√≥rdoba Interior como fallback
    const fallbackZone = DELIVERY_ZONES.find((zone)=>zone.id === "cordoba-interior");
    const result = nearestZone || fallbackZone || null;
    console.log('üó∫Ô∏è Final result:', result?.name || 'null');
    console.log('üó∫Ô∏è === ZONE DETECTION COMPLETE ===');
    return result;
}
const useGeolocation = ()=>{
    const [state, setState] = (0, _react.useState)({
        location: null,
        isLoading: false,
        error: null,
        permissionStatus: 'unknown',
        detectedZone: null
    });
    // Funci√≥n para solicitar geolocalizaci√≥n
    const requestLocation = (0, _react.useCallback)(()=>{
        console.log('üó∫Ô∏è ===== REQUEST LOCATION START =====');
        console.log('üó∫Ô∏è Navigator geolocation available:', !!navigator.geolocation);
        if (!navigator.geolocation) {
            console.log('üó∫Ô∏è ‚ùå Geolocation not supported');
            setState((prev)=>({
                    ...prev,
                    error: 'Geolocalizaci√≥n no soportada por este navegador',
                    permissionStatus: 'denied'
                }));
            return;
        }
        console.log('üó∫Ô∏è ‚úÖ Starting geolocation request...');
        console.log('üó∫Ô∏è Setting loading state to true...');
        setState((prev)=>{
            const newState = {
                ...prev,
                isLoading: true,
                error: null
            };
            console.log('üó∫Ô∏è Loading state updated:', newState);
            return newState;
        });
        // Usar Promise para mejor manejo de errores
        const getCurrentPositionPromise = ()=>{
            return new Promise((resolve, reject)=>{
                navigator.geolocation.getCurrentPosition(resolve, reject, {
                    enableHighAccuracy: false,
                    timeout: 30000,
                    maximumAge: 0
                });
            });
        };
        // Ejecutar con async/await para mejor control
        getCurrentPositionPromise().then((position)=>{
            console.log('üó∫Ô∏è ===== GEOLOCATION SUCCESS =====');
            console.log('üó∫Ô∏è Position object:', position);
            console.log('üó∫Ô∏è Coordinates:', position.coords);
            const { latitude, longitude, accuracy } = position.coords;
            console.log('üó∫Ô∏è Lat:', latitude, 'Lng:', longitude, 'Accuracy:', accuracy, 'meters');
            const detectedZone = detectNearestZone(latitude, longitude);
            console.log('üó∫Ô∏è Detected zone result:', detectedZone);
            console.log('üó∫Ô∏è Updating state with new location...');
            // Usar setTimeout para asegurar que el setState se ejecute en el pr√≥ximo tick
            setTimeout(()=>{
                setState((prev)=>{
                    const newState = {
                        ...prev,
                        location: {
                            lat: latitude,
                            lng: longitude
                        },
                        detectedZone,
                        isLoading: false,
                        permissionStatus: 'granted',
                        error: null
                    };
                    console.log('üó∫Ô∏è New state:', newState);
                    return newState;
                });
                console.log('üó∫Ô∏è ===== STATE UPDATE COMPLETE =====');
            }, 0);
        }).catch((error)=>{
            console.log('üó∫Ô∏è Geolocation error:', error);
            let errorMessage = 'Error al obtener ubicaci√≥n';
            let permissionStatus = 'unknown';
            switch(error.code){
                case error.PERMISSION_DENIED:
                    errorMessage = 'Permisos de ubicaci√≥n denegados';
                    permissionStatus = 'denied';
                    console.log('üó∫Ô∏è Permission denied by user');
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMessage = 'Ubicaci√≥n no disponible';
                    console.log('üó∫Ô∏è Position unavailable');
                    break;
                case error.TIMEOUT:
                    errorMessage = 'Tiempo de espera agotado';
                    console.log('üó∫Ô∏è Geolocation timeout');
                    break;
            }
            // Tambi√©n usar setTimeout para el manejo de errores
            setTimeout(()=>{
                setState((prev)=>({
                        ...prev,
                        error: errorMessage,
                        isLoading: false,
                        permissionStatus
                    }));
            }, 0);
        });
    }, []);
    // Verificar permisos al montar el componente
    (0, _react.useEffect)(()=>{
        console.log('üó∫Ô∏è useGeolocation useEffect running');
        if ('permissions' in navigator) {
            console.log('üó∫Ô∏è Permissions API supported, checking permissions...');
            navigator.permissions.query({
                name: 'geolocation'
            }).then((result)=>{
                console.log('üó∫Ô∏è Permission status:', result.state);
                setState((prev)=>({
                        ...prev,
                        permissionStatus: result.state
                    }));
                // Si ya tiene permisos, solicitar ubicaci√≥n autom√°ticamente
                if (result.state === 'granted') {
                    console.log('üó∫Ô∏è Permission already granted, will request location on user interaction');
                // No solicitar autom√°ticamente para evitar bucles infinitos
                } else if (result.state === 'prompt') {
                    console.log('üó∫Ô∏è Permission prompt available, will request on user interaction');
                // No solicitar autom√°ticamente si es 'prompt' para evitar popup inesperado
                } else {
                    console.log('üó∫Ô∏è Permission denied or unavailable, status:', result.state);
                }
            }).catch((error)=>{
                console.log('üó∫Ô∏è Error checking geolocation permissions:', error);
                setState((prev)=>({
                        ...prev,
                        permissionStatus: 'unknown'
                    }));
            });
        } else {
            console.log('üó∫Ô∏è Permissions API not supported, will try direct geolocation');
            setState((prev)=>({
                    ...prev,
                    permissionStatus: 'unknown'
                }));
        }
    }, []); // Sin dependencias para evitar bucles
    // Funci√≥n para obtener todas las zonas disponibles
    const getAvailableZones = (0, _react.useCallback)(()=>{
        return DELIVERY_ZONES;
    }, []);
    // Funci√≥n para seleccionar zona manualmente
    const selectZone = (0, _react.useCallback)((zoneId)=>{
        const zone = DELIVERY_ZONES.find((z)=>z.id === zoneId);
        if (zone) {
            setState((prev)=>({
                    ...prev,
                    detectedZone: zone
                }));
        }
    }, []);
    // Funci√≥n de test para simular geolocalizaci√≥n exitosa
    const testLocation = (0, _react.useCallback)((lat = -31.4201, lng = -64.1888)=>{
        console.log('üß™ ===== TEST LOCATION SIMULATION =====');
        console.log('üß™ Simulating location:', lat, lng);
        const detectedZone = detectNearestZone(lat, lng);
        console.log('üß™ Simulated detected zone:', detectedZone);
        console.log('üß™ Updating state with simulated location...');
        setState((prev)=>{
            const newState = {
                ...prev,
                location: {
                    lat,
                    lng
                },
                detectedZone,
                isLoading: false,
                permissionStatus: 'granted',
                error: null
            };
            console.log('üß™ Simulated new state:', newState);
            return newState;
        });
        console.log('üß™ ===== TEST SIMULATION COMPLETE =====');
    }, []);
    return {
        ...state,
        requestLocation,
        getAvailableZones,
        selectZone,
        deliveryZones: DELIVERY_ZONES,
        testLocation
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUdlb2xvY2F0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBIb29rIHBhcmEgZ2VvbG9jYWxpemFjacOzbiBhdXRvbcOhdGljYSB5IGRldGVjY2nDs24gZGUgem9uYSBkZSBlbnRyZWdhXHJcbiAqIERldGVjdGEgbGEgdWJpY2FjacOzbiBkZWwgdXN1YXJpbyB5IGRldGVybWluYSBsYSB6b25hIGRlIGVudHJlZ2EgbcOhcyBjZXJjYW5hXHJcbiAqL1xyXG5cclxuJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlbGl2ZXJ5Wm9uZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgYXZhaWxhYmxlOiBib29sZWFuO1xyXG4gIGNvb3JkaW5hdGVzPzoge1xyXG4gICAgbGF0OiBudW1iZXI7XHJcbiAgICBsbmc6IG51bWJlcjtcclxuICB9O1xyXG4gIHJhZGl1cz86IG51bWJlcjsgLy8gUmFkaW8gZW4ga21cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHZW9sb2NhdGlvblN0YXRlIHtcclxuICBsb2NhdGlvbjoge1xyXG4gICAgbGF0OiBudW1iZXI7XHJcbiAgICBsbmc6IG51bWJlcjtcclxuICB9IHwgbnVsbDtcclxuICBpc0xvYWRpbmc6IGJvb2xlYW47XHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XHJcbiAgcGVybWlzc2lvblN0YXR1czogJ2dyYW50ZWQnIHwgJ2RlbmllZCcgfCAncHJvbXB0JyB8ICd1bmtub3duJztcclxuICBkZXRlY3RlZFpvbmU6IERlbGl2ZXJ5Wm9uZSB8IG51bGw7XHJcbn1cclxuXHJcbi8vIFpvbmFzIGRlIGVudHJlZ2EgY29uIGNvb3JkZW5hZGFzIGFwcm94aW1hZGFzXHJcbmNvbnN0IERFTElWRVJZX1pPTkVTOiBEZWxpdmVyeVpvbmVbXSA9IFtcclxuICB7XHJcbiAgICBpZDogXCJjb3Jkb2JhLWNhcGl0YWxcIixcclxuICAgIG5hbWU6IFwiQ8OzcmRvYmEgQ2FwaXRhbFwiLFxyXG4gICAgYXZhaWxhYmxlOiB0cnVlLFxyXG4gICAgY29vcmRpbmF0ZXM6IHsgbGF0OiAtMzEuNDIwMSwgbG5nOiAtNjQuMTg4OCB9LFxyXG4gICAgcmFkaXVzOiAxNVxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiY29yZG9iYS1pbnRlcmlvclwiLFxyXG4gICAgbmFtZTogXCJJbnRlcmlvciBkZSBDw7NyZG9iYVwiLFxyXG4gICAgYXZhaWxhYmxlOiB0cnVlLFxyXG4gICAgY29vcmRpbmF0ZXM6IHsgbGF0OiAtMzEuNDIwMSwgbG5nOiAtNjQuMTg4OCB9LFxyXG4gICAgcmFkaXVzOiAxMDBcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcImJ1ZW5vcy1haXJlc1wiLFxyXG4gICAgbmFtZTogXCJCdWVub3MgQWlyZXNcIixcclxuICAgIGF2YWlsYWJsZTogZmFsc2UsXHJcbiAgICBjb29yZGluYXRlczogeyBsYXQ6IC0zNC42MTE4LCBsbmc6IC01OC4zOTYwIH0sXHJcbiAgICByYWRpdXM6IDUwXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJyb3NhcmlvXCIsXHJcbiAgICBuYW1lOiBcIlJvc2FyaW9cIixcclxuICAgIGF2YWlsYWJsZTogZmFsc2UsXHJcbiAgICBjb29yZGluYXRlczogeyBsYXQ6IC0zMi45NDQyLCBsbmc6IC02MC42NTA1IH0sXHJcbiAgICByYWRpdXM6IDMwXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgY2FsY3VsYXIgZGlzdGFuY2lhIGVudHJlIGRvcyBwdW50b3MgKGbDs3JtdWxhIGRlIEhhdmVyc2luZSlcclxuZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2UobGF0MTogbnVtYmVyLCBsbmcxOiBudW1iZXIsIGxhdDI6IG51bWJlciwgbG5nMjogbnVtYmVyKTogbnVtYmVyIHtcclxuICBjb25zdCBSID0gNjM3MTsgLy8gUmFkaW8gZGUgbGEgVGllcnJhIGVuIGttXHJcbiAgY29uc3QgZExhdCA9IChsYXQyIC0gbGF0MSkgKiBNYXRoLlBJIC8gMTgwO1xyXG4gIGNvbnN0IGRMbmcgPSAobG5nMiAtIGxuZzEpICogTWF0aC5QSSAvIDE4MDtcclxuICBjb25zdCBhID0gXHJcbiAgICBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXHJcbiAgICBNYXRoLmNvcyhsYXQxICogTWF0aC5QSSAvIDE4MCkgKiBNYXRoLmNvcyhsYXQyICogTWF0aC5QSSAvIDE4MCkgKiBcclxuICAgIE1hdGguc2luKGRMbmcvMikgKiBNYXRoLnNpbihkTG5nLzIpO1xyXG4gIGNvbnN0IGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxLWEpKTtcclxuICByZXR1cm4gUiAqIGM7XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgZGV0ZWN0YXIgbGEgem9uYSBtw6FzIGNlcmNhbmFcclxuZnVuY3Rpb24gZGV0ZWN0TmVhcmVzdFpvbmUodXNlckxhdDogbnVtYmVyLCB1c2VyTG5nOiBudW1iZXIpOiBEZWxpdmVyeVpvbmUgfCBudWxsIHtcclxuICBjb25zb2xlLmxvZygn8J+Xuu+4jyA9PT0gREVURUNUSU5HIE5FQVJFU1QgWk9ORSA9PT0nKTtcclxuICBjb25zb2xlLmxvZygn8J+Xuu+4jyBVc2VyIGNvb3JkaW5hdGVzOicsIHVzZXJMYXQsIHVzZXJMbmcpO1xyXG5cclxuICBsZXQgbmVhcmVzdFpvbmU6IERlbGl2ZXJ5Wm9uZSB8IG51bGwgPSBudWxsO1xyXG4gIGxldCBtaW5EaXN0YW5jZSA9IEluZmluaXR5O1xyXG5cclxuICBmb3IgKGNvbnN0IHpvbmUgb2YgREVMSVZFUllfWk9ORVMpIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5e677iPIENoZWNraW5nIHpvbmU6Jywgem9uZS5uYW1lLCB6b25lLmlkKTtcclxuXHJcbiAgICBpZiAoem9uZS5jb29yZGluYXRlcykge1xyXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IGNhbGN1bGF0ZURpc3RhbmNlKFxyXG4gICAgICAgIHVzZXJMYXQsXHJcbiAgICAgICAgdXNlckxuZyxcclxuICAgICAgICB6b25lLmNvb3JkaW5hdGVzLmxhdCxcclxuICAgICAgICB6b25lLmNvb3JkaW5hdGVzLmxuZ1xyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYPCfl7rvuI8gRGlzdGFuY2UgdG8gJHt6b25lLm5hbWV9OiAke2Rpc3RhbmNlLnRvRml4ZWQoMil9a20gKHJhZGl1czogJHt6b25lLnJhZGl1c31rbSlgKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmaWNhciBzaSBlc3TDoSBkZW50cm8gZGVsIHJhZGlvIGRlIGxhIHpvbmFcclxuICAgICAgaWYgKHpvbmUucmFkaXVzICYmIGRpc3RhbmNlIDw9IHpvbmUucmFkaXVzICYmIGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+Xuu+4jyDinIUgJHt6b25lLm5hbWV9IGlzIHdpdGhpbiByYW5nZSBhbmQgY2xvc2VyIWApO1xyXG4gICAgICAgIG5lYXJlc3Rab25lID0gem9uZTtcclxuICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5e677iPIOKdjCAke3pvbmUubmFtZX0gaXMgb3V0IG9mIHJhbmdlIG9yIGZhcnRoZXJgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coYPCfl7rvuI8g4pqg77iPICR7em9uZS5uYW1lfSBoYXMgbm8gY29vcmRpbmF0ZXNgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNpIG5vIGVuY3VlbnRyYSB1bmEgem9uYSBlc3BlY8OtZmljYSwgdXNhciBDw7NyZG9iYSBJbnRlcmlvciBjb21vIGZhbGxiYWNrXHJcbiAgY29uc3QgZmFsbGJhY2tab25lID0gREVMSVZFUllfWk9ORVMuZmluZCh6b25lID0+IHpvbmUuaWQgPT09IFwiY29yZG9iYS1pbnRlcmlvclwiKTtcclxuICBjb25zdCByZXN1bHQgPSBuZWFyZXN0Wm9uZSB8fCBmYWxsYmFja1pvbmUgfHwgbnVsbDtcclxuXHJcbiAgY29uc29sZS5sb2coJ/Cfl7rvuI8gRmluYWwgcmVzdWx0OicsIHJlc3VsdD8ubmFtZSB8fCAnbnVsbCcpO1xyXG4gIGNvbnNvbGUubG9nKCfwn5e677iPID09PSBaT05FIERFVEVDVElPTiBDT01QTEVURSA9PT0nKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUdlb2xvY2F0aW9uID0gKCkgPT4ge1xyXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8R2VvbG9jYXRpb25TdGF0ZT4oe1xyXG4gICAgbG9jYXRpb246IG51bGwsXHJcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgZXJyb3I6IG51bGwsXHJcbiAgICBwZXJtaXNzaW9uU3RhdHVzOiAndW5rbm93bicsXHJcbiAgICBkZXRlY3RlZFpvbmU6IG51bGxcclxuICB9KTtcclxuXHJcbiAgLy8gRnVuY2nDs24gcGFyYSBzb2xpY2l0YXIgZ2VvbG9jYWxpemFjacOzblxyXG4gIGNvbnN0IHJlcXVlc3RMb2NhdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5e677iPID09PT09IFJFUVVFU1QgTE9DQVRJT04gU1RBUlQgPT09PT0nKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5e677iPIE5hdmlnYXRvciBnZW9sb2NhdGlvbiBhdmFpbGFibGU6JywgISFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pO1xyXG5cclxuICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIOKdjCBHZW9sb2NhdGlvbiBub3Qgc3VwcG9ydGVkJyk7XHJcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcclxuICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgIGVycm9yOiAnR2VvbG9jYWxpemFjacOzbiBubyBzb3BvcnRhZGEgcG9yIGVzdGUgbmF2ZWdhZG9yJyxcclxuICAgICAgICBwZXJtaXNzaW9uU3RhdHVzOiAnZGVuaWVkJ1xyXG4gICAgICB9KSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyDinIUgU3RhcnRpbmcgZ2VvbG9jYXRpb24gcmVxdWVzdC4uLicpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gU2V0dGluZyBsb2FkaW5nIHN0YXRlIHRvIHRydWUuLi4nKTtcclxuXHJcbiAgICBzZXRTdGF0ZShwcmV2ID0+IHtcclxuICAgICAgY29uc3QgbmV3U3RhdGUgPSB7IC4uLnByZXYsIGlzTG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gTG9hZGluZyBzdGF0ZSB1cGRhdGVkOicsIG5ld1N0YXRlKTtcclxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXNhciBQcm9taXNlIHBhcmEgbWVqb3IgbWFuZWpvIGRlIGVycm9yZXNcclxuICAgIGNvbnN0IGdldEN1cnJlbnRQb3NpdGlvblByb21pc2UgPSAoKSA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxHZW9sb2NhdGlvblBvc2l0aW9uPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihyZXNvbHZlLCByZWplY3QsIHtcclxuICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogZmFsc2UsXHJcbiAgICAgICAgICB0aW1lb3V0OiAzMDAwMCxcclxuICAgICAgICAgIG1heGltdW1BZ2U6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEVqZWN1dGFyIGNvbiBhc3luYy9hd2FpdCBwYXJhIG1lam9yIGNvbnRyb2xcclxuICAgIGdldEN1cnJlbnRQb3NpdGlvblByb21pc2UoKVxyXG4gICAgICAudGhlbigocG9zaXRpb24pID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyA9PT09PSBHRU9MT0NBVElPTiBTVUNDRVNTID09PT09Jyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gUG9zaXRpb24gb2JqZWN0OicsIHBvc2l0aW9uKTtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBDb29yZGluYXRlczonLCBwb3NpdGlvbi5jb29yZHMpO1xyXG5cclxuICAgICAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUsIGFjY3VyYWN5IH0gPSBwb3NpdGlvbi5jb29yZHM7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gTGF0OicsIGxhdGl0dWRlLCAnTG5nOicsIGxvbmdpdHVkZSwgJ0FjY3VyYWN5OicsIGFjY3VyYWN5LCAnbWV0ZXJzJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRldGVjdGVkWm9uZSA9IGRldGVjdE5lYXJlc3Rab25lKGxhdGl0dWRlLCBsb25naXR1ZGUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIERldGVjdGVkIHpvbmUgcmVzdWx0OicsIGRldGVjdGVkWm9uZSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIFVwZGF0aW5nIHN0YXRlIHdpdGggbmV3IGxvY2F0aW9uLi4uJyk7XHJcblxyXG4gICAgICAgIC8vIFVzYXIgc2V0VGltZW91dCBwYXJhIGFzZWd1cmFyIHF1ZSBlbCBzZXRTdGF0ZSBzZSBlamVjdXRlIGVuIGVsIHByw7N4aW1vIHRpY2tcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHNldFN0YXRlKHByZXYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiB7IGxhdDogbGF0aXR1ZGUsIGxuZzogbG9uZ2l0dWRlIH0sXHJcbiAgICAgICAgICAgICAgZGV0ZWN0ZWRab25lLFxyXG4gICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgcGVybWlzc2lvblN0YXR1czogJ2dyYW50ZWQnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIE5ldyBzdGF0ZTonLCBuZXdTdGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gPT09PT0gU1RBVEUgVVBEQVRFIENPTVBMRVRFID09PT09Jyk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBHZW9sb2NhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdFcnJvciBhbCBvYnRlbmVyIHViaWNhY2nDs24nO1xyXG4gICAgICAgIGxldCBwZXJtaXNzaW9uU3RhdHVzOiAnZGVuaWVkJyB8ICd1bmtub3duJyA9ICd1bmtub3duJztcclxuXHJcbiAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XHJcbiAgICAgICAgICBjYXNlIGVycm9yLlBFUk1JU1NJT05fREVOSUVEOlxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnUGVybWlzb3MgZGUgdWJpY2FjacOzbiBkZW5lZ2Fkb3MnO1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uU3RhdHVzID0gJ2RlbmllZCc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIFBlcm1pc3Npb24gZGVuaWVkIGJ5IHVzZXInKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIGVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFOlxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnVWJpY2FjacOzbiBubyBkaXNwb25pYmxlJztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gUG9zaXRpb24gdW5hdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIGVycm9yLlRJTUVPVVQ6XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdUaWVtcG8gZGUgZXNwZXJhIGFnb3RhZG8nO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBHZW9sb2NhdGlvbiB0aW1lb3V0Jyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGFtYmnDqW4gdXNhciBzZXRUaW1lb3V0IHBhcmEgZWwgbWFuZWpvIGRlIGVycm9yZXNcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcclxuICAgICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcclxuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgcGVybWlzc2lvblN0YXR1c1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICB9KTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIFZlcmlmaWNhciBwZXJtaXNvcyBhbCBtb250YXIgZWwgY29tcG9uZW50ZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyB1c2VHZW9sb2NhdGlvbiB1c2VFZmZlY3QgcnVubmluZycpO1xyXG5cclxuICAgIGlmICgncGVybWlzc2lvbnMnIGluIG5hdmlnYXRvcikge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBQZXJtaXNzaW9ucyBBUEkgc3VwcG9ydGVkLCBjaGVja2luZyBwZXJtaXNzaW9ucy4uLicpO1xyXG4gICAgICBuYXZpZ2F0b3IucGVybWlzc2lvbnMucXVlcnkoeyBuYW1lOiAnZ2VvbG9jYXRpb24nIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIFBlcm1pc3Npb24gc3RhdHVzOicsIHJlc3VsdC5zdGF0ZSk7XHJcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBwZXJtaXNzaW9uU3RhdHVzOiByZXN1bHQuc3RhdGUgYXMgYW55IH0pKTtcclxuXHJcbiAgICAgICAgLy8gU2kgeWEgdGllbmUgcGVybWlzb3MsIHNvbGljaXRhciB1YmljYWNpw7NuIGF1dG9tw6F0aWNhbWVudGVcclxuICAgICAgICBpZiAocmVzdWx0LnN0YXRlID09PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIFBlcm1pc3Npb24gYWxyZWFkeSBncmFudGVkLCB3aWxsIHJlcXVlc3QgbG9jYXRpb24gb24gdXNlciBpbnRlcmFjdGlvbicpO1xyXG4gICAgICAgICAgLy8gTm8gc29saWNpdGFyIGF1dG9tw6F0aWNhbWVudGUgcGFyYSBldml0YXIgYnVjbGVzIGluZmluaXRvc1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXRlID09PSAncHJvbXB0Jykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfl7rvuI8gUGVybWlzc2lvbiBwcm9tcHQgYXZhaWxhYmxlLCB3aWxsIHJlcXVlc3Qgb24gdXNlciBpbnRlcmFjdGlvbicpO1xyXG4gICAgICAgICAgLy8gTm8gc29saWNpdGFyIGF1dG9tw6F0aWNhbWVudGUgc2kgZXMgJ3Byb21wdCcgcGFyYSBldml0YXIgcG9wdXAgaW5lc3BlcmFkb1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBQZXJtaXNzaW9uIGRlbmllZCBvciB1bmF2YWlsYWJsZSwgc3RhdHVzOicsIHJlc3VsdC5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+Xuu+4jyBFcnJvciBjaGVja2luZyBnZW9sb2NhdGlvbiBwZXJtaXNzaW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBwZXJtaXNzaW9uU3RhdHVzOiAndW5rbm93bicgfSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5e677iPIFBlcm1pc3Npb25zIEFQSSBub3Qgc3VwcG9ydGVkLCB3aWxsIHRyeSBkaXJlY3QgZ2VvbG9jYXRpb24nKTtcclxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBwZXJtaXNzaW9uU3RhdHVzOiAndW5rbm93bicgfSkpO1xyXG4gICAgfVxyXG4gIH0sIFtdKTsgLy8gU2luIGRlcGVuZGVuY2lhcyBwYXJhIGV2aXRhciBidWNsZXNcclxuXHJcbiAgLy8gRnVuY2nDs24gcGFyYSBvYnRlbmVyIHRvZGFzIGxhcyB6b25hcyBkaXNwb25pYmxlc1xyXG4gIGNvbnN0IGdldEF2YWlsYWJsZVpvbmVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgcmV0dXJuIERFTElWRVJZX1pPTkVTO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gRnVuY2nDs24gcGFyYSBzZWxlY2Npb25hciB6b25hIG1hbnVhbG1lbnRlXHJcbiAgY29uc3Qgc2VsZWN0Wm9uZSA9IHVzZUNhbGxiYWNrKCh6b25lSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3Qgem9uZSA9IERFTElWRVJZX1pPTkVTLmZpbmQoeiA9PiB6LmlkID09PSB6b25lSWQpO1xyXG4gICAgaWYgKHpvbmUpIHtcclxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBkZXRlY3RlZFpvbmU6IHpvbmUgfSkpO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gRnVuY2nDs24gZGUgdGVzdCBwYXJhIHNpbXVsYXIgZ2VvbG9jYWxpemFjacOzbiBleGl0b3NhXHJcbiAgY29uc3QgdGVzdExvY2F0aW9uID0gdXNlQ2FsbGJhY2soKGxhdDogbnVtYmVyID0gLTMxLjQyMDEsIGxuZzogbnVtYmVyID0gLTY0LjE4ODgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn6eqID09PT09IFRFU1QgTE9DQVRJT04gU0lNVUxBVElPTiA9PT09PScpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfp6ogU2ltdWxhdGluZyBsb2NhdGlvbjonLCBsYXQsIGxuZyk7XHJcblxyXG4gICAgY29uc3QgZGV0ZWN0ZWRab25lID0gZGV0ZWN0TmVhcmVzdFpvbmUobGF0LCBsbmcpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfp6ogU2ltdWxhdGVkIGRldGVjdGVkIHpvbmU6JywgZGV0ZWN0ZWRab25lKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+nqiBVcGRhdGluZyBzdGF0ZSB3aXRoIHNpbXVsYXRlZCBsb2NhdGlvbi4uLicpO1xyXG4gICAgc2V0U3RhdGUocHJldiA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0ge1xyXG4gICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgbG9jYXRpb246IHsgbGF0LCBsbmcgfSxcclxuICAgICAgICBkZXRlY3RlZFpvbmUsXHJcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBwZXJtaXNzaW9uU3RhdHVzOiAnZ3JhbnRlZCcgYXMgY29uc3QsXHJcbiAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfp6ogU2ltdWxhdGVkIG5ldyBzdGF0ZTonLCBuZXdTdGF0ZSk7XHJcbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn6eqID09PT09IFRFU1QgU0lNVUxBVElPTiBDT01QTEVURSA9PT09PScpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLnN0YXRlLFxyXG4gICAgcmVxdWVzdExvY2F0aW9uLFxyXG4gICAgZ2V0QXZhaWxhYmxlWm9uZXMsXHJcbiAgICBzZWxlY3Rab25lLFxyXG4gICAgZGVsaXZlcnlab25lczogREVMSVZFUllfWk9ORVMsXHJcbiAgICB0ZXN0TG9jYXRpb24gLy8gRnVuY2nDs24gZGUgdGVzdCBwYXJhIGRlYnVnZ2luZ1xyXG4gIH07XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJ1c2VHZW9sb2NhdGlvbiIsIkRFTElWRVJZX1pPTkVTIiwiaWQiLCJuYW1lIiwiYXZhaWxhYmxlIiwiY29vcmRpbmF0ZXMiLCJsYXQiLCJsbmciLCJyYWRpdXMiLCJjYWxjdWxhdGVEaXN0YW5jZSIsImxhdDEiLCJsbmcxIiwibGF0MiIsImxuZzIiLCJSIiwiZExhdCIsIk1hdGgiLCJQSSIsImRMbmciLCJhIiwic2luIiwiY29zIiwiYyIsImF0YW4yIiwic3FydCIsImRldGVjdE5lYXJlc3Rab25lIiwidXNlckxhdCIsInVzZXJMbmciLCJjb25zb2xlIiwibG9nIiwibmVhcmVzdFpvbmUiLCJtaW5EaXN0YW5jZSIsIkluZmluaXR5Iiwiem9uZSIsImRpc3RhbmNlIiwidG9GaXhlZCIsImZhbGxiYWNrWm9uZSIsImZpbmQiLCJyZXN1bHQiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlU3RhdGUiLCJsb2NhdGlvbiIsImlzTG9hZGluZyIsImVycm9yIiwicGVybWlzc2lvblN0YXR1cyIsImRldGVjdGVkWm9uZSIsInJlcXVlc3RMb2NhdGlvbiIsInVzZUNhbGxiYWNrIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJwcmV2IiwibmV3U3RhdGUiLCJnZXRDdXJyZW50UG9zaXRpb25Qcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwibWF4aW11bUFnZSIsInRoZW4iLCJwb3NpdGlvbiIsImNvb3JkcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiYWNjdXJhY3kiLCJzZXRUaW1lb3V0IiwiY2F0Y2giLCJlcnJvck1lc3NhZ2UiLCJjb2RlIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJQT1NJVElPTl9VTkFWQUlMQUJMRSIsIlRJTUVPVVQiLCJ1c2VFZmZlY3QiLCJwZXJtaXNzaW9ucyIsInF1ZXJ5IiwiZ2V0QXZhaWxhYmxlWm9uZXMiLCJzZWxlY3Rab25lIiwiem9uZUlkIiwieiIsInRlc3RMb2NhdGlvbiIsImRlbGl2ZXJ5Wm9uZXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQyxHQUVEOzs7OzsrQkFtSGFBOzs7ZUFBQUE7Ozt1QkFqSG9DO0FBd0JqRCwrQ0FBK0M7QUFDL0MsTUFBTUMsaUJBQWlDO0lBQ3JDO1FBQ0VDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxXQUFXO1FBQ1hDLGFBQWE7WUFBRUMsS0FBSyxDQUFDO1lBQVNDLEtBQUssQ0FBQztRQUFRO1FBQzVDQyxRQUFRO0lBQ1Y7SUFDQTtRQUNFTixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsV0FBVztRQUNYQyxhQUFhO1lBQUVDLEtBQUssQ0FBQztZQUFTQyxLQUFLLENBQUM7UUFBUTtRQUM1Q0MsUUFBUTtJQUNWO0lBQ0E7UUFDRU4sSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFdBQVc7UUFDWEMsYUFBYTtZQUFFQyxLQUFLLENBQUM7WUFBU0MsS0FBSyxDQUFDO1FBQVE7UUFDNUNDLFFBQVE7SUFDVjtJQUNBO1FBQ0VOLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxXQUFXO1FBQ1hDLGFBQWE7WUFBRUMs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