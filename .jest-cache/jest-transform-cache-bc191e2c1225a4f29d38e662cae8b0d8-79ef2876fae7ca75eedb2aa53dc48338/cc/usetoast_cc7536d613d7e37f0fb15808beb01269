529fb12876c4b2e5c3e072b69c38739b
/**
 * Hook de Toast General para Pinteya E-commerce
 * Compatible con shadcn/ui y tests enterprise
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get reducer () {
        return reducer;
    },
    get toast () {
        return toast;
    },
    get useToast () {
        return useToast;
    }
});
const _react = require("react");
// ===================================
// CONFIGURACIÃ“N
// ===================================
const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;
// ===================================
// ESTADO GLOBAL
// ===================================
let count = 0;
function genId() {
    count = (count + 1) % Number.MAX_VALUE;
    return count.toString();
}
const toastTimeouts = new Map();
const addToRemoveQueue = (toastId)=>{
    if (toastTimeouts.has(toastId)) {
        return;
    }
    const timeout = setTimeout(()=>{
        toastTimeouts.delete(toastId);
        dispatch({
            type: "REMOVE_TOAST",
            toastId: toastId
        });
    }, TOAST_REMOVE_DELAY);
    toastTimeouts.set(toastId, timeout);
};
const reducer = (state, action)=>{
    switch(action.type){
        case "ADD_TOAST":
            return [
                action.toast,
                ...state
            ].slice(0, TOAST_LIMIT);
        case "UPDATE_TOAST":
            return state.map((t)=>t.id === action.toast.id ? {
                    ...t,
                    ...action.toast
                } : t);
        case "DISMISS_TOAST":
            {
                const { toastId } = action;
                if (toastId) {
                    addToRemoveQueue(toastId);
                } else {
                    state.forEach((toast)=>{
                        addToRemoveQueue(toast.id);
                    });
                }
                return state.map((t)=>t.id === toastId || toastId === undefined ? {
                        ...t,
                        open: false
                    } : t);
            }
        case "REMOVE_TOAST":
            if (action.toastId === undefined) {
                return [];
            }
            return state.filter((t)=>t.id !== action.toastId);
    }
};
// ===================================
// LISTENERS
// ===================================
const listeners = [];
let memoryState = [];
function dispatch(action) {
    memoryState = reducer(memoryState, action);
    listeners.forEach((listener)=>{
        listener(memoryState);
    });
}
function toast({ ...props }) {
    const id = genId();
    const update = (props)=>dispatch({
            type: "UPDATE_TOAST",
            toast: {
                ...props,
                id
            }
        });
    const dismiss = ()=>dispatch({
            type: "DISMISS_TOAST",
            toastId: id
        });
    dispatch({
        type: "ADD_TOAST",
        toast: {
            ...props,
            id,
            open: true,
            onOpenChange: (open)=>{
                if (!open) dismiss();
            }
        }
    });
    return {
        id: id,
        dismiss,
        update
    };
}
// ===================================
// HOOK PRINCIPAL
// ===================================
function useToast() {
    const [state, setState] = (0, _react.useState)(memoryState);
    (0, _react.useState)(()=>{
        listeners.push(setState);
        return ()=>{
            const index = listeners.indexOf(setState);
            if (index > -1) {
                listeners.splice(index, 1);
            }
        };
    });
    return {
        ...state,
        toast,
        dismiss: (toastId)=>dispatch({
                type: "DISMISS_TOAST",
                toastId
            })
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZS10b2FzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhvb2sgZGUgVG9hc3QgR2VuZXJhbCBwYXJhIFBpbnRleWEgRS1jb21tZXJjZVxuICogQ29tcGF0aWJsZSBjb24gc2hhZGNuL3VpIHkgdGVzdHMgZW50ZXJwcmlzZVxuICovXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvYXN0IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBhY3Rpb24/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIHZhcmlhbnQ/OiAnZGVmYXVsdCcgfCAnZGVzdHJ1Y3RpdmUnIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm5pbmcnO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb2FzdEFjdGlvbkVsZW1lbnQge1xuICBhbHRUZXh0Pzogc3RyaW5nO1xuICBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT05GSUdVUkFDScOTTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgVE9BU1RfTElNSVQgPSAxO1xuY29uc3QgVE9BU1RfUkVNT1ZFX0RFTEFZID0gMTAwMDAwMDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVTVEFETyBHTE9CQUxcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmxldCBjb3VudCA9IDA7XG5cbmZ1bmN0aW9uIGdlbklkKCkge1xuICBjb3VudCA9IChjb3VudCArIDEpICUgTnVtYmVyLk1BWF9WQUxVRTtcbiAgcmV0dXJuIGNvdW50LnRvU3RyaW5nKCk7XG59XG5cbmNvbnN0IHRvYXN0VGltZW91dHMgPSBuZXcgTWFwPHN0cmluZywgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4+KCk7XG5cbmNvbnN0IGFkZFRvUmVtb3ZlUXVldWUgPSAodG9hc3RJZDogc3RyaW5nKSA9PiB7XG4gIGlmICh0b2FzdFRpbWVvdXRzLmhhcyh0b2FzdElkKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICB0b2FzdFRpbWVvdXRzLmRlbGV0ZSh0b2FzdElkKTtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIlJFTU9WRV9UT0FTVFwiLFxuICAgICAgdG9hc3RJZDogdG9hc3RJZCxcbiAgICB9KTtcbiAgfSwgVE9BU1RfUkVNT1ZFX0RFTEFZKTtcblxuICB0b2FzdFRpbWVvdXRzLnNldCh0b2FzdElkLCB0aW1lb3V0KTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBSRURVQ0VSXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgcmVkdWNlciA9IChzdGF0ZTogVG9hc3RbXSwgYWN0aW9uOiBhbnkpOiBUb2FzdFtdID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgXCJBRERfVE9BU1RcIjpcbiAgICAgIHJldHVybiBbYWN0aW9uLnRvYXN0LCAuLi5zdGF0ZV0uc2xpY2UoMCwgVE9BU1RfTElNSVQpO1xuXG4gICAgY2FzZSBcIlVQREFURV9UT0FTVFwiOlxuICAgICAgcmV0dXJuIHN0YXRlLm1hcCgodCkgPT4gKHQuaWQgPT09IGFjdGlvbi50b2FzdC5pZCA/IHsgLi4udCwgLi4uYWN0aW9uLnRvYXN0IH0gOiB0KSk7XG5cbiAgICBjYXNlIFwiRElTTUlTU19UT0FTVFwiOiB7XG4gICAgICBjb25zdCB7IHRvYXN0SWQgfSA9IGFjdGlvbjtcblxuICAgICAgaWYgKHRvYXN0SWQpIHtcbiAgICAgICAgYWRkVG9SZW1vdmVRdWV1ZSh0b2FzdElkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmZvckVhY2goKHRvYXN0KSA9PiB7XG4gICAgICAgICAgYWRkVG9SZW1vdmVRdWV1ZSh0b2FzdC5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhdGUubWFwKCh0KSA9PlxuICAgICAgICB0LmlkID09PSB0b2FzdElkIHx8IHRvYXN0SWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAuLi50LFxuICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHRcbiAgICAgICk7XG4gICAgfVxuICAgIGNhc2UgXCJSRU1PVkVfVE9BU1RcIjpcbiAgICAgIGlmIChhY3Rpb24udG9hc3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZS5maWx0ZXIoKHQpID0+IHQuaWQgIT09IGFjdGlvbi50b2FzdElkKTtcbiAgfVxufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExJU1RFTkVSU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbGlzdGVuZXJzOiBBcnJheTwoc3RhdGU6IFRvYXN0W10pID0+IHZvaWQ+ID0gW107XG5cbmxldCBtZW1vcnlTdGF0ZTogVG9hc3RbXSA9IFtdO1xuXG5mdW5jdGlvbiBkaXNwYXRjaChhY3Rpb246IGFueSkge1xuICBtZW1vcnlTdGF0ZSA9IHJlZHVjZXIobWVtb3J5U3RhdGUsIGFjdGlvbik7XG4gIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xuICAgIGxpc3RlbmVyKG1lbW9yeVN0YXRlKTtcbiAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgUMOaQkxJQ0FTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG50eXBlIFRvYXN0UHJvcHMgPSBPbWl0PFRvYXN0LCBcImlkXCI+O1xuXG5mdW5jdGlvbiB0b2FzdCh7IC4uLnByb3BzIH06IFRvYXN0UHJvcHMpIHtcbiAgY29uc3QgaWQgPSBnZW5JZCgpO1xuXG4gIGNvbnN0IHVwZGF0ZSA9IChwcm9wczogVG9hc3RQcm9wcykgPT5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIlVQREFURV9UT0FTVFwiLFxuICAgICAgdG9hc3Q6IHsgLi4ucHJvcHMsIGlkIH0sXG4gICAgfSk7XG4gIGNvbnN0IGRpc21pc3MgPSAoKSA9PiBkaXNwYXRjaCh7IHR5cGU6IFwiRElTTUlTU19UT0FTVFwiLCB0b2FzdElkOiBpZCB9KTtcblxuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogXCJBRERfVE9BU1RcIixcbiAgICB0b2FzdDoge1xuICAgICAgLi4ucHJvcHMsXG4gICAgICBpZCxcbiAgICAgIG9wZW46IHRydWUsXG4gICAgICBvbk9wZW5DaGFuZ2U6IChvcGVuOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmICghb3BlbikgZGlzbWlzcygpO1xuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGlkOiBpZCxcbiAgICBkaXNtaXNzLFxuICAgIHVwZGF0ZSxcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0sgUFJJTkNJUEFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiB1c2VUb2FzdCgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxUb2FzdFtdPihtZW1vcnlTdGF0ZSk7XG5cbiAgdXNlU3RhdGUoKCkgPT4ge1xuICAgIGxpc3RlbmVycy5wdXNoKHNldFN0YXRlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihzZXRTdGF0ZSk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIC4uLnN0YXRlLFxuICAgIHRvYXN0LFxuICAgIGRpc21pc3M6ICh0b2FzdElkPzogc3RyaW5nKSA9PiBkaXNwYXRjaCh7IHR5cGU6IFwiRElTTUlTU19UT0FTVFwiLCB0b2FzdElkIH0pLFxuICB9O1xufVxuXG5leHBvcnQgeyB1c2VUb2FzdCwgdG9hc3QgfTtcbiJdLCJuYW1lcyI6WyJyZWR1Y2VyIiwidG9hc3QiLCJ1c2VUb2FzdCIsIlRPQVNUX0xJTUlUIiwiVE9BU1RfUkVNT1ZFX0RFTEFZIiwiY291bnQiLCJnZW5JZCIsIk51bWJlciIsIk1BWF9WQUxVRSIsInRvU3RyaW5nIiwidG9hc3RUaW1lb3V0cyIsIk1hcCIsImFkZFRvUmVtb3ZlUXVldWUiLCJ0b2FzdElkIiwiaGFzIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJkZWxldGUiLCJkaXNwYXRjaCIsInR5cGUiLCJzZXQiLCJzdGF0ZSIsImFjdGlvbiIsInNsaWNlIiwibWFwIiwidCIsImlkIiwiZm9yRWFjaCIsInVuZGVmaW5lZCIsIm9wZW4iLCJmaWx0ZXIiLCJsaXN0ZW5lcnMiLCJtZW1vcnlTdGF0ZSIsImxpc3RlbmVyIiwicHJvcHMiLCJ1cGRhdGUiLCJkaXNtaXNzIiwib25PcGVuQ2hhbmdlIiwic2V0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