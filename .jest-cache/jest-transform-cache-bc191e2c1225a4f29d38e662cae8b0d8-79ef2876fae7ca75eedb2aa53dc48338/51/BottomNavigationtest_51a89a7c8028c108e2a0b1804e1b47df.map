{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\components\\ui\\BottomNavigation.test.tsx"],"sourcesContent":["import React from 'react';\r\nimport { render, screen } from '@testing-library/react';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport { useRouter } from 'next/navigation';\r\nimport { BottomNavigation, type BottomNavigationItem } from '@/components/ui/bottom-navigation';\r\nimport cartReducer from '@/redux/features/cart-slice';\r\nimport { Home, Tag, Package } from 'lucide-react';\r\n\r\n// Mock Next.js router\r\nconst mockUsePathname = jest.fn();\r\nconst mockUseRouter = jest.fn();\r\n\r\njest.mock('next/navigation', () => ({\r\n  useRouter: () => mockUseRouter(),\r\n  usePathname: () => mockUsePathname(),\r\n}));\r\n\r\n// Mock store\r\nconst createMockStore = (cartItems = []) => {\r\n  return configureStore({\r\n    reducer: {\r\n      cartReducer: cartReducer,\r\n    },\r\n    preloadedState: {\r\n      cartReducer: {\r\n        items: cartItems,\r\n      },\r\n    },\r\n  });\r\n};\r\n\r\nconst renderWithStore = (component: React.ReactElement, cartItems = []) => {\r\n  const store = createMockStore(cartItems);\r\n  return render(\r\n    <Provider store={store}>\r\n      {component}\r\n    </Provider>\r\n  );\r\n};\r\n\r\ndescribe('BottomNavigation', () => {\r\n  beforeEach(() => {\r\n    mockUsePathname.mockReturnValue('/');\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('renders default navigation items', () => {\r\n    renderWithStore(<BottomNavigation />);\r\n\r\n    expect(screen.getByText('Inicio')).toBeInTheDocument();\r\n    expect(screen.getByText('Ofertas')).toBeInTheDocument();\r\n    expect(screen.getByText('Pedidos')).toBeInTheDocument();\r\n    expect(screen.getByText('Cotizador')).toBeInTheDocument();\r\n    expect(screen.getByText('Menú')).toBeInTheDocument();\r\n  });\r\n\r\n  it('shows cart badge when there are items in cart', () => {\r\n    const cartItems = [\r\n      { id: '1', name: 'Product 1', price: 100, quantity: 2 },\r\n      { id: '2', name: 'Product 2', price: 200, quantity: 1 },\r\n    ];\r\n\r\n    renderWithStore(<BottomNavigation />, cartItems);\r\n\r\n    // Should show badge with cart items count\r\n    expect(screen.getByText('2')).toBeInTheDocument();\r\n  });\r\n\r\n  it('highlights active navigation item', () => {\r\n    mockUsePathname.mockReturnValue('/shop');\r\n\r\n    renderWithStore(<BottomNavigation />);\r\n\r\n    const offersLink = screen.getByLabelText('Ofertas');\r\n    expect(offersLink).toHaveClass('text-primary-700');\r\n  });\r\n\r\n  it('renders custom navigation items', () => {\r\n    const customItems: BottomNavigationItem[] = [\r\n      {\r\n        id: 'home',\r\n        label: 'Home',\r\n        href: '/',\r\n        icon: <Home className=\"w-5 h-5\" />,\r\n      },\r\n      {\r\n        id: 'shop',\r\n        label: 'Shop',\r\n        href: '/shop',\r\n        icon: <Tag className=\"w-5 h-5\" />,\r\n        badge: 5,\r\n      },\r\n    ];\r\n\r\n    renderWithStore(<BottomNavigation items={customItems} />);\r\n\r\n    expect(screen.getByText('Home')).toBeInTheDocument();\r\n    expect(screen.getByText('Shop')).toBeInTheDocument();\r\n    expect(screen.getByText('5')).toBeInTheDocument(); // Badge\r\n  });\r\n\r\n  it('hides labels when showLabels is false', () => {\r\n    renderWithStore(<BottomNavigation showLabels={false} />);\r\n\r\n    expect(screen.queryByText('Inicio')).not.toBeInTheDocument();\r\n    expect(screen.queryByText('Ofertas')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('limits items to maxItems', () => {\r\n    renderWithStore(<BottomNavigation maxItems={3} />);\r\n\r\n    expect(screen.getByText('Inicio')).toBeInTheDocument();\r\n    expect(screen.getByText('Ofertas')).toBeInTheDocument();\r\n    expect(screen.getByText('Pedidos')).toBeInTheDocument();\r\n    expect(screen.queryByText('Cotizador')).not.toBeInTheDocument();\r\n    expect(screen.queryByText('Menú')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('handles disabled items', () => {\r\n    const customItems: BottomNavigationItem[] = [\r\n      {\r\n        id: 'home',\r\n        label: 'Home',\r\n        href: '/',\r\n        icon: <Home className=\"w-5 h-5\" />,\r\n      },\r\n      {\r\n        id: 'disabled',\r\n        label: 'Disabled',\r\n        href: '/disabled',\r\n        icon: <Package className=\"w-5 h-5\" />,\r\n        disabled: true,\r\n      },\r\n    ];\r\n\r\n    renderWithStore(<BottomNavigation items={customItems} />);\r\n\r\n    const disabledLink = screen.getByLabelText('Disabled');\r\n    expect(disabledLink).toHaveClass('opacity-50', 'pointer-events-none');\r\n  });\r\n\r\n  it('shows badge with 99+ for high numbers', () => {\r\n    const customItems: BottomNavigationItem[] = [\r\n      {\r\n        id: 'notifications',\r\n        label: 'Notifications',\r\n        href: '/notifications',\r\n        icon: <Package className=\"w-5 h-5\" />,\r\n        badge: 150,\r\n      },\r\n    ];\r\n\r\n    renderWithStore(<BottomNavigation items={customItems} />);\r\n\r\n    expect(screen.getByText('99+')).toBeInTheDocument();\r\n  });\r\n\r\n  it('applies correct variant classes', () => {\r\n    const { container } = renderWithStore(<BottomNavigation variant=\"dark\" />);\r\n\r\n    const nav = container.querySelector('nav');\r\n    expect(nav).toHaveClass('bg-gray-900/95', 'border-gray-700');\r\n  });\r\n\r\n  it('applies warm variant by default', () => {\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    const nav = container.querySelector('nav');\r\n    expect(nav).toHaveClass('bg-orange-50/95', 'border-orange-100');\r\n  });\r\n\r\n  it('has proper accessibility attributes', () => {\r\n    renderWithStore(<BottomNavigation />);\r\n\r\n    const homeLink = screen.getByLabelText('Inicio');\r\n    expect(homeLink).toHaveAttribute('aria-label', 'Inicio');\r\n  });\r\n\r\n  it('shows active indicator for current page', () => {\r\n    mockUsePathname.mockReturnValue('/');\r\n\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    // Check for active background circle (updated class)\r\n    const activeBackground = container.querySelector('.bg-primary\\\\/15');\r\n    expect(activeBackground).toBeInTheDocument();\r\n  });\r\n\r\n  it('shows dot indicator when cart is empty', () => {\r\n    const { container } = renderWithStore(<BottomNavigation />, []);\r\n\r\n    // Should show subtle dot for orders when cart is empty\r\n    const dotIndicator = container.querySelector('.bg-primary\\\\/60');\r\n    expect(dotIndicator).toBeInTheDocument();\r\n  });\r\n\r\n  it('applies active item styling correctly', () => {\r\n    mockUsePathname.mockReturnValue('/');\r\n\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    const homeLink = screen.getByLabelText('Inicio');\r\n    expect(homeLink).toHaveClass('bottom-nav-item-active');\r\n    expect(homeLink).toHaveClass('text-primary-700');\r\n  });\r\n\r\n  it('shows badge with pulse animation for cart items', () => {\r\n    const cartItems = [{ id: '1', name: 'Product 1', price: 100, quantity: 1 }];\r\n    const { container } = renderWithStore(<BottomNavigation />, cartItems);\r\n\r\n    const badge = container.querySelector('.bottom-nav-badge-pulse');\r\n    expect(badge).toBeInTheDocument();\r\n    expect(screen.getByText('1')).toBeInTheDocument();\r\n  });\r\n\r\n  it('scales icon when item is active', () => {\r\n    mockUsePathname.mockReturnValue('/');\r\n\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    // Check for scale-110 class on active item\r\n    const scaledIcon = container.querySelector('.scale-110');\r\n    expect(scaledIcon).toBeInTheDocument();\r\n  });\r\n\r\n  it('applies mobile tap highlight styles', () => {\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    const navItems = container.querySelectorAll('.bottom-nav-item');\r\n    expect(navItems.length).toBeGreaterThan(0);\r\n\r\n    navItems.forEach(item => {\r\n      expect(item).toHaveClass('bottom-nav-item');\r\n    });\r\n  });\r\n\r\n  it('handles menu path correctly without persistent active state', () => {\r\n    mockUsePathname.mockReturnValue('/menu');\r\n\r\n    const { container } = renderWithStore(<BottomNavigation />);\r\n\r\n    // Solo el menú debe estar activo\r\n    const menuLink = screen.getByLabelText('Menú');\r\n    expect(menuLink).toHaveClass('text-primary-700');\r\n\r\n    // Otros items no deben estar activos\r\n    const homeLink = screen.getByLabelText('Inicio');\r\n    expect(homeLink).not.toHaveClass('text-primary-700');\r\n  });\r\n\r\n  it('prevents menu from activating other paths', () => {\r\n    mockUsePathname.mockReturnValue('/my-account');\r\n\r\n    renderWithStore(<BottomNavigation />);\r\n\r\n    // Pedidos debe estar activo\r\n    const ordersLink = screen.getByLabelText('Pedidos');\r\n    expect(ordersLink).toHaveClass('text-primary-700');\r\n\r\n    // Menú NO debe estar activo\r\n    const menuLink = screen.getByLabelText('Menú');\r\n    expect(menuLink).not.toHaveClass('text-primary-700');\r\n  });\r\n});\r\n"],"names":["jest","mock","useRouter","mockUseRouter","usePathname","mockUsePathname","fn","createMockStore","cartItems","configureStore","reducer","cartReducer","preloadedState","items","renderWithStore","component","store","render","Provider","describe","beforeEach","mockReturnValue","afterEach","clearAllMocks","it","BottomNavigation","expect","screen","getByText","toBeInTheDocument","id","name","price","quantity","offersLink","getByLabelText","toHaveClass","customItems","label","href","icon","Home","className","Tag","badge","showLabels","queryByText","not","maxItems","Package","disabled","disabledLink","container","variant","nav","querySelector","homeLink","toHaveAttribute","activeBackground","dotIndicator","scaledIcon","navItems","querySelectorAll","length","toBeGreaterThan","forEach","item","menuLink","ordersLink"],"mappings":"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"}