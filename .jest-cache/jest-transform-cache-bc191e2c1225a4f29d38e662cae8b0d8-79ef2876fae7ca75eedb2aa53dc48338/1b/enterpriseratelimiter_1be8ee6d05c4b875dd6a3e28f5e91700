cce796c18bc2379a920c08ecb678ef85
/**
 * Sistema Enterprise de Rate Limiting
 * Unifica todas las implementaciones de rate limiting con Redis y fallback en memoria
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get ENTERPRISE_RATE_LIMIT_CONFIGS () {
        return ENTERPRISE_RATE_LIMIT_CONFIGS;
    },
    get checkEnterpriseRateLimit () {
        return checkEnterpriseRateLimit;
    },
    get endpointKeyGenerator () {
        return endpointKeyGenerator;
    },
    get hybridKeyGenerator () {
        return hybridKeyGenerator;
    },
    get ipKeyGenerator () {
        return ipKeyGenerator;
    },
    get memoryStore () {
        return memoryStore;
    },
    get metricsCollector () {
        return metricsCollector;
    },
    get userKeyGenerator () {
        return userKeyGenerator;
    }
});
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const ENTERPRISE_RATE_LIMIT_CONFIGS = {
    // Autenticación crítica
    CRITICAL_AUTH: {
        windowMs: 15 * 60 * 1000,
        maxRequests: 3,
        message: 'Demasiados intentos de autenticación crítica. Intenta en 15 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Admin APIs
    ADMIN_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 50,
        message: 'Límite de requests administrativas excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de pagos
    PAYMENT_API: {
        windowMs: 10 * 60 * 1000,
        maxRequests: 15,
        message: 'Límite de requests de pagos excedido. Intenta en 10 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true,
        onLimitReached: (key, request)=>{
            console.warn(`[PAYMENT_RATE_LIMIT] Límite excedido para ${key}`);
        }
    },
    // APIs públicas de productos
    PUBLIC_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 100,
        message: 'Límite de requests públicas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false // No loggear APIs públicas
    },
    // Webhooks
    WEBHOOK_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 200,
        message: 'Límite de webhooks excedido.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Búsquedas y consultas
    SEARCH_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 60,
        message: 'Límite de búsquedas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false
    },
    // Upload de archivos
    UPLOAD_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 10,
        message: 'Límite de uploads excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de desarrollo/debug
    DEBUG_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 30,
        message: 'Límite de debug APIs excedido.',
        enableRedis: false,
        enableMetrics: true,
        enableLogging: true
    }
};
function ipKeyGenerator(request) {
    const ip = getClientIP(request);
    return `ip:${ip}`;
}
function userKeyGenerator(request) {
    // Intentar obtener user ID de diferentes fuentes
    const userId = getUserId(request);
    const ip = getClientIP(request);
    return userId ? `user:${userId}` : `ip:${ip}`;
}
function endpointKeyGenerator(request) {
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    return `endpoint:${ip}:${endpoint}`;
}
function hybridKeyGenerator(request) {
    const userId = getUserId(request);
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    const userPart = userId ? `user:${userId}` : `ip:${ip}`;
    return `${userPart}:${endpoint}`;
}
// =====================================================
// UTILIDADES
// =====================================================
/**
 * Obtiene la IP del cliente
 */ function getClientIP(request) {
    // Intentar diferentes headers de IP
    const headers = [
        'x-forwarded-for',
        'x-real-ip',
        'x-client-ip',
        'cf-connecting-ip'
    ];
    for (const header of headers){
        let ip = null;
        if ('headers' in request && typeof request.headers.get === 'function') {
            // NextRequest
            ip = request.headers.get(header);
        } else if ('headers' in request) {
            // NextApiRequest
            const headerValue = request.headers[header];
            ip = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
        }
        if (ip) {
            // Tomar la primera IP si hay múltiples
            return ip.split(',')[0].trim();
        }
    }
    return 'unknown';
}
/**
 * Obtiene el ID del usuario autenticado
 */ function getUserId(request) {
    // Intentar obtener de diferentes fuentes
    // 1. Headers de Clerk
    let userId = null;
    if ('headers' in request && typeof request.headers.get === 'function') {
        // NextRequest
        userId = request.headers.get('x-clerk-user-id');
    } else if ('headers' in request) {
        // NextApiRequest
        const headerValue = request.headers['x-clerk-user-id'];
        userId = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
    }
    // 2. Contexto enterprise si está disponible
    if (!userId && request.enterpriseAuth?.userId) {
        userId = request.enterpriseAuth.userId;
    }
    // 3. Contexto de autenticación si está disponible
    if (!userId && request.auth?.userId) {
        userId = request.auth.userId;
    }
    return userId;
}
/**
 * Obtiene el endpoint de la request
 */ function getEndpoint(request) {
    if ('nextUrl' in request) {
        // NextRequest
        return request.nextUrl.pathname;
    } else if ('url' in request) {
        // NextApiRequest
        try {
            const url = new URL(request.url || '', 'http://localhost');
            return url.pathname;
        } catch  {
            return '/unknown';
        }
    }
    return '/unknown';
}
class MemoryRateLimitStore {
    constructor(){
        this.store = new Map();
        // Limpiar entradas expiradas cada 5 minutos
        this.cleanupInterval = setInterval(()=>{
            this.cleanup();
        }, 5 * 60 * 1000);
    }
    get(key) {
        const entry = this.store.get(key);
        if (!entry) {
            return null;
        }
        // Verificar si ha expirado
        if (Date.now() > entry.resetTime) {
            this.store.delete(key);
            return null;
        }
        return entry;
    }
    set(key, entry) {
        this.store.set(key, entry);
    }
    increment(key) {
        const entry = this.get(key);
        if (entry) {
            entry.count++;
            this.set(key, entry);
            return entry.count;
        }
        return 0;
    }
    cleanup() {
        const now = Date.now();
        let cleaned = 0;
        for (const [key, entry] of this.store.entries()){
            if (now > entry.resetTime) {
                this.store.delete(key);
                cleaned++;
            }
        }
        if (cleaned > 0) {
            console.log(`[MEMORY_RATE_LIMIT] Limpiadas ${cleaned} entradas expiradas`);
        }
    }
    getStats() {
        const entries = this.store.size;
        const memoryUsage = JSON.stringify([
            ...this.store.entries()
        ]).length;
        return {
            entries,
            memoryUsage
        };
    }
    destroy() {
        if (this.cleanupInterval) {
            clearInterval(this.cleanupInterval);
        }
        this.store.clear();
    }
}
// Instancia global del store en memoria
const memoryStore = new MemoryRateLimitStore();
// =====================================================
// MÉTRICAS GLOBALES
// =====================================================
class RateLimitMetricsCollector {
    recordRequest(result, ip, endpoint) {
        this.metrics.totalRequests++;
        if (result.allowed) {
            this.metrics.allowedRequests++;
        } else {
            this.metrics.blockedRequests++;
            // Registrar IP bloqueada
            const currentCount = this.blockedIPs.get(ip) || 0;
            this.blockedIPs.set(ip, currentCount + 1);
        }
        // Registrar fuente
        if (result.source === 'redis') {
            this.metrics.redisHits++;
        } else if (result.source === 'memory') {
            this.metrics.memoryFallbacks++;
        } else if (result.source === 'error') {
            this.metrics.errors++;
        }
        // Registrar tiempo de respuesta
        if (result.metrics?.responseTime) {
            this.responseTimes.push(result.metrics.responseTime);
            // Mantener solo los últimos 1000 tiempos
            if (this.responseTimes.length > 1000) {
                this.responseTimes = this.responseTimes.slice(-1000);
            }
            // Calcular promedio
            this.metrics.averageResponseTime = this.responseTimes.reduce((a, b)=>a + b, 0) / this.responseTimes.length;
        }
        // Registrar endpoint
        const endpointCount = this.endpointCounts.get(endpoint) || 0;
        this.endpointCounts.set(endpoint, endpointCount + 1);
        // Actualizar tops
        this.updateTopLists();
    }
    updateTopLists() {
        // Top IPs bloqueadas
        this.metrics.topBlockedIPs = Array.from(this.blockedIPs.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([ip, count])=>({
                ip,
                count
            }));
        // Top endpoints
        this.metrics.topEndpoints = Array.from(this.endpointCounts.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([endpoint, count])=>({
                endpoint,
                count
            }));
    }
    getMetrics() {
        return {
            ...this.metrics
        };
    }
    reset() {
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs.clear();
        this.endpointCounts.clear();
    }
    constructor(){
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs = new Map();
        this.endpointCounts = new Map();
    }
}
// Instancia global del collector de métricas
const metricsCollector = new RateLimitMetricsCollector();
// =====================================================
// IMPLEMENTACIÓN REDIS
// =====================================================
/**
 * Verifica si Redis está disponible
 */ async function isRedisAvailable() {
    try {
        // Intentar importar Redis dinámicamente
        const { redis } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../redis")));
        if (!redis) return false;
        // Test de conexión simple
        await redis.ping();
        return true;
    } catch (error) {
        console.warn('[RATE_LIMIT] Redis no disponible, usando fallback en memoria');
        return false;
    }
}
/**
 * Rate limiting con Redis
 */ async function rateLimitWithRedis(key, config) {
    const startTime = Date.now();
    try {
        const { redis } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../redis")));
        const now = Date.now();
        const window = Math.floor(now / config.windowMs);
        const redisKey = `rate_limit:${key}:${window}`;
        // Usar pipeline para operaciones atómicas
        const pipeline = redis.pipeline();
        pipeline.incr(redisKey);
        pipeline.expire(redisKey, Math.ceil(config.windowMs / 1000));
        const results = await pipeline.exec();
        const count = results?.[0]?.[1] || 1;
        const remaining = Math.max(0, config.maxRequests - count);
        const resetTime = (window + 1) * config.windowMs;
        const allowed = count <= config.maxRequests;
        return {
            allowed,
            limit: config.maxRequests,
            remaining,
            resetTime,
            retryAfter: allowed ? undefined : Math.ceil((resetTime - now) / 1000),
            source: 'redis',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: true,
                keyGenerated: redisKey
            }
        };
    } catch (error) {
        console.error('[RATE_LIMIT] Error en Redis:', error);
        // Fallback a memoria en caso de error
        return rateLimitWithMemory(key, config);
    }
}
/**
 * Rate limiting con memoria (fallback)
 */ function rateLimitWithMemory(key, config) {
    const startTime = Date.now();
    const now = Date.now();
    let entry = memoryStore.get(key);
    if (!entry) {
        // Primera request en esta ventana
        entry = {
            count: 1,
            resetTime: now + config.windowMs,
            firstRequest: now
        };
        memoryStore.set(key, entry);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests - 1,
            resetTime: entry.resetTime,
            source: 'memory',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: false,
                keyGenerated: key
            }
        };
    }
    // Incrementar contador
    entry.count++;
    memoryStore.set(key, entry);
    const allowed = entry.count <= config.maxRequests;
    const remaining = Math.max(0, config.maxRequests - entry.count);
    return {
        allowed,
        limit: config.maxRequests,
        remaining,
        resetTime: entry.resetTime,
        retryAfter: allowed ? undefined : Math.ceil((entry.resetTime - now) / 1000),
        source: 'memory',
        metrics: {
            responseTime: Date.now() - startTime,
            cacheHit: true,
            keyGenerated: key
        }
    };
}
async function checkEnterpriseRateLimit(request, configName, customConfig) {
    const baseConfig = ENTERPRISE_RATE_LIMIT_CONFIGS[configName];
    if (!baseConfig) {
        return {
            allowed: true,
            limit: 1000,
            remaining: 999,
            resetTime: Date.now() + 60000,
            error: `Configuración '${configName}' no encontrada`,
            code: 'CONFIG_NOT_FOUND',
            source: 'error'
        };
    }
    const config = {
        ...baseConfig,
        ...customConfig
    };
    const keyGenerator = config.keyGenerator || hybridKeyGenerator;
    const key = keyGenerator(request);
    let result;
    try {
        // Intentar Redis primero si está habilitado
        if (config.enableRedis !== false && await isRedisAvailable()) {
            result = await rateLimitWithRedis(key, config);
        } else {
            result = rateLimitWithMemory(key, config);
        }
        // Registrar métricas si está habilitado
        if (config.enableMetrics) {
            const ip = getClientIP(request);
            const endpoint = getEndpoint(request);
            metricsCollector.recordRequest(result, ip, endpoint);
        }
        // Logging si está habilitado
        if (config.enableLogging) {
            if (!result.allowed) {
                console.warn(`[RATE_LIMIT] Límite excedido para ${key}: ${result.remaining}/${result.limit}`);
                // Callback personalizado si está definido
                if (config.onLimitReached) {
                    config.onLimitReached(key, request);
                }
            }
        }
        return result;
    } catch (error) {
        console.error('[RATE_LIMIT] Error en checkEnterpriseRateLimit:', error);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests,
            resetTime: Date.now() + config.windowMs,
            error: 'Error interno en rate limiting',
            code: 'INTERNAL_ERROR',
            source: 'error'
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxyYXRlLWxpbWl0aW5nXFxlbnRlcnByaXNlLXJhdGUtbGltaXRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpc3RlbWEgRW50ZXJwcmlzZSBkZSBSYXRlIExpbWl0aW5nXG4gKiBVbmlmaWNhIHRvZGFzIGxhcyBpbXBsZW1lbnRhY2lvbmVzIGRlIHJhdGUgbGltaXRpbmcgY29uIFJlZGlzIHkgZmFsbGJhY2sgZW4gbWVtb3JpYVxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgWSBJTlRFUkZBQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEVudGVycHJpc2VSYXRlTGltaXRDb25maWcge1xuICB3aW5kb3dNczogbnVtYmVyO1xuICBtYXhSZXF1ZXN0czogbnVtYmVyO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICBrZXlHZW5lcmF0b3I/OiAocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCkgPT4gc3RyaW5nO1xuICBza2lwU3VjY2Vzc2Z1bFJlcXVlc3RzPzogYm9vbGVhbjtcbiAgc2tpcEZhaWxlZFJlcXVlc3RzPzogYm9vbGVhbjtcbiAgZW5hYmxlUmVkaXM/OiBib29sZWFuO1xuICBlbmFibGVNZW1vcnlGYWxsYmFjaz86IGJvb2xlYW47XG4gIGVuYWJsZU1ldHJpY3M/OiBib29sZWFuO1xuICBlbmFibGVMb2dnaW5nPzogYm9vbGVhbjtcbiAgY3VzdG9tSGVhZGVycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIG9uTGltaXRSZWFjaGVkPzogKGtleTogc3RyaW5nLCByZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVudGVycHJpc2VSYXRlTGltaXRSZXN1bHQge1xuICBhbGxvd2VkOiBib29sZWFuO1xuICBsaW1pdDogbnVtYmVyO1xuICByZW1haW5pbmc6IG51bWJlcjtcbiAgcmVzZXRUaW1lOiBudW1iZXI7XG4gIHJldHJ5QWZ0ZXI/OiBudW1iZXI7XG4gIGVycm9yPzogc3RyaW5nO1xuICBjb2RlPzogc3RyaW5nO1xuICBzb3VyY2U6ICdyZWRpcycgfCAnbWVtb3J5JyB8ICdlcnJvcic7XG4gIG1ldHJpY3M/OiB7XG4gICAgcmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gICAgY2FjaGVIaXQ6IGJvb2xlYW47XG4gICAga2V5R2VuZXJhdGVkOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF0ZUxpbWl0TWV0cmljcyB7XG4gIHRvdGFsUmVxdWVzdHM6IG51bWJlcjtcbiAgYWxsb3dlZFJlcXVlc3RzOiBudW1iZXI7XG4gIGJsb2NrZWRSZXF1ZXN0czogbnVtYmVyO1xuICByZWRpc0hpdHM6IG51bWJlcjtcbiAgbWVtb3J5RmFsbGJhY2tzOiBudW1iZXI7XG4gIGVycm9yczogbnVtYmVyO1xuICBhdmVyYWdlUmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIHRvcEJsb2NrZWRJUHM6IEFycmF5PHsgaXA6IHN0cmluZzsgY291bnQ6IG51bWJlciB9PjtcbiAgdG9wRW5kcG9pbnRzOiBBcnJheTx7IGVuZHBvaW50OiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT05GSUdVUkFDSU9ORVMgUFJFREVGSU5JREFTIEVOVEVSUFJJU0Vcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHUzogUmVjb3JkPHN0cmluZywgRW50ZXJwcmlzZVJhdGVMaW1pdENvbmZpZz4gPSB7XG4gIC8vIEF1dGVudGljYWNpw7NuIGNyw610aWNhXG4gIENSSVRJQ0FMX0FVVEg6IHtcbiAgICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogMywgLy8gMyBpbnRlbnRvcyBwb3IgMTUgbWludXRvc1xuICAgIG1lc3NhZ2U6ICdEZW1hc2lhZG9zIGludGVudG9zIGRlIGF1dGVudGljYWNpw7NuIGNyw610aWNhLiBJbnRlbnRhIGVuIDE1IG1pbnV0b3MuJyxcbiAgICBlbmFibGVSZWRpczogdHJ1ZSxcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IHRydWVcbiAgfSxcblxuICAvLyBBZG1pbiBBUElzXG4gIEFETUlOX0FQSToge1xuICAgIHdpbmRvd01zOiA1ICogNjAgKiAxMDAwLCAvLyA1IG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogNTAsIC8vIDUwIHJlcXVlc3RzIHBvciA1IG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSByZXF1ZXN0cyBhZG1pbmlzdHJhdGl2YXMgZXhjZWRpZG8uIEludGVudGEgZW4gNSBtaW51dG9zLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlXG4gIH0sXG5cbiAgLy8gQVBJcyBkZSBwYWdvc1xuICBQQVlNRU5UX0FQSToge1xuICAgIHdpbmRvd01zOiAxMCAqIDYwICogMTAwMCwgLy8gMTAgbWludXRvc1xuICAgIG1heFJlcXVlc3RzOiAxNSwgLy8gMTUgcmVxdWVzdHMgcG9yIDEwIG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSByZXF1ZXN0cyBkZSBwYWdvcyBleGNlZGlkby4gSW50ZW50YSBlbiAxMCBtaW51dG9zLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlLFxuICAgIG9uTGltaXRSZWFjaGVkOiAoa2V5LCByZXF1ZXN0KSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYFtQQVlNRU5UX1JBVEVfTElNSVRdIEzDrW1pdGUgZXhjZWRpZG8gcGFyYSAke2tleX1gKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQVBJcyBww7pibGljYXMgZGUgcHJvZHVjdG9zXG4gIFBVQkxJQ19BUEk6IHtcbiAgICB3aW5kb3dNczogMSAqIDYwICogMTAwMCwgLy8gMSBtaW51dG9cbiAgICBtYXhSZXF1ZXN0czogMTAwLCAvLyAxMDAgcmVxdWVzdHMgcG9yIG1pbnV0b1xuICAgIG1lc3NhZ2U6ICdMw61taXRlIGRlIHJlcXVlc3RzIHDDumJsaWNhcyBleGNlZGlkby4gSW50ZW50YSBlbiAxIG1pbnV0by4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogZmFsc2UgLy8gTm8gbG9nZ2VhciBBUElzIHDDumJsaWNhc1xuICB9LFxuXG4gIC8vIFdlYmhvb2tzXG4gIFdFQkhPT0tfQVBJOiB7XG4gICAgd2luZG93TXM6IDEgKiA2MCAqIDEwMDAsIC8vIDEgbWludXRvXG4gICAgbWF4UmVxdWVzdHM6IDIwMCwgLy8gMjAwIHdlYmhvb2tzIHBvciBtaW51dG9cbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSB3ZWJob29rcyBleGNlZGlkby4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZVxuICB9LFxuXG4gIC8vIELDunNxdWVkYXMgeSBjb25zdWx0YXNcbiAgU0VBUkNIX0FQSToge1xuICAgIHdpbmRvd01zOiAxICogNjAgKiAxMDAwLCAvLyAxIG1pbnV0b1xuICAgIG1heFJlcXVlc3RzOiA2MCwgLy8gNjAgYsO6c3F1ZWRhcyBwb3IgbWludXRvXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgYsO6c3F1ZWRhcyBleGNlZGlkby4gSW50ZW50YSBlbiAxIG1pbnV0by4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogZmFsc2VcbiAgfSxcblxuICAvLyBVcGxvYWQgZGUgYXJjaGl2b3NcbiAgVVBMT0FEX0FQSToge1xuICAgIHdpbmRvd01zOiA1ICogNjAgKiAxMDAwLCAvLyA1IG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogMTAsIC8vIDEwIHVwbG9hZHMgcG9yIDUgbWludXRvc1xuICAgIG1lc3NhZ2U6ICdMw61taXRlIGRlIHVwbG9hZHMgZXhjZWRpZG8uIEludGVudGEgZW4gNSBtaW51dG9zLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlXG4gIH0sXG5cbiAgLy8gQVBJcyBkZSBkZXNhcnJvbGxvL2RlYnVnXG4gIERFQlVHX0FQSToge1xuICAgIHdpbmRvd01zOiAxICogNjAgKiAxMDAwLCAvLyAxIG1pbnV0b1xuICAgIG1heFJlcXVlc3RzOiAzMCwgLy8gMzAgcmVxdWVzdHMgcG9yIG1pbnV0b1xuICAgIG1lc3NhZ2U6ICdMw61taXRlIGRlIGRlYnVnIEFQSXMgZXhjZWRpZG8uJyxcbiAgICBlbmFibGVSZWRpczogZmFsc2UsIC8vIFVzYXIgbWVtb3JpYSBwYXJhIGRlYnVnXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlXG4gIH1cbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHRU5FUkFET1JFUyBERSBDTEFWRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2VuZXJhZG9yIGRlIGNsYXZlIHBvciBJUFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXBLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdCk7XG4gIHJldHVybiBgaXA6JHtpcH1gO1xufVxuXG4vKipcbiAqIEdlbmVyYWRvciBkZSBjbGF2ZSBwb3IgdXN1YXJpbyBhdXRlbnRpY2Fkb1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlcktleUdlbmVyYXRvcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgLy8gSW50ZW50YXIgb2J0ZW5lciB1c2VyIElEIGRlIGRpZmVyZW50ZXMgZnVlbnRlc1xuICBjb25zdCB1c2VySWQgPSBnZXRVc2VySWQocmVxdWVzdCk7XG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdCk7XG4gIFxuICByZXR1cm4gdXNlcklkID8gYHVzZXI6JHt1c2VySWR9YCA6IGBpcDoke2lwfWA7XG59XG5cbi8qKlxuICogR2VuZXJhZG9yIGRlIGNsYXZlIHBvciBlbmRwb2ludFxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5kcG9pbnRLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdCk7XG4gIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQocmVxdWVzdCk7XG4gIFxuICByZXR1cm4gYGVuZHBvaW50OiR7aXB9OiR7ZW5kcG9pbnR9YDtcbn1cblxuLyoqXG4gKiBHZW5lcmFkb3IgZGUgY2xhdmUgaMOtYnJpZG8gKHVzdWFyaW8gKyBlbmRwb2ludClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh5YnJpZEtleUdlbmVyYXRvcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgdXNlcklkID0gZ2V0VXNlcklkKHJlcXVlc3QpO1xuICBjb25zdCBpcCA9IGdldENsaWVudElQKHJlcXVlc3QpO1xuICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KHJlcXVlc3QpO1xuICBcbiAgY29uc3QgdXNlclBhcnQgPSB1c2VySWQgPyBgdXNlcjoke3VzZXJJZH1gIDogYGlwOiR7aXB9YDtcbiAgcmV0dXJuIGAke3VzZXJQYXJ0fToke2VuZHBvaW50fWA7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVVElMSURBREVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIE9idGllbmUgbGEgSVAgZGVsIGNsaWVudGVcbiAqL1xuZnVuY3Rpb24gZ2V0Q2xpZW50SVAocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIC8vIEludGVudGFyIGRpZmVyZW50ZXMgaGVhZGVycyBkZSBJUFxuICBjb25zdCBoZWFkZXJzID0gW1xuICAgICd4LWZvcndhcmRlZC1mb3InLFxuICAgICd4LXJlYWwtaXAnLFxuICAgICd4LWNsaWVudC1pcCcsXG4gICAgJ2NmLWNvbm5lY3RpbmctaXAnXG4gIF07XG5cbiAgZm9yIChjb25zdCBoZWFkZXIgb2YgaGVhZGVycykge1xuICAgIGxldCBpcDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0ICYmIHR5cGVvZiByZXF1ZXN0LmhlYWRlcnMuZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBOZXh0UmVxdWVzdFxuICAgICAgaXAgPSAocmVxdWVzdCBhcyBOZXh0UmVxdWVzdCkuaGVhZGVycy5nZXQoaGVhZGVyKTtcbiAgICB9IGVsc2UgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBOZXh0QXBpUmVxdWVzdFxuICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSAocmVxdWVzdCBhcyBOZXh0QXBpUmVxdWVzdCkuaGVhZGVyc1toZWFkZXJdO1xuICAgICAgaXAgPSBBcnJheS5pc0FycmF5KGhlYWRlclZhbHVlKSA/IGhlYWRlclZhbHVlWzBdIDogaGVhZGVyVmFsdWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaXApIHtcbiAgICAgIC8vIFRvbWFyIGxhIHByaW1lcmEgSVAgc2kgaGF5IG3Dumx0aXBsZXNcbiAgICAgIHJldHVybiBpcC5zcGxpdCgnLCcpWzBdLnRyaW0oKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJ3Vua25vd24nO1xufVxuXG4vKipcbiAqIE9idGllbmUgZWwgSUQgZGVsIHVzdWFyaW8gYXV0ZW50aWNhZG9cbiAqL1xuZnVuY3Rpb24gZ2V0VXNlcklkKHJlcXVlc3Q6IE5leHRSZXF1ZXN0IHwgTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcbiAgLy8gSW50ZW50YXIgb2J0ZW5lciBkZSBkaWZlcmVudGVzIGZ1ZW50ZXNcbiAgXG4gIC8vIDEuIEhlYWRlcnMgZGUgQ2xlcmtcbiAgbGV0IHVzZXJJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIFxuICBpZiAoJ2hlYWRlcnMnIGluIHJlcXVlc3QgJiYgdHlwZW9mIHJlcXVlc3QuaGVhZGVycy5nZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBOZXh0UmVxdWVzdFxuICAgIHVzZXJJZCA9IChyZXF1ZXN0IGFzIE5leHRSZXF1ZXN0KS5oZWFkZXJzLmdldCgneC1jbGVyay11c2VyLWlkJyk7XG4gIH0gZWxzZSBpZiAoJ2hlYWRlcnMnIGluIHJlcXVlc3QpIHtcbiAgICAvLyBOZXh0QXBpUmVxdWVzdFxuICAgIGNvbnN0IGhlYWRlclZhbHVlID0gKHJlcXVlc3QgYXMgTmV4dEFwaVJlcXVlc3QpLmhlYWRlcnNbJ3gtY2xlcmstdXNlci1pZCddO1xuICAgIHVzZXJJZCA9IEFycmF5LmlzQXJyYXkoaGVhZGVyVmFsdWUpID8gaGVhZGVyVmFsdWVbMF0gOiBoZWFkZXJWYWx1ZSB8fCBudWxsO1xuICB9XG5cbiAgLy8gMi4gQ29udGV4dG8gZW50ZXJwcmlzZSBzaSBlc3TDoSBkaXNwb25pYmxlXG4gIGlmICghdXNlcklkICYmIChyZXF1ZXN0IGFzIGFueSkuZW50ZXJwcmlzZUF1dGg/LnVzZXJJZCkge1xuICAgIHVzZXJJZCA9IChyZXF1ZXN0IGFzIGFueSkuZW50ZXJwcmlzZUF1dGgudXNlcklkO1xuICB9XG5cbiAgLy8gMy4gQ29udGV4dG8gZGUgYXV0ZW50aWNhY2nDs24gc2kgZXN0w6EgZGlzcG9uaWJsZVxuICBpZiAoIXVzZXJJZCAmJiAocmVxdWVzdCBhcyBhbnkpLmF1dGg/LnVzZXJJZCkge1xuICAgIHVzZXJJZCA9IChyZXF1ZXN0IGFzIGFueSkuYXV0aC51c2VySWQ7XG4gIH1cblxuICByZXR1cm4gdXNlcklkO1xufVxuXG4vKipcbiAqIE9idGllbmUgZWwgZW5kcG9pbnQgZGUgbGEgcmVxdWVzdFxuICovXG5mdW5jdGlvbiBnZXRFbmRwb2ludChyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgaWYgKCduZXh0VXJsJyBpbiByZXF1ZXN0KSB7XG4gICAgLy8gTmV4dFJlcXVlc3RcbiAgICByZXR1cm4gKHJlcXVlc3QgYXMgTmV4dFJlcXVlc3QpLm5leHRVcmwucGF0aG5hbWU7XG4gIH0gZWxzZSBpZiAoJ3VybCcgaW4gcmVxdWVzdCkge1xuICAgIC8vIE5leHRBcGlSZXF1ZXN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoKHJlcXVlc3QgYXMgTmV4dEFwaVJlcXVlc3QpLnVybCB8fCAnJywgJ2h0dHA6Ly9sb2NhbGhvc3QnKTtcbiAgICAgIHJldHVybiB1cmwucGF0aG5hbWU7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gJy91bmtub3duJztcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiAnL3Vua25vd24nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU1RPUkUgRU4gTUVNT1JJQSAoRkFMTEJBQ0spXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbnRlcmZhY2UgTWVtb3J5UmF0ZUxpbWl0RW50cnkge1xuICBjb3VudDogbnVtYmVyO1xuICByZXNldFRpbWU6IG51bWJlcjtcbiAgZmlyc3RSZXF1ZXN0OiBudW1iZXI7XG59XG5cbmNsYXNzIE1lbW9yeVJhdGVMaW1pdFN0b3JlIHtcbiAgcHJpdmF0ZSBzdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBNZW1vcnlSYXRlTGltaXRFbnRyeT4oKTtcbiAgcHJpdmF0ZSBjbGVhbnVwSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIExpbXBpYXIgZW50cmFkYXMgZXhwaXJhZGFzIGNhZGEgNSBtaW51dG9zXG4gICAgdGhpcy5jbGVhbnVwSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB9LCA1ICogNjAgKiAxMDAwKTtcbiAgfVxuXG4gIGdldChrZXk6IHN0cmluZyk6IE1lbW9yeVJhdGVMaW1pdEVudHJ5IHwgbnVsbCB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLnN0b3JlLmdldChrZXkpO1xuICAgIFxuICAgIGlmICghZW50cnkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBzaSBoYSBleHBpcmFkb1xuICAgIGlmIChEYXRlLm5vdygpID4gZW50cnkucmVzZXRUaW1lKSB7XG4gICAgICB0aGlzLnN0b3JlLmRlbGV0ZShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgc2V0KGtleTogc3RyaW5nLCBlbnRyeTogTWVtb3J5UmF0ZUxpbWl0RW50cnkpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JlLnNldChrZXksIGVudHJ5KTtcbiAgfVxuXG4gIGluY3JlbWVudChrZXk6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmdldChrZXkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgZW50cnkuY291bnQrKztcbiAgICAgIHRoaXMuc2V0KGtleSwgZW50cnkpO1xuICAgICAgcmV0dXJuIGVudHJ5LmNvdW50O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYW51cCgpOiB2b2lkIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGxldCBjbGVhbmVkID0gMDtcblxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuc3RvcmUuZW50cmllcygpKSB7XG4gICAgICBpZiAobm93ID4gZW50cnkucmVzZXRUaW1lKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKGtleSk7XG4gICAgICAgIGNsZWFuZWQrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2xlYW5lZCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbTUVNT1JZX1JBVEVfTElNSVRdIExpbXBpYWRhcyAke2NsZWFuZWR9IGVudHJhZGFzIGV4cGlyYWRhc2ApO1xuICAgIH1cbiAgfVxuXG4gIGdldFN0YXRzKCk6IHsgZW50cmllczogbnVtYmVyOyBtZW1vcnlVc2FnZTogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGVudHJpZXMgPSB0aGlzLnN0b3JlLnNpemU7XG4gICAgY29uc3QgbWVtb3J5VXNhZ2UgPSBKU09OLnN0cmluZ2lmeShbLi4udGhpcy5zdG9yZS5lbnRyaWVzKCldKS5sZW5ndGg7XG4gICAgXG4gICAgcmV0dXJuIHsgZW50cmllcywgbWVtb3J5VXNhZ2UgfTtcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xlYW51cEludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuY2xlYW51cEludGVydmFsKTtcbiAgICB9XG4gICAgdGhpcy5zdG9yZS5jbGVhcigpO1xuICB9XG59XG5cbi8vIEluc3RhbmNpYSBnbG9iYWwgZGVsIHN0b3JlIGVuIG1lbW9yaWFcbmNvbnN0IG1lbW9yeVN0b3JlID0gbmV3IE1lbW9yeVJhdGVMaW1pdFN0b3JlKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNw4lUUklDQVMgR0xPQkFMRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNsYXNzIFJhdGVMaW1pdE1ldHJpY3NDb2xsZWN0b3Ige1xuICBwcml2YXRlIG1ldHJpY3M6IFJhdGVMaW1pdE1ldHJpY3MgPSB7XG4gICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICBhbGxvd2VkUmVxdWVzdHM6IDAsXG4gICAgYmxvY2tlZFJlcXVlc3RzOiAwLFxuICAgIHJlZGlzSGl0czogMCxcbiAgICBtZW1vcnlGYWxsYmFja3M6IDAsXG4gICAgZXJyb3JzOiAwLFxuICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDAsXG4gICAgdG9wQmxvY2tlZElQczogW10sXG4gICAgdG9wRW5kcG9pbnRzOiBbXVxuICB9O1xuXG4gIHByaXZhdGUgcmVzcG9uc2VUaW1lczogbnVtYmVyW10gPSBbXTtcbiAgcHJpdmF0ZSBibG9ja2VkSVBzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgcHJpdmF0ZSBlbmRwb2ludENvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG5cbiAgcmVjb3JkUmVxdWVzdChyZXN1bHQ6IEVudGVycHJpc2VSYXRlTGltaXRSZXN1bHQsIGlwOiBzdHJpbmcsIGVuZHBvaW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm1ldHJpY3MudG90YWxSZXF1ZXN0cysrO1xuXG4gICAgaWYgKHJlc3VsdC5hbGxvd2VkKSB7XG4gICAgICB0aGlzLm1ldHJpY3MuYWxsb3dlZFJlcXVlc3RzKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWV0cmljcy5ibG9ja2VkUmVxdWVzdHMrKztcbiAgICAgIFxuICAgICAgLy8gUmVnaXN0cmFyIElQIGJsb3F1ZWFkYVxuICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy5ibG9ja2VkSVBzLmdldChpcCkgfHwgMDtcbiAgICAgIHRoaXMuYmxvY2tlZElQcy5zZXQoaXAsIGN1cnJlbnRDb3VudCArIDEpO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdHJhciBmdWVudGVcbiAgICBpZiAocmVzdWx0LnNvdXJjZSA9PT0gJ3JlZGlzJykge1xuICAgICAgdGhpcy5tZXRyaWNzLnJlZGlzSGl0cysrO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LnNvdXJjZSA9PT0gJ21lbW9yeScpIHtcbiAgICAgIHRoaXMubWV0cmljcy5tZW1vcnlGYWxsYmFja3MrKztcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5zb3VyY2UgPT09ICdlcnJvcicpIHtcbiAgICAgIHRoaXMubWV0cmljcy5lcnJvcnMrKztcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RyYXIgdGllbXBvIGRlIHJlc3B1ZXN0YVxuICAgIGlmIChyZXN1bHQubWV0cmljcz8ucmVzcG9uc2VUaW1lKSB7XG4gICAgICB0aGlzLnJlc3BvbnNlVGltZXMucHVzaChyZXN1bHQubWV0cmljcy5yZXNwb25zZVRpbWUpO1xuICAgICAgXG4gICAgICAvLyBNYW50ZW5lciBzb2xvIGxvcyDDumx0aW1vcyAxMDAwIHRpZW1wb3NcbiAgICAgIGlmICh0aGlzLnJlc3BvbnNlVGltZXMubGVuZ3RoID4gMTAwMCkge1xuICAgICAgICB0aGlzLnJlc3BvbnNlVGltZXMgPSB0aGlzLnJlc3BvbnNlVGltZXMuc2xpY2UoLTEwMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhciBwcm9tZWRpb1xuICAgICAgdGhpcy5tZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWUgPSBcbiAgICAgICAgdGhpcy5yZXNwb25zZVRpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gdGhpcy5yZXNwb25zZVRpbWVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RyYXIgZW5kcG9pbnRcbiAgICBjb25zdCBlbmRwb2ludENvdW50ID0gdGhpcy5lbmRwb2ludENvdW50cy5nZXQoZW5kcG9pbnQpIHx8IDA7XG4gICAgdGhpcy5lbmRwb2ludENvdW50cy5zZXQoZW5kcG9pbnQsIGVuZHBvaW50Q291bnQgKyAxKTtcblxuICAgIC8vIEFjdHVhbGl6YXIgdG9wc1xuICAgIHRoaXMudXBkYXRlVG9wTGlzdHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVG9wTGlzdHMoKTogdm9pZCB7XG4gICAgLy8gVG9wIElQcyBibG9xdWVhZGFzXG4gICAgdGhpcy5tZXRyaWNzLnRvcEJsb2NrZWRJUHMgPSBBcnJheS5mcm9tKHRoaXMuYmxvY2tlZElQcy5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXG4gICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAubWFwKChbaXAsIGNvdW50XSkgPT4gKHsgaXAsIGNvdW50IH0pKTtcblxuICAgIC8vIFRvcCBlbmRwb2ludHNcbiAgICB0aGlzLm1ldHJpY3MudG9wRW5kcG9pbnRzID0gQXJyYXkuZnJvbSh0aGlzLmVuZHBvaW50Q291bnRzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAgIC5zbGljZSgwLCAxMClcbiAgICAgIC5tYXAoKFtlbmRwb2ludCwgY291bnRdKSA9PiAoeyBlbmRwb2ludCwgY291bnQgfSkpO1xuICB9XG5cbiAgZ2V0TWV0cmljcygpOiBSYXRlTGltaXRNZXRyaWNzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLm1ldHJpY3MgfTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubWV0cmljcyA9IHtcbiAgICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgICBhbGxvd2VkUmVxdWVzdHM6IDAsXG4gICAgICBibG9ja2VkUmVxdWVzdHM6IDAsXG4gICAgICByZWRpc0hpdHM6IDAsXG4gICAgICBtZW1vcnlGYWxsYmFja3M6IDAsXG4gICAgICBlcnJvcnM6IDAsXG4gICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLFxuICAgICAgdG9wQmxvY2tlZElQczogW10sXG4gICAgICB0b3BFbmRwb2ludHM6IFtdXG4gICAgfTtcbiAgICB0aGlzLnJlc3BvbnNlVGltZXMgPSBbXTtcbiAgICB0aGlzLmJsb2NrZWRJUHMuY2xlYXIoKTtcbiAgICB0aGlzLmVuZHBvaW50Q291bnRzLmNsZWFyKCk7XG4gIH1cbn1cblxuLy8gSW5zdGFuY2lhIGdsb2JhbCBkZWwgY29sbGVjdG9yIGRlIG3DqXRyaWNhc1xuY29uc3QgbWV0cmljc0NvbGxlY3RvciA9IG5ldyBSYXRlTGltaXRNZXRyaWNzQ29sbGVjdG9yKCk7XG5cbi8vIEV4cG9ydGFyIHBhcmEgdXNvIGV4dGVybm9cbmV4cG9ydCB7IG1lbW9yeVN0b3JlLCBtZXRyaWNzQ29sbGVjdG9yIH07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBJTVBMRU1FTlRBQ0nDk04gUkVESVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVmVyaWZpY2Egc2kgUmVkaXMgZXN0w6EgZGlzcG9uaWJsZVxuICovXG5hc3luYyBmdW5jdGlvbiBpc1JlZGlzQXZhaWxhYmxlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIC8vIEludGVudGFyIGltcG9ydGFyIFJlZGlzIGRpbsOhbWljYW1lbnRlXG4gICAgY29uc3QgeyByZWRpcyB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9yZWRpcycpO1xuICAgIGlmICghcmVkaXMpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFRlc3QgZGUgY29uZXhpw7NuIHNpbXBsZVxuICAgIGF3YWl0IHJlZGlzLnBpbmcoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ1tSQVRFX0xJTUlUXSBSZWRpcyBubyBkaXNwb25pYmxlLCB1c2FuZG8gZmFsbGJhY2sgZW4gbWVtb3JpYScpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIFJhdGUgbGltaXRpbmcgY29uIFJlZGlzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJhdGVMaW1pdFdpdGhSZWRpcyhcbiAga2V5OiBzdHJpbmcsXG4gIGNvbmZpZzogRW50ZXJwcmlzZVJhdGVMaW1pdENvbmZpZ1xuKTogUHJvbWlzZTxFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0PiB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJlZGlzIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3JlZGlzJyk7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB3aW5kb3cgPSBNYXRoLmZsb29yKG5vdyAvIGNvbmZpZy53aW5kb3dNcyk7XG4gICAgY29uc3QgcmVkaXNLZXkgPSBgcmF0ZV9saW1pdDoke2tleX06JHt3aW5kb3d9YDtcblxuICAgIC8vIFVzYXIgcGlwZWxpbmUgcGFyYSBvcGVyYWNpb25lcyBhdMOzbWljYXNcbiAgICBjb25zdCBwaXBlbGluZSA9IHJlZGlzLnBpcGVsaW5lKCk7XG4gICAgcGlwZWxpbmUuaW5jcihyZWRpc0tleSk7XG4gICAgcGlwZWxpbmUuZXhwaXJlKHJlZGlzS2V5LCBNYXRoLmNlaWwoY29uZmlnLndpbmRvd01zIC8gMTAwMCkpO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHBpcGVsaW5lLmV4ZWMoKTtcbiAgICBjb25zdCBjb3VudCA9IHJlc3VsdHM/LlswXT8uWzFdIGFzIG51bWJlciB8fCAxO1xuXG4gICAgY29uc3QgcmVtYWluaW5nID0gTWF0aC5tYXgoMCwgY29uZmlnLm1heFJlcXVlc3RzIC0gY291bnQpO1xuICAgIGNvbnN0IHJlc2V0VGltZSA9ICh3aW5kb3cgKyAxKSAqIGNvbmZpZy53aW5kb3dNcztcbiAgICBjb25zdCBhbGxvd2VkID0gY291bnQgPD0gY29uZmlnLm1heFJlcXVlc3RzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQsXG4gICAgICBsaW1pdDogY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgcmVtYWluaW5nLFxuICAgICAgcmVzZXRUaW1lLFxuICAgICAgcmV0cnlBZnRlcjogYWxsb3dlZCA/IHVuZGVmaW5lZCA6IE1hdGguY2VpbCgocmVzZXRUaW1lIC0gbm93KSAvIDEwMDApLFxuICAgICAgc291cmNlOiAncmVkaXMnLFxuICAgICAgbWV0cmljczoge1xuICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgIGNhY2hlSGl0OiB0cnVlLFxuICAgICAgICBrZXlHZW5lcmF0ZWQ6IHJlZGlzS2V5XG4gICAgICB9XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbUkFURV9MSU1JVF0gRXJyb3IgZW4gUmVkaXM6JywgZXJyb3IpO1xuXG4gICAgLy8gRmFsbGJhY2sgYSBtZW1vcmlhIGVuIGNhc28gZGUgZXJyb3JcbiAgICByZXR1cm4gcmF0ZUxpbWl0V2l0aE1lbW9yeShrZXksIGNvbmZpZyk7XG4gIH1cbn1cblxuLyoqXG4gKiBSYXRlIGxpbWl0aW5nIGNvbiBtZW1vcmlhIChmYWxsYmFjaylcbiAqL1xuZnVuY3Rpb24gcmF0ZUxpbWl0V2l0aE1lbW9yeShcbiAga2V5OiBzdHJpbmcsXG4gIGNvbmZpZzogRW50ZXJwcmlzZVJhdGVMaW1pdENvbmZpZ1xuKTogRW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdCB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgbGV0IGVudHJ5ID0gbWVtb3J5U3RvcmUuZ2V0KGtleSk7XG5cbiAgaWYgKCFlbnRyeSkge1xuICAgIC8vIFByaW1lcmEgcmVxdWVzdCBlbiBlc3RhIHZlbnRhbmFcbiAgICBlbnRyeSA9IHtcbiAgICAgIGNvdW50OiAxLFxuICAgICAgcmVzZXRUaW1lOiBub3cgKyBjb25maWcud2luZG93TXMsXG4gICAgICBmaXJzdFJlcXVlc3Q6IG5vd1xuICAgIH07XG4gICAgbWVtb3J5U3RvcmUuc2V0KGtleSwgZW50cnkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQ6IHRydWUsXG4gICAgICBsaW1pdDogY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgcmVtYWluaW5nOiBjb25maWcubWF4UmVxdWVzdHMgLSAxLFxuICAgICAgcmVzZXRUaW1lOiBlbnRyeS5yZXNldFRpbWUsXG4gICAgICBzb3VyY2U6ICdtZW1vcnknLFxuICAgICAgbWV0cmljczoge1xuICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgIGNhY2hlSGl0OiBmYWxzZSxcbiAgICAgICAga2V5R2VuZXJhdGVkOiBrZXlcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gSW5jcmVtZW50YXIgY29udGFkb3JcbiAgZW50cnkuY291bnQrKztcbiAgbWVtb3J5U3RvcmUuc2V0KGtleSwgZW50cnkpO1xuXG4gIGNvbnN0IGFsbG93ZWQgPSBlbnRyeS5jb3VudCA8PSBjb25maWcubWF4UmVxdWVzdHM7XG4gIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGNvbmZpZy5tYXhSZXF1ZXN0cyAtIGVudHJ5LmNvdW50KTtcblxuICByZXR1cm4ge1xuICAgIGFsbG93ZWQsXG4gICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICByZW1haW5pbmcsXG4gICAgcmVzZXRUaW1lOiBlbnRyeS5yZXNldFRpbWUsXG4gICAgcmV0cnlBZnRlcjogYWxsb3dlZCA/IHVuZGVmaW5lZCA6IE1hdGguY2VpbCgoZW50cnkucmVzZXRUaW1lIC0gbm93KSAvIDEwMDApLFxuICAgIHNvdXJjZTogJ21lbW9yeScsXG4gICAgbWV0cmljczoge1xuICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgY2FjaGVIaXQ6IHRydWUsXG4gICAgICBrZXlHZW5lcmF0ZWQ6IGtleVxuICAgIH1cbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJw5NOIFBSSU5DSVBBTCBERSBSQVRFIExJTUlUSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEZ1bmNpw7NuIHByaW5jaXBhbCBkZSByYXRlIGxpbWl0aW5nIGVudGVycHJpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRW50ZXJwcmlzZVJhdGVMaW1pdChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCxcbiAgY29uZmlnTmFtZToga2V5b2YgdHlwZW9mIEVOVEVSUFJJU0VfUkFURV9MSU1JVF9DT05GSUdTLFxuICBjdXN0b21Db25maWc/OiBQYXJ0aWFsPEVudGVycHJpc2VSYXRlTGltaXRDb25maWc+XG4pOiBQcm9taXNlPEVudGVycHJpc2VSYXRlTGltaXRSZXN1bHQ+IHtcbiAgY29uc3QgYmFzZUNvbmZpZyA9IEVOVEVSUFJJU0VfUkFURV9MSU1JVF9DT05GSUdTW2NvbmZpZ05hbWVdO1xuXG4gIGlmICghYmFzZUNvbmZpZykge1xuICAgIHJldHVybiB7XG4gICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgbGltaXQ6IDEwMDAsXG4gICAgICByZW1haW5pbmc6IDk5OSxcbiAgICAgIHJlc2V0VGltZTogRGF0ZS5ub3coKSArIDYwMDAwLFxuICAgICAgZXJyb3I6IGBDb25maWd1cmFjacOzbiAnJHtjb25maWdOYW1lfScgbm8gZW5jb250cmFkYWAsXG4gICAgICBjb2RlOiAnQ09ORklHX05PVF9GT1VORCcsXG4gICAgICBzb3VyY2U6ICdlcnJvcidcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgY29uZmlnID0geyAuLi5iYXNlQ29uZmlnLCAuLi5jdXN0b21Db25maWcgfTtcbiAgY29uc3Qga2V5R2VuZXJhdG9yID0gY29uZmlnLmtleUdlbmVyYXRvciB8fCBoeWJyaWRLZXlHZW5lcmF0b3I7XG4gIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvcihyZXF1ZXN0KTtcblxuICBsZXQgcmVzdWx0OiBFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0O1xuXG4gIHRyeSB7XG4gICAgLy8gSW50ZW50YXIgUmVkaXMgcHJpbWVybyBzaSBlc3TDoSBoYWJpbGl0YWRvXG4gICAgaWYgKGNvbmZpZy5lbmFibGVSZWRpcyAhPT0gZmFsc2UgJiYgYXdhaXQgaXNSZWRpc0F2YWlsYWJsZSgpKSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCByYXRlTGltaXRXaXRoUmVkaXMoa2V5LCBjb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSByYXRlTGltaXRXaXRoTWVtb3J5KGtleSwgY29uZmlnKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RyYXIgbcOpdHJpY2FzIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICBpZiAoY29uZmlnLmVuYWJsZU1ldHJpY3MpIHtcbiAgICAgIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdCk7XG4gICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KHJlcXVlc3QpO1xuICAgICAgbWV0cmljc0NvbGxlY3Rvci5yZWNvcmRSZXF1ZXN0KHJlc3VsdCwgaXAsIGVuZHBvaW50KTtcbiAgICB9XG5cbiAgICAvLyBMb2dnaW5nIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICBpZiAoY29uZmlnLmVuYWJsZUxvZ2dpbmcpIHtcbiAgICAgIGlmICghcmVzdWx0LmFsbG93ZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBbUkFURV9MSU1JVF0gTMOtbWl0ZSBleGNlZGlkbyBwYXJhICR7a2V5fTogJHtyZXN1bHQucmVtYWluaW5nfS8ke3Jlc3VsdC5saW1pdH1gKTtcblxuICAgICAgICAvLyBDYWxsYmFjayBwZXJzb25hbGl6YWRvIHNpIGVzdMOhIGRlZmluaWRvXG4gICAgICAgIGlmIChjb25maWcub25MaW1pdFJlYWNoZWQpIHtcbiAgICAgICAgICBjb25maWcub25MaW1pdFJlYWNoZWQoa2V5LCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1JBVEVfTElNSVRdIEVycm9yIGVuIGNoZWNrRW50ZXJwcmlzZVJhdGVMaW1pdDonLCBlcnJvcik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWxsb3dlZDogdHJ1ZSwgLy8gUGVybWl0aXIgZW4gY2FzbyBkZSBlcnJvclxuICAgICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlbWFpbmluZzogY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgcmVzZXRUaW1lOiBEYXRlLm5vdygpICsgY29uZmlnLndpbmRvd01zLFxuICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGVuIHJhdGUgbGltaXRpbmcnLFxuICAgICAgY29kZTogJ0lOVEVSTkFMX0VSUk9SJyxcbiAgICAgIHNvdXJjZTogJ2Vycm9yJ1xuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHUyIsImNoZWNrRW50ZXJwcmlzZVJhdGVMaW1pdCIsImVuZHBvaW50S2V5R2VuZXJhdG9yIiwiaHlicmlkS2V5R2VuZXJhdG9yIiwiaXBLZXlHZW5lcmF0b3IiLCJtZW1vcnlTdG9yZSIsIm1ldHJpY3NDb2xsZWN0b3IiLCJ1c2VyS2V5R2VuZXJhdG9yIiwiQ1JJVElDQUxfQVVUSCIsIndpbmRvd01zIiwibWF4UmVxdWVzdHMiLCJtZXNzYWdlIiwiZW5hYmxlUmVkaXMiLCJlbmFibGVNZXRyaWNzIiwiZW5hYmxlTG9nZ2luZyIsIkFETUlOX0FQSSIsIlBBWU1FTlRfQVBJIiwib25MaW1pdFJlYWNoZWQiLCJrZXkiLCJyZXF1ZXN0IiwiY29uc29sZSIsIndhcm4iLCJQVUJMSUNfQVBJIiwiV0VCSE9PS19BUEkiLCJTRUFSQ0hfQVBJIiwiVVBMT0FEX0FQSSIsIkRFQlVHX0FQSSIsImlwIiwiZ2V0Q2xpZW50SVAiLCJ1c2VySWQiLCJnZXRVc2VySWQiLCJlbmRwb2ludCIsImdldEVuZHBvaW50IiwidXNlclBhcnQiLCJoZWFkZXJzIiwiaGVhZGVyIiwiZ2V0IiwiaGVhZGVyVmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJzcGxpdCIsInRyaW0iLCJlbnRlcnByaXNlQXV0aCIsImF1dGgiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJ1cmwiLCJVUkwiLCJNZW1vcnlSYXRlTGltaXRTdG9yZSIsInN0b3JlIiwiTWFwIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhbnVwIiwiZW50cnkiLCJEYXRlIiwibm93IiwicmVzZXRUaW1lIiwiZGVsZXRlIiwic2V0IiwiaW5jcmVtZW50IiwiY291bnQiLCJjbGVhbmVkIiwiZW50cmllcyIsImxvZyIsImdldFN0YXRzIiwic2l6ZSIsIm1lbW9yeVVzYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsImRlc3Ryb3kiLCJjbGVhckludGVydmFsIiwiY2xlYXIiLCJSYXRlTGltaXRNZXRyaWNzQ29sbGVjdG9yIiwicmVjb3JkUmVxdWVzdCIsInJlc3VsdCIsIm1ldHJpY3MiLCJ0b3RhbFJlcXVlc3RzIiwiYWxsb3dlZCIsImFsbG93ZWRSZXF1ZXN0cyIsImJsb2NrZWRSZXF1ZXN0cyIsImN1cnJlbnRDb3VudCIsImJsb2NrZWRJUHMiLCJzb3VyY2UiLCJyZWRpc0hpdHMiLCJtZW1vcnlGYWxsYmFja3MiLCJlcnJvcnMiLCJyZXNwb25zZVRpbWUiLCJyZXNwb25zZVRpbWVzIiwicHVzaCIsInNsaWNlIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsInJlZHVjZSIsImEiLCJiIiwiZW5kcG9pbnRDb3VudCIsImVuZHBvaW50Q291bnRzIiwidXBkYXRlVG9wTGlzdHMiLCJ0b3BCbG9ja2VkSVBzIiwiZnJvbSIsInNvcnQiLCJtYXAiLCJ0b3BFbmRwb2ludHMiLCJnZXRNZXRyaWNzIiwicmVzZXQiLCJpc1JlZGlzQXZhaWxhYmxlIiwicmVkaXMiLCJwaW5nIiwiZXJyb3IiLCJyYXRlTGltaXRXaXRoUmVkaXMiLCJjb25maWciLCJzdGFydFRpbWUiLCJ3aW5kb3ciLCJNYXRoIiwiZmxvb3IiLCJyZWRpc0tleSIsInBpcGVsaW5lIiwiaW5jciIsImV4cGlyZSIsImNlaWwiLCJyZXN1bHRzIiwiZXhlYyIsInJlbWFpbmluZyIsIm1heCIsImxpbWl0IiwicmV0cnlBZnRlciIsInVuZGVmaW5lZCIsImNhY2hlSGl0Iiwia2V5R2VuZXJhdGVkIiwicmF0ZUxpbWl0V2l0aE1lbW9yeSIsImZpcnN0UmVxdWVzdCIsImNvbmZpZ05hbWUiLCJjdXN0b21Db25maWciLCJiYXNlQ29uZmlnIiwiY29kZSIsImtleUdlbmVyYXRvciJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs7Ozs7OztRQXdEWUE7ZUFBQUE7O1FBZ2lCU0M7ZUFBQUE7O1FBamJOQztlQUFBQTs7UUFVQUM7ZUFBQUE7O1FBN0JBQztlQUFBQTs7UUE0VFBDO2VBQUFBOztRQUFhQztlQUFBQTs7UUFwVE5DO2VBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztB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