e603b06e181e9198a7df07c84a0245f7
// ===================================
// PINTEYA E-COMMERCE - ORDERS API HOOK
// Hook especializado para llamadas a la API de órdenes
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useOrdersApi", {
    enumerable: true,
    get: function() {
        return useOrdersApi;
    }
});
const _react = require("react");
const _apistrict = require("../../types/api-strict");
// ===================================
// UTILIDADES DE API
// ===================================
function buildApiUrl(filters) {
    const searchParams = new URLSearchParams();
    // Agregar parámetros de filtros
    Object.entries(filters).forEach(([key, value])=>{
        // Siempre incluir parámetros requeridos por la API
        if (key === 'page' || key === 'limit' || key === 'sort_by' || key === 'sort_order') {
            if (value !== undefined && value !== null && value !== '') {
                searchParams.append(key, String(value));
            }
        } else if (value !== undefined && value !== null && value !== 'all' && value !== '') {
            searchParams.append(key, String(value));
        }
    });
    // Asegurar que siempre tengamos los parámetros mínimos requeridos
    if (!searchParams.has('page')) {
        searchParams.append('page', '1');
    }
    if (!searchParams.has('limit')) {
        searchParams.append('limit', '20');
    }
    if (!searchParams.has('sort_by')) {
        searchParams.append('sort_by', 'created_at');
    }
    if (!searchParams.has('sort_order')) {
        searchParams.append('sort_order', 'desc');
    }
    return `/api/admin/orders?${searchParams.toString()}`;
}
async function makeApiRequest(url, signal, timeout) {
    // Crear timeout promise
    const timeoutPromise = new Promise((_, reject)=>{
        setTimeout(()=>reject(new Error(`Request timeout after ${timeout}ms`)), timeout);
    });
    // Hacer la petición con timeout
    const fetchPromise = fetch(url, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
        },
        credentials: 'include',
        signal
    });
    return Promise.race([
        fetchPromise,
        timeoutPromise
    ]);
}
function useOrdersApi(options) {
    const abortControllerRef = (0, _react.useRef)(null);
    const fetchOrdersInternal = (0, _react.useCallback)(async (filters, isRetry = false)=>{
        try {
            // Validar si la petición es demasiado reciente (anti-spam)
            if (!isRetry && options.cache.isRequestTooRecent(filters)) {
                if (process.env.NODE_ENV === 'development') {
                    console.log('[useOrdersApi] Request blocked - too recent');
                }
                return (0, _apistrict.createStrictApiError)('Request too recent', 'REQUEST_THROTTLED');
            }
            // Verificar cache primero
            if (options.enableCache) {
                const cachedData = options.cache.getCachedData(filters);
                if (cachedData) {
                    return {
                        success: true,
                        data: cachedData.data,
                        message: cachedData.message,
                        timestamp: cachedData.timestamp
                    };
                }
            }
            // Verificar si ya hay una petición pendiente
            const pendingRequest = options.cache.getPendingRequest(filters);
            if (pendingRequest) {
                if (process.env.NODE_ENV === 'development') {
                    console.log('[useOrdersApi] Using pending request');
                }
                return await pendingRequest;
            }
            // Gestión del AbortController - Solo abortar si es una petición diferente
            // Crear un identificador único para esta petición
            const requestId = JSON.stringify(filters);
            // Solo abortar si hay una petición anterior Y es diferente
            if (abortControllerRef.current && !abortControllerRef.current.signal.aborted) {
                // Solo abortar si los filtros son diferentes (nueva petición)
                const currentRequestId = abortControllerRef.current._requestId;
                if (currentRequestId && currentRequestId !== requestId) {
                    if (process.env.NODE_ENV === 'development') {
                        console.log('[useOrdersApi] Aborting previous different request');
                    }
                    abortControllerRef.current.abort();
                } else if (!currentRequestId) {
                    // Abortar si no tiene ID (petición antigua)
                    abortControllerRef.current.abort();
                }
            }
            const controller = new AbortController();
            controller._requestId = requestId;
            abortControllerRef.current = controller;
            // Crear la promesa de la petición
            const requestPromise = (async ()=>{
                try {
                    const url = buildApiUrl(filters);
                    if (process.env.NODE_ENV === 'development') {
                        console.log('[useOrdersApi] Making request:', {
                            url,
                            filters
                        });
                    }
                    const response = await makeApiRequest(url, controller.signal, options.timeout);
                    // Verificar si la petición fue cancelada
                    if (controller.signal.aborted) {
                        return (0, _apistrict.createStrictApiError)('Request cancelled', 'REQUEST_CANCELLED');
                    }
                    // Verificar status de respuesta
                    if (!response.ok) {
                        const errorText = await response.text().catch(()=>'Unknown error');
                        throw new Error(`HTTP ${response.status}: ${errorText}`);
                    }
                    // Parsear respuesta JSON
                    let jsonData;
                    try {
                        jsonData = await response.json();
                    } catch (parseError) {
                        throw new Error(`Failed to parse JSON response: ${parseError instanceof Error ? parseError.message : 'Unknown error'}`);
                    }
                    // Validar y transformar respuesta
                    const validatedResponse = (0, _apistrict.toStrictOrdersResponse)(jsonData);
                    if (!(0, _apistrict.isStrictApiResponse)(validatedResponse)) {
                        return validatedResponse; // Es un error
                    }
                    // Guardar en cache si está habilitado
                    if (options.enableCache) {
                        options.cache.setCachedData(filters, validatedResponse);
                    }
                    return {
                        success: true,
                        data: validatedResponse.data,
                        message: validatedResponse.message,
                        timestamp: validatedResponse.timestamp
                    };
                } catch (error) {
                    if (controller.signal.aborted) {
                        return (0, _apistrict.createStrictApiError)('Request cancelled', 'REQUEST_CANCELLED');
                    }
                    const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';
                    console.error('[useOrdersApi] Request failed:', errorMessage);
                    return (0, _apistrict.createStrictApiError)(errorMessage, 'FETCH_ERROR', {
                        originalError: error,
                        filters,
                        url: buildApiUrl(filters)
                    });
                }
            })();
            // Registrar la petición como pendiente
            options.cache.setPendingRequest(filters, requestPromise);
            return await requestPromise;
        } catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Unexpected error in fetchOrdersInternal';
            console.error('[useOrdersApi] Unexpected error:', errorMessage);
            return (0, _apistrict.createStrictApiError)(errorMessage, 'UNEXPECTED_ERROR', {
                originalError: error,
                filters
            });
        }
    }, [
        options
    ]);
    const abortCurrentRequest = (0, _react.useCallback)(()=>{
        if (abortControllerRef.current && !abortControllerRef.current.signal.aborted) {
            abortControllerRef.current.abort();
            if (process.env.NODE_ENV === 'development') {
                console.log('[useOrdersApi] Request aborted');
            }
        }
    }, []);
    const isRequestInProgress = (0, _react.useCallback)(()=>{
        return abortControllerRef.current !== null && !abortControllerRef.current.signal.aborted;
    }, []);
    return {
        fetchOrdersInternal,
        abortCurrentRequest,
        isRequestInProgress
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VPcmRlcnNBcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIE9SREVSUyBBUEkgSE9PS1xuLy8gSG9vayBlc3BlY2lhbGl6YWRvIHBhcmEgbGxhbWFkYXMgYSBsYSBBUEkgZGUgw7NyZGVuZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBTdHJpY3RPcmRlcnNMaXN0UmVzcG9uc2UsXG4gIEFwaVJlc3VsdCxcbiAgdG9TdHJpY3RPcmRlcnNSZXNwb25zZSxcbiAgY3JlYXRlU3RyaWN0QXBpRXJyb3IsXG4gIGlzU3RyaWN0QXBpUmVzcG9uc2Vcbn0gZnJvbSAnQC90eXBlcy9hcGktc3RyaWN0JztcbmltcG9ydCB7IFN0cmljdE9yZGVyRmlsdGVycyB9IGZyb20gJy4vdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdCc7XG5pbXBvcnQgeyBVc2VPcmRlcnNDYWNoZVJldHVybiB9IGZyb20gJy4vdXNlT3JkZXJzQ2FjaGUnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgWSBDT05GSUdVUkFDScOTTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIEFwaU9wdGlvbnMge1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgZW5hYmxlQ2FjaGU6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBVc2VPcmRlcnNBcGlPcHRpb25zIGV4dGVuZHMgQXBpT3B0aW9ucyB7XG4gIGNhY2hlOiBVc2VPcmRlcnNDYWNoZVJldHVybjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VPcmRlcnNBcGlSZXR1cm4ge1xuICBmZXRjaE9yZGVyc0ludGVybmFsOiAoZmlsdGVyczogU3RyaWN0T3JkZXJGaWx0ZXJzLCBpc1JldHJ5PzogYm9vbGVhbikgPT4gUHJvbWlzZTxBcGlSZXN1bHQ8U3RyaWN0T3JkZXJzTGlzdFJlc3BvbnNlWydkYXRhJ10+PjtcbiAgYWJvcnRDdXJyZW50UmVxdWVzdDogKCkgPT4gdm9pZDtcbiAgaXNSZXF1ZXN0SW5Qcm9ncmVzczogKCkgPT4gYm9vbGVhbjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJREFERVMgREUgQVBJXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBidWlsZEFwaVVybChmaWx0ZXJzOiBTdHJpY3RPcmRlckZpbHRlcnMpOiBzdHJpbmcge1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIFxuICAvLyBBZ3JlZ2FyIHBhcsOhbWV0cm9zIGRlIGZpbHRyb3NcbiAgT2JqZWN0LmVudHJpZXMoZmlsdGVycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgLy8gU2llbXByZSBpbmNsdWlyIHBhcsOhbWV0cm9zIHJlcXVlcmlkb3MgcG9yIGxhIEFQSVxuICAgIGlmIChrZXkgPT09ICdwYWdlJyB8fCBrZXkgPT09ICdsaW1pdCcgfHwga2V5ID09PSAnc29ydF9ieScgfHwga2V5ID09PSAnc29ydF9vcmRlcicpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFBhcmEgb3Ryb3MgcGFyw6FtZXRyb3MsIGFwbGljYXIgZmlsdHJvcyBub3JtYWxlc1xuICAgIGVsc2UgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09ICdhbGwnICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBBc2VndXJhciBxdWUgc2llbXByZSB0ZW5nYW1vcyBsb3MgcGFyw6FtZXRyb3MgbcOtbmltb3MgcmVxdWVyaWRvc1xuICBpZiAoIXNlYXJjaFBhcmFtcy5oYXMoJ3BhZ2UnKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3BhZ2UnLCAnMScpO1xuICB9XG4gIGlmICghc2VhcmNoUGFyYW1zLmhhcygnbGltaXQnKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2xpbWl0JywgJzIwJyk7XG4gIH1cbiAgaWYgKCFzZWFyY2hQYXJhbXMuaGFzKCdzb3J0X2J5JykpIHtcbiAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKCdzb3J0X2J5JywgJ2NyZWF0ZWRfYXQnKTtcbiAgfVxuICBpZiAoIXNlYXJjaFBhcmFtcy5oYXMoJ3NvcnRfb3JkZXInKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3NvcnRfb3JkZXInLCAnZGVzYycpO1xuICB9XG4gIFxuICByZXR1cm4gYC9hcGkvYWRtaW4vb3JkZXJzPyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbWFrZUFwaVJlcXVlc3QoXG4gIHVybDogc3RyaW5nLCBcbiAgc2lnbmFsOiBBYm9ydFNpZ25hbCwgXG4gIHRpbWVvdXQ6IG51bWJlclxuKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAvLyBDcmVhciB0aW1lb3V0IHByb21pc2VcbiAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZTxuZXZlcj4oKF8sIHJlamVjdCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApKSwgdGltZW91dCk7XG4gIH0pO1xuICBcbiAgLy8gSGFjZXIgbGEgcGV0aWNpw7NuIGNvbiB0aW1lb3V0XG4gIGNvbnN0IGZldGNoUHJvbWlzZSA9IGZldGNoKHVybCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9LFxuICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsIC8vIOKchSBBR1JFR0FETzogSW5jbHVpciBjb29raWVzIGRlIHNlc2nDs24gTmV4dEF1dGguanNcbiAgICBzaWduYWxcbiAgfSk7XG4gIFxuICByZXR1cm4gUHJvbWlzZS5yYWNlKFtmZXRjaFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIERFIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU9yZGVyc0FwaShvcHRpb25zOiBVc2VPcmRlcnNBcGlPcHRpb25zKTogVXNlT3JkZXJzQXBpUmV0dXJuIHtcbiAgY29uc3QgYWJvcnRDb250cm9sbGVyUmVmID0gdXNlUmVmPEFib3J0Q29udHJvbGxlciB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgZmV0Y2hPcmRlcnNJbnRlcm5hbCA9IHVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICBmaWx0ZXJzOiBTdHJpY3RPcmRlckZpbHRlcnMsXG4gICAgaXNSZXRyeTogYm9vbGVhbiA9IGZhbHNlXG4gICk6IFByb21pc2U8QXBpUmVzdWx0PFN0cmljdE9yZGVyc0xpc3RSZXNwb25zZVsnZGF0YSddPj4gPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGFyIHNpIGxhIHBldGljacOzbiBlcyBkZW1hc2lhZG8gcmVjaWVudGUgKGFudGktc3BhbSlcbiAgICAgIGlmICghaXNSZXRyeSAmJiBvcHRpb25zLmNhY2hlLmlzUmVxdWVzdFRvb1JlY2VudChmaWx0ZXJzKSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0FwaV0gUmVxdWVzdCBibG9ja2VkIC0gdG9vIHJlY2VudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVTdHJpY3RBcGlFcnJvcignUmVxdWVzdCB0b28gcmVjZW50JywgJ1JFUVVFU1RfVEhST1RUTEVEJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmaWNhciBjYWNoZSBwcmltZXJvXG4gICAgICBpZiAob3B0aW9ucy5lbmFibGVDYWNoZSkge1xuICAgICAgICBjb25zdCBjYWNoZWREYXRhID0gb3B0aW9ucy5jYWNoZS5nZXRDYWNoZWREYXRhKGZpbHRlcnMpO1xuICAgICAgICBpZiAoY2FjaGVkRGF0YSkge1xuICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgICBkYXRhOiBjYWNoZWREYXRhLmRhdGEsIFxuICAgICAgICAgICAgbWVzc2FnZTogY2FjaGVkRGF0YS5tZXNzYWdlLCBcbiAgICAgICAgICAgIHRpbWVzdGFtcDogY2FjaGVkRGF0YS50aW1lc3RhbXAgXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWZXJpZmljYXIgc2kgeWEgaGF5IHVuYSBwZXRpY2nDs24gcGVuZGllbnRlXG4gICAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IG9wdGlvbnMuY2FjaGUuZ2V0UGVuZGluZ1JlcXVlc3QoZmlsdGVycyk7XG4gICAgICBpZiAocGVuZGluZ1JlcXVlc3QpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1t1c2VPcmRlcnNBcGldIFVzaW5nIHBlbmRpbmcgcmVxdWVzdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCBwZW5kaW5nUmVxdWVzdDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2VzdGnDs24gZGVsIEFib3J0Q29udHJvbGxlciAtIFNvbG8gYWJvcnRhciBzaSBlcyB1bmEgcGV0aWNpw7NuIGRpZmVyZW50ZVxuICAgICAgLy8gQ3JlYXIgdW4gaWRlbnRpZmljYWRvciDDum5pY28gcGFyYSBlc3RhIHBldGljacOzblxuICAgICAgY29uc3QgcmVxdWVzdElkID0gSlNPTi5zdHJpbmdpZnkoZmlsdGVycyk7XG4gICAgICBcbiAgICAgIC8vIFNvbG8gYWJvcnRhciBzaSBoYXkgdW5hIHBldGljacOzbiBhbnRlcmlvciBZIGVzIGRpZmVyZW50ZVxuICAgICAgaWYgKGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ICYmICFhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAvLyBTb2xvIGFib3J0YXIgc2kgbG9zIGZpbHRyb3Mgc29uIGRpZmVyZW50ZXMgKG51ZXZhIHBldGljacOzbilcbiAgICAgICAgY29uc3QgY3VycmVudFJlcXVlc3RJZCA9IChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCBhcyBhbnkpLl9yZXF1ZXN0SWQ7XG4gICAgICAgIGlmIChjdXJyZW50UmVxdWVzdElkICYmIGN1cnJlbnRSZXF1ZXN0SWQgIT09IHJlcXVlc3RJZCkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1t1c2VPcmRlcnNBcGldIEFib3J0aW5nIHByZXZpb3VzIGRpZmZlcmVudCByZXF1ZXN0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWN1cnJlbnRSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAvLyBBYm9ydGFyIHNpIG5vIHRpZW5lIElEIChwZXRpY2nDs24gYW50aWd1YSlcbiAgICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAoY29udHJvbGxlciBhcyBhbnkpLl9yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IGNvbnRyb2xsZXI7XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGxhIHByb21lc2EgZGUgbGEgcGV0aWNpw7NuXG4gICAgICBjb25zdCByZXF1ZXN0UHJvbWlzZSA9IChhc3luYyAoKTogUHJvbWlzZTxBcGlSZXN1bHQ8U3RyaWN0T3JkZXJzTGlzdFJlc3BvbnNlWydkYXRhJ10+PiA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gYnVpbGRBcGlVcmwoZmlsdGVycyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0FwaV0gTWFraW5nIHJlcXVlc3Q6JywgeyB1cmwsIGZpbHRlcnMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFrZUFwaVJlcXVlc3QodXJsLCBjb250cm9sbGVyLnNpZ25hbCwgb3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgbGEgcGV0aWNpw7NuIGZ1ZSBjYW5jZWxhZGFcbiAgICAgICAgICBpZiAoY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVN0cmljdEFwaUVycm9yKCdSZXF1ZXN0IGNhbmNlbGxlZCcsICdSRVFVRVNUX0NBTkNFTExFRCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZmljYXIgc3RhdHVzIGRlIHJlc3B1ZXN0YVxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtlcnJvclRleHR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFBhcnNlYXIgcmVzcHVlc3RhIEpTT05cbiAgICAgICAgICBsZXQganNvbkRhdGE6IHVua25vd247XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGpzb25EYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIEpTT04gcmVzcG9uc2U6ICR7cGFyc2VFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2VFcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWYWxpZGFyIHkgdHJhbnNmb3JtYXIgcmVzcHVlc3RhXG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVkUmVzcG9uc2UgPSB0b1N0cmljdE9yZGVyc1Jlc3BvbnNlKGpzb25EYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWlzU3RyaWN0QXBpUmVzcG9uc2UodmFsaWRhdGVkUmVzcG9uc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVkUmVzcG9uc2U7IC8vIEVzIHVuIGVycm9yXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEd1YXJkYXIgZW4gY2FjaGUgc2kgZXN0w6EgaGFiaWxpdGFkb1xuICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUNhY2hlKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNhY2hlLnNldENhY2hlZERhdGEoZmlsdGVycywgdmFsaWRhdGVkUmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICAgICAgZGF0YTogdmFsaWRhdGVkUmVzcG9uc2UuZGF0YSwgXG4gICAgICAgICAgICBtZXNzYWdlOiB2YWxpZGF0ZWRSZXNwb25zZS5tZXNzYWdlLCBcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdmFsaWRhdGVkUmVzcG9uc2UudGltZXN0YW1wIFxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTdHJpY3RBcGlFcnJvcignUmVxdWVzdCBjYW5jZWxsZWQnLCAnUkVRVUVTVF9DQU5DRUxMRUQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCc7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZU9yZGVyc0FwaV0gUmVxdWVzdCBmYWlsZWQ6JywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gY3JlYXRlU3RyaWN0QXBpRXJyb3IoZXJyb3JNZXNzYWdlLCAnRkVUQ0hfRVJST1InLCB7IFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICBmaWx0ZXJzLFxuICAgICAgICAgICAgdXJsOiBidWlsZEFwaVVybChmaWx0ZXJzKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgICAgXG4gICAgICAvLyBSZWdpc3RyYXIgbGEgcGV0aWNpw7NuIGNvbW8gcGVuZGllbnRlXG4gICAgICBvcHRpb25zLmNhY2hlLnNldFBlbmRpbmdSZXF1ZXN0KGZpbHRlcnMsIHJlcXVlc3RQcm9taXNlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGF3YWl0IHJlcXVlc3RQcm9taXNlO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1VuZXhwZWN0ZWQgZXJyb3IgaW4gZmV0Y2hPcmRlcnNJbnRlcm5hbCc7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdXNlT3JkZXJzQXBpXSBVbmV4cGVjdGVkIGVycm9yOicsIGVycm9yTWVzc2FnZSk7XG4gICAgICBcbiAgICAgIHJldHVybiBjcmVhdGVTdHJpY3RBcGlFcnJvcihlcnJvck1lc3NhZ2UsICdVTkVYUEVDVEVEX0VSUk9SJywgeyBcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyb3IsXG4gICAgICAgIGZpbHRlcnMgXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtvcHRpb25zXSk7XG4gIFxuICBjb25zdCBhYm9ydEN1cnJlbnRSZXF1ZXN0ID0gdXNlQ2FsbGJhY2soKCk6IHZvaWQgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCAmJiAhYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICBcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0FwaV0gUmVxdWVzdCBhYm9ydGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG4gIFxuICBjb25zdCBpc1JlcXVlc3RJblByb2dyZXNzID0gdXNlQ2FsbGJhY2soKCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCAhPT0gbnVsbCAmJiAhYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuc2lnbmFsLmFib3J0ZWQ7XG4gIH0sIFtdKTtcbiAgXG4gIHJldHVybiB7XG4gICAgZmV0Y2hPcmRlcnNJbnRlcm5hbCxcbiAgICBhYm9ydEN1cnJlbnRSZXF1ZXN0LFxuICAgIGlzUmVxdWVzdEluUHJvZ3Jlc3NcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VPcmRlcnNBcGkiLCJidWlsZEFwaVVybCIsImZpbHRlcnMiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwiYXBwZW5kIiwiU3RyaW5nIiwiaGFzIiwidG9TdHJpbmciLCJtYWtlQXBpUmVxdWVzdCIsInVybCIsInNpZ25hbCIsInRpbWVvdXQiLCJ0aW1lb3V0UHJvbWlzZSIsIlByb21pc2UiLCJfIiwicmVqZWN0Iiwic2V0VGltZW91dCIsIkVycm9yIiwiZmV0Y2hQcm9taXNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJyYWNlIiwib3B0aW9ucyIsImFib3J0Q29udHJvbGxlclJlZiIsInVzZVJlZiIsImZldGNoT3JkZXJzSW50ZXJuYWwiLCJ1c2VDYWxsYmFjayIsImlzUmV0cnkiLCJjYWNoZSIsImlzUmVxdWVzdFRvb1JlY2VudCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVTdHJpY3RBcGlFcnJvciIsImVuYWJsZUNhY2hlIiwiY2FjaGVkRGF0YSIsImdldENhY2hlZERhdGEiLCJzdWNjZXNzIiwiZGF0YSIsIm1lc3NhZ2UiLCJ0aW1lc3RhbXAiLCJwZW5kaW5nUmVxdWVzdCIsImdldFBlbmRpbmdSZXF1ZXN0IiwicmVxdWVzdElkIiwiSlNPTiIsInN0cmluZ2lmeSIsImN1cnJlbnQiLCJhYm9ydGVkIiwiY3VycmVudFJlcXVlc3RJZCIsIl9yZXF1ZXN0SWQiLCJhYm9ydCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJyZXF1ZXN0UHJvbWlzZSIsInJlc3BvbnNlIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiY2F0Y2giLCJzdGF0dXMiLCJqc29uRGF0YSIsImpzb24iLCJwYXJzZUVycm9yIiwidmFsaWRhdGVkUmVzcG9uc2UiLCJ0b1N0cmljdE9yZGVyc1Jlc3BvbnNlIiwiaXNTdHJpY3RBcGlSZXNwb25zZSIsInNldENhY2hlZERhdGEiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJzZXRQZW5kaW5nUmVxdWVzdCIsImFib3J0Q3VycmVudFJlcXVlc3QiLCJpc1JlcXVlc3RJblByb2dyZXNzIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsdUNBQXVDO0FBQ3ZDLHVEQUF1RDtBQUN2RCxzQ0FBc0M7Ozs7OytCQW1HdEJBOzs7ZUFBQUE7Ozt1QkFqR29COzJCQU83QjtBQXdCUCxzQ0FBc0M7QUFDdEMsb0JBQW9CO0FBQ3BCLHNDQUFzQztBQUV0QyxTQUFTQyxZQUFZQyxPQUEyQjtJQUM5QyxNQUFNQyxlQUFlLElBQUlDO0lBRXpCLGdDQUFnQztJQUNoQ0MsT0FBT0MsT0FBTyxDQUFDSixTQUFTSyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQzNDLG1EQUFtRDtRQUNuRCxJ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