{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\ProductItem.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Product } from \"@/types/product\";\r\nimport { useModalContext } from \"@/app/context/QuickViewModalContext\";\r\nimport { updateQuickView } from \"@/redux/features/quickView-slice\";\r\nimport { addItemToCart } from \"@/redux/features/cart-slice\";\r\nimport { addItemToWishlist } from \"@/redux/features/wishlist-slice\";\r\nimport { updateproductDetails } from \"@/redux/features/product-details\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppDispatch } from \"@/redux/store\";\r\nimport { CommercialProductCard } from \"@/components/ui/product-card-commercial\";\r\n\r\nconst ProductItem = ({ item }: { item: Product }) => {\r\n  const { openModal } = useModalContext();\r\n  const dispatch = useDispatch<AppDispatch>();\r\n\r\n  // update the QuickView state\r\n  const handleQuickViewUpdate = () => {\r\n    dispatch(updateQuickView({ ...item }));\r\n  };\r\n\r\n  // add to cart\r\n  const handleAddToCart = () => {\r\n    dispatch(\r\n      addItemToCart({\r\n        ...item,\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleItemToWishList = () => {\r\n    dispatch(\r\n      addItemToWishlist({\r\n        ...item,\r\n        status: \"available\",\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleProductDetails = () => {\r\n    dispatch(updateproductDetails({ ...item }));\r\n  };\r\n\r\n  // Calcular descuento si existe\r\n  const discount = item.discountedPrice && item.discountedPrice < item.price\r\n    ? Math.round(((item.price - item.discountedPrice) / item.price) * 100)\r\n    : undefined;\r\n\r\n  // Determinar badge basado en precio y características\r\n  const badge = item.discountedPrice >= 15000\r\n    ? \"Envío gratis\"\r\n    : discount\r\n    ? \"Oferta especial\"\r\n    : \"Nuevo\";\r\n\r\n  return (\r\n    <CommercialProductCard\r\n      image={item.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\r\n      title={item.title}\r\n      brand={item.brand}\r\n      price={item.discountedPrice}\r\n      originalPrice={item.discountedPrice < item.price ? item.price : undefined}\r\n      discount={discount ? `${discount}%` : undefined}\r\n      isNew={badge === \"Nuevo\"}\r\n      stock={50} // Stock por defecto para productos legacy\r\n      productId={item.id}\r\n      cta=\"Agregar al carrito\"\r\n      onAddToCart={handleAddToCart}\r\n      showCartAnimation={true}\r\n      // Información de cuotas automática\r\n      installments={item.discountedPrice >= 5000 ? {\r\n        quantity: 3,\r\n        amount: Math.round(item.discountedPrice / 3),\r\n        interestFree: true\r\n      } : undefined}\r\n      // Envío gratis automático para productos >= $15000\r\n      freeShipping={item.discountedPrice >= 15000}\r\n      shippingText={badge === \"Envío gratis\" ? \"Envío gratis\" : undefined}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n"],"names":["ProductItem","item","openModal","useModalContext","dispatch","useDispatch","handleQuickViewUpdate","updateQuickView","handleAddToCart","addItemToCart","quantity","handleItemToWishList","addItemToWishlist","status","handleProductDetails","updateproductDetails","discount","discountedPrice","price","Math","round","undefined","badge","CommercialProductCard","image","imgs","previews","title","brand","originalPrice","isNew","stock","productId","id","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText"],"mappings":"AAAA;;;;;+BAoFA;;;eAAA;;;;8DAnFkB;uCAEc;gCACA;2BACF;+BACI;gCACG;4BACT;uCAEU;;;;;;AAEtC,MAAMA,cAAc,CAAC,EAAEC,IAAI,EAAqB;IAC9C,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,sCAAe;IACrC,MAAMC,WAAWC,IAAAA,uBAAW;IAE5B,6BAA6B;IAC7B,MAAMC,wBAAwB;QAC5BF,SAASG,IAAAA,+BAAe,EAAC;YAAE,GAAGN,IAAI;QAAC;IACrC;IAEA,cAAc;IACd,MAAMO,kBAAkB;QACtBJ,SACEK,IAAAA,wBAAa,EAAC;YACZ,GAAGR,IAAI;YACPS,UAAU;QACZ;IAEJ;IAEA,MAAMC,uBAAuB;QAC3BP,SACEQ,IAAAA,gCAAiB,EAAC;YAChB,GAAGX,IAAI;YACPY,QAAQ;YACRH,UAAU;QACZ;IAEJ;IAEA,MAAMI,uBAAuB;QAC3BV,SAASW,IAAAA,oCAAoB,EAAC;YAAE,GAAGd,IAAI;QAAC;IAC1C;IAEA,+BAA+B;IAC/B,MAAMe,WAAWf,KAAKgB,eAAe,IAAIhB,KAAKgB,eAAe,GAAGhB,KAAKiB,KAAK,GACtEC,KAAKC,KAAK,CAAC,AAAEnB,CAAAA,KAAKiB,KAAK,GAAGjB,KAAKgB,eAAe,AAAD,IAAKhB,KAAKiB,KAAK,GAAI,OAChEG;IAEJ,sDAAsD;IACtD,MAAMC,QAAQrB,KAAKgB,eAAe,IAAI,QAClC,iBACAD,WACA,oBACA;IAEJ,qBACE,qBAACO,4CAAqB;QACpBC,OAAOvB,KAAKwB,IAAI,EAAEC,UAAU,CAAC,EAAE,IAAI;QACnCC,OAAO1B,KAAK0B,KAAK;QACjBC,OAAO3B,KAAK2B,KAAK;QACjBV,OAAOjB,KAAKgB,eAAe;QAC3BY,eAAe5B,KAAKgB,eAAe,GAAGhB,KAAKiB,KAAK,GAAGjB,KAAKiB,KAAK,GAAGG;QAChEL,UAAUA,WAAW,GAAGA,SAAS,CAAC,CAAC,GAAGK;QACtCS,OAAOR,UAAU;QACjBS,OAAO;QACPC,WAAW/B,KAAKgC,EAAE;QAClBC,KAAI;QACJC,aAAa3B;QACb4B,mBAAmB;QACnB,mCAAmC;QACnCC,cAAcpC,KAAKgB,eAAe,IAAI,OAAO;YAC3CP,UAAU;YACV4B,QAAQnB,KAAKC,KAAK,CAACnB,KAAKgB,eAAe,GAAG;YAC1CsB,cAAc;QAChB,IAAIlB;QACJ,mDAAmD;QACnDmB,cAAcvC,KAAKgB,eAAe,IAAI;QACtCwB,cAAcnB,UAAU,iBAAiB,iBAAiBD;;AAGhE;MAEA,WAAerB"}