4c6af6a6722894bfd91852199cb7d28c
// ===================================
// PINTEYA E-COMMERCE - AUDIT TRAIL TESTS
// ===================================
"use strict";
// Mock logger
jest.mock('@/lib/logger', ()=>({
        logger: {
            audit: jest.fn(),
            security: jest.fn(),
            error: jest.fn()
        },
        LogLevel: {
            INFO: 'info',
            ERROR: 'error'
        },
        LogCategory: {
            SYSTEM: 'system'
        }
    }));
jest.mock('@/lib/supabase', ()=>({
        getSupabaseClient: jest.fn(()=>({
                from: mockSupabaseFrom
            }))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _audittrail = require("../../lib/security/audit-trail");
// Mock Supabase
const mockSupabaseInsert = jest.fn();
const mockSupabaseSelect = jest.fn();
const mockSupabaseFrom = jest.fn(()=>({
        insert: mockSupabaseInsert,
        select: mockSupabaseSelect
    }));
describe('Audit Trail System Enterprise', ()=>{
    let auditManager;
    beforeEach(()=>{
        jest.clearAllMocks();
        auditManager = new _audittrail.AuditTrailManager();
        // Mock successful database operations
        mockSupabaseInsert.mockResolvedValue({
            error: null
        });
        mockSupabaseSelect.mockResolvedValue({
            data: [],
            error: null
        });
    });
    describe('AuditTrailManager', ()=>{
        test('debe crear instancia singleton', ()=>{
            const instance1 = _audittrail.AuditTrailManager.getInstance();
            const instance2 = _audittrail.AuditTrailManager.getInstance();
            expect(instance1).toBe(instance2);
        });
        test('debe generar ID único para eventos', async ()=>{
            const eventData = {
                userId: 'test-user',
                action: 'test_action',
                resource: 'test_resource',
                category: _audittrail.AuditCategory.AUTHENTICATION,
                severity: _audittrail.AuditSeverity.LOW,
                result: _audittrail.AuditResult.SUCCESS,
                ipAddress: '127.0.0.1',
                userAgent: 'test-agent'
            };
            await auditManager.logEvent(eventData);
            await auditManager.logEvent(eventData);
            expect(mockSupabaseInsert).toHaveBeenCalledTimes(2);
            const call1 = mockSupabaseInsert.mock.calls[0][0];
            const call2 = mockSupabaseInsert.mock.calls[1][0];
            expect(call1.id).not.toBe(call2.id);
            expect(call1.id).toMatch(/^audit_\d+_[a-f0-9]{16}$/);
        });
        test('debe generar hash de integridad', async ()=>{
            const eventData = {
                userId: 'test-user',
                action: 'test_action',
                resource: 'test_resource',
                category: _audittrail.AuditCategory.AUTHENTICATION,
                severity: _audittrail.AuditSeverity.LOW,
                result: _audittrail.AuditResult.SUCCESS,
                ipAddress: '127.0.0.1',
                userAgent: 'test-agent'
            };
            await auditManager.logEvent(eventData);
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                hash: expect.stringMatching(/^[a-f0-9]{64}$/)
            }));
        });
        test('debe almacenar evento en base de datos', async ()=>{
            const eventData = {
                userId: 'test-user',
                action: 'test_action',
                resource: 'test_resource',
                category: _audittrail.AuditCategory.AUTHENTICATION,
                severity: _audittrail.AuditSeverity.MEDIUM,
                result: _audittrail.AuditResult.SUCCESS,
                ipAddress: '192.168.1.1',
                userAgent: 'Mozilla/5.0',
                metadata: {
                    extra: 'data'
                }
            };
            await auditManager.logEvent(eventData);
            expect(mockSupabaseFrom).toHaveBeenCalledWith('audit_events');
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                user_id: 'test-user',
                action: 'test_action',
                resource: 'test_resource',
                category: 'authentication',
                severity: 'medium',
                result: 'success',
                ip_address: '192.168.1.1',
                user_agent: 'Mozilla/5.0',
                metadata: {
                    extra: 'data'
                }
            }));
        });
        test('debe manejar errores de base de datos', async ()=>{
            mockSupabaseInsert.mockResolvedValue({
                error: {
                    message: 'Database error'
                }
            });
            const eventData = {
                action: 'test_action',
                resource: 'test_resource',
                category: _audittrail.AuditCategory.AUTHENTICATION,
                severity: _audittrail.AuditSeverity.LOW,
                result: _audittrail.AuditResult.SUCCESS,
                ipAddress: '127.0.0.1',
                userAgent: 'test-agent'
            };
            // No debe lanzar error, debe manejarlo internamente
            await expect(auditManager.logEvent(eventData)).resolves.not.toThrow();
        });
    });
    describe('Funciones de conveniencia', ()=>{
        test('logAuthentication debe crear evento de autenticación', async ()=>{
            await (0, _audittrail.logAuthentication)('user_login', _audittrail.AuditResult.SUCCESS, 'user-123', {
                sessionId: 'session-456'
            }, {
                ip: '192.168.1.1',
                userAgent: 'Chrome'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                action: 'user_login',
                resource: 'authentication',
                category: 'authentication',
                severity: 'medium',
                result: 'success',
                user_id: 'user-123',
                ip_address: '192.168.1.1',
                user_agent: 'Chrome',
                metadata: {
                    sessionId: 'session-456'
                },
                compliance_flags: [
                    'ISO27001',
                    'AUTHENTICATION_LOG'
                ]
            }));
        });
        test('logPaymentEvent debe crear evento de pago', async ()=>{
            await (0, _audittrail.logPaymentEvent)('payment_processed', _audittrail.AuditResult.SUCCESS, {
                orderId: 'order-123',
                paymentId: 'payment-456',
                amount: 100.50,
                currency: 'ARS',
                method: 'mercadopago'
            }, 'user-789', {
                ip: '10.0.0.1',
                userAgent: 'Safari'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                action: 'payment_processed',
                resource: 'payment:payment-456',
                category: 'payment_processing',
                severity: 'low',
                result: 'success',
                user_id: 'user-789',
                ip_address: '10.0.0.1',
                user_agent: 'Safari',
                metadata: expect.objectContaining({
                    orderId: 'order-123',
                    paymentId: 'payment-456',
                    amount: 100.50,
                    currency: 'ARS',
                    method: 'mercadopago',
                    complianceRequired: true
                }),
                compliance_flags: [
                    'ISO27001',
                    'PAYMENT_LOG',
                    'FINANCIAL_COMPLIANCE'
                ]
            }));
        });
        test('logSecurityViolation debe crear evento crítico', async ()=>{
            await (0, _audittrail.logSecurityViolation)('invalid_signature', 'HMAC signature validation failed', {
                ip: '192.168.1.100',
                userAgent: 'Unknown'
            }, {
                attemptedResource: '/api/webhook'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                action: 'invalid_signature',
                resource: 'security_system',
                category: 'security_violation',
                severity: 'critical',
                result: 'blocked',
                ip_address: '192.168.1.100',
                user_agent: 'Unknown',
                metadata: expect.objectContaining({
                    details: 'HMAC signature validation failed',
                    attemptedResource: '/api/webhook',
                    alertRequired: true
                }),
                compliance_flags: [
                    'ISO27001',
                    'SECURITY_INCIDENT',
                    'IMMEDIATE_ALERT'
                ]
            }));
        });
        test('logDataAccess debe crear evento de acceso a datos', async ()=>{
            await (0, _audittrail.logDataAccess)('user_data_accessed', 'user_profiles', _audittrail.AuditResult.SUCCESS, 'admin-user', {
                ip: '172.16.0.1',
                userAgent: 'Firefox'
            }, {
                recordsAccessed: 5
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                action: 'user_data_accessed',
                resource: 'user_profiles',
                category: 'data_access',
                severity: 'medium',
                result: 'success',
                user_id: 'admin-user',
                ip_address: '172.16.0.1',
                user_agent: 'Firefox',
                metadata: {
                    recordsAccessed: 5
                },
                compliance_flags: [
                    'ISO27001',
                    'DATA_ACCESS_LOG'
                ]
            }));
        });
        test('logAdminAction debe crear evento administrativo', async ()=>{
            await (0, _audittrail.logAdminAction)('user_role_changed', 'user:user-123', _audittrail.AuditResult.SUCCESS, 'admin-456', {
                ip: '10.1.1.1',
                userAgent: 'Edge'
            }, {
                oldRole: 'user',
                newRole: 'admin'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                action: 'user_role_changed',
                resource: 'user:user-123',
                category: 'system_administration',
                severity: 'high',
                result: 'success',
                user_id: 'admin-456',
                ip_address: '10.1.1.1',
                user_agent: 'Edge',
                metadata: {
                    oldRole: 'user',
                    newRole: 'admin'
                },
                compliance_flags: [
                    'ISO27001',
                    'ADMIN_ACTION',
                    'PRIVILEGED_ACCESS'
                ]
            }));
        });
    });
    describe('Severidad automática', ()=>{
        test('debe asignar severidad HIGH para fallos de autenticación', async ()=>{
            await (0, _audittrail.logAuthentication)('login_failed', _audittrail.AuditResult.FAILURE, undefined, {
                reason: 'invalid_password'
            }, {
                ip: '192.168.1.1',
                userAgent: 'Chrome'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                severity: 'high'
            }));
        });
        test('debe asignar severidad HIGH para fallos de pago', async ()=>{
            await (0, _audittrail.logPaymentEvent)('payment_failed', _audittrail.AuditResult.FAILURE, {
                paymentId: 'payment-123',
                amount: 100
            }, 'user-456', {
                ip: '10.0.0.1',
                userAgent: 'Safari'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                severity: 'high'
            }));
        });
        test('debe asignar severidad HIGH para acceso no autorizado', async ()=>{
            await (0, _audittrail.logDataAccess)('unauthorized_access', 'sensitive_data', _audittrail.AuditResult.UNAUTHORIZED, 'user-123', {
                ip: '192.168.1.1',
                userAgent: 'Chrome'
            });
            expect(mockSupabaseInsert).toHaveBeenCalledWith(expect.objectContaining({
                severity: 'high'
            }));
        });
    });
    describe('Compliance flags', ()=>{
        test('debe incluir flags de compliance apropiados', async ()=>{
            // Evento de autenticación
            await (0, _audittrail.logAuthentication)('login', _audittrail.AuditResult.SUCCESS, 'user-1');
            expect(mockSupabaseInsert).toHaveBeenLastCalledWith(expect.objectContaining({
                compliance_flags: [
                    'ISO27001',
                    'AUTHENTICATION_LOG'
                ]
            }));
            // Evento de pago
            await (0, _audittrail.logPaymentEvent)('payment', _audittrail.AuditResult.SUCCESS, {}, 'user-2');
            expect(mockSupabaseInsert).toHaveBeenLastCalledWith(expect.objectContaining({
                compliance_flags: [
                    'ISO27001',
                    'PAYMENT_LOG',
                    'FINANCIAL_COMPLIANCE'
                ]
            }));
            // Violación de seguridad
            await (0, _audittrail.logSecurityViolation)('attack', 'details', {
                ip: '1.1.1.1',
                userAgent: 'bot'
            });
            expect(mockSupabaseInsert).toHaveBeenLastCalledWith(expect.objectContaining({
                compliance_flags: [
                    'ISO27001',
                    'SECURITY_INCIDENT',
                    'IMMEDIATE_ALERT'
                ]
            }));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxsaWJcXGF1ZGl0LXRyYWlsLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEFVRElUIFRSQUlMIFRFU1RTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBcbiAgQXVkaXRUcmFpbE1hbmFnZXIsXG4gIEF1ZGl0Q2F0ZWdvcnksXG4gIEF1ZGl0U2V2ZXJpdHksXG4gIEF1ZGl0UmVzdWx0LFxuICBsb2dBdXRoZW50aWNhdGlvbixcbiAgbG9nUGF5bWVudEV2ZW50LFxuICBsb2dTZWN1cml0eVZpb2xhdGlvbixcbiAgbG9nRGF0YUFjY2VzcyxcbiAgbG9nQWRtaW5BY3Rpb25cbn0gZnJvbSAnQC9saWIvc2VjdXJpdHkvYXVkaXQtdHJhaWwnO1xuXG4vLyBNb2NrIGxvZ2dlclxuamVzdC5tb2NrKCdAL2xpYi9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IHtcbiAgICBhdWRpdDogamVzdC5mbigpLFxuICAgIHNlY3VyaXR5OiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgfSxcbiAgTG9nTGV2ZWw6IHtcbiAgICBJTkZPOiAnaW5mbycsXG4gICAgRVJST1I6ICdlcnJvcicsXG4gIH0sXG4gIExvZ0NhdGVnb3J5OiB7XG4gICAgU1lTVEVNOiAnc3lzdGVtJyxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBTdXBhYmFzZVxuY29uc3QgbW9ja1N1cGFiYXNlSW5zZXJ0ID0gamVzdC5mbigpO1xuY29uc3QgbW9ja1N1cGFiYXNlU2VsZWN0ID0gamVzdC5mbigpO1xuY29uc3QgbW9ja1N1cGFiYXNlRnJvbSA9IGplc3QuZm4oKCkgPT4gKHtcbiAgaW5zZXJ0OiBtb2NrU3VwYWJhc2VJbnNlcnQsXG4gIHNlbGVjdDogbW9ja1N1cGFiYXNlU2VsZWN0LFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgZ2V0U3VwYWJhc2VDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBmcm9tOiBtb2NrU3VwYWJhc2VGcm9tLFxuICB9KSksXG59KSk7XG5cbmRlc2NyaWJlKCdBdWRpdCBUcmFpbCBTeXN0ZW0gRW50ZXJwcmlzZScsICgpID0+IHtcbiAgbGV0IGF1ZGl0TWFuYWdlcjogQXVkaXRUcmFpbE1hbmFnZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgYXVkaXRNYW5hZ2VyID0gbmV3IEF1ZGl0VHJhaWxNYW5hZ2VyKCk7XG4gICAgXG4gICAgLy8gTW9jayBzdWNjZXNzZnVsIGRhdGFiYXNlIG9wZXJhdGlvbnNcbiAgICBtb2NrU3VwYWJhc2VJbnNlcnQubW9ja1Jlc29sdmVkVmFsdWUoeyBlcnJvcjogbnVsbCB9KTtcbiAgICBtb2NrU3VwYWJhc2VTZWxlY3QubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBdWRpdFRyYWlsTWFuYWdlcicsICgpID0+IHtcbiAgICB0ZXN0KCdkZWJlIGNyZWFyIGluc3RhbmNpYSBzaW5nbGV0b24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZTEgPSBBdWRpdFRyYWlsTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgY29uc3QgaW5zdGFuY2UyID0gQXVkaXRUcmFpbE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZShpbnN0YW5jZTIpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBnZW5lcmFyIElEIMO6bmljbyBwYXJhIGV2ZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgIHVzZXJJZDogJ3Rlc3QtdXNlcicsXG4gICAgICAgIGFjdGlvbjogJ3Rlc3RfYWN0aW9uJyxcbiAgICAgICAgcmVzb3VyY2U6ICd0ZXN0X3Jlc291cmNlJyxcbiAgICAgICAgY2F0ZWdvcnk6IEF1ZGl0Q2F0ZWdvcnkuQVVUSEVOVElDQVRJT04sXG4gICAgICAgIHNldmVyaXR5OiBBdWRpdFNldmVyaXR5LkxPVyxcbiAgICAgICAgcmVzdWx0OiBBdWRpdFJlc3VsdC5TVUNDRVNTLFxuICAgICAgICBpcEFkZHJlc3M6ICcxMjcuMC4wLjEnLFxuICAgICAgICB1c2VyQWdlbnQ6ICd0ZXN0LWFnZW50J1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgYXVkaXRNYW5hZ2VyLmxvZ0V2ZW50KGV2ZW50RGF0YSk7XG4gICAgICBhd2FpdCBhdWRpdE1hbmFnZXIubG9nRXZlbnQoZXZlbnREYXRhKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgICAgXG4gICAgICBjb25zdCBjYWxsMSA9IG1vY2tTdXBhYmFzZUluc2VydC5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgY29uc3QgY2FsbDIgPSBtb2NrU3VwYWJhc2VJbnNlcnQubW9jay5jYWxsc1sxXVswXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhbGwxLmlkKS5ub3QudG9CZShjYWxsMi5pZCk7XG4gICAgICBleHBlY3QoY2FsbDEuaWQpLnRvTWF0Y2goL15hdWRpdF9cXGQrX1thLWYwLTldezE2fSQvKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgZ2VuZXJhciBoYXNoIGRlIGludGVncmlkYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgIHVzZXJJZDogJ3Rlc3QtdXNlcicsXG4gICAgICAgIGFjdGlvbjogJ3Rlc3RfYWN0aW9uJyxcbiAgICAgICAgcmVzb3VyY2U6ICd0ZXN0X3Jlc291cmNlJyxcbiAgICAgICAgY2F0ZWdvcnk6IEF1ZGl0Q2F0ZWdvcnkuQVVUSEVOVElDQVRJT04sXG4gICAgICAgIHNldmVyaXR5OiBBdWRpdFNldmVyaXR5LkxPVyxcbiAgICAgICAgcmVzdWx0OiBBdWRpdFJlc3VsdC5TVUNDRVNTLFxuICAgICAgICBpcEFkZHJlc3M6ICcxMjcuMC4wLjEnLFxuICAgICAgICB1c2VyQWdlbnQ6ICd0ZXN0LWFnZW50J1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgYXVkaXRNYW5hZ2VyLmxvZ0V2ZW50KGV2ZW50RGF0YSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgaGFzaDogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9eW2EtZjAtOV17NjR9JC8pXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBhbG1hY2VuYXIgZXZlbnRvIGVuIGJhc2UgZGUgZGF0b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgIHVzZXJJZDogJ3Rlc3QtdXNlcicsXG4gICAgICAgIGFjdGlvbjogJ3Rlc3RfYWN0aW9uJyxcbiAgICAgICAgcmVzb3VyY2U6ICd0ZXN0X3Jlc291cmNlJyxcbiAgICAgICAgY2F0ZWdvcnk6IEF1ZGl0Q2F0ZWdvcnkuQVVUSEVOVElDQVRJT04sXG4gICAgICAgIHNldmVyaXR5OiBBdWRpdFNldmVyaXR5Lk1FRElVTSxcbiAgICAgICAgcmVzdWx0OiBBdWRpdFJlc3VsdC5TVUNDRVNTLFxuICAgICAgICBpcEFkZHJlc3M6ICcxOTIuMTY4LjEuMScsXG4gICAgICAgIHVzZXJBZ2VudDogJ01vemlsbGEvNS4wJyxcbiAgICAgICAgbWV0YWRhdGE6IHsgZXh0cmE6ICdkYXRhJyB9XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhdWRpdE1hbmFnZXIubG9nRXZlbnQoZXZlbnREYXRhKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUZyb20pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdhdWRpdF9ldmVudHMnKTtcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdXNlcl9pZDogJ3Rlc3QtdXNlcicsXG4gICAgICAgICAgYWN0aW9uOiAndGVzdF9hY3Rpb24nLFxuICAgICAgICAgIHJlc291cmNlOiAndGVzdF9yZXNvdXJjZScsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdhdXRoZW50aWNhdGlvbicsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGlwX2FkZHJlc3M6ICcxOTIuMTY4LjEuMScsXG4gICAgICAgICAgdXNlcl9hZ2VudDogJ01vemlsbGEvNS4wJyxcbiAgICAgICAgICBtZXRhZGF0YTogeyBleHRyYTogJ2RhdGEnIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZWJlIG1hbmVqYXIgZXJyb3JlcyBkZSBiYXNlIGRlIGRhdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlSW5zZXJ0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvcicgfSBcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgIGFjdGlvbjogJ3Rlc3RfYWN0aW9uJyxcbiAgICAgICAgcmVzb3VyY2U6ICd0ZXN0X3Jlc291cmNlJyxcbiAgICAgICAgY2F0ZWdvcnk6IEF1ZGl0Q2F0ZWdvcnkuQVVUSEVOVElDQVRJT04sXG4gICAgICAgIHNldmVyaXR5OiBBdWRpdFNldmVyaXR5LkxPVyxcbiAgICAgICAgcmVzdWx0OiBBdWRpdFJlc3VsdC5TVUNDRVNTLFxuICAgICAgICBpcEFkZHJlc3M6ICcxMjcuMC4wLjEnLFxuICAgICAgICB1c2VyQWdlbnQ6ICd0ZXN0LWFnZW50J1xuICAgICAgfTtcblxuICAgICAgLy8gTm8gZGViZSBsYW56YXIgZXJyb3IsIGRlYmUgbWFuZWphcmxvIGludGVybmFtZW50ZVxuICAgICAgYXdhaXQgZXhwZWN0KGF1ZGl0TWFuYWdlci5sb2dFdmVudChldmVudERhdGEpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRnVuY2lvbmVzIGRlIGNvbnZlbmllbmNpYScsICgpID0+IHtcbiAgICB0ZXN0KCdsb2dBdXRoZW50aWNhdGlvbiBkZWJlIGNyZWFyIGV2ZW50byBkZSBhdXRlbnRpY2FjacOzbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxvZ0F1dGhlbnRpY2F0aW9uKFxuICAgICAgICAndXNlcl9sb2dpbicsXG4gICAgICAgIEF1ZGl0UmVzdWx0LlNVQ0NFU1MsXG4gICAgICAgICd1c2VyLTEyMycsXG4gICAgICAgIHsgc2Vzc2lvbklkOiAnc2Vzc2lvbi00NTYnIH0sXG4gICAgICAgIHsgaXA6ICcxOTIuMTY4LjEuMScsIHVzZXJBZ2VudDogJ0Nocm9tZScgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhY3Rpb246ICd1c2VyX2xvZ2luJyxcbiAgICAgICAgICByZXNvdXJjZTogJ2F1dGhlbnRpY2F0aW9uJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ2F1dGhlbnRpY2F0aW9uJyxcbiAgICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICAgICAgcmVzdWx0OiAnc3VjY2VzcycsXG4gICAgICAgICAgdXNlcl9pZDogJ3VzZXItMTIzJyxcbiAgICAgICAgICBpcF9hZGRyZXNzOiAnMTkyLjE2OC4xLjEnLFxuICAgICAgICAgIHVzZXJfYWdlbnQ6ICdDaHJvbWUnLFxuICAgICAgICAgIG1ldGFkYXRhOiB7IHNlc3Npb25JZDogJ3Nlc3Npb24tNDU2JyB9LFxuICAgICAgICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnSVNPMjcwMDEnLCAnQVVUSEVOVElDQVRJT05fTE9HJ11cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdsb2dQYXltZW50RXZlbnQgZGViZSBjcmVhciBldmVudG8gZGUgcGFnbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxvZ1BheW1lbnRFdmVudChcbiAgICAgICAgJ3BheW1lbnRfcHJvY2Vzc2VkJyxcbiAgICAgICAgQXVkaXRSZXN1bHQuU1VDQ0VTUyxcbiAgICAgICAge1xuICAgICAgICAgIG9yZGVySWQ6ICdvcmRlci0xMjMnLFxuICAgICAgICAgIHBheW1lbnRJZDogJ3BheW1lbnQtNDU2JyxcbiAgICAgICAgICBhbW91bnQ6IDEwMC41MCxcbiAgICAgICAgICBjdXJyZW5jeTogJ0FSUycsXG4gICAgICAgICAgbWV0aG9kOiAnbWVyY2Fkb3BhZ28nXG4gICAgICAgIH0sXG4gICAgICAgICd1c2VyLTc4OScsXG4gICAgICAgIHsgaXA6ICcxMC4wLjAuMScsIHVzZXJBZ2VudDogJ1NhZmFyaScgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhY3Rpb246ICdwYXltZW50X3Byb2Nlc3NlZCcsXG4gICAgICAgICAgcmVzb3VyY2U6ICdwYXltZW50OnBheW1lbnQtNDU2JyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3BheW1lbnRfcHJvY2Vzc2luZycsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdsb3cnLFxuICAgICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIHVzZXJfaWQ6ICd1c2VyLTc4OScsXG4gICAgICAgICAgaXBfYWRkcmVzczogJzEwLjAuMC4xJyxcbiAgICAgICAgICB1c2VyX2FnZW50OiAnU2FmYXJpJyxcbiAgICAgICAgICBtZXRhZGF0YTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgb3JkZXJJZDogJ29yZGVyLTEyMycsXG4gICAgICAgICAgICBwYXltZW50SWQ6ICdwYXltZW50LTQ1NicsXG4gICAgICAgICAgICBhbW91bnQ6IDEwMC41MCxcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnQVJTJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ21lcmNhZG9wYWdvJyxcbiAgICAgICAgICAgIGNvbXBsaWFuY2VSZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnSVNPMjcwMDEnLCAnUEFZTUVOVF9MT0cnLCAnRklOQU5DSUFMX0NPTVBMSUFOQ0UnXVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2xvZ1NlY3VyaXR5VmlvbGF0aW9uIGRlYmUgY3JlYXIgZXZlbnRvIGNyw610aWNvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbG9nU2VjdXJpdHlWaW9sYXRpb24oXG4gICAgICAgICdpbnZhbGlkX3NpZ25hdHVyZScsXG4gICAgICAgICdITUFDIHNpZ25hdHVyZSB2YWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgIHsgaXA6ICcxOTIuMTY4LjEuMTAwJywgdXNlckFnZW50OiAnVW5rbm93bicgfSxcbiAgICAgICAgeyBhdHRlbXB0ZWRSZXNvdXJjZTogJy9hcGkvd2ViaG9vaycgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhY3Rpb246ICdpbnZhbGlkX3NpZ25hdHVyZScsXG4gICAgICAgICAgcmVzb3VyY2U6ICdzZWN1cml0eV9zeXN0ZW0nLFxuICAgICAgICAgIGNhdGVnb3J5OiAnc2VjdXJpdHlfdmlvbGF0aW9uJyxcbiAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgICAgICByZXN1bHQ6ICdibG9ja2VkJyxcbiAgICAgICAgICBpcF9hZGRyZXNzOiAnMTkyLjE2OC4xLjEwMCcsXG4gICAgICAgICAgdXNlcl9hZ2VudDogJ1Vua25vd24nLFxuICAgICAgICAgIG1ldGFkYXRhOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBkZXRhaWxzOiAnSE1BQyBzaWduYXR1cmUgdmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgICAgYXR0ZW1wdGVkUmVzb3VyY2U6ICcvYXBpL3dlYmhvb2snLFxuICAgICAgICAgICAgYWxlcnRSZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnSVNPMjcwMDEnLCAnU0VDVVJJVFlfSU5DSURFTlQnLCAnSU1NRURJQVRFX0FMRVJUJ11cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdsb2dEYXRhQWNjZXNzIGRlYmUgY3JlYXIgZXZlbnRvIGRlIGFjY2VzbyBhIGRhdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbG9nRGF0YUFjY2VzcyhcbiAgICAgICAgJ3VzZXJfZGF0YV9hY2Nlc3NlZCcsXG4gICAgICAgICd1c2VyX3Byb2ZpbGVzJyxcbiAgICAgICAgQXVkaXRSZXN1bHQuU1VDQ0VTUyxcbiAgICAgICAgJ2FkbWluLXVzZXInLFxuICAgICAgICB7IGlwOiAnMTcyLjE2LjAuMScsIHVzZXJBZ2VudDogJ0ZpcmVmb3gnIH0sXG4gICAgICAgIHsgcmVjb3Jkc0FjY2Vzc2VkOiA1IH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgYWN0aW9uOiAndXNlcl9kYXRhX2FjY2Vzc2VkJyxcbiAgICAgICAgICByZXNvdXJjZTogJ3VzZXJfcHJvZmlsZXMnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnZGF0YV9hY2Nlc3MnLFxuICAgICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgICByZXN1bHQ6ICdzdWNjZXNzJyxcbiAgICAgICAgICB1c2VyX2lkOiAnYWRtaW4tdXNlcicsXG4gICAgICAgICAgaXBfYWRkcmVzczogJzE3Mi4xNi4wLjEnLFxuICAgICAgICAgIHVzZXJfYWdlbnQ6ICdGaXJlZm94JyxcbiAgICAgICAgICBtZXRhZGF0YTogeyByZWNvcmRzQWNjZXNzZWQ6IDUgfSxcbiAgICAgICAgICBjb21wbGlhbmNlX2ZsYWdzOiBbJ0lTTzI3MDAxJywgJ0RBVEFfQUNDRVNTX0xPRyddXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnbG9nQWRtaW5BY3Rpb24gZGViZSBjcmVhciBldmVudG8gYWRtaW5pc3RyYXRpdm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsb2dBZG1pbkFjdGlvbihcbiAgICAgICAgJ3VzZXJfcm9sZV9jaGFuZ2VkJyxcbiAgICAgICAgJ3VzZXI6dXNlci0xMjMnLFxuICAgICAgICBBdWRpdFJlc3VsdC5TVUNDRVNTLFxuICAgICAgICAnYWRtaW4tNDU2JyxcbiAgICAgICAgeyBpcDogJzEwLjEuMS4xJywgdXNlckFnZW50OiAnRWRnZScgfSxcbiAgICAgICAgeyBvbGRSb2xlOiAndXNlcicsIG5ld1JvbGU6ICdhZG1pbicgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhY3Rpb246ICd1c2VyX3JvbGVfY2hhbmdlZCcsXG4gICAgICAgICAgcmVzb3VyY2U6ICd1c2VyOnVzZXItMTIzJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3N5c3RlbV9hZG1pbmlzdHJhdGlvbicsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgICAgICByZXN1bHQ6ICdzdWNjZXNzJyxcbiAgICAgICAgICB1c2VyX2lkOiAnYWRtaW4tNDU2JyxcbiAgICAgICAgICBpcF9hZGRyZXNzOiAnMTAuMS4xLjEnLFxuICAgICAgICAgIHVzZXJfYWdlbnQ6ICdFZGdlJyxcbiAgICAgICAgICBtZXRhZGF0YTogeyBvbGRSb2xlOiAndXNlcicsIG5ld1JvbGU6ICdhZG1pbicgfSxcbiAgICAgICAgICBjb21wbGlhbmNlX2ZsYWdzOiBbJ0lTTzI3MDAxJywgJ0FETUlOX0FDVElPTicsICdQUklWSUxFR0VEX0FDQ0VTUyddXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2V2ZXJpZGFkIGF1dG9tw6F0aWNhJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RlYmUgYXNpZ25hciBzZXZlcmlkYWQgSElHSCBwYXJhIGZhbGxvcyBkZSBhdXRlbnRpY2FjacOzbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxvZ0F1dGhlbnRpY2F0aW9uKFxuICAgICAgICAnbG9naW5fZmFpbGVkJyxcbiAgICAgICAgQXVkaXRSZXN1bHQuRkFJTFVSRSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB7IHJlYXNvbjogJ2ludmFsaWRfcGFzc3dvcmQnIH0sXG4gICAgICAgIHsgaXA6ICcxOTIuMTY4LjEuMScsIHVzZXJBZ2VudDogJ0Nocm9tZScgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGViZSBhc2lnbmFyIHNldmVyaWRhZCBISUdIIHBhcmEgZmFsbG9zIGRlIHBhZ28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsb2dQYXltZW50RXZlbnQoXG4gICAgICAgICdwYXltZW50X2ZhaWxlZCcsXG4gICAgICAgIEF1ZGl0UmVzdWx0LkZBSUxVUkUsXG4gICAgICAgIHsgcGF5bWVudElkOiAncGF5bWVudC0xMjMnLCBhbW91bnQ6IDEwMCB9LFxuICAgICAgICAndXNlci00NTYnLFxuICAgICAgICB7IGlwOiAnMTAuMC4wLjEnLCB1c2VyQWdlbnQ6ICdTYWZhcmknIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RlYmUgYXNpZ25hciBzZXZlcmlkYWQgSElHSCBwYXJhIGFjY2VzbyBubyBhdXRvcml6YWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbG9nRGF0YUFjY2VzcyhcbiAgICAgICAgJ3VuYXV0aG9yaXplZF9hY2Nlc3MnLFxuICAgICAgICAnc2Vuc2l0aXZlX2RhdGEnLFxuICAgICAgICBBdWRpdFJlc3VsdC5VTkFVVEhPUklaRUQsXG4gICAgICAgICd1c2VyLTEyMycsXG4gICAgICAgIHsgaXA6ICcxOTIuMTY4LjEuMScsIHVzZXJBZ2VudDogJ0Nocm9tZScgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZUluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzZXZlcml0eTogJ2hpZ2gnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tcGxpYW5jZSBmbGFncycsICgpID0+IHtcbiAgICB0ZXN0KCdkZWJlIGluY2x1aXIgZmxhZ3MgZGUgY29tcGxpYW5jZSBhcHJvcGlhZG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRXZlbnRvIGRlIGF1dGVudGljYWNpw7NuXG4gICAgICBhd2FpdCBsb2dBdXRoZW50aWNhdGlvbignbG9naW4nLCBBdWRpdFJlc3VsdC5TVUNDRVNTLCAndXNlci0xJyk7XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlSW5zZXJ0KS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBjb21wbGlhbmNlX2ZsYWdzOiBbJ0lTTzI3MDAxJywgJ0FVVEhFTlRJQ0FUSU9OX0xPRyddXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICAvLyBFdmVudG8gZGUgcGFnb1xuICAgICAgYXdhaXQgbG9nUGF5bWVudEV2ZW50KCdwYXltZW50JywgQXVkaXRSZXN1bHQuU1VDQ0VTUywge30sICd1c2VyLTInKTtcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5MYXN0Q2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnSVNPMjcwMDEnLCAnUEFZTUVOVF9MT0cnLCAnRklOQU5DSUFMX0NPTVBMSUFOQ0UnXVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgLy8gVmlvbGFjacOzbiBkZSBzZWd1cmlkYWRcbiAgICAgIGF3YWl0IGxvZ1NlY3VyaXR5VmlvbGF0aW9uKCdhdHRhY2snLCAnZGV0YWlscycsIHsgaXA6ICcxLjEuMS4xJywgdXNlckFnZW50OiAnYm90JyB9KTtcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VJbnNlcnQpLnRvSGF2ZUJlZW5MYXN0Q2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnSVNPMjcwMDEnLCAnU0VDVVJJVFlfSU5DSURFTlQnLCAnSU1NRURJQVRFX0FMRVJUJ11cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJsb2dnZXIiLCJhdWRpdCIsImZuIiwic2VjdXJpdHkiLCJlcnJvciIsIkxvZ0xldmVsIiwiSU5GTyIsIkVSUk9SIiwiTG9nQ2F0ZWdvcnkiLCJTWVNURU0iLCJnZXRTdXBhYmFzZUNsaWVudCIsImZyb20iLCJtb2NrU3VwYWJhc2VGcm9tIiwibW9ja1N1cGFiYXNlSW5zZXJ0IiwibW9ja1N1cGFiYXNlU2VsZWN0IiwiaW5zZXJ0Iiwic2VsZWN0IiwiZGVzY3JpYmUiLCJhdWRpdE1hbmFnZXIiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIkF1ZGl0VHJhaWxNYW5hZ2VyIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwidGVzdCIsImluc3RhbmNlMSIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UyIiwiZXhwZWN0IiwidG9CZSIsImV2ZW50RGF0YSIsInVzZXJJZCIsImFjdGlvbiIsInJlc291cmNlIiwiY2F0ZWdvcnkiLCJBdWRpdENhdGVnb3J5IiwiQVVUSEVOVElDQVRJT04iLCJzZXZlcml0eSIsIkF1ZGl0U2V2ZXJpdHkiLCJMT1ciLCJyZXN1bHQiLCJBdWRpdFJlc3VsdCIsIlNVQ0NFU1MiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJsb2dFdmVudCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImNhbGwxIiwiY2FsbHMiLCJjYWxsMiIsImlkIiwibm90IiwidG9NYXRjaCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsImhhc2giLCJzdHJpbmdNYXRjaGluZyIsIk1FRElVTSIsIm1ldGFkYXRhIiwiZXh0cmEiLCJ1c2VyX2lkIiwiaXBfYWRkcmVzcyIsInVzZXJfYWdlbnQiLCJtZXNzYWdlIiwicmVzb2x2ZXMiLCJ0b1Rocm93IiwibG9nQXV0aGVudGljYXRpb24iLCJzZXNzaW9uSWQiLCJpcCIsImNvbXBsaWFuY2VfZmxhZ3MiLCJsb2dQYXltZW50RXZlbnQiLCJvcmRlcklkIiwicGF5bWVudElkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJtZXRob2QiLCJjb21wbGlhbmNlUmVxdWlyZWQiLCJsb2dTZWN1cml0eVZpb2xhdGlvbiIsImF0dGVtcHRlZFJlc291cmNlIiwiZGV0YWlscyIsImFsZXJ0UmVxdWlyZWQiLCJsb2dEYXRhQWNjZXNzIiwicmVjb3Jkc0FjY2Vzc2VkIiwibG9nQWRtaW5BY3Rpb24iLCJvbGRSb2xlIiwibmV3Um9sZSIsIkZBSUxVUkUiLCJ1bmRlZmluZWQiLCJyZWFzb24iLCJVTkFVVEhPUklaRUQiLCJ0b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx5Q0FBeUM7QUFDekMsc0NBQXNDOztBQWN0QyxjQUFjO0FBQ2RBLEtBQUtDLElBQUksQ0FBQyxnQkFBZ0IsSUFBTyxDQUFBO1FBQy9CQyxRQUFRO1lBQ05DLE9BQU9ILEtBQUtJLEVBQUU7WUFDZEMsVUFBVUwsS0FBS0ksRUFBRTtZQUNqQkUsT0FBT04sS0FBS0ksRUFBRTtRQUNoQjtRQUNBRyxVQUFVO1lBQ1JDLE1BQU07WUFDTkMsT0FBTztRQUNUO1FBQ0FDLGFBQWE7WUFDWEMsUUFBUTtRQUNWO0lBQ0YsQ0FBQTtBQVVBWCxLQUFLQyxJQUFJLENBQUMsa0JBQWtCLElBQU8sQ0FBQTtRQUNqQ1csbUJBQW1CWixLQUFLSSxFQUFFLENBQUMsSUFBTyxDQUFBO2dCQUNoQ1MsTUFBTUM7WUFDUixDQUFBO0lBQ0YsQ0FBQTs7Ozs0QkE5Qk87QUFrQlAsZ0JBQWdCO0FBQ2hCLE1BQU1DLHFCQUFxQmYsS0FBS0ksRUFBRTtBQUNsQyxNQUFNWSxxQkFBcUJoQixLQUFLSSxFQUFFO0FBQ2xDLE1BQU1VLG1CQUFtQmQsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtRQUN0Q2EsUUFBUUY7UUFDUkcsUUFBUUY7SUFDVixDQUFBO0FBUUFHLFNBQVMsaUNBQWlDO0lBQ3hDLElBQUlDO0lBRUpDLFdBQVc7UUFDVHJCLEtBQUtzQixhQUFhO1FBQ2xCRixlQUFlLElBQUlHLDZCQUFpQjtRQUVwQyxzQ0FBc0M7UUFDdENSLG1CQUFtQlMsaUJBQWlCLENBQUM7WUFBRWxCLE9BQU87UUFBSztRQUNuRFUsbUJBQW1CUSxpQkFBaUIsQ0FBQztZQUFFQyxNQUFNLEVBQUU7WUFBRW5CLE9BQU87UUFBSztJQUMvRDtJQUVBYSxTQUFTLHFCQUFxQjtRQUM1Qk8sS0FBSyxrQ0FBa0M7WUFDckMsTUFBTUMsWUFBWUosNkJBQWlCLENBQUNLLFdBQVc7WUFDL0MsTUFBTUMsWUFBWU4sNkJBQWlCLENBQUNLLFdBQVc7WUFFL0NFLE9BQU9ILFdBQVdJLElBQUksQ0FBQ0Y7UUFDekI7UUFFQUgsS0FBSyxzQ0FBc0M7WUFDekMsTUFBTU0sWUFBWTtnQkFDaEJDLFFBQVE7Z0JBQ1JDLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVVDLHlCQUFhLENBQUNDLGNBQWM7Z0JBQ3RDQyxVQUFVQyx5QkFBYSxDQUFDQyxHQUFHO2dCQUMzQkMsUUFBUUMsdUJBQVcsQ0FBQ0MsT0FBTztnQkFDM0JDLFdBQVc7Z0JBQ1hDLFdBQVc7WUFDYjtZQUVBLE1BQU0xQixhQUFhMkIsUUFBUSxDQUFDZjtZQUM1QixNQUFNWixhQUFhMkIsUUFBUSxDQUFDZjtZQUU1QkYsT0FBT2Ysb0JBQW9CaUMscUJBQXFCLENBQUM7WUFFakQsTUFBTUMsUUFBUWxDLG1CQUFtQmQsSUFBSSxDQUFDaUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ2pELE1BQU1DLFFBQVFwQyxtQkFBbUJkLElBQUksQ0FBQ2lELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUVqRHBCLE9BQU9tQixNQUFNRyxFQUFFLEVBQUVDLEdBQUcsQ0FBQ3RCLElBQUksQ0FBQ29CLE1BQU1DLEVBQUU7WUFDbEN0QixPQUFPbUIsTUFBTUcsRUFBRSxFQUFFRSxPQUFPLENBQUM7UUFDM0I7UUFFQTVCLEtBQUssbUNBQW1DO1lBQ3RDLE1BQU1NLFlBQVk7Z0JBQ2hCQyxRQUFRO2dCQUNSQyxRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxVQUFVQyx5QkFBYSxDQUFDQyxjQUFjO2dCQUN0Q0MsVUFBVUMseUJBQWEsQ0FBQ0MsR0FBRztnQkFDM0JDLFFBQVFDLHVCQUFXLENBQUNDLE9BQU87Z0JBQzNCQyxXQUFXO2dCQUNYQyxXQUFXO1lBQ2I7WUFFQSxNQUFNMUIsYUFBYTJCLFFBQVEsQ0FBQ2Y7WUFFNUJGLE9BQU9mLG9CQUFvQndDLG9CQUFvQixDQUM3Q3pCLE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJDLE1BQU0zQixPQUFPNEIsY0FBYyxDQUFDO1lBQzlCO1FBRUo7UUFFQWhDLEtBQUssMENBQTBDO1lBQzdDLE1BQU1NLFlBQVk7Z0JBQ2hCQyxRQUFRO2dCQUNSQyxRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxVQUFVQyx5QkFBYSxDQUFDQyxjQUFjO2dCQUN0Q0MsVUFBVUMseUJBQWEsQ0FBQ21CLE1BQU07Z0JBQzlCakIsUUFBUUMsdUJBQVcsQ0FBQ0MsT0FBTztnQkFDM0JDLFdBQVc7Z0JBQ1hDLFdBQVc7Z0JBQ1hjLFVBQVU7b0JBQUVDLE9BQU87Z0JBQU87WUFDNUI7WUFFQSxNQUFNekMsYUFBYTJCLFFBQVEsQ0FBQ2Y7WUFFNUJGLE9BQU9oQixrQkFBa0J5QyxvQkFBb0IsQ0FBQztZQUM5Q3pCLE9BQU9mLG9CQUFvQndDLG9CQUFvQixDQUM3Q3pCLE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJNLFNBQVM7Z0JBQ1Q1QixRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWRyxVQUFVO2dCQUNWRyxRQUFRO2dCQUNScUIsWUFBWTtnQkFDWkMsWUFBWTtnQkFDWkosVUFBVTtvQkFBRUMsT0FBTztnQkFBTztZQUM1QjtRQUVKO1FBRUFuQyxLQUFLLHlDQUF5QztZQUM1Q1gsbUJBQW1CUyxpQkFBaUIsQ0FBQztnQkFDbkNsQixPQUFPO29CQUFFMkQsU0FBUztnQkFBaUI7WUFDckM7WUFFQSxNQUFNakMsWUFBWTtnQkFDaEJFLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVVDLHlCQUFhLENBQUNDLGNBQWM7Z0JBQ3RDQyxVQUFVQyx5QkFBYSxDQUFDQyxHQUFHO2dCQUMzQkMsUUFBUUMsdUJBQVcsQ0FBQ0MsT0FBTztnQkFDM0JDLFdBQVc7Z0JBQ1hDLFdBQVc7WUFDYjtZQUVBLG9EQUFvRDtZQUNwRCxNQUFNaEIsT0FBT1YsYUFBYTJCLFFBQVEsQ0FBQ2YsWUFBWWtDLFFBQVEsQ0FBQ2IsR0FBRyxDQUFDYyxPQUFPO1FBQ3JFO0lBQ0Y7SUFFQWhELFNBQVMsNkJBQTZCO1FBQ3BDTyxLQUFLLHdEQUF3RDtZQUMzRCxNQUFNMEMsSUFBQUEsNkJBQWlCLEVBQ3JCLGNBQ0F6Qix1QkFBVyxDQUFDQyxPQUFPLEVBQ25CLFlBQ0E7Z0JBQUV5QixXQUFXO1lBQWMsR0FDM0I7Z0JBQUVDLElBQUk7Z0JBQWV4QixXQUFXO1lBQVM7WUFHM0NoQixPQUFPZixvQkFBb0J3QyxvQkFBb0IsQ0FDN0N6QixPQUFPMEIsZ0JBQWdCLENBQUM7Z0JBQ3RCdEIsUUFBUTtnQkFDUkMsVUFBVTtnQkFDVkMsVUFBVTtnQkFDVkcsVUFBVTtnQkFDVkcsUUFBUTtnQkFDUm9CLFNBQVM7Z0JBQ1RDLFlBQVk7Z0JBQ1pDLFlBQVk7Z0JBQ1pKLFVBQVU7b0JBQUVTLFdBQVc7Z0JBQWM7Z0JBQ3JDRSxrQkFBa0I7b0JBQUM7b0JBQVk7aUJBQXFCO1lBQ3REO1FBRUo7UUFFQTdDLEtBQUssNkNBQTZDO1lBQ2hELE1BQU04QyxJQUFBQSwyQkFBZSxFQUNuQixxQkFDQTdCLHVCQUFXLENBQUNDLE9BQU8sRUFDbkI7Z0JBQ0U2QixTQUFTO2dCQUNUQyxXQUFXO2dCQUNYQyxRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxRQUFRO1lBQ1YsR0FDQSxZQUNBO2dCQUFFUCxJQUFJO2dCQUFZeEIsV0FBVztZQUFTO1lBR3hDaEIsT0FBT2Ysb0JBQW9Cd0Msb0JBQW9CLENBQzdDekIsT0FBTzBCLGdCQUFnQixDQUFDO2dCQUN0QnRCLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZHLFVBQVU7Z0JBQ1ZHLFFBQVE7Z0JBQ1JvQixTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxZQUFZO2dCQUNaSixVQUFVOUIsT0FBTzBCLGdCQUFnQixDQUFDO29CQUNoQ2lCLFNBQVM7b0JBQ1RDLFdBQVc7b0JBQ1hDLFFBQVE7b0JBQ1JDLFVBQVU7b0JBQ1ZDLFFBQVE7b0JBQ1JDLG9CQUFvQjtnQkFDdEI7Z0JBQ0FQLGtCQUFrQjtvQkFBQztvQkFBWTtvQkFBZTtpQkFBdUI7WUFDdkU7UUFFSjtRQUVBN0MsS0FBSyxrREFBa0Q7WUFDckQsTUFBTXFELElBQUFBLGdDQUFvQixFQUN4QixxQkFDQSxvQ0FDQTtnQkFBRVQsSUFBSTtnQkFBaUJ4QixXQUFXO1lBQVUsR0FDNUM7Z0JBQUVrQyxtQkFBbUI7WUFBZTtZQUd0Q2xELE9BQU9mLG9CQUFvQndDLG9CQUFvQixDQUM3Q3pCLE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJ0QixRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWRyxVQUFVO2dCQUNWRyxRQUFRO2dCQUNScUIsWUFBWTtnQkFDWkMsWUFBWTtnQkFDWkosVUFBVTlCLE9BQU8wQixnQkFBZ0IsQ0FBQztvQkFDaEN5QixTQUFTO29CQUNURCxtQkFBbUI7b0JBQ25CRSxlQUFlO2dCQUNqQjtnQkFDQVgsa0JBQWtCO29CQUFDO29CQUFZO29CQUFxQjtpQkFBa0I7WUFDeEU7UUFFSjtRQUVBN0MsS0FBSyxxREFBcUQ7WUFDeEQsTUFBTXlELElBQUFBLHlCQUFhLEVBQ2pCLHNCQUNBLGlCQUNBeEMsdUJBQVcsQ0FBQ0MsT0FBTyxFQUNuQixjQUNBO2dCQUFFMEIsSUFBSTtnQkFBY3hCLFdBQVc7WUFBVSxHQUN6QztnQkFBRXNDLGlCQUFpQjtZQUFFO1lBR3ZCdEQsT0FBT2Ysb0JBQW9Cd0Msb0JBQW9CLENBQzdDekIsT0FBTzBCLGdCQUFnQixDQUFDO2dCQUN0QnRCLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZHLFVBQVU7Z0JBQ1ZHLFFBQVE7Z0JBQ1JvQixTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxZQUFZO2dCQUNaSixVQUFVO29CQUFFd0IsaUJBQWlCO2dCQUFFO2dCQUMvQmIsa0JBQWtCO29CQUFDO29CQUFZO2lCQUFrQjtZQUNuRDtRQUVKO1FBRUE3QyxLQUFLLG1EQUFtRDtZQUN0RCxNQUFNMkQsSUFBQUEsMEJBQWMsRUFDbEIscUJBQ0EsaUJBQ0ExQyx1QkFBVyxDQUFDQyxPQUFPLEVBQ25CLGFBQ0E7Z0JBQUUwQixJQUFJO2dCQUFZeEIsV0FBVztZQUFPLEdBQ3BDO2dCQUFFd0MsU0FBUztnQkFBUUMsU0FBUztZQUFRO1lBR3RDekQsT0FBT2Ysb0JBQW9Cd0Msb0JBQW9CLENBQzdDekIsT0FBTzBCLGdCQUFnQixDQUFDO2dCQUN0QnRCLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZHLFVBQVU7Z0JBQ1ZHLFFBQVE7Z0JBQ1JvQixTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxZQUFZO2dCQUNaSixVQUFVO29CQUFFMEIsU0FBUztvQkFBUUMsU0FBUztnQkFBUTtnQkFDOUNoQixrQkFBa0I7b0JBQUM7b0JBQVk7b0JBQWdCO2lCQUFvQjtZQUNyRTtRQUVKO0lBQ0Y7SUFFQXBELFNBQVMsd0JBQXdCO1FBQy9CTyxLQUFLLDREQUE0RDtZQUMvRCxNQUFNMEMsSUFBQUEsNkJBQWlCLEVBQ3JCLGdCQUNBekIsdUJBQVcsQ0FBQzZDLE9BQU8sRUFDbkJDLFdBQ0E7Z0JBQUVDLFFBQVE7WUFBbUIsR0FDN0I7Z0JBQUVwQixJQUFJO2dCQUFleEIsV0FBVztZQUFTO1lBRzNDaEIsT0FBT2Ysb0JBQW9Cd0Msb0JBQW9CLENBQzdDekIsT0FBTzBCLGdCQUFnQixDQUFDO2dCQUN0QmpCLFVBQVU7WUFDWjtRQUVKO1FBRUFiLEtBQUssbURBQW1EO1lBQ3RELE1BQU04QyxJQUFBQSwyQkFBZSxFQUNuQixrQkFDQTdCLHVCQUFXLENBQUM2QyxPQUFPLEVBQ25CO2dCQUFFZCxXQUFXO2dCQUFlQyxRQUFRO1lBQUksR0FDeEMsWUFDQTtnQkFBRUwsSUFBSTtnQkFBWXhCLFdBQVc7WUFBUztZQUd4Q2hCLE9BQU9mLG9CQUFvQndDLG9CQUFvQixDQUM3Q3pCLE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJqQixVQUFVO1lBQ1o7UUFFSjtRQUVBYixLQUFLLHlEQUF5RDtZQUM1RCxNQUFNeUQsSUFBQUEseUJBQWEsRUFDakIsdUJBQ0Esa0JBQ0F4Qyx1QkFBVyxDQUFDZ0QsWUFBWSxFQUN4QixZQUNBO2dCQUFFckIsSUFBSTtnQkFBZXhCLFdBQVc7WUFBUztZQUczQ2hCLE9BQU9mLG9CQUFvQndDLG9CQUFvQixDQUM3Q3pCLE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJqQixVQUFVO1lBQ1o7UUFFSjtJQUNGO0lBRUFwQixTQUFTLG9CQUFvQjtRQUMzQk8sS0FBSywrQ0FBK0M7WUFDbEQsMEJBQTBCO1lBQzFCLE1BQU0wQyxJQUFBQSw2QkFBaUIsRUFBQyxTQUFTekIsdUJBQVcsQ0FBQ0MsT0FBTyxFQUFFO1lBQ3REZCxPQUFPZixvQkFBb0I2RSx3QkFBd0IsQ0FDakQ5RCxPQUFPMEIsZ0JBQWdCLENBQUM7Z0JBQ3RCZSxrQkFBa0I7b0JBQUM7b0JBQVk7aUJBQXFCO1lBQ3REO1lBR0YsaUJBQWlCO1lBQ2pCLE1BQU1DLElBQUFBLDJCQUFlLEVBQUMsV0FBVzdCLHVCQUFXLENBQUNDLE9BQU8sRUFBRSxDQUFDLEdBQUc7WUFDMURkLE9BQU9mLG9CQUFvQjZFLHdCQUF3QixDQUNqRDlELE9BQU8wQixnQkFBZ0IsQ0FBQztnQkFDdEJlLGtCQUFrQjtvQkFBQztvQkFBWTtvQkFBZTtpQkFBdUI7WUFDdkU7WUFHRix5QkFBeUI7WUFDekIsTUFBTVEsSUFBQUEsZ0NBQW9CLEVBQUMsVUFBVSxXQUFXO2dCQUFFVCxJQUFJO2dCQUFXeEIsV0FBVztZQUFNO1lBQ2xGaEIsT0FBT2Ysb0JBQW9CNkUsd0JBQXdCLENBQ2pEOUQsT0FBTzBCLGdCQUFnQixDQUFDO2dCQUN0QmUsa0JBQWtCO29CQUFDO29CQUFZO29CQUFxQjtpQkFBa0I7WUFDeEU7UUFFSjtJQUNGO0FBQ0YifQ==