f150a17fb44e42a2512137f64fbc9a5a
// ===================================
// PINTEYA E-COMMERCE - TESTS UNITARIOS PARA USECART WITH CLERK HOOK
// ===================================
"use strict";
// Mock Clerk
jest.mock('@clerk/nextjs', ()=>({
        useUser: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactredux = require("react-redux");
const _toolkit = require("@reduxjs/toolkit");
const _nextjs = require("@clerk/nextjs");
const _cartslice = /*#__PURE__*/ _interop_require_wildcard(require("../../redux/features/cart-slice"));
const _useCartWithClerk = require("../../hooks/useCartWithClerk");
const _cartPersistence = require("../../redux/middleware/cartPersistence");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock localStorage
const localStorageMock = (()=>{
    let store = {};
    return {
        getItem: jest.fn((key)=>store[key] || null),
        setItem: jest.fn((key, value)=>{
            store[key] = value.toString();
        }),
        removeItem: jest.fn((key)=>{
            delete store[key];
        }),
        clear: jest.fn(()=>{
            store = {};
        })
    };
})();
Object.defineProperty(window, 'localStorage', {
    value: localStorageMock
});
// Mock console methods
const consoleSpy = {
    warn: jest.spyOn(console, 'warn').mockImplementation(()=>{}),
    log: jest.spyOn(console, 'log').mockImplementation(()=>{}),
    error: jest.spyOn(console, 'error').mockImplementation(()=>{})
};
// Producto de prueba
const mockProduct = {
    id: 1,
    title: 'Pintura Latex Interior Blanco 4L',
    price: 18000,
    discountedPrice: 15000,
    quantity: 1,
    imgs: {
        thumbnails: [
            '/images/products/pintura-latex-blanco-sm.jpg'
        ],
        previews: [
            '/images/products/pintura-latex-blanco.jpg'
        ]
    }
};
// Mock user data
const mockUser = {
    id: 'user_123',
    firstName: 'Juan',
    lastName: 'Pérez',
    emailAddresses: [
        {
            emailAddress: 'juan@example.com'
        }
    ]
};
describe('useCartWithClerk Hook', ()=>{
    let store;
    const mockUseUser = _nextjs.useUser;
    const renderHookWithStore = (initialState = {})=>{
        store = (0, _toolkit.configureStore)({
            reducer: {
                cartReducer: _cartslice.default
            },
            middleware: (getDefaultMiddleware)=>getDefaultMiddleware().concat(_cartPersistence.cartPersistenceMiddleware),
            preloadedState: initialState
        });
        const wrapper = ({ children })=>_react.default.createElement(_reactredux.Provider, {
                store
            }, children);
        return (0, _react1.renderHook)(()=>(0, _useCartWithClerk.useCartWithClerk)(), {
            wrapper
        });
    };
    beforeEach(()=>{
        localStorageMock.clear();
        jest.clearAllMocks();
    });
    afterAll(()=>{
        // Limpiar mocks
        jest.clearAllMocks();
    });
    describe('Unauthenticated User', ()=>{
        beforeEach(()=>{
            mockUseUser.mockReturnValue({
                user: null,
                isLoaded: true,
                isSignedIn: false
            });
        });
        it('should load cart from localStorage for unauthenticated user', ()=>{
            // Preparar localStorage con datos
            const cartData = {
                items: [
                    mockProduct
                ],
                timestamp: Date.now(),
                version: '1.0.0'
            };
            localStorageMock.setItem('pinteya-cart', JSON.stringify(cartData));
            const { result } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.userId).toBeUndefined();
            expect(result.current.cartItems).toHaveLength(1);
        });
        it('should start with empty cart when no localStorage data', ()=>{
            const { result } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.cartItems).toHaveLength(0);
        });
        it('should handle corrupted localStorage gracefully', ()=>{
            localStorageMock.setItem('pinteya-cart', 'invalid-json');
            const { result } = renderHookWithStore();
            expect(result.current.cartItems).toHaveLength(0);
            expect(localStorageMock.removeItem).toHaveBeenCalledWith('pinteya-cart');
        });
    });
    describe('Authenticated User', ()=>{
        beforeEach(()=>{
            mockUseUser.mockReturnValue({
                user: mockUser,
                isLoaded: true,
                isSignedIn: true
            });
        });
        it('should identify authenticated user correctly', ()=>{
            const { result } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(true);
            expect(result.current.userId).toBe(mockUser.id);
        });
        it('should migrate temporary cart when user signs in', async ()=>{
            // Preparar carrito temporal en localStorage
            const temporaryCartData = {
                items: [
                    mockProduct
                ],
                timestamp: Date.now(),
                version: '1.0.0'
            };
            localStorageMock.setItem('pinteya-cart', JSON.stringify(temporaryCartData));
            const { result } = renderHookWithStore();
            // Verificar que el hook funciona correctamente (sin verificar console logs)
            expect(result.current.isAuthenticated).toBe(true);
            // La migración es asíncrona, verificar que el hook se inicializa correctamente
            // El carrito puede estar vacío inicialmente mientras se procesa la migración
            expect(Array.isArray(result.current.cartItems)).toBe(true);
        });
        it('should save cart changes for authenticated user', async ()=>{
            const { result } = renderHookWithStore();
            // Agregar item al carrito
            (0, _react1.act)(()=>{
                store.dispatch((0, _cartslice.addItemToCart)(mockProduct));
            });
            // Esperar el debounce del efecto (optimizado)
            await (0, _react1.act)(async ()=>{
                await new Promise((resolve)=>setTimeout(resolve, 500));
            });
            // Verificar que el hook funciona correctamente
            expect(result.current.isAuthenticated).toBe(true);
        });
        it('should handle sign out correctly', ()=>{
            const { result } = renderHookWithStore({
                cartReducer: {
                    items: [
                        mockProduct
                    ]
                }
            });
            (0, _react1.act)(()=>{
                result.current.handleSignOut();
            });
            expect(result.current.cartItems).toHaveLength(0);
            expect(localStorageMock.removeItem).toHaveBeenCalledWith('pinteya-cart');
        });
    });
    describe('Loading States', ()=>{
        it('should handle loading state correctly', ()=>{
            mockUseUser.mockReturnValue({
                user: null,
                isLoaded: false,
                isSignedIn: false
            });
            const { result } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.userId).toBeUndefined();
        });
        it('should not perform actions while loading', ()=>{
            mockUseUser.mockReturnValue({
                user: null,
                isLoaded: false,
                isSignedIn: false
            });
            // Preparar localStorage con datos
            const cartData = {
                items: [
                    mockProduct
                ],
                timestamp: Date.now(),
                version: '1.0.0'
            };
            localStorageMock.setItem('pinteya-cart', JSON.stringify(cartData));
            const { result } = renderHookWithStore();
            // No debería cargar desde localStorage mientras está loading
            expect(result.current.cartItems).toHaveLength(0);
        });
    });
    describe('User State Transitions', ()=>{
        it('should handle transition from unauthenticated to authenticated', ()=>{
            // Iniciar como no autenticado
            mockUseUser.mockReturnValue({
                user: null,
                isLoaded: true,
                isSignedIn: false
            });
            const { result, rerender } = renderHookWithStore();
            // Agregar item como usuario no autenticado
            (0, _react1.act)(()=>{
                store.dispatch((0, _cartslice.addItemToCart)(mockProduct));
            });
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.cartItems).toHaveLength(1);
            // Simular autenticación
            mockUseUser.mockReturnValue({
                user: mockUser,
                isLoaded: true,
                isSignedIn: true
            });
            rerender();
            expect(result.current.isAuthenticated).toBe(true);
            expect(result.current.userId).toBe(mockUser.id);
            expect(result.current.cartItems).toHaveLength(1) // Carrito se mantiene
            ;
        });
        it('should handle transition from authenticated to unauthenticated', ()=>{
            // Iniciar como autenticado
            mockUseUser.mockReturnValue({
                user: mockUser,
                isLoaded: true,
                isSignedIn: true
            });
            const { result, rerender } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(true);
            // Simular cierre de sesión
            mockUseUser.mockReturnValue({
                user: null,
                isLoaded: true,
                isSignedIn: false
            });
            rerender();
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.userId).toBeUndefined();
        });
    });
    describe('Error Handling', ()=>{
        it('should handle migration errors gracefully', async ()=>{
            // Mock error en migración
            consoleSpy.log.mockImplementationOnce(()=>{
                throw new Error('Migration failed');
            });
            mockUseUser.mockReturnValue({
                user: mockUser,
                isLoaded: true,
                isSignedIn: true
            });
            // Preparar carrito temporal
            const temporaryCartData = {
                items: [
                    mockProduct
                ],
                timestamp: Date.now(),
                version: '1.0.0'
            };
            localStorageMock.setItem('pinteya-cart', JSON.stringify(temporaryCartData));
            const { result } = renderHookWithStore();
            expect(result.current.isAuthenticated).toBe(true);
        // Verificar que el hook maneja errores sin lanzar excepciones
        });
        it('should handle save errors gracefully', async ()=>{
            mockUseUser.mockReturnValue({
                user: mockUser,
                isLoaded: true,
                isSignedIn: true
            });
            // Mock error en guardado
            consoleSpy.log.mockImplementation((message)=>{
                if (message.includes('Saving')) {
                    throw new Error('Save failed');
                }
            });
            const { result } = renderHookWithStore();
            // Agregar item al carrito
            (0, _react1.act)(()=>{
                store.dispatch((0, _cartslice.addItemToCart)(mockProduct));
            });
            // Esperar el debounce del efecto (optimizado)
            await (0, _react1.act)(async ()=>{
                await new Promise((resolve)=>setTimeout(resolve, 500));
            });
            // Verificar que el hook maneja errores sin lanzar excepciones
            expect(result.current.isAuthenticated).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcdXNlQ2FydFdpdGhDbGVyay50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIFRFU1RTIFVOSVRBUklPUyBQQVJBIFVTRUNBUlQgV0lUSCBDTEVSSyBIT09LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXHJcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCdcclxuaW1wb3J0IHsgdXNlVXNlciB9IGZyb20gJ0BjbGVyay9uZXh0anMnXHJcbmltcG9ydCBjYXJ0UmVkdWNlciwgeyBhZGRJdGVtVG9DYXJ0LCBoeWRyYXRlQ2FydCB9IGZyb20gJ0AvcmVkdXgvZmVhdHVyZXMvY2FydC1zbGljZSdcclxuaW1wb3J0IHsgdXNlQ2FydFdpdGhDbGVyayB9IGZyb20gJ0AvaG9va3MvdXNlQ2FydFdpdGhDbGVyaydcclxuaW1wb3J0IHsgY2FydFBlcnNpc3RlbmNlTWlkZGxld2FyZSB9IGZyb20gJ0AvcmVkdXgvbWlkZGxld2FyZS9jYXJ0UGVyc2lzdGVuY2UnXHJcblxyXG4vLyBNb2NrIENsZXJrXHJcbmplc3QubW9jaygnQGNsZXJrL25leHRqcycsICgpID0+ICh7XHJcbiAgdXNlVXNlcjogamVzdC5mbigpXHJcbn0pKVxyXG5cclxuLy8gTW9jayBsb2NhbFN0b3JhZ2VcclxuY29uc3QgbG9jYWxTdG9yYWdlTW9jayA9ICgoKSA9PiB7XHJcbiAgbGV0IHN0b3JlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldEl0ZW06IGplc3QuZm4oKGtleTogc3RyaW5nKSA9PiBzdG9yZVtrZXldIHx8IG51bGwpLFxyXG4gICAgc2V0SXRlbTogamVzdC5mbigoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgc3RvcmVba2V5XSA9IHZhbHVlLnRvU3RyaW5nKClcclxuICAgIH0pLFxyXG4gICAgcmVtb3ZlSXRlbTogamVzdC5mbigoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgZGVsZXRlIHN0b3JlW2tleV1cclxuICAgIH0pLFxyXG4gICAgY2xlYXI6IGplc3QuZm4oKCkgPT4ge1xyXG4gICAgICBzdG9yZSA9IHt9XHJcbiAgICB9KVxyXG4gIH1cclxufSkoKVxyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcclxuICB2YWx1ZTogbG9jYWxTdG9yYWdlTW9ja1xyXG59KVxyXG5cclxuLy8gTW9jayBjb25zb2xlIG1ldGhvZHNcclxuY29uc3QgY29uc29sZVNweSA9IHtcclxuICB3YXJuOiBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KSxcclxuICBsb2c6IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSksXHJcbiAgZXJyb3I6IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KVxyXG59XHJcblxyXG4vLyBQcm9kdWN0byBkZSBwcnVlYmFcclxuY29uc3QgbW9ja1Byb2R1Y3QgPSB7XHJcbiAgaWQ6IDEsXHJcbiAgdGl0bGU6ICdQaW50dXJhIExhdGV4IEludGVyaW9yIEJsYW5jbyA0TCcsXHJcbiAgcHJpY2U6IDE4MDAwLFxyXG4gIGRpc2NvdW50ZWRQcmljZTogMTUwMDAsXHJcbiAgcXVhbnRpdHk6IDEsXHJcbiAgaW1nczoge1xyXG4gICAgdGh1bWJuYWlsczogWycvaW1hZ2VzL3Byb2R1Y3RzL3BpbnR1cmEtbGF0ZXgtYmxhbmNvLXNtLmpwZyddLFxyXG4gICAgcHJldmlld3M6IFsnL2ltYWdlcy9wcm9kdWN0cy9waW50dXJhLWxhdGV4LWJsYW5jby5qcGcnXSxcclxuICB9LFxyXG59XHJcblxyXG4vLyBNb2NrIHVzZXIgZGF0YVxyXG5jb25zdCBtb2NrVXNlciA9IHtcclxuICBpZDogJ3VzZXJfMTIzJyxcclxuICBmaXJzdE5hbWU6ICdKdWFuJyxcclxuICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgZW1haWxBZGRyZXNzZXM6IFt7IGVtYWlsQWRkcmVzczogJ2p1YW5AZXhhbXBsZS5jb20nIH1dXHJcbn1cclxuXHJcbmRlc2NyaWJlKCd1c2VDYXJ0V2l0aENsZXJrIEhvb2snLCAoKSA9PiB7XHJcbiAgbGV0IHN0b3JlOiBhbnlcclxuICBjb25zdCBtb2NrVXNlVXNlciA9IHVzZVVzZXIgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdXNlVXNlcj5cclxuXHJcbiAgY29uc3QgcmVuZGVySG9va1dpdGhTdG9yZSA9IChpbml0aWFsU3RhdGUgPSB7fSkgPT4ge1xyXG4gICAgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XHJcbiAgICAgIHJlZHVjZXI6IHtcclxuICAgICAgICBjYXJ0UmVkdWNlclxyXG4gICAgICB9LFxyXG4gICAgICBtaWRkbGV3YXJlOiAoZ2V0RGVmYXVsdE1pZGRsZXdhcmUpID0+XHJcbiAgICAgICAgZ2V0RGVmYXVsdE1pZGRsZXdhcmUoKS5jb25jYXQoY2FydFBlcnNpc3RlbmNlTWlkZGxld2FyZSksXHJcbiAgICAgIHByZWxvYWRlZFN0YXRlOiBpbml0aWFsU3RhdGVcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3Qgd3JhcHBlciA9ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiAoXHJcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvdmlkZXIsIHsgc3RvcmUgfSwgY2hpbGRyZW4pXHJcbiAgICApXHJcblxyXG4gICAgcmV0dXJuIHJlbmRlckhvb2soKCkgPT4gdXNlQ2FydFdpdGhDbGVyaygpLCB7IHdyYXBwZXIgfSlcclxuICB9XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgbG9jYWxTdG9yYWdlTW9jay5jbGVhcigpXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxyXG4gIH0pXHJcblxyXG4gIGFmdGVyQWxsKCgpID0+IHtcclxuICAgIC8vIExpbXBpYXIgbW9ja3NcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ1VuYXV0aGVudGljYXRlZCBVc2VyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tVc2VVc2VyLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICBpc0xvYWRlZDogdHJ1ZSxcclxuICAgICAgICBpc1NpZ25lZEluOiBmYWxzZVxyXG4gICAgICB9IGFzIGFueSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2FkIGNhcnQgZnJvbSBsb2NhbFN0b3JhZ2UgZm9yIHVuYXV0aGVudGljYXRlZCB1c2VyJywgKCkgPT4ge1xyXG4gICAgICAvLyBQcmVwYXJhciBsb2NhbFN0b3JhZ2UgY29uIGRhdG9zXHJcbiAgICAgIGNvbnN0IGNhcnREYXRhID0ge1xyXG4gICAgICAgIGl0ZW1zOiBbbW9ja1Byb2R1Y3RdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnXHJcbiAgICAgIH1cclxuICAgICAgbG9jYWxTdG9yYWdlTW9jay5zZXRJdGVtKCdwaW50ZXlhLWNhcnQnLCBKU09OLnN0cmluZ2lmeShjYXJ0RGF0YSkpXHJcblxyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9va1dpdGhTdG9yZSgpXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcklkKS50b0JlVW5kZWZpbmVkKClcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhcnRJdGVtcykudG9IYXZlTGVuZ3RoKDEpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgc3RhcnQgd2l0aCBlbXB0eSBjYXJ0IHdoZW4gbm8gbG9jYWxTdG9yYWdlIGRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUoZmFsc2UpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYXJ0SXRlbXMpLnRvSGF2ZUxlbmd0aCgwKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb3JydXB0ZWQgbG9jYWxTdG9yYWdlIGdyYWNlZnVsbHknLCAoKSA9PiB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZU1vY2suc2V0SXRlbSgncGludGV5YS1jYXJ0JywgJ2ludmFsaWQtanNvbicpXHJcblxyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9va1dpdGhTdG9yZSgpXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FydEl0ZW1zKS50b0hhdmVMZW5ndGgoMClcclxuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZU1vY2sucmVtb3ZlSXRlbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BpbnRleWEtY2FydCcpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdBdXRoZW50aWNhdGVkIFVzZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1VzZVVzZXIubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICB1c2VyOiBtb2NrVXNlcixcclxuICAgICAgICBpc0xvYWRlZDogdHJ1ZSxcclxuICAgICAgICBpc1NpZ25lZEluOiB0cnVlXHJcbiAgICAgIH0gYXMgYW55KVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IGF1dGhlbnRpY2F0ZWQgdXNlciBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVzZXJJZCkudG9CZShtb2NrVXNlci5pZClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCBtaWdyYXRlIHRlbXBvcmFyeSBjYXJ0IHdoZW4gdXNlciBzaWducyBpbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gUHJlcGFyYXIgY2Fycml0byB0ZW1wb3JhbCBlbiBsb2NhbFN0b3JhZ2VcclxuICAgICAgY29uc3QgdGVtcG9yYXJ5Q2FydERhdGEgPSB7XHJcbiAgICAgICAgaXRlbXM6IFttb2NrUHJvZHVjdF0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCdcclxuICAgICAgfVxyXG4gICAgICBsb2NhbFN0b3JhZ2VNb2NrLnNldEl0ZW0oJ3BpbnRleWEtY2FydCcsIEpTT04uc3RyaW5naWZ5KHRlbXBvcmFyeUNhcnREYXRhKSlcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgZWwgaG9vayBmdW5jaW9uYSBjb3JyZWN0YW1lbnRlIChzaW4gdmVyaWZpY2FyIGNvbnNvbGUgbG9ncylcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZSh0cnVlKVxyXG5cclxuICAgICAgLy8gTGEgbWlncmFjacOzbiBlcyBhc8OtbmNyb25hLCB2ZXJpZmljYXIgcXVlIGVsIGhvb2sgc2UgaW5pY2lhbGl6YSBjb3JyZWN0YW1lbnRlXHJcbiAgICAgIC8vIEVsIGNhcnJpdG8gcHVlZGUgZXN0YXIgdmFjw61vIGluaWNpYWxtZW50ZSBtaWVudHJhcyBzZSBwcm9jZXNhIGxhIG1pZ3JhY2nDs25cclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmN1cnJlbnQuY2FydEl0ZW1zKSkudG9CZSh0cnVlKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNhdmUgY2FydCBjaGFuZ2VzIGZvciBhdXRoZW50aWNhdGVkIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIC8vIEFncmVnYXIgaXRlbSBhbCBjYXJyaXRvXHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goYWRkSXRlbVRvQ2FydChtb2NrUHJvZHVjdCkpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBFc3BlcmFyIGVsIGRlYm91bmNlIGRlbCBlZmVjdG8gKG9wdGltaXphZG8pXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIGhvb2sgZnVuY2lvbmEgY29ycmVjdGFtZW50ZVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpZ24gb3V0IGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2tXaXRoU3RvcmUoe1xyXG4gICAgICAgIGNhcnRSZWR1Y2VyOiB7XHJcbiAgICAgICAgICBpdGVtczogW21vY2tQcm9kdWN0XVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuaGFuZGxlU2lnbk91dCgpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FydEl0ZW1zKS50b0hhdmVMZW5ndGgoMClcclxuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZU1vY2sucmVtb3ZlSXRlbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BpbnRleWEtY2FydCcpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdMb2FkaW5nIFN0YXRlcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvYWRpbmcgc3RhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlVXNlci5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHVzZXI6IG51bGwsXHJcbiAgICAgICAgaXNMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgIGlzU2lnbmVkSW46IGZhbHNlXHJcbiAgICAgIH0gYXMgYW55KVxyXG5cclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2tXaXRoU3RvcmUoKVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZShmYWxzZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVzZXJJZCkudG9CZVVuZGVmaW5lZCgpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgbm90IHBlcmZvcm0gYWN0aW9ucyB3aGlsZSBsb2FkaW5nJywgKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlVXNlci5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHVzZXI6IG51bGwsXHJcbiAgICAgICAgaXNMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgIGlzU2lnbmVkSW46IGZhbHNlXHJcbiAgICAgIH0gYXMgYW55KVxyXG5cclxuICAgICAgLy8gUHJlcGFyYXIgbG9jYWxTdG9yYWdlIGNvbiBkYXRvc1xyXG4gICAgICBjb25zdCBjYXJ0RGF0YSA9IHtcclxuICAgICAgICBpdGVtczogW21vY2tQcm9kdWN0XSxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJ1xyXG4gICAgICB9XHJcbiAgICAgIGxvY2FsU3RvcmFnZU1vY2suc2V0SXRlbSgncGludGV5YS1jYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydERhdGEpKVxyXG5cclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2tXaXRoU3RvcmUoKVxyXG5cclxuICAgICAgLy8gTm8gZGViZXLDrWEgY2FyZ2FyIGRlc2RlIGxvY2FsU3RvcmFnZSBtaWVudHJhcyBlc3TDoSBsb2FkaW5nXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYXJ0SXRlbXMpLnRvSGF2ZUxlbmd0aCgwKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnVXNlciBTdGF0ZSBUcmFuc2l0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRyYW5zaXRpb24gZnJvbSB1bmF1dGhlbnRpY2F0ZWQgdG8gYXV0aGVudGljYXRlZCcsICgpID0+IHtcclxuICAgICAgLy8gSW5pY2lhciBjb21vIG5vIGF1dGVudGljYWRvXHJcbiAgICAgIG1vY2tVc2VVc2VyLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICBpc0xvYWRlZDogdHJ1ZSxcclxuICAgICAgICBpc1NpZ25lZEluOiBmYWxzZVxyXG4gICAgICB9IGFzIGFueSlcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCByZXJlbmRlciB9ID0gcmVuZGVySG9va1dpdGhTdG9yZSgpXHJcblxyXG4gICAgICAvLyBBZ3JlZ2FyIGl0ZW0gY29tbyB1c3VhcmlvIG5vIGF1dGVudGljYWRvXHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goYWRkSXRlbVRvQ2FydChtb2NrUHJvZHVjdCkpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FydEl0ZW1zKS50b0hhdmVMZW5ndGgoMSlcclxuXHJcbiAgICAgIC8vIFNpbXVsYXIgYXV0ZW50aWNhY2nDs25cclxuICAgICAgbW9ja1VzZVVzZXIubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICB1c2VyOiBtb2NrVXNlcixcclxuICAgICAgICBpc0xvYWRlZDogdHJ1ZSxcclxuICAgICAgICBpc1NpZ25lZEluOiB0cnVlXHJcbiAgICAgIH0gYXMgYW55KVxyXG5cclxuICAgICAgcmVyZW5kZXIoKVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcklkKS50b0JlKG1vY2tVc2VyLmlkKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FydEl0ZW1zKS50b0hhdmVMZW5ndGgoMSkgLy8gQ2Fycml0byBzZSBtYW50aWVuZVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0cmFuc2l0aW9uIGZyb20gYXV0aGVudGljYXRlZCB0byB1bmF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XHJcbiAgICAgIC8vIEluaWNpYXIgY29tbyBhdXRlbnRpY2Fkb1xyXG4gICAgICBtb2NrVXNlVXNlci5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHVzZXI6IG1vY2tVc2VyLFxyXG4gICAgICAgIGlzTG9hZGVkOiB0cnVlLFxyXG4gICAgICAgIGlzU2lnbmVkSW46IHRydWVcclxuICAgICAgfSBhcyBhbnkpXHJcblxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgcmVyZW5kZXIgfSA9IHJlbmRlckhvb2tXaXRoU3RvcmUoKVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZSh0cnVlKVxyXG5cclxuICAgICAgLy8gU2ltdWxhciBjaWVycmUgZGUgc2VzacOzblxyXG4gICAgICBtb2NrVXNlVXNlci5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHVzZXI6IG51bGwsXHJcbiAgICAgICAgaXNMb2FkZWQ6IHRydWUsXHJcbiAgICAgICAgaXNTaWduZWRJbjogZmFsc2VcclxuICAgICAgfSBhcyBhbnkpXHJcblxyXG4gICAgICByZXJlbmRlcigpXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcklkKS50b0JlVW5kZWZpbmVkKClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlncmF0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIGVycm9yIGVuIG1pZ3JhY2nDs25cclxuICAgICAgY29uc29sZVNweS5sb2cubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaWdyYXRpb24gZmFpbGVkJylcclxuICAgICAgfSlcclxuXHJcbiAgICAgIG1vY2tVc2VVc2VyLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgdXNlcjogbW9ja1VzZXIsXHJcbiAgICAgICAgaXNMb2FkZWQ6IHRydWUsXHJcbiAgICAgICAgaXNTaWduZWRJbjogdHJ1ZVxyXG4gICAgICB9IGFzIGFueSlcclxuXHJcbiAgICAgIC8vIFByZXBhcmFyIGNhcnJpdG8gdGVtcG9yYWxcclxuICAgICAgY29uc3QgdGVtcG9yYXJ5Q2FydERhdGEgPSB7XHJcbiAgICAgICAgaXRlbXM6IFttb2NrUHJvZHVjdF0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCdcclxuICAgICAgfVxyXG4gICAgICBsb2NhbFN0b3JhZ2VNb2NrLnNldEl0ZW0oJ3BpbnRleWEtY2FydCcsIEpTT04uc3RyaW5naWZ5KHRlbXBvcmFyeUNhcnREYXRhKSlcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcclxuICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBlbCBob29rIG1hbmVqYSBlcnJvcmVzIHNpbiBsYW56YXIgZXhjZXBjaW9uZXNcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2F2ZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1VzZVVzZXIubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICB1c2VyOiBtb2NrVXNlcixcclxuICAgICAgICBpc0xvYWRlZDogdHJ1ZSxcclxuICAgICAgICBpc1NpZ25lZEluOiB0cnVlXHJcbiAgICAgIH0gYXMgYW55KVxyXG5cclxuICAgICAgLy8gTW9jayBlcnJvciBlbiBndWFyZGFkb1xyXG4gICAgICBjb25zb2xlU3B5LmxvZy5tb2NrSW1wbGVtZW50YXRpb24oKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS5pbmNsdWRlcygnU2F2aW5nJykpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2F2ZSBmYWlsZWQnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rV2l0aFN0b3JlKClcclxuXHJcbiAgICAgIC8vIEFncmVnYXIgaXRlbSBhbCBjYXJyaXRvXHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goYWRkSXRlbVRvQ2FydChtb2NrUHJvZHVjdCkpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBFc3BlcmFyIGVsIGRlYm91bmNlIGRlbCBlZmVjdG8gKG9wdGltaXphZG8pXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIGhvb2sgbWFuZWphIGVycm9yZXMgc2luIGxhbnphciBleGNlcGNpb25lc1xyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVVzZXIiLCJmbiIsImxvY2FsU3RvcmFnZU1vY2siLCJzdG9yZSIsImdldEl0ZW0iLCJrZXkiLCJzZXRJdGVtIiwidmFsdWUiLCJ0b1N0cmluZyIsInJlbW92ZUl0ZW0iLCJjbGVhciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwid2luZG93IiwiY29uc29sZVNweSIsIndhcm4iLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJsb2ciLCJlcnJvciIsIm1vY2tQcm9kdWN0IiwiaWQiLCJ0aXRsZSIsInByaWNlIiwiZGlzY291bnRlZFByaWNlIiwicXVhbnRpdHkiLCJpbWdzIiwidGh1bWJuYWlscyIsInByZXZpZXdzIiwibW9ja1VzZXIiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsQWRkcmVzc2VzIiwiZW1haWxBZGRyZXNzIiwiZGVzY3JpYmUiLCJtb2NrVXNlVXNlciIsInJlbmRlckhvb2tXaXRoU3RvcmUiLCJpbml0aWFsU3RhdGUiLCJjb25maWd1cmVTdG9yZSIsInJlZHVjZXIiLCJjYXJ0UmVkdWNlciIsIm1pZGRsZXdhcmUiLCJnZXREZWZhdWx0TWlkZGxld2FyZSIsImNvbmNhdCIsImNhcnRQZXJzaXN0ZW5jZU1pZGRsZXdhcmUiLCJwcmVsb2FkZWRTdGF0ZSIsIndyYXBwZXIiLCJjaGlsZHJlbiIsIlJlYWN0IiwiY3JlYXRlRWxlbWVudCIsIlByb3ZpZGVyIiwicmVuZGVySG9vayIsInVzZUNhcnRXaXRoQ2xlcmsiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImFmdGVyQWxsIiwibW9ja1JldHVyblZhbHVlIiwidXNlciIsImlzTG9hZGVkIiwiaXNTaWduZWRJbiIsIml0IiwiY2FydERhdGEiLCJpdGVtcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ2ZXJzaW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsImV4cGVjdCIsImN1cnJlbnQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0JlIiwidXNlcklkIiwidG9CZVVuZGVmaW5lZCIsImNhcnRJdGVtcyIsInRvSGF2ZUxlbmd0aCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidGVtcG9yYXJ5Q2FydERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJhY3QiLCJkaXNwYXRjaCIsImFkZEl0ZW1Ub0NhcnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJoYW5kbGVTaWduT3V0IiwicmVyZW5kZXIiLCJtb2NrSW1wbGVtZW50YXRpb25PbmNlIiwi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