{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\product-card-enhanced.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { ProductCard, ProductCardProps } from \"./card\"\r\nimport { \r\n  useDesignSystemConfig, \r\n  shouldShowInstallments, \r\n  shouldShowFreeShipping,\r\n  calculateInstallments \r\n} from \"@/lib/design-system-config\"\r\n\r\nexport interface EnhancedProductCardProps extends Omit<ProductCardProps, 'useNewComponents' | 'installments'> {\r\n  /** Contexto de uso para aplicar configuración específica */\r\n  context?: 'default' | 'productDetail' | 'checkout' | 'demo'\r\n  /** Forzar uso de nuevos componentes (override de configuración) */\r\n  forceNewComponents?: boolean\r\n  /** Configuración manual de cuotas (override de cálculo automático) */\r\n  customInstallments?: {\r\n    quantity: number\r\n    amount: number\r\n    interestFree?: boolean\r\n  }\r\n  /** Datos adicionales del producto para lógica automática */\r\n  productData?: {\r\n    category?: string\r\n    weight?: number\r\n    dimensions?: {\r\n      length: number\r\n      width: number\r\n      height: number\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ProductCard mejorado con configuración automática del Design System\r\n * \r\n * Este componente aplica automáticamente las mejores prácticas del design system:\r\n * - Calcula cuotas basado en el precio\r\n * - Determina si mostrar envío gratis\r\n * - Aplica configuración según el contexto\r\n * - Usa nuevos componentes e-commerce cuando corresponde\r\n */\r\nconst EnhancedProductCard = React.forwardRef<HTMLDivElement, EnhancedProductCardProps>(\r\n  ({\r\n    context = 'default',\r\n    forceNewComponents,\r\n    customInstallments,\r\n    productData,\r\n    price = 0,\r\n    originalPrice,\r\n    stock = 0,\r\n    stockUnit,\r\n    showInstallments,\r\n    showFreeShipping,\r\n    showExactStock,\r\n    lowStockThreshold,\r\n    ...props\r\n  }, ref) => {\r\n    // Obtener configuración según contexto\r\n    const config = useDesignSystemConfig(context === 'default' ? undefined : context)\r\n    \r\n    // Determinar si usar nuevos componentes\r\n    const useNewComponents = forceNewComponents ?? \r\n      (context === 'demo' ? true : config.productCard.useNewComponentsByDefault)\r\n    \r\n    // Calcular cuotas automáticamente si no se proporcionan\r\n    const autoInstallments = React.useMemo(() => {\r\n      if (customInstallments) return customInstallments\r\n      if (!shouldShowInstallments(price, config)) return undefined\r\n      return calculateInstallments(price)\r\n    }, [price, customInstallments, config])\r\n    \r\n    // Determinar si mostrar información de cuotas\r\n    const shouldDisplayInstallments = showInstallments ?? \r\n      (useNewComponents && shouldShowInstallments(price, config))\r\n    \r\n    // Determinar si mostrar envío gratis\r\n    const shouldDisplayFreeShipping = showFreeShipping ?? \r\n      shouldShowFreeShipping(price, config)\r\n    \r\n    // Configuración de stock\r\n    const stockConfig = {\r\n      unit: stockUnit ?? config.ecommerce.stockIndicator.defaultUnit,\r\n      showExact: showExactStock ?? \r\n        (context === 'productDetail' || context === 'demo' ? true : config.ecommerce.stockIndicator.showExactQuantityByDefault),\r\n      threshold: lowStockThreshold ?? config.ecommerce.stockIndicator.defaultLowStockThreshold,\r\n    }\r\n    \r\n    // Determinar descuento automáticamente\r\n    const hasDiscount = originalPrice && originalPrice > price\r\n    const discountPercentage = hasDiscount ? \r\n      Math.round(((originalPrice - price) / originalPrice) * 100) : 0\r\n    \r\n    return (\r\n      <ProductCard\r\n        ref={ref}\r\n        price={price}\r\n        originalPrice={originalPrice}\r\n        stock={stock}\r\n        stockUnit={stockConfig.unit}\r\n        showExactStock={stockConfig.showExact}\r\n        lowStockThreshold={stockConfig.threshold}\r\n        useNewComponents={useNewComponents}\r\n        showInstallments={shouldDisplayInstallments}\r\n        installments={autoInstallments}\r\n        showFreeShipping={shouldDisplayFreeShipping}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\n\r\nEnhancedProductCard.displayName = \"EnhancedProductCard\"\r\n\r\n/**\r\n * Hook para obtener configuración de producto automática\r\n */\r\nexport function useProductConfig(price: number, context: string = 'default') {\r\n  const config = useDesignSystemConfig(context as any)\r\n  \r\n  return React.useMemo(() => ({\r\n    shouldShowInstallments: shouldShowInstallments(price, config),\r\n    shouldShowFreeShipping: shouldShowFreeShipping(price, config),\r\n    installments: calculateInstallments(price),\r\n    useNewComponents: config.productCard.useNewComponentsByDefault,\r\n  }), [price, config])\r\n}\r\n\r\n/**\r\n * Componente de ejemplo para mostrar diferentes configuraciones\r\n */\r\nexport function ProductCardShowcase() {\r\n  const products = [\r\n    {\r\n      id: 1,\r\n      title: \"Pintura Sherwin Williams 4L\",\r\n      price: 8500,\r\n      originalPrice: 10000,\r\n      stock: 12,\r\n      image: \"https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/sherwin-williams/pintura-sherwin-williams.jpg\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Esmalte Petrilac 1L\",\r\n      price: 1850,\r\n      originalPrice: 2200,\r\n      stock: 8,\r\n      image: \"https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/petrilac/esmalte-petrilac.jpg\"\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Poximix 250ml\",\r\n      price: 2300,\r\n      stock: 2,\r\n      image: \"https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/poximix/adhesivo-poximix.jpg\"\r\n    },\r\n    {\r\n      id: 4,\r\n      title: \"Lija El Galgo\",\r\n      price: 450,\r\n      stock: 0,\r\n      image: \"https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/galgo/lija-galgo.jpg\"\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      \r\n      {/* Contexto Default */}\r\n      <div>\r\n        <h3 className=\"text-lg font-semibold mb-4\">Contexto: Default (Grid de productos)</h3>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {products.map(product => (\r\n            <EnhancedProductCard\r\n              key={`default-${product.id}`}\r\n              context=\"default\"\r\n              title={product.title}\r\n              price={product.price}\r\n              originalPrice={product.originalPrice}\r\n              stock={product.stock}\r\n              image={product.image}\r\n              stockUnit=\"unidades\"\r\n              onAddToCart={() => console.log(`Agregado: ${product.title}`)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contexto Demo */}\r\n      <div>\r\n        <h3 className=\"text-lg font-semibold mb-4\">Contexto: Demo (Nuevos componentes)</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {products.map(product => (\r\n            <EnhancedProductCard\r\n              key={`demo-${product.id}`}\r\n              context=\"demo\"\r\n              title={product.title}\r\n              price={product.price}\r\n              originalPrice={product.originalPrice}\r\n              stock={product.stock}\r\n              image={product.image}\r\n              stockUnit=\"unidades\"\r\n              onAddToCart={() => console.log(`Agregado: ${product.title}`)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contexto Product Detail */}\r\n      <div>\r\n        <h3 className=\"text-lg font-semibold mb-4\">Contexto: Product Detail (Información completa)</h3>\r\n        <div className=\"max-w-sm mx-auto\">\r\n          <EnhancedProductCard\r\n            context=\"productDetail\"\r\n            title=\"Pintura Sherwin Williams ProClassic 4L\"\r\n            price={8500}\r\n            originalPrice={10000}\r\n            stock={12}\r\n            image=\"https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/sherwin-williams/pintura-sherwin-williams.jpg\"\r\n            stockUnit=\"latas\"\r\n            onAddToCart={() => console.log('Agregado desde detalle')}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { EnhancedProductCard }\r\n"],"names":["EnhancedProductCard","ProductCardShowcase","useProductConfig","React","forwardRef","context","forceNewComponents","customInstallments","productData","price","originalPrice","stock","stockUnit","showInstallments","showFreeShipping","showExactStock","lowStockThreshold","props","ref","config","useDesignSystemConfig","undefined","useNewComponents","productCard","useNewComponentsByDefault","autoInstallments","useMemo","shouldShowInstallments","calculateInstallments","shouldDisplayInstallments","shouldDisplayFreeShipping","shouldShowFreeShipping","stockConfig","unit","ecommerce","stockIndicator","defaultUnit","showExact","showExactQuantityByDefault","threshold","defaultLowStockThreshold","hasDiscount","discountPercentage","Math","round","ProductCard","installments","displayName","products","id","title","image","div","className","h3","map","product","onAddToCart","console","log"],"mappings":"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"}