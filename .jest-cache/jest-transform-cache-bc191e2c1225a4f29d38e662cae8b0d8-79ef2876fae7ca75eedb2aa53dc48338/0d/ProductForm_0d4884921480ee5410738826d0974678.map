{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { AdminCard } from '../ui/AdminCard';\nimport { ProductImageManager } from './ProductImageManager';\nimport { ProductVariantManager } from './ProductVariantManager';\nimport { ProductPricing } from './ProductPricing';\nimport { ProductInventory } from './ProductInventory';\nimport { ProductSeo } from './ProductSeo';\nimport { CategorySelector } from './CategorySelector';\nimport { useProductNotifications } from '@/hooks/admin/useProductNotifications';\nimport { useProductFormReducer } from '@/hooks/optimization/useProductFormReducer';\nimport { cn } from '@/lib/utils';\nimport { Save, X, Eye, Loader2 } from 'lucide-react';\n\n// Validation schema\nconst ProductFormSchema = z.object({\n  // Basic Information\n  name: z.string()\n    .min(1, 'El nombre es requerido')\n    .max(255, 'M√°ximo 255 caracteres')\n    .regex(/^[a-zA-Z0-9\\s\\-_.,()]+$/, 'El nombre contiene caracteres no v√°lidos'),\n  \n  description: z.string()\n    .max(5000, 'M√°ximo 5000 caracteres')\n    .optional(),\n  \n  short_description: z.string()\n    .max(500, 'M√°ximo 500 caracteres')\n    .optional(),\n  \n  category_id: z.string()\n    .uuid('Selecciona una categor√≠a v√°lida'),\n  \n  status: z.enum(['active', 'inactive', 'draft']),\n  \n  // Product Details\n  brand: z.string().max(100, 'M√°ximo 100 caracteres').optional(),\n  model: z.string().max(100, 'M√°ximo 100 caracteres').optional(),\n  sku: z.string()\n    .max(50, 'M√°ximo 50 caracteres')\n    .regex(/^[A-Z0-9\\-_]+$/, 'SKU debe contener solo letras may√∫sculas, n√∫meros, guiones y guiones bajos')\n    .optional(),\n  barcode: z.string().max(50, 'M√°ximo 50 caracteres').optional(),\n  \n  // Pricing with validation\n  price: z.number()\n    .min(0.01, 'El precio debe ser mayor a 0')\n    .max(999999.99, 'Precio m√°ximo excedido'),\n  \n  compare_price: z.number()\n    .min(0)\n    .max(999999.99, 'Precio m√°ximo excedido')\n    .optional()\n    .refine((val, ctx) => {\n      const price = ctx.parent.price;\n      return !val || val >= price;\n    }, 'El precio de comparaci√≥n debe ser mayor o igual al precio base'),\n  \n  cost_price: z.number()\n    .min(0)\n    .max(999999.99, 'Precio m√°ximo excedido')\n    .optional()\n    .refine((val, ctx) => {\n      const price = ctx.parent.price;\n      return !val || val <= price;\n    }, 'El precio de costo debe ser menor o igual al precio de venta'),\n  \n  // Tax and shipping\n  tax_rate: z.number().min(0).max(100, 'Tasa de impuesto m√°xima 100%').optional(),\n  requires_shipping: z.boolean().default(true),\n  weight: z.number().min(0, 'El peso debe ser mayor o igual a 0').optional(),\n  dimensions: z.object({\n    length: z.number().min(0).optional(),\n    width: z.number().min(0).optional(),\n    height: z.number().min(0).optional(),\n  }).optional(),\n  \n  // Inventory with enhanced validation\n  track_inventory: z.boolean().default(true),\n  stock: z.number()\n    .min(0, 'El stock debe ser mayor o igual a 0')\n    .max(999999, 'Stock m√°ximo excedido'),\n  \n  low_stock_threshold: z.number()\n    .min(0)\n    .max(1000, 'Umbral m√°ximo excedido')\n    .optional()\n    .refine((val, ctx) => {\n      const stock = ctx.parent.stock;\n      return !val || val <= stock;\n    }, 'El umbral debe ser menor o igual al stock actual'),\n  \n  allow_backorder: z.boolean().default(false),\n  \n  // SEO with enhanced validation\n  seo_title: z.string()\n    .max(60, 'M√°ximo 60 caracteres para mejor SEO')\n    .optional(),\n  \n  seo_description: z.string()\n    .max(160, 'M√°ximo 160 caracteres para mejor SEO')\n    .optional(),\n  \n  slug: z.string()\n    .max(255, 'M√°ximo 255 caracteres')\n    .regex(/^[a-z0-9\\-]+$/, 'El slug debe contener solo letras min√∫sculas, n√∫meros y guiones')\n    .optional(),\n  \n  meta_keywords: z.array(z.string().max(50)).max(10, 'M√°ximo 10 palabras clave').optional(),\n  \n  // Images with enhanced validation\n  images: z.array(z.object({\n    id: z.string().optional(),\n    url: z.string().url('URL de imagen inv√°lida'),\n    alt: z.string().max(255, 'M√°ximo 255 caracteres').optional(),\n    is_primary: z.boolean().default(false),\n    sort_order: z.number().min(0).optional(),\n    size: z.number().max(10485760, 'Imagen muy grande (m√°ximo 10MB)').optional(), // 10MB\n  })).max(10, 'M√°ximo 10 im√°genes por producto').optional(),\n  \n  // Variants with enhanced validation\n  variants: z.array(z.object({\n    id: z.string().optional(),\n    name: z.string().min(1, 'Nombre de variante requerido').max(100, 'M√°ximo 100 caracteres'),\n    options: z.array(z.string().min(1, 'Opci√≥n no puede estar vac√≠a').max(50, 'M√°ximo 50 caracteres'))\n      .min(1, 'Al menos una opci√≥n requerida')\n      .max(20, 'M√°ximo 20 opciones por variante'),\n    required: z.boolean().default(false),\n  })).max(5, 'M√°ximo 5 variantes por producto').optional(),\n  \n  // Additional fields\n  tags: z.array(z.string().max(30)).max(20, 'M√°ximo 20 etiquetas').optional(),\n  featured: z.boolean().default(false),\n  digital: z.boolean().default(false),\n  downloadable_files: z.array(z.object({\n    name: z.string(),\n    url: z.string().url(),\n    size: z.number().optional(),\n  })).optional(),\n}).refine((data) => {\n  // Ensure at least one image is primary if images exist\n  if (data.images && data.images.length > 0) {\n    const primaryImages = data.images.filter(img => img.is_primary);\n    return primaryImages.length <= 1;\n  }\n  return true;\n}, {\n  message: 'Solo puede haber una imagen principal',\n  path: ['images'],\n});\n\ntype ProductFormData = z.infer<typeof ProductFormSchema>;\n\ninterface ProductFormProps {\n  initialData?: Partial<ProductFormData>;\n  mode?: 'create' | 'edit';\n  onSubmit: (data: ProductFormData) => Promise<void>;\n  onCancel?: () => void;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport function ProductForm({\n  initialData,\n  mode = 'create',\n  onSubmit,\n  onCancel,\n  isLoading = false,\n  className\n}: ProductFormProps) {\n  const { state, actions } = useProductFormReducer({\n    activeTab: 'general',\n    previewMode: false,\n    isDirty: false,\n    validationErrors: {},\n    uploadProgress: 0,\n    isUploading: false\n  });\n  const notifications = useProductNotifications();\n\n  const form = useForm<ProductFormData>({\n    resolver: zodResolver(ProductFormSchema),\n    defaultValues: {\n      status: 'draft',\n      track_inventory: true,\n      allow_backorder: false,\n      requires_shipping: true,\n      stock: 0,\n      price: 0,\n      featured: false,\n      digital: false,\n      tax_rate: 0,\n      weight: 0,\n      dimensions: {\n        length: 0,\n        width: 0,\n        height: 0,\n      },\n      images: [],\n      variants: [],\n      tags: [],\n      meta_keywords: [],\n      downloadable_files: [],\n      ...initialData,\n    },\n  });\n\n  const { handleSubmit, formState: { errors, isDirty }, watch, setValue } = form;\n\n  const watchedData = watch();\n\n  const tabs = [\n    { id: 'general', label: 'General', icon: 'üìù' },\n    { id: 'details', label: 'Detalles', icon: 'üìã' },\n    { id: 'pricing', label: 'Precios', icon: 'üí∞' },\n    { id: 'inventory', label: 'Inventario', icon: 'üì¶' },\n    { id: 'shipping', label: 'Env√≠o', icon: 'üöö' },\n    { id: 'images', label: 'Im√°genes', icon: 'üñºÔ∏è' },\n    { id: 'variants', label: 'Variantes', icon: 'üé®' },\n    { id: 'seo', label: 'SEO', icon: 'üîç' },\n    { id: 'advanced', label: 'Avanzado', icon: '‚öôÔ∏è' },\n  ];\n\n  const handleFormSubmit = async (data: ProductFormData) => {\n    try {\n      notifications.showInfo(\n        mode === 'create' ? 'Creando producto...' : 'Actualizando producto...'\n      );\n      \n      await onSubmit(data);\n      \n      notifications.showSuccess(\n        mode === 'create' \n          ? `Producto \"${data.name}\" creado exitosamente`\n          : `Producto \"${data.name}\" actualizado exitosamente`\n      );\n    } catch (error) {\n      console.error('Error submitting form:', error);\n      notifications.showError(\n        mode === 'create'\n          ? 'Error al crear el producto. Por favor, intenta nuevamente.'\n          : 'Error al actualizar el producto. Por favor, intenta nuevamente.'\n      );\n    }\n  };\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .normalize('NFD') // Normalize unicode characters\n      .replace(/[\\u0300-\\u036f]/g, '') // Remove diacritics\n      .replace(/[^a-z0-9\\s-]/g, '') // Remove special characters\n      .replace(/\\s+/g, '-') // Replace spaces with hyphens\n      .replace(/-+/g, '-') // Replace multiple hyphens with single\n      .replace(/^-+|-+$/g, '') // Remove leading/trailing hyphens\n      .substring(0, 100); // Limit length\n  };\n\n  const handleNameChange = (name: string) => {\n    setValue('name', name);\n    if (!watchedData.slug || mode === 'create') {\n      setValue('slug', generateSlug(name));\n    }\n  };\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            {mode === 'create' ? 'Crear Producto' : 'Editar Producto'}\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            {mode === 'create' \n              ? 'Completa la informaci√≥n para crear un nuevo producto'\n              : 'Modifica la informaci√≥n del producto'\n            }\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-3\">\n          <button\n            type=\"button\"\n            onClick={() => actions.setPreviewMode(!state.previewMode)}\n            className=\"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            <Eye className=\"w-4 h-4\" />\n            <span>{state.previewMode ? 'Editar' : 'Vista Previa'}</span>\n          </button>\n          \n          {onCancel && (\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              <X className=\"w-4 h-4\" />\n              <span>Cancelar</span>\n            </button>\n          )}\n          \n          <button\n            type=\"submit\"\n            form=\"product-form\"\n            disabled={isLoading || !isDirty}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-blaze-orange-600 hover:bg-blaze-orange-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {isLoading ? (\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n            ) : (\n              <Save className=\"w-4 h-4\" />\n            )}\n            <span>{mode === 'create' ? 'Crear Producto' : 'Guardar Cambios'}</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"flex space-x-8\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => actions.setActiveTab(tab.id)}\n              className={cn(\n                \"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors\",\n                state.activeTab === tab.id\n                  ? \"border-blaze-orange-500 text-blaze-orange-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              )}\n            >\n              <span>{tab.icon}</span>\n              <span>{tab.label}</span>\n              {errors && Object.keys(errors).some(key => {\n                // Check if this tab has errors\n                const tabFields = {\n                  general: ['name', 'description', 'short_description', 'category_id', 'status'],\n                  details: ['brand', 'model', 'sku', 'barcode', 'tags', 'featured', 'digital'],\n                  pricing: ['price', 'compare_price', 'cost_price', 'tax_rate'],\n                  inventory: ['track_inventory', 'stock', 'low_stock_threshold', 'allow_backorder'],\n                  shipping: ['requires_shipping', 'weight', 'dimensions'],\n                  images: ['images'],\n                  variants: ['variants'],\n                  seo: ['seo_title', 'seo_description', 'slug', 'meta_keywords'],\n                  advanced: ['downloadable_files'],\n                };\n                return tabFields[tab.id as keyof typeof tabFields]?.includes(key);\n              }) && (\n                <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\n              )}\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Form */}\n      <form id=\"product-form\" onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-6\">\n        {/* General Tab */}\n        {state.activeTab === 'general' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <div className=\"lg:col-span-2 space-y-6\">\n              <AdminCard title=\"Informaci√≥n General\">\n                <div className=\"space-y-4\">\n                  {/* Product Name */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Nombre del Producto *\n                    </label>\n                    <input\n                      type=\"text\"\n                      {...form.register('name')}\n                      onChange={(e) => handleNameChange(e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                      placeholder=\"Ej: Pintura L√°tex Interior Blanco 4L\"\n                    />\n                    {errors.name && (\n                      <p className=\"text-red-600 text-sm mt-1\">{errors.name.message}</p>\n                    )}\n                  </div>\n\n                  {/* Short Description */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Descripci√≥n Corta\n                    </label>\n                    <textarea\n                      {...form.register('short_description')}\n                      rows={2}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                      placeholder=\"Descripci√≥n breve para listados de productos\"\n                    />\n                    {errors.short_description && (\n                      <p className=\"text-red-600 text-sm mt-1\">{errors.short_description.message}</p>\n                    )}\n                  </div>\n\n                  {/* Full Description */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Descripci√≥n Completa\n                    </label>\n                    <textarea\n                      {...form.register('description')}\n                      rows={6}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                      placeholder=\"Descripci√≥n detallada del producto, caracter√≠sticas, usos, etc.\"\n                    />\n                    {errors.description && (\n                      <p className=\"text-red-600 text-sm mt-1\">{errors.description.message}</p>\n                    )}\n                  </div>\n                </div>\n              </AdminCard>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Category */}\n              <AdminCard title=\"Categor√≠a\">\n                <CategorySelector\n                  value={watchedData.category_id}\n                  onChange={(categoryId) => setValue('category_id', categoryId)}\n                  error={errors.category_id?.message}\n                />\n              </AdminCard>\n\n              {/* Status */}\n              <AdminCard title=\"Estado\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Estado del Producto\n                  </label>\n                  <select\n                    {...form.register('status')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                  >\n                    <option value=\"draft\">Borrador</option>\n                    <option value=\"active\">Activo</option>\n                    <option value=\"inactive\">Inactivo</option>\n                  </select>\n                  {errors.status && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.status.message}</p>\n                  )}\n                </div>\n              </AdminCard>\n            </div>\n          </div>\n        )}\n\n        {/* Details Tab */}\n        {state.activeTab === 'details' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <AdminCard title=\"Informaci√≥n del Producto\">\n              <div className=\"space-y-4\">\n                {/* Brand */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Marca\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...form.register('brand')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"Ej: Sherwin Williams\"\n                  />\n                  {errors.brand && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.brand.message}</p>\n                  )}\n                </div>\n\n                {/* Model */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Modelo\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...form.register('model')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"Ej: ProClassic Interior\"\n                  />\n                  {errors.model && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.model.message}</p>\n                  )}\n                </div>\n\n                {/* SKU */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    SKU (C√≥digo de Producto)\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...form.register('sku')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"Ej: SW-PC-INT-4L-WHT\"\n                    style={{ textTransform: 'uppercase' }}\n                  />\n                  {errors.sku && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.sku.message}</p>\n                  )}\n                </div>\n\n                {/* Barcode */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    C√≥digo de Barras\n                  </label>\n                  <input\n                    type=\"text\"\n                    {...form.register('barcode')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"Ej: 1234567890123\"\n                  />\n                  {errors.barcode && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.barcode.message}</p>\n                  )}\n                </div>\n              </div>\n            </AdminCard>\n\n            <AdminCard title=\"Configuraci√≥n\">\n              <div className=\"space-y-4\">\n                {/* Featured Product */}\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    {...form.register('featured')}\n                    className=\"w-4 h-4 text-blaze-orange-600 border-gray-300 rounded focus:ring-blaze-orange-500\"\n                  />\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">\n                      Producto Destacado\n                    </label>\n                    <p className=\"text-xs text-gray-500\">\n                      Mostrar en secciones destacadas del sitio\n                    </p>\n                  </div>\n                </div>\n\n                {/* Digital Product */}\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    {...form.register('digital')}\n                    className=\"w-4 h-4 text-blaze-orange-600 border-gray-300 rounded focus:ring-blaze-orange-500\"\n                  />\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">\n                      Producto Digital\n                    </label>\n                    <p className=\"text-xs text-gray-500\">\n                      No requiere env√≠o f√≠sico\n                    </p>\n                  </div>\n                </div>\n\n                {/* Tags */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Etiquetas\n                  </label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Separar con comas: pintura, interior, blanco\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    onChange={(e) => {\n                      const tags = e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0);\n                      setValue('tags', tags);\n                    }}\n                    defaultValue={watchedData.tags?.join(', ') || ''}\n                  />\n                  {errors.tags && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.tags.message}</p>\n                  )}\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    M√°ximo 20 etiquetas, 30 caracteres cada una\n                  </p>\n                </div>\n              </div>\n            </AdminCard>\n          </div>\n        )}\n\n        {/* Pricing Tab */}\n        {state.activeTab === 'pricing' && (\n          <ProductPricing\n            form={form}\n            errors={errors}\n          />\n        )}\n\n        {/* Inventory Tab */}\n        {state.activeTab === 'inventory' && (\n          <ProductInventory\n            form={form}\n            errors={errors}\n          />\n        )}\n\n        {/* Shipping Tab */}\n        {state.activeTab === 'shipping' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <AdminCard title=\"Configuraci√≥n de Env√≠o\">\n              <div className=\"space-y-4\">\n                {/* Requires Shipping */}\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    {...form.register('requires_shipping')}\n                    className=\"w-4 h-4 text-blaze-orange-600 border-gray-300 rounded focus:ring-blaze-orange-500\"\n                  />\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">\n                      Requiere Env√≠o\n                    </label>\n                    <p className=\"text-xs text-gray-500\">\n                      Desmarcar para productos digitales o servicios\n                    </p>\n                  </div>\n                </div>\n\n                {/* Weight */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Peso (kg)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    {...form.register('weight', { valueAsNumber: true })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.00\"\n                  />\n                  {errors.weight && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.weight.message}</p>\n                  )}\n                </div>\n\n                {/* Tax Rate */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Tasa de Impuesto (%)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"100\"\n                    {...form.register('tax_rate', { valueAsNumber: true })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.00\"\n                  />\n                  {errors.tax_rate && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.tax_rate.message}</p>\n                  )}\n                </div>\n              </div>\n            </AdminCard>\n\n            <AdminCard title=\"Dimensiones\">\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Las dimensiones ayudan a calcular costos de env√≠o m√°s precisos\n                </p>\n\n                {/* Length */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Largo (cm)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    {...form.register('dimensions.length', { valueAsNumber: true })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.0\"\n                  />\n                  {errors.dimensions?.length && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.dimensions.length.message}</p>\n                  )}\n                </div>\n\n                {/* Width */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Ancho (cm)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    {...form.register('dimensions.width', { valueAsNumber: true })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.0\"\n                  />\n                  {errors.dimensions?.width && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.dimensions.width.message}</p>\n                  )}\n                </div>\n\n                {/* Height */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Alto (cm)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    {...form.register('dimensions.height', { valueAsNumber: true })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                    placeholder=\"0.0\"\n                  />\n                  {errors.dimensions?.height && (\n                    <p className=\"text-red-600 text-sm mt-1\">{errors.dimensions.height.message}</p>\n                  )}\n                </div>\n\n                {/* Volume calculation */}\n                {watchedData.dimensions?.length && watchedData.dimensions?.width && watchedData.dimensions?.height && (\n                  <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n                    <p className=\"text-sm text-gray-600\">\n                      <strong>Volumen:</strong> {(\n                        (watchedData.dimensions.length || 0) *\n                        (watchedData.dimensions.width || 0) *\n                        (watchedData.dimensions.height || 0) / 1000\n                      ).toFixed(2)} litros\n                    </p>\n                  </div>\n                )}\n              </div>\n            </AdminCard>\n          </div>\n        )}\n\n        {/* Images Tab */}\n        {state.activeTab === 'images' && (\n          <ProductImageManager\n            images={watchedData.images || []}\n            onChange={(images) => setValue('images', images)}\n            error={errors.images?.message}\n          />\n        )}\n\n        {/* Variants Tab */}\n        {state.activeTab === 'variants' && (\n          <ProductVariantManager\n            variants={watchedData.variants || []}\n            onChange={(variants) => setValue('variants', variants)}\n            error={errors.variants?.message}\n          />\n        )}\n\n        {/* SEO Tab */}\n        {state.activeTab === 'seo' && (\n          <ProductSeo\n            form={form}\n            errors={errors}\n            productName={watchedData.name}\n          />\n        )}\n\n        {/* Advanced Tab */}\n        {state.activeTab === 'advanced' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <AdminCard title=\"Configuraci√≥n Avanzada\">\n              <div className=\"space-y-4\">\n                {/* Digital Product */}\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    {...form.register('digital')}\n                    className=\"w-4 h-4 text-blaze-orange-600 border-gray-300 rounded focus:ring-blaze-orange-500\"\n                  />\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">\n                      Producto Digital\n                    </label>\n                    <p className=\"text-xs text-gray-500\">\n                      No requiere env√≠o f√≠sico\n                    </p>\n                  </div>\n                </div>\n\n                {/* Featured Product */}\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    {...form.register('featured')}\n                    className=\"w-4 h-4 text-blaze-orange-600 border-gray-300 rounded focus:ring-blaze-orange-500\"\n                  />\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">\n                      Producto Destacado\n                    </label>\n                    <p className=\"text-xs text-gray-500\">\n                      Aparecer√° en secciones destacadas\n                    </p>\n                  </div>\n                </div>\n\n                {/* Meta Keywords */}\n                 <div>\n                   <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                     Palabras Clave Meta\n                   </label>\n                   <input\n                     type=\"text\"\n                     {...form.register('meta_keywords')}\n                     className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                     placeholder=\"palabra1, palabra2, palabra3\"\n                   />\n                   <p className=\"text-xs text-gray-500 mt-1\">\n                     Separar con comas. M√°ximo 10 palabras clave.\n                   </p>\n                   {errors.meta_keywords && (\n                     <p className=\"text-red-600 text-sm mt-1\">{errors.meta_keywords.message}</p>\n                   )}\n                 </div>\n              </div>\n            </AdminCard>\n\n            <AdminCard title=\"Archivos Descargables\">\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Para productos digitales que requieren descarga\n                </p>\n\n                {/* Downloadable Files */}\n                 <div>\n                   <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                     URLs de Descarga\n                   </label>\n                   <textarea\n                     {...form.register('downloadable_files')}\n                     rows={4}\n                     className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\n                     placeholder=\"https://ejemplo.com/archivo1.pdf&#10;https://ejemplo.com/archivo2.zip&#10;Una URL por l√≠nea\"\n                   />\n                   <p className=\"text-xs text-gray-500 mt-1\">\n                     Una URL por l√≠nea. Solo para productos digitales.\n                   </p>\n                   {errors.downloadable_files && (\n                     <p className=\"text-red-600 text-sm mt-1\">{errors.downloadable_files.message}</p>\n                   )}\n                 </div>\n\n                {/* File Upload Area */}\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n                  <div className=\"space-y-2\">\n                    <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\n                      <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                    </svg>\n                    <div className=\"text-sm text-gray-600\">\n                      <p className=\"font-medium\">Subir archivos digitales</p>\n                      <p>Arrastra archivos aqu√≠ o haz clic para seleccionar</p>\n                    </div>\n                    <p className=\"text-xs text-gray-500\">\n                      PDF, ZIP, DOC, etc. M√°ximo 50MB por archivo\n                    </p>\n                  </div>\n                </div>\n\n                {/* File List Placeholder */}\n                 <div className=\"space-y-2\">\n                   <p className=\"text-sm font-medium text-gray-700\">Archivos subidos:</p>\n                   <div className=\"text-sm text-gray-500 italic\">\n                     No hay archivos subidos\n                   </div>\n                 </div>\n              </div>\n            </AdminCard>\n          </div>\n        )}\n      </form>\n    </div>\n  );\n}\n"],"names":["ProductForm","ProductFormSchema","z","object","name","string","min","max","regex","description","optional","short_description","category_id","uuid","status","enum","brand","model","sku","barcode","price","number","compare_price","refine","val","ctx","parent","cost_price","tax_rate","requires_shipping","boolean","default","weight","dimensions","length","width","height","track_inventory","stock","low_stock_threshold","allow_backorder","seo_title","seo_description","slug","meta_keywords","array","images","id","url","alt","is_primary","sort_order","size","variants","options","required","tags","featured","digital","downloadable_files","data","primaryImages","filter","img","message","path","initialData","mode","onSubmit","onCancel","isLoading","className","state","actions","useProductFormReducer","activeTab","previewMode","isDirty","validationErrors","uploadProgress","isUploading","notifications","useProductNotifications","form","useForm","resolver","zodResolver","defaultValues","handleSubmit","formState","errors","watch","setValue","watchedData","tabs","label","icon","handleFormSubmit","showInfo","showSuccess","error","console","showError","generateSlug","toLowerCase","normalize","replace","substring","handleNameChange","div","cn","h1","p","button","type","onClick","setPreviewMode","Eye","span","X","disabled","Loader2","Save","nav","map","tab","setActiveTab","Object","keys","some","key","tabFields","general","details","pricing","inventory","shipping","seo","advanced","includes","AdminCard","title","input","register","onChange","e","target","value","placeholder","textarea","rows","CategorySelector","categoryId","select","option","style","textTransform","split","tag","trim","defaultValue","join","ProductPricing","ProductInventory","step","valueAsNumber","strong","toFixed","ProductImageManager","ProductVariantManager","ProductSeo","productName","svg","stroke","fill","viewBox","d","strokeWidth","strokeLinecap","strokeLinejoin"],"mappings":"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"}