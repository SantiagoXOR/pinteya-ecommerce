{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useProducts.test.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - TEST useProducts HOOK\n// ===================================\n\nimport { renderHook, waitFor, act } from '@testing-library/react'\nimport { useProducts } from '@/hooks/useProducts'\n\n// Mock data\nconst mockProductsResponse = {\n  success: true,\n  data: [\n    {\n      id: 1,\n      name: 'Test Product 1',\n      slug: 'test-product-1',\n      description: 'Test description',\n      price: 1000,\n      discounted_price: 900,\n      stock: 10,\n      category_id: 1,\n      images: { previews: ['/test1.jpg'] },\n      category: { id: 1, name: 'Test Category', slug: 'test-category' },\n    },\n    {\n      id: 2,\n      name: 'Test Product 2',\n      slug: 'test-product-2',\n      description: 'Test description 2',\n      price: 2000,\n      discounted_price: null,\n      stock: 5,\n      category_id: 2,\n      images: { previews: ['/test2.jpg'] },\n      category: { id: 2, name: 'Test Category 2', slug: 'test-category-2' },\n    },\n  ],\n  pagination: {\n    page: 1,\n    limit: 12,\n    total: 2,\n    totalPages: 1,\n  },\n}\n\nconst mockCategoriesResponse = {\n  success: true,\n  data: [\n    { id: 1, name: 'Test Category', slug: 'test-category' },\n    { id: 2, name: 'Test Category 2', slug: 'test-category-2' },\n  ],\n}\n\n// Mock fetch\nconst mockFetch = jest.fn()\nglobal.fetch = mockFetch\n\n// Helper function to create complete mock response\nconst createMockResponse = (data: any, options: { ok?: boolean; status?: number; statusText?: string } = {}) => ({\n  ok: options.ok ?? true,\n  status: options.status ?? 200,\n  statusText: options.statusText ?? 'OK',\n  json: async () => data,\n  text: async () => JSON.stringify(data),\n  headers: new Headers(),\n  url: 'http://localhost:3000/api/products',\n  clone: jest.fn(),\n})\n\ndescribe('useProducts Hook', () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n    mockFetch.mockResolvedValue(createMockResponse(mockProductsResponse))\n  })\n\n  it('fetches products on mount', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    // Initially loading should be true\n    expect(result.current.loading).toBe(true)\n    expect(result.current.products).toEqual([])\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Should have fetched products - the hook may not include default parameters\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringContaining('/api/products'),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n    expect(result.current.products).toHaveLength(2)\n    // Products are adapted, so we check the adapted structure\n    expect(result.current.products[0]).toBeDefined()\n  })\n\n  it('fetches products successfully', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Should have fetched products\n    expect(mockFetch).toHaveBeenCalled()\n    expect(result.current.products).toHaveLength(2)\n    expect(result.current.hasError).toBe(false)\n  })\n\n  it('handles search functionality', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock search response\n    mockFetch.mockResolvedValueOnce(createMockResponse({\n      ...mockProductsResponse,\n      data: [mockProductsResponse.data[0]], // Only first product\n    }))\n\n    // Perform search\n    await act(async () => {\n      await result.current.searchProducts('Test Product 1')\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringContaining('/api/products'),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n  })\n\n  it('handles category filtering', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock category filter response\n    mockFetch.mockResolvedValueOnce(createMockResponse({\n      ...mockProductsResponse,\n      data: [mockProductsResponse.data[0]], // Only first product\n    }))\n\n    // Filter by category\n    await act(async () => {\n      await result.current.filterByCategory('1')\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringMatching(/\\/api\\/products\\?.*category=1/),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n  })\n\n  it('handles pagination', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock page 2 response\n    mockFetch.mockResolvedValueOnce(createMockResponse({\n      ...mockProductsResponse,\n      pagination: { ...mockProductsResponse.pagination, page: 2 },\n    }))\n\n    // Go to page 2\n    await act(async () => {\n      await result.current.fetchProducts({ page: 2 })\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringMatching(/\\/api\\/products\\?.*page=2/),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n    expect(result.current.pagination.page).toBe(2)\n  })\n\n  it('handles price range filtering', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock price filter response\n    mockFetch.mockResolvedValueOnce(createMockResponse(mockProductsResponse))\n\n    // Filter by price range\n    await act(async () => {\n      await result.current.fetchProducts({ priceMin: 500, priceMax: 1500 })\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringMatching(/\\/api\\/products\\?.*priceMin=500.*priceMax=1500/),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n  })\n\n  it('handles sorting', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock sort response\n    mockFetch.mockResolvedValueOnce(createMockResponse(mockProductsResponse))\n\n    // Sort by price ascending\n    await act(async () => {\n      await result.current.fetchProducts({ sortBy: 'price', sortOrder: 'asc' })\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringMatching(/\\/api\\/products\\?.*sortBy=price.*sortOrder=asc/),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n  })\n\n  it('handles API errors gracefully', async () => {\n    mockFetch.mockRejectedValueOnce(new Error('API Error'))\n\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // getProducts() captura el error y devuelve un objeto con success: false\n    // El hook useProducts entonces establece el mensaje genérico\n    expect(result.current.error).toBe('Error obteniendo productos')\n    expect(result.current.products).toEqual([])\n  })\n\n  it('handles HTTP error responses', async () => {\n    mockFetch.mockResolvedValueOnce(createMockResponse(\n      { error: 'Server Error' },\n      { ok: false, status: 500, statusText: 'Internal Server Error' }\n    ))\n\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // getProducts() usa safeApiResponseJson() que detecta !response.ok\n    // y devuelve un objeto con success: false y message con detalles del error\n    // El hook useProducts entonces establece el mensaje genérico\n    expect(result.current.error).toBe('Error obteniendo productos')\n    expect(result.current.products).toEqual([])\n  })\n\n  it('clears filters correctly', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Apply some filters first\n    await act(async () => {\n      await result.current.searchProducts('test')\n    })\n\n    await act(async () => {\n      await result.current.filterByCategory('1')\n    })\n\n    // Clear previous calls\n    mockFetch.mockClear()\n\n    // Mock reset response\n    mockFetch.mockResolvedValueOnce(createMockResponse(mockProductsResponse))\n\n    // Clear filters\n    await act(async () => {\n      await result.current.clearFilters()\n    })\n\n    expect(mockFetch).toHaveBeenCalledWith(\n      expect.stringMatching(/\\/api\\/products\\?.*page=1/),\n      expect.objectContaining({\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      })\n    )\n  })\n\n  it('maintains loading state during requests', async () => {\n    const { result } = renderHook(() => useProducts())\n\n    // Initial loading\n    expect(result.current.loading).toBe(true)\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n\n    // Mock slow response\n    let resolvePromise: (value: any) => void\n    const slowPromise = new Promise(resolve => {\n      resolvePromise = resolve\n    })\n\n    mockFetch.mockReturnValueOnce(slowPromise)\n\n    // Start new request\n    act(() => {\n      result.current.searchProducts('test')\n    })\n\n    // Should be loading again\n    await waitFor(() => {\n      expect(result.current.loading).toBe(true)\n    })\n\n    // Resolve the promise\n    resolvePromise!({\n      ok: true,\n      json: async () => mockProductsResponse,\n    })\n\n    await waitFor(() => {\n      expect(result.current.loading).toBe(false)\n    })\n  })\n})\n"],"names":["mockProductsResponse","success","data","id","name","slug","description","price","discounted_price","stock","category_id","images","previews","category","pagination","page","limit","total","totalPages","mockCategoriesResponse","mockFetch","jest","fn","global","fetch","createMockResponse","options","ok","status","statusText","json","text","JSON","stringify","headers","Headers","url","clone","describe","beforeEach","clearAllMocks","mockResolvedValue","it","result","renderHook","useProducts","expect","current","loading","toBe","products","toEqual","waitFor","toHaveBeenCalledWith","stringContaining","objectContaining","method","toHaveLength","toBeDefined","toHaveBeenCalled","hasError","mockClear","mockResolvedValueOnce","act","searchProducts","filterByCategory","stringMatching","fetchProducts","priceMin","priceMax","sortBy","sortOrder","mockRejectedValueOnce","Error","error","clearFilters","resolvePromise","slowPromise","Promise","resolve","mockReturnValueOnce"],"mappings":"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"}