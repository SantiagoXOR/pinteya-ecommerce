4d7bab0844330c1e7df56957b92e3a5c
// ===================================
// PINTEYA E-COMMERCE - ENTERPRISE MONITORING MANAGER
// Sistema de monitoreo enterprise con error tracking, performance y analytics
// ===================================
// Importar performance hooks solo en servidor
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, // ===================================
// EXPORTS
// ===================================
"default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const perfHooks = typeof window === 'undefined' ? require('perf_hooks') : null;
// ===================================
// ENTERPRISE MONITORING MANAGER
// ===================================
// CLASE PRINCIPAL
// ===================================
class EnterpriseMonitoringManager {
    constructor(config){
        this.errors = new Map();
        this.performanceData = [];
        this.alertRules = new Map();
        this.activeAlerts = new Map();
        this.config = config;
        this.sessionId = this.generateSessionId();
        this.initializeDefaultAlertRules();
        this.startPerformanceMonitoring();
    }
    static getInstance(config) {
        if (!EnterpriseMonitoringManager.instance) {
            if (!config) {
                throw new Error('Configuration required for first initialization');
            }
            EnterpriseMonitoringManager.instance = new EnterpriseMonitoringManager(config);
        }
        return EnterpriseMonitoringManager.instance;
    }
    // ===================================
    // ERROR TRACKING
    // ===================================
    /**
   * Capturar y procesar error
   */ captureError(error, level = 'error', context = {}, tags = []) {
        if (!this.config.errorTracking.enabled) {
            return '';
        }
        // Sample rate check
        if (Math.random() > this.config.errorTracking.sampleRate) {
            return '';
        }
        const errorMessage = typeof error === 'string' ? error : error.message;
        const stack = typeof error === 'string' ? undefined : error.stack;
        // Check if error should be ignored
        if (this.config.errorTracking.ignoreErrors.some((pattern)=>errorMessage.includes(pattern))) {
            return '';
        }
        const fingerprint = this.generateErrorFingerprint(errorMessage, stack);
        const errorId = this.generateErrorId();
        const errorEvent = {
            id: errorId,
            timestamp: new Date(),
            message: errorMessage,
            stack,
            level,
            context: {
                sessionId: this.sessionId,
                url: typeof window !== 'undefined' ? window.location.href : '',
                userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',
                ...context
            },
            tags,
            fingerprint,
            count: 1
        };
        // Check if error already exists (deduplication)
        const existingError = Array.from(this.errors.values()).find((e)=>e.fingerprint === fingerprint);
        if (existingError) {
            existingError.count++;
            existingError.timestamp = new Date();
        } else {
            this.errors.set(errorId, errorEvent);
        }
        // Check alert rules
        this.checkErrorAlerts(errorEvent);
        // Log to console in development
        if (process.env.NODE_ENV === 'development') {
            console.error('[Monitoring] Error captured:', errorEvent);
        }
        return errorId;
    }
    /**
   * Obtener errores con filtros
   */ getErrors(filters = {}) {
        let errors = Array.from(this.errors.values());
        // Apply filters
        if (filters.level) {
            errors = errors.filter((e)=>e.level === filters.level);
        }
        if (filters.timeRange) {
            errors = errors.filter((e)=>e.timestamp >= filters.timeRange.start && e.timestamp <= filters.timeRange.end);
        }
        if (filters.component) {
            errors = errors.filter((e)=>e.context.component === filters.component);
        }
        // Sort by timestamp (newest first)
        errors.sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime());
        // Apply limit
        if (filters.limit) {
            errors = errors.slice(0, filters.limit);
        }
        return errors;
    }
    // ===================================
    // PERFORMANCE MONITORING
    // ===================================
    /**
   * Inicializar monitoreo de performance
   */ startPerformanceMonitoring() {
        if (!this.config.performance.enabled || typeof window === 'undefined') {
            return;
        }
        // Monitor Core Web Vitals
        this.monitorWebVitals();
        // Monitor custom metrics every 30 seconds
        setInterval(()=>{
            this.capturePerformanceMetrics();
        }, 30000);
        // Monitor page visibility changes
        document.addEventListener('visibilitychange', ()=>{
            if (document.visibilityState === 'hidden') {
                this.capturePerformanceMetrics();
            }
        });
    }
    /**
   * Monitorear Core Web Vitals
   */ monitorWebVitals() {
        // LCP - Largest Contentful Paint
        new PerformanceObserver((entryList)=>{
            const entries = entryList.getEntries();
            const lastEntry = entries[entries.length - 1];
            this.recordMetric('lcp', lastEntry.startTime);
        }).observe({
            entryTypes: [
                'largest-contentful-paint'
            ]
        });
        new PerformanceObserver((entryList)=>{
            const entries = entryList.getEntries();
            entries.forEach((entry)=>{
                this.recordMetric('fid', entry.processingStart - entry.startTime);
            });
        }).observe({
            entryTypes: [
                'first-input'
            ]
        });
        // CLS - Cumulative Layout Shift
        let clsValue = 0;
        new PerformanceObserver((entryList)=>{
            const entries = entryList.getEntries();
            entries.forEach((entry)=>{
                if (!entry.hadRecentInput) {
                    clsValue += entry.value;
                }
            });
            this.recordMetric('cls', clsValue);
        }).observe({
            entryTypes: [
                'layout-shift'
            ]
        });
    }
    /**
   * Capturar métricas de performance
   */ capturePerformanceMetrics() {
        if (!this.config.performance.enabled) {
            return;
        }
        // Sample rate check
        if (Math.random() > this.config.performance.sampleRate) {
            return;
        }
        const metrics = {
            timestamp: new Date(),
            metrics: {
                loadTime: this.getLoadTime(),
                renderTime: this.getRenderTime(),
                memoryUsage: this.getMemoryUsage(),
                bundleSize: this.getBundleSize(),
                apiResponseTime: this.getAverageApiResponseTime(),
                apiErrorRate: this.getApiErrorRate(),
                sessionDuration: this.getSessionDuration(),
                pageViews: this.getPageViews(),
                bounceRate: this.getBounceRate()
            },
            context: {
                page: typeof window !== 'undefined' ? window.location.pathname : '',
                sessionId: this.sessionId,
                device: this.getDeviceType(),
                browser: this.getBrowserType(),
                userId: this.getUserId()
            }
        };
        this.performanceData.push(metrics);
        // Keep only last 1000 entries
        if (this.performanceData.length > 1000) {
            this.performanceData = this.performanceData.slice(-1000);
        }
        // Check performance alerts
        this.checkPerformanceAlerts(metrics);
        // Log in development
        if (process.env.NODE_ENV === 'development') {
            console.log('[Monitoring] Performance metrics captured:', metrics);
        }
    }
    /**
   * Registrar métrica específica
   */ recordMetric(name, value, context = {}) {
        const metric = {
            name,
            value,
            timestamp: new Date(),
            context: {
                sessionId: this.sessionId,
                ...context
            }
        };
        // Check if metric triggers alerts
        this.checkMetricAlerts(name, value);
        // Log in development
        if (process.env.NODE_ENV === 'development') {
            console.log(`[Monitoring] Metric recorded: ${name} = ${value}`, metric);
        }
    }
    // ===================================
    // ALERT SYSTEM
    // ===================================
    /**
   * Inicializar reglas de alerta por defecto
   */ initializeDefaultAlertRules() {
        const defaultRules = [
            {
                id: 'high-error-rate',
                name: 'High Error Rate',
                metric: 'error_rate',
                threshold: 0.05,
                operator: '>',
                severity: 'high',
                enabled: true,
                cooldown: 15
            },
            {
                id: 'slow-page-load',
                name: 'Slow Page Load',
                metric: 'load_time',
                threshold: 3000,
                operator: '>',
                severity: 'medium',
                enabled: true,
                cooldown: 10
            },
            {
                id: 'high-memory-usage',
                name: 'High Memory Usage',
                metric: 'memory_usage',
                threshold: 100,
                operator: '>',
                severity: 'medium',
                enabled: true,
                cooldown: 20
            },
            {
                id: 'poor-lcp',
                name: 'Poor Largest Contentful Paint',
                metric: 'lcp',
                threshold: 2500,
                operator: '>',
                severity: 'medium',
                enabled: true,
                cooldown: 15
            }
        ];
        defaultRules.forEach((rule)=>{
            this.alertRules.set(rule.id, rule);
        });
    }
    /**
   * Verificar alertas de errores
   */ checkErrorAlerts(errorEvent) {
        // Calculate error rate
        const recentErrors = this.getErrors({
            timeRange: {
                start: new Date(Date.now() - 5 * 60 * 1000),
                end: new Date()
            }
        });
        const errorRate = recentErrors.length / 100 // Assuming 100 requests per 5 minutes
        ;
        this.checkMetricAlerts('error_rate', errorRate);
        // Check for critical errors
        if (errorEvent.level === 'critical') {
            this.triggerAlert('critical-error', {
                message: `Critical error occurred: ${errorEvent.message}`,
                value: 1,
                threshold: 0,
                context: errorEvent
            });
        }
    }
    /**
   * Verificar alertas de performance
   */ checkPerformanceAlerts(metrics) {
        const { metrics: m } = metrics;
        // Check each metric against alert rules
        Object.entries(m).forEach(([metricName, value])=>{
            if (typeof value === 'number') {
                this.checkMetricAlerts(metricName, value);
            }
        });
    }
    /**
   * Verificar alertas para una métrica específica
   */ checkMetricAlerts(metricName, value) {
        const relevantRules = Array.from(this.alertRules.values()).filter((rule)=>rule.metric === metricName && rule.enabled);
        relevantRules.forEach((rule)=>{
            const shouldTrigger = this.evaluateAlertCondition(rule, value);
            if (shouldTrigger && this.canTriggerAlert(rule)) {
                this.triggerAlert(rule.id, {
                    message: `${rule.name}: ${metricName} is ${value} (threshold: ${rule.threshold})`,
                    value,
                    threshold: rule.threshold,
                    context: {
                        metricName,
                        rule
                    }
                });
            }
        });
    }
    /**
   * Evaluar condición de alerta
   */ evaluateAlertCondition(rule, value) {
        switch(rule.operator){
            case '>':
                return value > rule.threshold;
            case '<':
                return value < rule.threshold;
            case '>=':
                return value >= rule.threshold;
            case '<=':
                return value <= rule.threshold;
            case '=':
                return value === rule.threshold;
            default:
                return false;
        }
    }
    /**
   * Verificar si se puede disparar alerta (cooldown)
   */ canTriggerAlert(rule) {
        if (!rule.lastTriggered) {
            return true;
        }
        const cooldownMs = rule.cooldown * 60 * 1000;
        const timeSinceLastTrigger = Date.now() - rule.lastTriggered.getTime();
        return timeSinceLastTrigger >= cooldownMs;
    }
    /**
   * Disparar alerta
   */ triggerAlert(ruleId, alertData) {
        const rule = this.alertRules.get(ruleId);
        if (!rule) {
            return;
        }
        const alertId = this.generateAlertId();
        const alert = {
            id: alertId,
            ruleId,
            timestamp: new Date(),
            severity: rule.severity,
            message: alertData.message,
            value: alertData.value,
            threshold: alertData.threshold,
            context: alertData.context,
            acknowledged: false
        };
        this.activeAlerts.set(alertId, alert);
        rule.lastTriggered = new Date();
        // Send notifications
        this.sendAlertNotifications(alert);
        console.warn('[Monitoring] Alert triggered:', alert);
    }
    /**
   * Enviar notificaciones de alerta
   */ async sendAlertNotifications(alert) {
        if (!this.config.alerts.enabled) {
            return;
        }
        const { channels } = this.config.alerts;
        // Email notifications
        if (channels.email && channels.email.length > 0) {
            // Implementation would integrate with email service
            console.log(`[Monitoring] Email alert sent to: ${channels.email.join(', ')}`);
        }
        // Slack notifications
        if (channels.slack) {
            // Implementation would integrate with Slack webhook
            console.log(`[Monitoring] Slack alert sent to: ${channels.slack}`);
        }
        // Webhook notifications
        if (channels.webhook) {
            try {
                // Implementation would send HTTP POST to webhook
                console.log(`[Monitoring] Webhook alert sent to: ${channels.webhook}`);
            } catch (error) {
                console.error('[Monitoring] Failed to send webhook alert:', error);
            }
        }
    }
    // ===================================
    // UTILITY METHODS
    // ===================================
    generateSessionId() {
        return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    generateErrorId() {
        return `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    generateAlertId() {
        return `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    generateErrorFingerprint(message, stack) {
        const content = `${message}${stack || ''}`;
        // Simple hash function for fingerprinting
        let hash = 0;
        for(let i = 0; i < content.length; i++){
            const char = content.charCodeAt(i);
            hash = (hash << 5) - hash + char;
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString(36);
    }
    getLoadTime() {
        if (typeof window === 'undefined' || !performance || !performance.getEntriesByType) {
            return 0;
        }
        try {
            const navigation = performance.getEntriesByType('navigation')[0];
            return navigation ? navigation.loadEventEnd - navigation.loadEventStart : 0;
        } catch (error) {
            return 0;
        }
    }
    getRenderTime() {
        if (typeof window === 'undefined' || !performance || !performance.getEntriesByType) {
            return 0;
        }
        try {
            const navigation = performance.getEntriesByType('navigation')[0];
            return navigation ? navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart : 0;
        } catch (error) {
            return 0;
        }
    }
    getMemoryUsage() {
        if (typeof window === 'undefined' || !performance.memory) {
            return 0;
        }
        return performance.memory.usedJSHeapSize / 1024 / 1024 // MB
        ;
    }
    getBundleSize() {
        // This would be calculated based on loaded resources
        return 0 // Placeholder
        ;
    }
    getAverageApiResponseTime() {
        // This would be calculated from API call metrics
        return 0 // Placeholder
        ;
    }
    getApiErrorRate() {
        // This would be calculated from API call metrics
        return 0 // Placeholder
        ;
    }
    getSessionDuration() {
        return Date.now() - parseInt(this.sessionId.split('_')[1]);
    }
    getPageViews() {
        // This would be tracked separately
        return 1 // Placeholder
        ;
    }
    getBounceRate() {
        // This would be calculated from user behavior
        return 0 // Placeholder
        ;
    }
    getDeviceType() {
        if (typeof window === 'undefined') {
            return 'unknown';
        }
        const width = window.innerWidth;
        if (width < 768) {
            return 'mobile';
        }
        if (width < 1024) {
            return 'tablet';
        }
        return 'desktop';
    }
    getBrowserType() {
        if (typeof navigator === 'undefined') {
            return 'unknown';
        }
        const userAgent = navigator.userAgent;
        if (userAgent.includes('Chrome')) {
            return 'chrome';
        }
        if (userAgent.includes('Firefox')) {
            return 'firefox';
        }
        if (userAgent.includes('Safari')) {
            return 'safari';
        }
        if (userAgent.includes('Edge')) {
            return 'edge';
        }
        return 'other';
    }
    getUserId() {
        // This would be retrieved from authentication context
        return undefined // Placeholder
        ;
    }
    // ===================================
    // PUBLIC API
    // ===================================
    /**
   * Obtener métricas de performance
   */ getPerformanceMetrics(timeRange) {
        let data = this.performanceData;
        if (timeRange) {
            data = data.filter((m)=>m.timestamp >= timeRange.start && m.timestamp <= timeRange.end);
        }
        return data;
    }
    /**
   * Obtener alertas activas
   */ getActiveAlerts() {
        return Array.from(this.activeAlerts.values()).filter((alert)=>!alert.resolvedAt).sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime());
    }
    /**
   * Reconocer alerta
   */ acknowledgeAlert(alertId) {
        const alert = this.activeAlerts.get(alertId);
        if (alert) {
            alert.acknowledged = true;
            return true;
        }
        return false;
    }
    /**
   * Resolver alerta
   */ resolveAlert(alertId) {
        const alert = this.activeAlerts.get(alertId);
        if (alert) {
            alert.resolvedAt = new Date();
            return true;
        }
        return false;
    }
    /**
   * Obtener resumen de monitoreo
   */ getMonitoringSummary() {
        const now = new Date();
        const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);
        const recentErrors = this.getErrors({
            timeRange: {
                start: oneHourAgo,
                end: now
            }
        });
        const recentMetrics = this.getPerformanceMetrics({
            start: oneHourAgo,
            end: now
        });
        const activeAlerts = this.getActiveAlerts();
        return {
            errors: {
                total: recentErrors.length,
                critical: recentErrors.filter((e)=>e.level === 'critical').length,
                warning: recentErrors.filter((e)=>e.level === 'warning').length
            },
            performance: {
                averageLoadTime: recentMetrics.length > 0 ? recentMetrics.reduce((sum, m)=>sum + m.metrics.loadTime, 0) / recentMetrics.length : 0,
                averageMemoryUsage: recentMetrics.length > 0 ? recentMetrics.reduce((sum, m)=>sum + m.metrics.memoryUsage, 0) / recentMetrics.length : 0
            },
            alerts: {
                active: activeAlerts.length,
                critical: activeAlerts.filter((a)=>a.severity === 'critical').length,
                unacknowledged: activeAlerts.filter((a)=>!a.acknowledged).length
            },
            system: {
                uptime: this.getSessionDuration(),
                sessionId: this.sessionId
            }
        };
    }
}
const _default = EnterpriseMonitoringManager;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxlbnRlcnByaXNlLW1vbml0b3JpbmctbWFuYWdlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gRU5URVJQUklTRSBNT05JVE9SSU5HIE1BTkFHRVJcbi8vIFNpc3RlbWEgZGUgbW9uaXRvcmVvIGVudGVycHJpc2UgY29uIGVycm9yIHRyYWNraW5nLCBwZXJmb3JtYW5jZSB5IGFuYWx5dGljc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gSW1wb3J0YXIgcGVyZm9ybWFuY2UgaG9va3Mgc29sbyBlbiBzZXJ2aWRvclxuY29uc3QgcGVyZkhvb2tzID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyByZXF1aXJlKCdwZXJmX2hvb2tzJykgOiBudWxsXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUSVBPUyBZIElOVEVSRkFDRVMgRVNQRUPDjUZJQ0FTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBUaXBvcyBiYXNlIHBhcmEgbcOpdHJpY2FzXG50eXBlIE1ldHJpY1ZhbHVlID0gbnVtYmVyXG50eXBlIE1ldHJpY1RpbWVzdGFtcCA9IERhdGVcbnR5cGUgTWV0cmljQ29udGV4dCA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4+XG5cbi8vIEludGVyZmFjZXMgZXNwZWPDrWZpY2FzIHBhcmEgQ29yZSBXZWIgVml0YWxzXG5pbnRlcmZhY2UgQ29yZVdlYlZpdGFscyB7XG4gIGxjcD86IE1ldHJpY1ZhbHVlIC8vIExhcmdlc3QgQ29udGVudGZ1bCBQYWludFxuICBmaWQ/OiBNZXRyaWNWYWx1ZSAvLyBGaXJzdCBJbnB1dCBEZWxheVxuICBjbHM/OiBNZXRyaWNWYWx1ZSAvLyBDdW11bGF0aXZlIExheW91dCBTaGlmdFxufVxuXG4vLyBJbnRlcmZhY2VzIGVzcGVjw61maWNhcyBwYXJhIG3DqXRyaWNhcyBwZXJzb25hbGl6YWRhc1xuaW50ZXJmYWNlIEN1c3RvbVBlcmZvcm1hbmNlTWV0cmljcyB7XG4gIGxvYWRUaW1lOiBNZXRyaWNWYWx1ZVxuICByZW5kZXJUaW1lOiBNZXRyaWNWYWx1ZVxuICBtZW1vcnlVc2FnZTogTWV0cmljVmFsdWVcbiAgYnVuZGxlU2l6ZTogTWV0cmljVmFsdWVcbn1cblxuLy8gSW50ZXJmYWNlcyBlc3BlY8OtZmljYXMgcGFyYSBtw6l0cmljYXMgZGUgQVBJXG5pbnRlcmZhY2UgQXBpTWV0cmljcyB7XG4gIGFwaVJlc3BvbnNlVGltZTogTWV0cmljVmFsdWVcbiAgYXBpRXJyb3JSYXRlOiBNZXRyaWNWYWx1ZVxufVxuXG4vLyBJbnRlcmZhY2VzIGVzcGVjw61maWNhcyBwYXJhIG3DqXRyaWNhcyBkZSB1c3VhcmlvXG5pbnRlcmZhY2UgVXNlck1ldHJpY3Mge1xuICBzZXNzaW9uRHVyYXRpb246IE1ldHJpY1ZhbHVlXG4gIHBhZ2VWaWV3czogTWV0cmljVmFsdWVcbiAgYm91bmNlUmF0ZTogTWV0cmljVmFsdWVcbn1cblxuLy8gSW50ZXJmYWNlIGVzcGVjw61maWNhIHBhcmEgY29udGV4dG8gZGUgbcOpdHJpY2FzXG5pbnRlcmZhY2UgTWV0cmljc0NvbnRleHQge1xuICBwYWdlOiBzdHJpbmdcbiAgdXNlcklkPzogc3RyaW5nXG4gIHNlc3Npb25JZDogc3RyaW5nXG4gIGRldmljZTogc3RyaW5nXG4gIGJyb3dzZXI6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgRXJyb3JFdmVudCB7XG4gIGlkOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBNZXRyaWNUaW1lc3RhbXBcbiAgbWVzc2FnZTogc3RyaW5nXG4gIHN0YWNrPzogc3RyaW5nXG4gIGxldmVsOiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2NyaXRpY2FsJ1xuICBjb250ZXh0OiB7XG4gICAgdXNlcklkPzogc3RyaW5nXG4gICAgc2Vzc2lvbklkOiBzdHJpbmdcbiAgICB1cmw6IHN0cmluZ1xuICAgIHVzZXJBZ2VudDogc3RyaW5nXG4gICAgY29tcG9uZW50Pzogc3RyaW5nXG4gICAgYWN0aW9uPzogc3RyaW5nXG4gIH1cbiAgdGFnczogc3RyaW5nW11cbiAgZmluZ2VycHJpbnQ6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xuICB0aW1lc3RhbXA6IE1ldHJpY1RpbWVzdGFtcFxuICBtZXRyaWNzOiBDb3JlV2ViVml0YWxzICYgQ3VzdG9tUGVyZm9ybWFuY2VNZXRyaWNzICYgQXBpTWV0cmljcyAmIFVzZXJNZXRyaWNzXG4gIGNvbnRleHQ6IE1ldHJpY3NDb250ZXh0XG59XG5cbi8vIFRpcG9zIGVzcGVjw61maWNvcyBwYXJhIGFsZXJ0YXNcbnR5cGUgQWxlcnRTZXZlcml0eSA9ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnXG50eXBlIEFsZXJ0T3BlcmF0b3IgPSAnPicgfCAnPCcgfCAnPScgfCAnPj0nIHwgJzw9J1xudHlwZSBBbGVydE1ldHJpY05hbWUgPSBzdHJpbmdcblxuLy8gSW50ZXJmYWNlIGVzcGVjw61maWNhIHBhcmEgY29udGV4dG8gZGUgYWxlcnRhc1xuaW50ZXJmYWNlIEFsZXJ0Q29udGV4dCB7XG4gIHBhZ2U/OiBzdHJpbmdcbiAgdXNlcklkPzogc3RyaW5nXG4gIHNlc3Npb25JZD86IHN0cmluZ1xuICBjb21wb25lbnQ/OiBzdHJpbmdcbiAgYWN0aW9uPzogc3RyaW5nXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbj5cbn1cblxuLy8gSW50ZXJmYWNlcyBlc3BlY8OtZmljYXMgcGFyYSBjb25maWd1cmFjacOzbiBkZSBtb25pdG9yZW9cbmludGVyZmFjZSBFcnJvclRyYWNraW5nQ29uZmlnIHtcbiAgZW5hYmxlZDogYm9vbGVhblxuICBzYW1wbGVSYXRlOiBudW1iZXJcbiAgaWdub3JlRXJyb3JzOiBzdHJpbmdbXVxuICBtYXhCcmVhZGNydW1iczogbnVtYmVyXG59XG5cbmludGVyZmFjZSBQZXJmb3JtYW5jZVRocmVzaG9sZHMge1xuICBsY3A6IE1ldHJpY1ZhbHVlXG4gIGZpZDogTWV0cmljVmFsdWVcbiAgY2xzOiBNZXRyaWNWYWx1ZVxuICBsb2FkVGltZTogTWV0cmljVmFsdWVcbn1cblxuaW50ZXJmYWNlIFBlcmZvcm1hbmNlQ29uZmlnIHtcbiAgZW5hYmxlZDogYm9vbGVhblxuICBzYW1wbGVSYXRlOiBudW1iZXJcbiAgdGhyZXNob2xkczogUGVyZm9ybWFuY2VUaHJlc2hvbGRzXG59XG5cbmludGVyZmFjZSBBbGVydENoYW5uZWxzIHtcbiAgZW1haWw/OiBzdHJpbmdbXVxuICBzbGFjaz86IHN0cmluZ1xuICB3ZWJob29rPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBBbGVydHNDb25maWcge1xuICBlbmFibGVkOiBib29sZWFuXG4gIGNoYW5uZWxzOiBBbGVydENoYW5uZWxzXG59XG5cbmludGVyZmFjZSBBbGVydFJ1bGUge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBtZXRyaWM6IEFsZXJ0TWV0cmljTmFtZVxuICB0aHJlc2hvbGQ6IE1ldHJpY1ZhbHVlXG4gIG9wZXJhdG9yOiBBbGVydE9wZXJhdG9yXG4gIHNldmVyaXR5OiBBbGVydFNldmVyaXR5XG4gIGVuYWJsZWQ6IGJvb2xlYW5cbiAgY29vbGRvd246IG51bWJlciAvLyBtaW51dGVzXG4gIGxhc3RUcmlnZ2VyZWQ/OiBNZXRyaWNUaW1lc3RhbXBcbn1cblxuaW50ZXJmYWNlIEFsZXJ0RXZlbnQge1xuICBpZDogc3RyaW5nXG4gIHJ1bGVJZDogc3RyaW5nXG4gIHRpbWVzdGFtcDogTWV0cmljVGltZXN0YW1wXG4gIHNldmVyaXR5OiBBbGVydFNldmVyaXR5XG4gIG1lc3NhZ2U6IHN0cmluZ1xuICB2YWx1ZTogTWV0cmljVmFsdWVcbiAgdGhyZXNob2xkOiBNZXRyaWNWYWx1ZVxuICBjb250ZXh0OiBBbGVydENvbnRleHRcbiAgYWNrbm93bGVkZ2VkOiBib29sZWFuXG4gIHJlc29sdmVkQXQ/OiBNZXRyaWNUaW1lc3RhbXBcbn1cblxuaW50ZXJmYWNlIE1vbml0b3JpbmdDb25maWcge1xuICBlcnJvclRyYWNraW5nOiBFcnJvclRyYWNraW5nQ29uZmlnXG4gIHBlcmZvcm1hbmNlOiBQZXJmb3JtYW5jZUNvbmZpZ1xuICBhbGVydHM6IEFsZXJ0c0NvbmZpZ1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gSW50ZXJmYWNlIHBhcmEgTmF2aWdhdGlvbiBUaW1pbmdcbmludGVyZmFjZSBOYXZpZ2F0aW9uVGltaW5nIGV4dGVuZHMgUGVyZm9ybWFuY2VFbnRyeSB7XG4gIGxvYWRFdmVudEVuZDogbnVtYmVyXG4gIGxvYWRFdmVudFN0YXJ0OiBudW1iZXJcbiAgZG9tQ29udGVudExvYWRlZEV2ZW50RW5kOiBudW1iZXJcbiAgZG9tQ29udGVudExvYWRlZEV2ZW50U3RhcnQ6IG51bWJlclxufVxuXG4vLyBJbnRlcmZhY2UgcGFyYSBQZXJmb3JtYW5jZSBNZW1vcnlcbmludGVyZmFjZSBQZXJmb3JtYW5jZU1lbW9yeSB7XG4gIHVzZWRKU0hlYXBTaXplOiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFBlcmZvcm1hbmNlV2l0aE1lbW9yeSBleHRlbmRzIFBlcmZvcm1hbmNlIHtcbiAgbWVtb3J5PzogUGVyZm9ybWFuY2VNZW1vcnlcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVEVSUFJJU0UgTU9OSVRPUklORyBNQU5BR0VSXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ0xBU0UgUFJJTkNJUEFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBFbnRlcnByaXNlTW9uaXRvcmluZ01hbmFnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRW50ZXJwcmlzZU1vbml0b3JpbmdNYW5hZ2VyXG4gIHByaXZhdGUgY29uZmlnOiBNb25pdG9yaW5nQ29uZmlnXG4gIHByaXZhdGUgZXJyb3JzOiBNYXA8c3RyaW5nLCBFcnJvckV2ZW50PiA9IG5ldyBNYXAoKVxuICBwcml2YXRlIHBlcmZvcm1hbmNlRGF0YTogUGVyZm9ybWFuY2VNZXRyaWNzW10gPSBbXVxuICBwcml2YXRlIGFsZXJ0UnVsZXM6IE1hcDxzdHJpbmcsIEFsZXJ0UnVsZT4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBhY3RpdmVBbGVydHM6IE1hcDxzdHJpbmcsIEFsZXJ0RXZlbnQ+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgc2Vzc2lvbklkOiBzdHJpbmdcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IE1vbml0b3JpbmdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1xuICAgIHRoaXMuc2Vzc2lvbklkID0gdGhpcy5nZW5lcmF0ZVNlc3Npb25JZCgpXG4gICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdEFsZXJ0UnVsZXMoKVxuICAgIHRoaXMuc3RhcnRQZXJmb3JtYW5jZU1vbml0b3JpbmcoKVxuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKGNvbmZpZz86IE1vbml0b3JpbmdDb25maWcpOiBFbnRlcnByaXNlTW9uaXRvcmluZ01hbmFnZXIge1xuICAgIGlmICghRW50ZXJwcmlzZU1vbml0b3JpbmdNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbmZpZ3VyYXRpb24gcmVxdWlyZWQgZm9yIGZpcnN0IGluaXRpYWxpemF0aW9uJylcbiAgICAgIH1cbiAgICAgIEVudGVycHJpc2VNb25pdG9yaW5nTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBFbnRlcnByaXNlTW9uaXRvcmluZ01hbmFnZXIoY29uZmlnKVxuICAgIH1cbiAgICByZXR1cm4gRW50ZXJwcmlzZU1vbml0b3JpbmdNYW5hZ2VyLmluc3RhbmNlXG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBFUlJPUiBUUkFDS0lOR1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBDYXB0dXJhciB5IHByb2Nlc2FyIGVycm9yXG4gICAqL1xuICBjYXB0dXJlRXJyb3IoXG4gICAgZXJyb3I6IEVycm9yIHwgc3RyaW5nLFxuICAgIGxldmVsOiBFcnJvckV2ZW50WydsZXZlbCddID0gJ2Vycm9yJyxcbiAgICBjb250ZXh0OiBQYXJ0aWFsPEVycm9yRXZlbnRbJ2NvbnRleHQnXT4gPSB7fSxcbiAgICB0YWdzOiBzdHJpbmdbXSA9IFtdXG4gICk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lcnJvclRyYWNraW5nLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIC8vIFNhbXBsZSByYXRlIGNoZWNrXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPiB0aGlzLmNvbmZpZy5lcnJvclRyYWNraW5nLnNhbXBsZVJhdGUpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6IGVycm9yLm1lc3NhZ2VcbiAgICBjb25zdCBzdGFjayA9IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyB1bmRlZmluZWQgOiBlcnJvci5zdGFja1xuXG4gICAgLy8gQ2hlY2sgaWYgZXJyb3Igc2hvdWxkIGJlIGlnbm9yZWRcbiAgICBpZiAodGhpcy5jb25maWcuZXJyb3JUcmFja2luZy5pZ25vcmVFcnJvcnMuc29tZShwYXR0ZXJuID0+IGVycm9yTWVzc2FnZS5pbmNsdWRlcyhwYXR0ZXJuKSkpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIGNvbnN0IGZpbmdlcnByaW50ID0gdGhpcy5nZW5lcmF0ZUVycm9yRmluZ2VycHJpbnQoZXJyb3JNZXNzYWdlLCBzdGFjaylcbiAgICBjb25zdCBlcnJvcklkID0gdGhpcy5nZW5lcmF0ZUVycm9ySWQoKVxuXG4gICAgY29uc3QgZXJyb3JFdmVudDogRXJyb3JFdmVudCA9IHtcbiAgICAgIGlkOiBlcnJvcklkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgICAgc3RhY2ssXG4gICAgICBsZXZlbCxcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgdXJsOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhdGlvbi5ocmVmIDogJycsXG4gICAgICAgIHVzZXJBZ2VudDogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogJycsXG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICB9LFxuICAgICAgdGFncyxcbiAgICAgIGZpbmdlcnByaW50LFxuICAgICAgY291bnQ6IDEsXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZXJyb3IgYWxyZWFkeSBleGlzdHMgKGRlZHVwbGljYXRpb24pXG4gICAgY29uc3QgZXhpc3RpbmdFcnJvciA9IEFycmF5LmZyb20odGhpcy5lcnJvcnMudmFsdWVzKCkpLmZpbmQoZSA9PiBlLmZpbmdlcnByaW50ID09PSBmaW5nZXJwcmludClcblxuICAgIGlmIChleGlzdGluZ0Vycm9yKSB7XG4gICAgICBleGlzdGluZ0Vycm9yLmNvdW50KytcbiAgICAgIGV4aXN0aW5nRXJyb3IudGltZXN0YW1wID0gbmV3IERhdGUoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVycm9ycy5zZXQoZXJyb3JJZCwgZXJyb3JFdmVudClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBhbGVydCBydWxlc1xuICAgIHRoaXMuY2hlY2tFcnJvckFsZXJ0cyhlcnJvckV2ZW50KVxuXG4gICAgLy8gTG9nIHRvIGNvbnNvbGUgaW4gZGV2ZWxvcG1lbnRcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNb25pdG9yaW5nXSBFcnJvciBjYXB0dXJlZDonLCBlcnJvckV2ZW50KVxuICAgIH1cblxuICAgIHJldHVybiBlcnJvcklkXG4gIH1cblxuICAvKipcbiAgICogT2J0ZW5lciBlcnJvcmVzIGNvbiBmaWx0cm9zXG4gICAqL1xuICBnZXRFcnJvcnMoXG4gICAgZmlsdGVyczoge1xuICAgICAgbGV2ZWw/OiBFcnJvckV2ZW50WydsZXZlbCddXG4gICAgICB0aW1lUmFuZ2U/OiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfVxuICAgICAgY29tcG9uZW50Pzogc3RyaW5nXG4gICAgICBsaW1pdD86IG51bWJlclxuICAgIH0gPSB7fVxuICApOiBFcnJvckV2ZW50W10ge1xuICAgIGxldCBlcnJvcnMgPSBBcnJheS5mcm9tKHRoaXMuZXJyb3JzLnZhbHVlcygpKVxuXG4gICAgLy8gQXBwbHkgZmlsdGVyc1xuICAgIGlmIChmaWx0ZXJzLmxldmVsKSB7XG4gICAgICBlcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGUgPT4gZS5sZXZlbCA9PT0gZmlsdGVycy5sZXZlbClcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy50aW1lUmFuZ2UpIHtcbiAgICAgIGVycm9ycyA9IGVycm9ycy5maWx0ZXIoXG4gICAgICAgIGUgPT4gZS50aW1lc3RhbXAgPj0gZmlsdGVycy50aW1lUmFuZ2UhLnN0YXJ0ICYmIGUudGltZXN0YW1wIDw9IGZpbHRlcnMudGltZVJhbmdlIS5lbmRcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5jb21wb25lbnQpIHtcbiAgICAgIGVycm9ycyA9IGVycm9ycy5maWx0ZXIoZSA9PiBlLmNvbnRleHQuY29tcG9uZW50ID09PSBmaWx0ZXJzLmNvbXBvbmVudClcbiAgICB9XG5cbiAgICAvLyBTb3J0IGJ5IHRpbWVzdGFtcCAobmV3ZXN0IGZpcnN0KVxuICAgIGVycm9ycy5zb3J0KChhLCBiKSA9PiBiLnRpbWVzdGFtcC5nZXRUaW1lKCkgLSBhLnRpbWVzdGFtcC5nZXRUaW1lKCkpXG5cbiAgICAvLyBBcHBseSBsaW1pdFxuICAgIGlmIChmaWx0ZXJzLmxpbWl0KSB7XG4gICAgICBlcnJvcnMgPSBlcnJvcnMuc2xpY2UoMCwgZmlsdGVycy5saW1pdClcbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JzXG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQRVJGT1JNQU5DRSBNT05JVE9SSU5HXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIEluaWNpYWxpemFyIG1vbml0b3JlbyBkZSBwZXJmb3JtYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydFBlcmZvcm1hbmNlTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnBlcmZvcm1hbmNlLmVuYWJsZWQgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIE1vbml0b3IgQ29yZSBXZWIgVml0YWxzXG4gICAgdGhpcy5tb25pdG9yV2ViVml0YWxzKClcblxuICAgIC8vIE1vbml0b3IgY3VzdG9tIG1ldHJpY3MgZXZlcnkgMzAgc2Vjb25kc1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuY2FwdHVyZVBlcmZvcm1hbmNlTWV0cmljcygpXG4gICAgfSwgMzAwMDApXG5cbiAgICAvLyBNb25pdG9yIHBhZ2UgdmlzaWJpbGl0eSBjaGFuZ2VzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgIHRoaXMuY2FwdHVyZVBlcmZvcm1hbmNlTWV0cmljcygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBNb25pdG9yZWFyIENvcmUgV2ViIFZpdGFsc1xuICAgKi9cbiAgcHJpdmF0ZSBtb25pdG9yV2ViVml0YWxzKCk6IHZvaWQge1xuICAgIC8vIExDUCAtIExhcmdlc3QgQ29udGVudGZ1bCBQYWludFxuICAgIG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKGVudHJ5TGlzdCA9PiB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gZW50cnlMaXN0LmdldEVudHJpZXMoKVxuICAgICAgY29uc3QgbGFzdEVudHJ5ID0gZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdXG4gICAgICB0aGlzLnJlY29yZE1ldHJpYygnbGNwJywgbGFzdEVudHJ5LnN0YXJ0VGltZSlcbiAgICB9KS5vYnNlcnZlKHsgZW50cnlUeXBlczogWydsYXJnZXN0LWNvbnRlbnRmdWwtcGFpbnQnXSB9KVxuXG4gICAgLy8gRklEIC0gRmlyc3QgSW5wdXQgRGVsYXlcbiAgICAvLyBJbnRlcmZhY2VzIHBhcmEgUGVyZm9ybWFuY2UgT2JzZXJ2ZXIgZW50cmllc1xuICAgIGludGVyZmFjZSBQZXJmb3JtYW5jZUV2ZW50VGltaW5nIGV4dGVuZHMgUGVyZm9ybWFuY2VFbnRyeSB7XG4gICAgICBwcm9jZXNzaW5nU3RhcnQ6IG51bWJlclxuICAgICAgc3RhcnRUaW1lOiBudW1iZXJcbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgTGF5b3V0U2hpZnRFbnRyeSBleHRlbmRzIFBlcmZvcm1hbmNlRW50cnkge1xuICAgICAgdmFsdWU6IG51bWJlclxuICAgICAgaGFkUmVjZW50SW5wdXQ6IGJvb2xlYW5cbiAgICB9XG5cbiAgICBuZXcgUGVyZm9ybWFuY2VPYnNlcnZlcihlbnRyeUxpc3QgPT4ge1xuICAgICAgY29uc3QgZW50cmllcyA9IGVudHJ5TGlzdC5nZXRFbnRyaWVzKClcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnk6IFBlcmZvcm1hbmNlRXZlbnRUaW1pbmcpID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRNZXRyaWMoJ2ZpZCcsIGVudHJ5LnByb2Nlc3NpbmdTdGFydCAtIGVudHJ5LnN0YXJ0VGltZSlcbiAgICAgIH0pXG4gICAgfSkub2JzZXJ2ZSh7IGVudHJ5VHlwZXM6IFsnZmlyc3QtaW5wdXQnXSB9KVxuXG4gICAgLy8gQ0xTIC0gQ3VtdWxhdGl2ZSBMYXlvdXQgU2hpZnRcbiAgICBsZXQgY2xzVmFsdWUgPSAwXG4gICAgbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoZW50cnlMaXN0ID0+IHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBlbnRyeUxpc3QuZ2V0RW50cmllcygpXG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBMYXlvdXRTaGlmdEVudHJ5KSA9PiB7XG4gICAgICAgIGlmICghZW50cnkuaGFkUmVjZW50SW5wdXQpIHtcbiAgICAgICAgICBjbHNWYWx1ZSArPSBlbnRyeS52YWx1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdGhpcy5yZWNvcmRNZXRyaWMoJ2NscycsIGNsc1ZhbHVlKVxuICAgIH0pLm9ic2VydmUoeyBlbnRyeVR5cGVzOiBbJ2xheW91dC1zaGlmdCddIH0pXG4gIH1cblxuICAvKipcbiAgICogQ2FwdHVyYXIgbcOpdHJpY2FzIGRlIHBlcmZvcm1hbmNlXG4gICAqL1xuICBjYXB0dXJlUGVyZm9ybWFuY2VNZXRyaWNzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb25maWcucGVyZm9ybWFuY2UuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2FtcGxlIHJhdGUgY2hlY2tcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IHRoaXMuY29uZmlnLnBlcmZvcm1hbmNlLnNhbXBsZVJhdGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljcyA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgbG9hZFRpbWU6IHRoaXMuZ2V0TG9hZFRpbWUoKSxcbiAgICAgICAgcmVuZGVyVGltZTogdGhpcy5nZXRSZW5kZXJUaW1lKCksXG4gICAgICAgIG1lbW9yeVVzYWdlOiB0aGlzLmdldE1lbW9yeVVzYWdlKCksXG4gICAgICAgIGJ1bmRsZVNpemU6IHRoaXMuZ2V0QnVuZGxlU2l6ZSgpLFxuICAgICAgICBhcGlSZXNwb25zZVRpbWU6IHRoaXMuZ2V0QXZlcmFnZUFwaVJlc3BvbnNlVGltZSgpLFxuICAgICAgICBhcGlFcnJvclJhdGU6IHRoaXMuZ2V0QXBpRXJyb3JSYXRlKCksXG4gICAgICAgIHNlc3Npb25EdXJhdGlvbjogdGhpcy5nZXRTZXNzaW9uRHVyYXRpb24oKSxcbiAgICAgICAgcGFnZVZpZXdzOiB0aGlzLmdldFBhZ2VWaWV3cygpLFxuICAgICAgICBib3VuY2VSYXRlOiB0aGlzLmdldEJvdW5jZVJhdGUoKSxcbiAgICAgIH0sXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIHBhZ2U6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lIDogJycsXG4gICAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsXG4gICAgICAgIGRldmljZTogdGhpcy5nZXREZXZpY2VUeXBlKCksXG4gICAgICAgIGJyb3dzZXI6IHRoaXMuZ2V0QnJvd3NlclR5cGUoKSxcbiAgICAgICAgdXNlcklkOiB0aGlzLmdldFVzZXJJZCgpLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICB0aGlzLnBlcmZvcm1hbmNlRGF0YS5wdXNoKG1ldHJpY3MpXG5cbiAgICAvLyBLZWVwIG9ubHkgbGFzdCAxMDAwIGVudHJpZXNcbiAgICBpZiAodGhpcy5wZXJmb3JtYW5jZURhdGEubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZURhdGEgPSB0aGlzLnBlcmZvcm1hbmNlRGF0YS5zbGljZSgtMTAwMClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBwZXJmb3JtYW5jZSBhbGVydHNcbiAgICB0aGlzLmNoZWNrUGVyZm9ybWFuY2VBbGVydHMobWV0cmljcylcblxuICAgIC8vIExvZyBpbiBkZXZlbG9wbWVudFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS5sb2coJ1tNb25pdG9yaW5nXSBQZXJmb3JtYW5jZSBtZXRyaWNzIGNhcHR1cmVkOicsIG1ldHJpY3MpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdHJhciBtw6l0cmljYSBlc3BlY8OtZmljYVxuICAgKi9cbiAgcmVjb3JkTWV0cmljKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgY29udGV4dDogTWV0cmljQ29udGV4dCA9IHt9KTogdm9pZCB7XG4gICAgY29uc3QgbWV0cmljID0ge1xuICAgICAgbmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgfSxcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBtZXRyaWMgdHJpZ2dlcnMgYWxlcnRzXG4gICAgdGhpcy5jaGVja01ldHJpY0FsZXJ0cyhuYW1lLCB2YWx1ZSlcblxuICAgIC8vIExvZyBpbiBkZXZlbG9wbWVudFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS5sb2coYFtNb25pdG9yaW5nXSBNZXRyaWMgcmVjb3JkZWQ6ICR7bmFtZX0gPSAke3ZhbHVlfWAsIG1ldHJpYylcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBBTEVSVCBTWVNURU1cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogSW5pY2lhbGl6YXIgcmVnbGFzIGRlIGFsZXJ0YSBwb3IgZGVmZWN0b1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdEFsZXJ0UnVsZXMoKTogdm9pZCB7XG4gICAgY29uc3QgZGVmYXVsdFJ1bGVzOiBBbGVydFJ1bGVbXSA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdoaWdoLWVycm9yLXJhdGUnLFxuICAgICAgICBuYW1lOiAnSGlnaCBFcnJvciBSYXRlJyxcbiAgICAgICAgbWV0cmljOiAnZXJyb3JfcmF0ZScsXG4gICAgICAgIHRocmVzaG9sZDogMC4wNSwgLy8gNSVcbiAgICAgICAgb3BlcmF0b3I6ICc+JyxcbiAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgY29vbGRvd246IDE1LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdzbG93LXBhZ2UtbG9hZCcsXG4gICAgICAgIG5hbWU6ICdTbG93IFBhZ2UgTG9hZCcsXG4gICAgICAgIG1ldHJpYzogJ2xvYWRfdGltZScsXG4gICAgICAgIHRocmVzaG9sZDogMzAwMCwgLy8gMyBzZWNvbmRzXG4gICAgICAgIG9wZXJhdG9yOiAnPicsXG4gICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgY29vbGRvd246IDEwLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdoaWdoLW1lbW9yeS11c2FnZScsXG4gICAgICAgIG5hbWU6ICdIaWdoIE1lbW9yeSBVc2FnZScsXG4gICAgICAgIG1ldHJpYzogJ21lbW9yeV91c2FnZScsXG4gICAgICAgIHRocmVzaG9sZDogMTAwLCAvLyAxMDBNQlxuICAgICAgICBvcGVyYXRvcjogJz4nLFxuICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGNvb2xkb3duOiAyMCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAncG9vci1sY3AnLFxuICAgICAgICBuYW1lOiAnUG9vciBMYXJnZXN0IENvbnRlbnRmdWwgUGFpbnQnLFxuICAgICAgICBtZXRyaWM6ICdsY3AnLFxuICAgICAgICB0aHJlc2hvbGQ6IDI1MDAsIC8vIDIuNSBzZWNvbmRzXG4gICAgICAgIG9wZXJhdG9yOiAnPicsXG4gICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgY29vbGRvd246IDE1LFxuICAgICAgfSxcbiAgICBdXG5cbiAgICBkZWZhdWx0UnVsZXMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgIHRoaXMuYWxlcnRSdWxlcy5zZXQocnVsZS5pZCwgcnVsZSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhciBhbGVydGFzIGRlIGVycm9yZXNcbiAgICovXG4gIHByaXZhdGUgY2hlY2tFcnJvckFsZXJ0cyhlcnJvckV2ZW50OiBFcnJvckV2ZW50KTogdm9pZCB7XG4gICAgLy8gQ2FsY3VsYXRlIGVycm9yIHJhdGVcbiAgICBjb25zdCByZWNlbnRFcnJvcnMgPSB0aGlzLmdldEVycm9ycyh7XG4gICAgICB0aW1lUmFuZ2U6IHtcbiAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA1ICogNjAgKiAxMDAwKSwgLy8gTGFzdCA1IG1pbnV0ZXNcbiAgICAgICAgZW5kOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgY29uc3QgZXJyb3JSYXRlID0gcmVjZW50RXJyb3JzLmxlbmd0aCAvIDEwMCAvLyBBc3N1bWluZyAxMDAgcmVxdWVzdHMgcGVyIDUgbWludXRlc1xuXG4gICAgdGhpcy5jaGVja01ldHJpY0FsZXJ0cygnZXJyb3JfcmF0ZScsIGVycm9yUmF0ZSlcblxuICAgIC8vIENoZWNrIGZvciBjcml0aWNhbCBlcnJvcnNcbiAgICBpZiAoZXJyb3JFdmVudC5sZXZlbCA9PT0gJ2NyaXRpY2FsJykge1xuICAgICAgdGhpcy50cmlnZ2VyQWxlcnQoJ2NyaXRpY2FsLWVycm9yJywge1xuICAgICAgICBtZXNzYWdlOiBgQ3JpdGljYWwgZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3JFdmVudC5tZXNzYWdlfWAsXG4gICAgICAgIHZhbHVlOiAxLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIGNvbnRleHQ6IGVycm9yRXZlbnQsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgYWxlcnRhcyBkZSBwZXJmb3JtYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1BlcmZvcm1hbmNlQWxlcnRzKG1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljcyk6IHZvaWQge1xuICAgIGNvbnN0IHsgbWV0cmljczogbSB9ID0gbWV0cmljc1xuXG4gICAgLy8gQ2hlY2sgZWFjaCBtZXRyaWMgYWdhaW5zdCBhbGVydCBydWxlc1xuICAgIE9iamVjdC5lbnRyaWVzKG0pLmZvckVhY2goKFttZXRyaWNOYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHRoaXMuY2hlY2tNZXRyaWNBbGVydHMobWV0cmljTmFtZSwgdmFsdWUpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgYWxlcnRhcyBwYXJhIHVuYSBtw6l0cmljYSBlc3BlY8OtZmljYVxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja01ldHJpY0FsZXJ0cyhtZXRyaWNOYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByZWxldmFudFJ1bGVzID0gQXJyYXkuZnJvbSh0aGlzLmFsZXJ0UnVsZXMudmFsdWVzKCkpLmZpbHRlcihcbiAgICAgIHJ1bGUgPT4gcnVsZS5tZXRyaWMgPT09IG1ldHJpY05hbWUgJiYgcnVsZS5lbmFibGVkXG4gICAgKVxuXG4gICAgcmVsZXZhbnRSdWxlcy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgY29uc3Qgc2hvdWxkVHJpZ2dlciA9IHRoaXMuZXZhbHVhdGVBbGVydENvbmRpdGlvbihydWxlLCB2YWx1ZSlcblxuICAgICAgaWYgKHNob3VsZFRyaWdnZXIgJiYgdGhpcy5jYW5UcmlnZ2VyQWxlcnQocnVsZSkpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyQWxlcnQocnVsZS5pZCwge1xuICAgICAgICAgIG1lc3NhZ2U6IGAke3J1bGUubmFtZX06ICR7bWV0cmljTmFtZX0gaXMgJHt2YWx1ZX0gKHRocmVzaG9sZDogJHtydWxlLnRocmVzaG9sZH0pYCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgICAgIGNvbnRleHQ6IHsgbWV0cmljTmFtZSwgcnVsZSB9LFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhciBjb25kaWNpw7NuIGRlIGFsZXJ0YVxuICAgKi9cbiAgcHJpdmF0ZSBldmFsdWF0ZUFsZXJ0Q29uZGl0aW9uKHJ1bGU6IEFsZXJ0UnVsZSwgdmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHN3aXRjaCAocnVsZS5vcGVyYXRvcikge1xuICAgICAgY2FzZSAnPic6XG4gICAgICAgIHJldHVybiB2YWx1ZSA+IHJ1bGUudGhyZXNob2xkXG4gICAgICBjYXNlICc8JzpcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgcnVsZS50aHJlc2hvbGRcbiAgICAgIGNhc2UgJz49JzpcbiAgICAgICAgcmV0dXJuIHZhbHVlID49IHJ1bGUudGhyZXNob2xkXG4gICAgICBjYXNlICc8PSc6XG4gICAgICAgIHJldHVybiB2YWx1ZSA8PSBydWxlLnRocmVzaG9sZFxuICAgICAgY2FzZSAnPSc6XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gcnVsZS50aHJlc2hvbGRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgc2kgc2UgcHVlZGUgZGlzcGFyYXIgYWxlcnRhIChjb29sZG93bilcbiAgICovXG4gIHByaXZhdGUgY2FuVHJpZ2dlckFsZXJ0KHJ1bGU6IEFsZXJ0UnVsZSk6IGJvb2xlYW4ge1xuICAgIGlmICghcnVsZS5sYXN0VHJpZ2dlcmVkKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGNvb2xkb3duTXMgPSBydWxlLmNvb2xkb3duICogNjAgKiAxMDAwXG4gICAgY29uc3QgdGltZVNpbmNlTGFzdFRyaWdnZXIgPSBEYXRlLm5vdygpIC0gcnVsZS5sYXN0VHJpZ2dlcmVkLmdldFRpbWUoKVxuXG4gICAgcmV0dXJuIHRpbWVTaW5jZUxhc3RUcmlnZ2VyID49IGNvb2xkb3duTXNcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXJhciBhbGVydGFcbiAgICovXG4gIHByaXZhdGUgdHJpZ2dlckFsZXJ0KFxuICAgIHJ1bGVJZDogc3RyaW5nLFxuICAgIGFsZXJ0RGF0YToge1xuICAgICAgbWVzc2FnZTogc3RyaW5nXG4gICAgICB2YWx1ZTogbnVtYmVyXG4gICAgICB0aHJlc2hvbGQ6IG51bWJlclxuICAgICAgY29udGV4dDogQWxlcnRDb250ZXh0XG4gICAgfVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBydWxlID0gdGhpcy5hbGVydFJ1bGVzLmdldChydWxlSWQpXG4gICAgaWYgKCFydWxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBhbGVydElkID0gdGhpcy5nZW5lcmF0ZUFsZXJ0SWQoKVxuICAgIGNvbnN0IGFsZXJ0OiBBbGVydEV2ZW50ID0ge1xuICAgICAgaWQ6IGFsZXJ0SWQsXG4gICAgICBydWxlSWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBzZXZlcml0eTogcnVsZS5zZXZlcml0eSxcbiAgICAgIG1lc3NhZ2U6IGFsZXJ0RGF0YS5tZXNzYWdlLFxuICAgICAgdmFsdWU6IGFsZXJ0RGF0YS52YWx1ZSxcbiAgICAgIHRocmVzaG9sZDogYWxlcnREYXRhLnRocmVzaG9sZCxcbiAgICAgIGNvbnRleHQ6IGFsZXJ0RGF0YS5jb250ZXh0LFxuICAgICAgYWNrbm93bGVkZ2VkOiBmYWxzZSxcbiAgICB9XG5cbiAgICB0aGlzLmFjdGl2ZUFsZXJ0cy5zZXQoYWxlcnRJZCwgYWxlcnQpXG4gICAgcnVsZS5sYXN0VHJpZ2dlcmVkID0gbmV3IERhdGUoKVxuXG4gICAgLy8gU2VuZCBub3RpZmljYXRpb25zXG4gICAgdGhpcy5zZW5kQWxlcnROb3RpZmljYXRpb25zKGFsZXJ0KVxuXG4gICAgY29uc29sZS53YXJuKCdbTW9uaXRvcmluZ10gQWxlcnQgdHJpZ2dlcmVkOicsIGFsZXJ0KVxuICB9XG5cbiAgLyoqXG4gICAqIEVudmlhciBub3RpZmljYWNpb25lcyBkZSBhbGVydGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2VuZEFsZXJ0Tm90aWZpY2F0aW9ucyhhbGVydDogQWxlcnRFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuYWxlcnRzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHsgY2hhbm5lbHMgfSA9IHRoaXMuY29uZmlnLmFsZXJ0c1xuXG4gICAgLy8gRW1haWwgbm90aWZpY2F0aW9uc1xuICAgIGlmIChjaGFubmVscy5lbWFpbCAmJiBjaGFubmVscy5lbWFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBpbnRlZ3JhdGUgd2l0aCBlbWFpbCBzZXJ2aWNlXG4gICAgICBjb25zb2xlLmxvZyhgW01vbml0b3JpbmddIEVtYWlsIGFsZXJ0IHNlbnQgdG86ICR7Y2hhbm5lbHMuZW1haWwuam9pbignLCAnKX1gKVxuICAgIH1cblxuICAgIC8vIFNsYWNrIG5vdGlmaWNhdGlvbnNcbiAgICBpZiAoY2hhbm5lbHMuc2xhY2spIHtcbiAgICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGludGVncmF0ZSB3aXRoIFNsYWNrIHdlYmhvb2tcbiAgICAgIGNvbnNvbGUubG9nKGBbTW9uaXRvcmluZ10gU2xhY2sgYWxlcnQgc2VudCB0bzogJHtjaGFubmVscy5zbGFja31gKVxuICAgIH1cblxuICAgIC8vIFdlYmhvb2sgbm90aWZpY2F0aW9uc1xuICAgIGlmIChjaGFubmVscy53ZWJob29rKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBzZW5kIEhUVFAgUE9TVCB0byB3ZWJob29rXG4gICAgICAgIGNvbnNvbGUubG9nKGBbTW9uaXRvcmluZ10gV2ViaG9vayBhbGVydCBzZW50IHRvOiAke2NoYW5uZWxzLndlYmhvb2t9YClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNb25pdG9yaW5nXSBGYWlsZWQgdG8gc2VuZCB3ZWJob29rIGFsZXJ0OicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFVUSUxJVFkgTUVUSE9EU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHNlc3Npb25fJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRXJyb3JJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXJyb3JfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQWxlcnRJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgYWxlcnRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRXJyb3JGaW5nZXJwcmludChtZXNzYWdlOiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb250ZW50ID0gYCR7bWVzc2FnZX0ke3N0YWNrIHx8ICcnfWBcbiAgICAvLyBTaW1wbGUgaGFzaCBmdW5jdGlvbiBmb3IgZmluZ2VycHJpbnRpbmdcbiAgICBsZXQgaGFzaCA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBjb250ZW50LmNoYXJDb2RlQXQoaSlcbiAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyXG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2ggLy8gQ29udmVydCB0byAzMi1iaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gaGFzaC50b1N0cmluZygzNilcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TG9hZFRpbWUoKTogbnVtYmVyIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoJ25hdmlnYXRpb24nKVswXSBhcyBOYXZpZ2F0aW9uVGltaW5nXG4gICAgICByZXR1cm4gbmF2aWdhdGlvbiA/IG5hdmlnYXRpb24ubG9hZEV2ZW50RW5kIC0gbmF2aWdhdGlvbi5sb2FkRXZlbnRTdGFydCA6IDBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFJlbmRlclRpbWUoKTogbnVtYmVyIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgbmF2aWdhdGlvbiA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoJ25hdmlnYXRpb24nKVswXSBhcyBOYXZpZ2F0aW9uVGltaW5nXG4gICAgICByZXR1cm4gbmF2aWdhdGlvblxuICAgICAgICA/IG5hdmlnYXRpb24uZG9tQ29udGVudExvYWRlZEV2ZW50RW5kIC0gbmF2aWdhdGlvbi5kb21Db250ZW50TG9hZGVkRXZlbnRTdGFydFxuICAgICAgICA6IDBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldE1lbW9yeVVzYWdlKCk6IG51bWJlciB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICEocGVyZm9ybWFuY2UgYXMgUGVyZm9ybWFuY2VXaXRoTWVtb3J5KS5tZW1vcnkpIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiAocGVyZm9ybWFuY2UgYXMgUGVyZm9ybWFuY2VXaXRoTWVtb3J5KS5tZW1vcnkhLnVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQgLy8gTUJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QnVuZGxlU2l6ZSgpOiBudW1iZXIge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY2FsY3VsYXRlZCBiYXNlZCBvbiBsb2FkZWQgcmVzb3VyY2VzXG4gICAgcmV0dXJuIDAgLy8gUGxhY2Vob2xkZXJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QXZlcmFnZUFwaVJlc3BvbnNlVGltZSgpOiBudW1iZXIge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY2FsY3VsYXRlZCBmcm9tIEFQSSBjYWxsIG1ldHJpY3NcbiAgICByZXR1cm4gMCAvLyBQbGFjZWhvbGRlclxuICB9XG5cbiAgcHJpdmF0ZSBnZXRBcGlFcnJvclJhdGUoKTogbnVtYmVyIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGN1bGF0ZWQgZnJvbSBBUEkgY2FsbCBtZXRyaWNzXG4gICAgcmV0dXJuIDAgLy8gUGxhY2Vob2xkZXJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2Vzc2lvbkR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIERhdGUubm93KCkgLSBwYXJzZUludCh0aGlzLnNlc3Npb25JZC5zcGxpdCgnXycpWzFdKVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRQYWdlVmlld3MoKTogbnVtYmVyIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIHRyYWNrZWQgc2VwYXJhdGVseVxuICAgIHJldHVybiAxIC8vIFBsYWNlaG9sZGVyXG4gIH1cblxuICBwcml2YXRlIGdldEJvdW5jZVJhdGUoKTogbnVtYmVyIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGN1bGF0ZWQgZnJvbSB1c2VyIGJlaGF2aW9yXG4gICAgcmV0dXJuIDAgLy8gUGxhY2Vob2xkZXJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGV2aWNlVHlwZSgpOiBzdHJpbmcge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuICd1bmtub3duJ1xuICAgIH1cbiAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgaWYgKHdpZHRoIDwgNzY4KSB7XG4gICAgICByZXR1cm4gJ21vYmlsZSdcbiAgICB9XG4gICAgaWYgKHdpZHRoIDwgMTAyNCkge1xuICAgICAgcmV0dXJuICd0YWJsZXQnXG4gICAgfVxuICAgIHJldHVybiAnZGVza3RvcCdcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QnJvd3NlclR5cGUoKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiAndW5rbm93bidcbiAgICB9XG4gICAgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKSB7XG4gICAgICByZXR1cm4gJ2Nocm9tZSdcbiAgICB9XG4gICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygnRmlyZWZveCcpKSB7XG4gICAgICByZXR1cm4gJ2ZpcmVmb3gnXG4gICAgfVxuICAgIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpKSB7XG4gICAgICByZXR1cm4gJ3NhZmFyaSdcbiAgICB9XG4gICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygnRWRnZScpKSB7XG4gICAgICByZXR1cm4gJ2VkZ2UnXG4gICAgfVxuICAgIHJldHVybiAnb3RoZXInXG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJJZCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIC8vIFRoaXMgd291bGQgYmUgcmV0cmlldmVkIGZyb20gYXV0aGVudGljYXRpb24gY29udGV4dFxuICAgIHJldHVybiB1bmRlZmluZWQgLy8gUGxhY2Vob2xkZXJcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFBVQkxJQyBBUElcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogT2J0ZW5lciBtw6l0cmljYXMgZGUgcGVyZm9ybWFuY2VcbiAgICovXG4gIGdldFBlcmZvcm1hbmNlTWV0cmljcyh0aW1lUmFuZ2U/OiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfSk6IFBlcmZvcm1hbmNlTWV0cmljc1tdIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMucGVyZm9ybWFuY2VEYXRhXG5cbiAgICBpZiAodGltZVJhbmdlKSB7XG4gICAgICBkYXRhID0gZGF0YS5maWx0ZXIobSA9PiBtLnRpbWVzdGFtcCA+PSB0aW1lUmFuZ2Uuc3RhcnQgJiYgbS50aW1lc3RhbXAgPD0gdGltZVJhbmdlLmVuZClcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIE9idGVuZXIgYWxlcnRhcyBhY3RpdmFzXG4gICAqL1xuICBnZXRBY3RpdmVBbGVydHMoKTogQWxlcnRFdmVudFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFjdGl2ZUFsZXJ0cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoYWxlcnQgPT4gIWFsZXJ0LnJlc29sdmVkQXQpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAuZ2V0VGltZSgpIC0gYS50aW1lc3RhbXAuZ2V0VGltZSgpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29ub2NlciBhbGVydGFcbiAgICovXG4gIGFja25vd2xlZGdlQWxlcnQoYWxlcnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFjdGl2ZUFsZXJ0cy5nZXQoYWxlcnRJZClcbiAgICBpZiAoYWxlcnQpIHtcbiAgICAgIGFsZXJ0LmFja25vd2xlZGdlZCA9IHRydWVcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmVyIGFsZXJ0YVxuICAgKi9cbiAgcmVzb2x2ZUFsZXJ0KGFsZXJ0SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFsZXJ0ID0gdGhpcy5hY3RpdmVBbGVydHMuZ2V0KGFsZXJ0SWQpXG4gICAgaWYgKGFsZXJ0KSB7XG4gICAgICBhbGVydC5yZXNvbHZlZEF0ID0gbmV3IERhdGUoKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogT2J0ZW5lciByZXN1bWVuIGRlIG1vbml0b3Jlb1xuICAgKi9cbiAgZ2V0TW9uaXRvcmluZ1N1bW1hcnkoKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IG9uZUhvdXJBZ28gPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gNjAgKiA2MCAqIDEwMDApXG5cbiAgICBjb25zdCByZWNlbnRFcnJvcnMgPSB0aGlzLmdldEVycm9ycyh7XG4gICAgICB0aW1lUmFuZ2U6IHsgc3RhcnQ6IG9uZUhvdXJBZ28sIGVuZDogbm93IH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHJlY2VudE1ldHJpY3MgPSB0aGlzLmdldFBlcmZvcm1hbmNlTWV0cmljcyh7XG4gICAgICBzdGFydDogb25lSG91ckFnbyxcbiAgICAgIGVuZDogbm93LFxuICAgIH0pXG5cbiAgICBjb25zdCBhY3RpdmVBbGVydHMgPSB0aGlzLmdldEFjdGl2ZUFsZXJ0cygpXG5cbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3JzOiB7XG4gICAgICAgIHRvdGFsOiByZWNlbnRFcnJvcnMubGVuZ3RoLFxuICAgICAgICBjcml0aWNhbDogcmVjZW50RXJyb3JzLmZpbHRlcihlID0+IGUubGV2ZWwgPT09ICdjcml0aWNhbCcpLmxlbmd0aCxcbiAgICAgICAgd2FybmluZzogcmVjZW50RXJyb3JzLmZpbHRlcihlID0+IGUubGV2ZWwgPT09ICd3YXJuaW5nJykubGVuZ3RoLFxuICAgICAgfSxcbiAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgIGF2ZXJhZ2VMb2FkVGltZTpcbiAgICAgICAgICByZWNlbnRNZXRyaWNzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVjZW50TWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5tZXRyaWNzLmxvYWRUaW1lLCAwKSAvIHJlY2VudE1ldHJpY3MubGVuZ3RoXG4gICAgICAgICAgICA6IDAsXG4gICAgICAgIGF2ZXJhZ2VNZW1vcnlVc2FnZTpcbiAgICAgICAgICByZWNlbnRNZXRyaWNzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVjZW50TWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5tZXRyaWNzLm1lbW9yeVVzYWdlLCAwKSAvXG4gICAgICAgICAgICAgIHJlY2VudE1ldHJpY3MubGVuZ3RoXG4gICAgICAgICAgICA6IDAsXG4gICAgICB9LFxuICAgICAgYWxlcnRzOiB7XG4gICAgICAgIGFjdGl2ZTogYWN0aXZlQWxlcnRzLmxlbmd0aCxcbiAgICAgICAgY3JpdGljYWw6IGFjdGl2ZUFsZXJ0cy5maWx0ZXIoYSA9PiBhLnNldmVyaXR5ID09PSAnY3JpdGljYWwnKS5sZW5ndGgsXG4gICAgICAgIHVuYWNrbm93bGVkZ2VkOiBhY3RpdmVBbGVydHMuZmlsdGVyKGEgPT4gIWEuYWNrbm93bGVkZ2VkKS5sZW5ndGgsXG4gICAgICB9LFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHVwdGltZTogdGhpcy5nZXRTZXNzaW9uRHVyYXRpb24oKSxcbiAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgIH0sXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWFBPUlRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZGVmYXVsdCBFbnRlcnByaXNlTW9uaXRvcmluZ01hbmFnZXJcblxuZXhwb3J0IHR5cGUgeyBFcnJvckV2ZW50LCBQZXJmb3JtYW5jZU1ldHJpY3MsIEFsZXJ0UnVsZSwgQWxlcnRFdmVudCwgTW9uaXRvcmluZ0NvbmZpZyB9XG4iXSwibmFtZXMiOlsicGVyZkhvb2tzIiwid2luZG93IiwicmVxdWlyZSIsIkVudGVycHJpc2VNb25pdG9yaW5nTWFuYWdlciIsImNvbmZpZyIsImVycm9ycyIsIk1hcCIsInBlcmZvcm1hbmNlRGF0YSIsImFsZXJ0UnVsZXMiLCJhY3RpdmVBbGVydHMiLCJzZXNzaW9uSWQiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImluaXRpYWxpemVEZWZhdWx0QWxlcnRSdWxlcyIsInN0YXJ0UGVyZm9ybWFuY2VNb25pdG9yaW5nIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIkVycm9yIiwiY2FwdHVyZUVycm9yIiwiZXJyb3IiLCJsZXZlbCIsImNvbnRleHQiLCJ0YWdzIiwiZXJyb3JUcmFja2luZyIsImVuYWJsZWQiLCJNYXRoIiwicmFuZG9tIiwic2FtcGxlUmF0ZSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJzdGFjayIsInVuZGVmaW5lZCIsImlnbm9yZUVycm9ycyIsInNvbWUiLCJwYXR0ZXJuIiwiaW5jbHVkZXMiLCJmaW5nZXJwcmludCIsImdlbmVyYXRlRXJyb3JGaW5nZXJwcmludCIsImVycm9ySWQiLCJnZW5lcmF0ZUVycm9ySWQiLCJlcnJvckV2ZW50IiwiaWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwiY291bnQiLCJleGlzdGluZ0Vycm9yIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiZmluZCIsImUiLCJzZXQiLCJjaGVja0Vycm9yQWxlcnRzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiY29uc29sZSIsImdldEVycm9ycyIsImZpbHRlcnMiLCJmaWx0ZXIiLCJ0aW1lUmFuZ2UiLCJzdGFydCIsImVuZCIsImNvbXBvbmVudCIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJsaW1pdCIsInNsaWNlIiwicGVyZm9ybWFuY2UiLCJtb25pdG9yV2ViVml0YWxzIiwic2V0SW50ZXJ2YWwiLCJjYXB0dXJlUGVyZm9ybWFuY2VNZXRyaWNzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidmlzaWJpbGl0eVN0YXRlIiwiUGVyZm9ybWFuY2VPYnNlcnZlciIsImVudHJ5TGlzdCIsImVudHJpZXMiLCJnZXRFbnRyaWVzIiwibGFzdEVudHJ5IiwibGVuZ3RoIiwicmVjb3JkTWV0cmljIiwic3RhcnRUaW1lIiwib2JzZXJ2ZSIsImVudHJ5VHlwZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJwcm9jZXNzaW5nU3RhcnQiLCJjbHNWYWx1ZSIsImhhZFJlY2VudElucHV0IiwidmFsdWUiLCJtZXRyaWNzIiwibG9hZFRpbWUiLCJnZXRMb2FkVGltZSIsInJlbmRlclRpbWUiLCJnZXRSZW5kZXJUaW1lIiwibWVtb3J5VXNhZ2UiLCJnZXRNZW1vcnlVc2FnZSIsImJ1bmRsZVNpemUiLCJnZXRCdW5kbGVTaXplIiwiYXBpUmVzcG9uc2VUaW1lIiwiZ2V0QXZlcmFnZUFwaVJlc3BvbnNlVGltZSIsImFwaUVycm9yUmF0ZSIsImdldEFwaUVycm9yUmF0ZSIsInNlc3Npb25EdXJhdGlvbiIsImdldFNlc3Npb25EdXJhdGlvbiIsInBhZ2VWaWV3cyIsImdldFBhZ2VWaWV3cyIsImJvdW5jZVJhdGUiLCJnZXRCb3VuY2VSYXRlIiwicGFnZSIsInBhdGhuYW1lIiwiZGV2aWNlIiwiZ2V0RGV2aWNlVHlwZSIsImJyb3dzZXIiLCJnZXRCcm93c2VyVHlwZSIsInVzZXJJZCIsImdldFVzZXJJZCIsInB1c2giLCJjaGVja1BlcmZvcm1hbmNlQWxlcnRzIiwibG9nIiwibmFtZSIsIm1ldHJpYyIsImNoZWNrTWV0cmljQWxlcnRzIiwiZGVmYXVsdFJ1bGVzIiwidGhyZXNob2xkIiwib3BlcmF0b3IiLCJzZXZlcml0eSIsImNvb2xkb3duIiwicnVsZSIsInJlY2VudEVycm9ycyIsIm5vdyIsImVycm9yUmF0ZSIsInRyaWdnZXJBbGVydCIsIm0iLCJPYmplY3QiLCJtZXRyaWNOYW1lIiwicmVsZXZhbnRSdWxlcyIsInNob3VsZFRyaWdnZXIiLCJldmFsdWF0ZUFsZXJ0Q29uZGl0aW9uIiwiY2FuVHJpZ2dlckFsZXJ0IiwibGFzdFRyaWdnZXJlZCIsImNvb2xkb3duTXMiLCJ0aW1lU2luY2VMYXN0VHJpZ2dlciIsInJ1bGVJZCIsImFsZXJ0RGF0YSIsImdldCIsImFsZXJ0SWQiLCJnZW5lcmF0ZUFsZXJ0SWQiLCJhbGVydCIsImFja25vd2xlZGdlZCIsInNlbmRBbGVydE5vdGlmaWNhdGlvbnMiLCJ3YXJuIiwiYWxlcnRzIiwiY2hhbm5lbHMiLCJlbWFpbCIsImpvaW4iLCJzbGFjayIsIndlYmhvb2siLCJ0b1N0cmluZyIsInN1YnN0ciIsImNvbnRlbnQiLCJoYXNoIiwiaSIsImNoYXIiLCJjaGFyQ29kZUF0IiwiZ2V0RW50cmllc0J5VHlwZSIsIm5hdmlnYXRpb24iLCJsb2FkRXZlbnRFbmQiLCJsb2FkRXZlbnRTdGFydCIsImRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZCIsImRvbUNvbnRlbnRMb2FkZWRFdmVudFN0YXJ0IiwibWVtb3J5IiwidXNlZEpTSGVhcFNpemUiLCJwYXJzZUludCIsInNwbGl0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwiZ2V0UGVyZm9ybWFuY2VNZXRyaWNzIiwiZGF0YSIsImdldEFjdGl2ZUFsZXJ0cyIsInJlc29sdmVkQXQiLCJhY2tub3dsZWRnZUFsZXJ0IiwicmVzb2x2ZUFsZXJ0IiwiZ2V0TW9uaXRvcmluZ1N1bW1hcnkiLCJvbmVIb3VyQWdvIiwicmVjZW50TWV0cmljcyIsInRvdGFsIiwiY3JpdGljYWwiLCJ3YXJuaW5nIiwiYXZlcmFnZUxvYWRUaW1lIiwicmVkdWNlIiwic3VtIiwiYXZlcmFnZU1lbW9yeVVzYWdlIiwiYWN0aXZlIiwidW5hY2tub3dsZWRnZWQiLCJzeXN0ZW0iLCJ1cHRpbWUiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QyxxREFBcUQ7QUFDckQsOEVBQThFO0FBQzlFLHNDQUFzQztBQUV0Qyw4Q0FBOEM7Ozs7OytCQWc1QjlDLHNDQUFzQztBQUN0QyxVQUFVO0FBQ1Ysc0NBQXNDO0FBRXRDOzs7ZUFBQTs7O0FBbjVCQSxNQUFNQSxZQUFZLE9BQU9DLFdBQVcsY0FBY0MsUUFBUSxnQkFBZ0I7QUE0SzFFLHNDQUFzQztBQUN0QyxnQ0FBZ0M7QUFDaEMsc0NBQXNDO0FBQ3RDLGtCQUFrQjtB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