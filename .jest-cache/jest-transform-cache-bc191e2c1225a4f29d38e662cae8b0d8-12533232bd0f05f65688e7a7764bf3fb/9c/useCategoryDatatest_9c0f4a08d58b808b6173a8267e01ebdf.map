{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useCategoryData.test.ts"],"sourcesContent":["/**\n * useCategoryData Hook Tests\n * Enterprise-ready test suite for category data management\n * Pinteya E-commerce\n */\n\nimport { renderHook, act, waitFor } from '@testing-library/react'\nimport { useCategoryData, clearCategoryCache } from '@/hooks/useCategoryData'\nimport type { Category } from '@/types/categories'\n\n// Mock fetch\nglobal.fetch = jest.fn()\n\n// Mock analytics\nconst mockGtag = jest.fn()\nObject.defineProperty(window, 'gtag', {\n  value: mockGtag,\n  writable: true,\n})\n\n// Test data\nconst mockCategories: Category[] = [\n  {\n    id: 'test-1',\n    name: 'Test Category 1',\n    icon: '/test-1.png',\n    description: 'Test description 1',\n    isAvailable: true,\n  },\n  {\n    id: 'test-2',\n    name: 'Test Category 2',\n    icon: '/test-2.png',\n    description: 'Test description 2',\n    isAvailable: true,\n  },\n]\n\n// Helper function to create flexible category expectations\nconst expectCategoriesToMatch = (categories: Category[]) =>\n  expect.arrayContaining(\n    categories.map(cat =>\n      expect.objectContaining({\n        id: cat.id,\n        name: cat.name,\n        icon: cat.icon,\n        description: cat.description,\n        isAvailable: cat.isAvailable,\n      })\n    )\n  )\n\ndescribe('useCategoryData Hook', () => {\n  const mockFetch = fetch as jest.MockedFunction<typeof fetch>\n\n  beforeEach(() => {\n    jest.clearAllMocks()\n    clearCategoryCache()\n    mockGtag.mockClear()\n  })\n\n  afterEach(() => {\n    jest.clearAllTimers()\n  })\n\n  describe('Initialization', () => {\n    it('initializes with fallback categories when autoFetch is false', () => {\n      const { result } = renderHook(() =>\n        useCategoryData({\n          autoFetch: false,\n          fallbackCategories: mockCategories,\n        })\n      )\n\n      expect(result.current.categories).toEqual(expectCategoriesToMatch(mockCategories))\n      expect(result.current.loading).toBe(false)\n      expect(result.current.error).toBe(null)\n    })\n\n    it('starts loading when autoFetch is true', () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      expect(result.current.loading).toBe(true)\n    })\n  })\n\n  describe('Data Fetching', () => {\n    it('fetches categories successfully', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.categories).toEqual(\n        expect.arrayContaining([\n          expect.objectContaining({\n            id: 'test-1',\n            name: 'Test Category 1',\n            icon: '/test-1.png',\n            description: 'Test description 1',\n            isAvailable: true,\n          }),\n          expect.objectContaining({\n            id: 'test-2',\n            name: 'Test Category 2',\n            icon: '/test-2.png',\n            description: 'Test description 2',\n            isAvailable: true,\n          }),\n        ])\n      )\n      expect(result.current.error).toBe(null)\n      expect(mockFetch).toHaveBeenCalledWith('/api/categories')\n    })\n\n    it('handles different API response formats', async () => {\n      // Test with data wrapper\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ data: mockCategories }),\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.categories).toEqual(\n        expect.arrayContaining([\n          expect.objectContaining({\n            id: 'test-1',\n            name: 'Test Category 1',\n            icon: '/test-1.png',\n            description: 'Test description 1',\n            isAvailable: true,\n          }),\n          expect.objectContaining({\n            id: 'test-2',\n            name: 'Test Category 2',\n            icon: '/test-2.png',\n            description: 'Test description 2',\n            isAvailable: true,\n          }),\n        ])\n      )\n    })\n\n    it('handles categories wrapper format', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ categories: mockCategories }),\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.categories).toEqual(\n        expect.arrayContaining([\n          expect.objectContaining({\n            id: 'test-1',\n            name: 'Test Category 1',\n            icon: '/test-1.png',\n            description: 'Test description 1',\n            isAvailable: true,\n          }),\n          expect.objectContaining({\n            id: 'test-2',\n            name: 'Test Category 2',\n            icon: '/test-2.png',\n            description: 'Test description 2',\n            isAvailable: true,\n          }),\n        ])\n      )\n    })\n\n    it('handles fetch errors gracefully', async () => {\n      const errorMessage = 'Network error'\n      mockFetch.mockRejectedValueOnce(new Error(errorMessage))\n\n      const fallbackCategories = [mockCategories[0]]\n      const { result } = renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          fallbackCategories,\n        })\n      )\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.error).toContain(errorMessage)\n      expect(result.current.categories).toEqual(fallbackCategories)\n    })\n\n    it('handles HTTP errors', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n        status: 404,\n        statusText: 'Not Found',\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.error).toContain('HTTP 404')\n    })\n\n    it('validates and filters invalid categories', async () => {\n      const invalidData = [\n        mockCategories[0],\n        { id: 'invalid' }, // Missing name\n        null,\n        { name: 'No ID' }, // Missing id\n        mockCategories[1],\n      ]\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => invalidData,\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.categories).toEqual(expectCategoriesToMatch(mockCategories))\n    })\n\n    it('respects maxCategories limit', async () => {\n      const manyCategories = Array.from({ length: 10 }, (_, i) => ({\n        id: `cat-${i}`,\n        name: `Category ${i}`,\n        icon: `/cat-${i}.png`,\n      }))\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => manyCategories,\n      } as Response)\n\n      const { result } = renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          maxCategories: 5,\n        })\n      )\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.categories).toHaveLength(5)\n    })\n  })\n\n  describe('Caching', () => {\n    it('uses cached data when available', async () => {\n      // First call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result: result1 } = renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          fallbackCategories: mockCategories,\n        })\n      )\n\n      await waitFor(() => {\n        expect(result1.current.loading).toBe(false)\n      })\n\n      expect(result1.current.categories).toEqual(expectCategoriesToMatch(mockCategories))\n      // Cache functionality is tested at the manager level\n      expect(mockFetch).toHaveBeenCalledWith('/api/categories')\n    })\n\n    it('respects cache duration', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      // First call\n      const { result } = renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          cacheDuration: 1000, // 1 second\n          fallbackCategories: mockCategories,\n        })\n      )\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      // Wait for cache to expire (simulate time passing)\n      await new Promise(resolve => setTimeout(resolve, 1100))\n\n      // Refresh should fetch again\n      await act(async () => {\n        await result.current.refresh()\n      })\n\n      expect(mockFetch).toHaveBeenCalledTimes(2)\n    })\n  })\n\n  describe('Manual Refresh', () => {\n    it('refreshes data manually', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: false }))\n\n      await act(async () => {\n        await result.current.refresh()\n      })\n\n      expect(result.current.categories).toEqual(expectCategoriesToMatch(mockCategories))\n      expect(mockFetch).toHaveBeenCalledTimes(1)\n    })\n\n    it('handles refresh errors', async () => {\n      mockFetch.mockRejectedValueOnce(new Error('Refresh failed'))\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: false }))\n\n      await act(async () => {\n        await result.current.refresh()\n      })\n\n      expect(result.current.error).toContain('Refresh failed')\n    })\n  })\n\n  describe('Utility Functions', () => {\n    it('finds category by ID', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result } = renderHook(() => useCategoryData({ autoFetch: true }))\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      const category = result.current.getCategoryById('test-1')\n      expect(category).toEqual(\n        expect.objectContaining({\n          id: 'test-1',\n          name: 'Test Category 1',\n          icon: '/test-1.png',\n          description: 'Test description 1',\n          isAvailable: true,\n        })\n      )\n\n      const notFound = result.current.getCategoryById('not-found')\n      expect(notFound).toBeUndefined()\n    })\n  })\n\n  describe('Analytics', () => {\n    it('tracks successful fetch', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          enableAnalytics: true,\n        })\n      )\n\n      await waitFor(() => {\n        expect(mockGtag).toHaveBeenCalledWith(\n          'event',\n          'category_data',\n          expect.objectContaining({\n            event_category: 'data',\n            event_label: 'fetch_success',\n          })\n        )\n      })\n    })\n\n    it('tracks fetch errors', async () => {\n      mockFetch.mockRejectedValueOnce(new Error('Test error'))\n\n      renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          enableAnalytics: true,\n        })\n      )\n\n      await waitFor(() => {\n        expect(mockGtag).toHaveBeenCalledWith(\n          'event',\n          'category_data',\n          expect.objectContaining({\n            event_category: 'data',\n            event_label: 'fetch_error',\n          })\n        )\n      })\n    })\n\n    it('does not track when analytics disabled', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockCategories,\n      } as Response)\n\n      const { result } = renderHook(() =>\n        useCategoryData({\n          autoFetch: true,\n          enableAnalytics: false,\n          fallbackCategories: mockCategories,\n        })\n      )\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(mockGtag).not.toHaveBeenCalled()\n    })\n  })\n\n  describe('Background Refresh', () => {\n    it('sets up background refresh interval', () => {\n      jest.useFakeTimers()\n      const setIntervalSpy = jest.spyOn(global, 'setInterval')\n\n      renderHook(() =>\n        useCategoryData({\n          autoFetch: false,\n          enableBackgroundRefresh: true,\n          refreshInterval: 5000,\n        })\n      )\n\n      expect(setIntervalSpy).toHaveBeenCalledWith(expect.any(Function), 5000)\n\n      jest.useRealTimers()\n    })\n\n    it('cleans up interval on unmount', () => {\n      jest.useFakeTimers()\n      const clearIntervalSpy = jest.spyOn(global, 'clearInterval')\n\n      const { unmount } = renderHook(() =>\n        useCategoryData({\n          enableBackgroundRefresh: true,\n          refreshInterval: 5000,\n        })\n      )\n\n      unmount()\n\n      expect(clearIntervalSpy).toHaveBeenCalled()\n\n      jest.useRealTimers()\n    })\n  })\n})\n"],"names":["global","fetch","jest","fn","mockGtag","Object","defineProperty","window","value","writable","mockCategories","id","name","icon","description","isAvailable","expectCategoriesToMatch","categories","expect","arrayContaining","map","cat","objectContaining","describe","mockFetch","beforeEach","clearAllMocks","clearCategoryCache","mockClear","afterEach","clearAllTimers","it","result","renderHook","useCategoryData","autoFetch","fallbackCategories","current","toEqual","loading","toBe","error","mockResolvedValueOnce","ok","json","waitFor","toHaveBeenCalledWith","data","errorMessage","mockRejectedValueOnce","Error","toContain","status","statusText","invalidData","manyCategories","Array","from","length","_","i","maxCategories","toHaveLength","result1","mockResolvedValue","cacheDuration","Promise","resolve","setTimeout","act","refresh","toHaveBeenCalledTimes","category","getCategoryById","notFound","toBeUndefined","enableAnalytics","event_category","event_label","not","toHaveBeenCalled","useFakeTimers","setIntervalSpy","spyOn","enableBackgroundRefresh","refreshInterval","any","Function","useRealTimers","clearIntervalSpy","unmount"],"mappings":"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"}