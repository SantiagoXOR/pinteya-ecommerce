24b8e5795f4be5f887787c9fb6c119d0
// ===================================
// PINTEYA E-COMMERCE - USEORDERSAPI TESTS
// Tests completos para el hook de API de órdenes
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _globals = require("@jest/globals");
const _useOrdersApi = require("../../../hooks/admin/useOrdersApi");
// ===================================
// MOCKS Y SETUP
// ===================================
// Mock de fetch global
const mockFetch = _globals.jest.fn();
global.fetch = mockFetch;
// Mock de AbortController
const mockAbort = _globals.jest.fn();
const mockAbortController = {
    abort: mockAbort,
    signal: {
        aborted: false
    }
};
global.AbortController = _globals.jest.fn(()=>mockAbortController);
// Datos de prueba
const mockOrdersResponse = {
    orders: [
        {
            id: '1',
            order_number: 'ORD-001',
            status: 'pending',
            total: 100
        },
        {
            id: '2',
            order_number: 'ORD-002',
            status: 'confirmed',
            total: 200
        }
    ],
    pagination: {
        page: 1,
        totalPages: 5,
        hasNextPage: true
    },
    analytics: {
        totalOrders: 2,
        totalRevenue: 300
    }
};
const mockFilters = {
    page: 1,
    limit: 20,
    status: 'pending',
    search: 'test'
};
const mockOptions = {
    timeout: 10000,
    maxRetries: 3
};
// ===================================
// SETUP Y CLEANUP
// ===================================
(0, _globals.beforeEach)(()=>{
    _globals.jest.clearAllMocks();
    mockAbort.mockClear();
    mockAbortController.signal.aborted = false;
    // Mock de respuesta exitosa por defecto
    mockFetch.mockResolvedValue({
        ok: true,
        status: 200,
        json: _globals.jest.fn().mockResolvedValue(mockOrdersResponse),
        headers: new Headers(),
        statusText: 'OK'
    });
});
(0, _globals.afterEach)(()=>{
    _globals.jest.clearAllTimers();
});
// ===================================
// TESTS PRINCIPALES
// ===================================
(0, _globals.describe)('useOrdersApi', ()=>{
    (0, _globals.it)('debe inicializarse correctamente', ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        (0, _globals.expect)(result.current.fetchOrdersInternal).toBeDefined();
        (0, _globals.expect)(result.current.abortCurrentRequest).toBeDefined();
        (0, _globals.expect)(result.current.isRequestInProgress).toBeDefined();
        (0, _globals.expect)(typeof result.current.fetchOrdersInternal).toBe('function');
        (0, _globals.expect)(typeof result.current.abortCurrentRequest).toBe('function');
        (0, _globals.expect)(typeof result.current.isRequestInProgress).toBe('function');
    });
    (0, _globals.it)('debe realizar fetch exitoso de órdenes', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        let response;
        await (0, _react.act)(async ()=>{
            response = await result.current.fetchOrdersInternal(mockFilters);
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledWith('/api/admin/orders?page=1&limit=20&status=pending&search=test', _globals.expect.objectContaining({
            method: 'GET',
            headers: _globals.expect.objectContaining({
                'Content-Type': 'application/json'
            }),
            signal: _globals.expect.any(Object)
        }));
        (0, _globals.expect)(response).toEqual(mockOrdersResponse);
    });
    (0, _globals.it)('debe construir URL correctamente con diferentes filtros', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        const filtersWithNulls = {
            page: 2,
            limit: 10,
            status: undefined,
            search: null,
            sort_by: 'created_at',
            sort_order: 'desc'
        };
        await (0, _react.act)(async ()=>{
            await result.current.fetchOrdersInternal(filtersWithNulls);
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledWith('/api/admin/orders?page=2&limit=10&sort_by=created_at&sort_order=desc', _globals.expect.any(Object));
    });
    (0, _globals.it)('debe manejar errores de red correctamente', async ()=>{
        mockFetch.mockRejectedValue(new Error('Network error'));
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        await (0, _react.act)(async ()=>{
            await (0, _globals.expect)(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Network error');
        });
    });
    (0, _globals.it)('debe manejar respuestas HTTP de error', async ()=>{
        mockFetch.mockResolvedValue({
            ok: false,
            status: 500,
            statusText: 'Internal Server Error',
            json: _globals.jest.fn().mockResolvedValue({
                error: 'Server error'
            })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        await (0, _react.act)(async ()=>{
            await (0, _globals.expect)(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('HTTP error! status: 500');
        });
    });
    (0, _globals.it)('debe implementar retry logic correctamente', async ()=>{
        // Fallar las primeras 2 llamadas, exitosa en la 3ra
        mockFetch.mockRejectedValueOnce(new Error('Network error')).mockRejectedValueOnce(new Error('Network error')).mockResolvedValueOnce({
            ok: true,
            status: 200,
            json: _globals.jest.fn().mockResolvedValue(mockOrdersResponse)
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        let response;
        await (0, _react.act)(async ()=>{
            response = await result.current.fetchOrdersInternal(mockFilters);
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledTimes(3);
        (0, _globals.expect)(response).toEqual(mockOrdersResponse);
    });
    (0, _globals.it)('debe fallar después de agotar todos los reintentos', async ()=>{
        mockFetch.mockRejectedValue(new Error('Persistent network error'));
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        await (0, _react.act)(async ()=>{
            await (0, _globals.expect)(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Persistent network error');
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledTimes(4); // 1 intento inicial + 3 reintentos
    });
    (0, _globals.it)('debe implementar timeout correctamente', async ()=>{
        _globals.jest.useFakeTimers();
        // Mock de fetch que nunca se resuelve
        mockFetch.mockImplementation(()=>new Promise(()=>{}));
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)({
                ...mockOptions,
                timeout: 5000
            }));
        const fetchPromise = (0, _react.act)(async ()=>{
            return result.current.fetchOrdersInternal(mockFilters);
        });
        // Avanzar el tiempo más allá del timeout
        (0, _react.act)(()=>{
            _globals.jest.advanceTimersByTime(6000);
        });
        await (0, _globals.expect)(fetchPromise).rejects.toThrow();
        _globals.jest.useRealTimers();
    });
    (0, _globals.it)('debe abortar requests correctamente', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        // Iniciar un request
        const fetchPromise = (0, _react.act)(async ()=>{
            return result.current.fetchOrdersInternal(mockFilters);
        });
        // Abortar el request
        (0, _react.act)(()=>{
            result.current.abortCurrentRequest();
        });
        (0, _globals.expect)(mockAbort).toHaveBeenCalled();
    });
    (0, _globals.it)('debe detectar requests en progreso', async ()=>{
        _globals.jest.useFakeTimers();
        // Mock de fetch que tarda en resolverse
        mockFetch.mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                        ok: true,
                        status: 200,
                        json: _globals.jest.fn().mockResolvedValue(mockOrdersResponse)
                    }), 1000)));
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        // Iniciar request
        const fetchPromise = (0, _react.act)(async ()=>{
            return result.current.fetchOrdersInternal(mockFilters);
        });
        // Verificar que está en progreso
        (0, _globals.expect)(result.current.isRequestInProgress()).toBe(true);
        // Completar el request
        (0, _react.act)(()=>{
            _globals.jest.advanceTimersByTime(1000);
        });
        await fetchPromise;
        // Verificar que ya no está en progreso
        (0, _globals.expect)(result.current.isRequestInProgress()).toBe(false);
        _globals.jest.useRealTimers();
    });
    (0, _globals.it)('debe validar respuesta JSON correctamente', async ()=>{
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: _globals.jest.fn().mockResolvedValue({
                invalid: 'response'
            })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        await (0, _react.act)(async ()=>{
            await (0, _globals.expect)(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Invalid response format');
        });
    });
    (0, _globals.it)('debe manejar respuestas vacías correctamente', async ()=>{
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: _globals.jest.fn().mockResolvedValue({
                orders: [],
                pagination: {
                    page: 1,
                    totalPages: 0,
                    hasNextPage: false
                },
                analytics: {
                    totalOrders: 0,
                    totalRevenue: 0
                }
            })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        let response;
        await (0, _react.act)(async ()=>{
            response = await result.current.fetchOrdersInternal(mockFilters);
        });
        (0, _globals.expect)(response.orders).toEqual([]);
        (0, _globals.expect)(response.analytics.totalOrders).toBe(0);
    });
    (0, _globals.it)('debe usar headers de autenticación cuando están disponibles', async ()=>{
        // Mock de session con token
        const mockSession = {
            accessToken: 'test-token'
        };
        _globals.jest.doMock('next-auth/react', ()=>({
                useSession: ()=>({
                        data: mockSession
                    })
            }));
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        await (0, _react.act)(async ()=>{
            await result.current.fetchOrdersInternal(mockFilters);
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledWith(_globals.expect.any(String), _globals.expect.objectContaining({
            headers: _globals.expect.objectContaining({
                'Content-Type': 'application/json'
            })
        }));
    });
    (0, _globals.it)('debe limpiar recursos al desmontar', ()=>{
        const { result, unmount } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        // Iniciar un request
        (0, _react.act)(()=>{
            result.current.fetchOrdersInternal(mockFilters);
        });
        // Desmontar el hook
        unmount();
        // Debe haber abortado el request
        (0, _globals.expect)(mockAbort).toHaveBeenCalled();
    });
    (0, _globals.it)('debe manejar múltiples requests concurrentes', async ()=>{
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersApi.useOrdersApi)(mockOptions));
        // Iniciar múltiples requests
        const promises = [
            result.current.fetchOrdersInternal(mockFilters),
            result.current.fetchOrdersInternal({
                ...mockFilters,
                page: 2
            }),
            result.current.fetchOrdersInternal({
                ...mockFilters,
                page: 3
            })
        ];
        await (0, _react.act)(async ()=>{
            await Promise.all(promises);
        });
        (0, _globals.expect)(mockFetch).toHaveBeenCalledTimes(3);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcYWRtaW5cXHVzZU9yZGVyc0FwaS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBVU0VPUkRFUlNBUEkgVEVTVFNcbi8vIFRlc3RzIGNvbXBsZXRvcyBwYXJhIGVsIGhvb2sgZGUgQVBJIGRlIMOzcmRlbmVzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXG5pbXBvcnQgeyB1c2VPcmRlcnNBcGkgfSBmcm9tICdAL2hvb2tzL2FkbWluL3VzZU9yZGVyc0FwaSdcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1PQ0tTIFkgU0VUVVBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIE1vY2sgZGUgZmV0Y2ggZ2xvYmFsXG5jb25zdCBtb2NrRmV0Y2ggPSBqZXN0LmZuKClcbmdsb2JhbC5mZXRjaCA9IG1vY2tGZXRjaFxuXG4vLyBNb2NrIGRlIEFib3J0Q29udHJvbGxlclxuY29uc3QgbW9ja0Fib3J0ID0gamVzdC5mbigpXG5jb25zdCBtb2NrQWJvcnRDb250cm9sbGVyID0ge1xuICBhYm9ydDogbW9ja0Fib3J0LFxuICBzaWduYWw6IHsgYWJvcnRlZDogZmFsc2UgfSxcbn1cblxuZ2xvYmFsLkFib3J0Q29udHJvbGxlciA9IGplc3QuZm4oKCkgPT4gbW9ja0Fib3J0Q29udHJvbGxlcikgYXMgYW55XG5cbi8vIERhdG9zIGRlIHBydWViYVxuY29uc3QgbW9ja09yZGVyc1Jlc3BvbnNlID0ge1xuICBvcmRlcnM6IFtcbiAgICB7IGlkOiAnMScsIG9yZGVyX251bWJlcjogJ09SRC0wMDEnLCBzdGF0dXM6ICdwZW5kaW5nJywgdG90YWw6IDEwMCB9LFxuICAgIHsgaWQ6ICcyJywgb3JkZXJfbnVtYmVyOiAnT1JELTAwMicsIHN0YXR1czogJ2NvbmZpcm1lZCcsIHRvdGFsOiAyMDAgfSxcbiAgXSxcbiAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCB0b3RhbFBhZ2VzOiA1LCBoYXNOZXh0UGFnZTogdHJ1ZSB9LFxuICBhbmFseXRpY3M6IHsgdG90YWxPcmRlcnM6IDIsIHRvdGFsUmV2ZW51ZTogMzAwIH0sXG59XG5cbmNvbnN0IG1vY2tGaWx0ZXJzID0ge1xuICBwYWdlOiAxLFxuICBsaW1pdDogMjAsXG4gIHN0YXR1czogJ3BlbmRpbmcnLFxuICBzZWFyY2g6ICd0ZXN0Jyxcbn1cblxuY29uc3QgbW9ja09wdGlvbnMgPSB7XG4gIHRpbWVvdXQ6IDEwMDAwLFxuICBtYXhSZXRyaWVzOiAzLFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0VUVVAgWSBDTEVBTlVQXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgbW9ja0Fib3J0Lm1vY2tDbGVhcigpXG4gIG1vY2tBYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQgPSBmYWxzZVxuXG4gIC8vIE1vY2sgZGUgcmVzcHVlc3RhIGV4aXRvc2EgcG9yIGRlZmVjdG9cbiAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICBvazogdHJ1ZSxcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja09yZGVyc1Jlc3BvbnNlKSxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycygpLFxuICAgIHN0YXR1c1RleHQ6ICdPSycsXG4gIH0pXG59KVxuXG5hZnRlckVhY2goKCkgPT4ge1xuICBqZXN0LmNsZWFyQWxsVGltZXJzKClcbn0pXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBURVNUUyBQUklOQ0lQQUxFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZGVzY3JpYmUoJ3VzZU9yZGVyc0FwaScsICgpID0+IHtcbiAgaXQoJ2RlYmUgaW5pY2lhbGl6YXJzZSBjb3JyZWN0YW1lbnRlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbCkudG9CZURlZmluZWQoKVxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5hYm9ydEN1cnJlbnRSZXF1ZXN0KS50b0JlRGVmaW5lZCgpXG4gICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzUmVxdWVzdEluUHJvZ3Jlc3MpLnRvQmVEZWZpbmVkKClcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmZldGNoT3JkZXJzSW50ZXJuYWwpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmFib3J0Q3VycmVudFJlcXVlc3QpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LmlzUmVxdWVzdEluUHJvZ3Jlc3MpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgfSlcblxuICBpdCgnZGViZSByZWFsaXphciBmZXRjaCBleGl0b3NvIGRlIMOzcmRlbmVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICBsZXQgcmVzcG9uc2VcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKG1vY2tGaWx0ZXJzKVxuICAgIH0pXG5cbiAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICcvYXBpL2FkbWluL29yZGVycz9wYWdlPTEmbGltaXQ9MjAmc3RhdHVzPXBlbmRpbmcmc2VhcmNoPXRlc3QnLFxuICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSksXG4gICAgICAgIHNpZ25hbDogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgfSlcbiAgICApXG5cbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwobW9ja09yZGVyc1Jlc3BvbnNlKVxuICB9KVxuXG4gIGl0KCdkZWJlIGNvbnN0cnVpciBVUkwgY29ycmVjdGFtZW50ZSBjb24gZGlmZXJlbnRlcyBmaWx0cm9zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICBjb25zdCBmaWx0ZXJzV2l0aE51bGxzID0ge1xuICAgICAgcGFnZTogMixcbiAgICAgIGxpbWl0OiAxMCxcbiAgICAgIHN0YXR1czogdW5kZWZpbmVkLFxuICAgICAgc2VhcmNoOiBudWxsLFxuICAgICAgc29ydF9ieTogJ2NyZWF0ZWRfYXQnLFxuICAgICAgc29ydF9vcmRlcjogJ2Rlc2MnLFxuICAgIH1cblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKGZpbHRlcnNXaXRoTnVsbHMpXG4gICAgfSlcblxuICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgJy9hcGkvYWRtaW4vb3JkZXJzP3BhZ2U9MiZsaW1pdD0xMCZzb3J0X2J5PWNyZWF0ZWRfYXQmc29ydF9vcmRlcj1kZXNjJyxcbiAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KVxuICAgIClcbiAgfSlcblxuICBpdCgnZGViZSBtYW5lamFyIGVycm9yZXMgZGUgcmVkIGNvcnJlY3RhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKVxuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QocmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycykpLnJlamVjdHMudG9UaHJvdygnTmV0d29yayBlcnJvcicpXG4gICAgfSlcbiAgfSlcblxuICBpdCgnZGViZSBtYW5lamFyIHJlc3B1ZXN0YXMgSFRUUCBkZSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IGZhbHNlLFxuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBzdGF0dXNUZXh0OiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGVycm9yOiAnU2VydmVyIGVycm9yJyB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QocmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0hUVFAgZXJyb3IhIHN0YXR1czogNTAwJ1xuICAgICAgKVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ2RlYmUgaW1wbGVtZW50YXIgcmV0cnkgbG9naWMgY29ycmVjdGFtZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBGYWxsYXIgbGFzIHByaW1lcmFzIDIgbGxhbWFkYXMsIGV4aXRvc2EgZW4gbGEgM3JhXG4gICAgbW9ja0ZldGNoXG4gICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKVxuICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSlcbiAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3JkZXJzUmVzcG9uc2UpLFxuICAgICAgfSlcblxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICBsZXQgcmVzcG9uc2VcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKG1vY2tGaWx0ZXJzKVxuICAgIH0pXG5cbiAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMylcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwobW9ja09yZGVyc1Jlc3BvbnNlKVxuICB9KVxuXG4gIGl0KCdkZWJlIGZhbGxhciBkZXNwdcOpcyBkZSBhZ290YXIgdG9kb3MgbG9zIHJlaW50ZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUGVyc2lzdGVudCBuZXR3b3JrIGVycm9yJykpXG5cbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VPcmRlcnNBcGkobW9ja09wdGlvbnMpKVxuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChyZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKG1vY2tGaWx0ZXJzKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnUGVyc2lzdGVudCBuZXR3b3JrIGVycm9yJ1xuICAgICAgKVxuICAgIH0pXG5cbiAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNCkgLy8gMSBpbnRlbnRvIGluaWNpYWwgKyAzIHJlaW50ZW50b3NcbiAgfSlcblxuICBpdCgnZGViZSBpbXBsZW1lbnRhciB0aW1lb3V0IGNvcnJlY3RhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgamVzdC51c2VGYWtlVGltZXJzKClcblxuICAgIC8vIE1vY2sgZGUgZmV0Y2ggcXVlIG51bmNhIHNlIHJlc3VlbHZlXG4gICAgbW9ja0ZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBuZXcgUHJvbWlzZSgoKSA9PiB7fSkpXG5cbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VPcmRlcnNBcGkoeyAuLi5tb2NrT3B0aW9ucywgdGltZW91dDogNTAwMCB9KSlcblxuICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycylcbiAgICB9KVxuXG4gICAgLy8gQXZhbnphciBlbCB0aWVtcG8gbcOhcyBhbGzDoSBkZWwgdGltZW91dFxuICAgIGFjdCgoKSA9PiB7XG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoNjAwMClcbiAgICB9KVxuXG4gICAgYXdhaXQgZXhwZWN0KGZldGNoUHJvbWlzZSkucmVqZWN0cy50b1Rocm93KClcblxuICAgIGplc3QudXNlUmVhbFRpbWVycygpXG4gIH0pXG5cbiAgaXQoJ2RlYmUgYWJvcnRhciByZXF1ZXN0cyBjb3JyZWN0YW1lbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICAvLyBJbmljaWFyIHVuIHJlcXVlc3RcbiAgICBjb25zdCBmZXRjaFByb21pc2UgPSBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIHJlc3VsdC5jdXJyZW50LmZldGNoT3JkZXJzSW50ZXJuYWwobW9ja0ZpbHRlcnMpXG4gICAgfSlcblxuICAgIC8vIEFib3J0YXIgZWwgcmVxdWVzdFxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC5hYm9ydEN1cnJlbnRSZXF1ZXN0KClcbiAgICB9KVxuXG4gICAgZXhwZWN0KG1vY2tBYm9ydCkudG9IYXZlQmVlbkNhbGxlZCgpXG4gIH0pXG5cbiAgaXQoJ2RlYmUgZGV0ZWN0YXIgcmVxdWVzdHMgZW4gcHJvZ3Jlc28nLCBhc3luYyAoKSA9PiB7XG4gICAgamVzdC51c2VGYWtlVGltZXJzKClcblxuICAgIC8vIE1vY2sgZGUgZmV0Y2ggcXVlIHRhcmRhIGVuIHJlc29sdmVyc2VcbiAgICBtb2NrRmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PlxuICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja09yZGVyc1Jlc3BvbnNlKSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAxMDAwXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKVxuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIC8vIEluaWNpYXIgcmVxdWVzdFxuICAgIGNvbnN0IGZldGNoUHJvbWlzZSA9IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycylcbiAgICB9KVxuXG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBlc3TDoSBlbiBwcm9ncmVzb1xuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1JlcXVlc3RJblByb2dyZXNzKCkpLnRvQmUodHJ1ZSlcblxuICAgIC8vIENvbXBsZXRhciBlbCByZXF1ZXN0XG4gICAgYWN0KCgpID0+IHtcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgxMDAwKVxuICAgIH0pXG5cbiAgICBhd2FpdCBmZXRjaFByb21pc2VcblxuICAgIC8vIFZlcmlmaWNhciBxdWUgeWEgbm8gZXN0w6EgZW4gcHJvZ3Jlc29cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNSZXF1ZXN0SW5Qcm9ncmVzcygpKS50b0JlKGZhbHNlKVxuXG4gICAgamVzdC51c2VSZWFsVGltZXJzKClcbiAgfSlcblxuICBpdCgnZGViZSB2YWxpZGFyIHJlc3B1ZXN0YSBKU09OIGNvcnJlY3RhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBpbnZhbGlkOiAncmVzcG9uc2UnIH0pLCAvLyBSZXNwdWVzdGEgc2luIGVzdHJ1Y3R1cmEgZXNwZXJhZGFcbiAgICB9KVxuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QocmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0J1xuICAgICAgKVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ2RlYmUgbWFuZWphciByZXNwdWVzdGFzIHZhY8OtYXMgY29ycmVjdGFtZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9yZGVyczogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgdG90YWxQYWdlczogMCwgaGFzTmV4dFBhZ2U6IGZhbHNlIH0sXG4gICAgICAgIGFuYWx5dGljczogeyB0b3RhbE9yZGVyczogMCwgdG90YWxSZXZlbnVlOiAwIH0sXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIGxldCByZXNwb25zZVxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmZldGNoT3JkZXJzSW50ZXJuYWwobW9ja0ZpbHRlcnMpXG4gICAgfSlcblxuICAgIGV4cGVjdChyZXNwb25zZS5vcmRlcnMpLnRvRXF1YWwoW10pXG4gICAgZXhwZWN0KHJlc3BvbnNlLmFuYWx5dGljcy50b3RhbE9yZGVycykudG9CZSgwKVxuICB9KVxuXG4gIGl0KCdkZWJlIHVzYXIgaGVhZGVycyBkZSBhdXRlbnRpY2FjacOzbiBjdWFuZG8gZXN0w6FuIGRpc3BvbmlibGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1vY2sgZGUgc2Vzc2lvbiBjb24gdG9rZW5cbiAgICBjb25zdCBtb2NrU2Vzc2lvbiA9IHsgYWNjZXNzVG9rZW46ICd0ZXN0LXRva2VuJyB9XG4gICAgamVzdC5kb01vY2soJ25leHQtYXV0aC9yZWFjdCcsICgpID0+ICh7XG4gICAgICB1c2VTZXNzaW9uOiAoKSA9PiAoeyBkYXRhOiBtb2NrU2Vzc2lvbiB9KSxcbiAgICB9KSlcblxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycylcbiAgICB9KVxuXG4gICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGhlYWRlcnM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9KSxcbiAgICAgIH0pXG4gICAgKVxuICB9KVxuXG4gIGl0KCdkZWJlIGxpbXBpYXIgcmVjdXJzb3MgYWwgZGVzbW9udGFyJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVzdWx0LCB1bm1vdW50IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0FwaShtb2NrT3B0aW9ucykpXG5cbiAgICAvLyBJbmljaWFyIHVuIHJlcXVlc3RcbiAgICBhY3QoKCkgPT4ge1xuICAgICAgcmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycylcbiAgICB9KVxuXG4gICAgLy8gRGVzbW9udGFyIGVsIGhvb2tcbiAgICB1bm1vdW50KClcblxuICAgIC8vIERlYmUgaGFiZXIgYWJvcnRhZG8gZWwgcmVxdWVzdFxuICAgIGV4cGVjdChtb2NrQWJvcnQpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICB9KVxuXG4gIGl0KCdkZWJlIG1hbmVqYXIgbcO6bHRpcGxlcyByZXF1ZXN0cyBjb25jdXJyZW50ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzQXBpKG1vY2tPcHRpb25zKSlcblxuICAgIC8vIEluaWNpYXIgbcO6bHRpcGxlcyByZXF1ZXN0c1xuICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgcmVzdWx0LmN1cnJlbnQuZmV0Y2hPcmRlcnNJbnRlcm5hbChtb2NrRmlsdGVycyksXG4gICAgICByZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKHsgLi4ubW9ja0ZpbHRlcnMsIHBhZ2U6IDIgfSksXG4gICAgICByZXN1bHQuY3VycmVudC5mZXRjaE9yZGVyc0ludGVybmFsKHsgLi4ubW9ja0ZpbHRlcnMsIHBhZ2U6IDMgfSksXG4gICAgXVxuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgIH0pXG5cbiAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMylcbiAgfSlcbn0pXG4iXSwibmFtZXMiOlsibW9ja0ZldGNoIiwiamVzdCIsImZuIiwiZ2xvYmFsIiwiZmV0Y2giLCJtb2NrQWJvcnQiLCJtb2NrQWJvcnRDb250cm9sbGVyIiwiYWJvcnQiLCJzaWduYWwiLCJhYm9ydGVkIiwiQWJvcnRDb250cm9sbGVyIiwibW9ja09yZGVyc1Jlc3BvbnNlIiwib3JkZXJzIiwiaWQiLCJvcmRlcl9udW1iZXIiLCJzdGF0dXMiLCJ0b3RhbCIsInBhZ2luYXRpb24iLCJwYWdlIiwidG90YWxQYWdlcyIsImhhc05leHRQYWdlIiwiYW5hbHl0aWNzIiwidG90YWxPcmRlcnMiLCJ0b3RhbFJldmVudWUiLCJtb2NrRmlsdGVycyIsImxpbWl0Iiwic2VhcmNoIiwibW9ja09wdGlvbnMiLCJ0aW1lb3V0IiwibWF4UmV0cmllcyIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja0NsZWFyIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJvayIsImpzb24iLCJoZWFkZXJzIiwiSGVhZGVycyIsInN0YXR1c1RleHQiLCJhZnRlckVhY2giLCJjbGVhckFsbFRpbWVycyIsImRlc2NyaWJlIiwiaXQiLCJyZXN1bHQiLCJyZW5kZXJIb29rIiwidXNlT3JkZXJzQXBpIiwiZXhwZWN0IiwiY3VycmVudCIsImZldGNoT3JkZXJzSW50ZXJuYWwiLCJ0b0JlRGVmaW5lZCIsImFib3J0Q3VycmVudFJlcXVlc3QiLCJpc1JlcXVlc3RJblByb2dyZXNzIiwidG9CZSIsInJlc3BvbnNlIiwiYWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiYW55IiwiT2JqZWN0IiwidG9FcXVhbCIsImZpbHRlcnNXaXRoTnVsbHMiLCJ1bmRlZmluZWQiLCJzb3J0X2J5Iiwic29ydF9vcmRlciIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJyZWplY3RzIiwidG9UaHJvdyIsImVycm9yIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwidXNlRmFrZVRpbWVycyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIlByb21pc2UiLCJmZXRjaFByb21pc2UiLCJhZHZhbmNlVGltZXJzQnlUaW1lIiwidXNlUmVhbFRpbWVycyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImludmFsaWQiLCJtb2NrU2Vzc2lvbiIsImFjY2Vzc1Rva2VuIiwiZG9Nb2NrIiwidXNlU2Vzc2lvbiIsImRhdGEiLCJTdHJpbmciLCJ1bm1vdW50IiwicHJvbWlzZXMiLCJhbGwiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QywwQ0FBMEM7QUFDMUMsaURBQWlEO0FBQ2pELHNDQUFzQzs7Ozs7dUJBRU47eUJBQ2tDOzhCQUNyQztBQUU3QixzQ0FBc0M7QUFDdEMsZ0JBQWdCO0FBQ2hCLHNDQUFzQztBQUV0Qyx1QkFBdUI7QUFDdkIsTUFBTUEsWUFBWUMsYUFBSSxDQUFDQyxFQUFFO0FBQ3pCQyxPQUFPQyxLQUFLLEdBQUdKO0FBRWYsMEJBQTBCO0FBQzFCLE1BQU1LLFlBQVlKLGFBQUksQ0FBQ0MsRUFBRTtBQUN6QixNQUFNSSxzQkFBc0I7SUFDMUJDLE9BQU9GO0lBQ1BHLFFBQVE7UUFBRUMsU0FBUztJQUFNO0FBQzNCO0FBRUFOLE9BQU9PLGVBQWUsR0FBR1QsYUFBSSxDQUFDQyxFQUFFLENBQUMsSUFBTUk7QUFFdkMsa0JBQWtCO0FBQ2xCLE1BQU1LLHFCQUFxQjtJQUN6QkMsUUFBUTtRQUNOO1lBQUVDLElBQUk7WUFBS0MsY0FBYztZQUFXQyxRQUFRO1lBQVdDLE9BQU87UUFBSTtRQUNsRTtZQUFFSCxJQUFJO1lBQUtDLGNBQWM7WUFBV0MsUUFBUTtZQUFhQyxPQUFPO1FBQUk7S0FDckU7SUFDREMsWUFBWTtRQUFFQyxNQUFNO1FBQUdDLFlBQVk7UUFBR0MsYUFBYTtJQUFLO0lBQ3hEQyxXQUFXO1FBQUVDLGFBQWE7UUFBR0MsY0FBYztJQUFJO0FBQ2pEO0FBRUEsTUFBTUMsY0FBYztJQUNsQk4sTUFBTTtJQUNOTyxPQUFPO0lBQ1BWLFFBQVE7SUFDUlcsUUFBUTtBQUNWO0FBRUEsTUFBTUMsY0FBYztJQUNsQkMsU0FBUztJ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