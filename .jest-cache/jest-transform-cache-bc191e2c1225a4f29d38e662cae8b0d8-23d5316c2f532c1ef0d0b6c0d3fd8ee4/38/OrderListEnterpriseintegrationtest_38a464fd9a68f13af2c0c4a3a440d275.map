{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\components\\OrderListEnterprise.integration.test.tsx"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - INTEGRATION TESTS\n// Pruebas de integración para OrderListEnterprise\n// ===================================\n\nimport React from 'react'\nimport { render, screen, fireEvent, waitFor, act } from '@testing-library/react'\nimport { describe, it, expect, beforeEach, afterEach } from '@jest/globals'\nimport { jest } from '@jest/globals'\nimport { OrderListEnterprise } from '@/components/admin/orders/OrderListEnterprise'\nimport { OrderEnterprise, OrderStatus } from '@/types/orders-enterprise'\nimport { ApiResponse } from '@/types/api-strict'\n\n// ===================================\n// MOCKS\n// ===================================\n\n// Mock del fetch global\nconst mockFetch = jest.fn()\nglobal.fetch = mockFetch\n\n// Mock de toast\nconst mockToast = jest.fn()\njest.mock('@/hooks/use-toast', () => ({\n  useToast: () => ({ toast: mockToast }),\n}))\n\n// Mock de performance para monitoreo\nconst mockPerformanceNow = jest.fn()\nObject.defineProperty(global, 'performance', {\n  value: {\n    now: mockPerformanceNow,\n    memory: {\n      usedJSHeapSize: 50 * 1024 * 1024, // 50MB\n    },\n  },\n  writable: true,\n})\n\n// Mock de localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n}\nObject.defineProperty(global, 'localStorage', {\n  value: mockLocalStorage,\n  writable: true,\n})\n\n// Mock de console\nconst mockConsoleError = jest.spyOn(console, 'error').mockImplementation(() => {})\nconst mockConsoleWarn = jest.spyOn(console, 'warn').mockImplementation(() => {})\nconst mockConsoleLog = jest.spyOn(console, 'log').mockImplementation(() => {})\n\n// ===================================\n// DATOS DE PRUEBA\n// ===================================\n\nconst mockOrders: OrderEnterprise[] = [\n  {\n    id: 'order-1',\n    orderNumber: 'ORD-2024-001',\n    status: 'pending' as OrderStatus,\n    previousStatus: null,\n    statusHistory: [\n      {\n        status: 'pending' as OrderStatus,\n        timestamp: new Date().toISOString(),\n        reason: 'Order created',\n        userId: 'user-1',\n      },\n    ],\n    customerId: 'customer-1',\n    customerEmail: 'customer1@example.com',\n    customerPhone: '+1234567890',\n    items: [\n      {\n        id: 'item-1',\n        productId: 'product-1',\n        productName: 'Test Product 1',\n        quantity: 2,\n        unitPrice: 29.99,\n        totalPrice: 59.98,\n        sku: 'TEST-SKU-001',\n      },\n    ],\n    subtotal: 59.98,\n    taxAmount: 4.8,\n    shippingAmount: 9.99,\n    discountAmount: 0,\n    totalAmount: 74.77,\n    currency: 'USD',\n    shippingAddress: {\n      street: '123 Test St',\n      city: 'Test City',\n      state: 'TS',\n      zipCode: '12345',\n      country: 'US',\n    },\n    billingAddress: {\n      street: '123 Test St',\n      city: 'Test City',\n      state: 'TS',\n      zipCode: '12345',\n      country: 'US',\n    },\n    paymentMethod: 'credit_card',\n    paymentStatus: 'pending',\n    shippingMethod: 'standard',\n    estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n    notes: 'Test order notes',\n    tags: ['test'],\n    metadata: {\n      source: 'web',\n    },\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n  {\n    id: 'order-2',\n    orderNumber: 'ORD-2024-002',\n    status: 'processing' as OrderStatus,\n    previousStatus: 'pending' as OrderStatus,\n    statusHistory: [\n      {\n        status: 'pending' as OrderStatus,\n        timestamp: new Date(Date.now() - 3600000).toISOString(),\n        reason: 'Order created',\n        userId: 'user-1',\n      },\n      {\n        status: 'processing' as OrderStatus,\n        timestamp: new Date().toISOString(),\n        reason: 'Payment confirmed',\n        userId: 'user-1',\n      },\n    ],\n    customerId: 'customer-2',\n    customerEmail: 'customer2@example.com',\n    customerPhone: '+1234567891',\n    items: [\n      {\n        id: 'item-2',\n        productId: 'product-2',\n        productName: 'Test Product 2',\n        quantity: 1,\n        unitPrice: 49.99,\n        totalPrice: 49.99,\n        sku: 'TEST-SKU-002',\n      },\n    ],\n    subtotal: 49.99,\n    taxAmount: 4.0,\n    shippingAmount: 9.99,\n    discountAmount: 5.0,\n    totalAmount: 58.98,\n    currency: 'USD',\n    shippingAddress: {\n      street: '456 Test Ave',\n      city: 'Test City',\n      state: 'TS',\n      zipCode: '12346',\n      country: 'US',\n    },\n    billingAddress: {\n      street: '456 Test Ave',\n      city: 'Test City',\n      state: 'TS',\n      zipCode: '12346',\n      country: 'US',\n    },\n    paymentMethod: 'paypal',\n    paymentStatus: 'paid',\n    shippingMethod: 'express',\n    estimatedDelivery: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),\n    notes: 'Express delivery requested',\n    tags: ['express', 'vip'],\n    metadata: {\n      source: 'mobile',\n      campaign: 'summer-sale',\n    },\n    createdAt: new Date(Date.now() - 3600000).toISOString(),\n    updatedAt: new Date().toISOString(),\n  },\n]\n\nconst mockApiResponse: ApiResponse<OrderEnterprise[]> = {\n  success: true,\n  data: mockOrders,\n  message: 'Orders retrieved successfully',\n  timestamp: new Date().toISOString(),\n  requestId: 'req-123',\n  pagination: {\n    page: 1,\n    limit: 10,\n    total: 2,\n    totalPages: 1,\n  },\n}\n\n// ===================================\n// SETUP Y CLEANUP\n// ===================================\n\nbeforeEach(() => {\n  jest.clearAllMocks()\n  mockPerformanceNow.mockReturnValue(1000)\n  mockLocalStorage.getItem.mockReturnValue(null)\n\n  // Mock exitoso por defecto\n  mockFetch.mockResolvedValue({\n    ok: true,\n    status: 200,\n    json: async () => mockApiResponse,\n  })\n})\n\nafterEach(() => {\n  jest.clearAllTimers()\n})\n\n// ===================================\n// TESTS DE INTEGRACIÓN\n// ===================================\n\ndescribe('OrderListEnterprise - Integración', () => {\n  describe('Renderizado inicial', () => {\n    it('debe renderizar correctamente con datos', async () => {\n      render(<OrderListEnterprise />)\n\n      // Verificar que se muestra el loading inicialmente\n      expect(screen.getByText(/cargando/i)).toBeInTheDocument()\n\n      // Esperar a que se carguen los datos\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n        expect(screen.getByText('ORD-2024-002')).toBeInTheDocument()\n      })\n\n      // Verificar que se muestran los estados correctos\n      expect(screen.getByText('Pendiente')).toBeInTheDocument()\n      expect(screen.getByText('Procesando')).toBeInTheDocument()\n    })\n\n    it('debe mostrar mensaje de error cuando falla la carga', async () => {\n      mockFetch.mockRejectedValue(new Error('Network error'))\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith(\n          expect.objectContaining({\n            title: expect.stringContaining('Error'),\n            variant: 'destructive',\n          })\n        )\n      })\n    })\n\n    it('debe mostrar mensaje cuando no hay órdenes', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        status: 200,\n        json: async () => ({\n          ...mockApiResponse,\n          data: [],\n          pagination: {\n            ...mockApiResponse.pagination,\n            total: 0,\n          },\n        }),\n      })\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText(/no se encontraron órdenes/i)).toBeInTheDocument()\n      })\n    })\n  })\n\n  describe('Sistema de filtros', () => {\n    it('debe filtrar por estado correctamente', async () => {\n      render(<OrderListEnterprise />)\n\n      // Esperar a que se carguen los datos iniciales\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Aplicar filtro por estado\n      const statusFilter = screen.getByLabelText(/estado/i)\n      fireEvent.change(statusFilter, { target: { value: 'pending' } })\n\n      // Verificar que se hace la petición con el filtro\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          expect.stringContaining('status=pending'),\n          expect.any(Object)\n        )\n      })\n    })\n\n    it('debe filtrar por rango de fechas', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Aplicar filtro de fecha\n      const dateFromInput = screen.getByLabelText(/fecha desde/i)\n      fireEvent.change(dateFromInput, {\n        target: { value: '2024-01-01' },\n      })\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          expect.stringContaining('dateFrom=2024-01-01'),\n          expect.any(Object)\n        )\n      })\n    })\n\n    it('debe manejar errores en filtros', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Simular error en filtro\n      mockFetch.mockRejectedValueOnce(new Error('Filter error'))\n\n      const statusFilter = screen.getByLabelText(/estado/i)\n      fireEvent.change(statusFilter, { target: { value: 'invalid' } })\n\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith(\n          expect.objectContaining({\n            title: expect.stringContaining('Error'),\n            variant: 'destructive',\n          })\n        )\n      })\n    })\n  })\n\n  describe('Sistema de paginación', () => {\n    it('debe cambiar de página correctamente', async () => {\n      // Mock con múltiples páginas\n      mockFetch.mockResolvedValue({\n        ok: true,\n        status: 200,\n        json: async () => ({\n          ...mockApiResponse,\n          pagination: {\n            page: 1,\n            limit: 10,\n            total: 25,\n            totalPages: 3,\n          },\n        }),\n      })\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Cambiar a página 2\n      const nextPageButton = screen.getByLabelText(/página siguiente/i)\n      fireEvent.click(nextPageButton)\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          expect.stringContaining('page=2'),\n          expect.any(Object)\n        )\n      })\n    })\n\n    it('debe manejar errores en paginación', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Simular error en cambio de página\n      mockFetch.mockRejectedValueOnce(new Error('Pagination error'))\n\n      const nextPageButton = screen.getByLabelText(/página siguiente/i)\n      fireEvent.click(nextPageButton)\n\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith(\n          expect.objectContaining({\n            title: expect.stringContaining('Error'),\n            variant: 'destructive',\n          })\n        )\n      })\n    })\n  })\n\n  describe('Selección de órdenes', () => {\n    it('debe permitir seleccionar órdenes individuales', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Seleccionar primera orden\n      const firstCheckbox = screen.getAllByRole('checkbox')[1] // [0] es \"select all\"\n      fireEvent.click(firstCheckbox)\n\n      expect(firstCheckbox).toBeChecked()\n    })\n\n    it('debe permitir seleccionar todas las órdenes', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Seleccionar todas\n      const selectAllCheckbox = screen.getAllByRole('checkbox')[0]\n      fireEvent.click(selectAllCheckbox)\n\n      // Verificar que todas las órdenes están seleccionadas\n      const checkboxes = screen.getAllByRole('checkbox')\n      checkboxes.slice(1).forEach(checkbox => {\n        expect(checkbox).toBeChecked()\n      })\n    })\n  })\n\n  describe('Sistema de monitoreo', () => {\n    it('debe trackear renders correctamente', async () => {\n      mockPerformanceNow.mockReturnValueOnce(1000).mockReturnValueOnce(1010) // 10ms render\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Verificar que se está loggeando el monitoreo\n      expect(mockConsoleLog).toHaveBeenCalled()\n    })\n\n    it('debe detectar renders lentos', async () => {\n      mockPerformanceNow.mockReturnValueOnce(1000).mockReturnValueOnce(1100) // 100ms render (lento)\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Verificar que se detecta el render lento\n      expect(mockConsoleWarn).toHaveBeenCalledWith(expect.stringContaining('Slow render detected'))\n    })\n\n    it('debe trackear errores en el monitoreo', async () => {\n      mockFetch.mockRejectedValue(new Error('API Error'))\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalled()\n      })\n\n      // Verificar que el error se trackea en el monitoreo\n      expect(mockConsoleError).toHaveBeenCalledWith(expect.stringContaining('Error tracked'))\n    })\n  })\n\n  describe('Validación de tipos estricta', () => {\n    it('debe manejar datos inválidos correctamente', async () => {\n      const invalidResponse = {\n        success: true,\n        data: [\n          {\n            id: 'order-invalid',\n            // Faltan campos requeridos\n          },\n        ],\n        message: 'Success',\n      }\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        status: 200,\n        json: async () => invalidResponse,\n      })\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        // Debería mostrar mensaje de error por datos inválidos\n        expect(mockConsoleWarn).toHaveBeenCalledWith(expect.stringContaining('Invalid data'))\n      })\n    })\n\n    it('debe validar estructura de respuesta API', async () => {\n      const malformedResponse = {\n        // Falta campo 'success'\n        data: mockOrders,\n      }\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        status: 200,\n        json: async () => malformedResponse,\n      })\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(mockConsoleWarn).toHaveBeenCalledWith(\n          expect.stringContaining('API response validation failed')\n        )\n      })\n    })\n  })\n\n  describe('Acciones masivas', () => {\n    it('debe permitir acciones en órdenes seleccionadas', async () => {\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Seleccionar órdenes\n      const checkboxes = screen.getAllByRole('checkbox')\n      fireEvent.click(checkboxes[1]) // Seleccionar primera orden\n      fireEvent.click(checkboxes[2]) // Seleccionar segunda orden\n\n      // Verificar que aparecen las acciones masivas\n      expect(screen.getByText(/acciones seleccionadas/i)).toBeInTheDocument()\n    })\n  })\n\n  describe('Actualización en tiempo real', () => {\n    it('debe refrescar datos automáticamente', async () => {\n      jest.useFakeTimers()\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      const initialCallCount = mockFetch.mock.calls.length\n\n      // Avanzar tiempo para trigger refresh automático\n      act(() => {\n        jest.advanceTimersByTime(30000) // 30 segundos\n      })\n\n      await waitFor(() => {\n        expect(mockFetch.mock.calls.length).toBeGreaterThan(initialCallCount)\n      })\n\n      jest.useRealTimers()\n    })\n  })\n\n  describe('Responsive design', () => {\n    it('debe adaptarse a pantallas móviles', async () => {\n      // Simular viewport móvil\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 375,\n      })\n\n      render(<OrderListEnterprise />)\n\n      await waitFor(() => {\n        expect(screen.getByText('ORD-2024-001')).toBeInTheDocument()\n      })\n\n      // Verificar que se muestra la vista móvil\n      expect(screen.getByTestId('mobile-order-list')).toBeInTheDocument()\n    })\n  })\n})\n"],"names":["mockFetch","jest","fn","global","fetch","mockToast","mock","useToast","toast","mockPerformanceNow","Object","defineProperty","value","now","memory","usedJSHeapSize","writable","mockLocalStorage","getItem","setItem","removeItem","clear","mockConsoleError","spyOn","console","mockImplementation","mockConsoleWarn","mockConsoleLog","mockOrders","id","orderNumber","status","previousStatus","statusHistory","timestamp","Date","toISOString","reason","userId","customerId","customerEmail","customerPhone","items","productId","productName","quantity","unitPrice","totalPrice","sku","subtotal","taxAmount","shippingAmount","discountAmount","totalAmount","currency","shippingAddress","street","city","state","zipCode","country","billingAddress","paymentMethod","paymentStatus","shippingMethod","estimatedDelivery","notes","tags","metadata","source","createdAt","updatedAt","campaign","mockApiResponse","success","data","message","requestId","pagination","page","limit","total","totalPages","beforeEach","clearAllMocks","mockReturnValue","mockResolvedValue","ok","json","afterEach","clearAllTimers","describe","it","render","OrderListEnterprise","expect","screen","getByText","toBeInTheDocument","waitFor","mockRejectedValue","Error","toHaveBeenCalledWith","objectContaining","title","stringContaining","variant","statusFilter","getByLabelText","fireEvent","change","target","any","dateFromInput","mockRejectedValueOnce","nextPageButton","click","firstCheckbox","getAllByRole","toBeChecked","selectAllCheckbox","checkboxes","slice","forEach","checkbox","mockReturnValueOnce","toHaveBeenCalled","invalidResponse","malformedResponse","useFakeTimers","initialCallCount","calls","length","act","advanceTimersByTime","toBeGreaterThan","useRealTimers","window","configurable","getByTestId"],"mappings":"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"}