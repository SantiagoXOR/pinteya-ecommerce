1b4dd46a36b0448a852a906471737d8f
// ===================================
// PINTEYA E-COMMERCE - ADMIN ORDER DETAIL API ENTERPRISE
// ===================================
"use strict";

/* istanbul ignore next */
function cov_1w0pf939zm() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\route.ts";
  var hash = "781af1d08b9099b90e6f7bce8fbd86e35afc9241";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 7,
          column: 3
        }
      },
      "1": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "2": {
        start: {
          line: 9,
          column: 24
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "3": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 21,
          column: 3
        }
      },
      "4": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 19
        }
      },
      "5": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 21
        }
      },
      "6": {
        start: {
          line: 22,
          column: 16
        },
        end: {
          line: 22,
          column: 38
        }
      },
      "7": {
        start: {
          line: 23,
          column: 18
        },
        end: {
          line: 23,
          column: 69
        }
      },
      "8": {
        start: {
          line: 24,
          column: 14
        },
        end: {
          line: 24,
          column: 44
        }
      },
      "9": {
        start: {
          line: 25,
          column: 13
        },
        end: {
          line: 25,
          column: 27
        }
      },
      "10": {
        start: {
          line: 26,
          column: 16
        },
        end: {
          line: 26,
          column: 63
        }
      },
      "11": {
        start: {
          line: 27,
          column: 22
        },
        end: {
          line: 27,
          column: 70
        }
      },
      "12": {
        start: {
          line: 28,
          column: 21
        },
        end: {
          line: 28,
          column: 74
        }
      },
      "13": {
        start: {
          line: 29,
          column: 17
        },
        end: {
          line: 29,
          column: 65
        }
      },
      "14": {
        start: {
          line: 33,
          column: 26
        },
        end: {
          line: 59,
          column: 2
        }
      },
      "15": {
        start: {
          line: 64,
          column: 4
        },
        end: {
          line: 92,
          column: 5
        }
      },
      "16": {
        start: {
          line: 65,
          column: 24
        },
        end: {
          line: 65,
          column: 47
        }
      },
      "17": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 71,
          column: 9
        }
      },
      "18": {
        start: {
          line: 67,
          column: 12
        },
        end: {
          line: 70,
          column: 14
        }
      },
      "19": {
        start: {
          line: 73,
          column: 24
        },
        end: {
          line: 73,
          column: 68
        }
      },
      "20": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 79,
          column: 9
        }
      },
      "21": {
        start: {
          line: 75,
          column: 12
        },
        end: {
          line: 78,
          column: 14
        }
      },
      "22": {
        start: {
          line: 80,
          column: 8
        },
        end: {
          line: 83,
          column: 10
        }
      },
      "23": {
        start: {
          line: 85,
          column: 8
        },
        end: {
          line: 87,
          column: 11
        }
      },
      "24": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 91,
          column: 10
        }
      },
      "25": {
        start: {
          line: 97,
          column: 25
        },
        end: {
          line: 122,
          column: 1
        }
      },
      "26": {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 126,
          column: 5
        }
      },
      "27": {
        start: {
          line: 125,
          column: 8
        },
        end: {
          line: 125,
          column: 20
        }
      },
      "28": {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 127,
          column: 73
        }
      },
      "29": {
        start: {
          line: 130,
          column: 22
        },
        end: {
          line: 130,
          column: 32
        }
      },
      "30": {
        start: {
          line: 131,
          column: 4
        },
        end: {
          line: 271,
          column: 5
        }
      },
      "31": {
        start: {
          line: 133,
          column: 32
        },
        end: {
          line: 133,
          column: 196
        }
      },
      "32": {
        start: {
          line: 134,
          column: 8
        },
        end: {
          line: 142,
          column: 9
        }
      },
      "33": {
        start: {
          line: 135,
          column: 29
        },
        end: {
          line: 139,
          column: 14
        }
      },
      "34": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 140,
          column: 77
        }
      },
      "35": {
        start: {
          line: 141,
          column: 12
        },
        end: {
          line: 141,
          column: 28
        }
      },
      "36": {
        start: {
          line: 144,
          column: 27
        },
        end: {
          line: 144,
          column: 52
        }
      },
      "37": {
        start: {
          line: 145,
          column: 8
        },
        end: {
          line: 151,
          column: 9
        }
      },
      "38": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 150,
          column: 15
        }
      },
      "39": {
        start: {
          line: 152,
          column: 24
        },
        end: {
          line: 152,
          column: 33
        }
      },
      "40": {
        start: {
          line: 154,
          column: 39
        },
        end: {
          line: 175,
          column: 35
        }
      },
      "41": {
        start: {
          line: 176,
          column: 8
        },
        end: {
          line: 193,
          column: 9
        }
      },
      "42": {
        start: {
          line: 177,
          column: 12
        },
        end: {
          line: 183,
          column: 13
        }
      },
      "43": {
        start: {
          line: 178,
          column: 16
        },
        end: {
          line: 182,
          column: 19
        }
      },
      "44": {
        start: {
          line: 184,
          column: 12
        },
        end: {
          line: 187,
          column: 15
        }
      },
      "45": {
        start: {
          line: 188,
          column: 12
        },
        end: {
          line: 192,
          column: 15
        }
      },
      "46": {
        start: {
          line: 195,
          column: 28
        },
        end: {
          line: 195,
          column: 30
        }
      },
      "47": {
        start: {
          line: 196,
          column: 8
        },
        end: {
          line: 216,
          column: 9
        }
      },
      "48": {
        start: {
          line: 197,
          column: 38
        },
        end: {
          line: 209,
          column: 14
        }
      },
      "49": {
        start: {
          line: 210,
          column: 12
        },
        end: {
          line: 210,
          column: 42
        }
      },
      "50": {
        start: {
          line: 213,
          column: 12
        },
        end: {
          line: 215,
          column: 15
        }
      },
      "51": {
        start: {
          line: 218,
          column: 25
        },
        end: {
          line: 218,
          column: 27
        }
      },
      "52": {
        start: {
          line: 219,
          column: 8
        },
        end: {
          line: 239,
          column: 9
        }
      },
      "53": {
        start: {
          line: 220,
          column: 36
        },
        end: {
          line: 232,
          column: 14
        }
      },
      "54": {
        start: {
          line: 233,
          column: 12
        },
        end: {
          line: 233,
          column: 37
        }
      },
      "55": {
        start: {
          line: 236,
          column: 12
        },
        end: {
          line: 238,
          column: 15
        }
      },
      "56": {
        start: {
          line: 241,
          column: 29
        },
        end: {
          line: 241,
          column: 51
        }
      },
      "57": {
        start: {
          line: 242,
          column: 8
        },
        end: {
          line: 242,
          column: 116
        }
      },
      "58": {
        start: {
          line: 243,
          column: 25
        },
        end: {
          line: 251,
          column: 9
        }
      },
      "59": {
        start: {
          line: 252,
          column: 29
        },
        end: {
          line: 252,
          column: 64
        }
      },
      "60": {
        start: {
          line: 253,
          column: 8
        },
        end: {
          line: 253,
          column: 77
        }
      },
      "61": {
        start: {
          line: 254,
          column: 8
        },
        end: {
          line: 257,
          column: 11
        }
      },
      "62": {
        start: {
          line: 258,
          column: 8
        },
        end: {
          line: 258,
          column: 28
        }
      },
      "63": {
        start: {
          line: 260,
          column: 29
        },
        end: {
          line: 260,
          column: 51
        }
      },
      "64": {
        start: {
          line: 261,
          column: 8
        },
        end: {
          line: 261,
          column: 116
        }
      },
      "65": {
        start: {
          line: 262,
          column: 8
        },
        end: {
          line: 265,
          column: 11
        }
      },
      "66": {
        start: {
          line: 266,
          column: 8
        },
        end: {
          line: 270,
          column: 11
        }
      },
      "67": {
        start: {
          line: 274,
          column: 22
        },
        end: {
          line: 274,
          column: 32
        }
      },
      "68": {
        start: {
          line: 275,
          column: 4
        },
        end: {
          line: 404,
          column: 5
        }
      },
      "69": {
        start: {
          line: 277,
          column: 32
        },
        end: {
          line: 277,
          column: 196
        }
      },
      "70": {
        start: {
          line: 278,
          column: 8
        },
        end: {
          line: 286,
          column: 9
        }
      },
      "71": {
        start: {
          line: 279,
          column: 29
        },
        end: {
          line: 283,
          column: 14
        }
      },
      "72": {
        start: {
          line: 284,
          column: 12
        },
        end: {
          line: 284,
          column: 77
        }
      },
      "73": {
        start: {
          line: 285,
          column: 12
        },
        end: {
          line: 285,
          column: 28
        }
      },
      "74": {
        start: {
          line: 288,
          column: 27
        },
        end: {
          line: 288,
          column: 52
        }
      },
      "75": {
        start: {
          line: 289,
          column: 8
        },
        end: {
          line: 295,
          column: 9
        }
      },
      "76": {
        start: {
          line: 290,
          column: 12
        },
        end: {
          line: 294,
          column: 15
        }
      },
      "77": {
        start: {
          line: 296,
          column: 24
        },
        end: {
          line: 296,
          column: 33
        }
      },
      "78": {
        start: {
          line: 298,
          column: 21
        },
        end: {
          line: 298,
          column: 41
        }
      },
      "79": {
        start: {
          line: 299,
          column: 33
        },
        end: {
          line: 299,
          column: 66
        }
      },
      "80": {
        start: {
          line: 300,
          column: 8
        },
        end: {
          line: 307,
          column: 9
        }
      },
      "81": {
        start: {
          line: 301,
          column: 12
        },
        end: {
          line: 306,
          column: 15
        }
      },
      "82": {
        start: {
          line: 308,
          column: 27
        },
        end: {
          line: 308,
          column: 48
        }
      },
      "83": {
        start: {
          line: 310,
          column: 58
        },
        end: {
          line: 310,
          column: 166
        }
      },
      "84": {
        start: {
          line: 311,
          column: 8
        },
        end: {
          line: 328,
          column: 9
        }
      },
      "85": {
        start: {
          line: 312,
          column: 12
        },
        end: {
          line: 318,
          column: 13
        }
      },
      "86": {
        start: {
          line: 313,
          column: 16
        },
        end: {
          line: 317,
          column: 19
        }
      },
      "87": {
        start: {
          line: 319,
          column: 12
        },
        end: {
          line: 322,
          column: 15
        }
      },
      "88": {
        start: {
          line: 323,
          column: 12
        },
        end: {
          line: 327,
          column: 15
        }
      },
      "89": {
        start: {
          line: 330,
          column: 8
        },
        end: {
          line: 336,
          column: 9
        }
      },
      "90": {
        start: {
          line: 331,
          column: 12
        },
        end: {
          line: 335,
          column: 15
        }
      },
      "91": {
        start: {
          line: 338,
          column: 30
        },
        end: {
          line: 341,
          column: 9
        }
      },
      "92": {
        start: {
          line: 343,
          column: 8
        },
        end: {
          line: 345,
          column: 9
        }
      },
      "93": {
        start: {
          line: 344,
          column: 12
        },
        end: {
          line: 344,
          column: 89
        }
      },
      "94": {
        start: {
          line: 347,
          column: 59
        },
        end: {
          line: 347,
          column: 161
        }
      },
      "95": {
        start: {
          line: 348,
          column: 8
        },
        end: {
          line: 358,
          column: 9
        }
      },
      "96": {
        start: {
          line: 349,
          column: 12
        },
        end: {
          line: 352,
          column: 15
        }
      },
      "97": {
        start: {
          line: 353,
          column: 12
        },
        end: {
          line: 357,
          column: 15
        }
      },
      "98": {
        start: {
          line: 360,
          column: 8
        },
        end: {
          line: 375,
          column: 9
        }
      },
      "99": {
        start: {
          line: 361,
          column: 12
        },
        end: {
          line: 374,
          column: 13
        }
      },
      "100": {
        start: {
          line: 362,
          column: 16
        },
        end: {
          line: 368,
          column: 19
        }
      },
      "101": {
        start: {
          line: 371,
          column: 16
        },
        end: {
          line: 373,
          column: 19
        }
      },
      "102": {
        start: {
          line: 377,
          column: 29
        },
        end: {
          line: 377,
          column: 51
        }
      },
      "103": {
        start: {
          line: 378,
          column: 8
        },
        end: {
          line: 378,
          column: 118
        }
      },
      "104": {
        start: {
          line: 379,
          column: 25
        },
        end: {
          line: 383,
          column: 9
        }
      },
      "105": {
        start: {
          line: 384,
          column: 29
        },
        end: {
          line: 384,
          column: 64
        }
      },
      "106": {
        start: {
          line: 385,
          column: 8
        },
        end: {
          line: 385,
          column: 77
        }
      },
      "107": {
        start: {
          line: 386,
          column: 8
        },
        end: {
          line: 390,
          column: 11
        }
      },
      "108": {
        start: {
          line: 391,
          column: 8
        },
        end: {
          line: 391,
          column: 28
        }
      },
      "109": {
        start: {
          line: 393,
          column: 29
        },
        end: {
          line: 393,
          column: 51
        }
      },
      "110": {
        start: {
          line: 394,
          column: 8
        },
        end: {
          line: 394,
          column: 118
        }
      },
      "111": {
        start: {
          line: 395,
          column: 8
        },
        end: {
          line: 398,
          column: 11
        }
      },
      "112": {
        start: {
          line: 399,
          column: 8
        },
        end: {
          line: 403,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 8,
            column: 9
          },
          end: {
            line: 8,
            column: 16
          }
        },
        loc: {
          start: {
            line: 8,
            column: 30
          },
          end: {
            line: 13,
            column: 1
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 15
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 17
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "3": {
        name: "validateAdminAuth",
        decl: {
          start: {
            line: 63,
            column: 15
          },
          end: {
            line: 63,
            column: 32
          }
        },
        loc: {
          start: {
            line: 63,
            column: 35
          },
          end: {
            line: 93,
            column: 1
          }
        },
        line: 63
      },
      "4": {
        name: "validateStateTransition",
        decl: {
          start: {
            line: 123,
            column: 9
          },
          end: {
            line: 123,
            column: 32
          }
        },
        loc: {
          start: {
            line: 123,
            column: 59
          },
          end: {
            line: 128,
            column: 1
          }
        },
        line: 123
      },
      "5": {
        name: "GET",
        decl: {
          start: {
            line: 129,
            column: 15
          },
          end: {
            line: 129,
            column: 18
          }
        },
        loc: {
          start: {
            line: 129,
            column: 40
          },
          end: {
            line: 272,
            column: 1
          }
        },
        line: 129
      },
      "6": {
        name: "PATCH",
        decl: {
          start: {
            line: 273,
            column: 15
          },
          end: {
            line: 273,
            column: 20
          }
        },
        loc: {
          start: {
            line: 273,
            column: 42
          },
          end: {
            line: 405,
            column: 1
          }
        },
        line: 273
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 66
      },
      "1": {
        loc: {
          start: {
            line: 74,
            column: 8
          },
          end: {
            line: 79,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 74,
            column: 8
          },
          end: {
            line: 79,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 74
      },
      "2": {
        loc: {
          start: {
            line: 124,
            column: 4
          },
          end: {
            line: 126,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 124,
            column: 4
          },
          end: {
            line: 126,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 124
      },
      "3": {
        loc: {
          start: {
            line: 127,
            column: 11
          },
          end: {
            line: 127,
            column: 72
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 127,
            column: 11
          },
          end: {
            line: 127,
            column: 63
          }
        }, {
          start: {
            line: 127,
            column: 67
          },
          end: {
            line: 127,
            column: 72
          }
        }],
        line: 127
      },
      "4": {
        loc: {
          start: {
            line: 134,
            column: 8
          },
          end: {
            line: 142,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 134,
            column: 8
          },
          end: {
            line: 142,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 134
      },
      "5": {
        loc: {
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 145
      },
      "6": {
        loc: {
          start: {
            line: 176,
            column: 8
          },
          end: {
            line: 193,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 176,
            column: 8
          },
          end: {
            line: 193,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 176
      },
      "7": {
        loc: {
          start: {
            line: 177,
            column: 12
          },
          end: {
            line: 183,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 177,
            column: 12
          },
          end: {
            line: 183,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 177
      },
      "8": {
        loc: {
          start: {
            line: 210,
            column: 28
          },
          end: {
            line: 210,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 210,
            column: 28
          },
          end: {
            line: 210,
            column: 35
          }
        }, {
          start: {
            line: 210,
            column: 39
          },
          end: {
            line: 210,
            column: 41
          }
        }],
        line: 210
      },
      "9": {
        loc: {
          start: {
            line: 233,
            column: 25
          },
          end: {
            line: 233,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 233,
            column: 25
          },
          end: {
            line: 233,
            column: 30
          }
        }, {
          start: {
            line: 233,
            column: 34
          },
          end: {
            line: 233,
            column: 36
          }
        }],
        line: 233
      },
      "10": {
        loc: {
          start: {
            line: 278,
            column: 8
          },
          end: {
            line: 286,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 278,
            column: 8
          },
          end: {
            line: 286,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 278
      },
      "11": {
        loc: {
          start: {
            line: 289,
            column: 8
          },
          end: {
            line: 295,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 289,
            column: 8
          },
          end: {
            line: 295,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 289
      },
      "12": {
        loc: {
          start: {
            line: 300,
            column: 8
          },
          end: {
            line: 307,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 300,
            column: 8
          },
          end: {
            line: 307,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 300
      },
      "13": {
        loc: {
          start: {
            line: 311,
            column: 8
          },
          end: {
            line: 328,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 311,
            column: 8
          },
          end: {
            line: 328,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 311
      },
      "14": {
        loc: {
          start: {
            line: 312,
            column: 12
          },
          end: {
            line: 318,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 312,
            column: 12
          },
          end: {
            line: 318,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 312
      },
      "15": {
        loc: {
          start: {
            line: 330,
            column: 8
          },
          end: {
            line: 336,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 330,
            column: 8
          },
          end: {
            line: 336,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 330
      },
      "16": {
        loc: {
          start: {
            line: 330,
            column: 12
          },
          end: {
            line: 330,
            column: 97
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 330,
            column: 12
          },
          end: {
            line: 330,
            column: 29
          }
        }, {
          start: {
            line: 330,
            column: 33
          },
          end: {
            line: 330,
            column: 97
          }
        }],
        line: 330
      },
      "17": {
        loc: {
          start: {
            line: 343,
            column: 8
          },
          end: {
            line: 345,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 343,
            column: 8
          },
          end: {
            line: 345,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 343
      },
      "18": {
        loc: {
          start: {
            line: 348,
            column: 8
          },
          end: {
            line: 358,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 348,
            column: 8
          },
          end: {
            line: 358,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 348
      },
      "19": {
        loc: {
          start: {
            line: 360,
            column: 8
          },
          end: {
            line: 375,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 360,
            column: 8
          },
          end: {
            line: 375,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 360
      },
      "20": {
        loc: {
          start: {
            line: 360,
            column: 12
          },
          end: {
            line: 360,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 360,
            column: 12
          },
          end: {
            line: 360,
            column: 29
          }
        }, {
          start: {
            line: 360,
            column: 33
          },
          end: {
            line: 360,
            column: 74
          }
        }],
        line: 360
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\route.ts"],
      sourcesContent: ["// ===================================\r\n// PINTEYA E-COMMERCE - ADMIN ORDER DETAIL API ENTERPRISE\r\n// ===================================\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { supabaseAdmin } from '@/lib/integrations/supabase';\r\nimport { auth } from '@/auth';\r\nimport { ApiResponse } from '@/types/api';\r\nimport { z } from 'zod';\r\nimport { logger, LogLevel, LogCategory } from '@/lib/enterprise/logger';\r\nimport { checkRateLimit } from '@/lib/auth/rate-limiting';\r\nimport { addRateLimitHeaders, RATE_LIMIT_CONFIGS } from '@/lib/enterprise/rate-limiter';\r\nimport { MetricsCollector } from '@/lib/enterprise/metrics';\r\n\r\n// ===================================\r\n// SCHEMAS DE VALIDACI\xD3N\r\n// ===================================\r\n\r\nconst UpdateOrderSchema = z.object({\r\n  status: z.enum(['pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded']).optional(),\r\n  payment_status: z.enum(['pending', 'paid', 'failed', 'refunded']).optional(),\r\n  notes: z.string().optional(),\r\n  tracking_number: z.string().optional(),\r\n  carrier: z.string().optional(),\r\n  shipping_address: z.object({\r\n    street_name: z.string().min(1),\r\n    street_number: z.string().min(1),\r\n    zip_code: z.string().min(1),\r\n    city_name: z.string().min(1),\r\n    state_name: z.string().min(1),\r\n  }).optional(),\r\n});\r\n\r\n// ===================================\r\n// MIDDLEWARE DE AUTENTICACI\xD3N ADMIN\r\n// ===================================\r\n\r\nasync function validateAdminAuth() {\r\n  try {\r\n    const session = await auth();\r\n    if (!session?.user) {\r\n      return { error: 'Usuario no autenticado', status: 401 };\r\n    }\r\n\r\n    // Verificar si es admin\r\n    const isAdmin = session.user.email === 'santiago@xor.com.ar';\r\n    if (!isAdmin) {\r\n      return { error: 'Acceso denegado - Se requieren permisos de administrador', status: 403 };\r\n    }\r\n\r\n    return { user: session.user, userId: session.user.id };\r\n  } catch (error) {\r\n    logger.log(LogLevel.ERROR, LogCategory.AUTH, 'Error en validaci\xF3n admin', { error });\r\n    return { error: 'Error de autenticaci\xF3n', status: 500 };\r\n  }\r\n}\r\n\r\n// ===================================\r\n// VALIDACIONES DE TRANSICI\xD3N DE ESTADOS\r\n// ===================================\r\n\r\nconst stateTransitions: Record<string, string[]> = {\r\n  pending: ['confirmed', 'cancelled'],\r\n  confirmed: ['processing', 'cancelled'],\r\n  processing: ['shipped', 'cancelled'],\r\n  shipped: ['delivered', 'returned'],\r\n  delivered: ['returned'],\r\n  cancelled: [],\r\n  refunded: [],\r\n  returned: ['refunded']\r\n};\r\n\r\nfunction validateStateTransition(currentStatus: string, newStatus: string): boolean {\r\n  if (currentStatus === newStatus) {return true;}\r\n  return stateTransitions[currentStatus]?.includes(newStatus) || false;\r\n}\r\n\r\n// ===================================\r\n// GET - Obtener orden espec\xEDfica\r\n// ===================================\r\nexport async function GET(\r\n  request: NextRequest,\r\n  { params }: { params: { id: string } }\r\n) {\r\n  const startTime = Date.now();\r\n  \r\n  try {\r\n    // Rate limiting\r\n    const rateLimitResult = await checkRateLimit(\r\n      request,\r\n      RATE_LIMIT_CONFIGS.admin.requests,\r\n      RATE_LIMIT_CONFIGS.admin.window,\r\n      'admin-order-detail'\r\n    );\r\n\r\n    if (!rateLimitResult.success) {\r\n      const response = NextResponse.json(\r\n        { error: 'Demasiadas solicitudes' },\r\n        { status: 429 }\r\n      );\r\n      addRateLimitHeaders(response, rateLimitResult);\r\n      return response;\r\n    }\r\n\r\n    // Validar autenticaci\xF3n admin\r\n    const authResult = await validateAdminAuth();\r\n    if ('error' in authResult) {\r\n      return NextResponse.json(\r\n        { error: authResult.error },\r\n        { status: authResult.status }\r\n      );\r\n    }\r\n\r\n    const orderId = params.id;\r\n\r\n    // Obtener orden con todos los detalles\r\n    const { data: order, error } = await supabaseAdmin\r\n      .from('orders')\r\n      .select(`\r\n        *,\r\n        user_profiles!orders_user_id_fkey (\r\n          id,\r\n          name,\r\n          email,\r\n          phone\r\n        ),\r\n        order_items (\r\n          id,\r\n          quantity,\r\n          unit_price,\r\n          total_price,\r\n          products (\r\n            id,\r\n            name,\r\n            images,\r\n            sku,\r\n            category\r\n          )\r\n        )\r\n      `)\r\n      .eq('id', orderId)\r\n      .single();\r\n\r\n    if (error) {\r\n      if (error.code === 'PGRST116') {\r\n        return NextResponse.json(\r\n          { error: 'Orden no encontrada' },\r\n          { status: 404 }\r\n        );\r\n      }\r\n      \r\n      logger.log(LogLevel.ERROR, LogCategory.DATABASE, 'Error al obtener orden', { error, orderId });\r\n      return NextResponse.json(\r\n        { error: 'Error al obtener orden' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Obtener historial de estados si existe la tabla\r\n    let statusHistory = [];\r\n    try {\r\n      const { data: history } = await supabaseAdmin\r\n        .from('order_status_history')\r\n        .select(`\r\n          id,\r\n          previous_status,\r\n          new_status,\r\n          reason,\r\n          created_at,\r\n          user_profiles!order_status_history_changed_by_fkey (\r\n            name,\r\n            email\r\n          )\r\n        `)\r\n        .eq('order_id', orderId)\r\n        .order('created_at', { ascending: false });\r\n      \r\n      statusHistory = history || [];\r\n    } catch (historyError) {\r\n      // Si la tabla no existe, continuar sin historial\r\n      logger.log(LogLevel.WARN, LogCategory.DATABASE, 'Tabla order_status_history no existe', { historyError });\r\n    }\r\n\r\n    // Obtener notas si existe la tabla\r\n    let orderNotes = [];\r\n    try {\r\n      const { data: notes } = await supabaseAdmin\r\n        .from('order_notes')\r\n        .select(`\r\n          id,\r\n          note_type,\r\n          content,\r\n          is_visible_to_customer,\r\n          created_at,\r\n          user_profiles!order_notes_admin_id_fkey (\r\n            name,\r\n            email\r\n          )\r\n        `)\r\n        .eq('order_id', orderId)\r\n        .order('created_at', { ascending: false });\r\n      \r\n      orderNotes = notes || [];\r\n    } catch (notesError) {\r\n      // Si la tabla no existe, continuar sin notas\r\n      logger.log(LogLevel.WARN, LogCategory.DATABASE, 'Tabla order_notes no existe', { notesError });\r\n    }\r\n\r\n    // M\xE9tricas de performance\r\n    const responseTime = Date.now() - startTime;\r\n    await MetricsCollector.getInstance().recordRequest('admin-order-detail', 'GET', 200, responseTime);\r\n\r\n    const response: ApiResponse<{\r\n      order: typeof order;\r\n      statusHistory: typeof statusHistory;\r\n      notes: typeof orderNotes;\r\n    }> = {\r\n      data: {\r\n        order,\r\n        statusHistory,\r\n        notes: orderNotes,\r\n      },\r\n      success: true,\r\n      error: null,\r\n    };\r\n\r\n    const nextResponse = NextResponse.json(response);\r\n    addRateLimitHeaders(nextResponse, rateLimitResult);\r\n\r\n    logger.log(LogLevel.INFO, LogCategory.API, 'Orden obtenida exitosamente', {\r\n      orderId,\r\n      responseTime,\r\n    });\r\n\r\n    return nextResponse;\r\n\r\n  } catch (error) {\r\n    const responseTime = Date.now() - startTime;\r\n    await MetricsCollector.getInstance().recordRequest('admin-order-detail', 'GET', 500, responseTime);\r\n    \r\n    logger.log(LogLevel.ERROR, LogCategory.API, 'Error en GET /api/admin/orders/[id]', { error, orderId: params.id });\r\n    \r\n    return NextResponse.json(\r\n      { error: 'Error interno del servidor' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// ===================================\r\n// PATCH - Actualizar orden\r\n// ===================================\r\nexport async function PATCH(\r\n  request: NextRequest,\r\n  { params }: { params: { id: string } }\r\n) {\r\n  const startTime = Date.now();\r\n  \r\n  try {\r\n    // Rate limiting\r\n    const rateLimitResult = await checkRateLimit(\r\n      request,\r\n      RATE_LIMIT_CONFIGS.admin.requests,\r\n      RATE_LIMIT_CONFIGS.admin.window,\r\n      'admin-order-update'\r\n    );\r\n\r\n    if (!rateLimitResult.success) {\r\n      const response = NextResponse.json(\r\n        { error: 'Demasiadas solicitudes' },\r\n        { status: 429 }\r\n      );\r\n      addRateLimitHeaders(response, rateLimitResult);\r\n      return response;\r\n    }\r\n\r\n    // Validar autenticaci\xF3n admin\r\n    const authResult = await validateAdminAuth();\r\n    if ('error' in authResult) {\r\n      return NextResponse.json(\r\n        { error: authResult.error },\r\n        { status: authResult.status }\r\n      );\r\n    }\r\n\r\n    const orderId = params.id;\r\n\r\n    // Validar datos de entrada\r\n    const body = await request.json();\r\n    const validationResult = UpdateOrderSchema.safeParse(body);\r\n\r\n    if (!validationResult.success) {\r\n      return NextResponse.json(\r\n        { error: 'Datos de actualizaci\xF3n inv\xE1lidos', details: validationResult.error.errors },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const updateData = validationResult.data;\r\n\r\n    // Obtener orden actual para validar transiciones\r\n    const { data: currentOrder, error: fetchError } = await supabaseAdmin\r\n      .from('orders')\r\n      .select('id, status, payment_status')\r\n      .eq('id', orderId)\r\n      .single();\r\n\r\n    if (fetchError) {\r\n      if (fetchError.code === 'PGRST116') {\r\n        return NextResponse.json(\r\n          { error: 'Orden no encontrada' },\r\n          { status: 404 }\r\n        );\r\n      }\r\n      \r\n      logger.log(LogLevel.ERROR, LogCategory.DATABASE, 'Error al obtener orden actual', { fetchError, orderId });\r\n      return NextResponse.json(\r\n        { error: 'Error al obtener orden' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Validar transici\xF3n de estado si se est\xE1 cambiando\r\n    if (updateData.status && !validateStateTransition(currentOrder.status, updateData.status)) {\r\n      return NextResponse.json(\r\n        { error: `Transici\xF3n de estado inv\xE1lida: ${currentOrder.status} \u2192 ${updateData.status}` },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Preparar datos de actualizaci\xF3n\r\n    const updatePayload: any = {\r\n      ...updateData,\r\n      updated_at: new Date().toISOString(),\r\n    };\r\n\r\n    // Convertir shipping_address a JSON si se proporciona\r\n    if (updateData.shipping_address) {\r\n      updatePayload.shipping_address = JSON.stringify(updateData.shipping_address);\r\n    }\r\n\r\n    // Actualizar orden\r\n    const { data: updatedOrder, error: updateError } = await supabaseAdmin\r\n      .from('orders')\r\n      .update(updatePayload)\r\n      .eq('id', orderId)\r\n      .select()\r\n      .single();\r\n\r\n    if (updateError) {\r\n      logger.log(LogLevel.ERROR, LogCategory.DATABASE, 'Error al actualizar orden', { updateError, orderId });\r\n      return NextResponse.json(\r\n        { error: 'Error al actualizar orden' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Registrar cambio de estado en historial si cambi\xF3 el status\r\n    if (updateData.status && updateData.status !== currentOrder.status) {\r\n      try {\r\n        await supabaseAdmin\r\n          .from('order_status_history')\r\n          .insert({\r\n            order_id: orderId,\r\n            previous_status: currentOrder.status,\r\n            new_status: updateData.status,\r\n            changed_by: authResult.user.id,\r\n            reason: `Cambio manual por administrador`,\r\n          });\r\n      } catch (historyError) {\r\n        // Si la tabla no existe, continuar sin registrar historial\r\n        logger.log(LogLevel.WARN, LogCategory.DATABASE, 'No se pudo registrar historial de estado', { historyError });\r\n      }\r\n    }\r\n\r\n    // M\xE9tricas de performance\r\n    const responseTime = Date.now() - startTime;\r\n    await MetricsCollector.getInstance().recordRequest('admin-order-update', 'PATCH', 200, responseTime);\r\n\r\n    const response: ApiResponse<typeof updatedOrder> = {\r\n      data: updatedOrder,\r\n      success: true,\r\n      error: null,\r\n    };\r\n\r\n    const nextResponse = NextResponse.json(response);\r\n    addRateLimitHeaders(nextResponse, rateLimitResult);\r\n\r\n    logger.log(LogLevel.INFO, LogCategory.API, 'Orden actualizada exitosamente', {\r\n      orderId,\r\n      changes: updateData,\r\n      responseTime,\r\n    });\r\n\r\n    return nextResponse;\r\n\r\n  } catch (error) {\r\n    const responseTime = Date.now() - startTime;\r\n    await MetricsCollector.getInstance().recordRequest('admin-order-update', 'PATCH', 500, responseTime);\r\n    \r\n    logger.log(LogLevel.ERROR, LogCategory.API, 'Error en PATCH /api/admin/orders/[id]', { error, orderId: params.id });\r\n    \r\n    return NextResponse.json(\r\n      { error: 'Error interno del servidor' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],
      names: ["GET", "PATCH", "UpdateOrderSchema", "z", "object", "status", "enum", "optional", "payment_status", "notes", "string", "tracking_number", "carrier", "shipping_address", "street_name", "min", "street_number", "zip_code", "city_name", "state_name", "validateAdminAuth", "session", "auth", "user", "error", "isAdmin", "email", "userId", "id", "logger", "log", "LogLevel", "ERROR", "LogCategory", "AUTH", "stateTransitions", "pending", "confirmed", "processing", "shipped", "delivered", "cancelled", "refunded", "returned", "validateStateTransition", "currentStatus", "newStatus", "includes", "request", "params", "startTime", "Date", "now", "rateLimitResult", "checkRateLimit", "RATE_LIMIT_CONFIGS", "admin", "requests", "window", "success", "response", "NextResponse", "json", "addRateLimitHeaders", "authResult", "orderId", "data", "order", "supabaseAdmin", "from", "select", "eq", "single", "code", "DATABASE", "statusHistory", "history", "ascending", "historyError", "WARN", "orderNotes", "notesError", "responseTime", "MetricsCollector", "getInstance", "recordRequest", "nextResponse", "INFO", "API", "body", "validationResult", "safeParse", "details", "errors", "updateData", "currentOrder", "fetchError", "updatePayload", "updated_at", "toISOString", "JSON", "stringify", "updatedOrder", "updateError", "update", "insert", "order_id", "previous_status", "new_status", "changed_by", "reason", "changes"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "781af1d08b9099b90e6f7bce8fbd86e35afc9241"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1w0pf939zm = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1w0pf939zm();
cov_1w0pf939zm().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1w0pf939zm().f[0]++;
  cov_1w0pf939zm().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1w0pf939zm().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1w0pf939zm().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_1w0pf939zm().f[1]++;
    cov_1w0pf939zm().s[4]++;
    return GET;
  },
  get PATCH() {
    /* istanbul ignore next */
    cov_1w0pf939zm().f[2]++;
    cov_1w0pf939zm().s[5]++;
    return PATCH;
  }
});
const _server =
/* istanbul ignore next */
(cov_1w0pf939zm().s[6]++, require("next/server"));
const _supabase =
/* istanbul ignore next */
(cov_1w0pf939zm().s[7]++, require("../../../../../lib/integrations/supabase"));
const _auth =
/* istanbul ignore next */
(cov_1w0pf939zm().s[8]++, require("../../../../../auth"));
const _zod =
/* istanbul ignore next */
(cov_1w0pf939zm().s[9]++, require("zod"));
const _logger =
/* istanbul ignore next */
(cov_1w0pf939zm().s[10]++, require("../../../../../lib/enterprise/logger"));
const _ratelimiting =
/* istanbul ignore next */
(cov_1w0pf939zm().s[11]++, require("../../../../../lib/auth/rate-limiting"));
const _ratelimiter =
/* istanbul ignore next */
(cov_1w0pf939zm().s[12]++, require("../../../../../lib/enterprise/rate-limiter"));
const _metrics =
/* istanbul ignore next */
(cov_1w0pf939zm().s[13]++, require("../../../../../lib/enterprise/metrics"));
// ===================================
// SCHEMAS DE VALIDACIÓN
// ===================================
const UpdateOrderSchema =
/* istanbul ignore next */
(cov_1w0pf939zm().s[14]++, _zod.z.object({
  status: _zod.z.enum(['pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded']).optional(),
  payment_status: _zod.z.enum(['pending', 'paid', 'failed', 'refunded']).optional(),
  notes: _zod.z.string().optional(),
  tracking_number: _zod.z.string().optional(),
  carrier: _zod.z.string().optional(),
  shipping_address: _zod.z.object({
    street_name: _zod.z.string().min(1),
    street_number: _zod.z.string().min(1),
    zip_code: _zod.z.string().min(1),
    city_name: _zod.z.string().min(1),
    state_name: _zod.z.string().min(1)
  }).optional()
}));
// ===================================
// MIDDLEWARE DE AUTENTICACIÓN ADMIN
// ===================================
async function validateAdminAuth() {
  /* istanbul ignore next */
  cov_1w0pf939zm().f[3]++;
  cov_1w0pf939zm().s[15]++;
  try {
    const session =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[16]++, await (0, _auth.auth)());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[17]++;
    if (!session?.user) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[0][0]++;
      cov_1w0pf939zm().s[18]++;
      return {
        error: 'Usuario no autenticado',
        status: 401
      };
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[0][1]++;
    }
    // Verificar si es admin
    const isAdmin =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[19]++, session.user.email === 'santiago@xor.com.ar');
    /* istanbul ignore next */
    cov_1w0pf939zm().s[20]++;
    if (!isAdmin) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[1][0]++;
      cov_1w0pf939zm().s[21]++;
      return {
        error: 'Acceso denegado - Se requieren permisos de administrador',
        status: 403
      };
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[1][1]++;
    }
    cov_1w0pf939zm().s[22]++;
    return {
      user: session.user,
      userId: session.user.id
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_1w0pf939zm().s[23]++;
    _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.AUTH, 'Error en validación admin', {
      error
    });
    /* istanbul ignore next */
    cov_1w0pf939zm().s[24]++;
    return {
      error: 'Error de autenticación',
      status: 500
    };
  }
}
// ===================================
// VALIDACIONES DE TRANSICIÓN DE ESTADOS
// ===================================
const stateTransitions =
/* istanbul ignore next */
(cov_1w0pf939zm().s[25]++, {
  pending: ['confirmed', 'cancelled'],
  confirmed: ['processing', 'cancelled'],
  processing: ['shipped', 'cancelled'],
  shipped: ['delivered', 'returned'],
  delivered: ['returned'],
  cancelled: [],
  refunded: [],
  returned: ['refunded']
});
function validateStateTransition(currentStatus, newStatus) {
  /* istanbul ignore next */
  cov_1w0pf939zm().f[4]++;
  cov_1w0pf939zm().s[26]++;
  if (currentStatus === newStatus) {
    /* istanbul ignore next */
    cov_1w0pf939zm().b[2][0]++;
    cov_1w0pf939zm().s[27]++;
    return true;
  } else
  /* istanbul ignore next */
  {
    cov_1w0pf939zm().b[2][1]++;
  }
  cov_1w0pf939zm().s[28]++;
  return /* istanbul ignore next */(cov_1w0pf939zm().b[3][0]++, stateTransitions[currentStatus]?.includes(newStatus)) ||
  /* istanbul ignore next */
  (cov_1w0pf939zm().b[3][1]++, false);
}
async function GET(request, {
  params
}) {
  /* istanbul ignore next */
  cov_1w0pf939zm().f[5]++;
  const startTime =
  /* istanbul ignore next */
  (cov_1w0pf939zm().s[29]++, Date.now());
  /* istanbul ignore next */
  cov_1w0pf939zm().s[30]++;
  try {
    // Rate limiting
    const rateLimitResult =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[31]++, await (0, _ratelimiting.checkRateLimit)(request, _ratelimiter.RATE_LIMIT_CONFIGS.admin.requests, _ratelimiter.RATE_LIMIT_CONFIGS.admin.window, 'admin-order-detail'));
    /* istanbul ignore next */
    cov_1w0pf939zm().s[32]++;
    if (!rateLimitResult.success) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[4][0]++;
      const response =
      /* istanbul ignore next */
      (cov_1w0pf939zm().s[33]++, _server.NextResponse.json({
        error: 'Demasiadas solicitudes'
      }, {
        status: 429
      }));
      /* istanbul ignore next */
      cov_1w0pf939zm().s[34]++;
      (0, _ratelimiter.addRateLimitHeaders)(response, rateLimitResult);
      /* istanbul ignore next */
      cov_1w0pf939zm().s[35]++;
      return response;
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[4][1]++;
    }
    // Validar autenticación admin
    const authResult =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[36]++, await validateAdminAuth());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[37]++;
    if ('error' in authResult) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[5][0]++;
      cov_1w0pf939zm().s[38]++;
      return _server.NextResponse.json({
        error: authResult.error
      }, {
        status: authResult.status
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[5][1]++;
    }
    const orderId =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[39]++, params.id);
    // Obtener orden con todos los detalles
    const {
      data: order,
      error
    } =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[40]++, await _supabase.supabaseAdmin.from('orders').select(`
        *,
        user_profiles!orders_user_id_fkey (
          id,
          name,
          email,
          phone
        ),
        order_items (
          id,
          quantity,
          unit_price,
          total_price,
          products (
            id,
            name,
            images,
            sku,
            category
          )
        )
      `).eq('id', orderId).single());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[41]++;
    if (error) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[6][0]++;
      cov_1w0pf939zm().s[42]++;
      if (error.code === 'PGRST116') {
        /* istanbul ignore next */
        cov_1w0pf939zm().b[7][0]++;
        cov_1w0pf939zm().s[43]++;
        return _server.NextResponse.json({
          error: 'Orden no encontrada'
        }, {
          status: 404
        });
      } else
      /* istanbul ignore next */
      {
        cov_1w0pf939zm().b[7][1]++;
      }
      cov_1w0pf939zm().s[44]++;
      _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.DATABASE, 'Error al obtener orden', {
        error,
        orderId
      });
      /* istanbul ignore next */
      cov_1w0pf939zm().s[45]++;
      return _server.NextResponse.json({
        error: 'Error al obtener orden'
      }, {
        status: 500
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[6][1]++;
    }
    // Obtener historial de estados si existe la tabla
    let statusHistory =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[46]++, []);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[47]++;
    try {
      const {
        data: history
      } =
      /* istanbul ignore next */
      (cov_1w0pf939zm().s[48]++, await _supabase.supabaseAdmin.from('order_status_history').select(`
          id,
          previous_status,
          new_status,
          reason,
          created_at,
          user_profiles!order_status_history_changed_by_fkey (
            name,
            email
          )
        `).eq('order_id', orderId).order('created_at', {
        ascending: false
      }));
      /* istanbul ignore next */
      cov_1w0pf939zm().s[49]++;
      statusHistory =
      /* istanbul ignore next */
      (cov_1w0pf939zm().b[8][0]++, history) ||
      /* istanbul ignore next */
      (cov_1w0pf939zm().b[8][1]++, []);
    } catch (historyError) {
      /* istanbul ignore next */
      cov_1w0pf939zm().s[50]++;
      // Si la tabla no existe, continuar sin historial
      _logger.logger.log(_logger.LogLevel.WARN, _logger.LogCategory.DATABASE, 'Tabla order_status_history no existe', {
        historyError
      });
    }
    // Obtener notas si existe la tabla
    let orderNotes =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[51]++, []);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[52]++;
    try {
      const {
        data: notes
      } =
      /* istanbul ignore next */
      (cov_1w0pf939zm().s[53]++, await _supabase.supabaseAdmin.from('order_notes').select(`
          id,
          note_type,
          content,
          is_visible_to_customer,
          created_at,
          user_profiles!order_notes_admin_id_fkey (
            name,
            email
          )
        `).eq('order_id', orderId).order('created_at', {
        ascending: false
      }));
      /* istanbul ignore next */
      cov_1w0pf939zm().s[54]++;
      orderNotes =
      /* istanbul ignore next */
      (cov_1w0pf939zm().b[9][0]++, notes) ||
      /* istanbul ignore next */
      (cov_1w0pf939zm().b[9][1]++, []);
    } catch (notesError) {
      /* istanbul ignore next */
      cov_1w0pf939zm().s[55]++;
      // Si la tabla no existe, continuar sin notas
      _logger.logger.log(_logger.LogLevel.WARN, _logger.LogCategory.DATABASE, 'Tabla order_notes no existe', {
        notesError
      });
    }
    // Métricas de performance
    const responseTime =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[56]++, Date.now() - startTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[57]++;
    await _metrics.MetricsCollector.getInstance().recordRequest('admin-order-detail', 'GET', 200, responseTime);
    const response =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[58]++, {
      data: {
        order,
        statusHistory,
        notes: orderNotes
      },
      success: true,
      error: null
    });
    const nextResponse =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[59]++, _server.NextResponse.json(response));
    /* istanbul ignore next */
    cov_1w0pf939zm().s[60]++;
    (0, _ratelimiter.addRateLimitHeaders)(nextResponse, rateLimitResult);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[61]++;
    _logger.logger.log(_logger.LogLevel.INFO, _logger.LogCategory.API, 'Orden obtenida exitosamente', {
      orderId,
      responseTime
    });
    /* istanbul ignore next */
    cov_1w0pf939zm().s[62]++;
    return nextResponse;
  } catch (error) {
    const responseTime =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[63]++, Date.now() - startTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[64]++;
    await _metrics.MetricsCollector.getInstance().recordRequest('admin-order-detail', 'GET', 500, responseTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[65]++;
    _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.API, 'Error en GET /api/admin/orders/[id]', {
      error,
      orderId: params.id
    });
    /* istanbul ignore next */
    cov_1w0pf939zm().s[66]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor'
    }, {
      status: 500
    });
  }
}
async function PATCH(request, {
  params
}) {
  /* istanbul ignore next */
  cov_1w0pf939zm().f[6]++;
  const startTime =
  /* istanbul ignore next */
  (cov_1w0pf939zm().s[67]++, Date.now());
  /* istanbul ignore next */
  cov_1w0pf939zm().s[68]++;
  try {
    // Rate limiting
    const rateLimitResult =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[69]++, await (0, _ratelimiting.checkRateLimit)(request, _ratelimiter.RATE_LIMIT_CONFIGS.admin.requests, _ratelimiter.RATE_LIMIT_CONFIGS.admin.window, 'admin-order-update'));
    /* istanbul ignore next */
    cov_1w0pf939zm().s[70]++;
    if (!rateLimitResult.success) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[10][0]++;
      const response =
      /* istanbul ignore next */
      (cov_1w0pf939zm().s[71]++, _server.NextResponse.json({
        error: 'Demasiadas solicitudes'
      }, {
        status: 429
      }));
      /* istanbul ignore next */
      cov_1w0pf939zm().s[72]++;
      (0, _ratelimiter.addRateLimitHeaders)(response, rateLimitResult);
      /* istanbul ignore next */
      cov_1w0pf939zm().s[73]++;
      return response;
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[10][1]++;
    }
    // Validar autenticación admin
    const authResult =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[74]++, await validateAdminAuth());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[75]++;
    if ('error' in authResult) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[11][0]++;
      cov_1w0pf939zm().s[76]++;
      return _server.NextResponse.json({
        error: authResult.error
      }, {
        status: authResult.status
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[11][1]++;
    }
    const orderId =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[77]++, params.id);
    // Validar datos de entrada
    const body =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[78]++, await request.json());
    const validationResult =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[79]++, UpdateOrderSchema.safeParse(body));
    /* istanbul ignore next */
    cov_1w0pf939zm().s[80]++;
    if (!validationResult.success) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[12][0]++;
      cov_1w0pf939zm().s[81]++;
      return _server.NextResponse.json({
        error: 'Datos de actualización inválidos',
        details: validationResult.error.errors
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[12][1]++;
    }
    const updateData =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[82]++, validationResult.data);
    // Obtener orden actual para validar transiciones
    const {
      data: currentOrder,
      error: fetchError
    } =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[83]++, await _supabase.supabaseAdmin.from('orders').select('id, status, payment_status').eq('id', orderId).single());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[84]++;
    if (fetchError) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[13][0]++;
      cov_1w0pf939zm().s[85]++;
      if (fetchError.code === 'PGRST116') {
        /* istanbul ignore next */
        cov_1w0pf939zm().b[14][0]++;
        cov_1w0pf939zm().s[86]++;
        return _server.NextResponse.json({
          error: 'Orden no encontrada'
        }, {
          status: 404
        });
      } else
      /* istanbul ignore next */
      {
        cov_1w0pf939zm().b[14][1]++;
      }
      cov_1w0pf939zm().s[87]++;
      _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.DATABASE, 'Error al obtener orden actual', {
        fetchError,
        orderId
      });
      /* istanbul ignore next */
      cov_1w0pf939zm().s[88]++;
      return _server.NextResponse.json({
        error: 'Error al obtener orden'
      }, {
        status: 500
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[13][1]++;
    }
    // Validar transición de estado si se está cambiando
    cov_1w0pf939zm().s[89]++;
    if (
    /* istanbul ignore next */
    (cov_1w0pf939zm().b[16][0]++, updateData.status) &&
    /* istanbul ignore next */
    (cov_1w0pf939zm().b[16][1]++, !validateStateTransition(currentOrder.status, updateData.status))) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[15][0]++;
      cov_1w0pf939zm().s[90]++;
      return _server.NextResponse.json({
        error: `Transición de estado inválida: ${currentOrder.status} → ${updateData.status}`
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[15][1]++;
    }
    // Preparar datos de actualización
    const updatePayload =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[91]++, {
      ...updateData,
      updated_at: new Date().toISOString()
    });
    // Convertir shipping_address a JSON si se proporciona
    /* istanbul ignore next */
    cov_1w0pf939zm().s[92]++;
    if (updateData.shipping_address) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[17][0]++;
      cov_1w0pf939zm().s[93]++;
      updatePayload.shipping_address = JSON.stringify(updateData.shipping_address);
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[17][1]++;
    }
    // Actualizar orden
    const {
      data: updatedOrder,
      error: updateError
    } =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[94]++, await _supabase.supabaseAdmin.from('orders').update(updatePayload).eq('id', orderId).select().single());
    /* istanbul ignore next */
    cov_1w0pf939zm().s[95]++;
    if (updateError) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[18][0]++;
      cov_1w0pf939zm().s[96]++;
      _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.DATABASE, 'Error al actualizar orden', {
        updateError,
        orderId
      });
      /* istanbul ignore next */
      cov_1w0pf939zm().s[97]++;
      return _server.NextResponse.json({
        error: 'Error al actualizar orden'
      }, {
        status: 500
      });
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[18][1]++;
    }
    // Registrar cambio de estado en historial si cambió el status
    cov_1w0pf939zm().s[98]++;
    if (
    /* istanbul ignore next */
    (cov_1w0pf939zm().b[20][0]++, updateData.status) &&
    /* istanbul ignore next */
    (cov_1w0pf939zm().b[20][1]++, updateData.status !== currentOrder.status)) {
      /* istanbul ignore next */
      cov_1w0pf939zm().b[19][0]++;
      cov_1w0pf939zm().s[99]++;
      try {
        /* istanbul ignore next */
        cov_1w0pf939zm().s[100]++;
        await _supabase.supabaseAdmin.from('order_status_history').insert({
          order_id: orderId,
          previous_status: currentOrder.status,
          new_status: updateData.status,
          changed_by: authResult.user.id,
          reason: `Cambio manual por administrador`
        });
      } catch (historyError) {
        /* istanbul ignore next */
        cov_1w0pf939zm().s[101]++;
        // Si la tabla no existe, continuar sin registrar historial
        _logger.logger.log(_logger.LogLevel.WARN, _logger.LogCategory.DATABASE, 'No se pudo registrar historial de estado', {
          historyError
        });
      }
    } else
    /* istanbul ignore next */
    {
      cov_1w0pf939zm().b[19][1]++;
    }
    // Métricas de performance
    const responseTime =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[102]++, Date.now() - startTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[103]++;
    await _metrics.MetricsCollector.getInstance().recordRequest('admin-order-update', 'PATCH', 200, responseTime);
    const response =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[104]++, {
      data: updatedOrder,
      success: true,
      error: null
    });
    const nextResponse =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[105]++, _server.NextResponse.json(response));
    /* istanbul ignore next */
    cov_1w0pf939zm().s[106]++;
    (0, _ratelimiter.addRateLimitHeaders)(nextResponse, rateLimitResult);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[107]++;
    _logger.logger.log(_logger.LogLevel.INFO, _logger.LogCategory.API, 'Orden actualizada exitosamente', {
      orderId,
      changes: updateData,
      responseTime
    });
    /* istanbul ignore next */
    cov_1w0pf939zm().s[108]++;
    return nextResponse;
  } catch (error) {
    const responseTime =
    /* istanbul ignore next */
    (cov_1w0pf939zm().s[109]++, Date.now() - startTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[110]++;
    await _metrics.MetricsCollector.getInstance().recordRequest('admin-order-update', 'PATCH', 500, responseTime);
    /* istanbul ignore next */
    cov_1w0pf939zm().s[111]++;
    _logger.logger.log(_logger.LogLevel.ERROR, _logger.LogCategory.API, 'Error en PATCH /api/admin/orders/[id]', {
      error,
      orderId: params.id
    });
    /* istanbul ignore next */
    cov_1w0pf939zm().s[112]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor'
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJjb3ZfMXcwcGY5Mzl6bSIsImYiLCJzIiwiUEFUQ0giLCJVcGRhdGVPcmRlclNjaGVtYSIsIl96b2QiLCJ6Iiwib2JqZWN0Iiwic3RhdHVzIiwiZW51bSIsIm9wdGlvbmFsIiwicGF5bWVudF9zdGF0dXMiLCJub3RlcyIsInN0cmluZyIsInRyYWNraW5nX251bWJlciIsImNhcnJpZXIiLCJzaGlwcGluZ19hZGRyZXNzIiwic3RyZWV0X25hbWUiLCJtaW4iLCJzdHJlZXRfbnVtYmVyIiwiemlwX2NvZGUiLCJjaXR5X25hbWUiLCJzdGF0ZV9uYW1lIiwidmFsaWRhdGVBZG1pbkF1dGgiLCJzZXNzaW9uIiwiX2F1dGgiLCJhdXRoIiwidXNlciIsImIiLCJlcnJvciIsImlzQWRtaW4iLCJlbWFpbCIsInVzZXJJZCIsImlkIiwiX2xvZ2dlciIsImxvZ2dlciIsImxvZyIsIkxvZ0xldmVsIiwiRVJST1IiLCJMb2dDYXRlZ29yeSIsIkFVVEgiLCJzdGF0ZVRyYW5zaXRpb25zIiwicGVuZGluZyIsImNvbmZpcm1lZCIsInByb2Nlc3NpbmciLCJzaGlwcGVkIiwiZGVsaXZlcmVkIiwiY2FuY2VsbGVkIiwicmVmdW5kZWQiLCJyZXR1cm5lZCIsInZhbGlkYXRlU3RhdGVUcmFuc2l0aW9uIiwiY3VycmVudFN0YXR1cyIsIm5ld1N0YXR1cyIsImluY2x1ZGVzIiwicmVxdWVzdCIsInBhcmFtcyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyYXRlTGltaXRSZXN1bHQiLCJfcmF0ZWxpbWl0aW5nIiwiY2hlY2tSYXRlTGltaXQiLCJfcmF0ZWxpbWl0ZXIiLCJSQVRFX0xJTUlUX0NPTkZJR1MiLCJhZG1pbiIsInJlcXVlc3RzIiwid2luZG93Iiwic3VjY2VzcyIsInJlc3BvbnNlIiwiX3NlcnZlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJhZGRSYXRlTGltaXRIZWFkZXJzIiwiYXV0aFJlc3VsdCIsIm9yZGVySWQiLCJkYXRhIiwib3JkZXIiLCJfc3VwYWJhc2UiLCJzdXBhYmFzZUFkbWluIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY29kZSIsIkRBVEFCQVNFIiwic3RhdHVzSGlzdG9yeSIsImhpc3RvcnkiLCJhc2NlbmRpbmciLCJoaXN0b3J5RXJyb3IiLCJXQVJOIiwib3JkZXJOb3RlcyIsIm5vdGVzRXJyb3IiLCJyZXNwb25zZVRpbWUiLCJfbWV0cmljcyIsIk1ldHJpY3NDb2xsZWN0b3IiLCJnZXRJbnN0YW5jZSIsInJlY29yZFJlcXVlc3QiLCJuZXh0UmVzcG9uc2UiLCJJTkZPIiwiQVBJIiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJzYWZlUGFyc2UiLCJkZXRhaWxzIiwiZXJyb3JzIiwidXBkYXRlRGF0YSIsImN1cnJlbnRPcmRlciIsImZldGNoRXJyb3IiLCJ1cGRhdGVQYXlsb2FkIiwidXBkYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZWRPcmRlciIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwiaW5zZXJ0Iiwib3JkZXJfaWQiLCJwcmV2aW91c19zdGF0dXMiLCJuZXdfc3RhdHVzIiwiY2hhbmdlZF9ieSIsInJlYXNvbiIsImNoYW5nZXMiXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hcnRpXFxEZXNrdG9wXFxERVNBUlJPTExPU1dcXEJPSUxFUlBMQVRURSBFLUNPTU1FUkNFXFxzcmNcXGFwcFxcYXBpXFxhZG1pblxcb3JkZXJzXFxbaWRdXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBBRE1JTiBPUkRFUiBERVRBSUwgQVBJIEVOVEVSUFJJU0VcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9pbnRlZ3JhdGlvbnMvc3VwYWJhc2UnO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSAnQC9hdXRoJztcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzL2FwaSc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgeyBsb2dnZXIsIExvZ0xldmVsLCBMb2dDYXRlZ29yeSB9IGZyb20gJ0AvbGliL2VudGVycHJpc2UvbG9nZ2VyJztcclxuaW1wb3J0IHsgY2hlY2tSYXRlTGltaXQgfSBmcm9tICdAL2xpYi9hdXRoL3JhdGUtbGltaXRpbmcnO1xyXG5pbXBvcnQgeyBhZGRSYXRlTGltaXRIZWFkZXJzLCBSQVRFX0xJTUlUX0NPTkZJR1MgfSBmcm9tICdAL2xpYi9lbnRlcnByaXNlL3JhdGUtbGltaXRlcic7XHJcbmltcG9ydCB7IE1ldHJpY3NDb2xsZWN0b3IgfSBmcm9tICdAL2xpYi9lbnRlcnByaXNlL21ldHJpY3MnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0NIRU1BUyBERSBWQUxJREFDScOTTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgVXBkYXRlT3JkZXJTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgc3RhdHVzOiB6LmVudW0oWydwZW5kaW5nJywgJ2NvbmZpcm1lZCcsICdwcm9jZXNzaW5nJywgJ3NoaXBwZWQnLCAnZGVsaXZlcmVkJywgJ2NhbmNlbGxlZCcsICdyZWZ1bmRlZCddKS5vcHRpb25hbCgpLFxyXG4gIHBheW1lbnRfc3RhdHVzOiB6LmVudW0oWydwZW5kaW5nJywgJ3BhaWQnLCAnZmFpbGVkJywgJ3JlZnVuZGVkJ10pLm9wdGlvbmFsKCksXHJcbiAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICB0cmFja2luZ19udW1iZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBjYXJyaWVyOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc2hpcHBpbmdfYWRkcmVzczogei5vYmplY3Qoe1xyXG4gICAgc3RyZWV0X25hbWU6IHouc3RyaW5nKCkubWluKDEpLFxyXG4gICAgc3RyZWV0X251bWJlcjogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgICB6aXBfY29kZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgICBjaXR5X25hbWU6IHouc3RyaW5nKCkubWluKDEpLFxyXG4gICAgc3RhdGVfbmFtZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgfSkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNSURETEVXQVJFIERFIEFVVEVOVElDQUNJw5NOIEFETUlOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUFkbWluQXV0aCgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICByZXR1cm4geyBlcnJvcjogJ1VzdWFyaW8gbm8gYXV0ZW50aWNhZG8nLCBzdGF0dXM6IDQwMSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBzaSBlcyBhZG1pblxyXG4gICAgY29uc3QgaXNBZG1pbiA9IHNlc3Npb24udXNlci5lbWFpbCA9PT0gJ3NhbnRpYWdvQHhvci5jb20uYXInO1xyXG4gICAgaWYgKCFpc0FkbWluKSB7XHJcbiAgICAgIHJldHVybiB7IGVycm9yOiAnQWNjZXNvIGRlbmVnYWRvIC0gU2UgcmVxdWllcmVuIHBlcm1pc29zIGRlIGFkbWluaXN0cmFkb3InLCBzdGF0dXM6IDQwMyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHVzZXI6IHNlc3Npb24udXNlciwgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5FUlJPUiwgTG9nQ2F0ZWdvcnkuQVVUSCwgJ0Vycm9yIGVuIHZhbGlkYWNpw7NuIGFkbWluJywgeyBlcnJvciB9KTtcclxuICAgIHJldHVybiB7IGVycm9yOiAnRXJyb3IgZGUgYXV0ZW50aWNhY2nDs24nLCBzdGF0dXM6IDUwMCB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVkFMSURBQ0lPTkVTIERFIFRSQU5TSUNJw5NOIERFIEVTVEFET1NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNvbnN0IHN0YXRlVHJhbnNpdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcclxuICBwZW5kaW5nOiBbJ2NvbmZpcm1lZCcsICdjYW5jZWxsZWQnXSxcclxuICBjb25maXJtZWQ6IFsncHJvY2Vzc2luZycsICdjYW5jZWxsZWQnXSxcclxuICBwcm9jZXNzaW5nOiBbJ3NoaXBwZWQnLCAnY2FuY2VsbGVkJ10sXHJcbiAgc2hpcHBlZDogWydkZWxpdmVyZWQnLCAncmV0dXJuZWQnXSxcclxuICBkZWxpdmVyZWQ6IFsncmV0dXJuZWQnXSxcclxuICBjYW5jZWxsZWQ6IFtdLFxyXG4gIHJlZnVuZGVkOiBbXSxcclxuICByZXR1cm5lZDogWydyZWZ1bmRlZCddXHJcbn07XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZVN0YXRlVHJhbnNpdGlvbihjdXJyZW50U3RhdHVzOiBzdHJpbmcsIG5ld1N0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgaWYgKGN1cnJlbnRTdGF0dXMgPT09IG5ld1N0YXR1cykge3JldHVybiB0cnVlO31cclxuICByZXR1cm4gc3RhdGVUcmFuc2l0aW9uc1tjdXJyZW50U3RhdHVzXT8uaW5jbHVkZXMobmV3U3RhdHVzKSB8fCBmYWxzZTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0VUIC0gT2J0ZW5lciBvcmRlbiBlc3BlY8OtZmljYVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxyXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxyXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XHJcbikge1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIFJhdGUgbGltaXRpbmdcclxuICAgIGNvbnN0IHJhdGVMaW1pdFJlc3VsdCA9IGF3YWl0IGNoZWNrUmF0ZUxpbWl0KFxyXG4gICAgICByZXF1ZXN0LFxyXG4gICAgICBSQVRFX0xJTUlUX0NPTkZJR1MuYWRtaW4ucmVxdWVzdHMsXHJcbiAgICAgIFJBVEVfTElNSVRfQ09ORklHUy5hZG1pbi53aW5kb3csXHJcbiAgICAgICdhZG1pbi1vcmRlci1kZXRhaWwnXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghcmF0ZUxpbWl0UmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRGVtYXNpYWRhcyBzb2xpY2l0dWRlcycgfSxcclxuICAgICAgICB7IHN0YXR1czogNDI5IH1cclxuICAgICAgKTtcclxuICAgICAgYWRkUmF0ZUxpbWl0SGVhZGVycyhyZXNwb25zZSwgcmF0ZUxpbWl0UmVzdWx0KTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXIgYXV0ZW50aWNhY2nDs24gYWRtaW5cclxuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCB2YWxpZGF0ZUFkbWluQXV0aCgpO1xyXG4gICAgaWYgKCdlcnJvcicgaW4gYXV0aFJlc3VsdCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogYXV0aFJlc3VsdC5lcnJvciB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3JkZXJJZCA9IHBhcmFtcy5pZDtcclxuXHJcbiAgICAvLyBPYnRlbmVyIG9yZGVuIGNvbiB0b2RvcyBsb3MgZGV0YWxsZXNcclxuICAgIGNvbnN0IHsgZGF0YTogb3JkZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIHVzZXJfcHJvZmlsZXMhb3JkZXJzX3VzZXJfaWRfZmtleSAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHBob25lXHJcbiAgICAgICAgKSxcclxuICAgICAgICBvcmRlcl9pdGVtcyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIHF1YW50aXR5LFxyXG4gICAgICAgICAgdW5pdF9wcmljZSxcclxuICAgICAgICAgIHRvdGFsX3ByaWNlLFxyXG4gICAgICAgICAgcHJvZHVjdHMgKFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgaW1hZ2VzLFxyXG4gICAgICAgICAgICBza3UsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2lkJywgb3JkZXJJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdPcmRlbiBubyBlbmNvbnRyYWRhJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5FUlJPUiwgTG9nQ2F0ZWdvcnkuREFUQUJBU0UsICdFcnJvciBhbCBvYnRlbmVyIG9yZGVuJywgeyBlcnJvciwgb3JkZXJJZCB9KTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdFcnJvciBhbCBvYnRlbmVyIG9yZGVuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE9idGVuZXIgaGlzdG9yaWFsIGRlIGVzdGFkb3Mgc2kgZXhpc3RlIGxhIHRhYmxhXHJcbiAgICBsZXQgc3RhdHVzSGlzdG9yeSA9IFtdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBoaXN0b3J5IH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ29yZGVyX3N0YXR1c19oaXN0b3J5JylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgcHJldmlvdXNfc3RhdHVzLFxyXG4gICAgICAgICAgbmV3X3N0YXR1cyxcclxuICAgICAgICAgIHJlYXNvbixcclxuICAgICAgICAgIGNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICB1c2VyX3Byb2ZpbGVzIW9yZGVyX3N0YXR1c19oaXN0b3J5X2NoYW5nZWRfYnlfZmtleSAoXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgYClcclxuICAgICAgICAuZXEoJ29yZGVyX2lkJywgb3JkZXJJZClcclxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcbiAgICAgIFxyXG4gICAgICBzdGF0dXNIaXN0b3J5ID0gaGlzdG9yeSB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGhpc3RvcnlFcnJvcikge1xyXG4gICAgICAvLyBTaSBsYSB0YWJsYSBubyBleGlzdGUsIGNvbnRpbnVhciBzaW4gaGlzdG9yaWFsXHJcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWwuV0FSTiwgTG9nQ2F0ZWdvcnkuREFUQUJBU0UsICdUYWJsYSBvcmRlcl9zdGF0dXNfaGlzdG9yeSBubyBleGlzdGUnLCB7IGhpc3RvcnlFcnJvciB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPYnRlbmVyIG5vdGFzIHNpIGV4aXN0ZSBsYSB0YWJsYVxyXG4gICAgbGV0IG9yZGVyTm90ZXMgPSBbXTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogbm90ZXMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnb3JkZXJfbm90ZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBub3RlX3R5cGUsXHJcbiAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgaXNfdmlzaWJsZV90b19jdXN0b21lcixcclxuICAgICAgICAgIGNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICB1c2VyX3Byb2ZpbGVzIW9yZGVyX25vdGVzX2FkbWluX2lkX2ZrZXkgKFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBlbWFpbFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLmVxKCdvcmRlcl9pZCcsIG9yZGVySWQpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgICBcclxuICAgICAgb3JkZXJOb3RlcyA9IG5vdGVzIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAobm90ZXNFcnJvcikge1xyXG4gICAgICAvLyBTaSBsYSB0YWJsYSBubyBleGlzdGUsIGNvbnRpbnVhciBzaW4gbm90YXNcclxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5XQVJOLCBMb2dDYXRlZ29yeS5EQVRBQkFTRSwgJ1RhYmxhIG9yZGVyX25vdGVzIG5vIGV4aXN0ZScsIHsgbm90ZXNFcnJvciB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNw6l0cmljYXMgZGUgcGVyZm9ybWFuY2VcclxuICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBhd2FpdCBNZXRyaWNzQ29sbGVjdG9yLmdldEluc3RhbmNlKCkucmVjb3JkUmVxdWVzdCgnYWRtaW4tb3JkZXItZGV0YWlsJywgJ0dFVCcsIDIwMCwgcmVzcG9uc2VUaW1lKTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZTogQXBpUmVzcG9uc2U8e1xyXG4gICAgICBvcmRlcjogdHlwZW9mIG9yZGVyO1xyXG4gICAgICBzdGF0dXNIaXN0b3J5OiB0eXBlb2Ygc3RhdHVzSGlzdG9yeTtcclxuICAgICAgbm90ZXM6IHR5cGVvZiBvcmRlck5vdGVzO1xyXG4gICAgfT4gPSB7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBvcmRlcixcclxuICAgICAgICBzdGF0dXNIaXN0b3J5LFxyXG4gICAgICAgIG5vdGVzOiBvcmRlck5vdGVzLFxyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbmV4dFJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UpO1xyXG4gICAgYWRkUmF0ZUxpbWl0SGVhZGVycyhuZXh0UmVzcG9uc2UsIHJhdGVMaW1pdFJlc3VsdCk7XHJcblxyXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5JTkZPLCBMb2dDYXRlZ29yeS5BUEksICdPcmRlbiBvYnRlbmlkYSBleGl0b3NhbWVudGUnLCB7XHJcbiAgICAgIG9yZGVySWQsXHJcbiAgICAgIHJlc3BvbnNlVGltZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXh0UmVzcG9uc2U7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgYXdhaXQgTWV0cmljc0NvbGxlY3Rvci5nZXRJbnN0YW5jZSgpLnJlY29yZFJlcXVlc3QoJ2FkbWluLW9yZGVyLWRldGFpbCcsICdHRVQnLCA1MDAsIHJlc3BvbnNlVGltZSk7XHJcbiAgICBcclxuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWwuRVJST1IsIExvZ0NhdGVnb3J5LkFQSSwgJ0Vycm9yIGVuIEdFVCAvYXBpL2FkbWluL29yZGVycy9baWRdJywgeyBlcnJvciwgb3JkZXJJZDogcGFyYW1zLmlkIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUEFUQ0ggLSBBY3R1YWxpemFyIG9yZGVuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChcclxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcclxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxyXG4pIHtcclxuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBSYXRlIGxpbWl0aW5nXHJcbiAgICBjb25zdCByYXRlTGltaXRSZXN1bHQgPSBhd2FpdCBjaGVja1JhdGVMaW1pdChcclxuICAgICAgcmVxdWVzdCxcclxuICAgICAgUkFURV9MSU1JVF9DT05GSUdTLmFkbWluLnJlcXVlc3RzLFxyXG4gICAgICBSQVRFX0xJTUlUX0NPTkZJR1MuYWRtaW4ud2luZG93LFxyXG4gICAgICAnYWRtaW4tb3JkZXItdXBkYXRlJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXJhdGVMaW1pdFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0RlbWFzaWFkYXMgc29saWNpdHVkZXMnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyOSB9XHJcbiAgICAgICk7XHJcbiAgICAgIGFkZFJhdGVMaW1pdEhlYWRlcnMocmVzcG9uc2UsIHJhdGVMaW1pdFJlc3VsdCk7XHJcbiAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGFyIGF1dGVudGljYWNpw7NuIGFkbWluXHJcbiAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVBZG1pbkF1dGgoKTtcclxuICAgIGlmICgnZXJyb3InIGluIGF1dGhSZXN1bHQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGF1dGhSZXN1bHQuZXJyb3IgfSxcclxuICAgICAgICB7IHN0YXR1czogYXV0aFJlc3VsdC5zdGF0dXMgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9yZGVySWQgPSBwYXJhbXMuaWQ7XHJcblxyXG4gICAgLy8gVmFsaWRhciBkYXRvcyBkZSBlbnRyYWRhXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gVXBkYXRlT3JkZXJTY2hlbWEuc2FmZVBhcnNlKGJvZHkpO1xyXG5cclxuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRGF0b3MgZGUgYWN0dWFsaXphY2nDs24gaW52w6FsaWRvcycsIGRldGFpbHM6IHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuZXJyb3JzIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YTtcclxuXHJcbiAgICAvLyBPYnRlbmVyIG9yZGVuIGFjdHVhbCBwYXJhIHZhbGlkYXIgdHJhbnNpY2lvbmVzXHJcbiAgICBjb25zdCB7IGRhdGE6IGN1cnJlbnRPcmRlciwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCBzdGF0dXMsIHBheW1lbnRfc3RhdHVzJylcclxuICAgICAgLmVxKCdpZCcsIG9yZGVySWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvcikge1xyXG4gICAgICBpZiAoZmV0Y2hFcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ09yZGVuIG5vIGVuY29udHJhZGEnIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsLkVSUk9SLCBMb2dDYXRlZ29yeS5EQVRBQkFTRSwgJ0Vycm9yIGFsIG9idGVuZXIgb3JkZW4gYWN0dWFsJywgeyBmZXRjaEVycm9yLCBvcmRlcklkIH0pO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0Vycm9yIGFsIG9idGVuZXIgb3JkZW4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhciB0cmFuc2ljacOzbiBkZSBlc3RhZG8gc2kgc2UgZXN0w6EgY2FtYmlhbmRvXHJcbiAgICBpZiAodXBkYXRlRGF0YS5zdGF0dXMgJiYgIXZhbGlkYXRlU3RhdGVUcmFuc2l0aW9uKGN1cnJlbnRPcmRlci5zdGF0dXMsIHVwZGF0ZURhdGEuc3RhdHVzKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogYFRyYW5zaWNpw7NuIGRlIGVzdGFkbyBpbnbDoWxpZGE6ICR7Y3VycmVudE9yZGVyLnN0YXR1c30g4oaSICR7dXBkYXRlRGF0YS5zdGF0dXN9YCB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXBhcmFyIGRhdG9zIGRlIGFjdHVhbGl6YWNpw7NuXHJcbiAgICBjb25zdCB1cGRhdGVQYXlsb2FkOiBhbnkgPSB7XHJcbiAgICAgIC4uLnVwZGF0ZURhdGEsXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ29udmVydGlyIHNoaXBwaW5nX2FkZHJlc3MgYSBKU09OIHNpIHNlIHByb3BvcmNpb25hXHJcbiAgICBpZiAodXBkYXRlRGF0YS5zaGlwcGluZ19hZGRyZXNzKSB7XHJcbiAgICAgIHVwZGF0ZVBheWxvYWQuc2hpcHBpbmdfYWRkcmVzcyA9IEpTT04uc3RyaW5naWZ5KHVwZGF0ZURhdGEuc2hpcHBpbmdfYWRkcmVzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0dWFsaXphciBvcmRlblxyXG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkT3JkZXIsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnb3JkZXJzJylcclxuICAgICAgLnVwZGF0ZSh1cGRhdGVQYXlsb2FkKVxyXG4gICAgICAuZXEoJ2lkJywgb3JkZXJJZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5FUlJPUiwgTG9nQ2F0ZWdvcnkuREFUQUJBU0UsICdFcnJvciBhbCBhY3R1YWxpemFyIG9yZGVuJywgeyB1cGRhdGVFcnJvciwgb3JkZXJJZCB9KTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdFcnJvciBhbCBhY3R1YWxpemFyIG9yZGVuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlZ2lzdHJhciBjYW1iaW8gZGUgZXN0YWRvIGVuIGhpc3RvcmlhbCBzaSBjYW1iacOzIGVsIHN0YXR1c1xyXG4gICAgaWYgKHVwZGF0ZURhdGEuc3RhdHVzICYmIHVwZGF0ZURhdGEuc3RhdHVzICE9PSBjdXJyZW50T3JkZXIuc3RhdHVzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgLmZyb20oJ29yZGVyX3N0YXR1c19oaXN0b3J5JylcclxuICAgICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcclxuICAgICAgICAgICAgcHJldmlvdXNfc3RhdHVzOiBjdXJyZW50T3JkZXIuc3RhdHVzLFxyXG4gICAgICAgICAgICBuZXdfc3RhdHVzOiB1cGRhdGVEYXRhLnN0YXR1cyxcclxuICAgICAgICAgICAgY2hhbmdlZF9ieTogYXV0aFJlc3VsdC51c2VyLmlkLFxyXG4gICAgICAgICAgICByZWFzb246IGBDYW1iaW8gbWFudWFsIHBvciBhZG1pbmlzdHJhZG9yYCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChoaXN0b3J5RXJyb3IpIHtcclxuICAgICAgICAvLyBTaSBsYSB0YWJsYSBubyBleGlzdGUsIGNvbnRpbnVhciBzaW4gcmVnaXN0cmFyIGhpc3RvcmlhbFxyXG4gICAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWwuV0FSTiwgTG9nQ2F0ZWdvcnkuREFUQUJBU0UsICdObyBzZSBwdWRvIHJlZ2lzdHJhciBoaXN0b3JpYWwgZGUgZXN0YWRvJywgeyBoaXN0b3J5RXJyb3IgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNw6l0cmljYXMgZGUgcGVyZm9ybWFuY2VcclxuICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBhd2FpdCBNZXRyaWNzQ29sbGVjdG9yLmdldEluc3RhbmNlKCkucmVjb3JkUmVxdWVzdCgnYWRtaW4tb3JkZXItdXBkYXRlJywgJ1BBVENIJywgMjAwLCByZXNwb25zZVRpbWUpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZTx0eXBlb2YgdXBkYXRlZE9yZGVyPiA9IHtcclxuICAgICAgZGF0YTogdXBkYXRlZE9yZGVyLFxyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbmV4dFJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UpO1xyXG4gICAgYWRkUmF0ZUxpbWl0SGVhZGVycyhuZXh0UmVzcG9uc2UsIHJhdGVMaW1pdFJlc3VsdCk7XHJcblxyXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5JTkZPLCBMb2dDYXRlZ29yeS5BUEksICdPcmRlbiBhY3R1YWxpemFkYSBleGl0b3NhbWVudGUnLCB7XHJcbiAgICAgIG9yZGVySWQsXHJcbiAgICAgIGNoYW5nZXM6IHVwZGF0ZURhdGEsXHJcbiAgICAgIHJlc3BvbnNlVGltZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXh0UmVzcG9uc2U7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgYXdhaXQgTWV0cmljc0NvbGxlY3Rvci5nZXRJbnN0YW5jZSgpLnJlY29yZFJlcXVlc3QoJ2FkbWluLW9yZGVyLXVwZGF0ZScsICdQQVRDSCcsIDUwMCwgcmVzcG9uc2VUaW1lKTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbC5FUlJPUiwgTG9nQ2F0ZWdvcnkuQVBJLCAnRXJyb3IgZW4gUEFUQ0ggL2FwaS9hZG1pbi9vcmRlcnMvW2lkXScsIHsgZXJyb3IsIG9yZGVySWQ6IHBhcmFtcy5pZCB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQThFc0JBLElBQUE7SUFBQTtJQUFBQyxjQUFBLEdBQUFDLENBQUE7SUFBQUQsY0FBQSxHQUFBRSxDQUFBO1dBQUFILEdBQUE7O01BNEtBSSxNQUFBO0lBQUE7SUFBQUgsY0FBQSxHQUFBQyxDQUFBO0lBQUFELGNBQUEsR0FBQUUsQ0FBQTtXQUFBQyxLQUFBOzs7OztrQ0F4UG9COzs7a0NBQ1o7OztrQ0FDVDs7O2tDQUVIOzs7bUNBQzRCOzs7bUNBQ2Y7OzttQ0FDeUI7OzttQ0FDdkI7QUFFakM7QUFDQTtBQUNBO0FBRUEsTUFBTUMsaUJBQUE7QUFBQTtBQUFBLENBQUFKLGNBQUEsR0FBQUUsQ0FBQSxRQUFvQkcsSUFBQSxDQUFBQyxDQUFDLENBQUNDLE1BQU0sQ0FBQztFQUNqQ0MsTUFBQSxFQUFRSCxJQUFBLENBQUFDLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsV0FBVyxhQUFhLGNBQWMsV0FBVyxhQUFhLGFBQWEsV0FBVyxFQUFFQyxRQUFRO0VBQ2hIQyxjQUFBLEVBQWdCTixJQUFBLENBQUFDLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsV0FBVyxRQUFRLFVBQVUsV0FBVyxFQUFFQyxRQUFRO0VBQzFFRSxLQUFBLEVBQU9QLElBQUEsQ0FBQUMsQ0FBQyxDQUFDTyxNQUFNLEdBQUdILFFBQVE7RUFDMUJJLGVBQUEsRUFBaUJULElBQUEsQ0FBQUMsQ0FBQyxDQUFDTyxNQUFNLEdBQUdILFFBQVE7RUFDcENLLE9BQUEsRUFBU1YsSUFBQSxDQUFBQyxDQUFDLENBQUNPLE1BQU0sR0FBR0gsUUFBUTtFQUM1Qk0sZ0JBQUEsRUFBa0JYLElBQUEsQ0FBQUMsQ0FBQyxDQUFDQyxNQUFNLENBQUM7SUFDekJVLFdBQUEsRUFBYVosSUFBQSxDQUFBQyxDQUFDLENBQUNPLE1BQU0sR0FBR0ssR0FBRyxDQUFDO0lBQzVCQyxhQUFBLEVBQWVkLElBQUEsQ0FBQUMsQ0FBQyxDQUFDTyxNQUFNLEdBQUdLLEdBQUcsQ0FBQztJQUM5QkUsUUFBQSxFQUFVZixJQUFBLENBQUFDLENBQUMsQ0FBQ08sTUFBTSxHQUFHSyxHQUFHLENBQUM7SUFDekJHLFNBQUEsRUFBV2hCLElBQUEsQ0FBQUMsQ0FBQyxDQUFDTyxNQUFNLEdBQUdLLEdBQUcsQ0FBQztJQUMxQkksVUFBQSxFQUFZakIsSUFBQSxDQUFBQyxDQUFDLENBQUNPLE1BQU0sR0FBR0ssR0FBRyxDQUFDO0VBQzdCLEdBQUdSLFFBQVE7QUFDYjtBQUVBO0FBQ0E7QUFDQTtBQUVBLGVBQWVhLGtCQUFBO0VBQUE7RUFBQXZCLGNBQUEsR0FBQUMsQ0FBQTtFQUFBRCxjQUFBLEdBQUFFLENBQUE7RUFDYixJQUFJO0lBQ0YsTUFBTXNCLE9BQUE7SUFBQTtJQUFBLENBQUF4QixjQUFBLEdBQUFFLENBQUEsUUFBVSxNQUFNLElBQUF1QixLQUFBLENBQUFDLElBQUk7SUFBQTtJQUFBMUIsY0FBQSxHQUFBRSxDQUFBO0lBQzFCLElBQUksQ0FBQ3NCLE9BQUEsRUFBU0csSUFBQSxFQUFNO01BQUE7TUFBQTNCLGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUNsQixPQUFPO1FBQUUyQixLQUFBLEVBQU87UUFBMEJyQixNQUFBLEVBQVE7TUFBSTtJQUN4RDtJQUFBO0lBQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNRSxPQUFBO0lBQUE7SUFBQSxDQUFBOUIsY0FBQSxHQUFBRSxDQUFBLFFBQVVzQixPQUFBLENBQVFHLElBQUksQ0FBQ0ksS0FBSyxLQUFLO0lBQUE7SUFBQS9CLGNBQUEsR0FBQUUsQ0FBQTtJQUN2QyxJQUFJLENBQUM0QixPQUFBLEVBQVM7TUFBQTtNQUFBOUIsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BQ1osT0FBTztRQUFFMkIsS0FBQSxFQUFPO1FBQTREckIsTUFBQSxFQUFRO01BQUk7SUFDMUY7SUFBQTtJQUFBO01BQUFSLGNBQUEsR0FBQTRCLENBQUE7SUFBQTtJQUFBNUIsY0FBQSxHQUFBRSxDQUFBO0lBRUEsT0FBTztNQUFFeUIsSUFBQSxFQUFNSCxPQUFBLENBQVFHLElBQUk7TUFBRUssTUFBQSxFQUFRUixPQUFBLENBQVFHLElBQUksQ0FBQ007SUFBRztFQUN2RCxFQUFFLE9BQU9KLEtBQUEsRUFBTztJQUFBO0lBQUE3QixjQUFBLEdBQUFFLENBQUE7SUFDZGdDLE9BQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQUNGLE9BQUEsQ0FBQUcsUUFBUSxDQUFDQyxLQUFLLEVBQUVKLE9BQUEsQ0FBQUssV0FBVyxDQUFDQyxJQUFJLEVBQUUsNkJBQTZCO01BQUVYO0lBQU07SUFBQTtJQUFBN0IsY0FBQSxHQUFBRSxDQUFBO0lBQ2xGLE9BQU87TUFBRTJCLEtBQUEsRUFBTztNQUEwQnJCLE1BQUEsRUFBUTtJQUFJO0VBQ3hEO0FBQ0Y7QUFFQTtBQUNBO0FBQ0E7QUFFQSxNQUFNaUMsZ0JBQUE7QUFBQTtBQUFBLENBQUF6QyxjQUFBLEdBQUFFLENBQUEsUUFBNkM7RUFDakR3QyxPQUFBLEVBQVMsQ0FBQyxhQUFhLFlBQVk7RUFDbkNDLFNBQUEsRUFBVyxDQUFDLGNBQWMsWUFBWTtFQUN0Q0MsVUFBQSxFQUFZLENBQUMsV0FBVyxZQUFZO0VBQ3BDQyxPQUFBLEVBQVMsQ0FBQyxhQUFhLFdBQVc7RUFDbENDLFNBQUEsRUFBVyxDQUFDLFdBQVc7RUFDdkJDLFNBQUEsRUFBVyxFQUFFO0VBQ2JDLFFBQUEsRUFBVSxFQUFFO0VBQ1pDLFFBQUEsRUFBVSxDQUFDO0FBQ2I7QUFFQSxTQUFTQyx3QkFBd0JDLGFBQXFCLEVBQUVDLFNBQWlCO0VBQUE7RUFBQXBELGNBQUEsR0FBQUMsQ0FBQTtFQUFBRCxjQUFBLEdBQUFFLENBQUE7RUFDdkUsSUFBSWlELGFBQUEsS0FBa0JDLFNBQUEsRUFBVztJQUFBO0lBQUFwRCxjQUFBLEdBQUE0QixDQUFBO0lBQUE1QixjQUFBLEdBQUFFLENBQUE7SUFBQyxPQUFPO0VBQUs7RUFBQTtFQUFBO0lBQUFGLGNBQUEsR0FBQTRCLENBQUE7RUFBQTtFQUFBNUIsY0FBQSxHQUFBRSxDQUFBO0VBQzlDLE9BQU8sMkJBQUFGLGNBQUEsR0FBQTRCLENBQUEsVUFBQWEsZ0JBQWdCLENBQUNVLGFBQUEsQ0FBYyxFQUFFRSxRQUFBLENBQVNELFNBQUE7RUFBQTtFQUFBLENBQUFwRCxjQUFBLEdBQUE0QixDQUFBLFVBQWM7QUFDakU7QUFLTyxlQUFlN0IsSUFDcEJ1RCxPQUFvQixFQUNwQjtFQUFFQztBQUFNLENBQThCO0VBQUE7RUFBQXZELGNBQUEsR0FBQUMsQ0FBQTtFQUV0QyxNQUFNdUQsU0FBQTtFQUFBO0VBQUEsQ0FBQXhELGNBQUEsR0FBQUUsQ0FBQSxRQUFZdUQsSUFBQSxDQUFLQyxHQUFHO0VBQUE7RUFBQTFELGNBQUEsR0FBQUUsQ0FBQTtFQUUxQixJQUFJO0lBQ0Y7SUFDQSxNQUFNeUQsZUFBQTtJQUFBO0lBQUEsQ0FBQTNELGNBQUEsR0FBQUUsQ0FBQSxRQUFrQixNQUFNLElBQUEwRCxhQUFBLENBQUFDLGNBQWMsRUFDMUNQLE9BQUEsRUFDQVEsWUFBQSxDQUFBQyxrQkFBa0IsQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLEVBQ2pDSCxZQUFBLENBQUFDLGtCQUFrQixDQUFDQyxLQUFLLENBQUNFLE1BQU0sRUFDL0I7SUFBQTtJQUFBbEUsY0FBQSxHQUFBRSxDQUFBO0lBR0YsSUFBSSxDQUFDeUQsZUFBQSxDQUFnQlEsT0FBTyxFQUFFO01BQUE7TUFBQW5FLGNBQUEsR0FBQTRCLENBQUE7TUFDNUIsTUFBTXdDLFFBQUE7TUFBQTtNQUFBLENBQUFwRSxjQUFBLEdBQUFFLENBQUEsUUFBV21FLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ2hDO1FBQUUxQyxLQUFBLEVBQU87TUFBeUIsR0FDbEM7UUFBRXJCLE1BQUEsRUFBUTtNQUFJO01BQUE7TUFBQVIsY0FBQSxHQUFBRSxDQUFBO01BRWhCLElBQUE0RCxZQUFBLENBQUFVLG1CQUFtQixFQUFDSixRQUFBLEVBQVVULGVBQUE7TUFBQTtNQUFBM0QsY0FBQSxHQUFBRSxDQUFBO01BQzlCLE9BQU9rRSxRQUFBO0lBQ1Q7SUFBQTtJQUFBO01BQUFwRSxjQUFBLEdBQUE0QixDQUFBO0lBQUE7SUFFQTtJQUNBLE1BQU02QyxVQUFBO0lBQUE7SUFBQSxDQUFBekUsY0FBQSxHQUFBRSxDQUFBLFFBQWEsTUFBTXFCLGlCQUFBO0lBQUE7SUFBQXZCLGNBQUEsR0FBQUUsQ0FBQTtJQUN6QixJQUFJLFdBQVd1RSxVQUFBLEVBQVk7TUFBQTtNQUFBekUsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BQ3pCLE9BQU9tRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtRQUFFMUMsS0FBQSxFQUFPNEMsVUFBQSxDQUFXNUM7TUFBTSxHQUMxQjtRQUFFckIsTUFBQSxFQUFRaUUsVUFBQSxDQUFXakU7TUFBTztJQUVoQztJQUFBO0lBQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUEsTUFBTThDLE9BQUE7SUFBQTtJQUFBLENBQUExRSxjQUFBLEdBQUFFLENBQUEsUUFBVXFELE1BQUEsQ0FBT3RCLEVBQUU7SUFFekI7SUFDQSxNQUFNO01BQUUwQyxJQUFBLEVBQU1DLEtBQUs7TUFBRS9DO0lBQUssQ0FBRTtJQUFBO0lBQUEsQ0FBQTdCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0yRSxTQUFBLENBQUFDLGFBQWEsQ0FDL0NDLElBQUksQ0FBQyxVQUNMQyxNQUFNLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXFCUCxFQUNBQyxFQUFFLENBQUMsTUFBTVAsT0FBQSxFQUNUUSxNQUFNO0lBQUE7SUFBQWxGLGNBQUEsR0FBQUUsQ0FBQTtJQUVULElBQUkyQixLQUFBLEVBQU87TUFBQTtNQUFBN0IsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BQ1QsSUFBSTJCLEtBQUEsQ0FBTXNELElBQUksS0FBSyxZQUFZO1FBQUE7UUFBQW5GLGNBQUEsR0FBQTRCLENBQUE7UUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtRQUM3QixPQUFPbUUsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7VUFBRTFDLEtBQUEsRUFBTztRQUFzQixHQUMvQjtVQUFFckIsTUFBQSxFQUFRO1FBQUk7TUFFbEI7TUFBQTtNQUFBO1FBQUFSLGNBQUEsR0FBQTRCLENBQUE7TUFBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BRUFnQyxPQUFBLENBQUFDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDRixPQUFBLENBQUFHLFFBQVEsQ0FBQ0MsS0FBSyxFQUFFSixPQUFBLENBQUFLLFdBQVcsQ0FBQzZDLFFBQVEsRUFBRSwwQkFBMEI7UUFBRXZELEtBQUE7UUFBTzZDO01BQVE7TUFBQTtNQUFBMUUsY0FBQSxHQUFBRSxDQUFBO01BQzVGLE9BQU9tRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtRQUFFMUMsS0FBQSxFQUFPO01BQXlCLEdBQ2xDO1FBQUVyQixNQUFBLEVBQVE7TUFBSTtJQUVsQjtJQUFBO0lBQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUE7SUFDQSxJQUFJeUQsYUFBQTtJQUFBO0lBQUEsQ0FBQXJGLGNBQUEsR0FBQUUsQ0FBQSxRQUFnQixFQUFFO0lBQUE7SUFBQUYsY0FBQSxHQUFBRSxDQUFBO0lBQ3RCLElBQUk7TUFDRixNQUFNO1FBQUV5RSxJQUFBLEVBQU1XO01BQU8sQ0FBRTtNQUFBO01BQUEsQ0FBQXRGLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0yRSxTQUFBLENBQUFDLGFBQWEsQ0FDMUNDLElBQUksQ0FBQyx3QkFDTEMsTUFBTSxDQUFDOzs7Ozs7Ozs7O1NBVVAsRUFDQUMsRUFBRSxDQUFDLFlBQVlQLE9BQUEsRUFDZkUsS0FBSyxDQUFDLGNBQWM7UUFBRVcsU0FBQSxFQUFXO01BQU07TUFBQTtNQUFBdkYsY0FBQSxHQUFBRSxDQUFBO01BRTFDbUYsYUFBQTtNQUFnQjtNQUFBLENBQUFyRixjQUFBLEdBQUE0QixDQUFBLFVBQUEwRCxPQUFBO01BQUE7TUFBQSxDQUFBdEYsY0FBQSxHQUFBNEIsQ0FBQSxVQUFXLEVBQUU7SUFDL0IsRUFBRSxPQUFPNEQsWUFBQSxFQUFjO01BQUE7TUFBQXhGLGNBQUEsR0FBQUUsQ0FBQTtNQUNyQjtNQUNBZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUNvRCxJQUFJLEVBQUV2RCxPQUFBLENBQUFLLFdBQVcsQ0FBQzZDLFFBQVEsRUFBRSx3Q0FBd0M7UUFBRUk7TUFBYTtJQUN6RztJQUVBO0lBQ0EsSUFBSUUsVUFBQTtJQUFBO0lBQUEsQ0FBQTFGLGNBQUEsR0FBQUUsQ0FBQSxRQUFhLEVBQUU7SUFBQTtJQUFBRixjQUFBLEdBQUFFLENBQUE7SUFDbkIsSUFBSTtNQUNGLE1BQU07UUFBRXlFLElBQUEsRUFBTS9EO01BQUssQ0FBRTtNQUFBO01BQUEsQ0FBQVosY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTTJFLFNBQUEsQ0FBQUMsYUFBYSxDQUN4Q0MsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQzs7Ozs7Ozs7OztTQVVQLEVBQ0FDLEVBQUUsQ0FBQyxZQUFZUCxPQUFBLEVBQ2ZFLEtBQUssQ0FBQyxjQUFjO1FBQUVXLFNBQUEsRUFBVztNQUFNO01BQUE7TUFBQXZGLGNBQUEsR0FBQUUsQ0FBQTtNQUUxQ3dGLFVBQUE7TUFBYTtNQUFBLENBQUExRixjQUFBLEdBQUE0QixDQUFBLFVBQUFoQixLQUFBO01BQUE7TUFBQSxDQUFBWixjQUFBLEdBQUE0QixDQUFBLFVBQVMsRUFBRTtJQUMxQixFQUFFLE9BQU8rRCxVQUFBLEVBQVk7TUFBQTtNQUFBM0YsY0FBQSxHQUFBRSxDQUFBO01BQ25CO01BQ0FnQyxPQUFBLENBQUFDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDRixPQUFBLENBQUFHLFFBQVEsQ0FBQ29ELElBQUksRUFBRXZELE9BQUEsQ0FBQUssV0FBVyxDQUFDNkMsUUFBUSxFQUFFLCtCQUErQjtRQUFFTztNQUFXO0lBQzlGO0lBRUE7SUFDQSxNQUFNQyxZQUFBO0lBQUE7SUFBQSxDQUFBNUYsY0FBQSxHQUFBRSxDQUFBLFFBQWV1RCxJQUFBLENBQUtDLEdBQUcsS0FBS0YsU0FBQTtJQUFBO0lBQUF4RCxjQUFBLEdBQUFFLENBQUE7SUFDbEMsTUFBTTJGLFFBQUEsQ0FBQUMsZ0JBQWdCLENBQUNDLFdBQVcsR0FBR0MsYUFBYSxDQUFDLHNCQUFzQixPQUFPLEtBQUtKLFlBQUE7SUFFckYsTUFBTXhCLFFBQUE7SUFBQTtJQUFBLENBQUFwRSxjQUFBLEdBQUFFLENBQUEsUUFJRDtNQUNIeUUsSUFBQSxFQUFNO1FBQ0pDLEtBQUE7UUFDQVMsYUFBQTtRQUNBekUsS0FBQSxFQUFPOEU7TUFDVDtNQUNBdkIsT0FBQSxFQUFTO01BQ1R0QyxLQUFBLEVBQU87SUFDVDtJQUVBLE1BQU1vRSxZQUFBO0lBQUE7SUFBQSxDQUFBakcsY0FBQSxHQUFBRSxDQUFBLFFBQWVtRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUFDSCxRQUFBO0lBQUE7SUFBQXBFLGNBQUEsR0FBQUUsQ0FBQTtJQUN2QyxJQUFBNEQsWUFBQSxDQUFBVSxtQkFBbUIsRUFBQ3lCLFlBQUEsRUFBY3RDLGVBQUE7SUFBQTtJQUFBM0QsY0FBQSxHQUFBRSxDQUFBO0lBRWxDZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUM2RCxJQUFJLEVBQUVoRSxPQUFBLENBQUFLLFdBQVcsQ0FBQzRELEdBQUcsRUFBRSwrQkFBK0I7TUFDeEV6QixPQUFBO01BQ0FrQjtJQUNGO0lBQUE7SUFBQTVGLGNBQUEsR0FBQUUsQ0FBQTtJQUVBLE9BQU8rRixZQUFBO0VBRVQsRUFBRSxPQUFPcEUsS0FBQSxFQUFPO0lBQ2QsTUFBTStELFlBQUE7SUFBQTtJQUFBLENBQUE1RixjQUFBLEdBQUFFLENBQUEsUUFBZXVELElBQUEsQ0FBS0MsR0FBRyxLQUFLRixTQUFBO0lBQUE7SUFBQXhELGNBQUEsR0FBQUUsQ0FBQTtJQUNsQyxNQUFNMkYsUUFBQSxDQUFBQyxnQkFBZ0IsQ0FBQ0MsV0FBVyxHQUFHQyxhQUFhLENBQUMsc0JBQXNCLE9BQU8sS0FBS0osWUFBQTtJQUFBO0lBQUE1RixjQUFBLEdBQUFFLENBQUE7SUFFckZnQyxPQUFBLENBQUFDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDRixPQUFBLENBQUFHLFFBQVEsQ0FBQ0MsS0FBSyxFQUFFSixPQUFBLENBQUFLLFdBQVcsQ0FBQzRELEdBQUcsRUFBRSx1Q0FBdUM7TUFBRXRFLEtBQUE7TUFBTzZDLE9BQUEsRUFBU25CLE1BQUEsQ0FBT3RCO0lBQUc7SUFBQTtJQUFBakMsY0FBQSxHQUFBRSxDQUFBO0lBRS9HLE9BQU9tRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtNQUFFMUMsS0FBQSxFQUFPO0lBQTZCLEdBQ3RDO01BQUVyQixNQUFBLEVBQVE7SUFBSTtFQUVsQjtBQUNGO0FBS08sZUFBZUwsTUFDcEJtRCxPQUFvQixFQUNwQjtFQUFFQztBQUFNLENBQThCO0VBQUE7RUFBQXZELGNBQUEsR0FBQUMsQ0FBQTtFQUV0QyxNQUFNdUQsU0FBQTtFQUFBO0VBQUEsQ0FBQXhELGNBQUEsR0FBQUUsQ0FBQSxRQUFZdUQsSUFBQSxDQUFLQyxHQUFHO0VBQUE7RUFBQTFELGNBQUEsR0FBQUUsQ0FBQTtFQUUxQixJQUFJO0lBQ0Y7SUFDQSxNQUFNeUQsZUFBQTtJQUFBO0lBQUEsQ0FBQTNELGNBQUEsR0FBQUUsQ0FBQSxRQUFrQixNQUFNLElBQUEwRCxhQUFBLENBQUFDLGNBQWMsRUFDMUNQLE9BQUEsRUFDQVEsWUFBQSxDQUFBQyxrQkFBa0IsQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLEVBQ2pDSCxZQUFBLENBQUFDLGtCQUFrQixDQUFDQyxLQUFLLENBQUNFLE1BQU0sRUFDL0I7SUFBQTtJQUFBbEUsY0FBQSxHQUFBRSxDQUFBO0lBR0YsSUFBSSxDQUFDeUQsZUFBQSxDQUFnQlEsT0FBTyxFQUFFO01BQUE7TUFBQW5FLGNBQUEsR0FBQTRCLENBQUE7TUFDNUIsTUFBTXdDLFFBQUE7TUFBQTtNQUFBLENBQUFwRSxjQUFBLEdBQUFFLENBQUEsUUFBV21FLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ2hDO1FBQUUxQyxLQUFBLEVBQU87TUFBeUIsR0FDbEM7UUFBRXJCLE1BQUEsRUFBUTtNQUFJO01BQUE7TUFBQVIsY0FBQSxHQUFBRSxDQUFBO01BRWhCLElBQUE0RCxZQUFBLENBQUFVLG1CQUFtQixFQUFDSixRQUFBLEVBQVVULGVBQUE7TUFBQTtNQUFBM0QsY0FBQSxHQUFBRSxDQUFBO01BQzlCLE9BQU9rRSxRQUFBO0lBQ1Q7SUFBQTtJQUFBO01BQUFwRSxjQUFBLEdBQUE0QixDQUFBO0lBQUE7SUFFQTtJQUNBLE1BQU02QyxVQUFBO0lBQUE7SUFBQSxDQUFBekUsY0FBQSxHQUFBRSxDQUFBLFFBQWEsTUFBTXFCLGlCQUFBO0lBQUE7SUFBQXZCLGNBQUEsR0FBQUUsQ0FBQTtJQUN6QixJQUFJLFdBQVd1RSxVQUFBLEVBQVk7TUFBQTtNQUFBekUsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BQ3pCLE9BQU9tRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtRQUFFMUMsS0FBQSxFQUFPNEMsVUFBQSxDQUFXNUM7TUFBTSxHQUMxQjtRQUFFckIsTUFBQSxFQUFRaUUsVUFBQSxDQUFXakU7TUFBTztJQUVoQztJQUFBO0lBQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUEsTUFBTThDLE9BQUE7SUFBQTtJQUFBLENBQUExRSxjQUFBLEdBQUFFLENBQUEsUUFBVXFELE1BQUEsQ0FBT3RCLEVBQUU7SUFFekI7SUFDQSxNQUFNbUUsSUFBQTtJQUFBO0lBQUEsQ0FBQXBHLGNBQUEsR0FBQUUsQ0FBQSxRQUFPLE1BQU1vRCxPQUFBLENBQVFpQixJQUFJO0lBQy9CLE1BQU04QixnQkFBQTtJQUFBO0lBQUEsQ0FBQXJHLGNBQUEsR0FBQUUsQ0FBQSxRQUFtQkUsaUJBQUEsQ0FBa0JrRyxTQUFTLENBQUNGLElBQUE7SUFBQTtJQUFBcEcsY0FBQSxHQUFBRSxDQUFBO0lBRXJELElBQUksQ0FBQ21HLGdCQUFBLENBQWlCbEMsT0FBTyxFQUFFO01BQUE7TUFBQW5FLGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUM3QixPQUFPbUUsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRTFDLEtBQUEsRUFBTztRQUFvQzBFLE9BQUEsRUFBU0YsZ0JBQUEsQ0FBaUJ4RSxLQUFLLENBQUMyRTtNQUFPLEdBQ3BGO1FBQUVoRyxNQUFBLEVBQVE7TUFBSTtJQUVsQjtJQUFBO0lBQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUEsTUFBTTZFLFVBQUE7SUFBQTtJQUFBLENBQUF6RyxjQUFBLEdBQUFFLENBQUEsUUFBYW1HLGdCQUFBLENBQWlCMUIsSUFBSTtJQUV4QztJQUNBLE1BQU07TUFBRUEsSUFBQSxFQUFNK0IsWUFBWTtNQUFFN0UsS0FBQSxFQUFPOEU7SUFBVSxDQUFFO0lBQUE7SUFBQSxDQUFBM0csY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTTJFLFNBQUEsQ0FBQUMsYUFBYSxDQUNsRUMsSUFBSSxDQUFDLFVBQ0xDLE1BQU0sQ0FBQyw4QkFDUEMsRUFBRSxDQUFDLE1BQU1QLE9BQUEsRUFDVFEsTUFBTTtJQUFBO0lBQUFsRixjQUFBLEdBQUFFLENBQUE7SUFFVCxJQUFJeUcsVUFBQSxFQUFZO01BQUE7TUFBQTNHLGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUNkLElBQUl5RyxVQUFBLENBQVd4QixJQUFJLEtBQUssWUFBWTtRQUFBO1FBQUFuRixjQUFBLEdBQUE0QixDQUFBO1FBQUE1QixjQUFBLEdBQUFFLENBQUE7UUFDbEMsT0FBT21FLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO1VBQUUxQyxLQUFBLEVBQU87UUFBc0IsR0FDL0I7VUFBRXJCLE1BQUEsRUFBUTtRQUFJO01BRWxCO01BQUE7TUFBQTtRQUFBUixjQUFBLEdBQUE0QixDQUFBO01BQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUVBZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUNDLEtBQUssRUFBRUosT0FBQSxDQUFBSyxXQUFXLENBQUM2QyxRQUFRLEVBQUUsaUNBQWlDO1FBQUV1QixVQUFBO1FBQVlqQztNQUFRO01BQUE7TUFBQTFFLGNBQUEsR0FBQUUsQ0FBQTtNQUN4RyxPQUFPbUUsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRTFDLEtBQUEsRUFBTztNQUF5QixHQUNsQztRQUFFckIsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFSLGNBQUEsR0FBQTRCLENBQUE7SUFBQTtJQUVBO0lBQUE1QixjQUFBLEdBQUFFLENBQUE7SUFDQTtJQUFJO0lBQUEsQ0FBQUYsY0FBQSxHQUFBNEIsQ0FBQSxXQUFBNkUsVUFBQSxDQUFXakcsTUFBTTtJQUFBO0lBQUEsQ0FBQVIsY0FBQSxHQUFBNEIsQ0FBQSxXQUFJLENBQUNzQix1QkFBQSxDQUF3QndELFlBQUEsQ0FBYWxHLE1BQU0sRUFBRWlHLFVBQUEsQ0FBV2pHLE1BQU0sSUFBRztNQUFBO01BQUFSLGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUN6RixPQUFPbUUsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRTFDLEtBQUEsRUFBTyxrQ0FBa0M2RSxZQUFBLENBQWFsRyxNQUFNLE1BQU1pRyxVQUFBLENBQVdqRyxNQUFNO01BQUcsR0FDeEY7UUFBRUEsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFSLGNBQUEsR0FBQTRCLENBQUE7SUFBQTtJQUVBO0lBQ0EsTUFBTWdGLGFBQUE7SUFBQTtJQUFBLENBQUE1RyxjQUFBLEdBQUFFLENBQUEsUUFBcUI7TUFDekIsR0FBR3VHLFVBQVU7TUFDYkksVUFBQSxFQUFZLElBQUlwRCxJQUFBLEdBQU9xRCxXQUFXO0lBQ3BDO0lBRUE7SUFBQTtJQUFBOUcsY0FBQSxHQUFBRSxDQUFBO0lBQ0EsSUFBSXVHLFVBQUEsQ0FBV3pGLGdCQUFnQixFQUFFO01BQUE7TUFBQWhCLGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUMvQjBHLGFBQUEsQ0FBYzVGLGdCQUFnQixHQUFHK0YsSUFBQSxDQUFLQyxTQUFTLENBQUNQLFVBQUEsQ0FBV3pGLGdCQUFnQjtJQUM3RTtJQUFBO0lBQUE7TUFBQWhCLGNBQUEsR0FBQTRCLENBQUE7SUFBQTtJQUVBO0lBQ0EsTUFBTTtNQUFFK0MsSUFBQSxFQUFNc0MsWUFBWTtNQUFFcEYsS0FBQSxFQUFPcUY7SUFBVyxDQUFFO0lBQUE7SUFBQSxDQUFBbEgsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTTJFLFNBQUEsQ0FBQUMsYUFBYSxDQUNuRUMsSUFBSSxDQUFDLFVBQ0xvQyxNQUFNLENBQUNQLGFBQUEsRUFDUDNCLEVBQUUsQ0FBQyxNQUFNUCxPQUFBLEVBQ1RNLE1BQU0sR0FDTkUsTUFBTTtJQUFBO0lBQUFsRixjQUFBLEdBQUFFLENBQUE7SUFFVCxJQUFJZ0gsV0FBQSxFQUFhO01BQUE7TUFBQWxILGNBQUEsR0FBQTRCLENBQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUNmZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUNDLEtBQUssRUFBRUosT0FBQSxDQUFBSyxXQUFXLENBQUM2QyxRQUFRLEVBQUUsNkJBQTZCO1FBQUU4QixXQUFBO1FBQWF4QztNQUFRO01BQUE7TUFBQTFFLGNBQUEsR0FBQUUsQ0FBQTtNQUNyRyxPQUFPbUUsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRTFDLEtBQUEsRUFBTztNQUE0QixHQUNyQztRQUFFckIsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFSLGNBQUEsR0FBQTRCLENBQUE7SUFBQTtJQUVBO0lBQUE1QixjQUFBLEdBQUFFLENBQUE7SUFDQTtJQUFJO0lBQUEsQ0FBQUYsY0FBQSxHQUFBNEIsQ0FBQSxXQUFBNkUsVUFBQSxDQUFXakcsTUFBTTtJQUFBO0lBQUEsQ0FBQVIsY0FBQSxHQUFBNEIsQ0FBQSxXQUFJNkUsVUFBQSxDQUFXakcsTUFBTSxLQUFLa0csWUFBQSxDQUFhbEcsTUFBTSxHQUFFO01BQUE7TUFBQVIsY0FBQSxHQUFBNEIsQ0FBQTtNQUFBNUIsY0FBQSxHQUFBRSxDQUFBO01BQ2xFLElBQUk7UUFBQTtRQUFBRixjQUFBLEdBQUFFLENBQUE7UUFDRixNQUFNMkUsU0FBQSxDQUFBQyxhQUFhLENBQ2hCQyxJQUFJLENBQUMsd0JBQ0xxQyxNQUFNLENBQUM7VUFDTkMsUUFBQSxFQUFVM0MsT0FBQTtVQUNWNEMsZUFBQSxFQUFpQlosWUFBQSxDQUFhbEcsTUFBTTtVQUNwQytHLFVBQUEsRUFBWWQsVUFBQSxDQUFXakcsTUFBTTtVQUM3QmdILFVBQUEsRUFBWS9DLFVBQUEsQ0FBVzlDLElBQUksQ0FBQ00sRUFBRTtVQUM5QndGLE1BQUEsRUFBUTtRQUNWO01BQ0osRUFBRSxPQUFPakMsWUFBQSxFQUFjO1FBQUE7UUFBQXhGLGNBQUEsR0FBQUUsQ0FBQTtRQUNyQjtRQUNBZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUNvRCxJQUFJLEVBQUV2RCxPQUFBLENBQUFLLFdBQVcsQ0FBQzZDLFFBQVEsRUFBRSw0Q0FBNEM7VUFBRUk7UUFBYTtNQUM3RztJQUNGO0lBQUE7SUFBQTtNQUFBeEYsY0FBQSxHQUFBNEIsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNZ0UsWUFBQTtJQUFBO0lBQUEsQ0FBQTVGLGNBQUEsR0FBQUUsQ0FBQSxTQUFldUQsSUFBQSxDQUFLQyxHQUFHLEtBQUtGLFNBQUE7SUFBQTtJQUFBeEQsY0FBQSxHQUFBRSxDQUFBO0lBQ2xDLE1BQU0yRixRQUFBLENBQUFDLGdCQUFnQixDQUFDQyxXQUFXLEdBQUdDLGFBQWEsQ0FBQyxzQkFBc0IsU0FBUyxLQUFLSixZQUFBO0lBRXZGLE1BQU14QixRQUFBO0lBQUE7SUFBQSxDQUFBcEUsY0FBQSxHQUFBRSxDQUFBLFNBQTZDO01BQ2pEeUUsSUFBQSxFQUFNc0MsWUFBQTtNQUNOOUMsT0FBQSxFQUFTO01BQ1R0QyxLQUFBLEVBQU87SUFDVDtJQUVBLE1BQU1vRSxZQUFBO0lBQUE7SUFBQSxDQUFBakcsY0FBQSxHQUFBRSxDQUFBLFNBQWVtRSxPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUFDSCxRQUFBO0lBQUE7SUFBQXBFLGNBQUEsR0FBQUUsQ0FBQTtJQUN2QyxJQUFBNEQsWUFBQSxDQUFBVSxtQkFBbUIsRUFBQ3lCLFlBQUEsRUFBY3RDLGVBQUE7SUFBQTtJQUFBM0QsY0FBQSxHQUFBRSxDQUFBO0lBRWxDZ0MsT0FBQSxDQUFBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQ0YsT0FBQSxDQUFBRyxRQUFRLENBQUM2RCxJQUFJLEVBQUVoRSxPQUFBLENBQUFLLFdBQVcsQ0FBQzRELEdBQUcsRUFBRSxrQ0FBa0M7TUFDM0V6QixPQUFBO01BQ0FnRCxPQUFBLEVBQVNqQixVQUFBO01BQ1RiO0lBQ0Y7SUFBQTtJQUFBNUYsY0FBQSxHQUFBRSxDQUFBO0lBRUEsT0FBTytGLFlBQUE7RUFFVCxFQUFFLE9BQU9wRSxLQUFBLEVBQU87SUFDZCxNQUFNK0QsWUFBQTtJQUFBO0lBQUEsQ0FBQTVGLGNBQUEsR0FBQUUsQ0FBQSxTQUFldUQsSUFBQSxDQUFLQyxHQUFHLEtBQUtGLFNBQUE7SUFBQTtJQUFBeEQsY0FBQSxHQUFBRSxDQUFBO0lBQ2xDLE1BQU0yRixRQUFBLENBQUFDLGdCQUFnQixDQUFDQyxXQUFXLEdBQUdDLGFBQWEsQ0FBQyxzQkFBc0IsU0FBUyxLQUFLSixZQUFBO0lBQUE7SUFBQTVGLGNBQUEsR0FBQUUsQ0FBQTtJQUV2RmdDLE9BQUEsQ0FBQUMsTUFBTSxDQUFDQyxHQUFHLENBQUNGLE9BQUEsQ0FBQUcsUUFBUSxDQUFDQyxLQUFLLEVBQUVKLE9BQUEsQ0FBQUssV0FBVyxDQUFDNEQsR0FBRyxFQUFFLHlDQUF5QztNQUFFdEUsS0FBQTtNQUFPNkMsT0FBQSxFQUFTbkIsTUFBQSxDQUFPdEI7SUFBRztJQUFBO0lBQUFqQyxjQUFBLEdBQUFFLENBQUE7SUFFakgsT0FBT21FLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO01BQUUxQyxLQUFBLEVBQU87SUFBNkIsR0FDdEM7TUFBRXJCLE1BQUEsRUFBUTtJQUFJO0VBRWxCO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=