{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\__tests__\\commercial-product-card.test.tsx"],"sourcesContent":["import React from 'react'\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react'\nimport { CommercialProductCard } from '../product-card-commercial'\n\ndescribe('CommercialProductCard', () => {\n  const defaultProps = {\n    image: '/test-image.jpg',\n    title: 'Barniz Campbell 4L',\n    brand: 'Petrilac',\n    price: 19350,\n    originalPrice: 21500,\n    discount: '10%',\n    stock: 12,\n    onAddToCart: jest.fn(),\n  }\n\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  it('renders correctly with all props', () => {\n    render(<CommercialProductCard {...defaultProps} />)\n\n    expect(screen.getByTestId('commercial-product-card')).toBeInTheDocument()\n    expect(screen.getByText('Barniz Campbell 4L')).toBeInTheDocument()\n    expect(screen.getByText('Petrilac')).toBeInTheDocument()\n    expect(screen.getByText('$19.350')).toBeInTheDocument()\n    expect(screen.getByText('$21.500')).toBeInTheDocument()\n  })\n\n  it('shows \"Nuevo\" badge when isNew is true', () => {\n    render(<CommercialProductCard {...defaultProps} isNew={true} />)\n\n    expect(screen.getByText('Nuevo')).toBeInTheDocument()\n  })\n\n  it('shows discount badge when discount is provided', () => {\n    render(<CommercialProductCard {...defaultProps} />)\n\n    expect(screen.getByText('10%')).toBeInTheDocument()\n    expect(screen.getByText('Descuento')).toBeInTheDocument()\n    expect(screen.getByText('especial')).toBeInTheDocument()\n  })\n\n  it('shows installments information when provided', () => {\n    const installments = {\n      quantity: 3,\n      amount: 6450,\n      interestFree: true,\n    }\n\n    render(<CommercialProductCard {...defaultProps} installments={installments} />)\n\n    expect(screen.getByText('3x de $6.450 sin interés')).toBeInTheDocument()\n  })\n\n  it('shows free shipping when freeShipping is true', () => {\n    render(<CommercialProductCard {...defaultProps} freeShipping={true} />)\n\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\n  })\n\n  it('shows free shipping automatically for prices >= 15000', () => {\n    render(<CommercialProductCard {...defaultProps} price={20000} />)\n\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\n  })\n\n  it('shows delivery location when provided', () => {\n    render(\n      <CommercialProductCard\n        {...defaultProps}\n        freeShipping={true}\n        deliveryLocation='Llega gratis hoy en Córdoba Capital'\n      />\n    )\n\n    // Ahora solo muestra el ícono, no el texto de ubicación\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\n  })\n\n  it('calls onAddToCart when button is clicked', () => {\n    render(<CommercialProductCard {...defaultProps} />)\n\n    const button = screen.getByTestId('add-to-cart-btn')\n    fireEvent.click(button)\n\n    expect(defaultProps.onAddToCart).toHaveBeenCalledTimes(1)\n  })\n\n  it('shows loading state when adding to cart', async () => {\n    render(<CommercialProductCard {...defaultProps} showCartAnimation={true} />)\n\n    const button = screen.getByTestId('add-to-cart-btn')\n    fireEvent.click(button)\n\n    // Verificar que el botón está deshabilitado durante la carga\n    expect(button).toBeDisabled()\n\n    // Verificar que aparece el texto \"Agregando...\" (puede estar oculto en mobile)\n    await waitFor(\n      () => {\n        const loadingTexts = screen.getAllByText(/Agregando|\\.\\.\\./)\n        expect(loadingTexts.length).toBeGreaterThan(0)\n      },\n      { timeout: 100 }\n    )\n\n    // Verificar que después de 1 segundo el botón vuelve a estar habilitado\n    await waitFor(\n      () => {\n        expect(button).not.toBeDisabled()\n      },\n      { timeout: 1200 }\n    )\n  })\n\n  it('disables button when stock is 0', () => {\n    render(<CommercialProductCard {...defaultProps} stock={0} />)\n\n    const button = screen.getByTestId('add-to-cart-btn')\n    expect(button).toBeDisabled()\n    expect(screen.getByText('Sin stock')).toBeInTheDocument()\n  })\n\n  it('shows placeholder when no image is provided', () => {\n    render(<CommercialProductCard {...defaultProps} image={undefined} />)\n\n    const placeholder = screen.getByAltText('Sin imagen')\n    expect(placeholder).toBeInTheDocument()\n  })\n\n  it('handles image error by showing placeholder', () => {\n    render(<CommercialProductCard {...defaultProps} />)\n\n    const image = screen.getByAltText('Barniz Campbell 4L')\n    fireEvent.error(image)\n\n    expect(image).toHaveAttribute('src', '/images/products/placeholder.svg')\n  })\n\n  it('applies custom className', () => {\n    render(<CommercialProductCard {...defaultProps} className='custom-class' />)\n\n    const card = screen.getByTestId('commercial-product-card')\n    expect(card).toHaveClass('custom-class')\n  })\n\n  it('renders without brand when not provided', () => {\n    render(<CommercialProductCard {...defaultProps} brand={undefined} />)\n\n    expect(screen.queryByText('Petrilac')).not.toBeInTheDocument()\n  })\n\n  it('renders without original price when not provided', () => {\n    render(<CommercialProductCard {...defaultProps} originalPrice={undefined} />)\n\n    expect(screen.queryByText('$21.500')).not.toBeInTheDocument()\n  })\n\n  it('renders without discount badge when not provided', () => {\n    render(<CommercialProductCard {...defaultProps} discount={undefined} />)\n\n    expect(screen.queryByText('10%')).not.toBeInTheDocument()\n    expect(screen.queryByText('Descuento')).not.toBeInTheDocument()\n    expect(screen.queryByText('especial')).not.toBeInTheDocument()\n  })\n\n  it('uses custom CTA text', () => {\n    render(<CommercialProductCard {...defaultProps} cta='Comprar ahora' />)\n\n    expect(screen.getByText('Comprar ahora')).toBeInTheDocument()\n  })\n\n  it('renders children when provided', () => {\n    render(\n      <CommercialProductCard {...defaultProps}>\n        <div data-testid='custom-child'>Custom content</div>\n      </CommercialProductCard>\n    )\n\n    expect(screen.getByTestId('custom-child')).toBeInTheDocument()\n    expect(screen.getByText('Custom content')).toBeInTheDocument()\n  })\n\n  it('handles zero price correctly', () => {\n    render(<CommercialProductCard {...defaultProps} price={0} />)\n\n    expect(screen.getByText('$0')).toBeInTheDocument()\n  })\n\n  it('formats large prices correctly', () => {\n    render(<CommercialProductCard {...defaultProps} price={123456} />)\n\n    expect(screen.getByText('$123.456')).toBeInTheDocument()\n  })\n})\n"],"names":["describe","defaultProps","image","title","brand","price","originalPrice","discount","stock","onAddToCart","jest","fn","beforeEach","clearAllMocks","it","render","CommercialProductCard","expect","screen","getByTestId","toBeInTheDocument","getByText","isNew","installments","quantity","amount","interestFree","freeShipping","getByAltText","deliveryLocation","button","fireEvent","click","toHaveBeenCalledTimes","showCartAnimation","toBeDisabled","waitFor","loadingTexts","getAllByText","length","toBeGreaterThan","timeout","not","undefined","placeholder","error","toHaveAttribute","className","card","toHaveClass","queryByText","cta","div","data-testid"],"mappings":"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"}