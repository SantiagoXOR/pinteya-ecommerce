0bb1667975f09646c9df0eb8c3fa4137
// ===================================
// UTILIDADES DE VALIDACIÓN
// Funciones para validar datos críticos del sistema
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get sanitizeString () {
        return sanitizeString;
    },
    get validateAddress () {
        return validateAddress;
    },
    get validateCurrency () {
        return validateCurrency;
    },
    get validateDate () {
        return validateDate;
    },
    get validateDiscount () {
        return validateDiscount;
    },
    get validateEmail () {
        return validateEmail;
    },
    get validateNumberRange () {
        return validateNumberRange;
    },
    get validateOrderData () {
        return validateOrderData;
    },
    get validatePassword () {
        return validatePassword;
    },
    get validatePaymentData () {
        return validatePaymentData;
    },
    get validatePhone () {
        return validatePhone;
    },
    get validateProductData () {
        return validateProductData;
    },
    get validateQuantity () {
        return validateQuantity;
    },
    get validateRequiredFields () {
        return validateRequiredFields;
    },
    get validateURL () {
        return validateURL;
    }
});
function validateEmail(email) {
    // Handle null, undefined, and non-string values
    if (!email || typeof email !== 'string') {
        return false;
    }
    // Validar longitud total del email
    if (email.length > 254) {
        return false;
    }
    // Validar que no empiece o termine con punto
    if (email.startsWith('.') || email.endsWith('.')) {
        return false;
    }
    // Validar que tenga exactamente un @
    if (email.split('@').length !== 2) {
        return false;
    }
    // Validar longitud de partes locales y dominio
    const [localPart, domain] = email.split('@');
    if (localPart.length === 0 || localPart.length > 64) {
        return false;
    }
    if (domain.length === 0 || domain.length > 253) {
        return false;
    }
    // Validar que no tenga puntos consecutivos
    if (email.includes('..')) {
        return false;
    }
    // El dominio debe tener al menos un punto (TLD requerido)
    if (!domain.includes('.')) {
        return false;
    }
    // Regex para validación de email
    const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;
    return emailRegex.test(email);
}
function validatePassword(password) {
    const errors = [];
    let message = '';
    if (!password || typeof password !== 'string') {
        return {
            isValid: false,
            errors: [
                'invalid_type'
            ],
            message: 'La contraseña debe ser una cadena de texto'
        };
    }
    // Validar longitud mínima
    if (password.length < 8) {
        errors.push('length');
    }
    // Validar mayúscula
    if (!/[A-Z]/.test(password)) {
        errors.push('uppercase');
    }
    // Validar minúscula
    if (!/[a-z]/.test(password)) {
        errors.push('lowercase');
    }
    // Validar número
    if (!/\d/.test(password)) {
        errors.push('number');
    }
    // Validar carácter especial
    if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
        errors.push('special');
    }
    // Generar mensaje de error
    if (errors.length > 0) {
        const errorMessages = {
            length: 'al menos 8 caracteres',
            uppercase: 'al menos una letra mayúscula',
            lowercase: 'al menos una letra minúscula',
            number: 'al menos un número',
            special: 'al menos un carácter especial'
        };
        message = `La contraseña debe contener: ${errors.map((e)=>errorMessages[e]).join(', ')}`;
    }
    return {
        isValid: errors.length === 0,
        errors,
        message
    };
}
function validatePhone(phone, country = 'AR') {
    if (!phone || typeof phone !== 'string') {
        return false;
    }
    // Limpiar el teléfono de espacios y caracteres especiales
    const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
    if (country === 'AR') {
        // Validar teléfonos argentinos
        // Formatos válidos: +541123456789, 1123456789, 01123456789
        const argPhoneRegex = /^(\+54)?0?11\d{8}$|^(\+54)?0?\d{10}$/;
        return argPhoneRegex.test(cleanPhone);
    }
    if (country === 'INTERNATIONAL') {
        // Validar formato internacional básico
        const intPhoneRegex = /^\+\d{10,15}$/;
        return intPhoneRegex.test(cleanPhone);
    }
    return false;
}
function validateProductData(product) {
    const errors = [];
    if (!product || typeof product !== 'object') {
        return {
            isValid: false,
            errors: [
                'invalid_type'
            ],
            message: 'Los datos del producto deben ser un objeto'
        };
    }
    // Validar nombre
    if (!product.name || typeof product.name !== 'string') {
        errors.push('name');
    } else if (product.name.length < 3 || product.name.length > 200) {
        errors.push('name_length');
    } else if (/<script|javascript:|on\w+=/i.test(product.name)) {
        errors.push('name_security');
    }
    // Validar precio
    if (typeof product.price !== 'number' || product.price <= 0) {
        errors.push('price');
    } else if (product.price > 9999999) {
        errors.push('price_too_high');
    }
    // Validar stock
    if (typeof product.stock !== 'number' || product.stock < 0) {
        errors.push('stock');
    }
    // Validar categoría
    if (!product.category_id || typeof product.category_id !== 'number') {
        errors.push('category_id');
    }
    // Validar marca
    if (!product.brand || typeof product.brand !== 'string') {
        errors.push('brand');
    }
    // Validar imágenes
    if (!Array.isArray(product.images) || product.images.length === 0) {
        errors.push('images');
    }
    return {
        isValid: errors.length === 0,
        errors
    };
}
function validateOrderData(order) {
    const errors = [];
    if (!order || typeof order !== 'object') {
        return {
            isValid: false,
            errors: [
                'invalid_type'
            ]
        };
    }
    // Validar user_id
    if (!order.user_id || typeof order.user_id !== 'string') {
        errors.push('user_id');
    }
    // Validar items
    if (!Array.isArray(order.items) || order.items.length === 0) {
        errors.push('items_empty');
    } else {
        // Validar cada item
        order.items.forEach((item, index)=>{
            if (!item.product_id || typeof item.product_id !== 'number') {
                errors.push(`item_${index}_product_id`);
            }
            if (!item.quantity || typeof item.quantity !== 'number' || item.quantity <= 0) {
                errors.push(`item_${index}_quantity`);
            }
            if (typeof item.price !== 'number' || item.price <= 0) {
                errors.push(`item_${index}_price`);
            }
        });
    }
    // Validar total
    if (typeof order.total !== 'number' || order.total <= 0) {
        errors.push('total');
    } else if (Array.isArray(order.items) && order.items.length > 0) {
        // Verificar que el total coincida con la suma de items
        const calculatedTotal = order.items.reduce((sum, item)=>{
            return sum + item.quantity * item.price;
        }, 0);
        if (Math.abs(calculatedTotal - order.total) > 0.01) {
            errors.push('total_mismatch');
        }
    }
    // Validar dirección de envío
    const addressValidation = validateAddress(order.shipping_address);
    if (!addressValidation.isValid) {
        errors.push('shipping_address');
    }
    // Validar método de pago
    if (!order.payment_method || typeof order.payment_method !== 'string') {
        errors.push('payment_method');
    }
    return {
        isValid: errors.length === 0,
        errors
    };
}
function validatePaymentData(payment) {
    const errors = [];
    if (!payment || typeof payment !== 'object') {
        return {
            isValid: false,
            errors: [
                'invalid_type'
            ]
        };
    }
    // Validar método
    if (!payment.method || typeof payment.method !== 'string') {
        errors.push('method');
    }
    // Validar monto
    if (typeof payment.amount !== 'number' || payment.amount <= 0) {
        errors.push('amount');
    }
    // Validar moneda
    if (!validateCurrency(payment.currency)) {
        errors.push('currency');
    }
    // Validaciones específicas para MercadoPago
    if (payment.method === 'mercadopago') {
        if (payment.payer && !validateEmail(payment.payer.email)) {
            errors.push('payer_email');
        }
    }
    return {
        isValid: errors.length === 0,
        errors
    };
}
function validateAddress(address) {
    const errors = [];
    if (!address || typeof address !== 'object') {
        return {
            isValid: false,
            errors: [
                'invalid_type'
            ]
        };
    }
    // Validar campos requeridos básicos
    const requiredFields = [
        'street',
        'city',
        'postal_code',
        'country'
    ];
    requiredFields.forEach((field)=>{
        if (!address[field] || typeof address[field] !== 'string' || address[field].trim() === '') {
            errors.push(field);
        }
    });
    // Validar código postal por país
    if (address.country && address.postal_code) {
        const postalCodeValid = validatePostalCode(address.postal_code, address.country);
        if (!postalCodeValid) {
            errors.push('postal_code_format');
        }
    }
    return {
        isValid: errors.length === 0,
        errors
    };
}
// ===================================
// VALIDACIÓN DE CÓDIGO POSTAL
// ===================================
function validatePostalCode(postalCode, country) {
    const patterns = {
        Argentina: /^\d{4}$/,
        USA: /^\d{5}(-\d{4})?$/,
        US: /^\d{5}(-\d{4})?$/,
        Brazil: /^\d{5}-\d{3}$/,
        Chile: /^\d{7}$/,
        Canada: /^[A-Za-z]\d[A-Za-z] \d[A-Za-z]\d$/,
        UK: /^[A-Z]{1,2}\d[A-Z\d]? \d[A-Z]{2}$/i,
        Germany: /^\d{5}$/,
        France: /^\d{5}$/,
        Spain: /^\d{5}$/,
        Italy: /^\d{5}$/,
        Mexico: /^\d{5}$/
    };
    const pattern = patterns[country];
    return pattern ? pattern.test(postalCode) : true // Si no hay patrón, aceptar
    ;
}
function validateCurrency(currency) {
    if (!currency || typeof currency !== 'string') {
        return false;
    }
    const supportedCurrencies = [
        'ARS',
        'USD',
        'EUR',
        'BRL',
        'CLP',
        'UYU'
    ];
    return supportedCurrencies.includes(currency.toUpperCase());
}
function validateQuantity(quantity) {
    if (typeof quantity !== 'number') {
        return false;
    }
    // Debe ser un entero positivo
    if (!Number.isInteger(quantity) || quantity <= 0) {
        return false;
    }
    // Límite máximo de cantidad
    if (quantity > 999) {
        return false;
    }
    return true;
}
function validateDiscount(discount) {
    if (!discount || typeof discount !== 'object') {
        return false;
    }
    // Validar tipo
    if (![
        'percentage',
        'fixed'
    ].includes(discount.type)) {
        return false;
    }
    // Validar valor
    if (typeof discount.value !== 'number' || discount.value < 0) {
        return false;
    }
    // Validaciones específicas por tipo
    if (discount.type === 'percentage') {
        // Porcentaje no puede ser mayor a 100
        if (discount.value > 100) {
            return false;
        }
    }
    if (discount.type === 'fixed') {
        // Descuento fijo debe tener moneda
        if (!discount.currency || !validateCurrency(discount.currency)) {
            return false;
        }
    }
    return true;
}
function sanitizeString(input) {
    if (typeof input !== 'string') {
        return '';
    }
    return input.replace(/<script[^>]*>.*?<\/script>/gi, '') // Remover scripts
    .replace(/<[^>]*>/g, '') // Remover HTML tags
    .replace(/javascript:/gi, '') // Remover javascript:
    .replace(/on\w+=/gi, '') // Remover event handlers
    .trim();
}
function validateRequiredFields(obj, requiredFields) {
    const errors = [];
    if (!obj || typeof obj !== 'object') {
        return {
            isValid: false,
            errors: [
                'invalid_object'
            ]
        };
    }
    requiredFields.forEach((field)=>{
        if (!(field in obj) || obj[field] === null || obj[field] === undefined || obj[field] === '') {
            errors.push(field);
        }
    });
    return {
        isValid: errors.length === 0,
        errors
    };
}
function validateNumberRange(value, min, max) {
    if (typeof value !== 'number') {
        return false;
    }
    return value >= min && value <= max;
}
function validateDate(date) {
    if (!date) {
        return false;
    }
    const parsedDate = new Date(date);
    return !isNaN(parsedDate.getTime());
}
function validateURL(url) {
    if (!url || typeof url !== 'string') {
        return false;
    }
    try {
        new URL(url);
        return true;
    } catch  {
        return false;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx1dGlsc1xcdmFsaWRhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFUyBERSBWQUxJREFDScOTTlxuLy8gRnVuY2lvbmVzIHBhcmEgdmFsaWRhciBkYXRvcyBjcsOtdGljb3MgZGVsIHNpc3RlbWFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XG4gIGlzVmFsaWQ6IGJvb2xlYW5cbiAgZXJyb3JzOiBzdHJpbmdbXVxuICBtZXNzYWdlPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdERhdGEge1xuICBuYW1lOiBzdHJpbmdcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgcHJpY2U6IG51bWJlclxuICBzdG9jazogbnVtYmVyXG4gIGNhdGVnb3J5X2lkOiBudW1iZXJcbiAgYnJhbmQ6IHN0cmluZ1xuICBpbWFnZXM6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JkZXJJdGVtIHtcbiAgcHJvZHVjdF9pZDogbnVtYmVyXG4gIHF1YW50aXR5OiBudW1iZXJcbiAgcHJpY2U6IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkZHJlc3Mge1xuICBzdHJlZXQ6IHN0cmluZ1xuICBjaXR5OiBzdHJpbmdcbiAgc3RhdGU6IHN0cmluZ1xuICBwb3N0YWxfY29kZTogc3RyaW5nXG4gIGNvdW50cnk6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yZGVyRGF0YSB7XG4gIHVzZXJfaWQ6IHN0cmluZ1xuICBpdGVtczogT3JkZXJJdGVtW11cbiAgdG90YWw6IG51bWJlclxuICBzaGlwcGluZ19hZGRyZXNzOiBBZGRyZXNzXG4gIHBheW1lbnRfbWV0aG9kOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50RGF0YSB7XG4gIG1ldGhvZDogc3RyaW5nXG4gIGFtb3VudDogbnVtYmVyXG4gIGN1cnJlbmN5OiBzdHJpbmdcbiAgcGF5bWVudF9tZXRob2RfaWQ/OiBzdHJpbmdcbiAgaW5zdGFsbG1lbnRzPzogbnVtYmVyXG4gIHBheWVyPzoge1xuICAgIGVtYWlsOiBzdHJpbmdcbiAgICBpZGVudGlmaWNhdGlvbj86IHtcbiAgICAgIHR5cGU6IHN0cmluZ1xuICAgICAgbnVtYmVyOiBzdHJpbmdcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaXNjb3VudERhdGEge1xuICB0eXBlOiAncGVyY2VudGFnZScgfCAnZml4ZWQnXG4gIHZhbHVlOiBudW1iZXJcbiAgY3VycmVuY3k/OiBzdHJpbmdcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZBTElEQUNJw5NOIERFIEVNQUlMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbDogYW55KTogYm9vbGVhbiB7XG4gIC8vIEhhbmRsZSBudWxsLCB1bmRlZmluZWQsIGFuZCBub24tc3RyaW5nIHZhbHVlc1xuICBpZiAoIWVtYWlsIHx8IHR5cGVvZiBlbWFpbCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFZhbGlkYXIgbG9uZ2l0dWQgdG90YWwgZGVsIGVtYWlsXG4gIGlmIChlbWFpbC5sZW5ndGggPiAyNTQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFZhbGlkYXIgcXVlIG5vIGVtcGllY2UgbyB0ZXJtaW5lIGNvbiBwdW50b1xuICBpZiAoZW1haWwuc3RhcnRzV2l0aCgnLicpIHx8IGVtYWlsLmVuZHNXaXRoKCcuJykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFZhbGlkYXIgcXVlIHRlbmdhIGV4YWN0YW1lbnRlIHVuIEBcbiAgaWYgKGVtYWlsLnNwbGl0KCdAJykubGVuZ3RoICE9PSAyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBWYWxpZGFyIGxvbmdpdHVkIGRlIHBhcnRlcyBsb2NhbGVzIHkgZG9taW5pb1xuICBjb25zdCBbbG9jYWxQYXJ0LCBkb21haW5dID0gZW1haWwuc3BsaXQoJ0AnKVxuICBpZiAobG9jYWxQYXJ0Lmxlbmd0aCA9PT0gMCB8fCBsb2NhbFBhcnQubGVuZ3RoID4gNjQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBpZiAoZG9tYWluLmxlbmd0aCA9PT0gMCB8fCBkb21haW4ubGVuZ3RoID4gMjUzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBWYWxpZGFyIHF1ZSBubyB0ZW5nYSBwdW50b3MgY29uc2VjdXRpdm9zXG4gIGlmIChlbWFpbC5pbmNsdWRlcygnLi4nKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gRWwgZG9taW5pbyBkZWJlIHRlbmVyIGFsIG1lbm9zIHVuIHB1bnRvIChUTEQgcmVxdWVyaWRvKVxuICBpZiAoIWRvbWFpbi5pbmNsdWRlcygnLicpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBSZWdleCBwYXJhIHZhbGlkYWNpw7NuIGRlIGVtYWlsXG4gIGNvbnN0IGVtYWlsUmVnZXggPVxuICAgIC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSskL1xuXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QoZW1haWwpXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWQUxJREFDScOTTiBERSBDT05UUkFTRcORQVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQ6IGFueSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cbiAgbGV0IG1lc3NhZ2UgPSAnJ1xuXG4gIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yczogWydpbnZhbGlkX3R5cGUnXSxcbiAgICAgIG1lc3NhZ2U6ICdMYSBjb250cmFzZcOxYSBkZWJlIHNlciB1bmEgY2FkZW5hIGRlIHRleHRvJyxcbiAgICB9XG4gIH1cblxuICAvLyBWYWxpZGFyIGxvbmdpdHVkIG3DrW5pbWFcbiAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICBlcnJvcnMucHVzaCgnbGVuZ3RoJylcbiAgfVxuXG4gIC8vIFZhbGlkYXIgbWF5w7pzY3VsYVxuICBpZiAoIS9bQS1aXS8udGVzdChwYXNzd29yZCkpIHtcbiAgICBlcnJvcnMucHVzaCgndXBwZXJjYXNlJylcbiAgfVxuXG4gIC8vIFZhbGlkYXIgbWluw7pzY3VsYVxuICBpZiAoIS9bYS16XS8udGVzdChwYXNzd29yZCkpIHtcbiAgICBlcnJvcnMucHVzaCgnbG93ZXJjYXNlJylcbiAgfVxuXG4gIC8vIFZhbGlkYXIgbsO6bWVyb1xuICBpZiAoIS9cXGQvLnRlc3QocGFzc3dvcmQpKSB7XG4gICAgZXJyb3JzLnB1c2goJ251bWJlcicpXG4gIH1cblxuICAvLyBWYWxpZGFyIGNhcsOhY3RlciBlc3BlY2lhbFxuICBpZiAoIS9bIUAjJCVeJiooKV8rXFwtPVxcW1xcXXt9Oyc6XCJcXFxcfCwuPD5cXC8/XS8udGVzdChwYXNzd29yZCkpIHtcbiAgICBlcnJvcnMucHVzaCgnc3BlY2lhbCcpXG4gIH1cblxuICAvLyBHZW5lcmFyIG1lbnNhamUgZGUgZXJyb3JcbiAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IHtcbiAgICAgIGxlbmd0aDogJ2FsIG1lbm9zIDggY2FyYWN0ZXJlcycsXG4gICAgICB1cHBlcmNhc2U6ICdhbCBtZW5vcyB1bmEgbGV0cmEgbWF5w7pzY3VsYScsXG4gICAgICBsb3dlcmNhc2U6ICdhbCBtZW5vcyB1bmEgbGV0cmEgbWluw7pzY3VsYScsXG4gICAgICBudW1iZXI6ICdhbCBtZW5vcyB1biBuw7ptZXJvJyxcbiAgICAgIHNwZWNpYWw6ICdhbCBtZW5vcyB1biBjYXLDoWN0ZXIgZXNwZWNpYWwnLFxuICAgIH1cblxuICAgIG1lc3NhZ2UgPSBgTGEgY29udHJhc2XDsWEgZGViZSBjb250ZW5lcjogJHtlcnJvcnMubWFwKGUgPT4gZXJyb3JNZXNzYWdlc1tlIGFzIGtleW9mIHR5cGVvZiBlcnJvck1lc3NhZ2VzXSkuam9pbignLCAnKX1gXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzLFxuICAgIG1lc3NhZ2UsXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZBTElEQUNJw5NOIERFIFRFTMOJRk9OT1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGhvbmUocGhvbmU6IGFueSwgY291bnRyeTogJ0FSJyB8ICdJTlRFUk5BVElPTkFMJyA9ICdBUicpOiBib29sZWFuIHtcbiAgaWYgKCFwaG9uZSB8fCB0eXBlb2YgcGhvbmUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBMaW1waWFyIGVsIHRlbMOpZm9ubyBkZSBlc3BhY2lvcyB5IGNhcmFjdGVyZXMgZXNwZWNpYWxlc1xuICBjb25zdCBjbGVhblBob25lID0gcGhvbmUucmVwbGFjZSgvW1xcc1xcLVxcKFxcKV0vZywgJycpXG5cbiAgaWYgKGNvdW50cnkgPT09ICdBUicpIHtcbiAgICAvLyBWYWxpZGFyIHRlbMOpZm9ub3MgYXJnZW50aW5vc1xuICAgIC8vIEZvcm1hdG9zIHbDoWxpZG9zOiArNTQxMTIzNDU2Nzg5LCAxMTIzNDU2Nzg5LCAwMTEyMzQ1Njc4OVxuICAgIGNvbnN0IGFyZ1Bob25lUmVnZXggPSAvXihcXCs1NCk/MD8xMVxcZHs4fSR8XihcXCs1NCk/MD9cXGR7MTB9JC9cbiAgICByZXR1cm4gYXJnUGhvbmVSZWdleC50ZXN0KGNsZWFuUGhvbmUpXG4gIH1cblxuICBpZiAoY291bnRyeSA9PT0gJ0lOVEVSTkFUSU9OQUwnKSB7XG4gICAgLy8gVmFsaWRhciBmb3JtYXRvIGludGVybmFjaW9uYWwgYsOhc2ljb1xuICAgIGNvbnN0IGludFBob25lUmVnZXggPSAvXlxcK1xcZHsxMCwxNX0kL1xuICAgIHJldHVybiBpbnRQaG9uZVJlZ2V4LnRlc3QoY2xlYW5QaG9uZSlcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgREFUT1MgREUgUFJPRFVDVE9cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVByb2R1Y3REYXRhKHByb2R1Y3Q6IGFueSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cblxuICBpZiAoIXByb2R1Y3QgfHwgdHlwZW9mIHByb2R1Y3QgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3JzOiBbJ2ludmFsaWRfdHlwZSddLFxuICAgICAgbWVzc2FnZTogJ0xvcyBkYXRvcyBkZWwgcHJvZHVjdG8gZGViZW4gc2VyIHVuIG9iamV0bycsXG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhciBub21icmVcbiAgaWYgKCFwcm9kdWN0Lm5hbWUgfHwgdHlwZW9mIHByb2R1Y3QubmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICBlcnJvcnMucHVzaCgnbmFtZScpXG4gIH0gZWxzZSBpZiAocHJvZHVjdC5uYW1lLmxlbmd0aCA8IDMgfHwgcHJvZHVjdC5uYW1lLmxlbmd0aCA+IDIwMCkge1xuICAgIGVycm9ycy5wdXNoKCduYW1lX2xlbmd0aCcpXG4gIH0gZWxzZSBpZiAoLzxzY3JpcHR8amF2YXNjcmlwdDp8b25cXHcrPS9pLnRlc3QocHJvZHVjdC5uYW1lKSkge1xuICAgIGVycm9ycy5wdXNoKCduYW1lX3NlY3VyaXR5JylcbiAgfVxuXG4gIC8vIFZhbGlkYXIgcHJlY2lvXG4gIGlmICh0eXBlb2YgcHJvZHVjdC5wcmljZSAhPT0gJ251bWJlcicgfHwgcHJvZHVjdC5wcmljZSA8PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ3ByaWNlJylcbiAgfSBlbHNlIGlmIChwcm9kdWN0LnByaWNlID4gOTk5OTk5OSkge1xuICAgIGVycm9ycy5wdXNoKCdwcmljZV90b29faGlnaCcpXG4gIH1cblxuICAvLyBWYWxpZGFyIHN0b2NrXG4gIGlmICh0eXBlb2YgcHJvZHVjdC5zdG9jayAhPT0gJ251bWJlcicgfHwgcHJvZHVjdC5zdG9jayA8IDApIHtcbiAgICBlcnJvcnMucHVzaCgnc3RvY2snKVxuICB9XG5cbiAgLy8gVmFsaWRhciBjYXRlZ29yw61hXG4gIGlmICghcHJvZHVjdC5jYXRlZ29yeV9pZCB8fCB0eXBlb2YgcHJvZHVjdC5jYXRlZ29yeV9pZCAhPT0gJ251bWJlcicpIHtcbiAgICBlcnJvcnMucHVzaCgnY2F0ZWdvcnlfaWQnKVxuICB9XG5cbiAgLy8gVmFsaWRhciBtYXJjYVxuICBpZiAoIXByb2R1Y3QuYnJhbmQgfHwgdHlwZW9mIHByb2R1Y3QuYnJhbmQgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ2JyYW5kJylcbiAgfVxuXG4gIC8vIFZhbGlkYXIgaW3DoWdlbmVzXG4gIGlmICghQXJyYXkuaXNBcnJheShwcm9kdWN0LmltYWdlcykgfHwgcHJvZHVjdC5pbWFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ2ltYWdlcycpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWQUxJREFDScOTTiBERSBEQVRPUyBERSBPUkRFTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlT3JkZXJEYXRhKG9yZGVyOiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdXG5cbiAgaWYgKCFvcmRlciB8fCB0eXBlb2Ygb3JkZXIgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3JzOiBbJ2ludmFsaWRfdHlwZSddLFxuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXIgdXNlcl9pZFxuICBpZiAoIW9yZGVyLnVzZXJfaWQgfHwgdHlwZW9mIG9yZGVyLnVzZXJfaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ3VzZXJfaWQnKVxuICB9XG5cbiAgLy8gVmFsaWRhciBpdGVtc1xuICBpZiAoIUFycmF5LmlzQXJyYXkob3JkZXIuaXRlbXMpIHx8IG9yZGVyLml0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdpdGVtc19lbXB0eScpXG4gIH0gZWxzZSB7XG4gICAgLy8gVmFsaWRhciBjYWRhIGl0ZW1cbiAgICBvcmRlci5pdGVtcy5mb3JFYWNoKChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGlmICghaXRlbS5wcm9kdWN0X2lkIHx8IHR5cGVvZiBpdGVtLnByb2R1Y3RfaWQgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBpdGVtXyR7aW5kZXh9X3Byb2R1Y3RfaWRgKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtLnF1YW50aXR5IHx8IHR5cGVvZiBpdGVtLnF1YW50aXR5ICE9PSAnbnVtYmVyJyB8fCBpdGVtLnF1YW50aXR5IDw9IDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYGl0ZW1fJHtpbmRleH1fcXVhbnRpdHlgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnByaWNlICE9PSAnbnVtYmVyJyB8fCBpdGVtLnByaWNlIDw9IDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYGl0ZW1fJHtpbmRleH1fcHJpY2VgKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBWYWxpZGFyIHRvdGFsXG4gIGlmICh0eXBlb2Ygb3JkZXIudG90YWwgIT09ICdudW1iZXInIHx8IG9yZGVyLnRvdGFsIDw9IDApIHtcbiAgICBlcnJvcnMucHVzaCgndG90YWwnKVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob3JkZXIuaXRlbXMpICYmIG9yZGVyLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHRvdGFsIGNvaW5jaWRhIGNvbiBsYSBzdW1hIGRlIGl0ZW1zXG4gICAgY29uc3QgY2FsY3VsYXRlZFRvdGFsID0gb3JkZXIuaXRlbXMucmVkdWNlKChzdW06IG51bWJlciwgaXRlbTogYW55KSA9PiB7XG4gICAgICByZXR1cm4gc3VtICsgaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJpY2VcbiAgICB9LCAwKVxuXG4gICAgaWYgKE1hdGguYWJzKGNhbGN1bGF0ZWRUb3RhbCAtIG9yZGVyLnRvdGFsKSA+IDAuMDEpIHtcbiAgICAgIGVycm9ycy5wdXNoKCd0b3RhbF9taXNtYXRjaCcpXG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhciBkaXJlY2Npw7NuIGRlIGVudsOtb1xuICBjb25zdCBhZGRyZXNzVmFsaWRhdGlvbiA9IHZhbGlkYXRlQWRkcmVzcyhvcmRlci5zaGlwcGluZ19hZGRyZXNzKVxuICBpZiAoIWFkZHJlc3NWYWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICBlcnJvcnMucHVzaCgnc2hpcHBpbmdfYWRkcmVzcycpXG4gIH1cblxuICAvLyBWYWxpZGFyIG3DqXRvZG8gZGUgcGFnb1xuICBpZiAoIW9yZGVyLnBheW1lbnRfbWV0aG9kIHx8IHR5cGVvZiBvcmRlci5wYXltZW50X21ldGhvZCAhPT0gJ3N0cmluZycpIHtcbiAgICBlcnJvcnMucHVzaCgncGF5bWVudF9tZXRob2QnKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9ycyxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgREFUT1MgREUgUEFHT1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGF5bWVudERhdGEocGF5bWVudDogYW55KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXVxuXG4gIGlmICghcGF5bWVudCB8fCB0eXBlb2YgcGF5bWVudCAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICBlcnJvcnM6IFsnaW52YWxpZF90eXBlJ10sXG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhciBtw6l0b2RvXG4gIGlmICghcGF5bWVudC5tZXRob2QgfHwgdHlwZW9mIHBheW1lbnQubWV0aG9kICE9PSAnc3RyaW5nJykge1xuICAgIGVycm9ycy5wdXNoKCdtZXRob2QnKVxuICB9XG5cbiAgLy8gVmFsaWRhciBtb250b1xuICBpZiAodHlwZW9mIHBheW1lbnQuYW1vdW50ICE9PSAnbnVtYmVyJyB8fCBwYXltZW50LmFtb3VudCA8PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ2Ftb3VudCcpXG4gIH1cblxuICAvLyBWYWxpZGFyIG1vbmVkYVxuICBpZiAoIXZhbGlkYXRlQ3VycmVuY3kocGF5bWVudC5jdXJyZW5jeSkpIHtcbiAgICBlcnJvcnMucHVzaCgnY3VycmVuY3knKVxuICB9XG5cbiAgLy8gVmFsaWRhY2lvbmVzIGVzcGVjw61maWNhcyBwYXJhIE1lcmNhZG9QYWdvXG4gIGlmIChwYXltZW50Lm1ldGhvZCA9PT0gJ21lcmNhZG9wYWdvJykge1xuICAgIGlmIChwYXltZW50LnBheWVyICYmICF2YWxpZGF0ZUVtYWlsKHBheW1lbnQucGF5ZXIuZW1haWwpKSB7XG4gICAgICBlcnJvcnMucHVzaCgncGF5ZXJfZW1haWwnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZBTElEQUNJw5NOIERFIERJUkVDQ0nDk05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFkZHJlc3MoYWRkcmVzczogYW55KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXVxuXG4gIGlmICghYWRkcmVzcyB8fCB0eXBlb2YgYWRkcmVzcyAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICBlcnJvcnM6IFsnaW52YWxpZF90eXBlJ10sXG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhciBjYW1wb3MgcmVxdWVyaWRvcyBiw6FzaWNvc1xuICBjb25zdCByZXF1aXJlZEZpZWxkcyA9IFsnc3RyZWV0JywgJ2NpdHknLCAncG9zdGFsX2NvZGUnLCAnY291bnRyeSddXG4gIHJlcXVpcmVkRmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgIGlmICghYWRkcmVzc1tmaWVsZF0gfHwgdHlwZW9mIGFkZHJlc3NbZmllbGRdICE9PSAnc3RyaW5nJyB8fCBhZGRyZXNzW2ZpZWxkXS50cmltKCkgPT09ICcnKSB7XG4gICAgICBlcnJvcnMucHVzaChmaWVsZClcbiAgICB9XG4gIH0pXG5cbiAgLy8gVmFsaWRhciBjw7NkaWdvIHBvc3RhbCBwb3IgcGHDrXNcbiAgaWYgKGFkZHJlc3MuY291bnRyeSAmJiBhZGRyZXNzLnBvc3RhbF9jb2RlKSB7XG4gICAgY29uc3QgcG9zdGFsQ29kZVZhbGlkID0gdmFsaWRhdGVQb3N0YWxDb2RlKGFkZHJlc3MucG9zdGFsX2NvZGUsIGFkZHJlc3MuY291bnRyeSlcbiAgICBpZiAoIXBvc3RhbENvZGVWYWxpZCkge1xuICAgICAgZXJyb3JzLnB1c2goJ3Bvc3RhbF9jb2RlX2Zvcm1hdCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9ycyxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgQ8OTRElHTyBQT1NUQUxcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcsIGNvdW50cnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBwYXR0ZXJuczogeyBba2V5OiBzdHJpbmddOiBSZWdFeHAgfSA9IHtcbiAgICBBcmdlbnRpbmE6IC9eXFxkezR9JC8sXG4gICAgVVNBOiAvXlxcZHs1fSgtXFxkezR9KT8kLyxcbiAgICBVUzogL15cXGR7NX0oLVxcZHs0fSk/JC8sXG4gICAgQnJhemlsOiAvXlxcZHs1fS1cXGR7M30kLyxcbiAgICBDaGlsZTogL15cXGR7N30kLyxcbiAgICBDYW5hZGE6IC9eW0EtWmEtel1cXGRbQS1aYS16XSBcXGRbQS1aYS16XVxcZCQvLFxuICAgIFVLOiAvXltBLVpdezEsMn1cXGRbQS1aXFxkXT8gXFxkW0EtWl17Mn0kL2ksXG4gICAgR2VybWFueTogL15cXGR7NX0kLyxcbiAgICBGcmFuY2U6IC9eXFxkezV9JC8sXG4gICAgU3BhaW46IC9eXFxkezV9JC8sXG4gICAgSXRhbHk6IC9eXFxkezV9JC8sXG4gICAgTWV4aWNvOiAvXlxcZHs1fSQvLFxuICB9XG5cbiAgY29uc3QgcGF0dGVybiA9IHBhdHRlcm5zW2NvdW50cnldXG4gIHJldHVybiBwYXR0ZXJuID8gcGF0dGVybi50ZXN0KHBvc3RhbENvZGUpIDogdHJ1ZSAvLyBTaSBubyBoYXkgcGF0csOzbiwgYWNlcHRhclxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgTU9ORURBXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDdXJyZW5jeShjdXJyZW5jeTogYW55KTogYm9vbGVhbiB7XG4gIGlmICghY3VycmVuY3kgfHwgdHlwZW9mIGN1cnJlbmN5ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3Qgc3VwcG9ydGVkQ3VycmVuY2llcyA9IFsnQVJTJywgJ1VTRCcsICdFVVInLCAnQlJMJywgJ0NMUCcsICdVWVUnXVxuICByZXR1cm4gc3VwcG9ydGVkQ3VycmVuY2llcy5pbmNsdWRlcyhjdXJyZW5jeS50b1VwcGVyQ2FzZSgpKVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgQ0FOVElEQURcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVF1YW50aXR5KHF1YW50aXR5OiBhbnkpOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiBxdWFudGl0eSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIERlYmUgc2VyIHVuIGVudGVybyBwb3NpdGl2b1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIocXVhbnRpdHkpIHx8IHF1YW50aXR5IDw9IDApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIEzDrW1pdGUgbcOheGltbyBkZSBjYW50aWRhZFxuICBpZiAocXVhbnRpdHkgPiA5OTkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWQUxJREFDScOTTiBERSBERVNDVUVOVE9cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURpc2NvdW50KGRpc2NvdW50OiBhbnkpOiBib29sZWFuIHtcbiAgaWYgKCFkaXNjb3VudCB8fCB0eXBlb2YgZGlzY291bnQgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBWYWxpZGFyIHRpcG9cbiAgaWYgKCFbJ3BlcmNlbnRhZ2UnLCAnZml4ZWQnXS5pbmNsdWRlcyhkaXNjb3VudC50eXBlKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gVmFsaWRhciB2YWxvclxuICBpZiAodHlwZW9mIGRpc2NvdW50LnZhbHVlICE9PSAnbnVtYmVyJyB8fCBkaXNjb3VudC52YWx1ZSA8IDApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFZhbGlkYWNpb25lcyBlc3BlY8OtZmljYXMgcG9yIHRpcG9cbiAgaWYgKGRpc2NvdW50LnR5cGUgPT09ICdwZXJjZW50YWdlJykge1xuICAgIC8vIFBvcmNlbnRhamUgbm8gcHVlZGUgc2VyIG1heW9yIGEgMTAwXG4gICAgaWYgKGRpc2NvdW50LnZhbHVlID4gMTAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBpZiAoZGlzY291bnQudHlwZSA9PT0gJ2ZpeGVkJykge1xuICAgIC8vIERlc2N1ZW50byBmaWpvIGRlYmUgdGVuZXIgbW9uZWRhXG4gICAgaWYgKCFkaXNjb3VudC5jdXJyZW5jeSB8fCAhdmFsaWRhdGVDdXJyZW5jeShkaXNjb3VudC5jdXJyZW5jeSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVVElMSURBREVTIEFESUNJT05BTEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFNhbml0aXphIHVuYSBjYWRlbmEgZGUgdGV4dG8gcmVtb3ZpZW5kbyBjYXJhY3RlcmVzIHBlbGlncm9zb3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3RyaW5nKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgcmV0dXJuIGlucHV0XG4gICAgLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4uKj88XFwvc2NyaXB0Pi9naSwgJycpIC8vIFJlbW92ZXIgc2NyaXB0c1xuICAgIC5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmVyIEhUTUwgdGFnc1xuICAgIC5yZXBsYWNlKC9qYXZhc2NyaXB0Oi9naSwgJycpIC8vIFJlbW92ZXIgamF2YXNjcmlwdDpcbiAgICAucmVwbGFjZSgvb25cXHcrPS9naSwgJycpIC8vIFJlbW92ZXIgZXZlbnQgaGFuZGxlcnNcbiAgICAudHJpbSgpXG59XG5cbi8qKlxuICogVmFsaWRhIHF1ZSB1biBvYmpldG8gdGVuZ2EgdG9kYXMgbGFzIHByb3BpZWRhZGVzIHJlcXVlcmlkYXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWlyZWRGaWVsZHMob2JqOiBhbnksIHJlcXVpcmVkRmllbGRzOiBzdHJpbmdbXSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cblxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yczogWydpbnZhbGlkX29iamVjdCddLFxuICAgIH1cbiAgfVxuXG4gIHJlcXVpcmVkRmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgIGlmICghKGZpZWxkIGluIG9iaikgfHwgb2JqW2ZpZWxkXSA9PT0gbnVsbCB8fCBvYmpbZmllbGRdID09PSB1bmRlZmluZWQgfHwgb2JqW2ZpZWxkXSA9PT0gJycpIHtcbiAgICAgIGVycm9ycy5wdXNoKGZpZWxkKVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzLFxuICB9XG59XG5cbi8qKlxuICogVmFsaWRhIHVuIHJhbmdvIG51bcOpcmljb1xuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXJSYW5nZSh2YWx1ZTogYW55LCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSA+PSBtaW4gJiYgdmFsdWUgPD0gbWF4XG59XG5cbi8qKlxuICogVmFsaWRhIHVuYSBmZWNoYVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVEYXRlKGRhdGU6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoIWRhdGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKVxuICByZXR1cm4gIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKVxufVxuXG4vKipcbiAqIFZhbGlkYSB1bmEgVVJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVVSTCh1cmw6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHVybClcbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIl0sIm5hbWVzIjpbInNhbml0aXplU3RyaW5nIiwidmFsaWRhdGVBZGRyZXNzIiwidmFsaWRhdGVDdXJyZW5jeSIsInZhbGlkYXRlRGF0ZSIsInZhbGlkYXRlRGlzY291bnQiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVOdW1iZXJSYW5nZSIsInZhbGlkYXRlT3JkZXJEYXRhIiwidmFsaWRhdGVQYXNzd29yZCIsInZhbGlkYXRlUGF5bWVudERhdGEiLCJ2YWxpZGF0ZVBob25lIiwidmFsaWRhdGVQcm9kdWN0RGF0YSIsInZhbGlkYXRlUXVhbnRpdHkiLCJ2YWxpZGF0ZVJlcXVpcmVkRmllbGRzIiwidmFsaWRhdGVVUkwiLCJlbWFpbCIsImxlbmd0aCIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInNwbGl0IiwibG9jYWxQYXJ0IiwiZG9tYWluIiwiaW5jbHVkZXMiLCJlbWFpbFJlZ2V4IiwidGVzdCIsInBhc3N3b3JkIiwiZXJyb3JzIiwibWVzc2FnZSIsImlzVmFsaWQiLCJwdXNoIiwiZXJyb3JNZXNzYWdlcyIsInVwcGVyY2FzZSIsImxvd2VyY2FzZSIsIm51bWJlciIsInNwZWNpYWwiLCJtYXAiLCJlIiwiam9pbiIsInBob25lIiwiY291bnRyeSIsImNsZWFuUGhvbmUiLCJyZXBsYWNlIiwiYXJnUGhvbmVSZWdleCIsImludFBob25lUmVnZXgiLCJwcm9kdWN0IiwibmFtZSIsInByaWNlIiwic3RvY2siLCJjYXRlZ29yeV9pZCIsImJyYW5kIiwiQXJyYXkiLCJpc0FycmF5IiwiaW1hZ2VzIiwib3JkZXIiLCJ1c2VyX2lkIiwiaXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwicHJvZHVjdF9pZCIsInF1YW50aXR5IiwidG90YWwiLCJjYWxjdWxhdGVkVG90YWwiLCJyZWR1Y2UiLCJzdW0iLCJNYXRoIiwiYWJzIiwiYWRkcmVzc1ZhbGlkYXRpb24iLCJzaGlwcGluZ19hZGRyZXNzIiwicGF5bWVudF9tZXRob2QiLCJwYXltZW50IiwibWV0aG9kIiwiYW1vdW50IiwiY3VycmVuY3kiLCJwYXllciIsImFkZHJlc3MiLCJyZXF1aXJlZEZpZWxkcyIsImZpZWxkIiwidHJpbSIsInBvc3RhbF9jb2RlIiwicG9zdGFsQ29kZVZhbGlkIiwidmFsaWRhdGVQb3N0YWxDb2RlIiwicG9zdGFsQ29kZSIsInBhdHRlcm5zIiwiQXJnZW50aW5hIiwiVVNBIiwiVVMiLCJCcmF6aWwiLCJDaGlsZSIsIkNhbmFkYSIsIlVLIiwiR2VybWFueSIsIkZyYW5jZSIsIlNwYWluIiwiSXRhbHkiLCJNZXhpY28iLCJwYXR0ZXJuIiwic3VwcG9ydGVkQ3VycmVuY2llcyIsInRvVXBwZXJDYXNlIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiZGlzY291bnQiLCJ0eXBlIiwidmFsdWUiLCJpbnB1dCIsIm9iaiIsInVuZGVmaW5lZCIsIm1pbiIsIm1heCIsImRhdGUiLCJwYXJzZWREYXRlIiwiRGF0ZSIsImlzTmFOIiwiZ2V0VGltZSIsInVybCIsIlVSTCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDJCQUEyQjtBQUMzQixvREFBb0Q7QUFDcEQsc0NBQXNDOzs7Ozs7Ozs7Ozs7UUEyZnRCQTtlQUFBQTs7UUF2SUFDO2VBQUFBOztRQTREQUM7ZUFBQUE7O1FBK0hBQztlQUFBQTs7UUE1RkFDO2VBQUFBOztRQWxaQUM7ZUFBQUE7O1FBbWVBQztlQUFBQTs7UUE5UkFDO2VBQUFBOztRQWxKQUM7ZUFBQUE7O1FBc05BQztlQUFBQTs7UUF6SkFDO2VBQUFB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