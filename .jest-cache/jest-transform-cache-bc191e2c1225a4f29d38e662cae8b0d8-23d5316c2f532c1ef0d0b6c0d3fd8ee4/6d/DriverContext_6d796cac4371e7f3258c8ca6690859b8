4be554b92cd1f2ed5665dfbd9431fc03
/**
 * Contexto global para la aplicación de drivers
 * Maneja estado de ubicación, rutas asignadas y sincronización en tiempo real
 */ 'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DriverProvider () {
        return DriverProvider;
    },
    get useDriver () {
        return useDriver;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _react1 = require("next-auth/react");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// =====================================================
// REDUCER
// =====================================================
const initialState = {
    driver: null,
    currentRoute: null,
    assignedRoutes: [],
    currentLocation: null,
    isTracking: false,
    isOnline: false,
    notifications: [],
    loading: false,
    error: null
};
function driverReducer(state, action) {
    switch(action.type){
        case 'SET_DRIVER':
            return {
                ...state,
                driver: action.payload
            };
        case 'SET_CURRENT_ROUTE':
            return {
                ...state,
                currentRoute: action.payload
            };
        case 'SET_ASSIGNED_ROUTES':
            return {
                ...state,
                assignedRoutes: action.payload
            };
        case 'UPDATE_LOCATION':
            return {
                ...state,
                currentLocation: action.payload,
                driver: state.driver ? {
                    ...state.driver,
                    current_location: action.payload
                } : null
            };
        case 'SET_TRACKING':
            return {
                ...state,
                isTracking: action.payload
            };
        case 'SET_ONLINE':
            return {
                ...state,
                isOnline: action.payload
            };
        case 'ADD_NOTIFICATION':
            return {
                ...state,
                notifications: [
                    action.payload,
                    ...state.notifications.slice(0, 9)
                ]
            };
        case 'SET_LOADING':
            return {
                ...state,
                loading: action.payload
            };
        case 'SET_ERROR':
            return {
                ...state,
                error: action.payload
            };
        case 'START_ROUTE':
            return {
                ...state,
                currentRoute: state.assignedRoutes.find((r)=>r.id === action.payload) || null,
                assignedRoutes: state.assignedRoutes.map((route)=>route.id === action.payload ? {
                        ...route,
                        status: 'active'
                    } : route)
            };
        case 'COMPLETE_ROUTE':
            return {
                ...state,
                currentRoute: null,
                assignedRoutes: state.assignedRoutes.map((route)=>route.id === action.payload ? {
                        ...route,
                        status: 'completed'
                    } : route)
            };
        default:
            return state;
    }
}
const DriverContext = /*#__PURE__*/ (0, _react.createContext)(undefined);
function DriverProvider({ children }) {
    const [state, dispatch] = (0, _react.useReducer)(driverReducer, initialState);
    const { data: session } = (0, _react1.useSession)();
    // Inicializar driver al cargar
    (0, _react.useEffect)(()=>{
        if (session?.user?.email) {
            loadDriverData();
        }
    }, [
        session
    ]);
    // Funciones del contexto
    const loadDriverData = async ()=>{
        dispatch({
            type: 'SET_LOADING',
            payload: true
        });
        try {
            const response = await fetch('/api/driver/profile');
            const data = await response.json();
            if (data.driver) {
                dispatch({
                    type: 'SET_DRIVER',
                    payload: data.driver
                });
                dispatch({
                    type: 'SET_ASSIGNED_ROUTES',
                    payload: data.routes || []
                });
            }
        } catch (error) {
            dispatch({
                type: 'SET_ERROR',
                payload: 'Error cargando datos del driver'
            });
        } finally{
            dispatch({
                type: 'SET_LOADING',
                payload: false
            });
        }
    };
    const startLocationTracking = ()=>{
        if ('geolocation' in navigator) {
            dispatch({
                type: 'SET_TRACKING',
                payload: true
            });
            // Intentar primero con alta precisión
            const tryHighAccuracy = ()=>{
                const watchId = navigator.geolocation.watchPosition((position)=>{
                    const location = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    updateDriverLocation(location);
                }, (error)=>{
                    console.warn('High accuracy geolocation failed, trying standard accuracy:', error);
                    // Si falla con alta precisión, intentar con precisión estándar
                    tryStandardAccuracy();
                }, {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 30000
                });
                window.driverLocationWatchId = watchId;
            };
            // Función de respaldo con precisión estándar
            const tryStandardAccuracy = ()=>{
                const watchId = navigator.geolocation.watchPosition((position)=>{
                    const location = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    updateDriverLocation(location);
                }, (error)=>{
                    console.error('Error tracking location:', error);
                    dispatch({
                        type: 'SET_ERROR',
                        payload: 'Error obteniendo ubicación'
                    });
                }, {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 5000
                });
                window.driverLocationWatchId = watchId;
            };
            // Iniciar con alta precisión
            tryHighAccuracy();
        }
    };
    const stopLocationTracking = ()=>{
        dispatch({
            type: 'SET_TRACKING',
            payload: false
        });
        if (window.driverLocationWatchId) {
            navigator.geolocation.clearWatch(window.driverLocationWatchId);
        }
    };
    const updateDriverLocation = async (location)=>{
        dispatch({
            type: 'UPDATE_LOCATION',
            payload: location
        });
        // Enviar ubicación al servidor
        try {
            await fetch('/api/driver/location', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    location
                })
            });
        } catch (error) {
            console.error('Error updating location:', error);
        }
    };
    const startRoute = (routeId)=>{
        dispatch({
            type: 'START_ROUTE',
            payload: routeId
        });
        startLocationTracking();
    };
    const completeRoute = (routeId)=>{
        dispatch({
            type: 'COMPLETE_ROUTE',
            payload: routeId
        });
        stopLocationTracking();
    };
    const completeDelivery = (shipmentId)=>{
        dispatch({
            type: 'COMPLETE_DELIVERY',
            payload: shipmentId
        });
    };
    const goOnline = ()=>{
        dispatch({
            type: 'SET_ONLINE',
            payload: true
        });
        startLocationTracking();
    };
    const goOffline = ()=>{
        dispatch({
            type: 'SET_ONLINE',
            payload: false
        });
        stopLocationTracking();
    };
    const contextValue = {
        state,
        dispatch,
        startLocationTracking,
        stopLocationTracking,
        updateDriverLocation,
        startRoute,
        completeRoute,
        completeDelivery,
        goOnline,
        goOffline
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(DriverContext.Provider, {
        value: contextValue,
        children: children
    });
}
function useDriver() {
    const context = (0, _react.useContext)(DriverContext);
    if (context === undefined) {
        throw new Error('useDriver must be used within a DriverProvider');
    }
    return context;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29udGV4dHNcXERyaXZlckNvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGV4dG8gZ2xvYmFsIHBhcmEgbGEgYXBsaWNhY2nDs24gZGUgZHJpdmVyc1xuICogTWFuZWphIGVzdGFkbyBkZSB1YmljYWNpw7NuLCBydXRhcyBhc2lnbmFkYXMgeSBzaW5jcm9uaXphY2nDs24gZW4gdGllbXBvIHJlYWxcbiAqL1xuXG4ndXNlIGNsaWVudCdcblxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZHVjZXIsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9yZWFjdCdcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIEUgSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIERyaXZlciB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgcGhvbmU6IHN0cmluZ1xuICB2ZWhpY2xlX3R5cGU6IHN0cmluZ1xuICBsaWNlbnNlX3BsYXRlOiBzdHJpbmdcbiAgc3RhdHVzOiAnYXZhaWxhYmxlJyB8ICdidXN5JyB8ICdvZmZsaW5lJ1xuICBjdXJyZW50X2xvY2F0aW9uPzoge1xuICAgIGxhdDogbnVtYmVyXG4gICAgbG5nOiBudW1iZXJcbiAgfVxufVxuXG5pbnRlcmZhY2UgUm91dGVBc3NpZ25tZW50IHtcbiAgaWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgc3RhdHVzOiAncGxhbm5lZCcgfCAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnXG4gIHNoaXBtZW50czogYW55W11cbiAgd2F5cG9pbnRzOiBBcnJheTx7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9PlxuICB0b3RhbF9kaXN0YW5jZTogbnVtYmVyXG4gIGVzdGltYXRlZF90aW1lOiBudW1iZXJcbiAgb3B0aW1pemF0aW9uX3Njb3JlOiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIERyaXZlclN0YXRlIHtcbiAgZHJpdmVyOiBEcml2ZXIgfCBudWxsXG4gIGN1cnJlbnRSb3V0ZTogUm91dGVBc3NpZ25tZW50IHwgbnVsbFxuICBhc3NpZ25lZFJvdXRlczogUm91dGVBc3NpZ25tZW50W11cbiAgY3VycmVudExvY2F0aW9uOiB7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9IHwgbnVsbFxuICBpc1RyYWNraW5nOiBib29sZWFuXG4gIGlzT25saW5lOiBib29sZWFuXG4gIG5vdGlmaWNhdGlvbnM6IGFueVtdXG4gIGxvYWRpbmc6IGJvb2xlYW5cbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbn1cblxudHlwZSBEcml2ZXJBY3Rpb24gPVxuICB8IHsgdHlwZTogJ1NFVF9EUklWRVInOyBwYXlsb2FkOiBEcml2ZXIgfVxuICB8IHsgdHlwZTogJ1NFVF9DVVJSRU5UX1JPVVRFJzsgcGF5bG9hZDogUm91dGVBc3NpZ25tZW50IH1cbiAgfCB7IHR5cGU6ICdTRVRfQVNTSUdORURfUk9VVEVTJzsgcGF5bG9hZDogUm91dGVBc3NpZ25tZW50W10gfVxuICB8IHsgdHlwZTogJ1VQREFURV9MT0NBVElPTic7IHBheWxvYWQ6IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH0gfVxuICB8IHsgdHlwZTogJ1NFVF9UUkFDS0lORyc7IHBheWxvYWQ6IGJvb2xlYW4gfVxuICB8IHsgdHlwZTogJ1NFVF9PTkxJTkUnOyBwYXlsb2FkOiBib29sZWFuIH1cbiAgfCB7IHR5cGU6ICdBRERfTk9USUZJQ0FUSU9OJzsgcGF5bG9hZDogYW55IH1cbiAgfCB7IHR5cGU6ICdTRVRfTE9BRElORyc7IHBheWxvYWQ6IGJvb2xlYW4gfVxuICB8IHsgdHlwZTogJ1NFVF9FUlJPUic7IHBheWxvYWQ6IHN0cmluZyB8IG51bGwgfVxuICB8IHsgdHlwZTogJ0NPTVBMRVRFX0RFTElWRVJZJzsgcGF5bG9hZDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6ICdTVEFSVF9ST1VURSc7IHBheWxvYWQ6IHN0cmluZyB9XG4gIHwgeyB0eXBlOiAnQ09NUExFVEVfUk9VVEUnOyBwYXlsb2FkOiBzdHJpbmcgfVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkVEVUNFUlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBEcml2ZXJTdGF0ZSA9IHtcbiAgZHJpdmVyOiBudWxsLFxuICBjdXJyZW50Um91dGU6IG51bGwsXG4gIGFzc2lnbmVkUm91dGVzOiBbXSxcbiAgY3VycmVudExvY2F0aW9uOiBudWxsLFxuICBpc1RyYWNraW5nOiBmYWxzZSxcbiAgaXNPbmxpbmU6IGZhbHNlLFxuICBub3RpZmljYXRpb25zOiBbXSxcbiAgbG9hZGluZzogZmFsc2UsXG4gIGVycm9yOiBudWxsLFxufVxuXG5mdW5jdGlvbiBkcml2ZXJSZWR1Y2VyKHN0YXRlOiBEcml2ZXJTdGF0ZSwgYWN0aW9uOiBEcml2ZXJBY3Rpb24pOiBEcml2ZXJTdGF0ZSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdTRVRfRFJJVkVSJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBkcml2ZXI6IGFjdGlvbi5wYXlsb2FkIH1cblxuICAgIGNhc2UgJ1NFVF9DVVJSRU5UX1JPVVRFJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBjdXJyZW50Um91dGU6IGFjdGlvbi5wYXlsb2FkIH1cblxuICAgIGNhc2UgJ1NFVF9BU1NJR05FRF9ST1VURVMnOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGFzc2lnbmVkUm91dGVzOiBhY3Rpb24ucGF5bG9hZCB9XG5cbiAgICBjYXNlICdVUERBVEVfTE9DQVRJT04nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbjogYWN0aW9uLnBheWxvYWQsXG4gICAgICAgIGRyaXZlcjogc3RhdGUuZHJpdmVyXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLmRyaXZlcixcbiAgICAgICAgICAgICAgY3VycmVudF9sb2NhdGlvbjogYWN0aW9uLnBheWxvYWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiBudWxsLFxuICAgICAgfVxuXG4gICAgY2FzZSAnU0VUX1RSQUNLSU5HJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBpc1RyYWNraW5nOiBhY3Rpb24ucGF5bG9hZCB9XG5cbiAgICBjYXNlICdTRVRfT05MSU5FJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBpc09ubGluZTogYWN0aW9uLnBheWxvYWQgfVxuXG4gICAgY2FzZSAnQUREX05PVElGSUNBVElPTic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbm90aWZpY2F0aW9uczogW2FjdGlvbi5wYXlsb2FkLCAuLi5zdGF0ZS5ub3RpZmljYXRpb25zLnNsaWNlKDAsIDkpXSxcbiAgICAgIH1cblxuICAgIGNhc2UgJ1NFVF9MT0FESU5HJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBsb2FkaW5nOiBhY3Rpb24ucGF5bG9hZCB9XG5cbiAgICBjYXNlICdTRVRfRVJST1InOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGVycm9yOiBhY3Rpb24ucGF5bG9hZCB9XG5cbiAgICBjYXNlICdTVEFSVF9ST1VURSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgY3VycmVudFJvdXRlOiBzdGF0ZS5hc3NpZ25lZFJvdXRlcy5maW5kKHIgPT4gci5pZCA9PT0gYWN0aW9uLnBheWxvYWQpIHx8IG51bGwsXG4gICAgICAgIGFzc2lnbmVkUm91dGVzOiBzdGF0ZS5hc3NpZ25lZFJvdXRlcy5tYXAocm91dGUgPT5cbiAgICAgICAgICByb3V0ZS5pZCA9PT0gYWN0aW9uLnBheWxvYWQgPyB7IC4uLnJvdXRlLCBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0IH0gOiByb3V0ZVxuICAgICAgICApLFxuICAgICAgfVxuXG4gICAgY2FzZSAnQ09NUExFVEVfUk9VVEUnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGN1cnJlbnRSb3V0ZTogbnVsbCxcbiAgICAgICAgYXNzaWduZWRSb3V0ZXM6IHN0YXRlLmFzc2lnbmVkUm91dGVzLm1hcChyb3V0ZSA9PlxuICAgICAgICAgIHJvdXRlLmlkID09PSBhY3Rpb24ucGF5bG9hZCA/IHsgLi4ucm91dGUsIHN0YXR1czogJ2NvbXBsZXRlZCcgYXMgY29uc3QgfSA6IHJvdXRlXG4gICAgICAgICksXG4gICAgICB9XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTlRFWFRPXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbnRlcmZhY2UgRHJpdmVyQ29udGV4dFR5cGUge1xuICBzdGF0ZTogRHJpdmVyU3RhdGVcbiAgZGlzcGF0Y2g6IFJlYWN0LkRpc3BhdGNoPERyaXZlckFjdGlvbj5cblxuICAvLyBBY2Npb25lcyBlc3BlY8OtZmljYXNcbiAgc3RhcnRMb2NhdGlvblRyYWNraW5nOiAoKSA9PiB2b2lkXG4gIHN0b3BMb2NhdGlvblRyYWNraW5nOiAoKSA9PiB2b2lkXG4gIHVwZGF0ZURyaXZlckxvY2F0aW9uOiAobG9jYXRpb246IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH0pID0+IHZvaWRcbiAgc3RhcnRSb3V0ZTogKHJvdXRlSWQ6IHN0cmluZykgPT4gdm9pZFxuICBjb21wbGV0ZVJvdXRlOiAocm91dGVJZDogc3RyaW5nKSA9PiB2b2lkXG4gIGNvbXBsZXRlRGVsaXZlcnk6IChzaGlwbWVudElkOiBzdHJpbmcpID0+IHZvaWRcbiAgZ29PbmxpbmU6ICgpID0+IHZvaWRcbiAgZ29PZmZsaW5lOiAoKSA9PiB2b2lkXG59XG5cbmNvbnN0IERyaXZlckNvbnRleHQgPSBjcmVhdGVDb250ZXh0PERyaXZlckNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQUk9WSURFUlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIERyaXZlclByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKGRyaXZlclJlZHVjZXIsIGluaXRpYWxTdGF0ZSlcbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSB1c2VTZXNzaW9uKClcblxuICAvLyBJbmljaWFsaXphciBkcml2ZXIgYWwgY2FyZ2FyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlc3Npb24/LnVzZXI/LmVtYWlsKSB7XG4gICAgICBsb2FkRHJpdmVyRGF0YSgpXG4gICAgfVxuICB9LCBbc2Vzc2lvbl0pXG5cbiAgLy8gRnVuY2lvbmVzIGRlbCBjb250ZXh0b1xuICBjb25zdCBsb2FkRHJpdmVyRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IHRydWUgfSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9kcml2ZXIvcHJvZmlsZScpXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmIChkYXRhLmRyaXZlcikge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfRFJJVkVSJywgcGF5bG9hZDogZGF0YS5kcml2ZXIgfSlcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0FTU0lHTkVEX1JPVVRFUycsIHBheWxvYWQ6IGRhdGEucm91dGVzIHx8IFtdIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9FUlJPUicsIHBheWxvYWQ6ICdFcnJvciBjYXJnYW5kbyBkYXRvcyBkZWwgZHJpdmVyJyB9KVxuICAgIH0gZmluYWxseSB7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IGZhbHNlIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3RhcnRMb2NhdGlvblRyYWNraW5nID0gKCkgPT4ge1xuICAgIGlmICgnZ2VvbG9jYXRpb24nIGluIG5hdmlnYXRvcikge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1RSQUNLSU5HJywgcGF5bG9hZDogdHJ1ZSB9KVxuXG4gICAgICAvLyBJbnRlbnRhciBwcmltZXJvIGNvbiBhbHRhIHByZWNpc2nDs25cbiAgICAgIGNvbnN0IHRyeUhpZ2hBY2N1cmFjeSA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgd2F0Y2hJZCA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKFxuICAgICAgICAgIHBvc2l0aW9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRHJpdmVyTG9jYXRpb24obG9jYXRpb24pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hpZ2ggYWNjdXJhY3kgZ2VvbG9jYXRpb24gZmFpbGVkLCB0cnlpbmcgc3RhbmRhcmQgYWNjdXJhY3k6JywgZXJyb3IpXG4gICAgICAgICAgICAvLyBTaSBmYWxsYSBjb24gYWx0YSBwcmVjaXNpw7NuLCBpbnRlbnRhciBjb24gcHJlY2lzacOzbiBlc3TDoW5kYXJcbiAgICAgICAgICAgIHRyeVN0YW5kYXJkQWNjdXJhY3koKVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgICAgICBtYXhpbXVtQWdlOiAzMDAwMCxcbiAgICAgICAgICB9XG4gICAgICAgIClcblxuICAgICAgICAvLyBHdWFyZGFyIHdhdGNoSWQgcGFyYSBwb2RlciBkZXRlbmVyIGVsIHRyYWNraW5nXG4gICAgICAgIDsod2luZG93IGFzIGFueSkuZHJpdmVyTG9jYXRpb25XYXRjaElkID0gd2F0Y2hJZFxuICAgICAgfVxuXG4gICAgICAvLyBGdW5jacOzbiBkZSByZXNwYWxkbyBjb24gcHJlY2lzacOzbiBlc3TDoW5kYXJcbiAgICAgIGNvbnN0IHRyeVN0YW5kYXJkQWNjdXJhY3kgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdhdGNoSWQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihcbiAgICAgICAgICBwb3NpdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgbGF0OiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURyaXZlckxvY2F0aW9uKGxvY2F0aW9uKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJhY2tpbmcgbG9jYXRpb246JywgZXJyb3IpXG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfRVJST1InLCBwYXlsb2FkOiAnRXJyb3Igb2J0ZW5pZW5kbyB1YmljYWNpw7NuJyB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgICAgICBtYXhpbXVtQWdlOiA1MDAwLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuXG4gICAgICAgIC8vIEd1YXJkYXIgd2F0Y2hJZCBwYXJhIHBvZGVyIGRldGVuZXIgZWwgdHJhY2tpbmdcbiAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5kcml2ZXJMb2NhdGlvbldhdGNoSWQgPSB3YXRjaElkXG4gICAgICB9XG5cbiAgICAgIC8vIEluaWNpYXIgY29uIGFsdGEgcHJlY2lzacOzblxuICAgICAgdHJ5SGlnaEFjY3VyYWN5KClcbiAgICB9XG4gIH1cblxuICBjb25zdCBzdG9wTG9jYXRpb25UcmFja2luZyA9ICgpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfVFJBQ0tJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIGlmICgod2luZG93IGFzIGFueSkuZHJpdmVyTG9jYXRpb25XYXRjaElkKSB7XG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCgod2luZG93IGFzIGFueSkuZHJpdmVyTG9jYXRpb25XYXRjaElkKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZURyaXZlckxvY2F0aW9uID0gYXN5bmMgKGxvY2F0aW9uOiB7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9KSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0xPQ0FUSU9OJywgcGF5bG9hZDogbG9jYXRpb24gfSlcblxuICAgIC8vIEVudmlhciB1YmljYWNpw7NuIGFsIHNlcnZpZG9yXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZldGNoKCcvYXBpL2RyaXZlci9sb2NhdGlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGxvY2F0aW9uIH0pLFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbG9jYXRpb246JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3RhcnRSb3V0ZSA9IChyb3V0ZUlkOiBzdHJpbmcpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTVEFSVF9ST1VURScsIHBheWxvYWQ6IHJvdXRlSWQgfSlcbiAgICBzdGFydExvY2F0aW9uVHJhY2tpbmcoKVxuICB9XG5cbiAgY29uc3QgY29tcGxldGVSb3V0ZSA9IChyb3V0ZUlkOiBzdHJpbmcpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdDT01QTEVURV9ST1VURScsIHBheWxvYWQ6IHJvdXRlSWQgfSlcbiAgICBzdG9wTG9jYXRpb25UcmFja2luZygpXG4gIH1cblxuICBjb25zdCBjb21wbGV0ZURlbGl2ZXJ5ID0gKHNoaXBtZW50SWQ6IHN0cmluZykgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ0NPTVBMRVRFX0RFTElWRVJZJywgcGF5bG9hZDogc2hpcG1lbnRJZCB9KVxuICB9XG5cbiAgY29uc3QgZ29PbmxpbmUgPSAoKSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX09OTElORScsIHBheWxvYWQ6IHRydWUgfSlcbiAgICBzdGFydExvY2F0aW9uVHJhY2tpbmcoKVxuICB9XG5cbiAgY29uc3QgZ29PZmZsaW5lID0gKCkgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9PTkxJTkUnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIHN0b3BMb2NhdGlvblRyYWNraW5nKClcbiAgfVxuXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogRHJpdmVyQ29udGV4dFR5cGUgPSB7XG4gICAgc3RhdGUsXG4gICAgZGlzcGF0Y2gsXG4gICAgc3RhcnRMb2NhdGlvblRyYWNraW5nLFxuICAgIHN0b3BMb2NhdGlvblRyYWNraW5nLFxuICAgIHVwZGF0ZURyaXZlckxvY2F0aW9uLFxuICAgIHN0YXJ0Um91dGUsXG4gICAgY29tcGxldGVSb3V0ZSxcbiAgICBjb21wbGV0ZURlbGl2ZXJ5LFxuICAgIGdvT25saW5lLFxuICAgIGdvT2ZmbGluZSxcbiAgfVxuXG4gIHJldHVybiA8RHJpdmVyQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dFZhbHVlfT57Y2hpbGRyZW59PC9Ecml2ZXJDb250ZXh0LlByb3ZpZGVyPlxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PS1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURyaXZlcigpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoRHJpdmVyQ29udGV4dClcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlRHJpdmVyIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBEcml2ZXJQcm92aWRlcicpXG4gIH1cbiAgcmV0dXJuIGNvbnRleHRcbn1cbiJdLCJuYW1lcyI6WyJEcml2ZXJQcm92aWRlciIsInVzZURyaXZlciIsImluaXRpYWxTdGF0ZSIsImRyaXZlciIsImN1cnJlbnRSb3V0ZSIsImFzc2lnbmVkUm91dGVzIiwiY3VycmVudExvY2F0aW9uIiwiaXNUcmFja2luZyIsImlzT25saW5lIiwibm90aWZpY2F0aW9ucyIsImxvYWRpbmciLCJlcnJvciIsImRyaXZlclJlZHVjZXIiLCJzdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJwYXlsb2FkIiwiY3VycmVudF9sb2NhdGlvbiIsInNsaWNlIiwiZmluZCIsInIiLCJpZCIsIm1hcCIsInJvdXRlIiwic3RhdHVzIiwiRHJpdmVyQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJjaGlsZHJlbiIsImRpc3BhdGNoIiwidXNlUmVkdWNlciIsImRhdGEiLCJzZXNzaW9uIiwidXNlU2Vzc2lvbiIsInVzZUVmZmVjdCIsInVzZXIiLCJlbWFpbCIsImxvYWREcml2ZXJEYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJyb3V0ZXMiLCJzdGFydExvY2F0aW9uVHJhY2tpbmciLCJuYXZpZ2F0b3IiLCJ0cnlIaWdoQWNjdXJhY3kiLCJ3YXRjaElkIiwiZ2VvbG9jYXRpb24iLCJ3YXRjaFBvc2l0aW9uIiwicG9zaXRpb24iLCJsb2NhdGlvbiIsImxhdCIsImNvb3JkcyIsImxhdGl0dWRlIiwibG5nIiwibG9uZ2l0dWRlIiwidXBkYXRlRHJpdmVyTG9jYXRpb24iLCJjb25zb2xlIiwid2FybiIsInRyeVN0YW5kYXJkQWNjdXJhY3kiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwibWF4aW11bUFnZSIsIndpbmRvdyIsImRyaXZlckxvY2F0aW9uV2F0Y2hJZCIsInN0b3BMb2NhdGlvblRyYWNraW5nIiwiY2xlYXJXYXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXJ0Um91dGUiLCJyb3V0ZUlkIiwiY29tcGxldGVSb3V0ZSIsImNvbXBsZXRlRGVsaXZlcnkiLCJzaGlwbWVudElkIiwiZ29PbmxpbmUiLCJnb09mZmxpbmUiLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwiY29udGV4dCIsInVzZUNvbnRleHQiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDLEdBRUQ7Ozs7Ozs7Ozs7OztRQXFLZ0JBO2VBQUFBOztRQTJKQUM7ZUFBQUE7Ozs7K0RBOVR3RDt3QkFDN0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlEM0Isd0RBQXdEO0FBQ3hELFVBQVU7QUFDVix3REFBd0Q7QUFFeEQsTUFBTUMsZUFBNEI7SUFDaENDLFFBQVE7SUFDUkMsY0FBYztJQUNkQyxnQkFBZ0IsRUFBRTtJQUNsQkMsaUJBQWlCO0lBQ2pCQyxZQUFZO0lBQ1pDLFVBQVU7SUFDVkMsZUFBZSxFQUFFO0lBQ2pCQyxTQUFTO0lBQ1RDLE9BQU87QUFDVDtBQUVBLFNBQVNDLGNBQWNDLEtBQWtCLEVBQUVDLE1BQW9CO0lBQzdELE9BQVFBLE9BQU9DLElBQUk7UUFDakIsS0FBSztZQUNILE9BQU87Z0JBQUUsR0FBR0YsS0FBSztnQkFBRVYsUUFBUVcsT0FBT0UsT0FBTztZQUFDO1FBRTVDLEtBQUs7WUFDSCxPQUFPO2dCQUFFLEdBQUdILEtBQUs7Z0JBQUVULGNBQWNVLE9BQU9FLE9BQU87WUFBQztRQUVsRCxLQUFLO1lBQ0gsT0FBTztnQkFBRSxHQUFHSCxLQUFLO2dCQUFFUixnQkFBZ0JTLE9BQU9FLE9BQU87WUFBQztRQUVwRCxLQUFLO1lBQ0gsT0FBTztnQkFDTCxHQUFHSCxLQUFLO2dCQUNSUCxpQkFBaUJRLE9BQU9FLE9BQU87Z0JBQy9CYixRQUFRVSxNQUFNVixNQUFNLEdBQ2hCO29CQUNFLEdBQUdVLE1BQU1WLE1BQU07b0JBQ2ZjLGtCQUFrQkgsT0FBT0UsT0FBTztnQkFDbEMsSUFDQTtZQUNOO1FBRUYsS0FBSztZQUNILE9BQU87Z0JBQUUsR0FBR0gsS0FBSztnQkFBRU4sWUFBWU8sT0FBT0UsT0FBTztZQUFDO1FBRWhELEtBQUs7WUFDSCxPQUFPO2dCQUFFLEdBQUdILEtBQUs7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