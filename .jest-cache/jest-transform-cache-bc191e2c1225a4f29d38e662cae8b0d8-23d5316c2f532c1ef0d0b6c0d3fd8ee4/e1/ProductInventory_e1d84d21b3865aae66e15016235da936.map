{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductInventory.tsx"],"sourcesContent":["'use client'\n\nimport { UseFormReturn, FieldErrors } from 'react-hook-form'\nimport { AdminCard } from '../ui/AdminCard'\nimport { Package, AlertTriangle, TrendingDown, BarChart3, Settings } from 'lucide-react'\nimport { cn } from '@/lib/core/utils'\n\ninterface ProductInventoryProps {\n  form: UseFormReturn<any>\n  errors: FieldErrors<any>\n  className?: string\n}\n\nexport function ProductInventory({ form, errors, className }: ProductInventoryProps) {\n  const { register, watch, setValue } = form\n  const watchedData = watch()\n\n  const stock = watchedData.stock || 0\n  const lowStockThreshold = watchedData.low_stock_threshold || 0\n  const trackInventory = watchedData.track_inventory\n  const allowBackorder = watchedData.allow_backorder\n\n  // Stock status\n  const getStockStatus = () => {\n    if (!trackInventory) {\n      return { status: 'untracked', label: 'No rastreado', color: 'gray' }\n    }\n    if (stock === 0) {\n      return { status: 'out', label: 'Sin stock', color: 'red' }\n    }\n    if (stock <= lowStockThreshold) {\n      return { status: 'low', label: 'Stock bajo', color: 'yellow' }\n    }\n    return { status: 'good', label: 'Stock disponible', color: 'green' }\n  }\n\n  const stockStatus = getStockStatus()\n\n  // Quick stock actions\n  const quickStockActions = [\n    { label: '+10', value: 10 },\n    { label: '+50', value: 50 },\n    { label: '+100', value: 100 },\n    { label: 'Reset', value: 0, isReset: true },\n  ]\n\n  const adjustStock = (adjustment: number, isReset = false) => {\n    const currentStock = watchedData.stock || 0\n    const newStock = isReset ? adjustment : currentStock + adjustment\n    setValue('stock', Math.max(0, newStock))\n  }\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      <div className='grid grid-cols-1 lg:grid-cols-3 gap-6'>\n        {/* Main Inventory Settings */}\n        <div className='lg:col-span-2 space-y-6'>\n          {/* Inventory Tracking */}\n          <AdminCard title='Configuración de Inventario' className='p-6'>\n            <div className='space-y-6'>\n              {/* Track Inventory Toggle */}\n              <div className='flex items-center justify-between p-4 border border-gray-200 rounded-lg'>\n                <div>\n                  <h4 className='text-sm font-medium text-gray-900'>Rastrear Inventario</h4>\n                  <p className='text-xs text-gray-500 mt-1'>\n                    Controla automáticamente el stock cuando se realizan ventas\n                  </p>\n                </div>\n                <label className='relative inline-flex items-center cursor-pointer'>\n                  <input\n                    type='checkbox'\n                    {...register('track_inventory')}\n                    className='sr-only peer'\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blaze-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blaze-orange-600\"></div>\n                </label>\n              </div>\n\n              {/* Stock Quantity */}\n              {trackInventory && (\n                <div className='grid grid-cols-1 md:grid-cols-2 gap-6'>\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 mb-2'>\n                      Cantidad en Stock *\n                    </label>\n                    <div className='relative'>\n                      <Package className='absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4' />\n                      <input\n                        type='number'\n                        min='0'\n                        step='1'\n                        {...register('stock', { valueAsNumber: true })}\n                        className='w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n                        placeholder='0'\n                      />\n                    </div>\n                    {errors.stock && (\n                      <p className='text-red-600 text-sm mt-1'>{errors.stock.message}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className='block text-sm font-medium text-gray-700 mb-2'>\n                      Umbral de Stock Bajo\n                    </label>\n                    <div className='relative'>\n                      <AlertTriangle className='absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4' />\n                      <input\n                        type='number'\n                        min='0'\n                        step='1'\n                        {...register('low_stock_threshold', { valueAsNumber: true })}\n                        className='w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n                        placeholder='10'\n                      />\n                    </div>\n                    {errors.low_stock_threshold && (\n                      <p className='text-red-600 text-sm mt-1'>\n                        {errors.low_stock_threshold.message}\n                      </p>\n                    )}\n                    <p className='text-xs text-gray-500 mt-1'>\n                      Recibir alertas cuando el stock esté por debajo de este número\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Allow Backorders */}\n              {trackInventory && (\n                <div className='flex items-center justify-between p-4 border border-gray-200 rounded-lg'>\n                  <div>\n                    <h4 className='text-sm font-medium text-gray-900'>\n                      Permitir Pedidos Pendientes\n                    </h4>\n                    <p className='text-xs text-gray-500 mt-1'>\n                      Permite a los clientes comprar cuando no hay stock disponible\n                    </p>\n                  </div>\n                  <label className='relative inline-flex items-center cursor-pointer'>\n                    <input\n                      type='checkbox'\n                      {...register('allow_backorder')}\n                      className='sr-only peer'\n                    />\n                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blaze-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blaze-orange-600\"></div>\n                  </label>\n                </div>\n              )}\n            </div>\n          </AdminCard>\n\n          {/* Quick Stock Actions */}\n          {trackInventory && (\n            <AdminCard title='Ajustes Rápidos de Stock' className='p-6'>\n              <div className='space-y-4'>\n                <p className='text-sm text-gray-600'>Ajusta rápidamente la cantidad en stock:</p>\n                <div className='flex flex-wrap gap-3'>\n                  {quickStockActions.map((action, index) => (\n                    <button\n                      key={index}\n                      type='button'\n                      onClick={() => adjustStock(action.value, action.isReset)}\n                      className={cn(\n                        'px-4 py-2 rounded-lg text-sm font-medium transition-colors',\n                        action.isReset\n                          ? 'bg-red-100 text-red-700 hover:bg-red-200'\n                          : 'bg-blaze-orange-100 text-blaze-orange-700 hover:bg-blaze-orange-200'\n                      )}\n                    >\n                      {action.label}\n                    </button>\n                  ))}\n                </div>\n                <div className='flex items-center space-x-3 mt-4'>\n                  <span className='text-sm text-gray-600'>Stock actual:</span>\n                  <span className='text-lg font-bold text-gray-900'>{stock} unidades</span>\n                </div>\n              </div>\n            </AdminCard>\n          )}\n        </div>\n\n        {/* Inventory Status & Analytics */}\n        <div className='space-y-6'>\n          {/* Stock Status */}\n          <AdminCard title='Estado del Stock' className='p-6'>\n            <div className='space-y-4'>\n              {/* Current Status */}\n              <div\n                className={cn(\n                  'p-4 rounded-lg border-2',\n                  stockStatus.color === 'green' && 'bg-green-50 border-green-200',\n                  stockStatus.color === 'yellow' && 'bg-yellow-50 border-yellow-200',\n                  stockStatus.color === 'red' && 'bg-red-50 border-red-200',\n                  stockStatus.color === 'gray' && 'bg-gray-50 border-gray-200'\n                )}\n              >\n                <div className='flex items-center space-x-3'>\n                  <div\n                    className={cn(\n                      'w-3 h-3 rounded-full',\n                      stockStatus.color === 'green' && 'bg-green-500',\n                      stockStatus.color === 'yellow' && 'bg-yellow-500',\n                      stockStatus.color === 'red' && 'bg-red-500',\n                      stockStatus.color === 'gray' && 'bg-gray-500'\n                    )}\n                  ></div>\n                  <span\n                    className={cn(\n                      'font-medium',\n                      stockStatus.color === 'green' && 'text-green-800',\n                      stockStatus.color === 'yellow' && 'text-yellow-800',\n                      stockStatus.color === 'red' && 'text-red-800',\n                      stockStatus.color === 'gray' && 'text-gray-800'\n                    )}\n                  >\n                    {stockStatus.label}\n                  </span>\n                </div>\n\n                {trackInventory && (\n                  <div className='mt-2'>\n                    <p className='text-2xl font-bold text-gray-900'>\n                      {stock} <span className='text-sm font-normal text-gray-600'>unidades</span>\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Stock Alerts */}\n              {trackInventory && (\n                <div className='space-y-3'>\n                  {stock === 0 && (\n                    <div className='flex items-start space-x-2 p-3 bg-red-50 rounded-lg'>\n                      <AlertTriangle className='w-5 h-5 text-red-500 mt-0.5' />\n                      <div>\n                        <p className='text-sm font-medium text-red-800'>Sin Stock</p>\n                        <p className='text-xs text-red-600'>\n                          {allowBackorder\n                            ? 'Se permiten pedidos pendientes'\n                            : 'Producto no disponible para compra'}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {stock > 0 && stock <= lowStockThreshold && lowStockThreshold > 0 && (\n                    <div className='flex items-start space-x-2 p-3 bg-yellow-50 rounded-lg'>\n                      <TrendingDown className='w-5 h-5 text-yellow-500 mt-0.5' />\n                      <div>\n                        <p className='text-sm font-medium text-yellow-800'>Stock Bajo</p>\n                        <p className='text-xs text-yellow-600'>Considera reabastecer pronto</p>\n                      </div>\n                    </div>\n                  )}\n\n                  {!trackInventory && (\n                    <div className='flex items-start space-x-2 p-3 bg-blue-50 rounded-lg'>\n                      <Settings className='w-5 h-5 text-blue-500 mt-0.5' />\n                      <div>\n                        <p className='text-sm font-medium text-blue-800'>Inventario No Rastreado</p>\n                        <p className='text-xs text-blue-600'>\n                          El stock no se reducirá automáticamente con las ventas\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </AdminCard>\n\n          {/* Inventory Metrics */}\n          {trackInventory && (\n            <AdminCard title='Métricas de Inventario' className='p-6'>\n              <div className='space-y-4'>\n                <div className='flex items-center justify-between'>\n                  <span className='text-sm text-gray-600'>Días de stock estimados</span>\n                  <span className='font-medium'>\n                    {/* TODO: Calculate based on sales velocity */}\n                    ~30 días\n                  </span>\n                </div>\n\n                <div className='flex items-center justify-between'>\n                  <span className='text-sm text-gray-600'>Valor del inventario</span>\n                  <span className='font-medium'>\n                    ${((watchedData.cost_price || 0) * stock).toFixed(2)}\n                  </span>\n                </div>\n\n                <div className='flex items-center justify-between'>\n                  <span className='text-sm text-gray-600'>Punto de reorden</span>\n                  <span className='font-medium'>{lowStockThreshold || 'No configurado'}</span>\n                </div>\n              </div>\n            </AdminCard>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["ProductInventory","form","errors","className","register","watch","setValue","watchedData","stock","lowStockThreshold","low_stock_threshold","trackInventory","track_inventory","allowBackorder","allow_backorder","getStockStatus","status","label","color","stockStatus","quickStockActions","value","isReset","adjustStock","adjustment","currentStock","newStock","Math","max","div","cn","AdminCard","title","h4","p","input","type","Package","min","step","valueAsNumber","placeholder","message","AlertTriangle","map","action","index","button","onClick","span","TrendingDown","Settings","cost_price","toFixed"],"mappings":"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"}