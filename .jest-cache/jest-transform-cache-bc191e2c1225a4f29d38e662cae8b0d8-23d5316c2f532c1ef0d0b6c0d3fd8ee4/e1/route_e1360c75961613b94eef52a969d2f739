c436f102b72311f641b47537ea83dbab
// Configuraci√≥n para Node.js Runtime
"use strict";

/* istanbul ignore next */
function cov_2e9k2aj7gc() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\simple-auth-check\\route.ts";
  var hash = "506cfdccff9ff85d6ba0f1c37f4d5446e61a1071";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\simple-auth-check\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "2": {
        start: {
          line: 7,
          column: 24
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "3": {
        start: {
          line: 12,
          column: 0
        },
        end: {
          line: 19,
          column: 3
        }
      },
      "4": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 19
        }
      },
      "5": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 23
        }
      },
      "6": {
        start: {
          line: 20,
          column: 16
        },
        end: {
          line: 20,
          column: 38
        }
      },
      "7": {
        start: {
          line: 21,
          column: 16
        },
        end: {
          line: 21,
          column: 54
        }
      },
      "8": {
        start: {
          line: 22,
          column: 16
        },
        end: {
          line: 22,
          column: 24
        }
      },
      "9": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 84,
          column: 5
        }
      },
      "10": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 57
        }
      },
      "11": {
        start: {
          line: 27,
          column: 42
        },
        end: {
          line: 27,
          column: 67
        }
      },
      "12": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 36,
          column: 9
        }
      },
      "13": {
        start: {
          line: 29,
          column: 12
        },
        end: {
          line: 35,
          column: 15
        }
      },
      "14": {
        start: {
          line: 38,
          column: 29
        },
        end: {
          line: 38,
          column: 94
        }
      },
      "15": {
        start: {
          line: 38,
          column: 78
        },
        end: {
          line: 38,
          column: 87
        }
      },
      "16": {
        start: {
          line: 39,
          column: 34
        },
        end: {
          line: 39,
          column: 63
        }
      },
      "17": {
        start: {
          line: 41,
          column: 28
        },
        end: {
          line: 49,
          column: 9
        }
      },
      "18": {
        start: {
          line: 51,
          column: 27
        },
        end: {
          line: 57,
          column: 9
        }
      },
      "19": {
        start: {
          line: 58,
          column: 25
        },
        end: {
          line: 69,
          column: 9
        }
      },
      "20": {
        start: {
          line: 70,
          column: 8
        },
        end: {
          line: 70,
          column: 87
        }
      },
      "21": {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 73,
          column: 11
        }
      },
      "22": {
        start: {
          line: 75,
          column: 8
        },
        end: {
          line: 75,
          column: 59
        }
      },
      "23": {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 83,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 6,
            column: 9
          },
          end: {
            line: 6,
            column: 16
          }
        },
        loc: {
          start: {
            line: 6,
            column: 30
          },
          end: {
            line: 11,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 19
          },
          end: {
            line: 18,
            column: 5
          }
        },
        line: 16
      },
      "3": {
        name: "GET",
        decl: {
          start: {
            line: 23,
            column: 15
          },
          end: {
            line: 23,
            column: 18
          }
        },
        loc: {
          start: {
            line: 23,
            column: 28
          },
          end: {
            line: 85,
            column: 1
          }
        },
        line: 23
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 38,
            column: 72
          },
          end: {
            line: 38,
            column: 73
          }
        },
        loc: {
          start: {
            line: 38,
            column: 78
          },
          end: {
            line: 38,
            column: 87
          }
        },
        line: 38
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 36,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 36,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 28
      },
      "1": {
        loc: {
          start: {
            line: 38,
            column: 29
          },
          end: {
            line: 38,
            column: 94
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 38,
            column: 29
          },
          end: {
            line: 38,
            column: 88
          }
        }, {
          start: {
            line: 38,
            column: 92
          },
          end: {
            line: 38,
            column: 94
          }
        }],
        line: 38
      },
      "2": {
        loc: {
          start: {
            line: 54,
            column: 30
          },
          end: {
            line: 54,
            column: 129
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 54,
            column: 30
          },
          end: {
            line: 54,
            column: 77
          }
        }, {
          start: {
            line: 54,
            column: 81
          },
          end: {
            line: 54,
            column: 129
          }
        }],
        line: 54
      },
      "3": {
        loc: {
          start: {
            line: 56,
            column: 30
          },
          end: {
            line: 56,
            column: 150
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 56,
            column: 30
          },
          end: {
            line: 56,
            column: 77
          }
        }, {
          start: {
            line: 56,
            column: 81
          },
          end: {
            line: 56,
            column: 129
          }
        }, {
          start: {
            line: 56,
            column: 133
          },
          end: {
            line: 56,
            column: 150
          }
        }],
        line: 56
      },
      "4": {
        loc: {
          start: {
            line: 79,
            column: 21
          },
          end: {
            line: 79,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 79,
            column: 46
          },
          end: {
            line: 79,
            column: 59
          }
        }, {
          start: {
            line: 79,
            column: 62
          },
          end: {
            line: 79,
            column: 77
          }
        }],
        line: 79
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\simple-auth-check\\route.ts"],
      sourcesContent: ["// Configuraci\xF3n para Node.js Runtime\r\nexport const runtime = 'nodejs';\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { auth } from '@/lib/auth/config';\r\n\r\n/**\r\n * API simple para verificar el estado de autenticaci\xF3n sin dependencias complejas\r\n * GET /api/debug/simple-auth-check\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    console.log('\uD83D\uDD0D Simple Auth Check: Starting...');\r\n\r\n    // Verificar autenticaci\xF3n b\xE1sica\r\n    const { userId, sessionClaims } = await auth();\r\n    \r\n    if (!session?.user) {\r\n      return NextResponse.json(\r\n        { \r\n          success: false,\r\n          authenticated: false,\r\n          error: 'No authenticated user'\r\n        },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    // Verificar allowlist temporal\r\n    const adminUserIds = process.env.ADMIN_USER_IDS?.split(',').map(id => id.trim()) || [];\r\n    const isAllowlistedUser = adminUserIds.includes(userId);\r\n\r\n    // Informaci\xF3n b\xE1sica de la sesi\xF3n\r\n    const sessionInfo = {\r\n      userId,\r\n      isAllowlistedUser,\r\n      adminUserIdsCount: adminUserIds.length,\r\n      sessionClaims: {\r\n        publicMetadata: sessionClaims?.publicMetadata,\r\n        privateMetadata: sessionClaims?.privateMetadata\r\n      }\r\n    };\r\n\r\n    // Verificaciones de rol\r\n    const roleChecks = {\r\n      sessionPublicRole: sessionClaims?.publicMetadata?.role,\r\n      sessionPrivateRole: sessionClaims?.privateMetadata?.role,\r\n      isAdminBySession: (\r\n        sessionClaims?.publicMetadata?.role === 'admin' ||\r\n        sessionClaims?.privateMetadata?.role === 'admin'\r\n      ),\r\n      isAllowlistedUser,\r\n      finalAdminAccess: (\r\n        sessionClaims?.publicMetadata?.role === 'admin' ||\r\n        sessionClaims?.privateMetadata?.role === 'admin' ||\r\n        isAllowlistedUser\r\n      )\r\n    };\r\n\r\n    const response = {\r\n      success: true,\r\n      timestamp: new Date().toISOString(),\r\n      authenticated: true,\r\n      sessionInfo,\r\n      roleChecks,\r\n      debugInfo: {\r\n        environment: process.env.NODE_ENV,\r\n        hasAdminUserIds: !!process.env.ADMIN_USER_IDS,\r\n        adminUserIdsLength: adminUserIds.length\r\n      }\r\n    };\r\n\r\n    console.log('\u2705 Simple Auth Check: Success', JSON.stringify(response, null, 2));\r\n\r\n    return NextResponse.json(response, { status: 200 });\r\n\r\n  } catch (error) {\r\n    console.error('\u274C Simple Auth Check Error:', error);\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        success: false,\r\n        error: 'Internal server error',\r\n        details: error instanceof Error ? error.message : 'Unknown error',\r\n        timestamp: new Date().toISOString()\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["GET", "runtime", "request", "console", "log", "userId", "sessionClaims", "auth", "session", "user", "NextResponse", "json", "success", "authenticated", "error", "status", "adminUserIds", "process", "env", "ADMIN_USER_IDS", "split", "map", "id", "trim", "isAllowlistedUser", "includes", "sessionInfo", "adminUserIdsCount", "length", "publicMetadata", "privateMetadata", "roleChecks", "sessionPublicRole", "role", "sessionPrivateRole", "isAdminBySession", "finalAdminAccess", "response", "timestamp", "Date", "toISOString", "debugInfo", "environment", "NODE_ENV", "hasAdminUserIds", "adminUserIdsLength", "JSON", "stringify", "details", "Error", "message"],
      mappings: "AAAA,qCAAqC;;;;;;;;;;;;QAUfA;eAAAA;;QATTC;eAAAA;;;wBAE6B;wBACrB;AAHd,MAAMA,UAAU;AAShB,eAAeD,IAAIE,OAAoB;IAC5C,IAAI;QACFC,QAAQC,GAAG,CAAC;QAEZ,iCAAiC;QACjC,MAAM,EAAEC,MAAM,EAAEC,aAAa,EAAE,GAAG,MAAMC,IAAAA,YAAI;QAE5C,IAAI,CAACC,SAASC,MAAM;YAClB,OAAOC,oBAAY,CAACC,IAAI,CACtB;gBACEC,SAAS;gBACTC,eAAe;gBACfC,OAAO;YACT,GACA;gBAAEC,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,MAAMC,eAAeC,QAAQC,GAAG,CAACC,cAAc,EAAEC,MAAM,KAAKC,IAAIC,CAAAA,KAAMA,GAAGC,IAAI,OAAO,EAAE;QACtF,MAAMC,oBAAoBR,aAAaS,QAAQ,CAACpB;QAEhD,kCAAkC;QAClC,MAAMqB,cAAc;YAClBrB;YACAmB;YACAG,mBAAmBX,aAAaY,MAAM;YACtCtB,eAAe;gBACbuB,gBAAgBvB,eAAeuB;gBAC/BC,iBAAiBxB,eAAewB;YAClC;QACF;QAEA,wBAAwB;QACxB,MAAMC,aAAa;YACjBC,mBAAmB1B,eAAeuB,gBAAgBI;YAClDC,oBAAoB5B,eAAewB,iBAAiBG;YACpDE,kBACE7B,eAAeuB,gBAAgBI,SAAS,WACxC3B,eAAewB,iBAAiBG,SAAS;YAE3CT;YACAY,kBACE9B,eAAeuB,gBAAgBI,SAAS,WACxC3B,eAAewB,iBAAiBG,SAAS,WACzCT;QAEJ;QAEA,MAAMa,WAAW;YACfzB,SAAS;YACT0B,WAAW,IAAIC,OAAOC,WAAW;YACjC3B,eAAe;YACfa;YACAK;YACAU,WAAW;gBACTC,aAAazB,QAAQC,GAAG,CAACyB,QAAQ;gBACjCC,iBAAiB,CAAC,CAAC3B,QAAQC,GAAG,CAACC,cAAc;gBAC7C0B,oBAAoB7B,aAAaY,MAAM;YACzC;QACF;QAEAzB,QAAQC,GAAG,CAAC,gCAAgC0C,KAAKC,SAAS,CAACV,UAAU,MAAM;QAE3E,OAAO3B,oBAAY,CAACC,IAAI,CAAC0B,UAAU;YAAEtB,QAAQ;QAAI;IAEnD,EAAE,OAAOD,OAAO;QACdX,QAAQW,KAAK,CAAC,8BAA8BA;QAE5C,OAAOJ,oBAAY,CAACC,IAAI,CACtB;YACEC,SAAS;YACTE,OAAO;YACPkC,SAASlC,iBAAiBmC,QAAQnC,MAAMoC,OAAO,GAAG;YAClDZ,WAAW,IAAIC,OAAOC,WAAW;QACnC,GACA;YAAEzB,QAAQ;QAAI;IAElB;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "506cfdccff9ff85d6ba0f1c37f4d5446e61a1071"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2e9k2aj7gc = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2e9k2aj7gc();
cov_2e9k2aj7gc().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_2e9k2aj7gc().f[0]++;
  cov_2e9k2aj7gc().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_2e9k2aj7gc().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_2e9k2aj7gc().f[1]++;
    cov_2e9k2aj7gc().s[4]++;
    return GET;
  },
  get runtime() {
    /* istanbul ignore next */
    cov_2e9k2aj7gc().f[2]++;
    cov_2e9k2aj7gc().s[5]++;
    return runtime;
  }
});
const _server =
/* istanbul ignore next */
(cov_2e9k2aj7gc().s[6]++, require("next/server"));
const _config =
/* istanbul ignore next */
(cov_2e9k2aj7gc().s[7]++, require("../../../../lib/auth/config"));
const runtime =
/* istanbul ignore next */
(cov_2e9k2aj7gc().s[8]++, 'nodejs');
async function GET(request) {
  /* istanbul ignore next */
  cov_2e9k2aj7gc().f[3]++;
  cov_2e9k2aj7gc().s[9]++;
  try {
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[10]++;
    console.log('üîç Simple Auth Check: Starting...');
    // Verificar autenticaci√≥n b√°sica
    const {
      userId,
      sessionClaims
    } =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[11]++, await (0, _config.auth)());
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[12]++;
    if (!session?.user) {
      /* istanbul ignore next */
      cov_2e9k2aj7gc().b[0][0]++;
      cov_2e9k2aj7gc().s[13]++;
      return _server.NextResponse.json({
        success: false,
        authenticated: false,
        error: 'No authenticated user'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_2e9k2aj7gc().b[0][1]++;
    }
    // Verificar allowlist temporal
    const adminUserIds =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[14]++,
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().b[1][0]++, process.env.ADMIN_USER_IDS?.split(',').map(id => {
      /* istanbul ignore next */
      cov_2e9k2aj7gc().f[4]++;
      cov_2e9k2aj7gc().s[15]++;
      return id.trim();
    })) ||
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().b[1][1]++, []));
    const isAllowlistedUser =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[16]++, adminUserIds.includes(userId));
    // Informaci√≥n b√°sica de la sesi√≥n
    const sessionInfo =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[17]++, {
      userId,
      isAllowlistedUser,
      adminUserIdsCount: adminUserIds.length,
      sessionClaims: {
        publicMetadata: sessionClaims?.publicMetadata,
        privateMetadata: sessionClaims?.privateMetadata
      }
    });
    // Verificaciones de rol
    const roleChecks =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[18]++, {
      sessionPublicRole: sessionClaims?.publicMetadata?.role,
      sessionPrivateRole: sessionClaims?.privateMetadata?.role,
      isAdminBySession:
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[2][0]++, sessionClaims?.publicMetadata?.role === 'admin') ||
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[2][1]++, sessionClaims?.privateMetadata?.role === 'admin'),
      isAllowlistedUser,
      finalAdminAccess:
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[3][0]++, sessionClaims?.publicMetadata?.role === 'admin') ||
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[3][1]++, sessionClaims?.privateMetadata?.role === 'admin') ||
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[3][2]++, isAllowlistedUser)
    });
    const response =
    /* istanbul ignore next */
    (cov_2e9k2aj7gc().s[19]++, {
      success: true,
      timestamp: new Date().toISOString(),
      authenticated: true,
      sessionInfo,
      roleChecks,
      debugInfo: {
        environment: process.env.NODE_ENV,
        hasAdminUserIds: !!process.env.ADMIN_USER_IDS,
        adminUserIdsLength: adminUserIds.length
      }
    });
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[20]++;
    console.log('‚úÖ Simple Auth Check: Success', JSON.stringify(response, null, 2));
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[21]++;
    return _server.NextResponse.json(response, {
      status: 200
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[22]++;
    console.error('‚ùå Simple Auth Check Error:', error);
    /* istanbul ignore next */
    cov_2e9k2aj7gc().s[23]++;
    return _server.NextResponse.json({
      success: false,
      error: 'Internal server error',
      details: error instanceof Error ?
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[4][0]++, error.message) :
      /* istanbul ignore next */
      (cov_2e9k2aj7gc().b[4][1]++, 'Unknown error'),
      timestamp: new Date().toISOString()
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmU5azJhajdnYyIsImFjdHVhbENvdmVyYWdlIiwicyIsIkdFVCIsImYiLCJydW50aW1lIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VySWQiLCJzZXNzaW9uQ2xhaW1zIiwiX2NvbmZpZyIsImF1dGgiLCJzZXNzaW9uIiwidXNlciIsImIiLCJfc2VydmVyIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsInN1Y2Nlc3MiLCJhdXRoZW50aWNhdGVkIiwiZXJyb3IiLCJzdGF0dXMiLCJhZG1pblVzZXJJZHMiLCJwcm9jZXNzIiwiZW52IiwiQURNSU5fVVNFUl9JRFMiLCJzcGxpdCIsIm1hcCIsImlkIiwidHJpbSIsImlzQWxsb3dsaXN0ZWRVc2VyIiwiaW5jbHVkZXMiLCJzZXNzaW9uSW5mbyIsImFkbWluVXNlcklkc0NvdW50IiwibGVuZ3RoIiwicHVibGljTWV0YWRhdGEiLCJwcml2YXRlTWV0YWRhdGEiLCJyb2xlQ2hlY2tzIiwic2Vzc2lvblB1YmxpY1JvbGUiLCJyb2xlIiwic2Vzc2lvblByaXZhdGVSb2xlIiwiaXNBZG1pbkJ5U2Vzc2lvbiIsImZpbmFsQWRtaW5BY2Nlc3MiLCJyZXNwb25zZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRlYnVnSW5mbyIsImVudmlyb25tZW50IiwiTk9ERV9FTlYiLCJoYXNBZG1pblVzZXJJZHMiLCJhZG1pblVzZXJJZHNMZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5IiwiZGV0YWlscyIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcYXBwXFxhcGlcXGRlYnVnXFxzaW1wbGUtYXV0aC1jaGVja1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29uZmlndXJhY2nDs24gcGFyYSBOb2RlLmpzIFJ1bnRpbWVcclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGF1dGggfSBmcm9tICdAL2xpYi9hdXRoL2NvbmZpZyc7XHJcblxyXG4vKipcclxuICogQVBJIHNpbXBsZSBwYXJhIHZlcmlmaWNhciBlbCBlc3RhZG8gZGUgYXV0ZW50aWNhY2nDs24gc2luIGRlcGVuZGVuY2lhcyBjb21wbGVqYXNcclxuICogR0VUIC9hcGkvZGVidWcvc2ltcGxlLWF1dGgtY2hlY2tcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflI0gU2ltcGxlIEF1dGggQ2hlY2s6IFN0YXJ0aW5nLi4uJyk7XHJcblxyXG4gICAgLy8gVmVyaWZpY2FyIGF1dGVudGljYWNpw7NuIGLDoXNpY2FcclxuICAgIGNvbnN0IHsgdXNlcklkLCBzZXNzaW9uQ2xhaW1zIH0gPSBhd2FpdCBhdXRoKCk7XHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgYXV0aGVudGljYXRlZDogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ05vIGF1dGhlbnRpY2F0ZWQgdXNlcidcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmaWNhciBhbGxvd2xpc3QgdGVtcG9yYWxcclxuICAgIGNvbnN0IGFkbWluVXNlcklkcyA9IHByb2Nlc3MuZW52LkFETUlOX1VTRVJfSURTPy5zcGxpdCgnLCcpLm1hcChpZCA9PiBpZC50cmltKCkpIHx8IFtdO1xyXG4gICAgY29uc3QgaXNBbGxvd2xpc3RlZFVzZXIgPSBhZG1pblVzZXJJZHMuaW5jbHVkZXModXNlcklkKTtcclxuXHJcbiAgICAvLyBJbmZvcm1hY2nDs24gYsOhc2ljYSBkZSBsYSBzZXNpw7NuXHJcbiAgICBjb25zdCBzZXNzaW9uSW5mbyA9IHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBpc0FsbG93bGlzdGVkVXNlcixcclxuICAgICAgYWRtaW5Vc2VySWRzQ291bnQ6IGFkbWluVXNlcklkcy5sZW5ndGgsXHJcbiAgICAgIHNlc3Npb25DbGFpbXM6IHtcclxuICAgICAgICBwdWJsaWNNZXRhZGF0YTogc2Vzc2lvbkNsYWltcz8ucHVibGljTWV0YWRhdGEsXHJcbiAgICAgICAgcHJpdmF0ZU1ldGFkYXRhOiBzZXNzaW9uQ2xhaW1zPy5wcml2YXRlTWV0YWRhdGFcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBWZXJpZmljYWNpb25lcyBkZSByb2xcclxuICAgIGNvbnN0IHJvbGVDaGVja3MgPSB7XHJcbiAgICAgIHNlc3Npb25QdWJsaWNSb2xlOiBzZXNzaW9uQ2xhaW1zPy5wdWJsaWNNZXRhZGF0YT8ucm9sZSxcclxuICAgICAgc2Vzc2lvblByaXZhdGVSb2xlOiBzZXNzaW9uQ2xhaW1zPy5wcml2YXRlTWV0YWRhdGE/LnJvbGUsXHJcbiAgICAgIGlzQWRtaW5CeVNlc3Npb246IChcclxuICAgICAgICBzZXNzaW9uQ2xhaW1zPy5wdWJsaWNNZXRhZGF0YT8ucm9sZSA9PT0gJ2FkbWluJyB8fFxyXG4gICAgICAgIHNlc3Npb25DbGFpbXM/LnByaXZhdGVNZXRhZGF0YT8ucm9sZSA9PT0gJ2FkbWluJ1xyXG4gICAgICApLFxyXG4gICAgICBpc0FsbG93bGlzdGVkVXNlcixcclxuICAgICAgZmluYWxBZG1pbkFjY2VzczogKFxyXG4gICAgICAgIHNlc3Npb25DbGFpbXM/LnB1YmxpY01ldGFkYXRhPy5yb2xlID09PSAnYWRtaW4nIHx8XHJcbiAgICAgICAgc2Vzc2lvbkNsYWltcz8ucHJpdmF0ZU1ldGFkYXRhPy5yb2xlID09PSAnYWRtaW4nIHx8XHJcbiAgICAgICAgaXNBbGxvd2xpc3RlZFVzZXJcclxuICAgICAgKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXHJcbiAgICAgIHNlc3Npb25JbmZvLFxyXG4gICAgICByb2xlQ2hlY2tzLFxyXG4gICAgICBkZWJ1Z0luZm86IHtcclxuICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXHJcbiAgICAgICAgaGFzQWRtaW5Vc2VySWRzOiAhIXByb2Nlc3MuZW52LkFETUlOX1VTRVJfSURTLFxyXG4gICAgICAgIGFkbWluVXNlcklkc0xlbmd0aDogYWRtaW5Vc2VySWRzLmxlbmd0aFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUgU2ltcGxlIEF1dGggQ2hlY2s6IFN1Y2Nlc3MnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSwgbnVsbCwgMikpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTaW1wbGUgQXV0aCBDaGVjayBFcnJvcjonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNhO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFBQUEsY0FBQSxHQUFBRSxDQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztN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