b352b3b570804fbd63b30c56d0cddc2d
/**
 * Sistema Enterprise de Rate Limiting
 * Unifica todas las implementaciones de rate limiting con Redis y fallback en memoria
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get ENTERPRISE_RATE_LIMIT_CONFIGS () {
        return ENTERPRISE_RATE_LIMIT_CONFIGS;
    },
    get checkEnterpriseRateLimit () {
        return checkEnterpriseRateLimit;
    },
    get endpointKeyGenerator () {
        return endpointKeyGenerator;
    },
    get hybridKeyGenerator () {
        return hybridKeyGenerator;
    },
    get ipKeyGenerator () {
        return ipKeyGenerator;
    },
    get memoryStore () {
        return memoryStore;
    },
    get metricsCollector () {
        return metricsCollector;
    },
    get userKeyGenerator () {
        return userKeyGenerator;
    }
});
const _redis = require("../integrations/redis");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const ENTERPRISE_RATE_LIMIT_CONFIGS = {
    // Autenticación crítica
    CRITICAL_AUTH: {
        windowMs: 15 * 60 * 1000,
        maxRequests: 3,
        message: 'Demasiados intentos de autenticación crítica. Intenta en 15 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Admin APIs
    ADMIN_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 50,
        message: 'Límite de requests administrativas excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de pagos
    PAYMENT_API: {
        windowMs: 10 * 60 * 1000,
        maxRequests: 15,
        message: 'Límite de requests de pagos excedido. Intenta en 10 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true,
        onLimitReached: (key, request)=>{
            console.warn(`[PAYMENT_RATE_LIMIT] Límite excedido para ${key}`);
        }
    },
    // APIs públicas de productos
    PUBLIC_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 100,
        message: 'Límite de requests públicas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false
    },
    // Webhooks
    WEBHOOK_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 200,
        message: 'Límite de webhooks excedido.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // Búsquedas y consultas
    SEARCH_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 60,
        message: 'Límite de búsquedas excedido. Intenta en 1 minuto.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: false
    },
    // Upload de archivos
    UPLOAD_API: {
        windowMs: 5 * 60 * 1000,
        maxRequests: 10,
        message: 'Límite de uploads excedido. Intenta en 5 minutos.',
        enableRedis: true,
        enableMetrics: true,
        enableLogging: true
    },
    // APIs de desarrollo/debug
    DEBUG_API: {
        windowMs: 1 * 60 * 1000,
        maxRequests: 30,
        message: 'Límite de debug APIs excedido.',
        enableRedis: false,
        enableMetrics: true,
        enableLogging: true
    }
};
function ipKeyGenerator(request) {
    const ip = getClientIP(request);
    return `ip:${ip}`;
}
function userKeyGenerator(request) {
    // Intentar obtener user ID de diferentes fuentes
    const userId = getUserId(request);
    const ip = getClientIP(request);
    return userId ? `user:${userId}` : `ip:${ip}`;
}
function endpointKeyGenerator(request) {
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    return `endpoint:${ip}:${endpoint}`;
}
function hybridKeyGenerator(request) {
    const userId = getUserId(request);
    const ip = getClientIP(request);
    const endpoint = getEndpoint(request);
    const userPart = userId ? `user:${userId}` : `ip:${ip}`;
    return `${userPart}:${endpoint}`;
}
// =====================================================
// UTILIDADES
// =====================================================
/**
 * Obtiene la IP del cliente
 */ function getClientIP(request) {
    // Intentar diferentes headers de IP
    const headers = [
        'x-forwarded-for',
        'x-real-ip',
        'x-client-ip',
        'cf-connecting-ip'
    ];
    for (const header of headers){
        let ip = null;
        if ('headers' in request && typeof request.headers.get === 'function') {
            // NextRequest
            ip = request.headers.get(header);
        } else if ('headers' in request) {
            // NextApiRequest
            const headerValue = request.headers[header];
            ip = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
        }
        if (ip) {
            // Tomar la primera IP si hay múltiples
            return ip.split(',')[0].trim();
        }
    }
    return 'unknown';
}
/**
 * Obtiene el ID del usuario autenticado
 */ function getUserId(request) {
    // Intentar obtener de diferentes fuentes
    // 1. Headers de Clerk
    let userId = null;
    if ('headers' in request && typeof request.headers.get === 'function') {
        // NextRequest
        userId = request.headers.get('x-clerk-user-id');
    } else if ('headers' in request) {
        // NextApiRequest
        const headerValue = request.headers['x-clerk-user-id'];
        userId = Array.isArray(headerValue) ? headerValue[0] : headerValue || null;
    }
    // 2. Contexto enterprise si está disponible
    if (!userId && request.enterpriseAuth?.userId) {
        userId = request.enterpriseAuth.userId;
    }
    // 3. Contexto de autenticación si está disponible
    if (!userId && request.auth?.userId) {
        userId = request.auth.userId;
    }
    return userId;
}
/**
 * Obtiene el endpoint de la request
 */ function getEndpoint(request) {
    if ('nextUrl' in request) {
        // NextRequest
        return request.nextUrl.pathname;
    } else if ('url' in request) {
        // NextApiRequest
        try {
            const url = new URL(request.url || '', 'http://localhost');
            return url.pathname;
        } catch  {
            return '/unknown';
        }
    }
    return '/unknown';
}
class MemoryRateLimitStore {
    constructor(){
        this.store = new Map();
        // Limpiar entradas expiradas cada 5 minutos
        this.cleanupInterval = setInterval(()=>{
            this.cleanup();
        }, 5 * 60 * 1000);
    }
    get(key) {
        const entry = this.store.get(key);
        if (!entry) {
            return null;
        }
        // Verificar si ha expirado
        if (Date.now() > entry.resetTime) {
            this.store.delete(key);
            return null;
        }
        return entry;
    }
    set(key, entry) {
        this.store.set(key, entry);
    }
    increment(key) {
        const entry = this.get(key);
        if (entry) {
            entry.count++;
            this.set(key, entry);
            return entry.count;
        }
        return 0;
    }
    cleanup() {
        const now = Date.now();
        let cleaned = 0;
        for (const [key, entry] of this.store.entries()){
            if (now > entry.resetTime) {
                this.store.delete(key);
                cleaned++;
            }
        }
        if (cleaned > 0) {
            console.log(`[MEMORY_RATE_LIMIT] Limpiadas ${cleaned} entradas expiradas`);
        }
    }
    getStats() {
        const entries = this.store.size;
        const memoryUsage = JSON.stringify([
            ...this.store.entries()
        ]).length;
        return {
            entries,
            memoryUsage
        };
    }
    clear() {
        this.store.clear();
    }
    destroy() {
        if (this.cleanupInterval) {
            clearInterval(this.cleanupInterval);
        }
        this.store.clear();
    }
}
// Instancia global del store en memoria
const memoryStore = new MemoryRateLimitStore();
// =====================================================
// MÉTRICAS GLOBALES
// =====================================================
class RateLimitMetricsCollector {
    recordRequest(result, ip, endpoint) {
        this.metrics.totalRequests++;
        if (result.allowed) {
            this.metrics.allowedRequests++;
        } else {
            this.metrics.blockedRequests++;
            // Registrar IP bloqueada
            const currentCount = this.blockedIPs.get(ip) || 0;
            this.blockedIPs.set(ip, currentCount + 1);
        }
        // Registrar fuente
        if (result.source === 'redis') {
            this.metrics.redisHits++;
        } else if (result.source === 'memory') {
            this.metrics.memoryFallbacks++;
        } else if (result.source === 'error') {
            this.metrics.errors++;
        }
        // Registrar tiempo de respuesta
        if (result.metrics?.responseTime) {
            this.responseTimes.push(result.metrics.responseTime);
            // Mantener solo los últimos 1000 tiempos
            if (this.responseTimes.length > 1000) {
                this.responseTimes = this.responseTimes.slice(-1000);
            }
            // Calcular promedio
            this.metrics.averageResponseTime = this.responseTimes.reduce((a, b)=>a + b, 0) / this.responseTimes.length;
        }
        // Registrar endpoint
        const endpointCount = this.endpointCounts.get(endpoint) || 0;
        this.endpointCounts.set(endpoint, endpointCount + 1);
        // Actualizar tops
        this.updateTopLists();
    }
    updateTopLists() {
        // Top IPs bloqueadas
        this.metrics.topBlockedIPs = Array.from(this.blockedIPs.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([ip, count])=>({
                ip,
                count
            }));
        // Top endpoints
        this.metrics.topEndpoints = Array.from(this.endpointCounts.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([endpoint, count])=>({
                endpoint,
                count
            }));
    }
    getMetrics() {
        return {
            ...this.metrics
        };
    }
    reset() {
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs.clear();
        this.endpointCounts.clear();
    }
    constructor(){
        this.metrics = {
            totalRequests: 0,
            allowedRequests: 0,
            blockedRequests: 0,
            redisHits: 0,
            memoryFallbacks: 0,
            errors: 0,
            averageResponseTime: 0,
            topBlockedIPs: [],
            topEndpoints: []
        };
        this.responseTimes = [];
        this.blockedIPs = new Map();
        this.endpointCounts = new Map();
    }
}
// Instancia global del collector de métricas
const metricsCollector = new RateLimitMetricsCollector();
// =====================================================
// IMPLEMENTACIÓN REDIS
// =====================================================
// Función isRedisAvailable ahora se importa desde @/lib/redis
/**
 * Rate limiting con Redis
 */ async function rateLimitWithRedis(key, config) {
    const startTime = Date.now();
    try {
        // Usar la función importada de Redis
        const result = await (0, _redis.enterpriseRateLimit)(key, config);
        if (result) {
            return {
                allowed: result.allowed,
                limit: result.limit || config.maxRequests,
                remaining: result.remaining || 0,
                resetTime: result.resetTime || Date.now() + config.windowMs,
                retryAfter: result.allowed ? undefined : Math.ceil(config.windowMs / 1000),
                source: 'redis',
                metrics: {
                    responseTime: Date.now() - startTime,
                    cacheHit: true,
                    keyGenerated: key
                }
            };
        }
        // Si no hay resultado, usar implementación manual
        const { redis } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../redis")));
        const now = Date.now();
        const window = Math.floor(now / config.windowMs);
        const redisKey = `rate_limit:${key}:${window}`;
        // Usar pipeline para operaciones atómicas
        const pipeline = redis.pipeline();
        pipeline.incr(redisKey);
        pipeline.expire(redisKey, Math.ceil(config.windowMs / 1000));
        const results = await pipeline.exec();
        const count = results?.[0]?.[1] || 1;
        const remaining = Math.max(0, config.maxRequests - count);
        const resetTime = (window + 1) * config.windowMs;
        const allowed = count <= config.maxRequests;
        return {
            allowed,
            limit: config.maxRequests,
            remaining,
            resetTime,
            retryAfter: allowed ? undefined : Math.ceil((resetTime - now) / 1000),
            source: 'redis',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: true,
                keyGenerated: redisKey
            }
        };
    } catch (error) {
        console.error('[RATE_LIMIT] Error en Redis:', error);
        // Fallback a memoria en caso de error
        return rateLimitWithMemory(key, config);
    }
}
/**
 * Rate limiting con memoria (fallback)
 */ function rateLimitWithMemory(key, config) {
    const startTime = Date.now();
    const now = Date.now();
    let entry = memoryStore.get(key);
    if (!entry) {
        // Primera request en esta ventana
        entry = {
            count: 1,
            resetTime: now + config.windowMs,
            firstRequest: now
        };
        memoryStore.set(key, entry);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests - 1,
            resetTime: entry.resetTime,
            source: 'memory',
            metrics: {
                responseTime: Date.now() - startTime,
                cacheHit: false,
                keyGenerated: key
            }
        };
    }
    // Incrementar contador
    entry.count++;
    memoryStore.set(key, entry);
    const allowed = entry.count <= config.maxRequests;
    const remaining = Math.max(0, config.maxRequests - entry.count);
    return {
        allowed,
        limit: config.maxRequests,
        remaining,
        resetTime: entry.resetTime,
        retryAfter: allowed ? undefined : Math.ceil((entry.resetTime - now) / 1000),
        source: 'memory',
        metrics: {
            responseTime: Date.now() - startTime,
            cacheHit: true,
            keyGenerated: key
        }
    };
}
async function checkEnterpriseRateLimit(request, configName, customConfig) {
    const baseConfig = ENTERPRISE_RATE_LIMIT_CONFIGS[configName];
    if (!baseConfig) {
        return {
            allowed: true,
            limit: 1000,
            remaining: 999,
            resetTime: Date.now() + 60000,
            error: `Configuración '${configName}' no encontrada`,
            code: 'CONFIG_NOT_FOUND',
            source: 'error'
        };
    }
    const config = {
        ...baseConfig,
        ...customConfig
    };
    const keyGenerator = config.keyGenerator || hybridKeyGenerator;
    const key = keyGenerator(request);
    let result;
    try {
        // Intentar Redis primero si está habilitado
        if (config.enableRedis !== false && await (0, _redis.isRedisAvailable)()) {
            result = await rateLimitWithRedis(key, config);
        } else {
            result = rateLimitWithMemory(key, config);
        }
        // Registrar métricas si está habilitado
        if (config.enableMetrics) {
            const ip = getClientIP(request);
            const endpoint = getEndpoint(request);
            metricsCollector.recordRequest(result, ip, endpoint);
        }
        // Logging si está habilitado
        if (config.enableLogging) {
            if (!result.allowed) {
                console.warn(`[RATE_LIMIT] Límite excedido para ${key}: ${result.remaining}/${result.limit}`);
                // Callback personalizado si está definido
                if (config.onLimitReached) {
                    config.onLimitReached(key, request);
                }
            }
        }
        return result;
    } catch (error) {
        console.error('[RATE_LIMIT] Error en checkEnterpriseRateLimit:', error);
        return {
            allowed: true,
            limit: config.maxRequests,
            remaining: config.maxRequests,
            resetTime: Date.now() + config.windowMs,
            error: 'Error interno en rate limiting',
            code: 'INTERNAL_ERROR',
            source: 'error'
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxyYXRlLWxpbWl0aW5nXFxlbnRlcnByaXNlLXJhdGUtbGltaXRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpc3RlbWEgRW50ZXJwcmlzZSBkZSBSYXRlIExpbWl0aW5nXG4gKiBVbmlmaWNhIHRvZGFzIGxhcyBpbXBsZW1lbnRhY2lvbmVzIGRlIHJhdGUgbGltaXRpbmcgY29uIFJlZGlzIHkgZmFsbGJhY2sgZW4gbWVtb3JpYVxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0IH0gZnJvbSAnbmV4dCdcbmltcG9ydCB7IGlzUmVkaXNBdmFpbGFibGUsIGVudGVycHJpc2VSYXRlTGltaXQgfSBmcm9tICdAL2xpYi9pbnRlZ3JhdGlvbnMvcmVkaXMnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUSVBPUyBZIElOVEVSRkFDRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50ZXJwcmlzZVJhdGVMaW1pdENvbmZpZyB7XG4gIHdpbmRvd01zOiBudW1iZXJcbiAgbWF4UmVxdWVzdHM6IG51bWJlclxuICBtZXNzYWdlPzogc3RyaW5nXG4gIGtleUdlbmVyYXRvcj86IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KSA9PiBzdHJpbmdcbiAgc2tpcFN1Y2Nlc3NmdWxSZXF1ZXN0cz86IGJvb2xlYW5cbiAgc2tpcEZhaWxlZFJlcXVlc3RzPzogYm9vbGVhblxuICBlbmFibGVSZWRpcz86IGJvb2xlYW5cbiAgZW5hYmxlTWVtb3J5RmFsbGJhY2s/OiBib29sZWFuXG4gIGVuYWJsZU1ldHJpY3M/OiBib29sZWFuXG4gIGVuYWJsZUxvZ2dpbmc/OiBib29sZWFuXG4gIGN1c3RvbUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gIG9uTGltaXRSZWFjaGVkPzogKGtleTogc3RyaW5nLCByZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KSA9PiB2b2lkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdCB7XG4gIGFsbG93ZWQ6IGJvb2xlYW5cbiAgbGltaXQ6IG51bWJlclxuICByZW1haW5pbmc6IG51bWJlclxuICByZXNldFRpbWU6IG51bWJlclxuICByZXRyeUFmdGVyPzogbnVtYmVyXG4gIGVycm9yPzogc3RyaW5nXG4gIGNvZGU/OiBzdHJpbmdcbiAgc291cmNlOiAncmVkaXMnIHwgJ21lbW9yeScgfCAnZXJyb3InXG4gIG1ldHJpY3M/OiB7XG4gICAgcmVzcG9uc2VUaW1lOiBudW1iZXJcbiAgICBjYWNoZUhpdDogYm9vbGVhblxuICAgIGtleUdlbmVyYXRlZDogc3RyaW5nXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXRlTGltaXRNZXRyaWNzIHtcbiAgdG90YWxSZXF1ZXN0czogbnVtYmVyXG4gIGFsbG93ZWRSZXF1ZXN0czogbnVtYmVyXG4gIGJsb2NrZWRSZXF1ZXN0czogbnVtYmVyXG4gIHJlZGlzSGl0czogbnVtYmVyXG4gIG1lbW9yeUZhbGxiYWNrczogbnVtYmVyXG4gIGVycm9yczogbnVtYmVyXG4gIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IG51bWJlclxuICB0b3BCbG9ja2VkSVBzOiBBcnJheTx7IGlwOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT5cbiAgdG9wRW5kcG9pbnRzOiBBcnJheTx7IGVuZHBvaW50OiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTkZJR1VSQUNJT05FUyBQUkVERUZJTklEQVMgRU5URVJQUklTRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IEVOVEVSUFJJU0VfUkFURV9MSU1JVF9DT05GSUdTOiBSZWNvcmQ8c3RyaW5nLCBFbnRlcnByaXNlUmF0ZUxpbWl0Q29uZmlnPiA9IHtcbiAgLy8gQXV0ZW50aWNhY2nDs24gY3LDrXRpY2FcbiAgQ1JJVElDQUxfQVVUSDoge1xuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRvc1xuICAgIG1heFJlcXVlc3RzOiAzLCAvLyAzIGludGVudG9zIHBvciAxNSBtaW51dG9zXG4gICAgbWVzc2FnZTogJ0RlbWFzaWFkb3MgaW50ZW50b3MgZGUgYXV0ZW50aWNhY2nDs24gY3LDrXRpY2EuIEludGVudGEgZW4gMTUgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZSxcbiAgfSxcblxuICAvLyBBZG1pbiBBUElzXG4gIEFETUlOX0FQSToge1xuICAgIHdpbmRvd01zOiA1ICogNjAgKiAxMDAwLCAvLyA1IG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogNTAsIC8vIDUwIHJlcXVlc3RzIHBvciA1IG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSByZXF1ZXN0cyBhZG1pbmlzdHJhdGl2YXMgZXhjZWRpZG8uIEludGVudGEgZW4gNSBtaW51dG9zLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlLFxuICB9LFxuXG4gIC8vIEFQSXMgZGUgcGFnb3NcbiAgUEFZTUVOVF9BUEk6IHtcbiAgICB3aW5kb3dNczogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0b3NcbiAgICBtYXhSZXF1ZXN0czogMTUsIC8vIDE1IHJlcXVlc3RzIHBvciAxMCBtaW51dG9zXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgcmVxdWVzdHMgZGUgcGFnb3MgZXhjZWRpZG8uIEludGVudGEgZW4gMTAgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZSxcbiAgICBvbkxpbWl0UmVhY2hlZDogKGtleSwgcmVxdWVzdCkgPT4ge1xuICAgICAgY29uc29sZS53YXJuKGBbUEFZTUVOVF9SQVRFX0xJTUlUXSBMw61taXRlIGV4Y2VkaWRvIHBhcmEgJHtrZXl9YClcbiAgICB9LFxuICB9LFxuXG4gIC8vIEFQSXMgcMO6YmxpY2FzIGRlIHByb2R1Y3Rvc1xuICBQVUJMSUNfQVBJOiB7XG4gICAgd2luZG93TXM6IDEgKiA2MCAqIDEwMDAsIC8vIDEgbWludXRvXG4gICAgbWF4UmVxdWVzdHM6IDEwMCwgLy8gMTAwIHJlcXVlc3RzIHBvciBtaW51dG9cbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSByZXF1ZXN0cyBww7pibGljYXMgZXhjZWRpZG8uIEludGVudGEgZW4gMSBtaW51dG8uJyxcbiAgICBlbmFibGVSZWRpczogdHJ1ZSxcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IGZhbHNlLCAvLyBObyBsb2dnZWFyIEFQSXMgcMO6YmxpY2FzXG4gIH0sXG5cbiAgLy8gV2ViaG9va3NcbiAgV0VCSE9PS19BUEk6IHtcbiAgICB3aW5kb3dNczogMSAqIDYwICogMTAwMCwgLy8gMSBtaW51dG9cbiAgICBtYXhSZXF1ZXN0czogMjAwLCAvLyAyMDAgd2ViaG9va3MgcG9yIG1pbnV0b1xuICAgIG1lc3NhZ2U6ICdMw61taXRlIGRlIHdlYmhvb2tzIGV4Y2VkaWRvLicsXG4gICAgZW5hYmxlUmVkaXM6IHRydWUsXG4gICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICBlbmFibGVMb2dnaW5nOiB0cnVlLFxuICB9LFxuXG4gIC8vIELDunNxdWVkYXMgeSBjb25zdWx0YXNcbiAgU0VBUkNIX0FQSToge1xuICAgIHdpbmRvd01zOiAxICogNjAgKiAxMDAwLCAvLyAxIG1pbnV0b1xuICAgIG1heFJlcXVlc3RzOiA2MCwgLy8gNjAgYsO6c3F1ZWRhcyBwb3IgbWludXRvXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgYsO6c3F1ZWRhcyBleGNlZGlkby4gSW50ZW50YSBlbiAxIG1pbnV0by4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogZmFsc2UsXG4gIH0sXG5cbiAgLy8gVXBsb2FkIGRlIGFyY2hpdm9zXG4gIFVQTE9BRF9BUEk6IHtcbiAgICB3aW5kb3dNczogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dG9zXG4gICAgbWF4UmVxdWVzdHM6IDEwLCAvLyAxMCB1cGxvYWRzIHBvciA1IG1pbnV0b3NcbiAgICBtZXNzYWdlOiAnTMOtbWl0ZSBkZSB1cGxvYWRzIGV4Y2VkaWRvLiBJbnRlbnRhIGVuIDUgbWludXRvcy4nLFxuICAgIGVuYWJsZVJlZGlzOiB0cnVlLFxuICAgIGVuYWJsZU1ldHJpY3M6IHRydWUsXG4gICAgZW5hYmxlTG9nZ2luZzogdHJ1ZSxcbiAgfSxcblxuICAvLyBBUElzIGRlIGRlc2Fycm9sbG8vZGVidWdcbiAgREVCVUdfQVBJOiB7XG4gICAgd2luZG93TXM6IDEgKiA2MCAqIDEwMDAsIC8vIDEgbWludXRvXG4gICAgbWF4UmVxdWVzdHM6IDMwLCAvLyAzMCByZXF1ZXN0cyBwb3IgbWludXRvXG4gICAgbWVzc2FnZTogJ0zDrW1pdGUgZGUgZGVidWcgQVBJcyBleGNlZGlkby4nLFxuICAgIGVuYWJsZVJlZGlzOiBmYWxzZSwgLy8gVXNhciBtZW1vcmlhIHBhcmEgZGVidWdcbiAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgIGVuYWJsZUxvZ2dpbmc6IHRydWUsXG4gIH0sXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHRU5FUkFET1JFUyBERSBDTEFWRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2VuZXJhZG9yIGRlIGNsYXZlIHBvciBJUFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXBLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdClcbiAgcmV0dXJuIGBpcDoke2lwfWBcbn1cblxuLyoqXG4gKiBHZW5lcmFkb3IgZGUgY2xhdmUgcG9yIHVzdWFyaW8gYXV0ZW50aWNhZG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXJLZXlHZW5lcmF0b3IocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIC8vIEludGVudGFyIG9idGVuZXIgdXNlciBJRCBkZSBkaWZlcmVudGVzIGZ1ZW50ZXNcbiAgY29uc3QgdXNlcklkID0gZ2V0VXNlcklkKHJlcXVlc3QpXG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdClcblxuICByZXR1cm4gdXNlcklkID8gYHVzZXI6JHt1c2VySWR9YCA6IGBpcDoke2lwfWBcbn1cblxuLyoqXG4gKiBHZW5lcmFkb3IgZGUgY2xhdmUgcG9yIGVuZHBvaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRwb2ludEtleUdlbmVyYXRvcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgaXAgPSBnZXRDbGllbnRJUChyZXF1ZXN0KVxuICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KHJlcXVlc3QpXG5cbiAgcmV0dXJuIGBlbmRwb2ludDoke2lwfToke2VuZHBvaW50fWBcbn1cblxuLyoqXG4gKiBHZW5lcmFkb3IgZGUgY2xhdmUgaMOtYnJpZG8gKHVzdWFyaW8gKyBlbmRwb2ludClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh5YnJpZEtleUdlbmVyYXRvcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgdXNlcklkID0gZ2V0VXNlcklkKHJlcXVlc3QpXG4gIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdClcbiAgY29uc3QgZW5kcG9pbnQgPSBnZXRFbmRwb2ludChyZXF1ZXN0KVxuXG4gIGNvbnN0IHVzZXJQYXJ0ID0gdXNlcklkID8gYHVzZXI6JHt1c2VySWR9YCA6IGBpcDoke2lwfWBcbiAgcmV0dXJuIGAke3VzZXJQYXJ0fToke2VuZHBvaW50fWBcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJREFERVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogT2J0aWVuZSBsYSBJUCBkZWwgY2xpZW50ZVxuICovXG5mdW5jdGlvbiBnZXRDbGllbnRJUChyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgLy8gSW50ZW50YXIgZGlmZXJlbnRlcyBoZWFkZXJzIGRlIElQXG4gIGNvbnN0IGhlYWRlcnMgPSBbJ3gtZm9yd2FyZGVkLWZvcicsICd4LXJlYWwtaXAnLCAneC1jbGllbnQtaXAnLCAnY2YtY29ubmVjdGluZy1pcCddXG5cbiAgZm9yIChjb25zdCBoZWFkZXIgb2YgaGVhZGVycykge1xuICAgIGxldCBpcDogc3RyaW5nIHwgbnVsbCA9IG51bGxcblxuICAgIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCAmJiB0eXBlb2YgcmVxdWVzdC5oZWFkZXJzLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gTmV4dFJlcXVlc3RcbiAgICAgIGlwID0gKHJlcXVlc3QgYXMgTmV4dFJlcXVlc3QpLmhlYWRlcnMuZ2V0KGhlYWRlcilcbiAgICB9IGVsc2UgaWYgKCdoZWFkZXJzJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBOZXh0QXBpUmVxdWVzdFxuICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSAocmVxdWVzdCBhcyBOZXh0QXBpUmVxdWVzdCkuaGVhZGVyc1toZWFkZXJdXG4gICAgICBpcCA9IEFycmF5LmlzQXJyYXkoaGVhZGVyVmFsdWUpID8gaGVhZGVyVmFsdWVbMF0gOiBoZWFkZXJWYWx1ZSB8fCBudWxsXG4gICAgfVxuXG4gICAgaWYgKGlwKSB7XG4gICAgICAvLyBUb21hciBsYSBwcmltZXJhIElQIHNpIGhheSBtw7psdGlwbGVzXG4gICAgICByZXR1cm4gaXAuc3BsaXQoJywnKVswXS50cmltKClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJ3Vua25vd24nXG59XG5cbi8qKlxuICogT2J0aWVuZSBlbCBJRCBkZWwgdXN1YXJpbyBhdXRlbnRpY2Fkb1xuICovXG5mdW5jdGlvbiBnZXRVc2VySWQocmVxdWVzdDogTmV4dFJlcXVlc3QgfCBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xuICAvLyBJbnRlbnRhciBvYnRlbmVyIGRlIGRpZmVyZW50ZXMgZnVlbnRlc1xuXG4gIC8vIDEuIEhlYWRlcnMgZGUgQ2xlcmtcbiAgbGV0IHVzZXJJZDogc3RyaW5nIHwgbnVsbCA9IG51bGxcblxuICBpZiAoJ2hlYWRlcnMnIGluIHJlcXVlc3QgJiYgdHlwZW9mIHJlcXVlc3QuaGVhZGVycy5nZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBOZXh0UmVxdWVzdFxuICAgIHVzZXJJZCA9IChyZXF1ZXN0IGFzIE5leHRSZXF1ZXN0KS5oZWFkZXJzLmdldCgneC1jbGVyay11c2VyLWlkJylcbiAgfSBlbHNlIGlmICgnaGVhZGVycycgaW4gcmVxdWVzdCkge1xuICAgIC8vIE5leHRBcGlSZXF1ZXN0XG4gICAgY29uc3QgaGVhZGVyVmFsdWUgPSAocmVxdWVzdCBhcyBOZXh0QXBpUmVxdWVzdCkuaGVhZGVyc1sneC1jbGVyay11c2VyLWlkJ11cbiAgICB1c2VySWQgPSBBcnJheS5pc0FycmF5KGhlYWRlclZhbHVlKSA/IGhlYWRlclZhbHVlWzBdIDogaGVhZGVyVmFsdWUgfHwgbnVsbFxuICB9XG5cbiAgLy8gMi4gQ29udGV4dG8gZW50ZXJwcmlzZSBzaSBlc3TDoSBkaXNwb25pYmxlXG4gIGlmICghdXNlcklkICYmIChyZXF1ZXN0IGFzIGFueSkuZW50ZXJwcmlzZUF1dGg/LnVzZXJJZCkge1xuICAgIHVzZXJJZCA9IChyZXF1ZXN0IGFzIGFueSkuZW50ZXJwcmlzZUF1dGgudXNlcklkXG4gIH1cblxuICAvLyAzLiBDb250ZXh0byBkZSBhdXRlbnRpY2FjacOzbiBzaSBlc3TDoSBkaXNwb25pYmxlXG4gIGlmICghdXNlcklkICYmIChyZXF1ZXN0IGFzIGFueSkuYXV0aD8udXNlcklkKSB7XG4gICAgdXNlcklkID0gKHJlcXVlc3QgYXMgYW55KS5hdXRoLnVzZXJJZFxuICB9XG5cbiAgcmV0dXJuIHVzZXJJZFxufVxuXG4vKipcbiAqIE9idGllbmUgZWwgZW5kcG9pbnQgZGUgbGEgcmVxdWVzdFxuICovXG5mdW5jdGlvbiBnZXRFbmRwb2ludChyZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0KTogc3RyaW5nIHtcbiAgaWYgKCduZXh0VXJsJyBpbiByZXF1ZXN0KSB7XG4gICAgLy8gTmV4dFJlcXVlc3RcbiAgICByZXR1cm4gKHJlcXVlc3QgYXMgTmV4dFJlcXVlc3QpLm5leHRVcmwucGF0aG5hbWVcbiAgfSBlbHNlIGlmICgndXJsJyBpbiByZXF1ZXN0KSB7XG4gICAgLy8gTmV4dEFwaVJlcXVlc3RcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCgocmVxdWVzdCBhcyBOZXh0QXBpUmVxdWVzdCkudXJsIHx8ICcnLCAnaHR0cDovL2xvY2FsaG9zdCcpXG4gICAgICByZXR1cm4gdXJsLnBhdGhuYW1lXG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gJy91bmtub3duJ1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnL3Vua25vd24nXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTVE9SRSBFTiBNRU1PUklBIChGQUxMQkFDSylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBNZW1vcnlSYXRlTGltaXRFbnRyeSB7XG4gIGNvdW50OiBudW1iZXJcbiAgcmVzZXRUaW1lOiBudW1iZXJcbiAgZmlyc3RSZXF1ZXN0OiBudW1iZXJcbn1cblxuY2xhc3MgTWVtb3J5UmF0ZUxpbWl0U3RvcmUge1xuICBwcml2YXRlIHN0b3JlID0gbmV3IE1hcDxzdHJpbmcsIE1lbW9yeVJhdGVMaW1pdEVudHJ5PigpXG4gIHByaXZhdGUgY2xlYW51cEludGVydmFsOiBOb2RlSlMuVGltZW91dFxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIExpbXBpYXIgZW50cmFkYXMgZXhwaXJhZGFzIGNhZGEgNSBtaW51dG9zXG4gICAgdGhpcy5jbGVhbnVwSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKClcbiAgICAgIH0sXG4gICAgICA1ICogNjAgKiAxMDAwXG4gICAgKVxuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nKTogTWVtb3J5UmF0ZUxpbWl0RW50cnkgfCBudWxsIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuc3RvcmUuZ2V0KGtleSlcblxuICAgIGlmICghZW50cnkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHNpIGhhIGV4cGlyYWRvXG4gICAgaWYgKERhdGUubm93KCkgPiBlbnRyeS5yZXNldFRpbWUpIHtcbiAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKGtleSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIGVudHJ5XG4gIH1cblxuICBzZXQoa2V5OiBzdHJpbmcsIGVudHJ5OiBNZW1vcnlSYXRlTGltaXRFbnRyeSk6IHZvaWQge1xuICAgIHRoaXMuc3RvcmUuc2V0KGtleSwgZW50cnkpXG4gIH1cblxuICBpbmNyZW1lbnQoa2V5OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5nZXQoa2V5KVxuICAgIGlmIChlbnRyeSkge1xuICAgICAgZW50cnkuY291bnQrK1xuICAgICAgdGhpcy5zZXQoa2V5LCBlbnRyeSlcbiAgICAgIHJldHVybiBlbnRyeS5jb3VudFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICBsZXQgY2xlYW5lZCA9IDBcblxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuc3RvcmUuZW50cmllcygpKSB7XG4gICAgICBpZiAobm93ID4gZW50cnkucmVzZXRUaW1lKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKGtleSlcbiAgICAgICAgY2xlYW5lZCsrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsZWFuZWQgPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW01FTU9SWV9SQVRFX0xJTUlUXSBMaW1waWFkYXMgJHtjbGVhbmVkfSBlbnRyYWRhcyBleHBpcmFkYXNgKVxuICAgIH1cbiAgfVxuXG4gIGdldFN0YXRzKCk6IHsgZW50cmllczogbnVtYmVyOyBtZW1vcnlVc2FnZTogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGVudHJpZXMgPSB0aGlzLnN0b3JlLnNpemVcbiAgICBjb25zdCBtZW1vcnlVc2FnZSA9IEpTT04uc3RyaW5naWZ5KFsuLi50aGlzLnN0b3JlLmVudHJpZXMoKV0pLmxlbmd0aFxuXG4gICAgcmV0dXJuIHsgZW50cmllcywgbWVtb3J5VXNhZ2UgfVxuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9yZS5jbGVhcigpXG4gIH1cblxuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsZWFudXBJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNsZWFudXBJbnRlcnZhbClcbiAgICB9XG4gICAgdGhpcy5zdG9yZS5jbGVhcigpXG4gIH1cbn1cblxuLy8gSW5zdGFuY2lhIGdsb2JhbCBkZWwgc3RvcmUgZW4gbWVtb3JpYVxuY29uc3QgbWVtb3J5U3RvcmUgPSBuZXcgTWVtb3J5UmF0ZUxpbWl0U3RvcmUoKVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTcOJVFJJQ0FTIEdMT0JBTEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBSYXRlTGltaXRNZXRyaWNzQ29sbGVjdG9yIHtcbiAgcHJpdmF0ZSBtZXRyaWNzOiBSYXRlTGltaXRNZXRyaWNzID0ge1xuICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgYWxsb3dlZFJlcXVlc3RzOiAwLFxuICAgIGJsb2NrZWRSZXF1ZXN0czogMCxcbiAgICByZWRpc0hpdHM6IDAsXG4gICAgbWVtb3J5RmFsbGJhY2tzOiAwLFxuICAgIGVycm9yczogMCxcbiAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLFxuICAgIHRvcEJsb2NrZWRJUHM6IFtdLFxuICAgIHRvcEVuZHBvaW50czogW10sXG4gIH1cblxuICBwcml2YXRlIHJlc3BvbnNlVGltZXM6IG51bWJlcltdID0gW11cbiAgcHJpdmF0ZSBibG9ja2VkSVBzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKVxuICBwcml2YXRlIGVuZHBvaW50Q291bnRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKVxuXG4gIHJlY29yZFJlcXVlc3QocmVzdWx0OiBFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0LCBpcDogc3RyaW5nLCBlbmRwb2ludDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5tZXRyaWNzLnRvdGFsUmVxdWVzdHMrK1xuXG4gICAgaWYgKHJlc3VsdC5hbGxvd2VkKSB7XG4gICAgICB0aGlzLm1ldHJpY3MuYWxsb3dlZFJlcXVlc3RzKytcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXRyaWNzLmJsb2NrZWRSZXF1ZXN0cysrXG5cbiAgICAgIC8vIFJlZ2lzdHJhciBJUCBibG9xdWVhZGFcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuYmxvY2tlZElQcy5nZXQoaXApIHx8IDBcbiAgICAgIHRoaXMuYmxvY2tlZElQcy5zZXQoaXAsIGN1cnJlbnRDb3VudCArIDEpXG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIGZ1ZW50ZVxuICAgIGlmIChyZXN1bHQuc291cmNlID09PSAncmVkaXMnKSB7XG4gICAgICB0aGlzLm1ldHJpY3MucmVkaXNIaXRzKytcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5zb3VyY2UgPT09ICdtZW1vcnknKSB7XG4gICAgICB0aGlzLm1ldHJpY3MubWVtb3J5RmFsbGJhY2tzKytcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5zb3VyY2UgPT09ICdlcnJvcicpIHtcbiAgICAgIHRoaXMubWV0cmljcy5lcnJvcnMrK1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdHJhciB0aWVtcG8gZGUgcmVzcHVlc3RhXG4gICAgaWYgKHJlc3VsdC5tZXRyaWNzPy5yZXNwb25zZVRpbWUpIHtcbiAgICAgIHRoaXMucmVzcG9uc2VUaW1lcy5wdXNoKHJlc3VsdC5tZXRyaWNzLnJlc3BvbnNlVGltZSlcblxuICAgICAgLy8gTWFudGVuZXIgc29sbyBsb3Mgw7psdGltb3MgMTAwMCB0aWVtcG9zXG4gICAgICBpZiAodGhpcy5yZXNwb25zZVRpbWVzLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgdGhpcy5yZXNwb25zZVRpbWVzID0gdGhpcy5yZXNwb25zZVRpbWVzLnNsaWNlKC0xMDAwKVxuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhciBwcm9tZWRpb1xuICAgICAgdGhpcy5tZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWUgPVxuICAgICAgICB0aGlzLnJlc3BvbnNlVGltZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB0aGlzLnJlc3BvbnNlVGltZXMubGVuZ3RoXG4gICAgfVxuXG4gICAgLy8gUmVnaXN0cmFyIGVuZHBvaW50XG4gICAgY29uc3QgZW5kcG9pbnRDb3VudCA9IHRoaXMuZW5kcG9pbnRDb3VudHMuZ2V0KGVuZHBvaW50KSB8fCAwXG4gICAgdGhpcy5lbmRwb2ludENvdW50cy5zZXQoZW5kcG9pbnQsIGVuZHBvaW50Q291bnQgKyAxKVxuXG4gICAgLy8gQWN0dWFsaXphciB0b3BzXG4gICAgdGhpcy51cGRhdGVUb3BMaXN0cygpXG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRvcExpc3RzKCk6IHZvaWQge1xuICAgIC8vIFRvcCBJUHMgYmxvcXVlYWRhc1xuICAgIHRoaXMubWV0cmljcy50b3BCbG9ja2VkSVBzID0gQXJyYXkuZnJvbSh0aGlzLmJsb2NrZWRJUHMuZW50cmllcygpKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKVxuICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgLm1hcCgoW2lwLCBjb3VudF0pID0+ICh7IGlwLCBjb3VudCB9KSlcblxuICAgIC8vIFRvcCBlbmRwb2ludHNcbiAgICB0aGlzLm1ldHJpY3MudG9wRW5kcG9pbnRzID0gQXJyYXkuZnJvbSh0aGlzLmVuZHBvaW50Q291bnRzLmVudHJpZXMoKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAgIC5zbGljZSgwLCAxMClcbiAgICAgIC5tYXAoKFtlbmRwb2ludCwgY291bnRdKSA9PiAoeyBlbmRwb2ludCwgY291bnQgfSkpXG4gIH1cblxuICBnZXRNZXRyaWNzKCk6IFJhdGVMaW1pdE1ldHJpY3Mge1xuICAgIHJldHVybiB7IC4uLnRoaXMubWV0cmljcyB9XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICB0b3RhbFJlcXVlc3RzOiAwLFxuICAgICAgYWxsb3dlZFJlcXVlc3RzOiAwLFxuICAgICAgYmxvY2tlZFJlcXVlc3RzOiAwLFxuICAgICAgcmVkaXNIaXRzOiAwLFxuICAgICAgbWVtb3J5RmFsbGJhY2tzOiAwLFxuICAgICAgZXJyb3JzOiAwLFxuICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMCxcbiAgICAgIHRvcEJsb2NrZWRJUHM6IFtdLFxuICAgICAgdG9wRW5kcG9pbnRzOiBbXSxcbiAgICB9XG4gICAgdGhpcy5yZXNwb25zZVRpbWVzID0gW11cbiAgICB0aGlzLmJsb2NrZWRJUHMuY2xlYXIoKVxuICAgIHRoaXMuZW5kcG9pbnRDb3VudHMuY2xlYXIoKVxuICB9XG59XG5cbi8vIEluc3RhbmNpYSBnbG9iYWwgZGVsIGNvbGxlY3RvciBkZSBtw6l0cmljYXNcbmNvbnN0IG1ldHJpY3NDb2xsZWN0b3IgPSBuZXcgUmF0ZUxpbWl0TWV0cmljc0NvbGxlY3RvcigpXG5cbi8vIEV4cG9ydGFyIHBhcmEgdXNvIGV4dGVybm9cbmV4cG9ydCB7IG1lbW9yeVN0b3JlLCBtZXRyaWNzQ29sbGVjdG9yIH1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElNUExFTUVOVEFDScOTTiBSRURJU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gRnVuY2nDs24gaXNSZWRpc0F2YWlsYWJsZSBhaG9yYSBzZSBpbXBvcnRhIGRlc2RlIEAvbGliL3JlZGlzXG5cbi8qKlxuICogUmF0ZSBsaW1pdGluZyBjb24gUmVkaXNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmF0ZUxpbWl0V2l0aFJlZGlzKFxuICBrZXk6IHN0cmluZyxcbiAgY29uZmlnOiBFbnRlcnByaXNlUmF0ZUxpbWl0Q29uZmlnXG4pOiBQcm9taXNlPEVudGVycHJpc2VSYXRlTGltaXRSZXN1bHQ+IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuXG4gIHRyeSB7XG4gICAgLy8gVXNhciBsYSBmdW5jacOzbiBpbXBvcnRhZGEgZGUgUmVkaXNcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbnRlcnByaXNlUmF0ZUxpbWl0KGtleSwgY29uZmlnKVxuXG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWxsb3dlZDogcmVzdWx0LmFsbG93ZWQsXG4gICAgICAgIGxpbWl0OiByZXN1bHQubGltaXQgfHwgY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgICByZW1haW5pbmc6IHJlc3VsdC5yZW1haW5pbmcgfHwgMCxcbiAgICAgICAgcmVzZXRUaW1lOiByZXN1bHQucmVzZXRUaW1lIHx8IERhdGUubm93KCkgKyBjb25maWcud2luZG93TXMsXG4gICAgICAgIHJldHJ5QWZ0ZXI6IHJlc3VsdC5hbGxvd2VkID8gdW5kZWZpbmVkIDogTWF0aC5jZWlsKGNvbmZpZy53aW5kb3dNcyAvIDEwMDApLFxuICAgICAgICBzb3VyY2U6ICdyZWRpcycsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgY2FjaGVIaXQ6IHRydWUsXG4gICAgICAgICAga2V5R2VuZXJhdGVkOiBrZXksXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2kgbm8gaGF5IHJlc3VsdGFkbywgdXNhciBpbXBsZW1lbnRhY2nDs24gbWFudWFsXG4gICAgY29uc3QgeyByZWRpcyB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9yZWRpcycpXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IHdpbmRvdyA9IE1hdGguZmxvb3Iobm93IC8gY29uZmlnLndpbmRvd01zKVxuICAgIGNvbnN0IHJlZGlzS2V5ID0gYHJhdGVfbGltaXQ6JHtrZXl9OiR7d2luZG93fWBcblxuICAgIC8vIFVzYXIgcGlwZWxpbmUgcGFyYSBvcGVyYWNpb25lcyBhdMOzbWljYXNcbiAgICBjb25zdCBwaXBlbGluZSA9IHJlZGlzLnBpcGVsaW5lKClcbiAgICBwaXBlbGluZS5pbmNyKHJlZGlzS2V5KVxuICAgIHBpcGVsaW5lLmV4cGlyZShyZWRpc0tleSwgTWF0aC5jZWlsKGNvbmZpZy53aW5kb3dNcyAvIDEwMDApKVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHBpcGVsaW5lLmV4ZWMoKVxuICAgIGNvbnN0IGNvdW50ID0gKHJlc3VsdHM/LlswXT8uWzFdIGFzIG51bWJlcikgfHwgMVxuXG4gICAgY29uc3QgcmVtYWluaW5nID0gTWF0aC5tYXgoMCwgY29uZmlnLm1heFJlcXVlc3RzIC0gY291bnQpXG4gICAgY29uc3QgcmVzZXRUaW1lID0gKHdpbmRvdyArIDEpICogY29uZmlnLndpbmRvd01zXG4gICAgY29uc3QgYWxsb3dlZCA9IGNvdW50IDw9IGNvbmZpZy5tYXhSZXF1ZXN0c1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQsXG4gICAgICBsaW1pdDogY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgcmVtYWluaW5nLFxuICAgICAgcmVzZXRUaW1lLFxuICAgICAgcmV0cnlBZnRlcjogYWxsb3dlZCA/IHVuZGVmaW5lZCA6IE1hdGguY2VpbCgocmVzZXRUaW1lIC0gbm93KSAvIDEwMDApLFxuICAgICAgc291cmNlOiAncmVkaXMnLFxuICAgICAgbWV0cmljczoge1xuICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgIGNhY2hlSGl0OiB0cnVlLFxuICAgICAgICBrZXlHZW5lcmF0ZWQ6IHJlZGlzS2V5LFxuICAgICAgfSxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1JBVEVfTElNSVRdIEVycm9yIGVuIFJlZGlzOicsIGVycm9yKVxuXG4gICAgLy8gRmFsbGJhY2sgYSBtZW1vcmlhIGVuIGNhc28gZGUgZXJyb3JcbiAgICByZXR1cm4gcmF0ZUxpbWl0V2l0aE1lbW9yeShrZXksIGNvbmZpZylcbiAgfVxufVxuXG4vKipcbiAqIFJhdGUgbGltaXRpbmcgY29uIG1lbW9yaWEgKGZhbGxiYWNrKVxuICovXG5mdW5jdGlvbiByYXRlTGltaXRXaXRoTWVtb3J5KFxuICBrZXk6IHN0cmluZyxcbiAgY29uZmlnOiBFbnRlcnByaXNlUmF0ZUxpbWl0Q29uZmlnXG4pOiBFbnRlcnByaXNlUmF0ZUxpbWl0UmVzdWx0IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG5cbiAgbGV0IGVudHJ5ID0gbWVtb3J5U3RvcmUuZ2V0KGtleSlcblxuICBpZiAoIWVudHJ5KSB7XG4gICAgLy8gUHJpbWVyYSByZXF1ZXN0IGVuIGVzdGEgdmVudGFuYVxuICAgIGVudHJ5ID0ge1xuICAgICAgY291bnQ6IDEsXG4gICAgICByZXNldFRpbWU6IG5vdyArIGNvbmZpZy53aW5kb3dNcyxcbiAgICAgIGZpcnN0UmVxdWVzdDogbm93LFxuICAgIH1cbiAgICBtZW1vcnlTdG9yZS5zZXQoa2V5LCBlbnRyeSlcblxuICAgIHJldHVybiB7XG4gICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlbWFpbmluZzogY29uZmlnLm1heFJlcXVlc3RzIC0gMSxcbiAgICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lLFxuICAgICAgc291cmNlOiAnbWVtb3J5JyxcbiAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBjYWNoZUhpdDogZmFsc2UsXG4gICAgICAgIGtleUdlbmVyYXRlZDoga2V5LFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvLyBJbmNyZW1lbnRhciBjb250YWRvclxuICBlbnRyeS5jb3VudCsrXG4gIG1lbW9yeVN0b3JlLnNldChrZXksIGVudHJ5KVxuXG4gIGNvbnN0IGFsbG93ZWQgPSBlbnRyeS5jb3VudCA8PSBjb25maWcubWF4UmVxdWVzdHNcbiAgY29uc3QgcmVtYWluaW5nID0gTWF0aC5tYXgoMCwgY29uZmlnLm1heFJlcXVlc3RzIC0gZW50cnkuY291bnQpXG5cbiAgcmV0dXJuIHtcbiAgICBhbGxvd2VkLFxuICAgIGxpbWl0OiBjb25maWcubWF4UmVxdWVzdHMsXG4gICAgcmVtYWluaW5nLFxuICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lLFxuICAgIHJldHJ5QWZ0ZXI6IGFsbG93ZWQgPyB1bmRlZmluZWQgOiBNYXRoLmNlaWwoKGVudHJ5LnJlc2V0VGltZSAtIG5vdykgLyAxMDAwKSxcbiAgICBzb3VyY2U6ICdtZW1vcnknLFxuICAgIG1ldHJpY3M6IHtcbiAgICAgIHJlc3BvbnNlVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgIGNhY2hlSGl0OiB0cnVlLFxuICAgICAga2V5R2VuZXJhdGVkOiBrZXksXG4gICAgfSxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRlVOQ0nDk04gUFJJTkNJUEFMIERFIFJBVEUgTElNSVRJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRnVuY2nDs24gcHJpbmNpcGFsIGRlIHJhdGUgbGltaXRpbmcgZW50ZXJwcmlzZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tFbnRlcnByaXNlUmF0ZUxpbWl0KFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCB8IE5leHRBcGlSZXF1ZXN0LFxuICBjb25maWdOYW1lOiBrZXlvZiB0eXBlb2YgRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1MsXG4gIGN1c3RvbUNvbmZpZz86IFBhcnRpYWw8RW50ZXJwcmlzZVJhdGVMaW1pdENvbmZpZz5cbik6IFByb21pc2U8RW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdD4ge1xuICBjb25zdCBiYXNlQ29uZmlnID0gRU5URVJQUklTRV9SQVRFX0xJTUlUX0NPTkZJR1NbY29uZmlnTmFtZV1cblxuICBpZiAoIWJhc2VDb25maWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWxsb3dlZDogdHJ1ZSxcbiAgICAgIGxpbWl0OiAxMDAwLFxuICAgICAgcmVtYWluaW5nOiA5OTksXG4gICAgICByZXNldFRpbWU6IERhdGUubm93KCkgKyA2MDAwMCxcbiAgICAgIGVycm9yOiBgQ29uZmlndXJhY2nDs24gJyR7Y29uZmlnTmFtZX0nIG5vIGVuY29udHJhZGFgLFxuICAgICAgY29kZTogJ0NPTkZJR19OT1RfRk9VTkQnLFxuICAgICAgc291cmNlOiAnZXJyb3InLFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IHsgLi4uYmFzZUNvbmZpZywgLi4uY3VzdG9tQ29uZmlnIH1cbiAgY29uc3Qga2V5R2VuZXJhdG9yID0gY29uZmlnLmtleUdlbmVyYXRvciB8fCBoeWJyaWRLZXlHZW5lcmF0b3JcbiAgY29uc3Qga2V5ID0ga2V5R2VuZXJhdG9yKHJlcXVlc3QpXG5cbiAgbGV0IHJlc3VsdDogRW50ZXJwcmlzZVJhdGVMaW1pdFJlc3VsdFxuXG4gIHRyeSB7XG4gICAgLy8gSW50ZW50YXIgUmVkaXMgcHJpbWVybyBzaSBlc3TDoSBoYWJpbGl0YWRvXG4gICAgaWYgKGNvbmZpZy5lbmFibGVSZWRpcyAhPT0gZmFsc2UgJiYgKGF3YWl0IGlzUmVkaXNBdmFpbGFibGUoKSkpIHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHJhdGVMaW1pdFdpdGhSZWRpcyhrZXksIGNvbmZpZylcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gcmF0ZUxpbWl0V2l0aE1lbW9yeShrZXksIGNvbmZpZylcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RyYXIgbcOpdHJpY2FzIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICBpZiAoY29uZmlnLmVuYWJsZU1ldHJpY3MpIHtcbiAgICAgIGNvbnN0IGlwID0gZ2V0Q2xpZW50SVAocmVxdWVzdClcbiAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQocmVxdWVzdClcbiAgICAgIG1ldHJpY3NDb2xsZWN0b3IucmVjb3JkUmVxdWVzdChyZXN1bHQsIGlwLCBlbmRwb2ludClcbiAgICB9XG5cbiAgICAvLyBMb2dnaW5nIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICBpZiAoY29uZmlnLmVuYWJsZUxvZ2dpbmcpIHtcbiAgICAgIGlmICghcmVzdWx0LmFsbG93ZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBbUkFURV9MSU1JVF0gTMOtbWl0ZSBleGNlZGlkbyBwYXJhICR7a2V5fTogJHtyZXN1bHQucmVtYWluaW5nfS8ke3Jlc3VsdC5saW1pdH1gXG4gICAgICAgIClcblxuICAgICAgICAvLyBDYWxsYmFjayBwZXJzb25hbGl6YWRvIHNpIGVzdMOhIGRlZmluaWRvXG4gICAgICAgIGlmIChjb25maWcub25MaW1pdFJlYWNoZWQpIHtcbiAgICAgICAgICBjb25maWcub25MaW1pdFJlYWNoZWQoa2V5LCByZXF1ZXN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tSQVRFX0xJTUlUXSBFcnJvciBlbiBjaGVja0VudGVycHJpc2VSYXRlTGltaXQ6JywgZXJyb3IpXG5cbiAgICByZXR1cm4ge1xuICAgICAgYWxsb3dlZDogdHJ1ZSwgLy8gUGVybWl0aXIgZW4gY2FzbyBkZSBlcnJvclxuICAgICAgbGltaXQ6IGNvbmZpZy5tYXhSZXF1ZXN0cyxcbiAgICAgIHJlbWFpbmluZzogY29uZmlnLm1heFJlcXVlc3RzLFxuICAgICAgcmVzZXRUaW1lOiBEYXRlLm5vdygpICsgY29uZmlnLndpbmRvd01zLFxuICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGVuIHJhdGUgbGltaXRpbmcnLFxuICAgICAgY29kZTogJ0lOVEVSTkFMX0VSUk9SJyxcbiAgICAgIHNvdXJjZTogJ2Vycm9yJyxcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJFTlRFUlBSSVNFX1JBVEVfTElNSVRfQ09ORklHUyIsImNoZWNrRW50ZXJwcmlzZVJhdGVMaW1pdCIsImVuZHBvaW50S2V5R2VuZXJhdG9yIiwiaHlicmlkS2V5R2VuZXJhdG9yIiwiaXBLZXlHZW5lcmF0b3IiLCJtZW1vcnlTdG9yZSIsIm1ldHJpY3NDb2xsZWN0b3IiLCJ1c2VyS2V5R2VuZXJhdG9yIiwiQ1JJVElDQUxfQVVUSCIsIndpbmRvd01zIiwibWF4UmVxdWVzdHMiLCJtZXNzYWdlIiwiZW5hYmxlUmVkaXMiLCJlbmFibGVNZXRyaWNzIiwiZW5hYmxlTG9nZ2luZyIsIkFETUlOX0FQSSIsIlBBWU1FTlRfQVBJIiwib25MaW1pdFJlYWNoZWQiLCJrZXkiLCJyZXF1ZXN0IiwiY29uc29sZSIsIndhcm4iLCJQVUJMSUNfQVBJIiwiV0VCSE9PS19BUEkiLCJTRUFSQ0hfQVBJIiwiVVBMT0FEX0FQSSIsIkRFQlVHX0FQSSIsImlwIiwiZ2V0Q2xpZW50SVAiLCJ1c2VySWQiLCJnZXRVc2VySWQiLCJlbmRwb2ludCIsImdldEVuZHBvaW50IiwidXNlclBhcnQiLCJoZWFkZXJzIiwiaGVhZGVyIiwiZ2V0IiwiaGVhZGVyVmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJzcGxpdCIsInRyaW0iLCJlbnRlcnByaXNlQXV0aCIsImF1dGgiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJ1cmwiLCJVUkwiLCJNZW1vcnlSYXRlTGltaXRTdG9yZSIsInN0b3JlIiwiTWFwIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhbnVwIiwiZW50cnkiLCJEYXRlIiwibm93IiwicmVzZXRUaW1lIiwiZGVsZXRlIiwic2V0IiwiaW5jcmVtZW50IiwiY291bnQiLCJjbGVhbmVkIiwiZW50cmllcyIsImxvZyIsImdldFN0YXRzIiwic2l6ZSIsIm1lbW9yeVVzYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsImNsZWFyIiwiZGVzdHJveSIsImNsZWFySW50ZXJ2YWwiLCJSYXRlTGltaXRNZXRyaWNzQ29sbGVjdG9yIiwicmVjb3JkUmVxdWVzdCIsInJlc3VsdCIsIm1ldHJpY3MiLCJ0b3RhbFJlcXVlc3RzIiwiYWxsb3dlZCIsImFsbG93ZWRSZXF1ZXN0cyIsImJsb2NrZWRSZXF1ZXN0cyIsImN1cnJlbnRDb3VudCIsImJsb2NrZWRJUHMiLCJzb3VyY2UiLCJyZWRpc0hpdHMiLCJtZW1vcnlGYWxsYmFja3MiLCJlcnJvcnMiLCJyZXNwb25zZVRpbWUiLCJyZXNwb25zZVRpbWVzIiwicHVzaCIsInNsaWNlIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsInJlZHVjZSIsImEiLCJiIiwiZW5kcG9pbnRDb3VudCIsImVuZHBvaW50Q291bnRzIiwidXBkYXRlVG9wTGlzdHMiLCJ0b3BCbG9ja2VkSVBzIiwiZnJvbSIsInNvcnQiLCJtYXAiLCJ0b3BFbmRwb2ludHMiLCJnZXRNZXRyaWNzIiwicmVzZXQiLCJyYXRlTGltaXRXaXRoUmVkaXMiLCJjb25maWciLCJzdGFydFRpbWUiLCJlbnRlcnByaXNlUmF0ZUxpbWl0IiwibGltaXQiLCJyZW1haW5pbmciLCJyZXRyeUFmdGVyIiwidW5kZWZpbmVkIiwiTWF0aCIsImNlaWwiLCJjYWNoZUhpdCIsImtleUdlbmVyYXRlZCIsInJlZGlzIiwid2luZG93IiwiZmxvb3IiLCJyZWRpc0tleSIsInBpcGVsaW5lIiwiaW5jciIsImV4cGlyZSIsInJlc3VsdHMiLCJleGVjIiwibWF4IiwiZXJyb3IiLCJyYXRlTGltaXRXaXRoTWVtb3J5IiwiZmlyc3RSZXF1ZXN0IiwiY29uZmlnTmFtZSIsImN1c3RvbUNvbmZpZyIsImJhc2VDb25maWciLCJjb2RlIiwia2V5R2VuZXJhdG9yIiwiaXNSZWRpc0F2YWlsYWJsZSJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs7Ozs7OztRQXlEWUE7ZUFBQUE7O1FBc2lCU0M7ZUFBQUE7O1FBdmJOQztlQUFBQTs7UUFVQUM7ZUFBQUE7O1FBN0JBQztlQUFBQTs7UUE4VFBDO2VBQUFBOztRQUFhQztlQUFBQTs7UUF0VE5DO2VBQUFBOzs7dUJBekpzQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUQvQyxNQUFNUCxnQ0FBMkU7SUFDdEYsd0JBQXdCO0lBQ3hCUSxlQUFlO1FBQ2JDLFVBQVUsS0FBSyxLQUFLO1FBQ3BCQyxhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsYUFBYTtRQUNiQyxlQUFlO1FBQ2ZDLGVBQWU7SUFDakI7SUFFQSxhQUFhO0lBQ2JDLFdBQVc7UUFDVE4sVUFBVSxJQUFJLEtBQUs7UUFDbkJDLGFBQWE7UUFDYkMsU0FBUztRQUNUQyxhQUFhO1FBQ2JDLGVBQWU7UUFDZkMsZUFBZTtJQUNqQjtJQUVBLGdCQUFnQjtJQUNoQkUsYUFBYTtRQUNYUCxVQUFVLEtBQUssS0FBSztRQUNwQkMsYUFBYTtRQUNiQyxTQUFTO1FBQ1RDLGFBQWE7UUFDYkMsZUFBZTtRQUNmQyxlQUFlO1FBQ2ZHLGdCQUFnQixDQUFDQyxLQUFLQztZQUNwQkMsUUFBUUMsSUFBSSxDQUFDLENBQUMsMENBQTBDLEVBQUVILEtBQUs7UUFDakU7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QkksWUFBWTtRQUNWYixVQUFVLElBQUksS0FBSztRQUNuQkMsYUFBYTtRQUNiQyxTQUFTO1FBQ1RDLGFBQWE7UUFDYkMsZUFBZTtRQUNmQyxlQUFlO0lBQ2pCO0lBRUEsV0FBVztJQUNYUyxhQUFhO1FBQ1hkLFVBQVUsSUFBSSxLQUFLO1FBQ25CQyxhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsYUFBYTtRQUNiQyxlQUFlO1FBQ2ZDLGVBQWU7SUFDakI7SUFF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