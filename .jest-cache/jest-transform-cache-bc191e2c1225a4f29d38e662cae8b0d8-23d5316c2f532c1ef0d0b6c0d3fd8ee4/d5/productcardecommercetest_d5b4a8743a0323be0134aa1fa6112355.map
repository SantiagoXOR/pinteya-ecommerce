{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\__tests__\\product-card-ecommerce.test.tsx"],"sourcesContent":["import { render, screen } from '@testing-library/react'\r\nimport { ProductCard } from '../card'\r\n\r\ndescribe('ProductCard with E-commerce Components', () => {\r\n  const defaultProps = {\r\n    title: 'Pintura Sherwin Williams',\r\n    price: 8500,\r\n    originalPrice: 10000,\r\n    stock: 12,\r\n    onAddToCart: jest.fn(),\r\n  }\r\n\r\n  it('renders legacy version when useNewComponents is false', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={false}\r\n      />\r\n    )\r\n    \r\n    // Verifica que use el formato legacy de precios\r\n    expect(screen.getByText('$8.500')).toBeInTheDocument()\r\n    expect(screen.getByText('$10.000')).toBeInTheDocument()\r\n    \r\n    // Verifica mensaje de stock legacy\r\n    expect(screen.queryByText(/Solo quedan/)).not.toBeInTheDocument()\r\n  })\r\n\r\n  it('renders new components when useNewComponents is true', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n        showExactStock={true}\r\n        stockUnit=\"latas\"\r\n      />\r\n    )\r\n    \r\n    // Verifica que use PriceDisplay (formato con separadores de miles)\r\n    expect(screen.getByText('$ 8.500,00')).toBeInTheDocument()\r\n    \r\n    // Verifica que use StockIndicator\r\n    expect(screen.getByText(/12 latas disponibles/)).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows installments when enabled', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n        showInstallments={true}\r\n        installments={{\r\n          quantity: 6,\r\n          amount: 1417,\r\n          interestFree: true\r\n        }}\r\n      />\r\n    )\r\n    \r\n    // Verifica información de cuotas (ahora en una sola línea en variant compact)\r\n    expect(screen.getByText(/6x de.*\\$ 14,17.*sin interés/)).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows free shipping badge when enabled', () => {\r\n    render(\r\n      <ProductCard\r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n        showFreeShipping={true}\r\n      />\r\n    )\r\n\r\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows low stock warning with new components', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        stock={3}\r\n        useNewComponents={true}\r\n        showExactStock={true}\r\n        lowStockThreshold={5}\r\n        stockUnit=\"unidades\"\r\n      />\r\n    )\r\n    \r\n    // Verifica que muestre stock bajo\r\n    expect(screen.getByText(/3 unidades disponibles/)).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows out of stock with new components', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        stock={0}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    expect(screen.getAllByText('Sin stock')[0]).toBeInTheDocument()\r\n  })\r\n\r\n  it('handles different stock units correctly', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        stock={5}\r\n        useNewComponents={true}\r\n        showExactStock={true}\r\n        stockUnit=\"litros\"\r\n      />\r\n    )\r\n    \r\n    expect(screen.getByText(/5 litros disponibles/)).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows discount percentage with new PriceDisplay', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    // PriceDisplay calcula automáticamente el descuento\r\n    // (10000-8500)/10000 * 100 = 15%\r\n    expect(screen.getByText('-15%')).toBeInTheDocument()\r\n  })\r\n\r\n  it('maintains backward compatibility with legacy props', () => {\r\n    render(\r\n      <ProductCard\r\n        {...defaultProps}\r\n        badge=\"Envío gratis\"\r\n        discount=\"15%\"\r\n        useNewComponents={false}\r\n      />\r\n    )\r\n\r\n    // Verifica que los props legacy sigan funcionando\r\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\r\n    expect(screen.getByText('15%')).toBeInTheDocument()\r\n  })\r\n\r\n  it('applies compact variant for PriceDisplay in ProductCard', () => {\r\n    const { container } = render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    // Verifica que PriceDisplay use variante compact\r\n    expect(container.querySelector('.flex-col.gap-0\\\\.5')).toBeInTheDocument()\r\n  })\r\n\r\n  it('uses minimal variant for StockIndicator in ProductCard', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        stock={10}\r\n        useNewComponents={true}\r\n        showExactStock={true}\r\n      />\r\n    )\r\n    \r\n    // StockIndicator debería estar presente con información de stock\r\n    expect(screen.getByText(/10 unidades disponibles/)).toBeInTheDocument()\r\n  })\r\n\r\n  it('handles zero price correctly with new components', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        price={0}\r\n        originalPrice={undefined}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    expect(screen.getByText('$ 0,00')).toBeInTheDocument()\r\n  })\r\n\r\n  it('handles large prices correctly with new components', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        price={123456}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    // Verifica formato con separadores de miles\r\n    expect(screen.getByText('$ 123.456,00')).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows pre-order option when stock is 0 and allowPreOrder is enabled', () => {\r\n    // Nota: Esta funcionalidad requeriría agregar allowPreOrder prop al ProductCard\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        stock={0}\r\n        useNewComponents={true}\r\n      />\r\n    )\r\n    \r\n    // Por ahora solo verifica que muestre sin stock\r\n    expect(screen.getAllByText('Sin stock')[0]).toBeInTheDocument()\r\n  })\r\n\r\n  it('integrates all new components together', () => {\r\n    render(\r\n      <ProductCard \r\n        {...defaultProps}\r\n        useNewComponents={true}\r\n        showInstallments={true}\r\n        installments={{\r\n          quantity: 12,\r\n          amount: 708,\r\n          interestFree: true\r\n        }}\r\n        showFreeShipping={true}\r\n        showExactStock={true}\r\n        stockUnit=\"latas\"\r\n        lowStockThreshold={10}\r\n      />\r\n    )\r\n    \r\n    // Verifica que todos los componentes estén presentes\r\n    expect(screen.getByText('$ 8.500,00')).toBeInTheDocument() // PriceDisplay\r\n    expect(screen.getByText(/12x de/)).toBeInTheDocument() // Installments\r\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument() // Free shipping\r\n    expect(screen.getByText(/12 latas disponibles/)).toBeInTheDocument() // StockIndicator\r\n  })\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["describe","defaultProps","title","price","originalPrice","stock","onAddToCart","jest","fn","it","render","ProductCard","useNewComponents","expect","screen","getByText","toBeInTheDocument","queryByText","not","showExactStock","stockUnit","showInstallments","installments","quantity","amount","interestFree","showFreeShipping","getByAltText","lowStockThreshold","getAllByText","badge","discount","container","querySelector","undefined"],"mappings":"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"}