{"version":3,"names":["_default","GoogleAnalytics","cov_1dy156wae7","f","pathname","s","_navigation","usePathname","isGALoaded","setIsGALoaded","_react","useState","handleGALoad","window","b","_googleanalytics","waitForGA","error","console","warn","useEffect","isGAEnabled","trackPageView","location","href","GA_TRACKING_ID","length","process","env","NODE_ENV","_jsxruntime","jsx","Fragment","jsxs","_script","default","strategy","src","onLoad","onError","id","dangerouslySetInnerHTML","__html"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Analytics\\GoogleAnalytics.tsx"],"sourcesContent":["/**\r\n * Componente de Google Analytics para Pinteya E-commerce\r\n * Maneja la carga e inicialización de GA4\r\n */\r\n\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Script from 'next/script';\r\nimport { usePathname } from 'next/navigation';\r\nimport { initGA, trackPageView, GA_TRACKING_ID, isGAEnabled, waitForGA } from '@/lib/google-analytics';\r\n\r\nconst GoogleAnalytics: React.FC = () => {\r\n  const pathname = usePathname();\r\n  const [isGALoaded, setIsGALoaded] = useState(false);\r\n\r\n  // Manejar cuando GA está listo\r\n  const handleGALoad = async () => {\r\n    try {\r\n      if (typeof window !== 'undefined') {\r\n        await waitForGA();\r\n        setIsGALoaded(true);\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading Google Analytics:', error);\r\n      setIsGALoaded(false);\r\n    }\r\n  };\r\n\r\n  // Track page views cuando GA está listo y cambia la ruta\r\n  useEffect(() => {\r\n    if (isGALoaded && isGAEnabled() && typeof window !== 'undefined') {\r\n      try {\r\n        trackPageView(window.location.href);\r\n      } catch (error) {\r\n        console.warn('Error tracking page view:', error);\r\n      }\r\n    }\r\n  }, [pathname, isGALoaded]);\r\n\r\n  // Solo renderizar si tenemos GA_TRACKING_ID válido\r\n  if (!GA_TRACKING_ID || GA_TRACKING_ID === 'G-XXXXXXXXXX' || GA_TRACKING_ID.length < 10) {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('⚠️ Google Analytics no configurado. Configura NEXT_PUBLIC_GA_ID en .env.local');\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {GA_TRACKING_ID && GA_TRACKING_ID !== 'G-XXXXXXXXXX' && GA_TRACKING_ID.length >= 10 && (\r\n        <>\r\n          <Script\r\n            strategy=\"afterInteractive\"\r\n            src={`https://www.googletagmanager.com/gtag/js?id=${GA_TRACKING_ID}`}\r\n            onLoad={handleGALoad}\r\n            onError={(error) => {\r\n              console.warn('Error loading Google Analytics script:', error);\r\n              setIsGALoaded(false);\r\n            }}\r\n          />\r\n          <Script\r\n            id=\"google-analytics\"\r\n            strategy=\"afterInteractive\"\r\n            dangerouslySetInnerHTML={{\r\n              __html: `\r\n                window.dataLayer = window.dataLayer || [];\r\n                function gtag(){dataLayer.push(arguments);}\r\n                gtag('js', new Date());\r\n                gtag('config', '${GA_TRACKING_ID}', {\r\n                  page_title: document.title,\r\n                  page_location: window.location.href,\r\n                  send_page_view: false\r\n                });\r\n              `,\r\n            }}\r\n            onError={(error) => {\r\n              console.warn('Error executing Google Analytics script:', error);\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GoogleAnalytics;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}