{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\driver\\DeliveryCard.tsx"],"sourcesContent":["/**\r\n * Componente de tarjeta de entrega para drivers\r\n * Muestra información detallada de cada entrega y controles de acción\r\n */\r\n\r\n'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { \r\n  MapPin, \r\n  Phone, \r\n  MessageCircle, \r\n  Package, \r\n  Clock,\r\n  CheckCircle,\r\n  AlertTriangle,\r\n  Navigation,\r\n  User,\r\n  Home,\r\n  Info\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/core/utils';\r\n\r\ninterface DeliveryCardProps {\r\n  delivery: {\r\n    id: string;\r\n    tracking_number: string;\r\n    customer_name: string;\r\n    customer_phone?: string;\r\n    destination: {\r\n      address: string;\r\n      city: string;\r\n      postal_code: string;\r\n      coordinates?: { lat: number; lng: number };\r\n      notes?: string;\r\n    };\r\n    items: Array<{\r\n      name: string;\r\n      quantity: number;\r\n      weight?: number;\r\n    }>;\r\n    status: 'pending' | 'confirmed' | 'in_transit' | 'delivered' | 'exception';\r\n    estimated_delivery_time?: string;\r\n    special_instructions?: string;\r\n    requires_signature?: boolean;\r\n    cash_on_delivery?: number;\r\n  };\r\n  isActive: boolean;\r\n  onComplete: () => void;\r\n  onStartNavigation: () => void;\r\n  isNavigating: boolean;\r\n}\r\n\r\nexport function DeliveryCard({\r\n  delivery,\r\n  isActive,\r\n  onComplete,\r\n  onStartNavigation,\r\n  isNavigating\r\n}: DeliveryCardProps) {\r\n  const [showDetails, setShowDetails] = useState(false);\r\n  const [completionNotes, setCompletionNotes] = useState('');\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\r\n      case 'confirmed': return 'bg-blue-100 text-blue-800';\r\n      case 'in_transit': return 'bg-purple-100 text-purple-800';\r\n      case 'delivered': return 'bg-green-100 text-green-800';\r\n      case 'exception': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status: string) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'confirmed': return 'Confirmado';\r\n      case 'in_transit': return 'En Tránsito';\r\n      case 'delivered': return 'Entregado';\r\n      case 'exception': return 'Excepción';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const handleCallCustomer = () => {\r\n    if (delivery.customer_phone) {\r\n      window.open(`tel:${delivery.customer_phone}`, '_self');\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if (delivery.customer_phone) {\r\n      const message = `Hola ${delivery.customer_name}, soy tu driver de Pinteya. Estoy en camino con tu pedido #${delivery.tracking_number}`;\r\n      window.open(`sms:${delivery.customer_phone}?body=${encodeURIComponent(message)}`, '_self');\r\n    }\r\n  };\r\n\r\n  const handleOpenMaps = () => {\r\n    const address = encodeURIComponent(delivery.destination.address);\r\n    window.open(`https://maps.google.com/maps?q=${address}`, '_blank');\r\n  };\r\n\r\n  return (\r\n    <Card className={cn(\r\n      \"m-4\",\r\n      isActive ? \"border-blue-500 bg-blue-50\" : \"border-gray-200\"\r\n    )}>\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium\">\r\n              {delivery.tracking_number.slice(-3)}\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-gray-900\">{delivery.customer_name}</h3>\r\n              <Badge className={getStatusColor(delivery.status)}>\r\n                {getStatusText(delivery.status)}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n          \r\n          {isActive && (\r\n            <div className=\"flex space-x-2\">\r\n              <Button\r\n                size=\"sm\"\r\n                variant={isNavigating ? \"secondary\" : \"default\"}\r\n                onClick={onStartNavigation}\r\n                disabled={isNavigating}\r\n              >\r\n                <Navigation className=\"h-4 w-4 mr-1\" />\r\n                {isNavigating ? 'Navegando' : 'Navegar'}\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Dirección de entrega */}\r\n        <div className=\"flex items-start space-x-3\">\r\n          <MapPin className=\"h-5 w-5 text-gray-400 mt-0.5\" />\r\n          <div className=\"flex-1\">\r\n            <p className=\"font-medium text-gray-900\">{delivery.destination.address}</p>\r\n            <p className=\"text-sm text-gray-600\">\r\n              {delivery.destination.city}, {delivery.destination.postal_code}\r\n            </p>\r\n            {delivery.destination.notes && (\r\n              <p className=\"text-sm text-blue-600 mt-1\">\r\n                <Info className=\"h-4 w-4 inline mr-1\" />\r\n                {delivery.destination.notes}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Información del pedido */}\r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Package className=\"h-4 w-4 text-gray-400\" />\r\n            <span>{delivery.items.length} producto{delivery.items.length !== 1 ? 's' : ''}</span>\r\n          </div>\r\n          {delivery.estimated_delivery_time && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Clock className=\"h-4 w-4 text-gray-400\" />\r\n              <span>{delivery.estimated_delivery_time}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Instrucciones especiales */}\r\n        {delivery.special_instructions && (\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <AlertTriangle className=\"h-4 w-4 text-yellow-600 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-yellow-800\">Instrucciones especiales:</p>\r\n                <p className=\"text-sm text-yellow-700\">{delivery.special_instructions}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Pago contra entrega */}\r\n        {delivery.cash_on_delivery && (\r\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Package className=\"h-4 w-4 text-green-600\" />\r\n              <span className=\"text-sm font-medium text-green-800\">\r\n                Cobrar: ${delivery.cash_on_delivery.toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Acciones */}\r\n        <div className=\"flex space-x-2\">\r\n          {delivery.customer_phone && (\r\n            <>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={handleCallCustomer}\r\n                className=\"flex-1\"\r\n              >\r\n                <Phone className=\"h-4 w-4 mr-1\" />\r\n                Llamar\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={handleSendMessage}\r\n                className=\"flex-1\"\r\n              >\r\n                <MessageCircle className=\"h-4 w-4 mr-1\" />\r\n                SMS\r\n              </Button>\r\n            </>\r\n          )}\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={handleOpenMaps}\r\n          >\r\n            <MapPin className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Detalles expandibles */}\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => setShowDetails(!showDetails)}\r\n          className=\"w-full\"\r\n        >\r\n          {showDetails ? 'Ocultar detalles' : 'Ver detalles'}\r\n        </Button>\r\n\r\n        {showDetails && (\r\n          <div className=\"space-y-3 pt-3 border-t border-gray-200\">\r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Productos:</h4>\r\n              <div className=\"space-y-1\">\r\n                {delivery.items.map((item, index) => (\r\n                  <div key={index} className=\"flex justify-between text-sm\">\r\n                    <span>{item.name}</span>\r\n                    <span className=\"text-gray-600\">x{item.quantity}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {delivery.requires_signature && (\r\n              <div className=\"flex items-center space-x-2 text-sm text-orange-600\">\r\n                <AlertTriangle className=\"h-4 w-4\" />\r\n                <span>Requiere firma del cliente</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Botón de completar entrega */}\r\n        {isActive && (\r\n          <Button\r\n            onClick={onComplete}\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n          >\r\n            <CheckCircle className=\"h-5 w-5 mr-2\" />\r\n            Marcar como Entregado\r\n          </Button>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["DeliveryCard","delivery","isActive","onComplete","onStartNavigation","isNavigating","showDetails","setShowDetails","useState","completionNotes","setCompletionNotes","getStatusColor","status","getStatusText","handleCallCustomer","customer_phone","window","open","handleSendMessage","message","customer_name","tracking_number","encodeURIComponent","handleOpenMaps","address","destination","Card","className","cn","CardHeader","div","slice","h3","Badge","Button","size","variant","onClick","disabled","Navigation","CardContent","MapPin","p","city","postal_code","notes","Info","Package","span","items","length","estimated_delivery_time","Clock","special_instructions","AlertTriangle","cash_on_delivery","toLocaleString","Phone","MessageCircle","h4","map","item","index","name","quantity","requires_signature","CheckCircle"],"mappings":"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"}