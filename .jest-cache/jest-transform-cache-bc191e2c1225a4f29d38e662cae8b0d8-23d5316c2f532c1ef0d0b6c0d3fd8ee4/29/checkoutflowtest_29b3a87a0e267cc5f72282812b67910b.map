{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\__tests__\\checkout-flow.test.tsx"],"sourcesContent":["import React from 'react'\r\nimport { render, screen, fireEvent } from '@testing-library/react'\r\nimport '@testing-library/jest-dom'\r\nimport { CheckoutFlow } from '../checkout-flow'\r\n\r\ninterface ShippingInfoProps {\r\n  options: string[];\r\n  selectedOption: string;\r\n}\r\n\r\ninterface CartSummaryProps {\r\n  cartItems: Array<{ id: number; title: string; price: number; quantity: number }>;\r\n  variant: string;\r\n}\r\n\r\n// Mock de los componentes del Design System\r\njest.mock('../shipping-info', () => ({\r\n  ShippingInfo: ({ options, selectedOption }: ShippingInfoProps) => (\r\n    <div data-testid=\"shipping-info\">\r\n      Shipping options for: {selectedOption}\r\n    </div>\r\n  )\r\n}))\r\n\r\njest.mock('../cart-summary', () => ({\r\n  CartSummary: ({ cartItems, variant }: CartSummaryProps) => (\r\n    <div data-testid=\"cart-summary\">\r\n      Cart Summary - {cartItems.length} items - {variant}\r\n    </div>\r\n  )\r\n}))\r\n\r\nconst mockCartItems = [\r\n  {\r\n    id: 1,\r\n    title: 'Pintura Sherwin Williams 4L',\r\n    price: 10000,\r\n    discountedPrice: 8500,\r\n    quantity: 2\r\n  }\r\n]\r\n\r\nconst mockCheckoutData = {\r\n  totalPrice: 17000,\r\n  shippingCost: 2500,\r\n  discount: 0,\r\n  finalTotal: 19500,\r\n  shippingMethod: 'standard' as const\r\n}\r\n\r\ndescribe('CheckoutFlow', () => {\r\n  const defaultProps = {\r\n    cartItems: mockCartItems,\r\n    checkoutData: mockCheckoutData\r\n  }\r\n\r\n  it('renders checkout flow with basic elements', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\r\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\r\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders without errors when no errors provided', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    // No debería mostrar sección de errores\r\n    expect(screen.queryByText('Errores:')).not.toBeInTheDocument()\r\n  })\r\n\r\n  it('displays cart summary correctly', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    // Verificar que CartSummary se renderiza con los datos correctos\r\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders with proper accessibility', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    // Verificar elementos accesibles\r\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders with custom className', () => {\r\n    const customClass = 'custom-checkout-class'\r\n\r\n    const { container } = render(\r\n      <CheckoutFlow\r\n        {...defaultProps}\r\n        className={customClass}\r\n      />\r\n    )\r\n\r\n    // Verificar que la clase se aplica al contenedor principal\r\n    expect(container.firstChild).toHaveClass(customClass)\r\n  })\r\n\r\n  it('shows cart summary by default', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\r\n    expect(screen.getByText('Cart Summary - 1 items - compact')).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders with empty cart items', () => {\r\n    render(<CheckoutFlow {...defaultProps} cartItems={[]} />)\r\n\r\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\r\n    expect(screen.getByText('Cart Summary - 0 items - compact')).toBeInTheDocument()\r\n  })\r\n\r\n  it('calls onComplete when complete button is clicked', () => {\r\n    const mockOnComplete = jest.fn()\r\n\r\n    render(<CheckoutFlow {...defaultProps} onComplete={mockOnComplete} />)\r\n\r\n    const completeButton = screen.getByRole('button', { name: /completar pedido/i })\r\n    fireEvent.click(completeButton)\r\n\r\n    expect(mockOnComplete).toHaveBeenCalledTimes(1)\r\n  })\r\n\r\n  it('disables complete button when loading', () => {\r\n    render(<CheckoutFlow {...defaultProps} isLoading={true} />)\r\n\r\n    const completeButton = screen.getByRole('button', { name: /procesando/i })\r\n    expect(completeButton).toBeDisabled()\r\n  })\r\n\r\n  it('shows complete button by default', () => {\r\n    render(<CheckoutFlow {...defaultProps} />)\r\n\r\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\r\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\r\n  })\r\n\r\n  it('calls onComplete when finish button is clicked', () => {\r\n    const mockOnComplete = jest.fn()\r\n\r\n    render(\r\n      <CheckoutFlow\r\n        {...defaultProps}\r\n        onComplete={mockOnComplete}\r\n      />\r\n    )\r\n\r\n    const finishButton = screen.getByRole('button', { name: /completar pedido/i })\r\n    fireEvent.click(finishButton)\r\n\r\n    expect(mockOnComplete).toHaveBeenCalledTimes(1)\r\n  })\r\n\r\n  it('shows loading state', () => {\r\n    render(\r\n      <CheckoutFlow\r\n        {...defaultProps}\r\n        isLoading={true}\r\n      />\r\n    )\r\n\r\n    expect(screen.getByText('Procesando...')).toBeInTheDocument()\r\n  })\r\n\r\n  it('displays errors when present', () => {\r\n    const errors = {\r\n      email: 'Email es requerido',\r\n      address: 'Dirección es requerida'\r\n    }\r\n\r\n    render(<CheckoutFlow {...defaultProps} errors={errors} />)\r\n\r\n    expect(screen.getByText('Errores:')).toBeInTheDocument()\r\n    expect(screen.getByText('• Email es requerido')).toBeInTheDocument()\r\n    expect(screen.getByText('• Dirección es requerida')).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders with custom children content', () => {\r\n    const customContent = <div>Custom checkout content</div>\r\n\r\n    render(<CheckoutFlow {...defaultProps}>{customContent}</CheckoutFlow>)\r\n\r\n    expect(screen.getByText('Custom checkout content')).toBeInTheDocument()\r\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\r\n  })\r\n\r\n  it('renders cart summary with correct data', () => {\r\n    const checkoutData = {\r\n      totalPrice: 100,\r\n      shippingCost: 10,\r\n      discount: 5,\r\n      finalTotal: 105\r\n    }\r\n\r\n    render(<CheckoutFlow {...defaultProps} checkoutData={checkoutData} />)\r\n\r\n    // Verificar que el componente se renderiza (CartSummary está presente)\r\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\r\n  })\r\n\r\n  it('shows loading state correctly', () => {\r\n    render(<CheckoutFlow {...defaultProps} isLoading={true} />)\r\n\r\n    // Verificar que muestra el estado de carga\r\n    expect(screen.getByText('Procesando...')).toBeInTheDocument()\r\n\r\n    // Verificar que el botón está deshabilitado\r\n    const button = screen.getByRole('button', { name: /procesando/i })\r\n    expect(button).toBeDisabled()\r\n  })\r\n\r\n  it('renders children content', () => {\r\n    render(\r\n      <CheckoutFlow {...defaultProps}>\r\n        <div data-testid=\"custom-content\">Custom step content</div>\r\n      </CheckoutFlow>\r\n    )\r\n\r\n    expect(screen.getByTestId('custom-content')).toBeInTheDocument()\r\n    expect(screen.getByText('Custom step content')).toBeInTheDocument()\r\n  })\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["jest","mock","ShippingInfo","options","selectedOption","div","data-testid","CartSummary","cartItems","variant","length","mockCartItems","id","title","price","discountedPrice","quantity","mockCheckoutData","totalPrice","shippingCost","discount","finalTotal","shippingMethod","describe","defaultProps","checkoutData","it","render","CheckoutFlow","expect","screen","getByText","toBeInTheDocument","getByRole","name","getByTestId","queryByText","not","customClass","container","className","firstChild","toHaveClass","mockOnComplete","fn","onComplete","completeButton","fireEvent","click","toHaveBeenCalledTimes","isLoading","toBeDisabled","finishButton","errors","email","address","customContent","button"],"mappings":"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"}