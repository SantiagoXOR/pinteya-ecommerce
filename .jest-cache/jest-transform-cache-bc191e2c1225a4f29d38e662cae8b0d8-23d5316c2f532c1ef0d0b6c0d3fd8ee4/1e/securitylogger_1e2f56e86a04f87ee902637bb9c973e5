af3724f18a3c63aacc3beac6698765ed
// ===================================
// PINTEYA E-COMMERCE - LOGGING ESTRUCTURADO DE SEGURIDAD
// ===================================
// Sistema de logging estructurado para eventos de seguridad
// con contexto enriquecido y formato consistente
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createSecurityLogger () {
        return createSecurityLogger;
    },
    get default () {
        return _default;
    },
    get extractSecurityContext () {
        return extractSecurityContext;
    },
    get securityLog () {
        return securityLog;
    }
});
function extractSecurityContext(request, additionalContext = {}) {
    const url = new URL(request.url);
    // Extraer IP de headers
    const forwarded = request.headers.get('x-forwarded-for');
    const ip = forwarded ? forwarded.split(',')[0].trim() : request.headers.get('x-real-ip') || 'unknown';
    // Generar request ID único
    const requestId = request.headers.get('x-request-id') || `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    return {
        ip,
        userAgent: request.headers.get('user-agent') || 'unknown',
        endpoint: url.pathname,
        method: request.method,
        timestamp: new Date().toISOString(),
        requestId,
        ...additionalContext
    };
}
// ===================================
// IMPLEMENTACIÓN DEL LOGGER
// ===================================
class SecurityLoggerImpl {
    formatLogEntry(event) {
        const logEntry = {
            timestamp: event.context.timestamp,
            level: this.mapSeverityToLevel(event.severity),
            type: 'SECURITY',
            event_type: event.type,
            severity: event.severity,
            message: event.message,
            context: event.context,
            metadata: event.metadata,
            error: event.error ? {
                name: event.error.name,
                message: event.error.message,
                stack: event.error.stack
            } : undefined
        };
        return JSON.stringify(logEntry, null, process.env.NODE_ENV === 'development' ? 2 : 0);
    }
    mapSeverityToLevel(severity) {
        switch(severity){
            case 'low':
                return 'info';
            case 'medium':
                return 'warn';
            case 'high':
                return 'error';
            case 'critical':
                return 'error';
            default:
                return 'info';
        }
    }
    shouldLog(severity) {
        const logLevel = process.env.SECURITY_LOG_LEVEL || 'medium';
        const levels = {
            low: 1,
            medium: 2,
            high: 3,
            critical: 4
        };
        const currentLevel = levels[logLevel] || 2;
        const eventLevel = levels[severity];
        return eventLevel >= currentLevel;
    }
    log(event) {
        if (!this.shouldLog(event.severity)) {
            return;
        }
        const logEntry = this.formatLogEntry(event);
        // En desarrollo, usar console con colores
        if (process.env.NODE_ENV === 'development') {
            const colors = {
                low: '\x1b[36m',
                medium: '\x1b[33m',
                high: '\x1b[31m',
                critical: '\x1b[35m'
            };
            const reset = '\x1b[0m';
            const color = colors[event.severity];
            console.log(`${color}[SECURITY:${event.type.toUpperCase()}]${reset}`, logEntry);
        } else {
            // En producción, usar console.log estándar para integración con sistemas de logging
            console.log(logEntry);
        }
    // TODO: Integrar con servicio de logging externo (DataDog, LogRocket, etc.)
    // await this.sendToExternalLogger(logEntry);
    }
    logAuthAttempt(context, success, metadata) {
        this.log({
            type: success ? 'auth_success' : 'auth_failure',
            severity: success ? 'low' : 'medium',
            message: success ? `Authentication successful for ${context.userId || 'unknown user'}` : `Authentication failed for ${context.userId || 'unknown user'}`,
            context,
            metadata: {
                success,
                ...metadata
            }
        });
    }
    logRateLimitExceeded(context, metadata) {
        this.log({
            type: 'rate_limit_exceeded',
            severity: 'medium',
            message: `Rate limit exceeded for ${context.endpoint}`,
            context,
            metadata: {
                endpoint: context.endpoint,
                ip: context.ip,
                ...metadata
            }
        });
    }
    logPermissionDenied(context, resource, action) {
        this.log({
            type: 'permission_denied',
            severity: 'high',
            message: `Permission denied: ${action} on ${resource}`,
            context,
            metadata: {
                resource,
                action,
                userId: context.userId
            }
        });
    }
    logSuspiciousActivity(context, reason, metadata) {
        this.log({
            type: 'suspicious_activity',
            severity: 'high',
            message: `Suspicious activity detected: ${reason}`,
            context,
            metadata: {
                reason,
                ...metadata
            }
        });
    }
    logAdminAction(context, action, metadata) {
        this.log({
            type: 'admin_action',
            severity: 'medium',
            message: `Admin action performed: ${action}`,
            context,
            metadata: {
                action,
                adminUserId: context.userId,
                ...metadata
            }
        });
    }
    logApiError(context, error, metadata) {
        this.log({
            type: 'api_error',
            severity: 'medium',
            message: `API error in ${context.endpoint}: ${error.message}`,
            context,
            error,
            metadata
        });
    }
}
// ===================================
// INSTANCIA GLOBAL Y FACTORY
// ===================================
const globalSecurityLogger = new SecurityLoggerImpl();
function createSecurityLogger(request, additionalContext) {
    const context = request ? extractSecurityContext(request, additionalContext) : {
        endpoint: 'unknown',
        method: 'unknown',
        timestamp: new Date().toISOString(),
        ...additionalContext
    };
    return {
        context,
        log: globalSecurityLogger.log.bind(globalSecurityLogger),
        logAuthAttempt: (ctx, success, metadata)=>globalSecurityLogger.logAuthAttempt({
                ...context,
                ...ctx
            }, success, metadata),
        logRateLimitExceeded: (ctx, metadata)=>globalSecurityLogger.logRateLimitExceeded({
                ...context,
                ...ctx
            }, metadata),
        logPermissionDenied: (ctx, resource, action)=>globalSecurityLogger.logPermissionDenied({
                ...context,
                ...ctx
            }, resource, action),
        logSuspiciousActivity: (ctx, reason, metadata)=>globalSecurityLogger.logSuspiciousActivity({
                ...context,
                ...ctx
            }, reason, metadata),
        logAdminAction: (ctx, action, metadata)=>globalSecurityLogger.logAdminAction({
                ...context,
                ...ctx
            }, action, metadata),
        logApiError: (ctx, error, metadata)=>globalSecurityLogger.logApiError({
                ...context,
                ...ctx
            }, error, metadata)
    };
}
const securityLog = {
    info: (message, context = {})=>{
        globalSecurityLogger.log({
            type: 'security_scan',
            severity: 'low',
            message,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    },
    warn: (message, context = {})=>{
        globalSecurityLogger.log({
            type: 'suspicious_activity',
            severity: 'medium',
            message,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    },
    error: (message, error, context = {})=>{
        globalSecurityLogger.log({
            type: 'api_error',
            severity: 'high',
            message,
            error,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    }
};
const _default = globalSecurityLogger;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxsb2dnaW5nXFxzZWN1cml0eS1sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIExPR0dJTkcgRVNUUlVDVFVSQURPIERFIFNFR1VSSURBRFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNpc3RlbWEgZGUgbG9nZ2luZyBlc3RydWN0dXJhZG8gcGFyYSBldmVudG9zIGRlIHNlZ3VyaWRhZFxuLy8gY29uIGNvbnRleHRvIGVucmlxdWVjaWRvIHkgZm9ybWF0byBjb25zaXN0ZW50ZVxuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgWSBJTlRFUkZBQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyaXR5TG9nQ29udGV4dCB7XG4gIHVzZXJJZD86IHN0cmluZ1xuICBzZXNzaW9uSWQ/OiBzdHJpbmdcbiAgaXA/OiBzdHJpbmdcbiAgdXNlckFnZW50Pzogc3RyaW5nXG4gIGVuZHBvaW50OiBzdHJpbmdcbiAgbWV0aG9kOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgcmVxdWVzdElkPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlFdmVudCB7XG4gIHR5cGU6IFNlY3VyaXR5RXZlbnRUeXBlXG4gIHNldmVyaXR5OiBTZWN1cml0eVNldmVyaXR5XG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHRcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gIGVycm9yPzogRXJyb3Jcbn1cblxuZXhwb3J0IHR5cGUgU2VjdXJpdHlFdmVudFR5cGUgPVxuICB8ICdhdXRoX2F0dGVtcHQnXG4gIHwgJ2F1dGhfc3VjY2VzcydcbiAgfCAnYXV0aF9mYWlsdXJlJ1xuICB8ICdyYXRlX2xpbWl0X2V4Y2VlZGVkJ1xuICB8ICdwZXJtaXNzaW9uX2RlbmllZCdcbiAgfCAnc3VzcGljaW91c19hY3Rpdml0eSdcbiAgfCAnZGF0YV9hY2Nlc3MnXG4gIHwgJ2FkbWluX2FjdGlvbidcbiAgfCAnYXBpX2Vycm9yJ1xuICB8ICd2YWxpZGF0aW9uX2Vycm9yJ1xuICB8ICdzZWN1cml0eV9zY2FuJ1xuICB8ICd1bmF1dGhvcml6ZWRfYWNjZXNzJ1xuXG5leHBvcnQgdHlwZSBTZWN1cml0eVNldmVyaXR5ID0gJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCdcblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUxvZ2dlciB7XG4gIGxvZyhldmVudDogU2VjdXJpdHlFdmVudCk6IHZvaWRcbiAgbG9nQXV0aEF0dGVtcHQoXG4gICAgY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LFxuICAgIHN1Y2Nlc3M6IGJvb2xlYW4sXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6IHZvaWRcbiAgbG9nUmF0ZUxpbWl0RXhjZWVkZWQoY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkXG4gIGxvZ1Blcm1pc3Npb25EZW5pZWQoY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCByZXNvdXJjZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZyk6IHZvaWRcbiAgbG9nU3VzcGljaW91c0FjdGl2aXR5KFxuICAgIGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCxcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgKTogdm9pZFxuICBsb2dBZG1pbkFjdGlvbihjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsIGFjdGlvbjogc3RyaW5nLCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkXG4gIGxvZ0FwaUVycm9yKGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgZXJyb3I6IEVycm9yLCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWFRSQUNUT1IgREUgQ09OVEVYVE8gREUgUkVRVUVTVFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RTZWN1cml0eUNvbnRleHQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICBhZGRpdGlvbmFsQ29udGV4dDogUGFydGlhbDxTZWN1cml0eUxvZ0NvbnRleHQ+ID0ge31cbik6IFNlY3VyaXR5TG9nQ29udGV4dCB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG5cbiAgLy8gRXh0cmFlciBJUCBkZSBoZWFkZXJzXG4gIGNvbnN0IGZvcndhcmRlZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpXG4gIGNvbnN0IGlwID0gZm9yd2FyZGVkXG4gICAgPyBmb3J3YXJkZWQuc3BsaXQoJywnKVswXS50cmltKClcbiAgICA6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpIHx8ICd1bmtub3duJ1xuXG4gIC8vIEdlbmVyYXIgcmVxdWVzdCBJRCDDum5pY29cbiAgY29uc3QgcmVxdWVzdElkID1cbiAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlcXVlc3QtaWQnKSB8fFxuICAgIGByZXFfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG5cbiAgcmV0dXJuIHtcbiAgICBpcCxcbiAgICB1c2VyQWdlbnQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bicsXG4gICAgZW5kcG9pbnQ6IHVybC5wYXRobmFtZSxcbiAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHJlcXVlc3RJZCxcbiAgICAuLi5hZGRpdGlvbmFsQ29udGV4dCxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU1QTEVNRU5UQUNJw5NOIERFTCBMT0dHRVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNsYXNzIFNlY3VyaXR5TG9nZ2VySW1wbCBpbXBsZW1lbnRzIFNlY3VyaXR5TG9nZ2VyIHtcbiAgcHJpdmF0ZSBmb3JtYXRMb2dFbnRyeShldmVudDogU2VjdXJpdHlFdmVudCk6IHN0cmluZyB7XG4gICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICB0aW1lc3RhbXA6IGV2ZW50LmNvbnRleHQudGltZXN0YW1wLFxuICAgICAgbGV2ZWw6IHRoaXMubWFwU2V2ZXJpdHlUb0xldmVsKGV2ZW50LnNldmVyaXR5KSxcbiAgICAgIHR5cGU6ICdTRUNVUklUWScsXG4gICAgICBldmVudF90eXBlOiBldmVudC50eXBlLFxuICAgICAgc2V2ZXJpdHk6IGV2ZW50LnNldmVyaXR5LFxuICAgICAgbWVzc2FnZTogZXZlbnQubWVzc2FnZSxcbiAgICAgIGNvbnRleHQ6IGV2ZW50LmNvbnRleHQsXG4gICAgICBtZXRhZGF0YTogZXZlbnQubWV0YWRhdGEsXG4gICAgICBlcnJvcjogZXZlbnQuZXJyb3JcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBuYW1lOiBldmVudC5lcnJvci5uYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogZXZlbnQuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YWNrOiBldmVudC5lcnJvci5zdGFjayxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH1cblxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSwgbnVsbCwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyAyIDogMClcbiAgfVxuXG4gIHByaXZhdGUgbWFwU2V2ZXJpdHlUb0xldmVsKHNldmVyaXR5OiBTZWN1cml0eVNldmVyaXR5KTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHNldmVyaXR5KSB7XG4gICAgICBjYXNlICdsb3cnOlxuICAgICAgICByZXR1cm4gJ2luZm8nXG4gICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICByZXR1cm4gJ3dhcm4nXG4gICAgICBjYXNlICdoaWdoJzpcbiAgICAgICAgcmV0dXJuICdlcnJvcidcbiAgICAgIGNhc2UgJ2NyaXRpY2FsJzpcbiAgICAgICAgcmV0dXJuICdlcnJvcidcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnaW5mbydcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3VsZExvZyhzZXZlcml0eTogU2VjdXJpdHlTZXZlcml0eSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGxvZ0xldmVsID0gcHJvY2Vzcy5lbnYuU0VDVVJJVFlfTE9HX0xFVkVMIHx8ICdtZWRpdW0nXG5cbiAgICBjb25zdCBsZXZlbHMgPSB7IGxvdzogMSwgbWVkaXVtOiAyLCBoaWdoOiAzLCBjcml0aWNhbDogNCB9XG4gICAgY29uc3QgY3VycmVudExldmVsID0gbGV2ZWxzW2xvZ0xldmVsIGFzIFNlY3VyaXR5U2V2ZXJpdHldIHx8IDJcbiAgICBjb25zdCBldmVudExldmVsID0gbGV2ZWxzW3NldmVyaXR5XVxuXG4gICAgcmV0dXJuIGV2ZW50TGV2ZWwgPj0gY3VycmVudExldmVsXG4gIH1cblxuICBsb2coZXZlbnQ6IFNlY3VyaXR5RXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKGV2ZW50LnNldmVyaXR5KSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbG9nRW50cnkgPSB0aGlzLmZvcm1hdExvZ0VudHJ5KGV2ZW50KVxuXG4gICAgLy8gRW4gZGVzYXJyb2xsbywgdXNhciBjb25zb2xlIGNvbiBjb2xvcmVzXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjb25zdCBjb2xvcnMgPSB7XG4gICAgICAgIGxvdzogJ1xceDFiWzM2bScsIC8vIGN5YW5cbiAgICAgICAgbWVkaXVtOiAnXFx4MWJbMzNtJywgLy8geWVsbG93XG4gICAgICAgIGhpZ2g6ICdcXHgxYlszMW0nLCAvLyByZWRcbiAgICAgICAgY3JpdGljYWw6ICdcXHgxYlszNW0nLCAvLyBtYWdlbnRhXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc2V0ID0gJ1xceDFiWzBtJ1xuICAgICAgY29uc3QgY29sb3IgPSBjb2xvcnNbZXZlbnQuc2V2ZXJpdHldXG5cbiAgICAgIGNvbnNvbGUubG9nKGAke2NvbG9yfVtTRUNVUklUWToke2V2ZW50LnR5cGUudG9VcHBlckNhc2UoKX1dJHtyZXNldH1gLCBsb2dFbnRyeSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRW4gcHJvZHVjY2nDs24sIHVzYXIgY29uc29sZS5sb2cgZXN0w6FuZGFyIHBhcmEgaW50ZWdyYWNpw7NuIGNvbiBzaXN0ZW1hcyBkZSBsb2dnaW5nXG4gICAgICBjb25zb2xlLmxvZyhsb2dFbnRyeSlcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBJbnRlZ3JhciBjb24gc2VydmljaW8gZGUgbG9nZ2luZyBleHRlcm5vIChEYXRhRG9nLCBMb2dSb2NrZXQsIGV0Yy4pXG4gICAgLy8gYXdhaXQgdGhpcy5zZW5kVG9FeHRlcm5hbExvZ2dlcihsb2dFbnRyeSk7XG4gIH1cblxuICBsb2dBdXRoQXR0ZW1wdChcbiAgICBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsXG4gICAgc3VjY2VzczogYm9vbGVhbixcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5sb2coe1xuICAgICAgdHlwZTogc3VjY2VzcyA/ICdhdXRoX3N1Y2Nlc3MnIDogJ2F1dGhfZmFpbHVyZScsXG4gICAgICBzZXZlcml0eTogc3VjY2VzcyA/ICdsb3cnIDogJ21lZGl1bScsXG4gICAgICBtZXNzYWdlOiBzdWNjZXNzXG4gICAgICAgID8gYEF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICR7Y29udGV4dC51c2VySWQgfHwgJ3Vua25vd24gdXNlcid9YFxuICAgICAgICA6IGBBdXRoZW50aWNhdGlvbiBmYWlsZWQgZm9yICR7Y29udGV4dC51c2VySWQgfHwgJ3Vua25vd24gdXNlcid9YCxcbiAgICAgIGNvbnRleHQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBzdWNjZXNzLFxuICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxuXG4gIGxvZ1JhdGVMaW1pdEV4Y2VlZGVkKGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgdGhpcy5sb2coe1xuICAgICAgdHlwZTogJ3JhdGVfbGltaXRfZXhjZWVkZWQnLFxuICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgbWVzc2FnZTogYFJhdGUgbGltaXQgZXhjZWVkZWQgZm9yICR7Y29udGV4dC5lbmRwb2ludH1gLFxuICAgICAgY29udGV4dCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGVuZHBvaW50OiBjb250ZXh0LmVuZHBvaW50LFxuICAgICAgICBpcDogY29udGV4dC5pcCxcbiAgICAgICAgLi4ubWV0YWRhdGEsXG4gICAgICB9LFxuICAgIH0pXG4gIH1cblxuICBsb2dQZXJtaXNzaW9uRGVuaWVkKGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgcmVzb3VyY2U6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvZyh7XG4gICAgICB0eXBlOiAncGVybWlzc2lvbl9kZW5pZWQnLFxuICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgIG1lc3NhZ2U6IGBQZXJtaXNzaW9uIGRlbmllZDogJHthY3Rpb259IG9uICR7cmVzb3VyY2V9YCxcbiAgICAgIGNvbnRleHQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICByZXNvdXJjZSxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICB1c2VySWQ6IGNvbnRleHQudXNlcklkLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgbG9nU3VzcGljaW91c0FjdGl2aXR5KFxuICAgIGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCxcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5sb2coe1xuICAgICAgdHlwZTogJ3N1c3BpY2lvdXNfYWN0aXZpdHknLFxuICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgIG1lc3NhZ2U6IGBTdXNwaWNpb3VzIGFjdGl2aXR5IGRldGVjdGVkOiAke3JlYXNvbn1gLFxuICAgICAgY29udGV4dCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgLi4ubWV0YWRhdGEsXG4gICAgICB9LFxuICAgIH0pXG4gIH1cblxuICBsb2dBZG1pbkFjdGlvbihcbiAgICBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsXG4gICAgYWN0aW9uOiBzdHJpbmcsXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6IHZvaWQge1xuICAgIHRoaXMubG9nKHtcbiAgICAgIHR5cGU6ICdhZG1pbl9hY3Rpb24nLFxuICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgbWVzc2FnZTogYEFkbWluIGFjdGlvbiBwZXJmb3JtZWQ6ICR7YWN0aW9ufWAsXG4gICAgICBjb250ZXh0LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBhZG1pblVzZXJJZDogY29udGV4dC51c2VySWQsXG4gICAgICAgIC4uLm1ldGFkYXRhLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgbG9nQXBpRXJyb3IoY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBlcnJvcjogRXJyb3IsIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIHRoaXMubG9nKHtcbiAgICAgIHR5cGU6ICdhcGlfZXJyb3InLFxuICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgbWVzc2FnZTogYEFQSSBlcnJvciBpbiAke2NvbnRleHQuZW5kcG9pbnR9OiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgIGNvbnRleHQsXG4gICAgICBlcnJvcixcbiAgICAgIG1ldGFkYXRhLFxuICAgIH0pXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElOU1RBTkNJQSBHTE9CQUwgWSBGQUNUT1JZXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBnbG9iYWxTZWN1cml0eUxvZ2dlciA9IG5ldyBTZWN1cml0eUxvZ2dlckltcGwoKVxuXG4vKipcbiAqIENyZWEgdW4gbG9nZ2VyIGRlIHNlZ3VyaWRhZCBjb24gY29udGV4dG8gcHJlLWNvbmZpZ3VyYWRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZWN1cml0eUxvZ2dlcihcbiAgcmVxdWVzdD86IE5leHRSZXF1ZXN0LFxuICBhZGRpdGlvbmFsQ29udGV4dD86IFBhcnRpYWw8U2VjdXJpdHlMb2dDb250ZXh0PlxuKTogU2VjdXJpdHlMb2dnZXIgJiB7IGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCB9IHtcbiAgY29uc3QgY29udGV4dCA9IHJlcXVlc3RcbiAgICA/IGV4dHJhY3RTZWN1cml0eUNvbnRleHQocmVxdWVzdCwgYWRkaXRpb25hbENvbnRleHQpXG4gICAgOiAoe1xuICAgICAgICBlbmRwb2ludDogJ3Vua25vd24nLFxuICAgICAgICBtZXRob2Q6ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC4uLmFkZGl0aW9uYWxDb250ZXh0LFxuICAgICAgfSBhcyBTZWN1cml0eUxvZ0NvbnRleHQpXG5cbiAgcmV0dXJuIHtcbiAgICBjb250ZXh0LFxuICAgIGxvZzogZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nLmJpbmQoZ2xvYmFsU2VjdXJpdHlMb2dnZXIpLFxuICAgIGxvZ0F1dGhBdHRlbXB0OiAoY3R4LCBzdWNjZXNzLCBtZXRhZGF0YSkgPT5cbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ0F1dGhBdHRlbXB0KHsgLi4uY29udGV4dCwgLi4uY3R4IH0sIHN1Y2Nlc3MsIG1ldGFkYXRhKSxcbiAgICBsb2dSYXRlTGltaXRFeGNlZWRlZDogKGN0eCwgbWV0YWRhdGEpID0+XG4gICAgICBnbG9iYWxTZWN1cml0eUxvZ2dlci5sb2dSYXRlTGltaXRFeGNlZWRlZCh7IC4uLmNvbnRleHQsIC4uLmN0eCB9LCBtZXRhZGF0YSksXG4gICAgbG9nUGVybWlzc2lvbkRlbmllZDogKGN0eCwgcmVzb3VyY2UsIGFjdGlvbikgPT5cbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ1Blcm1pc3Npb25EZW5pZWQoeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgcmVzb3VyY2UsIGFjdGlvbiksXG4gICAgbG9nU3VzcGljaW91c0FjdGl2aXR5OiAoY3R4LCByZWFzb24sIG1ldGFkYXRhKSA9PlxuICAgICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nU3VzcGljaW91c0FjdGl2aXR5KHsgLi4uY29udGV4dCwgLi4uY3R4IH0sIHJlYXNvbiwgbWV0YWRhdGEpLFxuICAgIGxvZ0FkbWluQWN0aW9uOiAoY3R4LCBhY3Rpb24sIG1ldGFkYXRhKSA9PlxuICAgICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nQWRtaW5BY3Rpb24oeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgYWN0aW9uLCBtZXRhZGF0YSksXG4gICAgbG9nQXBpRXJyb3I6IChjdHgsIGVycm9yLCBtZXRhZGF0YSkgPT5cbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ0FwaUVycm9yKHsgLi4uY29udGV4dCwgLi4uY3R4IH0sIGVycm9yLCBtZXRhZGF0YSksXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhFTFBFUlMgWSBVVElMSURBREVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEhlbHBlciBwYXJhIGxvZ2dpbmcgcsOhcGlkbyBkZSBldmVudG9zIGRlIHNlZ3VyaWRhZFxuICovXG5leHBvcnQgY29uc3Qgc2VjdXJpdHlMb2cgPSB7XG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ6IFBhcnRpYWw8U2VjdXJpdHlMb2dDb250ZXh0PiA9IHt9KSA9PiB7XG4gICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nKHtcbiAgICAgIHR5cGU6ICdzZWN1cml0eV9zY2FuJyxcbiAgICAgIHNldmVyaXR5OiAnbG93JyxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIGVuZHBvaW50OiAnc3lzdGVtJyxcbiAgICAgICAgbWV0aG9kOiAnU1lTVEVNJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgd2FybjogKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dDogUGFydGlhbDxTZWN1cml0eUxvZ0NvbnRleHQ+ID0ge30pID0+IHtcbiAgICBnbG9iYWxTZWN1cml0eUxvZ2dlci5sb2coe1xuICAgICAgdHlwZTogJ3N1c3BpY2lvdXNfYWN0aXZpdHknLFxuICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgZW5kcG9pbnQ6ICdzeXN0ZW0nLFxuICAgICAgICBtZXRob2Q6ICdTWVNURU0nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgLi4uY29udGV4dCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfSxcblxuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBFcnJvciwgY29udGV4dDogUGFydGlhbDxTZWN1cml0eUxvZ0NvbnRleHQ+ID0ge30pID0+IHtcbiAgICBnbG9iYWxTZWN1cml0eUxvZ2dlci5sb2coe1xuICAgICAgdHlwZTogJ2FwaV9lcnJvcicsXG4gICAgICBzZXZlcml0eTogJ2hpZ2gnLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGVycm9yLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICBlbmRwb2ludDogJ3N5c3RlbScsXG4gICAgICAgIG1ldGhvZDogJ1NZU1RFTScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgfSxcbiAgICB9KVxuICB9LFxufVxuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWxTZWN1cml0eUxvZ2dlclxuIl0sIm5hbWVzIjpbImNyZWF0ZVNlY3VyaXR5TG9nZ2VyIiwiZXh0cmFjdFNlY3VyaXR5Q29udGV4dCIsInNlY3VyaXR5TG9nIiwicmVxdWVzdCIsImFkZGl0aW9uYWxDb250ZXh0IiwidXJsIiwiVVJMIiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsImlwIiwic3BsaXQiLCJ0cmltIiwicmVxdWVzdElkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInVzZXJBZ2VudCIsImVuZHBvaW50IiwicGF0aG5hbWUiLCJtZXRob2QiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsIlNlY3VyaXR5TG9nZ2VySW1wbCIsImZvcm1hdExvZ0VudHJ5IiwiZXZlbnQiLCJsb2dFbnRyeSIsImNvbnRleHQiLCJsZXZlbCIsIm1hcFNldmVyaXR5VG9MZXZlbCIsInNldmVyaXR5IiwidHlwZSIsImV2ZW50X3R5cGUiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJlcnJvciIsIm5hbWUiLCJzdGFjayIsInVuZGVmaW5lZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzaG91bGRMb2ciLCJsb2dMZXZlbCIsIlNFQ1VSSVRZX0xPR19MRVZFTCIsImxldmVscyIsImxvdyIsIm1lZGl1bSIsImhpZ2giLCJjcml0aWNhbCIsImN1cnJlbnRMZXZlbCIsImV2ZW50TGV2ZWwiLCJsb2ciLCJjb2xvcnMiLCJyZXNldCIsImNvbG9yIiwiY29uc29sZSIsInRvVXBwZXJDYXNlIiwibG9nQXV0aEF0dGVtcHQiLCJzdWNjZXNzIiwidXNlcklkIiwibG9nUmF0ZUxpbWl0RXhjZWVkZWQiLCJsb2dQZXJtaXNzaW9uRGVuaWVkIiwicmVzb3VyY2UiLCJhY3Rpb24iLCJsb2dTdXNwaWNpb3VzQWN0aXZpdHkiLCJyZWFzb24iLCJsb2dBZG1pbkFjdGlvbiIsImFkbWluVXNlcklkIiwibG9nQXBpRXJyb3IiLCJnbG9iYWxTZWN1cml0eUxvZ2dlciIsImJpbmQiLCJjdHgiLCJpbmZvIiwid2FybiJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLHlEQUF5RDtBQUN6RCxzQ0FBc0M7QUFDdEMsNERBQTREO0FBQzVELGlEQUFpRDs7Ozs7Ozs7Ozs7O1FBc1JqQ0E7ZUFBQUE7O1FBbUZoQjtlQUFBOztRQXZTZ0JDO2VBQUFBOztRQTBQSEM7ZUFBQUE7OztBQTFQTixTQUFTRCx1QkFDZEUsT0FBb0IsRUFDcEJDLG9CQUFpRCxDQUFDLENBQUM7SUFFbkQsTUFBTUMsTUFBTSxJQUFJ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