{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductVariantManager.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { AdminCard } from '../ui/AdminCard'\nimport { Plus, X, Edit, Trash2, Palette, Package } from 'lucide-react'\nimport { cn } from '@/lib/core/utils'\n\ninterface ProductVariant {\n  name: string\n  options: string[]\n}\n\ninterface ProductVariantManagerProps {\n  variants: ProductVariant[]\n  onChange: (variants: ProductVariant[]) => void\n  error?: string\n  className?: string\n}\n\nexport function ProductVariantManager({\n  variants = [],\n  onChange,\n  error,\n  className,\n}: ProductVariantManagerProps) {\n  const [editingVariant, setEditingVariant] = useState<number | null>(null)\n  const [newVariantName, setNewVariantName] = useState('')\n  const [newOption, setNewOption] = useState('')\n\n  // Predefined variant types\n  const variantTypes = [\n    { name: 'Color', icon: Palette, options: ['Blanco', 'Negro', 'Rojo', 'Azul', 'Verde'] },\n    { name: 'Tamaño', icon: Package, options: ['XS', 'S', 'M', 'L', 'XL'] },\n    { name: 'Material', icon: Package, options: ['Algodón', 'Poliéster', 'Lana', 'Seda'] },\n    { name: 'Capacidad', icon: Package, options: ['1L', '4L', '10L', '20L'] },\n  ]\n\n  // Add new variant\n  const addVariant = (name: string, initialOptions: string[] = []) => {\n    const newVariant: ProductVariant = {\n      name,\n      options: initialOptions,\n    }\n    onChange([...variants, newVariant])\n    setNewVariantName('')\n  }\n\n  // Remove variant\n  const removeVariant = (index: number) => {\n    const newVariants = variants.filter((_, i) => i !== index)\n    onChange(newVariants)\n  }\n\n  // Update variant name\n  const updateVariantName = (index: number, name: string) => {\n    const newVariants = [...variants]\n    newVariants[index] = { ...newVariants[index], name }\n    onChange(newVariants)\n  }\n\n  // Add option to variant\n  const addOption = (variantIndex: number, option: string) => {\n    if (!option.trim()) {\n      return\n    }\n\n    const newVariants = [...variants]\n    const variant = newVariants[variantIndex]\n\n    if (!variant.options.includes(option.trim())) {\n      variant.options.push(option.trim())\n      onChange(newVariants)\n    }\n\n    setNewOption('')\n  }\n\n  // Remove option from variant\n  const removeOption = (variantIndex: number, optionIndex: number) => {\n    const newVariants = [...variants]\n    newVariants[variantIndex].options.splice(optionIndex, 1)\n    onChange(newVariants)\n  }\n\n  // Generate variant combinations\n  const generateCombinations = () => {\n    if (variants.length === 0) {\n      return []\n    }\n\n    const combinations: string[][] = [[]]\n\n    variants.forEach(variant => {\n      const newCombinations: string[][] = []\n      combinations.forEach(combination => {\n        variant.options.forEach(option => {\n          newCombinations.push([...combination, option])\n        })\n      })\n      combinations.length = 0\n      combinations.push(...newCombinations)\n    })\n\n    return combinations\n  }\n\n  const combinations = generateCombinations()\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      <AdminCard title='Gestión de Variantes' className='p-6'>\n        <div className='space-y-6'>\n          {/* Info */}\n          <div className='bg-blue-50 border border-blue-200 rounded-lg p-4'>\n            <h5 className='text-sm font-medium text-blue-800 mb-2'>¿Qué son las variantes?</h5>\n            <p className='text-xs text-blue-700'>\n              Las variantes permiten ofrecer el mismo producto en diferentes opciones como color,\n              tamaño, material, etc. Cada combinación de variantes creará un producto único con su\n              propio precio y stock.\n            </p>\n          </div>\n\n          {/* Quick Add Variants */}\n          <div>\n            <h4 className='text-sm font-medium text-gray-900 mb-3'>Tipos de Variantes Comunes</h4>\n            <div className='grid grid-cols-2 md:grid-cols-4 gap-3'>\n              {variantTypes.map((type, index) => {\n                const Icon = type.icon\n                const exists = variants.some(v => v.name.toLowerCase() === type.name.toLowerCase())\n\n                return (\n                  <button\n                    key={index}\n                    type='button'\n                    onClick={() => !exists && addVariant(type.name, type.options)}\n                    disabled={exists}\n                    className={cn(\n                      'p-3 border rounded-lg text-left transition-colors',\n                      exists\n                        ? 'border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed'\n                        : 'border-gray-300 hover:border-blaze-orange-300 hover:bg-blaze-orange-50'\n                    )}\n                  >\n                    <Icon className='w-5 h-5 mb-2' />\n                    <div className='text-sm font-medium'>{type.name}</div>\n                    <div className='text-xs text-gray-500'>\n                      {exists ? 'Ya agregado' : `${type.options.length} opciones`}\n                    </div>\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Custom Variant */}\n          <div>\n            <h4 className='text-sm font-medium text-gray-900 mb-3'>\n              Agregar Variante Personalizada\n            </h4>\n            <div className='flex space-x-3'>\n              <input\n                type='text'\n                value={newVariantName}\n                onChange={e => setNewVariantName(e.target.value)}\n                placeholder='Nombre de la variante (ej: Acabado)'\n                className='flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n              />\n              <button\n                type='button'\n                onClick={() => newVariantName.trim() && addVariant(newVariantName.trim())}\n                disabled={!newVariantName.trim()}\n                className='px-4 py-2 bg-blaze-orange-600 text-white rounded-lg hover:bg-blaze-orange-700 disabled:opacity-50 disabled:cursor-not-allowed'\n              >\n                <Plus className='w-4 h-4' />\n              </button>\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className='text-red-600 text-sm'>\n              {error instanceof Error ? error.message : String(error) || 'Ha ocurrido un error'}\n            </div>\n          )}\n\n          {/* Existing Variants */}\n          {variants.length > 0 && (\n            <div className='space-y-4'>\n              <h4 className='text-sm font-medium text-gray-900'>\n                Variantes Configuradas ({variants.length})\n              </h4>\n\n              {variants.map((variant, variantIndex) => (\n                <div key={variantIndex} className='border border-gray-200 rounded-lg p-4'>\n                  <div className='flex items-center justify-between mb-3'>\n                    {editingVariant === variantIndex ? (\n                      <div className='flex items-center space-x-2 flex-1'>\n                        <input\n                          type='text'\n                          value={variant.name}\n                          onChange={e => updateVariantName(variantIndex, e.target.value)}\n                          className='flex-1 px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blaze-orange-500'\n                        />\n                        <button\n                          type='button'\n                          onClick={() => setEditingVariant(null)}\n                          className='text-green-600 hover:text-green-700'\n                        >\n                          ✓\n                        </button>\n                      </div>\n                    ) : (\n                      <div className='flex items-center space-x-2'>\n                        <h5 className='font-medium text-gray-900'>{variant.name}</h5>\n                        <button\n                          type='button'\n                          onClick={() => setEditingVariant(variantIndex)}\n                          className='text-gray-400 hover:text-gray-600'\n                        >\n                          <Edit className='w-4 h-4' />\n                        </button>\n                      </div>\n                    )}\n\n                    <button\n                      type='button'\n                      onClick={() => removeVariant(variantIndex)}\n                      className='text-red-500 hover:text-red-700'\n                    >\n                      <Trash2 className='w-4 h-4' />\n                    </button>\n                  </div>\n\n                  {/* Options */}\n                  <div className='space-y-3'>\n                    <div className='flex flex-wrap gap-2'>\n                      {variant.options.map((option, optionIndex) => (\n                        <span\n                          key={optionIndex}\n                          className='inline-flex items-center space-x-1 px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm'\n                        >\n                          <span>{option}</span>\n                          <button\n                            type='button'\n                            onClick={() => removeOption(variantIndex, optionIndex)}\n                            className='text-gray-500 hover:text-red-500'\n                          >\n                            <X className='w-3 h-3' />\n                          </button>\n                        </span>\n                      ))}\n                    </div>\n\n                    {/* Add Option */}\n                    <div className='flex space-x-2'>\n                      <input\n                        type='text'\n                        value={newOption}\n                        onChange={e => setNewOption(e.target.value)}\n                        placeholder={`Nueva opción para ${variant.name}`}\n                        className='flex-1 px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blaze-orange-500'\n                        onKeyPress={e => {\n                          if (e.key === 'Enter') {\n                            addOption(variantIndex, newOption)\n                          }\n                        }}\n                      />\n                      <button\n                        type='button'\n                        onClick={() => addOption(variantIndex, newOption)}\n                        disabled={!newOption.trim()}\n                        className='px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50'\n                      >\n                        Agregar\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Variant Combinations Preview */}\n          {combinations.length > 0 && (\n            <div className='space-y-3'>\n              <h4 className='text-sm font-medium text-gray-900'>\n                Combinaciones Generadas ({combinations.length})\n              </h4>\n\n              {combinations.length <= 20 ? (\n                <div className='grid grid-cols-1 md:grid-cols-2 gap-2 max-h-40 overflow-y-auto'>\n                  {combinations.map((combination, index) => (\n                    <div key={index} className='px-3 py-2 bg-gray-50 rounded text-sm text-gray-700'>\n                      {combination.join(' / ')}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className='p-4 bg-yellow-50 border border-yellow-200 rounded-lg'>\n                  <p className='text-sm text-yellow-800'>\n                    Se generarán {combinations.length} combinaciones. Considera reducir las opciones\n                    si es demasiado complejo de gestionar.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Tips */}\n          {variants.length === 0 && (\n            <div className='text-center py-8 text-gray-500'>\n              <Package className='w-12 h-12 mx-auto mb-4 text-gray-300' />\n              <p className='text-sm'>\n                No hay variantes configuradas. Agrega variantes si tu producto tiene diferentes\n                opciones.\n              </p>\n            </div>\n          )}\n        </div>\n      </AdminCard>\n    </div>\n  )\n}\n"],"names":["ProductVariantManager","variants","onChange","error","className","editingVariant","setEditingVariant","useState","newVariantName","setNewVariantName","newOption","setNewOption","variantTypes","name","icon","Palette","options","Package","addVariant","initialOptions","newVariant","removeVariant","index","newVariants","filter","_","i","updateVariantName","addOption","variantIndex","option","trim","variant","includes","push","removeOption","optionIndex","splice","generateCombinations","length","combinations","forEach","newCombinations","combination","div","cn","AdminCard","title","h5","p","h4","map","type","Icon","exists","some","v","toLowerCase","button","onClick","disabled","input","value","e","target","placeholder","Plus","Error","message","String","Edit","Trash2","span","X","onKeyPress","key","join"],"mappings":"AAAA;;;;;+BAmBgBA;;;eAAAA;;;;uBAjBS;2BACC;6BAC8B;uBACrC;AAcZ,SAASA,sBAAsB,EACpCC,WAAW,EAAE,EACbC,QAAQ,EACRC,KAAK,EACLC,SAAS,EACkB;IAC3B,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGC,IAAAA,eAAQ,EAAgB;IACpE,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGF,IAAAA,eAAQ,EAAC;IACrD,MAAM,CAACG,WAAWC,aAAa,GAAGJ,IAAAA,eAAQ,EAAC;IAE3C,2BAA2B;IAC3B,MAAMK,eAAe;QACnB;YAAEC,MAAM;YAASC,MAAMC,oBAAO;YAAEC,SAAS;gBAAC;gBAAU;gBAAS;gBAAQ;gBAAQ;aAAQ;QAAC;QACtF;YAAEH,MAAM;YAAUC,MAAMG,oBAAO;YAAED,SAAS;gBAAC;gBAAM;gBAAK;gBAAK;gBAAK;aAAK;QAAC;QACtE;YAAEH,MAAM;YAAYC,MAAMG,oBAAO;YAAED,SAAS;gBAAC;gBAAW;gBAAa;gBAAQ;aAAO;QAAC;QACrF;YAAEH,MAAM;YAAaC,MAAMG,oBAAO;YAAED,SAAS;gBAAC;gBAAM;gBAAM;gBAAO;aAAM;QAAC;KACzE;IAED,kBAAkB;IAClB,MAAME,aAAa,CAACL,MAAcM,iBAA2B,EAAE;QAC7D,MAAMC,aAA6B;YACjCP;YACAG,SAASG;QACX;QACAjB,SAAS;eAAID;YAAUmB;SAAW;QAClCX,kBAAkB;IACpB;IAEA,iBAAiB;IACjB,MAAMY,gBAAgB,CAACC;QACrB,MAAMC,cAActB,SAASuB,MAAM,CAAC,CAACC,GAAGC,IAAMA,MAAMJ;QACpDpB,SAASqB;IACX;IAEA,sBAAsB;IACtB,MAAMI,oBAAoB,CAACL,OAAeT;QACxC,MAAMU,cAAc;eAAItB;SAAS;QACjCsB,WAAW,CAACD,MAAM,GAAG;YAAE,GAAGC,WAAW,CAACD,MAAM;YAAET;QAAK;QACnDX,SAASqB;IACX;IAEA,wBAAwB;IACxB,MAAMK,YAAY,CAACC,cAAsBC;QACvC,IAAI,CAACA,OAAOC,IAAI,IAAI;YAClB;QACF;QAEA,MAAMR,cAAc;eAAItB;SAAS;QACjC,MAAM+B,UAAUT,WAAW,CAACM,aAAa;QAEzC,IAAI,CAACG,QAAQhB,OAAO,CAACiB,QAAQ,CAACH,OAAOC,IAAI,KAAK;YAC5CC,QAAQhB,OAAO,CAACkB,IAAI,CAACJ,OAAOC,IAAI;YAChC7B,SAASqB;QACX;QAEAZ,aAAa;IACf;IAEA,6BAA6B;IAC7B,MAAMwB,eAAe,CAACN,cAAsBO;QAC1C,MAAMb,cAAc;eAAItB;SAAS;QACjCsB,WAAW,CAACM,aAAa,CAACb,OAAO,CAACqB,MAAM,CAACD,aAAa;QACtDlC,SAASqB;IACX;IAEA,gCAAgC;IAChC,MAAMe,uBAAuB;QAC3B,IAAIrC,SAASsC,MAAM,KAAK,GAAG;YACzB,OAAO,EAAE;QACX;QAEA,MAAMC,eAA2B;YAAC,EAAE;SAAC;QAErCvC,SAASwC,OAAO,CAACT,CAAAA;YACf,MAAMU,kBAA8B,EAAE;YACtCF,aAAaC,OAAO,CAACE,CAAAA;gBACnBX,QAAQhB,OAAO,CAACyB,OAAO,CAACX,CAAAA;oBACtBY,gBAAgBR,IAAI,CAAC;2BAAIS;wBAAab;qBAAO;gBAC/C;YACF;YACAU,aAAaD,MAAM,GAAG;YACtBC,aAAaN,IAAI,IAAIQ;QACvB;QAEA,OAAOF;IACT;IAEA,MAAMA,eAAeF;IAErB,qBACE,qBAACM;QAAIxC,WAAWyC,IAAAA,SAAE,EAAC,aAAazC;kBAC9B,cAAA,qBAAC0C,oBAAS;YAACC,OAAM;YAAuB3C,WAAU;sBAChD,cAAA,sBAACwC;gBAAIxC,WAAU;;kCAEb,sBAACwC;wBAAIxC,WAAU;;0CACb,qBAAC4C;gCAAG5C,WAAU;0CAAyC;;0CACvD,qBAAC6C;gCAAE7C,WAAU;0CAAwB;;;;kCAQvC,sBAACwC;;0CACC,qBAACM;gCAAG9C,WAAU;0CAAyC;;0CACvD,qBAACwC;gCAAIxC,WAAU;0CACZQ,aAAauC,GAAG,CAAC,CAACC,MAAM9B;oCACvB,MAAM+B,OAAOD,KAAKtC,IAAI;oCACtB,MAAMwC,SAASrD,SAASsD,IAAI,CAACC,CAAAA,IAAKA,EAAE3C,IAAI,CAAC4C,WAAW,OAAOL,KAAKvC,IAAI,CAAC4C,WAAW;oCAEhF,qBACE,sBAACC;wCAECN,MAAK;wCACLO,SAAS,IAAM,CAACL,UAAUpC,WAAWkC,KAAKvC,IAAI,EAAEuC,KAAKpC,OAAO;wCAC5D4C,UAAUN;wCACVlD,WAAWyC,IAAAA,SAAE,EACX,qDACAS,SACI,gEACA;;0DAGN,qBAACD;gDAAKjD,WAAU;;0DAChB,qBAACwC;gDAAIxC,WAAU;0DAAuBgD,KAAKvC,IAAI;;0DAC/C,qBAAC+B;gDAAIxC,WAAU;0DACZkD,SAAS,gBAAgB,GAAGF,KAAKpC,OAAO,CAACuB,MAAM,CAAC,SAAS,CAAC;;;uCAdxDjB;gCAkBX;;;;kCAKJ,sBAACsB;;0CACC,qBAACM;gCAAG9C,WAAU;0CAAyC;;0CAGvD,sBAACwC;gCAAIxC,WAAU;;kDACb,qBAACyD;wCACCT,MAAK;wCACLU,OAAOtD;wCACPN,UAAU6D,CAAAA,IAAKtD,kBAAkBsD,EAAEC,MAAM,CAACF,KAAK;wCAC/CG,aAAY;wCACZ7D,WAAU;;kDAEZ,qBAACsD;wCACCN,MAAK;wCACLO,SAAS,IAAMnD,eAAeuB,IAAI,MAAMb,WAAWV,eAAeuB,IAAI;wCACtE6B,UAAU,CAACpD,eAAeuB,IAAI;wCAC9B3B,WAAU;kDAEV,cAAA,qBAAC8D,iBAAI;4CAAC9D,WAAU;;;;;;;oBAMrBD,uBACC,qBAACyC;wBAAIxC,WAAU;kCACZD,iBAAiBgE,QAAQhE,MAAMiE,OAAO,GAAGC,OAAOlE,UAAU;;oBAK9DF,SAASsC,MAAM,GAAG,mBACjB,sBAACK;wBAAIxC,WAAU;;0CACb,sBAAC8C;gCAAG9C,WAAU;;oCAAoC;oCACvBH,SAASsC,MAAM;oCAAC;;;4BAG1CtC,SAASkD,GAAG,CAAC,CAACnB,SAASH,6BACtB,sBAACe;oCAAuBxC,WAAU;;sDAChC,sBAACwC;4CAAIxC,WAAU;;gDACZC,mBAAmBwB,6BAClB,sBAACe;oDAAIxC,WAAU;;sEACb,qBAACyD;4DACCT,MAAK;4DACLU,OAAO9B,QAAQnB,IAAI;4DACnBX,UAAU6D,CAAAA,IAAKpC,kBAAkBE,cAAckC,EAAEC,MAAM,CAACF,KAAK;4DAC7D1D,WAAU;;sEAEZ,qBAACsD;4DACCN,MAAK;4DACLO,SAAS,IAAMrD,kBAAkB;4DACjCF,WAAU;sEACX;;;mEAKH,sBAACwC;oDAAIxC,WAAU;;sEACb,qBAAC4C;4DAAG5C,WAAU;sEAA6B4B,QAAQnB,IAAI;;sEACvD,qBAAC6C;4DACCN,MAAK;4DACLO,SAAS,IAAMrD,kBAAkBuB;4DACjCzB,WAAU;sEAEV,cAAA,qBAACkE,iBAAI;gEAAClE,WAAU;;;;;8DAKtB,qBAACsD;oDACCN,MAAK;oDACLO,SAAS,IAAMtC,cAAcQ;oDAC7BzB,WAAU;8DAEV,cAAA,qBAACmE,mBAAM;wDAACnE,WAAU;;;;;sDAKtB,sBAACwC;4CAAIxC,WAAU;;8DACb,qBAACwC;oDAAIxC,WAAU;8DACZ4B,QAAQhB,OAAO,CAACmC,GAAG,CAAC,CAACrB,QAAQM,4BAC5B,sBAACoC;4DAECpE,WAAU;;8EAEV,qBAACoE;8EAAM1C;;8EACP,qBAAC4B;oEACCN,MAAK;oEACLO,SAAS,IAAMxB,aAAaN,cAAcO;oEAC1ChC,WAAU;8EAEV,cAAA,qBAACqE,cAAC;wEAACrE,WAAU;;;;2DATVgC;;8DAgBX,sBAACQ;oDAAIxC,WAAU;;sEACb,qBAACyD;4DACCT,MAAK;4DACLU,OAAOpD;4DACPR,UAAU6D,CAAAA,IAAKpD,aAAaoD,EAAEC,MAAM,CAACF,KAAK;4DAC1CG,aAAa,CAAC,kBAAkB,EAAEjC,QAAQnB,IAAI,EAAE;4DAChDT,WAAU;4DACVsE,YAAYX,CAAAA;gEACV,IAAIA,EAAEY,GAAG,KAAK,SAAS;oEACrB/C,UAAUC,cAAcnB;gEAC1B;4DACF;;sEAEF,qBAACgD;4DACCN,MAAK;4DACLO,SAAS,IAAM/B,UAAUC,cAAcnB;4DACvCkD,UAAU,CAAClD,UAAUqB,IAAI;4DACzB3B,WAAU;sEACX;;;;;;;mCA/EGyB;;;oBA0FfW,aAAaD,MAAM,GAAG,mBACrB,sBAACK;wBAAIxC,WAAU;;0CACb,sBAAC8C;gCAAG9C,WAAU;;oCAAoC;oCACtBoC,aAAaD,MAAM;oCAAC;;;4BAG/CC,aAAaD,MAAM,IAAI,mBACtB,qBAACK;gCAAIxC,WAAU;0CACZoC,aAAaW,GAAG,CAAC,CAACR,aAAarB,sBAC9B,qBAACsB;wCAAgBxC,WAAU;kDACxBuC,YAAYiC,IAAI,CAAC;uCADVtD;+CAMd,qBAACsB;gCAAIxC,WAAU;0CACb,cAAA,sBAAC6C;oCAAE7C,WAAU;;wCAA0B;wCACvBoC,aAAaD,MAAM;wCAAC;;;;;;oBAS3CtC,SAASsC,MAAM,KAAK,mBACnB,sBAACK;wBAAIxC,WAAU;;0CACb,qBAACa,oBAAO;gCAACb,WAAU;;0CACnB,qBAAC6C;gCAAE7C,WAAU;0CAAU;;;;;;;;AAUrC"}