db015770b5ce3a6cc2bfb7a2be7d51c9
/**
 * Sistema de Auditoría de Seguridad Mejorado
 * Extiende el sistema base con análisis avanzado, alertas automáticas y reportes
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DEFAULT_SECURITY_PATTERNS () {
        return DEFAULT_SECURITY_PATTERNS;
    },
    get analyzeSecurityPatterns () {
        return analyzeSecurityPatterns;
    },
    get cleanupOldSecurityEvents () {
        return cleanupOldSecurityEvents;
    },
    get exportSecurityEvents () {
        return exportSecurityEvents;
    },
    get generateSecurityReport () {
        return generateSecurityReport;
    },
    get getActiveSecurityAlerts () {
        return getActiveSecurityAlerts;
    },
    get getSecurityMetrics () {
        return getSecurityMetrics;
    },
    get markAlertAsFalsePositive () {
        return markAlertAsFalsePositive;
    },
    get resolveSecurityAlert () {
        return resolveSecurityAlert;
    },
    get runSecurityHealthCheck () {
        return runSecurityHealthCheck;
    },
    get startSecurityMonitoring () {
        return startSecurityMonitoring;
    },
    get stopSecurityMonitoring () {
        return stopSecurityMonitoring;
    },
    get updateSecurityAlert () {
        return updateSecurityAlert;
    }
});
const _supabase = require("../integrations/supabase");
const _securityaudit = require("./security-audit");
const _cachemanager = require("../cache-manager");
const DEFAULT_SECURITY_PATTERNS = [
    {
        id: 'brute_force_login',
        name: 'Ataque de Fuerza Bruta',
        description: 'Múltiples intentos de login fallidos desde la misma IP',
        severity: 'high',
        timeWindow: 15,
        threshold: 5,
        enabled: true,
        conditions: [
            {
                field: 'event_type',
                operator: 'equals',
                value: 'AUTH_FAILURE',
                weight: 1
            },
            {
                field: 'ip_address',
                operator: 'equals',
                value: 'same',
                weight: 1
            }
        ],
        actions: [
            {
                type: 'alert',
                parameters: {
                    notify_admins: true
                }
            },
            {
                type: 'log',
                parameters: {
                    severity: 'high'
                }
            }
        ]
    },
    {
        id: 'privilege_escalation',
        name: 'Escalación de Privilegios',
        description: 'Intento de acceso a recursos sin permisos suficientes',
        severity: 'critical',
        timeWindow: 60,
        threshold: 3,
        enabled: true,
        conditions: [
            {
                field: 'event_type',
                operator: 'equals',
                value: 'PERMISSION_DENIED',
                weight: 1
            },
            {
                field: 'event_category',
                operator: 'equals',
                value: 'authorization',
                weight: 1
            }
        ],
        actions: [
            {
                type: 'alert',
                parameters: {
                    notify_admins: true,
                    priority: 'high'
                }
            },
            {
                type: 'log',
                parameters: {
                    severity: 'critical'
                }
            }
        ]
    },
    {
        id: 'suspicious_data_access',
        name: 'Acceso Sospechoso a Datos',
        description: 'Acceso masivo a datos sensibles en corto período',
        severity: 'medium',
        timeWindow: 30,
        threshold: 10,
        enabled: true,
        conditions: [
            {
                field: 'event_type',
                operator: 'equals',
                value: 'DATA_ACCESS',
                weight: 1
            },
            {
                field: 'event_category',
                operator: 'equals',
                value: 'data_access',
                weight: 1
            }
        ],
        actions: [
            {
                type: 'alert',
                parameters: {
                    notify_admins: false
                }
            },
            {
                type: 'log',
                parameters: {
                    severity: 'medium'
                }
            }
        ]
    },
    {
        id: 'admin_action_burst',
        name: 'Ráfaga de Acciones Administrativas',
        description: 'Múltiples acciones administrativas en corto período',
        severity: 'medium',
        timeWindow: 10,
        threshold: 5,
        enabled: true,
        conditions: [
            {
                field: 'event_type',
                operator: 'equals',
                value: 'ADMIN_ACTION',
                weight: 1
            },
            {
                field: 'event_category',
                operator: 'equals',
                value: 'admin_operations',
                weight: 1
            }
        ],
        actions: [
            {
                type: 'alert',
                parameters: {
                    notify_admins: true
                }
            },
            {
                type: 'log',
                parameters: {
                    severity: 'medium'
                }
            }
        ]
    },
    {
        id: 'geographic_anomaly',
        name: 'Anomalía Geográfica',
        description: 'Acceso desde ubicaciones geográficas inusuales',
        severity: 'medium',
        timeWindow: 60,
        threshold: 2,
        enabled: true,
        conditions: [
            {
                field: 'event_type',
                operator: 'equals',
                value: 'AUTH_SUCCESS',
                weight: 1
            },
            {
                field: 'ip_address',
                operator: 'not_in',
                value: 'usual_locations',
                weight: 1
            }
        ],
        actions: [
            {
                type: 'alert',
                parameters: {
                    notify_user: true
                }
            },
            {
                type: 'log',
                parameters: {
                    severity: 'medium'
                }
            }
        ]
    }
];
async function analyzeSecurityPatterns(userId, timeWindowHours = 24) {
    try {
        console.log('[SECURITY] Iniciando análisis de patrones de seguridad');
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        const timeThreshold = new Date(Date.now() - timeWindowHours * 60 * 60 * 1000).toISOString();
        const alerts = [];
        // Obtener eventos recientes
        let query = _supabase.supabaseAdmin.from('security_events').select('*').gte('timestamp', timeThreshold).order('timestamp', {
            ascending: false
        });
        if (userId) {
            query = query.eq('user_id', userId);
        }
        const { data: events, error } = await query;
        if (error) {
            throw new Error(`Error obteniendo eventos: ${error.message}`);
        }
        if (!events || events.length === 0) {
            return alerts;
        }
        // Analizar cada patrón
        for (const pattern of DEFAULT_SECURITY_PATTERNS){
            if (!pattern.enabled) {
                continue;
            }
            const patternAlerts = await detectPattern(pattern, events);
            alerts.push(...patternAlerts);
        }
        // Guardar alertas en base de datos
        if (alerts.length > 0) {
            const { error: insertError } = await _supabase.supabaseAdmin.from('security_alerts').insert(alerts);
            if (insertError) {
                console.error('[SECURITY] Error guardando alertas:', insertError);
            }
        }
        console.log(`[SECURITY] Análisis completado: ${alerts.length} alertas generadas`);
        return alerts;
    } catch (error) {
        console.error('[SECURITY] Error en análisis de patrones:', error);
        return [];
    }
}
/**
 * Detecta un patrón específico en los eventos
 */ async function detectPattern(pattern, events) {
    const alerts = [];
    const timeWindow = pattern.timeWindow * 60 * 1000 // convertir a ms
    ;
    // Agrupar eventos por usuario
    const eventsByUser = events.reduce((acc, event)=>{
        if (!acc[event.user_id]) {
            acc[event.user_id] = [];
        }
        acc[event.user_id].push(event);
        return acc;
    }, {});
    // Analizar cada usuario
    for (const [userId, userEvents] of Object.entries(eventsByUser)){
        const matchingEvents = userEvents.filter((event)=>matchesPatternConditions(event, pattern.conditions));
        if (matchingEvents.length < pattern.threshold) {
            continue;
        }
        // Verificar ventana de tiempo
        const sortedEvents = matchingEvents.sort((a, b)=>new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
        for(let i = 0; i <= sortedEvents.length - pattern.threshold; i++){
            const windowStart = new Date(sortedEvents[i].timestamp).getTime();
            const windowEnd = windowStart + timeWindow;
            const eventsInWindow = sortedEvents.filter((event)=>{
                const eventTime = new Date(event.timestamp).getTime();
                return eventTime >= windowStart && eventTime <= windowEnd;
            });
            if (eventsInWindow.length >= pattern.threshold) {
                // Patrón detectado
                const alert = {
                    id: `${pattern.id}_${userId}_${Date.now()}`,
                    pattern_id: pattern.id,
                    user_id: userId,
                    severity: pattern.severity,
                    title: pattern.name,
                    description: `${pattern.description} - ${eventsInWindow.length} eventos detectados`,
                    event_count: eventsInWindow.length,
                    first_occurrence: eventsInWindow[0].timestamp,
                    last_occurrence: eventsInWindow[eventsInWindow.length - 1].timestamp,
                    status: 'open',
                    metadata: {
                        pattern_name: pattern.name,
                        events: eventsInWindow.map((e)=>e.id),
                        threshold: pattern.threshold,
                        time_window_minutes: pattern.timeWindow
                    }
                };
                alerts.push(alert);
                // Ejecutar acciones del patrón
                await executePatternActions(pattern.actions, alert, eventsInWindow);
                break; // Solo una alerta por patrón por usuario
            }
        }
    }
    return alerts;
}
/**
 * Verifica si un evento coincide con las condiciones del patrón
 */ function matchesPatternConditions(event, conditions) {
    return conditions.every((condition)=>{
        const eventValue = event[condition.field];
        switch(condition.operator){
            case 'equals':
                return eventValue === condition.value;
            case 'contains':
                return typeof eventValue === 'string' && eventValue.includes(condition.value);
            case 'greater_than':
                return Number(eventValue) > Number(condition.value);
            case 'less_than':
                return Number(eventValue) < Number(condition.value);
            case 'in':
                return Array.isArray(condition.value) && condition.value.includes(eventValue);
            case 'not_in':
                return Array.isArray(condition.value) && !condition.value.includes(eventValue);
            default:
                return false;
        }
    });
}
/**
 * Ejecuta las acciones definidas para un patrón
 */ async function executePatternActions(actions, alert, events) {
    for (const action of actions){
        try {
            switch(action.type){
                case 'log':
                    await (0, _securityaudit.logSecurityEvent)({
                        user_id: alert.user_id,
                        event_type: 'SUSPICIOUS_ACTIVITY',
                        event_category: 'suspicious_behavior',
                        severity: action.parameters?.severity || alert.severity,
                        description: `Patrón detectado: ${alert.title}`,
                        metadata: {
                            pattern_id: alert.pattern_id,
                            alert_id: alert.id,
                            event_count: alert.event_count,
                            ...action.parameters
                        }
                    });
                    break;
                case 'alert':
                    console.warn(`[SECURITY ALERT] ${alert.title} - Usuario: ${alert.user_id}`);
                    if (action.parameters?.notify_admins) {
                        // Aquí se podría integrar con un sistema de notificaciones
                        console.log('[SECURITY] Notificando a administradores...');
                    }
                    break;
                case 'block_user':
                    console.log(`[SECURITY] Bloqueando usuario: ${alert.user_id}`);
                    break;
                case 'invalidate_sessions':
                    console.log(`[SECURITY] Invalidando sesiones del usuario: ${alert.user_id}`);
                    break;
                default:
                    console.warn(`[SECURITY] Acción no reconocida: ${action.type}`);
            }
        } catch (error) {
            console.error(`[SECURITY] Error ejecutando acción ${action.type}:`, error);
        }
    }
}
async function getSecurityMetrics() {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        const cache = _cachemanager.CacheManager.getInstance();
        const cacheKey = 'security_metrics';
        // Intentar obtener desde cache
        const cached = await cache.get(_cachemanager.CACHE_CONFIGS.USER_SESSION, cacheKey);
        if (cached) {
            return cached;
        }
        const now = new Date();
        const last24h = new Date(now.getTime() - 24 * 60 * 60 * 1000).toISOString();
        // Obtener eventos de las últimas 24 horas
        const { data: events, error } = await _supabase.supabaseAdmin.from('security_events').select('*').gte('timestamp', last24h);
        if (error) {
            throw new Error(`Error obteniendo eventos: ${error.message}`);
        }
        // Obtener alertas activas
        const { data: alerts, error: alertsError } = await _supabase.supabaseAdmin.from('security_alerts').select('id').eq('status', 'open');
        if (alertsError) {
            console.error('[SECURITY] Error obteniendo alertas:', alertsError);
        }
        // Calcular métricas
        const totalEvents = events?.length || 0;
        const criticalEvents = events?.filter((e)=>e.severity === 'critical').length || 0;
        const uniqueUsers = new Set(events?.map((e)=>e.user_id)).size;
        const authFailures = events?.filter((e)=>e.event_type === 'AUTH_FAILURE').length || 0;
        const suspiciousActivities = events?.filter((e)=>e.event_type === 'SUSPICIOUS_ACTIVITY').length || 0;
        const activeAlerts = alerts?.length || 0;
        // Calcular score de seguridad (0-100)
        let securityScore = 100;
        if (criticalEvents > 0) {
            securityScore -= criticalEvents * 10;
        }
        if (authFailures > 10) {
            securityScore -= (authFailures - 10) * 2;
        }
        if (suspiciousActivities > 5) {
            securityScore -= (suspiciousActivities - 5) * 5;
        }
        if (activeAlerts > 0) {
            securityScore -= activeAlerts * 3;
        }
        securityScore = Math.max(0, Math.min(100, securityScore));
        const metrics = {
            total_events_24h: totalEvents,
            critical_events_24h: criticalEvents,
            unique_users_24h: uniqueUsers,
            auth_failures_24h: authFailures,
            suspicious_activities_24h: suspiciousActivities,
            blocked_users: 0,
            active_alerts: activeAlerts,
            avg_response_time: 0,
            security_score: securityScore
        };
        // Guardar en cache por 5 minutos
        await cache.set(_cachemanager.CACHE_CONFIGS.USER_SESSION, cacheKey, metrics);
        return metrics;
    } catch (error) {
        console.error('[SECURITY] Error obteniendo métricas:', error);
        return {
            total_events_24h: 0,
            critical_events_24h: 0,
            unique_users_24h: 0,
            auth_failures_24h: 0,
            suspicious_activities_24h: 0,
            blocked_users: 0,
            active_alerts: 0,
            avg_response_time: 0,
            security_score: 0
        };
    }
}
async function generateSecurityReport(startDate, endDate) {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        console.log(`[SECURITY] Generando reporte de seguridad: ${startDate.toISOString()} - ${endDate.toISOString()}`);
        // Obtener eventos del período
        const { data: events, error } = await _supabase.supabaseAdmin.from('security_events').select('*').gte('timestamp', startDate.toISOString()).lte('timestamp', endDate.toISOString()).order('timestamp', {
            ascending: false
        });
        if (error) {
            throw new Error(`Error obteniendo eventos: ${error.message}`);
        }
        const totalEvents = events?.length || 0;
        // Agrupar por severidad
        const eventsBySeverity = {
            low: 0,
            medium: 0,
            high: 0,
            critical: 0
        };
        // Agrupar por categoría
        const eventsByCategory = {
            authentication: 0,
            authorization: 0,
            data_access: 0,
            admin_operations: 0,
            suspicious_behavior: 0
        };
        // Contadores de usuarios e IPs
        const userCounts = {};
        const ipCounts = {};
        events?.forEach((event)=>{
            // Contar por severidad
            eventsBySeverity[event.severity]++;
            // Contar por categoría
            eventsByCategory[event.event_category]++;
            // Contar por usuario
            userCounts[event.user_id] = (userCounts[event.user_id] || 0) + 1;
            // Contar por IP
            if (event.ip_address) {
                ipCounts[event.ip_address] = (ipCounts[event.ip_address] || 0) + 1;
            }
        });
        // Top usuarios (más eventos)
        const topUsers = Object.entries(userCounts).sort(([, a], [, b])=>b - a).slice(0, 10).map(([user_id, event_count])=>({
                user_id,
                event_count
            }));
        // Top IPs (más eventos)
        const topIps = Object.entries(ipCounts).sort(([, a], [, b])=>b - a).slice(0, 10).map(([ip_address, event_count])=>({
                ip_address,
                event_count
            }));
        // Obtener patrones detectados
        const { data: alerts, error: alertsError } = await _supabase.supabaseAdmin.from('security_alerts').select('pattern_id').gte('first_occurrence', startDate.toISOString()).lte('last_occurrence', endDate.toISOString());
        const patternsDetected = [];
        if (!alertsError && alerts) {
            const patternCounts = {};
            alerts.forEach((alert)=>{
                patternCounts[alert.pattern_id] = (patternCounts[alert.pattern_id] || 0) + 1;
            });
            Object.entries(patternCounts).forEach(([pattern_id, occurrences])=>{
                patternsDetected.push({
                    pattern_id,
                    occurrences
                });
            });
        }
        // Generar recomendaciones
        const recommendations = generateSecurityRecommendations(eventsBySeverity, eventsByCategory, patternsDetected);
        const report = {
            id: `report_${Date.now()}`,
            period_start: startDate.toISOString(),
            period_end: endDate.toISOString(),
            total_events: totalEvents,
            events_by_severity: eventsBySeverity,
            events_by_category: eventsByCategory,
            top_users: topUsers,
            top_ips: topIps,
            patterns_detected: patternsDetected,
            recommendations,
            generated_at: new Date().toISOString()
        };
        // Guardar reporte en base de datos
        const { error: insertError } = await _supabase.supabaseAdmin.from('security_reports').insert(report);
        if (insertError) {
            console.error('[SECURITY] Error guardando reporte:', insertError);
        }
        console.log(`[SECURITY] Reporte generado: ${totalEvents} eventos analizados`);
        return report;
    } catch (error) {
        console.error('[SECURITY] Error generando reporte:', error);
        throw error;
    }
}
/**
 * Genera recomendaciones de seguridad basadas en los datos del reporte
 */ function generateSecurityRecommendations(eventsBySeverity, eventsByCategory, patternsDetected) {
    const recommendations = [];
    // Recomendaciones basadas en severidad
    if (eventsBySeverity.critical > 0) {
        recommendations.push(`Se detectaron ${eventsBySeverity.critical} eventos críticos. Revisar inmediatamente.`);
    }
    if (eventsBySeverity.high > 10) {
        recommendations.push(`Alto número de eventos de severidad alta (${eventsBySeverity.high}). Considerar reforzar medidas de seguridad.`);
    }
    // Recomendaciones basadas en categorías
    if (eventsByCategory.authentication > 50) {
        recommendations.push(`Muchos eventos de autenticación (${eventsByCategory.authentication}). Considerar implementar MFA.`);
    }
    if (eventsByCategory.authorization > 20) {
        recommendations.push(`Eventos de autorización elevados (${eventsByCategory.authorization}). Revisar permisos de usuarios.`);
    }
    if (eventsByCategory.suspicious_behavior > 5) {
        recommendations.push(`Actividad sospechosa detectada (${eventsByCategory.suspicious_behavior} eventos). Monitorear de cerca.`);
    }
    // Recomendaciones basadas en patrones
    const highFrequencyPatterns = patternsDetected.filter((p)=>p.occurrences > 3);
    if (highFrequencyPatterns.length > 0) {
        recommendations.push(`Patrones de seguridad recurrentes detectados. Considerar medidas preventivas adicionales.`);
    }
    // Recomendaciones generales
    if (recommendations.length === 0) {
        recommendations.push('No se detectaron problemas críticos de seguridad. Mantener monitoreo regular.');
    }
    return recommendations;
}
async function getActiveSecurityAlerts(userId, severity) {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        let query = _supabase.supabaseAdmin.from('security_alerts').select('*').eq('status', 'open').order('last_occurrence', {
            ascending: false
        });
        if (userId) {
            query = query.eq('user_id', userId);
        }
        if (severity) {
            query = query.eq('severity', severity);
        }
        const { data: alerts, error } = await query;
        if (error) {
            throw new Error(`Error obteniendo alertas: ${error.message}`);
        }
        return alerts || [];
    } catch (error) {
        console.error('[SECURITY] Error obteniendo alertas activas:', error);
        return [];
    }
}
async function updateSecurityAlert(alertId, updates) {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        const { error } = await _supabase.supabaseAdmin.from('security_alerts').update({
            ...updates,
            updated_at: new Date().toISOString()
        }).eq('id', alertId);
        if (error) {
            throw new Error(`Error actualizando alerta: ${error.message}`);
        }
        console.log(`[SECURITY] Alerta ${alertId} actualizada: ${JSON.stringify(updates)}`);
        return true;
    } catch (error) {
        console.error('[SECURITY] Error actualizando alerta:', error);
        return false;
    }
}
async function resolveSecurityAlert(alertId, resolutionNotes, resolvedBy) {
    return await updateSecurityAlert(alertId, {
        status: 'resolved',
        assigned_to: resolvedBy,
        resolution_notes: resolutionNotes
    });
}
async function markAlertAsFalsePositive(alertId, notes, markedBy) {
    return await updateSecurityAlert(alertId, {
        status: 'false_positive',
        assigned_to: markedBy,
        resolution_notes: notes
    });
}
function startSecurityMonitoring(intervalMinutes = 5) {
    console.log(`[SECURITY] 🚫 MONITOREO AUTOMÁTICO TEMPORALMENTE DESHABILITADO`);
    console.log(`[SECURITY] 📋 Razón: Evitar llamadas recursivas a APIs de auth`);
    // RETORNAR UN TIMEOUT DUMMY PARA NO ROMPER EL CÓDIGO QUE LO LLAMA
    return setTimeout(()=>{
        console.log('[SECURITY] Timeout dummy completado');
    }, 1000);
// CÓDIGO COMENTADO TEMPORALMENTE
// return setInterval(async () => {
//   try {
//     console.log('[SECURITY] Ejecutando análisis automático...');
//     // Analizar patrones de seguridad
//     const alerts = await analyzeSecurityPatterns();
//     if (alerts.length > 0) {
//       console.log(`[SECURITY] ${alerts.length} nuevas alertas generadas`);
//       // Procesar alertas críticas inmediatamente
//       const criticalAlerts = alerts.filter(a => a.severity === 'critical');
//       if (criticalAlerts.length > 0) {
//         console.warn(`[SECURITY] ¡${criticalAlerts.length} alertas críticas detectadas!`);
//         // Aquí se podrían enviar notificaciones inmediatas
//       }
//     }
//     // Actualizar métricas
//     await getSecurityMetrics();
//   } catch (error) {
//     console.error('[SECURITY] Error en monitoreo automático:', error);
//   }
// }, intervalMinutes * 60 * 1000);
}
function stopSecurityMonitoring(intervalId) {
    clearInterval(intervalId);
    console.log('[SECURITY] Monitoreo automático detenido');
}
async function runSecurityHealthCheck() {
    try {
        console.log('[SECURITY] Ejecutando verificación completa de seguridad...');
        // Obtener métricas actuales
        const metrics = await getSecurityMetrics();
        // Obtener alertas activas
        const activeAlerts = await getActiveSecurityAlerts();
        const issues = [];
        const recommendations = [];
        let status = 'healthy';
        // Evaluar estado de seguridad
        if (metrics.critical_events_24h > 0) {
            issues.push(`${metrics.critical_events_24h} eventos críticos en las últimas 24 horas`);
            status = 'critical';
        }
        if (metrics.auth_failures_24h > 20) {
            issues.push(`Alto número de fallos de autenticación: ${metrics.auth_failures_24h}`);
            if (status !== 'critical') {
                status = 'warning';
            }
            recommendations.push('Considerar implementar medidas anti-brute force');
        }
        if (metrics.suspicious_activities_24h > 10) {
            issues.push(`Actividad sospechosa elevada: ${metrics.suspicious_activities_24h} eventos`);
            if (status !== 'critical') {
                status = 'warning';
            }
            recommendations.push('Revisar patrones de actividad sospechosa');
        }
        if (metrics.active_alerts > 5) {
            issues.push(`Muchas alertas activas sin resolver: ${metrics.active_alerts}`);
            if (status !== 'critical') {
                status = 'warning';
            }
            recommendations.push('Revisar y resolver alertas pendientes');
        }
        if (metrics.security_score < 70) {
            issues.push(`Score de seguridad bajo: ${metrics.security_score}/100`);
            if (status !== 'critical') {
                status = 'warning';
            }
            recommendations.push('Implementar medidas para mejorar el score de seguridad');
        }
        // Recomendaciones generales
        if (issues.length === 0) {
            recommendations.push('Sistema de seguridad funcionando correctamente');
            recommendations.push('Mantener monitoreo regular y actualizaciones de seguridad');
        }
        console.log(`[SECURITY] Verificación completada - Estado: ${status}`);
        return {
            status,
            issues,
            recommendations,
            metrics
        };
    } catch (error) {
        console.error('[SECURITY] Error en verificación de seguridad:', error);
        return {
            status: 'critical',
            issues: [
                'Error ejecutando verificación de seguridad'
            ],
            recommendations: [
                'Revisar logs del sistema'
            ],
            metrics: await getSecurityMetrics()
        };
    }
}
async function cleanupOldSecurityEvents(daysToKeep = 90) {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        const cutoffDate = new Date(Date.now() - daysToKeep * 24 * 60 * 60 * 1000).toISOString();
        const { data, error } = await _supabase.supabaseAdmin.from('security_events').delete().lt('timestamp', cutoffDate);
        if (error) {
            throw new Error(`Error limpiando eventos: ${error.message}`);
        }
        const deletedCount = Array.isArray(data) ? data.length : 0;
        console.log(`[SECURITY] Limpieza completada: ${deletedCount} eventos eliminados`);
        return deletedCount;
    } catch (error) {
        console.error('[SECURITY] Error en limpieza de eventos:', error);
        return 0;
    }
}
async function exportSecurityEvents(startDate, endDate, format = 'json') {
    try {
        if (!_supabase.supabaseAdmin) {
            throw new Error('Supabase admin client no disponible');
        }
        const { data: events, error } = await _supabase.supabaseAdmin.from('security_events').select('*').gte('timestamp', startDate.toISOString()).lte('timestamp', endDate.toISOString()).order('timestamp', {
            ascending: true
        });
        if (error) {
            throw new Error(`Error exportando eventos: ${error.message}`);
        }
        if (format === 'json') {
            return JSON.stringify(events, null, 2);
        } else {
            // Formato CSV
            if (!events || events.length === 0) {
                return 'No hay eventos para exportar';
            }
            const headers = Object.keys(events[0]).join(',');
            const rows = events.map((event)=>Object.values(event).map((value)=>typeof value === 'string' ? `"${value.replace(/"/g, '""')}"` : value).join(','));
            return [
                headers,
                ...rows
            ].join('\n');
        }
    } catch (error) {
        console.error('[SECURITY] Error exportando eventos:', error);
        throw error;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxhdXRoXFxzZWN1cml0eS1hdWRpdC1lbmhhbmNlZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpc3RlbWEgZGUgQXVkaXRvcsOtYSBkZSBTZWd1cmlkYWQgTWVqb3JhZG9cbiAqIEV4dGllbmRlIGVsIHNpc3RlbWEgYmFzZSBjb24gYW7DoWxpc2lzIGF2YW56YWRvLCBhbGVydGFzIGF1dG9tw6F0aWNhcyB5IHJlcG9ydGVzXG4gKi9cblxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucy9zdXBhYmFzZSdcbmltcG9ydCB7XG4gIGxvZ1NlY3VyaXR5RXZlbnQsXG4gIHR5cGUgU2VjdXJpdHlFdmVudCxcbiAgdHlwZSBTZWN1cml0eVNldmVyaXR5LFxuICB0eXBlIFNlY3VyaXR5RXZlbnRUeXBlLFxuICB0eXBlIFNlY3VyaXR5RXZlbnRDYXRlZ29yeSxcbn0gZnJvbSAnLi9zZWN1cml0eS1hdWRpdCdcbmltcG9ydCB7IENhY2hlTWFuYWdlciwgQ0FDSEVfQ09ORklHUyB9IGZyb20gJ0AvbGliL2NhY2hlLW1hbmFnZXInXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUSVBPUyBZIElOVEVSRkFDRVMgRVhURU5ESURBU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eVBhdHRlcm4ge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIHNldmVyaXR5OiBTZWN1cml0eVNldmVyaXR5XG4gIGNvbmRpdGlvbnM6IFBhdHRlcm5Db25kaXRpb25bXVxuICB0aW1lV2luZG93OiBudW1iZXIgLy8gZW4gbWludXRvc1xuICB0aHJlc2hvbGQ6IG51bWJlclxuICBlbmFibGVkOiBib29sZWFuXG4gIGFjdGlvbnM6IFNlY3VyaXR5QWN0aW9uW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXR0ZXJuQ29uZGl0aW9uIHtcbiAgZmllbGQ6IHN0cmluZ1xuICBvcGVyYXRvcjogJ2VxdWFscycgfCAnY29udGFpbnMnIHwgJ2dyZWF0ZXJfdGhhbicgfCAnbGVzc190aGFuJyB8ICdpbicgfCAnbm90X2luJ1xuICB2YWx1ZTogYW55XG4gIHdlaWdodDogbnVtYmVyIC8vIHBlc28gZW4gZWwgY8OhbGN1bG8gZGVsIHBhdHLDs25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUFjdGlvbiB7XG4gIHR5cGU6ICdsb2cnIHwgJ2FsZXJ0JyB8ICdibG9ja191c2VyJyB8ICdub3RpZnlfYWRtaW4nIHwgJ2ludmFsaWRhdGVfc2Vzc2lvbnMnXG4gIHBhcmFtZXRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlSZXBvcnQge1xuICBpZDogc3RyaW5nXG4gIHBlcmlvZF9zdGFydDogc3RyaW5nXG4gIHBlcmlvZF9lbmQ6IHN0cmluZ1xuICB0b3RhbF9ldmVudHM6IG51bWJlclxuICBldmVudHNfYnlfc2V2ZXJpdHk6IFJlY29yZDxTZWN1cml0eVNldmVyaXR5LCBudW1iZXI+XG4gIGV2ZW50c19ieV9jYXRlZ29yeTogUmVjb3JkPFNlY3VyaXR5RXZlbnRDYXRlZ29yeSwgbnVtYmVyPlxuICB0b3BfdXNlcnM6IEFycmF5PHsgdXNlcl9pZDogc3RyaW5nOyBldmVudF9jb3VudDogbnVtYmVyIH0+XG4gIHRvcF9pcHM6IEFycmF5PHsgaXBfYWRkcmVzczogc3RyaW5nOyBldmVudF9jb3VudDogbnVtYmVyIH0+XG4gIHBhdHRlcm5zX2RldGVjdGVkOiBBcnJheTx7IHBhdHRlcm5faWQ6IHN0cmluZzsgb2NjdXJyZW5jZXM6IG51bWJlciB9PlxuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdXG4gIGdlbmVyYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlNZXRyaWNzIHtcbiAgdG90YWxfZXZlbnRzXzI0aDogbnVtYmVyXG4gIGNyaXRpY2FsX2V2ZW50c18yNGg6IG51bWJlclxuICB1bmlxdWVfdXNlcnNfMjRoOiBudW1iZXJcbiAgYXV0aF9mYWlsdXJlc18yNGg6IG51bWJlclxuICBzdXNwaWNpb3VzX2FjdGl2aXRpZXNfMjRoOiBudW1iZXJcbiAgYmxvY2tlZF91c2VyczogbnVtYmVyXG4gIGFjdGl2ZV9hbGVydHM6IG51bWJlclxuICBhdmdfcmVzcG9uc2VfdGltZTogbnVtYmVyXG4gIHNlY3VyaXR5X3Njb3JlOiBudW1iZXIgLy8gMC0xMDBcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUFsZXJ0IHtcbiAgaWQ6IHN0cmluZ1xuICBwYXR0ZXJuX2lkOiBzdHJpbmdcbiAgdXNlcl9pZDogc3RyaW5nXG4gIHNldmVyaXR5OiBTZWN1cml0eVNldmVyaXR5XG4gIHRpdGxlOiBzdHJpbmdcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xuICBldmVudF9jb3VudDogbnVtYmVyXG4gIGZpcnN0X29jY3VycmVuY2U6IHN0cmluZ1xuICBsYXN0X29jY3VycmVuY2U6IHN0cmluZ1xuICBzdGF0dXM6ICdvcGVuJyB8ICdpbnZlc3RpZ2F0aW5nJyB8ICdyZXNvbHZlZCcgfCAnZmFsc2VfcG9zaXRpdmUnXG4gIGFzc2lnbmVkX3RvPzogc3RyaW5nXG4gIHJlc29sdXRpb25fbm90ZXM/OiBzdHJpbmdcbiAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBBVFJPTkVTIERFIFNFR1VSSURBRCBQUkVERUZJTklET1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFQ1VSSVRZX1BBVFRFUk5TOiBTZWN1cml0eVBhdHRlcm5bXSA9IFtcbiAge1xuICAgIGlkOiAnYnJ1dGVfZm9yY2VfbG9naW4nLFxuICAgIG5hbWU6ICdBdGFxdWUgZGUgRnVlcnphIEJydXRhJyxcbiAgICBkZXNjcmlwdGlvbjogJ03Dumx0aXBsZXMgaW50ZW50b3MgZGUgbG9naW4gZmFsbGlkb3MgZGVzZGUgbGEgbWlzbWEgSVAnLFxuICAgIHNldmVyaXR5OiAnaGlnaCcsXG4gICAgdGltZVdpbmRvdzogMTUsXG4gICAgdGhyZXNob2xkOiA1LFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgY29uZGl0aW9uczogW1xuICAgICAgeyBmaWVsZDogJ2V2ZW50X3R5cGUnLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnQVVUSF9GQUlMVVJFJywgd2VpZ2h0OiAxIH0sXG4gICAgICB7IGZpZWxkOiAnaXBfYWRkcmVzcycsIG9wZXJhdG9yOiAnZXF1YWxzJywgdmFsdWU6ICdzYW1lJywgd2VpZ2h0OiAxIH0sXG4gICAgXSxcbiAgICBhY3Rpb25zOiBbXG4gICAgICB7IHR5cGU6ICdhbGVydCcsIHBhcmFtZXRlcnM6IHsgbm90aWZ5X2FkbWluczogdHJ1ZSB9IH0sXG4gICAgICB7IHR5cGU6ICdsb2cnLCBwYXJhbWV0ZXJzOiB7IHNldmVyaXR5OiAnaGlnaCcgfSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ3ByaXZpbGVnZV9lc2NhbGF0aW9uJyxcbiAgICBuYW1lOiAnRXNjYWxhY2nDs24gZGUgUHJpdmlsZWdpb3MnLFxuICAgIGRlc2NyaXB0aW9uOiAnSW50ZW50byBkZSBhY2Nlc28gYSByZWN1cnNvcyBzaW4gcGVybWlzb3Mgc3VmaWNpZW50ZXMnLFxuICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgIHRpbWVXaW5kb3c6IDYwLFxuICAgIHRocmVzaG9sZDogMyxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGNvbmRpdGlvbnM6IFtcbiAgICAgIHsgZmllbGQ6ICdldmVudF90eXBlJywgb3BlcmF0b3I6ICdlcXVhbHMnLCB2YWx1ZTogJ1BFUk1JU1NJT05fREVOSUVEJywgd2VpZ2h0OiAxIH0sXG4gICAgICB7IGZpZWxkOiAnZXZlbnRfY2F0ZWdvcnknLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnYXV0aG9yaXphdGlvbicsIHdlaWdodDogMSB9LFxuICAgIF0sXG4gICAgYWN0aW9uczogW1xuICAgICAgeyB0eXBlOiAnYWxlcnQnLCBwYXJhbWV0ZXJzOiB7IG5vdGlmeV9hZG1pbnM6IHRydWUsIHByaW9yaXR5OiAnaGlnaCcgfSB9LFxuICAgICAgeyB0eXBlOiAnbG9nJywgcGFyYW1ldGVyczogeyBzZXZlcml0eTogJ2NyaXRpY2FsJyB9IH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnc3VzcGljaW91c19kYXRhX2FjY2VzcycsXG4gICAgbmFtZTogJ0FjY2VzbyBTb3NwZWNob3NvIGEgRGF0b3MnLFxuICAgIGRlc2NyaXB0aW9uOiAnQWNjZXNvIG1hc2l2byBhIGRhdG9zIHNlbnNpYmxlcyBlbiBjb3J0byBwZXLDrW9kbycsXG4gICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgIHRpbWVXaW5kb3c6IDMwLFxuICAgIHRocmVzaG9sZDogMTAsXG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBjb25kaXRpb25zOiBbXG4gICAgICB7IGZpZWxkOiAnZXZlbnRfdHlwZScsIG9wZXJhdG9yOiAnZXF1YWxzJywgdmFsdWU6ICdEQVRBX0FDQ0VTUycsIHdlaWdodDogMSB9LFxuICAgICAgeyBmaWVsZDogJ2V2ZW50X2NhdGVnb3J5Jywgb3BlcmF0b3I6ICdlcXVhbHMnLCB2YWx1ZTogJ2RhdGFfYWNjZXNzJywgd2VpZ2h0OiAxIH0sXG4gICAgXSxcbiAgICBhY3Rpb25zOiBbXG4gICAgICB7IHR5cGU6ICdhbGVydCcsIHBhcmFtZXRlcnM6IHsgbm90aWZ5X2FkbWluczogZmFsc2UgfSB9LFxuICAgICAgeyB0eXBlOiAnbG9nJywgcGFyYW1ldGVyczogeyBzZXZlcml0eTogJ21lZGl1bScgfSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2FkbWluX2FjdGlvbl9idXJzdCcsXG4gICAgbmFtZTogJ1LDoWZhZ2EgZGUgQWNjaW9uZXMgQWRtaW5pc3RyYXRpdmFzJyxcbiAgICBkZXNjcmlwdGlvbjogJ03Dumx0aXBsZXMgYWNjaW9uZXMgYWRtaW5pc3RyYXRpdmFzIGVuIGNvcnRvIHBlcsOtb2RvJyxcbiAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgdGltZVdpbmRvdzogMTAsXG4gICAgdGhyZXNob2xkOiA1LFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgY29uZGl0aW9uczogW1xuICAgICAgeyBmaWVsZDogJ2V2ZW50X3R5cGUnLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnQURNSU5fQUNUSU9OJywgd2VpZ2h0OiAxIH0sXG4gICAgICB7IGZpZWxkOiAnZXZlbnRfY2F0ZWdvcnknLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnYWRtaW5fb3BlcmF0aW9ucycsIHdlaWdodDogMSB9LFxuICAgIF0sXG4gICAgYWN0aW9uczogW1xuICAgICAgeyB0eXBlOiAnYWxlcnQnLCBwYXJhbWV0ZXJzOiB7IG5vdGlmeV9hZG1pbnM6IHRydWUgfSB9LFxuICAgICAgeyB0eXBlOiAnbG9nJywgcGFyYW1ldGVyczogeyBzZXZlcml0eTogJ21lZGl1bScgfSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2dlb2dyYXBoaWNfYW5vbWFseScsXG4gICAgbmFtZTogJ0Fub21hbMOtYSBHZW9ncsOhZmljYScsXG4gICAgZGVzY3JpcHRpb246ICdBY2Nlc28gZGVzZGUgdWJpY2FjaW9uZXMgZ2VvZ3LDoWZpY2FzIGludXN1YWxlcycsXG4gICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgIHRpbWVXaW5kb3c6IDYwLFxuICAgIHRocmVzaG9sZDogMixcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGNvbmRpdGlvbnM6IFtcbiAgICAgIHsgZmllbGQ6ICdldmVudF90eXBlJywgb3BlcmF0b3I6ICdlcXVhbHMnLCB2YWx1ZTogJ0FVVEhfU1VDQ0VTUycsIHdlaWdodDogMSB9LFxuICAgICAgeyBmaWVsZDogJ2lwX2FkZHJlc3MnLCBvcGVyYXRvcjogJ25vdF9pbicsIHZhbHVlOiAndXN1YWxfbG9jYXRpb25zJywgd2VpZ2h0OiAxIH0sXG4gICAgXSxcbiAgICBhY3Rpb25zOiBbXG4gICAgICB7IHR5cGU6ICdhbGVydCcsIHBhcmFtZXRlcnM6IHsgbm90aWZ5X3VzZXI6IHRydWUgfSB9LFxuICAgICAgeyB0eXBlOiAnbG9nJywgcGFyYW1ldGVyczogeyBzZXZlcml0eTogJ21lZGl1bScgfSB9LFxuICAgIF0sXG4gIH0sXG5dXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgREUgQU7DgUxJU0lTIEFWQU5aQURPXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEFuYWxpemEgZXZlbnRvcyBkZSBzZWd1cmlkYWQgcGFyYSBkZXRlY3RhciBwYXRyb25lc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZVNlY3VyaXR5UGF0dGVybnMoXG4gIHVzZXJJZD86IHN0cmluZyxcbiAgdGltZVdpbmRvd0hvdXJzOiBudW1iZXIgPSAyNFxuKTogUHJvbWlzZTxTZWN1cml0eUFsZXJ0W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZXSBJbmljaWFuZG8gYW7DoWxpc2lzIGRlIHBhdHJvbmVzIGRlIHNlZ3VyaWRhZCcpXG5cbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vIGRpc3BvbmlibGUnKVxuICAgIH1cblxuICAgIGNvbnN0IHRpbWVUaHJlc2hvbGQgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGltZVdpbmRvd0hvdXJzICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKClcbiAgICBjb25zdCBhbGVydHM6IFNlY3VyaXR5QWxlcnRbXSA9IFtdXG5cbiAgICAvLyBPYnRlbmVyIGV2ZW50b3MgcmVjaWVudGVzXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2V2ZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5ndGUoJ3RpbWVzdGFtcCcsIHRpbWVUaHJlc2hvbGQpXG4gICAgICAub3JkZXIoJ3RpbWVzdGFtcCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgndXNlcl9pZCcsIHVzZXJJZClcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGV2ZW50cywgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igb2J0ZW5pZW5kbyBldmVudG9zOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYWxlcnRzXG4gICAgfVxuXG4gICAgLy8gQW5hbGl6YXIgY2FkYSBwYXRyw7NuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIERFRkFVTFRfU0VDVVJJVFlfUEFUVEVSTlMpIHtcbiAgICAgIGlmICghcGF0dGVybi5lbmFibGVkKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhdHRlcm5BbGVydHMgPSBhd2FpdCBkZXRlY3RQYXR0ZXJuKHBhdHRlcm4sIGV2ZW50cylcbiAgICAgIGFsZXJ0cy5wdXNoKC4uLnBhdHRlcm5BbGVydHMpXG4gICAgfVxuXG4gICAgLy8gR3VhcmRhciBhbGVydGFzIGVuIGJhc2UgZGUgZGF0b3NcbiAgICBpZiAoYWxlcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ3NlY3VyaXR5X2FsZXJ0cycpLmluc2VydChhbGVydHMpXG5cbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGd1YXJkYW5kbyBhbGVydGFzOicsIGluc2VydEVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIEFuw6FsaXNpcyBjb21wbGV0YWRvOiAke2FsZXJ0cy5sZW5ndGh9IGFsZXJ0YXMgZ2VuZXJhZGFzYClcbiAgICByZXR1cm4gYWxlcnRzXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1NFQ1VSSVRZXSBFcnJvciBlbiBhbsOhbGlzaXMgZGUgcGF0cm9uZXM6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuLyoqXG4gKiBEZXRlY3RhIHVuIHBhdHLDs24gZXNwZWPDrWZpY28gZW4gbG9zIGV2ZW50b3NcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0UGF0dGVybihcbiAgcGF0dGVybjogU2VjdXJpdHlQYXR0ZXJuLFxuICBldmVudHM6IFNlY3VyaXR5RXZlbnRbXVxuKTogUHJvbWlzZTxTZWN1cml0eUFsZXJ0W10+IHtcbiAgY29uc3QgYWxlcnRzOiBTZWN1cml0eUFsZXJ0W10gPSBbXVxuICBjb25zdCB0aW1lV2luZG93ID0gcGF0dGVybi50aW1lV2luZG93ICogNjAgKiAxMDAwIC8vIGNvbnZlcnRpciBhIG1zXG5cbiAgLy8gQWdydXBhciBldmVudG9zIHBvciB1c3VhcmlvXG4gIGNvbnN0IGV2ZW50c0J5VXNlciA9IGV2ZW50cy5yZWR1Y2UoXG4gICAgKGFjYywgZXZlbnQpID0+IHtcbiAgICAgIGlmICghYWNjW2V2ZW50LnVzZXJfaWRdKSB7XG4gICAgICAgIGFjY1tldmVudC51c2VyX2lkXSA9IFtdXG4gICAgICB9XG4gICAgICBhY2NbZXZlbnQudXNlcl9pZF0ucHVzaChldmVudClcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LFxuICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIFNlY3VyaXR5RXZlbnRbXT5cbiAgKVxuXG4gIC8vIEFuYWxpemFyIGNhZGEgdXN1YXJpb1xuICBmb3IgKGNvbnN0IFt1c2VySWQsIHVzZXJFdmVudHNdIG9mIE9iamVjdC5lbnRyaWVzKGV2ZW50c0J5VXNlcikpIHtcbiAgICBjb25zdCBtYXRjaGluZ0V2ZW50cyA9IHVzZXJFdmVudHMuZmlsdGVyKGV2ZW50ID0+XG4gICAgICBtYXRjaGVzUGF0dGVybkNvbmRpdGlvbnMoZXZlbnQsIHBhdHRlcm4uY29uZGl0aW9ucylcbiAgICApXG5cbiAgICBpZiAobWF0Y2hpbmdFdmVudHMubGVuZ3RoIDwgcGF0dGVybi50aHJlc2hvbGQpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHZlbnRhbmEgZGUgdGllbXBvXG4gICAgY29uc3Qgc29ydGVkRXZlbnRzID0gbWF0Y2hpbmdFdmVudHMuc29ydChcbiAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKVxuICAgIClcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNvcnRlZEV2ZW50cy5sZW5ndGggLSBwYXR0ZXJuLnRocmVzaG9sZDsgaSsrKSB7XG4gICAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5ldyBEYXRlKHNvcnRlZEV2ZW50c1tpXS50aW1lc3RhbXApLmdldFRpbWUoKVxuICAgICAgY29uc3Qgd2luZG93RW5kID0gd2luZG93U3RhcnQgKyB0aW1lV2luZG93XG5cbiAgICAgIGNvbnN0IGV2ZW50c0luV2luZG93ID0gc29ydGVkRXZlbnRzLmZpbHRlcihldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50VGltZSA9IG5ldyBEYXRlKGV2ZW50LnRpbWVzdGFtcCkuZ2V0VGltZSgpXG4gICAgICAgIHJldHVybiBldmVudFRpbWUgPj0gd2luZG93U3RhcnQgJiYgZXZlbnRUaW1lIDw9IHdpbmRvd0VuZFxuICAgICAgfSlcblxuICAgICAgaWYgKGV2ZW50c0luV2luZG93Lmxlbmd0aCA+PSBwYXR0ZXJuLnRocmVzaG9sZCkge1xuICAgICAgICAvLyBQYXRyw7NuIGRldGVjdGFkb1xuICAgICAgICBjb25zdCBhbGVydDogU2VjdXJpdHlBbGVydCA9IHtcbiAgICAgICAgICBpZDogYCR7cGF0dGVybi5pZH1fJHt1c2VySWR9XyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIHBhdHRlcm5faWQ6IHBhdHRlcm4uaWQsXG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgIHNldmVyaXR5OiBwYXR0ZXJuLnNldmVyaXR5LFxuICAgICAgICAgIHRpdGxlOiBwYXR0ZXJuLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGAke3BhdHRlcm4uZGVzY3JpcHRpb259IC0gJHtldmVudHNJbldpbmRvdy5sZW5ndGh9IGV2ZW50b3MgZGV0ZWN0YWRvc2AsXG4gICAgICAgICAgZXZlbnRfY291bnQ6IGV2ZW50c0luV2luZG93Lmxlbmd0aCxcbiAgICAgICAgICBmaXJzdF9vY2N1cnJlbmNlOiBldmVudHNJbldpbmRvd1swXS50aW1lc3RhbXAsXG4gICAgICAgICAgbGFzdF9vY2N1cnJlbmNlOiBldmVudHNJbldpbmRvd1tldmVudHNJbldpbmRvdy5sZW5ndGggLSAxXS50aW1lc3RhbXAsXG4gICAgICAgICAgc3RhdHVzOiAnb3BlbicsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHBhdHRlcm5fbmFtZTogcGF0dGVybi5uYW1lLFxuICAgICAgICAgICAgZXZlbnRzOiBldmVudHNJbldpbmRvdy5tYXAoZSA9PiBlLmlkKSxcbiAgICAgICAgICAgIHRocmVzaG9sZDogcGF0dGVybi50aHJlc2hvbGQsXG4gICAgICAgICAgICB0aW1lX3dpbmRvd19taW51dGVzOiBwYXR0ZXJuLnRpbWVXaW5kb3csXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuXG4gICAgICAgIGFsZXJ0cy5wdXNoKGFsZXJ0KVxuXG4gICAgICAgIC8vIEVqZWN1dGFyIGFjY2lvbmVzIGRlbCBwYXRyw7NuXG4gICAgICAgIGF3YWl0IGV4ZWN1dGVQYXR0ZXJuQWN0aW9ucyhwYXR0ZXJuLmFjdGlvbnMsIGFsZXJ0LCBldmVudHNJbldpbmRvdylcbiAgICAgICAgYnJlYWsgLy8gU29sbyB1bmEgYWxlcnRhIHBvciBwYXRyw7NuIHBvciB1c3VhcmlvXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFsZXJ0c1xufVxuXG4vKipcbiAqIFZlcmlmaWNhIHNpIHVuIGV2ZW50byBjb2luY2lkZSBjb24gbGFzIGNvbmRpY2lvbmVzIGRlbCBwYXRyw7NuXG4gKi9cbmZ1bmN0aW9uIG1hdGNoZXNQYXR0ZXJuQ29uZGl0aW9ucyhldmVudDogU2VjdXJpdHlFdmVudCwgY29uZGl0aW9uczogUGF0dGVybkNvbmRpdGlvbltdKTogYm9vbGVhbiB7XG4gIHJldHVybiBjb25kaXRpb25zLmV2ZXJ5KGNvbmRpdGlvbiA9PiB7XG4gICAgY29uc3QgZXZlbnRWYWx1ZSA9IChldmVudCBhcyBhbnkpW2NvbmRpdGlvbi5maWVsZF1cblxuICAgIHN3aXRjaCAoY29uZGl0aW9uLm9wZXJhdG9yKSB7XG4gICAgICBjYXNlICdlcXVhbHMnOlxuICAgICAgICByZXR1cm4gZXZlbnRWYWx1ZSA9PT0gY29uZGl0aW9uLnZhbHVlXG4gICAgICBjYXNlICdjb250YWlucyc6XG4gICAgICAgIHJldHVybiB0eXBlb2YgZXZlbnRWYWx1ZSA9PT0gJ3N0cmluZycgJiYgZXZlbnRWYWx1ZS5pbmNsdWRlcyhjb25kaXRpb24udmFsdWUpXG4gICAgICBjYXNlICdncmVhdGVyX3RoYW4nOlxuICAgICAgICByZXR1cm4gTnVtYmVyKGV2ZW50VmFsdWUpID4gTnVtYmVyKGNvbmRpdGlvbi52YWx1ZSlcbiAgICAgIGNhc2UgJ2xlc3NfdGhhbic6XG4gICAgICAgIHJldHVybiBOdW1iZXIoZXZlbnRWYWx1ZSkgPCBOdW1iZXIoY29uZGl0aW9uLnZhbHVlKVxuICAgICAgY2FzZSAnaW4nOlxuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShjb25kaXRpb24udmFsdWUpICYmIGNvbmRpdGlvbi52YWx1ZS5pbmNsdWRlcyhldmVudFZhbHVlKVxuICAgICAgY2FzZSAnbm90X2luJzpcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY29uZGl0aW9uLnZhbHVlKSAmJiAhY29uZGl0aW9uLnZhbHVlLmluY2x1ZGVzKGV2ZW50VmFsdWUpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0pXG59XG5cbi8qKlxuICogRWplY3V0YSBsYXMgYWNjaW9uZXMgZGVmaW5pZGFzIHBhcmEgdW4gcGF0csOzblxuICovXG5hc3luYyBmdW5jdGlvbiBleGVjdXRlUGF0dGVybkFjdGlvbnMoXG4gIGFjdGlvbnM6IFNlY3VyaXR5QWN0aW9uW10sXG4gIGFsZXJ0OiBTZWN1cml0eUFsZXJ0LFxuICBldmVudHM6IFNlY3VyaXR5RXZlbnRbXVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdsb2cnOlxuICAgICAgICAgIGF3YWl0IGxvZ1NlY3VyaXR5RXZlbnQoe1xuICAgICAgICAgICAgdXNlcl9pZDogYWxlcnQudXNlcl9pZCxcbiAgICAgICAgICAgIGV2ZW50X3R5cGU6ICdTVVNQSUNJT1VTX0FDVElWSVRZJyxcbiAgICAgICAgICAgIGV2ZW50X2NhdGVnb3J5OiAnc3VzcGljaW91c19iZWhhdmlvcicsXG4gICAgICAgICAgICBzZXZlcml0eTogYWN0aW9uLnBhcmFtZXRlcnM/LnNldmVyaXR5IHx8IGFsZXJ0LnNldmVyaXR5LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBQYXRyw7NuIGRldGVjdGFkbzogJHthbGVydC50aXRsZX1gLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgcGF0dGVybl9pZDogYWxlcnQucGF0dGVybl9pZCxcbiAgICAgICAgICAgICAgYWxlcnRfaWQ6IGFsZXJ0LmlkLFxuICAgICAgICAgICAgICBldmVudF9jb3VudDogYWxlcnQuZXZlbnRfY291bnQsXG4gICAgICAgICAgICAgIC4uLmFjdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnYWxlcnQnOlxuICAgICAgICAgIGNvbnNvbGUud2FybihgW1NFQ1VSSVRZIEFMRVJUXSAke2FsZXJ0LnRpdGxlfSAtIFVzdWFyaW86ICR7YWxlcnQudXNlcl9pZH1gKVxuICAgICAgICAgIGlmIChhY3Rpb24ucGFyYW1ldGVycz8ubm90aWZ5X2FkbWlucykge1xuICAgICAgICAgICAgLy8gQXF1w60gc2UgcG9kcsOtYSBpbnRlZ3JhciBjb24gdW4gc2lzdGVtYSBkZSBub3RpZmljYWNpb25lc1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWV0gTm90aWZpY2FuZG8gYSBhZG1pbmlzdHJhZG9yZXMuLi4nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2Jsb2NrX3VzZXInOlxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIEJsb3F1ZWFuZG8gdXN1YXJpbzogJHthbGVydC51c2VyX2lkfWApXG4gICAgICAgICAgLy8gSW1wbGVtZW50YXIgbMOzZ2ljYSBkZSBibG9xdWVvXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdpbnZhbGlkYXRlX3Nlc3Npb25zJzpcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1NFQ1VSSVRZXSBJbnZhbGlkYW5kbyBzZXNpb25lcyBkZWwgdXN1YXJpbzogJHthbGVydC51c2VyX2lkfWApXG4gICAgICAgICAgLy8gSW50ZWdyYXIgY29uIHNpc3RlbWEgZGUgZ2VzdGnDs24gZGUgc2VzaW9uZXNcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS53YXJuKGBbU0VDVVJJVFldIEFjY2nDs24gbm8gcmVjb25vY2lkYTogJHthY3Rpb24udHlwZX1gKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbU0VDVVJJVFldIEVycm9yIGVqZWN1dGFuZG8gYWNjacOzbiAke2FjdGlvbi50eXBlfTpgLCBlcnJvcilcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJT05FUyBERSBNw4lUUklDQVMgWSBSRVBPUlRFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBPYnRpZW5lIG3DqXRyaWNhcyBkZSBzZWd1cmlkYWQgZW4gdGllbXBvIHJlYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlY3VyaXR5TWV0cmljcygpOiBQcm9taXNlPFNlY3VyaXR5TWV0cmljcz4ge1xuICB0cnkge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm8gZGlzcG9uaWJsZScpXG4gICAgfVxuXG4gICAgY29uc3QgY2FjaGUgPSBDYWNoZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ3NlY3VyaXR5X21ldHJpY3MnXG5cbiAgICAvLyBJbnRlbnRhciBvYnRlbmVyIGRlc2RlIGNhY2hlXG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgY2FjaGUuZ2V0KENBQ0hFX0NPTkZJR1MuVVNFUl9TRVNTSU9OLCBjYWNoZUtleSlcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkIGFzIFNlY3VyaXR5TWV0cmljc1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBsYXN0MjRoID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKClcblxuICAgIC8vIE9idGVuZXIgZXZlbnRvcyBkZSBsYXMgw7psdGltYXMgMjQgaG9yYXNcbiAgICBjb25zdCB7IGRhdGE6IGV2ZW50cywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdzZWN1cml0eV9ldmVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZ3RlKCd0aW1lc3RhbXAnLCBsYXN0MjRoKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIG9idGVuaWVuZG8gZXZlbnRvczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuXG4gICAgLy8gT2J0ZW5lciBhbGVydGFzIGFjdGl2YXNcbiAgICBjb25zdCB7IGRhdGE6IGFsZXJ0cywgZXJyb3I6IGFsZXJ0c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnc2VjdXJpdHlfYWxlcnRzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnc3RhdHVzJywgJ29wZW4nKVxuXG4gICAgaWYgKGFsZXJ0c0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIG9idGVuaWVuZG8gYWxlcnRhczonLCBhbGVydHNFcnJvcilcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhciBtw6l0cmljYXNcbiAgICBjb25zdCB0b3RhbEV2ZW50cyA9IGV2ZW50cz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBjcml0aWNhbEV2ZW50cyA9IGV2ZW50cz8uZmlsdGVyKGUgPT4gZS5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykubGVuZ3RoIHx8IDBcbiAgICBjb25zdCB1bmlxdWVVc2VycyA9IG5ldyBTZXQoZXZlbnRzPy5tYXAoZSA9PiBlLnVzZXJfaWQpKS5zaXplXG4gICAgY29uc3QgYXV0aEZhaWx1cmVzID0gZXZlbnRzPy5maWx0ZXIoZSA9PiBlLmV2ZW50X3R5cGUgPT09ICdBVVRIX0ZBSUxVUkUnKS5sZW5ndGggfHwgMFxuICAgIGNvbnN0IHN1c3BpY2lvdXNBY3Rpdml0aWVzID1cbiAgICAgIGV2ZW50cz8uZmlsdGVyKGUgPT4gZS5ldmVudF90eXBlID09PSAnU1VTUElDSU9VU19BQ1RJVklUWScpLmxlbmd0aCB8fCAwXG4gICAgY29uc3QgYWN0aXZlQWxlcnRzID0gYWxlcnRzPy5sZW5ndGggfHwgMFxuXG4gICAgLy8gQ2FsY3VsYXIgc2NvcmUgZGUgc2VndXJpZGFkICgwLTEwMClcbiAgICBsZXQgc2VjdXJpdHlTY29yZSA9IDEwMFxuICAgIGlmIChjcml0aWNhbEV2ZW50cyA+IDApIHtcbiAgICAgIHNlY3VyaXR5U2NvcmUgLT0gY3JpdGljYWxFdmVudHMgKiAxMFxuICAgIH1cbiAgICBpZiAoYXV0aEZhaWx1cmVzID4gMTApIHtcbiAgICAgIHNlY3VyaXR5U2NvcmUgLT0gKGF1dGhGYWlsdXJlcyAtIDEwKSAqIDJcbiAgICB9XG4gICAgaWYgKHN1c3BpY2lvdXNBY3Rpdml0aWVzID4gNSkge1xuICAgICAgc2VjdXJpdHlTY29yZSAtPSAoc3VzcGljaW91c0FjdGl2aXRpZXMgLSA1KSAqIDVcbiAgICB9XG4gICAgaWYgKGFjdGl2ZUFsZXJ0cyA+IDApIHtcbiAgICAgIHNlY3VyaXR5U2NvcmUgLT0gYWN0aXZlQWxlcnRzICogM1xuICAgIH1cbiAgICBzZWN1cml0eVNjb3JlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBzZWN1cml0eVNjb3JlKSlcblxuICAgIGNvbnN0IG1ldHJpY3M6IFNlY3VyaXR5TWV0cmljcyA9IHtcbiAgICAgIHRvdGFsX2V2ZW50c18yNGg6IHRvdGFsRXZlbnRzLFxuICAgICAgY3JpdGljYWxfZXZlbnRzXzI0aDogY3JpdGljYWxFdmVudHMsXG4gICAgICB1bmlxdWVfdXNlcnNfMjRoOiB1bmlxdWVVc2VycyxcbiAgICAgIGF1dGhfZmFpbHVyZXNfMjRoOiBhdXRoRmFpbHVyZXMsXG4gICAgICBzdXNwaWNpb3VzX2FjdGl2aXRpZXNfMjRoOiBzdXNwaWNpb3VzQWN0aXZpdGllcyxcbiAgICAgIGJsb2NrZWRfdXNlcnM6IDAsIC8vIFRPRE86IGltcGxlbWVudGFyIGN1YW5kbyBzZSB0ZW5nYSBzaXN0ZW1hIGRlIGJsb3F1ZW9cbiAgICAgIGFjdGl2ZV9hbGVydHM6IGFjdGl2ZUFsZXJ0cyxcbiAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAwLCAvLyBUT0RPOiBjYWxjdWxhciB0aWVtcG8gcHJvbWVkaW8gZGUgcmVzcHVlc3RhXG4gICAgICBzZWN1cml0eV9zY29yZTogc2VjdXJpdHlTY29yZSxcbiAgICB9XG5cbiAgICAvLyBHdWFyZGFyIGVuIGNhY2hlIHBvciA1IG1pbnV0b3NcbiAgICBhd2FpdCBjYWNoZS5zZXQoQ0FDSEVfQ09ORklHUy5VU0VSX1NFU1NJT04sIGNhY2hlS2V5LCBtZXRyaWNzKVxuXG4gICAgcmV0dXJuIG1ldHJpY3NcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIG9idGVuaWVuZG8gbcOpdHJpY2FzOicsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbF9ldmVudHNfMjRoOiAwLFxuICAgICAgY3JpdGljYWxfZXZlbnRzXzI0aDogMCxcbiAgICAgIHVuaXF1ZV91c2Vyc18yNGg6IDAsXG4gICAgICBhdXRoX2ZhaWx1cmVzXzI0aDogMCxcbiAgICAgIHN1c3BpY2lvdXNfYWN0aXZpdGllc18yNGg6IDAsXG4gICAgICBibG9ja2VkX3VzZXJzOiAwLFxuICAgICAgYWN0aXZlX2FsZXJ0czogMCxcbiAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAwLFxuICAgICAgc2VjdXJpdHlfc2NvcmU6IDAsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2VuZXJhIHVuIHJlcG9ydGUgZGUgc2VndXJpZGFkIHBhcmEgdW4gcGVyw61vZG8gZXNwZWPDrWZpY29cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU2VjdXJpdHlSZXBvcnQoXG4gIHN0YXJ0RGF0ZTogRGF0ZSxcbiAgZW5kRGF0ZTogRGF0ZVxuKTogUHJvbWlzZTxTZWN1cml0eVJlcG9ydD4ge1xuICB0cnkge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm8gZGlzcG9uaWJsZScpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBgW1NFQ1VSSVRZXSBHZW5lcmFuZG8gcmVwb3J0ZSBkZSBzZWd1cmlkYWQ6ICR7c3RhcnREYXRlLnRvSVNPU3RyaW5nKCl9IC0gJHtlbmREYXRlLnRvSVNPU3RyaW5nKCl9YFxuICAgIClcblxuICAgIC8vIE9idGVuZXIgZXZlbnRvcyBkZWwgcGVyw61vZG9cbiAgICBjb25zdCB7IGRhdGE6IGV2ZW50cywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdzZWN1cml0eV9ldmVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZ3RlKCd0aW1lc3RhbXAnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgIC5sdGUoJ3RpbWVzdGFtcCcsIGVuZERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgIC5vcmRlcigndGltZXN0YW1wJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igb2J0ZW5pZW5kbyBldmVudG9zOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbEV2ZW50cyA9IGV2ZW50cz8ubGVuZ3RoIHx8IDBcblxuICAgIC8vIEFncnVwYXIgcG9yIHNldmVyaWRhZFxuICAgIGNvbnN0IGV2ZW50c0J5U2V2ZXJpdHk6IFJlY29yZDxTZWN1cml0eVNldmVyaXR5LCBudW1iZXI+ID0ge1xuICAgICAgbG93OiAwLFxuICAgICAgbWVkaXVtOiAwLFxuICAgICAgaGlnaDogMCxcbiAgICAgIGNyaXRpY2FsOiAwLFxuICAgIH1cblxuICAgIC8vIEFncnVwYXIgcG9yIGNhdGVnb3LDrWFcbiAgICBjb25zdCBldmVudHNCeUNhdGVnb3J5OiBSZWNvcmQ8U2VjdXJpdHlFdmVudENhdGVnb3J5LCBudW1iZXI+ID0ge1xuICAgICAgYXV0aGVudGljYXRpb246IDAsXG4gICAgICBhdXRob3JpemF0aW9uOiAwLFxuICAgICAgZGF0YV9hY2Nlc3M6IDAsXG4gICAgICBhZG1pbl9vcGVyYXRpb25zOiAwLFxuICAgICAgc3VzcGljaW91c19iZWhhdmlvcjogMCxcbiAgICB9XG5cbiAgICAvLyBDb250YWRvcmVzIGRlIHVzdWFyaW9zIGUgSVBzXG4gICAgY29uc3QgdXNlckNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG4gICAgY29uc3QgaXBDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuXG4gICAgZXZlbnRzPy5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgIC8vIENvbnRhciBwb3Igc2V2ZXJpZGFkXG4gICAgICBldmVudHNCeVNldmVyaXR5W2V2ZW50LnNldmVyaXR5XSsrXG5cbiAgICAgIC8vIENvbnRhciBwb3IgY2F0ZWdvcsOtYVxuICAgICAgZXZlbnRzQnlDYXRlZ29yeVtldmVudC5ldmVudF9jYXRlZ29yeV0rK1xuXG4gICAgICAvLyBDb250YXIgcG9yIHVzdWFyaW9cbiAgICAgIHVzZXJDb3VudHNbZXZlbnQudXNlcl9pZF0gPSAodXNlckNvdW50c1tldmVudC51c2VyX2lkXSB8fCAwKSArIDFcblxuICAgICAgLy8gQ29udGFyIHBvciBJUFxuICAgICAgaWYgKGV2ZW50LmlwX2FkZHJlc3MpIHtcbiAgICAgICAgaXBDb3VudHNbZXZlbnQuaXBfYWRkcmVzc10gPSAoaXBDb3VudHNbZXZlbnQuaXBfYWRkcmVzc10gfHwgMCkgKyAxXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFRvcCB1c3VhcmlvcyAobcOhcyBldmVudG9zKVxuICAgIGNvbnN0IHRvcFVzZXJzID0gT2JqZWN0LmVudHJpZXModXNlckNvdW50cylcbiAgICAgIC5zb3J0KChbLCBhXSwgWywgYl0pID0+IGIgLSBhKVxuICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgLm1hcCgoW3VzZXJfaWQsIGV2ZW50X2NvdW50XSkgPT4gKHsgdXNlcl9pZCwgZXZlbnRfY291bnQgfSkpXG5cbiAgICAvLyBUb3AgSVBzIChtw6FzIGV2ZW50b3MpXG4gICAgY29uc3QgdG9wSXBzID0gT2JqZWN0LmVudHJpZXMoaXBDb3VudHMpXG4gICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcbiAgICAgIC5zbGljZSgwLCAxMClcbiAgICAgIC5tYXAoKFtpcF9hZGRyZXNzLCBldmVudF9jb3VudF0pID0+ICh7IGlwX2FkZHJlc3MsIGV2ZW50X2NvdW50IH0pKVxuXG4gICAgLy8gT2J0ZW5lciBwYXRyb25lcyBkZXRlY3RhZG9zXG4gICAgY29uc3QgeyBkYXRhOiBhbGVydHMsIGVycm9yOiBhbGVydHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2FsZXJ0cycpXG4gICAgICAuc2VsZWN0KCdwYXR0ZXJuX2lkJylcbiAgICAgIC5ndGUoJ2ZpcnN0X29jY3VycmVuY2UnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSlcbiAgICAgIC5sdGUoJ2xhc3Rfb2NjdXJyZW5jZScsIGVuZERhdGUudG9JU09TdHJpbmcoKSlcblxuICAgIGNvbnN0IHBhdHRlcm5zRGV0ZWN0ZWQ6IEFycmF5PHsgcGF0dGVybl9pZDogc3RyaW5nOyBvY2N1cnJlbmNlczogbnVtYmVyIH0+ID0gW11cbiAgICBpZiAoIWFsZXJ0c0Vycm9yICYmIGFsZXJ0cykge1xuICAgICAgY29uc3QgcGF0dGVybkNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG4gICAgICBhbGVydHMuZm9yRWFjaChhbGVydCA9PiB7XG4gICAgICAgIHBhdHRlcm5Db3VudHNbYWxlcnQucGF0dGVybl9pZF0gPSAocGF0dGVybkNvdW50c1thbGVydC5wYXR0ZXJuX2lkXSB8fCAwKSArIDFcbiAgICAgIH0pXG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKHBhdHRlcm5Db3VudHMpLmZvckVhY2goKFtwYXR0ZXJuX2lkLCBvY2N1cnJlbmNlc10pID0+IHtcbiAgICAgICAgcGF0dGVybnNEZXRlY3RlZC5wdXNoKHsgcGF0dGVybl9pZCwgb2NjdXJyZW5jZXMgfSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gR2VuZXJhciByZWNvbWVuZGFjaW9uZXNcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBnZW5lcmF0ZVNlY3VyaXR5UmVjb21tZW5kYXRpb25zKFxuICAgICAgZXZlbnRzQnlTZXZlcml0eSxcbiAgICAgIGV2ZW50c0J5Q2F0ZWdvcnksXG4gICAgICBwYXR0ZXJuc0RldGVjdGVkXG4gICAgKVxuXG4gICAgY29uc3QgcmVwb3J0OiBTZWN1cml0eVJlcG9ydCA9IHtcbiAgICAgIGlkOiBgcmVwb3J0XyR7RGF0ZS5ub3coKX1gLFxuICAgICAgcGVyaW9kX3N0YXJ0OiBzdGFydERhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgIHBlcmlvZF9lbmQ6IGVuZERhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgIHRvdGFsX2V2ZW50czogdG90YWxFdmVudHMsXG4gICAgICBldmVudHNfYnlfc2V2ZXJpdHk6IGV2ZW50c0J5U2V2ZXJpdHksXG4gICAgICBldmVudHNfYnlfY2F0ZWdvcnk6IGV2ZW50c0J5Q2F0ZWdvcnksXG4gICAgICB0b3BfdXNlcnM6IHRvcFVzZXJzLFxuICAgICAgdG9wX2lwczogdG9wSXBzLFxuICAgICAgcGF0dGVybnNfZGV0ZWN0ZWQ6IHBhdHRlcm5zRGV0ZWN0ZWQsXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICBnZW5lcmF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9XG5cbiAgICAvLyBHdWFyZGFyIHJlcG9ydGUgZW4gYmFzZSBkZSBkYXRvc1xuICAgIGNvbnN0IHsgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ3NlY3VyaXR5X3JlcG9ydHMnKS5pbnNlcnQocmVwb3J0KVxuXG4gICAgaWYgKGluc2VydEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGd1YXJkYW5kbyByZXBvcnRlOicsIGluc2VydEVycm9yKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIFJlcG9ydGUgZ2VuZXJhZG86ICR7dG90YWxFdmVudHN9IGV2ZW50b3MgYW5hbGl6YWRvc2ApXG4gICAgcmV0dXJuIHJlcG9ydFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tTRUNVUklUWV0gRXJyb3IgZ2VuZXJhbmRvIHJlcG9ydGU6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyYSByZWNvbWVuZGFjaW9uZXMgZGUgc2VndXJpZGFkIGJhc2FkYXMgZW4gbG9zIGRhdG9zIGRlbCByZXBvcnRlXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlU2VjdXJpdHlSZWNvbW1lbmRhdGlvbnMoXG4gIGV2ZW50c0J5U2V2ZXJpdHk6IFJlY29yZDxTZWN1cml0eVNldmVyaXR5LCBudW1iZXI+LFxuICBldmVudHNCeUNhdGVnb3J5OiBSZWNvcmQ8U2VjdXJpdHlFdmVudENhdGVnb3J5LCBudW1iZXI+LFxuICBwYXR0ZXJuc0RldGVjdGVkOiBBcnJheTx7IHBhdHRlcm5faWQ6IHN0cmluZzsgb2NjdXJyZW5jZXM6IG51bWJlciB9PlxuKTogc3RyaW5nW10ge1xuICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW11cblxuICAvLyBSZWNvbWVuZGFjaW9uZXMgYmFzYWRhcyBlbiBzZXZlcmlkYWRcbiAgaWYgKGV2ZW50c0J5U2V2ZXJpdHkuY3JpdGljYWwgPiAwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICBgU2UgZGV0ZWN0YXJvbiAke2V2ZW50c0J5U2V2ZXJpdHkuY3JpdGljYWx9IGV2ZW50b3MgY3LDrXRpY29zLiBSZXZpc2FyIGlubWVkaWF0YW1lbnRlLmBcbiAgICApXG4gIH1cblxuICBpZiAoZXZlbnRzQnlTZXZlcml0eS5oaWdoID4gMTApIHtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgIGBBbHRvIG7Dum1lcm8gZGUgZXZlbnRvcyBkZSBzZXZlcmlkYWQgYWx0YSAoJHtldmVudHNCeVNldmVyaXR5LmhpZ2h9KS4gQ29uc2lkZXJhciByZWZvcnphciBtZWRpZGFzIGRlIHNlZ3VyaWRhZC5gXG4gICAgKVxuICB9XG5cbiAgLy8gUmVjb21lbmRhY2lvbmVzIGJhc2FkYXMgZW4gY2F0ZWdvcsOtYXNcbiAgaWYgKGV2ZW50c0J5Q2F0ZWdvcnkuYXV0aGVudGljYXRpb24gPiA1MCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgYE11Y2hvcyBldmVudG9zIGRlIGF1dGVudGljYWNpw7NuICgke2V2ZW50c0J5Q2F0ZWdvcnkuYXV0aGVudGljYXRpb259KS4gQ29uc2lkZXJhciBpbXBsZW1lbnRhciBNRkEuYFxuICAgIClcbiAgfVxuXG4gIGlmIChldmVudHNCeUNhdGVnb3J5LmF1dGhvcml6YXRpb24gPiAyMCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgYEV2ZW50b3MgZGUgYXV0b3JpemFjacOzbiBlbGV2YWRvcyAoJHtldmVudHNCeUNhdGVnb3J5LmF1dGhvcml6YXRpb259KS4gUmV2aXNhciBwZXJtaXNvcyBkZSB1c3Vhcmlvcy5gXG4gICAgKVxuICB9XG5cbiAgaWYgKGV2ZW50c0J5Q2F0ZWdvcnkuc3VzcGljaW91c19iZWhhdmlvciA+IDUpIHtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgIGBBY3RpdmlkYWQgc29zcGVjaG9zYSBkZXRlY3RhZGEgKCR7ZXZlbnRzQnlDYXRlZ29yeS5zdXNwaWNpb3VzX2JlaGF2aW9yfSBldmVudG9zKS4gTW9uaXRvcmVhciBkZSBjZXJjYS5gXG4gICAgKVxuICB9XG5cbiAgLy8gUmVjb21lbmRhY2lvbmVzIGJhc2FkYXMgZW4gcGF0cm9uZXNcbiAgY29uc3QgaGlnaEZyZXF1ZW5jeVBhdHRlcm5zID0gcGF0dGVybnNEZXRlY3RlZC5maWx0ZXIocCA9PiBwLm9jY3VycmVuY2VzID4gMylcbiAgaWYgKGhpZ2hGcmVxdWVuY3lQYXR0ZXJucy5sZW5ndGggPiAwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICBgUGF0cm9uZXMgZGUgc2VndXJpZGFkIHJlY3VycmVudGVzIGRldGVjdGFkb3MuIENvbnNpZGVyYXIgbWVkaWRhcyBwcmV2ZW50aXZhcyBhZGljaW9uYWxlcy5gXG4gICAgKVxuICB9XG5cbiAgLy8gUmVjb21lbmRhY2lvbmVzIGdlbmVyYWxlc1xuICBpZiAocmVjb21tZW5kYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgJ05vIHNlIGRldGVjdGFyb24gcHJvYmxlbWFzIGNyw610aWNvcyBkZSBzZWd1cmlkYWQuIE1hbnRlbmVyIG1vbml0b3JlbyByZWd1bGFyLidcbiAgICApXG4gIH1cblxuICByZXR1cm4gcmVjb21tZW5kYXRpb25zXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgREUgR0VTVEnDk04gREUgQUxFUlRBU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBPYnRpZW5lIGFsZXJ0YXMgZGUgc2VndXJpZGFkIGFjdGl2YXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVNlY3VyaXR5QWxlcnRzKFxuICB1c2VySWQ/OiBzdHJpbmcsXG4gIHNldmVyaXR5PzogU2VjdXJpdHlTZXZlcml0eVxuKTogUHJvbWlzZTxTZWN1cml0eUFsZXJ0W10+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY2xpZW50IG5vIGRpc3BvbmlibGUnKVxuICAgIH1cblxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdzZWN1cml0eV9hbGVydHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3N0YXR1cycsICdvcGVuJylcbiAgICAgIC5vcmRlcignbGFzdF9vY2N1cnJlbmNlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIH1cblxuICAgIGlmIChzZXZlcml0eSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc2V2ZXJpdHknLCBzZXZlcml0eSlcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGFsZXJ0cywgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igb2J0ZW5pZW5kbyBhbGVydGFzOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICByZXR1cm4gYWxlcnRzIHx8IFtdXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1NFQ1VSSVRZXSBFcnJvciBvYnRlbmllbmRvIGFsZXJ0YXMgYWN0aXZhczonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4vKipcbiAqIEFjdHVhbGl6YSBlbCBlc3RhZG8gZGUgdW5hIGFsZXJ0YVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU2VjdXJpdHlBbGVydChcbiAgYWxlcnRJZDogc3RyaW5nLFxuICB1cGRhdGVzOiBQYXJ0aWFsPFBpY2s8U2VjdXJpdHlBbGVydCwgJ3N0YXR1cycgfCAnYXNzaWduZWRfdG8nIHwgJ3Jlc29sdXRpb25fbm90ZXMnPj5cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm8gZGlzcG9uaWJsZScpXG4gICAgfVxuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2FsZXJ0cycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgLi4udXBkYXRlcyxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBhbGVydElkKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFjdHVhbGl6YW5kbyBhbGVydGE6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIEFsZXJ0YSAke2FsZXJ0SWR9IGFjdHVhbGl6YWRhOiAke0pTT04uc3RyaW5naWZ5KHVwZGF0ZXMpfWApXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGFjdHVhbGl6YW5kbyBhbGVydGE6JywgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLyoqXG4gKiBSZXN1ZWx2ZSB1bmEgYWxlcnRhIGRlIHNlZ3VyaWRhZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVNlY3VyaXR5QWxlcnQoXG4gIGFsZXJ0SWQ6IHN0cmluZyxcbiAgcmVzb2x1dGlvbk5vdGVzOiBzdHJpbmcsXG4gIHJlc29sdmVkQnk6IHN0cmluZ1xuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBhd2FpdCB1cGRhdGVTZWN1cml0eUFsZXJ0KGFsZXJ0SWQsIHtcbiAgICBzdGF0dXM6ICdyZXNvbHZlZCcsXG4gICAgYXNzaWduZWRfdG86IHJlc29sdmVkQnksXG4gICAgcmVzb2x1dGlvbl9ub3RlczogcmVzb2x1dGlvbk5vdGVzLFxuICB9KVxufVxuXG4vKipcbiAqIE1hcmNhIHVuYSBhbGVydGEgY29tbyBmYWxzbyBwb3NpdGl2b1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya0FsZXJ0QXNGYWxzZVBvc2l0aXZlKFxuICBhbGVydElkOiBzdHJpbmcsXG4gIG5vdGVzOiBzdHJpbmcsXG4gIG1hcmtlZEJ5OiBzdHJpbmdcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gYXdhaXQgdXBkYXRlU2VjdXJpdHlBbGVydChhbGVydElkLCB7XG4gICAgc3RhdHVzOiAnZmFsc2VfcG9zaXRpdmUnLFxuICAgIGFzc2lnbmVkX3RvOiBtYXJrZWRCeSxcbiAgICByZXNvbHV0aW9uX25vdGVzOiBub3RlcyxcbiAgfSlcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJT05FUyBERSBNT05JVE9SRU8gRU4gVElFTVBPIFJFQUxcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogSW5pY2lhIGVsIG1vbml0b3JlbyBhdXRvbcOhdGljbyBkZSBzZWd1cmlkYWRcbiAqIPCfmqsgVEVNUE9SQUxNRU5URSBERVNIQUJJTElUQURPIFBBUkEgRVZJVEFSIFJFQ1VSU0nDk05cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0U2VjdXJpdHlNb25pdG9yaW5nKGludGVydmFsTWludXRlczogbnVtYmVyID0gNSk6IE5vZGVKUy5UaW1lb3V0IHtcbiAgY29uc29sZS5sb2coYFtTRUNVUklUWV0g8J+aqyBNT05JVE9SRU8gQVVUT03DgVRJQ08gVEVNUE9SQUxNRU5URSBERVNIQUJJTElUQURPYClcbiAgY29uc29sZS5sb2coYFtTRUNVUklUWV0g8J+TiyBSYXrDs246IEV2aXRhciBsbGFtYWRhcyByZWN1cnNpdmFzIGEgQVBJcyBkZSBhdXRoYClcblxuICAvLyBSRVRPUk5BUiBVTiBUSU1FT1VUIERVTU1ZIFBBUkEgTk8gUk9NUEVSIEVMIEPDk0RJR08gUVVFIExPIExMQU1BXG4gIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZXSBUaW1lb3V0IGR1bW15IGNvbXBsZXRhZG8nKVxuICB9LCAxMDAwKSBhcyBOb2RlSlMuVGltZW91dFxuXG4gIC8vIEPDk0RJR08gQ09NRU5UQURPIFRFTVBPUkFMTUVOVEVcbiAgLy8gcmV0dXJuIHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWV0gRWplY3V0YW5kbyBhbsOhbGlzaXMgYXV0b23DoXRpY28uLi4nKTtcblxuICAvLyAgICAgLy8gQW5hbGl6YXIgcGF0cm9uZXMgZGUgc2VndXJpZGFkXG4gIC8vICAgICBjb25zdCBhbGVydHMgPSBhd2FpdCBhbmFseXplU2VjdXJpdHlQYXR0ZXJucygpO1xuXG4gIC8vICAgICBpZiAoYWxlcnRzLmxlbmd0aCA+IDApIHtcbiAgLy8gICAgICAgY29uc29sZS5sb2coYFtTRUNVUklUWV0gJHthbGVydHMubGVuZ3RofSBudWV2YXMgYWxlcnRhcyBnZW5lcmFkYXNgKTtcblxuICAvLyAgICAgICAvLyBQcm9jZXNhciBhbGVydGFzIGNyw610aWNhcyBpbm1lZGlhdGFtZW50ZVxuICAvLyAgICAgICBjb25zdCBjcml0aWNhbEFsZXJ0cyA9IGFsZXJ0cy5maWx0ZXIoYSA9PiBhLnNldmVyaXR5ID09PSAnY3JpdGljYWwnKTtcbiAgLy8gICAgICAgaWYgKGNyaXRpY2FsQWxlcnRzLmxlbmd0aCA+IDApIHtcbiAgLy8gICAgICAgICBjb25zb2xlLndhcm4oYFtTRUNVUklUWV0gwqEke2NyaXRpY2FsQWxlcnRzLmxlbmd0aH0gYWxlcnRhcyBjcsOtdGljYXMgZGV0ZWN0YWRhcyFgKTtcbiAgLy8gICAgICAgICAvLyBBcXXDrSBzZSBwb2Ryw61hbiBlbnZpYXIgbm90aWZpY2FjaW9uZXMgaW5tZWRpYXRhc1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIC8vIEFjdHVhbGl6YXIgbcOpdHJpY2FzXG4gIC8vICAgICBhd2FpdCBnZXRTZWN1cml0eU1ldHJpY3MoKTtcblxuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGVuIG1vbml0b3JlbyBhdXRvbcOhdGljbzonLCBlcnJvcik7XG4gIC8vICAgfVxuICAvLyB9LCBpbnRlcnZhbE1pbnV0ZXMgKiA2MCAqIDEwMDApO1xufVxuXG4vKipcbiAqIERldGllbmUgZWwgbW9uaXRvcmVvIGF1dG9tw6F0aWNvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9wU2VjdXJpdHlNb25pdG9yaW5nKGludGVydmFsSWQ6IE5vZGVKUy5UaW1lb3V0KTogdm9pZCB7XG4gIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZClcbiAgY29uc29sZS5sb2coJ1tTRUNVUklUWV0gTW9uaXRvcmVvIGF1dG9tw6F0aWNvIGRldGVuaWRvJylcbn1cblxuLyoqXG4gKiBFamVjdXRhIHVuYSB2ZXJpZmljYWNpw7NuIGNvbXBsZXRhIGRlIHNlZ3VyaWRhZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuU2VjdXJpdHlIZWFsdGhDaGVjaygpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnd2FybmluZycgfCAnY3JpdGljYWwnXG4gIGlzc3Vlczogc3RyaW5nW11cbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXVxuICBtZXRyaWNzOiBTZWN1cml0eU1ldHJpY3Ncbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZXSBFamVjdXRhbmRvIHZlcmlmaWNhY2nDs24gY29tcGxldGEgZGUgc2VndXJpZGFkLi4uJylcblxuICAgIC8vIE9idGVuZXIgbcOpdHJpY2FzIGFjdHVhbGVzXG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGdldFNlY3VyaXR5TWV0cmljcygpXG5cbiAgICAvLyBPYnRlbmVyIGFsZXJ0YXMgYWN0aXZhc1xuICAgIGNvbnN0IGFjdGl2ZUFsZXJ0cyA9IGF3YWl0IGdldEFjdGl2ZVNlY3VyaXR5QWxlcnRzKClcblxuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBzdGF0dXM6ICdoZWFsdGh5JyB8ICd3YXJuaW5nJyB8ICdjcml0aWNhbCcgPSAnaGVhbHRoeSdcblxuICAgIC8vIEV2YWx1YXIgZXN0YWRvIGRlIHNlZ3VyaWRhZFxuICAgIGlmIChtZXRyaWNzLmNyaXRpY2FsX2V2ZW50c18yNGggPiAwKSB7XG4gICAgICBpc3N1ZXMucHVzaChgJHttZXRyaWNzLmNyaXRpY2FsX2V2ZW50c18yNGh9IGV2ZW50b3MgY3LDrXRpY29zIGVuIGxhcyDDumx0aW1hcyAyNCBob3Jhc2ApXG4gICAgICBzdGF0dXMgPSAnY3JpdGljYWwnXG4gICAgfVxuXG4gICAgaWYgKG1ldHJpY3MuYXV0aF9mYWlsdXJlc18yNGggPiAyMCkge1xuICAgICAgaXNzdWVzLnB1c2goYEFsdG8gbsO6bWVybyBkZSBmYWxsb3MgZGUgYXV0ZW50aWNhY2nDs246ICR7bWV0cmljcy5hdXRoX2ZhaWx1cmVzXzI0aH1gKVxuICAgICAgaWYgKHN0YXR1cyAhPT0gJ2NyaXRpY2FsJykge1xuICAgICAgICBzdGF0dXMgPSAnd2FybmluZydcbiAgICAgIH1cbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDb25zaWRlcmFyIGltcGxlbWVudGFyIG1lZGlkYXMgYW50aS1icnV0ZSBmb3JjZScpXG4gICAgfVxuXG4gICAgaWYgKG1ldHJpY3Muc3VzcGljaW91c19hY3Rpdml0aWVzXzI0aCA+IDEwKSB7XG4gICAgICBpc3N1ZXMucHVzaChgQWN0aXZpZGFkIHNvc3BlY2hvc2EgZWxldmFkYTogJHttZXRyaWNzLnN1c3BpY2lvdXNfYWN0aXZpdGllc18yNGh9IGV2ZW50b3NgKVxuICAgICAgaWYgKHN0YXR1cyAhPT0gJ2NyaXRpY2FsJykge1xuICAgICAgICBzdGF0dXMgPSAnd2FybmluZydcbiAgICAgIH1cbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSZXZpc2FyIHBhdHJvbmVzIGRlIGFjdGl2aWRhZCBzb3NwZWNob3NhJylcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5hY3RpdmVfYWxlcnRzID4gNSkge1xuICAgICAgaXNzdWVzLnB1c2goYE11Y2hhcyBhbGVydGFzIGFjdGl2YXMgc2luIHJlc29sdmVyOiAke21ldHJpY3MuYWN0aXZlX2FsZXJ0c31gKVxuICAgICAgaWYgKHN0YXR1cyAhPT0gJ2NyaXRpY2FsJykge1xuICAgICAgICBzdGF0dXMgPSAnd2FybmluZydcbiAgICAgIH1cbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSZXZpc2FyIHkgcmVzb2x2ZXIgYWxlcnRhcyBwZW5kaWVudGVzJylcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5zZWN1cml0eV9zY29yZSA8IDcwKSB7XG4gICAgICBpc3N1ZXMucHVzaChgU2NvcmUgZGUgc2VndXJpZGFkIGJham86ICR7bWV0cmljcy5zZWN1cml0eV9zY29yZX0vMTAwYClcbiAgICAgIGlmIChzdGF0dXMgIT09ICdjcml0aWNhbCcpIHtcbiAgICAgICAgc3RhdHVzID0gJ3dhcm5pbmcnXG4gICAgICB9XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnSW1wbGVtZW50YXIgbWVkaWRhcyBwYXJhIG1lam9yYXIgZWwgc2NvcmUgZGUgc2VndXJpZGFkJylcbiAgICB9XG5cbiAgICAvLyBSZWNvbWVuZGFjaW9uZXMgZ2VuZXJhbGVzXG4gICAgaWYgKGlzc3Vlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdTaXN0ZW1hIGRlIHNlZ3VyaWRhZCBmdW5jaW9uYW5kbyBjb3JyZWN0YW1lbnRlJylcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdNYW50ZW5lciBtb25pdG9yZW8gcmVndWxhciB5IGFjdHVhbGl6YWNpb25lcyBkZSBzZWd1cmlkYWQnKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIFZlcmlmaWNhY2nDs24gY29tcGxldGFkYSAtIEVzdGFkbzogJHtzdGF0dXN9YClcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXMsXG4gICAgICBpc3N1ZXMsXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICBtZXRyaWNzLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGVuIHZlcmlmaWNhY2nDs24gZGUgc2VndXJpZGFkOicsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdjcml0aWNhbCcsXG4gICAgICBpc3N1ZXM6IFsnRXJyb3IgZWplY3V0YW5kbyB2ZXJpZmljYWNpw7NuIGRlIHNlZ3VyaWRhZCddLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ1JldmlzYXIgbG9ncyBkZWwgc2lzdGVtYSddLFxuICAgICAgbWV0cmljczogYXdhaXQgZ2V0U2VjdXJpdHlNZXRyaWNzKCksXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgREUgVVRJTElEQURcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogTGltcGlhIGV2ZW50b3MgZGUgc2VndXJpZGFkIGFudGlndW9zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwT2xkU2VjdXJpdHlFdmVudHMoZGF5c1RvS2VlcDogbnVtYmVyID0gOTApOiBQcm9taXNlPG51bWJlcj4ge1xuICB0cnkge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm8gZGlzcG9uaWJsZScpXG4gICAgfVxuXG4gICAgY29uc3QgY3V0b2ZmRGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSBkYXlzVG9LZWVwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKVxuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3NlY3VyaXR5X2V2ZW50cycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5sdCgndGltZXN0YW1wJywgY3V0b2ZmRGF0ZSlcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBsaW1waWFuZG8gZXZlbnRvczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlZENvdW50ID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEubGVuZ3RoIDogMFxuICAgIGNvbnNvbGUubG9nKGBbU0VDVVJJVFldIExpbXBpZXphIGNvbXBsZXRhZGE6ICR7ZGVsZXRlZENvdW50fSBldmVudG9zIGVsaW1pbmFkb3NgKVxuXG4gICAgcmV0dXJuIGRlbGV0ZWRDb3VudFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tTRUNVUklUWV0gRXJyb3IgZW4gbGltcGllemEgZGUgZXZlbnRvczonLCBlcnJvcilcbiAgICByZXR1cm4gMFxuICB9XG59XG5cbi8qKlxuICogRXhwb3J0YSBldmVudG9zIGRlIHNlZ3VyaWRhZCBwYXJhIGFuw6FsaXNpcyBleHRlcm5vXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHBvcnRTZWN1cml0eUV2ZW50cyhcbiAgc3RhcnREYXRlOiBEYXRlLFxuICBlbmREYXRlOiBEYXRlLFxuICBmb3JtYXQ6ICdqc29uJyB8ICdjc3YnID0gJ2pzb24nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGlmICghc3VwYWJhc2VBZG1pbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm8gZGlzcG9uaWJsZScpXG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhOiBldmVudHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnc2VjdXJpdHlfZXZlbnRzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmd0ZSgndGltZXN0YW1wJywgc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkpXG4gICAgICAubHRlKCd0aW1lc3RhbXAnLCBlbmREYXRlLnRvSVNPU3RyaW5nKCkpXG4gICAgICAub3JkZXIoJ3RpbWVzdGFtcCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZXhwb3J0YW5kbyBldmVudG9zOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0ID09PSAnanNvbicpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShldmVudHMsIG51bGwsIDIpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvcm1hdG8gQ1NWXG4gICAgICBpZiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnTm8gaGF5IGV2ZW50b3MgcGFyYSBleHBvcnRhcidcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5rZXlzKGV2ZW50c1swXSkuam9pbignLCcpXG4gICAgICBjb25zdCByb3dzID0gZXZlbnRzLm1hcChldmVudCA9PlxuICAgICAgICBPYmplY3QudmFsdWVzKGV2ZW50KVxuICAgICAgICAgIC5tYXAodmFsdWUgPT4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBgXCIke3ZhbHVlLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgIDogdmFsdWUpKVxuICAgICAgICAgIC5qb2luKCcsJylcbiAgICAgIClcblxuICAgICAgcmV0dXJuIFtoZWFkZXJzLCAuLi5yb3dzXS5qb2luKCdcXG4nKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFldIEVycm9yIGV4cG9ydGFuZG8gZXZlbnRvczonLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9TRUNVUklUWV9QQVRURVJOUyIsImFuYWx5emVTZWN1cml0eVBhdHRlcm5zIiwiY2xlYW51cE9sZFNlY3VyaXR5RXZlbnRzIiwiZXhwb3J0U2VjdXJpdHlFdmVudHMiLCJnZW5lcmF0ZVNlY3VyaXR5UmVwb3J0IiwiZ2V0QWN0aXZlU2VjdXJpdHlBbGVydHMiLCJnZXRTZWN1cml0eU1ldHJpY3MiLCJtYXJrQWxlcnRBc0ZhbHNlUG9zaXRpdmUiLCJyZXNvbHZlU2VjdXJpdHlBbGVydCIsInJ1blNlY3VyaXR5SGVhbHRoQ2hlY2siLCJzdGFydFNlY3VyaXR5TW9uaXRvcmluZyIsInN0b3BTZWN1cml0eU1vbml0b3JpbmciLCJ1cGRhdGVTZWN1cml0eUFsZXJ0IiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJzZXZlcml0eSIsInRpbWVXaW5kb3ciLCJ0aHJlc2hvbGQiLCJlbmFibGVkIiwiY29uZGl0aW9ucyIsImZpZWxkIiwib3BlcmF0b3IiLCJ2YWx1ZSIsIndlaWdodCIsImFjdGlvbnMiLCJ0eXBlIiwicGFyYW1ldGVycyIsIm5vdGlmeV9hZG1pbnMiLCJwcmlvcml0eSIsIm5vdGlmeV91c2VyIiwidXNlcklkIiwidGltZVdpbmRvd0hvdXJzIiwiY29uc29sZSIsImxvZyIsInN1cGFiYXNlQWRtaW4iLCJFcnJvciIsInRpbWVUaHJlc2hvbGQiLCJEYXRlIiwibm93IiwidG9JU09TdHJpbmciLCJhbGVydHMiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJndGUiLCJvcmRlciIsImFzY2VuZGluZyIsImVxIiwiZGF0YSIsImV2ZW50cyIsImVycm9yIiwibWVzc2FnZSIsImxlbmd0aCIsInBhdHRlcm4iLCJwYXR0ZXJuQWxlcnRzIiwiZGV0ZWN0UGF0dGVybiIsInB1c2giLCJpbnNlcnRFcnJvciIsImluc2VydCIsImV2ZW50c0J5VXNlciIsInJlZHVjZSIsImFjYyIsImV2ZW50IiwidXNlcl9pZCIsInVzZXJFdmVudHMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWF0Y2hpbmdFdmVudHMiLCJmaWx0ZXIiLCJtYXRjaGVzUGF0dGVybkNvbmRpdGlvbnMiLCJzb3J0ZWRFdmVudHMiLCJzb3J0IiwiYSIsImIiLCJ0aW1lc3RhbXAiLCJnZXRUaW1lIiwiaSIsIndpbmRvd1N0YXJ0Iiwid2luZG93RW5kIiwiZXZlbnRzSW5XaW5kb3ciLCJldmVudFRpbWUiLCJhbGVydCIsInBhdHRlcm5faWQiLCJ0aXRsZSIsImV2ZW50X2NvdW50IiwiZmlyc3Rfb2NjdXJyZW5jZSIsImxhc3Rfb2NjdXJyZW5jZSIsInN0YXR1cyIsIm1ldGFkYXRhIiwicGF0dGVybl9uYW1lIiwibWFwIiwiZSIsInRpbWVfd2luZG93X21pbnV0ZXMiLCJleGVjdXRlUGF0dGVybkFjdGlvbnMiLCJldmVyeSIsImNvbmRpdGlvbiIsImV2ZW50VmFsdWUiLCJpbmNsdWRlcyIsIk51bWJlciIsIkFycmF5IiwiaXNBcnJheSIsImFjdGlvbiIsImxvZ1NlY3VyaXR5RXZlbnQiLCJldmVudF90eXBlIiwiZXZlbnRfY2F0ZWdvcnkiLCJhbGVydF9pZCIsIndhcm4iLCJjYWNoZSIsIkNhY2hlTWFuYWdlciIsImdldEluc3RhbmNlIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXQiLCJDQUNIRV9DT05GSUdTIiwiVVNFUl9TRVNTSU9OIiwibGFzdDI0aCIsImFsZXJ0c0Vycm9yIiwidG90YWxFdmVudHMiLCJjcml0aWNhbEV2ZW50cyIsInVuaXF1ZVVzZXJzIiwiU2V0Iiwic2l6ZSIsImF1dGhGYWlsdXJlcyIsInN1c3BpY2lvdXNBY3Rpdml0aWVzIiwiYWN0aXZlQWxlcnRzIiwic2VjdXJpdHlTY29yZSIsIk1hdGgiLCJtYXgiLCJtaW4iLCJtZXRyaWNzIiwidG90YWxfZXZlbnRzXzI0aCIsImNyaXRpY2FsX2V2ZW50c18yNGgiLCJ1bmlxdWVfdXNlcnNfMjRoIiwiYXV0aF9mYWlsdXJlc18yNGgiLCJzdXNwaWNpb3VzX2FjdGl2aXRpZXNfMjRoIiwiYmxvY2tlZF91c2VycyIsImFjdGl2ZV9hbGVydHMiLCJhdmdfcmVzcG9uc2VfdGltZSIsInNlY3VyaXR5X3Njb3JlIiwic2V0Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImx0ZSIsImV2ZW50c0J5U2V2ZXJpdHkiLCJsb3ciLCJtZWRpdW0iLCJoaWdoIiwiY3JpdGljYWwiLCJldmVudHNCeUNhdGVnb3J5IiwiYXV0aGVudGljYXRpb24iLCJhdXRob3JpemF0aW9uIiwiZGF0YV9hY2Nlc3MiLCJhZG1pbl9vcGVyYXRpb25zIiwic3VzcGljaW91c19iZWhhdmlvciIsInVzZXJDb3VudHMiLCJpcENvdW50cyIsImZvckVhY2giLCJpcF9hZGRyZXNzIiwidG9wVXNlcnMiLCJzbGljZSIsInRvcElwcyIsInBhdHRlcm5zRGV0ZWN0ZWQiLCJwYXR0ZXJuQ291bnRzIiwib2NjdXJyZW5jZXMiLCJyZWNvbW1lbmRhdGlvbnMiLCJnZW5lcmF0ZVNlY3VyaXR5UmVjb21tZW5kYXRpb25zIiwicmVwb3J0IiwicGVyaW9kX3N0YXJ0IiwicGVyaW9kX2VuZCIsInRvdGFsX2V2ZW50cyIsImV2ZW50c19ieV9zZXZlcml0eSIsImV2ZW50c19ieV9jYXRlZ29yeSIsInRvcF91c2VycyIsInRvcF9pcHMiLCJwYXR0ZXJuc19kZXRlY3RlZCIsImdlbmVyYXRlZF9hdCIsImhpZ2hGcmVxdWVuY3lQYXR0ZXJucyIsInAiLCJhbGVydElkIiwidXBkYXRlcyIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzb2x1dGlvbk5vdGVzIiwicmVzb2x2ZWRCeSIsImFzc2lnbmVkX3RvIiwicmVzb2x1dGlvbl9ub3RlcyIsIm5vdGVzIiwibWFya2VkQnkiLCJpbnRlcnZhbE1pbnV0ZXMiLCJzZXRUaW1lb3V0IiwiaW50ZXJ2YWxJZCIsImNsZWFySW50ZXJ2YWwiLCJpc3N1ZXMiLCJkYXlzVG9LZWVwIiwiY3V0b2ZmRGF0ZSIsImRlbGV0ZSIsImx0IiwiZGVsZXRlZENvdW50IiwiZm9ybWF0IiwiaGVhZGVycyIsImtleXMiLCJqb2luIiwicm93cyIsInZhbHVlcyIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7Ozs7Ozs7Ozs7UUFzRllBO2VBQUFBOztRQStGU0M7ZUFBQUE7O1FBK3ZCQUM7ZUFBQUE7O1FBOEJBQztlQUFBQTs7UUF2ZEFDO2VBQUFBOztRQXNNQUM7ZUFBQUE7O1FBeFNBQztlQUFBQTs7UUE4WEFDO2VBQUFBOztRQWZBQztlQUFBQTs7UUFtRkFDO2VBQUFBOztRQWhETkM7ZUFBQUE7O1FBd0NBQztlQUFBQTs7UUEzR01DO2VBQUFBOzs7MEJBdHVCUTsrQkFPdkI7OEJBQ3FDO0FBNEVyQyxNQUFNWiw0QkFBK0M7SUFDMUQ7UUFDRWEsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFdBQVc7UUFDWEMsU0FBUztRQUNUQyxZQUFZO1lBQ1Y7Z0JBQUVDLE9BQU87Z0JBQWNDLFVBQVU7Z0JBQVVD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