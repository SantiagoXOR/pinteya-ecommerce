fe44d98d2687283635ed5c1d7d64c4cc
// =====================================================
// API: INTEGRACIÓN ÓRDENES-LOGÍSTICA
// Ruta: /api/admin/orders/[id]/shipments
// Descripción: Crear y gestionar envíos desde órdenes
// =====================================================
"use strict";

/* istanbul ignore next */
function cov_rqzpocc2() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\shipments\\route.ts";
  var hash = "505869a23ea7523801842af4d1533c8bacf3e3b8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\shipments\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 0
        },
        end: {
          line: 9,
          column: 3
        }
      },
      "1": {
        start: {
          line: 11,
          column: 4
        },
        end: {
          line: 14,
          column: 7
        }
      },
      "2": {
        start: {
          line: 11,
          column: 24
        },
        end: {
          line: 14,
          column: 7
        }
      },
      "3": {
        start: {
          line: 16,
          column: 0
        },
        end: {
          line: 23,
          column: 3
        }
      },
      "4": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 18,
          column: 19
        }
      },
      "5": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 20
        }
      },
      "6": {
        start: {
          line: 24,
          column: 16
        },
        end: {
          line: 24,
          column: 38
        }
      },
      "7": {
        start: {
          line: 25,
          column: 14
        },
        end: {
          line: 25,
          column: 47
        }
      },
      "8": {
        start: {
          line: 26,
          column: 20
        },
        end: {
          line: 26,
          column: 52
        }
      },
      "9": {
        start: {
          line: 27,
          column: 13
        },
        end: {
          line: 27,
          column: 27
        }
      },
      "10": {
        start: {
          line: 31,
          column: 17
        },
        end: {
          line: 31,
          column: 123
        }
      },
      "11": {
        start: {
          line: 35,
          column: 38
        },
        end: {
          line: 64,
          column: 2
        }
      },
      "12": {
        start: {
          line: 69,
          column: 22
        },
        end: {
          line: 69,
          column: 43
        }
      },
      "13": {
        start: {
          line: 70,
          column: 19
        },
        end: {
          line: 70,
          column: 72
        }
      },
      "14": {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 71,
          column: 50
        }
      },
      "15": {
        start: {
          line: 74,
          column: 35
        },
        end: {
          line: 98,
          column: 33
        }
      },
      "16": {
        start: {
          line: 99,
          column: 4
        },
        end: {
          line: 101,
          column: 5
        }
      },
      "17": {
        start: {
          line: 100,
          column: 8
        },
        end: {
          line: 100,
          column: 68
        }
      },
      "18": {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 104,
          column: 5
        }
      },
      "19": {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 103,
          column: 47
        }
      },
      "20": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 111,
          column: 5
        }
      },
      "21": {
        start: {
          line: 110,
          column: 8
        },
        end: {
          line: 110,
          column: 126
        }
      },
      "22": {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 112,
          column: 17
        }
      },
      "23": {
        start: {
          line: 115,
          column: 27
        },
        end: {
          line: 115,
          column: 51
        }
      },
      "24": {
        start: {
          line: 117,
          column: 22
        },
        end: {
          line: 117,
          column: 45
        }
      },
      "25": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 123,
          column: 5
        }
      },
      "26": {
        start: {
          line: 119,
          column: 8
        },
        end: {
          line: 122,
          column: 14
        }
      },
      "27": {
        start: {
          line: 120,
          column: 31
        },
        end: {
          line: 120,
          column: 62
        }
      },
      "28": {
        start: {
          line: 121,
          column: 12
        },
        end: {
          line: 121,
          column: 52
        }
      },
      "29": {
        start: {
          line: 125,
          column: 28
        },
        end: {
          line: 125,
          column: 88
        }
      },
      "30": {
        start: {
          line: 126,
          column: 38
        },
        end: {
          line: 144,
          column: 15
        }
      },
      "31": {
        start: {
          line: 145,
          column: 4
        },
        end: {
          line: 147,
          column: 5
        }
      },
      "32": {
        start: {
          line: 146,
          column: 8
        },
        end: {
          line: 146,
          column: 65
        }
      },
      "33": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 20
        }
      },
      "34": {
        start: {
          line: 151,
          column: 26
        },
        end: {
          line: 167,
          column: 6
        }
      },
      "35": {
        start: {
          line: 152,
          column: 26
        },
        end: {
          line: 152,
          column: 80
        }
      },
      "36": {
        start: {
          line: 152,
          column: 48
        },
        end: {
          line: 152,
          column: 79
        }
      },
      "37": {
        start: {
          line: 153,
          column: 8
        },
        end: {
          line: 155,
          column: 9
        }
      },
      "38": {
        start: {
          line: 154,
          column: 12
        },
        end: {
          line: 154,
          column: 85
        }
      },
      "39": {
        start: {
          line: 156,
          column: 8
        },
        end: {
          line: 158,
          column: 9
        }
      },
      "40": {
        start: {
          line: 157,
          column: 12
        },
        end: {
          line: 157,
          column: 124
        }
      },
      "41": {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 166,
          column: 10
        }
      },
      "42": {
        start: {
          line: 168,
          column: 22
        },
        end: {
          line: 168,
          column: 81
        }
      },
      "43": {
        start: {
          line: 169,
          column: 4
        },
        end: {
          line: 171,
          column: 5
        }
      },
      "44": {
        start: {
          line: 170,
          column: 8
        },
        end: {
          line: 170,
          column: 74
        }
      },
      "45": {
        start: {
          line: 174,
          column: 22
        },
        end: {
          line: 180,
          column: 6
        }
      },
      "46": {
        start: {
          line: 181,
          column: 4
        },
        end: {
          line: 184,
          column: 5
        }
      },
      "47": {
        start: {
          line: 182,
          column: 8
        },
        end: {
          line: 182,
          column: 74
        }
      },
      "48": {
        start: {
          line: 188,
          column: 22
        },
        end: {
          line: 191,
          column: 24
        }
      },
      "49": {
        start: {
          line: 192,
          column: 4
        },
        end: {
          line: 195,
          column: 5
        }
      },
      "50": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 193,
          column: 68
        }
      },
      "51": {
        start: {
          line: 198,
          column: 4
        },
        end: {
          line: 278,
          column: 5
        }
      },
      "52": {
        start: {
          line: 200,
          column: 24
        },
        end: {
          line: 200,
          column: 47
        }
      },
      "53": {
        start: {
          line: 201,
          column: 8
        },
        end: {
          line: 207,
          column: 9
        }
      },
      "54": {
        start: {
          line: 202,
          column: 12
        },
        end: {
          line: 206,
          column: 15
        }
      },
      "55": {
        start: {
          line: 208,
          column: 24
        },
        end: {
          line: 208,
          column: 33
        }
      },
      "56": {
        start: {
          line: 210,
          column: 21
        },
        end: {
          line: 210,
          column: 41
        }
      },
      "57": {
        start: {
          line: 211,
          column: 33
        },
        end: {
          line: 211,
          column: 78
        }
      },
      "58": {
        start: {
          line: 212,
          column: 8
        },
        end: {
          line: 219,
          column: 9
        }
      },
      "59": {
        start: {
          line: 213,
          column: 12
        },
        end: {
          line: 218,
          column: 15
        }
      },
      "60": {
        start: {
          line: 220,
          column: 30
        },
        end: {
          line: 220,
          column: 51
        }
      },
      "61": {
        start: {
          line: 222,
          column: 26
        },
        end: {
          line: 222,
          column: 77
        }
      },
      "62": {
        start: {
          line: 224,
          column: 55
        },
        end: {
          line: 224,
          column: 182
        }
      },
      "63": {
        start: {
          line: 225,
          column: 8
        },
        end: {
          line: 231,
          column: 9
        }
      },
      "64": {
        start: {
          line: 226,
          column: 12
        },
        end: {
          line: 230,
          column: 15
        }
      },
      "65": {
        start: {
          line: 233,
          column: 25
        },
        end: {
          line: 233,
          column: 77
        }
      },
      "66": {
        start: {
          line: 235,
          column: 8
        },
        end: {
          line: 235,
          column: 91
        }
      },
      "67": {
        start: {
          line: 237,
          column: 8
        },
        end: {
          line: 237,
          column: 54
        }
      },
      "68": {
        start: {
          line: 239,
          column: 8
        },
        end: {
          line: 239,
          column: 41
        }
      },
      "69": {
        start: {
          line: 241,
          column: 62
        },
        end: {
          line: 254,
          column: 39
        }
      },
      "70": {
        start: {
          line: 255,
          column: 8
        },
        end: {
          line: 257,
          column: 9
        }
      },
      "71": {
        start: {
          line: 256,
          column: 12
        },
        end: {
          line: 256,
          column: 74
        }
      },
      "72": {
        start: {
          line: 258,
          column: 8
        },
        end: {
          line: 264,
          column: 11
        }
      },
      "73": {
        start: {
          line: 265,
          column: 8
        },
        end: {
          line: 269,
          column: 11
        }
      },
      "74": {
        start: {
          line: 271,
          column: 8
        },
        end: {
          line: 271,
          column: 67
        }
      },
      "75": {
        start: {
          line: 272,
          column: 8
        },
        end: {
          line: 277,
          column: 11
        }
      },
      "76": {
        start: {
          line: 281,
          column: 4
        },
        end: {
          line: 324,
          column: 5
        }
      },
      "77": {
        start: {
          line: 283,
          column: 24
        },
        end: {
          line: 283,
          column: 47
        }
      },
      "78": {
        start: {
          line: 284,
          column: 8
        },
        end: {
          line: 290,
          column: 9
        }
      },
      "79": {
        start: {
          line: 285,
          column: 12
        },
        end: {
          line: 289,
          column: 15
        }
      },
      "80": {
        start: {
          line: 291,
          column: 24
        },
        end: {
          line: 291,
          column: 33
        }
      },
      "81": {
        start: {
          line: 293,
          column: 43
        },
        end: {
          line: 308,
          column: 10
        }
      },
      "82": {
        start: {
          line: 309,
          column: 8
        },
        end: {
          line: 311,
          column: 9
        }
      },
      "83": {
        start: {
          line: 310,
          column: 12
        },
        end: {
          line: 310,
          column: 24
        }
      },
      "84": {
        start: {
          line: 312,
          column: 8
        },
        end: {
          line: 315,
          column: 11
        }
      },
      "85": {
        start: {
          line: 317,
          column: 8
        },
        end: {
          line: 317,
          column: 68
        }
      },
      "86": {
        start: {
          line: 318,
          column: 8
        },
        end: {
          line: 323,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 10,
            column: 9
          },
          end: {
            line: 10,
            column: 16
          }
        },
        loc: {
          start: {
            line: 10,
            column: 30
          },
          end: {
            line: 15,
            column: 1
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 17,
            column: 4
          },
          end: {
            line: 17,
            column: 5
          }
        },
        loc: {
          start: {
            line: 17,
            column: 15
          },
          end: {
            line: 19,
            column: 5
          }
        },
        line: 17
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 20,
            column: 16
          },
          end: {
            line: 22,
            column: 5
          }
        },
        line: 20
      },
      "3": {
        name: "generateShipmentNumber",
        decl: {
          start: {
            line: 68,
            column: 9
          },
          end: {
            line: 68,
            column: 31
          }
        },
        loc: {
          start: {
            line: 68,
            column: 34
          },
          end: {
            line: 72,
            column: 1
          }
        },
        line: 68
      },
      "4": {
        name: "validateOrderAccess",
        decl: {
          start: {
            line: 73,
            column: 15
          },
          end: {
            line: 73,
            column: 34
          }
        },
        loc: {
          start: {
            line: 73,
            column: 52
          },
          end: {
            line: 113,
            column: 1
          }
        },
        line: 73
      },
      "5": {
        name: "createShipmentRecord",
        decl: {
          start: {
            line: 114,
            column: 15
          },
          end: {
            line: 114,
            column: 35
          }
        },
        loc: {
          start: {
            line: 114,
            column: 62
          },
          end: {
            line: 149,
            column: 1
          }
        },
        line: 114
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 119,
            column: 51
          },
          end: {
            line: 119,
            column: 52
          }
        },
        loc: {
          start: {
            line: 119,
            column: 64
          },
          end: {
            line: 122,
            column: 9
          }
        },
        line: 119
      },
      "7": {
        name: "createShipmentItems",
        decl: {
          start: {
            line: 150,
            column: 15
          },
          end: {
            line: 150,
            column: 34
          }
        },
        loc: {
          start: {
            line: 150,
            column: 75
          },
          end: {
            line: 172,
            column: 1
          }
        },
        line: 150
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 151,
            column: 45
          },
          end: {
            line: 151,
            column: 46
          }
        },
        loc: {
          start: {
            line: 151,
            column: 56
          },
          end: {
            line: 167,
            column: 5
          }
        },
        line: 151
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 152,
            column: 42
          },
          end: {
            line: 152,
            column: 43
          }
        },
        loc: {
          start: {
            line: 152,
            column: 48
          },
          end: {
            line: 152,
            column: 79
          }
        },
        line: 152
      },
      "10": {
        name: "createInitialTrackingEvent",
        decl: {
          start: {
            line: 173,
            column: 15
          },
          end: {
            line: 173,
            column: 41
          }
        },
        loc: {
          start: {
            line: 173,
            column: 54
          },
          end: {
            line: 185,
            column: 1
          }
        },
        line: 173
      },
      "11": {
        name: "updateOrderStatus",
        decl: {
          start: {
            line: 186,
            column: 15
          },
          end: {
            line: 186,
            column: 32
          }
        },
        loc: {
          start: {
            line: 186,
            column: 42
          },
          end: {
            line: 196,
            column: 1
          }
        },
        line: 186
      },
      "12": {
        name: "POST",
        decl: {
          start: {
            line: 197,
            column: 15
          },
          end: {
            line: 197,
            column: 19
          }
        },
        loc: {
          start: {
            line: 197,
            column: 41
          },
          end: {
            line: 279,
            column: 1
          }
        },
        line: 197
      },
      "13": {
        name: "GET",
        decl: {
          start: {
            line: 280,
            column: 15
          },
          end: {
            line: 280,
            column: 18
          }
        },
        loc: {
          start: {
            line: 280,
            column: 40
          },
          end: {
            line: 325,
            column: 1
          }
        },
        line: 280
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 99,
            column: 4
          },
          end: {
            line: 101,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 99,
            column: 4
          },
          end: {
            line: 101,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 99
      },
      "1": {
        loc: {
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 104,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 104,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 102
      },
      "2": {
        loc: {
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 111,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 111,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 106
      },
      "3": {
        loc: {
          start: {
            line: 118,
            column: 4
          },
          end: {
            line: 123,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 118,
            column: 4
          },
          end: {
            line: 123,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 118
      },
      "4": {
        loc: {
          start: {
            line: 120,
            column: 31
          },
          end: {
            line: 120,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 120,
            column: 31
          },
          end: {
            line: 120,
            column: 55
          }
        }, {
          start: {
            line: 120,
            column: 59
          },
          end: {
            line: 120,
            column: 62
          }
        }],
        line: 120
      },
      "5": {
        loc: {
          start: {
            line: 125,
            column: 28
          },
          end: {
            line: 125,
            column: 88
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 125,
            column: 28
          },
          end: {
            line: 125,
            column: 58
          }
        }, {
          start: {
            line: 125,
            column: 62
          },
          end: {
            line: 125,
            column: 88
          }
        }],
        line: 125
      },
      "6": {
        loc: {
          start: {
            line: 145,
            column: 4
          },
          end: {
            line: 147,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 4
          },
          end: {
            line: 147,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 145
      },
      "7": {
        loc: {
          start: {
            line: 153,
            column: 8
          },
          end: {
            line: 155,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 153,
            column: 8
          },
          end: {
            line: 155,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 153
      },
      "8": {
        loc: {
          start: {
            line: 156,
            column: 8
          },
          end: {
            line: 158,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 156,
            column: 8
          },
          end: {
            line: 158,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 156
      },
      "9": {
        loc: {
          start: {
            line: 164,
            column: 24
          },
          end: {
            line: 164,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 164,
            column: 24
          },
          end: {
            line: 164,
            column: 53
          }
        }, {
          start: {
            line: 164,
            column: 57
          },
          end: {
            line: 164,
            column: 60
          }
        }],
        line: 164
      },
      "10": {
        loc: {
          start: {
            line: 169,
            column: 4
          },
          end: {
            line: 171,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 169,
            column: 4
          },
          end: {
            line: 171,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 169
      },
      "11": {
        loc: {
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 184,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 184,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 181
      },
      "12": {
        loc: {
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 195,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 195,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 192
      },
      "13": {
        loc: {
          start: {
            line: 201,
            column: 8
          },
          end: {
            line: 207,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 201,
            column: 8
          },
          end: {
            line: 207,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 201
      },
      "14": {
        loc: {
          start: {
            line: 212,
            column: 8
          },
          end: {
            line: 219,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 212,
            column: 8
          },
          end: {
            line: 219,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 212
      },
      "15": {
        loc: {
          start: {
            line: 225,
            column: 8
          },
          end: {
            line: 231,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 225,
            column: 8
          },
          end: {
            line: 231,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 225
      },
      "16": {
        loc: {
          start: {
            line: 225,
            column: 12
          },
          end: {
            line: 225,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 225,
            column: 12
          },
          end: {
            line: 225,
            column: 24
          }
        }, {
          start: {
            line: 225,
            column: 28
          },
          end: {
            line: 225,
            column: 36
          }
        }],
        line: 225
      },
      "17": {
        loc: {
          start: {
            line: 255,
            column: 8
          },
          end: {
            line: 257,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 255,
            column: 8
          },
          end: {
            line: 257,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 255
      },
      "18": {
        loc: {
          start: {
            line: 268,
            column: 18
          },
          end: {
            line: 268,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 268,
            column: 18
          },
          end: {
            line: 268,
            column: 34
          }
        }, {
          start: {
            line: 268,
            column: 38
          },
          end: {
            line: 268,
            column: 46
          }
        }],
        line: 268
      },
      "19": {
        loc: {
          start: {
            line: 274,
            column: 21
          },
          end: {
            line: 274,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 274,
            column: 46
          },
          end: {
            line: 274,
            column: 59
          }
        }, {
          start: {
            line: 274,
            column: 62
          },
          end: {
            line: 274,
            column: 77
          }
        }],
        line: 274
      },
      "20": {
        loc: {
          start: {
            line: 284,
            column: 8
          },
          end: {
            line: 290,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 284,
            column: 8
          },
          end: {
            line: 290,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 284
      },
      "21": {
        loc: {
          start: {
            line: 309,
            column: 8
          },
          end: {
            line: 311,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 309,
            column: 8
          },
          end: {
            line: 311,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 309
      },
      "22": {
        loc: {
          start: {
            line: 314,
            column: 18
          },
          end: {
            line: 314,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 314,
            column: 18
          },
          end: {
            line: 314,
            column: 27
          }
        }, {
          start: {
            line: 314,
            column: 31
          },
          end: {
            line: 314,
            column: 33
          }
        }],
        line: 314
      },
      "23": {
        loc: {
          start: {
            line: 320,
            column: 21
          },
          end: {
            line: 320,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 320,
            column: 46
          },
          end: {
            line: 320,
            column: 59
          }
        }, {
          start: {
            line: 320,
            column: 62
          },
          end: {
            line: 320,
            column: 77
          }
        }],
        line: 320
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\orders\\[id]\\shipments\\route.ts"],
      sourcesContent: ["// =====================================================\r\n// API: INTEGRACI\xD3N \xD3RDENES-LOG\xCDSTICA\r\n// Ruta: /api/admin/orders/[id]/shipments\r\n// Descripci\xF3n: Crear y gestionar env\xEDos desde \xF3rdenes\r\n// =====================================================\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { auth } from '@/auth';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { z } from 'zod';\r\n\r\n// =====================================================\r\n// CONFIGURACI\xD3N\r\n// =====================================================\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n\r\n// =====================================================\r\n// ESQUEMAS DE VALIDACI\xD3N\r\n// =====================================================\r\n\r\nconst CreateShipmentFromOrderSchema = z.object({\r\n  carrier_id: z.number().int().positive(),\r\n  shipping_service: z.string().min(1),\r\n  items: z.array(z.object({\r\n    order_item_id: z.string().uuid(),\r\n    quantity: z.number().int().positive()\r\n  })).min(1),\r\n  pickup_address: z.object({\r\n    street_name: z.string(),\r\n    street_number: z.string(),\r\n    city_name: z.string(),\r\n    state_name: z.string(),\r\n    zip_code: z.string(),\r\n    country: z.string().default('Argentina')\r\n  }).optional(),\r\n  delivery_address: z.object({\r\n    street_name: z.string(),\r\n    street_number: z.string(),\r\n    apartment: z.string().optional(),\r\n    city_name: z.string(),\r\n    state_name: z.string(),\r\n    zip_code: z.string(),\r\n    country: z.string().default('Argentina')\r\n  }),\r\n  weight_kg: z.number().positive().optional(),\r\n  dimensions_cm: z.string().optional(),\r\n  special_instructions: z.string().optional(),\r\n  notes: z.string().optional(),\r\n  estimated_delivery_date: z.string().optional()\r\n});\r\n\r\n// =====================================================\r\n// FUNCIONES AUXILIARES\r\n// =====================================================\r\n\r\nfunction generateShipmentNumber(): string {\r\n  const timestamp = Date.now().toString();\r\n  const random = Math.random().toString(36).substr(2, 5).toUpperCase();\r\n  return `SHP-${timestamp.slice(-8)}-${random}`;\r\n}\r\n\r\nasync function validateOrderAccess(orderId: string, userId: string): Promise<any> {\r\n  const { data: order, error } = await supabase\r\n    .from('orders')\r\n    .select(`\r\n      id,\r\n      order_number,\r\n      status,\r\n      payment_status,\r\n      total,\r\n      shipping_address,\r\n      user_profiles (\r\n        id,\r\n        name,\r\n        email\r\n      ),\r\n      order_items (\r\n        id,\r\n        product_id,\r\n        quantity,\r\n        unit_price,\r\n        products (\r\n          id,\r\n          name,\r\n          weight_kg,\r\n          dimensions_cm\r\n        )\r\n      )\r\n    `)\r\n    .eq('id', orderId)\r\n    .single();\r\n\r\n  if (error) {\r\n    throw new Error(`Error obteniendo orden: ${error.message}`);\r\n  }\r\n\r\n  if (!order) {\r\n    throw new Error('Orden no encontrada');\r\n  }\r\n\r\n  // Verificar que la orden est\xE9 en estado v\xE1lido para env\xEDo\r\n  if (!['confirmed', 'processing'].includes(order.status)) {\r\n    throw new Error(`La orden debe estar confirmada o en procesamiento para crear env\xEDo. Estado actual: ${order.status}`);\r\n  }\r\n\r\n  return order;\r\n}\r\n\r\nasync function createShipmentRecord(orderData: any, validatedData: any): Promise<any> {\r\n  const shipmentNumber = generateShipmentNumber();\r\n  \r\n  // Calcular peso total si no se proporciona\r\n  let totalWeight = validatedData.weight_kg;\r\n  if (!totalWeight) {\r\n    totalWeight = orderData.order_items.reduce((sum: number, item: any) => {\r\n      const itemWeight = item.products?.weight_kg || 0.5; // Peso por defecto 500g\r\n      return sum + (itemWeight * item.quantity);\r\n    }, 0);\r\n  }\r\n\r\n  // Usar direcci\xF3n de env\xEDo de la orden si no se proporciona\r\n  const deliveryAddress = validatedData.delivery_address || orderData.shipping_address;\r\n\r\n  const { data: shipment, error } = await supabase\r\n    .from('shipments')\r\n    .insert({\r\n      shipment_number: shipmentNumber,\r\n      order_id: orderData.id,\r\n      status: 'pending',\r\n      carrier_id: validatedData.carrier_id,\r\n      shipping_service: validatedData.shipping_service,\r\n      pickup_address: validatedData.pickup_address,\r\n      delivery_address: deliveryAddress,\r\n      weight_kg: totalWeight,\r\n      dimensions_cm: validatedData.dimensions_cm,\r\n      special_instructions: validatedData.special_instructions,\r\n      notes: validatedData.notes,\r\n      estimated_delivery_date: validatedData.estimated_delivery_date,\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString()\r\n    })\r\n    .select(`\r\n      *,\r\n      carrier:couriers(id, name, code, logo_url)\r\n    `)\r\n    .single();\r\n\r\n  if (error) {\r\n    throw new Error(`Error creando env\xEDo: ${error.message}`);\r\n  }\r\n\r\n  return shipment;\r\n}\r\n\r\nasync function createShipmentItems(shipmentId: string, orderItems: any[], requestedItems: any[]): Promise<void> {\r\n  const shipmentItems = requestedItems.map(reqItem => {\r\n    const orderItem = orderItems.find(oi => oi.id === reqItem.order_item_id);\r\n    if (!orderItem) {\r\n      throw new Error(`Item de orden no encontrado: ${reqItem.order_item_id}`);\r\n    }\r\n\r\n    if (reqItem.quantity > orderItem.quantity) {\r\n      throw new Error(`Cantidad solicitada (${reqItem.quantity}) excede cantidad disponible (${orderItem.quantity})`);\r\n    }\r\n\r\n    return {\r\n      shipment_id: shipmentId,\r\n      order_item_id: reqItem.order_item_id,\r\n      product_id: orderItem.product_id,\r\n      quantity: reqItem.quantity,\r\n      weight_kg: (orderItem.products?.weight_kg || 0.5) * reqItem.quantity,\r\n      created_at: new Date().toISOString()\r\n    };\r\n  });\r\n\r\n  const { error } = await supabase\r\n    .from('shipment_items')\r\n    .insert(shipmentItems);\r\n\r\n  if (error) {\r\n    throw new Error(`Error creando items de env\xEDo: ${error.message}`);\r\n  }\r\n}\r\n\r\nasync function createInitialTrackingEvent(shipmentId: string): Promise<void> {\r\n  const { error } = await supabase\r\n    .from('tracking_events')\r\n    .insert({\r\n      shipment_id: shipmentId,\r\n      status: 'pending',\r\n      description: 'Env\xEDo creado desde orden - Pendiente de confirmaci\xF3n',\r\n      occurred_at: new Date().toISOString(),\r\n      created_at: new Date().toISOString()\r\n    });\r\n\r\n  if (error) {\r\n    console.error('Error creando evento de tracking inicial:', error);\r\n    // No lanzar error, es opcional\r\n  }\r\n}\r\n\r\nasync function updateOrderStatus(orderId: string): Promise<void> {\r\n  // Actualizar estado de la orden a \"shipped\" si todos los items tienen env\xEDo\r\n  const { error } = await supabase\r\n    .from('orders')\r\n    .update({ \r\n      status: 'processing', // Cambiar a processing mientras se confirma el env\xEDo\r\n      updated_at: new Date().toISOString()\r\n    })\r\n    .eq('id', orderId);\r\n\r\n  if (error) {\r\n    console.error('Error actualizando estado de orden:', error);\r\n    // No lanzar error, es opcional\r\n  }\r\n}\r\n\r\n// =====================================================\r\n// HANDLER POST - CREAR ENV\xCDO DESDE ORDEN\r\n// =====================================================\r\n\r\nexport async function POST(\r\n  request: NextRequest,\r\n  { params }: { params: { id: string } }\r\n) {\r\n  try {\r\n    // Verificar autenticaci\xF3n\r\n    const session = await auth();\r\n    if (!session?.user) {\r\n      return NextResponse.json(\r\n        { error: 'No autorizado' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const orderId = params.id;\r\n\r\n    // Validar datos de entrada\r\n    const body = await request.json();\r\n    const validationResult = CreateShipmentFromOrderSchema.safeParse(body);\r\n\r\n    if (!validationResult.success) {\r\n      return NextResponse.json(\r\n        { \r\n          error: 'Datos de env\xEDo inv\xE1lidos', \r\n          details: validationResult.error.errors \r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const validatedData = validationResult.data;\r\n\r\n    // Validar acceso a la orden y obtener datos\r\n    const orderData = await validateOrderAccess(orderId, session.user.id!);\r\n\r\n    // Verificar que el carrier existe\r\n    const { data: carrier, error: carrierError } = await supabase\r\n      .from('couriers')\r\n      .select('id, name, is_active')\r\n      .eq('id', validatedData.carrier_id)\r\n      .eq('is_active', true)\r\n      .single();\r\n\r\n    if (carrierError || !carrier) {\r\n      return NextResponse.json(\r\n        { error: 'Carrier no encontrado o inactivo' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // Crear el env\xEDo\r\n    const shipment = await createShipmentRecord(orderData, validatedData);\r\n\r\n    // Crear los items del env\xEDo\r\n    await createShipmentItems(shipment.id, orderData.order_items, validatedData.items);\r\n\r\n    // Crear evento de tracking inicial\r\n    await createInitialTrackingEvent(shipment.id);\r\n\r\n    // Actualizar estado de la orden\r\n    await updateOrderStatus(orderId);\r\n\r\n    // Obtener el env\xEDo completo con todos los datos\r\n    const { data: completeShipment, error: fetchError } = await supabase\r\n      .from('shipments')\r\n      .select(`\r\n        *,\r\n        carrier:couriers(id, name, code, logo_url),\r\n        items:shipment_items(\r\n          id, quantity, weight_kg,\r\n          order_item:order_items(\r\n            id, quantity, unit_price,\r\n            product:products(id, name, sku)\r\n          )\r\n        ),\r\n        tracking_events(\r\n          id, status, description, occurred_at\r\n        )\r\n      `)\r\n      .eq('id', shipment.id)\r\n      .single();\r\n\r\n    if (fetchError) {\r\n      console.error('Error obteniendo env\xEDo completo:', fetchError);\r\n    }\r\n\r\n    console.log('\u2705 Env\xEDo creado exitosamente:', {\r\n      shipment_id: shipment.id,\r\n      shipment_number: shipment.shipment_number,\r\n      order_id: orderId,\r\n      carrier: carrier.name,\r\n      user_id: session.user.id\r\n    });\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Env\xEDo creado exitosamente',\r\n      data: completeShipment || shipment\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('\u274C Error creando env\xEDo desde orden:', error);\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        error: 'Error interno del servidor',\r\n        details: error instanceof Error ? error.message : 'Unknown error'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// =====================================================\r\n// HANDLER GET - OBTENER ENV\xCDOS DE UNA ORDEN\r\n// =====================================================\r\n\r\nexport async function GET(\r\n  request: NextRequest,\r\n  { params }: { params: { id: string } }\r\n) {\r\n  try {\r\n    // Verificar autenticaci\xF3n\r\n    const session = await auth();\r\n    if (!session?.user) {\r\n      return NextResponse.json(\r\n        { error: 'No autorizado' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const orderId = params.id;\r\n\r\n    // Obtener env\xEDos de la orden\r\n    const { data: shipments, error } = await supabase\r\n      .from('shipments')\r\n      .select(`\r\n        *,\r\n        carrier:couriers(id, name, code, logo_url),\r\n        items:shipment_items(\r\n          id, quantity, weight_kg,\r\n          order_item:order_items(\r\n            id, quantity, unit_price,\r\n            product:products(id, name, sku)\r\n          )\r\n        ),\r\n        tracking_events(\r\n          id, status, description, occurred_at, location\r\n        )\r\n      `)\r\n      .eq('order_id', orderId)\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      throw error;\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: shipments || []\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('\u274C Error obteniendo env\xEDos de orden:', error);\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        error: 'Error interno del servidor',\r\n        details: error instanceof Error ? error.message : 'Unknown error'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],
      names: ["GET", "POST", "supabase", "createClient", "process", "env", "NEXT_PUBLIC_SUPABASE_URL", "SUPABASE_SERVICE_ROLE_KEY", "CreateShipmentFromOrderSchema", "z", "object", "carrier_id", "number", "int", "positive", "shipping_service", "string", "min", "items", "array", "order_item_id", "uuid", "quantity", "pickup_address", "street_name", "street_number", "city_name", "state_name", "zip_code", "country", "default", "optional", "delivery_address", "apartment", "weight_kg", "dimensions_cm", "special_instructions", "notes", "estimated_delivery_date", "generateShipmentNumber", "timestamp", "Date", "now", "toString", "random", "Math", "substr", "toUpperCase", "slice", "validateOrderAccess", "orderId", "userId", "data", "order", "error", "from", "select", "eq", "single", "Error", "message", "includes", "status", "createShipmentRecord", "orderData", "validatedData", "shipmentNumber", "totalWeight", "order_items", "reduce", "sum", "item", "itemWeight", "products", "deliveryAddress", "shipping_address", "shipment", "insert", "shipment_number", "order_id", "id", "created_at", "toISOString", "updated_at", "createShipmentItems", "shipmentId", "orderItems", "requestedItems", "shipmentItems", "map", "reqItem", "orderItem", "find", "oi", "shipment_id", "product_id", "createInitialTrackingEvent", "description", "occurred_at", "console", "updateOrderStatus", "update", "request", "params", "session", "auth", "user", "NextResponse", "json", "body", "validationResult", "safeParse", "success", "details", "errors", "carrier", "carrierError", "completeShipment", "fetchError", "log", "name", "user_id", "shipments", "ascending"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "505869a23ea7523801842af4d1533c8bacf3e3b8"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_rqzpocc2 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_rqzpocc2();
cov_rqzpocc2().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[0]++;
  cov_rqzpocc2().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_rqzpocc2().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_rqzpocc2().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_rqzpocc2().f[1]++;
    cov_rqzpocc2().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_rqzpocc2().f[2]++;
    cov_rqzpocc2().s[5]++;
    return POST;
  }
});
const _server =
/* istanbul ignore next */
(cov_rqzpocc2().s[6]++, require("next/server"));
const _auth =
/* istanbul ignore next */
(cov_rqzpocc2().s[7]++, require("../../../../../../auth"));
const _supabasejs =
/* istanbul ignore next */
(cov_rqzpocc2().s[8]++, require("@supabase/supabase-js"));
const _zod =
/* istanbul ignore next */
(cov_rqzpocc2().s[9]++, require("zod"));
// =====================================================
// CONFIGURACIÓN
// =====================================================
const supabase =
/* istanbul ignore next */
(cov_rqzpocc2().s[10]++, (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY));
// =====================================================
// ESQUEMAS DE VALIDACIÓN
// =====================================================
const CreateShipmentFromOrderSchema =
/* istanbul ignore next */
(cov_rqzpocc2().s[11]++, _zod.z.object({
  carrier_id: _zod.z.number().int().positive(),
  shipping_service: _zod.z.string().min(1),
  items: _zod.z.array(_zod.z.object({
    order_item_id: _zod.z.string().uuid(),
    quantity: _zod.z.number().int().positive()
  })).min(1),
  pickup_address: _zod.z.object({
    street_name: _zod.z.string(),
    street_number: _zod.z.string(),
    city_name: _zod.z.string(),
    state_name: _zod.z.string(),
    zip_code: _zod.z.string(),
    country: _zod.z.string().default('Argentina')
  }).optional(),
  delivery_address: _zod.z.object({
    street_name: _zod.z.string(),
    street_number: _zod.z.string(),
    apartment: _zod.z.string().optional(),
    city_name: _zod.z.string(),
    state_name: _zod.z.string(),
    zip_code: _zod.z.string(),
    country: _zod.z.string().default('Argentina')
  }),
  weight_kg: _zod.z.number().positive().optional(),
  dimensions_cm: _zod.z.string().optional(),
  special_instructions: _zod.z.string().optional(),
  notes: _zod.z.string().optional(),
  estimated_delivery_date: _zod.z.string().optional()
}));
// =====================================================
// FUNCIONES AUXILIARES
// =====================================================
function generateShipmentNumber() {
  /* istanbul ignore next */
  cov_rqzpocc2().f[3]++;
  const timestamp =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[12]++, Date.now().toString());
  const random =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[13]++, Math.random().toString(36).substr(2, 5).toUpperCase());
  /* istanbul ignore next */
  cov_rqzpocc2().s[14]++;
  return `SHP-${timestamp.slice(-8)}-${random}`;
}
async function validateOrderAccess(orderId, userId) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[4]++;
  const {
    data: order,
    error
  } =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[15]++, await supabase.from('orders').select(`
      id,
      order_number,
      status,
      payment_status,
      total,
      shipping_address,
      user_profiles (
        id,
        name,
        email
      ),
      order_items (
        id,
        product_id,
        quantity,
        unit_price,
        products (
          id,
          name,
          weight_kg,
          dimensions_cm
        )
      )
    `).eq('id', orderId).single());
  /* istanbul ignore next */
  cov_rqzpocc2().s[16]++;
  if (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[0][0]++;
    cov_rqzpocc2().s[17]++;
    throw new Error(`Error obteniendo orden: ${error.message}`);
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[0][1]++;
  }
  cov_rqzpocc2().s[18]++;
  if (!order) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[1][0]++;
    cov_rqzpocc2().s[19]++;
    throw new Error('Orden no encontrada');
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[1][1]++;
  }
  // Verificar que la orden esté en estado válido para envío
  cov_rqzpocc2().s[20]++;
  if (!['confirmed', 'processing'].includes(order.status)) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[2][0]++;
    cov_rqzpocc2().s[21]++;
    throw new Error(`La orden debe estar confirmada o en procesamiento para crear envío. Estado actual: ${order.status}`);
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[2][1]++;
  }
  cov_rqzpocc2().s[22]++;
  return order;
}
async function createShipmentRecord(orderData, validatedData) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[5]++;
  const shipmentNumber =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[23]++, generateShipmentNumber());
  // Calcular peso total si no se proporciona
  let totalWeight =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[24]++, validatedData.weight_kg);
  /* istanbul ignore next */
  cov_rqzpocc2().s[25]++;
  if (!totalWeight) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[3][0]++;
    cov_rqzpocc2().s[26]++;
    totalWeight = orderData.order_items.reduce((sum, item) => {
      /* istanbul ignore next */
      cov_rqzpocc2().f[6]++;
      const itemWeight =
      /* istanbul ignore next */
      (cov_rqzpocc2().s[27]++,
      /* istanbul ignore next */
      (cov_rqzpocc2().b[4][0]++, item.products?.weight_kg) ||
      /* istanbul ignore next */
      (cov_rqzpocc2().b[4][1]++, 0.5)); // Peso por defecto 500g
      /* istanbul ignore next */
      cov_rqzpocc2().s[28]++;
      return sum + itemWeight * item.quantity;
    }, 0);
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[3][1]++;
  }
  // Usar dirección de envío de la orden si no se proporciona
  const deliveryAddress =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[29]++,
  /* istanbul ignore next */
  (cov_rqzpocc2().b[5][0]++, validatedData.delivery_address) ||
  /* istanbul ignore next */
  (cov_rqzpocc2().b[5][1]++, orderData.shipping_address));
  const {
    data: shipment,
    error
  } =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[30]++, await supabase.from('shipments').insert({
    shipment_number: shipmentNumber,
    order_id: orderData.id,
    status: 'pending',
    carrier_id: validatedData.carrier_id,
    shipping_service: validatedData.shipping_service,
    pickup_address: validatedData.pickup_address,
    delivery_address: deliveryAddress,
    weight_kg: totalWeight,
    dimensions_cm: validatedData.dimensions_cm,
    special_instructions: validatedData.special_instructions,
    notes: validatedData.notes,
    estimated_delivery_date: validatedData.estimated_delivery_date,
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  }).select(`
      *,
      carrier:couriers(id, name, code, logo_url)
    `).single());
  /* istanbul ignore next */
  cov_rqzpocc2().s[31]++;
  if (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[6][0]++;
    cov_rqzpocc2().s[32]++;
    throw new Error(`Error creando envío: ${error.message}`);
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[6][1]++;
  }
  cov_rqzpocc2().s[33]++;
  return shipment;
}
async function createShipmentItems(shipmentId, orderItems, requestedItems) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[7]++;
  const shipmentItems =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[34]++, requestedItems.map(reqItem => {
    /* istanbul ignore next */
    cov_rqzpocc2().f[8]++;
    const orderItem =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[35]++, orderItems.find(oi => {
      /* istanbul ignore next */
      cov_rqzpocc2().f[9]++;
      cov_rqzpocc2().s[36]++;
      return oi.id === reqItem.order_item_id;
    }));
    /* istanbul ignore next */
    cov_rqzpocc2().s[37]++;
    if (!orderItem) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[7][0]++;
      cov_rqzpocc2().s[38]++;
      throw new Error(`Item de orden no encontrado: ${reqItem.order_item_id}`);
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[7][1]++;
    }
    cov_rqzpocc2().s[39]++;
    if (reqItem.quantity > orderItem.quantity) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[8][0]++;
      cov_rqzpocc2().s[40]++;
      throw new Error(`Cantidad solicitada (${reqItem.quantity}) excede cantidad disponible (${orderItem.quantity})`);
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[8][1]++;
    }
    cov_rqzpocc2().s[41]++;
    return {
      shipment_id: shipmentId,
      order_item_id: reqItem.order_item_id,
      product_id: orderItem.product_id,
      quantity: reqItem.quantity,
      weight_kg: (
      /* istanbul ignore next */
      (cov_rqzpocc2().b[9][0]++, orderItem.products?.weight_kg) ||
      /* istanbul ignore next */
      (cov_rqzpocc2().b[9][1]++, 0.5)) * reqItem.quantity,
      created_at: new Date().toISOString()
    };
  }));
  const {
    error
  } =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[42]++, await supabase.from('shipment_items').insert(shipmentItems));
  /* istanbul ignore next */
  cov_rqzpocc2().s[43]++;
  if (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[10][0]++;
    cov_rqzpocc2().s[44]++;
    throw new Error(`Error creando items de envío: ${error.message}`);
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[10][1]++;
  }
}
async function createInitialTrackingEvent(shipmentId) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[10]++;
  const {
    error
  } =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[45]++, await supabase.from('tracking_events').insert({
    shipment_id: shipmentId,
    status: 'pending',
    description: 'Envío creado desde orden - Pendiente de confirmación',
    occurred_at: new Date().toISOString(),
    created_at: new Date().toISOString()
  }));
  /* istanbul ignore next */
  cov_rqzpocc2().s[46]++;
  if (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[11][0]++;
    cov_rqzpocc2().s[47]++;
    console.error('Error creando evento de tracking inicial:', error);
    // No lanzar error, es opcional
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[11][1]++;
  }
}
async function updateOrderStatus(orderId) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[11]++;
  // Actualizar estado de la orden a "shipped" si todos los items tienen envío
  const {
    error
  } =
  /* istanbul ignore next */
  (cov_rqzpocc2().s[48]++, await supabase.from('orders').update({
    status: 'processing',
    updated_at: new Date().toISOString()
  }).eq('id', orderId));
  /* istanbul ignore next */
  cov_rqzpocc2().s[49]++;
  if (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().b[12][0]++;
    cov_rqzpocc2().s[50]++;
    console.error('Error actualizando estado de orden:', error);
    // No lanzar error, es opcional
  } else
  /* istanbul ignore next */
  {
    cov_rqzpocc2().b[12][1]++;
  }
}
async function POST(request, {
  params
}) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[12]++;
  cov_rqzpocc2().s[51]++;
  try {
    // Verificar autenticación
    const session =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[52]++, await (0, _auth.auth)());
    /* istanbul ignore next */
    cov_rqzpocc2().s[53]++;
    if (!session?.user) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[13][0]++;
      cov_rqzpocc2().s[54]++;
      return _server.NextResponse.json({
        error: 'No autorizado'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[13][1]++;
    }
    const orderId =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[55]++, params.id);
    // Validar datos de entrada
    const body =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[56]++, await request.json());
    const validationResult =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[57]++, CreateShipmentFromOrderSchema.safeParse(body));
    /* istanbul ignore next */
    cov_rqzpocc2().s[58]++;
    if (!validationResult.success) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[14][0]++;
      cov_rqzpocc2().s[59]++;
      return _server.NextResponse.json({
        error: 'Datos de envío inválidos',
        details: validationResult.error.errors
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[14][1]++;
    }
    const validatedData =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[60]++, validationResult.data);
    // Validar acceso a la orden y obtener datos
    const orderData =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[61]++, await validateOrderAccess(orderId, session.user.id));
    // Verificar que el carrier existe
    const {
      data: carrier,
      error: carrierError
    } =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[62]++, await supabase.from('couriers').select('id, name, is_active').eq('id', validatedData.carrier_id).eq('is_active', true).single());
    /* istanbul ignore next */
    cov_rqzpocc2().s[63]++;
    if (
    /* istanbul ignore next */
    (cov_rqzpocc2().b[16][0]++, carrierError) ||
    /* istanbul ignore next */
    (cov_rqzpocc2().b[16][1]++, !carrier)) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[15][0]++;
      cov_rqzpocc2().s[64]++;
      return _server.NextResponse.json({
        error: 'Carrier no encontrado o inactivo'
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[15][1]++;
    }
    // Crear el envío
    const shipment =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[65]++, await createShipmentRecord(orderData, validatedData));
    // Crear los items del envío
    /* istanbul ignore next */
    cov_rqzpocc2().s[66]++;
    await createShipmentItems(shipment.id, orderData.order_items, validatedData.items);
    // Crear evento de tracking inicial
    /* istanbul ignore next */
    cov_rqzpocc2().s[67]++;
    await createInitialTrackingEvent(shipment.id);
    // Actualizar estado de la orden
    /* istanbul ignore next */
    cov_rqzpocc2().s[68]++;
    await updateOrderStatus(orderId);
    // Obtener el envío completo con todos los datos
    const {
      data: completeShipment,
      error: fetchError
    } =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[69]++, await supabase.from('shipments').select(`
        *,
        carrier:couriers(id, name, code, logo_url),
        items:shipment_items(
          id, quantity, weight_kg,
          order_item:order_items(
            id, quantity, unit_price,
            product:products(id, name, sku)
          )
        ),
        tracking_events(
          id, status, description, occurred_at
        )
      `).eq('id', shipment.id).single());
    /* istanbul ignore next */
    cov_rqzpocc2().s[70]++;
    if (fetchError) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[17][0]++;
      cov_rqzpocc2().s[71]++;
      console.error('Error obteniendo envío completo:', fetchError);
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[17][1]++;
    }
    cov_rqzpocc2().s[72]++;
    console.log('✅ Envío creado exitosamente:', {
      shipment_id: shipment.id,
      shipment_number: shipment.shipment_number,
      order_id: orderId,
      carrier: carrier.name,
      user_id: session.user.id
    });
    /* istanbul ignore next */
    cov_rqzpocc2().s[73]++;
    return _server.NextResponse.json({
      success: true,
      message: 'Envío creado exitosamente',
      data:
      /* istanbul ignore next */
      (cov_rqzpocc2().b[18][0]++, completeShipment) ||
      /* istanbul ignore next */
      (cov_rqzpocc2().b[18][1]++, shipment)
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().s[74]++;
    console.error('❌ Error creando envío desde orden:', error);
    /* istanbul ignore next */
    cov_rqzpocc2().s[75]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor',
      details: error instanceof Error ?
      /* istanbul ignore next */
      (cov_rqzpocc2().b[19][0]++, error.message) :
      /* istanbul ignore next */
      (cov_rqzpocc2().b[19][1]++, 'Unknown error')
    }, {
      status: 500
    });
  }
}
async function GET(request, {
  params
}) {
  /* istanbul ignore next */
  cov_rqzpocc2().f[13]++;
  cov_rqzpocc2().s[76]++;
  try {
    // Verificar autenticación
    const session =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[77]++, await (0, _auth.auth)());
    /* istanbul ignore next */
    cov_rqzpocc2().s[78]++;
    if (!session?.user) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[20][0]++;
      cov_rqzpocc2().s[79]++;
      return _server.NextResponse.json({
        error: 'No autorizado'
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[20][1]++;
    }
    const orderId =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[80]++, params.id);
    // Obtener envíos de la orden
    const {
      data: shipments,
      error
    } =
    /* istanbul ignore next */
    (cov_rqzpocc2().s[81]++, await supabase.from('shipments').select(`
        *,
        carrier:couriers(id, name, code, logo_url),
        items:shipment_items(
          id, quantity, weight_kg,
          order_item:order_items(
            id, quantity, unit_price,
            product:products(id, name, sku)
          )
        ),
        tracking_events(
          id, status, description, occurred_at, location
        )
      `).eq('order_id', orderId).order('created_at', {
      ascending: false
    }));
    /* istanbul ignore next */
    cov_rqzpocc2().s[82]++;
    if (error) {
      /* istanbul ignore next */
      cov_rqzpocc2().b[21][0]++;
      cov_rqzpocc2().s[83]++;
      throw error;
    } else
    /* istanbul ignore next */
    {
      cov_rqzpocc2().b[21][1]++;
    }
    cov_rqzpocc2().s[84]++;
    return _server.NextResponse.json({
      success: true,
      data:
      /* istanbul ignore next */
      (cov_rqzpocc2().b[22][0]++, shipments) ||
      /* istanbul ignore next */
      (cov_rqzpocc2().b[22][1]++, [])
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_rqzpocc2().s[85]++;
    console.error('❌ Error obteniendo envíos de orden:', error);
    /* istanbul ignore next */
    cov_rqzpocc2().s[86]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor',
      details: error instanceof Error ?
      /* istanbul ignore next */
      (cov_rqzpocc2().b[23][0]++, error.message) :
      /* istanbul ignore next */
      (cov_rqzpocc2().b[23][1]++, 'Unknown error')
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHRVQiLCJjb3ZfcnF6cG9jYzIiLCJmIiwicyIsIlBPU1QiLCJzdXBhYmFzZSIsIl9zdXBhYmFzZWpzIiwiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJDcmVhdGVTaGlwbWVudEZyb21PcmRlclNjaGVtYSIsIl96b2QiLCJ6Iiwib2JqZWN0IiwiY2Fycmllcl9pZCIsIm51bWJlciIsImludCIsInBvc2l0aXZlIiwic2hpcHBpbmdfc2VydmljZSIsInN0cmluZyIsIm1pbiIsIml0ZW1zIiwiYXJyYXkiLCJvcmRlcl9pdGVtX2lkIiwidXVpZCIsInF1YW50aXR5IiwicGlja3VwX2FkZHJlc3MiLCJzdHJlZXRfbmFtZSIsInN0cmVldF9udW1iZXIiLCJjaXR5X25hbWUiLCJzdGF0ZV9uYW1lIiwiemlwX2NvZGUiLCJjb3VudHJ5IiwiZGVmYXVsdCIsIm9wdGlvbmFsIiwiZGVsaXZlcnlfYWRkcmVzcyIsImFwYXJ0bWVudCIsIndlaWdodF9rZyIsImRpbWVuc2lvbnNfY20iLCJzcGVjaWFsX2luc3RydWN0aW9ucyIsIm5vdGVzIiwiZXN0aW1hdGVkX2RlbGl2ZXJ5X2RhdGUiLCJnZW5lcmF0ZVNoaXBtZW50TnVtYmVyIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicmFuZG9tIiwiTWF0aCIsInN1YnN0ciIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJ2YWxpZGF0ZU9yZGVyQWNjZXNzIiwib3JkZXJJZCIsInVzZXJJZCIsImRhdGEiLCJvcmRlciIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiYiIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwic3RhdHVzIiwiY3JlYXRlU2hpcG1lbnRSZWNvcmQiLCJvcmRlckRhdGEiLCJ2YWxpZGF0ZWREYXRhIiwic2hpcG1lbnROdW1iZXIiLCJ0b3RhbFdlaWdodCIsIm9yZGVyX2l0ZW1zIiwicmVkdWNlIiwic3VtIiwiaXRlbSIsIml0ZW1XZWlnaHQiLCJwcm9kdWN0cyIsImRlbGl2ZXJ5QWRkcmVzcyIsInNoaXBwaW5nX2FkZHJlc3MiLCJzaGlwbWVudCIsImluc2VydCIsInNoaXBtZW50X251bWJlciIsIm9yZGVyX2lkIiwiaWQiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiY3JlYXRlU2hpcG1lbnRJdGVtcyIsInNoaXBtZW50SWQiLCJvcmRlckl0ZW1zIiwicmVxdWVzdGVkSXRlbXMiLCJzaGlwbWVudEl0ZW1zIiwibWFwIiwicmVxSXRlbSIsIm9yZGVySXRlbSIsImZpbmQiLCJvaSIsInNoaXBtZW50X2lkIiwicHJvZHVjdF9pZCIsImNyZWF0ZUluaXRpYWxUcmFja2luZ0V2ZW50IiwiZGVzY3JpcHRpb24iLCJvY2N1cnJlZF9hdCIsImNvbnNvbGUiLCJ1cGRhdGVPcmRlclN0YXR1cyIsInVwZGF0ZSIsInJlcXVlc3QiLCJwYXJhbXMiLCJzZXNzaW9uIiwiX2F1dGgiLCJhdXRoIiwidXNlciIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGV0YWlscyIsImVycm9ycyIsImNhcnJpZXIiLCJjYXJyaWVyRXJyb3IiLCJjb21wbGV0ZVNoaXBtZW50IiwiZmV0Y2hFcnJvciIsImxvZyIsIm5hbWUiLCJ1c2VyX2lkIiwic2hpcG1lbnRzIiwiYXNjZW5kaW5nIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxhcHBcXGFwaVxcYWRtaW5cXG9yZGVyc1xcW2lkXVxcc2hpcG1lbnRzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBUEk6IElOVEVHUkFDScOTTiDDk1JERU5FUy1MT0fDjVNUSUNBXHJcbi8vIFJ1dGE6IC9hcGkvYWRtaW4vb3JkZXJzL1tpZF0vc2hpcG1lbnRzXHJcbi8vIERlc2NyaXBjacOzbjogQ3JlYXIgeSBnZXN0aW9uYXIgZW52w61vcyBkZXNkZSDDs3JkZW5lc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJ0AvYXV0aCc7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ09ORklHVVJBQ0nDk05cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxyXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcclxuKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEVTUVVFTUFTIERFIFZBTElEQUNJw5NOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBDcmVhdGVTaGlwbWVudEZyb21PcmRlclNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBjYXJyaWVyX2lkOiB6Lm51bWJlcigpLmludCgpLnBvc2l0aXZlKCksXHJcbiAgc2hpcHBpbmdfc2VydmljZTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgaXRlbXM6IHouYXJyYXkoei5vYmplY3Qoe1xyXG4gICAgb3JkZXJfaXRlbV9pZDogei5zdHJpbmcoKS51dWlkKCksXHJcbiAgICBxdWFudGl0eTogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpXHJcbiAgfSkpLm1pbigxKSxcclxuICBwaWNrdXBfYWRkcmVzczogei5vYmplY3Qoe1xyXG4gICAgc3RyZWV0X25hbWU6IHouc3RyaW5nKCksXHJcbiAgICBzdHJlZXRfbnVtYmVyOiB6LnN0cmluZygpLFxyXG4gICAgY2l0eV9uYW1lOiB6LnN0cmluZygpLFxyXG4gICAgc3RhdGVfbmFtZTogei5zdHJpbmcoKSxcclxuICAgIHppcF9jb2RlOiB6LnN0cmluZygpLFxyXG4gICAgY291bnRyeTogei5zdHJpbmcoKS5kZWZhdWx0KCdBcmdlbnRpbmEnKVxyXG4gIH0pLm9wdGlvbmFsKCksXHJcbiAgZGVsaXZlcnlfYWRkcmVzczogei5vYmplY3Qoe1xyXG4gICAgc3RyZWV0X25hbWU6IHouc3RyaW5nKCksXHJcbiAgICBzdHJlZXRfbnVtYmVyOiB6LnN0cmluZygpLFxyXG4gICAgYXBhcnRtZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICBjaXR5X25hbWU6IHouc3RyaW5nKCksXHJcbiAgICBzdGF0ZV9uYW1lOiB6LnN0cmluZygpLFxyXG4gICAgemlwX2NvZGU6IHouc3RyaW5nKCksXHJcbiAgICBjb3VudHJ5OiB6LnN0cmluZygpLmRlZmF1bHQoJ0FyZ2VudGluYScpXHJcbiAgfSksXHJcbiAgd2VpZ2h0X2tnOiB6Lm51bWJlcigpLnBvc2l0aXZlKCkub3B0aW9uYWwoKSxcclxuICBkaW1lbnNpb25zX2NtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc3BlY2lhbF9pbnN0cnVjdGlvbnM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGVzdGltYXRlZF9kZWxpdmVyeV9kYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKClcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBGVU5DSU9ORVMgQVVYSUxJQVJFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVTaGlwbWVudE51bWJlcigpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCkudG9TdHJpbmcoKTtcclxuICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSkudG9VcHBlckNhc2UoKTtcclxuICByZXR1cm4gYFNIUC0ke3RpbWVzdGFtcC5zbGljZSgtOCl9LSR7cmFuZG9tfWA7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlT3JkZXJBY2Nlc3Mob3JkZXJJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgeyBkYXRhOiBvcmRlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnb3JkZXJzJylcclxuICAgIC5zZWxlY3QoYFxyXG4gICAgICBpZCxcclxuICAgICAgb3JkZXJfbnVtYmVyLFxyXG4gICAgICBzdGF0dXMsXHJcbiAgICAgIHBheW1lbnRfc3RhdHVzLFxyXG4gICAgICB0b3RhbCxcclxuICAgICAgc2hpcHBpbmdfYWRkcmVzcyxcclxuICAgICAgdXNlcl9wcm9maWxlcyAoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBlbWFpbFxyXG4gICAgICApLFxyXG4gICAgICBvcmRlcl9pdGVtcyAoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgcHJvZHVjdF9pZCxcclxuICAgICAgICBxdWFudGl0eSxcclxuICAgICAgICB1bml0X3ByaWNlLFxyXG4gICAgICAgIHByb2R1Y3RzIChcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIHdlaWdodF9rZyxcclxuICAgICAgICAgIGRpbWVuc2lvbnNfY21cclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgIGApXHJcbiAgICAuZXEoJ2lkJywgb3JkZXJJZClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIG9idGVuaWVuZG8gb3JkZW46ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcblxyXG4gIGlmICghb3JkZXIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignT3JkZW4gbm8gZW5jb250cmFkYScpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmVyaWZpY2FyIHF1ZSBsYSBvcmRlbiBlc3TDqSBlbiBlc3RhZG8gdsOhbGlkbyBwYXJhIGVudsOtb1xyXG4gIGlmICghWydjb25maXJtZWQnLCAncHJvY2Vzc2luZyddLmluY2x1ZGVzKG9yZGVyLnN0YXR1cykpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgTGEgb3JkZW4gZGViZSBlc3RhciBjb25maXJtYWRhIG8gZW4gcHJvY2VzYW1pZW50byBwYXJhIGNyZWFyIGVudsOtby4gRXN0YWRvIGFjdHVhbDogJHtvcmRlci5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3JkZXI7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNoaXBtZW50UmVjb3JkKG9yZGVyRGF0YTogYW55LCB2YWxpZGF0ZWREYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHNoaXBtZW50TnVtYmVyID0gZ2VuZXJhdGVTaGlwbWVudE51bWJlcigpO1xyXG4gIFxyXG4gIC8vIENhbGN1bGFyIHBlc28gdG90YWwgc2kgbm8gc2UgcHJvcG9yY2lvbmFcclxuICBsZXQgdG90YWxXZWlnaHQgPSB2YWxpZGF0ZWREYXRhLndlaWdodF9rZztcclxuICBpZiAoIXRvdGFsV2VpZ2h0KSB7XHJcbiAgICB0b3RhbFdlaWdodCA9IG9yZGVyRGF0YS5vcmRlcl9pdGVtcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBpdGVtOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgaXRlbVdlaWdodCA9IGl0ZW0ucHJvZHVjdHM/LndlaWdodF9rZyB8fCAwLjU7IC8vIFBlc28gcG9yIGRlZmVjdG8gNTAwZ1xyXG4gICAgICByZXR1cm4gc3VtICsgKGl0ZW1XZWlnaHQgKiBpdGVtLnF1YW50aXR5KTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNhciBkaXJlY2Npw7NuIGRlIGVudsOtbyBkZSBsYSBvcmRlbiBzaSBubyBzZSBwcm9wb3JjaW9uYVxyXG4gIGNvbnN0IGRlbGl2ZXJ5QWRkcmVzcyA9IHZhbGlkYXRlZERhdGEuZGVsaXZlcnlfYWRkcmVzcyB8fCBvcmRlckRhdGEuc2hpcHBpbmdfYWRkcmVzcztcclxuXHJcbiAgY29uc3QgeyBkYXRhOiBzaGlwbWVudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc2hpcG1lbnRzJylcclxuICAgIC5pbnNlcnQoe1xyXG4gICAgICBzaGlwbWVudF9udW1iZXI6IHNoaXBtZW50TnVtYmVyLFxyXG4gICAgICBvcmRlcl9pZDogb3JkZXJEYXRhLmlkLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgY2Fycmllcl9pZDogdmFsaWRhdGVkRGF0YS5jYXJyaWVyX2lkLFxyXG4gICAgICBzaGlwcGluZ19zZXJ2aWNlOiB2YWxpZGF0ZWREYXRhLnNoaXBwaW5nX3NlcnZpY2UsXHJcbiAgICAgIHBpY2t1cF9hZGRyZXNzOiB2YWxpZGF0ZWREYXRhLnBpY2t1cF9hZGRyZXNzLFxyXG4gICAgICBkZWxpdmVyeV9hZGRyZXNzOiBkZWxpdmVyeUFkZHJlc3MsXHJcbiAgICAgIHdlaWdodF9rZzogdG90YWxXZWlnaHQsXHJcbiAgICAgIGRpbWVuc2lvbnNfY206IHZhbGlkYXRlZERhdGEuZGltZW5zaW9uc19jbSxcclxuICAgICAgc3BlY2lhbF9pbnN0cnVjdGlvbnM6IHZhbGlkYXRlZERhdGEuc3BlY2lhbF9pbnN0cnVjdGlvbnMsXHJcbiAgICAgIG5vdGVzOiB2YWxpZGF0ZWREYXRhLm5vdGVzLFxyXG4gICAgICBlc3RpbWF0ZWRfZGVsaXZlcnlfZGF0ZTogdmFsaWRhdGVkRGF0YS5lc3RpbWF0ZWRfZGVsaXZlcnlfZGF0ZSxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pXHJcbiAgICAuc2VsZWN0KGBcclxuICAgICAgKixcclxuICAgICAgY2Fycmllcjpjb3VyaWVycyhpZCwgbmFtZSwgY29kZSwgbG9nb191cmwpXHJcbiAgICBgKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgY3JlYW5kbyBlbnbDrW86ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzaGlwbWVudDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2hpcG1lbnRJdGVtcyhzaGlwbWVudElkOiBzdHJpbmcsIG9yZGVySXRlbXM6IGFueVtdLCByZXF1ZXN0ZWRJdGVtczogYW55W10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBzaGlwbWVudEl0ZW1zID0gcmVxdWVzdGVkSXRlbXMubWFwKHJlcUl0ZW0gPT4ge1xyXG4gICAgY29uc3Qgb3JkZXJJdGVtID0gb3JkZXJJdGVtcy5maW5kKG9pID0+IG9pLmlkID09PSByZXFJdGVtLm9yZGVyX2l0ZW1faWQpO1xyXG4gICAgaWYgKCFvcmRlckl0ZW0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJdGVtIGRlIG9yZGVuIG5vIGVuY29udHJhZG86ICR7cmVxSXRlbS5vcmRlcl9pdGVtX2lkfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXFJdGVtLnF1YW50aXR5ID4gb3JkZXJJdGVtLnF1YW50aXR5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FudGlkYWQgc29saWNpdGFkYSAoJHtyZXFJdGVtLnF1YW50aXR5fSkgZXhjZWRlIGNhbnRpZGFkIGRpc3BvbmlibGUgKCR7b3JkZXJJdGVtLnF1YW50aXR5fSlgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzaGlwbWVudF9pZDogc2hpcG1lbnRJZCxcclxuICAgICAgb3JkZXJfaXRlbV9pZDogcmVxSXRlbS5vcmRlcl9pdGVtX2lkLFxyXG4gICAgICBwcm9kdWN0X2lkOiBvcmRlckl0ZW0ucHJvZHVjdF9pZCxcclxuICAgICAgcXVhbnRpdHk6IHJlcUl0ZW0ucXVhbnRpdHksXHJcbiAgICAgIHdlaWdodF9rZzogKG9yZGVySXRlbS5wcm9kdWN0cz8ud2VpZ2h0X2tnIHx8IDAuNSkgKiByZXFJdGVtLnF1YW50aXR5LFxyXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc2hpcG1lbnRfaXRlbXMnKVxyXG4gICAgLmluc2VydChzaGlwbWVudEl0ZW1zKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGNyZWFuZG8gaXRlbXMgZGUgZW52w61vOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVJbml0aWFsVHJhY2tpbmdFdmVudChzaGlwbWVudElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3RyYWNraW5nX2V2ZW50cycpXHJcbiAgICAuaW5zZXJ0KHtcclxuICAgICAgc2hpcG1lbnRfaWQ6IHNoaXBtZW50SWQsXHJcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0VudsOtbyBjcmVhZG8gZGVzZGUgb3JkZW4gLSBQZW5kaWVudGUgZGUgY29uZmlybWFjacOzbicsXHJcbiAgICAgIG9jY3VycmVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYW5kbyBldmVudG8gZGUgdHJhY2tpbmcgaW5pY2lhbDonLCBlcnJvcik7XHJcbiAgICAvLyBObyBsYW56YXIgZXJyb3IsIGVzIG9wY2lvbmFsXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlclN0YXR1cyhvcmRlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAvLyBBY3R1YWxpemFyIGVzdGFkbyBkZSBsYSBvcmRlbiBhIFwic2hpcHBlZFwiIHNpIHRvZG9zIGxvcyBpdGVtcyB0aWVuZW4gZW52w61vXHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdvcmRlcnMnKVxyXG4gICAgLnVwZGF0ZSh7IFxyXG4gICAgICBzdGF0dXM6ICdwcm9jZXNzaW5nJywgLy8gQ2FtYmlhciBhIHByb2Nlc3NpbmcgbWllbnRyYXMgc2UgY29uZmlybWEgZWwgZW52w61vXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSlcclxuICAgIC5lcSgnaWQnLCBvcmRlcklkKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhY3R1YWxpemFuZG8gZXN0YWRvIGRlIG9yZGVuOicsIGVycm9yKTtcclxuICAgIC8vIE5vIGxhbnphciBlcnJvciwgZXMgb3BjaW9uYWxcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhBTkRMRVIgUE9TVCAtIENSRUFSIEVOVsONTyBERVNERSBPUkRFTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QoXHJcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2FjacOzblxyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ05vIGF1dG9yaXphZG8nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3JkZXJJZCA9IHBhcmFtcy5pZDtcclxuXHJcbiAgICAvLyBWYWxpZGFyIGRhdG9zIGRlIGVudHJhZGFcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBDcmVhdGVTaGlwbWVudEZyb21PcmRlclNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XHJcblxyXG4gICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogJ0RhdG9zIGRlIGVudsOtbyBpbnbDoWxpZG9zJywgXHJcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmVycm9ycyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSB2YWxpZGF0aW9uUmVzdWx0LmRhdGE7XHJcblxyXG4gICAgLy8gVmFsaWRhciBhY2Nlc28gYSBsYSBvcmRlbiB5IG9idGVuZXIgZGF0b3NcclxuICAgIGNvbnN0IG9yZGVyRGF0YSA9IGF3YWl0IHZhbGlkYXRlT3JkZXJBY2Nlc3Mob3JkZXJJZCwgc2Vzc2lvbi51c2VyLmlkISk7XHJcblxyXG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBlbCBjYXJyaWVyIGV4aXN0ZVxyXG4gICAgY29uc3QgeyBkYXRhOiBjYXJyaWVyLCBlcnJvcjogY2FycmllckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY291cmllcnMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgbmFtZSwgaXNfYWN0aXZlJylcclxuICAgICAgLmVxKCdpZCcsIHZhbGlkYXRlZERhdGEuY2Fycmllcl9pZClcclxuICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGNhcnJpZXJFcnJvciB8fCAhY2Fycmllcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0NhcnJpZXIgbm8gZW5jb250cmFkbyBvIGluYWN0aXZvJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWFyIGVsIGVudsOtb1xyXG4gICAgY29uc3Qgc2hpcG1lbnQgPSBhd2FpdCBjcmVhdGVTaGlwbWVudFJlY29yZChvcmRlckRhdGEsIHZhbGlkYXRlZERhdGEpO1xyXG5cclxuICAgIC8vIENyZWFyIGxvcyBpdGVtcyBkZWwgZW52w61vXHJcbiAgICBhd2FpdCBjcmVhdGVTaGlwbWVudEl0ZW1zKHNoaXBtZW50LmlkLCBvcmRlckRhdGEub3JkZXJfaXRlbXMsIHZhbGlkYXRlZERhdGEuaXRlbXMpO1xyXG5cclxuICAgIC8vIENyZWFyIGV2ZW50byBkZSB0cmFja2luZyBpbmljaWFsXHJcbiAgICBhd2FpdCBjcmVhdGVJbml0aWFsVHJhY2tpbmdFdmVudChzaGlwbWVudC5pZCk7XHJcblxyXG4gICAgLy8gQWN0dWFsaXphciBlc3RhZG8gZGUgbGEgb3JkZW5cclxuICAgIGF3YWl0IHVwZGF0ZU9yZGVyU3RhdHVzKG9yZGVySWQpO1xyXG5cclxuICAgIC8vIE9idGVuZXIgZWwgZW52w61vIGNvbXBsZXRvIGNvbiB0b2RvcyBsb3MgZGF0b3NcclxuICAgIGNvbnN0IHsgZGF0YTogY29tcGxldGVTaGlwbWVudCwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdzaGlwbWVudHMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIGNhcnJpZXI6Y291cmllcnMoaWQsIG5hbWUsIGNvZGUsIGxvZ29fdXJsKSxcclxuICAgICAgICBpdGVtczpzaGlwbWVudF9pdGVtcyhcclxuICAgICAgICAgIGlkLCBxdWFudGl0eSwgd2VpZ2h0X2tnLFxyXG4gICAgICAgICAgb3JkZXJfaXRlbTpvcmRlcl9pdGVtcyhcclxuICAgICAgICAgICAgaWQsIHF1YW50aXR5LCB1bml0X3ByaWNlLFxyXG4gICAgICAgICAgICBwcm9kdWN0OnByb2R1Y3RzKGlkLCBuYW1lLCBza3UpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSxcclxuICAgICAgICB0cmFja2luZ19ldmVudHMoXHJcbiAgICAgICAgICBpZCwgc3RhdHVzLCBkZXNjcmlwdGlvbiwgb2NjdXJyZWRfYXRcclxuICAgICAgICApXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnaWQnLCBzaGlwbWVudC5pZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChmZXRjaEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9idGVuaWVuZG8gZW52w61vIGNvbXBsZXRvOicsIGZldGNoRXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUgRW52w61vIGNyZWFkbyBleGl0b3NhbWVudGU6Jywge1xyXG4gICAgICBzaGlwbWVudF9pZDogc2hpcG1lbnQuaWQsXHJcbiAgICAgIHNoaXBtZW50X251bWJlcjogc2hpcG1lbnQuc2hpcG1lbnRfbnVtYmVyLFxyXG4gICAgICBvcmRlcl9pZDogb3JkZXJJZCxcclxuICAgICAgY2FycmllcjogY2Fycmllci5uYW1lLFxyXG4gICAgICB1c2VyX2lkOiBzZXNzaW9uLnVzZXIuaWRcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdFbnbDrW8gY3JlYWRvIGV4aXRvc2FtZW50ZScsXHJcbiAgICAgIGRhdGE6IGNvbXBsZXRlU2hpcG1lbnQgfHwgc2hpcG1lbnRcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNyZWFuZG8gZW52w61vIGRlc2RlIG9yZGVuOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhBTkRMRVIgR0VUIC0gT0JURU5FUiBFTlbDjU9TIERFIFVOQSBPUkRFTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcclxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcclxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgLy8gVmVyaWZpY2FyIGF1dGVudGljYWNpw7NuXHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgYXV0aCgpO1xyXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTm8gYXV0b3JpemFkbycgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcmRlcklkID0gcGFyYW1zLmlkO1xyXG5cclxuICAgIC8vIE9idGVuZXIgZW52w61vcyBkZSBsYSBvcmRlblxyXG4gICAgY29uc3QgeyBkYXRhOiBzaGlwbWVudHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnc2hpcG1lbnRzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBjYXJyaWVyOmNvdXJpZXJzKGlkLCBuYW1lLCBjb2RlLCBsb2dvX3VybCksXHJcbiAgICAgICAgaXRlbXM6c2hpcG1lbnRfaXRlbXMoXHJcbiAgICAgICAgICBpZCwgcXVhbnRpdHksIHdlaWdodF9rZyxcclxuICAgICAgICAgIG9yZGVyX2l0ZW06b3JkZXJfaXRlbXMoXHJcbiAgICAgICAgICAgIGlkLCBxdWFudGl0eSwgdW5pdF9wcmljZSxcclxuICAgICAgICAgICAgcHJvZHVjdDpwcm9kdWN0cyhpZCwgbmFtZSwgc2t1KVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgdHJhY2tpbmdfZXZlbnRzKFxyXG4gICAgICAgICAgaWQsIHN0YXR1cywgZGVzY3JpcHRpb24sIG9jY3VycmVkX2F0LCBsb2NhdGlvblxyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLmVxKCdvcmRlcl9pZCcsIG9yZGVySWQpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogc2hpcG1lbnRzIHx8IFtdXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBvYnRlbmllbmRvIGVudsOtb3MgZGUgb3JkZW46JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgXHJcbiAgICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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