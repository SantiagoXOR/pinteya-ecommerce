{"version":3,"names":["cov_zeetmlbdt","actualCoverage","s","PERFORMANCE_BUDGETS","f","PerformanceBudgetMonitor","default","_default","usePerformanceBudget","LCP","FID","CLS","FCP","TTI","totalJSSize","totalCSSSize","totalImageSize","totalRequests","totalTransferSize","constructor","metrics","observers","window","b","initializeObservers","lcpObserver","PerformanceObserver","list","entries","getEntries","lastEntry","length","recordMetric","startTime","observe","entryTypes","push","fidObserver","forEach","entry","processingStart","clsObserver","clsValue","hadRecentInput","value","navObserver","firstContentfulPaint","domInteractive","type","currentUrl","location","pathname","timestamp","Date","now","existingMetrics","find","m","url","violations","score","checkViolations","calculateScore","Object","key","budgetKey","budget","undefined","violation","toFixed","weights","totalScore","totalWeight","weight","Math","max","min","getCurrentMetrics","filter","sort","a","getAllMetrics","getCurrentViolations","current","getCurrentScore","isWithinBudget","generateReport","recommendations","includes","summary","withinBudget","cleanup","observer","disconnect","globalMonitor","monitor"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\utils\\performanceBudget.ts"],"sourcesContent":["// ===================================\r\n// PERFORMANCE BUDGET MONITORING\r\n// Sistema de monitoreo de presupuesto de performance\r\n// ===================================\r\n\r\ninterface PerformanceBudget {\r\n  // Core Web Vitals\r\n  LCP: number; // Largest Contentful Paint (ms)\r\n  FID: number; // First Input Delay (ms)\r\n  CLS: number; // Cumulative Layout Shift (score)\r\n  \r\n  // Loading Performance\r\n  FCP: number; // First Contentful Paint (ms)\r\n  TTI: number; // Time to Interactive (ms)\r\n  \r\n  // Bundle Size\r\n  totalJSSize: number; // Total JavaScript size (KB)\r\n  totalCSSSize: number; // Total CSS size (KB)\r\n  totalImageSize: number; // Total image size (KB)\r\n  \r\n  // Network\r\n  totalRequests: number; // Total number of requests\r\n  totalTransferSize: number; // Total transfer size (KB)\r\n}\r\n\r\n// Presupuestos objetivo para Pinteya E-commerce\r\nexport const PERFORMANCE_BUDGETS: PerformanceBudget = {\r\n  // Core Web Vitals (valores \"Good\" según Google)\r\n  LCP: 2500,  // < 2.5s\r\n  FID: 100,   // < 100ms\r\n  CLS: 0.1,   // < 0.1\r\n\r\n  // Loading Performance\r\n  FCP: 1800,  // < 1.8s\r\n  TTI: 3800,  // < 3.8s\r\n\r\n  // Bundle Size (optimizado para e-commerce)\r\n  totalJSSize: 500,   // < 500KB\r\n  totalCSSSize: 100,  // < 100KB\r\n  totalImageSize: 1000, // < 1MB\r\n\r\n  // Network\r\n  totalRequests: 50,    // < 50 requests\r\n  totalTransferSize: 2000, // < 2MB\r\n};\r\n\r\ninterface PerformanceMetrics {\r\n  timestamp: number;\r\n  url: string;\r\n  metrics: Partial<PerformanceBudget>;\r\n  violations: string[];\r\n  score: number; // 0-100\r\n}\r\n\r\n/**\r\n * Clase para monitorear performance budget\r\n */\r\nexport class PerformanceBudgetMonitor {\r\n  private metrics: PerformanceMetrics[] = [];\r\n  private observers: PerformanceObserver[] = [];\r\n\r\n  constructor() {\r\n    if (typeof window !== 'undefined') {\r\n      this.initializeObservers();\r\n    }\r\n  }\r\n\r\n  private initializeObservers() {\r\n    // Observer para Core Web Vitals\r\n    if ('PerformanceObserver' in window) {\r\n      // LCP Observer\r\n      const lcpObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        const lastEntry = entries[entries.length - 1] as any;\r\n        if (lastEntry) {\r\n          this.recordMetric('LCP', lastEntry.startTime);\r\n        }\r\n      });\r\n      lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\r\n      this.observers.push(lcpObserver);\r\n\r\n      // FID Observer\r\n      const fidObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        entries.forEach((entry: any) => {\r\n          this.recordMetric('FID', entry.processingStart - entry.startTime);\r\n        });\r\n      });\r\n      fidObserver.observe({ entryTypes: ['first-input'] });\r\n      this.observers.push(fidObserver);\r\n\r\n      // CLS Observer\r\n      const clsObserver = new PerformanceObserver((list) => {\r\n        let clsValue = 0;\r\n        const entries = list.getEntries();\r\n        entries.forEach((entry: any) => {\r\n          if (!entry.hadRecentInput) {\r\n            clsValue += entry.value;\r\n          }\r\n        });\r\n        this.recordMetric('CLS', clsValue);\r\n      });\r\n      clsObserver.observe({ entryTypes: ['layout-shift'] });\r\n      this.observers.push(clsObserver);\r\n\r\n      // Navigation Observer\r\n      const navObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        entries.forEach((entry: any) => {\r\n          this.recordMetric('FCP', entry.firstContentfulPaint);\r\n          this.recordMetric('TTI', entry.domInteractive);\r\n        });\r\n      });\r\n      navObserver.observe({ entryTypes: ['navigation'] });\r\n      this.observers.push(navObserver);\r\n    }\r\n  }\r\n\r\n  private recordMetric(type: keyof PerformanceBudget, value: number) {\r\n    const currentUrl = window.location.pathname;\r\n    const timestamp = Date.now();\r\n\r\n    // Buscar métricas existentes para esta URL\r\n    let existingMetrics = this.metrics.find(m => \r\n      m.url === currentUrl && \r\n      timestamp - m.timestamp < 5000 // Agrupar métricas de los últimos 5 segundos\r\n    );\r\n\r\n    if (!existingMetrics) {\r\n      existingMetrics = {\r\n        timestamp,\r\n        url: currentUrl,\r\n        metrics: {},\r\n        violations: [],\r\n        score: 0,\r\n      };\r\n      this.metrics.push(existingMetrics);\r\n    }\r\n\r\n    existingMetrics.metrics[type] = value;\r\n    this.checkViolations(existingMetrics);\r\n    this.calculateScore(existingMetrics);\r\n  }\r\n\r\n  private checkViolations(metrics: PerformanceMetrics) {\r\n    metrics.violations = [];\r\n\r\n    Object.entries(metrics.metrics).forEach(([key, value]) => {\r\n      const budgetKey = key as keyof PerformanceBudget;\r\n      const budget = PERFORMANCE_BUDGETS[budgetKey];\r\n      \r\n      if (value !== undefined && value > budget) {\r\n        const violation = `${key}: ${value.toFixed(2)} exceeds budget of ${budget}`;\r\n        metrics.violations.push(violation);\r\n      }\r\n    });\r\n  }\r\n\r\n  private calculateScore(metrics: PerformanceMetrics): void {\r\n    const weights = {\r\n      LCP: 25,\r\n      FID: 25,\r\n      CLS: 25,\r\n      FCP: 10,\r\n      TTI: 10,\r\n      totalJSSize: 3,\r\n      totalCSSSize: 1,\r\n      totalImageSize: 1,\r\n    };\r\n\r\n    let totalScore = 0;\r\n    let totalWeight = 0;\r\n\r\n    Object.entries(metrics.metrics).forEach(([key, value]) => {\r\n      const budgetKey = key as keyof typeof weights;\r\n      const weight = weights[budgetKey];\r\n      \r\n      if (weight && value !== undefined) {\r\n        const budget = PERFORMANCE_BUDGETS[budgetKey as keyof PerformanceBudget];\r\n        const score = Math.max(0, Math.min(100, 100 - ((value - budget) / budget) * 100));\r\n        \r\n        totalScore += score * weight;\r\n        totalWeight += weight;\r\n      }\r\n    });\r\n\r\n    metrics.score = totalWeight > 0 ? totalScore / totalWeight : 0;\r\n  }\r\n\r\n  /**\r\n   * Obtener métricas actuales\r\n   */\r\n  getCurrentMetrics(): PerformanceMetrics | null {\r\n    const currentUrl = window.location.pathname;\r\n    return this.metrics\r\n      .filter(m => m.url === currentUrl)\r\n      .sort((a, b) => b.timestamp - a.timestamp)[0] || null;\r\n  }\r\n\r\n  /**\r\n   * Obtener todas las métricas\r\n   */\r\n  getAllMetrics(): PerformanceMetrics[] {\r\n    return [...this.metrics];\r\n  }\r\n\r\n  /**\r\n   * Obtener violaciones actuales\r\n   */\r\n  getCurrentViolations(): string[] {\r\n    const current = this.getCurrentMetrics();\r\n    return current ? current.violations : [];\r\n  }\r\n\r\n  /**\r\n   * Obtener score actual\r\n   */\r\n  getCurrentScore(): number {\r\n    const current = this.getCurrentMetrics();\r\n    return current ? current.score : 0;\r\n  }\r\n\r\n  /**\r\n   * Verificar si se cumple el presupuesto\r\n   */\r\n  isWithinBudget(): boolean {\r\n    const violations = this.getCurrentViolations();\r\n    return violations.length === 0;\r\n  }\r\n\r\n  /**\r\n   * Generar reporte de performance\r\n   */\r\n  generateReport(): {\r\n    summary: {\r\n      score: number;\r\n      violations: number;\r\n      withinBudget: boolean;\r\n    };\r\n    metrics: PerformanceMetrics | null;\r\n    recommendations: string[];\r\n  } {\r\n    const current = this.getCurrentMetrics();\r\n    const violations = this.getCurrentViolations();\r\n    \r\n    const recommendations: string[] = [];\r\n    \r\n    if (current) {\r\n      // Generar recomendaciones basadas en violaciones\r\n      violations.forEach(violation => {\r\n        if (violation.includes('LCP')) {\r\n          recommendations.push('Optimizar imágenes y lazy loading para mejorar LCP');\r\n        }\r\n        if (violation.includes('FID')) {\r\n          recommendations.push('Reducir JavaScript blocking y optimizar event handlers');\r\n        }\r\n        if (violation.includes('CLS')) {\r\n          recommendations.push('Definir dimensiones de imágenes y evitar content shifts');\r\n        }\r\n        if (violation.includes('totalJSSize')) {\r\n          recommendations.push('Implementar code splitting y tree shaking');\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      summary: {\r\n        score: this.getCurrentScore(),\r\n        violations: violations.length,\r\n        withinBudget: this.isWithinBudget(),\r\n      },\r\n      metrics: current,\r\n      recommendations,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Limpiar observers\r\n   */\r\n  cleanup() {\r\n    this.observers.forEach(observer => observer.disconnect());\r\n    this.observers = [];\r\n  }\r\n}\r\n\r\n// Instancia global del monitor\r\nlet globalMonitor: PerformanceBudgetMonitor | null = null;\r\n\r\n/**\r\n * Hook para usar el monitor de performance budget\r\n */\r\nexport const usePerformanceBudget = () => {\r\n  if (typeof window === 'undefined') {\r\n    return {\r\n      monitor: null,\r\n      getCurrentMetrics: () => null,\r\n      getCurrentScore: () => 0,\r\n      getCurrentViolations: () => [],\r\n      isWithinBudget: () => true,\r\n      generateReport: () => ({\r\n        summary: { score: 0, violations: 0, withinBudget: true },\r\n        metrics: null,\r\n        recommendations: [],\r\n      }),\r\n    };\r\n  }\r\n\r\n  if (!globalMonitor) {\r\n    globalMonitor = new PerformanceBudgetMonitor();\r\n  }\r\n\r\n  return {\r\n    monitor: globalMonitor,\r\n    getCurrentMetrics: () => globalMonitor!.getCurrentMetrics(),\r\n    getCurrentScore: () => globalMonitor!.getCurrentScore(),\r\n    getCurrentViolations: () => globalMonitor!.getCurrentViolations(),\r\n    isWithinBudget: () => globalMonitor!.isWithinBudget(),\r\n    generateReport: () => globalMonitor!.generateReport(),\r\n  };\r\n};\r\n\r\nexport default PerformanceBudgetMonitor;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}