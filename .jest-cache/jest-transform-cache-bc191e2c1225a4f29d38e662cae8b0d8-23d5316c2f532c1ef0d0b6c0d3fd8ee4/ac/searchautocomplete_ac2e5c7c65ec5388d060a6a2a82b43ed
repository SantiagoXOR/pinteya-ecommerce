ce63ace48047a6d016895fe7af06e830
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get SearchAutocomplete () {
        return SearchAutocomplete;
    },
    get searchAutocompleteVariants () {
        return searchAutocompleteVariants;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _classvarianceauthority = require("class-variance-authority");
const _utils = require("../../lib/utils");
const _lucidereact = require("lucide-react");
const _navigation = require("next/navigation");
const _products = require("../../lib/api/products");
const _badge = require("./badge");
const _image = /*#__PURE__*/ _interop_require_default(require("next/image"));
const _useTrendingSearches = require("../../hooks/useTrendingSearches");
const _useRecentSearches = require("../../hooks/useRecentSearches");
const _shop = require("../../constants/shop");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const searchAutocompleteVariants = (0, _classvarianceauthority.cva)('relative w-full', {
    variants: {
        size: {
            sm: 'text-sm',
            md: 'text-base',
            lg: 'text-lg'
        }
    },
    defaultVariants: {
        size: 'md'
    }
});
// Búsquedas trending por defecto para pinturería
const defaultTrendingSearches = [
    {
        id: 'trending-1',
        type: 'trending',
        title: 'Pintura látex',
        href: '/shop?search=pintura+latex'
    },
    {
        id: 'trending-2',
        type: 'trending',
        title: 'Sherwin Williams',
        href: '/shop?search=sherwin+williams'
    },
    {
        id: 'trending-3',
        type: 'trending',
        title: 'Rodillos premium',
        href: '/shop?search=rodillos+premium'
    },
    {
        id: 'trending-4',
        type: 'trending',
        title: 'Pinceles',
        href: '/shop?search=pinceles'
    }
];
const SearchAutocomplete = /*#__PURE__*/ _react.forwardRef(({ className, size, onSearch, onSuggestionSelect, showRecentSearches = true, showTrendingSearches = true, maxSuggestions = 8, debounceMs = 300, placeholder = 'Látex interior blanco 20lts, rodillos, pinceles...', // Props opcionales para integración con hooks externos
query: externalQuery, suggestions: externalSuggestions, isLoading: externalIsLoading, error: externalError, searchWithDebounce: externalSearchWithDebounce, onClear: externalOnClear, ...props }, ref)=>{
    // Hook para obtener búsquedas trending reales
    const { trendingSearches, trackSearch } = (0, _useTrendingSearches.useTrendingSearches)({
        limit: 4,
        enabled: showTrendingSearches
    });
    // Hook para gestionar búsquedas recientes
    const { recentSearches, addSearch: addRecentSearch, getRecentSearches } = (0, _useRecentSearches.useRecentSearches)({
        maxSearches: _shop.SEARCH_CONSTANTS.MAX_RECENT_SEARCHES,
        enablePersistence: showRecentSearches,
        expirationDays: _shop.SEARCH_CONSTANTS.RECENT_SEARCHES_EXPIRATION_DAYS
    });
    // Estado interno (usado solo si no hay props externas)
    const [internalQuery, setInternalQuery] = (0, _react.useState)('');
    const [internalSuggestions, setInternalSuggestions] = (0, _react.useState)([]);
    const [internalIsLoading, setInternalIsLoading] = (0, _react.useState)(false);
    const [isOpen, setIsOpen] = (0, _react.useState)(false);
    const [selectedIndex, setSelectedIndex] = (0, _react.useState)(-1);
    // Usar props externas si están disponibles, sino usar estado interno
    const query = externalQuery !== undefined ? externalQuery : internalQuery;
    const suggestions = externalSuggestions !== undefined ? externalSuggestions : internalSuggestions;
    const isLoading = externalIsLoading !== undefined ? externalIsLoading : internalIsLoading;
    const error = externalError;
    const router = (0, _navigation.useRouter)();
    const inputRef = (0, _react.useRef)(null);
    const dropdownRef = (0, _react.useRef)(null);
    const debounceRef = (0, _react.useRef)();
    // Buscar productos con debounce
    const searchProductsDebounced = (0, _react.useCallback)(async (searchQuery)=>{
        // No ejecutar si hay props externas
        if (externalSuggestions !== undefined) {
            return;
        }
        if (!searchQuery.trim()) {
            setInternalSuggestions([]);
            return;
        }
        setInternalIsLoading(true);
        try {
            const response = await (0, _products.searchProducts)(searchQuery, 6);
            if (response.success && response.data) {
                const productSuggestions = response.data.map((product)=>({
                        id: `product-${product.id}`,
                        type: 'product',
                        title: product.name,
                        subtitle: product.category?.name,
                        image: product.images?.previews?.[0] || product.images?.thumbnails?.[0] || '/images/products/placeholder.jpg',
                        badge: product.stock > 0 ? 'En stock' : 'Sin stock',
                        href: `/product/${product.id}`
                    }));
                setInternalSuggestions(productSuggestions.slice(0, maxSuggestions));
            }
        } catch (error) {
            console.error('Error searching products:', error);
            setInternalSuggestions([]);
        } finally{
            setInternalIsLoading(false);
        }
    }, [
        maxSuggestions,
        externalSuggestions
    ]);
    // Manejar cambio en el input
    const handleInputChange = (e)=>{
        const value = e.target.value;
        // Si hay función externa de búsqueda, usarla
        if (externalSearchWithDebounce) {
            externalSearchWithDebounce(value);
        } else {
            // Usar lógica interna
            setInternalQuery(value);
            setSelectedIndex(-1);
            // Limpiar debounce anterior
            if (debounceRef.current) {
                clearTimeout(debounceRef.current);
            }
            // Configurar nuevo debounce
            debounceRef.current = setTimeout(()=>{
                searchProductsDebounced(value);
            }, debounceMs);
        }
    };
    // Mostrar sugerencias por defecto cuando se enfoca
    const handleFocus = ()=>{
        setIsOpen(true);
        if (!query.trim() && !externalSuggestions) {
            // Solo mostrar sugerencias por defecto si no hay props externas
            const defaultSuggestions = [];
            // Agregar búsquedas recientes
            if (showRecentSearches && recentSearches.length > 0) {
                defaultSuggestions.push(...getRecentSearches(3).map((search, index)=>({
                        id: `recent-${index}`,
                        type: 'recent',
                        title: search,
                        href: `/search?q=${encodeURIComponent(search)}`
                    })));
            }
            // Agregar búsquedas trending reales
            if (showTrendingSearches && trendingSearches.length > 0) {
                const trendingSuggestions = trendingSearches.map((trending)=>({
                        id: trending.id,
                        type: 'trending',
                        title: trending.query,
                        href: trending.href,
                        badge: trending.count ? `${trending.count}` : undefined
                    }));
                defaultSuggestions.push(...trendingSuggestions.slice(0, 4));
            }
            setInternalSuggestions(defaultSuggestions.slice(0, maxSuggestions));
        }
    };
    // Manejar selección de sugerencia
    const handleSuggestionSelect = (suggestion)=>{
        if (suggestion.type === 'product' || suggestion.type === 'category') {
            addRecentSearch(suggestion.title);
        }
        // Registrar búsquedas trending y recientes en analytics
        if (suggestion.type === 'trending' || suggestion.type === 'recent') {
            trackSearch(suggestion.title).catch(console.warn);
        }
        // Solo actualizar query interna si no hay query externa
        if (externalQuery === undefined) {
            setInternalQuery(suggestion.title);
        }
        setIsOpen(false);
        if (onSuggestionSelect) {
            onSuggestionSelect(suggestion);
        } else {
            router.push(suggestion.href);
        }
    };
    // Manejar envío del formulario
    const handleSubmit = (e)=>{
        e.preventDefault();
        if (query.trim()) {
            addRecentSearch(query.trim());
            setIsOpen(false);
            // Registrar búsqueda en analytics para trending
            trackSearch(query.trim()).catch(console.warn);
            if (onSearch) {
                onSearch(query.trim());
            } else {
                router.push(`/search?q=${encodeURIComponent(query.trim())}`);
            }
        }
    };
    // Manejar teclas
    const handleKeyDown = (e)=>{
        if (!isOpen) {
            return;
        }
        switch(e.key){
            case 'ArrowDown':
                e.preventDefault();
                setSelectedIndex((prev)=>prev < suggestions.length - 1 ? prev + 1 : prev);
                break;
            case 'ArrowUp':
                e.preventDefault();
                setSelectedIndex((prev)=>prev > 0 ? prev - 1 : -1);
                break;
            case 'Enter':
                e.preventDefault();
                if (selectedIndex >= 0 && suggestions[selectedIndex]) {
                    handleSuggestionSelect(suggestions[selectedIndex]);
                } else {
                    handleSubmit(e);
                }
                break;
            case 'Escape':
                setIsOpen(false);
                setSelectedIndex(-1);
                break;
        }
    };
    // Cerrar dropdown al hacer click fuera
    (0, _react.useEffect)(()=>{
        const handleClickOutside = (event)=>{
            if (dropdownRef.current && !dropdownRef.current.contains(event.target) && inputRef.current && !inputRef.current.contains(event.target)) {
                setIsOpen(false);
            }
        };
        document.addEventListener('mousedown', handleClickOutside);
        return ()=>document.removeEventListener('mousedown', handleClickOutside);
    }, []);
    // Limpiar debounce al desmontar
    (0, _react.useEffect)(()=>{
        return ()=>{
            if (debounceRef.current) {
                clearTimeout(debounceRef.current);
            }
        };
    }, []);
    const getSuggestionIcon = (type)=>{
        switch(type){
            case 'recent':
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Clock, {
                    className: "w-4 h-4 text-gray-400"
                });
            case 'trending':
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.TrendingUp, {
                    className: "w-4 h-4 text-fun-green-600"
                });
            case 'product':
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Package, {
                    className: "w-4 h-4 text-gray-600"
                });
            default:
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Search, {
                    className: "w-4 h-4 text-gray-400"
                });
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: (0, _utils.cn)(searchAutocompleteVariants({
            size
        }), className),
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "relative",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                            ref: inputRef,
                            type: "search",
                            value: query,
                            onChange: handleInputChange,
                            onFocus: handleFocus,
                            onKeyDown: handleKeyDown,
                            placeholder: placeholder,
                            autoComplete: "off",
                            "data-testid": "search-input",
                            className: (0, _utils.cn)('w-full rounded-r-[5px] bg-yellow-100 border border-gray-3 py-2.5 pl-4 pr-10 outline-none transition-all duration-200', 'focus:border-primary/50 focus:ring-2 focus:ring-primary/20', 'placeholder:text-gray-400 placeholder:font-normal', size === 'sm' && 'py-2 text-sm', size === 'lg' && 'py-3 text-lg'),
                            ...props
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",
                            children: [
                                query && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "button",
                                    onClick: ()=>{
                                        if (externalOnClear) {
                                            externalOnClear();
                                        } else {
                                            setInternalQuery('');
                                            setInternalSuggestions([]);
                                        }
                                        inputRef.current?.focus();
                                    },
                                    className: "text-gray-400 hover:text-gray-600 transition-colors",
                                    "aria-label": "Clear search",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.X, {
                                        className: "w-4 h-4"
                                    })
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "submit",
                                    className: "text-gray-500 hover:text-primary transition-colors",
                                    "aria-label": "Search",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_lucidereact.Search, {
                                        className: "w-4 h-4"
                                    })
                                })
                            ]
                        })
                    ]
                }),
                isOpen && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    ref: dropdownRef,
                    className: "absolute top-full left-0 right-0 z-50 mt-1 rounded-md shadow-lg max-h-96 overflow-y-auto",
                    style: {
                        backgroundColor: '#fff3c5'
                    },
                    role: "listbox",
                    "aria-label": "Search suggestions",
                    children: [
                        isLoading && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "p-4 text-center text-gray-500",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "animate-spin w-5 h-5 border-2 border-primary border-t-transparent rounded-full mx-auto mb-2"
                                }),
                                "Buscando..."
                            ]
                        }),
                        !isLoading && suggestions.length === 0 && query.trim() && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "p-4 text-center text-gray-500",
                            children: [
                                'No se encontraron resultados para "',
                                query,
                                '"'
                            ]
                        }),
                        !isLoading && suggestions.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "py-2",
                            children: [
                                showRecentSearches && suggestions.some((s)=>s.type === 'recent') && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "px-3 py-2",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                                            className: "text-xs font-medium text-fun-green-700 uppercase tracking-wide mb-2",
                                            children: "B\xfasquedas recientes"
                                        }),
                                        suggestions.filter((s)=>s.type === 'recent').map((suggestion, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                                                onClick: ()=>handleSuggestionSelect(suggestion),
                                                onMouseEnter: ()=>setSelectedIndex(suggestions.indexOf(suggestion)),
                                                className: (0, _utils.cn)('w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/50 hover:border-l-2 hover:border-fun-green-500 rounded-md transition-all duration-200', selectedIndex === suggestions.indexOf(suggestion) && 'bg-white/70 border-l-2 border-fun-green-600'),
                                                role: "option",
                                                "aria-selected": selectedIndex === suggestions.indexOf(suggestion),
                                                children: [
                                                    getSuggestionIcon(suggestion.type),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                        className: "text-sm text-gray-700",
                                                        children: suggestion.title
                                                    })
                                                ]
                                            }, suggestion.id))
                                    ]
                                }),
                                suggestions.some((s)=>s.type === 'product') && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "px-3 py-2",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                                            className: "text-xs font-medium text-fun-green-700 uppercase tracking-wide mb-2",
                                            children: "Productos"
                                        }),
                                        suggestions.filter((s)=>s.type === 'product').map((suggestion, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                                                onClick: ()=>handleSuggestionSelect(suggestion),
                                                onMouseEnter: ()=>setSelectedIndex(suggestions.indexOf(suggestion)),
                                                className: (0, _utils.cn)('w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/50 hover:border-l-2 hover:border-fun-green-500 rounded-md transition-all duration-200', selectedIndex === suggestions.indexOf(suggestion) && 'bg-white/70 border-l-2 border-fun-green-600'),
                                                role: "option",
                                                "aria-selected": selectedIndex === suggestions.indexOf(suggestion),
                                                children: [
                                                    suggestion.image ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                        className: "w-8 h-8 rounded-md overflow-hidden bg-gray-100 flex-shrink-0",
                                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_image.default, {
                                                            src: suggestion.image,
                                                            alt: suggestion.title,
                                                            width: 32,
                                                            height: 32,
                                                            className: "w-full h-full object-cover"
                                                        })
                                                    }) : getSuggestionIcon(suggestion.type),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "flex-1 min-w-0",
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                                className: "text-sm font-medium text-gray-900 truncate",
                                                                children: suggestion.title
                                                            }),
                                                            suggestion.subtitle && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                                className: "text-xs text-fun-green-600 truncate font-medium",
                                                                children: suggestion.subtitle
                                                            })
                                                        ]
                                                    }),
                                                    suggestion.badge && /*#__PURE__*/ (0, _jsxruntime.jsx)(_badge.Badge, {
                                                        variant: "secondary",
                                                        size: "sm",
                                                        children: suggestion.badge
                                                    })
                                                ]
                                            }, suggestion.id))
                                    ]
                                }),
                                showTrendingSearches && suggestions.some((s)=>s.type === 'trending') && !query.trim() && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "px-3 py-2",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                                            className: "text-xs font-medium text-fun-green-700 uppercase tracking-wide mb-2",
                                            children: "B\xfasquedas populares"
                                        }),
                                        suggestions.filter((s)=>s.type === 'trending').map((suggestion, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                                                onClick: ()=>handleSuggestionSelect(suggestion),
                                                onMouseEnter: ()=>setSelectedIndex(suggestions.indexOf(suggestion)),
                                                className: (0, _utils.cn)('w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/50 hover:border-l-2 hover:border-fun-green-500 rounded-md transition-all duration-200', selectedIndex === suggestions.indexOf(suggestion) && 'bg-white/70 border-l-2 border-fun-green-600'),
                                                role: "option",
                                                "aria-selected": selectedIndex === suggestions.indexOf(suggestion),
                                                children: [
                                                    getSuggestionIcon(suggestion.type),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                        className: "text-sm text-gray-700",
                                                        children: suggestion.title
                                                    })
                                                ]
                                            }, suggestion.id))
                                    ]
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
});
SearchAutocomplete.displayName = 'SearchAutocomplete';

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXHNlYXJjaC1hdXRvY29tcGxldGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGN2YSwgdHlwZSBWYXJpYW50UHJvcHMgfSBmcm9tICdjbGFzcy12YXJpYW5jZS1hdXRob3JpdHknXG5pbXBvcnQgeyBjbiB9IGZyb20gJ0AvbGliL3V0aWxzJ1xuaW1wb3J0IHsgU2VhcmNoLCBYLCBDbG9jaywgVHJlbmRpbmdVcCwgUGFja2FnZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbidcbmltcG9ydCB7IHNlYXJjaFByb2R1Y3RzIH0gZnJvbSAnQC9saWIvYXBpL3Byb2R1Y3RzJ1xuaW1wb3J0IHsgUHJvZHVjdFdpdGhDYXRlZ29yeSB9IGZyb20gJ0AvdHlwZXMvYXBpJ1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICcuL2JhZGdlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi9idXR0b24nXG5pbXBvcnQgSW1hZ2UgZnJvbSAnbmV4dC9pbWFnZSdcbmltcG9ydCB7IHVzZVRyZW5kaW5nU2VhcmNoZXMgfSBmcm9tICdAL2hvb2tzL3VzZVRyZW5kaW5nU2VhcmNoZXMnXG5pbXBvcnQgeyB1c2VSZWNlbnRTZWFyY2hlcyB9IGZyb20gJ0AvaG9va3MvdXNlUmVjZW50U2VhcmNoZXMnXG5pbXBvcnQgeyBTRUFSQ0hfQ09OU1RBTlRTIH0gZnJvbSAnQC9jb25zdGFudHMvc2hvcCdcblxuY29uc3Qgc2VhcmNoQXV0b2NvbXBsZXRlVmFyaWFudHMgPSBjdmEoJ3JlbGF0aXZlIHctZnVsbCcsIHtcbiAgdmFyaWFudHM6IHtcbiAgICBzaXplOiB7XG4gICAgICBzbTogJ3RleHQtc20nLFxuICAgICAgbWQ6ICd0ZXh0LWJhc2UnLFxuICAgICAgbGc6ICd0ZXh0LWxnJyxcbiAgICB9LFxuICB9LFxuICBkZWZhdWx0VmFyaWFudHM6IHtcbiAgICBzaXplOiAnbWQnLFxuICB9LFxufSlcblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hTdWdnZXN0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiAncHJvZHVjdCcgfCAnY2F0ZWdvcnknIHwgJ3JlY2VudCcgfCAndHJlbmRpbmcnXG4gIHRpdGxlOiBzdHJpbmdcbiAgc3VidGl0bGU/OiBzdHJpbmdcbiAgaW1hZ2U/OiBzdHJpbmdcbiAgYmFkZ2U/OiBzdHJpbmdcbiAgaHJlZjogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoQXV0b2NvbXBsZXRlUHJvcHNcbiAgZXh0ZW5kcyBPbWl0PFJlYWN0LklucHV0SFRNTEF0dHJpYnV0ZXM8SFRNTElucHV0RWxlbWVudD4sICdzaXplJz4sXG4gICAgVmFyaWFudFByb3BzPHR5cGVvZiBzZWFyY2hBdXRvY29tcGxldGVWYXJpYW50cz4ge1xuICBvblNlYXJjaD86IChxdWVyeTogc3RyaW5nKSA9PiB2b2lkXG4gIG9uU3VnZ2VzdGlvblNlbGVjdD86IChzdWdnZXN0aW9uOiBTZWFyY2hTdWdnZXN0aW9uKSA9PiB2b2lkXG4gIHNob3dSZWNlbnRTZWFyY2hlcz86IGJvb2xlYW5cbiAgc2hvd1RyZW5kaW5nU2VhcmNoZXM/OiBib29sZWFuXG4gIG1heFN1Z2dlc3Rpb25zPzogbnVtYmVyXG4gIGRlYm91bmNlTXM/OiBudW1iZXJcbiAgLy8gUHJvcHMgb3BjaW9uYWxlcyBwYXJhIGludGVncmFjacOzbiBjb24gaG9va3MgZXh0ZXJub3NcbiAgcXVlcnk/OiBzdHJpbmdcbiAgc3VnZ2VzdGlvbnM/OiBTZWFyY2hTdWdnZXN0aW9uW11cbiAgaXNMb2FkaW5nPzogYm9vbGVhblxuICBlcnJvcj86IHN0cmluZyB8IG51bGxcbiAgc2VhcmNoV2l0aERlYm91bmNlPzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWRcbiAgb25DbGVhcj86ICgpID0+IHZvaWRcbn1cblxuLy8gQsO6c3F1ZWRhcyB0cmVuZGluZyBwb3IgZGVmZWN0byBwYXJhIHBpbnR1cmVyw61hXG5jb25zdCBkZWZhdWx0VHJlbmRpbmdTZWFyY2hlczogU2VhcmNoU3VnZ2VzdGlvbltdID0gW1xuICB7XG4gICAgaWQ6ICd0cmVuZGluZy0xJyxcbiAgICB0eXBlOiAndHJlbmRpbmcnLFxuICAgIHRpdGxlOiAnUGludHVyYSBsw6F0ZXgnLFxuICAgIGhyZWY6ICcvc2hvcD9zZWFyY2g9cGludHVyYStsYXRleCcsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3RyZW5kaW5nLTInLFxuICAgIHR5cGU6ICd0cmVuZGluZycsXG4gICAgdGl0bGU6ICdTaGVyd2luIFdpbGxpYW1zJyxcbiAgICBocmVmOiAnL3Nob3A/c2VhcmNoPXNoZXJ3aW4rd2lsbGlhbXMnLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0cmVuZGluZy0zJyxcbiAgICB0eXBlOiAndHJlbmRpbmcnLFxuICAgIHRpdGxlOiAnUm9kaWxsb3MgcHJlbWl1bScsXG4gICAgaHJlZjogJy9zaG9wP3NlYXJjaD1yb2RpbGxvcytwcmVtaXVtJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndHJlbmRpbmctNCcsXG4gICAgdHlwZTogJ3RyZW5kaW5nJyxcbiAgICB0aXRsZTogJ1BpbmNlbGVzJyxcbiAgICBocmVmOiAnL3Nob3A/c2VhcmNoPXBpbmNlbGVzJyxcbiAgfSxcbl1cblxuY29uc3QgU2VhcmNoQXV0b2NvbXBsZXRlID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MSW5wdXRFbGVtZW50LCBTZWFyY2hBdXRvY29tcGxldGVQcm9wcz4oXG4gIChcbiAgICB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBzaXplLFxuICAgICAgb25TZWFyY2gsXG4gICAgICBvblN1Z2dlc3Rpb25TZWxlY3QsXG4gICAgICBzaG93UmVjZW50U2VhcmNoZXMgPSB0cnVlLFxuICAgICAgc2hvd1RyZW5kaW5nU2VhcmNoZXMgPSB0cnVlLFxuICAgICAgbWF4U3VnZ2VzdGlvbnMgPSA4LFxuICAgICAgZGVib3VuY2VNcyA9IDMwMCxcbiAgICAgIHBsYWNlaG9sZGVyID0gJ0zDoXRleCBpbnRlcmlvciBibGFuY28gMjBsdHMsIHJvZGlsbG9zLCBwaW5jZWxlcy4uLicsXG4gICAgICAvLyBQcm9wcyBvcGNpb25hbGVzIHBhcmEgaW50ZWdyYWNpw7NuIGNvbiBob29rcyBleHRlcm5vc1xuICAgICAgcXVlcnk6IGV4dGVybmFsUXVlcnksXG4gICAgICBzdWdnZXN0aW9uczogZXh0ZXJuYWxTdWdnZXN0aW9ucyxcbiAgICAgIGlzTG9hZGluZzogZXh0ZXJuYWxJc0xvYWRpbmcsXG4gICAgICBlcnJvcjogZXh0ZXJuYWxFcnJvcixcbiAgICAgIHNlYXJjaFdpdGhEZWJvdW5jZTogZXh0ZXJuYWxTZWFyY2hXaXRoRGVib3VuY2UsXG4gICAgICBvbkNsZWFyOiBleHRlcm5hbE9uQ2xlYXIsXG4gICAgICAuLi5wcm9wc1xuICAgIH0sXG4gICAgcmVmXG4gICkgPT4ge1xuICAgIC8vIEhvb2sgcGFyYSBvYnRlbmVyIGLDunNxdWVkYXMgdHJlbmRpbmcgcmVhbGVzXG4gICAgY29uc3QgeyB0cmVuZGluZ1NlYXJjaGVzLCB0cmFja1NlYXJjaCB9ID0gdXNlVHJlbmRpbmdTZWFyY2hlcyh7XG4gICAgICBsaW1pdDogNCxcbiAgICAgIGVuYWJsZWQ6IHNob3dUcmVuZGluZ1NlYXJjaGVzLFxuICAgIH0pXG5cbiAgICAvLyBIb29rIHBhcmEgZ2VzdGlvbmFyIGLDunNxdWVkYXMgcmVjaWVudGVzXG4gICAgY29uc3Qge1xuICAgICAgcmVjZW50U2VhcmNoZXMsXG4gICAgICBhZGRTZWFyY2g6IGFkZFJlY2VudFNlYXJjaCxcbiAgICAgIGdldFJlY2VudFNlYXJjaGVzLFxuICAgIH0gPSB1c2VSZWNlbnRTZWFyY2hlcyh7XG4gICAgICBtYXhTZWFyY2hlczogU0VBUkNIX0NPTlNUQU5UUy5NQVhfUkVDRU5UX1NFQVJDSEVTLFxuICAgICAgZW5hYmxlUGVyc2lzdGVuY2U6IHNob3dSZWNlbnRTZWFyY2hlcyxcbiAgICAgIGV4cGlyYXRpb25EYXlzOiBTRUFSQ0hfQ09OU1RBTlRTLlJFQ0VOVF9TRUFSQ0hFU19FWFBJUkFUSU9OX0RBWVMsXG4gICAgfSlcbiAgICAvLyBFc3RhZG8gaW50ZXJubyAodXNhZG8gc29sbyBzaSBubyBoYXkgcHJvcHMgZXh0ZXJuYXMpXG4gICAgY29uc3QgW2ludGVybmFsUXVlcnksIHNldEludGVybmFsUXVlcnldID0gdXNlU3RhdGUoJycpXG4gICAgY29uc3QgW2ludGVybmFsU3VnZ2VzdGlvbnMsIHNldEludGVybmFsU3VnZ2VzdGlvbnNdID0gdXNlU3RhdGU8U2VhcmNoU3VnZ2VzdGlvbltdPihbXSlcbiAgICBjb25zdCBbaW50ZXJuYWxJc0xvYWRpbmcsIHNldEludGVybmFsSXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICAgIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgICBjb25zdCBbc2VsZWN0ZWRJbmRleCwgc2V0U2VsZWN0ZWRJbmRleF0gPSB1c2VTdGF0ZSgtMSlcblxuICAgIC8vIFVzYXIgcHJvcHMgZXh0ZXJuYXMgc2kgZXN0w6FuIGRpc3BvbmlibGVzLCBzaW5vIHVzYXIgZXN0YWRvIGludGVybm9cbiAgICBjb25zdCBxdWVyeSA9IGV4dGVybmFsUXVlcnkgIT09IHVuZGVmaW5lZCA/IGV4dGVybmFsUXVlcnkgOiBpbnRlcm5hbFF1ZXJ5XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPVxuICAgICAgZXh0ZXJuYWxTdWdnZXN0aW9ucyAhPT0gdW5kZWZpbmVkID8gZXh0ZXJuYWxTdWdnZXN0aW9ucyA6IGludGVybmFsU3VnZ2VzdGlvbnNcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBleHRlcm5hbElzTG9hZGluZyAhPT0gdW5kZWZpbmVkID8gZXh0ZXJuYWxJc0xvYWRpbmcgOiBpbnRlcm5hbElzTG9hZGluZ1xuICAgIGNvbnN0IGVycm9yID0gZXh0ZXJuYWxFcnJvclxuXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKVxuICAgIGNvbnN0IGRyb3Bkb3duUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICAgIGNvbnN0IGRlYm91bmNlUmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0PigpXG5cbiAgICAvLyBCdXNjYXIgcHJvZHVjdG9zIGNvbiBkZWJvdW5jZVxuICAgIGNvbnN0IHNlYXJjaFByb2R1Y3RzRGVib3VuY2VkID0gdXNlQ2FsbGJhY2soXG4gICAgICBhc3luYyAoc2VhcmNoUXVlcnk6IHN0cmluZykgPT4ge1xuICAgICAgICAvLyBObyBlamVjdXRhciBzaSBoYXkgcHJvcHMgZXh0ZXJuYXNcbiAgICAgICAgaWYgKGV4dGVybmFsU3VnZ2VzdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWFyY2hRdWVyeS50cmltKCkpIHtcbiAgICAgICAgICBzZXRJbnRlcm5hbFN1Z2dlc3Rpb25zKFtdKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgc2V0SW50ZXJuYWxJc0xvYWRpbmcodHJ1ZSlcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VhcmNoUHJvZHVjdHMoc2VhcmNoUXVlcnksIDYpXG5cbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0U3VnZ2VzdGlvbnM6IFNlYXJjaFN1Z2dlc3Rpb25bXSA9IHJlc3BvbnNlLmRhdGEubWFwKHByb2R1Y3QgPT4gKHtcbiAgICAgICAgICAgICAgaWQ6IGBwcm9kdWN0LSR7cHJvZHVjdC5pZH1gLFxuICAgICAgICAgICAgICB0eXBlOiAncHJvZHVjdCcsXG4gICAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0Lm5hbWUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBwcm9kdWN0LmNhdGVnb3J5Py5uYW1lLFxuICAgICAgICAgICAgICBpbWFnZTpcbiAgICAgICAgICAgICAgICBwcm9kdWN0LmltYWdlcz8ucHJldmlld3M/LlswXSB8fFxuICAgICAgICAgICAgICAgIHByb2R1Y3QuaW1hZ2VzPy50aHVtYm5haWxzPy5bMF0gfHxcbiAgICAgICAgICAgICAgICAnL2ltYWdlcy9wcm9kdWN0cy9wbGFjZWhvbGRlci5qcGcnLFxuICAgICAgICAgICAgICBiYWRnZTogcHJvZHVjdC5zdG9jayA+IDAgPyAnRW4gc3RvY2snIDogJ1NpbiBzdG9jaycsXG4gICAgICAgICAgICAgIGhyZWY6IGAvcHJvZHVjdC8ke3Byb2R1Y3QuaWR9YCxcbiAgICAgICAgICAgIH0pKVxuXG4gICAgICAgICAgICBzZXRJbnRlcm5hbFN1Z2dlc3Rpb25zKHByb2R1Y3RTdWdnZXN0aW9ucy5zbGljZSgwLCBtYXhTdWdnZXN0aW9ucykpXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBwcm9kdWN0czonLCBlcnJvcilcbiAgICAgICAgICBzZXRJbnRlcm5hbFN1Z2dlc3Rpb25zKFtdKVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHNldEludGVybmFsSXNMb2FkaW5nKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW21heFN1Z2dlc3Rpb25zLCBleHRlcm5hbFN1Z2dlc3Rpb25zXVxuICAgIClcblxuICAgIC8vIE1hbmVqYXIgY2FtYmlvIGVuIGVsIGlucHV0XG4gICAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWVcblxuICAgICAgLy8gU2kgaGF5IGZ1bmNpw7NuIGV4dGVybmEgZGUgYsO6c3F1ZWRhLCB1c2FybGFcbiAgICAgIGlmIChleHRlcm5hbFNlYXJjaFdpdGhEZWJvdW5jZSkge1xuICAgICAgICBleHRlcm5hbFNlYXJjaFdpdGhEZWJvdW5jZSh2YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVzYXIgbMOzZ2ljYSBpbnRlcm5hXG4gICAgICAgIHNldEludGVybmFsUXVlcnkodmFsdWUpXG4gICAgICAgIHNldFNlbGVjdGVkSW5kZXgoLTEpXG5cbiAgICAgICAgLy8gTGltcGlhciBkZWJvdW5jZSBhbnRlcmlvclxuICAgICAgICBpZiAoZGVib3VuY2VSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVJlZi5jdXJyZW50KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29uZmlndXJhciBudWV2byBkZWJvdW5jZVxuICAgICAgICBkZWJvdW5jZVJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc2VhcmNoUHJvZHVjdHNEZWJvdW5jZWQodmFsdWUpXG4gICAgICAgIH0sIGRlYm91bmNlTXMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9zdHJhciBzdWdlcmVuY2lhcyBwb3IgZGVmZWN0byBjdWFuZG8gc2UgZW5mb2NhXG4gICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoKSA9PiB7XG4gICAgICBzZXRJc09wZW4odHJ1ZSlcblxuICAgICAgaWYgKCFxdWVyeS50cmltKCkgJiYgIWV4dGVybmFsU3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgLy8gU29sbyBtb3N0cmFyIHN1Z2VyZW5jaWFzIHBvciBkZWZlY3RvIHNpIG5vIGhheSBwcm9wcyBleHRlcm5hc1xuICAgICAgICBjb25zdCBkZWZhdWx0U3VnZ2VzdGlvbnM6IFNlYXJjaFN1Z2dlc3Rpb25bXSA9IFtdXG5cbiAgICAgICAgLy8gQWdyZWdhciBiw7pzcXVlZGFzIHJlY2llbnRlc1xuICAgICAgICBpZiAoc2hvd1JlY2VudFNlYXJjaGVzICYmIHJlY2VudFNlYXJjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkZWZhdWx0U3VnZ2VzdGlvbnMucHVzaChcbiAgICAgICAgICAgIC4uLmdldFJlY2VudFNlYXJjaGVzKDMpLm1hcCgoc2VhcmNoLCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgICAgaWQ6IGByZWNlbnQtJHtpbmRleH1gLFxuICAgICAgICAgICAgICB0eXBlOiAncmVjZW50JyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgdGl0bGU6IHNlYXJjaCxcbiAgICAgICAgICAgICAgaHJlZjogYC9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2gpfWAsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZ3JlZ2FyIGLDunNxdWVkYXMgdHJlbmRpbmcgcmVhbGVzXG4gICAgICAgIGlmIChzaG93VHJlbmRpbmdTZWFyY2hlcyAmJiB0cmVuZGluZ1NlYXJjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB0cmVuZGluZ1N1Z2dlc3Rpb25zOiBTZWFyY2hTdWdnZXN0aW9uW10gPSB0cmVuZGluZ1NlYXJjaGVzLm1hcCh0cmVuZGluZyA9PiAoe1xuICAgICAgICAgICAgaWQ6IHRyZW5kaW5nLmlkLFxuICAgICAgICAgICAgdHlwZTogJ3RyZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICAgIHRpdGxlOiB0cmVuZGluZy5xdWVyeSxcbiAgICAgICAgICAgIGhyZWY6IHRyZW5kaW5nLmhyZWYsXG4gICAgICAgICAgICBiYWRnZTogdHJlbmRpbmcuY291bnQgPyBgJHt0cmVuZGluZy5jb3VudH1gIDogdW5kZWZpbmVkLFxuICAgICAgICAgIH0pKVxuICAgICAgICAgIGRlZmF1bHRTdWdnZXN0aW9ucy5wdXNoKC4uLnRyZW5kaW5nU3VnZ2VzdGlvbnMuc2xpY2UoMCwgNCkpXG4gICAgICAgIH1cblxuICAgICAgICBzZXRJbnRlcm5hbFN1Z2dlc3Rpb25zKGRlZmF1bHRTdWdnZXN0aW9ucy5zbGljZSgwLCBtYXhTdWdnZXN0aW9ucykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFuZWphciBzZWxlY2Npw7NuIGRlIHN1Z2VyZW5jaWFcbiAgICBjb25zdCBoYW5kbGVTdWdnZXN0aW9uU2VsZWN0ID0gKHN1Z2dlc3Rpb246IFNlYXJjaFN1Z2dlc3Rpb24pID0+IHtcbiAgICAgIGlmIChzdWdnZXN0aW9uLnR5cGUgPT09ICdwcm9kdWN0JyB8fCBzdWdnZXN0aW9uLnR5cGUgPT09ICdjYXRlZ29yeScpIHtcbiAgICAgICAgYWRkUmVjZW50U2VhcmNoKHN1Z2dlc3Rpb24udGl0bGUpXG4gICAgICB9XG5cbiAgICAgIC8vIFJlZ2lzdHJhciBiw7pzcXVlZGFzIHRyZW5kaW5nIHkgcmVjaWVudGVzIGVuIGFuYWx5dGljc1xuICAgICAgaWYgKHN1Z2dlc3Rpb24udHlwZSA9PT0gJ3RyZW5kaW5nJyB8fCBzdWdnZXN0aW9uLnR5cGUgPT09ICdyZWNlbnQnKSB7XG4gICAgICAgIHRyYWNrU2VhcmNoKHN1Z2dlc3Rpb24udGl0bGUpLmNhdGNoKGNvbnNvbGUud2FybilcbiAgICAgIH1cblxuICAgICAgLy8gU29sbyBhY3R1YWxpemFyIHF1ZXJ5IGludGVybmEgc2kgbm8gaGF5IHF1ZXJ5IGV4dGVybmFcbiAgICAgIGlmIChleHRlcm5hbFF1ZXJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2V0SW50ZXJuYWxRdWVyeShzdWdnZXN0aW9uLnRpdGxlKVxuICAgICAgfVxuICAgICAgc2V0SXNPcGVuKGZhbHNlKVxuXG4gICAgICBpZiAob25TdWdnZXN0aW9uU2VsZWN0KSB7XG4gICAgICAgIG9uU3VnZ2VzdGlvblNlbGVjdChzdWdnZXN0aW9uKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm91dGVyLnB1c2goc3VnZ2VzdGlvbi5ocmVmKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1hbmVqYXIgZW52w61vIGRlbCBmb3JtdWxhcmlvXG4gICAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgIGlmIChxdWVyeS50cmltKCkpIHtcbiAgICAgICAgYWRkUmVjZW50U2VhcmNoKHF1ZXJ5LnRyaW0oKSlcbiAgICAgICAgc2V0SXNPcGVuKGZhbHNlKVxuXG4gICAgICAgIC8vIFJlZ2lzdHJhciBiw7pzcXVlZGEgZW4gYW5hbHl0aWNzIHBhcmEgdHJlbmRpbmdcbiAgICAgICAgdHJhY2tTZWFyY2gocXVlcnkudHJpbSgpKS5jYXRjaChjb25zb2xlLndhcm4pXG5cbiAgICAgICAgaWYgKG9uU2VhcmNoKSB7XG4gICAgICAgICAgb25TZWFyY2gocXVlcnkudHJpbSgpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGAvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkudHJpbSgpKX1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFuZWphciB0ZWNsYXNcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNPcGVuKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChwcmV2ID0+IChwcmV2IDwgc3VnZ2VzdGlvbnMubGVuZ3RoIC0gMSA/IHByZXYgKyAxIDogcHJldikpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChwcmV2ID0+IChwcmV2ID4gMCA/IHByZXYgLSAxIDogLTEpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCA+PSAwICYmIHN1Z2dlc3Rpb25zW3NlbGVjdGVkSW5kZXhdKSB7XG4gICAgICAgICAgICBoYW5kbGVTdWdnZXN0aW9uU2VsZWN0KHN1Z2dlc3Rpb25zW3NlbGVjdGVkSW5kZXhdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVTdWJtaXQoZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleCgtMSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENlcnJhciBkcm9wZG93biBhbCBoYWNlciBjbGljayBmdWVyYVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGRyb3Bkb3duUmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAhZHJvcGRvd25SZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50ICYmXG4gICAgICAgICAgIWlucHV0UmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpXG4gICAgICAgICkge1xuICAgICAgICAgIHNldElzT3BlbihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpXG4gICAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKVxuICAgIH0sIFtdKVxuXG4gICAgLy8gTGltcGlhciBkZWJvdW5jZSBhbCBkZXNtb250YXJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKGRlYm91bmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VSZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIFtdKVxuXG4gICAgY29uc3QgZ2V0U3VnZ2VzdGlvbkljb24gPSAodHlwZTogU2VhcmNoU3VnZ2VzdGlvblsndHlwZSddKSA9PiB7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAncmVjZW50JzpcbiAgICAgICAgICByZXR1cm4gPENsb2NrIGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICBjYXNlICd0cmVuZGluZyc6XG4gICAgICAgICAgcmV0dXJuIDxUcmVuZGluZ1VwIGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWZ1bi1ncmVlbi02MDAnIC8+XG4gICAgICAgIGNhc2UgJ3Byb2R1Y3QnOlxuICAgICAgICAgIHJldHVybiA8UGFja2FnZSBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ncmF5LTYwMCcgLz5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gPFNlYXJjaCBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ncmF5LTQwMCcgLz5cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NuKHNlYXJjaEF1dG9jb21wbGV0ZVZhcmlhbnRzKHsgc2l6ZSB9KSwgY2xhc3NOYW1lKX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlbGF0aXZlJz5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICByZWY9e2lucHV0UmVmfVxuICAgICAgICAgICAgICB0eXBlPSdzZWFyY2gnXG4gICAgICAgICAgICAgIHZhbHVlPXtxdWVyeX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICBvbkZvY3VzPXtoYW5kbGVGb2N1c31cbiAgICAgICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT0nb2ZmJ1xuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nc2VhcmNoLWlucHV0J1xuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICd3LWZ1bGwgcm91bmRlZC1yLVs1cHhdIGJnLXllbGxvdy0xMDAgYm9yZGVyIGJvcmRlci1ncmF5LTMgcHktMi41IHBsLTQgcHItMTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCcsXG4gICAgICAgICAgICAgICAgJ2ZvY3VzOmJvcmRlci1wcmltYXJ5LzUwIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXByaW1hcnkvMjAnLFxuICAgICAgICAgICAgICAgICdwbGFjZWhvbGRlcjp0ZXh0LWdyYXktNDAwIHBsYWNlaG9sZGVyOmZvbnQtbm9ybWFsJyxcbiAgICAgICAgICAgICAgICBzaXplID09PSAnc20nICYmICdweS0yIHRleHQtc20nLFxuICAgICAgICAgICAgICAgIHNpemUgPT09ICdsZycgJiYgJ3B5LTMgdGV4dC1sZydcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIFNlYXJjaCBJY29uICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Fic29sdXRlIHJpZ2h0LTMgdG9wLTEvMiAtdHJhbnNsYXRlLXktMS8yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAge3F1ZXJ5ICYmIChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRlcm5hbE9uQ2xlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBleHRlcm5hbE9uQ2xlYXIoKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHNldEludGVybmFsUXVlcnkoJycpXG4gICAgICAgICAgICAgICAgICAgICAgc2V0SW50ZXJuYWxTdWdnZXN0aW9ucyhbXSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgdHJhbnNpdGlvbi1jb2xvcnMnXG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbGVhciBzZWFyY2gnXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0J1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LXByaW1hcnkgdHJhbnNpdGlvbi1jb2xvcnMnXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nU2VhcmNoJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogRHJvcGRvd24gZGUgc3VnZXJlbmNpYXMgKi99XG4gICAgICAgICAge2lzT3BlbiAmJiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHJlZj17ZHJvcGRvd25SZWZ9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nYWJzb2x1dGUgdG9wLWZ1bGwgbGVmdC0wIHJpZ2h0LTAgei01MCBtdC0xIHJvdW5kZWQtbWQgc2hhZG93LWxnIG1heC1oLTk2IG92ZXJmbG93LXktYXV0bydcbiAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnI2ZmZjNjNScgfX1cbiAgICAgICAgICAgICAgcm9sZT0nbGlzdGJveCdcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nU2VhcmNoIHN1Z2dlc3Rpb25zJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC00IHRleHQtY2VudGVyIHRleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiB3LTUgaC01IGJvcmRlci0yIGJvcmRlci1wcmltYXJ5IGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBteC1hdXRvIG1iLTInPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgQnVzY2FuZG8uLi5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7IWlzTG9hZGluZyAmJiBzdWdnZXN0aW9ucy5sZW5ndGggPT09IDAgJiYgcXVlcnkudHJpbSgpICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC00IHRleHQtY2VudGVyIHRleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAgTm8gc2UgZW5jb250cmFyb24gcmVzdWx0YWRvcyBwYXJhIFwie3F1ZXJ5fVwiXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgeyFpc0xvYWRpbmcgJiYgc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B5LTInPlxuICAgICAgICAgICAgICAgICAgey8qIFNlY2Npb25lcyBkZSBzdWdlcmVuY2lhcyAqL31cbiAgICAgICAgICAgICAgICAgIHtzaG93UmVjZW50U2VhcmNoZXMgJiYgc3VnZ2VzdGlvbnMuc29tZShzID0+IHMudHlwZSA9PT0gJ3JlY2VudCcpICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B4LTMgcHktMic+XG4gICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0ndGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWZ1bi1ncmVlbi03MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICBCw7pzcXVlZGFzIHJlY2llbnRlc1xuICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHMgPT4gcy50eXBlID09PSAncmVjZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHN1Z2dlc3Rpb24sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3N1Z2dlc3Rpb24uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3VnZ2VzdGlvblNlbGVjdChzdWdnZXN0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHNldFNlbGVjdGVkSW5kZXgoc3VnZ2VzdGlvbnMuaW5kZXhPZihzdWdnZXN0aW9uKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcHgtMyBweS0yIHRleHQtbGVmdCBob3ZlcjpiZy13aGl0ZS81MCBob3Zlcjpib3JkZXItbC0yIGhvdmVyOmJvcmRlci1mdW4tZ3JlZW4tNTAwIHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXggPT09IHN1Z2dlc3Rpb25zLmluZGV4T2Yoc3VnZ2VzdGlvbikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JnLXdoaXRlLzcwIGJvcmRlci1sLTIgYm9yZGVyLWZ1bi1ncmVlbi02MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPSdvcHRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17c2VsZWN0ZWRJbmRleCA9PT0gc3VnZ2VzdGlvbnMuaW5kZXhPZihzdWdnZXN0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRTdWdnZXN0aW9uSWNvbihzdWdnZXN0aW9uLnR5cGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNzAwJz57c3VnZ2VzdGlvbi50aXRsZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgey8qIFByb2R1Y3RvcyAqL31cbiAgICAgICAgICAgICAgICAgIHtzdWdnZXN0aW9ucy5zb21lKHMgPT4gcy50eXBlID09PSAncHJvZHVjdCcpICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B4LTMgcHktMic+XG4gICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0ndGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWZ1bi1ncmVlbi03MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9kdWN0b3NcbiAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgIHtzdWdnZXN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihzID0+IHMudHlwZSA9PT0gJ3Byb2R1Y3QnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoc3VnZ2VzdGlvbiwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3VnZ2VzdGlvbi5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdWdnZXN0aW9uU2VsZWN0KHN1Z2dlc3Rpb24pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0U2VsZWN0ZWRJbmRleChzdWdnZXN0aW9ucy5pbmRleE9mKHN1Z2dlc3Rpb24pKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBweC0zIHB5LTIgdGV4dC1sZWZ0IGhvdmVyOmJnLXdoaXRlLzUwIGhvdmVyOmJvcmRlci1sLTIgaG92ZXI6Ym9yZGVyLWZ1bi1ncmVlbi01MDAgcm91bmRlZC1tZCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9PT0gc3VnZ2VzdGlvbnMuaW5kZXhPZihzdWdnZXN0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmctd2hpdGUvNzAgYm9yZGVyLWwtMiBib3JkZXItZnVuLWdyZWVuLTYwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J29wdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZEluZGV4ID09PSBzdWdnZXN0aW9ucy5pbmRleE9mKHN1Z2dlc3Rpb24pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb24uaW1hZ2UgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy04IGgtOCByb3VuZGVkLW1kIG92ZXJmbG93LWhpZGRlbiBiZy1ncmF5LTEwMCBmbGV4LXNocmluay0wJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtzdWdnZXN0aW9uLmltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17c3VnZ2VzdGlvbi50aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN1Z2dlc3Rpb25JY29uKHN1Z2dlc3Rpb24udHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgbWluLXctMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb24udGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdWdnZXN0aW9uLnN1YnRpdGxlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1mdW4tZ3JlZW4tNjAwIHRydW5jYXRlIGZvbnQtbWVkaXVtJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3VnZ2VzdGlvbi5zdWJ0aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdWdnZXN0aW9uLmJhZGdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdzZWNvbmRhcnknIHNpemU9J3NtJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb24uYmFkZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgey8qIFRyZW5kaW5nICovfVxuICAgICAgICAgICAgICAgICAge3Nob3dUcmVuZGluZ1NlYXJjaGVzICYmXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnNvbWUocyA9PiBzLnR5cGUgPT09ICd0cmVuZGluZycpICYmXG4gICAgICAgICAgICAgICAgICAgICFxdWVyeS50cmltKCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdweC0zIHB5LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0ndGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWZ1bi1ncmVlbi03MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIELDunNxdWVkYXMgcG9wdWxhcmVzXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyA9PiBzLnR5cGUgPT09ICd0cmVuZGluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHN1Z2dlc3Rpb24sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzdWdnZXN0aW9uLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3VnZ2VzdGlvblNlbGVjdChzdWdnZXN0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0U2VsZWN0ZWRJbmRleChzdWdnZXN0aW9ucy5pbmRleE9mKHN1Z2dlc3Rpb24pKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcHgtMyBweS0yIHRleHQtbGVmdCBob3ZlcjpiZy13aGl0ZS81MCBob3Zlcjpib3JkZXItbC0yIGhvdmVyOmJvcmRlci1mdW4tZ3JlZW4tNTAwIHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9PT0gc3VnZ2VzdGlvbnMuaW5kZXhPZihzdWdnZXN0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiZy13aGl0ZS83MCBib3JkZXItbC0yIGJvcmRlci1mdW4tZ3JlZW4tNjAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J29wdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtc2VsZWN0ZWQ9e3NlbGVjdGVkSW5kZXggPT09IHN1Z2dlc3Rpb25zLmluZGV4T2Yoc3VnZ2VzdGlvbil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFN1Z2dlc3Rpb25JY29uKHN1Z2dlc3Rpb24udHlwZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTcwMCc+e3N1Z2dlc3Rpb24udGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG4pXG5cblNlYXJjaEF1dG9jb21wbGV0ZS5kaXNwbGF5TmFtZSA9ICdTZWFyY2hBdXRvY29tcGxldGUnXG5cbmV4cG9ydCB7IFNlYXJjaEF1dG9jb21wbGV0ZSwgc2VhcmNoQXV0b2NvbXBsZXRlVmFyaWFudHMgfVxuIl0sIm5hbWVzIjpbIlNlYXJjaEF1dG9jb21wbGV0ZSIsInNlYXJjaEF1dG9jb21wbGV0ZVZhcmlhbnRzIiwiY3ZhIiwidmFyaWFudHMiLCJzaXplIiwic20iLCJtZCIsImxnIiwiZGVmYXVsdFZhcmlhbnRzIiwiZGVmYXVsdFRyZW5kaW5nU2VhcmNoZXMiLCJpZCIsInR5cGUiLCJ0aXRsZSIsImhyZWYiLCJSZWFjdCIsImZvcndhcmRSZWYiLCJjbGFzc05hbWUiLCJvblNlYXJjaCIsIm9uU3VnZ2VzdGlvblNlbGVjdCIsInNob3dSZWNlbnRTZWFyY2hlcyIsInNob3dUcmVuZGluZ1NlYXJjaGVzIiwibWF4U3VnZ2VzdGlvbnMiLCJkZWJvdW5jZU1zIiwicGxhY2Vob2xkZXIiLCJxdWVyeSIsImV4dGVybmFsUXVlcnkiLCJzdWdnZXN0aW9ucyIsImV4dGVybmFsU3VnZ2VzdGlvbnMiLCJpc0xvYWRpbmciLCJleHRlcm5hbElzTG9hZGluZyIsImVycm9yIiwiZXh0ZXJuYWxFcnJvciIsInNlYXJjaFdpdGhEZWJvdW5jZSIsImV4dGVybmFsU2VhcmNoV2l0aERlYm91bmNlIiwib25DbGVhciIsImV4dGVybmFsT25DbGVhciIsInByb3BzIiwicmVmIiwidHJlbmRpbmdTZWFyY2hlcyIsInRyYWNrU2VhcmNoIiwidXNlVHJlbmRpbmdTZWFyY2hlcyIsImxpbWl0IiwiZW5hYmxlZCIsInJlY2VudFNlYXJjaGVzIiwiYWRkU2VhcmNoIiwiYWRkUmVjZW50U2VhcmNoIiwiZ2V0UmVjZW50U2VhcmNoZXMiLCJ1c2VSZWNlbnRTZWFyY2hlcyIsIm1heFNlYXJjaGVzIiwiU0VBUkNIX0NPTlNUQU5UUyIsIk1BWF9SRUNFTlRfU0VBUkNIRVMiLCJlbmFibGVQZXJzaXN0ZW5jZSIsImV4cGlyYXRpb25EYXlzIiwiUkVDRU5UX1NFQVJDSEVTX0VYUElSQVRJT05fREFZUyIsImludGVybmFsUXVlcnkiLCJzZXRJbnRlcm5hbFF1ZXJ5IiwidXNlU3RhdGUiLCJpbnRlcm5hbFN1Z2dlc3Rpb25zIiwic2V0SW50ZXJuYWxTdWdnZXN0aW9ucyIsImludGVybmFsSXNMb2FkaW5nIiwic2V0SW50ZXJuYWxJc0xvYWRpbmciLCJpc09wZW4iLCJzZXRJc09wZW4iLCJzZWxlY3RlZEluZGV4Iiwic2V0U2VsZWN0ZWRJbmRleCIsInVuZGVmaW5lZCIsInJvdXRlciIsInVzZVJvdXRlciIsImlucHV0UmVmIiwidXNlUmVmIiwiZHJvcGRvd25SZWYiLCJkZWJvdW5jZVJlZiIsInNlYXJjaFByb2R1Y3RzRGVib3VuY2VkIiwidXNlQ2FsbGJhY2siLCJzZWFyY2hRdWVyeSIsInRyaW0iLCJyZXNwb25zZSIsInNlYXJjaFByb2R1Y3RzIiwic3VjY2VzcyIsImRhdGEiLCJwcm9kdWN0U3VnZ2VzdGlvbnMiLCJtYXAiLCJwcm9kdWN0IiwibmFtZSIsInN1YnRpdGxlIiwiY2F0ZWdvcnkiLCJpbWFnZSIsImltYWdlcyIsInByZXZpZXdzIiwidGh1bWJuYWlscyIsImJhZGdlIiwic3RvY2siLCJzbGljZSIsImNvbnNvbGUiLCJoYW5kbGVJbnB1dENoYW5nZSIsImUiLCJ2YWx1ZSIsInRhcmdldCIsImN1cnJlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaGFuZGxlRm9jdXMiLCJkZWZhdWx0U3VnZ2VzdGlvbnMiLCJsZW5ndGgiLCJwdXNoIiwic2VhcmNoIiwiaW5kZXgiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0cmVuZGluZ1N1Z2dlc3Rpb25zIiwidHJlbmRpbmciLCJjb3VudCIsImhhbmRsZVN1Z2dlc3Rpb25TZWxlY3QiLCJzdWdnZXN0aW9uIiwiY2F0Y2giLCJ3YXJuIiwiaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVLZXlEb3duIiwia2V5IiwicHJldiIsInVzZUVmZmVjdCIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImV2ZW50IiwiY29udGFpbnMiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0U3VnZ2VzdGlvbkljb24iLCJDbG9jayIsIlRyZW5kaW5nVXAiLCJQYWNrYWdlIiwiU2VhcmNoIiwiZGl2IiwiY24iLCJpbnB1dCIsIm9uQ2hhbmdlIiwib25Gb2N1cyIsIm9uS2V5RG93biIsImF1dG9Db21wbGV0ZSIsImRhdGEtdGVzdGlkIiwiYnV0dG9uIiwib25DbGljayIsImZvY3VzIiwiYXJpYS1sYWJlbCIsIlgiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInJvbGUiLCJzb21lIiwicyIsImg0IiwiZmlsdGVyIiwib25Nb3VzZUVudGVyIiwiaW5kZXhPZiIsImFyaWEtc2VsZWN0ZWQiLCJzcGFuIiwiSW1hZ2UiLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsIkJhZGdlIiwidmFyaWFudCIsImRpc3BsYXlOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O1FBaWpCU0E7ZUFBQUE7O1FBQW9CQztlQUFBQTs7OzsrREEvaUJOO3dDQUVnQjt1QkFDcEI7NkJBQ21DOzRCQUM1QjswQkFDSzt1QkFFVDs4REFFSjtxQ0FDa0I7bUNBQ0Y7c0JBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWpDLE1BQU1BLDZCQUE2QkMsSUFBQUEsMkJBQUcsRUFBQyxtQkFBbUI7SUFDeERDLFVBQVU7UUFDUkMsTUFBTTtZQUNKQyxJQUFJO1lBQ0pDLElBQUk7WUFDSkMsSUFBSTtRQUNOO0lBQ0Y7SUFDQUMsaUJBQWlCO1FBQ2ZKLE1BQU07SUFDUjtBQUNGO0FBOEJBLGlEQUFpRDtBQUNqRCxNQUFNSywwQkFBOEM7SUFDbEQ7UUFDRUMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsTUFBTTtJQUNSO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsTUFBTTtJQUNSO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsTUFBTTtJQUNSO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsTUFBTTtJQUNSO0NBQ0Q7QUFFRCxNQUFNYixtQ0FBcUJjLE9BQU1DLFVBQVUsQ0FDekMsQ0FDRSxFQUNFQyxTQUFTLEVBQ1RaLElBQUksRUFDSmEsUUFBUSxFQUNSQyxrQkFBa0IsRUFDbEJDLHFCQUFxQixJQUFJLEVBQ3pCQyx1QkFBdUIsSUFBSSxFQUMzQkMsaUJBQWlCLENBQUMsRUFDbEJDLGFBQWEsR0FBRyxFQUNoQkMsY0FBYyxvREFBb0QsRUFDbEUsdURBQXVEO0FBQ3ZEQyxPQUFPQyxhQUFhLEVBQ3BCQyxhQUFhQyxtQkFBbUIsRUFDaENDLFdBQVdDLGlCQUFpQixFQUM1QkMs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