f25dc7dd1ba8b978d7359fe596aebe5d
// ===================================
// PINTEYA E-COMMERCE - VALIDATION TESTS
// Pruebas específicas para validación de datos en useOrdersEnterprise
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _globals = require("@jest/globals");
const _useOrdersEnterprise = require("../../hooks/useOrdersEnterprise");
// ===================================
// MOCKS
// ===================================
const mockFetch = _globals.jest.fn();
global.fetch = mockFetch;
const mockConsoleWarn = _globals.jest.spyOn(console, 'warn').mockImplementation(()=>{});
// Datos de prueba con valores problemáticos
const mockOrdersWithInvalidData = [
    {
        id: 'order-1',
        order_number: 'ORD-001',
        status: 'pending',
        total: undefined,
        created_at: '2024-01-01T10:00:00Z'
    },
    {
        id: 'order-2',
        order_number: 'ORD-002',
        status: 'confirmed',
        total: NaN,
        created_at: '2024-01-02T10:00:00Z'
    },
    {
        id: 'order-3',
        order_number: 'ORD-003',
        status: 'shipped',
        total: 'invalid',
        created_at: '2024-01-03T10:00:00Z'
    },
    {
        id: 'order-4',
        order_number: 'ORD-004',
        status: 'delivered',
        total: 15000,
        created_at: '2024-01-04T10:00:00Z'
    },
    {
        id: 'order-5',
        order_number: 'ORD-005',
        status: 'cancelled',
        total: 25000,
        created_at: '2024-01-05T10:00:00Z'
    }
];
const mockApiResponse = {
    data: {
        orders: mockOrdersWithInvalidData,
        pagination: {
            page: 1,
            limit: 20,
            total: mockOrdersWithInvalidData.length,
            totalPages: 1,
            hasNextPage: false,
            hasPreviousPage: false
        },
        filters: {}
    }
};
// ===================================
// SETUP Y CLEANUP
// ===================================
(0, _globals.beforeEach)(()=>{
    _globals.jest.clearAllMocks();
    mockFetch.mockResolvedValue({
        ok: true,
        status: 200,
        json: async ()=>mockApiResponse
    });
});
(0, _globals.afterEach)(()=>{
    _globals.jest.clearAllTimers();
});
// ===================================
// TESTS DE VALIDACIÓN
// ===================================
(0, _globals.describe)('useOrdersEnterprise - Validación de Datos', ()=>{
    (0, _globals.it)('debe manejar valores undefined en total sin retornar NaN', async ()=>{
        // Arrange
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        // Wait for initial fetch
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        (0, _globals.expect)(totalRevenue).not.toBeNaN();
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
        (0, _globals.expect)(typeof totalRevenue).toBe('number');
        (0, _globals.expect)(typeof avgOrderValue).toBe('number');
        // Solo debe contar la orden válida (order-4: 15000)
        (0, _globals.expect)(totalRevenue).toBe(15000);
        (0, _globals.expect)(avgOrderValue).toBe(15000);
        // Debe mostrar warnings para valores inválidos
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', undefined);
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', NaN);
        (0, _globals.expect)(mockConsoleWarn).toHaveBeenCalledWith('[useOrdersEnterprise] Invalid order total detected:', 'invalid');
    });
    (0, _globals.it)('debe excluir órdenes canceladas del cálculo', async ()=>{
        // Arrange
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        // No debe incluir la orden cancelada (order-5: 25000)
        (0, _globals.expect)(totalRevenue).toBe(15000); // Solo order-4
        (0, _globals.expect)(avgOrderValue).toBe(15000); // Solo order-4
    });
    (0, _globals.it)('debe retornar 0 cuando no hay órdenes válidas', async ()=>{
        // Arrange - Mock con solo órdenes inválidas
        const invalidOrdersOnly = mockOrdersWithInvalidData.filter((order)=>order.status === 'cancelled' || order.total === undefined || isNaN(order.total) || typeof order.total === 'string');
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: async ()=>({
                    data: {
                        orders: invalidOrdersOnly,
                        pagination: {
                            page: 1,
                            limit: 20,
                            total: invalidOrdersOnly.length,
                            totalPages: 1
                        },
                        filters: {}
                    }
                })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const totalRevenue = result.current.getTotalRevenue();
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        (0, _globals.expect)(totalRevenue).toBe(0);
        (0, _globals.expect)(avgOrderValue).toBe(0);
        (0, _globals.expect)(totalRevenue).not.toBeNaN();
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
    });
    (0, _globals.it)('debe redondear correctamente el valor promedio', async ()=>{
        // Arrange - Mock con valores que requieren redondeo
        const ordersWithDecimals = [
            {
                id: 'order-1',
                status: 'delivered',
                total: 33.33,
                created_at: '2024-01-01T10:00:00Z'
            },
            {
                id: 'order-2',
                status: 'delivered',
                total: 33.33,
                created_at: '2024-01-02T10:00:00Z'
            },
            {
                id: 'order-3',
                status: 'delivered',
                total: 33.34,
                created_at: '2024-01-03T10:00:00Z'
            }
        ];
        mockFetch.mockResolvedValue({
            ok: true,
            status: 200,
            json: async ()=>({
                    data: {
                        orders: ordersWithDecimals,
                        pagination: {
                            page: 1,
                            limit: 20,
                            total: ordersWithDecimals.length,
                            totalPages: 1
                        },
                        filters: {}
                    }
                })
        });
        const { result } = (0, _react.renderHook)(()=>(0, _useOrdersEnterprise.useOrdersEnterprise)());
        await (0, _react.waitFor)(()=>{
            (0, _globals.expect)(result.current.loading).toBe(false);
        });
        // Act
        const avgOrderValue = result.current.getAverageOrderValue();
        // Assert
        // (33.33 + 33.33 + 33.34) / 3 = 33.333... -> redondeado a 33.33
        (0, _globals.expect)(avgOrderValue).toBe(33.33);
        (0, _globals.expect)(avgOrderValue).not.toBeNaN();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxob29rc1xcdXNlT3JkZXJzRW50ZXJwcmlzZS12YWxpZGF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gVkFMSURBVElPTiBURVNUU1xyXG4vLyBQcnVlYmFzIGVzcGVjw61maWNhcyBwYXJhIHZhbGlkYWNpw7NuIGRlIGRhdG9zIGVuIHVzZU9yZGVyc0VudGVycHJpc2VcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xyXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XHJcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcclxuaW1wb3J0IHsgdXNlT3JkZXJzRW50ZXJwcmlzZSB9IGZyb20gJ0AvaG9va3MvdXNlT3JkZXJzRW50ZXJwcmlzZSc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNT0NLU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgbW9ja0ZldGNoID0gamVzdC5mbigpO1xyXG5nbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2g7XHJcblxyXG5jb25zdCBtb2NrQ29uc29sZVdhcm4gPSBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcclxuXHJcbi8vIERhdG9zIGRlIHBydWViYSBjb24gdmFsb3JlcyBwcm9ibGVtw6F0aWNvc1xyXG5jb25zdCBtb2NrT3JkZXJzV2l0aEludmFsaWREYXRhID0gW1xyXG4gIHtcclxuICAgIGlkOiAnb3JkZXItMScsXHJcbiAgICBvcmRlcl9udW1iZXI6ICdPUkQtMDAxJyxcclxuICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgdG90YWw6IHVuZGVmaW5lZCwgLy8gVmFsb3IgcHJvYmxlbcOhdGljb1xyXG4gICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMTA6MDA6MDBaJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdvcmRlci0yJywgXHJcbiAgICBvcmRlcl9udW1iZXI6ICdPUkQtMDAyJyxcclxuICAgIHN0YXR1czogJ2NvbmZpcm1lZCcsXHJcbiAgICB0b3RhbDogTmFOLCAvLyBWYWxvciBwcm9ibGVtw6F0aWNvXHJcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMlQxMDowMDowMFonXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ29yZGVyLTMnLFxyXG4gICAgb3JkZXJfbnVtYmVyOiAnT1JELTAwMycsIFxyXG4gICAgc3RhdHVzOiAnc2hpcHBlZCcsXHJcbiAgICB0b3RhbDogJ2ludmFsaWQnLCAvLyBWYWxvciBwcm9ibGVtw6F0aWNvXHJcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wM1QxMDowMDowMFonXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ29yZGVyLTQnLFxyXG4gICAgb3JkZXJfbnVtYmVyOiAnT1JELTAwNCcsXHJcbiAgICBzdGF0dXM6ICdkZWxpdmVyZWQnLFxyXG4gICAgdG90YWw6IDE1MDAwLCAvLyBWYWxvciB2w6FsaWRvXHJcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wNFQxMDowMDowMFonXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ29yZGVyLTUnLFxyXG4gICAgb3JkZXJfbnVtYmVyOiAnT1JELTAwNScsXHJcbiAgICBzdGF0dXM6ICdjYW5jZWxsZWQnLFxyXG4gICAgdG90YWw6IDI1MDAwLCAvLyBWYWxvciB2w6FsaWRvIHBlcm8gY2FuY2VsYWRvXHJcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wNVQxMDowMDowMFonXHJcbiAgfVxyXG5dO1xyXG5cclxuY29uc3QgbW9ja0FwaVJlc3BvbnNlID0ge1xyXG4gIGRhdGE6IHtcclxuICAgIG9yZGVyczogbW9ja09yZGVyc1dpdGhJbnZhbGlkRGF0YSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgcGFnZTogMSxcclxuICAgICAgbGltaXQ6IDIwLFxyXG4gICAgICB0b3RhbDogbW9ja09yZGVyc1dpdGhJbnZhbGlkRGF0YS5sZW5ndGgsXHJcbiAgICAgIHRvdGFsUGFnZXM6IDEsXHJcbiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcclxuICAgICAgaGFzUHJldmlvdXNQYWdlOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGZpbHRlcnM6IHt9XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0VUVVAgWSBDTEVBTlVQXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5iZWZvcmVFYWNoKCgpID0+IHtcclxuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICBcclxuICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgb2s6IHRydWUsXHJcbiAgICBzdGF0dXM6IDIwMCxcclxuICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tBcGlSZXNwb25zZVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgamVzdC5jbGVhckFsbFRpbWVycygpO1xyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRFU1RTIERFIFZBTElEQUNJw5NOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5kZXNjcmliZSgndXNlT3JkZXJzRW50ZXJwcmlzZSAtIFZhbGlkYWNpw7NuIGRlIERhdG9zJywgKCkgPT4ge1xyXG4gIGl0KCdkZWJlIG1hbmVqYXIgdmFsb3JlcyB1bmRlZmluZWQgZW4gdG90YWwgc2luIHJldG9ybmFyIE5hTicsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIEFycmFuZ2VcclxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU9yZGVyc0VudGVycHJpc2UoKSk7XHJcblxyXG4gICAgLy8gV2FpdCBmb3IgaW5pdGlhbCBmZXRjaFxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sb2FkaW5nKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFjdFxyXG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gcmVzdWx0LmN1cnJlbnQuZ2V0VG90YWxSZXZlbnVlKCk7XHJcbiAgICBjb25zdCBhdmdPcmRlclZhbHVlID0gcmVzdWx0LmN1cnJlbnQuZ2V0QXZlcmFnZU9yZGVyVmFsdWUoKTtcclxuXHJcbiAgICAvLyBBc3NlcnRcclxuICAgIGV4cGVjdCh0b3RhbFJldmVudWUpLm5vdC50b0JlTmFOKCk7XHJcbiAgICBleHBlY3QoYXZnT3JkZXJWYWx1ZSkubm90LnRvQmVOYU4oKTtcclxuICAgIGV4cGVjdCh0eXBlb2YgdG90YWxSZXZlbnVlKS50b0JlKCdudW1iZXInKTtcclxuICAgIGV4cGVjdCh0eXBlb2YgYXZnT3JkZXJWYWx1ZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICBcclxuICAgIC8vIFNvbG8gZGViZSBjb250YXIgbGEgb3JkZW4gdsOhbGlkYSAob3JkZXItNDogMTUwMDApXHJcbiAgICBleHBlY3QodG90YWxSZXZlbnVlKS50b0JlKDE1MDAwKTtcclxuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS50b0JlKDE1MDAwKTtcclxuICAgIFxyXG4gICAgLy8gRGViZSBtb3N0cmFyIHdhcm5pbmdzIHBhcmEgdmFsb3JlcyBpbnbDoWxpZG9zXHJcbiAgICBleHBlY3QobW9ja0NvbnNvbGVXYXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgJ1t1c2VPcmRlcnNFbnRlcnByaXNlXSBJbnZhbGlkIG9yZGVyIHRvdGFsIGRldGVjdGVkOicsIFxyXG4gICAgICB1bmRlZmluZWRcclxuICAgICk7XHJcbiAgICBleHBlY3QobW9ja0NvbnNvbGVXYXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgJ1t1c2VPcmRlcnNFbnRlcnByaXNlXSBJbnZhbGlkIG9yZGVyIHRvdGFsIGRldGVjdGVkOicsIFxyXG4gICAgICBOYU5cclxuICAgICk7XHJcbiAgICBleHBlY3QobW9ja0NvbnNvbGVXYXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgJ1t1c2VPcmRlcnNFbnRlcnByaXNlXSBJbnZhbGlkIG9yZGVyIHRvdGFsIGRldGVjdGVkOicsIFxyXG4gICAgICAnaW52YWxpZCdcclxuICAgICk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdkZWJlIGV4Y2x1aXIgw7NyZGVuZXMgY2FuY2VsYWRhcyBkZWwgY8OhbGN1bG8nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBBcnJhbmdlXHJcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VPcmRlcnNFbnRlcnByaXNlKCkpO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubG9hZGluZykudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBY3RcclxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHJlc3VsdC5jdXJyZW50LmdldFRvdGFsUmV2ZW51ZSgpO1xyXG4gICAgY29uc3QgYXZnT3JkZXJWYWx1ZSA9IHJlc3VsdC5jdXJyZW50LmdldEF2ZXJhZ2VPcmRlclZhbHVlKCk7XHJcblxyXG4gICAgLy8gQXNzZXJ0XHJcbiAgICAvLyBObyBkZWJlIGluY2x1aXIgbGEgb3JkZW4gY2FuY2VsYWRhIChvcmRlci01OiAyNTAwMClcclxuICAgIGV4cGVjdCh0b3RhbFJldmVudWUpLnRvQmUoMTUwMDApOyAvLyBTb2xvIG9yZGVyLTRcclxuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS50b0JlKDE1MDAwKTsgLy8gU29sbyBvcmRlci00XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdkZWJlIHJldG9ybmFyIDAgY3VhbmRvIG5vIGhheSDDs3JkZW5lcyB2w6FsaWRhcycsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIEFycmFuZ2UgLSBNb2NrIGNvbiBzb2xvIMOzcmRlbmVzIGludsOhbGlkYXNcclxuICAgIGNvbnN0IGludmFsaWRPcmRlcnNPbmx5ID0gbW9ja09yZGVyc1dpdGhJbnZhbGlkRGF0YS5maWx0ZXIob3JkZXIgPT4gXHJcbiAgICAgIG9yZGVyLnN0YXR1cyA9PT0gJ2NhbmNlbGxlZCcgfHwgb3JkZXIudG90YWwgPT09IHVuZGVmaW5lZCB8fCBpc05hTihvcmRlci50b3RhbCkgfHwgdHlwZW9mIG9yZGVyLnRvdGFsID09PSAnc3RyaW5nJ1xyXG4gICAgKTtcclxuICAgIFxyXG4gICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgb2s6IHRydWUsXHJcbiAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIG9yZGVyczogaW52YWxpZE9yZGVyc09ubHksXHJcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiAyMCwgdG90YWw6IGludmFsaWRPcmRlcnNPbmx5Lmxlbmd0aCwgdG90YWxQYWdlczogMSB9LFxyXG4gICAgICAgICAgZmlsdGVyczoge31cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VPcmRlcnNFbnRlcnByaXNlKCkpO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubG9hZGluZykudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBY3RcclxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHJlc3VsdC5jdXJyZW50LmdldFRvdGFsUmV2ZW51ZSgpO1xyXG4gICAgY29uc3QgYXZnT3JkZXJWYWx1ZSA9IHJlc3VsdC5jdXJyZW50LmdldEF2ZXJhZ2VPcmRlclZhbHVlKCk7XHJcblxyXG4gICAgLy8gQXNzZXJ0XHJcbiAgICBleHBlY3QodG90YWxSZXZlbnVlKS50b0JlKDApO1xyXG4gICAgZXhwZWN0KGF2Z09yZGVyVmFsdWUpLnRvQmUoMCk7XHJcbiAgICBleHBlY3QodG90YWxSZXZlbnVlKS5ub3QudG9CZU5hTigpO1xyXG4gICAgZXhwZWN0KGF2Z09yZGVyVmFsdWUpLm5vdC50b0JlTmFOKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdkZWJlIHJlZG9uZGVhciBjb3JyZWN0YW1lbnRlIGVsIHZhbG9yIHByb21lZGlvJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gQXJyYW5nZSAtIE1vY2sgY29uIHZhbG9yZXMgcXVlIHJlcXVpZXJlbiByZWRvbmRlb1xyXG4gICAgY29uc3Qgb3JkZXJzV2l0aERlY2ltYWxzID0gW1xyXG4gICAgICB7IGlkOiAnb3JkZXItMScsIHN0YXR1czogJ2RlbGl2ZXJlZCcsIHRvdGFsOiAzMy4zMywgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMTA6MDA6MDBaJyB9LFxyXG4gICAgICB7IGlkOiAnb3JkZXItMicsIHN0YXR1czogJ2RlbGl2ZXJlZCcsIHRvdGFsOiAzMy4zMywgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDJUMTA6MDA6MDBaJyB9LFxyXG4gICAgICB7IGlkOiAnb3JkZXItMycsIHN0YXR1czogJ2RlbGl2ZXJlZCcsIHRvdGFsOiAzMy4zNCwgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDNUMTA6MDA6MDBaJyB9XHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICBvazogdHJ1ZSxcclxuICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgb3JkZXJzOiBvcmRlcnNXaXRoRGVjaW1hbHMsXHJcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiAyMCwgdG90YWw6IG9yZGVyc1dpdGhEZWNpbWFscy5sZW5ndGgsIHRvdGFsUGFnZXM6IDEgfSxcclxuICAgICAgICAgIGZpbHRlcnM6IHt9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlT3JkZXJzRW50ZXJwcmlzZSgpKTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmxvYWRpbmcpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWN0XHJcbiAgICBjb25zdCBhdmdPcmRlclZhbHVlID0gcmVzdWx0LmN1cnJlbnQuZ2V0QXZlcmFnZU9yZGVyVmFsdWUoKTtcclxuXHJcbiAgICAvLyBBc3NlcnRcclxuICAgIC8vICgzMy4zMyArIDMzLjMzICsgMzMuMzQpIC8gMyA9IDMzLjMzMy4uLiAtPiByZWRvbmRlYWRvIGEgMzMuMzNcclxuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS50b0JlKDMzLjMzKTtcclxuICAgIGV4cGVjdChhdmdPcmRlclZhbHVlKS5ub3QudG9CZU5hTigpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJtb2NrRmV0Y2giLCJqZXN0IiwiZm4iLCJnbG9iYWwiLCJmZXRjaCIsIm1vY2tDb25zb2xlV2FybiIsInNweU9uIiwiY29uc29sZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm1vY2tPcmRlcnNXaXRoSW52YWxpZERhdGEiLCJpZCIsIm9yZGVyX251bWJlciIsInN0YXR1cyIsInRvdGFsIiwidW5kZWZpbmVkIiwiY3JlYXRlZF9hdCIsIk5hTiIsIm1vY2tBcGlSZXNwb25zZSIsImRhdGEiLCJvcmRlcnMiLCJwYWdpbmF0aW9uIiwicGFnZSIsImxpbWl0IiwibGVuZ3RoIiwidG90YWxQYWdlcyIsImhhc05leHRQYWdlIiwiaGFzUHJldmlvdXNQYWdlIiwiZmlsdGVycyIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJvayIsImpzb24iLCJhZnRlckVhY2giLCJjbGVhckFsbFRpbWVycyIsImRlc2NyaWJlIiwiaXQiLCJyZXN1bHQiLCJyZW5kZXJIb29rIiwidXNlT3JkZXJzRW50ZXJwcmlzZSIsIndhaXRGb3IiLCJleHBlY3QiLCJjdXJyZW50IiwibG9hZGluZyIsInRvQmUiLCJ0b3RhbFJldmVudWUiLCJnZXRUb3RhbFJldmVudWUiLCJhdmdPcmRlclZhbHVlIiwiZ2V0QXZlcmFnZU9yZGVyVmFsdWUiLCJub3QiLCJ0b0JlTmFOIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJpbnZhbGlkT3JkZXJzT25seSIsImZpbHRlciIsIm9yZGVyIiwiaXNOYU4iLCJvcmRlcnNXaXRoRGVjaW1hbHMiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx3Q0FBd0M7QUFDeEMsc0VBQXNFO0FBQ3RFLHNDQUFzQzs7Ozs7dUJBRUc7eUJBQ21CO3FDQUV4QjtBQUVwQyxzQ0FBc0M7QUFDdEMsUUFBUTtBQUNSLHNDQUFzQztBQUV0QyxNQUFNQSxZQUFZQyxhQUFJLENBQUNDLEVBQUU7QUFDekJDLE9BQU9DLEtBQUssR0FBR0o7QUFFZixNQUFNSyxrQkFBa0JKLGFBQUksQ0FBQ0ssS0FBSyxDQUFDQyxT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