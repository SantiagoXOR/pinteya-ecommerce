{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Checkout\\index.tsx"],"sourcesContent":["'use client'\nimport React, { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Breadcrumb from '../Common/Breadcrumb'\n\nimport Shipping from './Shipping'\n\nimport PaymentMethod from './PaymentMethod'\nimport Billing from './Billing'\nimport Coupon from './Coupon'\nimport UserInfo from './UserInfo'\nimport { useCheckout } from '@/hooks/useCheckout'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { FormMessage } from '@/components/ui/form'\nimport { Progress } from '@/components/ui/progress'\nimport { Badge } from '@/components/ui/badge'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Loader2,\n  CreditCard,\n  AlertTriangle,\n  ShoppingCart,\n  Truck,\n  CheckCircle,\n  User,\n  MapPin,\n  Shield,\n  Phone,\n  Mail,\n  MessageCircle,\n  Zap,\n  Gift,\n  Star,\n  Users,\n  Clock,\n  Eye,\n  TrendingUp,\n} from '@/lib/optimized-imports'\nimport MercadoPagoWallet, { MercadoPagoWalletFallback } from './MercadoPagoWallet'\nimport { CartSummary } from '@/components/ui/cart-summary'\nimport {\n  UrgencyTimer,\n  StockIndicator,\n  TrustSignals,\n  SocialProof,\n  PurchaseIncentives,\n  ExitIntentModal,\n} from './ConversionOptimizer'\n\nconst Checkout = () => {\n  const router = useRouter()\n  const [showExitIntent, setShowExitIntent] = useState(false)\n  const [isExpressMode, setIsExpressMode] = useState(true) // ✅ TEMPORAL: Activado por defecto para testing\n\n  const {\n    formData,\n    isLoading,\n    errors,\n    step,\n    cartItems,\n    totalPrice,\n    shippingCost,\n    discount,\n    finalTotal,\n    appliedCoupon,\n    applyCoupon,\n    updateBillingData,\n    updateShippingData,\n    updateFormData,\n    processCheckout,\n    processExpressCheckout,\n    // ✅ Propiedades para Wallet Brick\n    preferenceId,\n    initPoint,\n    handleWalletReady,\n    handleWalletError,\n    handleWalletSubmit,\n  } = useCheckout()\n\n  // ✅ UNIFICADO: Pasos del checkout\n  const checkoutSteps = [\n    {\n      id: 'info',\n      title: 'Información',\n      description: 'Datos de contacto y envío',\n      icon: User,\n      isCompleted: step !== 'form',\n      isActive: step === 'form',\n    },\n    {\n      id: 'payment',\n      title: 'Pago',\n      description: 'Método de pago seguro',\n      icon: CreditCard,\n      isCompleted: step === 'success',\n      isActive: step === 'payment',\n    },\n    {\n      id: 'confirmation',\n      title: 'Confirmación',\n      description: 'Pedido completado',\n      icon: CheckCircle,\n      isCompleted: step === 'success',\n      isActive: step === 'success',\n    },\n  ]\n\n  // Calcular progreso\n  const getProgressValue = () => {\n    switch (step) {\n      case 'form':\n        return 33\n      case 'processing':\n        return 66\n      case 'payment':\n        return 66\n      case 'redirect':\n        return 90\n      case 'success':\n        return 100\n      default:\n        return 0\n    }\n  }\n\n  // ✅ NUEVO: Exit intent detection para conversión\n  useEffect(() => {\n    const handleMouseLeave = (e: MouseEvent) => {\n      if (e.clientY <= 0 && !showExitIntent && step === 'form') {\n        setShowExitIntent(true)\n      }\n    }\n\n    document.addEventListener('mouseleave', handleMouseLeave)\n    return () => document.removeEventListener('mouseleave', handleMouseLeave)\n  }, [showExitIntent, step])\n\n  // Redirigir si el carrito está vacío\n  useEffect(() => {\n    if (cartItems.length === 0 && step === 'form') {\n      router.push('/cart')\n    }\n  }, [cartItems.length, step, router])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    // ✅ CORREGIDO: Usar la función correcta según el modo\n    if (isExpressMode) {\n      await processExpressCheckout()\n    } else {\n      await processCheckout()\n    }\n  }\n\n  const handlePaymentMethodChange = (method: string) => {\n    updateFormData({ paymentMethod: method as 'mercadopago' | 'bank' | 'cash' })\n  }\n\n  // ✅ NUEVO: Toggle entre modo normal y express\n  const toggleExpressMode = () => {\n    setIsExpressMode(!isExpressMode)\n  }\n\n  if (step === 'processing') {\n    return (\n      <>\n        <Breadcrumb title={'Checkout'} pages={['checkout']} />\n        <section className='overflow-hidden py-8 md:py-20 bg-gray-50'>\n          <div className='max-w-4xl w-full mx-auto px-4 sm:px-8 xl:px-0'>\n            {/* Progress indicator */}\n            <div className='mb-8'>\n              <div className='flex items-center justify-between mb-4'>\n                <h1 className='text-2xl font-bold text-gray-900'>Checkout</h1>\n                <Badge variant='secondary' className='bg-blaze-orange-100 text-blaze-orange-700'>\n                  Paso 2 de 3\n                </Badge>\n              </div>\n              <Progress value={getProgressValue()} className='h-2' />\n            </div>\n\n            <Card className='max-w-md mx-auto shadow-lg'>\n              <CardContent className='p-8 md:p-12 text-center'>\n                <div className='flex flex-col items-center gap-6'>\n                  <div className='w-20 h-20 rounded-full bg-blaze-orange-100 flex items-center justify-center'>\n                    <Loader2 className='w-10 h-10 text-blaze-orange-600 animate-spin' />\n                  </div>\n                  <div className='space-y-2'>\n                    <h2 className='text-xl md:text-2xl font-semibold text-gray-900'>\n                      Procesando tu pedido...\n                    </h2>\n                    <p className='text-gray-600 text-sm md:text-base'>\n                      Por favor espera mientras preparamos tu pago seguro.\n                    </p>\n                  </div>\n                  <div className='w-full bg-gray-200 rounded-full h-2'>\n                    <div\n                      className='bg-blaze-orange-600 h-2 rounded-full animate-pulse'\n                      style={{ width: '66%' }}\n                    ></div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n      </>\n    )\n  }\n\n  // ✅ MEJORADO: Paso de pago con Wallet Brick y Design System\n  if (step === 'payment') {\n    return (\n      <>\n        <Breadcrumb title={'Checkout - Pago'} pages={['checkout', 'pago']} />\n        <section className='overflow-hidden py-8 md:py-20 bg-gray-50'>\n          <div className='max-w-6xl w-full mx-auto px-4 sm:px-8 xl:px-0'>\n            {/* Progress indicator */}\n            <div className='mb-8'>\n              <div className='flex items-center justify-between mb-4'>\n                <h1 className='text-2xl md:text-3xl font-bold text-gray-900'>Finalizar Pago</h1>\n                <Badge variant='secondary' className='bg-blaze-orange-100 text-blaze-orange-700'>\n                  Paso 3 de 3\n                </Badge>\n              </div>\n              <Progress value={getProgressValue()} className='h-2' />\n            </div>\n\n            <div className='grid grid-cols-1 lg:grid-cols-3 gap-8'>\n              {/* Payment Section */}\n              <div className='lg:col-span-2'>\n                <Card className='shadow-lg'>\n                  <CardHeader className='bg-blaze-orange-50 border-b'>\n                    <CardTitle className='flex items-center gap-2 text-blaze-orange-700'>\n                      <CreditCard className='w-5 h-5' />\n                      Método de Pago Seguro\n                    </CardTitle>\n                    <p className='text-sm text-gray-600 mt-1'>\n                      Completa tu compra de forma segura con MercadoPago\n                    </p>\n                  </CardHeader>\n                  <CardContent className='p-6'>\n                    {/* Wallet Brick */}\n                    {preferenceId ? (\n                      <MercadoPagoWallet\n                        preferenceId={preferenceId}\n                        onReady={handleWalletReady}\n                        onError={handleWalletError}\n                        onSubmit={handleWalletSubmit}\n                        className='min-h-[400px]'\n                      />\n                    ) : (\n                      // Fallback si no hay preferenceId\n                      initPoint && <MercadoPagoWalletFallback initPoint={initPoint} />\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Order Summary */}\n              <div className='lg:col-span-1'>\n                <CartSummary\n                  cartItems={cartItems}\n                  totalPrice={totalPrice}\n                  shippingCost={shippingCost}\n                  discount={discount}\n                  finalTotal={finalTotal}\n                  shippingMethod={formData.shippingMethod}\n                  appliedCoupon={appliedCoupon}\n                  variant='detailed'\n                  showProductCards={false}\n                  productCardContext='checkout'\n                  className='sticky top-4'\n                />\n              </div>\n            </div>\n          </div>\n        </section>\n      </>\n    )\n  }\n\n  if (step === 'redirect') {\n    return (\n      <>\n        <Breadcrumb title={'Checkout'} pages={['checkout']} />\n        <section className='overflow-hidden py-8 md:py-20 bg-gray-50'>\n          <div className='max-w-4xl w-full mx-auto px-4 sm:px-8 xl:px-0'>\n            {/* Progress indicator */}\n            <div className='mb-8'>\n              <div className='flex items-center justify-between mb-4'>\n                <h1 className='text-2xl font-bold text-gray-900'>Checkout</h1>\n                <Badge variant='secondary' className='bg-yellow-100 text-yellow-700'>\n                  Finalizando...\n                </Badge>\n              </div>\n              <Progress value={getProgressValue()} className='h-2' />\n            </div>\n\n            <Card className='max-w-md mx-auto shadow-lg'>\n              <CardContent className='p-8 md:p-12 text-center'>\n                <div className='flex flex-col items-center gap-6'>\n                  <div className='w-20 h-20 rounded-full bg-yellow-100 flex items-center justify-center'>\n                    <CreditCard className='w-10 h-10 text-yellow-600 animate-pulse' />\n                  </div>\n                  <div className='space-y-2'>\n                    <h2 className='text-xl md:text-2xl font-semibold text-gray-900'>\n                      Procesando Pago...\n                    </h2>\n                    <p className='text-gray-600 text-sm md:text-base'>\n                      Tu pago está siendo procesado. Serás redirigido automáticamente.\n                    </p>\n                  </div>\n                  <div className='flex items-center gap-2 text-sm text-gray-500'>\n                    <Loader2 className='w-4 h-4 animate-spin' />\n                    <span>Conectando con MercadoPago...</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <section className='overflow-hidden py-4 md:py-8 bg-gray-50'>\n        <div className='max-w-6xl w-full mx-auto px-4 sm:px-8 xl:px-0'>\n          {/* ✅ UNIFICADO: Header con progreso y modo express */}\n          <div className='mb-8'>\n            <div className='flex items-center justify-between mb-4'>\n              <div className='flex items-center gap-4'>\n                <h1 className='text-2xl md:text-3xl font-bold text-gray-900'>Checkout</h1>\n                <Button\n                  type='button'\n                  variant='outline'\n                  size='sm'\n                  onClick={toggleExpressMode}\n                  className='hidden md:flex items-center gap-2'\n                >\n                  <Zap className='w-4 h-4' />\n                  {isExpressMode ? 'Modo Completo' : 'Modo Express'}\n                </Button>\n              </div>\n              <div className='flex items-center gap-3'>\n                <Badge variant='secondary' className='bg-blaze-orange-100 text-blaze-orange-700'>\n                  Paso {step === 'form' ? '1' : step === 'payment' ? '2' : '3'} de 3\n                </Badge>\n                <Button\n                  variant='outline'\n                  size='sm'\n                  className='flex items-center gap-2'\n                  onClick={() => window.open('https://wa.me/5493515551234', '_blank')}\n                >\n                  <MessageCircle className='w-4 h-4' />\n                  <span className='hidden md:inline'>Ayuda</span>\n                </Button>\n              </div>\n            </div>\n            <Progress value={getProgressValue()} className='h-3' />\n          </div>\n\n          {/* ✅ OPTIMIZADO: Elementos de conversión simplificados */}\n          <div className='mb-6 space-y-3'>\n            {/* Timer de Urgencia */}\n            <UrgencyTimer\n              initialMinutes={15}\n              message='Completa tu compra para mantener el precio y envío gratis desde $15.000'\n              variant='warning'\n              showProgress={true}\n            />\n\n            {/* Trust Signals */}\n            <TrustSignals />\n          </div>\n\n          <form onSubmit={handleSubmit} role='form'>\n            <div className='grid grid-cols-1 lg:grid-cols-3 gap-8'>\n              {/* Checkout form */}\n              <div className='lg:col-span-2 space-y-6'>\n                {/* Error general - Mejorado con Design System */}\n                {errors.general && (\n                  <Card className='border-red-200 bg-red-50 shadow-sm'>\n                    <CardContent className='p-4'>\n                      <div className='flex items-center gap-3'>\n                        <AlertTriangle className='w-5 h-5 text-red-600 flex-shrink-0' />\n                        <div>\n                          <h4 className='font-medium text-red-800'>Error en el checkout</h4>\n                          <p className='text-sm text-red-700 mt-1'>{errors.general}</p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Error de carrito vacío */}\n                {errors.cart && (\n                  <Card className='border-yellow-200 bg-yellow-50 shadow-sm'>\n                    <CardContent className='p-4'>\n                      <div className='flex items-center gap-3'>\n                        <ShoppingCart className='w-5 h-5 text-yellow-600 flex-shrink-0' />\n                        <p className='text-yellow-800 font-medium'>{errors.cart}</p>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* ✅ SIMPLIFICADO: Formulario optimizado */}\n                {isExpressMode ? (\n                  /* Modo Express - Formulario ultra simplificado */\n                  <Card className='shadow-lg'>\n                    <CardHeader className='bg-gradient-to-r from-blaze-orange-50 to-yellow-50 border-b'>\n                      <CardTitle className='flex items-center gap-2 text-blaze-orange-700'>\n                        <Zap className='w-5 h-5' />\n                        Checkout Express\n                      </CardTitle>\n                      <p className='text-sm text-gray-600 mt-1'>Solo 3 datos y listo</p>\n                    </CardHeader>\n                    <CardContent className='p-6 space-y-4'>\n                      <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n                        {/* Email */}\n                        <div className='space-y-2'>\n                          <label className='flex items-center gap-2 text-sm font-medium'>\n                            <Mail className='w-4 h-4 text-blaze-orange-600' />\n                            Email\n                          </label>\n                          <input\n                            type='email'\n                            placeholder='tu@email.com'\n                            value={formData.billing.email}\n                            onChange={e => updateBillingData({ email: e.target.value })}\n                            className='w-full h-12 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n                          />\n                        </div>\n\n                        {/* Teléfono */}\n                        <div className='space-y-2'>\n                          <label className='flex items-center gap-2 text-sm font-medium'>\n                            <Phone className='w-4 h-4 text-blaze-orange-600' />\n                            Teléfono\n                          </label>\n                          <input\n                            type='tel'\n                            placeholder='11 1234-5678'\n                            value={formData.billing.phone}\n                            onChange={e => updateBillingData({ phone: e.target.value })}\n                            className='w-full h-12 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n                          />\n                        </div>\n                      </div>\n\n                      {/* Dirección */}\n                      <div className='space-y-2'>\n                        <label className='flex items-center gap-2 text-sm font-medium'>\n                          <MapPin className='w-4 h-4 text-blaze-orange-600' />\n                          Dirección completa\n                        </label>\n                        <input\n                          type='text'\n                          placeholder='Calle 123, Ciudad, Provincia'\n                          value={formData.billing.streetAddress}\n                          onChange={e => updateBillingData({ streetAddress: e.target.value })}\n                          className='w-full h-12 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent'\n                        />\n                      </div>\n\n                      {/* Payment Method Express */}\n                      <div className='space-y-3'>\n                        <h3 className='font-semibold flex items-center gap-2'>\n                          <CreditCard className='w-5 h-5 text-blaze-orange-600' />\n                          Método de Pago\n                        </h3>\n                        <PaymentMethod\n                          selectedMethod={formData.paymentMethod}\n                          onMethodChange={handlePaymentMethodChange}\n                        />\n                      </div>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  /* Modo Completo - Formulario tradicional */\n                  <>\n                    {/* Billing details */}\n                    <Card className='shadow-sm'>\n                      <CardHeader className='bg-blaze-orange-50 border-b'>\n                        <CardTitle className='flex items-center gap-2 text-blaze-orange-700'>\n                          <User className='w-5 h-5' />\n                          Información de Facturación\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className='p-6'>\n                        <Billing\n                          billingData={formData.billing}\n                          errors={errors}\n                          onBillingChange={updateBillingData}\n                        />\n                      </CardContent>\n                    </Card>\n\n                    {/* Shipping address */}\n                    <Card className='shadow-sm'>\n                      <CardHeader className='bg-blue-50 border-b'>\n                        <CardTitle className='flex items-center gap-2 text-blue-700'>\n                          <Truck className='w-5 h-5' />\n                          Dirección de Envío\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className='p-6'>\n                        <Shipping\n                          shippingData={formData.shipping}\n                          billingData={formData.billing}\n                          errors={errors}\n                          onShippingChange={updateShippingData}\n                        />\n                      </CardContent>\n                    </Card>\n\n                    {/* Payment method */}\n                    <Card className='shadow-sm'>\n                      <CardHeader className='bg-purple-50 border-b'>\n                        <CardTitle className='flex items-center gap-2 text-purple-700'>\n                          <CreditCard className='w-5 h-5' />\n                          Método de Pago\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className='p-6'>\n                        <PaymentMethod\n                          selectedMethod={formData.paymentMethod}\n                          onMethodChange={handlePaymentMethodChange}\n                        />\n                      </CardContent>\n                    </Card>\n                  </>\n                )}\n              </div>\n\n              {/* ✅ SIMPLIFICADO: Sidebar optimizado */}\n              <div className='lg:col-span-1 space-y-4'>\n                {/* Stock Indicator - Solo elemento principal */}\n                <StockIndicator\n                  quantity={3}\n                  lowStockThreshold={5}\n                  viewers={0}\n                  recentPurchases={0}\n                  showSocialProof={false}\n                />\n\n                {/* Order summary - CartSummary del Design System */}\n                <CartSummary\n                  cartItems={cartItems}\n                  totalPrice={totalPrice}\n                  shippingCost={shippingCost}\n                  discount={discount}\n                  finalTotal={finalTotal}\n                  shippingMethod='free'\n                  appliedCoupon={appliedCoupon}\n                  variant='detailed'\n                  showProductCards={false}\n                  productCardContext='checkout'\n                  className='sticky top-4'\n                />\n\n                {/* Social Proof sutil */}\n                <SocialProof showTestimonials={false} />\n\n                {/* Coupon simplificado */}\n                <Card className='shadow-sm'>\n                  <CardContent className='p-4'>\n                    <Coupon\n                      onCouponApply={applyCoupon}\n                      appliedCoupon={appliedCoupon}\n                      isLoading={isLoading}\n                    />\n                  </CardContent>\n                </Card>\n\n                {/* Checkout button - Simplificado */}\n                <Card className='shadow-lg border-2 border-yellow-200'>\n                  <CardContent className='p-4'>\n                    <Button\n                      type='submit'\n                      disabled={isLoading || cartItems.length === 0}\n                      className={`w-full h-16 text-2xl font-bold transition-all duration-200 ${\n                        isLoading || cartItems.length === 0\n                          ? 'bg-gray-400 cursor-not-allowed'\n                          : 'bg-blaze-orange-600 hover:bg-blaze-orange-700 text-white shadow-lg hover:shadow-xl'\n                      }`}\n                    >\n                      {isLoading ? (\n                        <div className='flex items-center gap-2'>\n                          <Loader2 className='w-6 h-6 animate-spin' />\n                          Procesando...\n                        </div>\n                      ) : (\n                        <div className='flex items-center gap-2'>\n                          <CreditCard className='w-6 h-6' />\n                          FINALIZAR COMPRA - ${finalTotal ? finalTotal.toLocaleString() : '0'}\n                        </div>\n                      )}\n                    </Button>\n\n                    {/* Trust indicators simplificados */}\n                    <div className='mt-3 flex items-center justify-center gap-4 text-sm text-gray-600'>\n                      <div className='flex items-center gap-1'>\n                        <Shield className='w-4 h-4 text-green-600' />\n                        <span>Pago Seguro</span>\n                      </div>\n                      <div className='flex items-center gap-1'>\n                        <Truck className='w-4 h-4 text-blue-600' />\n                        <span>Envío Gratis +$15.000</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </form>\n        </div>\n\n        {/* ✅ NUEVO: Exit Intent Modal para conversión */}\n        {showExitIntent && (\n          <ExitIntentModal\n            onClose={() => setShowExitIntent(false)}\n            onAccept={() => {\n              setShowExitIntent(false)\n              // TODO: Aplicar descuento del 10%\n              // applyCoupon('EXIT10');\n            }}\n            discount={10}\n          />\n        )}\n      </section>\n    </>\n  )\n}\n\nexport default Checkout\n"],"names":["Checkout","router","useRouter","showExitIntent","setShowExitIntent","useState","isExpressMode","setIsExpressMode","formData","isLoading","errors","step","cartItems","totalPrice","shippingCost","discount","finalTotal","appliedCoupon","applyCoupon","updateBillingData","updateShippingData","updateFormData","processCheckout","processExpressCheckout","preferenceId","initPoint","handleWalletReady","handleWalletError","handleWalletSubmit","useCheckout","checkoutSteps","id","title","description","icon","User","isCompleted","isActive","CreditCard","CheckCircle","getProgressValue","useEffect","handleMouseLeave","e","clientY","document","addEventListener","removeEventListener","length","push","handleSubmit","preventDefault","handlePaymentMethodChange","method","paymentMethod","toggleExpressMode","Breadcrumb","pages","section","className","div","h1","Badge","variant","Progress","value","Card","CardContent","Loader2","h2","p","style","width","CardHeader","CardTitle","MercadoPagoWallet","onReady","onError","onSubmit","MercadoPagoWalletFallback","CartSummary","shippingMethod","showProductCards","productCardContext","span","Button","type","size","onClick","Zap","window","open","MessageCircle","UrgencyTimer","initialMinutes","message","showProgress","TrustSignals","form","role","general","AlertTriangle","h4","cart","ShoppingCart","label","Mail","input","placeholder","billing","email","onChange","target","Phone","phone","MapPin","streetAddress","h3","PaymentMethod","selectedMethod","onMethodChange","Billing","billingData","onBillingChange","Truck","Shipping","shippingData","shipping","onShippingChange","StockIndicator","quantity","lowStockThreshold","viewers","recentPurchases","showSocialProof","SocialProof","showTestimonials","Coupon","onCouponApply","disabled","toLocaleString","Shield","ExitIntentModal","onClose","onAccept"],"mappings":"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"}