d4445dc4bd7d563f44641ddca188425b
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get ProactiveMonitoringService () {
        return ProactiveMonitoringService;
    },
    get proactiveMonitoring () {
        return proactiveMonitoring;
    },
    get reportError () {
        return reportError;
    },
    get startMonitoring () {
        return startMonitoring;
    },
    get stopMonitoring () {
        return stopMonitoring;
    }
});
const _logger = require("../enterprise/logger");
const _alertsystem = require("./alert-system");
const _enterprisemetrics = require("./enterprise-metrics");
const _email = require("../notifications/email");
const _slack = require("../notifications/slack");
class ProactiveMonitoringService {
    static getInstance() {
        if (!ProactiveMonitoringService.instance) {
            ProactiveMonitoringService.instance = new ProactiveMonitoringService();
        }
        return ProactiveMonitoringService.instance;
    }
    constructor(){
        this.errorPatterns = new Map();
        this.errorCounts = new Map();
        this.healthChecks = new Map();
        this.monitoringInterval = null;
        // Solo inicializar en el servidor
        if (typeof window === 'undefined') {
            this.alertSystem = _alertsystem.EnterpriseAlertSystem.getInstance();
            this.metricsCollector = _enterprisemetrics.EnterpriseMetricsCollector.getInstance();
        }
        this.config = {
            enabled: true,
            checkInterval: 30,
            errorThreshold: 5,
            responseTimeThreshold: 2000,
            memoryThreshold: 80,
            cpuThreshold: 70,
            enableAutoRecovery: true,
            notificationChannels: [
                'email',
                'slack'
            ]
        };
        this.initializeDefaultPatterns();
    }
    initializeDefaultPatterns() {
        const defaultPatterns = [
            {
                id: 'database_connection_error',
                name: 'Database Connection Error',
                pattern: /database.*connection.*failed|connection.*timeout|pool.*exhausted/i,
                severity: 'critical',
                threshold: 3,
                timeWindow: 5,
                description: 'Errores de conexi칩n a la base de datos',
                isActive: true
            },
            {
                id: 'payment_processing_error',
                name: 'Payment Processing Error',
                pattern: /payment.*failed|transaction.*error|mercadopago.*error/i,
                severity: 'high',
                threshold: 5,
                timeWindow: 10,
                description: 'Errores en el procesamiento de pagos',
                isActive: true
            },
            {
                id: 'authentication_error',
                name: 'Authentication Error',
                pattern: /auth.*failed|unauthorized|invalid.*token|session.*expired/i,
                severity: 'medium',
                threshold: 10,
                timeWindow: 15,
                description: 'Errores de autenticaci칩n',
                isActive: true
            },
            {
                id: 'api_rate_limit',
                name: 'API Rate Limit Exceeded',
                pattern: /rate.*limit.*exceeded|too.*many.*requests|429/i,
                severity: 'medium',
                threshold: 20,
                timeWindow: 5,
                description: 'L칤mite de velocidad de API excedido',
                isActive: true
            },
            {
                id: 'server_error',
                name: 'Internal Server Error',
                pattern: /internal.*server.*error|500.*error|unhandled.*exception/i,
                severity: 'high',
                threshold: 5,
                timeWindow: 10,
                description: 'Errores internos del servidor',
                isActive: true
            }
        ];
        defaultPatterns.forEach((pattern)=>{
            this.errorPatterns.set(pattern.id, pattern);
        });
    }
    /**
   * Inicia el monitoreo proactivo
   */ start() {
        // Solo ejecutar en el servidor
        if (typeof window !== 'undefined') {
            return;
        }
        if (!this.config.enabled) {
            _logger.logger.info(_logger.LogLevel.INFO, 'Proactive monitoring is disabled', {}, _logger.LogCategory.SYSTEM);
            return;
        }
        if (this.monitoringInterval) {
            this.stop();
        }
        this.monitoringInterval = setInterval(()=>{
            this.performHealthCheck();
        }, this.config.checkInterval * 1000);
        _logger.logger.info(_logger.LogLevel.INFO, 'Proactive monitoring started', {
            interval: this.config.checkInterval,
            patterns: this.errorPatterns.size
        }, _logger.LogCategory.SYSTEM);
    }
    /**
   * Detiene el monitoreo proactivo
   */ stop() {
        if (this.monitoringInterval) {
            clearInterval(this.monitoringInterval);
            this.monitoringInterval = null;
            _logger.logger.info(_logger.LogLevel.INFO, 'Proactive monitoring stopped', {}, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Registra un error para an치lisis
   */ async reportError(error, context) {
        const errorMessage = error instanceof Error ? error.message : error;
        const errorStack = error instanceof Error ? error.stack : undefined;
        // Solo procesar en el servidor
        if (typeof window === 'undefined') {
            // Analizar patrones de error
            for (const [patternId, pattern] of this.errorPatterns){
                if (!pattern.isActive) {
                    continue;
                }
                const regex = pattern.pattern instanceof RegExp ? pattern.pattern : new RegExp(pattern.pattern, 'i');
                if (regex.test(errorMessage)) {
                    await this.handlePatternMatch(patternId, pattern, errorMessage, context);
                }
            }
            // Registrar m칠tricas si est치 disponible
            if (this.metricsCollector) {
                await this.metricsCollector.recordMetric('errors_total', 1, undefined, undefined, {
                    type: 'application_error',
                    ...context
                });
            }
        }
        // Log del error
        _logger.logger.error(_logger.LogLevel.ERROR, 'Error reported to monitoring', {
            error: errorMessage,
            stack: errorStack,
            context
        }, _logger.LogCategory.SYSTEM);
    }
    async handlePatternMatch(patternId, pattern, errorMessage, context) {
        const now = new Date();
        const key = `${patternId}_${Math.floor(now.getTime() / (pattern.timeWindow * 60 * 1000))}`;
        const existing = this.errorCounts.get(key);
        if (existing) {
            existing.count++;
            existing.lastSeen = now;
        } else {
            this.errorCounts.set(key, {
                count: 1,
                firstSeen: now,
                lastSeen: now
            });
        }
        const errorCount = this.errorCounts.get(key);
        // Verificar si se alcanz칩 el umbral (solo en servidor)
        if (errorCount.count >= pattern.threshold && this.alertSystem) {
            await this.triggerAlert(pattern, errorCount, errorMessage, context);
            // Limpiar contador para evitar spam de alertas
            this.errorCounts.delete(key);
        }
    }
    async triggerAlert(pattern, errorCount, errorMessage, context) {
        const alert = {
            id: `pattern_${pattern.id}_${Date.now()}`,
            title: `Error Pattern Detected: ${pattern.name}`,
            message: `Pattern "${pattern.name}" detected ${errorCount.count} times in ${pattern.timeWindow} minutes`,
            severity: pattern.severity,
            details: {
                pattern: pattern.name,
                description: pattern.description,
                count: errorCount.count,
                threshold: pattern.threshold,
                timeWindow: pattern.timeWindow,
                firstSeen: errorCount.firstSeen.toISOString(),
                lastSeen: errorCount.lastSeen.toISOString(),
                lastError: errorMessage,
                context
            }
        };
        // Enviar notificaciones
        if (this.config.notificationChannels.includes('email')) {
            await this.sendEmailAlert(alert);
        }
        if (this.config.notificationChannels.includes('slack')) {
            await this.sendSlackAlert(alert);
        }
        _logger.logger.warn(_logger.LogLevel.WARN, 'Error pattern alert triggered', alert, _logger.LogCategory.SYSTEM);
    }
    async sendEmailAlert(alert) {
        try {
            await _email.emailService.sendNotification({
                to: [
                    'admin@example.com'
                ],
                subject: `游뚿 ${alert.title}`,
                template: 'error-pattern-alert',
                data: alert,
                priority: alert.severity === 'critical' ? 'high' : 'normal'
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to send email alert', {
                error
            }, _logger.LogCategory.SYSTEM);
        }
    }
    async sendSlackAlert(alert) {
        try {
            await _slack.slackService.sendErrorAlert({
                error: alert.message,
                context: alert.title,
                timestamp: new Date(),
                severity: alert.severity
            });
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Failed to send Slack alert', {
                error
            }, _logger.LogCategory.SYSTEM);
        }
    }
    /**
   * Realiza verificaci칩n de salud del sistema
   */ async performHealthCheck() {
        try {
            const health = await this.getSystemHealth();
            // Verificar umbrales cr칤ticos
            if (health.status === 'critical' || health.status === 'down') {
                await this.handleCriticalHealth(health);
            } else if (health.status === 'warning') {
                await this.handleWarningHealth(health);
            }
            // Actualizar m칠tricas si est치 disponible
            if (this.metricsCollector) {
                await this.metricsCollector.recordMetric('system_health_score', this.calculateHealthScore(health));
                await this.metricsCollector.recordMetric('system_response_time', health.responseTime);
                await this.metricsCollector.recordMetric('system_error_rate', health.errorRate);
                await this.metricsCollector.recordMetric('system_memory_usage', health.memoryUsage);
                await this.metricsCollector.recordMetric('system_cpu_usage', health.cpuUsage);
            }
        } catch (error) {
            _logger.logger.error(_logger.LogLevel.ERROR, 'Health check failed', {
                error: error instanceof Error ? error.message : 'Unknown error'
            }, _logger.LogCategory.SYSTEM);
        }
    }
    async getSystemHealth() {
        const issues = [];
        let status = 'healthy';
        // Simular verificaciones de salud (en producci칩n, estas ser칤an verificaciones reales)
        const responseTime = Math.random() * 1000 + 200 // 200-1200ms
        ;
        const errorRate = Math.random() * 5 // 0-5%
        ;
        const memoryUsage = Math.random() * 40 + 40 // 40-80%
        ;
        const cpuUsage = Math.random() * 30 + 20 // 20-50%
        ;
        const activeConnections = Math.floor(Math.random() * 100) + 50;
        // Verificar umbrales
        if (responseTime > this.config.responseTimeThreshold) {
            issues.push({
                id: 'high_response_time',
                type: 'performance',
                severity: 'medium',
                message: 'High response time detected',
                details: {
                    responseTime,
                    threshold: this.config.responseTimeThreshold
                },
                firstDetected: new Date(),
                lastSeen: new Date(),
                count: 1
            });
            status = 'warning';
        }
        if (errorRate > this.config.errorThreshold) {
            issues.push({
                id: 'high_error_rate',
                type: 'error',
                severity: 'high',
                message: 'High error rate detected',
                details: {
                    errorRate,
                    threshold: this.config.errorThreshold
                },
                firstDetected: new Date(),
                lastSeen: new Date(),
                count: 1
            });
            status = 'critical';
        }
        if (memoryUsage > this.config.memoryThreshold) {
            issues.push({
                id: 'high_memory_usage',
                type: 'resource',
                severity: 'medium',
                message: 'High memory usage detected',
                details: {
                    memoryUsage,
                    threshold: this.config.memoryThreshold
                },
                firstDetected: new Date(),
                lastSeen: new Date(),
                count: 1
            });
            if (status === 'healthy') {
                status = 'warning';
            }
        }
        return {
            status,
            uptime: typeof process !== 'undefined' && process.uptime ? process.uptime() : Date.now() / 1000,
            responseTime,
            errorRate,
            memoryUsage,
            cpuUsage,
            activeConnections,
            lastCheck: new Date(),
            issues
        };
    }
    calculateHealthScore(health) {
        let score = 100;
        health.issues.forEach((issue)=>{
            switch(issue.severity){
                case 'critical':
                    score -= 30;
                    break;
                case 'high':
                    score -= 20;
                    break;
                case 'medium':
                    score -= 10;
                    break;
                case 'low':
                    score -= 5;
                    break;
            }
        });
        return Math.max(0, score);
    }
    async handleCriticalHealth(health) {
        _logger.logger.error(_logger.LogLevel.ERROR, 'Critical system health detected', {
            health
        }, _logger.LogCategory.SYSTEM);
        // Enviar alertas cr칤ticas
        await this.sendSlackAlert({
            title: '游뚿 CRITICAL: System Health Alert',
            message: 'System health is critical - immediate attention required',
            severity: 'critical',
            details: health
        });
        // Auto-recovery si est치 habilitado
        if (this.config.enableAutoRecovery) {
            await this.attemptAutoRecovery(health);
        }
    }
    async handleWarningHealth(health) {
        _logger.logger.warn(_logger.LogLevel.WARN, 'System health warning', {
            health
        }, _logger.LogCategory.SYSTEM);
    }
    async attemptAutoRecovery(health) {
        _logger.logger.info(_logger.LogLevel.INFO, 'Attempting auto-recovery', {
            health
        }, _logger.LogCategory.SYSTEM);
    // Implementar l칩gica de auto-recuperaci칩n
    // Por ejemplo: reiniciar servicios, limpiar cache, etc.
    }
    /**
   * Configuraci칩n del servicio
   */ updateConfig(newConfig) {
        this.config = {
            ...this.config,
            ...newConfig
        };
        if (this.config.enabled && !this.monitoringInterval) {
            this.start();
        } else if (!this.config.enabled && this.monitoringInterval) {
            this.stop();
        }
    }
    getConfig() {
        return {
            ...this.config
        };
    }
    /**
   * Gesti칩n de patrones de error
   */ addErrorPattern(pattern) {
        this.errorPatterns.set(pattern.id, pattern);
        _logger.logger.info(_logger.LogLevel.INFO, 'Error pattern added', {
            patternId: pattern.id
        }, _logger.LogCategory.SYSTEM);
    }
    removeErrorPattern(patternId) {
        this.errorPatterns.delete(patternId);
        _logger.logger.info(_logger.LogLevel.INFO, 'Error pattern removed', {
            patternId
        }, _logger.LogCategory.SYSTEM);
    }
    getErrorPatterns() {
        return Array.from(this.errorPatterns.values());
    }
    /**
   * Obtener estad칤sticas de monitoreo
   */ async getMonitoringStats() {
        const totalErrors = Array.from(this.errorCounts.values()).reduce((sum, count)=>sum + count.count, 0);
        const activePatterns = Array.from(this.errorPatterns.values()).filter((p)=>p.isActive).length;
        const recentAlerts = this.alertSystem ? Array.from(this.errorCounts.values()).filter((count)=>Date.now() - count.lastSeen.getTime() < 24 * 60 * 60 * 1000).length : 0;
        const systemHealth = await this.getSystemHealth();
        return {
            totalErrors,
            activePatterns,
            recentAlerts,
            systemHealth
        };
    }
}
const proactiveMonitoring = ProactiveMonitoringService.getInstance();
const reportError = (error, context)=>proactiveMonitoring.reportError(error, context);
const startMonitoring = ()=>proactiveMonitoring.start();
const stopMonitoring = ()=>proactiveMonitoring.stop();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxwcm9hY3RpdmUtbW9uaXRvcmluZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCB7IGxvZ2dlciwgTG9nTGV2ZWwsIExvZ0NhdGVnb3J5IH0gZnJvbSAnLi4vZW50ZXJwcmlzZS9sb2dnZXInXHJcbmltcG9ydCB7IEVudGVycHJpc2VBbGVydFN5c3RlbSB9IGZyb20gJy4vYWxlcnQtc3lzdGVtJ1xyXG5pbXBvcnQgeyBFbnRlcnByaXNlTWV0cmljc0NvbGxlY3RvciB9IGZyb20gJy4vZW50ZXJwcmlzZS1tZXRyaWNzJ1xyXG5pbXBvcnQgeyBlbWFpbFNlcnZpY2UgfSBmcm9tICcuLi9ub3RpZmljYXRpb25zL2VtYWlsJ1xyXG5pbXBvcnQgeyBzbGFja1NlcnZpY2UgfSBmcm9tICcuLi9ub3RpZmljYXRpb25zL3NsYWNrJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFcnJvclBhdHRlcm4ge1xyXG4gIGlkOiBzdHJpbmdcclxuICBuYW1lOiBzdHJpbmdcclxuICBwYXR0ZXJuOiBSZWdFeHAgfCBzdHJpbmdcclxuICBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCdcclxuICB0aHJlc2hvbGQ6IG51bWJlciAvLyBOw7ptZXJvIGRlIG9jdXJyZW5jaWFzIGFudGVzIGRlIGFsZXJ0YXJcclxuICB0aW1lV2luZG93OiBudW1iZXIgLy8gVmVudGFuYSBkZSB0aWVtcG8gZW4gbWludXRvc1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcclxuICBpc0FjdGl2ZTogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN5c3RlbUhlYWx0aCB7XHJcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnd2FybmluZycgfCAnY3JpdGljYWwnIHwgJ2Rvd24nXHJcbiAgdXB0aW1lOiBudW1iZXJcclxuICByZXNwb25zZVRpbWU6IG51bWJlclxyXG4gIGVycm9yUmF0ZTogbnVtYmVyXHJcbiAgbWVtb3J5VXNhZ2U6IG51bWJlclxyXG4gIGNwdVVzYWdlOiBudW1iZXJcclxuICBhY3RpdmVDb25uZWN0aW9uczogbnVtYmVyXHJcbiAgbGFzdENoZWNrOiBEYXRlXHJcbiAgaXNzdWVzOiBIZWFsdGhJc3N1ZVtdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoSXNzdWUge1xyXG4gIGlkOiBzdHJpbmdcclxuICB0eXBlOiAncGVyZm9ybWFuY2UnIHwgJ2Vycm9yJyB8ICdyZXNvdXJjZScgfCAnc2VjdXJpdHknXHJcbiAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnXHJcbiAgbWVzc2FnZTogc3RyaW5nXHJcbiAgZGV0YWlsczogUmVjb3JkPHN0cmluZywgYW55PlxyXG4gIGZpcnN0RGV0ZWN0ZWQ6IERhdGVcclxuICBsYXN0U2VlbjogRGF0ZVxyXG4gIGNvdW50OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNb25pdG9yaW5nQ29uZmlnIHtcclxuICBlbmFibGVkOiBib29sZWFuXHJcbiAgY2hlY2tJbnRlcnZhbDogbnVtYmVyIC8vIGVuIHNlZ3VuZG9zXHJcbiAgZXJyb3JUaHJlc2hvbGQ6IG51bWJlclxyXG4gIHJlc3BvbnNlVGltZVRocmVzaG9sZDogbnVtYmVyXHJcbiAgbWVtb3J5VGhyZXNob2xkOiBudW1iZXJcclxuICBjcHVUaHJlc2hvbGQ6IG51bWJlclxyXG4gIGVuYWJsZUF1dG9SZWNvdmVyeTogYm9vbGVhblxyXG4gIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBzdHJpbmdbXVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvYWN0aXZlTW9uaXRvcmluZ1NlcnZpY2Uge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQcm9hY3RpdmVNb25pdG9yaW5nU2VydmljZVxyXG4gIHByaXZhdGUgYWxlcnRTeXN0ZW06IEVudGVycHJpc2VBbGVydFN5c3RlbVxyXG4gIHByaXZhdGUgbWV0cmljc0NvbGxlY3RvcjogRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3JcclxuICBwcml2YXRlIGVycm9yUGF0dGVybnM6IE1hcDxzdHJpbmcsIEVycm9yUGF0dGVybj4gPSBuZXcgTWFwKClcclxuICBwcml2YXRlIGVycm9yQ291bnRzOiBNYXA8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IGZpcnN0U2VlbjogRGF0ZTsgbGFzdFNlZW46IERhdGUgfT4gPSBuZXcgTWFwKClcclxuICBwcml2YXRlIGhlYWx0aENoZWNrczogTWFwPHN0cmluZywgKCkgPT4gUHJvbWlzZTxhbnk+PiA9IG5ldyBNYXAoKVxyXG4gIHByaXZhdGUgbW9uaXRvcmluZ0ludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsXHJcbiAgcHJpdmF0ZSBjb25maWc6IE1vbml0b3JpbmdDb25maWdcclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFByb2FjdGl2ZU1vbml0b3JpbmdTZXJ2aWNlIHtcclxuICAgIGlmICghUHJvYWN0aXZlTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2UpIHtcclxuICAgICAgUHJvYWN0aXZlTW9uaXRvcmluZ1NlcnZpY2UuaW5zdGFuY2UgPSBuZXcgUHJvYWN0aXZlTW9uaXRvcmluZ1NlcnZpY2UoKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb2FjdGl2ZU1vbml0b3JpbmdTZXJ2aWNlLmluc3RhbmNlXHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8vIFNvbG8gaW5pY2lhbGl6YXIgZW4gZWwgc2Vydmlkb3JcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLmFsZXJ0U3lzdGVtID0gRW50ZXJwcmlzZUFsZXJ0U3lzdGVtLmdldEluc3RhbmNlKClcclxuICAgICAgdGhpcy5tZXRyaWNzQ29sbGVjdG9yID0gRW50ZXJwcmlzZU1ldHJpY3NDb2xsZWN0b3IuZ2V0SW5zdGFuY2UoKVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb25maWcgPSB7XHJcbiAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIGNoZWNrSW50ZXJ2YWw6IDMwLCAvLyAzMCBzZWd1bmRvc1xyXG4gICAgICBlcnJvclRocmVzaG9sZDogNSwgLy8gNSUgZXJyb3IgcmF0ZVxyXG4gICAgICByZXNwb25zZVRpbWVUaHJlc2hvbGQ6IDIwMDAsIC8vIDIgc2VndW5kb3NcclxuICAgICAgbWVtb3J5VGhyZXNob2xkOiA4MCwgLy8gODAlIG1lbW9yaWFcclxuICAgICAgY3B1VGhyZXNob2xkOiA3MCwgLy8gNzAlIENQVVxyXG4gICAgICBlbmFibGVBdXRvUmVjb3Zlcnk6IHRydWUsXHJcbiAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbJ2VtYWlsJywgJ3NsYWNrJ11cclxuICAgIH1cclxuICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRQYXR0ZXJucygpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRpYWxpemVEZWZhdWx0UGF0dGVybnMoKTogdm9pZCB7XHJcbiAgICBjb25zdCBkZWZhdWx0UGF0dGVybnM6IEVycm9yUGF0dGVybltdID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICdkYXRhYmFzZV9jb25uZWN0aW9uX2Vycm9yJyxcclxuICAgICAgICBuYW1lOiAnRGF0YWJhc2UgQ29ubmVjdGlvbiBFcnJvcicsXHJcbiAgICAgICAgcGF0dGVybjogL2RhdGFiYXNlLipjb25uZWN0aW9uLipmYWlsZWR8Y29ubmVjdGlvbi4qdGltZW91dHxwb29sLipleGhhdXN0ZWQvaSxcclxuICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcclxuICAgICAgICB0aHJlc2hvbGQ6IDMsXHJcbiAgICAgICAgdGltZVdpbmRvdzogNSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yZXMgZGUgY29uZXhpw7NuIGEgbGEgYmFzZSBkZSBkYXRvcycsXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAncGF5bWVudF9wcm9jZXNzaW5nX2Vycm9yJyxcclxuICAgICAgICBuYW1lOiAnUGF5bWVudCBQcm9jZXNzaW5nIEVycm9yJyxcclxuICAgICAgICBwYXR0ZXJuOiAvcGF5bWVudC4qZmFpbGVkfHRyYW5zYWN0aW9uLiplcnJvcnxtZXJjYWRvcGFnby4qZXJyb3IvaSxcclxuICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgIHRocmVzaG9sZDogNSxcclxuICAgICAgICB0aW1lV2luZG93OiAxMCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yZXMgZW4gZWwgcHJvY2VzYW1pZW50byBkZSBwYWdvcycsXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnYXV0aGVudGljYXRpb25fZXJyb3InLFxyXG4gICAgICAgIG5hbWU6ICdBdXRoZW50aWNhdGlvbiBFcnJvcicsXHJcbiAgICAgICAgcGF0dGVybjogL2F1dGguKmZhaWxlZHx1bmF1dGhvcml6ZWR8aW52YWxpZC4qdG9rZW58c2Vzc2lvbi4qZXhwaXJlZC9pLFxyXG4gICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcclxuICAgICAgICB0aHJlc2hvbGQ6IDEwLFxyXG4gICAgICAgIHRpbWVXaW5kb3c6IDE1LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRXJyb3JlcyBkZSBhdXRlbnRpY2FjacOzbicsXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnYXBpX3JhdGVfbGltaXQnLFxyXG4gICAgICAgIG5hbWU6ICdBUEkgUmF0ZSBMaW1pdCBFeGNlZWRlZCcsXHJcbiAgICAgICAgcGF0dGVybjogL3JhdGUuKmxpbWl0LipleGNlZWRlZHx0b28uKm1hbnkuKnJlcXVlc3RzfDQyOS9pLFxyXG4gICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcclxuICAgICAgICB0aHJlc2hvbGQ6IDIwLFxyXG4gICAgICAgIHRpbWVXaW5kb3c6IDUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdMw61taXRlIGRlIHZlbG9jaWRhZCBkZSBBUEkgZXhjZWRpZG8nLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJ3NlcnZlcl9lcnJvcicsXHJcbiAgICAgICAgbmFtZTogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgICAgICAgcGF0dGVybjogL2ludGVybmFsLipzZXJ2ZXIuKmVycm9yfDUwMC4qZXJyb3J8dW5oYW5kbGVkLipleGNlcHRpb24vaSxcclxuICAgICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgIHRocmVzaG9sZDogNSxcclxuICAgICAgICB0aW1lV2luZG93OiAxMCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yZXMgaW50ZXJub3MgZGVsIHNlcnZpZG9yJyxcclxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICBdXHJcblxyXG4gICAgZGVmYXVsdFBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XHJcbiAgICAgIHRoaXMuZXJyb3JQYXR0ZXJucy5zZXQocGF0dGVybi5pZCwgcGF0dGVybilcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmljaWEgZWwgbW9uaXRvcmVvIHByb2FjdGl2b1xyXG4gICAqL1xyXG4gIHN0YXJ0KCk6IHZvaWQge1xyXG4gICAgLy8gU29sbyBlamVjdXRhciBlbiBlbCBzZXJ2aWRvclxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlZCkge1xyXG4gICAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCAnUHJvYWN0aXZlIG1vbml0b3JpbmcgaXMgZGlzYWJsZWQnLCB7fSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpIHtcclxuICAgICAgdGhpcy5zdG9wKClcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5wZXJmb3JtSGVhbHRoQ2hlY2soKVxyXG4gICAgfSwgdGhpcy5jb25maWcuY2hlY2tJbnRlcnZhbCAqIDEwMDApXHJcblxyXG4gICAgbG9nZ2VyLmluZm8oTG9nTGV2ZWwuSU5GTywgJ1Byb2FjdGl2ZSBtb25pdG9yaW5nIHN0YXJ0ZWQnLCB7XHJcbiAgICAgIGludGVydmFsOiB0aGlzLmNvbmZpZy5jaGVja0ludGVydmFsLFxyXG4gICAgICBwYXR0ZXJuczogdGhpcy5lcnJvclBhdHRlcm5zLnNpemVcclxuICAgIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGllbmUgZWwgbW9uaXRvcmVvIHByb2FjdGl2b1xyXG4gICAqL1xyXG4gIHN0b3AoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vbml0b3JpbmdJbnRlcnZhbClcclxuICAgICAgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwgPSBudWxsXHJcbiAgICAgIGxvZ2dlci5pbmZvKExvZ0xldmVsLklORk8sICdQcm9hY3RpdmUgbW9uaXRvcmluZyBzdG9wcGVkJywge30sIExvZ0NhdGVnb3J5LlNZU1RFTSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdHJhIHVuIGVycm9yIHBhcmEgYW7DoWxpc2lzXHJcbiAgICovXHJcbiAgYXN5bmMgcmVwb3J0RXJyb3IoZXJyb3I6IEVycm9yIHwgc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvclxyXG4gICAgY29uc3QgZXJyb3JTdGFjayA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxyXG5cclxuICAgIC8vIFNvbG8gcHJvY2VzYXIgZW4gZWwgc2Vydmlkb3JcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAvLyBBbmFsaXphciBwYXRyb25lcyBkZSBlcnJvclxyXG4gICAgICBmb3IgKGNvbnN0IFtwYXR0ZXJuSWQsIHBhdHRlcm5dIG9mIHRoaXMuZXJyb3JQYXR0ZXJucykge1xyXG4gICAgICAgIGlmICghcGF0dGVybi5pc0FjdGl2ZSkge2NvbnRpbnVlfVxyXG5cclxuICAgICAgICBjb25zdCByZWdleCA9IHBhdHRlcm4ucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCA/IHBhdHRlcm4ucGF0dGVybiA6IG5ldyBSZWdFeHAocGF0dGVybi5wYXR0ZXJuLCAnaScpXHJcbiAgICAgICAgaWYgKHJlZ2V4LnRlc3QoZXJyb3JNZXNzYWdlKSkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVQYXR0ZXJuTWF0Y2gocGF0dGVybklkLCBwYXR0ZXJuLCBlcnJvck1lc3NhZ2UsIGNvbnRleHQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSZWdpc3RyYXIgbcOpdHJpY2FzIHNpIGVzdMOhIGRpc3BvbmlibGVcclxuICAgICAgaWYgKHRoaXMubWV0cmljc0NvbGxlY3Rvcikge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRNZXRyaWMoJ2Vycm9yc190b3RhbCcsIDEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XHJcbiAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb25fZXJyb3InLFxyXG4gICAgICAgICAgLi4uY29udGV4dFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgZGVsIGVycm9yXHJcbiAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdFcnJvciByZXBvcnRlZCB0byBtb25pdG9yaW5nJywge1xyXG4gICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxyXG4gICAgICBzdGFjazogZXJyb3JTdGFjayxcclxuICAgICAgY29udGV4dFxyXG4gICAgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVQYXR0ZXJuTWF0Y2goXHJcbiAgICBwYXR0ZXJuSWQ6IHN0cmluZyxcclxuICAgIHBhdHRlcm46IEVycm9yUGF0dGVybixcclxuICAgIGVycm9yTWVzc2FnZTogc3RyaW5nLFxyXG4gICAgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICAgIGNvbnN0IGtleSA9IGAke3BhdHRlcm5JZH1fJHtNYXRoLmZsb29yKG5vdy5nZXRUaW1lKCkgLyAocGF0dGVybi50aW1lV2luZG93ICogNjAgKiAxMDAwKSl9YFxyXG4gICAgXHJcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZXJyb3JDb3VudHMuZ2V0KGtleSlcclxuICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICBleGlzdGluZy5jb3VudCsrXHJcbiAgICAgIGV4aXN0aW5nLmxhc3RTZWVuID0gbm93XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVycm9yQ291bnRzLnNldChrZXksIHtcclxuICAgICAgICBjb3VudDogMSxcclxuICAgICAgICBmaXJzdFNlZW46IG5vdyxcclxuICAgICAgICBsYXN0U2Vlbjogbm93XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyb3JDb3VudCA9IHRoaXMuZXJyb3JDb3VudHMuZ2V0KGtleSkhXHJcbiAgICBcclxuICAgIC8vIFZlcmlmaWNhciBzaSBzZSBhbGNhbnrDsyBlbCB1bWJyYWwgKHNvbG8gZW4gc2Vydmlkb3IpXHJcbiAgICBpZiAoZXJyb3JDb3VudC5jb3VudCA+PSBwYXR0ZXJuLnRocmVzaG9sZCAmJiB0aGlzLmFsZXJ0U3lzdGVtKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckFsZXJ0KHBhdHRlcm4sIGVycm9yQ291bnQsIGVycm9yTWVzc2FnZSwgY29udGV4dClcclxuICAgICAgXHJcbiAgICAgIC8vIExpbXBpYXIgY29udGFkb3IgcGFyYSBldml0YXIgc3BhbSBkZSBhbGVydGFzXHJcbiAgICAgIHRoaXMuZXJyb3JDb3VudHMuZGVsZXRlKGtleSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdHJpZ2dlckFsZXJ0KFxyXG4gICAgcGF0dGVybjogRXJyb3JQYXR0ZXJuLFxyXG4gICAgZXJyb3JDb3VudDogeyBjb3VudDogbnVtYmVyOyBmaXJzdFNlZW46IERhdGU7IGxhc3RTZWVuOiBEYXRlIH0sXHJcbiAgICBlcnJvck1lc3NhZ2U6IHN0cmluZyxcclxuICAgIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBhbGVydCA9IHtcclxuICAgICAgaWQ6IGBwYXR0ZXJuXyR7cGF0dGVybi5pZH1fJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIHRpdGxlOiBgRXJyb3IgUGF0dGVybiBEZXRlY3RlZDogJHtwYXR0ZXJuLm5hbWV9YCxcclxuICAgICAgbWVzc2FnZTogYFBhdHRlcm4gXCIke3BhdHRlcm4ubmFtZX1cIiBkZXRlY3RlZCAke2Vycm9yQ291bnQuY291bnR9IHRpbWVzIGluICR7cGF0dGVybi50aW1lV2luZG93fSBtaW51dGVzYCxcclxuICAgICAgc2V2ZXJpdHk6IHBhdHRlcm4uc2V2ZXJpdHksXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuLm5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHBhdHRlcm4uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgY291bnQ6IGVycm9yQ291bnQuY291bnQsXHJcbiAgICAgICAgdGhyZXNob2xkOiBwYXR0ZXJuLnRocmVzaG9sZCxcclxuICAgICAgICB0aW1lV2luZG93OiBwYXR0ZXJuLnRpbWVXaW5kb3csXHJcbiAgICAgICAgZmlyc3RTZWVuOiBlcnJvckNvdW50LmZpcnN0U2Vlbi50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGxhc3RTZWVuOiBlcnJvckNvdW50Lmxhc3RTZWVuLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgbGFzdEVycm9yOiBlcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgY29udGV4dFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW52aWFyIG5vdGlmaWNhY2lvbmVzXHJcbiAgICBpZiAodGhpcy5jb25maWcubm90aWZpY2F0aW9uQ2hhbm5lbHMuaW5jbHVkZXMoJ2VtYWlsJykpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kRW1haWxBbGVydChhbGVydClcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5jb25maWcubm90aWZpY2F0aW9uQ2hhbm5lbHMuaW5jbHVkZXMoJ3NsYWNrJykpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zZW5kU2xhY2tBbGVydChhbGVydClcclxuICAgIH1cclxuXHJcbiAgICBsb2dnZXIud2FybihMb2dMZXZlbC5XQVJOLCAnRXJyb3IgcGF0dGVybiBhbGVydCB0cmlnZ2VyZWQnLCBhbGVydCwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzZW5kRW1haWxBbGVydChhbGVydDogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZE5vdGlmaWNhdGlvbih7XHJcbiAgICAgICAgdG86IFsnYWRtaW5AZXhhbXBsZS5jb20nXSwgLy8gQ29uZmlndXJhciBlbWFpbHMgZGUgYWRtaW5cclxuICAgICAgICBzdWJqZWN0OiBg8J+aqCAke2FsZXJ0LnRpdGxlfWAsXHJcbiAgICAgICAgdGVtcGxhdGU6ICdlcnJvci1wYXR0ZXJuLWFsZXJ0JyxcclxuICAgICAgICBkYXRhOiBhbGVydCxcclxuICAgICAgICBwcmlvcml0eTogYWxlcnQuc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcgPyAnaGlnaCcgOiAnbm9ybWFsJ1xyXG4gICAgICB9KVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKExvZ0xldmVsLkVSUk9SLCAnRmFpbGVkIHRvIHNlbmQgZW1haWwgYWxlcnQnLCB7IGVycm9yIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgc2VuZFNsYWNrQWxlcnQoYWxlcnQ6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgc2xhY2tTZXJ2aWNlLnNlbmRFcnJvckFsZXJ0KHtcclxuICAgICAgICBlcnJvcjogYWxlcnQubWVzc2FnZSxcclxuICAgICAgICBjb250ZXh0OiBhbGVydC50aXRsZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc2V2ZXJpdHk6IGFsZXJ0LnNldmVyaXR5XHJcbiAgICAgIH0pXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdGYWlsZWQgdG8gc2VuZCBTbGFjayBhbGVydCcsIHsgZXJyb3IgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVhbGl6YSB2ZXJpZmljYWNpw7NuIGRlIHNhbHVkIGRlbCBzaXN0ZW1hXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtSGVhbHRoQ2hlY2soKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCB0aGlzLmdldFN5c3RlbUhlYWx0aCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyBWZXJpZmljYXIgdW1icmFsZXMgY3LDrXRpY29zXHJcbiAgICAgIGlmIChoZWFsdGguc3RhdHVzID09PSAnY3JpdGljYWwnIHx8IGhlYWx0aC5zdGF0dXMgPT09ICdkb3duJykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlQ3JpdGljYWxIZWFsdGgoaGVhbHRoKVxyXG4gICAgICB9IGVsc2UgaWYgKGhlYWx0aC5zdGF0dXMgPT09ICd3YXJuaW5nJykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlV2FybmluZ0hlYWx0aChoZWFsdGgpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFjdHVhbGl6YXIgbcOpdHJpY2FzIHNpIGVzdMOhIGRpc3BvbmlibGVcclxuICAgICAgaWYgKHRoaXMubWV0cmljc0NvbGxlY3Rvcikge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRNZXRyaWMoJ3N5c3RlbV9oZWFsdGhfc2NvcmUnLCB0aGlzLmNhbGN1bGF0ZUhlYWx0aFNjb3JlKGhlYWx0aCkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5tZXRyaWNzQ29sbGVjdG9yLnJlY29yZE1ldHJpYygnc3lzdGVtX3Jlc3BvbnNlX3RpbWUnLCBoZWFsdGgucmVzcG9uc2VUaW1lKVxyXG4gICAgICAgIGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRNZXRyaWMoJ3N5c3RlbV9lcnJvcl9yYXRlJywgaGVhbHRoLmVycm9yUmF0ZSlcclxuICAgICAgICBhd2FpdCB0aGlzLm1ldHJpY3NDb2xsZWN0b3IucmVjb3JkTWV0cmljKCdzeXN0ZW1fbWVtb3J5X3VzYWdlJywgaGVhbHRoLm1lbW9yeVVzYWdlKVxyXG4gICAgICAgIGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRNZXRyaWMoJ3N5c3RlbV9jcHVfdXNhZ2UnLCBoZWFsdGguY3B1VXNhZ2UpXHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdIZWFsdGggY2hlY2sgZmFpbGVkJywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xyXG4gICAgICB9LCBMb2dDYXRlZ29yeS5TWVNURU0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldFN5c3RlbUhlYWx0aCgpOiBQcm9taXNlPFN5c3RlbUhlYWx0aD4ge1xyXG4gICAgY29uc3QgaXNzdWVzOiBIZWFsdGhJc3N1ZVtdID0gW11cclxuICAgIGxldCBzdGF0dXM6IFN5c3RlbUhlYWx0aFsnc3RhdHVzJ10gPSAnaGVhbHRoeSdcclxuXHJcbiAgICAvLyBTaW11bGFyIHZlcmlmaWNhY2lvbmVzIGRlIHNhbHVkIChlbiBwcm9kdWNjacOzbiwgZXN0YXMgc2Vyw61hbiB2ZXJpZmljYWNpb25lcyByZWFsZXMpXHJcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBNYXRoLnJhbmRvbSgpICogMTAwMCArIDIwMCAvLyAyMDAtMTIwMG1zXHJcbiAgICBjb25zdCBlcnJvclJhdGUgPSBNYXRoLnJhbmRvbSgpICogNSAvLyAwLTUlXHJcbiAgICBjb25zdCBtZW1vcnlVc2FnZSA9IE1hdGgucmFuZG9tKCkgKiA0MCArIDQwIC8vIDQwLTgwJVxyXG4gICAgY29uc3QgY3B1VXNhZ2UgPSBNYXRoLnJhbmRvbSgpICogMzAgKyAyMCAvLyAyMC01MCVcclxuICAgIGNvbnN0IGFjdGl2ZUNvbm5lY3Rpb25zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArIDUwXHJcblxyXG4gICAgLy8gVmVyaWZpY2FyIHVtYnJhbGVzXHJcbiAgICBpZiAocmVzcG9uc2VUaW1lID4gdGhpcy5jb25maWcucmVzcG9uc2VUaW1lVGhyZXNob2xkKSB7XHJcbiAgICAgIGlzc3Vlcy5wdXNoKHtcclxuICAgICAgICBpZDogJ2hpZ2hfcmVzcG9uc2VfdGltZScsXHJcbiAgICAgICAgdHlwZTogJ3BlcmZvcm1hbmNlJyxcclxuICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXHJcbiAgICAgICAgbWVzc2FnZTogJ0hpZ2ggcmVzcG9uc2UgdGltZSBkZXRlY3RlZCcsXHJcbiAgICAgICAgZGV0YWlsczogeyByZXNwb25zZVRpbWUsIHRocmVzaG9sZDogdGhpcy5jb25maWcucmVzcG9uc2VUaW1lVGhyZXNob2xkIH0sXHJcbiAgICAgICAgZmlyc3REZXRlY3RlZDogbmV3IERhdGUoKSxcclxuICAgICAgICBsYXN0U2VlbjogbmV3IERhdGUoKSxcclxuICAgICAgICBjb3VudDogMVxyXG4gICAgICB9KVxyXG4gICAgICBzdGF0dXMgPSAnd2FybmluZydcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXJyb3JSYXRlID4gdGhpcy5jb25maWcuZXJyb3JUaHJlc2hvbGQpIHtcclxuICAgICAgaXNzdWVzLnB1c2goe1xyXG4gICAgICAgIGlkOiAnaGlnaF9lcnJvcl9yYXRlJyxcclxuICAgICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICAgIHNldmVyaXR5OiAnaGlnaCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ0hpZ2ggZXJyb3IgcmF0ZSBkZXRlY3RlZCcsXHJcbiAgICAgICAgZGV0YWlsczogeyBlcnJvclJhdGUsIHRocmVzaG9sZDogdGhpcy5jb25maWcuZXJyb3JUaHJlc2hvbGQgfSxcclxuICAgICAgICBmaXJzdERldGVjdGVkOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGxhc3RTZWVuOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGNvdW50OiAxXHJcbiAgICAgIH0pXHJcbiAgICAgIHN0YXR1cyA9ICdjcml0aWNhbCdcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWVtb3J5VXNhZ2UgPiB0aGlzLmNvbmZpZy5tZW1vcnlUaHJlc2hvbGQpIHtcclxuICAgICAgaXNzdWVzLnB1c2goe1xyXG4gICAgICAgIGlkOiAnaGlnaF9tZW1vcnlfdXNhZ2UnLFxyXG4gICAgICAgIHR5cGU6ICdyZXNvdXJjZScsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdIaWdoIG1lbW9yeSB1c2FnZSBkZXRlY3RlZCcsXHJcbiAgICAgICAgZGV0YWlsczogeyBtZW1vcnlVc2FnZSwgdGhyZXNob2xkOiB0aGlzLmNvbmZpZy5tZW1vcnlUaHJlc2hvbGQgfSxcclxuICAgICAgICBmaXJzdERldGVjdGVkOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGxhc3RTZWVuOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGNvdW50OiAxXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChzdGF0dXMgPT09ICdoZWFsdGh5Jykge3N0YXR1cyA9ICd3YXJuaW5nJ31cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGF0dXMsXHJcbiAgICAgIHVwdGltZTogdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudXB0aW1lID8gcHJvY2Vzcy51cHRpbWUoKSA6IERhdGUubm93KCkgLyAxMDAwLFxyXG4gICAgICByZXNwb25zZVRpbWUsXHJcbiAgICAgIGVycm9yUmF0ZSxcclxuICAgICAgbWVtb3J5VXNhZ2UsXHJcbiAgICAgIGNwdVVzYWdlLFxyXG4gICAgICBhY3RpdmVDb25uZWN0aW9ucyxcclxuICAgICAgbGFzdENoZWNrOiBuZXcgRGF0ZSgpLFxyXG4gICAgICBpc3N1ZXNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2FsY3VsYXRlSGVhbHRoU2NvcmUoaGVhbHRoOiBTeXN0ZW1IZWFsdGgpOiBudW1iZXIge1xyXG4gICAgbGV0IHNjb3JlID0gMTAwXHJcbiAgICBcclxuICAgIGhlYWx0aC5pc3N1ZXMuZm9yRWFjaChpc3N1ZSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoaXNzdWUuc2V2ZXJpdHkpIHtcclxuICAgICAgICBjYXNlICdjcml0aWNhbCc6XHJcbiAgICAgICAgICBzY29yZSAtPSAzMFxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdoaWdoJzpcclxuICAgICAgICAgIHNjb3JlIC09IDIwXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ21lZGl1bSc6XHJcbiAgICAgICAgICBzY29yZSAtPSAxMFxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlICdsb3cnOlxyXG4gICAgICAgICAgc2NvcmUgLT0gNVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2NvcmUpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUNyaXRpY2FsSGVhbHRoKGhlYWx0aDogU3lzdGVtSGVhbHRoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBsb2dnZXIuZXJyb3IoTG9nTGV2ZWwuRVJST1IsICdDcml0aWNhbCBzeXN0ZW0gaGVhbHRoIGRldGVjdGVkJywgeyBoZWFsdGggfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gICAgXHJcbiAgICAvLyBFbnZpYXIgYWxlcnRhcyBjcsOtdGljYXNcclxuICAgIGF3YWl0IHRoaXMuc2VuZFNsYWNrQWxlcnQoe1xyXG4gICAgICB0aXRsZTogJ/CfmqggQ1JJVElDQUw6IFN5c3RlbSBIZWFsdGggQWxlcnQnLFxyXG4gICAgICBtZXNzYWdlOiAnU3lzdGVtIGhlYWx0aCBpcyBjcml0aWNhbCAtIGltbWVkaWF0ZSBhdHRlbnRpb24gcmVxdWlyZWQnLFxyXG4gICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcclxuICAgICAgZGV0YWlsczogaGVhbHRoXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEF1dG8tcmVjb3Zlcnkgc2kgZXN0w6EgaGFiaWxpdGFkb1xyXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZUF1dG9SZWNvdmVyeSkge1xyXG4gICAgICBhd2FpdCB0aGlzLmF0dGVtcHRBdXRvUmVjb3ZlcnkoaGVhbHRoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVXYXJuaW5nSGVhbHRoKGhlYWx0aDogU3lzdGVtSGVhbHRoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBsb2dnZXIud2FybihMb2dMZXZlbC5XQVJOLCAnU3lzdGVtIGhlYWx0aCB3YXJuaW5nJywgeyBoZWFsdGggfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhdHRlbXB0QXV0b1JlY292ZXJ5KGhlYWx0aDogU3lzdGVtSGVhbHRoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCAnQXR0ZW1wdGluZyBhdXRvLXJlY292ZXJ5JywgeyBoZWFsdGggfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gICAgXHJcbiAgICAvLyBJbXBsZW1lbnRhciBsw7NnaWNhIGRlIGF1dG8tcmVjdXBlcmFjacOzblxyXG4gICAgLy8gUG9yIGVqZW1wbG86IHJlaW5pY2lhciBzZXJ2aWNpb3MsIGxpbXBpYXIgY2FjaGUsIGV0Yy5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbmZpZ3VyYWNpw7NuIGRlbCBzZXJ2aWNpb1xyXG4gICAqL1xyXG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWc6IFBhcnRpYWw8TW9uaXRvcmluZ0NvbmZpZz4pOiB2b2lkIHtcclxuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH1cclxuICAgIFxyXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZWQgJiYgIXRoaXMubW9uaXRvcmluZ0ludGVydmFsKSB7XHJcbiAgICAgIHRoaXMuc3RhcnQoKVxyXG4gICAgfSBlbHNlIGlmICghdGhpcy5jb25maWcuZW5hYmxlZCAmJiB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCkge1xyXG4gICAgICB0aGlzLnN0b3AoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29uZmlnKCk6IE1vbml0b3JpbmdDb25maWcge1xyXG4gICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VzdGnDs24gZGUgcGF0cm9uZXMgZGUgZXJyb3JcclxuICAgKi9cclxuICBhZGRFcnJvclBhdHRlcm4ocGF0dGVybjogRXJyb3JQYXR0ZXJuKTogdm9pZCB7XHJcbiAgICB0aGlzLmVycm9yUGF0dGVybnMuc2V0KHBhdHRlcm4uaWQsIHBhdHRlcm4pXHJcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCAnRXJyb3IgcGF0dGVybiBhZGRlZCcsIHsgcGF0dGVybklkOiBwYXR0ZXJuLmlkIH0sIExvZ0NhdGVnb3J5LlNZU1RFTSlcclxuICB9XHJcblxyXG4gIHJlbW92ZUVycm9yUGF0dGVybihwYXR0ZXJuSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5lcnJvclBhdHRlcm5zLmRlbGV0ZShwYXR0ZXJuSWQpXHJcbiAgICBsb2dnZXIuaW5mbyhMb2dMZXZlbC5JTkZPLCAnRXJyb3IgcGF0dGVybiByZW1vdmVkJywgeyBwYXR0ZXJuSWQgfSwgTG9nQ2F0ZWdvcnkuU1lTVEVNKVxyXG4gIH1cclxuXHJcbiAgZ2V0RXJyb3JQYXR0ZXJucygpOiBFcnJvclBhdHRlcm5bXSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVycm9yUGF0dGVybnMudmFsdWVzKCkpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPYnRlbmVyIGVzdGFkw61zdGljYXMgZGUgbW9uaXRvcmVvXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TW9uaXRvcmluZ1N0YXRzKCk6IFByb21pc2U8e1xyXG4gICAgdG90YWxFcnJvcnM6IG51bWJlclxyXG4gICAgYWN0aXZlUGF0dGVybnM6IG51bWJlclxyXG4gICAgcmVjZW50QWxlcnRzOiBudW1iZXJcclxuICAgIHN5c3RlbUhlYWx0aDogU3lzdGVtSGVhbHRoXHJcbiAgfT4ge1xyXG4gICAgY29uc3QgdG90YWxFcnJvcnMgPSBBcnJheS5mcm9tKHRoaXMuZXJyb3JDb3VudHMudmFsdWVzKCkpXHJcbiAgICAgIC5yZWR1Y2UoKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LmNvdW50LCAwKVxyXG4gICAgXHJcbiAgICBjb25zdCBhY3RpdmVQYXR0ZXJucyA9IEFycmF5LmZyb20odGhpcy5lcnJvclBhdHRlcm5zLnZhbHVlcygpKVxyXG4gICAgICAuZmlsdGVyKHAgPT4gcC5pc0FjdGl2ZSkubGVuZ3RoXHJcbiAgICBcclxuICAgIGNvbnN0IHJlY2VudEFsZXJ0cyA9IHRoaXMuYWxlcnRTeXN0ZW0gPyBcclxuICAgICAgQXJyYXkuZnJvbSh0aGlzLmVycm9yQ291bnRzLnZhbHVlcygpKVxyXG4gICAgICAgIC5maWx0ZXIoY291bnQgPT4gRGF0ZS5ub3coKSAtIGNvdW50Lmxhc3RTZWVuLmdldFRpbWUoKSA8IDI0ICogNjAgKiA2MCAqIDEwMDApLmxlbmd0aFxyXG4gICAgICA6IDBcclxuICAgIFxyXG4gICAgY29uc3Qgc3lzdGVtSGVhbHRoID0gYXdhaXQgdGhpcy5nZXRTeXN0ZW1IZWFsdGgoKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvdGFsRXJyb3JzLFxyXG4gICAgICBhY3RpdmVQYXR0ZXJucyxcclxuICAgICAgcmVjZW50QWxlcnRzLFxyXG4gICAgICBzeXN0ZW1IZWFsdGhcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIEluc3RhbmNpYSBzaW5nbGV0b25cclxuZXhwb3J0IGNvbnN0IHByb2FjdGl2ZU1vbml0b3JpbmcgPSBQcm9hY3RpdmVNb25pdG9yaW5nU2VydmljZS5nZXRJbnN0YW5jZSgpXHJcblxyXG4vLyBGdW5jaW9uZXMgZGUgY29udmVuaWVuY2lhXHJcbmV4cG9ydCBjb25zdCByZXBvcnRFcnJvciA9IChlcnJvcjogRXJyb3IgfCBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PlxyXG4gIHByb2FjdGl2ZU1vbml0b3JpbmcucmVwb3J0RXJyb3IoZXJyb3IsIGNvbnRleHQpXHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRNb25pdG9yaW5nID0gKCkgPT4gcHJvYWN0aXZlTW9uaXRvcmluZy5zdGFydCgpXHJcbmV4cG9ydCBjb25zdCBzdG9wTW9uaXRvcmluZyA9ICgpID0+IHByb2FjdGl2ZU1vbml0b3Jpbmcuc3RvcCgpXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJQcm9hY3RpdmVNb25pdG9yaW5nU2VydmljZSIsInByb2FjdGl2ZU1vbml0b3JpbmciLCJyZXBvcnRFcnJvciIsInN0YXJ0TW9uaXRvcmluZyIsInN0b3BNb25pdG9yaW5nIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImVycm9yUGF0dGVybnMiLCJNYXAiLCJlcnJvckNvdW50cyIsImhlYWx0aENoZWNrcyIsIm1vbml0b3JpbmdJbnRlcnZhbCIsIndpbmRvdyIsImFsZXJ0U3lzdGVtIiwiRW50ZXJwcmlzZUFsZXJ0U3lzdGVtIiwibWV0cmljc0NvbGxlY3RvciIsIkVudGVycHJpc2VNZXRyaWNzQ29sbGVjdG9yIiwiY29uZmlnIiwiZW5hYmxlZCIsImNoZWNrSW50ZXJ2YWwiLCJlcnJvclRocmVzaG9sZCIsInJlc3BvbnNlVGltZVRocmVzaG9sZCIsIm1lbW9yeVRocmVzaG9sZCIsImNwdVRocmVzaG9sZCIsImVuYWJsZUF1dG9SZWNvdmVyeSIsIm5vdGlmaWNhdGlvbkNoYW5uZWxzIiwiaW5pdGlhbGl6ZURlZmF1bHRQYXR0ZXJucyIsImRlZmF1bHRQYXR0ZXJucyIsImlkIiwibmFtZSIsInBhdHRlcm4iLCJzZXZlcml0eSIsInRocmVzaG9sZCIsInRpbWVXaW5kb3ciLCJkZXNjcmlwdGlvbiIsImlzQWN0aXZlIiwiZm9yRWFjaCIsInNldCIsInN0YXJ0IiwibG9nZ2VyIiwiaW5mbyIsIkxvZ0xldmVsIiwiSU5GTyIsIkxvZ0NhdGVnb3J5IiwiU1lTVEVNIiwic3RvcCIsInNldEludGVydmFsIiwicGVyZm9ybUhlYWx0aENoZWNrIiwiaW50ZXJ2YWwiLCJwYXR0ZXJucyIsInNpemUiLCJjbGVhckludGVydmFsIiwiZXJyb3IiLCJjb250ZXh0IiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXJyb3JTdGFjayIsInN0YWNrIiwidW5kZWZpbmVkIiwicGF0dGVybklkIiwicmVnZXgiLCJSZWdFeHAiLCJ0ZXN0IiwiaGFuZGxlUGF0dGVybk1hdGNoIiwicmVjb3JkTWV0cmljIiwidHlwZSIsIkVSUk9SIiwibm93IiwiRGF0ZSIsImtleSIsIk1hdGgiLCJmbG9vciIsImdldFRpbWUiLCJleGlzdGluZyIsImdldCIsImNvdW50IiwibGFzdFNlZW4iLCJmaXJzdFNlZW4iLCJlcnJvckNvdW50IiwidHJpZ2dlckFsZXJ0IiwiZGVsZXRlIiwiYWxlcnQiLCJ0aXRsZSIsImRldGFpbHMiLCJ0b0lTT1N0cmluZyIsImxhc3RFcnJvciIsImluY2x1ZGVzIiwic2VuZEVtYWlsQWxlcnQiLCJzZW5kU2xhY2tBbGVydCIsIndhcm4iLCJXQVJOIiwiZW1haWxTZXJ2aWNlIiwic2VuZE5vdGlmaWNhdGlvbiIsInRvIiwic3ViamVjdCIsInRlbXBsYXRlIiwiZGF0YSIsInByaW9yaXR5Iiwic2xhY2tTZXJ2aWNlIiwic2VuZEVycm9yQWxlcnQiLCJ0aW1lc3RhbXAiLCJoZWFsdGgiLCJnZXRTeXN0ZW1IZWFsdGgiLCJzdGF0dXMiLCJoYW5kbGVDcml0aWNhbEhlYWx0aCIsImhhbmRsZVdhcm5pbmdIZWFsdGgiLCJjYWxjdWxhdGVIZWFsdGhTY29yZSIsInJlc3BvbnNlVGltZSIsImVycm9yUmF0ZSIsIm1lbW9yeVVzYWdlIiwiY3B1VXNhZ2UiLCJpc3N1ZXMiLCJyYW5kb20iLCJhY3RpdmVDb25uZWN0aW9ucyIsInB1c2giLCJmaXJzdERldGVjdGVkIiwidXB0aW1lIiwicHJvY2VzcyIsImxhc3RDaGVjayIsInNjb3JlIiwiaXNzdWUiLCJtYXgiLCJhdHRlbXB0QXV0b1JlY292ZXJ5IiwidXBkYXRlQ29uZmlnIiwibmV3Q29uZmlnIiwiZ2V0Q29uZmlnIiwiYWRkRXJyb3JQYXR0ZXJuIiwicmVtb3ZlRXJyb3JQYXR0ZXJuIiwiZ2V0RXJyb3JQYXR0ZXJucyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImdldE1vbml0b3JpbmdTdGF0cyIsInRvdGFsRXJyb3JzIiwicmVkdWNlIiwic3VtIiwiYWN0aXZlUGF0dGVybnMiLCJmaWx0ZXIiLCJwIiwibGVuZ3RoIiwicmVjZW50QWxlcnRzIiwic3lzdGVtSGVhbHRoIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O1FBcURhQTtlQUFBQTs7UUErZEFDO2VBQUFBOztRQUdBQztlQUFBQTs7UUFHQUM7ZUFBQUE7O1FBQ0FDO2VBQUFBOzs7d0JBemhCaUM7NkJBQ1I7bUNBQ0s7dUJBQ2Q7dUJBQ0E7QUErQ3RCLE1BQU1KO0lBVVgsT0FBT0ssY0FBMEM7UUFDL0MsSUFBSSxDQUFDTCwyQkFBMkJNLFFBQVEsRUFBRTtZQUN4Q04sMkJBQTJCTSxRQUFRLEdBQUcsSUFBSU47UUFDNUM7UUFDQSxPQUFPQSwyQkFBMkJNLFFBQVE7SUFDNUM7SUFFQSxhQUFjO2FBYk5DLGdCQUEyQyxJQUFJQzthQUMvQ0MsY0FBK0UsSUFBSUQ7YUFDbkZFLGVBQWdELElBQUlGO2FBQ3BERyxxQkFBNEM7UUFXbEQsa0NBQWtDO1FBQ2xDLElBQUksT0FBT0MsV0FBVyxhQUFhO1lBQ2pDLElBQUksQ0FBQ0MsV0FBVyxHQUFHQyxrQ0FBcUIsQ0FBQ1QsV0FBVztZQUNwRCxJQUFJLENBQUNVLGdCQUFnQixHQUFHQyw2Q0FBMEIsQ0FBQ1gsV0FBVztRQUNoRTtRQUNBLElB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