4ae5eecd5eb17d9aa7ed30cec4fcd668
// ===================================
// TESTS DE MEJORAS DE SEGURIDAD EN APIs
// ===================================
// Verificar que las mejoras de seguridad se aplicaron correctamente
"use strict";
// Mock de las dependencias
jest.mock('@/lib/rate-limiting/rate-limiter', ()=>({
        withRateLimit: jest.fn(),
        RATE_LIMIT_CONFIGS: {
            products: {
                maxRequests: 100,
                windowMs: 60000
            },
            checkout: {
                maxRequests: 50,
                windowMs: 60000
            },
            search: {
                maxRequests: 200,
                windowMs: 60000
            },
            auth: {
                maxRequests: 30,
                windowMs: 60000
            }
        }
    }));
jest.mock('@/lib/config/api-timeouts', ()=>({
        API_TIMEOUTS: {
            database: 5000,
            external: 10000
        },
        withDatabaseTimeout: jest.fn(),
        getEndpointTimeouts: jest.fn()
    }));
jest.mock('@/lib/logging/security-logger', ()=>({
        createSecurityLogger: jest.fn(()=>({
                logEvent: jest.fn(),
                logRateLimitExceeded: jest.fn(),
                context: {
                    ip: '127.0.0.1',
                    userAgent: 'test'
                }
            }))
    }));
jest.mock('@/lib/supabase', ()=>({
        getSupabaseClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        select: jest.fn(()=>({
                                order: jest.fn(()=>({
                                        data: [],
                                        error: null
                                    }))
                            }))
                    }))
            }))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
describe('API Security Improvements', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Rate Limiting Implementation', ()=>{
        it('should apply rate limiting to checkout API', async ()=>{
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { POST } = require('@/app/api/checkout/validate/route');
            // Mock rate limiting success
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                expect(config).toBeDefined();
                return await handler();
            });
            const requestBody = {
                customerInfo: {
                    firstName: 'Test',
                    lastName: 'User',
                    email: 'test@example.com',
                    phone: '1234567890'
                },
                shippingAddress: {
                    streetAddress: '123 Test St',
                    city: 'Test City',
                    state: 'Test State',
                    zipCode: '12345'
                },
                items: [
                    {
                        id: '1',
                        name: 'Test Product',
                        price: 100,
                        quantity: 1
                    }
                ],
                paymentMethod: 'mercadopago',
                shippingMethod: 'free',
                totals: {
                    subtotal: 100,
                    shipping: 0,
                    total: 100
                }
            };
            const request = new _server.NextRequest(new Request('http://localhost/api/checkout/validate', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'content-type': 'application/json'
                }
            }));
            await POST(request);
            expect(withRateLimit).toHaveBeenCalledWith(expect.any(Object), expect.objectContaining({
                maxRequests: expect.any(Number),
                windowMs: expect.any(Number)
            }), expect.any(Function));
        });
        it('should apply rate limiting to categories API', async ()=>{
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { GET } = require('@/app/api/categories/route');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            await GET(request);
            expect(withRateLimit).toHaveBeenCalled();
        });
        it('should apply rate limiting to search trending API', async ()=>{
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { GET } = require('@/app/api/search/trending/route');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            const request = new _server.NextRequest(new Request('http://localhost/api/search/trending'));
            await GET(request);
            expect(withRateLimit).toHaveBeenCalled();
        });
        it('should apply rate limiting to user profile API', async ()=>{
            // Mock auth
            jest.mock('@/auth', ()=>({
                    auth: jest.fn(()=>Promise.resolve({
                            user: {
                                id: 'test-user-id',
                                email: 'test@example.com'
                            }
                        }))
                }));
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { GET } = require('@/app/api/user/profile/route');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            const request = new _server.NextRequest(new Request('http://localhost/api/user/profile'));
            await GET(request);
            expect(withRateLimit).toHaveBeenCalled();
        });
    });
    describe('Security Logging Implementation', ()=>{
        it('should create security logger for all protected APIs', async ()=>{
            const { createSecurityLogger } = require('@/lib/logging/security-logger');
            const { GET } = require('@/app/api/categories/route');
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            await GET(request);
            expect(createSecurityLogger).toHaveBeenCalledWith(request);
        });
        it('should log API access events', async ()=>{
            const mockLogger = {
                logEvent: jest.fn(),
                logRateLimitExceeded: jest.fn(),
                context: {
                    ip: '127.0.0.1',
                    userAgent: 'test'
                }
            };
            const { createSecurityLogger } = require('@/lib/logging/security-logger');
            createSecurityLogger.mockReturnValue(mockLogger);
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            const { GET } = require('@/app/api/categories/route');
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            await GET(request);
            expect(mockLogger.logEvent).toHaveBeenCalledWith('api_access', 'low', expect.objectContaining({
                endpoint: '/api/categories',
                method: 'GET'
            }));
        });
    });
    describe('Database Timeout Implementation', ()=>{
        it('should apply database timeouts to database queries', async ()=>{
            const { withDatabaseTimeout } = require('@/lib/config/api-timeouts');
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            withDatabaseTimeout.mockImplementation(async (query, timeout)=>{
                expect(timeout).toBeDefined();
                return {
                    data: [],
                    error: null
                };
            });
            const { GET } = require('@/app/api/categories/route');
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            await GET(request);
            expect(withDatabaseTimeout).toHaveBeenCalled();
        });
    });
    describe('Error Handling and Security', ()=>{
        it('should handle rate limit exceeded scenarios', async ()=>{
            const mockLogger = {
                logEvent: jest.fn(),
                logRateLimitExceeded: jest.fn(),
                context: {
                    ip: '127.0.0.1',
                    userAgent: 'test'
                }
            };
            const { createSecurityLogger } = require('@/lib/logging/security-logger');
            createSecurityLogger.mockReturnValue(mockLogger);
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { NextResponse } = require('next/server');
            // Mock rate limit exceeded
            const rateLimitResponse = NextResponse.json({
                error: 'Rate limit exceeded'
            }, {
                status: 429
            });
            withRateLimit.mockResolvedValue(rateLimitResponse);
            const { GET } = require('@/app/api/categories/route');
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            const response = await GET(request);
            expect(mockLogger.logRateLimitExceeded).toHaveBeenCalled();
            expect(response.status).toBe(429);
        });
        it('should log security events for errors', async ()=>{
            const mockLogger = {
                logEvent: jest.fn(),
                logRateLimitExceeded: jest.fn(),
                context: {
                    ip: '127.0.0.1',
                    userAgent: 'test'
                }
            };
            const { createSecurityLogger } = require('@/lib/logging/security-logger');
            createSecurityLogger.mockReturnValue(mockLogger);
            const { withRateLimit } = require('@/lib/rate-limiting/rate-limiter');
            const { withDatabaseTimeout } = require('@/lib/config/api-timeouts');
            withRateLimit.mockImplementation(async (req, config, handler)=>{
                return await handler();
            });
            // Mock database error
            withDatabaseTimeout.mockResolvedValue({
                data: null,
                error: {
                    message: 'Database connection failed'
                }
            });
            const { GET } = require('@/app/api/categories/route');
            const request = new _server.NextRequest(new Request('http://localhost/api/categories'));
            await GET(request);
            expect(mockLogger.logEvent).toHaveBeenCalledWith('database_error', 'medium', expect.objectContaining({
                error: 'Database connection failed',
                endpoint: '/api/categories'
            }));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXF9fdGVzdHNfX1xcc2VjdXJpdHlcXGFwaS1zZWN1cml0eS1pbXByb3ZlbWVudHMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBURVNUUyBERSBNRUpPUkFTIERFIFNFR1VSSURBRCBFTiBBUElzXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFZlcmlmaWNhciBxdWUgbGFzIG1lam9yYXMgZGUgc2VndXJpZGFkIHNlIGFwbGljYXJvbiBjb3JyZWN0YW1lbnRlXHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcclxuXHJcbi8vIE1vY2sgZGUgbGFzIGRlcGVuZGVuY2lhc1xyXG5qZXN0Lm1vY2soJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJywgKCkgPT4gKHtcclxuICB3aXRoUmF0ZUxpbWl0OiBqZXN0LmZuKCksXHJcbiAgUkFURV9MSU1JVF9DT05GSUdTOiB7XHJcbiAgICBwcm9kdWN0czogeyBtYXhSZXF1ZXN0czogMTAwLCB3aW5kb3dNczogNjAwMDAgfSxcclxuICAgIGNoZWNrb3V0OiB7IG1heFJlcXVlc3RzOiA1MCwgd2luZG93TXM6IDYwMDAwIH0sXHJcbiAgICBzZWFyY2g6IHsgbWF4UmVxdWVzdHM6IDIwMCwgd2luZG93TXM6IDYwMDAwIH0sXHJcbiAgICBhdXRoOiB7IG1heFJlcXVlc3RzOiAzMCwgd2luZG93TXM6IDYwMDAwIH1cclxuICB9XHJcbn0pKTtcclxuXHJcbmplc3QubW9jaygnQC9saWIvY29uZmlnL2FwaS10aW1lb3V0cycsICgpID0+ICh7XHJcbiAgQVBJX1RJTUVPVVRTOiB7XHJcbiAgICBkYXRhYmFzZTogNTAwMCxcclxuICAgIGV4dGVybmFsOiAxMDAwMFxyXG4gIH0sXHJcbiAgd2l0aERhdGFiYXNlVGltZW91dDogamVzdC5mbigpLFxyXG4gIGdldEVuZHBvaW50VGltZW91dHM6IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0AvbGliL2xvZ2dpbmcvc2VjdXJpdHktbG9nZ2VyJywgKCkgPT4gKHtcclxuICBjcmVhdGVTZWN1cml0eUxvZ2dlcjogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgbG9nRXZlbnQ6IGplc3QuZm4oKSxcclxuICAgIGxvZ1JhdGVMaW1pdEV4Y2VlZGVkOiBqZXN0LmZuKCksXHJcbiAgICBjb250ZXh0OiB7IGlwOiAnMTI3LjAuMC4xJywgdXNlckFnZW50OiAndGVzdCcgfVxyXG4gIH0pKVxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcclxuICBnZXRTdXBhYmFzZUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgICBvcmRlcjogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9KSlcclxuICAgIH0pKVxyXG4gIH0pKVxyXG59KSk7XHJcblxyXG5kZXNjcmliZSgnQVBJIFNlY3VyaXR5IEltcHJvdmVtZW50cycsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUmF0ZSBMaW1pdGluZyBJbXBsZW1lbnRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYXBwbHkgcmF0ZSBsaW1pdGluZyB0byBjaGVja291dCBBUEknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgd2l0aFJhdGVMaW1pdCB9ID0gcmVxdWlyZSgnQC9saWIvcmF0ZS1saW1pdGluZy9yYXRlLWxpbWl0ZXInKTtcclxuICAgICAgY29uc3QgeyBQT1NUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvY2hlY2tvdXQvdmFsaWRhdGUvcm91dGUnKTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1vY2sgcmF0ZSBsaW1pdGluZyBzdWNjZXNzXHJcbiAgICAgIHdpdGhSYXRlTGltaXQubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChyZXEsIGNvbmZpZywgaGFuZGxlcikgPT4ge1xyXG4gICAgICAgIGV4cGVjdChjb25maWcpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgICBjdXN0b21lckluZm86IHtcclxuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxyXG4gICAgICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcclxuICAgICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICBwaG9uZTogJzEyMzQ1Njc4OTAnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHtcclxuICAgICAgICAgIHN0cmVldEFkZHJlc3M6ICcxMjMgVGVzdCBTdCcsXHJcbiAgICAgICAgICBjaXR5OiAnVGVzdCBDaXR5JyxcclxuICAgICAgICAgIHN0YXRlOiAnVGVzdCBTdGF0ZScsXHJcbiAgICAgICAgICB6aXBDb2RlOiAnMTIzNDUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpdGVtczogW3tcclxuICAgICAgICAgIGlkOiAnMScsXHJcbiAgICAgICAgICBuYW1lOiAnVGVzdCBQcm9kdWN0JyxcclxuICAgICAgICAgIHByaWNlOiAxMDAsXHJcbiAgICAgICAgICBxdWFudGl0eTogMVxyXG4gICAgICAgIH1dLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2Q6ICdtZXJjYWRvcGFnbycsXHJcbiAgICAgICAgc2hpcHBpbmdNZXRob2Q6ICdmcmVlJyxcclxuICAgICAgICB0b3RhbHM6IHtcclxuICAgICAgICAgIHN1YnRvdGFsOiAxMDAsXHJcbiAgICAgICAgICBzaGlwcGluZzogMCxcclxuICAgICAgICAgIHRvdGFsOiAxMDBcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9jaGVja291dC92YWxpZGF0ZScsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXHJcbiAgICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cclxuICAgICAgfSkpO1xyXG5cclxuICAgICAgYXdhaXQgUE9TVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdCh3aXRoUmF0ZUxpbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3QuYW55KE9iamVjdCksXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgbWF4UmVxdWVzdHM6IGV4cGVjdC5hbnkoTnVtYmVyKSxcclxuICAgICAgICAgIHdpbmRvd01zOiBleHBlY3QuYW55KE51bWJlcilcclxuICAgICAgICB9KSxcclxuICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhcHBseSByYXRlIGxpbWl0aW5nIHRvIGNhdGVnb3JpZXMgQVBJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IHdpdGhSYXRlTGltaXQgfSA9IHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJyk7XHJcbiAgICAgIGNvbnN0IHsgR0VUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvY2F0ZWdvcmllcy9yb3V0ZScpO1xyXG4gICAgICBcclxuICAgICAgd2l0aFJhdGVMaW1pdC5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKHJlcSwgY29uZmlnLCBoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9jYXRlZ29yaWVzJykpO1xyXG5cclxuICAgICAgYXdhaXQgR0VUKHJlcXVlc3QpO1xyXG5cclxuICAgICAgZXhwZWN0KHdpdGhSYXRlTGltaXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYXBwbHkgcmF0ZSBsaW1pdGluZyB0byBzZWFyY2ggdHJlbmRpbmcgQVBJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IHdpdGhSYXRlTGltaXQgfSA9IHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJyk7XHJcbiAgICAgIGNvbnN0IHsgR0VUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvc2VhcmNoL3RyZW5kaW5nL3JvdXRlJyk7XHJcbiAgICAgIFxyXG4gICAgICB3aXRoUmF0ZUxpbWl0Lm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAocmVxLCBjb25maWcsIGhhbmRsZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QobmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL3NlYXJjaC90cmVuZGluZycpKTtcclxuXHJcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdCh3aXRoUmF0ZUxpbWl0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFwcGx5IHJhdGUgbGltaXRpbmcgdG8gdXNlciBwcm9maWxlIEFQSScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyB3aXRoUmF0ZUxpbWl0IH0gPSByZXF1aXJlKCdAL2xpYi9yYXRlLWxpbWl0aW5nL3JhdGUtbGltaXRlcicpO1xyXG4gICAgICBcclxuICAgICAgLy8gTW9jayBhdXRoXHJcbiAgICAgIGplc3QubW9jaygnQC9hdXRoJywgKCkgPT4gKHtcclxuICAgICAgICBhdXRoOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSh7XHJcbiAgICAgICAgICB1c2VyOiB7IGlkOiAndGVzdC11c2VyLWlkJywgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9XHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgR0VUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvdXNlci9wcm9maWxlL3JvdXRlJyk7XHJcbiAgICAgIFxyXG4gICAgICB3aXRoUmF0ZUxpbWl0Lm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAocmVxLCBjb25maWcsIGhhbmRsZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QobmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL3VzZXIvcHJvZmlsZScpKTtcclxuXHJcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdCh3aXRoUmF0ZUxpbWl0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IExvZ2dpbmcgSW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzZWN1cml0eSBsb2dnZXIgZm9yIGFsbCBwcm90ZWN0ZWQgQVBJcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyBjcmVhdGVTZWN1cml0eUxvZ2dlciB9ID0gcmVxdWlyZSgnQC9saWIvbG9nZ2luZy9zZWN1cml0eS1sb2dnZXInKTtcclxuICAgICAgY29uc3QgeyBHRVQgfSA9IHJlcXVpcmUoJ0AvYXBwL2FwaS9jYXRlZ29yaWVzL3JvdXRlJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHdpdGhSYXRlTGltaXQgfSA9IHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJyk7XHJcbiAgICAgIHdpdGhSYXRlTGltaXQubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChyZXEsIGNvbmZpZywgaGFuZGxlcikgPT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBoYW5kbGVyKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChuZXcgUmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvY2F0ZWdvcmllcycpKTtcclxuXHJcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdChjcmVhdGVTZWN1cml0eUxvZ2dlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgocmVxdWVzdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBBUEkgYWNjZXNzIGV2ZW50cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0xvZ2dlciA9IHtcclxuICAgICAgICBsb2dFdmVudDogamVzdC5mbigpLFxyXG4gICAgICAgIGxvZ1JhdGVMaW1pdEV4Y2VlZGVkOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY29udGV4dDogeyBpcDogJzEyNy4wLjAuMScsIHVzZXJBZ2VudDogJ3Rlc3QnIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHsgY3JlYXRlU2VjdXJpdHlMb2dnZXIgfSA9IHJlcXVpcmUoJ0AvbGliL2xvZ2dpbmcvc2VjdXJpdHktbG9nZ2VyJyk7XHJcbiAgICAgIGNyZWF0ZVNlY3VyaXR5TG9nZ2VyLm1vY2tSZXR1cm5WYWx1ZShtb2NrTG9nZ2VyKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgd2l0aFJhdGVMaW1pdCB9ID0gcmVxdWlyZSgnQC9saWIvcmF0ZS1saW1pdGluZy9yYXRlLWxpbWl0ZXInKTtcclxuICAgICAgd2l0aFJhdGVMaW1pdC5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKHJlcSwgY29uZmlnLCBoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB7IEdFVCB9ID0gcmVxdWlyZSgnQC9hcHAvYXBpL2NhdGVnb3JpZXMvcm91dGUnKTtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChuZXcgUmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvY2F0ZWdvcmllcycpKTtcclxuXHJcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrTG9nZ2VyLmxvZ0V2ZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnYXBpX2FjY2VzcycsXHJcbiAgICAgICAgJ2xvdycsXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgZW5kcG9pbnQ6ICcvYXBpL2NhdGVnb3JpZXMnLFxyXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0RhdGFiYXNlIFRpbWVvdXQgSW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGFwcGx5IGRhdGFiYXNlIHRpbWVvdXRzIHRvIGRhdGFiYXNlIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgd2l0aERhdGFiYXNlVGltZW91dCB9ID0gcmVxdWlyZSgnQC9saWIvY29uZmlnL2FwaS10aW1lb3V0cycpO1xyXG4gICAgICBjb25zdCB7IHdpdGhSYXRlTGltaXQgfSA9IHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJyk7XHJcbiAgICAgIFxyXG4gICAgICB3aXRoUmF0ZUxpbWl0Lm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAocmVxLCBjb25maWcsIGhhbmRsZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHdpdGhEYXRhYmFzZVRpbWVvdXQubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChxdWVyeSwgdGltZW91dCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdCh0aW1lb3V0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgR0VUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvY2F0ZWdvcmllcy9yb3V0ZScpO1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9jYXRlZ29yaWVzJykpO1xyXG5cclxuICAgICAgYXdhaXQgR0VUKHJlcXVlc3QpO1xyXG5cclxuICAgICAgZXhwZWN0KHdpdGhEYXRhYmFzZVRpbWVvdXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIFNlY3VyaXR5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmF0ZSBsaW1pdCBleGNlZWRlZCBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tMb2dnZXIgPSB7XHJcbiAgICAgICAgbG9nRXZlbnQ6IGplc3QuZm4oKSxcclxuICAgICAgICBsb2dSYXRlTGltaXRFeGNlZWRlZDogamVzdC5mbigpLFxyXG4gICAgICAgIGNvbnRleHQ6IHsgaXA6ICcxMjcuMC4wLjEnLCB1c2VyQWdlbnQ6ICd0ZXN0JyB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlY3VyaXR5TG9nZ2VyIH0gPSByZXF1aXJlKCdAL2xpYi9sb2dnaW5nL3NlY3VyaXR5LWxvZ2dlcicpO1xyXG4gICAgICBjcmVhdGVTZWN1cml0eUxvZ2dlci5tb2NrUmV0dXJuVmFsdWUobW9ja0xvZ2dlcik7XHJcblxyXG4gICAgICBjb25zdCB7IHdpdGhSYXRlTGltaXQgfSA9IHJlcXVpcmUoJ0AvbGliL3JhdGUtbGltaXRpbmcvcmF0ZS1saW1pdGVyJyk7XHJcbiAgICAgIGNvbnN0IHsgTmV4dFJlc3BvbnNlIH0gPSByZXF1aXJlKCduZXh0L3NlcnZlcicpO1xyXG4gICAgICBcclxuICAgICAgLy8gTW9jayByYXRlIGxpbWl0IGV4Y2VlZGVkXHJcbiAgICAgIGNvbnN0IHJhdGVMaW1pdFJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1JhdGUgbGltaXQgZXhjZWVkZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyOSB9XHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICB3aXRoUmF0ZUxpbWl0Lm1vY2tSZXNvbHZlZFZhbHVlKHJhdGVMaW1pdFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgR0VUIH0gPSByZXF1aXJlKCdAL2FwcC9hcGkvY2F0ZWdvcmllcy9yb3V0ZScpO1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9jYXRlZ29yaWVzJykpO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja0xvZ2dlci5sb2dSYXRlTGltaXRFeGNlZWRlZCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQyOSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBzZWN1cml0eSBldmVudHMgZm9yIGVycm9ycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0xvZ2dlciA9IHtcclxuICAgICAgICBsb2dFdmVudDogamVzdC5mbigpLFxyXG4gICAgICAgIGxvZ1JhdGVMaW1pdEV4Y2VlZGVkOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY29udGV4dDogeyBpcDogJzEyNy4wLjAuMScsIHVzZXJBZ2VudDogJ3Rlc3QnIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHsgY3JlYXRlU2VjdXJpdHlMb2dnZXIgfSA9IHJlcXVpcmUoJ0AvbGliL2xvZ2dpbmcvc2VjdXJpdHktbG9nZ2VyJyk7XHJcbiAgICAgIGNyZWF0ZVNlY3VyaXR5TG9nZ2VyLm1vY2tSZXR1cm5WYWx1ZShtb2NrTG9nZ2VyKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgd2l0aFJhdGVMaW1pdCB9ID0gcmVxdWlyZSgnQC9saWIvcmF0ZS1saW1pdGluZy9yYXRlLWxpbWl0ZXInKTtcclxuICAgICAgY29uc3QgeyB3aXRoRGF0YWJhc2VUaW1lb3V0IH0gPSByZXF1aXJlKCdAL2xpYi9jb25maWcvYXBpLXRpbWVvdXRzJyk7XHJcbiAgICAgIFxyXG4gICAgICB3aXRoUmF0ZUxpbWl0Lm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAocmVxLCBjb25maWcsIGhhbmRsZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIE1vY2sgZGF0YWJhc2UgZXJyb3JcclxuICAgICAgd2l0aERhdGFiYXNlVGltZW91dC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB7IEdFVCB9ID0gcmVxdWlyZSgnQC9hcHAvYXBpL2NhdGVnb3JpZXMvcm91dGUnKTtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChuZXcgUmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvY2F0ZWdvcmllcycpKTtcclxuXHJcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrTG9nZ2VyLmxvZ0V2ZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnZGF0YWJhc2VfZXJyb3InLFxyXG4gICAgICAgICdtZWRpdW0nLFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIGVycm9yOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxyXG4gICAgICAgICAgZW5kcG9pbnQ6ICcvYXBpL2NhdGVnb3JpZXMnXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwid2l0aFJhdGVMaW1pdCIsImZuIiwiUkFURV9MSU1JVF9DT05GSUdTIiwicHJvZHVjdHMiLCJtYXhSZXF1ZXN0cyIsIndpbmRvd01zIiwiY2hlY2tvdXQiLCJzZWFyY2giLCJhdXRoIiwiQVBJX1RJTUVPVVRTIiwiZGF0YWJhc2UiLCJleHRlcm5hbCIsIndpdGhEYXRhYmFzZVRpbWVvdXQiLCJnZXRFbmRwb2ludFRpbWVvdXRzIiwiY3JlYXRlU2VjdXJpdHlMb2dnZXIiLCJsb2dFdmVudCIsImxvZ1JhdGVMaW1pdEV4Y2VlZGVkIiwiY29udGV4dCIsImlwIiwidXNlckFnZW50IiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJkYXRhIiwiZXJyb3IiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJyZXF1aXJlIiwiUE9TVCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInJlcSIsImNvbmZpZyIsImhhbmRsZXIiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInJlcXVlc3RCb2R5IiwiY3VzdG9tZXJJbmZvIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lIiwic2hpcHBpbmdBZGRyZXNzIiwic3RyZWV0QWRkcmVzcyIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJpdGVtcyIsImlkIiwibmFtZSIsInByaWNlIiwicXVhbnRpdHkiLCJwYXltZW50TWV0aG9kIiwic2hpcHBpbmdNZXRob2QiLCJ0b3RhbHMiLCJzdWJ0b3RhbCIsInNoaXBwaW5nIiwidG90YWwiLCJyZXF1ZXN0IiwiTmV4dFJlcXVlc3QiLCJSZXF1ZXN0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJPYmplY3QiLCJvYmplY3RDb250YWluaW5nIiwiTnVtYmVyIiwiRnVuY3Rpb24iLCJHRVQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1c2VyIiwibW9ja0xvZ2dlciIsIm1vY2tSZXR1cm5WYWx1ZSIsImVuZHBvaW50IiwicXVlcnkiLCJ0aW1lb3V0IiwiTmV4dFJlc3BvbnNlIiwicmF0ZUxpbWl0UmVzcG9uc2UiLCJqc29uIiwic3RhdHVzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJyZXNwb25zZSIsInRvQmUiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0QyxvRUFBb0U7O0FBSXBFLDJCQUEyQjtBQUMzQkEs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