{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductList.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport Image from 'next/image'\nimport { useRouter } from 'next/navigation'\nimport { AdminDataTable } from '../ui/AdminDataTable'\nimport { ProductFilters } from './ProductFilters'\nimport { ProductActions, ProductRowActions } from './ProductActions'\nimport { useProductList } from '@/hooks/admin/useProductList'\nimport { cn } from '@/lib/core/utils'\nimport { Package, AlertCircle, CheckCircle, Clock } from 'lucide-react'\n\ninterface Product {\n  id: string\n  name: string\n  description: string\n  price: number\n  stock: number\n  category_id: string\n  category_name?: string\n  image_url?: string\n  images?: {\n    main: string\n    gallery: string[]\n    previews: string[]\n    thumbnails: string[]\n  }\n  status: 'active' | 'inactive' | 'draft'\n  created_at: string\n  updated_at: string\n}\n\ninterface ProductListProps {\n  className?: string\n}\n\n// Status Badge Component\nfunction StatusBadge({ status }: { status: Product['status'] }) {\n  const statusConfig = {\n    active: {\n      label: 'Activo',\n      icon: CheckCircle,\n      className: 'bg-green-100 text-green-800 border-green-200',\n    },\n    inactive: {\n      label: 'Inactivo',\n      icon: AlertCircle,\n      className: 'bg-red-100 text-red-800 border-red-200',\n    },\n    draft: {\n      label: 'Borrador',\n      icon: Clock,\n      className: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n    },\n  }\n\n  const config = statusConfig[status]\n  const Icon = config && config.icon ? config.icon : Package\n\n  return (\n    <span\n      className={cn(\n        'inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full border',\n        config && config.className ? config.className : 'bg-gray-100 text-gray-800 border-gray-200'\n      )}\n    >\n      <Icon className='w-3 h-3' />\n      <span>{config && config.label ? config.label : 'Estado'}</span>\n    </span>\n  )\n}\n\n// Stock Badge Component\nfunction StockBadge({ stock }: { stock: number }) {\n  if (stock === 0) {\n    return (\n      <span className='inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full'>\n        Sin stock\n      </span>\n    )\n  }\n\n  if (stock <= 10) {\n    return (\n      <span className='inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full'>\n        Stock bajo\n      </span>\n    )\n  }\n\n  return <span className='text-sm text-gray-900'>{stock} unidades</span>\n}\n\nexport function ProductList({ className }: ProductListProps) {\n  console.log('ðŸ”§ ProductList: Componente iniciado')\n  const router = useRouter()\n  const [selectedProducts, setSelectedProducts] = useState<Product[]>([])\n\n  const { products, isLoading, error } = useProductList()\n\n  // Valores temporales para compatibilidad\n  const total = 53 // Total real de la base de datos\n  const currentPage = 1\n  const currentPageSize = 25\n  const params = { filters: {} }\n  const updateFilters = () => {}\n  const clearFilters = () => {}\n  const goToPage = () => {}\n  const changePageSize = () => {}\n  const deleteProduct = () => {}\n  const bulkDelete = () => {}\n  const isDeleting = false\n  const isBulkDeleting = false\n\n  // Table columns configuration\n  const columns = [\n    {\n      key: 'images',\n      title: 'Imagen',\n      width: '100px',\n      render: (images: any, product: Product) => {\n        const imageUrl = images?.main || product.image_url\n        return (\n          <div className='w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center shadow-sm'>\n            {imageUrl ? (\n              <Image\n                src={imageUrl}\n                alt={product.name}\n                width={64}\n                height={64}\n                className='object-cover w-full h-full'\n              />\n            ) : (\n              <Package className='w-8 h-8 text-gray-400' />\n            )}\n          </div>\n        )\n      },\n    },\n    {\n      key: 'name',\n      title: 'Producto',\n      sortable: true,\n      render: (name: string, product: Product) => (\n        <div className='max-w-sm'>\n          <div className='font-semibold text-gray-900 text-base mb-1'>{name}</div>\n          <div\n            className='text-sm text-gray-600 overflow-hidden leading-relaxed'\n            style={{ display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical' }}\n          >\n            {product.description || 'Sin descripciÃ³n disponible'}\n          </div>\n        </div>\n      ),\n    },\n    {\n      key: 'category_name',\n      title: 'CategorÃ­a',\n      sortable: true,\n      render: (categoryName: string) => (\n        <span className='text-sm text-gray-900'>{categoryName || 'Sin categorÃ­a'}</span>\n      ),\n    },\n    {\n      key: 'price',\n      title: 'Precio',\n      align: 'right' as const,\n      sortable: true,\n      render: (price: number) => (\n        <div className='text-right'>\n          <span className='font-bold text-lg text-green-600'>${price.toLocaleString('es-AR')}</span>\n        </div>\n      ),\n    },\n    {\n      key: 'stock',\n      title: 'Stock',\n      align: 'center' as const,\n      sortable: true,\n      render: (stock: number) => <StockBadge stock={stock} />,\n    },\n    {\n      key: 'status',\n      title: 'Estado',\n      align: 'center' as const,\n      sortable: true,\n      render: (status: Product['status']) => <StatusBadge status={status} />,\n    },\n    {\n      key: 'created_at',\n      title: 'Creado',\n      sortable: true,\n      render: (createdAt: string) => (\n        <span className='text-sm text-gray-500'>\n          {new Date(createdAt).toLocaleDateString('es-AR')}\n        </span>\n      ),\n    },\n    {\n      key: 'actions',\n      title: 'Acciones',\n      width: '60px',\n      render: (_: any, product: Product) => (\n        <ProductRowActions\n          product={product}\n          onView={id => router.push(`/admin/products/${id}`)}\n          onEdit={id => router.push(`/admin/products/${id}/edit`)}\n          onDelete={handleDeleteProduct}\n          onDuplicate={handleDuplicateProduct}\n          isLoading={isDeleting}\n        />\n      ),\n    },\n  ]\n\n  // Event handlers\n  const handleDeleteProduct = async (productId: string) => {\n    const result = await deleteProduct(productId)\n    if (!result.success) {\n      // Handle error (show toast, etc.)\n      console.error('Error deleting product:', result.error)\n    }\n  }\n\n  const handleBulkDelete = async (productIds: string[]) => {\n    const result = await bulkDelete(productIds)\n    if (result.success) {\n      setSelectedProducts([])\n    } else {\n      // Handle error\n      console.error('Error bulk deleting products:', result.error)\n    }\n  }\n\n  const handleDuplicateProduct = (productId: string) => {\n    // TODO: Implement product duplication\n    console.log('Duplicate product:', productId)\n  }\n\n  const handleCreateProduct = () => {\n    router.push('/admin/products/new')\n  }\n\n  const handleExportProducts = () => {\n    // TODO: Implement export functionality\n    console.log('Export products')\n  }\n\n  const handleImportProducts = () => {\n    // TODO: Implement import functionality\n    console.log('Import products')\n  }\n\n  const handleRowClick = (product: Product) => {\n    router.push(`/admin/products/${product.id}`)\n  }\n\n  // Pagination configuration\n  const paginationConfig = {\n    page: currentPage,\n    pageSize: currentPageSize,\n    total,\n    onPageChange: goToPage,\n    onPageSizeChange: changePageSize,\n  }\n\n  if (error) {\n    return (\n      <div className='bg-red-50 border border-red-200 rounded-lg p-6'>\n        <div className='flex items-center space-x-3'>\n          <AlertCircle className='w-6 h-6 text-red-600' />\n          <div>\n            <h3 className='text-lg font-medium text-red-800'>Error al cargar productos</h3>\n            <p className='text-red-700 mt-1'>{error.message}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      {/* Filters */}\n      <ProductFilters\n        filters={params.filters || {}}\n        onFiltersChange={updateFilters}\n        onClearFilters={clearFilters}\n        categories={[]} // TODO: Load categories from API\n      />\n\n      {/* Actions */}\n      <ProductActions\n        selectedProducts={selectedProducts}\n        onCreateProduct={handleCreateProduct}\n        onBulkDelete={handleBulkDelete}\n        onExportProducts={handleExportProducts}\n        onImportProducts={handleImportProducts}\n        isLoading={isDeleting || isBulkDeleting}\n      />\n\n      {/* Data Table */}\n      <AdminDataTable\n        data={Array.isArray(products) ? products : []}\n        columns={columns}\n        loading={isLoading}\n        pagination={paginationConfig}\n        selectable\n        onRowClick={handleRowClick}\n        onSelectionChange={setSelectedProducts}\n        className='shadow-sm'\n      />\n\n      {/* Summary */}\n      {!isLoading && (\n        <div className='text-sm text-gray-600 text-center'>\n          Mostrando {products.length} de {total} productos\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["ProductList","StatusBadge","status","statusConfig","active","label","icon","CheckCircle","className","inactive","AlertCircle","draft","Clock","config","Icon","Package","span","cn","StockBadge","stock","console","log","router","useRouter","selectedProducts","setSelectedProducts","useState","products","isLoading","error","useProductList","total","currentPage","currentPageSize","params","filters","updateFilters","clearFilters","goToPage","changePageSize","deleteProduct","bulkDelete","isDeleting","isBulkDeleting","columns","key","title","width","render","images","product","imageUrl","main","image_url","div","Image","src","alt","name","height","sortable","style","display","WebkitLineClamp","WebkitBoxOrient","description","categoryName","align","price","toLocaleString","createdAt","Date","toLocaleDateString","_","ProductRowActions","onView","id","push","onEdit","onDelete","handleDeleteProduct","onDuplicate","handleDuplicateProduct","productId","result","success","handleBulkDelete","productIds","handleCreateProduct","handleExportProducts","handleImportProducts","handleRowClick","paginationConfig","page","pageSize","onPageChange","onPageSizeChange","h3","p","message","ProductFilters","onFiltersChange","onClearFilters","categories","ProductActions","onCreateProduct","onBulkDelete","onExportProducts","onImportProducts","AdminDataTable","data","Array","isArray","loading","pagination","selectable","onRowClick","onSelectionChange","length"],"mappings":"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"}