{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\types\\orders-enterprise.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - ORDERS ENTERPRISE TYPES\r\n// ===================================\r\n\r\n// ===================================\r\n// ESTADOS DE ÓRDENES\r\n// ===================================\r\n\r\nexport type OrderStatus = \r\n  | 'pending'     // Pendiente de confirmación\r\n  | 'confirmed'   // Confirmada, preparando\r\n  | 'processing'  // En proceso de preparación\r\n  | 'shipped'     // Enviada\r\n  | 'delivered'   // Entregada\r\n  | 'cancelled'   // Cancelada\r\n  | 'refunded'    // Reembolsada\r\n  | 'returned';   // Devuelta\r\n\r\nexport type PaymentStatus = \r\n  | 'pending'     // Pendiente de pago\r\n  | 'paid'        // Pagado\r\n  | 'failed'      // Falló el pago\r\n  | 'refunded';   // Reembolsado\r\n\r\nexport type FulfillmentStatus = \r\n  | 'unfulfilled' // Sin procesar\r\n  | 'partial'     // Parcialmente procesado\r\n  | 'fulfilled';  // Completamente procesado\r\n\r\n// ===================================\r\n// TRANSICIONES DE ESTADOS\r\n// ===================================\r\n\r\nexport interface StateTransition {\r\n  from: OrderStatus;\r\n  to: OrderStatus;\r\n  allowed: boolean;\r\n  requiresReason: boolean;\r\n  description: string;\r\n}\r\n\r\nexport const ORDER_STATE_TRANSITIONS: Record<OrderStatus, OrderStatus[]> = {\r\n  pending: ['confirmed', 'cancelled'],\r\n  confirmed: ['processing', 'cancelled'],\r\n  processing: ['shipped', 'cancelled'],\r\n  shipped: ['delivered', 'returned'],\r\n  delivered: ['returned'],\r\n  cancelled: [],\r\n  refunded: [],\r\n  returned: ['refunded']\r\n};\r\n\r\nexport const ORDER_STATUS_DESCRIPTIONS: Record<OrderStatus, string> = {\r\n  pending: 'Pendiente de confirmación',\r\n  confirmed: 'Confirmada, preparando pedido',\r\n  processing: 'En proceso de preparación',\r\n  shipped: 'Enviada',\r\n  delivered: 'Entregada',\r\n  cancelled: 'Cancelada',\r\n  refunded: 'Reembolsada',\r\n  returned: 'Devuelta'\r\n};\r\n\r\n// ===================================\r\n// INTERFACES PRINCIPALES\r\n// ===================================\r\n\r\nexport interface OrderEnterprise {\r\n  id: string;\r\n  order_number: string;\r\n  user_id: string;\r\n  status: OrderStatus;\r\n  payment_status: PaymentStatus;\r\n  fulfillment_status: FulfillmentStatus;\r\n  total: number;\r\n  currency: string;\r\n  shipping_address?: ShippingAddress;\r\n  billing_address?: BillingAddress;\r\n  notes?: string;\r\n  admin_notes?: string;\r\n  tracking_number?: string;\r\n  carrier?: string;\r\n  estimated_delivery?: string;\r\n  metadata: Record<string, any>;\r\n  created_at: string;\r\n  updated_at: string;\r\n  \r\n  // Relaciones\r\n  user_profiles?: UserProfile;\r\n  order_items?: OrderItemEnterprise[];\r\n  status_history?: OrderStatusHistory[];\r\n  order_notes?: OrderNote[];\r\n}\r\n\r\nexport interface OrderItemEnterprise {\r\n  id: string;\r\n  order_id: string;\r\n  product_id: number;\r\n  quantity: number;\r\n  unit_price: number;\r\n  total_price: number;\r\n  product_snapshot?: Record<string, any>;\r\n  created_at: string;\r\n  \r\n  // Relaciones\r\n  products?: ProductBasic;\r\n}\r\n\r\nexport interface OrderStatusHistory {\r\n  id: string;\r\n  order_id: string;\r\n  previous_status?: OrderStatus;\r\n  new_status: OrderStatus;\r\n  changed_by?: string;\r\n  reason?: string;\r\n  metadata: Record<string, any>;\r\n  created_at: string;\r\n  \r\n  // Relaciones\r\n  user_profiles?: UserProfile;\r\n}\r\n\r\nexport interface OrderNote {\r\n  id: string;\r\n  order_id: string;\r\n  admin_id?: string;\r\n  note_type: 'internal' | 'customer' | 'system';\r\n  content: string;\r\n  is_visible_to_customer: boolean;\r\n  metadata: Record<string, any>;\r\n  created_at: string;\r\n  updated_at: string;\r\n  \r\n  // Relaciones\r\n  user_profiles?: UserProfile;\r\n}\r\n\r\nexport interface OrderMetrics {\r\n  id: string;\r\n  date: string;\r\n  total_orders: number;\r\n  total_revenue: number;\r\n  avg_order_value: number;\r\n  orders_by_status: Record<OrderStatus, number>;\r\n  orders_by_payment_status: Record<PaymentStatus, number>;\r\n  top_products: ProductSalesMetric[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// ===================================\r\n// INTERFACES DE SOPORTE\r\n// ===================================\r\n\r\nexport interface ShippingAddress {\r\n  street_name: string;\r\n  street_number: string;\r\n  zip_code: string;\r\n  city_name: string;\r\n  state_name: string;\r\n  country?: string;\r\n  additional_info?: string;\r\n}\r\n\r\nexport interface BillingAddress extends ShippingAddress {\r\n  company_name?: string;\r\n  tax_id?: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  phone?: string;\r\n  role?: string;\r\n}\r\n\r\nexport interface ProductBasic {\r\n  id: number;\r\n  name: string;\r\n  images?: string[];\r\n  sku?: string;\r\n  category?: string;\r\n}\r\n\r\nexport interface ProductSalesMetric {\r\n  product_id: number;\r\n  product_name: string;\r\n  total_quantity: number;\r\n  total_revenue: number;\r\n  avg_price: number;\r\n}\r\n\r\n// ===================================\r\n// FILTROS Y CONSULTAS\r\n// ===================================\r\n\r\nexport interface OrderFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  status?: OrderStatus;\r\n  payment_status?: PaymentStatus;\r\n  date_from?: string;\r\n  date_to?: string;\r\n  search?: string;\r\n  sort_by?: 'created_at' | 'total' | 'order_number';\r\n  sort_order?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface OrderListResponse {\r\n  orders: OrderEnterprise[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n    hasNextPage: boolean;\r\n    hasPreviousPage: boolean;\r\n  };\r\n  filters: OrderFilters;\r\n}\r\n\r\n// ===================================\r\n// OPERACIONES MASIVAS\r\n// ===================================\r\n\r\nexport interface BulkStatusUpdate {\r\n  order_ids: string[];\r\n  status: OrderStatus;\r\n  reason: string;\r\n  notify_customers?: boolean;\r\n}\r\n\r\nexport interface BulkStatusUpdateResult {\r\n  updated_orders: OrderEnterprise[];\r\n  invalid_orders: {\r\n    id: string;\r\n    order_number: string;\r\n    current_status: OrderStatus;\r\n    reason: string;\r\n  }[];\r\n  summary: {\r\n    total_requested: number;\r\n    successfully_updated: number;\r\n    failed_updates: number;\r\n  };\r\n}\r\n\r\nexport interface BulkExportOptions {\r\n  format: 'csv' | 'json';\r\n  filters?: OrderFilters;\r\n  include_items?: boolean;\r\n}\r\n\r\n// ===================================\r\n// ANALYTICS Y REPORTES\r\n// ===================================\r\n\r\nexport interface OrderAnalytics {\r\n  summary: {\r\n    total_orders: number;\r\n    total_revenue: number;\r\n    average_order_value: number;\r\n    revenue_growth_percentage: number;\r\n    period: {\r\n      start_date: string;\r\n      end_date: string;\r\n      period_type: string;\r\n    };\r\n  };\r\n  status_distribution: Record<OrderStatus, number>;\r\n  top_products: ProductSalesMetric[];\r\n  daily_trends: DailyTrend[];\r\n  filters: AnalyticsFilters;\r\n}\r\n\r\nexport interface AnalyticsFilters {\r\n  period: 'today' | 'week' | 'month' | 'quarter' | 'year' | 'custom';\r\n  date_from?: string;\r\n  date_to?: string;\r\n  group_by: 'day' | 'week' | 'month';\r\n  include_details?: boolean;\r\n}\r\n\r\nexport interface DailyTrend {\r\n  date: string;\r\n  total_orders: number;\r\n  total_revenue: number;\r\n  avg_order_value: number;\r\n}\r\n\r\n// ===================================\r\n// FORMULARIOS Y VALIDACIONES\r\n// ===================================\r\n\r\nexport interface CreateOrderRequest {\r\n  user_id: string;\r\n  items: {\r\n    product_id: number;\r\n    quantity: number;\r\n    unit_price: number;\r\n  }[];\r\n  shipping_address?: ShippingAddress;\r\n  notes?: string;\r\n}\r\n\r\nexport interface UpdateOrderRequest {\r\n  status?: OrderStatus;\r\n  payment_status?: PaymentStatus;\r\n  notes?: string;\r\n  tracking_number?: string;\r\n  carrier?: string;\r\n  shipping_address?: ShippingAddress;\r\n}\r\n\r\nexport interface StatusUpdateRequest {\r\n  status: OrderStatus;\r\n  reason: string;\r\n  notify_customer?: boolean;\r\n  tracking_number?: string;\r\n  carrier?: string;\r\n  estimated_delivery?: string;\r\n}\r\n\r\n// ===================================\r\n// NOTIFICACIONES\r\n// ===================================\r\n\r\nexport interface OrderNotification {\r\n  type: 'status_change' | 'payment_update' | 'shipping_update';\r\n  order_id: string;\r\n  order_number: string;\r\n  customer_email: string;\r\n  previous_status?: OrderStatus;\r\n  new_status: OrderStatus;\r\n  message: string;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\n// ===================================\r\n// HOOKS Y ESTADO\r\n// ===================================\r\n\r\nexport interface UseOrdersState {\r\n  orders: OrderEnterprise[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  filters: OrderFilters;\r\n  pagination: OrderListResponse['pagination'];\r\n}\r\n\r\nexport interface UseOrderDetailState {\r\n  order: OrderEnterprise | null;\r\n  statusHistory: OrderStatusHistory[];\r\n  notes: OrderNote[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  updating: boolean;\r\n}\r\n\r\nexport interface UseOrderAnalyticsState {\r\n  analytics: OrderAnalytics | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  refreshing: boolean;\r\n}\r\n\r\n// ===================================\r\n// VALIDACIONES\r\n// ===================================\r\n\r\nexport interface ValidationResult {\r\n  valid: boolean;\r\n  message?: string;\r\n  details?: string[];\r\n}\r\n\r\nexport interface StateTransitionValidation extends ValidationResult {\r\n  allowedTransitions?: OrderStatus[];\r\n}\r\n\r\n// ===================================\r\n// CONFIGURACIÓN\r\n// ===================================\r\n\r\nexport interface OrdersConfig {\r\n  defaultPageSize: number;\r\n  maxBulkOperations: number;\r\n  autoSaveInterval: number;\r\n  statusTransitions: Record<OrderStatus, OrderStatus[]>;\r\n  notificationSettings: {\r\n    enableCustomerNotifications: boolean;\r\n    enableAdminNotifications: boolean;\r\n    emailTemplates: Record<string, string>;\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["ORDER_STATE_TRANSITIONS","ORDER_STATUS_DESCRIPTIONS","pending","confirmed","processing","shipped","delivered","cancelled","refunded","returned"],"mappings":"AAAA,sCAAsC;AACtC,+CAA+C;AAC/C,sCAAsC;AAEtC,sCAAsC;AACtC,qBAAqB;AACrB,sCAAsC;;;;;;;;;;;;QAmCzBA;eAAAA;;QAWAC;eAAAA;;;AAXN,MAAMD,0BAA8D;IACzEE,SAAS;QAAC;QAAa;KAAY;IACnCC,WAAW;QAAC;QAAc;KAAY;IACtCC,YAAY;QAAC;QAAW;KAAY;IACpCC,SAAS;QAAC;QAAa;KAAW;IAClCC,WAAW;QAAC;KAAW;IACvBC,WAAW,EAAE;IACbC,UAAU,EAAE;IACZC,UAAU;QAAC;KAAW;AACxB;AAEO,MAAMR,4BAAyD;IACpEC,SAAS;IACTC,WAAW;IACXC,YAAY;IACZC,SAAS;IACTC,WAAW;IACXC,WAAW;IACXC,UAAU;IACVC,UAAU;AACZ"}