82e07e90aaf75ee8e5af90e8b73a230b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DELETE () {
        return DELETE;
    },
    get GET () {
        return GET;
    },
    get PUT () {
        return PUT;
    }
});
const _server = require("next/server");
const _adminauth = require("../../../../../lib/auth/admin-auth");
const _zod = require("zod");
const _errorhandler = require("../../../../../lib/api/error-handler");
const _apilogger = require("../../../../../lib/api/api-logger");
const _apiauthmiddleware = require("../../../../../lib/auth/api-auth-middleware");
const _adminschemas = require("../../../../../lib/validation/admin-schemas");
const _middlewarecomposer = require("../../../../../lib/api/middleware-composer");
// Validation schemas
const UpdateProductSchema = _zod.z.object({
    name: _zod.z.string().min(1, 'El nombre es requerido').max(255, 'Máximo 255 caracteres').optional(),
    description: _zod.z.string().optional(),
    short_description: _zod.z.string().max(500, 'Máximo 500 caracteres').optional(),
    price: _zod.z.number().min(0, 'El precio debe ser mayor a 0').optional(),
    discounted_price: _zod.z.number().min(0).optional(),
    stock: _zod.z.number().min(0, 'El stock debe ser mayor o igual a 0').optional(),
    low_stock_threshold: _zod.z.number().min(0).optional(),
    category_id: _zod.z.string().uuid('ID de categoría inválido').optional(),
    brand: _zod.z.string().optional(),
    images: _zod.z.array(_zod.z.object({
        url: _zod.z.string().url(),
        alt_text: _zod.z.string().optional(),
        is_primary: _zod.z.boolean().default(false)
    })).optional(),
    is_active: _zod.z.boolean().optional(),
    is_featured: _zod.z.boolean().optional(),
    status: _zod.z.enum([
        'active',
        'inactive',
        'draft'
    ]).optional()
});
const ProductParamsSchema = _zod.z.object({
    id: _zod.z.string().uuid('ID de producto inválido')
});
// Helper function to get product by ID with enhanced error handling
async function getProductById(supabase, productId) {
    const { data: product, error } = await supabase.from('products').select(`
      id,
      name,
      slug,
      description,
      short_description,
      price,
      discounted_price,
      stock,
      low_stock_threshold,
      category_id,
      brand,
      images,
      is_active,
      is_featured,
      status,
      created_at,
      updated_at,
      categories (
        id,
        name
      )
    `).eq('id', productId).single();
    if (error) {
        throw new _errorhandler.NotFoundError('Producto');
    }
    // Transform response with enhanced data
    const transformedProduct = {
        ...product,
        category_name: product.categories?.name || null,
        categories: undefined
    };
    return transformedProduct;
}
// Helper function to generate unique slug
function generateSlug(name) {
    return name.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-').trim();
}
/**
 * GET /api/admin/products/[id] - Enterprise Handler
 * Obtener producto específico por ID con middleware enterprise
 */ const getHandler = async (request, { params })=>{
    const { supabase } = request;
    const productId = params.id;
    // Validar parámetros
    const paramsValidation = ProductParamsSchema.safeParse({
        id: productId
    });
    if (!paramsValidation.success) {
        throw new _errorhandler.ValidationError('ID de producto inválido', paramsValidation.error.errors);
    }
    const product = await getProductById(supabase, productId);
    return _server.NextResponse.json({
        data: product,
        success: true,
        message: 'Producto obtenido exitosamente'
    });
};
/**
 * PUT /api/admin/products/[id] - Enterprise Handler
 * Actualizar producto específico con middleware enterprise
 */ const putHandler = async (request, { params })=>{
    const { supabase, user, validatedData } = request;
    const productId = params.id;
    // Validar parámetros
    const paramsValidation = ProductParamsSchema.safeParse({
        id: productId
    });
    if (!paramsValidation.success) {
        throw new _errorhandler.ValidationError('ID de producto inválido', paramsValidation.error.errors);
    }
    // Verificar que el producto existe
    const existingProduct = await getProductById(supabase, productId);
    // Verificar categoría si se está actualizando
    if (validatedData.category_id) {
        const { data: category, error: categoryError } = await supabase.from('categories').select('id').eq('id', validatedData.category_id).single();
        if (categoryError || !category) {
            throw new _errorhandler.ValidationError('Categoría no encontrada');
        }
    }
    // Generar slug si se actualiza el nombre
    const updateData = {
        ...validatedData,
        updated_at: new Date().toISOString()
    };
    if (validatedData.name) {
        updateData.slug = generateSlug(validatedData.name);
    }
    // Actualizar producto
    const { data: updatedProduct, error } = await supabase.from('products').update(updateData).eq('id', productId).select(`
      id,
      name,
      slug,
      description,
      short_description,
      price,
      discounted_price,
      stock,
      low_stock_threshold,
      category_id,
      brand,
      images,
      is_active,
      is_featured,
      status,
      created_at,
      updated_at,
      categories (
        id,
        name
      )
    `).single();
    if (error) {
        throw new _errorhandler.ApiError('Error al actualizar producto', 500, 'DATABASE_ERROR', error);
    }
    // Log de auditoría
    await (0, _adminauth.logAdminAction)(user.id, 'UPDATE', 'product', productId, existingProduct, updatedProduct);
    // Transform response
    const transformedProduct = {
        ...updatedProduct,
        category_name: updatedProduct.categories?.name || null,
        categories: undefined
    };
    return _server.NextResponse.json({
        data: transformedProduct,
        success: true,
        message: 'Producto actualizado exitosamente'
    });
};
/**
 * DELETE /api/admin/products/[id] - Enterprise Handler
 * Eliminar producto específico con middleware enterprise
 */ const deleteHandler = async (request, { params })=>{
    const { supabase, user } = request;
    const productId = params.id;
    // Validar parámetros
    const paramsValidation = ProductParamsSchema.safeParse({
        id: productId
    });
    if (!paramsValidation.success) {
        throw new _errorhandler.ValidationError('ID de producto inválido', paramsValidation.error.errors);
    }
    // Verificar que el producto existe
    const existingProduct = await getProductById(supabase, productId);
    // Verificar si el producto está referenciado en órdenes
    const { data: orderItems, error: orderCheckError } = await supabase.from('order_items').select('id').eq('product_id', productId).limit(1);
    if (orderCheckError) {
        console.warn('Error checking order references:', orderCheckError);
    // Continuar con eliminación aunque falle la verificación
    }
    let deletionResult;
    let isHardDelete = false;
    if (orderItems && orderItems.length > 0) {
        // Soft delete: marcar como inactivo
        const { error: updateError } = await supabase.from('products').update({
            status: 'inactive',
            is_active: false,
            updated_at: new Date().toISOString()
        }).eq('id', productId);
        if (updateError) {
            throw new _errorhandler.ApiError('Error al eliminar producto', 500, 'DATABASE_ERROR', updateError);
        }
        deletionResult = {
            message: 'Producto marcado como inactivo (tiene órdenes asociadas)',
            soft_delete: true
        };
    } else {
        // Hard delete si no hay referencias
        const { error } = await supabase.from('products').delete().eq('id', productId);
        if (error) {
            throw new _errorhandler.ApiError('Error al eliminar producto', 500, 'DATABASE_ERROR', error);
        }
        isHardDelete = true;
        deletionResult = {
            message: 'Producto eliminado exitosamente',
            hard_delete: true
        };
    }
    // Log de auditoría
    await (0, _adminauth.logAdminAction)(user.id, isHardDelete ? 'DELETE' : 'SOFT_DELETE', 'product', productId, existingProduct, null);
    return _server.NextResponse.json({
        ...deletionResult,
        success: true
    });
};
const GET = (0, _middlewarecomposer.composeMiddlewares)(_errorhandler.withErrorHandler, _apilogger.withApiLogging, (0, _apiauthmiddleware.withAdminAuth)([
    'products_read'
]))(getHandler);
const PUT = (0, _middlewarecomposer.composeMiddlewares)(_errorhandler.withErrorHandler, _apilogger.withApiLogging, (0, _apiauthmiddleware.withAdminAuth)([
    'products_update'
]), (0, _adminschemas.withValidation)(UpdateProductSchema))(putHandler);
const DELETE = (0, _middlewarecomposer.composeMiddlewares)(_errorhandler.withErrorHandler, _apilogger.withApiLogging, (0, _apiauthmiddleware.withAdminAuth)([
    'products_delete'
]))(deleteHandler);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcYXBwXFxhcGlcXGFkbWluXFxwcm9kdWN0c1xcW2lkXVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY2hlY2tDUlVEUGVybWlzc2lvbnMsIGxvZ0FkbWluQWN0aW9uLCBnZXRSZXF1ZXN0SW5mbyB9IGZyb20gJ0AvbGliL2F1dGgvYWRtaW4tYXV0aCdcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnQC90eXBlcy9kYXRhYmFzZSdcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbi8vIEVudGVycHJpc2UgbWlkZGxld2FyZSBpbXBvcnRzXG5pbXBvcnQgeyB3aXRoRXJyb3JIYW5kbGVyIH0gZnJvbSAnQC9saWIvYXBpL2Vycm9yLWhhbmRsZXInXG5pbXBvcnQgeyB3aXRoQXBpTG9nZ2luZyB9IGZyb20gJ0AvbGliL2FwaS9hcGktbG9nZ2VyJ1xuaW1wb3J0IHsgd2l0aEFkbWluQXV0aCB9IGZyb20gJ0AvbGliL2F1dGgvYXBpLWF1dGgtbWlkZGxld2FyZSdcbmltcG9ydCB7IHdpdGhWYWxpZGF0aW9uIH0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbi9hZG1pbi1zY2hlbWFzJ1xuaW1wb3J0IHsgY29tcG9zZU1pZGRsZXdhcmVzIH0gZnJvbSAnQC9saWIvYXBpL21pZGRsZXdhcmUtY29tcG9zZXInXG5cbi8vIFZhbGlkYXRpb24gc2NoZW1hc1xuY29uc3QgVXBkYXRlUHJvZHVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ0VsIG5vbWJyZSBlcyByZXF1ZXJpZG8nKS5tYXgoMjU1LCAnTcOheGltbyAyNTUgY2FyYWN0ZXJlcycpLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHNob3J0X2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1heCg1MDAsICdNw6F4aW1vIDUwMCBjYXJhY3RlcmVzJykub3B0aW9uYWwoKSxcbiAgcHJpY2U6IHoubnVtYmVyKCkubWluKDAsICdFbCBwcmVjaW8gZGViZSBzZXIgbWF5b3IgYSAwJykub3B0aW9uYWwoKSxcbiAgZGlzY291bnRlZF9wcmljZTogei5udW1iZXIoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgc3RvY2s6IHoubnVtYmVyKCkubWluKDAsICdFbCBzdG9jayBkZWJlIHNlciBtYXlvciBvIGlndWFsIGEgMCcpLm9wdGlvbmFsKCksXG4gIGxvd19zdG9ja190aHJlc2hvbGQ6IHoubnVtYmVyKCkubWluKDApLm9wdGlvbmFsKCksXG4gIGNhdGVnb3J5X2lkOiB6LnN0cmluZygpLnV1aWQoJ0lEIGRlIGNhdGVnb3LDrWEgaW52w6FsaWRvJykub3B0aW9uYWwoKSxcbiAgYnJhbmQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgaW1hZ2VzOiB6XG4gICAgLmFycmF5KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICB1cmw6IHouc3RyaW5nKCkudXJsKCksXG4gICAgICAgIGFsdF90ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGlzX3ByaW1hcnk6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm9wdGlvbmFsKCksXG4gIGlzX2FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgaXNfZmVhdHVyZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFsnYWN0aXZlJywgJ2luYWN0aXZlJywgJ2RyYWZ0J10pLm9wdGlvbmFsKCksXG59KVxuXG5jb25zdCBQcm9kdWN0UGFyYW1zU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKS51dWlkKCdJRCBkZSBwcm9kdWN0byBpbnbDoWxpZG8nKSxcbn0pXG5cbi8vIEVudGVycHJpc2UgaW1wb3J0cyBmb3IgZXJyb3IgaGFuZGxpbmdcbmltcG9ydCB7IEFwaUVycm9yLCBOb3RGb3VuZEVycm9yLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICdAL2xpYi9hcGkvZXJyb3ItaGFuZGxlcidcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBwcm9kdWN0IGJ5IElEIHdpdGggZW5oYW5jZWQgZXJyb3IgaGFuZGxpbmdcbmFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RCeUlkKFxuICBzdXBhYmFzZTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ2xpZW50PERhdGFiYXNlPj4sXG4gIHByb2R1Y3RJZDogc3RyaW5nXG4pIHtcbiAgY29uc3QgeyBkYXRhOiBwcm9kdWN0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgIC5zZWxlY3QoXG4gICAgICBgXG4gICAgICBpZCxcbiAgICAgIG5hbWUsXG4gICAgICBzbHVnLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBzaG9ydF9kZXNjcmlwdGlvbixcbiAgICAgIHByaWNlLFxuICAgICAgZGlzY291bnRlZF9wcmljZSxcbiAgICAgIHN0b2NrLFxuICAgICAgbG93X3N0b2NrX3RocmVzaG9sZCxcbiAgICAgIGNhdGVnb3J5X2lkLFxuICAgICAgYnJhbmQsXG4gICAgICBpbWFnZXMsXG4gICAgICBpc19hY3RpdmUsXG4gICAgICBpc19mZWF0dXJlZCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICB1cGRhdGVkX2F0LFxuICAgICAgY2F0ZWdvcmllcyAoXG4gICAgICAgIGlkLFxuICAgICAgICBuYW1lXG4gICAgICApXG4gICAgYFxuICAgIClcbiAgICAuZXEoJ2lkJywgcHJvZHVjdElkKVxuICAgIC5zaW5nbGUoKVxuXG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKCdQcm9kdWN0bycpXG4gIH1cblxuICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2Ugd2l0aCBlbmhhbmNlZCBkYXRhXG4gIGNvbnN0IHRyYW5zZm9ybWVkUHJvZHVjdCA9IHtcbiAgICAuLi5wcm9kdWN0LFxuICAgIGNhdGVnb3J5X25hbWU6IHByb2R1Y3QuY2F0ZWdvcmllcz8ubmFtZSB8fCBudWxsLFxuICAgIGNhdGVnb3JpZXM6IHVuZGVmaW5lZCxcbiAgfVxuXG4gIHJldHVybiB0cmFuc2Zvcm1lZFByb2R1Y3Rcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHVuaXF1ZSBzbHVnXG5mdW5jdGlvbiBnZW5lcmF0ZVNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOVxccy1dL2csICcnKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxuICAgIC50cmltKClcbn1cblxuLyoqXG4gKiBHRVQgL2FwaS9hZG1pbi9wcm9kdWN0cy9baWRdIC0gRW50ZXJwcmlzZSBIYW5kbGVyXG4gKiBPYnRlbmVyIHByb2R1Y3RvIGVzcGVjw61maWNvIHBvciBJRCBjb24gbWlkZGxld2FyZSBlbnRlcnByaXNlXG4gKi9cbmNvbnN0IGdldEhhbmRsZXIgPSBhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9KSA9PiB7XG4gIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVlc3QgYXMgYW55XG4gIGNvbnN0IHByb2R1Y3RJZCA9IHBhcmFtcy5pZFxuXG4gIC8vIFZhbGlkYXIgcGFyw6FtZXRyb3NcbiAgY29uc3QgcGFyYW1zVmFsaWRhdGlvbiA9IFByb2R1Y3RQYXJhbXNTY2hlbWEuc2FmZVBhcnNlKHsgaWQ6IHByb2R1Y3RJZCB9KVxuICBpZiAoIXBhcmFtc1ZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0lEIGRlIHByb2R1Y3RvIGludsOhbGlkbycsIHBhcmFtc1ZhbGlkYXRpb24uZXJyb3IuZXJyb3JzKVxuICB9XG5cbiAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGdldFByb2R1Y3RCeUlkKHN1cGFiYXNlLCBwcm9kdWN0SWQpXG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBkYXRhOiBwcm9kdWN0LFxuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogJ1Byb2R1Y3RvIG9idGVuaWRvIGV4aXRvc2FtZW50ZScsXG4gIH0pXG59XG5cbi8qKlxuICogUFVUIC9hcGkvYWRtaW4vcHJvZHVjdHMvW2lkXSAtIEVudGVycHJpc2UgSGFuZGxlclxuICogQWN0dWFsaXphciBwcm9kdWN0byBlc3BlY8OtZmljbyBjb24gbWlkZGxld2FyZSBlbnRlcnByaXNlXG4gKi9cbmNvbnN0IHB1dEhhbmRsZXIgPSBhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9KSA9PiB7XG4gIGNvbnN0IHsgc3VwYWJhc2UsIHVzZXIsIHZhbGlkYXRlZERhdGEgfSA9IHJlcXVlc3QgYXMgYW55XG4gIGNvbnN0IHByb2R1Y3RJZCA9IHBhcmFtcy5pZFxuXG4gIC8vIFZhbGlkYXIgcGFyw6FtZXRyb3NcbiAgY29uc3QgcGFyYW1zVmFsaWRhdGlvbiA9IFByb2R1Y3RQYXJhbXNTY2hlbWEuc2FmZVBhcnNlKHsgaWQ6IHByb2R1Y3RJZCB9KVxuICBpZiAoIXBhcmFtc1ZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0lEIGRlIHByb2R1Y3RvIGludsOhbGlkbycsIHBhcmFtc1ZhbGlkYXRpb24uZXJyb3IuZXJyb3JzKVxuICB9XG5cbiAgLy8gVmVyaWZpY2FyIHF1ZSBlbCBwcm9kdWN0byBleGlzdGVcbiAgY29uc3QgZXhpc3RpbmdQcm9kdWN0ID0gYXdhaXQgZ2V0UHJvZHVjdEJ5SWQoc3VwYWJhc2UsIHByb2R1Y3RJZClcblxuICAvLyBWZXJpZmljYXIgY2F0ZWdvcsOtYSBzaSBzZSBlc3TDoSBhY3R1YWxpemFuZG9cbiAgaWYgKHZhbGlkYXRlZERhdGEuY2F0ZWdvcnlfaWQpIHtcbiAgICBjb25zdCB7IGRhdGE6IGNhdGVnb3J5LCBlcnJvcjogY2F0ZWdvcnlFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjYXRlZ29yaWVzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnaWQnLCB2YWxpZGF0ZWREYXRhLmNhdGVnb3J5X2lkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoY2F0ZWdvcnlFcnJvciB8fCAhY2F0ZWdvcnkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0NhdGVnb3LDrWEgbm8gZW5jb250cmFkYScpXG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhciBzbHVnIHNpIHNlIGFjdHVhbGl6YSBlbCBub21icmVcbiAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAuLi52YWxpZGF0ZWREYXRhLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfVxuXG4gIGlmICh2YWxpZGF0ZWREYXRhLm5hbWUpIHtcbiAgICB1cGRhdGVEYXRhLnNsdWcgPSBnZW5lcmF0ZVNsdWcodmFsaWRhdGVkRGF0YS5uYW1lKVxuICB9XG5cbiAgLy8gQWN0dWFsaXphciBwcm9kdWN0b1xuICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRQcm9kdWN0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgIC51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAuZXEoJ2lkJywgcHJvZHVjdElkKVxuICAgIC5zZWxlY3QoXG4gICAgICBgXG4gICAgICBpZCxcbiAgICAgIG5hbWUsXG4gICAgICBzbHVnLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBzaG9ydF9kZXNjcmlwdGlvbixcbiAgICAgIHByaWNlLFxuICAgICAgZGlzY291bnRlZF9wcmljZSxcbiAgICAgIHN0b2NrLFxuICAgICAgbG93X3N0b2NrX3RocmVzaG9sZCxcbiAgICAgIGNhdGVnb3J5X2lkLFxuICAgICAgYnJhbmQsXG4gICAgICBpbWFnZXMsXG4gICAgICBpc19hY3RpdmUsXG4gICAgICBpc19mZWF0dXJlZCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICB1cGRhdGVkX2F0LFxuICAgICAgY2F0ZWdvcmllcyAoXG4gICAgICAgIGlkLFxuICAgICAgICBuYW1lXG4gICAgICApXG4gICAgYFxuICAgIClcbiAgICAuc2luZ2xlKClcblxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgQXBpRXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgcHJvZHVjdG8nLCA1MDAsICdEQVRBQkFTRV9FUlJPUicsIGVycm9yKVxuICB9XG5cbiAgLy8gTG9nIGRlIGF1ZGl0b3LDrWFcbiAgYXdhaXQgbG9nQWRtaW5BY3Rpb24odXNlci5pZCwgJ1VQREFURScsICdwcm9kdWN0JywgcHJvZHVjdElkLCBleGlzdGluZ1Byb2R1Y3QsIHVwZGF0ZWRQcm9kdWN0KVxuXG4gIC8vIFRyYW5zZm9ybSByZXNwb25zZVxuICBjb25zdCB0cmFuc2Zvcm1lZFByb2R1Y3QgPSB7XG4gICAgLi4udXBkYXRlZFByb2R1Y3QsXG4gICAgY2F0ZWdvcnlfbmFtZTogdXBkYXRlZFByb2R1Y3QuY2F0ZWdvcmllcz8ubmFtZSB8fCBudWxsLFxuICAgIGNhdGVnb3JpZXM6IHVuZGVmaW5lZCxcbiAgfVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgZGF0YTogdHJhbnNmb3JtZWRQcm9kdWN0LFxuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogJ1Byb2R1Y3RvIGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZScsXG4gIH0pXG59XG5cbi8qKlxuICogREVMRVRFIC9hcGkvYWRtaW4vcHJvZHVjdHMvW2lkXSAtIEVudGVycHJpc2UgSGFuZGxlclxuICogRWxpbWluYXIgcHJvZHVjdG8gZXNwZWPDrWZpY28gY29uIG1pZGRsZXdhcmUgZW50ZXJwcmlzZVxuICovXG5jb25zdCBkZWxldGVIYW5kbGVyID0gYXN5bmMgKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfSkgPT4ge1xuICBjb25zdCB7IHN1cGFiYXNlLCB1c2VyIH0gPSByZXF1ZXN0IGFzIGFueVxuICBjb25zdCBwcm9kdWN0SWQgPSBwYXJhbXMuaWRcblxuICAvLyBWYWxpZGFyIHBhcsOhbWV0cm9zXG4gIGNvbnN0IHBhcmFtc1ZhbGlkYXRpb24gPSBQcm9kdWN0UGFyYW1zU2NoZW1hLnNhZmVQYXJzZSh7IGlkOiBwcm9kdWN0SWQgfSlcbiAgaWYgKCFwYXJhbXNWYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdJRCBkZSBwcm9kdWN0byBpbnbDoWxpZG8nLCBwYXJhbXNWYWxpZGF0aW9uLmVycm9yLmVycm9ycylcbiAgfVxuXG4gIC8vIFZlcmlmaWNhciBxdWUgZWwgcHJvZHVjdG8gZXhpc3RlXG4gIGNvbnN0IGV4aXN0aW5nUHJvZHVjdCA9IGF3YWl0IGdldFByb2R1Y3RCeUlkKHN1cGFiYXNlLCBwcm9kdWN0SWQpXG5cbiAgLy8gVmVyaWZpY2FyIHNpIGVsIHByb2R1Y3RvIGVzdMOhIHJlZmVyZW5jaWFkbyBlbiDDs3JkZW5lc1xuICBjb25zdCB7IGRhdGE6IG9yZGVySXRlbXMsIGVycm9yOiBvcmRlckNoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ29yZGVyX2l0ZW1zJylcbiAgICAuc2VsZWN0KCdpZCcpXG4gICAgLmVxKCdwcm9kdWN0X2lkJywgcHJvZHVjdElkKVxuICAgIC5saW1pdCgxKVxuXG4gIGlmIChvcmRlckNoZWNrRXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGNoZWNraW5nIG9yZGVyIHJlZmVyZW5jZXM6Jywgb3JkZXJDaGVja0Vycm9yKVxuICAgIC8vIENvbnRpbnVhciBjb24gZWxpbWluYWNpw7NuIGF1bnF1ZSBmYWxsZSBsYSB2ZXJpZmljYWNpw7NuXG4gIH1cblxuICBsZXQgZGVsZXRpb25SZXN1bHRcbiAgbGV0IGlzSGFyZERlbGV0ZSA9IGZhbHNlXG5cbiAgaWYgKG9yZGVySXRlbXMgJiYgb3JkZXJJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgLy8gU29mdCBkZWxldGU6IG1hcmNhciBjb21vIGluYWN0aXZvXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIHN0YXR1czogJ2luYWN0aXZlJyxcbiAgICAgICAgaXNfYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSlcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpXG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBBcGlFcnJvcignRXJyb3IgYWwgZWxpbWluYXIgcHJvZHVjdG8nLCA1MDAsICdEQVRBQkFTRV9FUlJPUicsIHVwZGF0ZUVycm9yKVxuICAgIH1cblxuICAgIGRlbGV0aW9uUmVzdWx0ID0ge1xuICAgICAgbWVzc2FnZTogJ1Byb2R1Y3RvIG1hcmNhZG8gY29tbyBpbmFjdGl2byAodGllbmUgw7NyZGVuZXMgYXNvY2lhZGFzKScsXG4gICAgICBzb2Z0X2RlbGV0ZTogdHJ1ZSxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSGFyZCBkZWxldGUgc2kgbm8gaGF5IHJlZmVyZW5jaWFzXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZHVjdHMnKS5kZWxldGUoKS5lcSgnaWQnLCBwcm9kdWN0SWQpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBBcGlFcnJvcignRXJyb3IgYWwgZWxpbWluYXIgcHJvZHVjdG8nLCA1MDAsICdEQVRBQkFTRV9FUlJPUicsIGVycm9yKVxuICAgIH1cblxuICAgIGlzSGFyZERlbGV0ZSA9IHRydWVcbiAgICBkZWxldGlvblJlc3VsdCA9IHtcbiAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0byBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJyxcbiAgICAgIGhhcmRfZGVsZXRlOiB0cnVlLFxuICAgIH1cbiAgfVxuXG4gIC8vIExvZyBkZSBhdWRpdG9yw61hXG4gIGF3YWl0IGxvZ0FkbWluQWN0aW9uKFxuICAgIHVzZXIuaWQsXG4gICAgaXNIYXJkRGVsZXRlID8gJ0RFTEVURScgOiAnU09GVF9ERUxFVEUnLFxuICAgICdwcm9kdWN0JyxcbiAgICBwcm9kdWN0SWQsXG4gICAgZXhpc3RpbmdQcm9kdWN0LFxuICAgIG51bGxcbiAgKVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgLi4uZGVsZXRpb25SZXN1bHQsXG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgfSlcbn1cblxuLy8gQXBsaWNhciBtaWRkbGV3YXJlcyBlbnRlcnByaXNlIHkgZXhwb3J0YXIgaGFuZGxlcnNcbmV4cG9ydCBjb25zdCBHRVQgPSBjb21wb3NlTWlkZGxld2FyZXMoXG4gIHdpdGhFcnJvckhhbmRsZXIsXG4gIHdpdGhBcGlMb2dnaW5nLFxuICB3aXRoQWRtaW5BdXRoKFsncHJvZHVjdHNfcmVhZCddKVxuKShnZXRIYW5kbGVyKVxuXG5leHBvcnQgY29uc3QgUFVUID0gY29tcG9zZU1pZGRsZXdhcmVzKFxuICB3aXRoRXJyb3JIYW5kbGVyLFxuICB3aXRoQXBpTG9nZ2luZyxcbiAgd2l0aEFkbWluQXV0aChbJ3Byb2R1Y3RzX3VwZGF0ZSddKSxcbiAgd2l0aFZhbGlkYXRpb24oVXBkYXRlUHJvZHVjdFNjaGVtYSlcbikocHV0SGFuZGxlcilcblxuZXhwb3J0IGNvbnN0IERFTEVURSA9IGNvbXBvc2VNaWRkbGV3YXJlcyhcbiAgd2l0aEVycm9ySGFuZGxlcixcbiAgd2l0aEFwaUxvZ2dpbmcsXG4gIHdpdGhBZG1pbkF1dGgoWydwcm9kdWN0c19kZWxldGUnXSlcbikoZGVsZXRlSGFuZGxlcilcbiJdLCJuYW1lcyI6WyJERUxFVEUiLCJHRVQiLCJQVVQiLCJVcGRhdGVQcm9kdWN0U2NoZW1hIiwieiIsIm9iamVjdCIsIm5hbWUiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJvcHRpb25hbCIsImRlc2NyaXB0aW9uIiwic2hvcnRfZGVzY3JpcHRpb24iLCJwcmljZSIsIm51bWJlciIsImRpc2NvdW50ZWRfcHJpY2UiLCJzdG9jayIsImxvd19zdG9ja190aHJlc2hvbGQiLCJjYXRlZ29yeV9pZCIsInV1aWQiLCJicmFuZCIsImltYWdlcyIsImFycmF5IiwidXJsIiwiYWx0X3RleHQiLCJpc19wcmltYXJ5IiwiYm9vbGVhbiIsImRlZmF1bHQiLCJpc19hY3RpdmUiLCJpc19mZWF0dXJlZCIsInN0YXR1cyIsImVudW0iLCJQcm9kdWN0UGFyYW1zU2NoZW1hIiwiaWQiLCJnZXRQcm9kdWN0QnlJZCIsInN1cGFiYXNlIiwicHJvZHVjdElkIiwiZGF0YSIsInByb2R1Y3QiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIk5vdEZvdW5kRXJyb3IiLCJ0cmFuc2Zvcm1lZFByb2R1Y3QiLCJjYXRlZ29yeV9uYW1lIiwiY2F0ZWdvcmllcyIsInVuZGVmaW5lZCIsImdlbmVyYXRlU2x1ZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInRyaW0iLCJnZXRIYW5kbGVyIiwicmVxdWVzdCIsInBhcmFtcyIsInBhcmFtc1ZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiVmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsIm1lc3NhZ2UiLCJwdXRIYW5kbGVyIiwidXNlciIsInZhbGlkYXRlZERhdGEiLCJleGlzdGluZ1Byb2R1Y3QiLCJjYXRlZ29yeSIsImNhdGVnb3J5RXJyb3IiLCJ1cGRhdGVEYXRhIiwidXBkYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNsdWciLCJ1cGRhdGVkUHJvZHVjdCIsInVwZGF0ZSIsIkFwaUVycm9yIiwibG9nQWRtaW5BY3Rpb24iLCJkZWxldGVIYW5kbGVyIiwib3JkZXJJdGVtcyIsIm9yZGVyQ2hlY2tFcnJvciIsImxpbWl0IiwiY29uc29sZSIsIndhcm4iLCJkZWxldGlvblJlc3VsdCIsImlzSGFyZERlbGV0ZSIsImxlbmd0aCIsInVwZGF0ZUVycm9yIiwic29mdF9kZWxldGUiLCJkZWxldGUiLCJoYXJkX2RlbGV0ZSIsImNvbXBvc2VNaWRkbGV3YXJlcyIsIndpdGhFcnJvckhhbmRsZXIiLCJ3aXRoQXBpTG9nZ2luZyIsIndpdGhBZG1pbkF1dGgiLCJ3aXRoVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUE0VGFBO2VBQUFBOztRQWJBQztlQUFBQTs7UUFNQUM7ZUFBQUE7Ozt3QkFyVDZCOzJCQUMyQjtxQkFHbkQ7OEJBR2U7MkJBQ0Y7bUNBQ0Q7OEJBQ0M7b0NBQ0k7QUFFbkMscUJBQXFCO0FBQ3JCLE1BQU1DLHNCQUFzQkMsTUFBQyxDQUFDQyxNQUFNLENBQUM7SUFDbkNDLE1BQU1GLE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRywwQkFBMEJDLEdBQUcsQ0FBQyxLQUFLLHlCQUF5QkMsUUFBUTtJQUM1RkMsYUFBYVAsTUFBQyxDQUFDRyxNQUFNLEdBQUdHLFFBQVE7SUFDaENFLG1CQUFtQlIsTUFBQyxDQUFDRyxNQUFNLEdBQUdFLEdBQUcsQ0FBQyxLQUFLLHlCQUF5QkMsUUFBUTtJQUN4RUcsT0FBT1QsTUFBQyxDQUFDVSxNQUFNLEdBQUdOLEdBQUcsQ0FBQyxHQUFHLGdDQUFnQ0UsUUFBUTtJQUNqRUssa0JBQWtCWCxNQUFDLENBQUNVLE1B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