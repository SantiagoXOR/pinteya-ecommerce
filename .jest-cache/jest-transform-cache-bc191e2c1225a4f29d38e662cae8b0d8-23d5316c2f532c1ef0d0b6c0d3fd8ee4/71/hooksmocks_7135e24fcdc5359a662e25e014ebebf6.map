{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\__mocks__\\hooks-mocks.ts"],"sourcesContent":["// ===================================\n// MOCKS CENTRALIZADOS PARA HOOKS - PINTEYA E-COMMERCE\n// ===================================\n\n/**\n * Mocks especializados para hooks del proyecto\n * Incluye estados realistas y funciones mock completas\n */\n\nimport { mockProducts, mockCategories, mockOrders } from './api-mocks'\n\n// ===================================\n// MOCKS PARA useProducts\n// ===================================\n\nexport const mockUseProductsState = {\n  // Estado inicial\n  initial: {\n    products: [],\n    loading: true,\n    error: null,\n    pagination: {\n      page: 1,\n      limit: 12,\n      total: 0,\n      totalPages: 0,\n    },\n    filters: {},\n    hasProducts: false,\n    isEmpty: false,\n    hasError: false,\n    hasNextPage: false,\n    hasPrevPage: false,\n  },\n\n  // Estado con productos cargados\n  loaded: {\n    products: mockProducts,\n    loading: false,\n    error: null,\n    pagination: {\n      page: 1,\n      limit: 12,\n      total: mockProducts.length,\n      totalPages: 1,\n    },\n    filters: {},\n    hasProducts: true,\n    isEmpty: false,\n    hasError: false,\n    hasNextPage: false,\n    hasPrevPage: false,\n  },\n\n  // Estado con error\n  error: {\n    products: [],\n    loading: false,\n    error: 'Error obteniendo productos',\n    pagination: {\n      page: 1,\n      limit: 12,\n      total: 0,\n      totalPages: 0,\n    },\n    filters: {},\n    hasProducts: false,\n    isEmpty: true,\n    hasError: true,\n    hasNextPage: false,\n    hasPrevPage: false,\n  },\n\n  // Estado cargando\n  loading: {\n    products: [],\n    loading: true,\n    error: null,\n    pagination: {\n      page: 1,\n      limit: 12,\n      total: 0,\n      totalPages: 0,\n    },\n    filters: {},\n    hasProducts: false,\n    isEmpty: false,\n    hasError: false,\n    hasNextPage: false,\n    hasPrevPage: false,\n  },\n}\n\nexport const mockUseProductsFunctions = {\n  fetchProducts: jest.fn(),\n  updateFilters: jest.fn(),\n  changePage: jest.fn(),\n  changeLimit: jest.fn(),\n  changeSorting: jest.fn(),\n  searchProducts: jest.fn(),\n  filterByCategory: jest.fn(),\n  filterByPriceRange: jest.fn(),\n  clearFilters: jest.fn(),\n  refresh: jest.fn(),\n}\n\nexport function createMockUseProducts(state = mockUseProductsState.loaded) {\n  return {\n    ...state,\n    ...mockUseProductsFunctions,\n  }\n}\n\n// ===================================\n// MOCKS PARA useSearchErrorHandler\n// ===================================\n\nexport const mockUseSearchErrorHandlerState = {\n  // Estado inicial\n  initial: {\n    currentError: null,\n    retryCount: 0,\n    isRetrying: false,\n    hasError: false,\n    retryConfig: {\n      maxRetries: 3,\n      baseDelay: 1000,\n      maxDelay: 10000,\n      backoffFactor: 2,\n    },\n  },\n\n  // Estado con error\n  withError: {\n    currentError: {\n      type: 'network' as const,\n      message: 'Error de conexión. Verifica tu conexión a internet.',\n      retryable: true,\n      timestamp: Date.now(),\n    },\n    retryCount: 0,\n    isRetrying: false,\n    hasError: true,\n    retryConfig: {\n      maxRetries: 3,\n      baseDelay: 1000,\n      maxDelay: 10000,\n      backoffFactor: 2,\n    },\n  },\n\n  // Estado reintentando\n  retrying: {\n    currentError: {\n      type: 'server' as const,\n      message: 'Error del servidor. Intenta nuevamente en unos momentos.',\n      retryable: true,\n      timestamp: Date.now(),\n    },\n    retryCount: 1,\n    isRetrying: true,\n    hasError: true,\n    retryConfig: {\n      maxRetries: 3,\n      baseDelay: 1000,\n      maxDelay: 10000,\n      backoffFactor: 2,\n    },\n  },\n}\n\nexport const mockUseSearchErrorHandlerFunctions = {\n  handleError: jest.fn(),\n  executeWithRetry: jest.fn(),\n  clearError: jest.fn(),\n  retryManually: jest.fn(),\n}\n\nexport function createMockUseSearchErrorHandler(state = mockUseSearchErrorHandlerState.initial) {\n  return {\n    ...state,\n    ...mockUseSearchErrorHandlerFunctions,\n  }\n}\n\n// ===================================\n// MOCKS PARA useCart\n// ===================================\n\nexport const mockCartItems = [\n  {\n    id: 1,\n    product: mockProducts[0],\n    quantity: 2,\n    price: mockProducts[0].discounted_price || mockProducts[0].price,\n    subtotal: (mockProducts[0].discounted_price || mockProducts[0].price) * 2,\n  },\n  {\n    id: 2,\n    product: mockProducts[1],\n    quantity: 1,\n    price: mockProducts[1].price,\n    subtotal: mockProducts[1].price,\n  },\n]\n\nexport const mockUseCartState = {\n  // Carrito vacío\n  empty: {\n    items: [],\n    itemCount: 0,\n    total: 0,\n    subtotal: 0,\n    tax: 0,\n    shipping: 0,\n    isEmpty: true,\n    isLoading: false,\n  },\n\n  // Carrito con items\n  withItems: {\n    items: mockCartItems,\n    itemCount: mockCartItems.reduce((sum, item) => sum + item.quantity, 0),\n    total: mockCartItems.reduce((sum, item) => sum + item.subtotal, 0),\n    subtotal: mockCartItems.reduce((sum, item) => sum + item.subtotal, 0),\n    tax: 0,\n    shipping: 0,\n    isEmpty: false,\n    isLoading: false,\n  },\n}\n\nexport const mockUseCartFunctions = {\n  addItem: jest.fn(),\n  removeItem: jest.fn(),\n  updateQuantity: jest.fn(),\n  clearCart: jest.fn(),\n  getItemQuantity: jest.fn(),\n  isInCart: jest.fn(),\n}\n\nexport function createMockUseCart(state = mockUseCartState.empty) {\n  return {\n    ...state,\n    ...mockUseCartFunctions,\n  }\n}\n\n// ===================================\n// MOCKS PARA useAuth (NextAuth)\n// ===================================\n\nexport const mockUser = {\n  id: 'user_123',\n  name: 'Juan Pérez',\n  email: 'juan.perez@example.com',\n  image: '/images/avatars/user-123.jpg',\n  role: 'customer',\n}\n\nexport const mockSession = {\n  user: mockUser,\n  expires: '2024-12-31T23:59:59.999Z',\n}\n\nexport const mockUseSessionState = {\n  // No autenticado\n  unauthenticated: {\n    data: null,\n    status: 'unauthenticated' as const,\n  },\n\n  // Autenticado\n  authenticated: {\n    data: mockSession,\n    status: 'authenticated' as const,\n  },\n\n  // Cargando\n  loading: {\n    data: null,\n    status: 'loading' as const,\n  },\n}\n\nexport function createMockUseSession(state = mockUseSessionState.unauthenticated) {\n  return state\n}\n\n// ===================================\n// MOCKS PARA useGeolocation\n// ===================================\n\nexport const mockGeolocationState = {\n  // Estado inicial\n  initial: {\n    location: null,\n    loading: false,\n    error: null,\n    supported: true,\n  },\n\n  // Ubicación obtenida\n  located: {\n    location: {\n      latitude: -34.6037,\n      longitude: -58.3816,\n      accuracy: 10,\n      timestamp: Date.now(),\n    },\n    loading: false,\n    error: null,\n    supported: true,\n  },\n\n  // Error de geolocalización\n  error: {\n    location: null,\n    loading: false,\n    error: 'Geolocation permission denied',\n    supported: true,\n  },\n\n  // No soportado\n  unsupported: {\n    location: null,\n    loading: false,\n    error: 'Geolocation not supported',\n    supported: false,\n  },\n}\n\nexport const mockUseGeolocationFunctions = {\n  getCurrentLocation: jest.fn(),\n  watchPosition: jest.fn(),\n  clearWatch: jest.fn(),\n}\n\nexport function createMockUseGeolocation(state = mockGeolocationState.initial) {\n  return {\n    ...state,\n    ...mockUseGeolocationFunctions,\n  }\n}\n\n// ===================================\n// SETUP HELPER PARA HOOKS\n// ===================================\n\n/**\n * Configura mocks para múltiples hooks en tests\n */\nexport function setupHooksMocks() {\n  // Mock useProducts\n  const mockUseProducts = jest.fn(() => createMockUseProducts())\n\n  // Mock useSearchErrorHandler\n  const mockUseSearchErrorHandler = jest.fn(() => createMockUseSearchErrorHandler())\n\n  // Mock useCart\n  const mockUseCart = jest.fn(() => createMockUseCart())\n\n  // Mock useSession\n  const mockUseSession = jest.fn(() => createMockUseSession())\n\n  // Mock useGeolocation\n  const mockUseGeolocation = jest.fn(() => createMockUseGeolocation())\n\n  return {\n    mockUseProducts,\n    mockUseSearchErrorHandler,\n    mockUseCart,\n    mockUseSession,\n    mockUseGeolocation,\n    resetAllMocks: () => {\n      jest.clearAllMocks()\n      mockUseProducts.mockReturnValue(createMockUseProducts())\n      mockUseSearchErrorHandler.mockReturnValue(createMockUseSearchErrorHandler())\n      mockUseCart.mockReturnValue(createMockUseCart())\n      mockUseSession.mockReturnValue(createMockUseSession())\n      mockUseGeolocation.mockReturnValue(createMockUseGeolocation())\n    },\n  }\n}\n"],"names":["createMockUseCart","createMockUseGeolocation","createMockUseProducts","createMockUseSearchErrorHandler","createMockUseSession","mockCartItems","mockGeolocationState","mockSession","mockUseCartFunctions","mockUseCartState","mockUseGeolocationFunctions","mockUseProductsFunctions","mockUseProductsState","mockUseSearchErrorHandlerFunctions","mockUseSearchErrorHandlerState","mockUseSessionState","mockUser","setupHooksMocks","initial","products","loading","error","pagination","page","limit","total","totalPages","filters","hasProducts","isEmpty","hasError","hasNextPage","hasPrevPage","loaded","mockProducts","length","fetchProducts","jest","fn","updateFilters","changePage","changeLimit","changeSorting","searchProducts","filterByCategory","filterByPriceRange","clearFilters","refresh","state","currentError","retryCount","isRetrying","retryConfig","maxRetries","baseDelay","maxDelay","backoffFactor","withError","type","message","retryable","timestamp","Date","now","retrying","handleError","executeWithRetry","clearError","retryManually","id","product","quantity","price","discounted_price","subtotal","empty","items","itemCount","tax","shipping","isLoading","withItems","reduce","sum","item","addItem","removeItem","updateQuantity","clearCart","getItemQuantity","isInCart","name","email","image","role","user","expires","unauthenticated","data","status","authenticated","location","supported","located","latitude","longitude","accuracy","unsupported","getCurrentLocation","watchPosition","clearWatch","mockUseProducts","mockUseSearchErrorHandler","mockUseCart","mockUseSession","mockUseGeolocation","resetAllMocks","clearAllMocks","mockReturnValue"],"mappings":"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"}