{"version":3,"names":["cov_1ser9ghalg","actualCoverage","s","CartPersistenceProvider","f","default","_default","children","dispatch","_store","useAppDispatch","cartItems","useAppSelector","_cartslice","selectCartItems","_react","useEffect","window","b","persistedItems","_cartPersistence","loadCartFromStorage","length","hydrateCart","process","env","NODE_ENV","error","console","warn","_jsxruntime","jsx","Fragment"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\providers\\CartPersistenceProvider.tsx"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - CART PERSISTENCE PROVIDER\r\n// ===================================\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '@/redux/store';\r\nimport { selectCartItems, hydrateCart } from '@/redux/features/cart-slice';\r\nimport { loadCartFromStorage } from '@/redux/middleware/cartPersistence';\r\n\r\ninterface CartPersistenceProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n// Provider simplificado para manejar la persistencia del carrito\r\nexport const CartPersistenceProvider: React.FC<CartPersistenceProviderProps> = ({\r\n  children\r\n}) => {\r\n  const dispatch = useAppDispatch();\r\n  const cartItems = useAppSelector(selectCartItems);\r\n\r\n  // Efecto para cargar carrito desde localStorage SOLO al inicializar\r\n  useEffect(() => {\r\n    // Solo ejecutar en el cliente\r\n    if (typeof window === 'undefined') {return;}\r\n\r\n    try {\r\n      const persistedItems = loadCartFromStorage();\r\n      if (persistedItems.length > 0 && cartItems.length === 0) {\r\n        dispatch(hydrateCart(persistedItems));\r\n\r\n        // Log para debugging (remover en producción)\r\n        if (process.env.NODE_ENV === 'development') {\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading cart from localStorage:', error);\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch]); // Removido cartItems.length para evitar rehidratación no deseada\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default CartPersistenceProvider;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}