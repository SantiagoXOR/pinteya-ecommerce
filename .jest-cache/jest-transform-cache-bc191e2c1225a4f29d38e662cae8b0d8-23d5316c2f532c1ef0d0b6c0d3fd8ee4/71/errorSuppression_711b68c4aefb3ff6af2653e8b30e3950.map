{"version":3,"names":["errorSuppressionMiddleware","cov_1ru0fg7och","f","s","restoreOriginalConsoleFunctions","suppressServerErrors","request","response","_server","NextResponse","next","headers","set","suppressedErrorPatterns","originalConsoleError","console","error","window","b"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\middleware\\errorSuppression.ts"],"sourcesContent":["// ===================================\r\n// MIDDLEWARE: Error Suppression\r\n// ===================================\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\n/**\r\n * Middleware para suprimir errores ERR_ABORTED y mejorar el manejo de errores de red\r\n */\r\nexport function errorSuppressionMiddleware(request: NextRequest) {\r\n  const response = NextResponse.next();\r\n\r\n  // Configurar headers para mejorar el manejo de errores de red\r\n  response.headers.set('Connection', 'keep-alive');\r\n  response.headers.set('Keep-Alive', 'timeout=5, max=1000');\r\n  \r\n  // Headers para prevenir problemas de CORS que pueden causar ERR_ABORTED\r\n  response.headers.set('Access-Control-Allow-Origin', '*');\r\n  response.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\r\n  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');\r\n  \r\n  // Headers para mejorar la estabilidad de la conexión\r\n  response.headers.set('Cache-Control', 'no-cache, no-store, must-revalidate');\r\n  response.headers.set('Pragma', 'no-cache');\r\n  response.headers.set('Expires', '0');\r\n  \r\n  return response;\r\n}\r\n\r\n/**\r\n * Función para interceptar y suprimir errores específicos en el servidor\r\n */\r\nexport function suppressServerErrors() {\r\n  // Lista de patrones de errores a suprimir\r\n  const suppressedErrorPatterns = [\r\n    'ERR_ABORTED',\r\n    'AbortError',\r\n    'The user aborted a request',\r\n    'Request was aborted',\r\n    'net::ERR_ABORTED',\r\n    'Failed to fetch',\r\n    'NetworkError when attempting to fetch resource',\r\n    'Load failed',\r\n    'Connection was aborted',\r\n    'The operation was aborted',\r\n    'Request timeout'\r\n  ];\r\n\r\n  // TEMPORALMENTE DESHABILITADO PARA DEBUG\r\n  // Interceptar console.error en el servidor\r\n  const originalConsoleError = console.error;\r\n  /*\r\n  console.error = (...args: any[]) => {\r\n    const message = args.join(' ');\r\n    \r\n    // Verificar si el error debe ser suprimido\r\n    const shouldSuppress = suppressedErrorPatterns.some(pattern => \r\n      message.toLowerCase().includes(pattern.toLowerCase())\r\n    );\r\n    \r\n    if (shouldSuppress) {\r\n      // En desarrollo, mostrar como debug\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.debug('🔇 [Server Suppressed Error]:', ...args);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // Permitir otros errores\r\n    originalConsoleError(...args);\r\n  };\r\n\r\n  // Interceptar console.warn en el servidor\r\n  const originalConsoleWarn = console.warn;\r\n  console.warn = (...args: any[]) => {\r\n    const message = args.join(' ');\r\n    \r\n    // Verificar si el warning debe ser suprimido\r\n    const shouldSuppress = suppressedErrorPatterns.some(pattern => \r\n      message.toLowerCase().includes(pattern.toLowerCase())\r\n    );\r\n    \r\n    if (shouldSuppress) {\r\n      // En desarrollo, mostrar como debug\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.debug('🔇 [Server Suppressed Warning]:', ...args);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // Permitir otros warnings\r\n    originalConsoleWarn(...args);\r\n  };\r\n  */\r\n}\r\n\r\n/**\r\n * Configuración de cleanup para restaurar funciones originales\r\n */\r\nexport function restoreOriginalConsoleFunctions() {\r\n  // Esta función puede ser llamada para restaurar las funciones originales si es necesario\r\n  // En la mayoría de casos no es necesario llamarla\r\n}\r\n\r\n// Inicializar supresión de errores del servidor automáticamente\r\nif (typeof window === 'undefined') {\r\n  suppressServerErrors();\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}