{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Header\\__tests__\\unit\\AuthSection.unit.test.tsx"],"sourcesContent":["/**\n * Test simplificado para AuthSection con NextAuth\n * Enfocado en validar la funcionalidad core sin complejidades\n */\n\nimport React from 'react'\nimport { render, screen, fireEvent } from '@testing-library/react'\nimport { useSession, signIn } from 'next-auth/react'\nimport AuthSection from '../../AuthSection'\n\n// Mock NextAuth\njest.mock('next-auth/react', () => ({\n  useSession: jest.fn(),\n  signIn: jest.fn(),\n}))\n\nconst mockUseSession = useSession as jest.MockedFunction<typeof useSession>\nconst mockSignIn = signIn as jest.MockedFunction<typeof signIn>\n\n// Mock user data\nconst mockUser = {\n  id: 'user_123',\n  name: 'Juan Pérez',\n  email: 'juan@example.com',\n}\n\ndescribe('AuthSection - Simplified Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  describe('Unauthenticated State', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should render sign in button when unauthenticated', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toBeInTheDocument()\n      expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30')\n    })\n\n    it('should render Google icon in button', () => {\n      render(<AuthSection />)\n\n      const svg = screen.getByRole('button').querySelector('svg')\n      expect(svg).toBeInTheDocument()\n      expect(svg).toHaveClass('w-5', 'h-5')\n    })\n\n    it('should call signIn when button is clicked', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      fireEvent.click(button)\n\n      expect(mockSignIn).toHaveBeenCalledWith('google')\n    })\n\n    it('should have correct CSS classes for translucent button', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toHaveClass(\n        'relative',\n        'bg-white/20',\n        'hover:bg-white/30',\n        'backdrop-blur-sm',\n        'border-2',\n        'border-white/30',\n        'rounded-full'\n      )\n    })\n  })\n\n  describe('Authenticated State', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should render admin link when authenticated', () => {\n      render(<AuthSection />)\n\n      const adminLink = screen.getByRole('link')\n      expect(adminLink).toBeInTheDocument()\n      expect(adminLink).toHaveAttribute('href', '/admin')\n    })\n\n    it('should render user avatar when authenticated', () => {\n      render(<AuthSection />)\n\n      const avatar = screen.getByText('J') // First letter of Juan\n      expect(avatar).toBeInTheDocument()\n    })\n\n    it('should have admin button with correct styling', () => {\n      render(<AuthSection />)\n\n      const adminLink = screen.getByRole('link')\n      expect(adminLink).toHaveClass('bg-orange-600', 'hover:bg-orange-700', 'text-white')\n    })\n  })\n\n  describe('Loading State', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'loading',\n      } as any)\n    })\n\n    it('should render loading skeleton', () => {\n      render(<AuthSection />)\n\n      const skeleton = screen.getByText((content, element) => {\n        return element?.classList.contains('animate-pulse') || false\n      })\n      expect(skeleton).toHaveClass('animate-pulse')\n    })\n  })\n\n  describe('Variants', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should render mobile variant correctly', () => {\n      render(<AuthSection variant='mobile' />)\n\n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('hover:scale-110')\n    })\n\n    it('should render topbar variant with text', () => {\n      render(<AuthSection variant='topbar' />)\n\n      const button = screen.getByText('Iniciar Sesión')\n      expect(button).toBeInTheDocument()\n      expect(button).toHaveClass('text-gray-800')\n    })\n\n    it('should render default variant correctly', () => {\n      render(<AuthSection variant='default' />)\n\n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('hover:scale-105')\n    })\n  })\n\n  describe('Accessibility', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should be keyboard accessible', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toBeInTheDocument()\n\n      // Button should be focusable\n      button.focus()\n      expect(document.activeElement).toBe(button)\n    })\n\n    it('should have proper button role', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toBeInTheDocument()\n    })\n  })\n\n  describe('Visual Consistency', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should maintain consistent icon size across variants', () => {\n      const variants = ['default', 'mobile'] as const\n\n      variants.forEach(variant => {\n        const { unmount } = render(<AuthSection variant={variant} />)\n\n        const svg = screen.getByRole('button').querySelector('svg')\n        expect(svg).toHaveClass('w-5', 'h-5')\n\n        unmount()\n      })\n    })\n\n    it('should have hover effects', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('hover:bg-white/30')\n    })\n\n    it('should have transform effects', () => {\n      render(<AuthSection />)\n\n      const button = screen.getByRole('button')\n      expect(button).toHaveClass('transform', 'hover:scale-105')\n    })\n  })\n\n  describe('Google Branding', () => {\n    beforeEach(() => {\n      mockUseSession.mockReturnValue({\n        data: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should have Google colors in SVG paths', () => {\n      render(<AuthSection />)\n\n      const svg = screen.getByRole('button').querySelector('svg')\n      const paths = svg?.querySelectorAll('path')\n\n      expect(paths).toHaveLength(4)\n\n      // Check for Google brand colors\n      const colors = Array.from(paths || []).map(path => path.getAttribute('fill'))\n      expect(colors).toContain('#4285F4') // Google Blue\n      expect(colors).toContain('#34A853') // Google Green\n      expect(colors).toContain('#FBBC05') // Google Yellow\n      expect(colors).toContain('#EA4335') // Google Red\n    })\n  })\n})\n"],"names":["jest","mock","useSession","fn","signIn","mockUseSession","mockSignIn","mockUser","id","name","email","describe","beforeEach","clearAllMocks","mockReturnValue","data","status","it","render","AuthSection","button","screen","getByRole","expect","toBeInTheDocument","toHaveClass","svg","querySelector","fireEvent","click","toHaveBeenCalledWith","user","adminLink","toHaveAttribute","avatar","getByText","skeleton","content","element","classList","contains","variant","focus","document","activeElement","toBe","variants","forEach","unmount","paths","querySelectorAll","toHaveLength","colors","Array","from","map","path","getAttribute","toContain"],"mappings":"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"}