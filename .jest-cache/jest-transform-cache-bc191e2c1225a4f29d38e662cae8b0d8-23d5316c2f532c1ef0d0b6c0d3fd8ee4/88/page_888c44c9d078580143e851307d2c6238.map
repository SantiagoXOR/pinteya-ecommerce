{"version":3,"names":["NewProductPage","createProduct","data","cov_20ay42e5ya","f","s","console","log","response","fetch","method","headers","body","JSON","stringify","result","json","ok","b","Error","error","router","_navigation","useRouter","queryClient","_reactquery","useQueryClient","createProductMutation","useMutation","mutationFn","onSuccess","invalidateQueries","queryKey","_reacthottoast","toast","success","push","id","onError","message","handleSubmit","mutateAsync","handleCancel","breadcrumbs","label","href","_jsxruntime","jsx","_AdminLayout","AdminLayout","title","_ProductForm","ProductForm","mode","onSubmit","onCancel","isLoading","isPending"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\admin\\products\\new\\page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { AdminLayout } from '@/components/admin/layout/AdminLayout';\r\nimport { ProductForm } from '@/components/admin/products/ProductForm';\r\nimport { toast } from 'react-hot-toast';\r\n\r\ninterface ProductFormData {\r\n  name: string;\r\n  description?: string;\r\n  short_description?: string;\r\n  category_id: string;\r\n  status: 'active' | 'inactive' | 'draft';\r\n  price: number;\r\n  compare_price?: number;\r\n  cost_price?: number;\r\n  track_inventory: boolean;\r\n  stock: number;\r\n  low_stock_threshold?: number;\r\n  allow_backorder: boolean;\r\n  seo_title?: string;\r\n  seo_description?: string;\r\n  slug?: string;\r\n  images?: Array<{\r\n    url: string;\r\n    alt?: string;\r\n    is_primary?: boolean;\r\n  }>;\r\n  variants?: Array<{\r\n    name: string;\r\n    options: string[];\r\n  }>;\r\n}\r\n\r\n// API function to create product (USANDO API SIMPLIFICADA)\r\nasync function createProduct(data: ProductFormData) {\r\n  console.log('🚀 Creating product with data:', data);\r\n\r\n  const response = await fetch('/api/admin/products', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n\r\n  const result = await response.json();\r\n  console.log('📝 API Response:', result);\r\n\r\n  if (!response.ok) {\r\n    throw new Error(result.error || 'Error al crear producto');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport default function NewProductPage() {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Create product mutation\r\n  const createProductMutation = useMutation({\r\n    mutationFn: createProduct,\r\n    onSuccess: (data) => {\r\n      // Invalidate products list\r\n      queryClient.invalidateQueries({ queryKey: ['admin-products'] });\r\n      \r\n      // Show success message\r\n      toast.success('Producto creado exitosamente');\r\n      \r\n      // Redirect to product detail or list\r\n      router.push(`/admin/products/${data.data.id}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async (data: ProductFormData) => {\r\n    await createProductMutation.mutateAsync(data);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push('/admin/products');\r\n  };\r\n\r\n  const breadcrumbs = [\r\n    { label: 'Admin', href: '/admin' },\r\n    { label: 'Productos', href: '/admin/products' },\r\n    { label: 'Nuevo Producto' },\r\n  ];\r\n\r\n  return (\r\n    <AdminLayout\r\n      title=\"Crear Nuevo Producto\"\r\n      breadcrumbs={breadcrumbs}\r\n    >\r\n      <ProductForm\r\n        mode=\"create\"\r\n        onSubmit={handleSubmit}\r\n        onCancel={handleCancel}\r\n        isLoading={createProductMutation.isPending}\r\n      />\r\n    </AdminLayout>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}