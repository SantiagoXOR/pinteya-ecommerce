dfcf42088d5888532651770cebf7783d
'use client';
"use strict";

/* istanbul ignore next */
function cov_20ay42e5ya() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\admin\\products\\new\\page.tsx";
  var hash = "9feb75e328e4e3bb5aa7b51b1468ea8ffae4ec57";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\admin\\products\\new\\page.tsx",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 0
        },
        end: {
          line: 11,
          column: 3
        }
      },
      "2": {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 9,
          column: 30
        }
      },
      "3": {
        start: {
          line: 12,
          column: 20
        },
        end: {
          line: 12,
          column: 48
        }
      },
      "4": {
        start: {
          line: 13,
          column: 20
        },
        end: {
          line: 13,
          column: 46
        }
      },
      "5": {
        start: {
          line: 14,
          column: 20
        },
        end: {
          line: 14,
          column: 52
        }
      },
      "6": {
        start: {
          line: 15,
          column: 21
        },
        end: {
          line: 15,
          column: 79
        }
      },
      "7": {
        start: {
          line: 16,
          column: 21
        },
        end: {
          line: 16,
          column: 81
        }
      },
      "8": {
        start: {
          line: 17,
          column: 23
        },
        end: {
          line: 17,
          column: 49
        }
      },
      "9": {
        start: {
          line: 20,
          column: 4
        },
        end: {
          line: 20,
          column: 56
        }
      },
      "10": {
        start: {
          line: 21,
          column: 21
        },
        end: {
          line: 27,
          column: 6
        }
      },
      "11": {
        start: {
          line: 28,
          column: 19
        },
        end: {
          line: 28,
          column: 40
        }
      },
      "12": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 44
        }
      },
      "13": {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 32,
          column: 5
        }
      },
      "14": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 67
        }
      },
      "15": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 33,
          column: 27
        }
      },
      "16": {
        start: {
          line: 36,
          column: 19
        },
        end: {
          line: 36,
          column: 47
        }
      },
      "17": {
        start: {
          line: 37,
          column: 24
        },
        end: {
          line: 37,
          column: 57
        }
      },
      "18": {
        start: {
          line: 39,
          column: 34
        },
        end: {
          line: 56,
          column: 6
        }
      },
      "19": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 47,
          column: 15
        }
      },
      "20": {
        start: {
          line: 49,
          column: 12
        },
        end: {
          line: 49,
          column: 73
        }
      },
      "21": {
        start: {
          line: 51,
          column: 12
        },
        end: {
          line: 51,
          column: 59
        }
      },
      "22": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 54,
          column: 54
        }
      },
      "23": {
        start: {
          line: 57,
          column: 25
        },
        end: {
          line: 59,
          column: 5
        }
      },
      "24": {
        start: {
          line: 58,
          column: 8
        },
        end: {
          line: 58,
          column: 54
        }
      },
      "25": {
        start: {
          line: 60,
          column: 25
        },
        end: {
          line: 62,
          column: 5
        }
      },
      "26": {
        start: {
          line: 61,
          column: 8
        },
        end: {
          line: 61,
          column: 39
        }
      },
      "27": {
        start: {
          line: 63,
          column: 24
        },
        end: {
          line: 75,
          column: 5
        }
      },
      "28": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 85,
          column: 7
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 9
          },
          end: {
            line: 8,
            column: 10
          }
        },
        loc: {
          start: {
            line: 8,
            column: 20
          },
          end: {
            line: 10,
            column: 5
          }
        },
        line: 8
      },
      "1": {
        name: "createProduct",
        decl: {
          start: {
            line: 19,
            column: 15
          },
          end: {
            line: 19,
            column: 28
          }
        },
        loc: {
          start: {
            line: 19,
            column: 35
          },
          end: {
            line: 34,
            column: 1
          }
        },
        line: 19
      },
      "2": {
        name: "NewProductPage",
        decl: {
          start: {
            line: 35,
            column: 9
          },
          end: {
            line: 35,
            column: 23
          }
        },
        loc: {
          start: {
            line: 35,
            column: 26
          },
          end: {
            line: 86,
            column: 1
          }
        },
        line: 35
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 41,
            column: 19
          },
          end: {
            line: 41,
            column: 20
          }
        },
        loc: {
          start: {
            line: 41,
            column: 27
          },
          end: {
            line: 52,
            column: 9
          }
        },
        line: 41
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 53,
            column: 17
          },
          end: {
            line: 53,
            column: 18
          }
        },
        loc: {
          start: {
            line: 53,
            column: 26
          },
          end: {
            line: 55,
            column: 9
          }
        },
        line: 53
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 57,
            column: 25
          },
          end: {
            line: 57,
            column: 26
          }
        },
        loc: {
          start: {
            line: 57,
            column: 39
          },
          end: {
            line: 59,
            column: 5
          }
        },
        line: 57
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 60,
            column: 25
          },
          end: {
            line: 60,
            column: 26
          }
        },
        loc: {
          start: {
            line: 60,
            column: 29
          },
          end: {
            line: 62,
            column: 5
          }
        },
        line: 60
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 30
      },
      "1": {
        loc: {
          start: {
            line: 31,
            column: 24
          },
          end: {
            line: 31,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 24
          },
          end: {
            line: 31,
            column: 36
          }
        }, {
          start: {
            line: 31,
            column: 40
          },
          end: {
            line: 31,
            column: 65
          }
        }],
        line: 31
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\admin\\products\\new\\page.tsx"],
      sourcesContent: ["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { AdminLayout } from '@/components/admin/layout/AdminLayout';\r\nimport { ProductForm } from '@/components/admin/products/ProductForm';\r\nimport { toast } from 'react-hot-toast';\r\n\r\ninterface ProductFormData {\r\n  name: string;\r\n  description?: string;\r\n  short_description?: string;\r\n  category_id: string;\r\n  status: 'active' | 'inactive' | 'draft';\r\n  price: number;\r\n  compare_price?: number;\r\n  cost_price?: number;\r\n  track_inventory: boolean;\r\n  stock: number;\r\n  low_stock_threshold?: number;\r\n  allow_backorder: boolean;\r\n  seo_title?: string;\r\n  seo_description?: string;\r\n  slug?: string;\r\n  images?: Array<{\r\n    url: string;\r\n    alt?: string;\r\n    is_primary?: boolean;\r\n  }>;\r\n  variants?: Array<{\r\n    name: string;\r\n    options: string[];\r\n  }>;\r\n}\r\n\r\n// API function to create product (USANDO API SIMPLIFICADA)\r\nasync function createProduct(data: ProductFormData) {\r\n  console.log('\uD83D\uDE80 Creating product with data:', data);\r\n\r\n  const response = await fetch('/api/admin/products', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n\r\n  const result = await response.json();\r\n  console.log('\uD83D\uDCDD API Response:', result);\r\n\r\n  if (!response.ok) {\r\n    throw new Error(result.error || 'Error al crear producto');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport default function NewProductPage() {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Create product mutation\r\n  const createProductMutation = useMutation({\r\n    mutationFn: createProduct,\r\n    onSuccess: (data) => {\r\n      // Invalidate products list\r\n      queryClient.invalidateQueries({ queryKey: ['admin-products'] });\r\n      \r\n      // Show success message\r\n      toast.success('Producto creado exitosamente');\r\n      \r\n      // Redirect to product detail or list\r\n      router.push(`/admin/products/${data.data.id}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async (data: ProductFormData) => {\r\n    await createProductMutation.mutateAsync(data);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push('/admin/products');\r\n  };\r\n\r\n  const breadcrumbs = [\r\n    { label: 'Admin', href: '/admin' },\r\n    { label: 'Productos', href: '/admin/products' },\r\n    { label: 'Nuevo Producto' },\r\n  ];\r\n\r\n  return (\r\n    <AdminLayout\r\n      title=\"Crear Nuevo Producto\"\r\n      breadcrumbs={breadcrumbs}\r\n    >\r\n      <ProductForm\r\n        mode=\"create\"\r\n        onSubmit={handleSubmit}\r\n        onCancel={handleCancel}\r\n        isLoading={createProductMutation.isPending}\r\n      />\r\n    </AdminLayout>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["NewProductPage", "createProduct", "data", "console", "log", "response", "fetch", "method", "headers", "body", "JSON", "stringify", "result", "json", "ok", "Error", "error", "router", "useRouter", "queryClient", "useQueryClient", "createProductMutation", "useMutation", "mutationFn", "onSuccess", "invalidateQueries", "queryKey", "toast", "success", "push", "id", "onError", "message", "handleSubmit", "mutateAsync", "handleCancel", "breadcrumbs", "label", "href", "AdminLayout", "title", "ProductForm", "mode", "onSubmit", "onCancel", "isLoading", "isPending"],
      mappings: "AAAA;;;;;+BAyDA;;;eAAwBA;;;;4BAvDE;4BACkB;6BAChB;6BACA;+BACN;AA6BtB,2DAA2D;AAC3D,eAAeC,cAAcC,IAAqB;IAChDC,QAAQC,GAAG,CAAC,kCAAkCF;IAE9C,MAAMG,WAAW,MAAMC,MAAM,uBAAuB;QAClDC,QAAQ;QACRC,SAAS;YACP,gBAAgB;QAClB;QACAC,MAAMC,KAAKC,SAAS,CAACT;IACvB;IAEA,MAAMU,SAAS,MAAMP,SAASQ,IAAI;IAClCV,QAAQC,GAAG,CAAC,oBAAoBQ;IAEhC,IAAI,CAACP,SAASS,EAAE,EAAE;QAChB,MAAM,IAAIC,MAAMH,OAAOI,KAAK,IAAI;IAClC;IAEA,OAAOX,SAASQ,IAAI;AACtB;AAEe,SAASb;IACtB,MAAMiB,SAASC,IAAAA,qBAAS;IACxB,MAAMC,cAAcC,IAAAA,0BAAc;IAElC,0BAA0B;IAC1B,MAAMC,wBAAwBC,IAAAA,uBAAW,EAAC;QACxCC,YAAYtB;QACZuB,WAAW,CAACtB;YACV,2BAA2B;YAC3BiB,YAAYM,iBAAiB,CAAC;gBAAEC,UAAU;oBAAC;iBAAiB;YAAC;YAE7D,uBAAuB;YACvBC,oBAAK,CAACC,OAAO,CAAC;YAEd,qCAAqC;YACrCX,OAAOY,IAAI,CAAC,CAAC,gBAAgB,EAAE3B,KAAKA,IAAI,CAAC4B,EAAE,EAAE;QAC/C;QACAC,SAAS,CAACf;YACRW,oBAAK,CAACX,KAAK,CAACA,MAAMgB,OAAO;QAC3B;IACF;IAEA,MAAMC,eAAe,OAAO/B;QAC1B,MAAMmB,sBAAsBa,WAAW,CAAChC;IAC1C;IAEA,MAAMiC,eAAe;QACnBlB,OAAOY,IAAI,CAAC;IACd;IAEA,MAAMO,cAAc;QAClB;YAAEC,OAAO;YAASC,MAAM;QAAS;QACjC;YAAED,OAAO;YAAaC,MAAM;QAAkB;QAC9C;YAAED,OAAO;QAAiB;KAC3B;IAED,qBACE,qBAACE,wBAAW;QACVC,OAAM;QACNJ,aAAaA;kBAEb,cAAA,qBAACK,wBAAW;YACVC,MAAK;YACLC,UAAUV;YACVW,UAAUT;YACVU,WAAWxB,sBAAsByB,SAAS;;;AAIlD"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "9feb75e328e4e3bb5aa7b51b1468ea8ffae4ec57"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_20ay42e5ya = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_20ay42e5ya();
cov_20ay42e5ya().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_20ay42e5ya().s[1]++;
Object.defineProperty(exports, "default", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_20ay42e5ya().f[0]++;
    cov_20ay42e5ya().s[2]++;
    return NewProductPage;
  }
});
const _jsxruntime =
/* istanbul ignore next */
(cov_20ay42e5ya().s[3]++, require("react/jsx-runtime"));
const _navigation =
/* istanbul ignore next */
(cov_20ay42e5ya().s[4]++, require("next/navigation"));
const _reactquery =
/* istanbul ignore next */
(cov_20ay42e5ya().s[5]++, require("@tanstack/react-query"));
const _AdminLayout =
/* istanbul ignore next */
(cov_20ay42e5ya().s[6]++, require("../../../../components/admin/layout/AdminLayout"));
const _ProductForm =
/* istanbul ignore next */
(cov_20ay42e5ya().s[7]++, require("../../../../components/admin/products/ProductForm"));
const _reacthottoast =
/* istanbul ignore next */
(cov_20ay42e5ya().s[8]++, require("react-hot-toast"));
// API function to create product (USANDO API SIMPLIFICADA)
async function createProduct(data) {
  /* istanbul ignore next */
  cov_20ay42e5ya().f[1]++;
  cov_20ay42e5ya().s[9]++;
  console.log('ðŸš€ Creating product with data:', data);
  const response =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[10]++, await fetch('/api/admin/products', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  }));
  const result =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[11]++, await response.json());
  /* istanbul ignore next */
  cov_20ay42e5ya().s[12]++;
  console.log('ðŸ“ API Response:', result);
  /* istanbul ignore next */
  cov_20ay42e5ya().s[13]++;
  if (!response.ok) {
    /* istanbul ignore next */
    cov_20ay42e5ya().b[0][0]++;
    cov_20ay42e5ya().s[14]++;
    throw new Error(
    /* istanbul ignore next */
    (cov_20ay42e5ya().b[1][0]++, result.error) ||
    /* istanbul ignore next */
    (cov_20ay42e5ya().b[1][1]++, 'Error al crear producto'));
  } else
  /* istanbul ignore next */
  {
    cov_20ay42e5ya().b[0][1]++;
  }
  cov_20ay42e5ya().s[15]++;
  return response.json();
}
function NewProductPage() {
  /* istanbul ignore next */
  cov_20ay42e5ya().f[2]++;
  const router =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[16]++, (0, _navigation.useRouter)());
  const queryClient =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[17]++, (0, _reactquery.useQueryClient)());
  // Create product mutation
  const createProductMutation =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[18]++, (0, _reactquery.useMutation)({
    mutationFn: createProduct,
    onSuccess: data => {
      /* istanbul ignore next */
      cov_20ay42e5ya().f[3]++;
      cov_20ay42e5ya().s[19]++;
      // Invalidate products list
      queryClient.invalidateQueries({
        queryKey: ['admin-products']
      });
      // Show success message
      /* istanbul ignore next */
      cov_20ay42e5ya().s[20]++;
      _reacthottoast.toast.success('Producto creado exitosamente');
      // Redirect to product detail or list
      /* istanbul ignore next */
      cov_20ay42e5ya().s[21]++;
      router.push(`/admin/products/${data.data.id}`);
    },
    onError: error => {
      /* istanbul ignore next */
      cov_20ay42e5ya().f[4]++;
      cov_20ay42e5ya().s[22]++;
      _reacthottoast.toast.error(error.message);
    }
  }));
  /* istanbul ignore next */
  cov_20ay42e5ya().s[23]++;
  const handleSubmit = async data => {
    /* istanbul ignore next */
    cov_20ay42e5ya().f[5]++;
    cov_20ay42e5ya().s[24]++;
    await createProductMutation.mutateAsync(data);
  };
  /* istanbul ignore next */
  cov_20ay42e5ya().s[25]++;
  const handleCancel = () => {
    /* istanbul ignore next */
    cov_20ay42e5ya().f[6]++;
    cov_20ay42e5ya().s[26]++;
    router.push('/admin/products');
  };
  const breadcrumbs =
  /* istanbul ignore next */
  (cov_20ay42e5ya().s[27]++, [{
    label: 'Admin',
    href: '/admin'
  }, {
    label: 'Productos',
    href: '/admin/products'
  }, {
    label: 'Nuevo Producto'
  }]);
  /* istanbul ignore next */
  cov_20ay42e5ya().s[28]++;
  return /*#__PURE__*/(0, _jsxruntime.jsx)(_AdminLayout.AdminLayout, {
    title: "Crear Nuevo Producto",
    breadcrumbs: breadcrumbs,
    children: /*#__PURE__*/(0, _jsxruntime.jsx)(_ProductForm.ProductForm, {
      mode: "create",
      onSubmit: handleSubmit,
      onCancel: handleCancel,
      isLoading: createProductMutation.isPending
    })
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOZXdQcm9kdWN0UGFnZSIsImNyZWF0ZVByb2R1Y3QiLCJkYXRhIiwiY292XzIwYXk0MmU1eWEiLCJmIiwicyIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwianNvbiIsIm9rIiwiYiIsIkVycm9yIiwiZXJyb3IiLCJyb3V0ZXIiLCJfbmF2aWdhdGlvbiIsInVzZVJvdXRlciIsInF1ZXJ5Q2xpZW50IiwiX3JlYWN0cXVlcnkiLCJ1c2VRdWVyeUNsaWVudCIsImNyZWF0ZVByb2R1Y3RNdXRhdGlvbiIsInVzZU11dGF0aW9uIiwibXV0YXRpb25GbiIsIm9uU3VjY2VzcyIsImludmFsaWRhdGVRdWVyaWVzIiwicXVlcnlLZXkiLCJfcmVhY3Rob3R0b2FzdCIsInRvYXN0Iiwic3VjY2VzcyIsInB1c2giLCJpZCIsIm9uRXJyb3IiLCJtZXNzYWdlIiwiaGFuZGxlU3VibWl0IiwibXV0YXRlQXN5bmMiLCJoYW5kbGVDYW5jZWwiLCJicmVhZGNydW1icyIsImxhYmVsIiwiaHJlZiIsIl9qc3hydW50aW1lIiwianN4IiwiX0FkbWluTGF5b3V0IiwiQWRtaW5MYXlvdXQiLCJ0aXRsZSIsIl9Qcm9kdWN0Rm9ybSIsIlByb2R1Y3RGb3JtIiwibW9kZSIsIm9uU3VibWl0Iiwib25DYW5jZWwiLCJpc0xvYWRpbmciLCJpc1BlbmRpbmciXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG1hcnRpXFxEZXNrdG9wXFxERVNBUlJPTExPU1dcXEJPSUxFUlBMQVRURSBFLUNPTU1FUkNFXFxzcmNcXGFwcFxcYWRtaW5cXHByb2R1Y3RzXFxuZXdcXHBhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XHJcbmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeUNsaWVudCB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XHJcbmltcG9ydCB7IEFkbWluTGF5b3V0IH0gZnJvbSAnQC9jb21wb25lbnRzL2FkbWluL2xheW91dC9BZG1pbkxheW91dCc7XHJcbmltcG9ydCB7IFByb2R1Y3RGb3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL2FkbWluL3Byb2R1Y3RzL1Byb2R1Y3RGb3JtJztcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdyZWFjdC1ob3QtdG9hc3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb2R1Y3RGb3JtRGF0YSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIHNob3J0X2Rlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIGNhdGVnb3J5X2lkOiBzdHJpbmc7XHJcbiAgc3RhdHVzOiAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgfCAnZHJhZnQnO1xyXG4gIHByaWNlOiBudW1iZXI7XHJcbiAgY29tcGFyZV9wcmljZT86IG51bWJlcjtcclxuICBjb3N0X3ByaWNlPzogbnVtYmVyO1xyXG4gIHRyYWNrX2ludmVudG9yeTogYm9vbGVhbjtcclxuICBzdG9jazogbnVtYmVyO1xyXG4gIGxvd19zdG9ja190aHJlc2hvbGQ/OiBudW1iZXI7XHJcbiAgYWxsb3dfYmFja29yZGVyOiBib29sZWFuO1xyXG4gIHNlb190aXRsZT86IHN0cmluZztcclxuICBzZW9fZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgc2x1Zz86IHN0cmluZztcclxuICBpbWFnZXM/OiBBcnJheTx7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIGFsdD86IHN0cmluZztcclxuICAgIGlzX3ByaW1hcnk/OiBib29sZWFuO1xyXG4gIH0+O1xyXG4gIHZhcmlhbnRzPzogQXJyYXk8e1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgb3B0aW9uczogc3RyaW5nW107XHJcbiAgfT47XHJcbn1cclxuXHJcbi8vIEFQSSBmdW5jdGlvbiB0byBjcmVhdGUgcHJvZHVjdCAoVVNBTkRPIEFQSSBTSU1QTElGSUNBREEpXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QoZGF0YTogUHJvZHVjdEZvcm1EYXRhKSB7XHJcbiAgY29uc29sZS5sb2coJ/CfmoAgQ3JlYXRpbmcgcHJvZHVjdCB3aXRoIGRhdGE6JywgZGF0YSk7XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWRtaW4vcHJvZHVjdHMnLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgIH0sXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gIGNvbnNvbGUubG9nKCfwn5OdIEFQSSBSZXNwb25zZTonLCByZXN1bHQpO1xyXG5cclxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8ICdFcnJvciBhbCBjcmVhciBwcm9kdWN0bycpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTmV3UHJvZHVjdFBhZ2UoKSB7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xyXG5cclxuICAvLyBDcmVhdGUgcHJvZHVjdCBtdXRhdGlvblxyXG4gIGNvbnN0IGNyZWF0ZVByb2R1Y3RNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcclxuICAgIG11dGF0aW9uRm46IGNyZWF0ZVByb2R1Y3QsXHJcbiAgICBvblN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgIC8vIEludmFsaWRhdGUgcHJvZHVjdHMgbGlzdFxyXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluLXByb2R1Y3RzJ10gfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTaG93IHN1Y2Nlc3MgbWVzc2FnZVxyXG4gICAgICB0b2FzdC5zdWNjZXNzKCdQcm9kdWN0byBjcmVhZG8gZXhpdG9zYW1lbnRlJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBSZWRpcmVjdCB0byBwcm9kdWN0IGRldGFpbCBvciBsaXN0XHJcbiAgICAgIHJvdXRlci5wdXNoKGAvYWRtaW4vcHJvZHVjdHMvJHtkYXRhLmRhdGEuaWR9YCk7XHJcbiAgICB9LFxyXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xyXG4gICAgICB0b2FzdC5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChkYXRhOiBQcm9kdWN0Rm9ybURhdGEpID0+IHtcclxuICAgIGF3YWl0IGNyZWF0ZVByb2R1Y3RNdXRhdGlvbi5tdXRhdGVBc3luYyhkYXRhKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVDYW5jZWwgPSAoKSA9PiB7XHJcbiAgICByb3V0ZXIucHVzaCgnL2FkbWluL3Byb2R1Y3RzJyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYnJlYWRjcnVtYnMgPSBbXHJcbiAgICB7IGxhYmVsOiAnQWRtaW4nLCBocmVmOiAnL2FkbWluJyB9LFxyXG4gICAgeyBsYWJlbDogJ1Byb2R1Y3RvcycsIGhyZWY6ICcvYWRtaW4vcHJvZHVjdHMnIH0sXHJcbiAgICB7IGxhYmVsOiAnTnVldm8gUHJvZHVjdG8nIH0sXHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxBZG1pbkxheW91dFxyXG4gICAgICB0aXRsZT1cIkNyZWFyIE51ZXZvIFByb2R1Y3RvXCJcclxuICAgICAgYnJlYWRjcnVtYnM9e2JyZWFkY3J1bWJzfVxyXG4gICAgPlxyXG4gICAgICA8UHJvZHVjdEZvcm1cclxuICAgICAgICBtb2RlPVwiY3JlYXRlXCJcclxuICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxyXG4gICAgICAgIG9uQ2FuY2VsPXtoYW5kbGVDYW5jZWx9XHJcbiAgICAgICAgaXNMb2FkaW5nPXtjcmVhdGVQcm9kdWN0TXV0YXRpb24uaXNQZW5kaW5nfVxyXG4gICAgICAvPlxyXG4gICAgPC9BZG1pbkxheW91dD5cclxuICApO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrQkF5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