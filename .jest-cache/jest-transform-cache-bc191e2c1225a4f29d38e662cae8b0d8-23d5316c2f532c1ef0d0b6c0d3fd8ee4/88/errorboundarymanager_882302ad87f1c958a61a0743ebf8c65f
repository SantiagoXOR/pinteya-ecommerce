cadae26cfe511c543c4074c44b4cc282
// ===================================
// ERROR BOUNDARY MANAGER
// ===================================
// Sistema centralizado de gestiÃ³n de Error Boundaries
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return _default;
    },
    get errorBoundaryManager () {
        return errorBoundaryManager;
    }
});
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// ===================================
// ERROR BOUNDARY MANAGER
// ===================================
class ErrorBoundaryManager {
    constructor(){
        this.errors = new Map();
        this.patterns = new Map();
        this.configs = new Map();
        this.listeners = [];
        this.initializeDefaultConfigs();
        this.setupGlobalErrorHandlers();
    }
    static getInstance() {
        if (!ErrorBoundaryManager.instance) {
            ErrorBoundaryManager.instance = new ErrorBoundaryManager();
        }
        return ErrorBoundaryManager.instance;
    }
    // ===================================
    // CONFIGURACIÃ“N
    // ===================================
    initializeDefaultConfigs() {
        // ConfiguraciÃ³n para pÃ¡ginas
        this.configs.set('page', {
            level: 'page',
            enableRetry: true,
            maxRetries: 2,
            retryDelay: 2000,
            enableAutoRecovery: true,
            recoveryTimeout: 5000,
            enableReporting: true
        });
        // ConfiguraciÃ³n para secciones
        this.configs.set('section', {
            level: 'section',
            enableRetry: true,
            maxRetries: 3,
            retryDelay: 1000,
            enableAutoRecovery: true,
            recoveryTimeout: 3000,
            enableReporting: true
        });
        // ConfiguraciÃ³n para componentes
        this.configs.set('component', {
            level: 'component',
            enableRetry: true,
            maxRetries: 5,
            retryDelay: 500,
            enableAutoRecovery: true,
            recoveryTimeout: 2000,
            enableReporting: false
        });
    }
    getConfig(level) {
        return this.configs.get(level) || this.configs.get('component');
    }
    updateConfig(level, config) {
        const currentConfig = this.getConfig(level);
        this.configs.set(level, {
            ...currentConfig,
            ...config
        });
    }
    // ===================================
    // GESTIÃ“N DE ERRORES
    // ===================================
    reportError(error, errorInfo, context) {
        const errorType = this.classifyError(error);
        const userImpact = this.assessUserImpact(context.level, error);
        // Extraer Vercel Request ID de headers si estÃ¡ disponible
        const vercelRequestId = context.vercelRequestId || this.extractVercelRequestId();
        // Generar correlation ID para vincular errores relacionados
        const correlationId = this.generateCorrelationId(error, context.component);
        const errorMetrics = {
            errorId: context.errorId,
            timestamp: Date.now(),
            errorType,
            component: context.component,
            level: context.level,
            retryCount: context.retryCount,
            resolved: false,
            userImpact,
            vercelRequestId,
            correlationId,
            buildId: context.buildId || process.env.VERCEL_GIT_COMMIT_SHA,
            nextjsVersion: this.getNextJSVersion(),
            metadataErrors: this.extractMetadataErrors(error)
        };
        this.errors.set(context.errorId, errorMetrics);
        this.detectErrorPattern(error, context.component);
        this.notifyListeners(errorMetrics);
        // Reportar a sistemas externos si es necesario
        if (this.shouldReportExternally(errorMetrics)) {
            this.reportToExternalSystems(errorMetrics, error, errorInfo);
        }
    }
    extractVercelRequestId() {
        if (typeof window !== 'undefined') {
            // En el cliente, intentar obtener de headers de respuesta
            return undefined;
        }
        // En el servidor, obtener de headers de request
        try {
            const headers = require('next/headers');
            const headersList = headers.headers();
            return headersList.get('x-vercel-id') || headersList.get('x-request-id');
        } catch  {
            return undefined;
        }
    }
    generateCorrelationId(error, component) {
        const errorSignature = `${error.name}_${component}_${error.message.substring(0, 50)}`;
        return Buffer.from(errorSignature).toString('base64').substring(0, 16);
    }
    getNextJSVersion() {
        try {
            const packageJson = require('../../../package.json');
            return packageJson.dependencies?.next || 'unknown';
        } catch  {
            return 'unknown';
        }
    }
    extractMetadataErrors(error) {
        const metadataErrors = [];
        const errorMessage = error.message.toLowerCase();
        if (errorMessage.includes('metadata') || errorMessage.includes('viewport') || errorMessage.includes('themecolor')) {
            if (errorMessage.includes('viewport')) {
                metadataErrors.push('metadata_viewport');
            }
            if (errorMessage.includes('themecolor')) {
                metadataErrors.push('metadata_themeColor');
            }
            if (errorMessage.includes('unsupported')) {
                metadataErrors.push('unsupported_metadata');
            }
        }
        return metadataErrors;
    }
    markErrorResolved(errorId, resolutionTime) {
        const error = this.errors.get(errorId);
        if (error) {
            error.resolved = true;
            error.resolutionTime = resolutionTime || Date.now() - error.timestamp;
            this.errors.set(errorId, error);
        }
    }
    // ===================================
    // CLASIFICACIÃ“N Y ANÃLISIS
    // ===================================
    classifyError(error) {
        const message = error.message.toLowerCase();
        const stack = error.stack?.toLowerCase() || '';
        // Errores de chunk loading
        if (message.includes('loading chunk') || message.includes('loading css chunk')) {
            return 'ChunkLoadError';
        }
        // Errores de red
        if (message.includes('network') || message.includes('fetch') || message.includes('timeout')) {
            return 'NetworkError';
        }
        // Errores de React
        if (stack.includes('react') || message.includes('render')) {
            return 'ReactError';
        }
        // Errores de JavaScript
        if (error.name === 'TypeError') {
            return 'TypeError';
        }
        if (error.name === 'ReferenceError') {
            return 'ReferenceError';
        }
        if (error.name === 'SyntaxError') {
            return 'SyntaxError';
        }
        return 'UnknownError';
    }
    assessUserImpact(level, error) {
        // Impacto crÃ­tico para errores de pÃ¡gina
        if (level === 'page') {
            return 'critical';
        }
        // Impacto alto para errores de secciÃ³n
        if (level === 'section') {
            return 'high';
        }
        // Evaluar por tipo de error
        const errorType = this.classifyError(error);
        switch(errorType){
            case 'ChunkLoadError':
                return 'high' // Impide la carga de funcionalidad
                ;
            case 'NetworkError':
                return 'medium' // Puede afectar datos
                ;
            case 'ReactError':
                return level === 'component' ? 'low' : 'medium';
            default:
                return 'low';
        }
    }
    detectErrorPattern(error, component) {
        const errorType = this.classifyError(error);
        const patternKey = `${errorType}:${component}`;
        const existing = this.patterns.get(patternKey);
        if (existing) {
            existing.frequency++;
            existing.lastOccurrence = Date.now();
            if (!existing.affectedComponents.includes(component)) {
                existing.affectedComponents.push(component);
            }
        } else {
            this.patterns.set(patternKey, {
                pattern: patternKey,
                frequency: 1,
                lastOccurrence: Date.now(),
                affectedComponents: [
                    component
                ],
                suggestedFix: this.getSuggestedFix(error)
            });
        }
    }
    getSuggestedFix(error) {
        const errorType = this.classifyError(error);
        switch(errorType){
            case 'ChunkLoadError':
                return 'Consider implementing chunk retry logic or reducing bundle size';
            case 'NetworkError':
                return 'Implement network retry with exponential backoff';
            case 'TypeError':
                return 'Add null/undefined checks and proper type validation';
            case 'ReactError':
                return 'Review component lifecycle and state management';
            default:
                return undefined;
        }
    }
    // ===================================
    // REPORTE EXTERNO
    // ===================================
    shouldReportExternally(errorMetrics) {
        // Reportar errores crÃ­ticos y de alto impacto
        if (errorMetrics.userImpact === 'critical' || errorMetrics.userImpact === 'high') {
            return true;
        }
        // Reportar errores frecuentes
        const pattern = Array.from(this.patterns.values()).find((p)=>p.pattern.includes(errorMetrics.errorType));
        if (pattern && pattern.frequency >= 5) {
            return true;
        }
        return false;
    }
    async reportToExternalSystems(errorMetrics, error, errorInfo) {
        try {
            // Importar logger de forma dinÃ¡mica para evitar dependencias circulares
            const { logger, LogLevel, LogCategory, logVercel, logNextJS } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../enterprise/logger")));
            // Log especÃ­fico para errores de Next.js/Vercel
            if (errorMetrics.metadataErrors && errorMetrics.metadataErrors.length > 0) {
                logNextJS(LogLevel.ERROR, 'Next.js Metadata Error Detected', {
                    errorType: errorMetrics.metadataErrors[0],
                    route: typeof window !== 'undefined' ? window.location.pathname : undefined,
                    requestId: errorMetrics.errorId,
                    vercelRequestId: errorMetrics.vercelRequestId,
                    correlationId: errorMetrics.correlationId,
                    buildId: errorMetrics.buildId,
                    nextjsVersion: errorMetrics.nextjsVersion,
                    buildWarnings: errorMetrics.metadataErrors
                }, {
                    userId: errorMetrics.errorId.split('_')[0],
                    sessionId: this.getSessionId()
                });
            }
            // Log para Vercel si tenemos Request ID
            if (errorMetrics.vercelRequestId) {
                logVercel(LogLevel.ERROR, 'Vercel Request Error Correlation', {
                    errorType: 'runtime_error',
                    requestId: errorMetrics.errorId,
                    vercelRequestId: errorMetrics.vercelRequestId,
                    correlationId: errorMetrics.correlationId,
                    buildId: errorMetrics.buildId
                });
            }
            // Log general del error
            logger.error(LogCategory.SECURITY, `Error Boundary Triggered: ${error.message}`, error, {
                requestId: errorMetrics.errorId,
                userId: errorMetrics.correlationId
            });
            // Reportar a Supabase Analytics si estÃ¡ disponible
            if (typeof window !== 'undefined' && window.supabase) {
                await this.reportToSupabaseAnalytics(errorMetrics, error);
            }
        } catch (reportError) {
            console.error('âŒ Failed to report to external systems:', reportError);
        }
    }
    async reportToSupabaseAnalytics(errorMetrics, error) {
        try {
            const { supabase } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../integrations/supabase/client")));
            await supabase.from('analytics_events').insert({
                event_name: 'error_boundary_triggered',
                category: 'error',
                action: 'error_caught',
                label: errorMetrics.component,
                value: errorMetrics.retryCount,
                metadata: {
                    errorId: errorMetrics.errorId,
                    errorType: errorMetrics.errorType,
                    userImpact: errorMetrics.userImpact,
                    vercelRequestId: errorMetrics.vercelRequestId,
                    correlationId: errorMetrics.correlationId,
                    buildId: errorMetrics.buildId,
                    nextjsVersion: errorMetrics.nextjsVersion,
                    metadataErrors: errorMetrics.metadataErrors,
                    errorMessage: error.message,
                    errorStack: error.stack?.substring(0, 1000)
                },
                page: typeof window !== 'undefined' ? window.location.pathname : undefined,
                user_agent: typeof window !== 'undefined' ? window.navigator.userAgent : undefined
            });
        } catch (analyticsError) {
            console.error('Failed to report to Supabase Analytics:', analyticsError);
        }
    }
    getSessionId() {
        if (typeof window !== 'undefined') {
            let sessionId = sessionStorage.getItem('error_session_id');
            if (!sessionId) {
                sessionId = `session_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`;
                sessionStorage.setItem('error_session_id', sessionId);
            }
            return sessionId;
        }
        return `server_session_${Date.now()}`;
    }
    // ===================================
    // MANEJO GLOBAL DE ERRORES
    // ===================================
    setupGlobalErrorHandlers() {
        if (typeof window === 'undefined') {
            return;
        }
        // Manejar errores JavaScript no capturados
        window.addEventListener('error', (event)=>{
            this.handleGlobalError(event.error, 'global_javascript_error');
        });
        // Manejar promesas rechazadas no capturadas
        window.addEventListener('unhandledrejection', (event)=>{
            this.handleGlobalError(event.reason, 'unhandled_promise_rejection');
        });
        // Manejar errores de recursos (imÃ¡genes, scripts, etc.)
        window.addEventListener('error', (event)=>{
            if (event.target !== window) {
                this.handleResourceError(event);
            }
        }, true);
    }
    handleGlobalError(error, type) {
        const errorId = `global_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        const errorMetrics = {
            errorId,
            timestamp: Date.now(),
            errorType: type,
            component: 'global',
            level: 'page',
            retryCount: 0,
            resolved: false,
            userImpact: 'high'
        };
        this.errors.set(errorId, errorMetrics);
        this.notifyListeners(errorMetrics);
        console.error(`ðŸŒ Global error (${type}):`, error);
    }
    handleResourceError(event) {
        const target = event.target;
        const resourceType = target.tagName?.toLowerCase() || 'unknown';
        const src = target.src || target.href || 'unknown';
        console.warn(`ðŸ“¦ Resource loading error (${resourceType}):`, src);
        // Intentar recargar recursos crÃ­ticos
        if (resourceType === 'script' && src.includes('chunk')) {
            setTimeout(()=>{
                window.location.reload();
            }, 2000);
        }
    }
    // ===================================
    // LISTENERS Y MÃ‰TRICAS
    // ===================================
    addErrorListener(listener) {
        this.listeners.push(listener);
    }
    removeErrorListener(listener) {
        const index = this.listeners.indexOf(listener);
        if (index > -1) {
            this.listeners.splice(index, 1);
        }
    }
    notifyListeners(error) {
        this.listeners.forEach((listener)=>{
            try {
                listener(error);
            } catch (listenerError) {
                console.error('âŒ Error in error listener:', listenerError);
            }
        });
    }
    // ===================================
    // MÃ‰TRICAS Y REPORTES
    // ===================================
    getErrorMetrics() {
        const errors = Array.from(this.errors.values());
        const patterns = Array.from(this.patterns.values());
        return {
            totalErrors: errors.length,
            errorsByType: this.groupBy(errors, 'errorType'),
            errorsByComponent: this.groupBy(errors, 'component'),
            errorsByImpact: this.groupBy(errors, 'userImpact'),
            patterns: patterns.sort((a, b)=>b.frequency - a.frequency),
            recentErrors: errors.sort((a, b)=>b.timestamp - a.timestamp).slice(0, 10)
        };
    }
    groupBy(array, key) {
        return array.reduce((acc, item)=>{
            const value = String(item[key]);
            acc[value] = (acc[value] || 0) + 1;
            return acc;
        }, {});
    }
    clearOldErrors(maxAge = 24 * 60 * 60 * 1000) {
        // 24 horas por defecto
        const cutoff = Date.now() - maxAge;
        for (const [errorId, error] of this.errors.entries()){
            if (error.timestamp < cutoff) {
                this.errors.delete(errorId);
            }
        }
        for (const [patternKey, pattern] of this.patterns.entries()){
            if (pattern.lastOccurrence < cutoff) {
                this.patterns.delete(patternKey);
            }
        }
    }
    // ===================================
    // UTILIDADES
    // ===================================
    getHealthStatus() {
        const errors = Array.from(this.errors.values());
        const recentErrors = errors.filter((e)=>e.timestamp > Date.now() - 60000) // Ãšltimos 60 segundos
        ;
        const criticalErrors = errors.filter((e)=>e.userImpact === 'critical').length;
        const errorRate = recentErrors.length;
        let status = 'healthy';
        const recommendations = [];
        if (criticalErrors > 0) {
            status = 'critical';
            recommendations.push('Resolver errores crÃ­ticos inmediatamente');
        } else if (errorRate > 5) {
            status = 'degraded';
            recommendations.push('Alta tasa de errores detectada');
        }
        // Analizar patrones frecuentes
        const frequentPatterns = Array.from(this.patterns.values()).filter((p)=>p.frequency >= 3);
        if (frequentPatterns.length > 0) {
            recommendations.push('Revisar patrones de errores frecuentes');
            if (status === 'healthy') {
                status = 'degraded';
            }
        }
        return {
            status,
            errorRate,
            criticalErrors,
            recommendations
        };
    }
}
const errorBoundaryManager = ErrorBoundaryManager.getInstance();
const _default = ErrorBoundaryManager;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxlcnJvci1ib3VuZGFyeVxcZXJyb3ItYm91bmRhcnktbWFuYWdlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVJST1IgQk9VTkRBUlkgTUFOQUdFUlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNpc3RlbWEgY2VudHJhbGl6YWRvIGRlIGdlc3Rpw7NuIGRlIEVycm9yIEJvdW5kYXJpZXNcblxuaW1wb3J0IHsgRXJyb3JJbmZvIH0gZnJvbSAncmVhY3QnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBJTlRFUkZBQ0VTIFkgVElQT1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JCb3VuZGFyeUNvbmZpZyB7XG4gIGxldmVsOiAncGFnZScgfCAnc2VjdGlvbicgfCAnY29tcG9uZW50J1xuICBlbmFibGVSZXRyeTogYm9vbGVhblxuICBtYXhSZXRyaWVzOiBudW1iZXJcbiAgcmV0cnlEZWxheTogbnVtYmVyXG4gIGVuYWJsZUF1dG9SZWNvdmVyeTogYm9vbGVhblxuICByZWNvdmVyeVRpbWVvdXQ6IG51bWJlclxuICBlbmFibGVSZXBvcnRpbmc6IGJvb2xlYW5cbiAgZmFsbGJhY2tDb21wb25lbnQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPGFueT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvck1ldHJpY3Mge1xuICBlcnJvcklkOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBudW1iZXJcbiAgZXJyb3JUeXBlOiBzdHJpbmdcbiAgY29tcG9uZW50OiBzdHJpbmdcbiAgbGV2ZWw6IHN0cmluZ1xuICByZXRyeUNvdW50OiBudW1iZXJcbiAgcmVzb2x2ZWQ6IGJvb2xlYW5cbiAgcmVzb2x1dGlvblRpbWU/OiBudW1iZXJcbiAgdXNlckltcGFjdDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCdcbiAgdmVyY2VsUmVxdWVzdElkPzogc3RyaW5nXG4gIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgYnVpbGRJZD86IHN0cmluZ1xuICBuZXh0anNWZXJzaW9uPzogc3RyaW5nXG4gIG1ldGFkYXRhRXJyb3JzPzogc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvclBhdHRlcm4ge1xuICBwYXR0ZXJuOiBzdHJpbmdcbiAgZnJlcXVlbmN5OiBudW1iZXJcbiAgbGFzdE9jY3VycmVuY2U6IG51bWJlclxuICBhZmZlY3RlZENvbXBvbmVudHM6IHN0cmluZ1tdXG4gIHN1Z2dlc3RlZEZpeD86IHN0cmluZ1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVJST1IgQk9VTkRBUlkgTUFOQUdFUlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgRXJyb3JCb3VuZGFyeU1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRXJyb3JCb3VuZGFyeU1hbmFnZXJcbiAgcHJpdmF0ZSBlcnJvcnM6IE1hcDxzdHJpbmcsIEVycm9yTWV0cmljcz4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBwYXR0ZXJuczogTWFwPHN0cmluZywgRXJyb3JQYXR0ZXJuPiA9IG5ldyBNYXAoKVxuICBwcml2YXRlIGNvbmZpZ3M6IE1hcDxzdHJpbmcsIEVycm9yQm91bmRhcnlDb25maWc+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgbGlzdGVuZXJzOiBBcnJheTwoZXJyb3I6IEVycm9yTWV0cmljcykgPT4gdm9pZD4gPSBbXVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdENvbmZpZ3MoKVxuICAgIHRoaXMuc2V0dXBHbG9iYWxFcnJvckhhbmRsZXJzKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFcnJvckJvdW5kYXJ5TWFuYWdlciB7XG4gICAgaWYgKCFFcnJvckJvdW5kYXJ5TWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgRXJyb3JCb3VuZGFyeU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgRXJyb3JCb3VuZGFyeU1hbmFnZXIoKVxuICAgIH1cbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeU1hbmFnZXIuaW5zdGFuY2VcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENPTkZJR1VSQUNJw5NOXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdENvbmZpZ3MoKSB7XG4gICAgLy8gQ29uZmlndXJhY2nDs24gcGFyYSBww6FnaW5hc1xuICAgIHRoaXMuY29uZmlncy5zZXQoJ3BhZ2UnLCB7XG4gICAgICBsZXZlbDogJ3BhZ2UnLFxuICAgICAgZW5hYmxlUmV0cnk6IHRydWUsXG4gICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgcmV0cnlEZWxheTogMjAwMCxcbiAgICAgIGVuYWJsZUF1dG9SZWNvdmVyeTogdHJ1ZSxcbiAgICAgIHJlY292ZXJ5VGltZW91dDogNTAwMCxcbiAgICAgIGVuYWJsZVJlcG9ydGluZzogdHJ1ZSxcbiAgICB9KVxuXG4gICAgLy8gQ29uZmlndXJhY2nDs24gcGFyYSBzZWNjaW9uZXNcbiAgICB0aGlzLmNvbmZpZ3Muc2V0KCdzZWN0aW9uJywge1xuICAgICAgbGV2ZWw6ICdzZWN0aW9uJyxcbiAgICAgIGVuYWJsZVJldHJ5OiB0cnVlLFxuICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgIHJldHJ5RGVsYXk6IDEwMDAsXG4gICAgICBlbmFibGVBdXRvUmVjb3Zlcnk6IHRydWUsXG4gICAgICByZWNvdmVyeVRpbWVvdXQ6IDMwMDAsXG4gICAgICBlbmFibGVSZXBvcnRpbmc6IHRydWUsXG4gICAgfSlcblxuICAgIC8vIENvbmZpZ3VyYWNpw7NuIHBhcmEgY29tcG9uZW50ZXNcbiAgICB0aGlzLmNvbmZpZ3Muc2V0KCdjb21wb25lbnQnLCB7XG4gICAgICBsZXZlbDogJ2NvbXBvbmVudCcsXG4gICAgICBlbmFibGVSZXRyeTogdHJ1ZSxcbiAgICAgIG1heFJldHJpZXM6IDUsXG4gICAgICByZXRyeURlbGF5OiA1MDAsXG4gICAgICBlbmFibGVBdXRvUmVjb3Zlcnk6IHRydWUsXG4gICAgICByZWNvdmVyeVRpbWVvdXQ6IDIwMDAsXG4gICAgICBlbmFibGVSZXBvcnRpbmc6IGZhbHNlLCAvLyBTb2xvIHJlcG9ydGFyIGVycm9yZXMgY3LDrXRpY29zXG4gICAgfSlcbiAgfVxuXG4gIGdldENvbmZpZyhsZXZlbDogc3RyaW5nKTogRXJyb3JCb3VuZGFyeUNvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlncy5nZXQobGV2ZWwpIHx8IHRoaXMuY29uZmlncy5nZXQoJ2NvbXBvbmVudCcpIVxuICB9XG5cbiAgdXBkYXRlQ29uZmlnKGxldmVsOiBzdHJpbmcsIGNvbmZpZzogUGFydGlhbDxFcnJvckJvdW5kYXJ5Q29uZmlnPikge1xuICAgIGNvbnN0IGN1cnJlbnRDb25maWcgPSB0aGlzLmdldENvbmZpZyhsZXZlbClcbiAgICB0aGlzLmNvbmZpZ3Muc2V0KGxldmVsLCB7IC4uLmN1cnJlbnRDb25maWcsIC4uLmNvbmZpZyB9KVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gR0VTVEnDk04gREUgRVJST1JFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHJlcG9ydEVycm9yKFxuICAgIGVycm9yOiBFcnJvcixcbiAgICBlcnJvckluZm86IEVycm9ySW5mbyxcbiAgICBjb250ZXh0OiB7XG4gICAgICBlcnJvcklkOiBzdHJpbmdcbiAgICAgIGxldmVsOiBzdHJpbmdcbiAgICAgIGNvbXBvbmVudDogc3RyaW5nXG4gICAgICByZXRyeUNvdW50OiBudW1iZXJcbiAgICAgIHZlcmNlbFJlcXVlc3RJZD86IHN0cmluZ1xuICAgICAgYnVpbGRJZD86IHN0cmluZ1xuICAgIH1cbiAgKSB7XG4gICAgY29uc3QgZXJyb3JUeXBlID0gdGhpcy5jbGFzc2lmeUVycm9yKGVycm9yKVxuICAgIGNvbnN0IHVzZXJJbXBhY3QgPSB0aGlzLmFzc2Vzc1VzZXJJbXBhY3QoY29udGV4dC5sZXZlbCwgZXJyb3IpXG5cbiAgICAvLyBFeHRyYWVyIFZlcmNlbCBSZXF1ZXN0IElEIGRlIGhlYWRlcnMgc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgIGNvbnN0IHZlcmNlbFJlcXVlc3RJZCA9IGNvbnRleHQudmVyY2VsUmVxdWVzdElkIHx8IHRoaXMuZXh0cmFjdFZlcmNlbFJlcXVlc3RJZCgpXG5cbiAgICAvLyBHZW5lcmFyIGNvcnJlbGF0aW9uIElEIHBhcmEgdmluY3VsYXIgZXJyb3JlcyByZWxhY2lvbmFkb3NcbiAgICBjb25zdCBjb3JyZWxhdGlvbklkID0gdGhpcy5nZW5lcmF0ZUNvcnJlbGF0aW9uSWQoZXJyb3IsIGNvbnRleHQuY29tcG9uZW50KVxuXG4gICAgY29uc3QgZXJyb3JNZXRyaWNzOiBFcnJvck1ldHJpY3MgPSB7XG4gICAgICBlcnJvcklkOiBjb250ZXh0LmVycm9ySWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBlcnJvclR5cGUsXG4gICAgICBjb21wb25lbnQ6IGNvbnRleHQuY29tcG9uZW50LFxuICAgICAgbGV2ZWw6IGNvbnRleHQubGV2ZWwsXG4gICAgICByZXRyeUNvdW50OiBjb250ZXh0LnJldHJ5Q291bnQsXG4gICAgICByZXNvbHZlZDogZmFsc2UsXG4gICAgICB1c2VySW1wYWN0LFxuICAgICAgdmVyY2VsUmVxdWVzdElkLFxuICAgICAgY29ycmVsYXRpb25JZCxcbiAgICAgIGJ1aWxkSWQ6IGNvbnRleHQuYnVpbGRJZCB8fCBwcm9jZXNzLmVudi5WRVJDRUxfR0lUX0NPTU1JVF9TSEEsXG4gICAgICBuZXh0anNWZXJzaW9uOiB0aGlzLmdldE5leHRKU1ZlcnNpb24oKSxcbiAgICAgIG1ldGFkYXRhRXJyb3JzOiB0aGlzLmV4dHJhY3RNZXRhZGF0YUVycm9ycyhlcnJvciksXG4gICAgfVxuXG4gICAgdGhpcy5lcnJvcnMuc2V0KGNvbnRleHQuZXJyb3JJZCwgZXJyb3JNZXRyaWNzKVxuICAgIHRoaXMuZGV0ZWN0RXJyb3JQYXR0ZXJuKGVycm9yLCBjb250ZXh0LmNvbXBvbmVudClcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhlcnJvck1ldHJpY3MpXG5cbiAgICAvLyBSZXBvcnRhciBhIHNpc3RlbWFzIGV4dGVybm9zIHNpIGVzIG5lY2VzYXJpb1xuICAgIGlmICh0aGlzLnNob3VsZFJlcG9ydEV4dGVybmFsbHkoZXJyb3JNZXRyaWNzKSkge1xuICAgICAgdGhpcy5yZXBvcnRUb0V4dGVybmFsU3lzdGVtcyhlcnJvck1ldHJpY3MsIGVycm9yLCBlcnJvckluZm8pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0VmVyY2VsUmVxdWVzdElkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBFbiBlbCBjbGllbnRlLCBpbnRlbnRhciBvYnRlbmVyIGRlIGhlYWRlcnMgZGUgcmVzcHVlc3RhXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLy8gRW4gZWwgc2Vydmlkb3IsIG9idGVuZXIgZGUgaGVhZGVycyBkZSByZXF1ZXN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSByZXF1aXJlKCduZXh0L2hlYWRlcnMnKVxuICAgICAgY29uc3QgaGVhZGVyc0xpc3QgPSBoZWFkZXJzLmhlYWRlcnMoKVxuICAgICAgcmV0dXJuIGhlYWRlcnNMaXN0LmdldCgneC12ZXJjZWwtaWQnKSB8fCBoZWFkZXJzTGlzdC5nZXQoJ3gtcmVxdWVzdC1pZCcpXG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvcnJlbGF0aW9uSWQoZXJyb3I6IEVycm9yLCBjb21wb25lbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZXJyb3JTaWduYXR1cmUgPSBgJHtlcnJvci5uYW1lfV8ke2NvbXBvbmVudH1fJHtlcnJvci5tZXNzYWdlLnN1YnN0cmluZygwLCA1MCl9YFxuICAgIHJldHVybiBCdWZmZXIuZnJvbShlcnJvclNpZ25hdHVyZSkudG9TdHJpbmcoJ2Jhc2U2NCcpLnN1YnN0cmluZygwLCAxNilcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TmV4dEpTVmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpXG4gICAgICByZXR1cm4gcGFja2FnZUpzb24uZGVwZW5kZW5jaWVzPy5uZXh0IHx8ICd1bmtub3duJ1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICd1bmtub3duJ1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdE1ldGFkYXRhRXJyb3JzKGVycm9yOiBFcnJvcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtZXRhZGF0YUVycm9yczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuXG4gICAgaWYgKFxuICAgICAgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdtZXRhZGF0YScpIHx8XG4gICAgICBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3ZpZXdwb3J0JykgfHxcbiAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygndGhlbWVjb2xvcicpXG4gICAgKSB7XG4gICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCd2aWV3cG9ydCcpKSB7XG4gICAgICAgIG1ldGFkYXRhRXJyb3JzLnB1c2goJ21ldGFkYXRhX3ZpZXdwb3J0JylcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3RoZW1lY29sb3InKSkge1xuICAgICAgICBtZXRhZGF0YUVycm9ycy5wdXNoKCdtZXRhZGF0YV90aGVtZUNvbG9yJylcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3Vuc3VwcG9ydGVkJykpIHtcbiAgICAgICAgbWV0YWRhdGFFcnJvcnMucHVzaCgndW5zdXBwb3J0ZWRfbWV0YWRhdGEnKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXRhZGF0YUVycm9yc1xuICB9XG5cbiAgbWFya0Vycm9yUmVzb2x2ZWQoZXJyb3JJZDogc3RyaW5nLCByZXNvbHV0aW9uVGltZT86IG51bWJlcikge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5lcnJvcnMuZ2V0KGVycm9ySWQpXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvci5yZXNvbHZlZCA9IHRydWVcbiAgICAgIGVycm9yLnJlc29sdXRpb25UaW1lID0gcmVzb2x1dGlvblRpbWUgfHwgRGF0ZS5ub3coKSAtIGVycm9yLnRpbWVzdGFtcFxuICAgICAgdGhpcy5lcnJvcnMuc2V0KGVycm9ySWQsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENMQVNJRklDQUNJw5NOIFkgQU7DgUxJU0lTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBjbGFzc2lmeUVycm9yKGVycm9yOiBFcnJvcik6IHN0cmluZyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuICAgIGNvbnN0IHN0YWNrID0gZXJyb3Iuc3RhY2s/LnRvTG93ZXJDYXNlKCkgfHwgJydcblxuICAgIC8vIEVycm9yZXMgZGUgY2h1bmsgbG9hZGluZ1xuICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdsb2FkaW5nIGNodW5rJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnbG9hZGluZyBjc3MgY2h1bmsnKSkge1xuICAgICAgcmV0dXJuICdDaHVua0xvYWRFcnJvcidcbiAgICB9XG5cbiAgICAvLyBFcnJvcmVzIGRlIHJlZFxuICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcbiAgICAgIHJldHVybiAnTmV0d29ya0Vycm9yJ1xuICAgIH1cblxuICAgIC8vIEVycm9yZXMgZGUgUmVhY3RcbiAgICBpZiAoc3RhY2suaW5jbHVkZXMoJ3JlYWN0JykgfHwgbWVzc2FnZS5pbmNsdWRlcygncmVuZGVyJykpIHtcbiAgICAgIHJldHVybiAnUmVhY3RFcnJvcidcbiAgICB9XG5cbiAgICAvLyBFcnJvcmVzIGRlIEphdmFTY3JpcHRcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgIHJldHVybiAnVHlwZUVycm9yJ1xuICAgIH1cbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1JlZmVyZW5jZUVycm9yJykge1xuICAgICAgcmV0dXJuICdSZWZlcmVuY2VFcnJvcidcbiAgICB9XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgIHJldHVybiAnU3ludGF4RXJyb3InXG4gICAgfVxuXG4gICAgcmV0dXJuICdVbmtub3duRXJyb3InXG4gIH1cblxuICBwcml2YXRlIGFzc2Vzc1VzZXJJbXBhY3QobGV2ZWw6IHN0cmluZywgZXJyb3I6IEVycm9yKTogRXJyb3JNZXRyaWNzWyd1c2VySW1wYWN0J10ge1xuICAgIC8vIEltcGFjdG8gY3LDrXRpY28gcGFyYSBlcnJvcmVzIGRlIHDDoWdpbmFcbiAgICBpZiAobGV2ZWwgPT09ICdwYWdlJykge1xuICAgICAgcmV0dXJuICdjcml0aWNhbCdcbiAgICB9XG5cbiAgICAvLyBJbXBhY3RvIGFsdG8gcGFyYSBlcnJvcmVzIGRlIHNlY2Npw7NuXG4gICAgaWYgKGxldmVsID09PSAnc2VjdGlvbicpIHtcbiAgICAgIHJldHVybiAnaGlnaCdcbiAgICB9XG5cbiAgICAvLyBFdmFsdWFyIHBvciB0aXBvIGRlIGVycm9yXG4gICAgY29uc3QgZXJyb3JUeXBlID0gdGhpcy5jbGFzc2lmeUVycm9yKGVycm9yKVxuICAgIHN3aXRjaCAoZXJyb3JUeXBlKSB7XG4gICAgICBjYXNlICdDaHVua0xvYWRFcnJvcic6XG4gICAgICAgIHJldHVybiAnaGlnaCcgLy8gSW1waWRlIGxhIGNhcmdhIGRlIGZ1bmNpb25hbGlkYWRcbiAgICAgIGNhc2UgJ05ldHdvcmtFcnJvcic6XG4gICAgICAgIHJldHVybiAnbWVkaXVtJyAvLyBQdWVkZSBhZmVjdGFyIGRhdG9zXG4gICAgICBjYXNlICdSZWFjdEVycm9yJzpcbiAgICAgICAgcmV0dXJuIGxldmVsID09PSAnY29tcG9uZW50JyA/ICdsb3cnIDogJ21lZGl1bSdcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnbG93J1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0RXJyb3JQYXR0ZXJuKGVycm9yOiBFcnJvciwgY29tcG9uZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBlcnJvclR5cGUgPSB0aGlzLmNsYXNzaWZ5RXJyb3IoZXJyb3IpXG4gICAgY29uc3QgcGF0dGVybktleSA9IGAke2Vycm9yVHlwZX06JHtjb21wb25lbnR9YFxuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5wYXR0ZXJucy5nZXQocGF0dGVybktleSlcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAgZXhpc3RpbmcuZnJlcXVlbmN5KytcbiAgICAgIGV4aXN0aW5nLmxhc3RPY2N1cnJlbmNlID0gRGF0ZS5ub3coKVxuICAgICAgaWYgKCFleGlzdGluZy5hZmZlY3RlZENvbXBvbmVudHMuaW5jbHVkZXMoY29tcG9uZW50KSkge1xuICAgICAgICBleGlzdGluZy5hZmZlY3RlZENvbXBvbmVudHMucHVzaChjb21wb25lbnQpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGF0dGVybnMuc2V0KHBhdHRlcm5LZXksIHtcbiAgICAgICAgcGF0dGVybjogcGF0dGVybktleSxcbiAgICAgICAgZnJlcXVlbmN5OiAxLFxuICAgICAgICBsYXN0T2NjdXJyZW5jZTogRGF0ZS5ub3coKSxcbiAgICAgICAgYWZmZWN0ZWRDb21wb25lbnRzOiBbY29tcG9uZW50XSxcbiAgICAgICAgc3VnZ2VzdGVkRml4OiB0aGlzLmdldFN1Z2dlc3RlZEZpeChlcnJvciksXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3VnZ2VzdGVkRml4KGVycm9yOiBFcnJvcik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZXJyb3JUeXBlID0gdGhpcy5jbGFzc2lmeUVycm9yKGVycm9yKVxuXG4gICAgc3dpdGNoIChlcnJvclR5cGUpIHtcbiAgICAgIGNhc2UgJ0NodW5rTG9hZEVycm9yJzpcbiAgICAgICAgcmV0dXJuICdDb25zaWRlciBpbXBsZW1lbnRpbmcgY2h1bmsgcmV0cnkgbG9naWMgb3IgcmVkdWNpbmcgYnVuZGxlIHNpemUnXG4gICAgICBjYXNlICdOZXR3b3JrRXJyb3InOlxuICAgICAgICByZXR1cm4gJ0ltcGxlbWVudCBuZXR3b3JrIHJldHJ5IHdpdGggZXhwb25lbnRpYWwgYmFja29mZidcbiAgICAgIGNhc2UgJ1R5cGVFcnJvcic6XG4gICAgICAgIHJldHVybiAnQWRkIG51bGwvdW5kZWZpbmVkIGNoZWNrcyBhbmQgcHJvcGVyIHR5cGUgdmFsaWRhdGlvbidcbiAgICAgIGNhc2UgJ1JlYWN0RXJyb3InOlxuICAgICAgICByZXR1cm4gJ1JldmlldyBjb21wb25lbnQgbGlmZWN5Y2xlIGFuZCBzdGF0ZSBtYW5hZ2VtZW50J1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJFUE9SVEUgRVhURVJOT1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgc2hvdWxkUmVwb3J0RXh0ZXJuYWxseShlcnJvck1ldHJpY3M6IEVycm9yTWV0cmljcyk6IGJvb2xlYW4ge1xuICAgIC8vIFJlcG9ydGFyIGVycm9yZXMgY3LDrXRpY29zIHkgZGUgYWx0byBpbXBhY3RvXG4gICAgaWYgKGVycm9yTWV0cmljcy51c2VySW1wYWN0ID09PSAnY3JpdGljYWwnIHx8IGVycm9yTWV0cmljcy51c2VySW1wYWN0ID09PSAnaGlnaCcpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgLy8gUmVwb3J0YXIgZXJyb3JlcyBmcmVjdWVudGVzXG4gICAgY29uc3QgcGF0dGVybiA9IEFycmF5LmZyb20odGhpcy5wYXR0ZXJucy52YWx1ZXMoKSkuZmluZChwID0+XG4gICAgICBwLnBhdHRlcm4uaW5jbHVkZXMoZXJyb3JNZXRyaWNzLmVycm9yVHlwZSlcbiAgICApXG5cbiAgICBpZiAocGF0dGVybiAmJiBwYXR0ZXJuLmZyZXF1ZW5jeSA+PSA1KSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXBvcnRUb0V4dGVybmFsU3lzdGVtcyhcbiAgICBlcnJvck1ldHJpY3M6IEVycm9yTWV0cmljcyxcbiAgICBlcnJvcjogRXJyb3IsXG4gICAgZXJyb3JJbmZvOiBFcnJvckluZm9cbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEltcG9ydGFyIGxvZ2dlciBkZSBmb3JtYSBkaW7DoW1pY2EgcGFyYSBldml0YXIgZGVwZW5kZW5jaWFzIGNpcmN1bGFyZXNcbiAgICAgIGNvbnN0IHsgbG9nZ2VyLCBMb2dMZXZlbCwgTG9nQ2F0ZWdvcnksIGxvZ1ZlcmNlbCwgbG9nTmV4dEpTIH0gPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgICcuLi9lbnRlcnByaXNlL2xvZ2dlcidcbiAgICAgIClcblxuICAgICAgLy8gTG9nIGVzcGVjw61maWNvIHBhcmEgZXJyb3JlcyBkZSBOZXh0LmpzL1ZlcmNlbFxuICAgICAgaWYgKGVycm9yTWV0cmljcy5tZXRhZGF0YUVycm9ycyAmJiBlcnJvck1ldHJpY3MubWV0YWRhdGFFcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2dOZXh0SlMoXG4gICAgICAgICAgTG9nTGV2ZWwuRVJST1IsXG4gICAgICAgICAgJ05leHQuanMgTWV0YWRhdGEgRXJyb3IgRGV0ZWN0ZWQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yVHlwZTogZXJyb3JNZXRyaWNzLm1ldGFkYXRhRXJyb3JzWzBdIGFzIGFueSxcbiAgICAgICAgICAgIHJvdXRlOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlcXVlc3RJZDogZXJyb3JNZXRyaWNzLmVycm9ySWQsXG4gICAgICAgICAgICB2ZXJjZWxSZXF1ZXN0SWQ6IGVycm9yTWV0cmljcy52ZXJjZWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBlcnJvck1ldHJpY3MuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIGJ1aWxkSWQ6IGVycm9yTWV0cmljcy5idWlsZElkLFxuICAgICAgICAgICAgbmV4dGpzVmVyc2lvbjogZXJyb3JNZXRyaWNzLm5leHRqc1ZlcnNpb24sXG4gICAgICAgICAgICBidWlsZFdhcm5pbmdzOiBlcnJvck1ldHJpY3MubWV0YWRhdGFFcnJvcnMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1c2VySWQ6IGVycm9yTWV0cmljcy5lcnJvcklkLnNwbGl0KCdfJylbMF0sXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuZ2V0U2Vzc2lvbklkKCksXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIExvZyBwYXJhIFZlcmNlbCBzaSB0ZW5lbW9zIFJlcXVlc3QgSURcbiAgICAgIGlmIChlcnJvck1ldHJpY3MudmVyY2VsUmVxdWVzdElkKSB7XG4gICAgICAgIGxvZ1ZlcmNlbChMb2dMZXZlbC5FUlJPUiwgJ1ZlcmNlbCBSZXF1ZXN0IEVycm9yIENvcnJlbGF0aW9uJywge1xuICAgICAgICAgIGVycm9yVHlwZTogJ3J1bnRpbWVfZXJyb3InLFxuICAgICAgICAgIHJlcXVlc3RJZDogZXJyb3JNZXRyaWNzLmVycm9ySWQsXG4gICAgICAgICAgdmVyY2VsUmVxdWVzdElkOiBlcnJvck1ldHJpY3MudmVyY2VsUmVxdWVzdElkLFxuICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGVycm9yTWV0cmljcy5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgIGJ1aWxkSWQ6IGVycm9yTWV0cmljcy5idWlsZElkLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBMb2cgZ2VuZXJhbCBkZWwgZXJyb3JcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dDYXRlZ29yeS5TRUNVUklUWSwgYEVycm9yIEJvdW5kYXJ5IFRyaWdnZXJlZDogJHtlcnJvci5tZXNzYWdlfWAsIGVycm9yLCB7XG4gICAgICAgIHJlcXVlc3RJZDogZXJyb3JNZXRyaWNzLmVycm9ySWQsXG4gICAgICAgIHVzZXJJZDogZXJyb3JNZXRyaWNzLmNvcnJlbGF0aW9uSWQsXG4gICAgICB9KVxuXG4gICAgICAvLyBSZXBvcnRhciBhIFN1cGFiYXNlIEFuYWx5dGljcyBzaSBlc3TDoSBkaXNwb25pYmxlXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHdpbmRvdyBhcyBhbnkpLnN1cGFiYXNlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVwb3J0VG9TdXBhYmFzZUFuYWx5dGljcyhlcnJvck1ldHJpY3MsIGVycm9yKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKHJlcG9ydEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHJlcG9ydCB0byBleHRlcm5hbCBzeXN0ZW1zOicsIHJlcG9ydEVycm9yKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVwb3J0VG9TdXBhYmFzZUFuYWx5dGljcyhlcnJvck1ldHJpY3M6IEVycm9yTWV0cmljcywgZXJyb3I6IEVycm9yKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IGF3YWl0IGltcG9ydCgnLi4vaW50ZWdyYXRpb25zL3N1cGFiYXNlL2NsaWVudCcpXG5cbiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2FuYWx5dGljc19ldmVudHMnKS5pbnNlcnQoe1xuICAgICAgICBldmVudF9uYW1lOiAnZXJyb3JfYm91bmRhcnlfdHJpZ2dlcmVkJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdlcnJvcicsXG4gICAgICAgIGFjdGlvbjogJ2Vycm9yX2NhdWdodCcsXG4gICAgICAgIGxhYmVsOiBlcnJvck1ldHJpY3MuY29tcG9uZW50LFxuICAgICAgICB2YWx1ZTogZXJyb3JNZXRyaWNzLnJldHJ5Q291bnQsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgZXJyb3JJZDogZXJyb3JNZXRyaWNzLmVycm9ySWQsXG4gICAgICAgICAgZXJyb3JUeXBlOiBlcnJvck1ldHJpY3MuZXJyb3JUeXBlLFxuICAgICAgICAgIHVzZXJJbXBhY3Q6IGVycm9yTWV0cmljcy51c2VySW1wYWN0LFxuICAgICAgICAgIHZlcmNlbFJlcXVlc3RJZDogZXJyb3JNZXRyaWNzLnZlcmNlbFJlcXVlc3RJZCxcbiAgICAgICAgICBjb3JyZWxhdGlvbklkOiBlcnJvck1ldHJpY3MuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICBidWlsZElkOiBlcnJvck1ldHJpY3MuYnVpbGRJZCxcbiAgICAgICAgICBuZXh0anNWZXJzaW9uOiBlcnJvck1ldHJpY3MubmV4dGpzVmVyc2lvbixcbiAgICAgICAgICBtZXRhZGF0YUVycm9yczogZXJyb3JNZXRyaWNzLm1ldGFkYXRhRXJyb3JzLFxuICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvci5zdGFjaz8uc3Vic3RyaW5nKDAsIDEwMDApLCAvLyBMaW1pdGFyIHRhbWHDsW8gZGVsIHN0YWNrXG4gICAgICAgIH0sXG4gICAgICAgIHBhZ2U6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICB1c2VyX2FnZW50OiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50IDogdW5kZWZpbmVkLFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChhbmFseXRpY3NFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlcG9ydCB0byBTdXBhYmFzZSBBbmFseXRpY3M6JywgYW5hbHl0aWNzRXJyb3IpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCBzZXNzaW9uSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdlcnJvcl9zZXNzaW9uX2lkJylcbiAgICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICAgIHNlc3Npb25JZCA9IGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpfWBcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZXJyb3Jfc2Vzc2lvbl9pZCcsIHNlc3Npb25JZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uSWRcbiAgICB9XG4gICAgcmV0dXJuIGBzZXJ2ZXJfc2Vzc2lvbl8ke0RhdGUubm93KCl9YFxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTUFORUpPIEdMT0JBTCBERSBFUlJPUkVTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBNYW5lamFyIGVycm9yZXMgSmF2YVNjcmlwdCBubyBjYXB0dXJhZG9zXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXZlbnQgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVHbG9iYWxFcnJvcihldmVudC5lcnJvciwgJ2dsb2JhbF9qYXZhc2NyaXB0X2Vycm9yJylcbiAgICB9KVxuXG4gICAgLy8gTWFuZWphciBwcm9tZXNhcyByZWNoYXphZGFzIG5vIGNhcHR1cmFkYXNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgZXZlbnQgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVHbG9iYWxFcnJvcihldmVudC5yZWFzb24sICd1bmhhbmRsZWRfcHJvbWlzZV9yZWplY3Rpb24nKVxuICAgIH0pXG5cbiAgICAvLyBNYW5lamFyIGVycm9yZXMgZGUgcmVjdXJzb3MgKGltw6FnZW5lcywgc2NyaXB0cywgZXRjLilcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdlcnJvcicsXG4gICAgICBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IHdpbmRvdykge1xuICAgICAgICAgIHRoaXMuaGFuZGxlUmVzb3VyY2VFcnJvcihldmVudClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRydWVcbiAgICApXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUdsb2JhbEVycm9yKGVycm9yOiBhbnksIHR5cGU6IHN0cmluZykge1xuICAgIGNvbnN0IGVycm9ySWQgPSBgZ2xvYmFsXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuXG4gICAgY29uc3QgZXJyb3JNZXRyaWNzOiBFcnJvck1ldHJpY3MgPSB7XG4gICAgICBlcnJvcklkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgZXJyb3JUeXBlOiB0eXBlLFxuICAgICAgY29tcG9uZW50OiAnZ2xvYmFsJyxcbiAgICAgIGxldmVsOiAncGFnZScsXG4gICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxuICAgICAgdXNlckltcGFjdDogJ2hpZ2gnLFxuICAgIH1cblxuICAgIHRoaXMuZXJyb3JzLnNldChlcnJvcklkLCBlcnJvck1ldHJpY3MpXG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoZXJyb3JNZXRyaWNzKVxuXG4gICAgY29uc29sZS5lcnJvcihg8J+MkCBHbG9iYWwgZXJyb3IgKCR7dHlwZX0pOmAsIGVycm9yKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVSZXNvdXJjZUVycm9yKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlc291cmNlVHlwZSA9IHRhcmdldC50YWdOYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICd1bmtub3duJ1xuICAgIGNvbnN0IHNyYyA9ICh0YXJnZXQgYXMgYW55KS5zcmMgfHwgKHRhcmdldCBhcyBhbnkpLmhyZWYgfHwgJ3Vua25vd24nXG5cbiAgICBjb25zb2xlLndhcm4oYPCfk6YgUmVzb3VyY2UgbG9hZGluZyBlcnJvciAoJHtyZXNvdXJjZVR5cGV9KTpgLCBzcmMpXG5cbiAgICAvLyBJbnRlbnRhciByZWNhcmdhciByZWN1cnNvcyBjcsOtdGljb3NcbiAgICBpZiAocmVzb3VyY2VUeXBlID09PSAnc2NyaXB0JyAmJiBzcmMuaW5jbHVkZXMoJ2NodW5rJykpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH0sIDIwMDApXG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTElTVEVORVJTIFkgTcOJVFJJQ0FTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgYWRkRXJyb3JMaXN0ZW5lcihsaXN0ZW5lcjogKGVycm9yOiBFcnJvck1ldHJpY3MpID0+IHZvaWQpIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKVxuICB9XG5cbiAgcmVtb3ZlRXJyb3JMaXN0ZW5lcihsaXN0ZW5lcjogKGVycm9yOiBFcnJvck1ldHJpY3MpID0+IHZvaWQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG5vdGlmeUxpc3RlbmVycyhlcnJvcjogRXJyb3JNZXRyaWNzKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBsaXN0ZW5lcihlcnJvcilcbiAgICAgIH0gY2F0Y2ggKGxpc3RlbmVyRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluIGVycm9yIGxpc3RlbmVyOicsIGxpc3RlbmVyRXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIE3DiVRSSUNBUyBZIFJFUE9SVEVTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZ2V0RXJyb3JNZXRyaWNzKCk6IHtcbiAgICB0b3RhbEVycm9yczogbnVtYmVyXG4gICAgZXJyb3JzQnlUeXBlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+XG4gICAgZXJyb3JzQnlDb21wb25lbnQ6IFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICBlcnJvcnNCeUltcGFjdDogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgIHBhdHRlcm5zOiBFcnJvclBhdHRlcm5bXVxuICAgIHJlY2VudEVycm9yczogRXJyb3JNZXRyaWNzW11cbiAgfSB7XG4gICAgY29uc3QgZXJyb3JzID0gQXJyYXkuZnJvbSh0aGlzLmVycm9ycy52YWx1ZXMoKSlcbiAgICBjb25zdCBwYXR0ZXJucyA9IEFycmF5LmZyb20odGhpcy5wYXR0ZXJucy52YWx1ZXMoKSlcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEVycm9yczogZXJyb3JzLmxlbmd0aCxcbiAgICAgIGVycm9yc0J5VHlwZTogdGhpcy5ncm91cEJ5KGVycm9ycywgJ2Vycm9yVHlwZScpLFxuICAgICAgZXJyb3JzQnlDb21wb25lbnQ6IHRoaXMuZ3JvdXBCeShlcnJvcnMsICdjb21wb25lbnQnKSxcbiAgICAgIGVycm9yc0J5SW1wYWN0OiB0aGlzLmdyb3VwQnkoZXJyb3JzLCAndXNlckltcGFjdCcpLFxuICAgICAgcGF0dGVybnM6IHBhdHRlcm5zLnNvcnQoKGEsIGIpID0+IGIuZnJlcXVlbmN5IC0gYS5mcmVxdWVuY3kpLFxuICAgICAgcmVjZW50RXJyb3JzOiBlcnJvcnMuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcCkuc2xpY2UoMCwgMTApLFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ3JvdXBCeTxUPihhcnJheTogVFtdLCBrZXk6IGtleW9mIFQpOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKFxuICAgICAgKGFjYywgaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IFN0cmluZyhpdGVtW2tleV0pXG4gICAgICAgIGFjY1t2YWx1ZV0gPSAoYWNjW3ZhbHVlXSB8fCAwKSArIDFcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSxcbiAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICApXG4gIH1cblxuICBjbGVhck9sZEVycm9ycyhtYXhBZ2U6IG51bWJlciA9IDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAvLyAyNCBob3JhcyBwb3IgZGVmZWN0b1xuICAgIGNvbnN0IGN1dG9mZiA9IERhdGUubm93KCkgLSBtYXhBZ2VcblxuICAgIGZvciAoY29uc3QgW2Vycm9ySWQsIGVycm9yXSBvZiB0aGlzLmVycm9ycy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChlcnJvci50aW1lc3RhbXAgPCBjdXRvZmYpIHtcbiAgICAgICAgdGhpcy5lcnJvcnMuZGVsZXRlKGVycm9ySWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBbcGF0dGVybktleSwgcGF0dGVybl0gb2YgdGhpcy5wYXR0ZXJucy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChwYXR0ZXJuLmxhc3RPY2N1cnJlbmNlIDwgY3V0b2ZmKSB7XG4gICAgICAgIHRoaXMucGF0dGVybnMuZGVsZXRlKHBhdHRlcm5LZXkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVVRJTElEQURFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGdldEhlYWx0aFN0YXR1cygpOiB7XG4gICAgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ2NyaXRpY2FsJ1xuICAgIGVycm9yUmF0ZTogbnVtYmVyXG4gICAgY3JpdGljYWxFcnJvcnM6IG51bWJlclxuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW11cbiAgfSB7XG4gICAgY29uc3QgZXJyb3JzID0gQXJyYXkuZnJvbSh0aGlzLmVycm9ycy52YWx1ZXMoKSlcbiAgICBjb25zdCByZWNlbnRFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGUgPT4gZS50aW1lc3RhbXAgPiBEYXRlLm5vdygpIC0gNjAwMDApIC8vIMOabHRpbW9zIDYwIHNlZ3VuZG9zXG4gICAgY29uc3QgY3JpdGljYWxFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGUgPT4gZS51c2VySW1wYWN0ID09PSAnY3JpdGljYWwnKS5sZW5ndGhcblxuICAgIGNvbnN0IGVycm9yUmF0ZSA9IHJlY2VudEVycm9ycy5sZW5ndGhcbiAgICBsZXQgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ2NyaXRpY2FsJyA9ICdoZWFsdGh5J1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKGNyaXRpY2FsRXJyb3JzID4gMCkge1xuICAgICAgc3RhdHVzID0gJ2NyaXRpY2FsJ1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1Jlc29sdmVyIGVycm9yZXMgY3LDrXRpY29zIGlubWVkaWF0YW1lbnRlJylcbiAgICB9IGVsc2UgaWYgKGVycm9yUmF0ZSA+IDUpIHtcbiAgICAgIHN0YXR1cyA9ICdkZWdyYWRlZCdcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdBbHRhIHRhc2EgZGUgZXJyb3JlcyBkZXRlY3RhZGEnKVxuICAgIH1cblxuICAgIC8vIEFuYWxpemFyIHBhdHJvbmVzIGZyZWN1ZW50ZXNcbiAgICBjb25zdCBmcmVxdWVudFBhdHRlcm5zID0gQXJyYXkuZnJvbSh0aGlzLnBhdHRlcm5zLnZhbHVlcygpKS5maWx0ZXIocCA9PiBwLmZyZXF1ZW5jeSA+PSAzKVxuXG4gICAgaWYgKGZyZXF1ZW50UGF0dGVybnMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1JldmlzYXIgcGF0cm9uZXMgZGUgZXJyb3JlcyBmcmVjdWVudGVzJylcbiAgICAgIGlmIChzdGF0dXMgPT09ICdoZWFsdGh5Jykge1xuICAgICAgICBzdGF0dXMgPSAnZGVncmFkZWQnXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIGVycm9yUmF0ZSxcbiAgICAgIGNyaXRpY2FsRXJyb3JzLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhQT1JUXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgZXJyb3JCb3VuZGFyeU1hbmFnZXIgPSBFcnJvckJvdW5kYXJ5TWFuYWdlci5nZXRJbnN0YW5jZSgpXG5leHBvcnQgZGVmYXVsdCBFcnJvckJvdW5kYXJ5TWFuYWdlclxuIl0sIm5hbWVzIjpbImVycm9yQm91bmRhcnlNYW5hZ2VyIiwiRXJyb3JCb3VuZGFyeU1hbmFnZXIiLCJlcnJvcnMiLCJNYXAiLCJwYXR0ZXJucyIsImNvbmZpZ3MiLCJsaXN0ZW5lcnMiLCJpbml0aWFsaXplRGVmYXVsdENvbmZpZ3MiLCJzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwic2V0IiwibGV2ZWwiLCJlbmFibGVSZXRyeSIsIm1heFJldHJpZXMiLCJyZXRyeURlbGF5IiwiZW5hYmxlQXV0b1JlY292ZXJ5IiwicmVjb3ZlcnlUaW1lb3V0IiwiZW5hYmxlUmVwb3J0aW5nIiwiZ2V0Q29uZmlnIiwiZ2V0IiwidXBkYXRlQ29uZmlnIiwiY29uZmlnIiwiY3VycmVudENvbmZpZyIsInJlcG9ydEVycm9yIiwiZXJyb3IiLCJlcnJvckluZm8iLCJjb250ZXh0IiwiZXJyb3JUeXBlIiwiY2xhc3NpZnlFcnJvciIsInVzZXJJbXBhY3QiLCJhc3Nlc3NVc2VySW1wYWN0IiwidmVyY2VsUmVxdWVzdElkIiwiZXh0cmFjdFZlcmNlbFJlcXVlc3RJZCIsImNvcnJlbGF0aW9uSWQiLCJnZW5lcmF0ZUNvcnJlbGF0aW9uSWQiLCJjb21wb25lbnQiLCJlcnJvck1ldHJpY3MiLCJlcnJvcklkIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJldHJ5Q291bnQiLCJyZXNvbHZlZCIsImJ1aWxkSWQiLCJwcm9jZXNzIiwiZW52IiwiVkVSQ0VMX0dJVF9DT01NSVRfU0hBIiwibmV4dGpzVmVyc2lvbiIsImdldE5leHRKU1ZlcnNpb24iLCJtZXRhZGF0YUVycm9ycyIsImV4dHJhY3RNZXRhZGF0YUVycm9ycyIsImRldGVjdEVycm9yUGF0dGVybiIsIm5vdGlmeUxpc3RlbmVycyIsInNob3VsZFJlcG9ydEV4dGVybmFsbHkiLCJyZXBvcnRUb0V4dGVybmFsU3lzdGVtcyIsIndpbmRvdyIsInVuZGVmaW5lZCIsImhlYWRlcnMiLCJyZXF1aXJlIiwiaGVhZGVyc0xpc3QiLCJlcnJvclNpZ25hdHVyZSIsIm5hbWUiLCJtZXNzYWdlIiwic3Vic3RyaW5nIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwicGFja2FnZUpzb24iLCJkZXBlbmRlbmNpZXMiLCJuZXh0IiwiZXJyb3JNZXNzYWdlIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInB1c2giLCJtYXJrRXJyb3JSZXNvbHZlZCIsInJlc29sdXRpb25UaW1lIiwic3RhY2siLCJwYXR0ZXJuS2V5IiwiZXhpc3RpbmciLCJmcmVxdWVuY3kiLCJsYXN0T2NjdXJyZW5jZSIsImFmZmVjdGVkQ29tcG9uZW50cyIsInBhdHRlcm4iLCJzdWdnZXN0ZWRGaXgiLCJnZXRTdWdnZXN0ZWRGaXgiLCJBcnJheSIsInZhbHVlcyIsImZpbmQiLCJwIiwibG9nZ2VyIiwiTG9nTGV2ZWwiLCJMb2dDYXRlZ29yeSIsImxvZ1ZlcmNlbCIsImxvZ05leHRKUyIsImxlbmd0aCIsIkVSUk9SIiwicm91dGUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicmVxdWVzdElkIiwiYnVpbGRXYXJuaW5ncyIsInVzZXJJZCIsInNwbGl0Iiwic2Vzc2lvbklkIiwiZ2V0U2Vzc2lvbklkIiwiU0VDVVJJVFkiLCJzdXBhYmFzZSIsInJlcG9ydFRvU3VwYWJhc2VBbmFseXRpY3MiLCJjb25zb2xlIiwiaW5zZXJ0IiwiZXZlbnRfbmFtZSIsImNhdGVnb3J5IiwiYWN0aW9uIiwibGFiZWwiLCJ2YWx1ZSIsIm1ldGFkYXRhIiwiZXJyb3JTdGFjayIsInBhZ2UiLCJ1c2VyX2FnZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYW5hbHl0aWNzRXJyb3IiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJNYXRoIiwicmFuZG9tIiwic2V0SXRlbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImhhbmRsZUdsb2JhbEVycm9yIiwicmVhc29uIiwidGFyZ2V0IiwiaGFuZGxlUmVzb3VyY2VFcnJvciIsInR5cGUiLCJzdWJzdHIiLCJyZXNvdXJjZVR5cGUiLCJ0YWdOYW1lIiwic3JjIiwiaHJlZiIsIndhcm4iLCJzZXRUaW1lb3V0IiwicmVsb2FkIiwiYWRkRXJyb3JMaXN0ZW5lciIsImxpc3RlbmVyIiwicmVtb3ZlRXJyb3JMaXN0ZW5lciIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZvckVhY2giLCJsaXN0ZW5lckVycm9yIiwiZ2V0RXJyb3JNZXRyaWNzIiwidG90YWxFcnJvcnMiLCJlcnJvcnNCeVR5cGUiLCJncm91cEJ5IiwiZXJyb3JzQnlDb21wb25lbnQiLCJlcnJvcnNCeUltcGFjdCIsInNvcnQiLCJhIiwiYiIsInJlY2VudEVycm9ycyIsInNsaWNlIiwiYXJyYXkiLCJrZXkiLCJyZWR1Y2UiLCJhY2MiLCJpdGVtIiwiU3RyaW5nIiwiY2xlYXJPbGRFcnJvcnMiLCJtYXhBZ2UiLCJjdXRvZmYiLCJlbnRyaWVzIiwiZGVsZXRlIiwiZ2V0SGVhbHRoU3RhdHVzIiwiZmlsdGVyIiwiZSIsImNyaXRpY2FsRXJyb3JzIiwiZXJyb3JSYXRlIiwic3RhdHVzIiwi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