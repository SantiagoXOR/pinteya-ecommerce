dbcd5fb92bebf439797613a9767f26a0
// ===================================
// HOOK: useSearchOptimized - Sistema de b√∫squeda con TanStack Query
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return _default;
    },
    get useSearchOptimized () {
        return useSearchOptimized;
    }
});
const _react = require("react");
const _reactquery = require("@tanstack/react-query");
const _usedebounce = require("use-debounce");
const _products = require("../lib/api/products");
const _queryclient = require("../lib/query-client");
const _useSearchErrorHandler = require("./useSearchErrorHandler");
const _useSearchToast = require("./useSearchToast");
const _useSearchNavigation = require("./useSearchNavigation");
const _useTrendingSearches = require("./useTrendingSearches");
const _useRecentSearches = require("./useRecentSearches");
const _shop = require("../constants/shop");
function useSearchOptimized(options = {}) {
    const { debounceMs = 150, maxSuggestions = 6, searchLimit = 12, saveRecentSearches = true, enablePrefetch = true, onSearch, onSuggestionSelect } = options;
    // Estados locales
    const [query, setQuery] = (0, _react.useState)('');
    const [debouncedQuery, setDebouncedQuery] = (0, _react.useState)('');
    const [recentSearches, setRecentSearches] = (0, _react.useState)([]);
    const [hasSearched, setHasSearched] = (0, _react.useState)(false);
    // Hooks externos
    const queryClient = (0, _reactquery.useQueryClient)();
    const errorHandler = (0, _useSearchErrorHandler.useSearchErrorHandler)();
    const toastHandler = (0, _useSearchToast.useSearchToast)();
    const navigation = (0, _useSearchNavigation.useSearchNavigation)({
        scrollToTop: true,
        onBeforeNavigate: (url)=>console.log('üîç Navegando a:', url),
        onAfterNavigate: (url)=>console.log('‚úÖ Navegaci√≥n completada:', url)
    });
    // Hooks para trending y recent searches
    const { trendingSearches, trackSearch } = (0, _useTrendingSearches.useTrendingSearches)({
        limit: 4,
        enabled: true
    });
    // Debug para trending searches
    if (process.env.NODE_ENV === 'development') {
        console.log('üî• useSearchOptimized: Trending searches state:', {
            trendingSearches: trendingSearches?.length || 0,
            trendingSearchesData: trendingSearches?.map((t)=>({
                    id: t.id,
                    query: t.query
                })) || []
        });
    }
    const { recentSearches: recentSearchesList, addSearch: addRecentSearch, getRecentSearches } = (0, _useRecentSearches.useRecentSearches)({
        maxSearches: _shop.SEARCH_CONSTANTS.MAX_RECENT_SEARCHES,
        enablePersistence: saveRecentSearches,
        expirationDays: _shop.SEARCH_CONSTANTS.RECENT_SEARCHES_EXPIRATION_DAYS
    });
    // ===================================
    // DEBOUNCED QUERY UPDATE
    // ===================================
    const updateDebouncedQuery = (0, _usedebounce.useDebouncedCallback)((value)=>{
        setDebouncedQuery(value);
        // Analytics tracking
        if (value.trim() && process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: Query enabled condition will be:', !!value?.trim());
        }
    }, debounceMs, {
        maxWait: 2000,
        leading: false,
        trailing: true
    });
    // ===================================
    // TANSTACK QUERY INTEGRATION
    // ===================================
    // Query principal para b√∫squedas
    const { data: searchResults, isLoading, error, isFetching, isStale, dataUpdatedAt } = (0, _reactquery.useQuery)({
        queryKey: _queryclient.searchQueryKeys.search(debouncedQuery),
        queryFn: async ({ queryKey, signal })=>{
            const [, , searchQuery] = queryKey;
            if (!searchQuery?.trim()) {
                return [];
            }
            try {
                // Usar la API de b√∫squeda correcta
                const url = `/api/search?q=${encodeURIComponent(searchQuery)}&limit=${maxSuggestions}`;
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    signal
                });
                if (!response.ok) {
                    console.error('üîç useSearchOptimized: API response not ok:', response.status);
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data.products || [];
            } catch (error) {
                console.error('üîç useSearchOptimized: API call failed:', error);
                throw error;
            }
        },
        enabled: !!debouncedQuery?.trim() && debouncedQuery.length >= 2,
        ..._queryclient.searchQueryConfig
    });
    // ===================================
    // SUGGESTIONS GENERATION
    // ===================================
    if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
        console.log('üîç useSearchOptimized: Current state before suggestions:', {
            query,
            debouncedQuery,
            searchResults: searchResults?.length || 0,
            isLoading,
            error: !!error
        });
    }
    const suggestions = (0, _react.useMemo)(()=>{
        const allSuggestions = [];
        const hasQuery = !!debouncedQuery?.trim();
        if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: query (current):', `"${query}"`);
            console.log('üîç useSearchOptimized: searchResults isArray:', Array.isArray(searchResults));
        }
        if (hasQuery) {
            // CUANDO HAY TEXTO: Priorizar productos SIEMPRE
            // Extraer productos de la respuesta de la API
            let products = [];
            // Si searchResults es un array directamente
            if (Array.isArray(searchResults)) {
                products = searchResults;
            } else if (searchResults && typeof searchResults === 'object' && Array.isArray(searchResults.data)) {
                products = searchResults.data;
            } else if (searchResults && typeof searchResults === 'object' && Array.isArray(searchResults.products)) {
                products = searchResults.products;
            }
            if (products.length > 0) {
                const productSuggestions = products.map((product)=>{
                    return {
                        id: product.id.toString(),
                        type: 'product',
                        title: product.name,
                        subtitle: product.category?.name,
                        image: product.images?.previews?.[0] || product.images?.thumbnails?.[0],
                        badge: product.stock > 0 ? 'En stock' : 'Sin stock',
                        href: `/products/${product.id}`
                    };
                });
                allSuggestions.push(...productSuggestions);
            } else {
                if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
                    console.log('üîç useSearchOptimized: searchResults structure:', {
                        isArray: Array.isArray(searchResults),
                        hasData: searchResults?.data ? 'yes' : 'no',
                        hasProducts: searchResults?.products ? 'yes' : 'no',
                        dataLength: searchResults?.data?.length,
                        productsLength: searchResults?.products?.length,
                        keys: searchResults ? Object.keys(searchResults) : 'null'
                    });
                }
            }
            // Solo agregar recent/trending si hay muy pocos productos
            if (allSuggestions.length < 2) {
                const recentSuggestions = getRecentSearches(2).map((search, index)=>({
                        id: `recent-${index}`,
                        type: 'recent',
                        title: search,
                        href: `/shop?q=${encodeURIComponent(search)}`
                    }));
                allSuggestions.push(...recentSuggestions);
            }
        } else {
            // CUANDO NO HAY TEXTO: Mostrar trending y recent
            // Agregar b√∫squedas recientes primero
            const recentSuggestions = getRecentSearches(3).map((search, index)=>({
                    id: `recent-${index}`,
                    type: 'recent',
                    title: search,
                    href: `/shop?q=${encodeURIComponent(search)}`
                }));
            allSuggestions.push(...recentSuggestions);
            // Agregar trending searches
            if (allSuggestions.length < maxSuggestions) {
                const remainingSlots = maxSuggestions - allSuggestions.length;
                const trendingSuggestions = trendingSearches.slice(0, remainingSlots).map((trending)=>({
                        id: trending.id,
                        type: 'trending',
                        title: trending.query,
                        href: trending.href,
                        badge: trending.count ? `${trending.count}` : undefined
                    }));
                allSuggestions.push(...trendingSuggestions);
            }
        }
        const finalSuggestions = allSuggestions.slice(0, maxSuggestions);
        if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_SEARCH === 'true') {
            console.log('üîç useSearchOptimized: Final suggestions types:', finalSuggestions.map((s)=>s.type));
            console.log('üîç useSearchOptimized: Final suggestions titles:', finalSuggestions.map((s)=>s.title));
        }
        return finalSuggestions;
    }, [
        debouncedQuery,
        searchResults,
        isLoading,
        error,
        maxSuggestions,
        trendingSearches
    ]);
    // ===================================
    // SEARCH FUNCTIONS
    // ===================================
    const searchWithDebounce = (0, _react.useCallback)((searchQuery)=>{
        setQuery(searchQuery);
        updateDebouncedQuery(searchQuery);
        // Prefetch si est√° habilitado y la query es v√°lida
        if (enablePrefetch && searchQuery.trim().length >= 1) {
            // Prefetch de datos de b√∫squeda
            queryClient.prefetchQuery({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery),
                queryFn: ()=>(0, _products.searchProducts)(searchQuery, maxSuggestions),
                ..._queryclient.searchQueryConfig
            });
            // Prefetch de p√°gina de resultados
            navigation.prefetchSearch(searchQuery.trim());
        }
    }, [
        updateDebouncedQuery,
        enablePrefetch,
        queryClient,
        maxSuggestions,
        navigation
    ]);
    const executeSearch = (0, _react.useCallback)(async (searchQuery)=>{
        if (!searchQuery.trim()) {
            return;
        }
        try {
            setHasSearched(true);
            // Guardar en historial usando el hook
            if (saveRecentSearches) {
                addRecentSearch(searchQuery.trim());
            }
            // Registrar en trending searches
            trackSearch(searchQuery.trim()).catch(console.warn);
            // Navegar a p√°gina de resultados usando navegaci√≥n optimizada
            navigation.navigateToSearch(searchQuery.trim());
            // Callback externo
            if (onSearch && searchResults) {
                onSearch(searchQuery, searchResults);
            }
            toastHandler.showSuccessToast(searchQuery, searchResults?.length || 0);
        } catch (error) {
            console.error('‚ùå useSearchOptimized: Error en executeSearch:', error);
            errorHandler.handleError(error);
        }
    }, [
        saveRecentSearches,
        recentSearches,
        navigation,
        onSearch,
        searchResults,
        toastHandler,
        errorHandler
    ]);
    const selectSuggestion = (0, _react.useCallback)((suggestion)=>{
        // Navegar seg√∫n el tipo de sugerencia
        if (suggestion.type === 'product') {
            navigation.navigateToProduct(suggestion.id);
        } else {
            // Para b√∫squedas recientes o trending, navegar a b√∫squeda
            navigation.navigateToSearch(suggestion.title);
        }
        // Callback externo
        if (onSuggestionSelect) {
            onSuggestionSelect(suggestion);
        }
        toastHandler.showInfoToast(`${suggestion.type === 'product' ? 'Producto' : 'B√∫squeda'} seleccionado`, suggestion.title);
    }, [
        navigation,
        onSuggestionSelect,
        toastHandler
    ]);
    const clearSearch = (0, _react.useCallback)(()=>{
        setQuery('');
        setDebouncedQuery('');
        setHasSearched(false);
        // Limpiar cache de b√∫squedas si es necesario
        queryClient.removeQueries({
            queryKey: _queryclient.searchQueryKeys.searches()
        });
    }, [
        queryClient
    ]);
    // ===================================
    // LIFECYCLE
    // ===================================
    const initialize = (0, _react.useCallback)(()=>{
        // Cargar b√∫squedas recientes
        if (saveRecentSearches) {
            try {
                const saved = localStorage.getItem('pinteya-recent-searches');
                if (saved && saved.trim() !== '' && saved !== '""' && saved !== "''") {
                    // Validar que no est√© corrupto
                    if (saved.includes('""') && saved.length < 5) {
                        console.warn('Detected corrupted recent searches data, cleaning up');
                        localStorage.removeItem('pinteya-recent-searches');
                        return;
                    }
                    const parsed = JSON.parse(saved);
                    // Verificar que sea un array v√°lido
                    if (Array.isArray(parsed)) {
                        setRecentSearches(parsed);
                    } else {
                        console.warn('Invalid recent searches format, resetting');
                        localStorage.removeItem('pinteya-recent-searches');
                    }
                }
            } catch (error) {
                console.warn('Error cargando b√∫squedas recientes:', error);
                // Limpiar datos corruptos
                localStorage.removeItem('pinteya-recent-searches');
            }
        }
    }, [
        saveRecentSearches
    ]);
    const cleanup = (0, _react.useCallback)(()=>{
        // Limpiar debounce y cache si es necesario
        updateDebouncedQuery.cancel();
    }, [
        updateDebouncedQuery
    ]);
    // Inicializar al montar
    (0, _react.useEffect)(()=>{
        initialize();
        return cleanup;
    }, [
        initialize,
        cleanup
    ]);
    // ===================================
    // RETURN
    // ===================================
    return {
        // Estado de b√∫squeda
        query,
        results: searchResults || [],
        suggestions,
        isLoading,
        error: error?.message || null,
        hasSearched,
        recentSearches: recentSearchesList,
        trendingSearches,
        // Estados de TanStack Query
        isFetching,
        isStale,
        dataUpdatedAt,
        // Estado de errores y toasts
        searchError: errorHandler.currentError,
        isRetrying: errorHandler.isRetrying,
        retryCount: errorHandler.retryCount,
        toasts: toastHandler.toasts,
        // Funciones principales
        searchWithDebounce,
        executeSearch,
        selectSuggestion,
        clearSearch,
        initialize,
        cleanup,
        // Funciones de manejo de errores
        clearError: errorHandler.clearError,
        retryManually: errorHandler.retryManually,
        // Funciones de toast
        removeToast: toastHandler.removeToast,
        clearToasts: toastHandler.clearToasts,
        // Utilidades de cache
        invalidateSearch: (searchQuery)=>queryClient.invalidateQueries({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery)
            }),
        prefetchSearch: (searchQuery)=>queryClient.prefetchQuery({
                queryKey: _queryclient.searchQueryKeys.search(searchQuery),
                queryFn: ()=>(0, _products.searchProducts)(searchQuery, maxSuggestions),
                ..._queryclient.searchQueryConfig
            }),
        // Funciones de navegaci√≥n optimizada
        navigateToSearch: navigation.navigateToSearch,
        navigateToProduct: navigation.navigateToProduct,
        navigateToCategory: navigation.navigateToCategory,
        prefetchSearchPage: navigation.prefetchSearch,
        prefetchProductPage: navigation.prefetchProduct,
        getCurrentSearchQuery: navigation.getCurrentSearchQuery,
        buildSearchUrl: navigation.buildSearchUrl
    };
}
const _default = useSearchOptimized;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZVNlYXJjaE9wdGltaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBIT09LOiB1c2VTZWFyY2hPcHRpbWl6ZWQgLSBTaXN0ZW1hIGRlIGLDunNxdWVkYSBjb24gVGFuU3RhY2sgUXVlcnlcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VRdWVyeUNsaWVudCB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XHJcbmltcG9ydCB7IHVzZURlYm91bmNlZENhbGxiYWNrIH0gZnJvbSAndXNlLWRlYm91bmNlJztcclxuaW1wb3J0IHsgc2VhcmNoUHJvZHVjdHMgfSBmcm9tICdAL2xpYi9hcGkvcHJvZHVjdHMnO1xyXG5pbXBvcnQgeyBQcm9kdWN0V2l0aENhdGVnb3J5IH0gZnJvbSAnQC90eXBlcy9hcGknO1xyXG5pbXBvcnQgeyBzZWFyY2hRdWVyeUtleXMsIHNlYXJjaFF1ZXJ5Q29uZmlnIH0gZnJvbSAnQC9saWIvcXVlcnktY2xpZW50JztcclxuaW1wb3J0IHsgdXNlU2VhcmNoRXJyb3JIYW5kbGVyIH0gZnJvbSAnLi91c2VTZWFyY2hFcnJvckhhbmRsZXInO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hUb2FzdCB9IGZyb20gJy4vdXNlU2VhcmNoVG9hc3QnO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hOYXZpZ2F0aW9uIH0gZnJvbSAnLi91c2VTZWFyY2hOYXZpZ2F0aW9uJztcclxuaW1wb3J0IHsgdXNlVHJlbmRpbmdTZWFyY2hlcyB9IGZyb20gJy4vdXNlVHJlbmRpbmdTZWFyY2hlcyc7XHJcbmltcG9ydCB7IHVzZVJlY2VudFNlYXJjaGVzIH0gZnJvbSAnLi91c2VSZWNlbnRTZWFyY2hlcyc7XHJcbmltcG9ydCB7IFNFQVJDSF9DT05TVEFOVFMgfSBmcm9tICdAL2NvbnN0YW50cy9zaG9wJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFN1Z2dlc3Rpb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdHlwZTogJ3Byb2R1Y3QnIHwgJ2NhdGVnb3J5JyB8ICdyZWNlbnQnIHwgJ3RyZW5kaW5nJztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHN1YnRpdGxlPzogc3RyaW5nO1xyXG4gIGltYWdlPzogc3RyaW5nO1xyXG4gIGJhZGdlPzogc3RyaW5nO1xyXG4gIGhyZWY6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VTZWFyY2hPcHRpbWl6ZWRPcHRpb25zIHtcclxuICAvKiogVGllbXBvIGRlIGRlYm91bmNlIGVuIG1pbGlzZWd1bmRvcyAqL1xyXG4gIGRlYm91bmNlTXM/OiBudW1iZXI7XHJcbiAgLyoqIE7Dum1lcm8gbcOheGltbyBkZSBzdWdlcmVuY2lhcyAqL1xyXG4gIG1heFN1Z2dlc3Rpb25zPzogbnVtYmVyO1xyXG4gIC8qKiBMw61taXRlIGRlIHJlc3VsdGFkb3MgZGUgYsO6c3F1ZWRhICovXHJcbiAgc2VhcmNoTGltaXQ/OiBudW1iZXI7XHJcbiAgLyoqIEd1YXJkYXIgYsO6c3F1ZWRhcyByZWNpZW50ZXMgKi9cclxuICBzYXZlUmVjZW50U2VhcmNoZXM/OiBib29sZWFuO1xyXG4gIC8qKiBIYWJpbGl0YXIgcHJlZmV0Y2ggZGUgc3VnZXJlbmNpYXMgKi9cclxuICBlbmFibGVQcmVmZXRjaD86IGJvb2xlYW47XHJcbiAgLyoqIENhbGxiYWNrIGN1YW5kbyBzZSByZWFsaXphIHVuYSBiw7pzcXVlZGEgKi9cclxuICBvblNlYXJjaD86IChxdWVyeTogc3RyaW5nLCByZXN1bHRzOiBQcm9kdWN0V2l0aENhdGVnb3J5W10pID0+IHZvaWQ7XHJcbiAgLyoqIENhbGxiYWNrIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuYSBzdWdlcmVuY2lhICovXHJcbiAgb25TdWdnZXN0aW9uU2VsZWN0PzogKHN1Z2dlc3Rpb246IFNlYXJjaFN1Z2dlc3Rpb24pID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhPT0sgUFJJTkNJUEFMXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlU2VhcmNoT3B0aW1pemVkKG9wdGlvbnM6IFVzZVNlYXJjaE9wdGltaXplZE9wdGlvbnMgPSB7fSkge1xyXG4gIGNvbnN0IHtcclxuICAgIGRlYm91bmNlTXMgPSAxNTAsXHJcbiAgICBtYXhTdWdnZXN0aW9ucyA9IDYsXHJcbiAgICBzZWFyY2hMaW1pdCA9IDEyLFxyXG4gICAgc2F2ZVJlY2VudFNlYXJjaGVzID0gdHJ1ZSxcclxuICAgIGVuYWJsZVByZWZldGNoID0gdHJ1ZSxcclxuICAgIG9uU2VhcmNoLFxyXG4gICAgb25TdWdnZXN0aW9uU2VsZWN0LFxyXG4gIH0gPSBvcHRpb25zO1xyXG5cclxuICAvLyBFc3RhZG9zIGxvY2FsZXNcclxuICBjb25zdCBbcXVlcnksIHNldFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbZGVib3VuY2VkUXVlcnksIHNldERlYm91bmNlZFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbcmVjZW50U2VhcmNoZXMsIHNldFJlY2VudFNlYXJjaGVzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XHJcbiAgY29uc3QgW2hhc1NlYXJjaGVkLCBzZXRIYXNTZWFyY2hlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vIEhvb2tzIGV4dGVybm9zXHJcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xyXG4gIGNvbnN0IGVycm9ySGFuZGxlciA9IHVzZVNlYXJjaEVycm9ySGFuZGxlcigpO1xyXG4gIGNvbnN0IHRvYXN0SGFuZGxlciA9IHVzZVNlYXJjaFRvYXN0KCk7XHJcbiAgY29uc3QgbmF2aWdhdGlvbiA9IHVzZVNlYXJjaE5hdmlnYXRpb24oe1xyXG4gICAgc2Nyb2xsVG9Ub3A6IHRydWUsXHJcbiAgICBvbkJlZm9yZU5hdmlnYXRlOiAodXJsKSA9PiBjb25zb2xlLmxvZygn8J+UjSBOYXZlZ2FuZG8gYTonLCB1cmwpLFxyXG4gICAgb25BZnRlck5hdmlnYXRlOiAodXJsKSA9PiBjb25zb2xlLmxvZygn4pyFIE5hdmVnYWNpw7NuIGNvbXBsZXRhZGE6JywgdXJsKSxcclxuICB9KTtcclxuXHJcbiAgLy8gSG9va3MgcGFyYSB0cmVuZGluZyB5IHJlY2VudCBzZWFyY2hlc1xyXG4gIGNvbnN0IHsgdHJlbmRpbmdTZWFyY2hlcywgdHJhY2tTZWFyY2ggfSA9IHVzZVRyZW5kaW5nU2VhcmNoZXMoe1xyXG4gICAgbGltaXQ6IDQsXHJcbiAgICBlbmFibGVkOiB0cnVlXHJcbiAgfSk7XHJcblxyXG4gIC8vIERlYnVnIHBhcmEgdHJlbmRpbmcgc2VhcmNoZXNcclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5SlIHVzZVNlYXJjaE9wdGltaXplZDogVHJlbmRpbmcgc2VhcmNoZXMgc3RhdGU6Jywge1xyXG4gICAgICB0cmVuZGluZ1NlYXJjaGVzOiB0cmVuZGluZ1NlYXJjaGVzPy5sZW5ndGggfHwgMCxcclxuICAgICAgdHJlbmRpbmdTZWFyY2hlc0RhdGE6IHRyZW5kaW5nU2VhcmNoZXM/Lm1hcCh0ID0+ICh7IGlkOiB0LmlkLCBxdWVyeTogdC5xdWVyeSB9KSkgfHwgW11cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qge1xyXG4gICAgcmVjZW50U2VhcmNoZXM6IHJlY2VudFNlYXJjaGVzTGlzdCxcclxuICAgIGFkZFNlYXJjaDogYWRkUmVjZW50U2VhcmNoLFxyXG4gICAgZ2V0UmVjZW50U2VhcmNoZXNcclxuICB9ID0gdXNlUmVjZW50U2VhcmNoZXMoe1xyXG4gICAgbWF4U2VhcmNoZXM6IFNFQVJDSF9DT05TVEFOVFMuTUFYX1JFQ0VOVF9TRUFSQ0hFUyxcclxuICAgIGVuYWJsZVBlcnNpc3RlbmNlOiBzYXZlUmVjZW50U2VhcmNoZXMsXHJcbiAgICBleHBpcmF0aW9uRGF5czogU0VBUkNIX0NPTlNUQU5UUy5SRUNFTlRfU0VBUkNIRVNfRVhQSVJBVElPTl9EQVlTXHJcbiAgfSk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gREVCT1VOQ0VEIFFVRVJZIFVQREFURVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGNvbnN0IHVwZGF0ZURlYm91bmNlZFF1ZXJ5ID0gdXNlRGVib3VuY2VkQ2FsbGJhY2soXHJcbiAgICAodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBzZXREZWJvdW5jZWRRdWVyeSh2YWx1ZSk7XHJcblxyXG4gICAgICAvLyBBbmFseXRpY3MgdHJhY2tpbmdcclxuICAgICAgaWYgKHZhbHVlLnRyaW0oKSAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERUJVR19TRUFSQ0ggPT09ICd0cnVlJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIHVzZVNlYXJjaE9wdGltaXplZDogUXVlcnkgZW5hYmxlZCBjb25kaXRpb24gd2lsbCBiZTonLCAhIXZhbHVlPy50cmltKCkpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGVib3VuY2VNcyxcclxuICAgIHtcclxuICAgICAgbWF4V2FpdDogMjAwMCxcclxuICAgICAgbGVhZGluZzogZmFsc2UsXHJcbiAgICAgIHRyYWlsaW5nOiB0cnVlLFxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gVEFOU1RBQ0sgUVVFUlkgSU5URUdSQVRJT05cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvLyBRdWVyeSBwcmluY2lwYWwgcGFyYSBiw7pzcXVlZGFzXHJcbiAgY29uc3QgeyBcclxuICAgIGRhdGE6IHNlYXJjaFJlc3VsdHMsIFxyXG4gICAgaXNMb2FkaW5nLCBcclxuICAgIGVycm9yLCBcclxuICAgIGlzRmV0Y2hpbmcsXHJcbiAgICBpc1N0YWxlLFxyXG4gICAgZGF0YVVwZGF0ZWRBdCBcclxuICB9ID0gdXNlUXVlcnkoe1xyXG4gICAgcXVlcnlLZXk6IHNlYXJjaFF1ZXJ5S2V5cy5zZWFyY2goZGVib3VuY2VkUXVlcnkpLFxyXG4gICAgcXVlcnlGbjogYXN5bmMgKHsgcXVlcnlLZXksIHNpZ25hbCB9KSA9PiB7XHJcbiAgICAgIGNvbnN0IFssICwgc2VhcmNoUXVlcnldID0gcXVlcnlLZXk7XHJcbiAgICAgIGlmICghc2VhcmNoUXVlcnk/LnRyaW0oKSkge3JldHVybiBbXTt9XHJcblxyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBVc2FyIGxhIEFQSSBkZSBiw7pzcXVlZGEgY29ycmVjdGFcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2hRdWVyeSl9JmxpbWl0PSR7bWF4U3VnZ2VzdGlvbnN9YDtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc2lnbmFsLCAvLyBVc2FyIEFib3J0Q29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn5SNIHVzZVNlYXJjaE9wdGltaXplZDogQVBJIHJlc3BvbnNlIG5vdCBvazonLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGEucHJvZHVjdHMgfHwgW107XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEFQSSBjYWxsIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBlbmFibGVkOiAhIWRlYm91bmNlZFF1ZXJ5Py50cmltKCkgJiYgZGVib3VuY2VkUXVlcnkubGVuZ3RoID49IDIsXHJcbiAgICAuLi5zZWFyY2hRdWVyeUNvbmZpZyxcclxuICB9KTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBTVUdHRVNUSU9OUyBHRU5FUkFUSU9OXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX1NFQVJDSCA9PT0gJ3RydWUnKSB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEN1cnJlbnQgc3RhdGUgYmVmb3JlIHN1Z2dlc3Rpb25zOicsIHtcclxuICAgICAgcXVlcnksXHJcbiAgICAgIGRlYm91bmNlZFF1ZXJ5LFxyXG4gICAgICBzZWFyY2hSZXN1bHRzOiBzZWFyY2hSZXN1bHRzPy5sZW5ndGggfHwgMCxcclxuICAgICAgaXNMb2FkaW5nLFxyXG4gICAgICBlcnJvcjogISFlcnJvclxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdWdnZXN0aW9uczogU2VhcmNoU3VnZ2VzdGlvbltdID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBhbGxTdWdnZXN0aW9uczogU2VhcmNoU3VnZ2VzdGlvbltdID0gW107XHJcbiAgICBjb25zdCBoYXNRdWVyeSA9ICEhZGVib3VuY2VkUXVlcnk/LnRyaW0oKTtcclxuXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIID09PSAndHJ1ZScpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflI0gdXNlU2VhcmNoT3B0aW1pemVkOiBxdWVyeSAoY3VycmVudCk6JywgYFwiJHtxdWVyeX1cImApO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IHNlYXJjaFJlc3VsdHMgaXNBcnJheTonLCBBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGFzUXVlcnkpIHtcclxuICAgICAgLy8gQ1VBTkRPIEhBWSBURVhUTzogUHJpb3JpemFyIHByb2R1Y3RvcyBTSUVNUFJFXHJcblxyXG4gICAgICAvLyBFeHRyYWVyIHByb2R1Y3RvcyBkZSBsYSByZXNwdWVzdGEgZGUgbGEgQVBJXHJcbiAgICAgIGxldCBwcm9kdWN0cyA9IFtdO1xyXG5cclxuICAgICAgLy8gU2kgc2VhcmNoUmVzdWx0cyBlcyB1biBhcnJheSBkaXJlY3RhbWVudGVcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cykpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHM7XHJcbiAgICAgIH1cclxuICAgICAgLy8gU2kgc2VhcmNoUmVzdWx0cyBlcyB1biBvYmpldG8gY29uIHByb3BpZWRhZCBkYXRhIChyZXNwdWVzdGEgZGUgQVBJKVxyXG4gICAgICBlbHNlIGlmIChzZWFyY2hSZXN1bHRzICYmIHR5cGVvZiBzZWFyY2hSZXN1bHRzID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMuZGF0YSkpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHMuZGF0YTtcclxuICAgICAgfVxyXG4gICAgICAvLyBTaSBzZWFyY2hSZXN1bHRzIGVzIHVuIG9iamV0byBjb24gcHJvcGllZGFkIHByb2R1Y3RzXHJcbiAgICAgIGVsc2UgaWYgKHNlYXJjaFJlc3VsdHMgJiYgdHlwZW9mIHNlYXJjaFJlc3VsdHMgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cy5wcm9kdWN0cykpIHtcclxuICAgICAgICBwcm9kdWN0cyA9IHNlYXJjaFJlc3VsdHMucHJvZHVjdHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdFN1Z2dlc3Rpb25zID0gcHJvZHVjdHMubWFwKChwcm9kdWN0OiBQcm9kdWN0V2l0aENhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogcHJvZHVjdC5pZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICB0eXBlOiAncHJvZHVjdCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgICAgIHN1YnRpdGxlOiBwcm9kdWN0LmNhdGVnb3J5Py5uYW1lLFxyXG4gICAgICAgICAgICBpbWFnZTogcHJvZHVjdC5pbWFnZXM/LnByZXZpZXdzPy5bMF0gfHwgcHJvZHVjdC5pbWFnZXM/LnRodW1ibmFpbHM/LlswXSxcclxuICAgICAgICAgICAgYmFkZ2U6IHByb2R1Y3Quc3RvY2sgPiAwID8gJ0VuIHN0b2NrJyA6ICdTaW4gc3RvY2snLFxyXG4gICAgICAgICAgICBocmVmOiBgL3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH1gLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnByb2R1Y3RTdWdnZXN0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX1NFQVJDSCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IHNlYXJjaFJlc3VsdHMgc3RydWN0dXJlOicsIHtcclxuICAgICAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSxcclxuICAgICAgICAgICAgaGFzRGF0YTogc2VhcmNoUmVzdWx0cz8uZGF0YSA/ICd5ZXMnIDogJ25vJyxcclxuICAgICAgICAgICAgaGFzUHJvZHVjdHM6IHNlYXJjaFJlc3VsdHM/LnByb2R1Y3RzID8gJ3llcycgOiAnbm8nLFxyXG4gICAgICAgICAgICBkYXRhTGVuZ3RoOiBzZWFyY2hSZXN1bHRzPy5kYXRhPy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzTGVuZ3RoOiBzZWFyY2hSZXN1bHRzPy5wcm9kdWN0cz8ubGVuZ3RoLFxyXG4gICAgICAgICAgICBrZXlzOiBzZWFyY2hSZXN1bHRzID8gT2JqZWN0LmtleXMoc2VhcmNoUmVzdWx0cykgOiAnbnVsbCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU29sbyBhZ3JlZ2FyIHJlY2VudC90cmVuZGluZyBzaSBoYXkgbXV5IHBvY29zIHByb2R1Y3Rvc1xyXG4gICAgICBpZiAoYWxsU3VnZ2VzdGlvbnMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgIGNvbnN0IHJlY2VudFN1Z2dlc3Rpb25zID0gZ2V0UmVjZW50U2VhcmNoZXMoMikubWFwKChzZWFyY2gsIGluZGV4KSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IGByZWNlbnQtJHtpbmRleH1gLFxyXG4gICAgICAgICAgdHlwZTogJ3JlY2VudCcgYXMgY29uc3QsXHJcbiAgICAgICAgICB0aXRsZTogc2VhcmNoLFxyXG4gICAgICAgICAgaHJlZjogYC9zaG9wP3E9JHtlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoKX1gLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnJlY2VudFN1Z2dlc3Rpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ1VBTkRPIE5PIEhBWSBURVhUTzogTW9zdHJhciB0cmVuZGluZyB5IHJlY2VudFxyXG5cclxuICAgICAgLy8gQWdyZWdhciBiw7pzcXVlZGFzIHJlY2llbnRlcyBwcmltZXJvXHJcbiAgICAgIGNvbnN0IHJlY2VudFN1Z2dlc3Rpb25zID0gZ2V0UmVjZW50U2VhcmNoZXMoMykubWFwKChzZWFyY2gsIGluZGV4KSA9PiAoe1xyXG4gICAgICAgIGlkOiBgcmVjZW50LSR7aW5kZXh9YCxcclxuICAgICAgICB0eXBlOiAncmVjZW50JyBhcyBjb25zdCxcclxuICAgICAgICB0aXRsZTogc2VhcmNoLFxyXG4gICAgICAgIGhyZWY6IGAvc2hvcD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaCl9YCxcclxuICAgICAgfSkpO1xyXG4gICAgICBhbGxTdWdnZXN0aW9ucy5wdXNoKC4uLnJlY2VudFN1Z2dlc3Rpb25zKTtcclxuXHJcbiAgICAgIC8vIEFncmVnYXIgdHJlbmRpbmcgc2VhcmNoZXNcclxuICAgICAgaWYgKGFsbFN1Z2dlc3Rpb25zLmxlbmd0aCA8IG1heFN1Z2dlc3Rpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nU2xvdHMgPSBtYXhTdWdnZXN0aW9ucyAtIGFsbFN1Z2dlc3Rpb25zLmxlbmd0aDtcclxuICAgICAgICBjb25zdCB0cmVuZGluZ1N1Z2dlc3Rpb25zID0gdHJlbmRpbmdTZWFyY2hlcy5zbGljZSgwLCByZW1haW5pbmdTbG90cykubWFwKHRyZW5kaW5nID0+ICh7XHJcbiAgICAgICAgICBpZDogdHJlbmRpbmcuaWQsXHJcbiAgICAgICAgICB0eXBlOiAndHJlbmRpbmcnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgdGl0bGU6IHRyZW5kaW5nLnF1ZXJ5LFxyXG4gICAgICAgICAgaHJlZjogdHJlbmRpbmcuaHJlZixcclxuICAgICAgICAgIGJhZGdlOiB0cmVuZGluZy5jb3VudCA/IGAke3RyZW5kaW5nLmNvdW50fWAgOiB1bmRlZmluZWRcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYWxsU3VnZ2VzdGlvbnMucHVzaCguLi50cmVuZGluZ1N1Z2dlc3Rpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbmFsU3VnZ2VzdGlvbnMgPSBhbGxTdWdnZXN0aW9ucy5zbGljZSgwLCBtYXhTdWdnZXN0aW9ucyk7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfU0VBUkNIID09PSAndHJ1ZScpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflI0gdXNlU2VhcmNoT3B0aW1pemVkOiBGaW5hbCBzdWdnZXN0aW9ucyB0eXBlczonLCBmaW5hbFN1Z2dlc3Rpb25zLm1hcChzID0+IHMudHlwZSkpO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEZpbmFsIHN1Z2dlc3Rpb25zIHRpdGxlczonLCBmaW5hbFN1Z2dlc3Rpb25zLm1hcChzID0+IHMudGl0bGUpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmluYWxTdWdnZXN0aW9ucztcclxuICB9LCBbZGVib3VuY2VkUXVlcnksIHNlYXJjaFJlc3VsdHMsIGlzTG9hZGluZywgZXJyb3IsIG1heFN1Z2dlc3Rpb25zLCB0cmVuZGluZ1NlYXJjaGVzXSk7XHJcblxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFNFQVJDSCBGVU5DVElPTlNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBjb25zdCBzZWFyY2hXaXRoRGVib3VuY2UgPSB1c2VDYWxsYmFjaygoc2VhcmNoUXVlcnk6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0UXVlcnkoc2VhcmNoUXVlcnkpO1xyXG4gICAgdXBkYXRlRGVib3VuY2VkUXVlcnkoc2VhcmNoUXVlcnkpO1xyXG5cclxuICAgIC8vIFByZWZldGNoIHNpIGVzdMOhIGhhYmlsaXRhZG8geSBsYSBxdWVyeSBlcyB2w6FsaWRhXHJcbiAgICBpZiAoZW5hYmxlUHJlZmV0Y2ggJiYgc2VhcmNoUXVlcnkudHJpbSgpLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgIC8vIFByZWZldGNoIGRlIGRhdG9zIGRlIGLDunNxdWVkYVxyXG4gICAgICBxdWVyeUNsaWVudC5wcmVmZXRjaFF1ZXJ5KHtcclxuICAgICAgICBxdWVyeUtleTogc2VhcmNoUXVlcnlLZXlzLnNlYXJjaChzZWFyY2hRdWVyeSksXHJcbiAgICAgICAgcXVlcnlGbjogKCkgPT4gc2VhcmNoUHJvZHVjdHMoc2VhcmNoUXVlcnksIG1heFN1Z2dlc3Rpb25zKSxcclxuICAgICAgICAuLi5zZWFyY2hRdWVyeUNvbmZpZyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBQcmVmZXRjaCBkZSBww6FnaW5hIGRlIHJlc3VsdGFkb3NcclxuICAgICAgbmF2aWdhdGlvbi5wcmVmZXRjaFNlYXJjaChzZWFyY2hRdWVyeS50cmltKCkpO1xyXG4gICAgfVxyXG4gIH0sIFt1cGRhdGVEZWJvdW5jZWRRdWVyeSwgZW5hYmxlUHJlZmV0Y2gsIHF1ZXJ5Q2xpZW50LCBtYXhTdWdnZXN0aW9ucywgbmF2aWdhdGlvbl0pO1xyXG5cclxuICBjb25zdCBleGVjdXRlU2VhcmNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNlYXJjaFF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuICAgIGlmICghc2VhcmNoUXVlcnkudHJpbSgpKSB7cmV0dXJuO31cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRIYXNTZWFyY2hlZCh0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEd1YXJkYXIgZW4gaGlzdG9yaWFsIHVzYW5kbyBlbCBob29rXHJcbiAgICAgIGlmIChzYXZlUmVjZW50U2VhcmNoZXMpIHtcclxuICAgICAgICBhZGRSZWNlbnRTZWFyY2goc2VhcmNoUXVlcnkudHJpbSgpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVnaXN0cmFyIGVuIHRyZW5kaW5nIHNlYXJjaGVzXHJcbiAgICAgIHRyYWNrU2VhcmNoKHNlYXJjaFF1ZXJ5LnRyaW0oKSkuY2F0Y2goY29uc29sZS53YXJuKTtcclxuXHJcbiAgICAgIC8vIE5hdmVnYXIgYSBww6FnaW5hIGRlIHJlc3VsdGFkb3MgdXNhbmRvIG5hdmVnYWNpw7NuIG9wdGltaXphZGFcclxuICAgICAgbmF2aWdhdGlvbi5uYXZpZ2F0ZVRvU2VhcmNoKHNlYXJjaFF1ZXJ5LnRyaW0oKSk7XHJcblxyXG4gICAgICAvLyBDYWxsYmFjayBleHRlcm5vXHJcbiAgICAgIGlmIChvblNlYXJjaCAmJiBzZWFyY2hSZXN1bHRzKSB7XHJcbiAgICAgICAgb25TZWFyY2goc2VhcmNoUXVlcnksIHNlYXJjaFJlc3VsdHMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0b2FzdEhhbmRsZXIuc2hvd1N1Y2Nlc3NUb2FzdChzZWFyY2hRdWVyeSwgc2VhcmNoUmVzdWx0cz8ubGVuZ3RoIHx8IDApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCB1c2VTZWFyY2hPcHRpbWl6ZWQ6IEVycm9yIGVuIGV4ZWN1dGVTZWFyY2g6JywgZXJyb3IpO1xyXG4gICAgICBlcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIFtzYXZlUmVjZW50U2VhcmNoZXMsIHJlY2VudFNlYXJjaGVzLCBuYXZpZ2F0aW9uLCBvblNlYXJjaCwgc2VhcmNoUmVzdWx0cywgdG9hc3RIYW5kbGVyLCBlcnJvckhhbmRsZXJdKTtcclxuXHJcbiAgY29uc3Qgc2VsZWN0U3VnZ2VzdGlvbiA9IHVzZUNhbGxiYWNrKChzdWdnZXN0aW9uOiBTZWFyY2hTdWdnZXN0aW9uKSA9PiB7XHJcblxyXG4gICAgLy8gTmF2ZWdhciBzZWfDum4gZWwgdGlwbyBkZSBzdWdlcmVuY2lhXHJcbiAgICBpZiAoc3VnZ2VzdGlvbi50eXBlID09PSAncHJvZHVjdCcpIHtcclxuICAgICAgbmF2aWdhdGlvbi5uYXZpZ2F0ZVRvUHJvZHVjdChzdWdnZXN0aW9uLmlkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFBhcmEgYsO6c3F1ZWRhcyByZWNpZW50ZXMgbyB0cmVuZGluZywgbmF2ZWdhciBhIGLDunNxdWVkYVxyXG4gICAgICBuYXZpZ2F0aW9uLm5hdmlnYXRlVG9TZWFyY2goc3VnZ2VzdGlvbi50aXRsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsbGJhY2sgZXh0ZXJub1xyXG4gICAgaWYgKG9uU3VnZ2VzdGlvblNlbGVjdCkge1xyXG4gICAgICBvblN1Z2dlc3Rpb25TZWxlY3Qoc3VnZ2VzdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgdG9hc3RIYW5kbGVyLnNob3dJbmZvVG9hc3QoYCR7c3VnZ2VzdGlvbi50eXBlID09PSAncHJvZHVjdCcgPyAnUHJvZHVjdG8nIDogJ0LDunNxdWVkYSd9IHNlbGVjY2lvbmFkb2AsIHN1Z2dlc3Rpb24udGl0bGUpO1xyXG4gIH0sIFtuYXZpZ2F0aW9uLCBvblN1Z2dlc3Rpb25TZWxlY3QsIHRvYXN0SGFuZGxlcl0pO1xyXG5cclxuICBjb25zdCBjbGVhclNlYXJjaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFF1ZXJ5KCcnKTtcclxuICAgIHNldERlYm91bmNlZFF1ZXJ5KCcnKTtcclxuICAgIHNldEhhc1NlYXJjaGVkKGZhbHNlKTtcclxuICAgIFxyXG4gICAgLy8gTGltcGlhciBjYWNoZSBkZSBiw7pzcXVlZGFzIHNpIGVzIG5lY2VzYXJpb1xyXG4gICAgcXVlcnlDbGllbnQucmVtb3ZlUXVlcmllcyh7IHF1ZXJ5S2V5OiBzZWFyY2hRdWVyeUtleXMuc2VhcmNoZXMoKSB9KTtcclxuICB9LCBbcXVlcnlDbGllbnRdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBMSUZFQ1lDTEVcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBjb25zdCBpbml0aWFsaXplID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgLy8gQ2FyZ2FyIGLDunNxdWVkYXMgcmVjaWVudGVzXHJcbiAgICBpZiAoc2F2ZVJlY2VudFNlYXJjaGVzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGludGV5YS1yZWNlbnQtc2VhcmNoZXMnKTtcclxuICAgICAgICBpZiAoc2F2ZWQgJiYgc2F2ZWQudHJpbSgpICE9PSAnJyAmJiBzYXZlZCAhPT0gJ1wiXCInICYmIHNhdmVkICE9PSBcIicnXCIpIHtcclxuICAgICAgICAgIC8vIFZhbGlkYXIgcXVlIG5vIGVzdMOpIGNvcnJ1cHRvXHJcbiAgICAgICAgICBpZiAoc2F2ZWQuaW5jbHVkZXMoJ1wiXCInKSAmJiBzYXZlZC5sZW5ndGggPCA1KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRGV0ZWN0ZWQgY29ycnVwdGVkIHJlY2VudCBzZWFyY2hlcyBkYXRhLCBjbGVhbmluZyB1cCcpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGludGV5YS1yZWNlbnQtc2VhcmNoZXMnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWQpO1xyXG4gICAgICAgICAgLy8gVmVyaWZpY2FyIHF1ZSBzZWEgdW4gYXJyYXkgdsOhbGlkb1xyXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkKSkge1xyXG4gICAgICAgICAgICBzZXRSZWNlbnRTZWFyY2hlcyhwYXJzZWQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHJlY2VudCBzZWFyY2hlcyBmb3JtYXQsIHJlc2V0dGluZycpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGludGV5YS1yZWNlbnQtc2VhcmNoZXMnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjYXJnYW5kbyBiw7pzcXVlZGFzIHJlY2llbnRlczonLCBlcnJvcik7XHJcbiAgICAgICAgLy8gTGltcGlhciBkYXRvcyBjb3JydXB0b3NcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGludGV5YS1yZWNlbnQtc2VhcmNoZXMnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtzYXZlUmVjZW50U2VhcmNoZXNdKTtcclxuXHJcbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIC8vIExpbXBpYXIgZGVib3VuY2UgeSBjYWNoZSBzaSBlcyBuZWNlc2FyaW9cclxuICAgIHVwZGF0ZURlYm91bmNlZFF1ZXJ5LmNhbmNlbCgpO1xyXG4gIH0sIFt1cGRhdGVEZWJvdW5jZWRRdWVyeV0pO1xyXG5cclxuICAvLyBJbmljaWFsaXphciBhbCBtb250YXJcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIGNsZWFudXA7XHJcbiAgfSwgW2luaXRpYWxpemUsIGNsZWFudXBdKTtcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBSRVRVUk5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLy8gRXN0YWRvIGRlIGLDunNxdWVkYVxyXG4gICAgcXVlcnksXHJcbiAgICByZXN1bHRzOiBzZWFyY2hSZXN1bHRzIHx8IFtdLFxyXG4gICAgc3VnZ2VzdGlvbnMsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgbnVsbCxcclxuICAgIGhhc1NlYXJjaGVkLFxyXG4gICAgcmVjZW50U2VhcmNoZXM6IHJlY2VudFNlYXJjaGVzTGlzdCxcclxuICAgIHRyZW5kaW5nU2VhcmNoZXMsXHJcblxyXG4gICAgLy8gRXN0YWRvcyBkZSBUYW5TdGFjayBRdWVyeVxyXG4gICAgaXNGZXRjaGluZyxcclxuICAgIGlzU3RhbGUsXHJcbiAgICBkYXRhVXBkYXRlZEF0LFxyXG5cclxuICAgIC8vIEVzdGFkbyBkZSBlcnJvcmVzIHkgdG9hc3RzXHJcbiAgICBzZWFyY2hFcnJvcjogZXJyb3JIYW5kbGVyLmN1cnJlbnRFcnJvcixcclxuICAgIGlzUmV0cnlpbmc6IGVycm9ySGFuZGxlci5pc1JldHJ5aW5nLFxyXG4gICAgcmV0cnlDb3VudDogZXJyb3JIYW5kbGVyLnJldHJ5Q291bnQsXHJcbiAgICB0b2FzdHM6IHRvYXN0SGFuZGxlci50b2FzdHMsXHJcblxyXG4gICAgLy8gRnVuY2lvbmVzIHByaW5jaXBhbGVzXHJcbiAgICBzZWFyY2hXaXRoRGVib3VuY2UsXHJcbiAgICBleGVjdXRlU2VhcmNoLFxyXG4gICAgc2VsZWN0U3VnZ2VzdGlvbixcclxuICAgIGNsZWFyU2VhcmNoLFxyXG4gICAgaW5pdGlhbGl6ZSxcclxuICAgIGNsZWFudXAsXHJcblxyXG4gICAgLy8gRnVuY2lvbmVzIGRlIG1hbmVqbyBkZSBlcnJvcmVzXHJcbiAgICBjbGVhckVycm9yOiBlcnJvckhhbmRsZXIuY2xlYXJFcnJvcixcclxuICAgIHJldHJ5TWFudWFsbHk6IGVycm9ySGFuZGxlci5yZXRyeU1hbnVhbGx5LFxyXG5cclxuICAgIC8vIEZ1bmNpb25lcyBkZSB0b2FzdFxyXG4gICAgcmVtb3ZlVG9hc3Q6IHRvYXN0SGFuZGxlci5yZW1vdmVUb2FzdCxcclxuICAgIGNsZWFyVG9hc3RzOiB0b2FzdEhhbmRsZXIuY2xlYXJUb2FzdHMsXHJcblxyXG4gICAgLy8gVXRpbGlkYWRlcyBkZSBjYWNoZVxyXG4gICAgaW52YWxpZGF0ZVNlYXJjaDogKHNlYXJjaFF1ZXJ5OiBzdHJpbmcpID0+XHJcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IHNlYXJjaFF1ZXJ5S2V5cy5zZWFyY2goc2VhcmNoUXVlcnkpIH0pLFxyXG4gICAgcHJlZmV0Y2hTZWFyY2g6IChzZWFyY2hRdWVyeTogc3RyaW5nKSA9PlxyXG4gICAgICBxdWVyeUNsaWVudC5wcmVmZXRjaFF1ZXJ5KHtcclxuICAgICAgICBxdWVyeUtleTogc2VhcmNoUXVlcnlLZXlzLnNlYXJjaChzZWFyY2hRdWVyeSksXHJcbiAgICAgICAgcXVlcnlGbjogKCkgPT4gc2VhcmNoUHJvZHVjdHMoc2VhcmNoUXVlcnksIG1heFN1Z2dlc3Rpb25zKSxcclxuICAgICAgICAuLi5zZWFyY2hRdWVyeUNvbmZpZyxcclxuICAgICAgfSksXHJcblxyXG4gICAgLy8gRnVuY2lvbmVzIGRlIG5hdmVnYWNpw7NuIG9wdGltaXphZGFcclxuICAgIG5hdmlnYXRlVG9TZWFyY2g6IG5hdmlnYXRpb24ubmF2aWdhdGVUb1NlYXJjaCxcclxuICAgIG5hdmlnYXRlVG9Qcm9kdWN0OiBuYXZpZ2F0aW9uLm5hdmlnYXRlVG9Qcm9kdWN0LFxyXG4gICAgbmF2aWdhdGVUb0NhdGVnb3J5OiBuYXZpZ2F0aW9uLm5hdmlnYXRlVG9DYXRlZ29yeSxcclxuICAgIHByZWZldGNoU2VhcmNoUGFnZTogbmF2aWdhdGlvbi5wcmVmZXRjaFNlYXJjaCxcclxuICAgIHByZWZldGNoUHJvZHVjdFBhZ2U6IG5hdmlnYXRpb24ucHJlZmV0Y2hQcm9kdWN0LFxyXG4gICAgZ2V0Q3VycmVudFNlYXJjaFF1ZXJ5OiBuYXZpZ2F0aW9uLmdldEN1cnJlbnRTZWFyY2hRdWVyeSxcclxuICAgIGJ1aWxkU2VhcmNoVXJsOiBuYXZpZ2F0aW9uLmJ1aWxkU2VhcmNoVXJsLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZVNlYXJjaE9wdGltaXplZDtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbInVzZVNlYXJjaE9wdGltaXplZCIsIm9wdGlvbnMiLCJkZWJvdW5jZU1zIiwibWF4U3VnZ2VzdGlvbnMiLCJzZWFyY2hMaW1pdCIsInNhdmVSZWNlbnRTZWFyY2hlcyIsImVuYWJsZVByZWZldGNoIiwib25TZWFyY2giLCJvblN1Z2dlc3Rpb25TZWxlY3QiLCJxdWVyeSIsInNldFF1ZXJ5IiwidXNlU3RhdGUiLCJkZWJvdW5jZWRRdWVyeSIsInNldERlYm91bmNlZFF1ZXJ5IiwicmVjZW50U2VhcmNoZXMiLCJzZXRSZWNlbnRTZWFyY2hlcyIsImhhc1NlYXJjaGVkIiwic2V0SGFzU2VhcmNoZWQiLCJxdWVyeUNsaWVudCIsInVzZVF1ZXJ5Q2xpZW50IiwiZXJyb3JIYW5kbGVyIiwidXNlU2VhcmNoRXJyb3JIYW5kbGVyIiwidG9hc3RIYW5kbGVyIiwidXNlU2VhcmNoVG9hc3QiLCJuYXZpZ2F0aW9uIiwidXNlU2VhcmNoTmF2aWdhdGlvbiIsInNjcm9sbFRvVG9wIiwib25CZWZvcmVOYXZpZ2F0ZSIsInVybCIsImNvbnNvbGUiLCJsb2ciLCJvbkFmdGVyTmF2aWdhdGUiLCJ0cmVuZGluZ1NlYXJjaGVzIiwidHJhY2tTZWFyY2giLCJ1c2VUcmVuZGluZ1NlYXJjaGVzIiwibGltaXQiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibGVuZ3RoIiwidHJlbmRpbmdTZWFyY2hlc0RhdGEiLCJtYXAiLCJ0IiwiaWQiLCJyZWNlbnRTZWFyY2hlc0xpc3QiLCJhZGRTZWFyY2giLCJhZGRSZWNlbnRTZWFyY2giLCJnZXRSZWNlbnRTZWFyY2hlcyIsInVzZVJlY2VudFNlYXJjaGVzIiwibWF4U2VhcmNoZXMiLCJTRUFSQ0hfQ09OU1RBTlRTIiwiTUFYX1JFQ0VOVF9TRUFSQ0hFUyIsImVuYWJsZVBlcnNpc3RlbmNlIiwiZXhwaXJhdGlvbkRheXMiLCJSRUNFTlRfU0VBUkNIRVNfRVhQSVJBVElPTl9EQVlTIiwidXBkYXRlRGVib3VuY2VkUXVlcnkiLCJ1c2VEZWJvdW5jZWRDYWxsYmFjayIsInZhbHVlIiwidHJpbSIsIk5FWFRfUFVCTElDX0RFQlVHX1NFQVJDSCIsIm1heFdhaXQiLCJsZWFkaW5nIiwidHJhaWxpbmciLCJkYXRhIiwic2VhcmNoUmVzdWx0cyIsImlzTG9hZGluZyIsImVycm9yIiwiaXNGZXRjaGluZyIsImlzU3RhbGUiLCJkYXRhVXBkYXRlZEF0IiwidXNlUXVlcnkiLCJxdWVyeUtleSIsInNlYXJjaFF1ZXJ5S2V5cyIsInNlYXJjaCIsInF1ZXJ5Rm4iLCJzaWduYWwiLCJzZWFyY2hRdWVyeSIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJzdGF0dXMiLCJFcnJvciIsImpzb24iLCJwcm9kdWN0cyIsInNlYXJjaFF1ZXJ5Q29uZmlnIiwic3VnZ2VzdGlvbnMiLCJ1c2VNZW1vIiwiYWxsU3VnZ2VzdGlvbnMiLCJoYXNRdWVyeSIsIkFycmF5IiwiaXNBcnJheSIsInByb2R1Y3RTdWdnZXN0aW9ucyIsInByb2R1Y3QiLCJ0b1N0cmluZyIsInR5cGUiLCJ0aXRsZSIsIm5hbWUiLCJzdWJ0aXRsZSIsImNhdGVnb3J5IiwiaW1hZ2UiLCJpbWFnZXMiLCJwcmV2aWV3cyIsInRodW1ibmFpbHMiLCJiYWRnZSIsInN0b2NrIiwiaHJlZiIsInB1c2giLCJoYXNEYXRhIiwiaGFzUHJvZHVjdHMiLCJkYXRhTGVuZ3RoIiwicHJvZHVjdHNMZW5ndGgiLCJrZXlzIiwiT2JqZWN0IiwicmVjZW50U3VnZ2VzdGlvbnMiLCJpbmRleCIsInJlbWFpbmluZ1Nsb3RzIiwidHJlbmRpbmdTdWdnZXN0aW9ucyIsInNsaWNlIiwidHJlbmRpbmciLCJjb3VudCIsInVuZGVmaW5lZCIsImZpbmFsU3VnZ2VzdGlvbnMiLCJzIiwic2VhcmNoV2l0aERlYm91bmNlIiwidXNlQ2FsbGJhY2siLCJwcmVmZXRjaFF1ZXJ5Iiwic2VhcmNoUHJvZHVjdHMiLCJwcmVmZXRjaFNlYXJjaCIsImV4ZWN1dGVTZWFyY2giLCJjYXRjaCIsIndhcm4iLCJuYXZpZ2F0ZVRvU2VhcmNoIiwic2hvd1N1Y2Nlc3NUb2FzdCIsImhhbmRsZUVycm9yIiwic2VsZWN0U3VnZ2VzdGlvbiIsInN1Z2dlc3Rpb24iLCJuYXZpZ2F0ZVRvUHJvZHVjdCIsInNob3dJbmZvVG9hc3QiLCJjbGVhclNlYXJjaCIsInJlbW92ZVF1ZXJpZXMiLCJzZWFyY2hlcyIsImluaXRpYWxpemUiLCJzYXZlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJpbmNsdWRlcyIsInJlbW92ZUl0ZW0iLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJjbGVhbnVwIiwiY2FuY2VsIiwidXNlRWZmZWN0IiwicmVzdWx0cyIsIm1lc3NhZ2UiLCJzZWFyY2hFcnJvciIsImN1cnJlbnRFcnJvciIsImlzUmV0cnlpbmciLCJyZXRyeUNvdW50IiwidG9hc3RzIiwiY2xlYXJFcnJvciIsInJldHJ5TWFudWFsbHkiLCJyZW1vdmVUb2FzdCIsImNsZWFyVG9hc3RzIiwiaW52YWxpZGF0ZVNlYXJjaCIsImludmFsaWRhdGVRdWVyaWVzIiwibmF2aWdhdGVUb0NhdGVnb3J5IiwicHJlZmV0Y2hTZWFyY2hQYWdlIiwicHJlZmV0Y2hQcm9kdWN0UGFnZSIsInByZWZldGNoUHJvZHVjdCIsImdldEN1cnJlbnRTZWFyY2hRdWVyeSIsImJ1aWxkU2VhcmNoVXJsIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsb0VBQW9FO0FBQ3BFLHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBdWR0QztlQUFBOztRQXJhZ0JBO2VBQUFBOzs7dUJBaERrRDs0QkFDekI7NkJBQ0o7MEJBQ047NkJBRW9CO3VDQUNiO2dDQUNQO3FDQUNLO3FDQUNBO21DQUNGO3NCQUNEO0FBcUMxQixTQUFTQSxtQkFBbUJDLFVBQXFDLENBQUMsQ0FBQztJQUN4RSxNQUFNLEVBQ0pDLGFBQWEsR0FBRyxFQUNoQkMsaUJBQWlCLENBQUMsRUFDbEJDLGNBQWMsRUFBRSxFQUNoQkMscUJBQXFCLElBQUksRUFDekJDLGlCQUFpQixJQUFJLEVBQ3JCQyxRQUFRLEVBQ1JDLGtCQUFrQixFQUNuQixHQUFHUDtJQUVKLGtCQUFrQjtJQUNsQixNQUFNLENBQUNRLE9BQU9DLFNBQVMsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lBQ25DLE1BQU0sQ0FBQ0MsZ0JBQWdCQyxrQkFBa0IsR0FBR0YsSUFBQUEsZUFBUSxFQUFDO0lBQ3JELE1BQU0sQ0FBQ0csZ0JBQWdCQyxrQkFBa0IsR0FBR0osSUFBQUEsZUFBUSxFQUFXLEVBQUU7SUFDakUsTUFBTSxDQUFDSyxhQUFhQyxlQUFlLEdBQUdOLElBQUFBLGVBQVEsRUFBQztJQUUvQyxpQkFBaUI7SUFDakIsTUFBTU8sY0FBY0MsSUFBQUEsMEJBQWM7SUFDbEMsTUFBTUMs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