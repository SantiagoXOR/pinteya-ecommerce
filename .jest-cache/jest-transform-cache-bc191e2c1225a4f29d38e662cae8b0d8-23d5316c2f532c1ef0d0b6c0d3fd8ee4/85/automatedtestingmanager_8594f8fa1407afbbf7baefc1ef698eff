2df4efbc6c62a79c3aaae48d9f40e904
// ===================================
// PINTEYA E-COMMERCE - AUTOMATED TESTING MANAGER
// Sistema de testing automatizado con regression, performance y accessibility
// ===================================
// Importar performance hooks solo en servidor
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get automatedTestingManager () {
        return automatedTestingManager;
    },
    get default () {
        return _default;
    }
});
const perfHooks = typeof window === 'undefined' ? require('perf_hooks') : null;
// Helper para obtener timestamp de performance
const getPerformanceNow = ()=>{
    if (typeof window !== 'undefined' && window.performance) {
        return window.getPerformanceNow();
    }
    if (perfHooks && perfHooks.performance) {
        return perfHooks.getPerformanceNow();
    }
    return Date.now();
};
// ===================================
// AUTOMATED TESTING MANAGER
// ===================================
class AutomatedTestingManager {
    static getInstance() {
        if (!AutomatedTestingManager.instance) {
            AutomatedTestingManager.instance = new AutomatedTestingManager();
        }
        return AutomatedTestingManager.instance;
    }
    // ===================================
    // REGRESSION TESTING
    // ===================================
    /**
   * Ejecutar tests de regresión
   */ async runRegressionTests(config) {
        const startTime = getPerformanceNow();
        const tests = [];
        console.log('[Testing] Iniciando tests de regresión...');
        // Test de componentes
        for (const component of config.components){
            const testResult = await this.testComponentRegression(component, config.threshold);
            tests.push(testResult);
        }
        // Test de APIs
        for (const api of config.apis){
            const testResult = await this.testApiRegression(api, config.threshold);
            tests.push(testResult);
        }
        const duration = getPerformanceNow() - startTime;
        const suite = {
            name: 'Regression Tests',
            tests,
            totalTests: tests.length,
            passedTests: tests.filter((t)=>t.status === 'passed').length,
            failedTests: tests.filter((t)=>t.status === 'failed').length,
            skippedTests: tests.filter((t)=>t.status === 'skipped').length,
            duration
        };
        this.testResults.set('regression', suite);
        return suite;
    }
    /**
   * Test de regresión de componente
   */ async testComponentRegression(component, threshold) {
        const startTime = getPerformanceNow();
        try {
            // Simular test de componente
            const currentMetrics = await this.measureComponentPerformance(component);
            const baseline = this.performanceBaselines.get(component);
            if (!baseline) {
                // Establecer baseline si no existe
                this.performanceBaselines.set(component, currentMetrics);
                return {
                    name: `${component} - Baseline Set`,
                    status: 'passed',
                    duration: getPerformanceNow() - startTime,
                    details: currentMetrics
                };
            }
            // Comparar con baseline
            const performanceDelta = (currentMetrics.renderTime - baseline.renderTime) / baseline.renderTime;
            if (performanceDelta > threshold) {
                return {
                    name: `${component} - Performance Regression`,
                    status: 'failed',
                    duration: getPerformanceNow() - startTime,
                    error: `Performance degraded by ${(performanceDelta * 100).toFixed(2)}%`,
                    details: {
                        current: currentMetrics,
                        baseline
                    }
                };
            }
            return {
                name: `${component} - Performance Check`,
                status: 'passed',
                duration: getPerformanceNow() - startTime,
                details: {
                    current: currentMetrics,
                    baseline
                }
            };
        } catch (error) {
            return {
                name: `${component} - Error`,
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Test de regresión de API
   */ async testApiRegression(api, threshold) {
        const startTime = getPerformanceNow();
        try {
            // Simular test de API
            const response = await this.testApiEndpoint(api);
            const responseTime = getPerformanceNow() - startTime;
            if (responseTime > threshold) {
                return {
                    name: `${api} - Response Time`,
                    status: 'failed',
                    duration: responseTime,
                    error: `Response time ${responseTime.toFixed(2)}ms exceeds threshold ${threshold}ms`
                };
            }
            return {
                name: `${api} - Response Time`,
                status: 'passed',
                duration: responseTime,
                details: {
                    responseTime,
                    status: response.status
                }
            };
        } catch (error) {
            return {
                name: `${api} - Error`,
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // ===================================
    // PERFORMANCE TESTING
    // ===================================
    /**
   * Ejecutar tests de performance
   */ async runPerformanceTests(components) {
        const startTime = getPerformanceNow();
        const tests = [];
        console.log('[Testing] Iniciando tests de performance...');
        for (const component of components){
            const testResult = await this.testComponentPerformance(component);
            tests.push(testResult);
        }
        // Test de bundle size
        const bundleTest = await this.testBundleSize();
        tests.push(bundleTest);
        // Test de memory leaks
        const memoryTest = await this.testMemoryLeaks();
        tests.push(memoryTest);
        const duration = getPerformanceNow() - startTime;
        const suite = {
            name: 'Performance Tests',
            tests,
            totalTests: tests.length,
            passedTests: tests.filter((t)=>t.status === 'passed').length,
            failedTests: tests.filter((t)=>t.status === 'failed').length,
            skippedTests: tests.filter((t)=>t.status === 'skipped').length,
            duration
        };
        this.testResults.set('performance', suite);
        return suite;
    }
    /**
   * Medir performance de componente
   */ async measureComponentPerformance(component) {
        // Simular medición de performance
        return {
            loadTime: Math.random() * 100 + 50,
            renderTime: Math.random() * 20 + 5,
            memoryUsage: Math.random() * 10 + 5,
            bundleSize: Math.random() * 50 + 20 // 20-70KB
        };
    }
    /**
   * Test de performance de componente
   */ async testComponentPerformance(component) {
        const startTime = getPerformanceNow();
        try {
            const metrics = await this.measureComponentPerformance(component);
            // Verificar thresholds
            const issues = [];
            if (metrics.renderTime > 16) {
                issues.push('Render time > 16ms');
            }
            if (metrics.memoryUsage > 50) {
                issues.push('Memory usage > 50MB');
            }
            if (metrics.bundleSize > 100) {
                issues.push('Bundle size > 100KB');
            }
            return {
                name: `${component} - Performance`,
                status: issues.length === 0 ? 'passed' : 'failed',
                duration: getPerformanceNow() - startTime,
                error: issues.length > 0 ? issues.join(', ') : undefined,
                details: metrics
            };
        } catch (error) {
            return {
                name: `${component} - Performance Error`,
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Test de bundle size
   */ async testBundleSize() {
        const startTime = getPerformanceNow();
        try {
            // Simular análisis de bundle
            const bundleSize = Math.random() * 1000 + 500; // 500-1500KB
            const threshold = 1000; // 1MB
            return {
                name: 'Bundle Size Check',
                status: bundleSize <= threshold ? 'passed' : 'failed',
                duration: getPerformanceNow() - startTime,
                error: bundleSize > threshold ? `Bundle size ${bundleSize.toFixed(2)}KB exceeds ${threshold}KB` : undefined,
                details: {
                    bundleSize,
                    threshold
                }
            };
        } catch (error) {
            return {
                name: 'Bundle Size Error',
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Test de memory leaks
   */ async testMemoryLeaks() {
        const startTime = getPerformanceNow();
        try {
            // Simular test de memory leaks
            const memoryGrowth = Math.random() * 20; // 0-20MB growth
            const threshold = 10; // 10MB threshold
            return {
                name: 'Memory Leak Check',
                status: memoryGrowth <= threshold ? 'passed' : 'failed',
                duration: getPerformanceNow() - startTime,
                error: memoryGrowth > threshold ? `Memory growth ${memoryGrowth.toFixed(2)}MB exceeds ${threshold}MB` : undefined,
                details: {
                    memoryGrowth,
                    threshold
                }
            };
        } catch (error) {
            return {
                name: 'Memory Leak Error',
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // ===================================
    // ACCESSIBILITY TESTING
    // ===================================
    /**
   * Ejecutar tests de accesibilidad
   */ async runAccessibilityTests(pages) {
        const startTime = getPerformanceNow();
        const tests = [];
        console.log('[Testing] Iniciando tests de accesibilidad...');
        for (const page of pages){
            const testResult = await this.testPageAccessibility(page);
            tests.push(testResult);
        }
        const duration = getPerformanceNow() - startTime;
        const suite = {
            name: 'Accessibility Tests',
            tests,
            totalTests: tests.length,
            passedTests: tests.filter((t)=>t.status === 'passed').length,
            failedTests: tests.filter((t)=>t.status === 'failed').length,
            skippedTests: tests.filter((t)=>t.status === 'skipped').length,
            duration
        };
        this.testResults.set('accessibility', suite);
        return suite;
    }
    /**
   * Test de accesibilidad de página
   */ async testPageAccessibility(page) {
        const startTime = getPerformanceNow();
        try {
            // Simular test de accesibilidad
            const result = await this.runAccessibilityAudit(page);
            return {
                name: `${page} - Accessibility`,
                status: result.score >= 80 ? 'passed' : 'failed',
                duration: getPerformanceNow() - startTime,
                error: result.score < 80 ? `Accessibility score ${result.score}% below 80%` : undefined,
                details: result
            };
        } catch (error) {
            return {
                name: `${page} - Accessibility Error`,
                status: 'failed',
                duration: getPerformanceNow() - startTime,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Ejecutar auditoría de accesibilidad
   */ async runAccessibilityAudit(page) {
        // Simular auditoría de accesibilidad
        const violations = Math.floor(Math.random() * 5); // 0-4 violations
        const score = Math.max(60, 100 - violations * 10); // 60-100% score
        return {
            violations: Array.from({
                length: violations
            }, (_, i)=>({
                    id: `violation-${i}`,
                    impact: [
                        'minor',
                        'moderate',
                        'serious',
                        'critical'
                    ][Math.floor(Math.random() * 4)],
                    description: `Accessibility violation ${i + 1}`,
                    nodes: Math.floor(Math.random() * 5) + 1
                })),
            passes: Math.floor(Math.random() * 20) + 10,
            incomplete: Math.floor(Math.random() * 3),
            score
        };
    }
    // ===================================
    // UTILITY METHODS
    // ===================================
    /**
   * Test de endpoint de API
   */ async testApiEndpoint(endpoint) {
        // Simular llamada a API
        const responseTime = Math.random() * 200 + 50; // 50-250ms
        const status = Math.random() > 0.1 ? 200 : 500; // 90% success rate
        return {
            status,
            responseTime
        };
    }
    /**
   * Obtener resultados de tests
   */ getTestResults() {
        return this.testResults;
    }
    /**
   * Obtener resumen de tests
   */ getTestSummary() {
        const suites = Array.from(this.testResults.values());
        const totalTests = suites.reduce((sum, suite)=>sum + suite.totalTests, 0);
        const passedTests = suites.reduce((sum, suite)=>sum + suite.passedTests, 0);
        const failedTests = suites.reduce((sum, suite)=>sum + suite.failedTests, 0);
        const totalDuration = suites.reduce((sum, suite)=>sum + suite.duration, 0);
        return {
            totalSuites: suites.length,
            totalTests,
            passedTests,
            failedTests,
            successRate: totalTests > 0 ? passedTests / totalTests * 100 : 0,
            totalDuration
        };
    }
    /**
   * Limpiar resultados
   */ clearResults() {
        this.testResults.clear();
    }
    constructor(){
        this.testResults = new Map();
        this.performanceBaselines = new Map();
    }
}
const automatedTestingManager = AutomatedTestingManager.getInstance();
const _default = {
    automatedTestingManager,
    AutomatedTestingManager
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx0ZXN0aW5nXFxhdXRvbWF0ZWQtdGVzdGluZy1tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIEFVVE9NQVRFRCBURVNUSU5HIE1BTkFHRVJcclxuLy8gU2lzdGVtYSBkZSB0ZXN0aW5nIGF1dG9tYXRpemFkbyBjb24gcmVncmVzc2lvbiwgcGVyZm9ybWFuY2UgeSBhY2Nlc3NpYmlsaXR5XHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBJbXBvcnRhciBwZXJmb3JtYW5jZSBob29rcyBzb2xvIGVuIHNlcnZpZG9yXHJcbmNvbnN0IHBlcmZIb29rcyA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gcmVxdWlyZSgncGVyZl9ob29rcycpIDogbnVsbDtcclxuXHJcbi8vIEhlbHBlciBwYXJhIG9idGVuZXIgdGltZXN0YW1wIGRlIHBlcmZvcm1hbmNlXHJcbmNvbnN0IGdldFBlcmZvcm1hbmNlTm93ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5nZXRQZXJmb3JtYW5jZU5vdygpO1xyXG4gIH1cclxuICBpZiAocGVyZkhvb2tzICYmIHBlcmZIb29rcy5wZXJmb3JtYW5jZSkge1xyXG4gICAgcmV0dXJuIHBlcmZIb29rcy5nZXRQZXJmb3JtYW5jZU5vdygpO1xyXG4gIH1cclxuICByZXR1cm4gRGF0ZS5ub3coKTtcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TIFkgSU5URVJGQUNFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW50ZXJmYWNlIFRlc3RSZXN1bHQge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBzdGF0dXM6ICdwYXNzZWQnIHwgJ2ZhaWxlZCcgfCAnc2tpcHBlZCc7XHJcbiAgZHVyYXRpb246IG51bWJlcjtcclxuICBlcnJvcj86IHN0cmluZztcclxuICBkZXRhaWxzPzogYW55O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVGVzdFN1aXRlIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdGVzdHM6IFRlc3RSZXN1bHRbXTtcclxuICB0b3RhbFRlc3RzOiBudW1iZXI7XHJcbiAgcGFzc2VkVGVzdHM6IG51bWJlcjtcclxuICBmYWlsZWRUZXN0czogbnVtYmVyO1xyXG4gIHNraXBwZWRUZXN0czogbnVtYmVyO1xyXG4gIGR1cmF0aW9uOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xyXG4gIGxvYWRUaW1lOiBudW1iZXI7XHJcbiAgcmVuZGVyVGltZTogbnVtYmVyO1xyXG4gIG1lbW9yeVVzYWdlOiBudW1iZXI7XHJcbiAgYnVuZGxlU2l6ZTogbnVtYmVyO1xyXG4gIGxpZ2h0aG91c2U/OiB7XHJcbiAgICBwZXJmb3JtYW5jZTogbnVtYmVyO1xyXG4gICAgYWNjZXNzaWJpbGl0eTogbnVtYmVyO1xyXG4gICAgYmVzdFByYWN0aWNlczogbnVtYmVyO1xyXG4gICAgc2VvOiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFjY2Vzc2liaWxpdHlSZXN1bHQge1xyXG4gIHZpb2xhdGlvbnM6IEFycmF5PHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBpbXBhY3Q6ICdtaW5vcicgfCAnbW9kZXJhdGUnIHwgJ3NlcmlvdXMnIHwgJ2NyaXRpY2FsJztcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBub2RlczogbnVtYmVyO1xyXG4gIH0+O1xyXG4gIHBhc3NlczogbnVtYmVyO1xyXG4gIGluY29tcGxldGU6IG51bWJlcjtcclxuICBzY29yZTogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVncmVzc2lvblRlc3RDb25maWcge1xyXG4gIGJhc2VsaW5lVXJsPzogc3RyaW5nO1xyXG4gIHRocmVzaG9sZDogbnVtYmVyO1xyXG4gIGNvbXBvbmVudHM6IHN0cmluZ1tdO1xyXG4gIGFwaXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBVVRPTUFURUQgVEVTVElORyBNQU5BR0VSXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jbGFzcyBBdXRvbWF0ZWRUZXN0aW5nTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF1dG9tYXRlZFRlc3RpbmdNYW5hZ2VyO1xyXG4gIHByaXZhdGUgdGVzdFJlc3VsdHM6IE1hcDxzdHJpbmcsIFRlc3RTdWl0ZT4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSBwZXJmb3JtYW5jZUJhc2VsaW5lczogTWFwPHN0cmluZywgUGVyZm9ybWFuY2VNZXRyaWNzPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEF1dG9tYXRlZFRlc3RpbmdNYW5hZ2VyIHtcclxuICAgIGlmICghQXV0b21hdGVkVGVzdGluZ01hbmFnZXIuaW5zdGFuY2UpIHtcclxuICAgICAgQXV0b21hdGVkVGVzdGluZ01hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQXV0b21hdGVkVGVzdGluZ01hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBBdXRvbWF0ZWRUZXN0aW5nTWFuYWdlci5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gUkVHUkVTU0lPTiBURVNUSU5HXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICogRWplY3V0YXIgdGVzdHMgZGUgcmVncmVzacOzblxyXG4gICAqL1xyXG4gIGFzeW5jIHJ1blJlZ3Jlc3Npb25UZXN0cyhjb25maWc6IFJlZ3Jlc3Npb25UZXN0Q29uZmlnKTogUHJvbWlzZTxUZXN0U3VpdGU+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBjb25zdCB0ZXN0czogVGVzdFJlc3VsdFtdID0gW107XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tUZXN0aW5nXSBJbmljaWFuZG8gdGVzdHMgZGUgcmVncmVzacOzbi4uLicpO1xyXG5cclxuICAgIC8vIFRlc3QgZGUgY29tcG9uZW50ZXNcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIGNvbmZpZy5jb21wb25lbnRzKSB7XHJcbiAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBhd2FpdCB0aGlzLnRlc3RDb21wb25lbnRSZWdyZXNzaW9uKGNvbXBvbmVudCwgY29uZmlnLnRocmVzaG9sZCk7XHJcbiAgICAgIHRlc3RzLnB1c2godGVzdFJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGVzdCBkZSBBUElzXHJcbiAgICBmb3IgKGNvbnN0IGFwaSBvZiBjb25maWcuYXBpcykge1xyXG4gICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gYXdhaXQgdGhpcy50ZXN0QXBpUmVncmVzc2lvbihhcGksIGNvbmZpZy50aHJlc2hvbGQpO1xyXG4gICAgICB0ZXN0cy5wdXNoKHRlc3RSZXN1bHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGR1cmF0aW9uID0gZ2V0UGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0VGltZTtcclxuICAgIGNvbnN0IHN1aXRlOiBUZXN0U3VpdGUgPSB7XHJcbiAgICAgIG5hbWU6ICdSZWdyZXNzaW9uIFRlc3RzJyxcclxuICAgICAgdGVzdHMsXHJcbiAgICAgIHRvdGFsVGVzdHM6IHRlc3RzLmxlbmd0aCxcclxuICAgICAgcGFzc2VkVGVzdHM6IHRlc3RzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAncGFzc2VkJykubGVuZ3RoLFxyXG4gICAgICBmYWlsZWRUZXN0czogdGVzdHMuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdmYWlsZWQnKS5sZW5ndGgsXHJcbiAgICAgIHNraXBwZWRUZXN0czogdGVzdHMuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdza2lwcGVkJykubGVuZ3RoLFxyXG4gICAgICBkdXJhdGlvblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRlc3RSZXN1bHRzLnNldCgncmVncmVzc2lvbicsIHN1aXRlKTtcclxuICAgIHJldHVybiBzdWl0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3QgZGUgcmVncmVzacOzbiBkZSBjb21wb25lbnRlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29tcG9uZW50UmVncmVzc2lvbihjb21wb25lbnQ6IHN0cmluZywgdGhyZXNob2xkOiBudW1iZXIpOiBQcm9taXNlPFRlc3RSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNpbXVsYXIgdGVzdCBkZSBjb21wb25lbnRlXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRNZXRyaWNzID0gYXdhaXQgdGhpcy5tZWFzdXJlQ29tcG9uZW50UGVyZm9ybWFuY2UoY29tcG9uZW50KTtcclxuICAgICAgY29uc3QgYmFzZWxpbmUgPSB0aGlzLnBlcmZvcm1hbmNlQmFzZWxpbmVzLmdldChjb21wb25lbnQpO1xyXG5cclxuICAgICAgaWYgKCFiYXNlbGluZSkge1xyXG4gICAgICAgIC8vIEVzdGFibGVjZXIgYmFzZWxpbmUgc2kgbm8gZXhpc3RlXHJcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUJhc2VsaW5lcy5zZXQoY29tcG9uZW50LCBjdXJyZW50TWV0cmljcyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGAke2NvbXBvbmVudH0gLSBCYXNlbGluZSBTZXRgLFxyXG4gICAgICAgICAgc3RhdHVzOiAncGFzc2VkJyxcclxuICAgICAgICAgIGR1cmF0aW9uOiBnZXRQZXJmb3JtYW5jZU5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICAgICAgZGV0YWlsczogY3VycmVudE1ldHJpY3NcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDb21wYXJhciBjb24gYmFzZWxpbmVcclxuICAgICAgY29uc3QgcGVyZm9ybWFuY2VEZWx0YSA9IChjdXJyZW50TWV0cmljcy5yZW5kZXJUaW1lIC0gYmFzZWxpbmUucmVuZGVyVGltZSkgLyBiYXNlbGluZS5yZW5kZXJUaW1lO1xyXG4gICAgICBcclxuICAgICAgaWYgKHBlcmZvcm1hbmNlRGVsdGEgPiB0aHJlc2hvbGQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbmFtZTogYCR7Y29tcG9uZW50fSAtIFBlcmZvcm1hbmNlIFJlZ3Jlc3Npb25gLFxyXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcclxuICAgICAgICAgIGR1cmF0aW9uOiBnZXRQZXJmb3JtYW5jZU5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICAgICAgZXJyb3I6IGBQZXJmb3JtYW5jZSBkZWdyYWRlZCBieSAkeyhwZXJmb3JtYW5jZURlbHRhICogMTAwKS50b0ZpeGVkKDIpfSVgLFxyXG4gICAgICAgICAgZGV0YWlsczogeyBjdXJyZW50OiBjdXJyZW50TWV0cmljcywgYmFzZWxpbmUgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogYCR7Y29tcG9uZW50fSAtIFBlcmZvcm1hbmNlIENoZWNrYCxcclxuICAgICAgICBzdGF0dXM6ICdwYXNzZWQnLFxyXG4gICAgICAgIGR1cmF0aW9uOiBnZXRQZXJmb3JtYW5jZU5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICAgIGRldGFpbHM6IHsgY3VycmVudDogY3VycmVudE1ldHJpY3MsIGJhc2VsaW5lIH1cclxuICAgICAgfTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IGAke2NvbXBvbmVudH0gLSBFcnJvcmAsXHJcbiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcclxuICAgICAgICBkdXJhdGlvbjogZ2V0UGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0VGltZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3QgZGUgcmVncmVzacOzbiBkZSBBUElcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHRlc3RBcGlSZWdyZXNzaW9uKGFwaTogc3RyaW5nLCB0aHJlc2hvbGQ6IG51bWJlcik6IFByb21pc2U8VGVzdFJlc3VsdD4ge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gZ2V0UGVyZm9ybWFuY2VOb3coKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gU2ltdWxhciB0ZXN0IGRlIEFQSVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMudGVzdEFwaUVuZHBvaW50KGFwaSk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2VUaW1lID4gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGAke2FwaX0gLSBSZXNwb25zZSBUaW1lYCxcclxuICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgICBkdXJhdGlvbjogcmVzcG9uc2VUaW1lLFxyXG4gICAgICAgICAgZXJyb3I6IGBSZXNwb25zZSB0aW1lICR7cmVzcG9uc2VUaW1lLnRvRml4ZWQoMil9bXMgZXhjZWVkcyB0aHJlc2hvbGQgJHt0aHJlc2hvbGR9bXNgXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBgJHthcGl9IC0gUmVzcG9uc2UgVGltZWAsXHJcbiAgICAgICAgc3RhdHVzOiAncGFzc2VkJyxcclxuICAgICAgICBkdXJhdGlvbjogcmVzcG9uc2VUaW1lLFxyXG4gICAgICAgIGRldGFpbHM6IHsgcmVzcG9uc2VUaW1lLCBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBgJHthcGl9IC0gRXJyb3JgLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFBFUkZPUk1BTkNFIFRFU1RJTkdcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBFamVjdXRhciB0ZXN0cyBkZSBwZXJmb3JtYW5jZVxyXG4gICAqL1xyXG4gIGFzeW5jIHJ1blBlcmZvcm1hbmNlVGVzdHMoY29tcG9uZW50czogc3RyaW5nW10pOiBQcm9taXNlPFRlc3RTdWl0ZT4ge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gZ2V0UGVyZm9ybWFuY2VOb3coKTtcclxuICAgIGNvbnN0IHRlc3RzOiBUZXN0UmVzdWx0W10gPSBbXTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnW1Rlc3RpbmddIEluaWNpYW5kbyB0ZXN0cyBkZSBwZXJmb3JtYW5jZS4uLicpO1xyXG5cclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpIHtcclxuICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IGF3YWl0IHRoaXMudGVzdENvbXBvbmVudFBlcmZvcm1hbmNlKGNvbXBvbmVudCk7XHJcbiAgICAgIHRlc3RzLnB1c2godGVzdFJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGVzdCBkZSBidW5kbGUgc2l6ZVxyXG4gICAgY29uc3QgYnVuZGxlVGVzdCA9IGF3YWl0IHRoaXMudGVzdEJ1bmRsZVNpemUoKTtcclxuICAgIHRlc3RzLnB1c2goYnVuZGxlVGVzdCk7XHJcblxyXG4gICAgLy8gVGVzdCBkZSBtZW1vcnkgbGVha3NcclxuICAgIGNvbnN0IG1lbW9yeVRlc3QgPSBhd2FpdCB0aGlzLnRlc3RNZW1vcnlMZWFrcygpO1xyXG4gICAgdGVzdHMucHVzaChtZW1vcnlUZXN0KTtcclxuXHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBjb25zdCBzdWl0ZTogVGVzdFN1aXRlID0ge1xyXG4gICAgICBuYW1lOiAnUGVyZm9ybWFuY2UgVGVzdHMnLFxyXG4gICAgICB0ZXN0cyxcclxuICAgICAgdG90YWxUZXN0czogdGVzdHMubGVuZ3RoLFxyXG4gICAgICBwYXNzZWRUZXN0czogdGVzdHMuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdwYXNzZWQnKS5sZW5ndGgsXHJcbiAgICAgIGZhaWxlZFRlc3RzOiB0ZXN0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2ZhaWxlZCcpLmxlbmd0aCxcclxuICAgICAgc2tpcHBlZFRlc3RzOiB0ZXN0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ3NraXBwZWQnKS5sZW5ndGgsXHJcbiAgICAgIGR1cmF0aW9uXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGVzdFJlc3VsdHMuc2V0KCdwZXJmb3JtYW5jZScsIHN1aXRlKTtcclxuICAgIHJldHVybiBzdWl0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1lZGlyIHBlcmZvcm1hbmNlIGRlIGNvbXBvbmVudGVcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIG1lYXN1cmVDb21wb25lbnRQZXJmb3JtYW5jZShjb21wb25lbnQ6IHN0cmluZyk6IFByb21pc2U8UGVyZm9ybWFuY2VNZXRyaWNzPiB7XHJcbiAgICAvLyBTaW11bGFyIG1lZGljacOzbiBkZSBwZXJmb3JtYW5jZVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbG9hZFRpbWU6IE1hdGgucmFuZG9tKCkgKiAxMDAgKyA1MCwgLy8gNTAtMTUwbXNcclxuICAgICAgcmVuZGVyVGltZTogTWF0aC5yYW5kb20oKSAqIDIwICsgNSwgLy8gNS0yNW1zXHJcbiAgICAgIG1lbW9yeVVzYWdlOiBNYXRoLnJhbmRvbSgpICogMTAgKyA1LCAvLyA1LTE1TUJcclxuICAgICAgYnVuZGxlU2l6ZTogTWF0aC5yYW5kb20oKSAqIDUwICsgMjAgLy8gMjAtNzBLQlxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3QgZGUgcGVyZm9ybWFuY2UgZGUgY29tcG9uZW50ZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgdGVzdENvbXBvbmVudFBlcmZvcm1hbmNlKGNvbXBvbmVudDogc3RyaW5nKTogUHJvbWlzZTxUZXN0UmVzdWx0PiB7XHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBnZXRQZXJmb3JtYW5jZU5vdygpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdGhpcy5tZWFzdXJlQ29tcG9uZW50UGVyZm9ybWFuY2UoY29tcG9uZW50KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFZlcmlmaWNhciB0aHJlc2hvbGRzXHJcbiAgICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgaWYgKG1ldHJpY3MucmVuZGVyVGltZSA+IDE2KSB7aXNzdWVzLnB1c2goJ1JlbmRlciB0aW1lID4gMTZtcycpO31cclxuICAgICAgaWYgKG1ldHJpY3MubWVtb3J5VXNhZ2UgPiA1MCkge2lzc3Vlcy5wdXNoKCdNZW1vcnkgdXNhZ2UgPiA1ME1CJyk7fVxyXG4gICAgICBpZiAobWV0cmljcy5idW5kbGVTaXplID4gMTAwKSB7aXNzdWVzLnB1c2goJ0J1bmRsZSBzaXplID4gMTAwS0InKTt9XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IGAke2NvbXBvbmVudH0gLSBQZXJmb3JtYW5jZWAsXHJcbiAgICAgICAgc3RhdHVzOiBpc3N1ZXMubGVuZ3RoID09PSAwID8gJ3Bhc3NlZCcgOiAnZmFpbGVkJyxcclxuICAgICAgICBkdXJhdGlvbjogZ2V0UGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0VGltZSxcclxuICAgICAgICBlcnJvcjogaXNzdWVzLmxlbmd0aCA+IDAgPyBpc3N1ZXMuam9pbignLCAnKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICBkZXRhaWxzOiBtZXRyaWNzXHJcbiAgICAgIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBgJHtjb21wb25lbnR9IC0gUGVyZm9ybWFuY2UgRXJyb3JgLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0IGRlIGJ1bmRsZSBzaXplXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyB0ZXN0QnVuZGxlU2l6ZSgpOiBQcm9taXNlPFRlc3RSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNpbXVsYXIgYW7DoWxpc2lzIGRlIGJ1bmRsZVxyXG4gICAgICBjb25zdCBidW5kbGVTaXplID0gTWF0aC5yYW5kb20oKSAqIDEwMDAgKyA1MDA7IC8vIDUwMC0xNTAwS0JcclxuICAgICAgY29uc3QgdGhyZXNob2xkID0gMTAwMDsgLy8gMU1CXHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdCdW5kbGUgU2l6ZSBDaGVjaycsXHJcbiAgICAgICAgc3RhdHVzOiBidW5kbGVTaXplIDw9IHRocmVzaG9sZCA/ICdwYXNzZWQnIDogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGJ1bmRsZVNpemUgPiB0aHJlc2hvbGQgPyBgQnVuZGxlIHNpemUgJHtidW5kbGVTaXplLnRvRml4ZWQoMil9S0IgZXhjZWVkcyAke3RocmVzaG9sZH1LQmAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0YWlsczogeyBidW5kbGVTaXplLCB0aHJlc2hvbGQgfVxyXG4gICAgICB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ0J1bmRsZSBTaXplIEVycm9yJyxcclxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxyXG4gICAgICAgIGR1cmF0aW9uOiBnZXRQZXJmb3JtYW5jZU5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCBkZSBtZW1vcnkgbGVha3NcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHRlc3RNZW1vcnlMZWFrcygpOiBQcm9taXNlPFRlc3RSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNpbXVsYXIgdGVzdCBkZSBtZW1vcnkgbGVha3NcclxuICAgICAgY29uc3QgbWVtb3J5R3Jvd3RoID0gTWF0aC5yYW5kb20oKSAqIDIwOyAvLyAwLTIwTUIgZ3Jvd3RoXHJcbiAgICAgIGNvbnN0IHRocmVzaG9sZCA9IDEwOyAvLyAxME1CIHRocmVzaG9sZFxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnTWVtb3J5IExlYWsgQ2hlY2snLFxyXG4gICAgICAgIHN0YXR1czogbWVtb3J5R3Jvd3RoIDw9IHRocmVzaG9sZCA/ICdwYXNzZWQnIDogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IG1lbW9yeUdyb3d0aCA+IHRocmVzaG9sZCA/IGBNZW1vcnkgZ3Jvd3RoICR7bWVtb3J5R3Jvd3RoLnRvRml4ZWQoMil9TUIgZXhjZWVkcyAke3RocmVzaG9sZH1NQmAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0YWlsczogeyBtZW1vcnlHcm93dGgsIHRocmVzaG9sZCB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnTWVtb3J5IExlYWsgRXJyb3InLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIEFDQ0VTU0lCSUxJVFkgVEVTVElOR1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIEVqZWN1dGFyIHRlc3RzIGRlIGFjY2VzaWJpbGlkYWRcclxuICAgKi9cclxuICBhc3luYyBydW5BY2Nlc3NpYmlsaXR5VGVzdHMocGFnZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxUZXN0U3VpdGU+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBjb25zdCB0ZXN0czogVGVzdFJlc3VsdFtdID0gW107XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tUZXN0aW5nXSBJbmljaWFuZG8gdGVzdHMgZGUgYWNjZXNpYmlsaWRhZC4uLicpO1xyXG5cclxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xyXG4gICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gYXdhaXQgdGhpcy50ZXN0UGFnZUFjY2Vzc2liaWxpdHkocGFnZSk7XHJcbiAgICAgIHRlc3RzLnB1c2godGVzdFJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZHVyYXRpb24gPSBnZXRQZXJmb3JtYW5jZU5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgY29uc3Qgc3VpdGU6IFRlc3RTdWl0ZSA9IHtcclxuICAgICAgbmFtZTogJ0FjY2Vzc2liaWxpdHkgVGVzdHMnLFxyXG4gICAgICB0ZXN0cyxcclxuICAgICAgdG90YWxUZXN0czogdGVzdHMubGVuZ3RoLFxyXG4gICAgICBwYXNzZWRUZXN0czogdGVzdHMuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdwYXNzZWQnKS5sZW5ndGgsXHJcbiAgICAgIGZhaWxlZFRlc3RzOiB0ZXN0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2ZhaWxlZCcpLmxlbmd0aCxcclxuICAgICAgc2tpcHBlZFRlc3RzOiB0ZXN0cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ3NraXBwZWQnKS5sZW5ndGgsXHJcbiAgICAgIGR1cmF0aW9uXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGVzdFJlc3VsdHMuc2V0KCdhY2Nlc3NpYmlsaXR5Jywgc3VpdGUpO1xyXG4gICAgcmV0dXJuIHN1aXRlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCBkZSBhY2Nlc2liaWxpZGFkIGRlIHDDoWdpbmFcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHRlc3RQYWdlQWNjZXNzaWJpbGl0eShwYWdlOiBzdHJpbmcpOiBQcm9taXNlPFRlc3RSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdldFBlcmZvcm1hbmNlTm93KCk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNpbXVsYXIgdGVzdCBkZSBhY2Nlc2liaWxpZGFkXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucnVuQWNjZXNzaWJpbGl0eUF1ZGl0KHBhZ2UpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBgJHtwYWdlfSAtIEFjY2Vzc2liaWxpdHlgLFxyXG4gICAgICAgIHN0YXR1czogcmVzdWx0LnNjb3JlID49IDgwID8gJ3Bhc3NlZCcgOiAnZmFpbGVkJyxcclxuICAgICAgICBkdXJhdGlvbjogZ2V0UGVyZm9ybWFuY2VOb3coKSAtIHN0YXJ0VGltZSxcclxuICAgICAgICBlcnJvcjogcmVzdWx0LnNjb3JlIDwgODAgPyBgQWNjZXNzaWJpbGl0eSBzY29yZSAke3Jlc3VsdC5zY29yZX0lIGJlbG93IDgwJWAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0YWlsczogcmVzdWx0XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiBgJHtwYWdlfSAtIEFjY2Vzc2liaWxpdHkgRXJyb3JgLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZHVyYXRpb246IGdldFBlcmZvcm1hbmNlTm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFamVjdXRhciBhdWRpdG9yw61hIGRlIGFjY2VzaWJpbGlkYWRcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHJ1bkFjY2Vzc2liaWxpdHlBdWRpdChwYWdlOiBzdHJpbmcpOiBQcm9taXNlPEFjY2Vzc2liaWxpdHlSZXN1bHQ+IHtcclxuICAgIC8vIFNpbXVsYXIgYXVkaXRvcsOtYSBkZSBhY2Nlc2liaWxpZGFkXHJcbiAgICBjb25zdCB2aW9sYXRpb25zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSk7IC8vIDAtNCB2aW9sYXRpb25zXHJcbiAgICBjb25zdCBzY29yZSA9IE1hdGgubWF4KDYwLCAxMDAgLSAodmlvbGF0aW9ucyAqIDEwKSk7IC8vIDYwLTEwMCUgc2NvcmVcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2aW9sYXRpb25zOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB2aW9sYXRpb25zIH0sIChfLCBpKSA9PiAoe1xyXG4gICAgICAgIGlkOiBgdmlvbGF0aW9uLSR7aX1gLFxyXG4gICAgICAgIGltcGFjdDogWydtaW5vcicsICdtb2RlcmF0ZScsICdzZXJpb3VzJywgJ2NyaXRpY2FsJ11bTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCldIGFzIGFueSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogYEFjY2Vzc2liaWxpdHkgdmlvbGF0aW9uICR7aSArIDF9YCxcclxuICAgICAgICBub2RlczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkgKyAxXHJcbiAgICAgIH0pKSxcclxuICAgICAgcGFzc2VzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCkgKyAxMCxcclxuICAgICAgaW5jb21wbGV0ZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyksXHJcbiAgICAgIHNjb3JlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBVVElMSVRZIE1FVEhPRFNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0IGRlIGVuZHBvaW50IGRlIEFQSVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgdGVzdEFwaUVuZHBvaW50KGVuZHBvaW50OiBzdHJpbmcpOiBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXI7IHJlc3BvbnNlVGltZTogbnVtYmVyIH0+IHtcclxuICAgIC8vIFNpbXVsYXIgbGxhbWFkYSBhIEFQSVxyXG4gICAgY29uc3QgcmVzcG9uc2VUaW1lID0gTWF0aC5yYW5kb20oKSAqIDIwMCArIDUwOyAvLyA1MC0yNTBtc1xyXG4gICAgY29uc3Qgc3RhdHVzID0gTWF0aC5yYW5kb20oKSA+IDAuMSA/IDIwMCA6IDUwMDsgLy8gOTAlIHN1Y2Nlc3MgcmF0ZVxyXG5cclxuICAgIHJldHVybiB7IHN0YXR1cywgcmVzcG9uc2VUaW1lIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPYnRlbmVyIHJlc3VsdGFkb3MgZGUgdGVzdHNcclxuICAgKi9cclxuICBnZXRUZXN0UmVzdWx0cygpOiBNYXA8c3RyaW5nLCBUZXN0U3VpdGU+IHtcclxuICAgIHJldHVybiB0aGlzLnRlc3RSZXN1bHRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2J0ZW5lciByZXN1bWVuIGRlIHRlc3RzXHJcbiAgICovXHJcbiAgZ2V0VGVzdFN1bW1hcnkoKSB7XHJcbiAgICBjb25zdCBzdWl0ZXMgPSBBcnJheS5mcm9tKHRoaXMudGVzdFJlc3VsdHMudmFsdWVzKCkpO1xyXG4gICAgY29uc3QgdG90YWxUZXN0cyA9IHN1aXRlcy5yZWR1Y2UoKHN1bSwgc3VpdGUpID0+IHN1bSArIHN1aXRlLnRvdGFsVGVzdHMsIDApO1xyXG4gICAgY29uc3QgcGFzc2VkVGVzdHMgPSBzdWl0ZXMucmVkdWNlKChzdW0sIHN1aXRlKSA9PiBzdW0gKyBzdWl0ZS5wYXNzZWRUZXN0cywgMCk7XHJcbiAgICBjb25zdCBmYWlsZWRUZXN0cyA9IHN1aXRlcy5yZWR1Y2UoKHN1bSwgc3VpdGUpID0+IHN1bSArIHN1aXRlLmZhaWxlZFRlc3RzLCAwKTtcclxuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBzdWl0ZXMucmVkdWNlKChzdW0sIHN1aXRlKSA9PiBzdW0gKyBzdWl0ZS5kdXJhdGlvbiwgMCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG90YWxTdWl0ZXM6IHN1aXRlcy5sZW5ndGgsXHJcbiAgICAgIHRvdGFsVGVzdHMsXHJcbiAgICAgIHBhc3NlZFRlc3RzLFxyXG4gICAgICBmYWlsZWRUZXN0cyxcclxuICAgICAgc3VjY2Vzc1JhdGU6IHRvdGFsVGVzdHMgPiAwID8gKHBhc3NlZFRlc3RzIC8gdG90YWxUZXN0cykgKiAxMDAgOiAwLFxyXG4gICAgICB0b3RhbER1cmF0aW9uXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTGltcGlhciByZXN1bHRhZG9zXHJcbiAgICovXHJcbiAgY2xlYXJSZXN1bHRzKCk6IHZvaWQge1xyXG4gICAgdGhpcy50ZXN0UmVzdWx0cy5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRVhQT1JUU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGNvbnN0IGF1dG9tYXRlZFRlc3RpbmdNYW5hZ2VyID0gQXV0b21hdGVkVGVzdGluZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBhdXRvbWF0ZWRUZXN0aW5nTWFuYWdlcixcclxuICBBdXRvbWF0ZWRUZXN0aW5nTWFuYWdlclxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUge1xyXG4gIFRlc3RSZXN1bHQsXHJcbiAgVGVzdFN1aXRlLFxyXG4gIFBlcmZvcm1hbmNlTWV0cmljcyxcclxuICBBY2Nlc3NpYmlsaXR5UmVzdWx0LFxyXG4gIFJlZ3Jlc3Npb25UZXN0Q29uZmlnXHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJhdXRvbWF0ZWRUZXN0aW5nTWFuYWdlciIsInBlcmZIb29rcyIsIndpbmRvdyIsInJlcXVpcmUiLCJnZXRQZXJmb3JtYW5jZU5vdyIsInBlcmZvcm1hbmNlIiwiRGF0ZSIsIm5vdyIsIkF1dG9tYXRlZFRlc3RpbmdNYW5hZ2VyIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInJ1blJlZ3Jlc3Npb25UZXN0cyIsImNvbmZpZyIsInN0YXJ0VGltZSIsInRlc3RzIiwiY29uc29sZSIsImxvZyIsImNvbXBvbmVudCIsImNvbXBvbmVudHMiLCJ0ZXN0UmVzdWx0IiwidGVzdENvbXBvbmVudFJlZ3Jlc3Npb24iLCJ0aHJlc2hvbGQiLCJwdXNoIiwiYXBpIiwiYXBpcyIsInRlc3RBcGlSZWdyZXNzaW9uIiwiZHVyYXRpb24iLCJzdWl0ZSIsIm5hbWUiLCJ0b3RhbFRlc3RzIiwibGVuZ3RoIiwicGFzc2VkVGVzdHMiLCJmaWx0ZXIiLCJ0Iiwic3RhdHVzIiwiZmFpbGVkVGVzdHMiLCJza2lwcGVkVGVzdHMiLCJ0ZXN0UmVzdWx0cyIsInNldCIsImN1cnJlbnRNZXRyaWNzIiwibWVhc3VyZUNvbXBvbmVudFBlcmZvcm1hbmNlIiwiYmFzZWxpbmUiLCJwZXJmb3JtYW5jZUJhc2VsaW5lcyIsImdldCIsImRldGFpbHMiLCJwZXJmb3JtYW5jZURlbHRhIiwicmVuZGVyVGltZSIsImVycm9yIiwidG9GaXhlZCIsImN1cnJlbnQiLCJFcnJvciIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsInRlc3RBcGlFbmRwb2ludCIsInJlc3BvbnNlVGltZSIsInJ1blBlcmZvcm1hbmNlVGVzdHMiLCJ0ZXN0Q29tcG9uZW50UGVyZm9ybWFuY2UiLCJidW5kbGVUZXN0IiwidGVzdEJ1bmRsZVNpemUiLCJtZW1vcnlUZXN0IiwidGVzdE1lbW9yeUxlYWtzIiwibG9hZFRpbWUiLCJNYXRoIiwicmFuZG9tIiwibWVtb3J5VXNhZ2UiLCJidW5kbGVTaXplIiwibWV0cmljcyIsImlzc3VlcyIsImpvaW4iLCJ1bmRlZmluZWQiLCJtZW1vcnlHcm93dGgiLCJydW5BY2Nlc3NpYmlsaXR5VGVzdHMiLCJwYWdlcyIsInBhZ2UiLCJ0ZXN0UGFnZUFjY2Vzc2liaWxpdHkiLCJyZXN1bHQiLCJydW5BY2Nlc3NpYmlsaXR5QXVkaXQiLCJzY29yZSIsInZpb2xhdGlvbnMiLCJmbG9vciIsIm1heCIsIkFycmF5IiwiZnJvbSIsIl8iLCJpIiwiaWQiLCJpbXBhY3QiLCJkZXNjcmlwdGlvbiIsIm5vZGVzIiwicGFzc2VzIiwiaW5jb21wbGV0ZSIsImVuZHBvaW50IiwiZ2V0VGVzdFJlc3VsdHMiLCJnZXRUZXN0U3VtbWFyeSIsInN1aXRlcyIsInZhbHVlcyIsInJlZHVjZSIsInN1bSIsInRvdGFsRHVyYXRpb24iLCJ0b3RhbFN1aXRlcyIsInN1Y2Nlc3NSYXRlIiwiY2xlYXJSZXN1bHRzIiwiY2xlYXIiLCJNYXAiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QyxpREFBaUQ7QUFDakQsOEVBQThFO0FBQzlFLHNDQUFzQztBQUV0Qyw4Q0FBOEM7Ozs7Ozs7Ozs7OztRQThlakNBO2VBQUFBOztR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