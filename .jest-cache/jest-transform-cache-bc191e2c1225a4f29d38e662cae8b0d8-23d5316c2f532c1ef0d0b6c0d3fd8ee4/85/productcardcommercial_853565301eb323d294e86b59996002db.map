{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\product-card-commercial.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\nimport { cn } from '@/lib/core/utils'\r\nimport { Heart, Eye, Star, ShoppingCart, AlertCircle } from 'lucide-react'\r\nimport { ShopDetailModal } from '@/components/ShopDetails/ShopDetailModal'\r\n\r\n// Verificar que Framer Motion esté disponible\r\nconst isFramerMotionAvailable = false // Deshabilitado para usar fallbacks CSS\r\n\r\n// Componentes fallback para cuando Framer Motion no esté disponible\r\nconst MotionDiv = 'div'\r\nconst MotionButton = 'button'\r\n\r\nexport interface CommercialProductCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  image?: string\r\n  title?: string\r\n  brand?: string\r\n  price?: number\r\n  originalPrice?: number\r\n  discount?: string\r\n  isNew?: boolean\r\n  cta?: string\r\n  stock?: number\r\n  productId?: number | string\r\n  onAddToCart?: () => void\r\n  showCartAnimation?: boolean\r\n  // Información de cuotas\r\n  installments?: {\r\n    quantity: number\r\n    amount: number\r\n    interestFree?: boolean\r\n  }\r\n  // Información de envío\r\n  freeShipping?: boolean\r\n  shippingText?: string\r\n  deliveryLocation?: string\r\n}\r\n\r\nconst CommercialProductCard = React.forwardRef<HTMLDivElement, CommercialProductCardProps>(\r\n  ({\r\n    className,\r\n    image,\r\n    title,\r\n    brand,\r\n    price,\r\n    originalPrice,\r\n    discount,\r\n    isNew = false,\r\n    cta = \"Agregar al carrito\",\r\n    stock = 0,\r\n    productId,\r\n    onAddToCart,\r\n    showCartAnimation = true,\r\n    installments,\r\n    freeShipping = false,\r\n    shippingText,\r\n    deliveryLocation,\r\n    children,\r\n    ...props\r\n  }, ref) => {\r\n    const [isAddingToCart, setIsAddingToCart] = React.useState(false)\r\n    const [isHovered, setIsHovered] = React.useState(false)\r\n    const [isWishlisted, setIsWishlisted] = React.useState(false)\r\n    const [showQuickActions, setShowQuickActions] = React.useState(false)\r\n    const [showShopDetailModal, setShowShopDetailModal] = React.useState(false)\r\n\r\n    // Función para abrir el modal\r\n    const handleOpenModal = React.useCallback(() => {\r\n      setShowShopDetailModal(true);\r\n    }, []);\r\n\r\n    // Función para manejar el clic en el card\r\n    const handleCardClick = React.useCallback((e: React.MouseEvent) => {\r\n      // Evitar que se abra el modal si se hace clic en el botón de agregar al carrito\r\n      if ((e.target as HTMLElement).closest('[data-testid=\"add-to-cart\"]')) {\r\n        return;\r\n      }\r\n      // Evitar propagación de eventos que puedan interferir con el modal\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      handleOpenModal();\r\n    }, [handleOpenModal]);\r\n\r\n    const handleAddToCart = React.useCallback(async (e?: React.MouseEvent) => {\r\n      if (e) {\r\n        e.stopPropagation(); // Evitar que se propague al card\r\n      }\r\n      \r\n      if (!onAddToCart || isAddingToCart || stock === 0) return;\r\n\r\n      if (showCartAnimation) {\r\n        setIsAddingToCart(true)\r\n        setTimeout(() => setIsAddingToCart(false), 1000)\r\n      }\r\n\r\n      try {\r\n        await onAddToCart();\r\n        // También abrir el modal después de agregar al carrito\r\n        handleOpenModal();\r\n      } catch (error) {\r\n        console.error('Error al agregar al carrito:', error);\r\n      }\r\n    }, [onAddToCart, isAddingToCart, stock, showCartAnimation, handleOpenModal])\r\n\r\n    // Calcular si mostrar envío gratis automáticamente\r\n    const shouldShowFreeShipping = freeShipping || (price && price >= 15000)\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          // Mobile-first: diseño compacto para 2 columnas\r\n          \"relative rounded-xl bg-white shadow-md flex flex-col w-full cursor-pointer overflow-hidden\",\r\n          // Mobile: más compacto\r\n          \"h-[280px] sm:h-[320px]\",\r\n          // Tablet y desktop: tamaño completo\r\n          \"md:h-[400px] lg:h-[450px]\",\r\n          \"md:rounded-2xl\",\r\n          \"transition-all duration-200 ease-out hover:scale-[1.02] hover:shadow-xl\",\r\n          \"transform-gpu will-change-transform\",\r\n          className\r\n        )}\r\n        data-testid=\"product-card\"\r\n        data-testid-commercial=\"commercial-product-card\"\r\n        style={{\r\n          transformOrigin: \"center\",\r\n          transition: \"transform 0.2s ease, box-shadow 0.2s ease\",\r\n          transform: isHovered ? \"scale(1.02)\" : \"scale(1)\",\r\n          boxShadow: isHovered ? \"0 10px 25px rgba(0,0,0,0.1)\" : \"0 2px 8px rgba(0,0,0,0.1)\"\r\n        }}\r\n        onMouseEnter={() => {\r\n          setIsHovered(true)\r\n          setShowQuickActions(true)\r\n        }}\r\n        onMouseLeave={() => {\r\n          setIsHovered(false)\r\n          setShowQuickActions(false)\r\n        }}\r\n        onClick={handleCardClick}\r\n        {...props}\r\n      >\r\n        {/* Contenedor de imagen completa con degradado - Responsive */}\r\n        <div className=\"relative w-full flex justify-center items-center overflow-hidden rounded-t-xl mb-2 md:mb-3 flex-1\">\r\n          {image ? (\r\n            <img\r\n              src={image}\r\n              alt={title || 'Producto'}\r\n              className=\"object-contain w-full h-full scale-110 z-0\"\r\n              onError={(e) => {\r\n                const target = e.target as HTMLImageElement\r\n                target.src = '/images/products/placeholder.svg'\r\n              }}\r\n            />\r\n          ) : (\r\n            <div className=\"flex items-center justify-center w-full h-full z-0\">\r\n              <img\r\n                src=\"/images/products/placeholder.svg\"\r\n                alt=\"Sin imagen\"\r\n                className=\"w-64 h-64 opacity-60\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Degradado suave hacia blanco en la parte inferior - Responsive */}\r\n          <div className=\"absolute bottom-0 left-0 right-0 h-12 md:h-20 bg-gradient-to-t from-white via-white/80 to-transparent z-10 pointer-events-none\" />\r\n\r\n          {/* Quick Actions eliminados - Ya no se muestran los botones de wishlist y quick view */}\r\n        </div>\r\n\r\n        {/* Badge \"Nuevo\" en esquina superior derecha - Responsive */}\r\n        {isNew && (\r\n          <span\r\n            className=\"absolute top-2 right-2 md:top-3 md:right-3 text-xs font-bold px-1.5 py-0.5 md:px-2 md:py-1 rounded z-30 shadow\"\r\n            style={{ backgroundColor: '#FFD600', color: '#EA5A17' }}\r\n          >\r\n            Nuevo\r\n          </span>\r\n        )}\r\n\r\n        {/* Badge de descuento compacto en esquina superior izquierda - Responsive */}\r\n        {discount && (\r\n          <div className=\"absolute top-2 left-2 md:top-3 md:left-3 z-30\">\r\n            <div\r\n              className=\"text-white text-xs font-bold px-1.5 py-0.5 md:px-2 md:py-1 rounded-t\"\r\n              style={{ backgroundColor: '#EA5A17' }}\r\n            >\r\n              {discount}\r\n            </div>\r\n            <div\r\n              className=\"bg-white text-xs font-semibold px-1.5 py-0.5 md:px-2 md:py-1 rounded-b shadow-sm text-left leading-none\"\r\n              style={{ color: '#EA5A17' }}\r\n            >\r\n              <div>Descuento</div>\r\n              <div>especial</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Content con transición suave - Responsive */}\r\n        <div className=\"relative z-20 text-left p-2 md:p-4 bg-white -mt-2 md:-mt-3 flex-shrink-0\">\r\n          {/* Marca del producto - Responsive */}\r\n          {brand && (\r\n            <div className=\"text-xs md:text-sm uppercase text-gray-600 font-semibold tracking-wide drop-shadow-sm\">\r\n              {brand}\r\n            </div>\r\n          )}\r\n\r\n          {/* Título del producto - Con mejor contraste y responsive */}\r\n          <h3 className=\"font-bold text-gray-900 text-sm md:text-lg drop-shadow-sm line-clamp-2 leading-tight mb-1 md:mb-2\">\r\n            {title}\r\n          </h3>\r\n\r\n          {/* Precios - Optimizados para el gradiente y responsive */}\r\n          <div className=\"flex flex-col items-start space-y-1\">\r\n            {/* Precios en línea horizontal - Responsive */}\r\n            <div className=\"flex items-center gap-1 md:gap-2\">\r\n              {/* Precio actual - Grande y destacado, responsive */}\r\n              <div className=\"text-lg md:text-2xl font-bold drop-shadow-sm\" style={{ color: '#EA5A17' }}>\r\n                ${price?.toLocaleString('es-AR') || '0'}\r\n              </div>\r\n\r\n              {/* Precio anterior tachado - Responsive */}\r\n              {originalPrice && originalPrice > (price || 0) && (\r\n                <div className=\"text-gray-500 line-through text-xs md:text-sm drop-shadow-sm\">\r\n                  ${originalPrice.toLocaleString('es-AR')}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Cuotas en verde más oscuro - Responsive */}\r\n            {installments && (\r\n              <div className=\"text-green-800 text-xs md:text-sm font-medium drop-shadow-sm\">\r\n                {installments.quantity}x de ${installments.amount.toLocaleString('es-AR')}\r\n                {installments.interestFree ? ' sin interés' : ''}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Badge de envío gratis - Compacto y responsive */}\r\n          {shouldShowFreeShipping && (\r\n            <div className=\"flex justify-start mt-1 md:mt-2\">\r\n              <img\r\n                src=\"/images/icons/icon-envio.svg\"\r\n                alt=\"Envío gratis\"\r\n                className=\"h-6 md:h-10 w-auto object-contain drop-shadow-sm\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Botón \"Agregar al carrito\" - Animado y responsive */}\r\n          <div className=\"w-full mt-2 md:mt-3\">\r\n            {onAddToCart && (\r\n              <button\r\n                onClick={handleAddToCart}\r\n                disabled={isAddingToCart || stock === 0}\r\n                data-testid=\"add-to-cart\"\r\n                data-testid-btn=\"add-to-cart-btn\"\r\n                className={cn(\r\n                  \"w-full py-2 md:py-3 rounded-lg md:rounded-xl text-center shadow-md font-semibold flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base relative overflow-hidden\",\r\n                  \"transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] transform-gpu will-change-transform\",\r\n                  stock === 0\r\n                    ? \"bg-gray-200 text-gray-500 cursor-not-allowed\"\r\n                    : \"bg-yellow-400 hover:bg-yellow-500 text-[#EA5A17]\"\r\n                )}\r\n                style={{\r\n                  backgroundColor: stock !== 0 ? '#facc15' : undefined,\r\n                  transformOrigin: \"center\"\r\n                }}\r\n              >\r\n                  {isAddingToCart ? (\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      <div className=\"w-4 h-4 border-2 border-[#EA5A17] border-t-transparent rounded-full animate-spin\" />\r\n                      <span>Agregando...</span>\r\n                    </div>\r\n                  ) : stock === 0 ? (\r\n                    <>\r\n                      <AlertCircle className=\"w-4 h-4\" />\r\n                      <span>Sin stock</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ShoppingCart className=\"w-4 h-4\" />\r\n                      <span>Agregar al carrito</span>\r\n                    </>\r\n                  )}\r\n                </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {children}\r\n\r\n        {/* Shop Detail Modal */}\r\n        {showShopDetailModal && (\r\n          <ShopDetailModal\r\n            open={showShopDetailModal}\r\n            onOpenChange={setShowShopDetailModal}\r\n            product={{\r\n              id: String(productId || ''),\r\n              name: title || '',\r\n              price: price || 0,\r\n              originalPrice,\r\n              discount,\r\n              brand: brand || '',\r\n              category: '',\r\n              description: '',\r\n              images: image ? [image] : [],\r\n              stock: stock || 0,\r\n              isNew: isNew,\r\n              rating: 0,\r\n              reviews: 0,\r\n              colors: undefined, // Usará los colores por defecto del sistema\r\n              capacities: []\r\n            }}\r\n            onAddToCart={(productData, variants) => {\r\n              console.log('Agregando al carrito:', productData, variants);\r\n              if (onAddToCart) {\r\n                onAddToCart();\r\n              }\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nCommercialProductCard.displayName = \"CommercialProductCard\"\r\n\r\nexport { CommercialProductCard }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["CommercialProductCard","isFramerMotionAvailable","MotionDiv","MotionButton","React","forwardRef","className","image","title","brand","price","originalPrice","discount","isNew","cta","stock","productId","onAddToCart","showCartAnimation","installments","freeShipping","shippingText","deliveryLocation","children","props","ref","isAddingToCart","setIsAddingToCart","useState","isHovered","setIsHovered","isWishlisted","setIsWishlisted","showQuickActions","setShowQuickActions","showShopDetailModal","setShowShopDetailModal","handleOpenModal","useCallback","handleCardClick","e","target","closest","preventDefault","stopPropagation","handleAddToCart","setTimeout","error","console","shouldShowFreeShipping","div","cn","data-testid","data-testid-commercial","style","transformOrigin","transition","transform","boxShadow","onMouseEnter","onMouseLeave","onClick","img","src","alt","onError","span","backgroundColor","color","h3","toLocaleString","quantity","amount","interestFree","button","disabled","data-testid-btn","undefined","AlertCircle","ShoppingCart","ShopDetailModal","open","onOpenChange","product","id","String","name","category","description","images","rating","reviews","colors","capacities","productData","variants","log","displayName"],"mappings":"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"}