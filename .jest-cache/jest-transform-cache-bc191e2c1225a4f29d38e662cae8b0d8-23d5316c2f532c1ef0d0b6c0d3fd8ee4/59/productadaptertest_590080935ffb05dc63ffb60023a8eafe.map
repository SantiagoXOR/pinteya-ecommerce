{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\lib\\adapters\\product-adapter.test.ts"],"sourcesContent":["import { getValidImageUrl, getThumbnailImage, getPreviewImage } from '@/lib/adapters/product-adapter';\r\n\r\ndescribe('Product Image Validation Functions', () => {\r\n  describe('getValidImageUrl', () => {\r\n    it('should return the image URL when it is valid', () => {\r\n      const validUrl = 'https://example.com/image.jpg';\r\n      expect(getValidImageUrl(validUrl)).toBe(validUrl);\r\n    });\r\n\r\n    it('should return placeholder when image URL is empty string', () => {\r\n      const emptyUrl = '';\r\n      const result = getValidImageUrl(emptyUrl);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when image URL is only whitespace', () => {\r\n      const whitespaceUrl = '   ';\r\n      const result = getValidImageUrl(whitespaceUrl);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when image URL is undefined', () => {\r\n      const result = getValidImageUrl(undefined);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when image URL is null', () => {\r\n      const result = getValidImageUrl(null);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should trim whitespace from valid URLs', () => {\r\n      const urlWithWhitespace = '  https://example.com/image.jpg  ';\r\n      const result = getValidImageUrl(urlWithWhitespace);\r\n      expect(result).toBe('https://example.com/image.jpg');\r\n    });\r\n\r\n    it('should use custom fallback when provided', () => {\r\n      const customFallback = '/custom/placeholder.png';\r\n      const result = getValidImageUrl('', customFallback);\r\n      expect(result).toBe(customFallback);\r\n    });\r\n  });\r\n\r\n  describe('getThumbnailImage', () => {\r\n    it('should return valid thumbnail from imgs property', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: ['https://example.com/thumb.jpg'],\r\n          previews: ['https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      const result = getThumbnailImage(product);\r\n      expect(result).toBe('https://example.com/thumb.jpg');\r\n    });\r\n\r\n    it('should return placeholder when thumbnail is empty string', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: [''],\r\n          previews: ['https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      const result = getThumbnailImage(product);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when no thumbnails exist', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: [],\r\n          previews: ['https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      const result = getThumbnailImage(product);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when imgs is undefined', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5\r\n      };\r\n      \r\n      const result = getThumbnailImage(product);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n  });\r\n\r\n  describe('getPreviewImage', () => {\r\n    it('should return valid preview from imgs property', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: ['https://example.com/thumb.jpg'],\r\n          previews: ['https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      const result = getPreviewImage(product);\r\n      expect(result).toBe('https://example.com/preview.jpg');\r\n    });\r\n\r\n    it('should return placeholder when preview is empty string', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: ['https://example.com/thumb.jpg'],\r\n          previews: ['']\r\n        }\r\n      };\r\n      \r\n      const result = getPreviewImage(product);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n\r\n    it('should return placeholder when no previews exist', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: ['https://example.com/thumb.jpg'],\r\n          previews: []\r\n        }\r\n      };\r\n      \r\n      const result = getPreviewImage(product);\r\n      expect(result).toBe('/images/products/placeholder.svg');\r\n    });\r\n  });\r\n\r\n  describe('Edge Cases', () => {\r\n    it('should handle products with images property instead of imgs', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        images: {\r\n          thumbnails: ['https://example.com/thumb.jpg'],\r\n          previews: ['https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      const thumbnailResult = getThumbnailImage(product as any);\r\n      const previewResult = getPreviewImage(product as any);\r\n      \r\n      expect(thumbnailResult).toBe('https://example.com/thumb.jpg');\r\n      expect(previewResult).toBe('https://example.com/preview.jpg');\r\n    });\r\n\r\n    it('should handle mixed empty and valid URLs in arrays', () => {\r\n      const product = {\r\n        id: 1,\r\n        title: 'Test Product',\r\n        price: 100,\r\n        discountedPrice: 90,\r\n        reviews: 5,\r\n        imgs: {\r\n          thumbnails: ['', '  ', 'https://example.com/thumb.jpg'],\r\n          previews: ['', 'https://example.com/preview.jpg']\r\n        }\r\n      };\r\n      \r\n      // Should still return placeholder because first element is empty\r\n      const thumbnailResult = getThumbnailImage(product);\r\n      const previewResult = getPreviewImage(product);\r\n      \r\n      expect(thumbnailResult).toBe('/images/products/placeholder.svg');\r\n      expect(previewResult).toBe('/images/products/placeholder.svg');\r\n    });\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["describe","it","validUrl","expect","getValidImageUrl","toBe","emptyUrl","result","whitespaceUrl","undefined","urlWithWhitespace","customFallback","product","id","title","price","discountedPrice","reviews","imgs","thumbnails","previews","getThumbnailImage","getPreviewImage","images","thumbnailResult","previewResult"],"mappings":"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"}