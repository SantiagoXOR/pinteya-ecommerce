1f6f3a0a806d2cc682c53dcbffaa5ec4
// ===================================
// PINTEYA E-COMMERCE - STRICT ORDERS HOOK (REFACTORED)
// Hook orquestador para gestión de órdenes con validación estricta
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useOrderDetailStrict () {
        return useOrderDetailStrict;
    },
    get useOrdersEnterpriseStrict () {
        return useOrdersEnterpriseStrict;
    }
});
const _react = require("react");
const _usetoast = require("../use-toast");
const _apistrict = require("../../types/api-strict");
const _apimonitoring = require("../../utils/api-monitoring");
const _useOrdersCache = require("./useOrdersCache");
const _useOrdersApi = require("./useOrdersApi");
const _useOrdersState = require("./useOrdersState");
const _useOrdersDevPersistence = require("./useOrdersDevPersistence");
// Función de debounce para evitar peticiones múltiples
function debounce(func, wait) {
    let timeout;
    return (...args)=>{
        clearTimeout(timeout);
        timeout = setTimeout(()=>func(...args), wait);
    };
}
const DEFAULT_OPTIONS = {
    autoFetch: true,
    refetchInterval: 0,
    maxRetries: 3,
    timeout: 10000,
    enableCache: true,
    cacheTimeout: 5 * 60 * 1000
};
function useOrdersEnterpriseStrict(initialFilters = {}, options = {}) {
    const { toast } = (0, _usetoast.useToast)();
    const apiMonitoring = (0, _apimonitoring.useApiMonitoring)();
    const opts = (0, _react.useMemo)(()=>({
            ...DEFAULT_OPTIONS,
            ...options
        }), [
        options
    ]);
    // Memoizar las funciones de monitoreo para evitar recreaciones
    const recordDiscrepancy = (0, _react.useCallback)(apiMonitoring.recordDiscrepancy, []);
    const recordRenderingIssue = (0, _react.useCallback)(apiMonitoring.recordRenderingIssue, []);
    // ===================================
    // HOOKS ESPECIALIZADOS
    // ===================================
    // Hook de cache
    const cache = (0, _useOrdersCache.useOrdersCache)({
        enableCache: opts.enableCache,
        cacheTimeout: opts.cacheTimeout,
        maxSize: 50,
        cleanupInterval: 10 * 60 * 1000,
        minRequestInterval: 1000
    });
    // Hook de persistencia para desarrollo (Fast Refresh)
    const devPersistence = (0, _useOrdersDevPersistence.useOrdersDevState)('orders-enterprise-dev');
    // Hook de estado
    const state = (0, _useOrdersState.useOrdersState)(initialFilters);
    // Hook de API
    const api = (0, _useOrdersApi.useOrdersApi)({
        timeout: opts.timeout,
        maxRetries: opts.maxRetries,
        enableCache: opts.enableCache,
        cache
    });
    // Referencias para control de requests (simplificadas)
    const retryCountRef = (0, _react.useRef)(0);
    const refetchIntervalRef = (0, _react.useRef)(null);
    const debounceTimeoutRef = (0, _react.useRef)(null);
    // ===================================
    // FUNCIONES DE FETCH SIMPLIFICADAS
    // ===================================
    // Usar el hook de API directamente
    const fetchOrdersInternal = api.fetchOrdersInternal;
    // ===================================
    // FUNCIONES DE FETCH PÚBLICAS
    // ===================================
    // Lógica de fetch movida a useOrdersApi.ts
    // ===================================
    // FUNCIÓN DE FETCH PÚBLICA CON RETRY
    // ===================================
    // Función interna sin debounce para uso directo
    const fetchOrdersImmediate = (0, _react.useCallback)(async (newFilters = {})=>{
        console.log('[useOrdersEnterpriseStrict] fetchOrdersImmediate called with filters:', newFilters);
        console.log('[useOrdersEnterpriseStrict] Current state filters:', state.filters);
        // Generar clave única para esta petición
        const requestKey = JSON.stringify({
            ...state.filters,
            ...newFilters
        });
        console.log('[useOrdersEnterpriseStrict] Request key:', requestKey);
        // Evitar peticiones duplicadas
        if (state.hasFiltersChanged({
            ...state.filters,
            ...newFilters
        }) && state.isLoading) {
            console.log('[useOrdersEnterpriseStrict] Skipping duplicate request');
            return;
        }
        // Actualizar filtros y estado de carga
        console.log('[useOrdersEnterpriseStrict] Updating filters and setting loading to true');
        state.updateFilters(newFilters);
        state.setLoading(true);
        retryCountRef.current = 0;
        const attemptFetch = async (attempt)=>{
            const currentFilters = state.getLastFilters();
            console.log('[useOrdersEnterpriseStrict] attemptFetch - attempt:', attempt, 'filters:', currentFilters);
            const result = await fetchOrdersInternal(currentFilters, attempt > 0);
            console.log('[useOrdersEnterpriseStrict] API result:', result);
            if ((0, _apistrict.isStrictApiResponse)(result)) {
                console.log('[useOrdersEnterpriseStrict] Valid API response received:', result.data);
                // Monitoreo automático de discrepancias
                const expectedCount = result.data.pagination.total;
                const actualCount = result.data.orders.length;
                const endpoint = `/api/admin/orders?${new URLSearchParams({
                    page: currentFilters.page?.toString() || '1',
                    limit: currentFilters.limit?.toString() || '20',
                    ...currentFilters.status && {
                        status: currentFilters.status
                    },
                    ...currentFilters.payment_status && {
                        payment_status: currentFilters.payment_status
                    },
                    ...currentFilters.fulfillment_status && {
                        fulfillment_status: currentFilters.fulfillment_status
                    },
                    ...currentFilters.sort_by && {
                        sort_by: currentFilters.sort_by
                    },
                    ...currentFilters.sort_order && {
                        sort_order: currentFilters.sort_order
                    }
                }).toString()}`;
                // Solo registrar discrepancia si hay una diferencia real (no por paginación)
                const expectedPageCount = Math.min(currentFilters.limit || 20, expectedCount - ((currentFilters.page || 1) - 1) * (currentFilters.limit || 20));
                if (actualCount < expectedPageCount && expectedPageCount > 0) {
                    recordDiscrepancy(endpoint, expectedPageCount, actualCount);
                }
                // Actualizar estado usando el hook especializado
                state.setOrders(result.data.orders);
                state.setPagination(result.data.pagination);
                state.setAnalytics(result.data.analytics || null);
                retryCountRef.current = 0;
                // ✅ PERSISTIR ESTADO PARA DESARROLLO (Fast Refresh)
                if (process.env.NODE_ENV === 'development') {
                    devPersistence.persistState({
                        orders: result.data.orders,
                        pagination: result.data.pagination,
                        analytics: result.data.analytics || null,
                        filters: currentFilters,
                        hasData: true,
                        lastFetchTime: Date.now()
                    });
                }
            } else {
                // Es un error
                if (attempt < opts.maxRetries && result.code !== 'REQUEST_CANCELLED') {
                    retryCountRef.current = attempt + 1;
                    // Esperar antes del retry (exponential backoff)
                    const delay = Math.min(1000 * Math.pow(2, attempt), 10000);
                    await new Promise((resolve)=>setTimeout(resolve, delay));
                    return attemptFetch(attempt + 1);
                }
                // Máximo de reintentos alcanzado o error no recuperable
                state.setError(result.error);
                // Registrar problema de renderizado por error de API
                recordRenderingIssue('useOrdersEnterpriseStrict', 0, 0, currentFilters, result.error);
                // Mostrar toast de error
                if (result.code !== 'REQUEST_CANCELLED') {
                    toast({
                        title: 'Error al cargar órdenes',
                        description: result.error,
                        variant: 'destructive'
                    });
                }
            }
        };
        await attemptFetch(0);
    }, [
        fetchOrdersInternal,
        opts.maxRetries,
        toast,
        recordDiscrepancy,
        recordRenderingIssue,
        state
    ]);
    // Función fetchOrders con debouncing para evitar peticiones múltiples
    const fetchOrders = (0, _react.useCallback)((newFilters = {})=>{
        return new Promise((resolve)=>{
            // Limpiar timeout anterior si existe
            if (debounceTimeoutRef.current) {
                clearTimeout(debounceTimeoutRef.current);
            }
            // Configurar nuevo timeout con debounce
            const debounceMs = process.env.NODE_ENV === 'development' ? 300 : 150;
            debounceTimeoutRef.current = setTimeout(async ()=>{
                try {
                    await fetchOrdersImmediate(newFilters);
                    resolve();
                } catch (error) {
                    console.error('Error in debounced fetchOrders:', error);
                    resolve(); // Resolver incluso en caso de error para evitar promesas colgadas
                }
            }, debounceMs);
        });
    }, [
        fetchOrdersImmediate
    ]);
    // ===================================
    // OTRAS ACCIONES
    // ===================================
    const refreshOrders = (0, _react.useCallback)(async ()=>{
        // Limpiar cache para forzar refresh
        if (opts.enableCache) {
            cache.clearCache();
        }
        await fetchOrders();
    }, [
        fetchOrders,
        opts.enableCache,
        cache
    ]);
    // Usar las funciones del hook de estado directamente
    const updateFilters = state.updateFilters;
    const clearError = state.clearError;
    const retryLastRequest = (0, _react.useCallback)(async ()=>{
        const lastFilters = state.getLastFilters();
        if (lastFilters) {
            await fetchOrders(lastFilters);
        }
    }, [
        fetchOrders,
        state
    ]);
    // ===================================
    // EFECTOS
    // ===================================
    // ===================================
    // RESTAURACIÓN DE ESTADO PERSISTIDO (DESARROLLO)
    // ===================================
    const hasRestoredRef = (0, _react.useRef)(false);
    (0, _react.useEffect)(()=>{
        if (!hasRestoredRef.current && process.env.NODE_ENV === 'development') {
            hasRestoredRef.current = true;
            // Intentar restaurar estado persistido
            if (devPersistence.hasValidPersistedData()) {
                const persistedState = devPersistence.getPersistedState();
                if (persistedState) {
                    console.log('[useOrdersEnterpriseStrict] Restoring persisted state:', {
                        ordersCount: persistedState.orders.length,
                        hasData: persistedState.hasData
                    });
                    // Restaurar estado
                    state.setOrders(persistedState.orders);
                    state.setPagination(persistedState.pagination);
                    state.setAnalytics(persistedState.analytics);
                    state.updateFilters(persistedState.filters);
                    return; // No hacer auto-fetch si tenemos datos persistidos
                }
            }
        }
        // Auto-fetch inicial solo si no hay datos persistidos
        if (opts.autoFetch && !hasRestoredRef.current) {
            fetchOrders();
        }
    }, [
        opts.autoFetch
    ]); // Solo ejecutar una vez al montar
    // Escuchar cambios en filtros con debouncing optimizado
    const filtersRef = (0, _react.useRef)(state.filters);
    const isInitialMount = (0, _react.useRef)(true);
    (0, _react.useEffect)(()=>{
        // Evitar fetch en el primer render (ya se hace en auto-fetch)
        if (isInitialMount.current) {
            isInitialMount.current = false;
            filtersRef.current = state.filters;
            return;
        }
        // Solo hacer fetch si los filtros han cambiado realmente
        const hasChanged = JSON.stringify(filtersRef.current) !== JSON.stringify(state.filters);
        if (hasChanged) {
            filtersRef.current = state.filters;
            fetchOrders();
        }
    }, [
        state.filters,
        fetchOrders
    ]); // Dependencias mínimas y estables
    // Refetch interval - TEMPORALMENTE DESHABILITADO para evitar refresco infinito
    (0, _react.useEffect)(()=>{
    // NOTA: Refetch interval deshabilitado temporalmente para solucionar refresco infinito
    // TODO: Reimplementar con useRef para fetchOrders o usar React Query
    /*
    if (opts.refetchInterval > 0) {
      refetchIntervalRef.current = setInterval(() => {
        if (!state.isLoading) {
          fetchOrders();
        }
      }, opts.refetchInterval);

      return () => {
        if (refetchIntervalRef.current) {
          clearInterval(refetchIntervalRef.current);
        }
      };
    }
    */ }, [
        opts.refetchInterval
    ]);
    // Limpieza automática de cache movida a useOrdersCache.ts
    // Cleanup al desmontar - OPTIMIZADO: Sin dependencias inestables
    (0, _react.useEffect)(()=>{
        return ()=>{
            // Cancelar peticiones en progreso usando el hook de API
            api.abortCurrentRequest();
            // Limpiar intervalos y timeouts
            if (refetchIntervalRef.current) {
                clearInterval(refetchIntervalRef.current);
            }
            if (debounceTimeoutRef.current) {
                clearTimeout(debounceTimeoutRef.current);
            }
            if (process.env.NODE_ENV === 'development') {
                console.log('[useOrdersEnterpriseStrict] Hook cleanup completed');
            }
        };
    }, []); // ✅ CORREGIDO: Sin dependencias para evitar remontajes por Fast Refresh
    // ===================================
    // RETORNO DEL HOOK
    // ===================================
    return {
        // Estado
        orders: state.orders,
        pagination: state.pagination,
        filters: state.filters,
        analytics: state.analytics,
        isLoading: state.isLoading,
        error: state.error,
        lastFetch: state.lastFetch,
        // Acciones
        fetchOrders,
        refreshOrders,
        updateFilters,
        clearError,
        retryLastRequest
    };
}
function useOrderDetailStrict(orderId) {
    const { toast } = (0, _usetoast.useToast)();
    const [order, setOrder] = useState(null);
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState(null);
    const fetchOrder = (0, _react.useCallback)(async ()=>{
        if (!orderId) {
            return;
        }
        setIsLoading(true);
        setError(null);
        try {
            const response = await fetch(`/api/admin/orders/${orderId}`, {
                credentials: 'include'
            });
            const data = await response.json();
            const validatedResponse = toStrictOrdersResponse(data);
            if ((0, _apistrict.isStrictApiError)(validatedResponse)) {
                setError(validatedResponse.error);
                toast({
                    title: 'Error al cargar orden',
                    description: validatedResponse.error,
                    variant: 'destructive'
                });
            } else {
                // Para orden individual, extraer la primera orden
                const orderData = validatedResponse.data.orders[0] || null;
                setOrder(orderData);
            }
        } catch (err) {
            const errorMessage = err instanceof Error ? err.message : 'Error desconocido';
            setError(errorMessage);
            toast({
                title: 'Error al cargar orden',
                description: errorMessage,
                variant: 'destructive'
            });
        } finally{
            setIsLoading(false);
        }
    }, [
        orderId,
        toast
    ]);
    (0, _react.useEffect)(()=>{
        fetchOrder();
    }, [
        fetchOrder
    ]);
    return {
        order,
        isLoading,
        error,
        refetch: fetchOrder
    };
} // ===================================
 // UTILIDADES EXPORTADAS
 // ===================================
 /**
 * Utilidades de cache movidas a useOrdersCache.ts
 * Estas funciones están disponibles a través del hook useOrdersCache
 */  // Las utilidades de cache ahora están disponibles a través del hook useOrdersCache:
 // - cache.clearCache()
 // - cache.getCacheStats()
 // - cache.getPendingRequest()
 // - cache.setPendingRequest()

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBTVFJJQ1QgT1JERVJTIEhPT0sgKFJFRkFDVE9SRUQpXG4vLyBIb29rIG9ycXVlc3RhZG9yIHBhcmEgZ2VzdGnDs24gZGUgw7NyZGVuZXMgY29uIHZhbGlkYWNpw7NuIGVzdHJpY3RhXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9ob29rcy91c2UtdG9hc3QnXG5pbXBvcnQge1xuICBTdHJpY3RPcmRlcnNMaXN0UmVzcG9uc2UsXG4gIFN0cmljdEFwaUVycm9yLFxuICBBcGlSZXN1bHQsXG4gIGNyZWF0ZVN0cmljdEFwaUVycm9yLFxuICBTdHJpY3RPcmRlckVudGVycHJpc2UsXG4gIFN0cmljdFBhZ2luYXRpb24sXG4gIGlzU3RyaWN0QXBpRXJyb3IsXG4gIGlzU3RyaWN0QXBpUmVzcG9uc2UsXG59IGZyb20gJ0AvdHlwZXMvYXBpLXN0cmljdCdcbmltcG9ydCB7IE9yZGVyU3RhdHVzLCBQYXltZW50U3RhdHVzLCBGdWxmaWxsbWVudFN0YXR1cyB9IGZyb20gJ0AvdHlwZXMvb3JkZXJzLWVudGVycHJpc2UnXG5pbXBvcnQgeyB1c2VBcGlNb25pdG9yaW5nIH0gZnJvbSAnQC91dGlscy9hcGktbW9uaXRvcmluZydcbmltcG9ydCB7IHVzZU9yZGVyc0NhY2hlIH0gZnJvbSAnLi91c2VPcmRlcnNDYWNoZSdcbmltcG9ydCB7IHVzZU9yZGVyc0FwaSB9IGZyb20gJy4vdXNlT3JkZXJzQXBpJ1xuaW1wb3J0IHsgdXNlT3JkZXJzU3RhdGUsIFN0cmljdE9yZGVyc1N0YXRlLCBTdHJpY3RPcmRlcnNBY3Rpb25zIH0gZnJvbSAnLi91c2VPcmRlcnNTdGF0ZSdcbmltcG9ydCB7IHVzZU9yZGVyc0RldlN0YXRlIH0gZnJvbSAnLi91c2VPcmRlcnNEZXZQZXJzaXN0ZW5jZSdcblxuLy8gRnVuY2nDs24gZGUgZGVib3VuY2UgcGFyYSBldml0YXIgcGV0aWNpb25lcyBtw7psdGlwbGVzXG5mdW5jdGlvbiBkZWJvdW5jZTxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICBmdW5jOiBULFxuICB3YWl0OiBudW1iZXJcbik6ICguLi5hcmdzOiBQYXJhbWV0ZXJzPFQ+KSA9PiB2b2lkIHtcbiAgbGV0IHRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0XG4gIHJldHVybiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGZ1bmMoLi4uYXJncyksIHdhaXQpXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIERFIEZJTFRST1MgRVNUUklDVE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmljdE9yZGVyRmlsdGVycyB7XG4gIHJlYWRvbmx5IHNlYXJjaD86IHN0cmluZ1xuICByZWFkb25seSBzdGF0dXM/OiBPcmRlclN0YXR1cyB8ICdhbGwnXG4gIHJlYWRvbmx5IHBheW1lbnRfc3RhdHVzPzogUGF5bWVudFN0YXR1cyB8ICdhbGwnXG4gIHJlYWRvbmx5IGZ1bGZpbGxtZW50X3N0YXR1cz86IEZ1bGZpbGxtZW50U3RhdHVzIHwgJ2FsbCdcbiAgcmVhZG9ubHkgZGF0ZV9mcm9tPzogc3RyaW5nXG4gIHJlYWRvbmx5IGRhdGVfdG8/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcGFnZT86IG51bWJlclxuICByZWFkb25seSBsaW1pdD86IG51bWJlclxuICByZWFkb25seSBzb3J0X2J5PzogJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnIHwgJ3RvdGFsJyB8ICdvcmRlcl9udW1iZXInXG4gIHJlYWRvbmx5IHNvcnRfb3JkZXI/OiAnYXNjJyB8ICdkZXNjJ1xufVxuXG4vLyBUaXBvcyBtb3ZpZG9zIGEgdXNlT3JkZXJzU3RhdGUudHNcblxuZXhwb3J0IGludGVyZmFjZSBVc2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0UmV0dXJuIGV4dGVuZHMgU3RyaWN0T3JkZXJzU3RhdGUsIFN0cmljdE9yZGVyc0FjdGlvbnMge1xuICByZWFkb25seSBmZXRjaE9yZGVyczogKGZpbHRlcnM/OiBQYXJ0aWFsPFN0cmljdE9yZGVyRmlsdGVycz4pID0+IFByb21pc2U8dm9pZD5cbiAgcmVhZG9ubHkgcmVmcmVzaE9yZGVyczogKCkgPT4gUHJvbWlzZTx2b2lkPlxuICByZWFkb25seSByZXRyeUxhc3RSZXF1ZXN0OiAoKSA9PiBQcm9taXNlPHZvaWQ+XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT05GSUdVUkFDScOTTiBERUwgSE9PS1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIFVzZU9yZGVyc0VudGVycHJpc2VTdHJpY3RPcHRpb25zIHtcbiAgcmVhZG9ubHkgYXV0b0ZldGNoPzogYm9vbGVhblxuICByZWFkb25seSByZWZldGNoSW50ZXJ2YWw/OiBudW1iZXJcbiAgcmVhZG9ubHkgbWF4UmV0cmllcz86IG51bWJlclxuICByZWFkb25seSB0aW1lb3V0PzogbnVtYmVyXG4gIHJlYWRvbmx5IGVuYWJsZUNhY2hlPzogYm9vbGVhblxuICByZWFkb25seSBjYWNoZVRpbWVvdXQ/OiBudW1iZXJcbn1cblxuY29uc3QgREVGQVVMVF9PUFRJT05TOiBSZXF1aXJlZDxVc2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0T3B0aW9ucz4gPSB7XG4gIGF1dG9GZXRjaDogdHJ1ZSxcbiAgcmVmZXRjaEludGVydmFsOiAwLCAvLyAwID0gZGlzYWJsZWRcbiAgbWF4UmV0cmllczogMyxcbiAgdGltZW91dDogMTAwMDAsIC8vIDEwIHNlY29uZHNcbiAgZW5hYmxlQ2FjaGU6IHRydWUsXG4gIGNhY2hlVGltZW91dDogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dGVzXG59XG5cbi8vIENvbnN0YW50ZXMgREVGQVVMVCBtb3ZpZGFzIGEgdXNlT3JkZXJzU3RhdGUudHNcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTkZJR1VSQUNJw5NOIERFTCBIT09LIE9SUVVFU1RBRE9SXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBGdW5jaW9uZXMgZGUgY2FjaGUgbW92aWRhcyBhIHVzZU9yZGVyc0NhY2hlLnRzXG5cbi8vIEZ1bmNpb25lcyBkZSBjYWNoZSBtb3ZpZGFzIGEgdXNlT3JkZXJzQ2FjaGUudHNcblxuLy8gVG9kYXMgbGFzIGZ1bmNpb25lcyBkZSBjYWNoZSBtb3ZpZGFzIGEgdXNlT3JkZXJzQ2FjaGUudHNcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0sgUFJJTkNJUEFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdChcbiAgaW5pdGlhbEZpbHRlcnM6IFBhcnRpYWw8U3RyaWN0T3JkZXJGaWx0ZXJzPiA9IHt9LFxuICBvcHRpb25zOiBQYXJ0aWFsPFVzZU9yZGVyc0VudGVycHJpc2VTdHJpY3RPcHRpb25zPiA9IHt9XG4pOiBVc2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0UmV0dXJuIHtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKVxuICBjb25zdCBhcGlNb25pdG9yaW5nID0gdXNlQXBpTW9uaXRvcmluZygpXG4gIGNvbnN0IG9wdHMgPSB1c2VNZW1vKCgpID0+ICh7IC4uLkRFRkFVTFRfT1BUSU9OUywgLi4ub3B0aW9ucyB9KSwgW29wdGlvbnNdKVxuXG4gIC8vIE1lbW9pemFyIGxhcyBmdW5jaW9uZXMgZGUgbW9uaXRvcmVvIHBhcmEgZXZpdGFyIHJlY3JlYWNpb25lc1xuICBjb25zdCByZWNvcmREaXNjcmVwYW5jeSA9IHVzZUNhbGxiYWNrKGFwaU1vbml0b3JpbmcucmVjb3JkRGlzY3JlcGFuY3ksIFtdKVxuICBjb25zdCByZWNvcmRSZW5kZXJpbmdJc3N1ZSA9IHVzZUNhbGxiYWNrKGFwaU1vbml0b3JpbmcucmVjb3JkUmVuZGVyaW5nSXNzdWUsIFtdKVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEhPT0tTIEVTUEVDSUFMSVpBRE9TXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLy8gSG9vayBkZSBjYWNoZVxuICBjb25zdCBjYWNoZSA9IHVzZU9yZGVyc0NhY2hlKHtcbiAgICBlbmFibGVDYWNoZTogb3B0cy5lbmFibGVDYWNoZSxcbiAgICBjYWNoZVRpbWVvdXQ6IG9wdHMuY2FjaGVUaW1lb3V0LFxuICAgIG1heFNpemU6IDUwLFxuICAgIGNsZWFudXBJbnRlcnZhbDogMTAgKiA2MCAqIDEwMDAsXG4gICAgbWluUmVxdWVzdEludGVydmFsOiAxMDAwLFxuICB9KVxuXG4gIC8vIEhvb2sgZGUgcGVyc2lzdGVuY2lhIHBhcmEgZGVzYXJyb2xsbyAoRmFzdCBSZWZyZXNoKVxuICBjb25zdCBkZXZQZXJzaXN0ZW5jZSA9IHVzZU9yZGVyc0RldlN0YXRlKCdvcmRlcnMtZW50ZXJwcmlzZS1kZXYnKVxuXG4gIC8vIEhvb2sgZGUgZXN0YWRvXG4gIGNvbnN0IHN0YXRlID0gdXNlT3JkZXJzU3RhdGUoaW5pdGlhbEZpbHRlcnMpXG5cbiAgLy8gSG9vayBkZSBBUElcbiAgY29uc3QgYXBpID0gdXNlT3JkZXJzQXBpKHtcbiAgICB0aW1lb3V0OiBvcHRzLnRpbWVvdXQsXG4gICAgbWF4UmV0cmllczogb3B0cy5tYXhSZXRyaWVzLFxuICAgIGVuYWJsZUNhY2hlOiBvcHRzLmVuYWJsZUNhY2hlLFxuICAgIGNhY2hlLFxuICB9KVxuXG4gIC8vIFJlZmVyZW5jaWFzIHBhcmEgY29udHJvbCBkZSByZXF1ZXN0cyAoc2ltcGxpZmljYWRhcylcbiAgY29uc3QgcmV0cnlDb3VudFJlZiA9IHVzZVJlZigwKVxuICBjb25zdCByZWZldGNoSW50ZXJ2YWxSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKVxuICBjb25zdCBkZWJvdW5jZVRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEZVTkNJT05FUyBERSBGRVRDSCBTSU1QTElGSUNBREFTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLy8gVXNhciBlbCBob29rIGRlIEFQSSBkaXJlY3RhbWVudGVcbiAgY29uc3QgZmV0Y2hPcmRlcnNJbnRlcm5hbCA9IGFwaS5mZXRjaE9yZGVyc0ludGVybmFsXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIEZFVENIIFDDmkJMSUNBU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8vIEzDs2dpY2EgZGUgZmV0Y2ggbW92aWRhIGEgdXNlT3JkZXJzQXBpLnRzXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0nDk04gREUgRkVUQ0ggUMOaQkxJQ0EgQ09OIFJFVFJZXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLy8gRnVuY2nDs24gaW50ZXJuYSBzaW4gZGVib3VuY2UgcGFyYSB1c28gZGlyZWN0b1xuICBjb25zdCBmZXRjaE9yZGVyc0ltbWVkaWF0ZSA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChuZXdGaWx0ZXJzOiBQYXJ0aWFsPFN0cmljdE9yZGVyRmlsdGVycz4gPSB7fSk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdbdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdF0gZmV0Y2hPcmRlcnNJbW1lZGlhdGUgY2FsbGVkIHdpdGggZmlsdGVyczonLFxuICAgICAgICBuZXdGaWx0ZXJzXG4gICAgICApXG4gICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0VudGVycHJpc2VTdHJpY3RdIEN1cnJlbnQgc3RhdGUgZmlsdGVyczonLCBzdGF0ZS5maWx0ZXJzKVxuXG4gICAgICAvLyBHZW5lcmFyIGNsYXZlIMO6bmljYSBwYXJhIGVzdGEgcGV0aWNpw7NuXG4gICAgICBjb25zdCByZXF1ZXN0S2V5ID0gSlNPTi5zdHJpbmdpZnkoeyAuLi5zdGF0ZS5maWx0ZXJzLCAuLi5uZXdGaWx0ZXJzIH0pXG4gICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0VudGVycHJpc2VTdHJpY3RdIFJlcXVlc3Qga2V5OicsIHJlcXVlc3RLZXkpXG5cbiAgICAgIC8vIEV2aXRhciBwZXRpY2lvbmVzIGR1cGxpY2FkYXNcbiAgICAgIGlmIChzdGF0ZS5oYXNGaWx0ZXJzQ2hhbmdlZCh7IC4uLnN0YXRlLmZpbHRlcnMsIC4uLm5ld0ZpbHRlcnMgfSkgJiYgc3RhdGUuaXNMb2FkaW5nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdF0gU2tpcHBpbmcgZHVwbGljYXRlIHJlcXVlc3QnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQWN0dWFsaXphciBmaWx0cm9zIHkgZXN0YWRvIGRlIGNhcmdhXG4gICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0VudGVycHJpc2VTdHJpY3RdIFVwZGF0aW5nIGZpbHRlcnMgYW5kIHNldHRpbmcgbG9hZGluZyB0byB0cnVlJylcbiAgICAgIHN0YXRlLnVwZGF0ZUZpbHRlcnMobmV3RmlsdGVycylcbiAgICAgIHN0YXRlLnNldExvYWRpbmcodHJ1ZSlcbiAgICAgIHJldHJ5Q291bnRSZWYuY3VycmVudCA9IDBcblxuICAgICAgY29uc3QgYXR0ZW1wdEZldGNoID0gYXN5bmMgKGF0dGVtcHQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVycyA9IHN0YXRlLmdldExhc3RGaWx0ZXJzKClcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJ1t1c2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0XSBhdHRlbXB0RmV0Y2ggLSBhdHRlbXB0OicsXG4gICAgICAgICAgYXR0ZW1wdCxcbiAgICAgICAgICAnZmlsdGVyczonLFxuICAgICAgICAgIGN1cnJlbnRGaWx0ZXJzXG4gICAgICAgIClcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaE9yZGVyc0ludGVybmFsKGN1cnJlbnRGaWx0ZXJzLCBhdHRlbXB0ID4gMClcbiAgICAgICAgY29uc29sZS5sb2coJ1t1c2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0XSBBUEkgcmVzdWx0OicsIHJlc3VsdClcblxuICAgICAgICBpZiAoaXNTdHJpY3RBcGlSZXNwb25zZShyZXN1bHQpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1t1c2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0XSBWYWxpZCBBUEkgcmVzcG9uc2UgcmVjZWl2ZWQ6JywgcmVzdWx0LmRhdGEpXG4gICAgICAgICAgLy8gTW9uaXRvcmVvIGF1dG9tw6F0aWNvIGRlIGRpc2NyZXBhbmNpYXNcbiAgICAgICAgICBjb25zdCBleHBlY3RlZENvdW50ID0gcmVzdWx0LmRhdGEucGFnaW5hdGlvbi50b3RhbFxuICAgICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gcmVzdWx0LmRhdGEub3JkZXJzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYC9hcGkvYWRtaW4vb3JkZXJzPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICBwYWdlOiBjdXJyZW50RmlsdGVycy5wYWdlPy50b1N0cmluZygpIHx8ICcxJyxcbiAgICAgICAgICAgIGxpbWl0OiBjdXJyZW50RmlsdGVycy5saW1pdD8udG9TdHJpbmcoKSB8fCAnMjAnLFxuICAgICAgICAgICAgLi4uKGN1cnJlbnRGaWx0ZXJzLnN0YXR1cyAmJiB7IHN0YXR1czogY3VycmVudEZpbHRlcnMuc3RhdHVzIH0pLFxuICAgICAgICAgICAgLi4uKGN1cnJlbnRGaWx0ZXJzLnBheW1lbnRfc3RhdHVzICYmIHsgcGF5bWVudF9zdGF0dXM6IGN1cnJlbnRGaWx0ZXJzLnBheW1lbnRfc3RhdHVzIH0pLFxuICAgICAgICAgICAgLi4uKGN1cnJlbnRGaWx0ZXJzLmZ1bGZpbGxtZW50X3N0YXR1cyAmJiB7XG4gICAgICAgICAgICAgIGZ1bGZpbGxtZW50X3N0YXR1czogY3VycmVudEZpbHRlcnMuZnVsZmlsbG1lbnRfc3RhdHVzLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi4oY3VycmVudEZpbHRlcnMuc29ydF9ieSAmJiB7IHNvcnRfYnk6IGN1cnJlbnRGaWx0ZXJzLnNvcnRfYnkgfSksXG4gICAgICAgICAgICAuLi4oY3VycmVudEZpbHRlcnMuc29ydF9vcmRlciAmJiB7IHNvcnRfb3JkZXI6IGN1cnJlbnRGaWx0ZXJzLnNvcnRfb3JkZXIgfSksXG4gICAgICAgICAgfSkudG9TdHJpbmcoKX1gXG5cbiAgICAgICAgICAvLyBTb2xvIHJlZ2lzdHJhciBkaXNjcmVwYW5jaWEgc2kgaGF5IHVuYSBkaWZlcmVuY2lhIHJlYWwgKG5vIHBvciBwYWdpbmFjacOzbilcbiAgICAgICAgICBjb25zdCBleHBlY3RlZFBhZ2VDb3VudCA9IE1hdGgubWluKFxuICAgICAgICAgICAgY3VycmVudEZpbHRlcnMubGltaXQgfHwgMjAsXG4gICAgICAgICAgICBleHBlY3RlZENvdW50IC0gKChjdXJyZW50RmlsdGVycy5wYWdlIHx8IDEpIC0gMSkgKiAoY3VycmVudEZpbHRlcnMubGltaXQgfHwgMjApXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChhY3R1YWxDb3VudCA8IGV4cGVjdGVkUGFnZUNvdW50ICYmIGV4cGVjdGVkUGFnZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgcmVjb3JkRGlzY3JlcGFuY3koZW5kcG9pbnQsIGV4cGVjdGVkUGFnZUNvdW50LCBhY3R1YWxDb3VudClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBY3R1YWxpemFyIGVzdGFkbyB1c2FuZG8gZWwgaG9vayBlc3BlY2lhbGl6YWRvXG4gICAgICAgICAgc3RhdGUuc2V0T3JkZXJzKHJlc3VsdC5kYXRhLm9yZGVycylcbiAgICAgICAgICBzdGF0ZS5zZXRQYWdpbmF0aW9uKHJlc3VsdC5kYXRhLnBhZ2luYXRpb24pXG4gICAgICAgICAgc3RhdGUuc2V0QW5hbHl0aWNzKHJlc3VsdC5kYXRhLmFuYWx5dGljcyB8fCBudWxsKVxuICAgICAgICAgIHJldHJ5Q291bnRSZWYuY3VycmVudCA9IDBcblxuICAgICAgICAgIC8vIOKchSBQRVJTSVNUSVIgRVNUQURPIFBBUkEgREVTQVJST0xMTyAoRmFzdCBSZWZyZXNoKVxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgZGV2UGVyc2lzdGVuY2UucGVyc2lzdFN0YXRlKHtcbiAgICAgICAgICAgICAgb3JkZXJzOiByZXN1bHQuZGF0YS5vcmRlcnMsXG4gICAgICAgICAgICAgIHBhZ2luYXRpb246IHJlc3VsdC5kYXRhLnBhZ2luYXRpb24sXG4gICAgICAgICAgICAgIGFuYWx5dGljczogcmVzdWx0LmRhdGEuYW5hbHl0aWNzIHx8IG51bGwsXG4gICAgICAgICAgICAgIGZpbHRlcnM6IGN1cnJlbnRGaWx0ZXJzLFxuICAgICAgICAgICAgICBoYXNEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICBsYXN0RmV0Y2hUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRXMgdW4gZXJyb3JcbiAgICAgICAgICBpZiAoYXR0ZW1wdCA8IG9wdHMubWF4UmV0cmllcyAmJiByZXN1bHQuY29kZSAhPT0gJ1JFUVVFU1RfQ0FOQ0VMTEVEJykge1xuICAgICAgICAgICAgcmV0cnlDb3VudFJlZi5jdXJyZW50ID0gYXR0ZW1wdCArIDFcbiAgICAgICAgICAgIC8vIEVzcGVyYXIgYW50ZXMgZGVsIHJldHJ5IChleHBvbmVudGlhbCBiYWNrb2ZmKVxuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbigxMDAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCksIDEwMDAwKVxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSlcbiAgICAgICAgICAgIHJldHVybiBhdHRlbXB0RmV0Y2goYXR0ZW1wdCArIDEpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTcOheGltbyBkZSByZWludGVudG9zIGFsY2FuemFkbyBvIGVycm9yIG5vIHJlY3VwZXJhYmxlXG4gICAgICAgICAgc3RhdGUuc2V0RXJyb3IocmVzdWx0LmVycm9yKVxuXG4gICAgICAgICAgLy8gUmVnaXN0cmFyIHByb2JsZW1hIGRlIHJlbmRlcml6YWRvIHBvciBlcnJvciBkZSBBUElcbiAgICAgICAgICByZWNvcmRSZW5kZXJpbmdJc3N1ZSgndXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdCcsIDAsIDAsIGN1cnJlbnRGaWx0ZXJzLCByZXN1bHQuZXJyb3IpXG5cbiAgICAgICAgICAvLyBNb3N0cmFyIHRvYXN0IGRlIGVycm9yXG4gICAgICAgICAgaWYgKHJlc3VsdC5jb2RlICE9PSAnUkVRVUVTVF9DQU5DRUxMRUQnKSB7XG4gICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3IgYWwgY2FyZ2FyIMOzcmRlbmVzJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlc3VsdC5lcnJvcixcbiAgICAgICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGF0dGVtcHRGZXRjaCgwKVxuICAgIH0sXG4gICAgW2ZldGNoT3JkZXJzSW50ZXJuYWwsIG9wdHMubWF4UmV0cmllcywgdG9hc3QsIHJlY29yZERpc2NyZXBhbmN5LCByZWNvcmRSZW5kZXJpbmdJc3N1ZSwgc3RhdGVdXG4gIClcblxuICAvLyBGdW5jacOzbiBmZXRjaE9yZGVycyBjb24gZGVib3VuY2luZyBwYXJhIGV2aXRhciBwZXRpY2lvbmVzIG3Dumx0aXBsZXNcbiAgY29uc3QgZmV0Y2hPcmRlcnMgPSB1c2VDYWxsYmFjayhcbiAgICAobmV3RmlsdGVyczogUGFydGlhbDxTdHJpY3RPcmRlckZpbHRlcnM+ID0ge30pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHtcbiAgICAgICAgLy8gTGltcGlhciB0aW1lb3V0IGFudGVyaW9yIHNpIGV4aXN0ZVxuICAgICAgICBpZiAoZGVib3VuY2VUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VUaW1lb3V0UmVmLmN1cnJlbnQpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb25maWd1cmFyIG51ZXZvIHRpbWVvdXQgY29uIGRlYm91bmNlXG4gICAgICAgIGNvbnN0IGRlYm91bmNlTXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IDMwMCA6IDE1MFxuICAgICAgICBkZWJvdW5jZVRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBmZXRjaE9yZGVyc0ltbWVkaWF0ZShuZXdGaWx0ZXJzKVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRlYm91bmNlZCBmZXRjaE9yZGVyczonLCBlcnJvcilcbiAgICAgICAgICAgIHJlc29sdmUoKSAvLyBSZXNvbHZlciBpbmNsdXNvIGVuIGNhc28gZGUgZXJyb3IgcGFyYSBldml0YXIgcHJvbWVzYXMgY29sZ2FkYXNcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGRlYm91bmNlTXMpXG4gICAgICB9KVxuICAgIH0sXG4gICAgW2ZldGNoT3JkZXJzSW1tZWRpYXRlXVxuICApXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gT1RSQVMgQUNDSU9ORVNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBjb25zdCByZWZyZXNoT3JkZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIC8vIExpbXBpYXIgY2FjaGUgcGFyYSBmb3J6YXIgcmVmcmVzaFxuICAgIGlmIChvcHRzLmVuYWJsZUNhY2hlKSB7XG4gICAgICBjYWNoZS5jbGVhckNhY2hlKClcbiAgICB9XG4gICAgYXdhaXQgZmV0Y2hPcmRlcnMoKVxuICB9LCBbZmV0Y2hPcmRlcnMsIG9wdHMuZW5hYmxlQ2FjaGUsIGNhY2hlXSlcblxuICAvLyBVc2FyIGxhcyBmdW5jaW9uZXMgZGVsIGhvb2sgZGUgZXN0YWRvIGRpcmVjdGFtZW50ZVxuICBjb25zdCB1cGRhdGVGaWx0ZXJzID0gc3RhdGUudXBkYXRlRmlsdGVyc1xuICBjb25zdCBjbGVhckVycm9yID0gc3RhdGUuY2xlYXJFcnJvclxuXG4gIGNvbnN0IHJldHJ5TGFzdFJlcXVlc3QgPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgY29uc3QgbGFzdEZpbHRlcnMgPSBzdGF0ZS5nZXRMYXN0RmlsdGVycygpXG4gICAgaWYgKGxhc3RGaWx0ZXJzKSB7XG4gICAgICBhd2FpdCBmZXRjaE9yZGVycyhsYXN0RmlsdGVycylcbiAgICB9XG4gIH0sIFtmZXRjaE9yZGVycywgc3RhdGVdKVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEVGRUNUT1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSRVNUQVVSQUNJw5NOIERFIEVTVEFETyBQRVJTSVNUSURPIChERVNBUlJPTExPKVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGNvbnN0IGhhc1Jlc3RvcmVkUmVmID0gdXNlUmVmKGZhbHNlKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaGFzUmVzdG9yZWRSZWYuY3VycmVudCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgaGFzUmVzdG9yZWRSZWYuY3VycmVudCA9IHRydWVcblxuICAgICAgLy8gSW50ZW50YXIgcmVzdGF1cmFyIGVzdGFkbyBwZXJzaXN0aWRvXG4gICAgICBpZiAoZGV2UGVyc2lzdGVuY2UuaGFzVmFsaWRQZXJzaXN0ZWREYXRhKCkpIHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkU3RhdGUgPSBkZXZQZXJzaXN0ZW5jZS5nZXRQZXJzaXN0ZWRTdGF0ZSgpXG4gICAgICAgIGlmIChwZXJzaXN0ZWRTdGF0ZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdF0gUmVzdG9yaW5nIHBlcnNpc3RlZCBzdGF0ZTonLCB7XG4gICAgICAgICAgICBvcmRlcnNDb3VudDogcGVyc2lzdGVkU3RhdGUub3JkZXJzLmxlbmd0aCxcbiAgICAgICAgICAgIGhhc0RhdGE6IHBlcnNpc3RlZFN0YXRlLmhhc0RhdGEsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIFJlc3RhdXJhciBlc3RhZG9cbiAgICAgICAgICBzdGF0ZS5zZXRPcmRlcnMocGVyc2lzdGVkU3RhdGUub3JkZXJzKVxuICAgICAgICAgIHN0YXRlLnNldFBhZ2luYXRpb24ocGVyc2lzdGVkU3RhdGUucGFnaW5hdGlvbilcbiAgICAgICAgICBzdGF0ZS5zZXRBbmFseXRpY3MocGVyc2lzdGVkU3RhdGUuYW5hbHl0aWNzKVxuICAgICAgICAgIHN0YXRlLnVwZGF0ZUZpbHRlcnMocGVyc2lzdGVkU3RhdGUuZmlsdGVycylcblxuICAgICAgICAgIHJldHVybiAvLyBObyBoYWNlciBhdXRvLWZldGNoIHNpIHRlbmVtb3MgZGF0b3MgcGVyc2lzdGlkb3NcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEF1dG8tZmV0Y2ggaW5pY2lhbCBzb2xvIHNpIG5vIGhheSBkYXRvcyBwZXJzaXN0aWRvc1xuICAgIGlmIChvcHRzLmF1dG9GZXRjaCAmJiAhaGFzUmVzdG9yZWRSZWYuY3VycmVudCkge1xuICAgICAgZmV0Y2hPcmRlcnMoKVxuICAgIH1cbiAgfSwgW29wdHMuYXV0b0ZldGNoXSkgLy8gU29sbyBlamVjdXRhciB1bmEgdmV6IGFsIG1vbnRhclxuXG4gIC8vIEVzY3VjaGFyIGNhbWJpb3MgZW4gZmlsdHJvcyBjb24gZGVib3VuY2luZyBvcHRpbWl6YWRvXG4gIGNvbnN0IGZpbHRlcnNSZWYgPSB1c2VSZWYoc3RhdGUuZmlsdGVycylcbiAgY29uc3QgaXNJbml0aWFsTW91bnQgPSB1c2VSZWYodHJ1ZSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEV2aXRhciBmZXRjaCBlbiBlbCBwcmltZXIgcmVuZGVyICh5YSBzZSBoYWNlIGVuIGF1dG8tZmV0Y2gpXG4gICAgaWYgKGlzSW5pdGlhbE1vdW50LmN1cnJlbnQpIHtcbiAgICAgIGlzSW5pdGlhbE1vdW50LmN1cnJlbnQgPSBmYWxzZVxuICAgICAgZmlsdGVyc1JlZi5jdXJyZW50ID0gc3RhdGUuZmlsdGVyc1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU29sbyBoYWNlciBmZXRjaCBzaSBsb3MgZmlsdHJvcyBoYW4gY2FtYmlhZG8gcmVhbG1lbnRlXG4gICAgY29uc3QgaGFzQ2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcnNSZWYuY3VycmVudCkgIT09IEpTT04uc3RyaW5naWZ5KHN0YXRlLmZpbHRlcnMpXG5cbiAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgZmlsdGVyc1JlZi5jdXJyZW50ID0gc3RhdGUuZmlsdGVyc1xuICAgICAgZmV0Y2hPcmRlcnMoKVxuICAgIH1cbiAgfSwgW3N0YXRlLmZpbHRlcnMsIGZldGNoT3JkZXJzXSkgLy8gRGVwZW5kZW5jaWFzIG3DrW5pbWFzIHkgZXN0YWJsZXNcblxuICAvLyBSZWZldGNoIGludGVydmFsIC0gVEVNUE9SQUxNRU5URSBERVNIQUJJTElUQURPIHBhcmEgZXZpdGFyIHJlZnJlc2NvIGluZmluaXRvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gTk9UQTogUmVmZXRjaCBpbnRlcnZhbCBkZXNoYWJpbGl0YWRvIHRlbXBvcmFsbWVudGUgcGFyYSBzb2x1Y2lvbmFyIHJlZnJlc2NvIGluZmluaXRvXG4gICAgLy8gVE9ETzogUmVpbXBsZW1lbnRhciBjb24gdXNlUmVmIHBhcmEgZmV0Y2hPcmRlcnMgbyB1c2FyIFJlYWN0IFF1ZXJ5XG4gICAgLypcbiAgICBpZiAob3B0cy5yZWZldGNoSW50ZXJ2YWwgPiAwKSB7XG4gICAgICByZWZldGNoSW50ZXJ2YWxSZWYuY3VycmVudCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCFzdGF0ZS5pc0xvYWRpbmcpIHtcbiAgICAgICAgICBmZXRjaE9yZGVycygpO1xuICAgICAgICB9XG4gICAgICB9LCBvcHRzLnJlZmV0Y2hJbnRlcnZhbCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChyZWZldGNoSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVmZXRjaEludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICAqL1xuICB9LCBbb3B0cy5yZWZldGNoSW50ZXJ2YWxdKVxuXG4gIC8vIExpbXBpZXphIGF1dG9tw6F0aWNhIGRlIGNhY2hlIG1vdmlkYSBhIHVzZU9yZGVyc0NhY2hlLnRzXG5cbiAgLy8gQ2xlYW51cCBhbCBkZXNtb250YXIgLSBPUFRJTUlaQURPOiBTaW4gZGVwZW5kZW5jaWFzIGluZXN0YWJsZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLy8gQ2FuY2VsYXIgcGV0aWNpb25lcyBlbiBwcm9ncmVzbyB1c2FuZG8gZWwgaG9vayBkZSBBUElcbiAgICAgIGFwaS5hYm9ydEN1cnJlbnRSZXF1ZXN0KClcblxuICAgICAgLy8gTGltcGlhciBpbnRlcnZhbG9zIHkgdGltZW91dHNcbiAgICAgIGlmIChyZWZldGNoSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHJlZmV0Y2hJbnRlcnZhbFJlZi5jdXJyZW50KVxuICAgICAgfVxuICAgICAgaWYgKGRlYm91bmNlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVvdXRSZWYuY3VycmVudClcbiAgICAgIH1cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdF0gSG9vayBjbGVhbnVwIGNvbXBsZXRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSkgLy8g4pyFIENPUlJFR0lETzogU2luIGRlcGVuZGVuY2lhcyBwYXJhIGV2aXRhciByZW1vbnRhamVzIHBvciBGYXN0IFJlZnJlc2hcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSRVRPUk5PIERFTCBIT09LXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBFc3RhZG9cbiAgICBvcmRlcnM6IHN0YXRlLm9yZGVycyxcbiAgICBwYWdpbmF0aW9uOiBzdGF0ZS5wYWdpbmF0aW9uLFxuICAgIGZpbHRlcnM6IHN0YXRlLmZpbHRlcnMsXG4gICAgYW5hbHl0aWNzOiBzdGF0ZS5hbmFseXRpY3MsXG4gICAgaXNMb2FkaW5nOiBzdGF0ZS5pc0xvYWRpbmcsXG4gICAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICAgIGxhc3RGZXRjaDogc3RhdGUubGFzdEZldGNoLFxuXG4gICAgLy8gQWNjaW9uZXNcbiAgICBmZXRjaE9yZGVycyxcbiAgICByZWZyZXNoT3JkZXJzLFxuICAgIHVwZGF0ZUZpbHRlcnMsXG4gICAgY2xlYXJFcnJvcixcbiAgICByZXRyeUxhc3RSZXF1ZXN0LFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBBUkEgT1JERU4gSU5ESVZJRFVBTFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU9yZGVyRGV0YWlsU3RyaWN0KG9yZGVySWQ6IHN0cmluZyB8IG51bGwpIHtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKVxuICBjb25zdCBbb3JkZXIsIHNldE9yZGVyXSA9IHVzZVN0YXRlPFN0cmljdE9yZGVyRW50ZXJwcmlzZSB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGZldGNoT3JkZXIgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvcmRlcklkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcihudWxsKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vb3JkZXJzLyR7b3JkZXJJZH1gLCB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsIC8vIOKchSBBR1JFR0FETzogSW5jbHVpciBjb29raWVzIGRlIHNlc2nDs24gTmV4dEF1dGguanNcbiAgICAgIH0pXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGNvbnN0IHZhbGlkYXRlZFJlc3BvbnNlID0gdG9TdHJpY3RPcmRlcnNSZXNwb25zZShkYXRhKVxuXG4gICAgICBpZiAoaXNTdHJpY3RBcGlFcnJvcih2YWxpZGF0ZWRSZXNwb25zZSkpIHtcbiAgICAgICAgc2V0RXJyb3IodmFsaWRhdGVkUmVzcG9uc2UuZXJyb3IpXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ0Vycm9yIGFsIGNhcmdhciBvcmRlbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHZhbGlkYXRlZFJlc3BvbnNlLmVycm9yLFxuICAgICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQYXJhIG9yZGVuIGluZGl2aWR1YWwsIGV4dHJhZXIgbGEgcHJpbWVyYSBvcmRlblxuICAgICAgICBjb25zdCBvcmRlckRhdGEgPSB2YWxpZGF0ZWRSZXNwb25zZS5kYXRhLm9yZGVyc1swXSB8fCBudWxsXG4gICAgICAgIHNldE9yZGVyKG9yZGVyRGF0YSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRXJyb3IgYWwgY2FyZ2FyIG9yZGVuJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcbiAgICB9XG4gIH0sIFtvcmRlcklkLCB0b2FzdF0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaE9yZGVyKClcbiAgfSwgW2ZldGNoT3JkZXJdKVxuXG4gIHJldHVybiB7XG4gICAgb3JkZXIsXG4gICAgaXNMb2FkaW5nLFxuICAgIGVycm9yLFxuICAgIHJlZmV0Y2g6IGZldGNoT3JkZXIsXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJREFERVMgRVhQT1JUQURBU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBVdGlsaWRhZGVzIGRlIGNhY2hlIG1vdmlkYXMgYSB1c2VPcmRlcnNDYWNoZS50c1xuICogRXN0YXMgZnVuY2lvbmVzIGVzdMOhbiBkaXNwb25pYmxlcyBhIHRyYXbDqXMgZGVsIGhvb2sgdXNlT3JkZXJzQ2FjaGVcbiAqL1xuXG4vLyBMYXMgdXRpbGlkYWRlcyBkZSBjYWNoZSBhaG9yYSBlc3TDoW4gZGlzcG9uaWJsZXMgYSB0cmF2w6lzIGRlbCBob29rIHVzZU9yZGVyc0NhY2hlOlxuLy8gLSBjYWNoZS5jbGVhckNhY2hlKClcbi8vIC0gY2FjaGUuZ2V0Q2FjaGVTdGF0cygpXG4vLyAtIGNhY2hlLmdldFBlbmRpbmdSZXF1ZXN0KClcbi8vIC0gY2FjaGUuc2V0UGVuZGluZ1JlcXVlc3QoKVxuIl0sIm5hbWVzIjpbInVzZU9yZGVyRGV0YWlsU3RyaWN0IiwidXNlT3JkZXJzRW50ZXJwcmlzZVN0cmljdCIsImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJ0aW1lb3V0IiwiYXJncyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJERUZBVUxUX09QVElPTlMiLCJhdXRvRmV0Y2giLCJyZWZldGNoSW50ZXJ2YWwiLCJtYXhSZXRyaWVzIiwiZW5hYmxlQ2FjaGUiLCJjYWNoZVRpbWVvdXQiLCJpbml0aWFsRmlsdGVycyIsIm9wdGlvbnMiLCJ0b2FzdCIsInVzZVRvYXN0IiwiYXBpTW9uaXRvcmluZyIsInVzZUFwaU1vbml0b3JpbmciLCJvcHRzIiwidXNlTWVtbyIsInJlY29yZERpc2NyZXBhbmN5IiwidXNlQ2FsbGJhY2siLCJyZWNvcmRSZW5kZXJpbmdJc3N1ZSIsImNhY2hlIiwidXNlT3JkZXJzQ2FjaGUiLCJtYXhTaXplIiwiY2xlYW51cEludGVydmFsIiwibWluUmVxdWVzdEludGVydmFsIiwiZGV2UGVyc2lzdGVuY2UiLCJ1c2VPcmRlcnNEZXZTdGF0ZSIsInN0YXRlIiwidXNlT3JkZXJzU3RhdGUiLCJhcGkiLCJ1c2VPcmRlcnNBcGkiLCJyZXRyeUNvdW50UmVmIiwidXNlUmVmIiwicmVmZXRjaEludGVydmFsUmVmIiwiZGVib3VuY2VUaW1lb3V0UmVmIiwiZmV0Y2hPcmRlcnNJbnRlcm5hbCIsImZldGNoT3JkZXJzSW1tZWRpYXRlIiwibmV3RmlsdGVycyIsImNvbnNvbGUiLCJsb2ciLCJmaWx0ZXJzIiwicmVxdWVzdEtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYXNGaWx0ZXJzQ2hhbmdlZCIsImlzTG9hZGluZyIsInVwZGF0ZUZpbHRlcnMiLCJzZXRMb2FkaW5nIiwiY3VycmVudCIsImF0dGVtcHRGZXRjaCIsImF0dGVtcHQiLCJjdXJyZW50RmlsdGVycyIsImdldExhc3RGaWx0ZXJzIiwicmVzdWx0IiwiaXNTdHJpY3RBcGlSZXNwb25zZSIsImRhdGEiLCJleHBlY3RlZENvdW50IiwicGFnaW5hdGlvbiIsInRvdGFsIiwiYWN0dWFsQ291bnQiLCJvcmRlcnMiLCJsZW5ndGgiLCJlbmRwb2ludCIsIlVSTFNlYXJjaFBhcmFtcyIsInBhZ2UiLCJ0b1N0cmluZyIsImxpbWl0Iiwic3RhdHVzIiwicGF5bWVudF9zdGF0dXMiLCJmdWxmaWxsbWVudF9zdGF0dXMiLCJzb3J0X2J5Iiwic29ydF9vcmRlciIsImV4cGVjdGVkUGFnZUNvdW50IiwiTWF0aCIsIm1pbiIsInNldE9yZGVycyIsInNldFBhZ2luYXRpb24iLCJzZXRBbmFseXRpY3MiLCJhbmFseXRpY3MiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJwZXJzaXN0U3RhdGUiLCJoYXNEYXRhIiwibGFzdEZldGNoVGltZSIsIkRhdGUiLCJub3ciLCJjb2RlIiwiZGVsYXkiLCJwb3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldEVycm9yIiwiZXJyb3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidmFyaWFudCIsImZldGNoT3JkZXJzIiwiZGVib3VuY2VNcyIsInJlZnJlc2hPcmRlcnMiLCJjbGVhckNhY2hlIiwiY2xlYXJFcnJvciIsInJldHJ5TGFzdFJlcXVlc3QiLCJsYXN0RmlsdGVycyIsImhhc1Jlc3RvcmVkUmVmIiwidXNlRWZmZWN0IiwiaGFzVmFsaWRQZXJzaXN0ZWREYXRhIiwicGVyc2lzdGVkU3RhdGUiLCJnZXRQZXJzaXN0ZWRTdGF0ZSIsIm9yZGVyc0NvdW50IiwiZmlsdGVyc1JlZiIsImlzSW5pdGlhbE1vdW50IiwiaGFzQ2hhbmdlZCIsImFib3J0Q3VycmVudFJlcXVlc3QiLCJjbGVhckludGVydmFsIiwibGFzdEZldGNoIiwib3JkZXJJZCIsIm9yZGVyIiwic2V0T3JkZXIiLCJ1c2VTdGF0ZSIsInNldElzTG9hZGluZyIsImZldGNoT3JkZXIiLCJyZXNwb25zZSIsImZldGNoIiwiY3JlZGVudGlhbHMiLCJqc29uIiwidmFsaWRhdGVkUmVzcG9uc2UiLCJ0b1N0cmljdE9yZGVyc1Jlc3BvbnNlIiwiaXNTdHJpY3RBcGlFcnJvciIsIm9yZGVyRGF0YSIsImVyciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsInJlZmV0Y2giXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx1REFBdUQ7QUFDdkQsbUVBQW1FO0FBQ25FLHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBK2J0QkE7ZUFBQUE7O1FBL1ZBQztlQUFBQTs7O3VCQTlGd0M7MEJBQy9COzJCQVVsQjsrQkFFMEI7Z0NBQ0Y7OEJBQ0Y7Z0NBQzBDO3lDQUNyQztBQUVsQyx1REFBdUQ7QUFDdkQsU0FBU0MsU0FDUEMsSUFBTyxFQUNQQyxJQUFZO0lBRVosSUFBSUM7SUFDSixPQUFPLENBQUMsR0FBR0M7UUFDVEMsYUFBYUY7UUFDYkEsVUFBVUcsV0FBVyxJQUFNTCxRQUFRRyxPQUFPRjtJQUM1QztBQUNGO0FBd0NBLE1BQU1LLGtCQUE4RDtJQUNsRUMsV0FBVztJQUNYQyxpQkFBaUI7SUFDakJDLFlBQVk7SUFDWlAsU0FBUztJQUNUUSxhQUFhO0lBQ2JDLGNBQWMsSUFBSSxLQUFLO0FBQ3pCO0FBa0JPLFNBQVNiLDBCQUNkYyxpQkFBOEMsQ0FBQyxDQUFDLEVBQ2hEQyxVQUFxRCxDQUFDLENBQUM7SUFFdkQsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR0MsSUFBQUEsa0JBQVE7SUFDMUIsTUFBTUMsZ0JBQWdCQyxJQUFBQSwrQkFBZ0I7SUFDdEMsTUFBTUMsT0FBT0MsSUFBQUEsY0FBTyxFQUFDLElBQU8sQ0FBQTtZQUFFLEdBQUdiLGVBQWU7WUFBRSxHQUFHTyxPQUFPO1FBQUMsQ0FBQSxHQUFJO1FBQUNBO0tBQVE7SUFFMUUsK0RBQStEO0lBQy9ELE1BQU1PLG9CQUFvQkMsSUFBQUEsa0JBQVcsRUFBQ0wsY0FBY0ksaUJB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