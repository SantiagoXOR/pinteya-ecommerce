{"version":3,"names":["cov_2cll7r0ou5","actualCoverage","s","OptimizedAnalyticsProvider","f","useOptimizedAnalytics","useTrackCartAction","useTrackPageView","useTrackProductView","useTrackPurchase","useTrackSearch","withOptimizedAnalytics","useSafeUser","user","isLoaded","isSignedIn","_useAuth","useAuth","OptimizedAnalyticsContext","_react","createContext","children","enableGA","b","enableCustomAnalytics","samplingRate","userProfile","role","isAdmin","_useUserRole","useUserRole","pathname","_navigation","usePathname","isEnabled","setIsEnabled","useState","useEffect","process","env","NODE_ENV","_analyticsoptimized","optimizedAnalytics","setSamplingRate","setEnabled","trackEventOptimized","id","trackEvent","event","category","action","label","value","metadata","enrichedMetadata","userId","userRole","publicMetadata","window","gtag","event_category","event_label","user_id","error","console","warn","flushEvents","enabled","contextValue","_jsxruntime","jsx","Provider","context","useContext","Error","page","productId","productName","query","substring","orderId","items","Component","WrappedComponent","props","analytics","addEventListener"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Analytics\\OptimizedAnalyticsProvider.tsx"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * PROVIDER DE ANALYTICS OPTIMIZADO - PINTEYA E-COMMERCE\r\n * Reemplaza AnalyticsProvider con sistema optimizado de 66% menos uso de recursos\r\n */\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useUserRole } from '@/hooks/useUserRole';\r\nimport { optimizedAnalytics, trackEventOptimized } from '@/lib/integrations/analytics/analytics-optimized';\r\n\r\n// Hook para NextAuth.js\r\nconst useSafeUser = () => {\r\n  // Usar NextAuth.js en lugar de Clerk\r\n  const { user, isLoaded, isSignedIn } = useAuth();\r\n  return { user, isLoaded, isSignedIn };\r\n};\r\n\r\ninterface OptimizedAnalyticsContextType {\r\n  trackEvent: (\r\n    event: string,\r\n    category: string,\r\n    action: string,\r\n    label?: string,\r\n    value?: number,\r\n    metadata?: Record<string, any>\r\n  ) => Promise<void>;\r\n  isEnabled: boolean;\r\n  setEnabled: (enabled: boolean) => void;\r\n  flushEvents: () => Promise<void>;\r\n}\r\n\r\nconst OptimizedAnalyticsContext = createContext<OptimizedAnalyticsContextType | null>(null);\r\n\r\ninterface OptimizedAnalyticsProviderProps {\r\n  children: React.ReactNode;\r\n  enableGA?: boolean;\r\n  enableCustomAnalytics?: boolean;\r\n  samplingRate?: number;\r\n}\r\n\r\nexport const OptimizedAnalyticsProvider: React.FC<OptimizedAnalyticsProviderProps> = ({\r\n  children,\r\n  enableGA = true,\r\n  enableCustomAnalytics = true,\r\n  samplingRate = 1.0,\r\n}) => {\r\n  const { user } = useSafeUser();\r\n  const { userProfile, role, isAdmin } = useUserRole();\r\n  const pathname = usePathname();\r\n  const [isEnabled, setIsEnabled] = useState(true);\r\n\r\n  // Configurar sampling rate según el entorno\r\n  useEffect(() => {\r\n    if (process.env.NODE_ENV === 'production') {\r\n      optimizedAnalytics.setSamplingRate(0.1); // 10% en producción\r\n    } else if (process.env.NODE_ENV === 'development') {\r\n      optimizedAnalytics.setSamplingRate(samplingRate);\r\n    } else {\r\n      optimizedAnalytics.setEnabled(false); // Deshabilitar en tests\r\n    }\r\n  }, [samplingRate]);\r\n\r\n  // Trackear cambios de página automáticamente\r\n  useEffect(() => {\r\n    if (isEnabled && enableCustomAnalytics) {\r\n      trackEventOptimized('page_view', 'navigation', 'view', pathname);\r\n    }\r\n  }, [pathname, isEnabled, enableCustomAnalytics]);\r\n\r\n  // Configurar usuario cuando se autentica\r\n  useEffect(() => {\r\n    if (user && isEnabled) {\r\n      // Track login event\r\n      trackEventOptimized('user_login', 'user', 'login', user.id);\r\n    }\r\n  }, [user, isEnabled]);\r\n\r\n  const trackEvent = async (\r\n    event: string,\r\n    category: string,\r\n    action: string,\r\n    label?: string,\r\n    value?: number,\r\n    metadata?: Record<string, any>\r\n  ) => {\r\n    if (!isEnabled) {return;}\r\n\r\n    try {\r\n      const enrichedMetadata = {\r\n        ...metadata,\r\n        userId: user?.id,\r\n        userRole: user?.publicMetadata?.role || 'guest',\r\n      };\r\n\r\n      // Track en nuestro sistema optimizado\r\n      if (enableCustomAnalytics) {\r\n        await trackEventOptimized(event, category, action, label, value, enrichedMetadata);\r\n      }\r\n\r\n      // Track en Google Analytics (si está habilitado)\r\n      if (enableGA && typeof window !== 'undefined' && window.gtag) {\r\n        try {\r\n          window.gtag('event', action, {\r\n            event_category: category,\r\n            event_label: label,\r\n            value: value,\r\n            user_id: user?.id,\r\n          });\r\n        } catch (error) {\r\n          console.warn('Error tracking GA event:', error);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error in optimized trackEvent:', error);\r\n    }\r\n  };\r\n\r\n  const flushEvents = async () => {\r\n    try {\r\n      await optimizedAnalytics.flushEvents();\r\n    } catch (error) {\r\n      console.warn('Error flushing analytics events:', error);\r\n    }\r\n  };\r\n\r\n  const setEnabled = (enabled: boolean) => {\r\n    setIsEnabled(enabled);\r\n    optimizedAnalytics.setEnabled(enabled);\r\n  };\r\n\r\n  const contextValue: OptimizedAnalyticsContextType = {\r\n    trackEvent,\r\n    isEnabled,\r\n    setEnabled,\r\n    flushEvents,\r\n  };\r\n\r\n  return (\r\n    <OptimizedAnalyticsContext.Provider value={contextValue}>\r\n      {children}\r\n    </OptimizedAnalyticsContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * Hook para usar analytics optimizado\r\n */\r\nexport const useOptimizedAnalytics = (): OptimizedAnalyticsContextType => {\r\n  const context = useContext(OptimizedAnalyticsContext);\r\n  if (!context) {\r\n    throw new Error('useOptimizedAnalytics must be used within OptimizedAnalyticsProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n/**\r\n * Hooks específicos para eventos comunes\r\n */\r\nexport const useTrackPageView = () => {\r\n  const { trackEvent } = useOptimizedAnalytics();\r\n  \r\n  return (page?: string) => {\r\n    trackEvent('page_view', 'navigation', 'view', page);\r\n  };\r\n};\r\n\r\nexport const useTrackProductView = () => {\r\n  const { trackEvent } = useOptimizedAnalytics();\r\n  \r\n  return (productId: string, productName?: string) => {\r\n    trackEvent('product_view', 'ecommerce', 'view', productId);\r\n  };\r\n};\r\n\r\nexport const useTrackSearch = () => {\r\n  const { trackEvent } = useOptimizedAnalytics();\r\n  \r\n  return (query: string, category?: string) => {\r\n    trackEvent('search', 'search', 'search', query.substring(0, 30));\r\n  };\r\n};\r\n\r\nexport const useTrackCartAction = () => {\r\n  const { trackEvent } = useOptimizedAnalytics();\r\n  \r\n  return (action: 'add' | 'remove', productId: string, value?: number) => {\r\n    trackEvent(`cart_${action}`, 'ecommerce', action, productId, value);\r\n  };\r\n};\r\n\r\nexport const useTrackPurchase = () => {\r\n  const { trackEvent } = useOptimizedAnalytics();\r\n  \r\n  return (orderId: string, value: number, items?: number) => {\r\n    trackEvent('purchase', 'ecommerce', 'purchase', orderId, value, { items });\r\n  };\r\n};\r\n\r\n/**\r\n * HOC para componentes que necesitan analytics\r\n */\r\nexport function withOptimizedAnalytics<P extends object>(\r\n  Component: React.ComponentType<P>\r\n) {\r\n  return function WrappedComponent(props: P) {\r\n    const analytics = useOptimizedAnalytics();\r\n    \r\n    return <Component {...props} analytics={analytics} />;\r\n  };\r\n}\r\n\r\n/**\r\n * Cleanup automático al desmontar\r\n */\r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('beforeunload', () => {\r\n    optimizedAnalytics.flushEvents();\r\n  });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}