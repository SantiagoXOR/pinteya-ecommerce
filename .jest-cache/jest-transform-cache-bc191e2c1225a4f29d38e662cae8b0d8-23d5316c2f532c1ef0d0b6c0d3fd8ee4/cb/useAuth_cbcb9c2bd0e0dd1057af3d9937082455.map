{"version":3,"names":["cov_156w7mk75h","actualCoverage","s","useAuth","f","useIsAdmin","useRequireAuth","data","session","status","_react","useSession","router","_navigation","useRouter","handleSignIn","_react1","useCallback","provider","b","options","signIn","callbackUrl","redirect","error","console","handleSignOut","signOut","user","id","email","name","image","isLoaded","isSignedIn","redirectTo","push"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\useAuth.ts"],"sourcesContent":["/**\r\n * Hook de Autenticación para NextAuth.js\r\n * Reemplaza los hooks de Clerk con NextAuth.js\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useSession, signIn, signOut } from \"next-auth/react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useCallback } from \"react\"\r\n\r\nexport interface AuthUser {\r\n  id: string\r\n  name?: string | null\r\n  email?: string | null\r\n  image?: string | null\r\n}\r\n\r\nexport interface UseAuthReturn {\r\n  // Estado de autenticación\r\n  user: AuthUser | null\r\n  isLoaded: boolean\r\n  isSignedIn: boolean\r\n  \r\n  // Funciones de autenticación\r\n  signIn: (provider?: string, options?: { callbackUrl?: string }) => Promise<void>\r\n  signOut: (options?: { callbackUrl?: string }) => Promise<void>\r\n  \r\n  // Información de sesión\r\n  session: any\r\n  status: \"loading\" | \"authenticated\" | \"unauthenticated\"\r\n}\r\n\r\nexport function useAuth(): UseAuthReturn {\r\n  const { data: session, status } = useSession()\r\n  const router = useRouter()\r\n\r\n  const handleSignIn = useCallback(async (provider: string = \"google\", options?: { callbackUrl?: string }) => {\r\n    try {\r\n      await signIn(provider, {\r\n        callbackUrl: options?.callbackUrl || \"/admin\",\r\n        redirect: true,\r\n      })\r\n    } catch (error) {\r\n      console.error(\"Error al iniciar sesión:\", error)\r\n    }\r\n  }, [])\r\n\r\n  const handleSignOut = useCallback(async (options?: { callbackUrl?: string }) => {\r\n    try {\r\n      await signOut({\r\n        callbackUrl: options?.callbackUrl || \"/\",\r\n        redirect: true,\r\n      })\r\n    } catch (error) {\r\n      console.error(\"Error al cerrar sesión:\", error)\r\n    }\r\n  }, [])\r\n\r\n  // Mapear usuario de NextAuth a nuestro formato\r\n  const user: AuthUser | null = session?.user ? {\r\n    id: session.user.id || session.user.email || '',\r\n    name: session.user.name,\r\n    email: session.user.email,\r\n    image: session.user.image,\r\n  } : null\r\n\r\n  return {\r\n    user,\r\n    isLoaded: status !== \"loading\",\r\n    isSignedIn: status === \"authenticated\",\r\n    signIn: handleSignIn,\r\n    signOut: handleSignOut,\r\n    session,\r\n    status,\r\n  }\r\n}\r\n\r\n// Hook para verificar si el usuario es administrador\r\nexport function useIsAdmin(): boolean {\r\n  const { user, isSignedIn } = useAuth()\r\n  \r\n  // Por ahora, todos los usuarios autenticados son admin\r\n  // TODO: Implementar sistema de roles más granular\r\n  return isSignedIn && !!user\r\n}\r\n\r\n// Hook para proteger rutas\r\nexport function useRequireAuth(redirectTo: string = \"/api/auth/signin\") {\r\n  const { isSignedIn, isLoaded } = useAuth()\r\n  const router = useRouter()\r\n\r\n  if (isLoaded && !isSignedIn) {\r\n    router.push(redirectTo)\r\n  }\r\n\r\n  return { isSignedIn, isLoaded }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}