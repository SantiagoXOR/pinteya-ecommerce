2bfc7ecd516edca0c7a1b5398ae39d8e
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get getActiveFiltersCount () {
        return getActiveFiltersCount;
    },
    get hasActiveFilters () {
        return hasActiveFilters;
    },
    get useCategoryProductCounts () {
        return useCategoryProductCounts;
    },
    get useFilteredProducts () {
        return useFilteredProducts;
    },
    get useProductCount () {
        return useProductCount;
    }
});
const _reactquery = require("@tanstack/react-query");
const _jsonutils = require("../lib/json-utils");
const useFilteredProducts = (filters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'filtered-products',
            filters
        ],
        queryFn: async ()=>{
            // Construir URL con parámetros
            const searchParams = new URLSearchParams();
            // Filtros básicos
            if (filters.category) {
                searchParams.set('category', filters.category);
            }
            if (filters.brand) {
                searchParams.set('brand', filters.brand);
            }
            if (filters.search) {
                searchParams.set('search', filters.search);
            }
            if (filters.priceMin !== undefined) {
                searchParams.set('priceMin', filters.priceMin.toString());
            }
            if (filters.priceMax !== undefined) {
                searchParams.set('priceMax', filters.priceMax.toString());
            }
            // Filtros avanzados (arrays)
            if (filters.categories && filters.categories.length > 0) {
                searchParams.set('categories', filters.categories.join(','));
            }
            if (filters.brands && filters.brands.length > 0) {
                searchParams.set('brands', filters.brands.join(','));
            }
            if (filters.paintTypes && filters.paintTypes.length > 0) {
                searchParams.set('paintTypes', filters.paintTypes.join(','));
            }
            // Filtro de descuento
            if (filters.hasDiscount !== undefined) {
                searchParams.set('hasDiscount', filters.hasDiscount.toString());
            }
            // Paginación y ordenamiento
            if (filters.page) {
                searchParams.set('page', filters.page.toString());
            }
            if (filters.limit) {
                searchParams.set('limit', filters.limit.toString());
            }
            if (filters.sortBy) {
                searchParams.set('sortBy', filters.sortBy);
            }
            if (filters.sortOrder) {
                searchParams.set('sortOrder', filters.sortOrder);
            }
            const url = `/api/products?${searchParams.toString()}`;
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
            const result = await (0, _jsonutils.safeApiResponseJson)(response);
            if (!result.success) {
                throw new Error(result.error || 'Error parsing response');
            }
            return result.data;
        },
        staleTime: 5 * 60 * 1000,
        gcTime: 10 * 60 * 1000,
        retry: 2,
        retryDelay: (attemptIndex)=>Math.min(1000 * 2 ** attemptIndex, 30000),
        enabled: true
    });
};
const useProductCount = (filters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'product-count',
            filters
        ],
        queryFn: async ()=>{
            // Usar los mismos filtros pero con limit=1 para obtener solo el count
            const countFilters = {
                ...filters,
                page: 1,
                limit: 1
            };
            const searchParams = new URLSearchParams();
            // Aplicar los mismos filtros que useFilteredProducts
            if (countFilters.category) {
                searchParams.set('category', countFilters.category);
            }
            if (countFilters.brand) {
                searchParams.set('brand', countFilters.brand);
            }
            if (countFilters.search) {
                searchParams.set('search', countFilters.search);
            }
            if (countFilters.priceMin !== undefined) {
                searchParams.set('priceMin', countFilters.priceMin.toString());
            }
            if (countFilters.priceMax !== undefined) {
                searchParams.set('priceMax', countFilters.priceMax.toString());
            }
            if (countFilters.categories && countFilters.categories.length > 0) {
                searchParams.set('categories', countFilters.categories.join(','));
            }
            if (countFilters.brands && countFilters.brands.length > 0) {
                searchParams.set('brands', countFilters.brands.join(','));
            }
            if (countFilters.paintTypes && countFilters.paintTypes.length > 0) {
                searchParams.set('paintTypes', countFilters.paintTypes.join(','));
            }
            // Filtro de descuento
            if (countFilters.hasDiscount !== undefined) {
                searchParams.set('hasDiscount', countFilters.hasDiscount.toString());
            }
            searchParams.set('page', '1');
            searchParams.set('limit', '1');
            const url = `/api/products?${searchParams.toString()}`;
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
            const result = await (0, _jsonutils.safeApiResponseJson)(response);
            if (!result.success) {
                throw new Error(result.error || 'Error parsing response');
            }
            const count = result.data?.pagination?.total || 0;
            return count;
        },
        staleTime: 5 * 60 * 1000,
        gcTime: 10 * 60 * 1000,
        retry: 2,
        enabled: true
    });
};
const useCategoryProductCounts = (categoryIds, baseFilters = {})=>{
    return (0, _reactquery.useQuery)({
        queryKey: [
            'category-product-counts',
            categoryIds,
            baseFilters
        ],
        queryFn: async ()=>{
            const counts = {};
            // Obtener conteo para cada categoría individualmente
            const promises = categoryIds.map(async (categoryId)=>{
                const filters = {
                    ...baseFilters,
                    categories: [
                        categoryId
                    ]
                };
                const searchParams = new URLSearchParams();
                // IMPORTANTE: Aplicar filtro de categoría PRIMERO para evitar conflictos de parámetros
                searchParams.set('categories', categoryId);
                // Aplicar filtros base
                if (filters.brand) {
                    searchParams.set('brand', filters.brand);
                }
                if (filters.search) {
                    searchParams.set('search', filters.search);
                }
                if (filters.priceMin !== undefined) {
                    searchParams.set('priceMin', filters.priceMin.toString());
                }
                if (filters.priceMax !== undefined) {
                    searchParams.set('priceMax', filters.priceMax.toString());
                }
                if (filters.brands && filters.brands.length > 0) {
                    searchParams.set('brands', filters.brands.join(','));
                }
                if (filters.paintTypes && filters.paintTypes.length > 0) {
                    searchParams.set('paintTypes', filters.paintTypes.join(','));
                }
                // Filtro de descuento
                if (filters.hasDiscount !== undefined) {
                    searchParams.set('hasDiscount', filters.hasDiscount.toString());
                }
                // Aplicar paginación al final
                searchParams.set('limit', '1');
                searchParams.set('page', '1');
                const url = `/api/products?${searchParams.toString()}`;
                const response = await fetch(url);
                if (!response.ok) {
                    return {
                        categoryId,
                        count: 0
                    };
                }
                const result = await (0, _jsonutils.safeApiResponseJson)(response);
                if (!result.success) {
                    return {
                        categoryId,
                        count: 0
                    };
                }
                const count = result.data?.pagination?.total || 0;
                return {
                    categoryId,
                    count
                };
            });
            const results = await Promise.all(promises);
            results.forEach(({ categoryId, count })=>{
                counts[categoryId] = count;
            });
            return counts;
        },
        staleTime: 2 * 60 * 1000,
        gcTime: 5 * 60 * 1000,
        retry: 1,
        enabled: categoryIds.length > 0
    });
};
const getActiveFiltersCount = (filters)=>{
    let count = 0;
    if (filters.categories && filters.categories.length > 0) {
        count += filters.categories.length;
    }
    if (filters.brands && filters.brands.length > 0) {
        count += filters.brands.length;
    }
    if (filters.paintTypes && filters.paintTypes.length > 0) {
        count += filters.paintTypes.length;
    }
    if (filters.priceMin !== undefined || filters.priceMax !== undefined) {
        count += 1;
    }
    if (filters.search) {
        count += 1;
    }
    return count;
};
const hasActiveFilters = (filters)=>{
    return getActiveFiltersCount(filters) > 0;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUZpbHRlcmVkUHJvZHVjdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5J1xuaW1wb3J0IHsgUHJvZHVjdFdpdGhDYXRlZ29yeSwgUGFnaW5hdGVkUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzL2FwaSdcbmltcG9ydCB7IHNhZmVBcGlSZXNwb25zZUpzb24gfSBmcm9tICdAL2xpYi9qc29uLXV0aWxzJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgUEFSQSBGSUxUUk9TIERFIFBST0RVQ1RPU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9kdWN0RmlsdGVycyB7XG4gIC8vIEZpbHRyb3MgYsOhc2ljb3NcbiAgY2F0ZWdvcnk/OiBzdHJpbmdcbiAgYnJhbmQ/OiBzdHJpbmdcbiAgc2VhcmNoPzogc3RyaW5nXG4gIHByaWNlTWluPzogbnVtYmVyXG4gIHByaWNlTWF4PzogbnVtYmVyXG4gIGhhc0Rpc2NvdW50PzogYm9vbGVhblxuXG4gIC8vIEZpbHRyb3MgYXZhbnphZG9zIChtw7psdGlwbGVzIHZhbG9yZXMpXG4gIGNhdGVnb3JpZXM/OiBzdHJpbmdbXVxuICBicmFuZHM/OiBzdHJpbmdbXVxuICBwYWludFR5cGVzPzogc3RyaW5nW11cblxuICAvLyBQYWdpbmFjacOzbiB5IG9yZGVuYW1pZW50b1xuICBwYWdlPzogbnVtYmVyXG4gIGxpbWl0PzogbnVtYmVyXG4gIHNvcnRCeT86ICdwcmljZScgfCAnbmFtZScgfCAnY3JlYXRlZF9hdCcgfCAnYnJhbmQnXG4gIHNvcnRPcmRlcj86ICdhc2MnIHwgJ2Rlc2MnXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBBUkEgUFJPRFVDVE9TIEZJTFRSQURPU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHVzZUZpbHRlcmVkUHJvZHVjdHMgPSAoZmlsdGVyczogUHJvZHVjdEZpbHRlcnMgPSB7fSkgPT4ge1xuICByZXR1cm4gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJ2ZpbHRlcmVkLXByb2R1Y3RzJywgZmlsdGVyc10sXG4gICAgcXVlcnlGbjogYXN5bmMgKCk6IFByb21pc2U8UGFnaW5hdGVkUmVzcG9uc2U8UHJvZHVjdFdpdGhDYXRlZ29yeT4+ID0+IHtcbiAgICAgIC8vIENvbnN0cnVpciBVUkwgY29uIHBhcsOhbWV0cm9zXG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcblxuICAgICAgLy8gRmlsdHJvcyBiw6FzaWNvc1xuICAgICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnY2F0ZWdvcnknLCBmaWx0ZXJzLmNhdGVnb3J5KVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMuYnJhbmQpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnYnJhbmQnLCBmaWx0ZXJzLmJyYW5kKVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ3NlYXJjaCcsIGZpbHRlcnMuc2VhcmNoKVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMucHJpY2VNaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwcmljZU1pbicsIGZpbHRlcnMucHJpY2VNaW4udG9TdHJpbmcoKSlcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLnByaWNlTWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgncHJpY2VNYXgnLCBmaWx0ZXJzLnByaWNlTWF4LnRvU3RyaW5nKCkpXG4gICAgICB9XG5cbiAgICAgIC8vIEZpbHRyb3MgYXZhbnphZG9zIChhcnJheXMpXG4gICAgICBpZiAoZmlsdGVycy5jYXRlZ29yaWVzICYmIGZpbHRlcnMuY2F0ZWdvcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2NhdGVnb3JpZXMnLCBmaWx0ZXJzLmNhdGVnb3JpZXMuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMuYnJhbmRzICYmIGZpbHRlcnMuYnJhbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnYnJhbmRzJywgZmlsdGVycy5icmFuZHMuam9pbignLCcpKVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMucGFpbnRUeXBlcyAmJiBmaWx0ZXJzLnBhaW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwYWludFR5cGVzJywgZmlsdGVycy5wYWludFR5cGVzLmpvaW4oJywnKSlcbiAgICAgIH1cblxuICAgICAgLy8gRmlsdHJvIGRlIGRlc2N1ZW50b1xuICAgICAgaWYgKGZpbHRlcnMuaGFzRGlzY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdoYXNEaXNjb3VudCcsIGZpbHRlcnMuaGFzRGlzY291bnQudG9TdHJpbmcoKSlcbiAgICAgIH1cblxuICAgICAgLy8gUGFnaW5hY2nDs24geSBvcmRlbmFtaWVudG9cbiAgICAgIGlmIChmaWx0ZXJzLnBhZ2UpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgncGFnZScsIGZpbHRlcnMucGFnZS50b1N0cmluZygpKVxuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMubGltaXQpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnbGltaXQnLCBmaWx0ZXJzLmxpbWl0LnRvU3RyaW5nKCkpXG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy5zb3J0QnkpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnc29ydEJ5JywgZmlsdGVycy5zb3J0QnkpXG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy5zb3J0T3JkZXIpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnc29ydE9yZGVyJywgZmlsdGVycy5zb3J0T3JkZXIpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3Byb2R1Y3RzPyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YFxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybClcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVBcGlSZXNwb25zZUpzb248UGFnaW5hdGVkUmVzcG9uc2U8UHJvZHVjdFdpdGhDYXRlZ29yeT4+KHJlc3BvbnNlKVxuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UnKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGEhXG4gICAgfSxcbiAgICBzdGFsZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRvc1xuICAgIGdjVGltZTogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0b3NcbiAgICByZXRyeTogMixcbiAgICByZXRyeURlbGF5OiBhdHRlbXB0SW5kZXggPT4gTWF0aC5taW4oMTAwMCAqIDIgKiogYXR0ZW1wdEluZGV4LCAzMDAwMCksXG4gICAgZW5hYmxlZDogdHJ1ZSwgLy8gU2llbXByZSBoYWJpbGl0YWRvLCBpbmNsdXNvIHNpbiBmaWx0cm9zXG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBBUkEgQ09OVEVPIERFIFBST0RVQ1RPU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHVzZVByb2R1Y3RDb3VudCA9IChmaWx0ZXJzOiBPbWl0PFByb2R1Y3RGaWx0ZXJzLCAncGFnZScgfCAnbGltaXQnPiA9IHt9KSA9PiB7XG4gIHJldHVybiB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXk6IFsncHJvZHVjdC1jb3VudCcsIGZpbHRlcnNdLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpOiBQcm9taXNlPG51bWJlcj4gPT4ge1xuICAgICAgLy8gVXNhciBsb3MgbWlzbW9zIGZpbHRyb3MgcGVybyBjb24gbGltaXQ9MSBwYXJhIG9idGVuZXIgc29sbyBlbCBjb3VudFxuICAgICAgY29uc3QgY291bnRGaWx0ZXJzID0geyAuLi5maWx0ZXJzLCBwYWdlOiAxLCBsaW1pdDogMSB9XG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcblxuICAgICAgLy8gQXBsaWNhciBsb3MgbWlzbW9zIGZpbHRyb3MgcXVlIHVzZUZpbHRlcmVkUHJvZHVjdHNcbiAgICAgIGlmIChjb3VudEZpbHRlcnMuY2F0ZWdvcnkpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnY2F0ZWdvcnknLCBjb3VudEZpbHRlcnMuY2F0ZWdvcnkpXG4gICAgICB9XG4gICAgICBpZiAoY291bnRGaWx0ZXJzLmJyYW5kKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2JyYW5kJywgY291bnRGaWx0ZXJzLmJyYW5kKVxuICAgICAgfVxuICAgICAgaWYgKGNvdW50RmlsdGVycy5zZWFyY2gpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnc2VhcmNoJywgY291bnRGaWx0ZXJzLnNlYXJjaClcbiAgICAgIH1cbiAgICAgIGlmIChjb3VudEZpbHRlcnMucHJpY2VNaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwcmljZU1pbicsIGNvdW50RmlsdGVycy5wcmljZU1pbi50b1N0cmluZygpKVxuICAgICAgfVxuICAgICAgaWYgKGNvdW50RmlsdGVycy5wcmljZU1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWF4JywgY291bnRGaWx0ZXJzLnByaWNlTWF4LnRvU3RyaW5nKCkpXG4gICAgICB9XG5cbiAgICAgIGlmIChjb3VudEZpbHRlcnMuY2F0ZWdvcmllcyAmJiBjb3VudEZpbHRlcnMuY2F0ZWdvcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2NhdGVnb3JpZXMnLCBjb3VudEZpbHRlcnMuY2F0ZWdvcmllcy5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBpZiAoY291bnRGaWx0ZXJzLmJyYW5kcyAmJiBjb3VudEZpbHRlcnMuYnJhbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnYnJhbmRzJywgY291bnRGaWx0ZXJzLmJyYW5kcy5qb2luKCcsJykpXG4gICAgICB9XG4gICAgICBpZiAoY291bnRGaWx0ZXJzLnBhaW50VHlwZXMgJiYgY291bnRGaWx0ZXJzLnBhaW50VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwYWludFR5cGVzJywgY291bnRGaWx0ZXJzLnBhaW50VHlwZXMuam9pbignLCcpKVxuICAgICAgfVxuXG4gICAgICAvLyBGaWx0cm8gZGUgZGVzY3VlbnRvXG4gICAgICBpZiAoY291bnRGaWx0ZXJzLmhhc0Rpc2NvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnaGFzRGlzY291bnQnLCBjb3VudEZpbHRlcnMuaGFzRGlzY291bnQudG9TdHJpbmcoKSlcbiAgICAgIH1cblxuICAgICAgc2VhcmNoUGFyYW1zLnNldCgncGFnZScsICcxJylcbiAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2xpbWl0JywgJzEnKVxuXG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9wcm9kdWN0cz8ke3NlYXJjaFBhcmFtcy50b1N0cmluZygpfWBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FmZUFwaVJlc3BvbnNlSnNvbjxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj4ocmVzcG9uc2UpXG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnRXJyb3IgcGFyc2luZyByZXNwb25zZScpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvdW50ID0gcmVzdWx0LmRhdGE/LnBhZ2luYXRpb24/LnRvdGFsIHx8IDBcblxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfSxcbiAgICBzdGFsZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRvc1xuICAgIGdjVGltZTogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0b3NcbiAgICByZXRyeTogMixcbiAgICBlbmFibGVkOiB0cnVlLFxuICB9KVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSyBQQVJBIENPTlRFTyBESU7DgU1JQ08gUE9SIENBVEVHT1LDjUFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCB1c2VDYXRlZ29yeVByb2R1Y3RDb3VudHMgPSAoXG4gIGNhdGVnb3J5SWRzOiBzdHJpbmdbXSxcbiAgYmFzZUZpbHRlcnM6IE9taXQ8UHJvZHVjdEZpbHRlcnMsICdjYXRlZ29yaWVzJyB8ICdjYXRlZ29yeSc+ID0ge31cbikgPT4ge1xuICByZXR1cm4gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJ2NhdGVnb3J5LXByb2R1Y3QtY291bnRzJywgY2F0ZWdvcnlJZHMsIGJhc2VGaWx0ZXJzXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PiA9PiB7XG4gICAgICBjb25zdCBjb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuXG4gICAgICAvLyBPYnRlbmVyIGNvbnRlbyBwYXJhIGNhZGEgY2F0ZWdvcsOtYSBpbmRpdmlkdWFsbWVudGVcbiAgICAgIGNvbnN0IHByb21pc2VzID0gY2F0ZWdvcnlJZHMubWFwKGFzeW5jIGNhdGVnb3J5SWQgPT4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJzID0geyAuLi5iYXNlRmlsdGVycywgY2F0ZWdvcmllczogW2NhdGVnb3J5SWRdIH1cbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG5cbiAgICAgICAgLy8gSU1QT1JUQU5URTogQXBsaWNhciBmaWx0cm8gZGUgY2F0ZWdvcsOtYSBQUklNRVJPIHBhcmEgZXZpdGFyIGNvbmZsaWN0b3MgZGUgcGFyw6FtZXRyb3NcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnY2F0ZWdvcmllcycsIGNhdGVnb3J5SWQpXG5cbiAgICAgICAgLy8gQXBsaWNhciBmaWx0cm9zIGJhc2VcbiAgICAgICAgaWYgKGZpbHRlcnMuYnJhbmQpIHtcbiAgICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdicmFuZCcsIGZpbHRlcnMuYnJhbmQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnc2VhcmNoJywgZmlsdGVycy5zZWFyY2gpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlcnMucHJpY2VNaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ3ByaWNlTWluJywgZmlsdGVycy5wcmljZU1pbi50b1N0cmluZygpKVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWx0ZXJzLnByaWNlTWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdwcmljZU1heCcsIGZpbHRlcnMucHJpY2VNYXgudG9TdHJpbmcoKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsdGVycy5icmFuZHMgJiYgZmlsdGVycy5icmFuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ2JyYW5kcycsIGZpbHRlcnMuYnJhbmRzLmpvaW4oJywnKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsdGVycy5wYWludFR5cGVzICYmIGZpbHRlcnMucGFpbnRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgncGFpbnRUeXBlcycsIGZpbHRlcnMucGFpbnRUeXBlcy5qb2luKCcsJykpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaWx0cm8gZGUgZGVzY3VlbnRvXG4gICAgICAgIGlmIChmaWx0ZXJzLmhhc0Rpc2NvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdoYXNEaXNjb3VudCcsIGZpbHRlcnMuaGFzRGlzY291bnQudG9TdHJpbmcoKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwbGljYXIgcGFnaW5hY2nDs24gYWwgZmluYWxcbiAgICAgICAgc2VhcmNoUGFyYW1zLnNldCgnbGltaXQnLCAnMScpXG4gICAgICAgIHNlYXJjaFBhcmFtcy5zZXQoJ3BhZ2UnLCAnMScpXG5cbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcHJvZHVjdHM/JHtzZWFyY2hQYXJhbXMudG9TdHJpbmcoKX1gXG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpXG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHJldHVybiB7IGNhdGVnb3J5SWQsIGNvdW50OiAwIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVBcGlSZXNwb25zZUpzb248UGFnaW5hdGVkUmVzcG9uc2U8UHJvZHVjdFdpdGhDYXRlZ29yeT4+KHJlc3BvbnNlKVxuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4geyBjYXRlZ29yeUlkLCBjb3VudDogMCB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb3VudCA9IHJlc3VsdC5kYXRhPy5wYWdpbmF0aW9uPy50b3RhbCB8fCAwXG4gICAgICAgIHJldHVybiB7IGNhdGVnb3J5SWQsIGNvdW50IH1cbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKCh7IGNhdGVnb3J5SWQsIGNvdW50IH0pID0+IHtcbiAgICAgICAgY291bnRzW2NhdGVnb3J5SWRdID0gY291bnRcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBjb3VudHNcbiAgICB9LFxuICAgIHN0YWxlVGltZTogMiAqIDYwICogMTAwMCwgLy8gMiBtaW51dG9zIChtw6FzIGZyZWN1ZW50ZSBwYXJhIGNvbnRlb3MgZGluw6FtaWNvcylcbiAgICBnY1RpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRvc1xuICAgIHJldHJ5OiAxLFxuICAgIGVuYWJsZWQ6IGNhdGVnb3J5SWRzLmxlbmd0aCA+IDAsXG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVVElMSURBREVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgZ2V0QWN0aXZlRmlsdGVyc0NvdW50ID0gKGZpbHRlcnM6IFByb2R1Y3RGaWx0ZXJzKTogbnVtYmVyID0+IHtcbiAgbGV0IGNvdW50ID0gMFxuXG4gIGlmIChmaWx0ZXJzLmNhdGVnb3JpZXMgJiYgZmlsdGVycy5jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICBjb3VudCArPSBmaWx0ZXJzLmNhdGVnb3JpZXMubGVuZ3RoXG4gIH1cbiAgaWYgKGZpbHRlcnMuYnJhbmRzICYmIGZpbHRlcnMuYnJhbmRzLmxlbmd0aCA+IDApIHtcbiAgICBjb3VudCArPSBmaWx0ZXJzLmJyYW5kcy5sZW5ndGhcbiAgfVxuICBpZiAoZmlsdGVycy5wYWludFR5cGVzICYmIGZpbHRlcnMucGFpbnRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgY291bnQgKz0gZmlsdGVycy5wYWludFR5cGVzLmxlbmd0aFxuICB9XG4gIGlmIChmaWx0ZXJzLnByaWNlTWluICE9PSB1bmRlZmluZWQgfHwgZmlsdGVycy5wcmljZU1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY291bnQgKz0gMVxuICB9XG4gIGlmIChmaWx0ZXJzLnNlYXJjaCkge1xuICAgIGNvdW50ICs9IDFcbiAgfVxuXG4gIHJldHVybiBjb3VudFxufVxuXG5leHBvcnQgY29uc3QgaGFzQWN0aXZlRmlsdGVycyA9IChmaWx0ZXJzOiBQcm9kdWN0RmlsdGVycyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gZ2V0QWN0aXZlRmlsdGVyc0NvdW50KGZpbHRlcnMpID4gMFxufVxuIl0sIm5hbWVzIjpbImdldEFjdGl2ZUZpbHRlcnNDb3VudCIsImhhc0FjdGl2ZUZpbHRlcnMiLCJ1c2VDYXRlZ29yeVByb2R1Y3RDb3VudHMiLCJ1c2VGaWx0ZXJlZFByb2R1Y3RzIiwidXNlUHJvZHVjdENvdW50IiwiZmlsdGVycyIsInVzZVF1ZXJ5IiwicXVlcnlLZXkiLCJxdWVyeUZuIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiY2F0ZWdvcnkiLCJzZXQiLCJicmFuZCIsInNlYXJjaCIsInByaWNlTWluIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJwcmljZU1heCIsImNhdGVnb3JpZXMiLCJsZW5ndGgiLCJqb2luIiwiYnJhbmRzIiwicGFpbnRUeXBlcyIsImhhc0Rpc2NvdW50IiwicGFnZSIsImxpbWl0Iiwic29ydEJ5Iiwic29ydE9yZGVyIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwicmVzdWx0Iiwic2FmZUFwaVJlc3BvbnNlSnNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImRhdGEiLCJzdGFsZVRpbWUiLCJnY1RpbWUiLCJyZXRyeSIsInJldHJ5RGVsYXkiLCJhdHRlbXB0SW5kZXgiLCJNYXRoIiwibWluIiwiZW5hYmxlZCIsImNvdW50RmlsdGVycyIsImNvdW50IiwicGFnaW5hdGlvbiIsInRvdGFsIiwiY2F0ZWdvcnlJZHMiLCJiYXNlRmlsdGVycyIsImNvdW50cyIsInByb21pc2VzIiwibWFwIiwiY2F0ZWdvcnlJZCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztRQStRYUE7ZUFBQUE7O1FBc0JBQztlQUFBQTs7UUF6R0FDO2VBQUFBOztRQXpKQUM7ZUFBQUE7O1FBa0ZBQztlQUFBQTs7OzRCQW5IWTsyQkFFVztBQStCN0IsTUFBTUQsc0JBQXNCLENBQUNFLFVBQTBCLENBQUMsQ0FBQztJQUM5RCxPQUFPQyxJQUFBQSxvQkFBUSxFQUFDO1FBQ2RDLFVBQVU7WUFBQztZQUFxQkY7U0FBUTtRQUN4Q0csU0FBUztZQUNQLCtCQUErQjtZQUMvQixNQUFNQyxlQUFlLElBQUlDO1lBRXpCLGtCQUFrQjtZQUNsQixJQUFJTCxRQUFRTSxRQUFRLEVBQUU7Z0JBQ3BCRixhQUFhRyxHQUFHLENBQUMsWUFBWVAsUUFBUU0sUUFBUTtZQUMv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