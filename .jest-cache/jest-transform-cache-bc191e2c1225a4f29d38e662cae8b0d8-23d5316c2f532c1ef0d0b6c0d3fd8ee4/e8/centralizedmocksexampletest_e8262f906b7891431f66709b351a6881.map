{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\examples\\centralized-mocks-example.test.ts"],"sourcesContent":["// ===================================\n// EJEMPLO DE USO DE MOCKS CENTRALIZADOS - PINTEYA E-COMMERCE\n// ===================================\n\n/**\n * Test de ejemplo que demuestra el uso de los mocks centralizados\n * Este archivo sirve como referencia para futuros tests\n */\n\nimport { renderHook, waitFor } from '@testing-library/react'\nimport { useProducts } from '@/hooks/useProducts'\nimport { setupApiMocks, mockApiResponses, mockConfigurations } from '../__mocks__/api-mocks'\nimport { createMockUseProducts, mockUseProductsState } from '../__mocks__/hooks-mocks'\n\ndescribe('Ejemplo de Mocks Centralizados', () => {\n  // Setup de mocks usando helper centralizado\n  const { mockFetch, resetMocks, mockSuccess, mockError, mockHttpError } = setupApiMocks()\n\n  beforeEach(() => {\n    resetMocks()\n  })\n\n  describe('API Mocks Centralizados', () => {\n    it('debe usar respuesta exitosa por defecto', async () => {\n      // El mock ya está configurado con respuesta exitosa por defecto\n      const { result } = renderHook(() => useProducts())\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.products).toHaveLength(3) // mockProducts tiene 3 items\n      expect(result.current.error).toBeNull()\n    })\n\n    it('debe manejar errores usando helper mockError', async () => {\n      mockError('Network connection failed')\n\n      const { result } = renderHook(() => useProducts())\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.error).toBe('Error obteniendo productos')\n      expect(result.current.products).toEqual([])\n    })\n\n    it('debe manejar errores HTTP usando helper mockHttpError', async () => {\n      mockHttpError(500, 'Internal Server Error')\n\n      const { result } = renderHook(() => useProducts())\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.error).toBe('Error obteniendo productos')\n      expect(result.current.products).toEqual([])\n    })\n\n    it('debe usar respuestas predefinidas', async () => {\n      // Usar respuesta vacía predefinida\n      mockSuccess(mockApiResponses.products.empty)\n\n      const { result } = renderHook(() => useProducts())\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.products).toEqual([])\n      expect(result.current.pagination.total).toBe(0)\n    })\n\n    it('debe usar configuraciones mock comunes', async () => {\n      // Usar configuración de error 404\n      mockFetch.mockResolvedValueOnce(mockConfigurations.notFound())\n\n      const { result } = renderHook(() => useProducts())\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.error).toBe('Error obteniendo productos')\n    })\n  })\n\n  describe('Hook Mocks Centralizados', () => {\n    it('debe crear mock de useProducts con estado por defecto', () => {\n      const mockHook = createMockUseProducts()\n\n      expect(mockHook.products).toHaveLength(3)\n      expect(mockHook.loading).toBe(false)\n      expect(mockHook.error).toBeNull()\n      expect(mockHook.hasProducts).toBe(true)\n      expect(typeof mockHook.fetchProducts).toBe('function')\n    })\n\n    it('debe crear mock de useProducts con estado personalizado', () => {\n      const mockHook = createMockUseProducts(mockUseProductsState.loading)\n\n      expect(mockHook.products).toEqual([])\n      expect(mockHook.loading).toBe(true)\n      expect(mockHook.error).toBeNull()\n      expect(mockHook.hasProducts).toBe(false)\n    })\n\n    it('debe crear mock de useProducts con estado de error', () => {\n      const mockHook = createMockUseProducts(mockUseProductsState.error)\n\n      expect(mockHook.products).toEqual([])\n      expect(mockHook.loading).toBe(false)\n      expect(mockHook.error).toBe('Error obteniendo productos')\n      expect(mockHook.hasError).toBe(true)\n    })\n  })\n\n  describe('Ventajas de Mocks Centralizados', () => {\n    it('debe proporcionar datos consistentes entre tests', async () => {\n      // Primer test\n      const { result: result1 } = renderHook(() => useProducts())\n      await waitFor(() => expect(result1.current.loading).toBe(false))\n\n      // Segundo test con reset\n      resetMocks()\n      const { result: result2 } = renderHook(() => useProducts())\n      await waitFor(() => expect(result2.current.loading).toBe(false))\n\n      // Ambos deben tener los mismos datos mock\n      expect(result1.current.products).toEqual(result2.current.products)\n    })\n\n    it('debe facilitar testing de casos edge', async () => {\n      // Caso: respuesta con delay para testing de loading states\n      mockFetch.mockResolvedValueOnce(\n        mockConfigurations.delayed(mockApiResponses.products.success, 100)\n      )\n\n      const { result } = renderHook(() => useProducts())\n\n      // Inicialmente debe estar cargando\n      expect(result.current.loading).toBe(true)\n\n      // Después del delay debe tener datos\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n\n      expect(result.current.products).toHaveLength(3)\n    })\n\n    it('debe permitir testing de múltiples llamadas API', async () => {\n      // Primera llamada: éxito\n      mockSuccess(mockApiResponses.products.success)\n\n      // Segunda llamada: error\n      mockError('Second call failed')\n\n      const { result } = renderHook(() => useProducts())\n\n      // Primera llamada exitosa\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n      expect(result.current.products).toHaveLength(3)\n\n      // Simular segunda llamada (ej: refresh)\n      result.current.fetchProducts()\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false)\n      })\n      expect(result.current.error).toBe('Error obteniendo productos')\n    })\n  })\n\n  describe('Reutilización de Mocks', () => {\n    it('debe reutilizar mocks entre diferentes hooks', () => {\n      // Los mismos datos mock pueden usarse para diferentes hooks\n      const productsData = mockApiResponses.products.success.data\n\n      expect(productsData).toHaveLength(3)\n      expect(productsData[0]).toHaveProperty('name')\n      expect(productsData[0]).toHaveProperty('price')\n      expect(productsData[0]).toHaveProperty('category')\n    })\n\n    it('debe mantener estructura consistente de respuestas', () => {\n      const responses = [\n        mockApiResponses.products.success,\n        mockApiResponses.products.empty,\n        mockApiResponses.products.error,\n      ]\n\n      responses.forEach(response => {\n        expect(response).toHaveProperty('success')\n        expect(response).toHaveProperty('data')\n        expect(response).toHaveProperty('pagination')\n      })\n    })\n  })\n})\n\n// ===================================\n// DOCUMENTACIÓN DE MEJORES PRÁCTICAS\n// ===================================\n\n/**\n * MEJORES PRÁCTICAS PARA USAR MOCKS CENTRALIZADOS:\n *\n * 1. SETUP CONSISTENTE:\n *    - Usar setupApiMocks() en beforeEach\n *    - Llamar resetMocks() para limpiar estado\n *\n * 2. HELPERS ESPECÍFICOS:\n *    - mockSuccess() para respuestas exitosas\n *    - mockError() para errores de red\n *    - mockHttpError() para errores HTTP específicos\n *\n * 3. DATOS REALISTAS:\n *    - Usar mockApiResponses.* para datos predefinidos\n *    - Mantener estructura consistente con API real\n *\n * 4. CASOS EDGE:\n *    - Usar mockConfigurations.* para casos especiales\n *    - Testing de loading states con delayed responses\n *\n * 5. REUTILIZACIÓN:\n *    - Importar mocks desde archivos centralizados\n *    - Evitar duplicar datos mock en cada test\n *\n * 6. MANTENIMIENTO:\n *    - Actualizar mocks cuando cambie la API\n *    - Mantener sincronizados con tipos TypeScript\n */\n"],"names":["describe","mockFetch","resetMocks","mockSuccess","mockError","mockHttpError","setupApiMocks","beforeEach","it","result","renderHook","useProducts","waitFor","expect","current","loading","toBe","products","toHaveLength","error","toBeNull","toEqual","mockApiResponses","empty","pagination","total","mockResolvedValueOnce","mockConfigurations","notFound","mockHook","createMockUseProducts","hasProducts","fetchProducts","mockUseProductsState","hasError","result1","result2","delayed","success","productsData","data","toHaveProperty","responses","forEach","response"],"mappings":"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"}