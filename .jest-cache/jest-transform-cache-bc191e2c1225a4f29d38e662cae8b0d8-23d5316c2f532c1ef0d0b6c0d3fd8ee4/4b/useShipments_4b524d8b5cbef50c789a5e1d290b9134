2b6ea75c12fd9ab918ba0829bdce8ae9
// =====================================================
// HOOK: SHIPMENTS MANAGEMENT ENTERPRISE
// Descripción: Hook para gestión completa de envíos
// Basado en: Patrones TanStack Query + React Hook Form
// =====================================================
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useBulkShipmentOperations () {
        return useBulkShipmentOperations;
    },
    get useCreateShipment () {
        return useCreateShipment;
    },
    get useDeleteShipment () {
        return useDeleteShipment;
    },
    get useShipmentFilters () {
        return useShipmentFilters;
    },
    get useShipmentStats () {
        return useShipmentStats;
    },
    get useShipments () {
        return useShipments;
    },
    get useUpdateShipment () {
        return useUpdateShipment;
    }
});
const _reactquery = require("@tanstack/react-query");
const _react = require("react");
const _sonner = require("sonner");
// =====================================================
// CONFIGURACIÓN DE QUERIES
// =====================================================
const SHIPMENTS_QUERY_KEY = [
    'admin',
    'logistics',
    'shipments'
];
const STALE_TIME = 30000 // 30 segundos
;
// =====================================================
// FUNCIONES DE API
// =====================================================
async function fetchShipments(params) {
    const searchParams = new URLSearchParams();
    Object.entries(params).forEach(([key, value])=>{
        if (value !== undefined && value !== null) {
            searchParams.append(key, value.toString());
        }
    });
    const response = await fetch(`/api/admin/logistics/shipments?${searchParams}`, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    return response.json();
}
async function createShipment(data) {
    const response = await fetch('/api/admin/logistics/shipments', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    const result = await response.json();
    return result.data;
}
async function updateShipment(id, data) {
    const response = await fetch(`/api/admin/logistics/shipments/${id}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
    const result = await response.json();
    return result.data;
}
async function deleteShipment(id) {
    const response = await fetch(`/api/admin/logistics/shipments/${id}`, {
        method: 'DELETE',
        headers: {
            'Content-Type': 'application/json'
        }
    });
    if (!response.ok) {
        const errorData = await response.json().catch(()=>({}));
        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
    }
}
function useShipments(params = {}) {
    const queryClient = (0, _reactquery.useQueryClient)();
    const queryKey = [
        ...SHIPMENTS_QUERY_KEY,
        params
    ];
    const { data, isLoading, error, refetch } = (0, _reactquery.useQuery)({
        queryKey,
        queryFn: ()=>fetchShipments(params),
        staleTime: STALE_TIME,
        retry: 3,
        retryDelay: (attemptIndex)=>Math.min(1000 * 2 ** attemptIndex, 30000)
    });
    return {
        data,
        isLoading,
        error: error,
        refetch
    };
}
function useCreateShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: createShipment,
        onSuccess: (newShipment)=>{
            // Invalidar cache de shipments
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            // Invalidar dashboard de logística
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío creado exitosamente', {
                description: `Número de envío: ${newShipment.shipment_number}`
            });
        },
        onError: (error)=>{
            _sonner.toast.error('Error al crear envío', {
                description: error.message
            });
        }
    });
}
function useUpdateShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: ({ id, data })=>updateShipment(id, data),
        onSuccess: (updatedShipment)=>{
            // Actualizar cache específico del shipment
            queryClient.setQueryData([
                'admin',
                'logistics',
                'shipment',
                updatedShipment.id
            ], updatedShipment);
            // Invalidar listas de shipments
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            // Invalidar dashboard si cambió el estado
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío actualizado exitosamente');
        },
        onError: (error)=>{
            _sonner.toast.error('Error al actualizar envío', {
                description: error.message
            });
        }
    });
}
function useDeleteShipment() {
    const queryClient = (0, _reactquery.useQueryClient)();
    return (0, _reactquery.useMutation)({
        mutationFn: deleteShipment,
        onSuccess: (_, deletedId)=>{
            // Remover del cache
            queryClient.removeQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'shipment',
                    deletedId
                ]
            });
            // Invalidar listas
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success('Envío eliminado exitosamente');
        },
        onError: (error)=>{
            _sonner.toast.error('Error al eliminar envío', {
                description: error.message
            });
        }
    });
}
function useShipmentFilters() {
    const [filters, setFilters] = (0, _react.useState)({
        page: 1,
        limit: 20,
        order_by: 'created_at',
        order_direction: 'desc'
    });
    const updateFilter = (0, _react.useCallback)((key, value)=>{
        setFilters((prev)=>({
                ...prev,
                [key]: value,
                page: key !== 'page' ? 1 : value
            }));
    }, []);
    const resetFilters = (0, _react.useCallback)(()=>{
        setFilters({
            page: 1,
            limit: 20,
            order_by: 'created_at',
            order_direction: 'desc'
        });
    }, []);
    const setPage = (0, _react.useCallback)((page)=>{
        updateFilter('page', page);
    }, [
        updateFilter
    ]);
    const setStatus = (0, _react.useCallback)((status)=>{
        updateFilter('status', status);
    }, [
        updateFilter
    ]);
    const setSearch = (0, _react.useCallback)((search)=>{
        updateFilter('search', search || undefined);
    }, [
        updateFilter
    ]);
    const setDateRange = (0, _react.useCallback)((dateFrom, dateTo)=>{
        setFilters((prev)=>({
                ...prev,
                date_from: dateFrom,
                date_to: dateTo,
                page: 1
            }));
    }, []);
    return {
        filters,
        updateFilter,
        resetFilters,
        setPage,
        setStatus,
        setSearch,
        setDateRange
    };
}
function useShipmentStats(shipments) {
    return {
        total: shipments?.length || 0,
        byStatus: shipments?.reduce((acc, shipment)=>{
            acc[shipment.status] = (acc[shipment.status] || 0) + 1;
            return acc;
        }, {}) || {},
        totalCost: shipments?.reduce((acc, shipment)=>acc + shipment.total_cost, 0) || 0,
        averageCost: shipments?.length ? shipments.reduce((acc, shipment)=>acc + shipment.total_cost, 0) / shipments.length : 0
    };
}
function useBulkShipmentOperations() {
    const queryClient = (0, _reactquery.useQueryClient)();
    const [selectedShipments, setSelectedShipments] = (0, _react.useState)([]);
    const bulkUpdateStatus = (0, _reactquery.useMutation)({
        mutationFn: async ({ shipmentIds, status })=>{
            const promises = shipmentIds.map((id)=>updateShipment(id, {
                    status
                }));
            return Promise.all(promises);
        },
        onSuccess: (_, { shipmentIds, status })=>{
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success(`${shipmentIds.length} envíos actualizados a ${status}`);
            setSelectedShipments([]);
        },
        onError: (error)=>{
            _sonner.toast.error('Error en operación masiva', {
                description: error.message
            });
        }
    });
    const bulkDelete = (0, _reactquery.useMutation)({
        mutationFn: async (shipmentIds)=>{
            const promises = shipmentIds.map((id)=>deleteShipment(id));
            return Promise.all(promises);
        },
        onSuccess: (_, shipmentIds)=>{
            queryClient.invalidateQueries({
                queryKey: SHIPMENTS_QUERY_KEY
            });
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            _sonner.toast.success(`${shipmentIds.length} envíos eliminados`);
            setSelectedShipments([]);
        },
        onError: (error)=>{
            _sonner.toast.error('Error al eliminar envíos', {
                description: error.message
            });
        }
    });
    const toggleSelection = (0, _react.useCallback)((shipmentId)=>{
        setSelectedShipments((prev)=>prev.includes(shipmentId) ? prev.filter((id)=>id !== shipmentId) : [
                ...prev,
                shipmentId
            ]);
    }, []);
    const selectAll = (0, _react.useCallback)((shipmentIds)=>{
        setSelectedShipments(shipmentIds);
    }, []);
    const clearSelection = (0, _react.useCallback)(()=>{
        setSelectedShipments([]);
    }, []);
    return {
        selectedShipments,
        toggleSelection,
        selectAll,
        clearSelection,
        bulkUpdateStatus,
        bulkDelete,
        isLoading: bulkUpdateStatus.isPending || bulkDelete.isPending
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VTaGlwbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0s6IFNISVBNRU5UUyBNQU5BR0VNRU5UIEVOVEVSUFJJU0Vcbi8vIERlc2NyaXBjacOzbjogSG9vayBwYXJhIGdlc3Rpw7NuIGNvbXBsZXRhIGRlIGVudsOtb3Ncbi8vIEJhc2FkbyBlbjogUGF0cm9uZXMgVGFuU3RhY2sgUXVlcnkgKyBSZWFjdCBIb29rIEZvcm1cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24sIHVzZVF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5J1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcidcbmltcG9ydCB7XG4gIFNoaXBtZW50LFxuICBDcmVhdGVTaGlwbWVudFJlcXVlc3QsXG4gIFVwZGF0ZVNoaXBtZW50UmVxdWVzdCxcbiAgR2V0U2hpcG1lbnRzUmVxdWVzdCxcbiAgUGFnaW5hdGVkUmVzcG9uc2UsXG4gIFVzZVNoaXBtZW50c1JldHVybixcbiAgU2hpcG1lbnRTdGF0dXMsXG59IGZyb20gJ0AvdHlwZXMvbG9naXN0aWNzJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBQ0nDk04gREUgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU0hJUE1FTlRTX1FVRVJZX0tFWSA9IFsnYWRtaW4nLCAnbG9naXN0aWNzJywgJ3NoaXBtZW50cyddXG5jb25zdCBTVEFMRV9USU1FID0gMzAwMDAgLy8gMzAgc2VndW5kb3NcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJT05FUyBERSBBUElcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2hpcG1lbnRzKHBhcmFtczogR2V0U2hpcG1lbnRzUmVxdWVzdCk6IFByb21pc2U8UGFnaW5hdGVkUmVzcG9uc2U8U2hpcG1lbnQ+PiB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuXG4gIE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZS50b1N0cmluZygpKVxuICAgIH1cbiAgfSlcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL2xvZ2lzdGljcy9zaGlwbWVudHM/JHtzZWFyY2hQYXJhbXN9YCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9LFxuICB9KVxuXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gIH1cblxuICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNoaXBtZW50KGRhdGE6IENyZWF0ZVNoaXBtZW50UmVxdWVzdCk6IFByb21pc2U8U2hpcG1lbnQ+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hZG1pbi9sb2dpc3RpY3Mvc2hpcG1lbnRzJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgfSlcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gIHJldHVybiByZXN1bHQuZGF0YVxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVTaGlwbWVudChpZDogbnVtYmVyLCBkYXRhOiBVcGRhdGVTaGlwbWVudFJlcXVlc3QpOiBQcm9taXNlPFNoaXBtZW50PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vbG9naXN0aWNzL3NoaXBtZW50cy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgfSlcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gIHJldHVybiByZXN1bHQuZGF0YVxufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVTaGlwbWVudChpZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vbG9naXN0aWNzL3NoaXBtZW50cy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgfSlcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LIFBSSU5DSVBBTDogdXNlU2hpcG1lbnRzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRzKHBhcmFtczogR2V0U2hpcG1lbnRzUmVxdWVzdCA9IHt9KTogVXNlU2hpcG1lbnRzUmV0dXJuIHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpXG5cbiAgY29uc3QgcXVlcnlLZXkgPSBbLi4uU0hJUE1FTlRTX1FVRVJZX0tFWSwgcGFyYW1zXVxuXG4gIGNvbnN0IHsgZGF0YSwgaXNMb2FkaW5nLCBlcnJvciwgcmVmZXRjaCB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5LFxuICAgIHF1ZXJ5Rm46ICgpID0+IGZldGNoU2hpcG1lbnRzKHBhcmFtcyksXG4gICAgc3RhbGVUaW1lOiBTVEFMRV9USU1FLFxuICAgIHJldHJ5OiAzLFxuICAgIHJldHJ5RGVsYXk6IGF0dGVtcHRJbmRleCA9PiBNYXRoLm1pbigxMDAwICogMiAqKiBhdHRlbXB0SW5kZXgsIDMwMDAwKSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIGRhdGEsXG4gICAgaXNMb2FkaW5nLFxuICAgIGVycm9yOiBlcnJvciBhcyBFcnJvciB8IG51bGwsXG4gICAgcmVmZXRjaCxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlQ3JlYXRlU2hpcG1lbnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDcmVhdGVTaGlwbWVudCgpIHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpXG5cbiAgcmV0dXJuIHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBjcmVhdGVTaGlwbWVudCxcbiAgICBvblN1Y2Nlc3M6IG5ld1NoaXBtZW50ID0+IHtcbiAgICAgIC8vIEludmFsaWRhciBjYWNoZSBkZSBzaGlwbWVudHNcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFNISVBNRU5UU19RVUVSWV9LRVkgfSlcblxuICAgICAgLy8gSW52YWxpZGFyIGRhc2hib2FyZCBkZSBsb2fDrXN0aWNhXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KVxuXG4gICAgICB0b2FzdC5zdWNjZXNzKCdFbnbDrW8gY3JlYWRvIGV4aXRvc2FtZW50ZScsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGBOw7ptZXJvIGRlIGVudsOtbzogJHtuZXdTaGlwbWVudC5zaGlwbWVudF9udW1iZXJ9YCxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgYWwgY3JlYXIgZW52w61vJywge1xuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pXG4gICAgfSxcbiAgfSlcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0s6IHVzZVVwZGF0ZVNoaXBtZW50XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlVXBkYXRlU2hpcG1lbnQoKSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKVxuXG4gIHJldHVybiB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogKHsgaWQsIGRhdGEgfTogeyBpZDogbnVtYmVyOyBkYXRhOiBVcGRhdGVTaGlwbWVudFJlcXVlc3QgfSkgPT5cbiAgICAgIHVwZGF0ZVNoaXBtZW50KGlkLCBkYXRhKSxcbiAgICBvblN1Y2Nlc3M6IHVwZGF0ZWRTaGlwbWVudCA9PiB7XG4gICAgICAvLyBBY3R1YWxpemFyIGNhY2hlIGVzcGVjw61maWNvIGRlbCBzaGlwbWVudFxuICAgICAgcXVlcnlDbGllbnQuc2V0UXVlcnlEYXRhKFxuICAgICAgICBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdzaGlwbWVudCcsIHVwZGF0ZWRTaGlwbWVudC5pZF0sXG4gICAgICAgIHVwZGF0ZWRTaGlwbWVudFxuICAgICAgKVxuXG4gICAgICAvLyBJbnZhbGlkYXIgbGlzdGFzIGRlIHNoaXBtZW50c1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogU0hJUE1FTlRTX1FVRVJZX0tFWSB9KVxuXG4gICAgICAvLyBJbnZhbGlkYXIgZGFzaGJvYXJkIHNpIGNhbWJpw7MgZWwgZXN0YWRvXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KVxuXG4gICAgICB0b2FzdC5zdWNjZXNzKCdFbnbDrW8gYWN0dWFsaXphZG8gZXhpdG9zYW1lbnRlJylcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBhY3R1YWxpemFyIGVudsOtbycsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UsXG4gICAgICB9KVxuICAgIH0sXG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LOiB1c2VEZWxldGVTaGlwbWVudFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURlbGV0ZVNoaXBtZW50KCkge1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KClcblxuICByZXR1cm4gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGRlbGV0ZVNoaXBtZW50LFxuICAgIG9uU3VjY2VzczogKF8sIGRlbGV0ZWRJZCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlciBkZWwgY2FjaGVcbiAgICAgIHF1ZXJ5Q2xpZW50LnJlbW92ZVF1ZXJpZXMoeyBxdWVyeUtleTogWydhZG1pbicsICdsb2dpc3RpY3MnLCAnc2hpcG1lbnQnLCBkZWxldGVkSWRdIH0pXG5cbiAgICAgIC8vIEludmFsaWRhciBsaXN0YXNcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFNISVBNRU5UU19RVUVSWV9LRVkgfSlcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnYWRtaW4nLCAnbG9naXN0aWNzJywgJ2Rhc2hib2FyZCddIH0pXG5cbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0VudsOtbyBlbGltaW5hZG8gZXhpdG9zYW1lbnRlJylcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBlbGltaW5hciBlbnbDrW8nLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfSlcbiAgICB9LFxuICB9KVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlU2hpcG1lbnRGaWx0ZXJzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRGaWx0ZXJzKCkge1xuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTxHZXRTaGlwbWVudHNSZXF1ZXN0Pih7XG4gICAgcGFnZTogMSxcbiAgICBsaW1pdDogMjAsXG4gICAgb3JkZXJfYnk6ICdjcmVhdGVkX2F0JyxcbiAgICBvcmRlcl9kaXJlY3Rpb246ICdkZXNjJyxcbiAgfSlcblxuICBjb25zdCB1cGRhdGVGaWx0ZXIgPSB1c2VDYWxsYmFjaygoa2V5OiBrZXlvZiBHZXRTaGlwbWVudHNSZXF1ZXN0LCB2YWx1ZTogYW55KSA9PiB7XG4gICAgc2V0RmlsdGVycyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2tleV06IHZhbHVlLFxuICAgICAgcGFnZToga2V5ICE9PSAncGFnZScgPyAxIDogdmFsdWUsIC8vIFJlc2V0IHBhZ2Ugd2hlbiBvdGhlciBmaWx0ZXJzIGNoYW5nZVxuICAgIH0pKVxuICB9LCBbXSlcblxuICBjb25zdCByZXNldEZpbHRlcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RmlsdGVycyh7XG4gICAgICBwYWdlOiAxLFxuICAgICAgbGltaXQ6IDIwLFxuICAgICAgb3JkZXJfYnk6ICdjcmVhdGVkX2F0JyxcbiAgICAgIG9yZGVyX2RpcmVjdGlvbjogJ2Rlc2MnLFxuICAgIH0pXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNldFBhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAocGFnZTogbnVtYmVyKSA9PiB7XG4gICAgICB1cGRhdGVGaWx0ZXIoJ3BhZ2UnLCBwYWdlKVxuICAgIH0sXG4gICAgW3VwZGF0ZUZpbHRlcl1cbiAgKVxuXG4gIGNvbnN0IHNldFN0YXR1cyA9IHVzZUNhbGxiYWNrKFxuICAgIChzdGF0dXM6IFNoaXBtZW50U3RhdHVzIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICB1cGRhdGVGaWx0ZXIoJ3N0YXR1cycsIHN0YXR1cylcbiAgICB9LFxuICAgIFt1cGRhdGVGaWx0ZXJdXG4gIClcblxuICBjb25zdCBzZXRTZWFyY2ggPSB1c2VDYWxsYmFjayhcbiAgICAoc2VhcmNoOiBzdHJpbmcpID0+IHtcbiAgICAgIHVwZGF0ZUZpbHRlcignc2VhcmNoJywgc2VhcmNoIHx8IHVuZGVmaW5lZClcbiAgICB9LFxuICAgIFt1cGRhdGVGaWx0ZXJdXG4gIClcblxuICBjb25zdCBzZXREYXRlUmFuZ2UgPSB1c2VDYWxsYmFjaygoZGF0ZUZyb20/OiBzdHJpbmcsIGRhdGVUbz86IHN0cmluZykgPT4ge1xuICAgIHNldEZpbHRlcnMocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGRhdGVfZnJvbTogZGF0ZUZyb20sXG4gICAgICBkYXRlX3RvOiBkYXRlVG8sXG4gICAgICBwYWdlOiAxLFxuICAgIH0pKVxuICB9LCBbXSlcblxuICByZXR1cm4ge1xuICAgIGZpbHRlcnMsXG4gICAgdXBkYXRlRmlsdGVyLFxuICAgIHJlc2V0RmlsdGVycyxcbiAgICBzZXRQYWdlLFxuICAgIHNldFN0YXR1cyxcbiAgICBzZXRTZWFyY2gsXG4gICAgc2V0RGF0ZVJhbmdlLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIT09LOiB1c2VTaGlwbWVudFN0YXRzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRTdGF0cyhzaGlwbWVudHM/OiBTaGlwbWVudFtdKSB7XG4gIHJldHVybiB7XG4gICAgdG90YWw6IHNoaXBtZW50cz8ubGVuZ3RoIHx8IDAsXG4gICAgYnlTdGF0dXM6XG4gICAgICBzaGlwbWVudHM/LnJlZHVjZShcbiAgICAgICAgKGFjYywgc2hpcG1lbnQpID0+IHtcbiAgICAgICAgICBhY2Nbc2hpcG1lbnQuc3RhdHVzXSA9IChhY2Nbc2hpcG1lbnQuc3RhdHVzXSB8fCAwKSArIDFcbiAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sXG4gICAgICAgIHt9IGFzIFJlY29yZDxTaGlwbWVudFN0YXR1cywgbnVtYmVyPlxuICAgICAgKSB8fCB7fSxcbiAgICB0b3RhbENvc3Q6IHNoaXBtZW50cz8ucmVkdWNlKChhY2MsIHNoaXBtZW50KSA9PiBhY2MgKyBzaGlwbWVudC50b3RhbF9jb3N0LCAwKSB8fCAwLFxuICAgIGF2ZXJhZ2VDb3N0OiBzaGlwbWVudHM/Lmxlbmd0aFxuICAgICAgPyBzaGlwbWVudHMucmVkdWNlKChhY2MsIHNoaXBtZW50KSA9PiBhY2MgKyBzaGlwbWVudC50b3RhbF9jb3N0LCAwKSAvIHNoaXBtZW50cy5sZW5ndGhcbiAgICAgIDogMCxcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSzogdXNlQnVsa1NoaXBtZW50T3BlcmF0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJ1bGtTaGlwbWVudE9wZXJhdGlvbnMoKSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKVxuICBjb25zdCBbc2VsZWN0ZWRTaGlwbWVudHMsIHNldFNlbGVjdGVkU2hpcG1lbnRzXSA9IHVzZVN0YXRlPG51bWJlcltdPihbXSlcblxuICBjb25zdCBidWxrVXBkYXRlU3RhdHVzID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jICh7XG4gICAgICBzaGlwbWVudElkcyxcbiAgICAgIHN0YXR1cyxcbiAgICB9OiB7XG4gICAgICBzaGlwbWVudElkczogbnVtYmVyW11cbiAgICAgIHN0YXR1czogU2hpcG1lbnRTdGF0dXNcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IHNoaXBtZW50SWRzLm1hcChpZCA9PiB1cGRhdGVTaGlwbWVudChpZCwgeyBzdGF0dXMgfSkpXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChfLCB7IHNoaXBtZW50SWRzLCBzdGF0dXMgfSkgPT4ge1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogU0hJUE1FTlRTX1FVRVJZX0tFWSB9KVxuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWydhZG1pbicsICdsb2dpc3RpY3MnLCAnZGFzaGJvYXJkJ10gfSlcblxuICAgICAgdG9hc3Quc3VjY2VzcyhgJHtzaGlwbWVudElkcy5sZW5ndGh9IGVudsOtb3MgYWN0dWFsaXphZG9zIGEgJHtzdGF0dXN9YClcbiAgICAgIHNldFNlbGVjdGVkU2hpcG1lbnRzKFtdKVxuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIGVuIG9wZXJhY2nDs24gbWFzaXZhJywge1xuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pXG4gICAgfSxcbiAgfSlcblxuICBjb25zdCBidWxrRGVsZXRlID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChzaGlwbWVudElkczogbnVtYmVyW10pID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gc2hpcG1lbnRJZHMubWFwKGlkID0+IGRlbGV0ZVNoaXBtZW50KGlkKSlcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKF8sIHNoaXBtZW50SWRzKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBTSElQTUVOVFNfUVVFUllfS0VZIH0pXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICdkYXNoYm9hcmQnXSB9KVxuXG4gICAgICB0b2FzdC5zdWNjZXNzKGAke3NoaXBtZW50SWRzLmxlbmd0aH0gZW52w61vcyBlbGltaW5hZG9zYClcbiAgICAgIHNldFNlbGVjdGVkU2hpcG1lbnRzKFtdKVxuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3QuZXJyb3IoJ0Vycm9yIGFsIGVsaW1pbmFyIGVudsOtb3MnLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfSlcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHRvZ2dsZVNlbGVjdGlvbiA9IHVzZUNhbGxiYWNrKChzaGlwbWVudElkOiBudW1iZXIpID0+IHtcbiAgICBzZXRTZWxlY3RlZFNoaXBtZW50cyhwcmV2ID0+XG4gICAgICBwcmV2LmluY2x1ZGVzKHNoaXBtZW50SWQpID8gcHJldi5maWx0ZXIoaWQgPT4gaWQgIT09IHNoaXBtZW50SWQpIDogWy4uLnByZXYsIHNoaXBtZW50SWRdXG4gICAgKVxuICB9LCBbXSlcblxuICBjb25zdCBzZWxlY3RBbGwgPSB1c2VDYWxsYmFjaygoc2hpcG1lbnRJZHM6IG51bWJlcltdKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTaGlwbWVudHMoc2hpcG1lbnRJZHMpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNlbGVjdGVkU2hpcG1lbnRzKFtdKVxuICB9LCBbXSlcblxuICByZXR1cm4ge1xuICAgIHNlbGVjdGVkU2hpcG1lbnRzLFxuICAgIHRvZ2dsZVNlbGVjdGlvbixcbiAgICBzZWxlY3RBbGwsXG4gICAgY2xlYXJTZWxlY3Rpb24sXG4gICAgYnVsa1VwZGF0ZVN0YXR1cyxcbiAgICBidWxrRGVsZXRlLFxuICAgIGlzTG9hZGluZzogYnVsa1VwZGF0ZVN0YXR1cy5pc1BlbmRpbmcgfHwgYnVsa0RlbGV0ZS5pc1BlbmRpbmcsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ1c2VCdWxrU2hpcG1lbnRPcGVyYXRpb25zIiwidXNlQ3JlYXRlU2hpcG1lbnQiLCJ1c2VEZWxldGVTaGlwbWVudCIsInVzZVNoaXBtZW50RmlsdGVycyIsInVzZVNoaXBtZW50U3RhdHMiLCJ1c2VTaGlwbWVudHMiLCJ1c2VVcGRhdGVTaGlwbWVudCIsIlNISVBNRU5UU19RVUVSWV9LRVkiLCJTVEFMRV9USU1FIiwiZmV0Y2hTaGlwbWVudHMiLCJwYXJhbXMiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwiYXBwZW5kIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiRXJyb3IiLCJlcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjcmVhdGVTaGlwbWVudCIsImRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsInVwZGF0ZVNoaXBtZW50IiwiaWQiLCJkZWxldGVTaGlwbWVudCIsInF1ZXJ5Q2xpZW50IiwidXNlUXVlcnlDbGllbnQiLCJxdWVyeUtleSIsImlzTG9hZGluZyIsInJlZmV0Y2giLCJ1c2VRdWVyeSIsInF1ZXJ5Rm4iLCJzdGFsZVRpbWUiLCJyZXRyeSIsInJldHJ5RGVsYXkiLCJhdHRlbXB0SW5kZXgiLCJNYXRoIiwibWluIiwidXNlTXV0YXRpb24iLCJtdXRhdGlvbkZuIiwib25TdWNjZXNzIiwibmV3U2hpcG1lbnQiLCJpbnZhbGlkYXRlUXVlcmllcyIsInRvYXN0Iiwic3VjY2VzcyIsImRlc2NyaXB0aW9uIiwic2hpcG1lbnRfbnVtYmVyIiwib25FcnJvciIsIm1lc3NhZ2UiLCJ1cGRhdGVkU2hpcG1lbnQiLCJzZXRRdWVyeURhdGEiLCJfIiwiZGVsZXRlZElkIiwicmVtb3ZlUXVlcmllcyIsImZpbHRlcnMiLCJzZXRGaWx0ZXJzIiwidXNlU3RhdGUiLCJwYWdlIiwibGltaXQiLCJvcmRlcl9ieSIsIm9yZGVyX2RpcmVjdGlvbiIsInVwZGF0ZUZpbHRlciIsInVzZUNhbGxiYWNrIiwicHJldiIsInJlc2V0RmlsdGVycyIsInNldFBhZ2UiLCJzZXRTdGF0dXMiLCJzZXRTZWFyY2giLCJzZWFyY2giLCJzZXREYXRlUmFuZ2UiLCJkYXRlRnJvbSIsImRhdGVUbyIsImRhdGVfZnJvbSIsImRhdGVfdG8iLCJzaGlwbWVudHMiLCJ0b3RhbCIsImxlbmd0aCIsImJ5U3RhdHVzIiwicmVkdWNlIiwiYWNjIiwic2hpcG1lbnQiLCJ0b3RhbENvc3QiLCJ0b3RhbF9jb3N0IiwiYXZlcmFnZUNvc3QiLCJzZWxlY3RlZFNoaXBtZW50cyIsInNldFNlbGVjdGVkU2hpcG1lbnRzIiwiYnVsa1VwZGF0ZVN0YXR1cyIsInNoaXBtZW50SWRzIiwicHJvbWlzZXMiLCJtYXAiLCJQcm9taXNlIiwiYWxsIiwiYnVsa0RlbGV0ZSIsInRvZ2dsZVNlbGVjdGlvbiIsInNoaXBtZW50SWQiLCJpbmNsdWRlcyIsImZpbHRlciIsInNlbGVjdEFsbCIsImNsZWFyU2VsZWN0aW9uIiwiaXNQZW5kaW5nIl0sIm1hcHBpbmdzIjoiQUFBQSx3REFBd0Q7QUFDeEQsd0NBQXdDO0FBQ3hDLG9EQUFvRDtBQUNwRCx1REFBdUQ7QUFDdkQsd0RBQXdEO0FBRXhEOzs7Ozs7Ozs7Ozs7UUFxVGdCQTtlQUFBQTs7UUFwTEFDO2VBQUFBOztRQTZEQUM7ZUFBQUE7O1FBMkJBQztlQUFBQTs7UUFzRUFDO2VBQUFBOztRQXZMQUM7ZUFBQUE7O1FBcURBQztlQUFBQTs7OzRCQTNKc0M7dUJBQ2hCO3dCQUNoQjtBQVd0Qix3REFBd0Q7QUFDeEQsMkJBQTJCO0FBQzNCLHdEQUF3RDtBQUV4RCxNQUFNQyxzQkFBc0I7SUFBQztJQUFTO0lBQWE7Q0FBWTtBQUMvRCxNQUFNQyxhQUFhLE1BQU0sY0FBYzs7QUFFdkMsd0RBQXdEO0FBQ3hELG1CQUFtQjtBQUNuQix3REFBd0Q7QUFFeEQsZUFBZUMsZUFBZUMsTUFBMkI7SUFDdkQsTUFBTUMsZUFBZSxJQUFJQztJQUV6QkMsT0FBT0MsT0FBTyxDQUFDSixRQUFRSyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQzFDLElBQUlBLFVBQVVDLGFBQWFELFVBQVUsTUFBTTtZQUN6Q04sYUFBYVEsTUFBTSxDQUFDSCxLQUFLQyxNQUFNRyxRQUFRO1FBQ3pDO0lBQ0Y7SUFFQSxNQUFNQyxXQUFXLE1BQU1DLE1BQU0s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