f9a6ec91973e7ad6f71a4afe2c5e9b28
// =====================================================
// HOOK: LOGISTICS WEBSOCKET ENTERPRISE
// Descripción: Hook React para WebSocket tiempo real
// Basado en: React Hooks + WebSocket + Context
// =====================================================
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useLogisticsAlerts () {
        return useLogisticsAlerts;
    },
    get useLogisticsWebSocket () {
        return useLogisticsWebSocket;
    },
    get useShipmentTracking () {
        return useShipmentTracking;
    }
});
const _react = require("react");
const _reactquery = require("@tanstack/react-query");
const _sonner = require("sonner");
const _logisticswebsocket = require("../../lib/websockets/logistics-websocket");
function useLogisticsWebSocket(options = {}) {
    const { enabled = true, autoConnect = true, showNotifications = true, simulateInDevelopment = true } = options;
    // Estados
    const [isConnected, setIsConnected] = (0, _react.useState)(false);
    const [connectionState, setConnectionState] = (0, _react.useState)('disconnected');
    const [lastTrackingUpdate, setLastTrackingUpdate] = (0, _react.useState)(null);
    const [lastAlert, setLastAlert] = (0, _react.useState)(null);
    const [lastGeofenceEvent, setLastGeofenceEvent] = (0, _react.useState)(null);
    const [alerts, setAlerts] = (0, _react.useState)([]);
    // Referencias
    const wsRef = (0, _react.useRef)((0, _logisticswebsocket.getLogisticsWebSocket)());
    const simulatorRef = (0, _react.useRef)(null);
    const queryClient = (0, _reactquery.useQueryClient)();
    // =====================================================
    // CONFIGURACIÓN DE EVENTOS
    // =====================================================
    (0, _react.useEffect)(()=>{
        if (!enabled) {
            return;
        }
        const ws = wsRef.current;
        // Eventos de conexión
        const handleConnected = ()=>{
            setIsConnected(true);
            setConnectionState('connected');
            if (showNotifications) {
                _sonner.toast.success('Conectado al sistema de tracking en tiempo real');
            }
        };
        const handleDisconnected = ()=>{
            setIsConnected(false);
            setConnectionState('disconnected');
            if (showNotifications) {
                _sonner.toast.warning('Desconectado del sistema de tracking');
            }
        };
        const handleError = (error)=>{
            setConnectionState('error');
            console.error('WebSocket error:', error);
            if (showNotifications) {
                _sonner.toast.error('Error en la conexión de tiempo real');
            }
        };
        // Eventos de datos
        const handleTrackingUpdate = (update)=>{
            setLastTrackingUpdate(update);
            // Invalidar cache de tracking para el shipment
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'tracking',
                    update.shipment_id
                ]
            });
            // Invalidar dashboard si es necesario
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'dashboard'
                ]
            });
            if (showNotifications) {
                _sonner.toast.info(`Actualización de envío #${update.shipment_id}`, {
                    description: `Estado: ${update.status}`
                });
            }
        };
        const handleAlert = (alert)=>{
            setLastAlert(alert);
            setAlerts((prev)=>[
                    alert,
                    ...prev.slice(0, 49)
                ]); // Mantener últimas 50
            if (showNotifications) {
                const toastFn = alert.severity === 'critical' ? _sonner.toast.error : alert.severity === 'high' ? _sonner.toast.warning : _sonner.toast.info;
                toastFn(`Alerta: ${alert.type}`, {
                    description: alert.message
                });
            }
        };
        const handleGeofenceEvent = (event)=>{
            setLastGeofenceEvent(event);
            // Invalidar cache relacionado
            queryClient.invalidateQueries({
                queryKey: [
                    'admin',
                    'logistics',
                    'tracking',
                    event.shipment_id
                ]
            });
            if (showNotifications) {
                _sonner.toast.info(`Evento de zona: ${event.zone_name}`, {
                    description: `Envío #${event.shipment_id} ${event.event_type === 'enter' ? 'entró' : 'salió'}`
                });
            }
        };
        // Registrar eventos
        ws.on('connected', handleConnected);
        ws.on('disconnected', handleDisconnected);
        ws.on('error', handleError);
        ws.on('tracking_update', handleTrackingUpdate);
        ws.on('alert', handleAlert);
        ws.on('geofence_event', handleGeofenceEvent);
        // Cleanup
        return ()=>{
            ws.off('connected', handleConnected);
            ws.off('disconnected', handleDisconnected);
            ws.off('error', handleError);
            ws.off('tracking_update', handleTrackingUpdate);
            ws.off('alert', handleAlert);
            ws.off('geofence_event', handleGeofenceEvent);
        };
    }, [
        enabled,
        showNotifications,
        queryClient
    ]);
    // =====================================================
    // SIMULADOR PARA DESARROLLO
    // =====================================================
    (0, _react.useEffect)(()=>{
        if (!enabled || !simulateInDevelopment || process.env.NODE_ENV !== 'development') {
            return;
        }
        // Crear simulador si no existe
        if (!simulatorRef.current) {
            simulatorRef.current = new _logisticswebsocket.LogisticsWebSocketSimulator();
            // Conectar eventos del simulador a los handlers
            simulatorRef.current.on('tracking_update', (update)=>{
                setLastTrackingUpdate(update);
                queryClient.invalidateQueries({
                    queryKey: [
                        'admin',
                        'logistics',
                        'tracking',
                        update.shipment_id
                    ]
                });
            });
            simulatorRef.current.on('alert', (alert)=>{
                setLastAlert(alert);
                setAlerts((prev)=>[
                        alert,
                        ...prev.slice(0, 49)
                    ]);
                if (showNotifications) {
                    _sonner.toast.info(`🎭 Simulación - ${alert.type}`, {
                        description: alert.message
                    });
                }
            });
            simulatorRef.current.on('geofence_event', (event)=>{
                setLastGeofenceEvent(event);
                queryClient.invalidateQueries({
                    queryKey: [
                        'admin',
                        'logistics',
                        'tracking',
                        event.shipment_id
                    ]
                });
            });
        }
        // Iniciar simulador
        simulatorRef.current.start();
        setIsConnected(true);
        setConnectionState('connected');
        if (showNotifications) {
            _sonner.toast.success('🎭 Simulador de WebSocket iniciado');
        }
        return ()=>{
            if (simulatorRef.current) {
                simulatorRef.current.stop();
            }
        };
    }, [
        enabled,
        simulateInDevelopment,
        showNotifications,
        queryClient
    ]);
    // =====================================================
    // AUTO-CONEXIÓN
    // =====================================================
    (0, _react.useEffect)(()=>{
        if (enabled && autoConnect && process.env.NODE_ENV !== 'development') {
            connect();
        }
    }, [
        enabled,
        autoConnect
    ]);
    // =====================================================
    // FUNCIONES PÚBLICAS
    // =====================================================
    const connect = (0, _react.useCallback)(async ()=>{
        if (process.env.NODE_ENV === 'development' && simulateInDevelopment) {
            // En desarrollo usar simulador
            return;
        }
        try {
            setConnectionState('connecting');
            await wsRef.current.connect();
        } catch (error) {
            setConnectionState('error');
            throw error;
        }
    }, [
        simulateInDevelopment
    ]);
    const disconnect = (0, _react.useCallback)(()=>{
        if (process.env.NODE_ENV === 'development' && simulatorRef.current) {
            simulatorRef.current.stop();
            setIsConnected(false);
            setConnectionState('disconnected');
            return;
        }
        wsRef.current.disconnect();
        setIsConnected(false);
        setConnectionState('disconnected');
    }, []);
    const subscribeToShipment = (0, _react.useCallback)((shipmentId)=>{
        if (process.env.NODE_ENV === 'development') {
            console.log(`🎭 Simulando suscripción a envío ${shipmentId}`);
            return;
        }
        wsRef.current.subscribeToShipment(shipmentId);
    }, []);
    const unsubscribeFromShipment = (0, _react.useCallback)((shipmentId)=>{
        if (process.env.NODE_ENV === 'development') {
            console.log(`🎭 Simulando desuscripción de envío ${shipmentId}`);
            return;
        }
        wsRef.current.unsubscribeFromShipment(shipmentId);
    }, []);
    const subscribeToGeofence = (0, _react.useCallback)((zoneId)=>{
        if (process.env.NODE_ENV === 'development') {
            console.log(`🎭 Simulando suscripción a zona ${zoneId}`);
            return;
        }
        wsRef.current.subscribeToGeofence(zoneId);
    }, []);
    const subscribeToAlerts = (0, _react.useCallback)(()=>{
        if (process.env.NODE_ENV === 'development') {
            console.log('🎭 Simulando suscripción a alertas');
            return;
        }
        wsRef.current.subscribeToAlerts();
    }, []);
    const clearAlerts = (0, _react.useCallback)(()=>{
        setAlerts([]);
    }, []);
    return {
        isConnected,
        connectionState,
        connect,
        disconnect,
        subscribeToShipment,
        unsubscribeFromShipment,
        subscribeToGeofence,
        subscribeToAlerts,
        lastTrackingUpdate,
        lastAlert,
        lastGeofenceEvent,
        alerts,
        clearAlerts
    };
}
function useShipmentTracking(shipmentId) {
    const { isConnected, subscribeToShipment, unsubscribeFromShipment, lastTrackingUpdate } = useLogisticsWebSocket({
        simulateInDevelopment: false // Deshabilitado para evitar notificaciones persistentes
    });
    const [trackingHistory, setTrackingHistory] = (0, _react.useState)([]);
    // Suscribirse al envío específico
    (0, _react.useEffect)(()=>{
        if (isConnected && shipmentId) {
            subscribeToShipment(shipmentId);
            return ()=>{
                unsubscribeFromShipment(shipmentId);
            };
        }
    }, [
        isConnected,
        shipmentId,
        subscribeToShipment,
        unsubscribeFromShipment
    ]);
    // Actualizar historial cuando llegan nuevas actualizaciones
    (0, _react.useEffect)(()=>{
        if (lastTrackingUpdate && lastTrackingUpdate.shipment_id === shipmentId) {
            setTrackingHistory((prev)=>[
                    lastTrackingUpdate,
                    ...prev.slice(0, 99)
                ]); // Últimas 100
        }
    }, [
        lastTrackingUpdate,
        shipmentId
    ]);
    return {
        isConnected,
        shipmentId,
        currentLocation: lastTrackingUpdate?.shipment_id === shipmentId ? lastTrackingUpdate : null,
        trackingHistory: trackingHistory.filter((update)=>update.shipment_id === shipmentId)
    };
}
function useLogisticsAlerts() {
    const { isConnected, subscribeToAlerts, alerts, clearAlerts, lastAlert } = useLogisticsWebSocket({
        simulateInDevelopment: false // Deshabilitado para evitar notificaciones persistentes
    });
    // Auto-suscribirse a alertas
    (0, _react.useEffect)(()=>{
        if (isConnected) {
            subscribeToAlerts();
        }
    }, [
        isConnected,
        subscribeToAlerts
    ]);
    // Filtrar alertas por severidad
    const criticalAlerts = alerts.filter((alert)=>alert.severity === 'critical');
    const highAlerts = alerts.filter((alert)=>alert.severity === 'high');
    const unreadAlerts = alerts.filter((alert)=>!alert.auto_resolve);
    return {
        isConnected,
        alerts,
        criticalAlerts,
        highAlerts,
        unreadAlerts,
        lastAlert,
        clearAlerts,
        totalAlerts: alerts.length,
        criticalCount: criticalAlerts.length,
        highCount: highAlerts.length,
        unreadCount: unreadAlerts.length
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VMb2dpc3RpY3NXZWJTb2NrZXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSE9PSzogTE9HSVNUSUNTIFdFQlNPQ0tFVCBFTlRFUlBSSVNFXHJcbi8vIERlc2NyaXBjacOzbjogSG9vayBSZWFjdCBwYXJhIFdlYlNvY2tldCB0aWVtcG8gcmVhbFxyXG4vLyBCYXNhZG8gZW46IFJlYWN0IEhvb2tzICsgV2ViU29ja2V0ICsgQ29udGV4dFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xyXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcic7XHJcbmltcG9ydCB7IFxyXG4gIGdldExvZ2lzdGljc1dlYlNvY2tldCwgXHJcbiAgTG9naXN0aWNzV2ViU29ja2V0U2ltdWxhdG9yLFxyXG4gIFRyYWNraW5nVXBkYXRlLFxyXG4gIEdlb2ZlbmNlRXZlbnQsXHJcbiAgTG9naXN0aWNzQWxlcnQgXHJcbn0gZnJvbSAnQC9saWIvd2Vic29ja2V0cy9sb2dpc3RpY3Mtd2Vic29ja2V0JztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIElOVEVSRkFDRVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlTG9naXN0aWNzV2ViU29ja2V0T3B0aW9ucyB7XHJcbiAgZW5hYmxlZD86IGJvb2xlYW47XHJcbiAgYXV0b0Nvbm5lY3Q/OiBib29sZWFuO1xyXG4gIHNob3dOb3RpZmljYXRpb25zPzogYm9vbGVhbjtcclxuICBzaW11bGF0ZUluRGV2ZWxvcG1lbnQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZUxvZ2lzdGljc1dlYlNvY2tldFJldHVybiB7XHJcbiAgaXNDb25uZWN0ZWQ6IGJvb2xlYW47XHJcbiAgY29ubmVjdGlvblN0YXRlOiAnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdkaXNjb25uZWN0ZWQnIHwgJ2Vycm9yJztcclxuICBjb25uZWN0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGRpc2Nvbm5lY3Q6ICgpID0+IHZvaWQ7XHJcbiAgc3Vic2NyaWJlVG9TaGlwbWVudDogKHNoaXBtZW50SWQ6IG51bWJlcikgPT4gdm9pZDtcclxuICB1bnN1YnNjcmliZUZyb21TaGlwbWVudDogKHNoaXBtZW50SWQ6IG51bWJlcikgPT4gdm9pZDtcclxuICBzdWJzY3JpYmVUb0dlb2ZlbmNlOiAoem9uZUlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgc3Vic2NyaWJlVG9BbGVydHM6ICgpID0+IHZvaWQ7XHJcbiAgbGFzdFRyYWNraW5nVXBkYXRlOiBUcmFja2luZ1VwZGF0ZSB8IG51bGw7XHJcbiAgbGFzdEFsZXJ0OiBMb2dpc3RpY3NBbGVydCB8IG51bGw7XHJcbiAgbGFzdEdlb2ZlbmNlRXZlbnQ6IEdlb2ZlbmNlRXZlbnQgfCBudWxsO1xyXG4gIGFsZXJ0czogTG9naXN0aWNzQWxlcnRbXTtcclxuICBjbGVhckFsZXJ0czogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSE9PSyBQUklOQ0lQQUxcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2dpc3RpY3NXZWJTb2NrZXQoXHJcbiAgb3B0aW9uczogVXNlTG9naXN0aWNzV2ViU29ja2V0T3B0aW9ucyA9IHt9XHJcbik6IFVzZUxvZ2lzdGljc1dlYlNvY2tldFJldHVybiB7XHJcbiAgXHJcbiAgY29uc3Qge1xyXG4gICAgZW5hYmxlZCA9IHRydWUsXHJcbiAgICBhdXRvQ29ubmVjdCA9IHRydWUsXHJcbiAgICBzaG93Tm90aWZpY2F0aW9ucyA9IHRydWUsXHJcbiAgICBzaW11bGF0ZUluRGV2ZWxvcG1lbnQgPSB0cnVlXHJcbiAgfSA9IG9wdGlvbnM7XHJcbiAgXHJcbiAgLy8gRXN0YWRvc1xyXG4gIGNvbnN0IFtpc0Nvbm5lY3RlZCwgc2V0SXNDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtjb25uZWN0aW9uU3RhdGUsIHNldENvbm5lY3Rpb25TdGF0ZV0gPSB1c2VTdGF0ZTwnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdkaXNjb25uZWN0ZWQnIHwgJ2Vycm9yJz4oJ2Rpc2Nvbm5lY3RlZCcpO1xyXG4gIGNvbnN0IFtsYXN0VHJhY2tpbmdVcGRhdGUsIHNldExhc3RUcmFja2luZ1VwZGF0ZV0gPSB1c2VTdGF0ZTxUcmFja2luZ1VwZGF0ZSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtsYXN0QWxlcnQsIHNldExhc3RBbGVydF0gPSB1c2VTdGF0ZTxMb2dpc3RpY3NBbGVydCB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtsYXN0R2VvZmVuY2VFdmVudCwgc2V0TGFzdEdlb2ZlbmNlRXZlbnRdID0gdXNlU3RhdGU8R2VvZmVuY2VFdmVudCB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFthbGVydHMsIHNldEFsZXJ0c10gPSB1c2VTdGF0ZTxMb2dpc3RpY3NBbGVydFtdPihbXSk7XHJcbiAgXHJcbiAgLy8gUmVmZXJlbmNpYXNcclxuICBjb25zdCB3c1JlZiA9IHVzZVJlZihnZXRMb2dpc3RpY3NXZWJTb2NrZXQoKSk7XHJcbiAgY29uc3Qgc2ltdWxhdG9yUmVmID0gdXNlUmVmPExvZ2lzdGljc1dlYlNvY2tldFNpbXVsYXRvciB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcclxuICBcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIENPTkZJR1VSQUNJw5NOIERFIEVWRU5UT1NcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWVuYWJsZWQpIHtyZXR1cm47fVxyXG4gICAgXHJcbiAgICBjb25zdCB3cyA9IHdzUmVmLmN1cnJlbnQ7XHJcbiAgICBcclxuICAgIC8vIEV2ZW50b3MgZGUgY29uZXhpw7NuXHJcbiAgICBjb25zdCBoYW5kbGVDb25uZWN0ZWQgPSAoKSA9PiB7XHJcbiAgICAgIHNldElzQ29ubmVjdGVkKHRydWUpO1xyXG4gICAgICBzZXRDb25uZWN0aW9uU3RhdGUoJ2Nvbm5lY3RlZCcpO1xyXG4gICAgICBpZiAoc2hvd05vdGlmaWNhdGlvbnMpIHtcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKCdDb25lY3RhZG8gYWwgc2lzdGVtYSBkZSB0cmFja2luZyBlbiB0aWVtcG8gcmVhbCcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zdCBoYW5kbGVEaXNjb25uZWN0ZWQgPSAoKSA9PiB7XHJcbiAgICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcclxuICAgICAgc2V0Q29ubmVjdGlvblN0YXRlKCdkaXNjb25uZWN0ZWQnKTtcclxuICAgICAgaWYgKHNob3dOb3RpZmljYXRpb25zKSB7XHJcbiAgICAgICAgdG9hc3Qud2FybmluZygnRGVzY29uZWN0YWRvIGRlbCBzaXN0ZW1hIGRlIHRyYWNraW5nJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgc2V0Q29ubmVjdGlvblN0YXRlKCdlcnJvcicpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICBpZiAoc2hvd05vdGlmaWNhdGlvbnMpIHtcclxuICAgICAgICB0b2FzdC5lcnJvcignRXJyb3IgZW4gbGEgY29uZXhpw7NuIGRlIHRpZW1wbyByZWFsJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIEV2ZW50b3MgZGUgZGF0b3NcclxuICAgIGNvbnN0IGhhbmRsZVRyYWNraW5nVXBkYXRlID0gKHVwZGF0ZTogVHJhY2tpbmdVcGRhdGUpID0+IHtcclxuICAgICAgc2V0TGFzdFRyYWNraW5nVXBkYXRlKHVwZGF0ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbnZhbGlkYXIgY2FjaGUgZGUgdHJhY2tpbmcgcGFyYSBlbCBzaGlwbWVudFxyXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IFxyXG4gICAgICAgIHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICd0cmFja2luZycsIHVwZGF0ZS5zaGlwbWVudF9pZF0gXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gSW52YWxpZGFyIGRhc2hib2FyZCBzaSBlcyBuZWNlc2FyaW9cclxuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBcclxuICAgICAgICBxdWVyeUtleTogWydhZG1pbicsICdsb2dpc3RpY3MnLCAnZGFzaGJvYXJkJ10gXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNob3dOb3RpZmljYXRpb25zKSB7XHJcbiAgICAgICAgdG9hc3QuaW5mbyhgQWN0dWFsaXphY2nDs24gZGUgZW52w61vICMke3VwZGF0ZS5zaGlwbWVudF9pZH1gLCB7XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEVzdGFkbzogJHt1cGRhdGUuc3RhdHVzfWBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgaGFuZGxlQWxlcnQgPSAoYWxlcnQ6IExvZ2lzdGljc0FsZXJ0KSA9PiB7XHJcbiAgICAgIHNldExhc3RBbGVydChhbGVydCk7XHJcbiAgICAgIHNldEFsZXJ0cyhwcmV2ID0+IFthbGVydCwgLi4ucHJldi5zbGljZSgwLCA0OSldKTsgLy8gTWFudGVuZXIgw7psdGltYXMgNTBcclxuICAgICAgXHJcbiAgICAgIGlmIChzaG93Tm90aWZpY2F0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHRvYXN0Rm4gPSBhbGVydC5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJyA/IHRvYXN0LmVycm9yIDpcclxuICAgICAgICAgICAgICAgICAgICAgICBhbGVydC5zZXZlcml0eSA9PT0gJ2hpZ2gnID8gdG9hc3Qud2FybmluZyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9hc3QuaW5mbztcclxuICAgICAgICBcclxuICAgICAgICB0b2FzdEZuKGBBbGVydGE6ICR7YWxlcnQudHlwZX1gLCB7XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYWxlcnQubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zdCBoYW5kbGVHZW9mZW5jZUV2ZW50ID0gKGV2ZW50OiBHZW9mZW5jZUV2ZW50KSA9PiB7XHJcbiAgICAgIHNldExhc3RHZW9mZW5jZUV2ZW50KGV2ZW50KTtcclxuICAgICAgXHJcbiAgICAgIC8vIEludmFsaWRhciBjYWNoZSByZWxhY2lvbmFkb1xyXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IFxyXG4gICAgICAgIHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICd0cmFja2luZycsIGV2ZW50LnNoaXBtZW50X2lkXSBcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc2hvd05vdGlmaWNhdGlvbnMpIHtcclxuICAgICAgICB0b2FzdC5pbmZvKGBFdmVudG8gZGUgem9uYTogJHtldmVudC56b25lX25hbWV9YCwge1xyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBFbnbDrW8gIyR7ZXZlbnQuc2hpcG1lbnRfaWR9ICR7ZXZlbnQuZXZlbnRfdHlwZSA9PT0gJ2VudGVyJyA/ICdlbnRyw7MnIDogJ3NhbGnDsyd9YFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBSZWdpc3RyYXIgZXZlbnRvc1xyXG4gICAgd3Mub24oJ2Nvbm5lY3RlZCcsIGhhbmRsZUNvbm5lY3RlZCk7XHJcbiAgICB3cy5vbignZGlzY29ubmVjdGVkJywgaGFuZGxlRGlzY29ubmVjdGVkKTtcclxuICAgIHdzLm9uKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcclxuICAgIHdzLm9uKCd0cmFja2luZ191cGRhdGUnLCBoYW5kbGVUcmFja2luZ1VwZGF0ZSk7XHJcbiAgICB3cy5vbignYWxlcnQnLCBoYW5kbGVBbGVydCk7XHJcbiAgICB3cy5vbignZ2VvZmVuY2VfZXZlbnQnLCBoYW5kbGVHZW9mZW5jZUV2ZW50KTtcclxuICAgIFxyXG4gICAgLy8gQ2xlYW51cFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd3Mub2ZmKCdjb25uZWN0ZWQnLCBoYW5kbGVDb25uZWN0ZWQpO1xyXG4gICAgICB3cy5vZmYoJ2Rpc2Nvbm5lY3RlZCcsIGhhbmRsZURpc2Nvbm5lY3RlZCk7XHJcbiAgICAgIHdzLm9mZignZXJyb3InLCBoYW5kbGVFcnJvcik7XHJcbiAgICAgIHdzLm9mZigndHJhY2tpbmdfdXBkYXRlJywgaGFuZGxlVHJhY2tpbmdVcGRhdGUpO1xyXG4gICAgICB3cy5vZmYoJ2FsZXJ0JywgaGFuZGxlQWxlcnQpO1xyXG4gICAgICB3cy5vZmYoJ2dlb2ZlbmNlX2V2ZW50JywgaGFuZGxlR2VvZmVuY2VFdmVudCk7XHJcbiAgICB9O1xyXG4gIH0sIFtlbmFibGVkLCBzaG93Tm90aWZpY2F0aW9ucywgcXVlcnlDbGllbnRdKTtcclxuICBcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFNJTVVMQURPUiBQQVJBIERFU0FSUk9MTE9cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWVuYWJsZWQgfHwgIXNpbXVsYXRlSW5EZXZlbG9wbWVudCB8fCBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENyZWFyIHNpbXVsYWRvciBzaSBubyBleGlzdGVcclxuICAgIGlmICghc2ltdWxhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgc2ltdWxhdG9yUmVmLmN1cnJlbnQgPSBuZXcgTG9naXN0aWNzV2ViU29ja2V0U2ltdWxhdG9yKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDb25lY3RhciBldmVudG9zIGRlbCBzaW11bGFkb3IgYSBsb3MgaGFuZGxlcnNcclxuICAgICAgc2ltdWxhdG9yUmVmLmN1cnJlbnQub24oJ3RyYWNraW5nX3VwZGF0ZScsICh1cGRhdGU6IFRyYWNraW5nVXBkYXRlKSA9PiB7XHJcbiAgICAgICAgc2V0TGFzdFRyYWNraW5nVXBkYXRlKHVwZGF0ZSk7XHJcbiAgICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBcclxuICAgICAgICAgIHF1ZXJ5S2V5OiBbJ2FkbWluJywgJ2xvZ2lzdGljcycsICd0cmFja2luZycsIHVwZGF0ZS5zaGlwbWVudF9pZF0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgc2ltdWxhdG9yUmVmLmN1cnJlbnQub24oJ2FsZXJ0JywgKGFsZXJ0OiBMb2dpc3RpY3NBbGVydCkgPT4ge1xyXG4gICAgICAgIHNldExhc3RBbGVydChhbGVydCk7XHJcbiAgICAgICAgc2V0QWxlcnRzKHByZXYgPT4gW2FsZXJ0LCAuLi5wcmV2LnNsaWNlKDAsIDQ5KV0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzaG93Tm90aWZpY2F0aW9ucykge1xyXG4gICAgICAgICAgdG9hc3QuaW5mbyhg8J+OrSBTaW11bGFjacOzbiAtICR7YWxlcnQudHlwZX1gLCB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhbGVydC5tZXNzYWdlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgc2ltdWxhdG9yUmVmLmN1cnJlbnQub24oJ2dlb2ZlbmNlX2V2ZW50JywgKGV2ZW50OiBHZW9mZW5jZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgc2V0TGFzdEdlb2ZlbmNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgXHJcbiAgICAgICAgICBxdWVyeUtleTogWydhZG1pbicsICdsb2dpc3RpY3MnLCAndHJhY2tpbmcnLCBldmVudC5zaGlwbWVudF9pZF0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBJbmljaWFyIHNpbXVsYWRvclxyXG4gICAgc2ltdWxhdG9yUmVmLmN1cnJlbnQuc3RhcnQoKTtcclxuICAgIHNldElzQ29ubmVjdGVkKHRydWUpO1xyXG4gICAgc2V0Q29ubmVjdGlvblN0YXRlKCdjb25uZWN0ZWQnKTtcclxuICAgIFxyXG4gICAgaWYgKHNob3dOb3RpZmljYXRpb25zKSB7XHJcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ/Cfjq0gU2ltdWxhZG9yIGRlIFdlYlNvY2tldCBpbmljaWFkbycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAoc2ltdWxhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBzaW11bGF0b3JSZWYuY3VycmVudC5zdG9wKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW2VuYWJsZWQsIHNpbXVsYXRlSW5EZXZlbG9wbWVudCwgc2hvd05vdGlmaWNhdGlvbnMsIHF1ZXJ5Q2xpZW50XSk7XHJcbiAgXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBBVVRPLUNPTkVYScOTTlxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChlbmFibGVkICYmIGF1dG9Db25uZWN0ICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbm5lY3QoKTtcclxuICAgIH1cclxuICB9LCBbZW5hYmxlZCwgYXV0b0Nvbm5lY3RdKTtcclxuICBcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIEZVTkNJT05FUyBQw5pCTElDQVNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIFxyXG4gIGNvbnN0IGNvbm5lY3QgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgc2ltdWxhdGVJbkRldmVsb3BtZW50KSB7XHJcbiAgICAgIC8vIEVuIGRlc2Fycm9sbG8gdXNhciBzaW11bGFkb3JcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRDb25uZWN0aW9uU3RhdGUoJ2Nvbm5lY3RpbmcnKTtcclxuICAgICAgYXdhaXQgd3NSZWYuY3VycmVudC5jb25uZWN0KCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBzZXRDb25uZWN0aW9uU3RhdGUoJ2Vycm9yJyk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH0sIFtzaW11bGF0ZUluRGV2ZWxvcG1lbnRdKTtcclxuICBcclxuICBjb25zdCBkaXNjb25uZWN0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHNpbXVsYXRvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHNpbXVsYXRvclJlZi5jdXJyZW50LnN0b3AoKTtcclxuICAgICAgc2V0SXNDb25uZWN0ZWQoZmFsc2UpO1xyXG4gICAgICBzZXRDb25uZWN0aW9uU3RhdGUoJ2Rpc2Nvbm5lY3RlZCcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdzUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpO1xyXG4gICAgc2V0SXNDb25uZWN0ZWQoZmFsc2UpO1xyXG4gICAgc2V0Q29ubmVjdGlvblN0YXRlKCdkaXNjb25uZWN0ZWQnKTtcclxuICB9LCBbXSk7XHJcbiAgXHJcbiAgY29uc3Qgc3Vic2NyaWJlVG9TaGlwbWVudCA9IHVzZUNhbGxiYWNrKChzaGlwbWVudElkOiBudW1iZXIpID0+IHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+OrSBTaW11bGFuZG8gc3VzY3JpcGNpw7NuIGEgZW52w61vICR7c2hpcG1lbnRJZH1gKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3c1JlZi5jdXJyZW50LnN1YnNjcmliZVRvU2hpcG1lbnQoc2hpcG1lbnRJZCk7XHJcbiAgfSwgW10pO1xyXG4gIFxyXG4gIGNvbnN0IHVuc3Vic2NyaWJlRnJvbVNoaXBtZW50ID0gdXNlQ2FsbGJhY2soKHNoaXBtZW50SWQ6IG51bWJlcikgPT4ge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn46tIFNpbXVsYW5kbyBkZXN1c2NyaXBjacOzbiBkZSBlbnbDrW8gJHtzaGlwbWVudElkfWApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdzUmVmLmN1cnJlbnQudW5zdWJzY3JpYmVGcm9tU2hpcG1lbnQoc2hpcG1lbnRJZCk7XHJcbiAgfSwgW10pO1xyXG4gIFxyXG4gIGNvbnN0IHN1YnNjcmliZVRvR2VvZmVuY2UgPSB1c2VDYWxsYmFjaygoem9uZUlkOiBzdHJpbmcpID0+IHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+OrSBTaW11bGFuZG8gc3VzY3JpcGNpw7NuIGEgem9uYSAke3pvbmVJZH1gKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3c1JlZi5jdXJyZW50LnN1YnNjcmliZVRvR2VvZmVuY2Uoem9uZUlkKTtcclxuICB9LCBbXSk7XHJcbiAgXHJcbiAgY29uc3Qgc3Vic2NyaWJlVG9BbGVydHMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfjq0gU2ltdWxhbmRvIHN1c2NyaXBjacOzbiBhIGFsZXJ0YXMnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3c1JlZi5jdXJyZW50LnN1YnNjcmliZVRvQWxlcnRzKCk7XHJcbiAgfSwgW10pO1xyXG4gIFxyXG4gIGNvbnN0IGNsZWFyQWxlcnRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgc2V0QWxlcnRzKFtdKTtcclxuICB9LCBbXSk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzQ29ubmVjdGVkLFxyXG4gICAgY29ubmVjdGlvblN0YXRlLFxyXG4gICAgY29ubmVjdCxcclxuICAgIGRpc2Nvbm5lY3QsXHJcbiAgICBzdWJzY3JpYmVUb1NoaXBtZW50LFxyXG4gICAgdW5zdWJzY3JpYmVGcm9tU2hpcG1lbnQsXHJcbiAgICBzdWJzY3JpYmVUb0dlb2ZlbmNlLFxyXG4gICAgc3Vic2NyaWJlVG9BbGVydHMsXHJcbiAgICBsYXN0VHJhY2tpbmdVcGRhdGUsXHJcbiAgICBsYXN0QWxlcnQsXHJcbiAgICBsYXN0R2VvZmVuY2VFdmVudCxcclxuICAgIGFsZXJ0cyxcclxuICAgIGNsZWFyQWxlcnRzXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSE9PSyBQQVJBIFRSQUNLSU5HIEVTUEVDw41GSUNPXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlU2hpcG1lbnRUcmFja2luZyhzaGlwbWVudElkOiBudW1iZXIpIHtcclxuICBjb25zdCB7XHJcbiAgICBpc0Nvbm5lY3RlZCxcclxuICAgIHN1YnNjcmliZVRvU2hpcG1lbnQsXHJcbiAgICB1bnN1YnNjcmliZUZyb21TaGlwbWVudCxcclxuICAgIGxhc3RUcmFja2luZ1VwZGF0ZVxyXG4gIH0gPSB1c2VMb2dpc3RpY3NXZWJTb2NrZXQoe1xyXG4gICAgc2ltdWxhdGVJbkRldmVsb3BtZW50OiBmYWxzZSAvLyBEZXNoYWJpbGl0YWRvIHBhcmEgZXZpdGFyIG5vdGlmaWNhY2lvbmVzIHBlcnNpc3RlbnRlc1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IFt0cmFja2luZ0hpc3RvcnksIHNldFRyYWNraW5nSGlzdG9yeV0gPSB1c2VTdGF0ZTxUcmFja2luZ1VwZGF0ZVtdPihbXSk7XHJcbiAgXHJcbiAgLy8gU3VzY3JpYmlyc2UgYWwgZW52w61vIGVzcGVjw61maWNvXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChpc0Nvbm5lY3RlZCAmJiBzaGlwbWVudElkKSB7XHJcbiAgICAgIHN1YnNjcmliZVRvU2hpcG1lbnQoc2hpcG1lbnRJZCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHVuc3Vic2NyaWJlRnJvbVNoaXBtZW50KHNoaXBtZW50SWQpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sIFtpc0Nvbm5lY3RlZCwgc2hpcG1lbnRJZCwgc3Vic2NyaWJlVG9TaGlwbWVudCwgdW5zdWJzY3JpYmVGcm9tU2hpcG1lbnRdKTtcclxuICBcclxuICAvLyBBY3R1YWxpemFyIGhpc3RvcmlhbCBjdWFuZG8gbGxlZ2FuIG51ZXZhcyBhY3R1YWxpemFjaW9uZXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGxhc3RUcmFja2luZ1VwZGF0ZSAmJiBsYXN0VHJhY2tpbmdVcGRhdGUuc2hpcG1lbnRfaWQgPT09IHNoaXBtZW50SWQpIHtcclxuICAgICAgc2V0VHJhY2tpbmdIaXN0b3J5KHByZXYgPT4gW2xhc3RUcmFja2luZ1VwZGF0ZSwgLi4ucHJldi5zbGljZSgwLCA5OSldKTsgLy8gw5psdGltYXMgMTAwXHJcbiAgICB9XHJcbiAgfSwgW2xhc3RUcmFja2luZ1VwZGF0ZSwgc2hpcG1lbnRJZF0pO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBpc0Nvbm5lY3RlZCxcclxuICAgIHNoaXBtZW50SWQsXHJcbiAgICBjdXJyZW50TG9jYXRpb246IGxhc3RUcmFja2luZ1VwZGF0ZT8uc2hpcG1lbnRfaWQgPT09IHNoaXBtZW50SWQgPyBsYXN0VHJhY2tpbmdVcGRhdGUgOiBudWxsLFxyXG4gICAgdHJhY2tpbmdIaXN0b3J5OiB0cmFja2luZ0hpc3RvcnkuZmlsdGVyKHVwZGF0ZSA9PiB1cGRhdGUuc2hpcG1lbnRfaWQgPT09IHNoaXBtZW50SWQpXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSE9PSyBQQVJBIEFMRVJUQVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2dpc3RpY3NBbGVydHMoKSB7XHJcbiAgY29uc3Qge1xyXG4gICAgaXNDb25uZWN0ZWQsXHJcbiAgICBzdWJzY3JpYmVUb0FsZXJ0cyxcclxuICAgIGFsZXJ0cyxcclxuICAgIGNsZWFyQWxlcnRzLFxyXG4gICAgbGFzdEFsZXJ0XHJcbiAgfSA9IHVzZUxvZ2lzdGljc1dlYlNvY2tldCh7XHJcbiAgICBzaW11bGF0ZUluRGV2ZWxvcG1lbnQ6IGZhbHNlIC8vIERlc2hhYmlsaXRhZG8gcGFyYSBldml0YXIgbm90aWZpY2FjaW9uZXMgcGVyc2lzdGVudGVzXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gQXV0by1zdXNjcmliaXJzZSBhIGFsZXJ0YXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzQ29ubmVjdGVkKSB7XHJcbiAgICAgIHN1YnNjcmliZVRvQWxlcnRzKCk7XHJcbiAgICB9XHJcbiAgfSwgW2lzQ29ubmVjdGVkLCBzdWJzY3JpYmVUb0FsZXJ0c10pO1xyXG4gIFxyXG4gIC8vIEZpbHRyYXIgYWxlcnRhcyBwb3Igc2V2ZXJpZGFkXHJcbiAgY29uc3QgY3JpdGljYWxBbGVydHMgPSBhbGVydHMuZmlsdGVyKGFsZXJ0ID0+IGFsZXJ0LnNldmVyaXR5ID09PSAnY3JpdGljYWwnKTtcclxuICBjb25zdCBoaWdoQWxlcnRzID0gYWxlcnRzLmZpbHRlcihhbGVydCA9PiBhbGVydC5zZXZlcml0eSA9PT0gJ2hpZ2gnKTtcclxuICBjb25zdCB1bnJlYWRBbGVydHMgPSBhbGVydHMuZmlsdGVyKGFsZXJ0ID0+ICFhbGVydC5hdXRvX3Jlc29sdmUpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBpc0Nvbm5lY3RlZCxcclxuICAgIGFsZXJ0cyxcclxuICAgIGNyaXRpY2FsQWxlcnRzLFxyXG4gICAgaGlnaEFsZXJ0cyxcclxuICAgIHVucmVhZEFsZXJ0cyxcclxuICAgIGxhc3RBbGVydCxcclxuICAgIGNsZWFyQWxlcnRzLFxyXG4gICAgdG90YWxBbGVydHM6IGFsZXJ0cy5sZW5ndGgsXHJcbiAgICBjcml0aWNhbENvdW50OiBjcml0aWNhbEFsZXJ0cy5sZW5ndGgsXHJcbiAgICBoaWdoQ291bnQ6IGhpZ2hBbGVydHMubGVuZ3RoLFxyXG4gICAgdW5yZWFkQ291bnQ6IHVucmVhZEFsZXJ0cy5sZW5ndGhcclxuICB9O1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VMb2dpc3RpY3NBbGVydHMiLCJ1c2VMb2dpc3RpY3NXZWJTb2NrZXQiLCJ1c2VTaGlwbWVudFRyYWNraW5nIiwib3B0aW9ucyIsImVuYWJsZWQiLCJhdXRvQ29ubmVjdCIsInNob3dOb3RpZmljYXRpb25zIiwic2ltdWxhdGVJbkRldmVsb3BtZW50IiwiaXNDb25uZWN0ZWQiLCJzZXRJc0Nvbm5lY3RlZCIsInVzZVN0YXRlIiwiY29ubmVjdGlvblN0YXRlIiwic2V0Q29ubmVjdGlvblN0YXRlIiwibGFzdFRyYWNraW5nVXBkYXRlIiwic2V0TGFzdFRyYWNraW5nVXBkYXRlIiwibGFzdEFsZXJ0Iiwic2V0TGFzdEFsZXJ0IiwibGFzdEdlb2ZlbmNlRXZlbnQiLCJzZXRMYXN0R2VvZmVuY2VFdmVudCIsImFsZXJ0cyIsInNldEFsZXJ0cyIsIndzUmVmIiwidXNlUmVmIiwiZ2V0TG9naXN0aWNzV2ViU29ja2V0Iiwic2ltdWxhdG9yUmVmIiwicXVlcnlDbGllbnQiLCJ1c2VRdWVyeUNsaWVudCIsInVzZUVmZmVjdCIsIndzIiwiY3VycmVudCIsImhhbmRsZUNvbm5lY3RlZCIsInRvYXN0Iiwic3VjY2VzcyIsImhhbmRsZURpc2Nvbm5lY3RlZCIsIndhcm5pbmciLCJoYW5kbGVFcnJvciIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZVRyYWNraW5nVXBkYXRlIiwidXBkYXRlIiwiaW52YWxpZGF0ZVF1ZXJpZXMiLCJxdWVyeUtleSIsInNoaXBtZW50X2lkIiwiaW5mbyIsImRlc2NyaXB0aW9uIiwic3RhdHVzIiwiaGFuZGxlQWxlcnQiLCJhbGVydCIsInByZXYiLCJzbGljZSIsInRvYXN0Rm4iLCJzZXZlcml0eSIsInR5cGUiLCJtZXNzYWdlIiwiaGFuZGxlR2VvZmVuY2VFdmVudCIsImV2ZW50Iiwiem9uZV9uYW1lIiwiZXZlbnRfdHlwZSIsIm9uIiwib2ZmIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiTG9naXN0aWNzV2ViU29ja2V0U2ltdWxhdG9yIiwic3RhcnQiLCJzdG9wIiwiY29ubmVjdCIsInVzZUNhbGxiYWNrIiwiZGlzY29ubmVjdCIsInN1YnNjcmliZVRvU2hpcG1lbnQiLCJzaGlwbWVudElkIiwibG9nIiwidW5zdWJzY3JpYmVGcm9tU2hpcG1lbnQiLCJzdWJzY3JpYmVUb0dlb2ZlbmNlIiwiem9uZUlkIiwic3Vic2NyaWJlVG9BbGVydHMiLCJjbGVhckFsZXJ0cyIsInRyYWNraW5nSGlzdG9yeSIsInNldFRyYWNraW5nSGlzdG9yeSIsImN1cnJlbnRMb2NhdGlvbiIsImZpbHRlciIsImNyaXRpY2FsQWxlcnRzIiwiaGlnaEFsZXJ0cyIsInVucmVhZEFsZXJ0cyIsImF1dG9fcmVzb2x2ZSIsInRvdGFsQWxlcnRzIiwibGVuZ3RoIiwiY3JpdGljYWxDb3Vu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