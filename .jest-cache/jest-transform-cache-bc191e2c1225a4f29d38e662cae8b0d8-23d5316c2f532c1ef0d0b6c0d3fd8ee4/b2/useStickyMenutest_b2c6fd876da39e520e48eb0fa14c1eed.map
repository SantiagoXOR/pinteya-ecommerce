{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useStickyMenu.test.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - TESTS PARA HOOK STICKY MENU\n// ===================================\n\nimport { renderHook, act } from '@testing-library/react'\nimport { useStickyMenu } from '@/hooks/useStickyMenu'\n\n// Mock para window scroll\nconst mockAddEventListener = jest.fn()\nconst mockRemoveEventListener = jest.fn()\n\nbeforeEach(() => {\n  // Reset mocks\n  mockAddEventListener.mockClear()\n  mockRemoveEventListener.mockClear()\n\n  // Mock window.addEventListener\n  Object.defineProperty(window, 'addEventListener', {\n    value: mockAddEventListener,\n    writable: true,\n  })\n\n  Object.defineProperty(window, 'removeEventListener', {\n    value: mockRemoveEventListener,\n    writable: true,\n  })\n\n  // Mock scroll properties\n  Object.defineProperty(window, 'pageYOffset', {\n    value: 0,\n    writable: true,\n  })\n\n  Object.defineProperty(document.documentElement, 'scrollTop', {\n    value: 0,\n    writable: true,\n  })\n})\n\ndescribe('useStickyMenu', () => {\n  it('should initialize with non-sticky state', () => {\n    const { result } = renderHook(() => useStickyMenu())\n\n    expect(result.current.isSticky).toBe(false)\n  })\n\n  it('should use default threshold of 80', () => {\n    renderHook(() => useStickyMenu())\n\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function))\n  })\n\n  it('should use custom threshold', () => {\n    const customThreshold = 100\n    renderHook(() => useStickyMenu(customThreshold))\n\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function))\n  })\n\n  it('should add scroll event listener on mount', () => {\n    renderHook(() => useStickyMenu())\n\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function))\n  })\n\n  it('should remove scroll event listener on unmount', () => {\n    const { unmount } = renderHook(() => useStickyMenu())\n\n    unmount()\n\n    expect(mockRemoveEventListener).toHaveBeenCalledWith('scroll', expect.any(Function))\n  })\n\n  it('should become sticky when scroll exceeds threshold', () => {\n    const threshold = 80\n    const { result } = renderHook(() => useStickyMenu(threshold))\n\n    // Simulate scroll event\n    const scrollHandler = mockAddEventListener.mock.calls[0][1]\n\n    // Mock scroll position above threshold\n    Object.defineProperty(window, 'pageYOffset', {\n      value: 100,\n      writable: true,\n    })\n\n    act(() => {\n      scrollHandler()\n    })\n\n    expect(result.current.isSticky).toBe(true)\n  })\n\n  it('should not be sticky when scroll is below threshold', () => {\n    const threshold = 80\n    const { result } = renderHook(() => useStickyMenu(threshold))\n\n    // Simulate scroll event\n    const scrollHandler = mockAddEventListener.mock.calls[0][1]\n\n    // Mock scroll position below threshold\n    Object.defineProperty(window, 'pageYOffset', {\n      value: 50,\n      writable: true,\n    })\n\n    act(() => {\n      scrollHandler()\n    })\n\n    expect(result.current.isSticky).toBe(false)\n  })\n\n  it('should use documentElement.scrollTop as fallback', () => {\n    const threshold = 80\n    const { result } = renderHook(() => useStickyMenu(threshold))\n\n    // Simulate scroll event\n    const scrollHandler = mockAddEventListener.mock.calls[0][1]\n\n    // Mock pageYOffset as undefined and use scrollTop\n    Object.defineProperty(window, 'pageYOffset', {\n      value: undefined,\n      writable: true,\n    })\n\n    Object.defineProperty(document.documentElement, 'scrollTop', {\n      value: 100,\n      writable: true,\n    })\n\n    act(() => {\n      scrollHandler()\n    })\n\n    expect(result.current.isSticky).toBe(true)\n  })\n\n  it('should handle threshold of 0', () => {\n    const { result } = renderHook(() => useStickyMenu(0))\n\n    // Simulate scroll event\n    const scrollHandler = mockAddEventListener.mock.calls[0][1]\n\n    // Any scroll should make it sticky\n    Object.defineProperty(window, 'pageYOffset', {\n      value: 1,\n      writable: true,\n    })\n\n    act(() => {\n      scrollHandler()\n    })\n\n    expect(result.current.isSticky).toBe(true)\n  })\n})\n"],"names":["mockAddEventListener","jest","fn","mockRemoveEventListener","beforeEach","mockClear","Object","defineProperty","window","value","writable","document","documentElement","describe","it","result","renderHook","useStickyMenu","expect","current","isSticky","toBe","toHaveBeenCalledWith","any","Function","customThreshold","unmount","threshold","scrollHandler","mock","calls","act","undefined"],"mappings":"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"}