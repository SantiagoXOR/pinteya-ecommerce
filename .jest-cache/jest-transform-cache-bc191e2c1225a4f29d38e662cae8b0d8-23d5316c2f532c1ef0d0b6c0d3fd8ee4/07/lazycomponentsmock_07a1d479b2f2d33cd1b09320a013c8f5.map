{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\mocks\\lazy-components.mock.tsx"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - LAZY COMPONENTS MOCKS\n// Mocks para componentes lazy loading en tests\n// ===================================\n\nimport React from 'react'\nimport { jest } from '@jest/globals'\n\n// ===================================\n// MOCK COMPONENTS\n// ===================================\n\n// Mock de componente admin dashboard\nconst MockAdminDashboard = React.forwardRef<HTMLDivElement, any>((props, ref) => (\n  <div ref={ref} data-testid='mock-admin-dashboard' {...props}>\n    <h1>Mock Admin Dashboard</h1>\n    <div>Dashboard content loaded</div>\n  </div>\n))\nMockAdminDashboard.displayName = 'MockAdminDashboard'\n\n// Mock de componente product list\nconst MockProductList = React.forwardRef<HTMLDivElement, any>((props, ref) => (\n  <div ref={ref} data-testid='mock-product-list' {...props}>\n    <h2>Mock Product List</h2>\n    <div>Products loaded</div>\n  </div>\n))\nMockProductList.displayName = 'MockProductList'\n\n// Mock de componente product form\nconst MockProductForm = React.forwardRef<HTMLDivElement, any>((props, ref) => (\n  <div ref={ref} data-testid='mock-product-form' {...props}>\n    <h2>Mock Product Form</h2>\n    <form>Form loaded</form>\n  </div>\n))\nMockProductForm.displayName = 'MockProductForm'\n\n// Mock de componente logistics map\nconst MockLogisticsMap = React.forwardRef<HTMLDivElement, any>((props, ref) => (\n  <div ref={ref} data-testid='mock-logistics-map' {...props}>\n    <h2>Mock Logistics Map</h2>\n    <div>Map loaded</div>\n  </div>\n))\nMockLogisticsMap.displayName = 'MockLogisticsMap'\n\n// Mock de componente real time dashboard\nconst MockRealTimeDashboard = React.forwardRef<HTMLDivElement, any>((props, ref) => (\n  <div ref={ref} data-testid='mock-realtime-dashboard' {...props}>\n    <h2>Mock Real Time Dashboard</h2>\n    <div>Real time data loaded</div>\n  </div>\n))\nMockRealTimeDashboard.displayName = 'MockRealTimeDashboard'\n\n// ===================================\n// MOCK IMPLEMENTATIONS\n// ===================================\n\n// Mock de React.lazy\nexport const mockLazy = jest.fn((importFn: () => Promise<any>) => {\n  return React.forwardRef((props: any, ref: any) => {\n    const [Component, setComponent] = React.useState<React.ComponentType | null>(null)\n    const [loading, setLoading] = React.useState(true)\n    const [error, setError] = React.useState<Error | null>(null)\n\n    React.useEffect(() => {\n      importFn()\n        .then(module => {\n          setComponent(() => module.default || module)\n          setLoading(false)\n        })\n        .catch(err => {\n          setError(err)\n          setLoading(false)\n        })\n    }, [])\n\n    if (loading) {\n      return React.createElement('div', {\n        'data-testid': 'lazy-loading',\n        children: 'Loading...',\n      })\n    }\n\n    if (error) {\n      return React.createElement('div', {\n        'data-testid': 'lazy-error',\n        children: `Error: ${error.message}`,\n      })\n    }\n\n    if (Component) {\n      return React.createElement(Component, { ...props, ref })\n    }\n\n    return null\n  })\n})\n\n// Mock de React.Suspense\nexport const mockSuspense = jest.fn(({ children, fallback }: any) => {\n  return React.createElement('div', {\n    'data-testid': 'suspense-boundary',\n    children: [\n      React.createElement('div', {\n        key: 'fallback',\n        'data-testid': 'suspense-fallback',\n        children: fallback,\n      }),\n      React.createElement('div', {\n        key: 'content',\n        'data-testid': 'suspense-content',\n        children,\n      }),\n    ],\n  })\n})\n\n// ===================================\n// MOCK MODULES\n// ===================================\n\n// Mock del módulo admin page\nexport const mockAdminPageModule = {\n  default: MockAdminDashboard,\n  AdminPage: MockAdminDashboard,\n}\n\n// Mock del módulo product list\nexport const mockProductListModule = {\n  default: MockProductList,\n  ProductList: MockProductList,\n}\n\n// Mock del módulo product form\nexport const mockProductFormModule = {\n  default: MockProductForm,\n  ProductForm: MockProductForm,\n}\n\n// Mock del módulo logistics map\nexport const mockLogisticsMapModule = {\n  default: MockLogisticsMap,\n  LogisticsMap: MockLogisticsMap,\n}\n\n// Mock del módulo real time dashboard\nexport const mockRealTimeDashboardModule = {\n  default: MockRealTimeDashboard,\n  RealTimeDashboard: MockRealTimeDashboard,\n}\n\n// ===================================\n// MOCK FACTORIES\n// ===================================\n\n// Factory para crear mocks de import dinámico\nexport const createMockDynamicImport = (component: React.ComponentType, delay = 100) => {\n  return jest.fn(\n    () =>\n      new Promise(resolve => {\n        setTimeout(() => {\n          resolve({ default: component })\n        }, delay)\n      })\n  )\n}\n\n// Factory para crear mocks de import que fallan\nexport const createFailingMockDynamicImport = (errorMessage = 'Failed to load component') => {\n  return jest.fn(\n    () =>\n      new Promise((_, reject) => {\n        setTimeout(() => {\n          reject(new Error(errorMessage))\n        }, 100)\n      })\n  )\n}\n\n// ===================================\n// MOCK SETUP HELPERS\n// ===================================\n\n// Helper para configurar mocks de lazy loading exitosos\nexport const setupSuccessfulLazyMocks = () => {\n  // Mock de dynamic imports\n  jest.doMock('@/app/admin/page', () => mockAdminPageModule)\n  jest.doMock('@/components/admin/products/ProductList', () => mockProductListModule)\n  jest.doMock('@/components/admin/products/ProductForm', () => mockProductFormModule)\n  jest.doMock('@/components/admin/logistics/LogisticsMap', () => mockLogisticsMapModule)\n  jest.doMock('@/components/admin/logistics/RealTimeDashboard', () => mockRealTimeDashboardModule)\n\n  // Mock de React.lazy\n  const originalLazy = React.lazy\n  React.lazy = mockLazy\n\n  // Mock de React.Suspense\n  const originalSuspense = React.Suspense\n  React.Suspense = mockSuspense as any\n\n  return () => {\n    // Cleanup function\n    React.lazy = originalLazy\n    React.Suspense = originalSuspense\n    jest.dontMock('@/app/admin/page')\n    jest.dontMock('@/components/admin/products/ProductList')\n    jest.dontMock('@/components/admin/products/ProductForm')\n    jest.dontMock('@/components/admin/logistics/LogisticsMap')\n    jest.dontMock('@/components/admin/logistics/RealTimeDashboard')\n  }\n}\n\n// Helper para configurar mocks de lazy loading que fallan\nexport const setupFailingLazyMocks = () => {\n  // Mock de dynamic imports que fallan\n  jest.doMock('@/app/admin/page', () => {\n    throw new Error('Failed to load admin page')\n  })\n  jest.doMock('@/components/admin/products/ProductList', () => {\n    throw new Error('Failed to load product list')\n  })\n\n  const originalLazy = React.lazy\n  React.lazy = jest.fn(importFn => {\n    return React.forwardRef((props: any, ref: any) => {\n      React.useEffect(() => {\n        importFn().catch(() => {\n          // Error será manejado por error boundary\n        })\n      }, [])\n\n      throw new Error('Component failed to load')\n    })\n  })\n\n  return () => {\n    React.lazy = originalLazy\n    jest.dontMock('@/app/admin/page')\n    jest.dontMock('@/components/admin/products/ProductList')\n  }\n}\n\n// ===================================\n// MOCK UTILITIES\n// ===================================\n\n// Utility para simular tiempo de carga\nexport const simulateLoadingTime = (ms: number) => {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n\n// Utility para verificar que un componente lazy se cargó\nexport const waitForLazyComponent = async (testId: string, timeout = 5000) => {\n  const startTime = Date.now()\n\n  while (Date.now() - startTime < timeout) {\n    const element = document.querySelector(`[data-testid=\"${testId}\"]`)\n    if (element) {\n      return element\n    }\n    await simulateLoadingTime(100)\n  }\n\n  throw new Error(`Lazy component with testId \"${testId}\" did not load within ${timeout}ms`)\n}\n\n// Utility para verificar estados de loading\nexport const checkLoadingStates = () => {\n  const loadingElements = document.querySelectorAll('[data-testid=\"lazy-loading\"]')\n  const errorElements = document.querySelectorAll('[data-testid=\"lazy-error\"]')\n  const suspenseElements = document.querySelectorAll('[data-testid=\"suspense-boundary\"]')\n\n  return {\n    loading: loadingElements.length,\n    errors: errorElements.length,\n    suspense: suspenseElements.length,\n    hasLoading: loadingElements.length > 0,\n    hasErrors: errorElements.length > 0,\n    hasSuspense: suspenseElements.length > 0,\n  }\n}\n\n// ===================================\n// EXPORT DEFAULT\n// ===================================\n\nexport default {\n  mockLazy,\n  mockSuspense,\n  setupSuccessfulLazyMocks,\n  setupFailingLazyMocks,\n  createMockDynamicImport,\n  createFailingMockDynamicImport,\n  simulateLoadingTime,\n  waitForLazyComponent,\n  checkLoadingStates,\n  components: {\n    MockAdminDashboard,\n    MockProductList,\n    MockProductForm,\n    MockLogisticsMap,\n    MockRealTimeDashboard,\n  },\n}\n"],"names":["checkLoadingStates","createFailingMockDynamicImport","createMockDynamicImport","mockAdminPageModule","mockLazy","mockLogisticsMapModule","mockProductFormModule","mockProductListModule","mockRealTimeDashboardModule","mockSuspense","setupFailingLazyMocks","setupSuccessfulLazyMocks","simulateLoadingTime","waitForLazyComponent","MockAdminDashboard","React","forwardRef","props","ref","div","data-testid","h1","displayName","MockProductList","h2","MockProductForm","form","MockLogisticsMap","MockRealTimeDashboard","jest","fn","importFn","Component","setComponent","useState","loading","setLoading","error","setError","useEffect","then","module","default","catch","err","createElement","children","message","fallback","key","AdminPage","ProductList","ProductForm","LogisticsMap","RealTimeDashboard","component","delay","Promise","resolve","setTimeout","errorMessage","_","reject","Error","doMock","originalLazy","lazy","originalSuspense","Suspense","dontMock","ms","testId","timeout","startTime","Date","now","element","document","querySelector","loadingElements","querySelectorAll","errorElements","suspenseElements","length","errors","suspense","hasLoading","hasErrors","hasSuspense","components"],"mappings":"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"}