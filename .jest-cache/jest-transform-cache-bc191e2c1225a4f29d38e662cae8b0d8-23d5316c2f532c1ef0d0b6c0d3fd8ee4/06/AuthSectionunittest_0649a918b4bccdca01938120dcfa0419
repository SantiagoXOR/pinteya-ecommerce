b43b1d86e9089709eb9ba498ee9ea6bc
/**
 * Test simplificado para AuthSection con NextAuth
 * Enfocado en validar la funcionalidad core sin complejidades
 */ "use strict";
// Mock NextAuth
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn(),
        signIn: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _AuthSection = /*#__PURE__*/ _interop_require_default(require("../../AuthSection"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockUseSession = _react2.useSession;
const mockSignIn = _react2.signIn;
// Mock user data
const mockUser = {
    id: 'user_123',
    name: 'Juan Pérez',
    email: 'juan@example.com'
};
describe('AuthSection - Simplified Tests', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Unauthenticated State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should render sign in button when unauthenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30');
        });
        it('should render Google icon in button', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            expect(svg).toBeInTheDocument();
            expect(svg).toHaveClass('w-5', 'h-5');
        });
        it('should call signIn when button is clicked', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockSignIn).toHaveBeenCalledWith('google');
        });
        it('should have correct CSS classes for translucent button', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('relative', 'bg-white/20', 'hover:bg-white/30', 'backdrop-blur-sm', 'border-2', 'border-white/30', 'rounded-full');
        });
    });
    describe('Authenticated State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('should render admin link when authenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toBeInTheDocument();
            expect(adminLink).toHaveAttribute('href', '/admin');
        });
        it('should render user avatar when authenticated', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const avatar = _react1.screen.getByText('J') // First letter of Juan
            ;
            expect(avatar).toBeInTheDocument();
        });
        it('should have admin button with correct styling', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toHaveClass('bg-orange-600', 'hover:bg-orange-700', 'text-white');
        });
    });
    describe('Loading State', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'loading'
            });
        });
        it('should render loading skeleton', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const skeleton = _react1.screen.getByText((content, element)=>{
                return element?.classList.contains('animate-pulse') || false;
            });
            expect(skeleton).toHaveClass('animate-pulse');
        });
    });
    describe('Variants', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should render mobile variant correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-110');
        });
        it('should render topbar variant with text', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const button = _react1.screen.getByText('Iniciar Sesión');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('text-gray-800');
        });
        it('should render default variant correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "default"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-105');
        });
    });
    describe('Accessibility', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should be keyboard accessible', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            // Button should be focusable
            button.focus();
            expect(document.activeElement).toBe(button);
        });
        it('should have proper button role', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
        });
    });
    describe('Visual Consistency', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should maintain consistent icon size across variants', ()=>{
            const variants = [
                'default',
                'mobile'
            ];
            variants.forEach((variant)=>{
                const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                    variant: variant
                }));
                const svg = _react1.screen.getByRole('button').querySelector('svg');
                expect(svg).toHaveClass('w-5', 'h-5');
                unmount();
            });
        });
        it('should have hover effects', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:bg-white/30');
        });
        it('should have transform effects', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('transform', 'hover:scale-105');
        });
    });
    describe('Google Branding', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('should have Google colors in SVG paths', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            const paths = svg?.querySelectorAll('path');
            expect(paths).toHaveLength(4);
            // Check for Google brand colors
            const colors = Array.from(paths || []).map((path)=>path.getAttribute('fill'));
            expect(colors).toContain('#4285F4'); // Google Blue
            expect(colors).toContain('#34A853'); // Google Green
            expect(colors).toContain('#FBBC05'); // Google Yellow
            expect(colors).toContain('#EA4335'); // Google Red
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcSGVhZGVyXFxfX3Rlc3RzX19cXHVuaXRcXEF1dGhTZWN0aW9uLnVuaXQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IHNpbXBsaWZpY2FkbyBwYXJhIEF1dGhTZWN0aW9uIGNvbiBOZXh0QXV0aFxuICogRW5mb2NhZG8gZW4gdmFsaWRhciBsYSBmdW5jaW9uYWxpZGFkIGNvcmUgc2luIGNvbXBsZWppZGFkZXNcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB7IHVzZVNlc3Npb24sIHNpZ25JbiB9IGZyb20gJ25leHQtYXV0aC9yZWFjdCdcbmltcG9ydCBBdXRoU2VjdGlvbiBmcm9tICcuLi8uLi9BdXRoU2VjdGlvbidcblxuLy8gTW9jayBOZXh0QXV0aFxuamVzdC5tb2NrKCduZXh0LWF1dGgvcmVhY3QnLCAoKSA9PiAoe1xuICB1c2VTZXNzaW9uOiBqZXN0LmZuKCksXG4gIHNpZ25JbjogamVzdC5mbigpLFxufSkpXG5cbmNvbnN0IG1vY2tVc2VTZXNzaW9uID0gdXNlU2Vzc2lvbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VTZXNzaW9uPlxuY29uc3QgbW9ja1NpZ25JbiA9IHNpZ25JbiBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBzaWduSW4+XG5cbi8vIE1vY2sgdXNlciBkYXRhXG5jb25zdCBtb2NrVXNlciA9IHtcbiAgaWQ6ICd1c2VyXzEyMycsXG4gIG5hbWU6ICdKdWFuIFDDqXJleicsXG4gIGVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXG59XG5cbmRlc2NyaWJlKCdBdXRoU2VjdGlvbiAtIFNpbXBsaWZpZWQgVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1VuYXV0aGVudGljYXRlZCBTdGF0ZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tVc2VTZXNzaW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCcsXG4gICAgICB9IGFzIGFueSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgc2lnbiBpbiBidXR0b24gd2hlbiB1bmF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2JnLXdoaXRlLzIwJywgJ2hvdmVyOmJnLXdoaXRlLzMwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgR29vZ2xlIGljb24gaW4gYnV0dG9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3Qgc3ZnID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJykucXVlcnlTZWxlY3Rvcignc3ZnJylcbiAgICAgIGV4cGVjdChzdmcpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzdmcpLnRvSGF2ZUNsYXNzKCd3LTUnLCAnaC01JylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNpZ25JbiB3aGVuIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pXG5cbiAgICAgIGV4cGVjdChtb2NrU2lnbkluKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZ29vZ2xlJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgQ1NTIGNsYXNzZXMgZm9yIHRyYW5zbHVjZW50IGJ1dHRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcyhcbiAgICAgICAgJ3JlbGF0aXZlJyxcbiAgICAgICAgJ2JnLXdoaXRlLzIwJyxcbiAgICAgICAgJ2hvdmVyOmJnLXdoaXRlLzMwJyxcbiAgICAgICAgJ2JhY2tkcm9wLWJsdXItc20nLFxuICAgICAgICAnYm9yZGVyLTInLFxuICAgICAgICAnYm9yZGVyLXdoaXRlLzMwJyxcbiAgICAgICAgJ3JvdW5kZWQtZnVsbCdcbiAgICAgIClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdBdXRoZW50aWNhdGVkIFN0YXRlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBtb2NrVXNlciB9LFxuICAgICAgICBzdGF0dXM6ICdhdXRoZW50aWNhdGVkJyxcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBhZG1pbiBsaW5rIHdoZW4gYXV0aGVudGljYXRlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IGFkbWluTGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnKVxuICAgICAgZXhwZWN0KGFkbWluTGluaykudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGFkbWluTGluaykudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy9hZG1pbicpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIHVzZXIgYXZhdGFyIHdoZW4gYXV0aGVudGljYXRlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IGF2YXRhciA9IHNjcmVlbi5nZXRCeVRleHQoJ0onKSAvLyBGaXJzdCBsZXR0ZXIgb2YgSnVhblxuICAgICAgZXhwZWN0KGF2YXRhcikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgYWRtaW4gYnV0dG9uIHdpdGggY29ycmVjdCBzdHlsaW5nJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3QgYWRtaW5MaW5rID0gc2NyZWVuLmdldEJ5Um9sZSgnbGluaycpXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0hhdmVDbGFzcygnYmctb3JhbmdlLTYwMCcsICdob3ZlcjpiZy1vcmFuZ2UtNzAwJywgJ3RleHQtd2hpdGUnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0xvYWRpbmcgU3RhdGUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICdsb2FkaW5nJyxcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBsb2FkaW5nIHNrZWxldG9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3Qgc2tlbGV0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KChjb250ZW50LCBlbGVtZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUtcHVsc2UnKSB8fCBmYWxzZVxuICAgICAgfSlcbiAgICAgIGV4cGVjdChza2VsZXRvbikudG9IYXZlQ2xhc3MoJ2FuaW1hdGUtcHVsc2UnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1ZhcmlhbnRzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJyxcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBtb2JpbGUgdmFyaWFudCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9J21vYmlsZScgLz4pXG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygnaG92ZXI6c2NhbGUtMTEwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgdG9wYmFyIHZhcmlhbnQgd2l0aCB0ZXh0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PSd0b3BiYXInIC8+KVxuXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdJbmljaWFyIFNlc2nDs24nKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ3RleHQtZ3JheS04MDAnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBkZWZhdWx0IHZhcmlhbnQgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PSdkZWZhdWx0JyAvPilcblxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdob3ZlcjpzY2FsZS0xMDUnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnLFxuICAgICAgfSBhcyBhbnkpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgYmUga2V5Ym9hcmQgYWNjZXNzaWJsZScsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXG5cbiAgICAgIC8vIEJ1dHRvbiBzaG91bGQgYmUgZm9jdXNhYmxlXG4gICAgICBidXR0b24uZm9jdXMoKVxuICAgICAgZXhwZWN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLnRvQmUoYnV0dG9uKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGJ1dHRvbiByb2xlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdWaXN1YWwgQ29uc2lzdGVuY3knLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICd1bmF1dGhlbnRpY2F0ZWQnLFxuICAgICAgfSBhcyBhbnkpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gY29uc2lzdGVudCBpY29uIHNpemUgYWNyb3NzIHZhcmlhbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFyaWFudHMgPSBbJ2RlZmF1bHQnLCAnbW9iaWxlJ10gYXMgY29uc3RcblxuICAgICAgdmFyaWFudHMuZm9yRWFjaCh2YXJpYW50ID0+IHtcbiAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9e3ZhcmlhbnR9IC8+KVxuXG4gICAgICAgIGNvbnN0IHN2ZyA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgICAgIGV4cGVjdChzdmcpLnRvSGF2ZUNsYXNzKCd3LTUnLCAnaC01JylcblxuICAgICAgICB1bm1vdW50KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBob3ZlciBlZmZlY3RzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcblxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdob3ZlcjpiZy13aGl0ZS8zMCcpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGF2ZSB0cmFuc2Zvcm0gZWZmZWN0cycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygndHJhbnNmb3JtJywgJ2hvdmVyOnNjYWxlLTEwNScpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnR29vZ2xlIEJyYW5kaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJyxcbiAgICAgIH0gYXMgYW55KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgR29vZ2xlIGNvbG9ycyBpbiBTVkcgcGF0aHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIC8+KVxuXG4gICAgICBjb25zdCBzdmcgPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKS5xdWVyeVNlbGVjdG9yKCdzdmcnKVxuICAgICAgY29uc3QgcGF0aHMgPSBzdmc/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3BhdGgnKVxuXG4gICAgICBleHBlY3QocGF0aHMpLnRvSGF2ZUxlbmd0aCg0KVxuXG4gICAgICAvLyBDaGVjayBmb3IgR29vZ2xlIGJyYW5kIGNvbG9yc1xuICAgICAgY29uc3QgY29sb3JzID0gQXJyYXkuZnJvbShwYXRocyB8fCBbXSkubWFwKHBhdGggPT4gcGF0aC5nZXRBdHRyaWJ1dGUoJ2ZpbGwnKSlcbiAgICAgIGV4cGVjdChjb2xvcnMpLnRvQ29udGFpbignIzQyODVGNCcpIC8vIEdvb2dsZSBCbHVlXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyMzNEE4NTMnKSAvLyBHb29nbGUgR3JlZW5cbiAgICAgIGV4cGVjdChjb2xvcnMpLnRvQ29udGFpbignI0ZCQkMwNScpIC8vIEdvb2dsZSBZZWxsb3dcbiAgICAgIGV4cGVjdChjb2xvcnMpLnRvQ29udGFpbignI0VBNDMzNScpIC8vIEdvb2dsZSBSZWRcbiAgICB9KVxuICB9KVxufSlcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVNlc3Npb24iLCJmbiIsInNpZ25JbiIsIm1vY2tVc2VTZXNzaW9uIiwibW9ja1NpZ25JbiIsIm1vY2tVc2VyIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwiZGF0YSIsInN0YXR1cyIsIml0IiwicmVuZGVyIiwiQXV0aFNlY3Rpb24iLCJidXR0b24iLCJzY3JlZW4iLCJnZXRCeVJvbGUiLCJleHBlY3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRvSGF2ZUNsYXNzIiwic3ZnIiwicXVlcnlTZWxlY3RvciIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ1c2VyIiwiYWRtaW5MaW5rIiwidG9IYXZlQXR0cmlidXRlIiwiYXZhdGFyIiwiZ2V0QnlUZXh0Iiwic2tlbGV0b24iLCJjb250ZW50IiwiZWxlbWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidmFyaWFudCIsImZvY3VzIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwidG9CZSIsInZhcmlhbnRzIiwiZm9yRWFjaCIsInVubW91bnQiLCJwYXRocyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b0hhdmVMZW5ndGgiLCJjb2xvcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJwYXRoIiwiZ2V0QXR0cmlidXRlIiwidG9Db250YWluIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7QUFPRCxnQkFBZ0I7QUFDaEJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxZQUFZRixLQUFLRyxFQUFFO1FBQ25CQyxRQUFRSixLQUFLRyxFQUFFO0lBQ2pCLENBQUE7Ozs7OzhEQVRrQjt3QkFDd0I7d0JBQ1A7b0VBQ1g7Ozs7OztBQVF4QixNQUFNRSxpQkFBaUJILGtCQUFVO0FBQ2pDLE1BQU1JLGFBQWFGLGNBQU07QUFFekIsaUJBQWlCO0FBQ2pCLE1BQU1HLFdBQVc7SUFDZkMsSUFBSTtJQUNKQyxNQUFNO0lBQ05DLE9BQU87QUFDVDtBQUVBQyxTQUFTLGtDQUFrQztJQUN6Q0MsV0FBVztRQUNUWixLQUFL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