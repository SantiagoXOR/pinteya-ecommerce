0b5ebeebbc7af47fe236509ddf746387
// ===================================
// PINTEYA E-COMMERCE - STRICT API TYPES
// Tipos TypeScript estrictos para prevenir errores de API
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createStrictApiError () {
        return createStrictApiError;
    },
    get createStrictApiResponse () {
        return createStrictApiResponse;
    },
    get isStrictApiError () {
        return isStrictApiError;
    },
    get isStrictApiResponse () {
        return isStrictApiResponse;
    },
    get isValidPagination () {
        return isValidPagination;
    },
    get isValidStrictOrder () {
        return isValidStrictOrder;
    },
    get toStrictOrdersResponse () {
        return toStrictOrdersResponse;
    }
});
function isStrictApiResponse(obj) {
    return typeof obj === 'object' && obj !== null && 'success' in obj && obj.success === true && 'data' in obj && 'timestamp' in obj && typeof obj.timestamp === 'string';
}
function isStrictApiError(obj) {
    return typeof obj === 'object' && obj !== null && 'success' in obj && obj.success === false && 'error' in obj && typeof obj.error === 'string' && 'timestamp' in obj && typeof obj.timestamp === 'string';
}
function isValidPagination(obj) {
    if (typeof obj !== 'object' || obj === null) {
        return false;
    }
    return typeof obj.page === 'number' && typeof obj.limit === 'number' && typeof obj.total === 'number' && typeof obj.totalPages === 'number' && typeof obj.hasNextPage === 'boolean' && typeof obj.hasPreviousPage === 'boolean' && obj.page > 0 && obj.limit > 0 && obj.total >= 0 && obj.totalPages >= 0;
}
function isValidStrictOrder(obj) {
    if (typeof obj !== 'object' || obj === null) {
        return false;
    }
    // Validaciones mínimas - solo campos absolutamente esenciales
    const hasId = obj.id && (typeof obj.id === 'string' || typeof obj.id === 'number');
    const hasTotal = typeof obj.total === 'number' && obj.total >= 0;
    const hasCreatedAt = obj.created_at && typeof obj.created_at === 'string';
    const hasStatus = obj.status && typeof obj.status === 'string';
    // Solo requerir los campos absolutamente esenciales
    return hasId && hasTotal && hasCreatedAt && hasStatus;
}
function toStrictOrdersResponse(obj) {
    try {
        if (!isStrictApiResponse(obj)) {
            return {
                success: false,
                error: 'Invalid API response format',
                code: 'INVALID_RESPONSE_FORMAT',
                timestamp: new Date().toISOString(),
                path: '/api/admin/orders'
            };
        }
        const response = obj;
        // Validar estructura de datos
        if (!response.data || typeof response.data !== 'object') {
            return {
                success: false,
                error: 'Missing or invalid data field',
                code: 'INVALID_DATA_FIELD',
                timestamp: new Date().toISOString(),
                path: '/api/admin/orders'
            };
        }
        // Validar órdenes
        const orders = response.data.orders || [];
        if (!Array.isArray(orders)) {
            return {
                success: false,
                error: 'Orders field must be an array',
                code: 'INVALID_ORDERS_FIELD',
                timestamp: new Date().toISOString(),
                path: '/api/admin/orders'
            };
        }
        // Validar paginación
        const pagination = response.data.pagination;
        if (pagination && !isValidPagination(pagination)) {
            return {
                success: false,
                error: 'Invalid pagination format',
                code: 'INVALID_PAGINATION',
                timestamp: new Date().toISOString(),
                path: '/api/admin/orders'
            };
        }
        // Transformar órdenes para asegurar compatibilidad
        // Transformar órdenes para normalizar tipos
        const transformedOrders = orders.map((order)=>({
                ...order,
                id: String(order.id),
                user_id: order.user_id ? String(order.user_id) : order.user_id,
                total: Number(order.total) || 0,
                created_at: order.created_at || new Date().toISOString(),
                status: order.status || 'pending',
                metadata: order.metadata || {}
            }));
        const validOrders = transformedOrders.filter(isValidStrictOrder);
        // Crear respuesta estricta con valores por defecto seguros
        return {
            success: true,
            data: {
                orders: validOrders,
                pagination: pagination || {
                    page: 1,
                    limit: 20,
                    total: orders.length,
                    totalPages: Math.ceil(orders.length / 20),
                    hasNextPage: false,
                    hasPreviousPage: false
                },
                filters: response.data.filters || {},
                analytics: response.data.analytics
            },
            message: response.message,
            timestamp: response.timestamp || new Date().toISOString()
        };
    } catch (error) {
        return {
            success: false,
            error: `Failed to parse API response: ${error instanceof Error ? error.message : 'Unknown error'}`,
            code: 'PARSE_ERROR',
            timestamp: new Date().toISOString(),
            path: '/api/admin/orders'
        };
    }
}
function createStrictApiError(error, code, details, path) {
    return {
        success: false,
        error,
        code,
        details,
        timestamp: new Date().toISOString(),
        path: path || '/api/unknown'
    };
}
function createStrictApiResponse(data, message) {
    return {
        success: true,
        data,
        message,
        timestamp: new Date().toISOString()
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcdHlwZXNcXGFwaS1zdHJpY3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gU1RSSUNUIEFQSSBUWVBFU1xyXG4vLyBUaXBvcyBUeXBlU2NyaXB0IGVzdHJpY3RvcyBwYXJhIHByZXZlbmlyIGVycm9yZXMgZGUgQVBJXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgeyBPcmRlckVudGVycHJpc2UsIE9yZGVyU3RhdHVzLCBQYXltZW50U3RhdHVzLCBGdWxmaWxsbWVudFN0YXR1cyB9IGZyb20gJy4vb3JkZXJzLWVudGVycHJpc2UnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1MgQkFTRSBFU1RSSUNUT1NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBUaXBvIGJhc2UgcGFyYSByZXNwdWVzdGFzIGRlIEFQSSBjb24gdmFsaWRhY2nDs24gZXN0cmljdGFcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0QXBpUmVzcG9uc2U8VD4ge1xyXG4gIHJlYWRvbmx5IHN1Y2Nlc3M6IHRydWU7XHJcbiAgcmVhZG9ubHkgZGF0YTogVDtcclxuICByZWFkb25seSBtZXNzYWdlPzogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0cmljdEFwaUVycm9yIHtcclxuICByZWFkb25seSBzdWNjZXNzOiBmYWxzZTtcclxuICByZWFkb25seSBlcnJvcjogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IGNvZGU/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgZGV0YWlscz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gIHJlYWRvbmx5IHRpbWVzdGFtcDogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IHBhdGg6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFVuaW9uIHR5cGUgcGFyYSByZXNwdWVzdGFzIGRlIEFQSSBxdWUgZ2FyYW50aXphIHR5cGUgc2FmZXR5XHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBcGlSZXN1bHQ8VD4gPSBTdHJpY3RBcGlSZXNwb25zZTxUPiB8IFN0cmljdEFwaUVycm9yO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1MgREUgUEFHSU5BQ0nDk04gRVNUUklDVE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogUGFnaW5hY2nDs24gY29uIHZhbGlkYWNpw7NuIGVzdHJpY3RhIGRlIHRpcG9zXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN0cmljdFBhZ2luYXRpb24ge1xyXG4gIHJlYWRvbmx5IHBhZ2U6IG51bWJlciAmIHsgX19icmFuZDogJ1Bvc2l0aXZlSW50ZWdlcicgfTtcclxuICByZWFkb25seSBsaW1pdDogbnVtYmVyICYgeyBfX2JyYW5kOiAnUG9zaXRpdmVJbnRlZ2VyJyB9O1xyXG4gIHJlYWRvbmx5IHRvdGFsOiBudW1iZXIgJiB7IF9fYnJhbmQ6ICdOb25OZWdhdGl2ZUludGVnZXInIH07XHJcbiAgcmVhZG9ubHkgdG90YWxQYWdlczogbnVtYmVyICYgeyBfX2JyYW5kOiAnTm9uTmVnYXRpdmVJbnRlZ2VyJyB9O1xyXG4gIHJlYWRvbmx5IGhhc05leHRQYWdlOiBib29sZWFuO1xyXG4gIHJlYWRvbmx5IGhhc1ByZXZpb3VzUGFnZTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc3B1ZXN0YSBwYWdpbmFkYSBjb24gdGlwb3MgZXN0cmljdG9zXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN0cmljdFBhZ2luYXRlZFJlc3BvbnNlPFQ+IHtcclxuICByZWFkb25seSBzdWNjZXNzOiB0cnVlO1xyXG4gIHJlYWRvbmx5IGRhdGE6IHtcclxuICAgIHJlYWRvbmx5IGl0ZW1zOiByZWFkb25seSBUW107XHJcbiAgICByZWFkb25seSBwYWdpbmF0aW9uOiBTdHJpY3RQYWdpbmF0aW9uO1xyXG4gICAgcmVhZG9ubHkgZmlsdGVycz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gIH07XHJcbiAgcmVhZG9ubHkgbWVzc2FnZT86IHN0cmluZztcclxuICByZWFkb25seSB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1MgRVNQRUPDjUZJQ09TIFBBUkEgw5NSREVORVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBPcmRlbiBjb24gdmFsaWRhY2nDs24gZXN0cmljdGEgZGUgY2FtcG9zIHJlcXVlcmlkb3NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0T3JkZXJFbnRlcnByaXNlIHtcclxuICByZWFkb25seSBpZDogc3RyaW5nIHwgbnVtYmVyOyAvLyBGbGV4aWJsZSBwYXJhIHN0cmluZyBvIG51bWJlclxyXG4gIHJlYWRvbmx5IG9yZGVyX251bWJlcj86IHN0cmluZyAmIHsgX19icmFuZDogJ09yZGVyTnVtYmVyJyB9OyAvLyBPcGNpb25hbFxyXG4gIHJlYWRvbmx5IHVzZXJfaWQ/OiBzdHJpbmcgfCBudW1iZXI7IC8vIE9wY2lvbmFsIHkgZmxleGlibGVcclxuICByZWFkb25seSBzdGF0dXM6IE9yZGVyU3RhdHVzO1xyXG4gIHJlYWRvbmx5IHBheW1lbnRfc3RhdHVzPzogUGF5bWVudFN0YXR1czsgLy8gT3BjaW9uYWxcclxuICByZWFkb25seSBmdWxmaWxsbWVudF9zdGF0dXM/OiBGdWxmaWxsbWVudFN0YXR1czsgLy8gT3BjaW9uYWxcclxuICByZWFkb25seSB0b3RhbDogbnVtYmVyICYgeyBfX2JyYW5kOiAnUG9zaXRpdmVBbW91bnQnIH07XHJcbiAgcmVhZG9ubHkgY3VycmVuY3k/OiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdDdXJyZW5jeUNvZGUnIH07IC8vIE9wY2lvbmFsXHJcbiAgcmVhZG9ubHkgY3JlYXRlZF9hdDogc3RyaW5nICYgeyBfX2JyYW5kOiAnSVNPRGF0ZVN0cmluZycgfTtcclxuICByZWFkb25seSB1cGRhdGVkX2F0Pzogc3RyaW5nICYgeyBfX2JyYW5kOiAnSVNPRGF0ZVN0cmluZycgfTsgLy8gT3BjaW9uYWxcclxuICBcclxuICAvLyBDYW1wb3Mgb3BjaW9uYWxlcyBjb24gdGlwb3MgZXN0cmljdG9zXHJcbiAgcmVhZG9ubHkgc2hpcHBpbmdfYWRkcmVzcz86IFN0cmljdEFkZHJlc3M7XHJcbiAgcmVhZG9ubHkgYmlsbGluZ19hZGRyZXNzPzogU3RyaWN0QWRkcmVzcztcclxuICByZWFkb25seSBub3Rlcz86IHN0cmluZyAmIHsgX19icmFuZDogJ05vbkVtcHR5U3RyaW5nJyB9O1xyXG4gIHJlYWRvbmx5IGFkbWluX25vdGVzPzogc3RyaW5nICYgeyBfX2JyYW5kOiAnTm9uRW1wdHlTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgdHJhY2tpbmdfbnVtYmVyPzogc3RyaW5nICYgeyBfX2JyYW5kOiAnVHJhY2tpbmdOdW1iZXInIH07XHJcbiAgcmVhZG9ubHkgY2Fycmllcj86IHN0cmluZyAmIHsgX19icmFuZDogJ0NhcnJpZXJOYW1lJyB9O1xyXG4gIHJlYWRvbmx5IGVzdGltYXRlZF9kZWxpdmVyeT86IHN0cmluZyAmIHsgX19icmFuZDogJ0lTT0RhdGVTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gIFxyXG4gIC8vIFJlbGFjaW9uZXMgY29uIHRpcG9zIGVzdHJpY3Rvc1xyXG4gIHJlYWRvbmx5IHVzZXJfcHJvZmlsZXM/OiBTdHJpY3RVc2VyUHJvZmlsZSB8IG51bGw7XHJcbiAgcmVhZG9ubHkgb3JkZXJfaXRlbXM/OiByZWFkb25seSBTdHJpY3RPcmRlckl0ZW1bXTtcclxuICByZWFkb25seSBzdGF0dXNfaGlzdG9yeT86IHJlYWRvbmx5IFN0cmljdE9yZGVyU3RhdHVzSGlzdG9yeVtdO1xyXG4gIHJlYWRvbmx5IG9yZGVyX25vdGVzPzogcmVhZG9ubHkgU3RyaWN0T3JkZXJOb3RlW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQZXJmaWwgZGUgdXN1YXJpbyBjb24gdmFsaWRhY2nDs24gZXN0cmljdGFcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0VXNlclByb2ZpbGUge1xyXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdVc2VySWQnIH07XHJcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nICYgeyBfX2JyYW5kOiAnTm9uRW1wdHlTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgZW1haWw6IHN0cmluZyAmIHsgX19icmFuZDogJ0VtYWlsQWRkcmVzcycgfTtcclxuICByZWFkb25seSBwaG9uZT86IHN0cmluZyAmIHsgX19icmFuZDogJ1Bob25lTnVtYmVyJyB9O1xyXG4gIHJlYWRvbmx5IGF2YXRhcl91cmw/OiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdVUkwnIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJdGVtIGRlIG9yZGVuIGNvbiB2YWxpZGFjacOzbiBlc3RyaWN0YVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdHJpY3RPcmRlckl0ZW0ge1xyXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdPcmRlckl0ZW1JZCcgfTtcclxuICByZWFkb25seSBvcmRlcl9pZDogc3RyaW5nICYgeyBfX2JyYW5kOiAnT3JkZXJJZCcgfTtcclxuICByZWFkb25seSBwcm9kdWN0X2lkOiBudW1iZXIgJiB7IF9fYnJhbmQ6ICdQcm9kdWN0SWQnIH07XHJcbiAgcmVhZG9ubHkgcXVhbnRpdHk6IG51bWJlciAmIHsgX19icmFuZDogJ1Bvc2l0aXZlSW50ZWdlcicgfTtcclxuICByZWFkb25seSB1bml0X3ByaWNlOiBudW1iZXIgJiB7IF9fYnJhbmQ6ICdQb3NpdGl2ZUFtb3VudCcgfTtcclxuICByZWFkb25seSB0b3RhbF9wcmljZTogbnVtYmVyICYgeyBfX2JyYW5kOiAnUG9zaXRpdmVBbW91bnQnIH07XHJcbiAgcmVhZG9ubHkgcHJvZHVjdF9uYW1lOiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdOb25FbXB0eVN0cmluZycgfTtcclxuICByZWFkb25seSBwcm9kdWN0X3NrdT86IHN0cmluZyAmIHsgX19icmFuZDogJ1NLVScgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERpcmVjY2nDs24gY29uIHZhbGlkYWNpw7NuIGVzdHJpY3RhXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN0cmljdEFkZHJlc3Mge1xyXG4gIHJlYWRvbmx5IHN0cmVldDogc3RyaW5nICYgeyBfX2JyYW5kOiAnTm9uRW1wdHlTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgY2l0eTogc3RyaW5nICYgeyBfX2JyYW5kOiAnTm9uRW1wdHlTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgc3RhdGU6IHN0cmluZyAmIHsgX19icmFuZDogJ05vbkVtcHR5U3RyaW5nJyB9O1xyXG4gIHJlYWRvbmx5IHBvc3RhbF9jb2RlOiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdQb3N0YWxDb2RlJyB9O1xyXG4gIHJlYWRvbmx5IGNvdW50cnk6IHN0cmluZyAmIHsgX19icmFuZDogJ0NvdW50cnlDb2RlJyB9O1xyXG4gIHJlYWRvbmx5IHBob25lPzogc3RyaW5nICYgeyBfX2JyYW5kOiAnUGhvbmVOdW1iZXInIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIaXN0b3JpYWwgZGUgZXN0YWRvIGNvbiB2YWxpZGFjacOzbiBlc3RyaWN0YVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdHJpY3RPcmRlclN0YXR1c0hpc3Rvcnkge1xyXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdTdGF0dXNIaXN0b3J5SWQnIH07XHJcbiAgcmVhZG9ubHkgb3JkZXJfaWQ6IHN0cmluZyAmIHsgX19icmFuZDogJ09yZGVySWQnIH07XHJcbiAgcmVhZG9ubHkgZnJvbV9zdGF0dXM6IE9yZGVyU3RhdHVzIHwgbnVsbDtcclxuICByZWFkb25seSB0b19zdGF0dXM6IE9yZGVyU3RhdHVzO1xyXG4gIHJlYWRvbmx5IHJlYXNvbj86IHN0cmluZyAmIHsgX19icmFuZDogJ05vbkVtcHR5U3RyaW5nJyB9O1xyXG4gIHJlYWRvbmx5IGFkbWluX2lkPzogc3RyaW5nICYgeyBfX2JyYW5kOiAnQWRtaW5JZCcgfTtcclxuICByZWFkb25seSBjcmVhdGVkX2F0OiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdJU09EYXRlU3RyaW5nJyB9O1xyXG59XHJcblxyXG4vKipcclxuICogTm90YSBkZSBvcmRlbiBjb24gdmFsaWRhY2nDs24gZXN0cmljdGFcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0T3JkZXJOb3RlIHtcclxuICByZWFkb25seSBpZDogc3RyaW5nICYgeyBfX2JyYW5kOiAnT3JkZXJOb3RlSWQnIH07XHJcbiAgcmVhZG9ubHkgb3JkZXJfaWQ6IHN0cmluZyAmIHsgX19icmFuZDogJ09yZGVySWQnIH07XHJcbiAgcmVhZG9ubHkgY29udGVudDogc3RyaW5nICYgeyBfX2JyYW5kOiAnTm9uRW1wdHlTdHJpbmcnIH07XHJcbiAgcmVhZG9ubHkgaXNfYWRtaW5fbm90ZTogYm9vbGVhbjtcclxuICByZWFkb25seSBhZG1pbl9pZD86IHN0cmluZyAmIHsgX19icmFuZDogJ0FkbWluSWQnIH07XHJcbiAgcmVhZG9ubHkgY3JlYXRlZF9hdDogc3RyaW5nICYgeyBfX2JyYW5kOiAnSVNPRGF0ZVN0cmluZycgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUkVTUFVFU1RBUyBFU1BFQ8ONRklDQVMgREUgQVBJXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogUmVzcHVlc3RhIGRlIGxpc3RhIGRlIMOzcmRlbmVzIGNvbiB0aXBvcyBlc3RyaWN0b3NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0T3JkZXJzTGlzdFJlc3BvbnNlIHtcclxuICByZWFkb25seSBzdWNjZXNzOiB0cnVlO1xyXG4gIHJlYWRvbmx5IGRhdGE6IHtcclxuICAgIHJlYWRvbmx5IG9yZGVyczogcmVhZG9ubHkgU3RyaWN0T3JkZXJFbnRlcnByaXNlW107XHJcbiAgICByZWFkb25seSBwYWdpbmF0aW9uOiBTdHJpY3RQYWdpbmF0aW9uO1xyXG4gICAgcmVhZG9ubHkgZmlsdGVyczoge1xyXG4gICAgICByZWFkb25seSBzZWFyY2g/OiBzdHJpbmc7XHJcbiAgICAgIHJlYWRvbmx5IHN0YXR1cz86IE9yZGVyU3RhdHVzO1xyXG4gICAgICByZWFkb25seSBwYXltZW50X3N0YXR1cz86IFBheW1lbnRTdGF0dXM7XHJcbiAgICAgIHJlYWRvbmx5IGZ1bGZpbGxtZW50X3N0YXR1cz86IEZ1bGZpbGxtZW50U3RhdHVzO1xyXG4gICAgICByZWFkb25seSBkYXRlX2Zyb20/OiBzdHJpbmcgJiB7IF9fYnJhbmQ6ICdJU09EYXRlU3RyaW5nJyB9O1xyXG4gICAgICByZWFkb25seSBkYXRlX3RvPzogc3RyaW5nICYgeyBfX2JyYW5kOiAnSVNPRGF0ZVN0cmluZycgfTtcclxuICAgIH07XHJcbiAgICByZWFkb25seSBhbmFseXRpY3M/OiB7XHJcbiAgICAgIHJlYWRvbmx5IHRvdGFsX29yZGVyczogbnVtYmVyICYgeyBfX2JyYW5kOiAnTm9uTmVnYXRpdmVJbnRlZ2VyJyB9O1xyXG4gICAgICByZWFkb25seSB0b3RhbF9yZXZlbnVlOiBudW1iZXIgJiB7IF9fYnJhbmQ6ICdOb25OZWdhdGl2ZUFtb3VudCcgfTtcclxuICAgICAgcmVhZG9ubHkgcGVuZGluZ19vcmRlcnM6IG51bWJlciAmIHsgX19icmFuZDogJ05vbk5lZ2F0aXZlSW50ZWdlcicgfTtcclxuICAgICAgcmVhZG9ubHkgY29tcGxldGVkX29yZGVyczogbnVtYmVyICYgeyBfX2JyYW5kOiAnTm9uTmVnYXRpdmVJbnRlZ2VyJyB9O1xyXG4gICAgICByZWFkb25seSB0b2RheV9yZXZlbnVlOiBudW1iZXIgJiB7IF9fYnJhbmQ6ICdOb25OZWdhdGl2ZUFtb3VudCcgfTtcclxuICAgIH07XHJcbiAgfTtcclxuICByZWFkb25seSBtZXNzYWdlPzogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzcHVlc3RhIGRlIG9yZGVuIGluZGl2aWR1YWwgY29uIHRpcG9zIGVzdHJpY3Rvc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdHJpY3RPcmRlckRldGFpbFJlc3BvbnNlIHtcclxuICByZWFkb25seSBzdWNjZXNzOiB0cnVlO1xyXG4gIHJlYWRvbmx5IGRhdGE6IHtcclxuICAgIHJlYWRvbmx5IG9yZGVyOiBTdHJpY3RPcmRlckVudGVycHJpc2U7XHJcbiAgICByZWFkb25seSB0aW1lbGluZT86IHJlYWRvbmx5IFN0cmljdE9yZGVyU3RhdHVzSGlzdG9yeVtdO1xyXG4gICAgcmVhZG9ubHkgcmVsYXRlZF9vcmRlcnM/OiByZWFkb25seSBQaWNrPFN0cmljdE9yZGVyRW50ZXJwcmlzZSwgJ2lkJyB8ICdvcmRlcl9udW1iZXInIHwgJ3N0YXR1cycgfCAndG90YWwnPltdO1xyXG4gIH07XHJcbiAgcmVhZG9ubHkgbWVzc2FnZT86IHN0cmluZztcclxuICByZWFkb25seSB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1MgR0VOw4lSSUNPUyBQQVJBIFZBTElEQUNJw5NOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogVGlwbyBnZW7DqXJpY28gcGFyYSBvYmpldG9zIHF1ZSBwdWVkZW4gc2VyIHZhbGlkYWRvc1xyXG4gKi9cclxudHlwZSBWYWxpZGF0YWJsZU9iamVjdCA9IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFRpcG8gZ2Vuw6lyaWNvIHBhcmEgcmVzcHVlc3RhcyBkZSBBUEkgbm8gdGlwYWRhc1xyXG4gKi9cclxudHlwZSBVbnR5cGVkQXBpUmVzcG9uc2UgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbDtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFZBTElEQURPUkVTIERFIFRJUE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogVmFsaWRhZG9yIHBhcmEgdmVyaWZpY2FyIHNpIHVuIG9iamV0byBlcyB1bmEgcmVzcHVlc3RhIGRlIEFQSSB2w6FsaWRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpY3RBcGlSZXNwb25zZTxUPihvYmo6IFZhbGlkYXRhYmxlT2JqZWN0KTogb2JqIGlzIFN0cmljdEFwaVJlc3BvbnNlPFQ+IHtcclxuICByZXR1cm4gKFxyXG4gICAgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiZcclxuICAgIG9iaiAhPT0gbnVsbCAmJlxyXG4gICAgJ3N1Y2Nlc3MnIGluIG9iaiAmJlxyXG4gICAgb2JqLnN1Y2Nlc3MgPT09IHRydWUgJiZcclxuICAgICdkYXRhJyBpbiBvYmogJiZcclxuICAgICd0aW1lc3RhbXAnIGluIG9iaiAmJlxyXG4gICAgdHlwZW9mIG9iai50aW1lc3RhbXAgPT09ICdzdHJpbmcnXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYWRvciBwYXJhIHZlcmlmaWNhciBzaSB1biBvYmpldG8gZXMgdW4gZXJyb3IgZGUgQVBJIHbDoWxpZG9cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmljdEFwaUVycm9yKG9iajogVmFsaWRhdGFibGVPYmplY3QpOiBvYmogaXMgU3RyaWN0QXBpRXJyb3Ige1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxyXG4gICAgb2JqICE9PSBudWxsICYmXHJcbiAgICAnc3VjY2VzcycgaW4gb2JqICYmXHJcbiAgICBvYmouc3VjY2VzcyA9PT0gZmFsc2UgJiZcclxuICAgICdlcnJvcicgaW4gb2JqICYmXHJcbiAgICB0eXBlb2Ygb2JqLmVycm9yID09PSAnc3RyaW5nJyAmJlxyXG4gICAgJ3RpbWVzdGFtcCcgaW4gb2JqICYmXHJcbiAgICB0eXBlb2Ygb2JqLnRpbWVzdGFtcCA9PT0gJ3N0cmluZydcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhZG9yIHBhcmEgdmVyaWZpY2FyIHNpIHVuYSBwYWdpbmFjacOzbiBlcyB2w6FsaWRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFBhZ2luYXRpb24ob2JqOiBWYWxpZGF0YWJsZU9iamVjdCk6IG9iaiBpcyBTdHJpY3RQYWdpbmF0aW9uIHtcclxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7cmV0dXJuIGZhbHNlO31cclxuICBcclxuICByZXR1cm4gKFxyXG4gICAgdHlwZW9mIG9iai5wYWdlID09PSAnbnVtYmVyJyAmJlxyXG4gICAgdHlwZW9mIG9iai5saW1pdCA9PT0gJ251bWJlcicgJiZcclxuICAgIHR5cGVvZiBvYmoudG90YWwgPT09ICdudW1iZXInICYmXHJcbiAgICB0eXBlb2Ygb2JqLnRvdGFsUGFnZXMgPT09ICdudW1iZXInICYmXHJcbiAgICB0eXBlb2Ygb2JqLmhhc05leHRQYWdlID09PSAnYm9vbGVhbicgJiZcclxuICAgIHR5cGVvZiBvYmouaGFzUHJldmlvdXNQYWdlID09PSAnYm9vbGVhbicgJiZcclxuICAgIG9iai5wYWdlID4gMCAmJlxyXG4gICAgb2JqLmxpbWl0ID4gMCAmJlxyXG4gICAgb2JqLnRvdGFsID49IDAgJiZcclxuICAgIG9iai50b3RhbFBhZ2VzID49IDBcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhZG9yIHBhcmEgdmVyaWZpY2FyIHNpIHVuYSBvcmRlbiBlcyB2w6FsaWRhICh2ZXJzacOzbiBtw6FzIGZsZXhpYmxlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRTdHJpY3RPcmRlcihvYmo6IFZhbGlkYXRhYmxlT2JqZWN0KTogb2JqIGlzIFN0cmljdE9yZGVyRW50ZXJwcmlzZSB7XHJcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBcclxuICAvLyBWYWxpZGFjaW9uZXMgbcOtbmltYXMgLSBzb2xvIGNhbXBvcyBhYnNvbHV0YW1lbnRlIGVzZW5jaWFsZXNcclxuICBjb25zdCBoYXNJZCA9IG9iai5pZCAmJiAodHlwZW9mIG9iai5pZCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9iai5pZCA9PT0gJ251bWJlcicpO1xyXG4gIGNvbnN0IGhhc1RvdGFsID0gdHlwZW9mIG9iai50b3RhbCA9PT0gJ251bWJlcicgJiYgb2JqLnRvdGFsID49IDA7XHJcbiAgY29uc3QgaGFzQ3JlYXRlZEF0ID0gb2JqLmNyZWF0ZWRfYXQgJiYgdHlwZW9mIG9iai5jcmVhdGVkX2F0ID09PSAnc3RyaW5nJztcclxuICBjb25zdCBoYXNTdGF0dXMgPSBvYmouc3RhdHVzICYmIHR5cGVvZiBvYmouc3RhdHVzID09PSAnc3RyaW5nJztcclxuICBcclxuICAvLyBTb2xvIHJlcXVlcmlyIGxvcyBjYW1wb3MgYWJzb2x1dGFtZW50ZSBlc2VuY2lhbGVzXHJcbiAgcmV0dXJuIGhhc0lkICYmIGhhc1RvdGFsICYmIGhhc0NyZWF0ZWRBdCAmJiBoYXNTdGF0dXM7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVUSUxJREFERVMgREUgVFJBTlNGT1JNQUNJw5NOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogVHJhbnNmb3JtYSB1bmEgcmVzcHVlc3RhIGRlIEFQSSBubyB0aXBhZGEgYSB1bmEgcmVzcHVlc3RhIGVzdHJpY3RhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpY3RPcmRlcnNSZXNwb25zZShvYmo6IFVudHlwZWRBcGlSZXNwb25zZSk6IFN0cmljdE9yZGVyc0xpc3RSZXNwb25zZSB8IFN0cmljdEFwaUVycm9yIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFpc1N0cmljdEFwaVJlc3BvbnNlKG9iaikpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgQVBJIHJlc3BvbnNlIGZvcm1hdCcsXHJcbiAgICAgICAgY29kZTogJ0lOVkFMSURfUkVTUE9OU0VfRk9STUFUJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBwYXRoOiAnL2FwaS9hZG1pbi9vcmRlcnMnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBvYmogYXMgYW55O1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGFyIGVzdHJ1Y3R1cmEgZGUgZGF0b3NcclxuICAgIGlmICghcmVzcG9uc2UuZGF0YSB8fCB0eXBlb2YgcmVzcG9uc2UuZGF0YSAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ01pc3Npbmcgb3IgaW52YWxpZCBkYXRhIGZpZWxkJyxcclxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9EQVRBX0ZJRUxEJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBwYXRoOiAnL2FwaS9hZG1pbi9vcmRlcnMnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhciDDs3JkZW5lc1xyXG4gICAgY29uc3Qgb3JkZXJzID0gcmVzcG9uc2UuZGF0YS5vcmRlcnMgfHwgW107XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkob3JkZXJzKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnT3JkZXJzIGZpZWxkIG11c3QgYmUgYW4gYXJyYXknLFxyXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX09SREVSU19GSUVMRCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgcGF0aDogJy9hcGkvYWRtaW4vb3JkZXJzJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXIgcGFnaW5hY2nDs25cclxuICAgIGNvbnN0IHBhZ2luYXRpb24gPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb247XHJcbiAgICBpZiAocGFnaW5hdGlvbiAmJiAhaXNWYWxpZFBhZ2luYXRpb24ocGFnaW5hdGlvbikpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGFnaW5hdGlvbiBmb3JtYXQnLFxyXG4gICAgICAgIGNvZGU6ICdJTlZBTElEX1BBR0lOQVRJT04nLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHBhdGg6ICcvYXBpL2FkbWluL29yZGVycydcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcmFuc2Zvcm1hciDDs3JkZW5lcyBwYXJhIGFzZWd1cmFyIGNvbXBhdGliaWxpZGFkXHJcbiAgICBcclxuICAgIC8vIFRyYW5zZm9ybWFyIMOzcmRlbmVzIHBhcmEgbm9ybWFsaXphciB0aXBvc1xyXG4gICAgY29uc3QgdHJhbnNmb3JtZWRPcmRlcnMgPSBvcmRlcnMubWFwKChvcmRlcjogYW55KSA9PiAoe1xyXG4gICAgICAuLi5vcmRlcixcclxuICAgICAgaWQ6IFN0cmluZyhvcmRlci5pZCksIC8vIENvbnZlcnRpciBJRCBhIHN0cmluZyBwYXJhIGNvbXBhdGliaWxpZGFkIGZyb250ZW5kXHJcbiAgICAgIHVzZXJfaWQ6IG9yZGVyLnVzZXJfaWQgPyBTdHJpbmcob3JkZXIudXNlcl9pZCkgOiBvcmRlci51c2VyX2lkLFxyXG4gICAgICB0b3RhbDogTnVtYmVyKG9yZGVyLnRvdGFsKSB8fCAwLFxyXG4gICAgICBjcmVhdGVkX2F0OiBvcmRlci5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMgfHwgJ3BlbmRpbmcnLFxyXG4gICAgICBtZXRhZGF0YTogb3JkZXIubWV0YWRhdGEgfHwge31cclxuICAgIH0pKTtcclxuICAgIFxyXG4gICAgY29uc3QgdmFsaWRPcmRlcnMgPSB0cmFuc2Zvcm1lZE9yZGVycy5maWx0ZXIoaXNWYWxpZFN0cmljdE9yZGVyKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXIgcmVzcHVlc3RhIGVzdHJpY3RhIGNvbiB2YWxvcmVzIHBvciBkZWZlY3RvIHNlZ3Vyb3NcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBvcmRlcnM6IHZhbGlkT3JkZXJzLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHBhZ2luYXRpb24gfHwge1xyXG4gICAgICAgICAgcGFnZTogMSBhcyBhbnksXHJcbiAgICAgICAgICBsaW1pdDogMjAgYXMgYW55LFxyXG4gICAgICAgICAgdG90YWw6IG9yZGVycy5sZW5ndGggYXMgYW55LFxyXG4gICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKG9yZGVycy5sZW5ndGggLyAyMCkgYXMgYW55LFxyXG4gICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgaGFzUHJldmlvdXNQYWdlOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmlsdGVyczogcmVzcG9uc2UuZGF0YS5maWx0ZXJzIHx8IHt9LFxyXG4gICAgICAgIGFuYWx5dGljczogcmVzcG9uc2UuZGF0YS5hbmFseXRpY3NcclxuICAgICAgfSxcclxuICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSxcclxuICAgICAgdGltZXN0YW1wOiByZXNwb25zZS50aW1lc3RhbXAgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gcGFyc2UgQVBJIHJlc3BvbnNlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgIGNvZGU6ICdQQVJTRV9FUlJPUicsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBwYXRoOiAnL2FwaS9hZG1pbi9vcmRlcnMnXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWEgdW5hIHJlc3B1ZXN0YSBkZSBlcnJvciBlc3RyaWN0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmljdEFwaUVycm9yKFxyXG4gIGVycm9yOiBzdHJpbmcsXHJcbiAgY29kZT86IHN0cmluZyxcclxuICBkZXRhaWxzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXHJcbiAgcGF0aD86IHN0cmluZ1xyXG4pOiBTdHJpY3RBcGlFcnJvciB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgZXJyb3IsXHJcbiAgICBjb2RlLFxyXG4gICAgZGV0YWlscyxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgcGF0aDogcGF0aCB8fCAnL2FwaS91bmtub3duJ1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhIHVuYSByZXNwdWVzdGEgZXhpdG9zYSBlc3RyaWN0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmljdEFwaVJlc3BvbnNlPFQ+KFxyXG4gIGRhdGE6IFQsXHJcbiAgbWVzc2FnZT86IHN0cmluZ1xyXG4pOiBTdHJpY3RBcGlSZXNwb25zZTxUPiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICBkYXRhLFxyXG4gICAgbWVzc2FnZSxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1MgREUgVVRJTElEQURcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBFeHRyYWUgZWwgdGlwbyBkZSBkYXRvcyBkZSB1bmEgcmVzcHVlc3RhIGRlIEFQSVxyXG4gKi9cclxuZXhwb3J0IHR5cGUgRXh0cmFjdEFwaURhdGE8VD4gPSBUIGV4dGVuZHMgU3RyaWN0QXBpUmVzcG9uc2U8aW5mZXIgVT4gPyBVIDogbmV2ZXI7XHJcblxyXG4vKipcclxuICogSGFjZSBxdWUgdG9kb3MgbG9zIGNhbXBvcyBkZSB1biB0aXBvIHNlYW4gZGUgc29sbyBsZWN0dXJhIHJlY3Vyc2l2YW1lbnRlXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBEZWVwUmVhZG9ubHk8VD4gPSB7XHJcbiAgcmVhZG9ubHkgW1AgaW4ga2V5b2YgVF06IFRbUF0gZXh0ZW5kcyBvYmplY3QgPyBEZWVwUmVhZG9ubHk8VFtQXT4gOiBUW1BdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRpcG8gcGFyYSBmdW5jaW9uZXMgcXVlIG1hbmVqYW4gcmVzcHVlc3RhcyBkZSBBUElcclxuICovXHJcbmV4cG9ydCB0eXBlIEFwaUhhbmRsZXI8VCwgUiA9IHZvaWQ+ID0gKHJlc3BvbnNlOiBBcGlSZXN1bHQ8VD4pID0+IFIgfCBQcm9taXNlPFI+O1xyXG5cclxuLyoqXHJcbiAqIFRpcG8gcGFyYSBvcGNpb25lcyBkZSBjb25maWd1cmFjacOzbiBkZSBBUElcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaWN0QXBpT3B0aW9ucyB7XHJcbiAgcmVhZG9ubHkgdGltZW91dD86IG51bWJlcjtcclxuICByZWFkb25seSByZXRyaWVzPzogbnVtYmVyO1xyXG4gIHJlYWRvbmx5IHZhbGlkYXRlUmVzcG9uc2U/OiBib29sZWFuO1xyXG4gIHJlYWRvbmx5IHRocm93T25FcnJvcj86IGJvb2xlYW47XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImNyZWF0ZVN0cmljdEFwaUVycm9yIiwiY3JlYXRlU3RyaWN0QXBpUmVzcG9uc2UiLCJpc1N0cmljdEFwaUVycm9yIiwiaXNTdHJpY3RBcGlSZXNwb25zZSIsImlzVmFsaWRQYWdpbmF0aW9uIiwiaXNWYWxpZFN0cmljdE9yZGVyIiwidG9TdHJpY3RPcmRlcnNSZXNwb25zZSIsIm9iaiIsInN1Y2Nlc3MiLCJ0aW1lc3RhbXAiLCJlcnJvciIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwidG90YWxQYWdlcyIsImhhc05leHRQYWdlIiwiaGFzUHJldmlvdXNQYWdlIiwiaGFzSWQiLCJpZCIsImhhc1RvdGFsIiwiaGFzQ3JlYXRlZEF0IiwiY3JlYXRlZF9hdCIsImhhc1N0YXR1cyIsInN0YXR1cyIsImNvZGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwYXRoIiwicmVzcG9uc2UiLCJkYXRhIiwib3JkZXJzIiwiQXJyYXkiLCJpc0FycmF5IiwicGFnaW5hdGlvbiIsInRyYW5zZm9ybWVkT3JkZXJzIiwibWFwIiwib3JkZXIiLCJTdHJpbmciLCJ1c2VyX2lkIiwiTnVtYmVyIiwibWV0YWRhdGEiLCJ2YWxpZE9yZGVycyIsImZpbHRlciIsImxlbmd0aCIsIk1hdGgiLCJjZWlsIiwiZmlsdGVycyIsImFuYWx5dGljcyIsIm1lc3NhZ2UiLCJFcnJvciIsImRldGFpbHMiXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx3Q0FBd0M7QUFDeEMsMERBQTBEO0FBQzFELHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBNll0QkE7ZUFBQUE7O1FBbUJBQztlQUFBQTs7UUE5S0FDO2VBQUFBOztRQWZBQztlQUFBQTs7UUErQkFDO2VBQUFBOztRQW9CQUM7ZUFBQUE7O1FBc0JBQztlQUFBQTs7O0FBekVULFNBQVNILG9CQUF1QkksR0FBc0I7SUFDM0QsT0FDRSxPQUFPQSxRQUFRLFlBQ2ZBLFFBQVEsUUFDUixhQUFhQSxPQUNiQSxJQUFJQyxPQUFPLEtBQUssUUFDaEIsVUFBVUQsT0FDVixlQUFlQSxPQUNmLE9BQU9BLElBQUlFLFNBQVMsS0FBSztBQUU3QjtBQUtPLFNBQVNQLGlCQUFpQkssR0FBc0I7SUFDckQsT0FDRSxPQUFPQSxRQUFRLFlBQ2ZBLFFBQVEsUUFDUixhQUFhQSxPQUNiQSxJQUFJQyxPQUFPLEtBQUssU0FDaEIsV0FBV0QsT0FDWCxPQUFPQSxJQUFJRyxLQUFLLEtBQUssWUFDckIsZUFBZUgsT0FDZixPQUFPQSxJQUFJRSxTQUFTLEtBQUs7QUFFN0I7QUFLTyxTQUFTTCxrQkFBa0JHLEdBQXNCO0lBQ3RELElBQUksT0FBT0EsUUFBUSxZQUFZQSxRQUFRLE1BQU07UUFBQyxPQUFPO0lBQU07SUFFM0QsT0FDRSxPQUFPQSxJQUFJSSxJQUFJLEtBQUssWUFDcEIsT0FBT0osSUFBSUssS0FBSyxLQUFLLFlBQ3JCLE9BQU9MLElBQUlNLEtBQUssS0FBSyxZQUNyQixP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