{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\admin\\products\\ProductPricing.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { UseFormReturn, FieldErrors } from 'react-hook-form';\r\nimport { AdminCard } from '../ui/AdminCard';\r\nimport { Calculator, DollarSign, TrendingUp, AlertCircle } from 'lucide-react';\r\nimport { cn } from '@/lib/core/utils';\r\n\r\ninterface ProductFormData {\r\n  price: number;\r\n  compare_price?: number;\r\n  cost_price?: number;\r\n}\r\n\r\ninterface ProductPricingProps {\r\n  form: UseFormReturn<any>;\r\n  errors: FieldErrors<any>;\r\n  className?: string;\r\n}\r\n\r\nexport function ProductPricing({ form, errors, className }: ProductPricingProps) {\r\n  const { register, watch, setValue } = form;\r\n  const watchedData = watch();\r\n\r\n  // Calculate profit margin\r\n  const calculateMargin = () => {\r\n    const price = watchedData.price || 0;\r\n    const cost = watchedData.cost_price || 0;\r\n    \r\n    if (cost === 0) {return 0;}\r\n    return ((price - cost) / price) * 100;\r\n  };\r\n\r\n  // Calculate markup\r\n  const calculateMarkup = () => {\r\n    const price = watchedData.price || 0;\r\n    const cost = watchedData.cost_price || 0;\r\n    \r\n    if (cost === 0) {return 0;}\r\n    return ((price - cost) / cost) * 100;\r\n  };\r\n\r\n  // Calculate discount percentage\r\n  const calculateDiscount = () => {\r\n    const price = watchedData.price || 0;\r\n    const comparePrice = watchedData.compare_price || 0;\r\n    \r\n    if (comparePrice === 0 || comparePrice <= price) {return 0;}\r\n    return ((comparePrice - price) / comparePrice) * 100;\r\n  };\r\n\r\n  const margin = calculateMargin();\r\n  const markup = calculateMarkup();\r\n  const discount = calculateDiscount();\r\n\r\n  // Pricing suggestions\r\n  const suggestPricing = (cost: number) => {\r\n    if (cost === 0) {return [];}\r\n    \r\n    return [\r\n      { label: '50% Margen', value: cost / 0.5 },\r\n      { label: '60% Margen', value: cost / 0.4 },\r\n      { label: '70% Margen', value: cost / 0.3 },\r\n    ];\r\n  };\r\n\r\n  const suggestions = suggestPricing(watchedData.cost_price || 0);\r\n\r\n  return (\r\n    <div className={cn(\"space-y-6\", className)}>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main Pricing */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          <AdminCard title=\"Configuración de Precios\" className=\"p-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {/* Selling Price */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Precio de Venta *\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    {...register('price', { valueAsNumber: true })}\r\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                </div>\r\n                {errors.price && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.price.message}</p>\r\n                )}\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Precio al que se venderá el producto\r\n                </p>\r\n              </div>\r\n\r\n              {/* Compare Price */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Precio de Comparación\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    {...register('compare_price', { valueAsNumber: true })}\r\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                </div>\r\n                {errors.compare_price && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.compare_price.message}</p>\r\n                )}\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Precio original para mostrar descuentos\r\n                </p>\r\n              </div>\r\n\r\n              {/* Cost Price */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Precio de Costo\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    {...register('cost_price', { valueAsNumber: true })}\r\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blaze-orange-500 focus:border-transparent\"\r\n                    placeholder=\"0.00\"\r\n                  />\r\n                </div>\r\n                {errors.cost_price && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.cost_price.message}</p>\r\n                )}\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Costo del producto (no visible para clientes)\r\n                </p>\r\n              </div>\r\n\r\n              {/* Discount Display */}\r\n              {discount > 0 && (\r\n                <div className=\"flex items-center space-x-2 p-3 bg-green-50 rounded-lg\">\r\n                  <TrendingUp className=\"w-5 h-5 text-green-600\" />\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-green-800\">\r\n                      Descuento: {discount.toFixed(1)}%\r\n                    </p>\r\n                    <p className=\"text-xs text-green-600\">\r\n                      Ahorro: ${((watchedData.compare_price || 0) - (watchedData.price || 0)).toFixed(2)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </AdminCard>\r\n\r\n          {/* Pricing Suggestions */}\r\n          {suggestions.length > 0 && (\r\n            <AdminCard title=\"Sugerencias de Precio\" className=\"p-6\">\r\n              <div className=\"space-y-3\">\r\n                <p className=\"text-sm text-gray-600\">\r\n                  Basado en tu precio de costo de ${(watchedData.cost_price || 0).toFixed(2)}:\r\n                </p>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                  {suggestions.map((suggestion, index) => (\r\n                    <button\r\n                      key={index}\r\n                      type=\"button\"\r\n                      onClick={() => setValue('price', suggestion.value)}\r\n                      className=\"p-3 border border-gray-200 rounded-lg hover:border-blaze-orange-300 hover:bg-blaze-orange-50 transition-colors text-left\"\r\n                    >\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        {suggestion.label}\r\n                      </div>\r\n                      <div className=\"text-lg font-bold text-blaze-orange-600\">\r\n                        ${suggestion.value.toFixed(2)}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </AdminCard>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pricing Analytics */}\r\n        <div className=\"space-y-6\">\r\n          {/* Profit Metrics */}\r\n          <AdminCard title=\"Métricas de Rentabilidad\" className=\"p-6\">\r\n            <div className=\"space-y-4\">\r\n              {/* Profit Margin */}\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-700\">Margen de Ganancia</p>\r\n                  <p className=\"text-xs text-gray-500\">Ganancia / Precio de Venta</p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className={cn(\r\n                    \"text-lg font-bold\",\r\n                    margin >= 50 ? \"text-green-600\" : \r\n                    margin >= 30 ? \"text-yellow-600\" : \"text-red-600\"\r\n                  )}>\r\n                    {margin.toFixed(1)}%\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Markup */}\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-700\">Markup</p>\r\n                  <p className=\"text-xs text-gray-500\">Ganancia / Costo</p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-lg font-bold text-gray-900\">\r\n                    {markup.toFixed(1)}%\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Profit Amount */}\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-700\">Ganancia por Unidad</p>\r\n                  <p className=\"text-xs text-gray-500\">Precio - Costo</p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-lg font-bold text-gray-900\">\r\n                    ${((watchedData.price || 0) - (watchedData.cost_price || 0)).toFixed(2)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </AdminCard>\r\n\r\n          {/* Pricing Alerts */}\r\n          <AdminCard title=\"Alertas de Precio\" className=\"p-6\">\r\n            <div className=\"space-y-3\">\r\n              {margin < 20 && watchedData.cost_price > 0 && (\r\n                <div className=\"flex items-start space-x-2 p-3 bg-red-50 rounded-lg\">\r\n                  <AlertCircle className=\"w-5 h-5 text-red-500 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-red-800\">\r\n                      Margen Bajo\r\n                    </p>\r\n                    <p className=\"text-xs text-red-600\">\r\n                      El margen de ganancia es menor al 20%\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {watchedData.compare_price > 0 && watchedData.price >= watchedData.compare_price && (\r\n                <div className=\"flex items-start space-x-2 p-3 bg-yellow-50 rounded-lg\">\r\n                  <AlertCircle className=\"w-5 h-5 text-yellow-500 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-yellow-800\">\r\n                      Sin Descuento\r\n                    </p>\r\n                    <p className=\"text-xs text-yellow-600\">\r\n                      El precio de venta debe ser menor al precio de comparación\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {!watchedData.cost_price && (\r\n                <div className=\"flex items-start space-x-2 p-3 bg-blue-50 rounded-lg\">\r\n                  <Calculator className=\"w-5 h-5 text-blue-500 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-blue-800\">\r\n                      Agrega el Costo\r\n                    </p>\r\n                    <p className=\"text-xs text-blue-600\">\r\n                      Ingresa el precio de costo para ver métricas de rentabilidad\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </AdminCard>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["ProductPricing","form","errors","className","register","watch","setValue","watchedData","calculateMargin","price","cost","cost_price","calculateMarkup","calculateDiscount","comparePrice","compare_price","margin","markup","discount","suggestPricing","label","value","suggestions","div","cn","AdminCard","title","DollarSign","input","type","step","min","valueAsNumber","placeholder","p","message","TrendingUp","toFixed","length","map","suggestion","index","button","onClick","AlertCircle","Calculator"],"mappings":"AAAA;;;;;+BAmBgBA;;;eAAAA;;;;2BAhBU;6BACsC;uBAC7C;AAcZ,SAASA,eAAe,EAAEC,IAAI,EAAEC,MAAM,EAAEC,SAAS,EAAuB;IAC7E,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,EAAE,GAAGL;IACtC,MAAMM,cAAcF;IAEpB,0BAA0B;IAC1B,MAAMG,kBAAkB;QACtB,MAAMC,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMC,OAAOH,YAAYI,UAAU,IAAI;QAEvC,IAAID,SAAS,GAAG;YAAC,OAAO;QAAE;QAC1B,OAAO,AAAED,CAAAA,QAAQC,IAAG,IAAKD,QAAS;IACpC;IAEA,mBAAmB;IACnB,MAAMG,kBAAkB;QACtB,MAAMH,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMC,OAAOH,YAAYI,UAAU,IAAI;QAEvC,IAAID,SAAS,GAAG;YAAC,OAAO;QAAE;QAC1B,OAAO,AAAED,CAAAA,QAAQC,IAAG,IAAKA,OAAQ;IACnC;IAEA,gCAAgC;IAChC,MAAMG,oBAAoB;QACxB,MAAMJ,QAAQF,YAAYE,KAAK,IAAI;QACnC,MAAMK,eAAeP,YAAYQ,aAAa,IAAI;QAElD,IAAID,iBAAiB,KAAKA,gBAAgBL,OAAO;YAAC,OAAO;QAAE;QAC3D,OAAO,AAAEK,CAAAA,eAAeL,KAAI,IAAKK,eAAgB;IACnD;IAEA,MAAME,SAASR;IACf,MAAMS,SAASL;IACf,MAAMM,WAAWL;IAEjB,sBAAsB;IACtB,MAAMM,iBAAiB,CAACT;QACtB,IAAIA,SAAS,GAAG;YAAC,OAAO,EAAE;QAAC;QAE3B,OAAO;YACL;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;YACzC;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;YACzC;gBAAEU,OAAO;gBAAcC,OAAOX,OAAO;YAAI;SAC1C;IACH;IAEA,MAAMY,cAAcH,eAAeZ,YAAYI,UAAU,IAAI;IAE7D,qBACE,qBAACY;QAAIpB,WAAWqB,IAAAA,SAAE,EAAC,aAAarB;kBAC9B,cAAA,sBAACoB;YAAIpB,WAAU;;8BAEb,sBAACoB;oBAAIpB,WAAU;;sCACb,qBAACsB,oBAAS;4BAACC,OAAM;4BAA2BvB,WAAU;sCACpD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDAEb,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,SAAS;4DAAE4B,eAAe;wDAAK,EAAE;wDAC9C7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOO,KAAK,kBACX,qBAACyB;gDAAE/B,WAAU;0DAA6BD,OAAOO,KAAK,CAAC0B,OAAO;;0DAEhE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;kDAM5C,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,iBAAiB;4DAAE4B,eAAe;wDAAK,EAAE;wDACtD7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOa,aAAa,kBACnB,qBAACmB;gDAAE/B,WAAU;0DAA6BD,OAAOa,aAAa,CAACoB,OAAO;;0DAExE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;kDAM5C,sBAACoB;;0DACC,qBAACH;gDAAMjB,WAAU;0DAA+C;;0DAGhE,sBAACoB;gDAAIpB,WAAU;;kEACb,qBAACwB,uBAAU;wDAACxB,WAAU;;kEACtB,qBAACyB;wDACCC,MAAK;wDACLC,MAAK;wDACLC,KAAI;wDACH,GAAG3B,SAAS,cAAc;4DAAE4B,eAAe;wDAAK,EAAE;wDACnD7B,WAAU;wDACV8B,aAAY;;;;4CAGf/B,OAAOS,UAAU,kBAChB,qBAACuB;gDAAE/B,WAAU;0DAA6BD,OAAOS,UAAU,CAACwB,OAAO;;0DAErE,qBAACD;gDAAE/B,WAAU;0DAA6B;;;;oCAM3Ce,WAAW,mBACV,sBAACK;wCAAIpB,WAAU;;0DACb,qBAACiC,uBAAU;gDAACjC,WAAU;;0DACtB,sBAACoB;;kEACC,sBAACW;wDAAE/B,WAAU;;4DAAqC;4DACpCe,SAASmB,OAAO,CAAC;4DAAG;;;kEAElC,sBAACH;wDAAE/B,WAAU;;4DAAyB;4DACzB,CAAA,AAACI,CAAAA,YAAYQ,aAAa,IAAI,CAAA,IAAMR,CAAAA,YAAYE,KAAK,IAAI,CAAA,CAAC,EAAG4B,OAAO,CAAC;;;;;;;;;;wBAS3Ff,YAAYgB,MAAM,GAAG,mBACpB,qBAACb,oBAAS;4BAACC,OAAM;4BAAwBvB,WAAU;sCACjD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDACb,sBAAC+B;wCAAE/B,WAAU;;4CAAwB;4CACAI,CAAAA,YAAYI,UAAU,IAAI,CAAA,EAAG0B,OAAO,CAAC;4CAAG;;;kDAE7E,qBAACd;wCAAIpB,WAAU;kDACZmB,YAAYiB,GAAG,CAAC,CAACC,YAAYC,sBAC5B,sBAACC;gDAECb,MAAK;gDACLc,SAAS,IAAMrC,SAAS,SAASkC,WAAWnB,KAAK;gDACjDlB,WAAU;;kEAEV,qBAACoB;wDAAIpB,WAAU;kEACZqC,WAAWpB,KAAK;;kEAEnB,sBAACG;wDAAIpB,WAAU;;4DAA0C;4DACrDqC,WAAWnB,KAAK,CAACgB,OAAO,CAAC;;;;+CATxBI;;;;;;;8BAoBnB,sBAAClB;oBAAIpB,WAAU;;sCAEb,qBAACsB,oBAAS;4BAACC,OAAM;4BAA2BvB,WAAU;sCACpD,cAAA,sBAACoB;gCAAIpB,WAAU;;kDAEb,sBAACoB;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAWqB,IAAAA,SAAE,EACd,qBACAR,UAAU,KAAK,mBACfA,UAAU,KAAK,oBAAoB;;wDAElCA,OAAOqB,OAAO,CAAC;wDAAG;;;;;;kDAMzB,sBAACd;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAU;;wDACVc,OAAOoB,OAAO,CAAC;wDAAG;;;;;;kDAMzB,sBAACd;wCAAIpB,WAAU;;0DACb,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEACjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;0DAEvC,qBAACoB;gDAAIpB,WAAU;0DACb,cAAA,sBAAC+B;oDAAE/B,WAAU;;wDAAkC;wDAC1C,CAAA,AAACI,CAAAA,YAAYE,KAAK,IAAI,CAAA,IAAMF,CAAAA,YAAYI,UAAU,IAAI,CAAA,CAAC,EAAG0B,OAAO,CAAC;;;;;;;;;sCAQ/E,qBAACZ,oBAAS;4BAACC,OAAM;4BAAoBvB,WAAU;sCAC7C,cAAA,sBAACoB;gCAAIpB,WAAU;;oCACZa,SAAS,MAAMT,YAAYI,UAAU,GAAG,mBACvC,sBAACY;wCAAIpB,WAAU;;0DACb,qBAACyC,wBAAW;gDAACzC,WAAU;;0DACvB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAmC;;kEAGhD,qBAAC+B;wDAAE/B,WAAU;kEAAuB;;;;;;oCAOzCI,YAAYQ,aAAa,GAAG,KAAKR,YAAYE,KAAK,IAAIF,YAAYQ,aAAa,kBAC9E,sBAACQ;wCAAIpB,WAAU;;0DACb,qBAACyC,wBAAW;gDAACzC,WAAU;;0DACvB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAsC;;kEAGnD,qBAAC+B;wDAAE/B,WAAU;kEAA0B;;;;;;oCAO5C,CAACI,YAAYI,UAAU,kBACtB,sBAACY;wCAAIpB,WAAU;;0DACb,qBAAC0C,uBAAU;gDAAC1C,WAAU;;0DACtB,sBAACoB;;kEACC,qBAACW;wDAAE/B,WAAU;kEAAoC;;kEAGjD,qBAAC+B;wDAAE/B,WAAU;kEAAwB;;;;;;;;;;;;;;AAYzD"}