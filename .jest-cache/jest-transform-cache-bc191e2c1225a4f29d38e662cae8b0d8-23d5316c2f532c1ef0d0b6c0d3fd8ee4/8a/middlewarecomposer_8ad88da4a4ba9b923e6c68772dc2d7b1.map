{"version":3,"names":["cov_130k2fh29r","actualCoverage","s","composeMiddlewares","f","createMiddleware","withAdminMiddlewares","withStandardMiddlewares","withValidatedAdminMiddlewares","middlewares","handler","reduceRight","acc","middleware","withErrorHandler","require","withApiLogging","permissions","b","withAdminAuth","schema","withValidation"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\api\\middleware-composer.ts"],"sourcesContent":["// ðŸ”§ Enterprise Middleware Composer\r\n\r\nexport function composeMiddlewares(...middlewares: Function[]) {\r\n  return function (handler: Function) {\r\n    return middlewares.reduceRight(\r\n      (acc, middleware) => middleware(acc),\r\n      handler\r\n    );\r\n  };\r\n}\r\n\r\n// Utility function to create typed middleware\r\nexport function createMiddleware<T = any>(\r\n  middleware: (handler: Function) => Function\r\n) {\r\n  return middleware;\r\n}\r\n\r\n// Common middleware combinations\r\nexport const withStandardMiddlewares = (handler: Function) => {\r\n  const { withErrorHandler } = require('./error-handler');\r\n  const { withApiLogging } = require('./api-logger');\r\n  \r\n  return composeMiddlewares(\r\n    withErrorHandler,\r\n    withApiLogging\r\n  )(handler);\r\n};\r\n\r\nexport const withAdminMiddlewares = (permissions: string[] = []) => {\r\n  return (handler: Function) => {\r\n    const { withErrorHandler } = require('./error-handler');\r\n    const { withApiLogging } = require('./api-logger');\r\n    const { withAdminAuth } = require('../auth/api-auth-middleware');\r\n    \r\n    return composeMiddlewares(\r\n      withErrorHandler,\r\n      withApiLogging,\r\n      withAdminAuth(permissions)\r\n    )(handler);\r\n  };\r\n};\r\n\r\nexport const withValidatedAdminMiddlewares = (\r\n  schema: any,\r\n  permissions: string[] = []\r\n) => {\r\n  return (handler: Function) => {\r\n    const { withErrorHandler } = require('./error-handler');\r\n    const { withApiLogging } = require('./api-logger');\r\n    const { withAdminAuth } = require('../auth/api-auth-middleware');\r\n    const { withValidation } = require('../validation/admin-schemas');\r\n    \r\n    return composeMiddlewares(\r\n      withErrorHandler,\r\n      withApiLogging,\r\n      withAdminAuth(permissions),\r\n      withValidation(schema)\r\n    )(handler);\r\n  };\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}