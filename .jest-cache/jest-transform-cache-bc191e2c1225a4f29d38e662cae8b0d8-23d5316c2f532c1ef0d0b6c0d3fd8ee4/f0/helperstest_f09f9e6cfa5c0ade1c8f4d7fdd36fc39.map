{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\utils\\helpers.test.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - TEST UTILITY HELPERS\n// ===================================\n\nimport {\n  formatPrice,\n  calculateDiscount,\n  validateEmail,\n  generateSlug,\n  formatPhoneNumber,\n  calculateShipping,\n  validateCartItem,\n  sanitizeInput,\n} from '@/utils/helpers'\n\ndescribe('Utility Helpers', () => {\n  describe('formatPrice', () => {\n    it('formats prices correctly for Argentine pesos', () => {\n      expect(formatPrice(1000)).toBe('$1.000')\n      expect(formatPrice(1500.5)).toBe('$1.501') // Rounded\n      expect(formatPrice(10000)).toBe('$10.000')\n      expect(formatPrice(0)).toBe('$0')\n    })\n\n    it('handles negative prices', () => {\n      expect(formatPrice(-1000)).toBe('$-1.000')\n    })\n\n    it('handles very large numbers', () => {\n      expect(formatPrice(1000000)).toBe('$1.000.000')\n    })\n  })\n\n  describe('calculateDiscount', () => {\n    it('calculates discount percentage correctly', () => {\n      expect(calculateDiscount(1000, 800)).toBe(20)\n      expect(calculateDiscount(2000, 1500)).toBe(25)\n      expect(calculateDiscount(100, 90)).toBe(10)\n    })\n\n    it('returns 0 when no discount', () => {\n      expect(calculateDiscount(1000, 1000)).toBe(0)\n      expect(calculateDiscount(1000, 1100)).toBe(0) // Higher discounted price\n    })\n\n    it('handles edge cases', () => {\n      expect(calculateDiscount(0, 0)).toBe(0)\n      expect(calculateDiscount(100, 0)).toBe(100)\n      expect(calculateDiscount(null, 50)).toBe(0)\n      expect(calculateDiscount(100, null)).toBe(0)\n    })\n\n    it('rounds to nearest integer', () => {\n      expect(calculateDiscount(1000, 666)).toBe(33) // 33.4% rounded\n      expect(calculateDiscount(1000, 667)).toBe(33) // 33.3% rounded\n    })\n  })\n\n  describe('validateEmail', () => {\n    it('validates correct email formats', () => {\n      expect(validateEmail('test@example.com')).toBe(true)\n      expect(validateEmail('user.name@domain.co.ar')).toBe(true)\n      expect(validateEmail('test+tag@gmail.com')).toBe(true)\n    })\n\n    it('rejects invalid email formats', () => {\n      expect(validateEmail('invalid-email')).toBe(false)\n      expect(validateEmail('test@')).toBe(false)\n      expect(validateEmail('@domain.com')).toBe(false)\n      expect(validateEmail('test..test@domain.com')).toBe(false)\n      expect(validateEmail('')).toBe(false)\n      expect(validateEmail('test@domain')).toBe(false) // No TLD\n      expect(validateEmail('test@.com')).toBe(false) // Invalid domain\n    })\n\n    it('handles edge cases', () => {\n      expect(validateEmail('a@bb.co')).toBe(true) // Minimal valid email with 2-char domain\n    })\n  })\n\n  describe('generateSlug', () => {\n    it('generates slugs from product names', () => {\n      expect(generateSlug('Sherwin Williams ProClassic Blanco 4L')).toBe(\n        'sherwin-williams-proclassic-blanco-4l'\n      )\n      expect(generateSlug('Pintura Látex Interior')).toBe('pintura-latex-interior')\n      expect(generateSlug('Set 3 Pinceles Profesionales')).toBe('set-3-pinceles-profesionales')\n    })\n\n    it('handles special characters', () => {\n      expect(generateSlug('Esmalte Sintético Ñandú')).toBe('esmalte-sintetico-nandu')\n      expect(generateSlug('Antióxido Rojo')).toBe('antioxido-rojo')\n      expect(generateSlug('Rodillo 23cm (Pack x2)')).toBe('rodillo-23cm-pack-x2')\n    })\n\n    it('handles multiple spaces and special cases', () => {\n      expect(generateSlug('  Multiple   Spaces  ')).toBe('multiple-spaces')\n      expect(generateSlug('UPPERCASE TEXT')).toBe('uppercase-text')\n      expect(generateSlug('123 Numbers 456')).toBe('123-numbers-456')\n    })\n\n    it('handles empty or invalid input', () => {\n      expect(generateSlug('')).toBe('')\n      expect(generateSlug('   ')).toBe('')\n      expect(generateSlug('!!!')).toBe('')\n    })\n  })\n\n  describe('formatPhoneNumber', () => {\n    it('formats Argentine phone numbers', () => {\n      expect(formatPhoneNumber('1234567890')).toBe('(123) 456-7890')\n      expect(formatPhoneNumber('01112345678')).toBe('(011) 1234-5678')\n    })\n\n    it('handles different input formats', () => {\n      expect(formatPhoneNumber('123-456-7890')).toBe('(123) 456-7890')\n      expect(formatPhoneNumber('(123) 456-7890')).toBe('(123) 456-7890')\n      expect(formatPhoneNumber('+54 11 1234-5678')).toBe('+54 11 1234-5678') // Keep original if not standard format\n    })\n\n    it('handles invalid phone numbers', () => {\n      expect(formatPhoneNumber('123')).toBe('123') // Too short\n      expect(formatPhoneNumber('')).toBe('')\n      expect(formatPhoneNumber('abc')).toBe('abc') // Non-numeric\n    })\n  })\n\n  describe('calculateShipping', () => {\n    it('calculates shipping based on weight and distance', () => {\n      expect(calculateShipping(1, 'CABA')).toBe(500) // Base rate\n      expect(calculateShipping(5, 'Buenos Aires')).toBe(1200) // Higher weight (800 * 1.5)\n      expect(calculateShipping(1, 'Córdoba')).toBe(1200) // Different province\n    })\n\n    it('applies free shipping threshold', () => {\n      expect(calculateShipping(1, 'CABA', 15000)).toBe(0) // Free shipping over threshold\n      expect(calculateShipping(1, 'CABA', 10000)).toBe(500) // Below threshold\n    })\n\n    it('handles express shipping', () => {\n      expect(calculateShipping(1, 'CABA', 0, true)).toBe(1000) // Express shipping\n      expect(calculateShipping(1, 'Buenos Aires', 0, true)).toBe(1600) // Express + distance\n    })\n  })\n\n  describe('validateCartItem', () => {\n    const validItem = {\n      id: 1,\n      name: 'Test Product',\n      price: 1000,\n      quantity: 2,\n      stock: 10,\n    }\n\n    it('validates correct cart items', () => {\n      expect(validateCartItem(validItem)).toBe(true)\n    })\n\n    it('rejects items with missing required fields', () => {\n      expect(validateCartItem({ ...validItem, id: undefined })).toBe(false)\n      expect(validateCartItem({ ...validItem, name: '' })).toBe(false)\n      expect(validateCartItem({ ...validItem, price: 0 })).toBe(false)\n    })\n\n    it('rejects items with invalid quantities', () => {\n      expect(validateCartItem({ ...validItem, quantity: 0 })).toBe(false)\n      expect(validateCartItem({ ...validItem, quantity: -1 })).toBe(false)\n      expect(validateCartItem({ ...validItem, quantity: 11 })).toBe(false) // Exceeds stock\n    })\n\n    it('rejects items with invalid prices', () => {\n      expect(validateCartItem({ ...validItem, price: -100 })).toBe(false)\n      expect(validateCartItem({ ...validItem, price: 'invalid' })).toBe(false)\n    })\n  })\n\n  describe('sanitizeInput', () => {\n    it('removes potentially dangerous HTML', () => {\n      expect(sanitizeInput('<script>alert(\"xss\")</script>')).toBe('')\n      expect(sanitizeInput('<img src=\"x\" onerror=\"alert(1)\">')).toBe('')\n      expect(sanitizeInput('Hello <b>World</b>')).toBe('Hello World')\n    })\n\n    it('preserves safe text', () => {\n      expect(sanitizeInput('Normal text')).toBe('Normal text')\n      expect(sanitizeInput('Text with números 123')).toBe('Text with números 123')\n      expect(sanitizeInput('Email: test@example.com')).toBe('Email: test@example.com')\n    })\n\n    it('handles special characters safely', () => {\n      expect(sanitizeInput('Price: $1,000 & more')).toBe('Price: $1,000 & more')\n      expect(sanitizeInput('Ñandú & Cóndor')).toBe('Ñandú & Cóndor')\n    })\n\n    it('handles empty and null inputs', () => {\n      expect(sanitizeInput('')).toBe('')\n      expect(sanitizeInput(null)).toBe('')\n      expect(sanitizeInput(undefined)).toBe('')\n    })\n  })\n\n  describe('Edge Cases and Error Handling', () => {\n    it('handles null and undefined inputs gracefully', () => {\n      expect(formatPrice(null)).toBe('$0')\n      expect(formatPrice(undefined)).toBe('$0')\n      expect(calculateDiscount(null, 100)).toBe(0)\n      expect(validateEmail(null)).toBe(false)\n      expect(generateSlug(null)).toBe('')\n    })\n\n    it('handles extreme values', () => {\n      expect(formatPrice(Number.MAX_SAFE_INTEGER)).toBeDefined()\n      expect(calculateDiscount(Number.MAX_SAFE_INTEGER, 1)).toBe(100)\n    })\n\n    it('handles non-string inputs for string functions', () => {\n      expect(generateSlug(123)).toBe('123')\n      expect(validateEmail(123)).toBe(false)\n      expect(sanitizeInput(123)).toBe('123')\n    })\n  })\n})\n"],"names":["describe","it","expect","formatPrice","toBe","calculateDiscount","validateEmail","generateSlug","formatPhoneNumber","calculateShipping","validItem","id","name","price","quantity","stock","validateCartItem","undefined","sanitizeInput","Number","MAX_SAFE_INTEGER","toBeDefined"],"mappings":"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"}