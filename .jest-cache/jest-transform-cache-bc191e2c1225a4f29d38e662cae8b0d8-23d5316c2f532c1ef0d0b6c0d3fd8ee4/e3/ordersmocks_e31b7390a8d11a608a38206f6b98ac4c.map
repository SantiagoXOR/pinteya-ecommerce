{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\setup\\orders-mocks.js"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - ORDERS ENTERPRISE MOCKS\r\n// ===================================\r\n// Mocks centralizados para testing de órdenes siguiendo patrones Fase 1\r\n\r\n// ===================================\r\n// MOCK DATA ORDERS\r\n// ===================================\r\n\r\nexport const mockUser = {\r\n  id: 'test-user-id',\r\n  clerk_id: 'test-clerk-id',\r\n  email: 'test@example.com',\r\n  name: 'Test User',\r\n  phone: '+54911234567',\r\n  role: 'customer'\r\n};\r\n\r\nexport const mockAdminUser = {\r\n  id: 'admin-user-id',\r\n  clerk_id: 'admin-clerk-id',\r\n  email: 'santiago@xor.com.ar',\r\n  name: 'Admin User',\r\n  phone: '+54911234567',\r\n  role: 'admin'\r\n};\r\n\r\nexport const mockProducts = [\r\n  {\r\n    id: 1,\r\n    name: 'Pintura Latex Interior Blanco 20L',\r\n    images: ['https://example.com/image1.jpg'],\r\n    sku: 'PAINT-001',\r\n    category: 'Pinturas',\r\n    price: 15000,\r\n    stock: 50\r\n  },\r\n  {\r\n    id: 2,\r\n    name: 'Rodillo Antigota 23cm',\r\n    images: ['https://example.com/image2.jpg'],\r\n    sku: 'TOOL-001',\r\n    category: 'Herramientas',\r\n    price: 2500,\r\n    stock: 25\r\n  }\r\n];\r\n\r\nexport const mockOrderItems = [\r\n  {\r\n    id: 'item-1',\r\n    order_id: 'order-1',\r\n    product_id: 1,\r\n    quantity: 2,\r\n    unit_price: 15000,\r\n    total_price: 30000,\r\n    products: mockProducts[0]\r\n  },\r\n  {\r\n    id: 'item-2',\r\n    order_id: 'order-1',\r\n    product_id: 2,\r\n    quantity: 1,\r\n    unit_price: 2500,\r\n    total_price: 2500,\r\n    products: mockProducts[1]\r\n  }\r\n];\r\n\r\nexport const mockShippingAddress = {\r\n  street_name: 'Av. Corrientes',\r\n  street_number: '1234',\r\n  zip_code: '1000',\r\n  city_name: 'Buenos Aires',\r\n  state_name: 'CABA'\r\n};\r\n\r\nexport const mockOrders = [\r\n  {\r\n    id: 'order-1',\r\n    order_number: 'ORD-1234567890-ABC123',\r\n    user_id: 'test-user-id',\r\n    status: 'pending',\r\n    payment_status: 'pending',\r\n    fulfillment_status: 'unfulfilled',\r\n    total_amount: 32500,\r\n    currency: 'ARS',\r\n    shipping_address: JSON.stringify(mockShippingAddress),\r\n    notes: 'Entrega en horario de oficina',\r\n    admin_notes: null,\r\n    tracking_number: null,\r\n    carrier: null,\r\n    estimated_delivery: null,\r\n    metadata: {},\r\n    created_at: '2024-01-01T10:00:00Z',\r\n    updated_at: '2024-01-01T10:00:00Z',\r\n    user_profiles: mockUser,\r\n    order_items: mockOrderItems\r\n  },\r\n  {\r\n    id: 'order-2',\r\n    order_number: 'ORD-1234567891-DEF456',\r\n    user_id: 'test-user-id',\r\n    status: 'shipped',\r\n    payment_status: 'paid',\r\n    fulfillment_status: 'fulfilled',\r\n    total_amount: 15000,\r\n    currency: 'ARS',\r\n    shipping_address: JSON.stringify(mockShippingAddress),\r\n    notes: null,\r\n    admin_notes: 'Envío urgente',\r\n    tracking_number: 'TRACK123456',\r\n    carrier: 'oca',\r\n    estimated_delivery: '2024-01-05T18:00:00Z',\r\n    metadata: {},\r\n    created_at: '2024-01-02T10:00:00Z',\r\n    updated_at: '2024-01-03T15:30:00Z',\r\n    user_profiles: mockUser,\r\n    order_items: [mockOrderItems[0]]\r\n  }\r\n];\r\n\r\nexport const mockStatusHistory = [\r\n  {\r\n    id: 'history-1',\r\n    order_id: 'order-1',\r\n    previous_status: null,\r\n    new_status: 'pending',\r\n    changed_by: 'system',\r\n    reason: 'Orden creada',\r\n    metadata: { trigger: 'automatic' },\r\n    created_at: '2024-01-01T10:00:00Z',\r\n    user_profiles: null\r\n  },\r\n  {\r\n    id: 'history-2',\r\n    order_id: 'order-1',\r\n    previous_status: 'pending',\r\n    new_status: 'confirmed',\r\n    changed_by: 'admin-user-id',\r\n    reason: 'Pago confirmado',\r\n    metadata: { trigger: 'manual' },\r\n    created_at: '2024-01-01T11:00:00Z',\r\n    user_profiles: mockAdminUser\r\n  }\r\n];\r\n\r\nexport const mockOrderNotes = [\r\n  {\r\n    id: 'note-1',\r\n    order_id: 'order-1',\r\n    admin_id: 'admin-user-id',\r\n    note_type: 'internal',\r\n    content: 'Cliente solicitó entrega urgente',\r\n    is_visible_to_customer: false,\r\n    metadata: {},\r\n    created_at: '2024-01-01T12:00:00Z',\r\n    updated_at: '2024-01-01T12:00:00Z',\r\n    user_profiles: mockAdminUser\r\n  }\r\n];\r\n\r\n// ===================================\r\n// MOCK SUPABASE ADMIN PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockSupabaseAdmin = () => {\r\n  const mockSupabaseAdmin = {\r\n    from: jest.fn().mockImplementation((table) => {\r\n      const mockQuery = {\r\n        select: jest.fn().mockReturnThis(),\r\n        insert: jest.fn().mockReturnThis(),\r\n        update: jest.fn().mockReturnThis(),\r\n        delete: jest.fn().mockReturnThis(),\r\n        eq: jest.fn().mockReturnThis(),\r\n        neq: jest.fn().mockReturnThis(),\r\n        in: jest.fn().mockReturnThis(),\r\n        gte: jest.fn().mockReturnThis(),\r\n        lte: jest.fn().mockReturnThis(),\r\n        or: jest.fn().mockReturnThis(),\r\n        order: jest.fn().mockReturnThis(),\r\n        range: jest.fn().mockReturnThis(),\r\n        single: jest.fn().mockReturnThis(),\r\n        limit: jest.fn().mockReturnThis(),\r\n      };\r\n\r\n      // Configurar respuestas específicas por tabla\r\n      if (table === 'orders') {\r\n        mockQuery.select.mockImplementation((columns) => {\r\n          if (columns && columns.includes('count')) {\r\n            return {\r\n              ...mockQuery,\r\n              single: () => Promise.resolve({ data: null, error: null, count: mockOrders.length })\r\n            };\r\n          }\r\n          return {\r\n            ...mockQuery,\r\n            single: () => Promise.resolve({ data: mockOrders[0], error: null }),\r\n            range: () => Promise.resolve({ \r\n              data: mockOrders, \r\n              error: null, \r\n              count: mockOrders.length \r\n            })\r\n          };\r\n        });\r\n\r\n        mockQuery.insert.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          select: () => ({\r\n            ...mockQuery,\r\n            single: () => Promise.resolve({ \r\n              data: { ...mockOrders[0], id: 'new-order-id' }, \r\n              error: null \r\n            })\r\n          })\r\n        }));\r\n\r\n        mockQuery.update.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          select: () => ({\r\n            ...mockQuery,\r\n            single: () => Promise.resolve({ \r\n              data: { ...mockOrders[0], status: 'confirmed' }, \r\n              error: null \r\n            })\r\n          })\r\n        }));\r\n      }\r\n\r\n      if (table === 'order_items') {\r\n        mockQuery.insert.mockImplementation(() => \r\n          Promise.resolve({ data: mockOrderItems, error: null })\r\n        );\r\n      }\r\n\r\n      if (table === 'order_status_history') {\r\n        mockQuery.select.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          eq: () => ({\r\n            ...mockQuery,\r\n            order: () => Promise.resolve({ data: mockStatusHistory, error: null })\r\n          })\r\n        }));\r\n\r\n        mockQuery.insert.mockImplementation(() => \r\n          Promise.resolve({ data: mockStatusHistory[0], error: null })\r\n        );\r\n      }\r\n\r\n      if (table === 'order_notes') {\r\n        mockQuery.select.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          eq: () => ({\r\n            ...mockQuery,\r\n            order: () => Promise.resolve({ data: mockOrderNotes, error: null })\r\n          })\r\n        }));\r\n\r\n        mockQuery.insert.mockImplementation(() => \r\n          Promise.resolve({ data: mockOrderNotes[0], error: null })\r\n        );\r\n      }\r\n\r\n      if (table === 'user_profiles') {\r\n        mockQuery.select.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          eq: () => ({\r\n            ...mockQuery,\r\n            single: () => Promise.resolve({ data: mockUser, error: null })\r\n          })\r\n        }));\r\n      }\r\n\r\n      if (table === 'products') {\r\n        mockQuery.select.mockImplementation(() => ({\r\n          ...mockQuery,\r\n          in: () => Promise.resolve({ data: mockProducts, error: null })\r\n        }));\r\n      }\r\n\r\n      return mockQuery;\r\n    }),\r\n\r\n    // RPC functions\r\n    rpc: jest.fn().mockImplementation((functionName, params) => {\r\n      if (functionName === 'get_daily_order_trends') {\r\n        return Promise.resolve({\r\n          data: [\r\n            { date: '2024-01-01', total_orders: 5, total_revenue: 75000, avg_order_value: 15000 },\r\n            { date: '2024-01-02', total_orders: 3, total_revenue: 45000, avg_order_value: 15000 }\r\n          ],\r\n          error: null\r\n        });\r\n      }\r\n      return Promise.resolve({ data: null, error: null });\r\n    })\r\n  };\r\n\r\n  return mockSupabaseAdmin;\r\n};\r\n\r\n// ===================================\r\n// MOCK CLERK AUTH PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockClerkAuth = (isAdmin = false) => {\r\n  const mockAuth = jest.fn().mockResolvedValue({\r\n    userId: isAdmin ? 'admin-clerk-id' : 'test-clerk-id'\r\n  });\r\n\r\n  const mockCurrentUser = jest.fn().mockResolvedValue({\r\n    id: isAdmin ? 'admin-clerk-id' : 'test-clerk-id',\r\n    emailAddresses: [{\r\n      emailAddress: isAdmin ? 'santiago@xor.com.ar' : 'test@example.com'\r\n    }],\r\n    firstName: isAdmin ? 'Admin' : 'Test',\r\n    lastName: 'User'\r\n  });\r\n\r\n  return { mockAuth, mockCurrentUser };\r\n};\r\n\r\n// ===================================\r\n// MOCK RATE LIMITER PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockRateLimiter = () => {\r\n  const mockCheckRateLimit = jest.fn().mockResolvedValue({\r\n    success: true,\r\n    remaining: 100,\r\n    reset: Date.now() + 3600000\r\n  });\r\n\r\n  const mockAddRateLimitHeaders = jest.fn();\r\n\r\n  return { mockCheckRateLimit, mockAddRateLimitHeaders };\r\n};\r\n\r\n// ===================================\r\n// MOCK LOGGER PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockLogger = () => {\r\n  const mockLogger = {\r\n    log: jest.fn(),\r\n    error: jest.fn(),\r\n    warn: jest.fn(),\r\n    info: jest.fn(),\r\n    debug: jest.fn()\r\n  };\r\n\r\n  return mockLogger;\r\n};\r\n\r\n// ===================================\r\n// MOCK METRICS COLLECTOR PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockMetricsCollector = () => {\r\n  const mockMetricsCollector = {\r\n    recordApiCall: jest.fn(),\r\n    recordError: jest.fn(),\r\n    recordPerformance: jest.fn()\r\n  };\r\n\r\n  return mockMetricsCollector;\r\n};\r\n\r\n// ===================================\r\n// MOCK FETCH PARA ORDERS\r\n// ===================================\r\n\r\nexport const createMockFetch = () => {\r\n  const mockFetch = jest.fn().mockImplementation((url, options) => {\r\n    const method = options?.method || 'GET';\r\n    \r\n    // Mock responses para diferentes endpoints\r\n    if (url.includes('/api/admin/orders') && method === 'GET') {\r\n      return Promise.resolve({\r\n        ok: true,\r\n        status: 200,\r\n        json: () => Promise.resolve({\r\n          data: {\r\n            orders: mockOrders,\r\n            pagination: {\r\n              page: 1,\r\n              limit: 20,\r\n              total: mockOrders.length,\r\n              totalPages: 1,\r\n              hasNextPage: false,\r\n              hasPreviousPage: false\r\n            },\r\n            filters: {}\r\n          },\r\n          success: true,\r\n          error: null\r\n        })\r\n      });\r\n    }\r\n\r\n    if (url.includes('/api/admin/orders') && method === 'POST') {\r\n      return Promise.resolve({\r\n        ok: true,\r\n        status: 201,\r\n        json: () => Promise.resolve({\r\n          data: { ...mockOrders[0], id: 'new-order-id' },\r\n          success: true,\r\n          error: null\r\n        })\r\n      });\r\n    }\r\n\r\n    if (url.includes('/api/admin/orders/') && url.includes('/status') && method === 'POST') {\r\n      return Promise.resolve({\r\n        ok: true,\r\n        status: 200,\r\n        json: () => Promise.resolve({\r\n          data: {\r\n            order: { ...mockOrders[0], status: 'confirmed' },\r\n            previousStatus: 'pending',\r\n            newStatus: 'confirmed',\r\n            statusDescription: 'Confirmada'\r\n          },\r\n          success: true,\r\n          error: null\r\n        })\r\n      });\r\n    }\r\n\r\n    // Default response\r\n    return Promise.resolve({\r\n      ok: true,\r\n      status: 200,\r\n      json: () => Promise.resolve({ data: null, success: true, error: null })\r\n    });\r\n  });\r\n\r\n  return mockFetch;\r\n};\r\n\r\n// ===================================\r\n// HELPER FUNCTIONS\r\n// ===================================\r\n\r\nexport const resetAllMocks = () => {\r\n  jest.clearAllMocks();\r\n};\r\n\r\nexport const createOrderTestData = (overrides = {}) => {\r\n  return {\r\n    ...mockOrders[0],\r\n    ...overrides\r\n  };\r\n};\r\n\r\nexport const createOrderItemTestData = (overrides = {}) => {\r\n  return {\r\n    ...mockOrderItems[0],\r\n    ...overrides\r\n  };\r\n};\r\n\r\nexport const createStatusHistoryTestData = (overrides = {}) => {\r\n  return {\r\n    ...mockStatusHistory[0],\r\n    ...overrides\r\n  };\r\n};\r\n\r\n\r\n\r\n\r\n"],"names":["createMockClerkAuth","createMockFetch","createMockLogger","createMockMetricsCollector","createMockRateLimiter","createMockSupabaseAdmin","createOrderItemTestData","createOrderTestData","createStatusHistoryTestData","mockAdminUser","mockOrderItems","mockOrderNotes","mockOrders","mockProducts","mockShippingAddress","mockStatusHistory","mockUser","resetAllMocks","id","clerk_id","email","name","phone","role","images","sku","category","price","stock","order_id","product_id","quantity","unit_price","total_price","products","street_name","street_number","zip_code","city_name","state_name","order_number","user_id","status","payment_status","fulfillment_status","total_amount","currency","shipping_address","JSON","stringify","notes","admin_notes","tracking_number","carrier","estimated_delivery","metadata","created_at","updated_at","user_profiles","order_items","previous_status","new_status","changed_by","reason","trigger","admin_id","note_type","content","is_visible_to_customer","mockSupabaseAdmin","from","jest","fn","mockImplementation","table","mockQuery","select","mockReturnThis","insert","update","delete","eq","neq","in","gte","lte","or","order","range","single","limit","columns","includes","Promise","resolve","data","error","count","length","rpc","functionName","params","date","total_orders","total_revenue","avg_order_value","isAdmin","mockAuth","mockResolvedValue","userId","mockCurrentUser","emailAddresses","emailAddress","firstName","lastName","mockCheckRateLimit","success","remaining","reset","Date","now","mockAddRateLimitHeaders","mockLogger","log","warn","info","debug","mockMetricsCollector","recordApiCall","recordError","recordPerformance","mockFetch","url","options","method","ok","json","orders","pagination","page","total","totalPages","hasNextPage","hasPreviousPage","filters","previousStatus","newStatus","statusDescription","clearAllMocks","overrides"],"mappings":"AAAA,sCAAsC;AACtC,+CAA+C;AAC/C,sCAAsC;AACtC,wEAAwE;AAExE,sCAAsC;AACtC,mBAAmB;AACnB,sCAAsC;;;;;;;;;;;;QA0SzBA;eAAAA;;QAmEAC;eAAAA;;QA9BAC;eAAAA;;QAgBAC;eAAAA;;QAhCAC;eAAAA;;QAhKAC;eAAAA;;QAiSAC;eAAAA;;QAPAC;eAAAA;;QAcAC;eAAAA;;QA5bAC;eAAAA;;QA8BAC;eAAAA;;QAmGAC;eAAAA;;QAtEAC;eAAAA;;QAlDAC;eAAAA;;QA0CAC;eAAAA;;QAqDAC;eAAAA;;QAjHAC;eAAAA;;QAmbAC;eAAAA;;;AAnbN,MAAMD,WAAW;IACtBE,IAAI;IACJC,UAAU;IACVC,OAAO;IACPC,MAAM;IACNC,OAAO;IACPC,MAAM;AACR;AAEO,MAAMd,gBAAgB;IAC3BS,IAAI;IACJC,UAAU;IACVC,OAAO;IACPC,MAAM;IACNC,OAAO;IACPC,MAAM;AACR;AAEO,MAAMV,eAAe;IAC1B;QACEK,IAAI;QACJG,MAAM;QACNG,QAAQ;YAAC;SAAiC;QAC1CC,KAAK;QACLC,UAAU;QACVC,OAAO;QACPC,OAAO;IACT;IACA;QACEV,IAAI;QACJG,MAAM;QACNG,QAAQ;YAAC;SAAiC;QAC1CC,KAAK;QACLC,UAAU;QACVC,OAAO;QACPC,OAAO;IACT;CACD;AAEM,MAAMlB,iBAAiB;IAC5B;QACEQ,IAAI;QACJW,UAAU;QACVC,YAAY;QACZC,UAAU;QACVC,YAAY;QACZC,aAAa;QACbC,UAAUrB,YAAY,CAAC,EAAE;IAC3B;IACA;QACEK,IAAI;QACJW,UAAU;QACVC,YAAY;QACZC,UAAU;QACVC,YAAY;QACZC,aAAa;QACbC,UAAUrB,YAAY,CAAC,EAAE;IAC3B;CACD;AAEM,MAAMC,sBAAsB;IACjCqB,aAAa;IACbC,eAAe;IACfC,UAAU;IACVC,WAAW;IACXC,YAAY;AACd;AAEO,MAAM3B,aAAa;IACxB;QACEM,IAAI;QACJsB,cAAc;QACdC,SAAS;QACTC,QAAQ;QACRC,gBAAgB;QAChBC,oBAAoB;QACpBC,cAAc;QACdC,UAAU;QACVC,kBAAkBC,KAAKC,SAAS,CAACnC;QACjCoC,OAAO;QACPC,aAAa;QACbC,iBAAiB;QACjBC,SAAS;QACTC,oBAAoB;QACpBC,UAAU,CAAC;QACXC,YAAY;QACZC,YAAY;QACZC,eAAe1C;QACf2C,aAAajD;IACf;IACA;QACEQ,IAAI;QACJsB,cAAc;QACdC,SAAS;QACTC,QAAQ;QACRC,gBAAgB;QAChBC,oBAAoB;QACpBC,cAAc;QACdC,UAAU;QACVC,kBAAkBC,KAAKC,SAAS,CAACnC;QACjCoC,OAAO;QACPC,aAAa;QACbC,iBAAiB;QACjBC,SAAS;QACTC,oBAAoB;QACpBC,UAAU,CAAC;QACXC,YAAY;QACZC,YAAY;QACZC,eAAe1C;QACf2C,aAAa;YAACjD,cAAc,CAAC,EAAE;SAAC;IAClC;CACD;AAEM,MAAMK,oBAAoB;IAC/B;QACEG,IAAI;QACJW,UAAU;QACV+B,iBAAiB;QACjBC,YAAY;QACZC,YAAY;QACZC,QAAQ;QACRR,UAAU;YAAES,SAAS;QAAY;QACjCR,YAAY;QACZE,eAAe;IACjB;IACA;QACExC,IAAI;QACJW,UAAU;QACV+B,iBAAiB;QACjBC,YAAY;QACZC,YAAY;QACZC,QAAQ;QACRR,UAAU;YAAES,SAAS;QAAS;QAC9BR,YAAY;QACZE,eAAejD;IACjB;CACD;AAEM,MAAME,iBAAiB;IAC5B;QACEO,IAAI;QACJW,UAAU;QACVoC,UAAU;QACVC,WAAW;QACXC,SAAS;QACTC,wBAAwB;QACxBb,UAAU,CAAC;QACXC,YAAY;QACZC,YAAY;QACZC,eAAejD;IACjB;CACD;AAMM,MAAMJ,0BAA0B;IACrC,MAAMgE,oBAAoB;QACxBC,MAAMC,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,CAACC;YAClC,MAAMC,YAAY;gBAChBC,QAAQL,KAAKC,EAAE,GAAGK,cAAc;gBAChCC,QAAQP,KAAKC,EAAE,GAAGK,cAAc;gBAChCE,QAAQR,KAAKC,EAAE,GAAGK,cAAc;gBAChCG,QAAQT,KAAKC,EAAE,GAAGK,cAAc;gBAChCI,IAAIV,KAAKC,EAAE,GAAGK,cAAc;gBAC5BK,KAAKX,KAAKC,EAAE,GAAGK,cAAc;gBAC7BM,IAAIZ,KAAKC,EAAE,GAAGK,cAAc;gBAC5BO,KAAKb,KAAKC,EAAE,GAAGK,cAAc;gBAC7BQ,KAAKd,KAAKC,EAAE,GAAGK,cAAc;gBAC7BS,IAAIf,KAAKC,EAAE,GAAGK,cAAc;gBAC5BU,OAAOhB,KAAKC,EAAE,GAAGK,cAAc;gBAC/BW,OAAOjB,KAAKC,EAAE,GAAGK,cAAc;gBAC/BY,QAAQlB,KAAKC,EAAE,GAAGK,cAAc;gBAChCa,OAAOnB,KAAKC,EAAE,GAAGK,cAAc;YACjC;YAEA,8CAA8C;YAC9C,IAAIH,UAAU,UAAU;gBACtBC,UAAUC,MAAM,CAACH,kBAAkB,CAAC,CAACkB;oBACnC,IAAIA,WAAWA,QAAQC,QAAQ,CAAC,UAAU;wBACxC,OAAO;4BACL,GAAGjB,SAAS;4BACZc,QAAQ,IAAMI,QAAQC,OAAO,CAAC;oCAAEC,MAAM;oCAAMC,OAAO;oCAAMC,OAAOrF,WAAWsF,MAAM;gCAAC;wBACpF;oBACF;oBACA,OAAO;wBACL,GAAGvB,SAAS;wBACZc,QAAQ,IAAMI,QAAQC,OAAO,CAAC;gCAAEC,MAAMnF,UAAU,CAAC,EAAE;gCAAEoF,OAAO;4BAAK;wBACjER,OAAO,IAAMK,QAAQC,OAAO,CAAC;gCAC3BC,MAAMnF;gCACNoF,OAAO;gCACPC,OAAOrF,WAAWsF,MAAM;4BAC1B;oBACF;gBACF;gBAEAvB,UAAUG,MAAM,CAACL,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZC,QAAQ,IAAO,CAAA;gCACb,GAAGD,SAAS;gCACZc,QAAQ,IAAMI,QAAQC,OAAO,CAAC;wCAC5BC,MAAM;4CAAE,GAAGnF,UAAU,CAAC,EAAE;4CAAEM,IAAI;wCAAe;wCAC7C8E,OAAO;oCACT;4BACF,CAAA;oBACF,CAAA;gBAEArB,UAAUI,MAAM,CAACN,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZC,QAAQ,IAAO,CAAA;gCACb,GAAGD,SAAS;gCACZc,QAAQ,IAAMI,QAAQC,OAAO,CAAC;wCAC5BC,MAAM;4CAAE,GAAGnF,UAAU,CAAC,EAAE;4CAAE8B,QAAQ;wCAAY;wCAC9CsD,OAAO;oCACT;4BACF,CAAA;oBACF,CAAA;YACF;YAEA,IAAItB,UAAU,eAAe;gBAC3BC,UAAUG,MAAM,CAACL,kBAAkB,CAAC,IAClCoB,QAAQC,OAAO,CAAC;wBAAEC,MAAMrF;wBAAgBsF,OAAO;oBAAK;YAExD;YAEA,IAAItB,UAAU,wBAAwB;gBACpCC,UAAUC,MAAM,CAACH,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZM,IAAI,IAAO,CAAA;gCACT,GAAGN,SAAS;gCACZY,OAAO,IAAMM,QAAQC,OAAO,CAAC;wCAAEC,MAAMhF;wCAAmBiF,OAAO;oCAAK;4BACtE,CAAA;oBACF,CAAA;gBAEArB,UAAUG,MAAM,CAACL,kBAAkB,CAAC,IAClCoB,QAAQC,OAAO,CAAC;wBAAEC,MAAMhF,iBAAiB,CAAC,EAAE;wBAAEiF,OAAO;oBAAK;YAE9D;YAEA,IAAItB,UAAU,eAAe;gBAC3BC,UAAUC,MAAM,CAACH,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZM,IAAI,IAAO,CAAA;gCACT,GAAGN,SAAS;gCACZY,OAAO,IAAMM,QAAQC,OAAO,CAAC;wCAAEC,MAAMpF;wCAAgBqF,OAAO;oCAAK;4BACnE,CAAA;oBACF,CAAA;gBAEArB,UAAUG,MAAM,CAACL,kBAAkB,CAAC,IAClCoB,QAAQC,OAAO,CAAC;wBAAEC,MAAMpF,cAAc,CAAC,EAAE;wBAAEqF,OAAO;oBAAK;YAE3D;YAEA,IAAItB,UAAU,iBAAiB;gBAC7BC,UAAUC,MAAM,CAACH,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZM,IAAI,IAAO,CAAA;gCACT,GAAGN,SAAS;gCACZc,QAAQ,IAAMI,QAAQC,OAAO,CAAC;wCAAEC,MAAM/E;wCAAUgF,OAAO;oCAAK;4BAC9D,CAAA;oBACF,CAAA;YACF;YAEA,IAAItB,UAAU,YAAY;gBACxBC,UAAUC,MAAM,CAACH,kBAAkB,CAAC,IAAO,CAAA;wBACzC,GAAGE,SAAS;wBACZQ,IAAI,IAAMU,QAAQC,OAAO,CAAC;gCAAEC,MAAMlF;gCAAcmF,OAAO;4BAAK;oBAC9D,CAAA;YACF;YAEA,OAAOrB;QACT;QAEA,gBAAgB;QAChBwB,KAAK5B,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,CAAC2B,cAAcC;YAC/C,IAAID,iBAAiB,0BAA0B;gBAC7C,OAAOP,QAAQC,OAAO,CAAC;oBACrBC,MAAM;wBACJ;4BAAEO,MAAM;4BAAcC,cAAc;4BAAGC,eAAe;4BAAOC,iBAAiB;wBAAM;wBACpF;4BAAEH,MAAM;4BAAcC,cAAc;4BAAGC,eAAe;4BAAOC,iBAAiB;wBAAM;qBACrF;oBACDT,OAAO;gBACT;YACF;YACA,OAAOH,QAAQC,OAAO,CAAC;gBAAEC,MAAM;gBAAMC,OAAO;YAAK;QACnD;IACF;IAEA,OAAO3B;AACT;AAMO,MAAMrE,sBAAsB,CAAC0G,UAAU,KAAK;IACjD,MAAMC,WAAWpC,KAAKC,EAAE,GAAGoC,iBAAiB,CAAC;QAC3CC,QAAQH,UAAU,mBAAmB;IACvC;IAEA,MAAMI,kBAAkBvC,KAAKC,EAAE,GAAGoC,iBAAiB,CAAC;QAClD1F,IAAIwF,UAAU,mBAAmB;QACjCK,gBAAgB;YAAC;gBACfC,cAAcN,UAAU,wBAAwB;YAClD;SAAE;QACFO,WAAWP,UAAU,UAAU;QAC/BQ,UAAU;IACZ;IAEA,OAAO;QAAEP;QAAUG;IAAgB;AACrC;AAMO,MAAM1G,wBAAwB;IACnC,MAAM+G,qBAAqB5C,KAAKC,EAAE,GAAGoC,iBAAiB,CAAC;QACrDQ,SAAS;QACTC,WAAW;QACXC,OAAOC,KAAKC,GAAG,KAAK;IACtB;IAEA,MAAMC,0BAA0BlD,KAAKC,EAAE;IAEvC,OAAO;QAAE2C;QAAoBM;IAAwB;AACvD;AAMO,MAAMvH,mBAAmB;IAC9B,MAAMwH,aAAa;QACjBC,KAAKpD,KAAKC,EAAE;QACZwB,OAAOzB,KAAKC,EAAE;QACdoD,MAAMrD,KAAKC,EAAE;QACbqD,MAAMtD,KAAKC,EAAE;QACbsD,OAAOvD,KAAKC,EAAE;IAChB;IAEA,OAAOkD;AACT;AAMO,MAAMvH,6BAA6B;IACxC,MAAM4H,uBAAuB;QAC3BC,eAAezD,KAAKC,EAAE;QACtByD,aAAa1D,KAAKC,EAAE;QACpB0D,mBAAmB3D,KAAKC,EAAE;IAC5B;IAEA,OAAOuD;AACT;AAMO,MAAM9H,kBAAkB;IAC7B,MAAMkI,YAAY5D,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,CAAC2D,KAAKC;QACnD,MAAMC,SAASD,SAASC,UAAU;QAElC,2CAA2C;QAC3C,IAAIF,IAAIxC,QAAQ,CAAC,wBAAwB0C,WAAW,OAAO;YACzD,OAAOzC,QAAQC,OAAO,CAAC;gBACrByC,IAAI;gBACJ7F,QAAQ;gBACR8F,MAAM,IAAM3C,QAAQC,OAAO,CAAC;wBAC1BC,MAAM;4BACJ0C,QAAQ7H;4BACR8H,YAAY;gCACVC,MAAM;gCACNjD,OAAO;gCACPkD,OAAOhI,WAAWsF,MAAM;gCACxB2C,YAAY;gCACZC,aAAa;gCACbC,iBAAiB;4BACnB;4BACAC,SAAS,CAAC;wBACZ;wBACA5B,SAAS;wBACTpB,OAAO;oBACT;YACF;QACF;QAEA,IAAIoC,IAAIxC,QAAQ,CAAC,wBAAwB0C,WAAW,QAAQ;YAC1D,OAAOzC,QAAQC,OAAO,CAAC;gBACrByC,IAAI;gBACJ7F,QAAQ;gBACR8F,MAAM,IAAM3C,QAAQC,OAAO,CAAC;wBAC1BC,MAAM;4BAAE,GAAGnF,UAAU,CAAC,EAAE;4BAAEM,IAAI;wBAAe;wBAC7CkG,SAAS;wBACTpB,OAAO;oBACT;YACF;QACF;QAEA,IAAIoC,IAAIxC,QAAQ,CAAC,yBAAyBwC,IAAIxC,QAAQ,CAAC,cAAc0C,WAAW,QAAQ;YACtF,OAAOzC,QAAQC,OAAO,CAAC;gBACrByC,IAAI;gBACJ7F,QAAQ;gBACR8F,MAAM,IAAM3C,QAAQC,OAAO,CAAC;wBAC1BC,MAAM;4BACJR,OAAO;gCAAE,GAAG3E,UAAU,CAAC,EAAE;gCAAE8B,QAAQ;4BAAY;4BAC/CuG,gBAAgB;4BAChBC,WAAW;4BACXC,mBAAmB;wBACrB;wBACA/B,SAAS;wBACTpB,OAAO;oBACT;YACF;QACF;QAEA,mBAAmB;QACnB,OAAOH,QAAQC,OAAO,CAAC;YACrByC,IAAI;YACJ7F,QAAQ;YACR8F,MAAM,IAAM3C,QAAQC,OAAO,CAAC;oBAAEC,MAAM;oBAAMqB,SAAS;oBAAMpB,OAAO;gBAAK;QACvE;IACF;IAEA,OAAOmC;AACT;AAMO,MAAMlH,gBAAgB;IAC3BsD,KAAK6E,aAAa;AACpB;AAEO,MAAM7I,sBAAsB,CAAC8I,YAAY,CAAC,CAAC;IAChD,OAAO;QACL,GAAGzI,UAAU,CAAC,EAAE;QAChB,GAAGyI,SAAS;IACd;AACF;AAEO,MAAM/I,0BAA0B,CAAC+I,YAAY,CAAC,CAAC;IACpD,OAAO;QACL,GAAG3I,cAAc,CAAC,EAAE;QACpB,GAAG2I,SAAS;IACd;AACF;AAEO,MAAM7I,8BAA8B,CAAC6I,YAAY,CAAC,CAAC;IACxD,OAAO;QACL,GAAGtI,iBAAiB,CAAC,EAAE;QACvB,GAAGsI,SAAS;IACd;AACF"}