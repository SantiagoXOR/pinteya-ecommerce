{"version":3,"names":["cov_2ggt7ccwf6","actualCoverage","s","GET","f","runtime","request","clerkUserId","headers","get","b","_server","NextResponse","json","success","error","status","console","log","authResult","_adminauth","getAuthenticatedUser","userId","adminAccessResult","checkAdminAccess","debug","step1_getAuthenticatedUser","step2_checkAdminAccess","step1_success","step2_success","errorMessage","Error","message"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\check-admin-permissions\\route.ts"],"sourcesContent":["// Configuraci√≥n para Node.js Runtime\r\nexport const runtime = 'nodejs';\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { getAuthenticatedUser, checkAdminAccess } from '@/lib/auth/admin-auth';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const clerkUserId = request.headers.get('x-clerk-user-id');\r\n\r\n    if (!clerkUserId) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'No Clerk User ID provided'\r\n      }, { status: 400 });\r\n    }\r\n\r\n    console.log('üîç Debug checkAdminPermissions: Testing with user:', clerkUserId);\r\n\r\n    // Paso 1: Verificar getAuthenticatedUser\r\n    console.log('üîç Step 1: Testing getAuthenticatedUser');\r\n    const authResult = await getAuthenticatedUser(request);\r\n    console.log('üîç Step 1 result:', authResult);\r\n\r\n    // Paso 2: Verificar checkAdminAccess\r\n    console.log('üîç Step 2: Testing checkAdminAccess with userId:', authResult.userId);\r\n    const adminAccessResult = await checkAdminAccess(authResult.userId!);\r\n    console.log('üîç Step 2 result:', adminAccessResult);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      debug: {\r\n        clerkUserId,\r\n        step1_getAuthenticatedUser: authResult,\r\n        step2_checkAdminAccess: adminAccessResult,\r\n        step1_success: !!authResult.userId,\r\n        step2_success: adminAccessResult.success\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('üîç Debug checkAdminPermissions: Error:', error);\r\n    return NextResponse.json({\r\n      success: false,\r\n      error: 'Unexpected error',\r\n      debug: {\r\n        errorMessage: error instanceof Error ? error.message : 'Unknown error'\r\n      }\r\n    }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}