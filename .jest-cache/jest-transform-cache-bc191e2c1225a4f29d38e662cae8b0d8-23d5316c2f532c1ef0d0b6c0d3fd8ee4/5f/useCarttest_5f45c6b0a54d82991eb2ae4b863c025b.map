{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useCart.test.tsx"],"sourcesContent":["// ===================================\n// TESTS PARA HOOK DEL CARRITO\n// Tests unitarios para useCart con Redux\n// ===================================\n\nimport { renderHook, act } from '@testing-library/react'\nimport { Provider } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { useCart } from '@/hooks/useCart'\nimport cartReducer from '@/redux/features/cart-slice'\nimport React from 'react'\n\n// Wrapper para Redux\nconst createWrapper = () => {\n  const store = configureStore({\n    reducer: {\n      cartReducer,\n    },\n  })\n\n  return ({ children }: { children: React.ReactNode }) => (\n    <Provider store={store}>{children}</Provider>\n  )\n}\n\n// Datos de prueba\nconst mockCartItem = {\n  id: 1,\n  title: 'Producto Test',\n  price: 100,\n  discountedPrice: 100,\n  quantity: 1,\n  imgs: {\n    thumbnails: ['https://example.com/thumb.jpg'],\n    previews: ['https://example.com/preview.jpg'],\n  },\n}\n\nconst mockCartItem2 = {\n  id: 2,\n  title: 'Producto Test 2',\n  price: 200,\n  discountedPrice: 200,\n  quantity: 1,\n  imgs: {\n    thumbnails: ['https://example.com/thumb2.jpg'],\n    previews: ['https://example.com/preview2.jpg'],\n  },\n}\n\ndescribe('useCart Hook', () => {\n  describe('Inicialización del Carrito', () => {\n    it('debe inicializar con carrito vacío', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      expect(result.current.cartItems).toEqual([])\n      expect(result.current.cartCount).toBe(0)\n      expect(result.current.totalPrice).toBe(0)\n      expect(result.current.totalQuantity).toBe(0)\n    })\n  })\n\n  describe('Agregar Productos', () => {\n    it('debe agregar un producto nuevo al carrito', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      expect(result.current.cartItems).toHaveLength(1)\n      expect(result.current.cartItems[0]).toEqual(mockCartItem)\n      expect(result.current.cartCount).toBe(1)\n      expect(result.current.totalPrice).toBe(100)\n      expect(result.current.totalQuantity).toBe(1)\n    })\n\n    it('debe incrementar cantidad si el producto ya existe', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      expect(result.current.cartItems).toHaveLength(1)\n      expect(result.current.cartItems[0].quantity).toBe(2)\n      expect(result.current.cartCount).toBe(1)\n      expect(result.current.totalQuantity).toBe(2)\n      expect(result.current.totalPrice).toBe(200)\n    })\n\n    it('debe agregar múltiples productos diferentes', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem2)\n      })\n\n      expect(result.current.cartItems).toHaveLength(2)\n      expect(result.current.cartCount).toBe(2)\n      expect(result.current.totalQuantity).toBe(2)\n      expect(result.current.totalPrice).toBe(300)\n    })\n  })\n\n  describe('Remover Productos', () => {\n    it('debe remover un producto del carrito', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      // Agregar producto primero\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      // Remover producto\n      act(() => {\n        result.current.removeFromCart(mockCartItem.id)\n      })\n\n      expect(result.current.cartItems).toHaveLength(0)\n      expect(result.current.cartCount).toBe(0)\n      expect(result.current.totalPrice).toBe(0)\n      expect(result.current.totalQuantity).toBe(0)\n    })\n\n    it('debe remover solo el producto especificado', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      // Agregar dos productos\n      act(() => {\n        result.current.addToCart(mockCartItem)\n        result.current.addToCart(mockCartItem2)\n      })\n\n      // Remover solo el primero\n      act(() => {\n        result.current.removeFromCart(mockCartItem.id)\n      })\n\n      expect(result.current.cartItems).toHaveLength(1)\n      expect(result.current.cartItems[0].id).toBe(mockCartItem2.id)\n      expect(result.current.totalPrice).toBe(200)\n    })\n  })\n\n  describe('Actualizar Cantidad', () => {\n    it('debe actualizar la cantidad de un producto', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      // Agregar producto\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      // Actualizar cantidad\n      act(() => {\n        result.current.updateQuantity(mockCartItem.id, 3)\n      })\n\n      expect(result.current.cartItems[0].quantity).toBe(3)\n      expect(result.current.totalQuantity).toBe(3)\n      expect(result.current.totalPrice).toBe(300)\n    })\n\n    it('debe remover el producto si la cantidad es 0', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      // Agregar producto\n      act(() => {\n        result.current.addToCart(mockCartItem)\n      })\n\n      // Actualizar cantidad a 0\n      act(() => {\n        result.current.updateQuantity(mockCartItem.id, 0)\n      })\n\n      expect(result.current.cartItems).toHaveLength(0)\n      expect(result.current.totalPrice).toBe(0)\n    })\n  })\n\n  describe('Limpiar Carrito', () => {\n    it('debe limpiar todo el carrito', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      // Agregar productos\n      act(() => {\n        result.current.addToCart(mockCartItem)\n        result.current.addToCart(mockCartItem2)\n      })\n\n      // Limpiar carrito\n      act(() => {\n        result.current.clearCart()\n      })\n\n      expect(result.current.cartItems).toHaveLength(0)\n      expect(result.current.cartCount).toBe(0)\n      expect(result.current.totalPrice).toBe(0)\n      expect(result.current.totalQuantity).toBe(0)\n    })\n  })\n\n  describe('Cálculos del Carrito', () => {\n    it('debe calcular correctamente el precio total', () => {\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      act(() => {\n        result.current.addToCart(mockCartItem)\n        result.current.addToCart(mockCartItem2)\n        result.current.updateQuantity(mockCartItem.id, 2)\n      })\n\n      expect(result.current.totalPrice).toBe(400) // (100 * 2) + (200 * 1)\n      expect(result.current.totalQuantity).toBe(3) // 2 + 1\n      expect(result.current.cartCount).toBe(2) // 2 productos únicos\n    })\n\n    it('debe manejar productos con precio 0', () => {\n      const freeItem = { ...mockCartItem, price: 0 }\n      const { result } = renderHook(() => useCart(), {\n        wrapper: createWrapper(),\n      })\n\n      act(() => {\n        result.current.addToCart(freeItem)\n      })\n\n      expect(result.current.totalPrice).toBe(0)\n      expect(result.current.cartItems).toHaveLength(1)\n    })\n  })\n})\n"],"names":["createWrapper","store","configureStore","reducer","cartReducer","children","Provider","mockCartItem","id","title","price","discountedPrice","quantity","imgs","thumbnails","previews","mockCartItem2","describe","it","result","renderHook","useCart","wrapper","expect","current","cartItems","toEqual","cartCount","toBe","totalPrice","totalQuantity","act","addToCart","toHaveLength","removeFromCart","updateQuantity","clearCart","freeItem"],"mappings":"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"}