7b7c0e13a719a10a18acd4bf2a6fb2dc
// ConfiguraciÃ³n para Node.js Runtime
"use strict";

/* istanbul ignore next */
function cov_9pglkml6o() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\logistics\\shipments\\route.ts";
  var hash = "5edb0e8b8d91dc2395a75ac2cb75427de6d53eb6";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\logistics\\shipments\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "2": {
        start: {
          line: 7,
          column: 24
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "3": {
        start: {
          line: 12,
          column: 0
        },
        end: {
          line: 22,
          column: 3
        }
      },
      "4": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 19
        }
      },
      "5": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 20
        }
      },
      "6": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 23
        }
      },
      "7": {
        start: {
          line: 23,
          column: 16
        },
        end: {
          line: 23,
          column: 38
        }
      },
      "8": {
        start: {
          line: 24,
          column: 16
        },
        end: {
          line: 24,
          column: 57
        }
      },
      "9": {
        start: {
          line: 25,
          column: 17
        },
        end: {
          line: 25,
          column: 75
        }
      },
      "10": {
        start: {
          line: 26,
          column: 13
        },
        end: {
          line: 26,
          column: 27
        }
      },
      "11": {
        start: {
          line: 27,
          column: 19
        },
        end: {
          line: 27,
          column: 60
        }
      },
      "12": {
        start: {
          line: 28,
          column: 16
        },
        end: {
          line: 28,
          column: 24
        }
      },
      "13": {
        start: {
          line: 32,
          column: 22
        },
        end: {
          line: 44,
          column: 2
        }
      },
      "14": {
        start: {
          line: 45,
          column: 29
        },
        end: {
          line: 62,
          column: 2
        }
      },
      "15": {
        start: {
          line: 63,
          column: 27
        },
        end: {
          line: 80,
          column: 2
        }
      },
      "16": {
        start: {
          line: 85,
          column: 20
        },
        end: {
          line: 85,
          column: 45
        }
      },
      "17": {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 92,
          column: 5
        }
      },
      "18": {
        start: {
          line: 87,
          column: 8
        },
        end: {
          line: 91,
          column: 11
        }
      },
      "19": {
        start: {
          line: 94,
          column: 24
        },
        end: {
          line: 96,
          column: 5
        }
      },
      "20": {
        start: {
          line: 97,
          column: 4
        },
        end: {
          line: 103,
          column: 5
        }
      },
      "21": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 102,
          column: 11
        }
      },
      "22": {
        start: {
          line: 104,
          column: 4
        },
        end: {
          line: 104,
          column: 16
        }
      },
      "23": {
        start: {
          line: 110,
          column: 17
        },
        end: {
          line: 110,
          column: 27
        }
      },
      "24": {
        start: {
          line: 111,
          column: 20
        },
        end: {
          line: 111,
          column: 69
        }
      },
      "25": {
        start: {
          line: 112,
          column: 22
        },
        end: {
          line: 112,
          column: 78
        }
      },
      "26": {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 113,
          column: 38
        }
      },
      "27": {
        start: {
          line: 116,
          column: 28
        },
        end: {
          line: 116,
          column: 97
        }
      },
      "28": {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 117,
          column: 26
        }
      },
      "29": {
        start: {
          line: 120,
          column: 26
        },
        end: {
          line: 126,
          column: 11
        }
      },
      "30": {
        start: {
          line: 120,
          column: 45
        },
        end: {
          line: 126,
          column: 9
        }
      },
      "31": {
        start: {
          line: 127,
          column: 22
        },
        end: {
          line: 127,
          column: 81
        }
      },
      "32": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 130,
          column: 5
        }
      },
      "33": {
        start: {
          line: 129,
          column: 8
        },
        end: {
          line: 129,
          column: 20
        }
      },
      "34": {
        start: {
          line: 133,
          column: 4
        },
        end: {
          line: 223,
          column: 5
        }
      },
      "35": {
        start: {
          line: 135,
          column: 26
        },
        end: {
          line: 135,
          column: 58
        }
      },
      "36": {
        start: {
          line: 136,
          column: 8
        },
        end: {
          line: 138,
          column: 9
        }
      },
      "37": {
        start: {
          line: 137,
          column: 12
        },
        end: {
          line: 137,
          column: 29
        }
      },
      "38": {
        start: {
          line: 140,
          column: 33
        },
        end: {
          line: 140,
          column: 53
        }
      },
      "39": {
        start: {
          line: 141,
          column: 28
        },
        end: {
          line: 141,
          column: 70
        }
      },
      "40": {
        start: {
          line: 142,
          column: 32
        },
        end: {
          line: 142,
          column: 69
        }
      },
      "41": {
        start: {
          line: 144,
          column: 25
        },
        end: {
          line: 144,
          column: 59
        }
      },
      "42": {
        start: {
          line: 146,
          column: 20
        },
        end: {
          line: 155,
          column: 10
        }
      },
      "43": {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 159,
          column: 9
        }
      },
      "44": {
        start: {
          line: 158,
          column: 12
        },
        end: {
          line: 158,
          column: 63
        }
      },
      "45": {
        start: {
          line: 160,
          column: 8
        },
        end: {
          line: 162,
          column: 9
        }
      },
      "46": {
        start: {
          line: 161,
          column: 12
        },
        end: {
          line: 161,
          column: 71
        }
      },
      "47": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 165,
          column: 9
        }
      },
      "48": {
        start: {
          line: 164,
          column: 12
        },
        end: {
          line: 164,
          column: 71
        }
      },
      "49": {
        start: {
          line: 166,
          column: 8
        },
        end: {
          line: 168,
          column: 9
        }
      },
      "50": {
        start: {
          line: 167,
          column: 12
        },
        end: {
          line: 167,
          column: 69
        }
      },
      "51": {
        start: {
          line: 169,
          column: 8
        },
        end: {
          line: 175,
          column: 9
        }
      },
      "52": {
        start: {
          line: 170,
          column: 12
        },
        end: {
          line: 174,
          column: 9
        }
      },
      "53": {
        start: {
          line: 177,
          column: 8
        },
        end: {
          line: 179,
          column: 11
        }
      },
      "54": {
        start: {
          line: 181,
          column: 23
        },
        end: {
          line: 181,
          column: 73
        }
      },
      "55": {
        start: {
          line: 182,
          column: 8
        },
        end: {
          line: 182,
          column: 72
        }
      },
      "56": {
        start: {
          line: 184,
          column: 50
        },
        end: {
          line: 184,
          column: 61
        }
      },
      "57": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 187,
          column: 9
        }
      },
      "58": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 186,
          column: 24
        }
      },
      "59": {
        start: {
          line: 189,
          column: 27
        },
        end: {
          line: 189,
          column: 74
        }
      },
      "60": {
        start: {
          line: 190,
          column: 25
        },
        end: {
          line: 200,
          column: 9
        }
      },
      "61": {
        start: {
          line: 201,
          column: 8
        },
        end: {
          line: 201,
          column: 51
        }
      },
      "62": {
        start: {
          line: 203,
          column: 8
        },
        end: {
          line: 203,
          column: 60
        }
      },
      "63": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 216,
          column: 9
        }
      },
      "64": {
        start: {
          line: 205,
          column: 12
        },
        end: {
          line: 215,
          column: 15
        }
      },
      "65": {
        start: {
          line: 208,
          column: 20
        },
        end: {
          line: 210,
          column: 22
        }
      },
      "66": {
        start: {
          line: 211,
          column: 20
        },
        end: {
          line: 211,
          column: 31
        }
      },
      "67": {
        start: {
          line: 217,
          column: 8
        },
        end: {
          line: 222,
          column: 11
        }
      },
      "68": {
        start: {
          line: 226,
          column: 4
        },
        end: {
          line: 317,
          column: 5
        }
      },
      "69": {
        start: {
          line: 228,
          column: 26
        },
        end: {
          line: 228,
          column: 58
        }
      },
      "70": {
        start: {
          line: 229,
          column: 8
        },
        end: {
          line: 231,
          column: 9
        }
      },
      "71": {
        start: {
          line: 230,
          column: 12
        },
        end: {
          line: 230,
          column: 29
        }
      },
      "72": {
        start: {
          line: 233,
          column: 21
        },
        end: {
          line: 233,
          column: 41
        }
      },
      "73": {
        start: {
          line: 234,
          column: 30
        },
        end: {
          line: 234,
          column: 62
        }
      },
      "74": {
        start: {
          line: 236,
          column: 25
        },
        end: {
          line: 236,
          column: 59
        }
      },
      "75": {
        start: {
          line: 238,
          column: 28
        },
        end: {
          line: 238,
          column: 87
        }
      },
      "76": {
        start: {
          line: 239,
          column: 8
        },
        end: {
          line: 245,
          column: 9
        }
      },
      "77": {
        start: {
          line: 240,
          column: 12
        },
        end: {
          line: 244,
          column: 15
        }
      },
      "78": {
        start: {
          line: 247,
          column: 31
        },
        end: {
          line: 247,
          column: 55
        }
      },
      "79": {
        start: {
          line: 249,
          column: 57
        },
        end: {
          line: 265,
          column: 17
        }
      },
      "80": {
        start: {
          line: 266,
          column: 8
        },
        end: {
          line: 268,
          column: 9
        }
      },
      "81": {
        start: {
          line: 267,
          column: 12
        },
        end: {
          line: 267,
          column: 32
        }
      },
      "82": {
        start: {
          line: 270,
          column: 8
        },
        end: {
          line: 270,
          column: 78
        }
      },
      "83": {
        start: {
          line: 272,
          column: 62
        },
        end: {
          line: 279,
          column: 39
        }
      },
      "84": {
        start: {
          line: 280,
          column: 8
        },
        end: {
          line: 282,
          column: 9
        }
      },
      "85": {
        start: {
          line: 281,
          column: 12
        },
        end: {
          line: 281,
          column: 29
        }
      },
      "86": {
        start: {
          line: 284,
          column: 8
        },
        end: {
          line: 289,
          column: 11
        }
      },
      "87": {
        start: {
          line: 290,
          column: 8
        },
        end: {
          line: 295,
          column: 11
        }
      },
      "88": {
        start: {
          line: 297,
          column: 8
        },
        end: {
          line: 297,
          column: 61
        }
      },
      "89": {
        start: {
          line: 298,
          column: 8
        },
        end: {
          line: 310,
          column: 9
        }
      },
      "90": {
        start: {
          line: 299,
          column: 12
        },
        end: {
          line: 309,
          column: 15
        }
      },
      "91": {
        start: {
          line: 302,
          column: 20
        },
        end: {
          line: 304,
          column: 22
        }
      },
      "92": {
        start: {
          line: 305,
          column: 20
        },
        end: {
          line: 305,
          column: 31
        }
      },
      "93": {
        start: {
          line: 311,
          column: 8
        },
        end: {
          line: 316,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 6,
            column: 9
          },
          end: {
            line: 6,
            column: 16
          }
        },
        loc: {
          start: {
            line: 6,
            column: 30
          },
          end: {
            line: 11,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 18,
            column: 5
          }
        },
        line: 16
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 19,
            column: 5
          }
        },
        loc: {
          start: {
            line: 19,
            column: 19
          },
          end: {
            line: 21,
            column: 5
          }
        },
        line: 19
      },
      "4": {
        name: "validateAdminAuth",
        decl: {
          start: {
            line: 84,
            column: 15
          },
          end: {
            line: 84,
            column: 32
          }
        },
        loc: {
          start: {
            line: 84,
            column: 42
          },
          end: {
            line: 105,
            column: 1
          }
        },
        line: 84
      },
      "5": {
        name: "generateShipmentNumber",
        decl: {
          start: {
            line: 109,
            column: 9
          },
          end: {
            line: 109,
            column: 31
          }
        },
        loc: {
          start: {
            line: 109,
            column: 34
          },
          end: {
            line: 114,
            column: 1
          }
        },
        line: 109
      },
      "6": {
        name: "validateOrderExists",
        decl: {
          start: {
            line: 115,
            column: 15
          },
          end: {
            line: 115,
            column: 34
          }
        },
        loc: {
          start: {
            line: 115,
            column: 54
          },
          end: {
            line: 118,
            column: 1
          }
        },
        line: 115
      },
      "7": {
        name: "createShipmentItems",
        decl: {
          start: {
            line: 119,
            column: 15
          },
          end: {
            line: 119,
            column: 34
          }
        },
        loc: {
          start: {
            line: 119,
            column: 64
          },
          end: {
            line: 131,
            column: 1
          }
        },
        line: 119
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 120,
            column: 36
          },
          end: {
            line: 120,
            column: 37
          }
        },
        loc: {
          start: {
            line: 120,
            column: 45
          },
          end: {
            line: 126,
            column: 9
          }
        },
        line: 120
      },
      "9": {
        name: "GET",
        decl: {
          start: {
            line: 132,
            column: 15
          },
          end: {
            line: 132,
            column: 18
          }
        },
        loc: {
          start: {
            line: 132,
            column: 28
          },
          end: {
            line: 224,
            column: 1
          }
        },
        line: 132
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 207,
            column: 45
          },
          end: {
            line: 207,
            column: 46
          }
        },
        loc: {
          start: {
            line: 207,
            column: 57
          },
          end: {
            line: 212,
            column: 17
          }
        },
        line: 207
      },
      "11": {
        name: "POST",
        decl: {
          start: {
            line: 225,
            column: 15
          },
          end: {
            line: 225,
            column: 19
          }
        },
        loc: {
          start: {
            line: 225,
            column: 29
          },
          end: {
            line: 318,
            column: 1
          }
        },
        line: 225
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 301,
            column: 45
          },
          end: {
            line: 301,
            column: 46
          }
        },
        loc: {
          start: {
            line: 301,
            column: 57
          },
          end: {
            line: 306,
            column: 17
          }
        },
        line: 301
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 86,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 86,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 86
      },
      "1": {
        loc: {
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 103,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 103,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "2": {
        loc: {
          start: {
            line: 97,
            column: 30
          },
          end: {
            line: 97,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 97,
            column: 30
          },
          end: {
            line: 97,
            column: 48
          }
        }, {
          start: {
            line: 97,
            column: 52
          },
          end: {
            line: 97,
            column: 54
          }
        }],
        line: 97
      },
      "3": {
        loc: {
          start: {
            line: 117,
            column: 11
          },
          end: {
            line: 117,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 117,
            column: 11
          },
          end: {
            line: 117,
            column: 17
          }
        }, {
          start: {
            line: 117,
            column: 21
          },
          end: {
            line: 117,
            column: 25
          }
        }],
        line: 117
      },
      "4": {
        loc: {
          start: {
            line: 128,
            column: 4
          },
          end: {
            line: 130,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 128,
            column: 4
          },
          end: {
            line: 130,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 128
      },
      "5": {
        loc: {
          start: {
            line: 136,
            column: 8
          },
          end: {
            line: 138,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 136,
            column: 8
          },
          end: {
            line: 138,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 136
      },
      "6": {
        loc: {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 159,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 159,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 157
      },
      "7": {
        loc: {
          start: {
            line: 160,
            column: 8
          },
          end: {
            line: 162,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 160,
            column: 8
          },
          end: {
            line: 162,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 160
      },
      "8": {
        loc: {
          start: {
            line: 163,
            column: 8
          },
          end: {
            line: 165,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 163,
            column: 8
          },
          end: {
            line: 165,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 163
      },
      "9": {
        loc: {
          start: {
            line: 166,
            column: 8
          },
          end: {
            line: 168,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 166,
            column: 8
          },
          end: {
            line: 168,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 166
      },
      "10": {
        loc: {
          start: {
            line: 169,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 169,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 169
      },
      "11": {
        loc: {
          start: {
            line: 173,
            column: 22
          },
          end: {
            line: 173,
            column: 88
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 173,
            column: 62
          },
          end: {
            line: 173,
            column: 63
          }
        }, {
          start: {
            line: 173,
            column: 66
          },
          end: {
            line: 173,
            column: 88
          }
        }],
        line: 173
      },
      "12": {
        loc: {
          start: {
            line: 185,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 185,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 185
      },
      "13": {
        loc: {
          start: {
            line: 189,
            column: 38
          },
          end: {
            line: 189,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 189,
            column: 38
          },
          end: {
            line: 189,
            column: 43
          }
        }, {
          start: {
            line: 189,
            column: 47
          },
          end: {
            line: 189,
            column: 48
          }
        }],
        line: 189
      },
      "14": {
        loc: {
          start: {
            line: 191,
            column: 18
          },
          end: {
            line: 191,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 191,
            column: 18
          },
          end: {
            line: 191,
            column: 27
          }
        }, {
          start: {
            line: 191,
            column: 31
          },
          end: {
            line: 191,
            column: 33
          }
        }],
        line: 191
      },
      "15": {
        loc: {
          start: {
            line: 195,
            column: 23
          },
          end: {
            line: 195,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 195,
            column: 23
          },
          end: {
            line: 195,
            column: 28
          }
        }, {
          start: {
            line: 195,
            column: 32
          },
          end: {
            line: 195,
            column: 33
          }
        }],
        line: 195
      },
      "16": {
        loc: {
          start: {
            line: 204,
            column: 8
          },
          end: {
            line: 216,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 204,
            column: 8
          },
          end: {
            line: 216,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 204
      },
      "17": {
        loc: {
          start: {
            line: 219,
            column: 21
          },
          end: {
            line: 219,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 219,
            column: 46
          },
          end: {
            line: 219,
            column: 59
          }
        }, {
          start: {
            line: 219,
            column: 62
          },
          end: {
            line: 219,
            column: 77
          }
        }],
        line: 219
      },
      "18": {
        loc: {
          start: {
            line: 229,
            column: 8
          },
          end: {
            line: 231,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 229,
            column: 8
          },
          end: {
            line: 231,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 229
      },
      "19": {
        loc: {
          start: {
            line: 239,
            column: 8
          },
          end: {
            line: 245,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 239,
            column: 8
          },
          end: {
            line: 245,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 239
      },
      "20": {
        loc: {
          start: {
            line: 266,
            column: 8
          },
          end: {
            line: 268,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 266,
            column: 8
          },
          end: {
            line: 268,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 266
      },
      "21": {
        loc: {
          start: {
            line: 280,
            column: 8
          },
          end: {
            line: 282,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 280,
            column: 8
          },
          end: {
            line: 282,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 280
      },
      "22": {
        loc: {
          start: {
            line: 298,
            column: 8
          },
          end: {
            line: 310,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 298,
            column: 8
          },
          end: {
            line: 310,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 298
      },
      "23": {
        loc: {
          start: {
            line: 313,
            column: 21
          },
          end: {
            line: 313,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 313,
            column: 46
          },
          end: {
            line: 313,
            column: 59
          }
        }, {
          start: {
            line: 313,
            column: 62
          },
          end: {
            line: 313,
            column: 77
          }
        }],
        line: 313
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\logistics\\shipments\\route.ts"],
      sourcesContent: ["// Configuraci\xF3n para Node.js Runtime\r\nexport const runtime = 'nodejs';\r\n\r\n// =====================================================\r\n// API: GESTI\xD3N DE ENV\xCDOS ENTERPRISE\r\n// Endpoints: GET/POST /api/admin/logistics/shipments\r\n// Descripci\xF3n: CRUD completo de env\xEDos con validaci\xF3n\r\n// Basado en: Patrones Spree Commerce + WooCommerce\r\n// =====================================================\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { auth } from '@/lib/auth/config';\r\nimport { createClient } from '@/lib/integrations/supabase/server';\r\nimport { Database } from '@/types/database';\r\nimport { z } from 'zod';\r\nimport { \r\n  CreateShipmentRequest, \r\n  GetShipmentsRequest,\r\n  Shipment,\r\n  PaginatedResponse,\r\n  ShipmentStatus,\r\n  ShippingService \r\n} from '@/types/logistics';\r\n\r\n// =====================================================\r\n// SCHEMAS DE VALIDACI\xD3N ZOD\r\n// =====================================================\r\n\r\nconst AddressSchema = z.object({\r\n  street: z.string().min(1, 'Calle es requerida'),\r\n  number: z.string().min(1, 'N\xFAmero es requerido'),\r\n  apartment: z.string().optional(),\r\n  neighborhood: z.string().min(1, 'Barrio es requerido'),\r\n  city: z.string().min(1, 'Ciudad es requerida'),\r\n  state: z.string().min(1, 'Provincia es requerida'),\r\n  postal_code: z.string().min(4, 'C\xF3digo postal debe tener al menos 4 caracteres'),\r\n  country: z.string().default('Argentina'),\r\n  latitude: z.number().optional(),\r\n  longitude: z.number().optional(),\r\n  reference: z.string().optional()\r\n});\r\n\r\nconst CreateShipmentSchema = z.object({\r\n  order_id: z.number().positive('ID de orden debe ser positivo'),\r\n  carrier_id: z.number().positive().optional(),\r\n  shipping_service: z.nativeEnum(ShippingService),\r\n  items: z.array(z.object({\r\n    order_item_id: z.number().positive().optional(),\r\n    product_id: z.number().positive('ID de producto es requerido'),\r\n    quantity: z.number().positive('Cantidad debe ser positiva'),\r\n    weight_kg: z.number().positive().optional()\r\n  })).min(1, 'Debe incluir al menos un item'),\r\n  pickup_address: AddressSchema.optional(),\r\n  delivery_address: AddressSchema,\r\n  weight_kg: z.number().positive().optional(),\r\n  dimensions_cm: z.string().regex(/^\\d+x\\d+x\\d+$/, 'Formato debe ser LxWxH (ej: 30x20x15)').optional(),\r\n  special_instructions: z.string().max(500).optional(),\r\n  notes: z.string().max(1000).optional(),\r\n  estimated_delivery_date: z.string().datetime().optional()\r\n});\r\n\r\nconst GetShipmentsSchema = z.object({\r\n  page: z.coerce.number().positive().default(1),\r\n  limit: z.coerce.number().positive().max(100).default(20),\r\n  status: z.nativeEnum(ShipmentStatus).optional(),\r\n  carrier: z.string().optional(),\r\n  date_from: z.string().datetime().optional(),\r\n  date_to: z.string().datetime().optional(),\r\n  search: z.string().optional(),\r\n  order_by: z.enum(['created_at', 'updated_at', 'estimated_delivery_date']).default('created_at'),\r\n  order_direction: z.enum(['asc', 'desc']).default('desc')\r\n});\r\n\r\n// =====================================================\r\n// MIDDLEWARE DE AUTENTICACI\xD3N\r\n// =====================================================\r\nasync function validateAdminAuth(request: NextRequest) {\r\n  const session = await auth();\r\n\r\n  if (!session?.user) {\r\n    return NextResponse.json(\r\n      { error: 'Unauthorized' },\r\n      { status: 401 }\r\n    );\r\n  }\r\n\r\n  // Verificar rol de administrador usando el email\r\n  const adminEmails = ['santiago@xor.com.ar'];\r\n  if (!adminEmails.includes(session.user.email || '')) {\r\n    return NextResponse.json(\r\n      { error: 'Insufficient permissions' },\r\n      { status: 403 }\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n// =====================================================\r\n// FUNCIONES AUXILIARES\r\n// =====================================================\r\n\r\nfunction generateShipmentNumber(): string {\r\n  const date = new Date();\r\n  const dateStr = date.toISOString().slice(0, 10).replace(/-/g, '');\r\n  const randomStr = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n  return `SH${dateStr}${randomStr}`;\r\n}\r\n\r\nasync function validateOrderExists(supabase: ReturnType<typeof createClient<Database>>, orderId: number): Promise<boolean> {\r\n  const { data, error } = await supabase\r\n    .from('orders')\r\n    .select('id')\r\n    .eq('id', orderId)\r\n    .single();\r\n  \r\n  return !error && data;\r\n}\r\n\r\nasync function createShipmentItems(\r\n  supabase: ReturnType<typeof createClient<Database>>, \r\n  shipmentId: number, \r\n  items: CreateShipmentRequest['items']\r\n): Promise<void> {\r\n  const shipmentItems = items.map(item => ({\r\n    shipment_id: shipmentId,\r\n    order_item_id: item.order_item_id,\r\n    product_id: item.product_id,\r\n    quantity: item.quantity,\r\n    weight_kg: item.weight_kg\r\n  }));\r\n  \r\n  const { error } = await supabase\r\n    .from('shipment_items')\r\n    .insert(shipmentItems);\r\n  \r\n  if (error) {throw error;}\r\n}\r\n\r\n// =====================================================\r\n// GET: OBTENER ENV\xCDOS CON FILTROS Y PAGINACI\xD3N\r\n// =====================================================\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // Validar autenticaci\xF3n\r\n    const authError = await validateAdminAuth(request);\r\n    if (authError) {return authError;}\r\n    \r\n    // Parsear y validar query parameters\r\n    const { searchParams } = new URL(request.url);\r\n    const queryParams = Object.fromEntries(searchParams.entries());\r\n    \r\n    const validatedParams = GetShipmentsSchema.parse(queryParams);\r\n    \r\n    // Crear cliente Supabase\r\n    const supabase = await createClient();\r\n    \r\n    // Construir query base\r\n    let query = supabase\r\n      .from('shipments')\r\n      .select(`\r\n        *,\r\n        carrier:couriers(id, name, code),\r\n        items:shipment_items(\r\n          id, quantity, weight_kg,\r\n          product:products(id, name, slug, images)\r\n        )\r\n      `, { count: 'exact' });\r\n    \r\n    // Aplicar filtros\r\n    if (validatedParams.status) {\r\n      query = query.eq('status', validatedParams.status);\r\n    }\r\n    \r\n    if (validatedParams.carrier) {\r\n      query = query.eq('couriers.code', validatedParams.carrier);\r\n    }\r\n    \r\n    if (validatedParams.date_from) {\r\n      query = query.gte('created_at', validatedParams.date_from);\r\n    }\r\n    \r\n    if (validatedParams.date_to) {\r\n      query = query.lte('created_at', validatedParams.date_to);\r\n    }\r\n    \r\n    if (validatedParams.search) {\r\n      query = query.or(`\r\n        shipment_number.ilike.%${validatedParams.search}%,\r\n        tracking_number.ilike.%${validatedParams.search}%,\r\n        order_id.eq.${isNaN(Number(validatedParams.search)) ? 0 : validatedParams.search}\r\n      `);\r\n    }\r\n    \r\n    // Aplicar ordenamiento\r\n    query = query.order(\r\n      validatedParams.order_by, \r\n      { ascending: validatedParams.order_direction === 'asc' }\r\n    );\r\n    \r\n    // Aplicar paginaci\xF3n\r\n    const offset = (validatedParams.page - 1) * validatedParams.limit;\r\n    query = query.range(offset, offset + validatedParams.limit - 1);\r\n    \r\n    // Ejecutar query\r\n    const { data: shipments, error, count } = await query;\r\n    \r\n    if (error) {throw error;}\r\n    \r\n    // Construir respuesta paginada\r\n    const totalPages = Math.ceil((count || 0) / validatedParams.limit);\r\n    \r\n    const response: PaginatedResponse<Shipment> = {\r\n      data: shipments || [],\r\n      pagination: {\r\n        page: validatedParams.page,\r\n        limit: validatedParams.limit,\r\n        total: count || 0,\r\n        total_pages: totalPages,\r\n        has_next: validatedParams.page < totalPages,\r\n        has_prev: validatedParams.page > 1\r\n      }\r\n    };\r\n    \r\n    return NextResponse.json(response);\r\n    \r\n  } catch (error) {\r\n    console.error('Error in GET shipments API:', error);\r\n    \r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { \r\n          error: 'Validation error',\r\n          details: error.errors.reduce((acc, err) => {\r\n            acc[err.path.join('.')] = [err.message];\r\n            return acc;\r\n          }, {} as Record<string, string[]>)\r\n        },\r\n        { status: 422 }\r\n      );\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        error: 'Internal server error',\r\n        details: error instanceof Error ? error.message : 'Unknown error'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// =====================================================\r\n// POST: CREAR NUEVO ENV\xCDO\r\n// =====================================================\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Validar autenticaci\xF3n\r\n    const authError = await validateAdminAuth(request);\r\n    if (authError) {return authError;}\r\n    \r\n    // Parsear y validar body\r\n    const body = await request.json();\r\n    const validatedData = CreateShipmentSchema.parse(body);\r\n    \r\n    // Crear cliente Supabase\r\n    const supabase = await createClient();\r\n    \r\n    // Validar que la orden existe\r\n    const orderExists = await validateOrderExists(supabase, validatedData.order_id);\r\n    if (!orderExists) {\r\n      return NextResponse.json(\r\n        { error: 'Order not found' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n    \r\n    // Generar n\xFAmero de env\xEDo \xFAnico\r\n    const shipmentNumber = generateShipmentNumber();\r\n    \r\n    // Crear el env\xEDo\r\n    const { data: shipment, error: shipmentError } = await supabase\r\n      .from('shipments')\r\n      .insert({\r\n        shipment_number: shipmentNumber,\r\n        order_id: validatedData.order_id,\r\n        status: 'pending',\r\n        carrier_id: validatedData.carrier_id,\r\n        shipping_service: validatedData.shipping_service,\r\n        pickup_address: validatedData.pickup_address,\r\n        delivery_address: validatedData.delivery_address,\r\n        weight_kg: validatedData.weight_kg,\r\n        dimensions_cm: validatedData.dimensions_cm,\r\n        special_instructions: validatedData.special_instructions,\r\n        notes: validatedData.notes,\r\n        estimated_delivery_date: validatedData.estimated_delivery_date\r\n      })\r\n      .select(`\r\n        *,\r\n        carrier:couriers(id, name, code)\r\n      `)\r\n      .single();\r\n    \r\n    if (shipmentError) {throw shipmentError;}\r\n    \r\n    // Crear los items del env\xEDo\r\n    await createShipmentItems(supabase, shipment.id, validatedData.items);\r\n    \r\n    // Obtener el env\xEDo completo con items\r\n    const { data: completeShipment, error: fetchError } = await supabase\r\n      .from('shipments')\r\n      .select(`\r\n        *,\r\n        carrier:couriers(id, name, code),\r\n        items:shipment_items(\r\n          id, quantity, weight_kg,\r\n          product:products(id, name, slug, images)\r\n        )\r\n      `)\r\n      .eq('id', shipment.id)\r\n      .single();\r\n    \r\n    if (fetchError) {throw fetchError;}\r\n    \r\n    // Crear evento de tracking inicial\r\n    await supabase\r\n      .from('tracking_events')\r\n      .insert({\r\n        shipment_id: shipment.id,\r\n        status: 'pending',\r\n        description: 'Env\xEDo creado y pendiente de confirmaci\xF3n',\r\n        occurred_at: new Date().toISOString()\r\n      });\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        data: completeShipment,\r\n        message: 'Shipment created successfully'\r\n      },\r\n      { status: 201 }\r\n    );\r\n    \r\n  } catch (error) {\r\n    console.error('Error in POST shipments API:', error);\r\n    \r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { \r\n          error: 'Validation error',\r\n          details: error.errors.reduce((acc, err) => {\r\n            acc[err.path.join('.')] = [err.message];\r\n            return acc;\r\n          }, {} as Record<string, string[]>)\r\n        },\r\n        { status: 422 }\r\n      );\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        error: 'Internal server error',\r\n        details: error instanceof Error ? error.message : 'Unknown error'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["GET", "POST", "runtime", "AddressSchema", "z", "object", "street", "string", "min", "number", "apartment", "optional", "neighborhood", "city", "state", "postal_code", "country", "default", "latitude", "longitude", "reference", "CreateShipmentSchema", "order_id", "positive", "carrier_id", "shipping_service", "nativeEnum", "ShippingService", "items", "array", "order_item_id", "product_id", "quantity", "weight_kg", "pickup_address", "delivery_address", "dimensions_cm", "regex", "special_instructions", "max", "notes", "estimated_delivery_date", "datetime", "GetShipmentsSchema", "page", "coerce", "limit", "status", "ShipmentStatus", "carrier", "date_from", "date_to", "search", "order_by", "enum", "order_direction", "validateAdminAuth", "request", "session", "auth", "user", "NextResponse", "json", "error", "adminEmails", "includes", "email", "generateShipmentNumber", "date", "Date", "dateStr", "toISOString", "slice", "replace", "randomStr", "Math", "random", "toString", "substring", "toUpperCase", "validateOrderExists", "supabase", "orderId", "data", "from", "select", "eq", "single", "createShipmentItems", "shipmentId", "shipmentItems", "map", "item", "shipment_id", "insert", "authError", "searchParams", "URL", "url", "queryParams", "Object", "fromEntries", "entries", "validatedParams", "parse", "createClient", "query", "count", "gte", "lte", "or", "isNaN", "Number", "order", "ascending", "offset", "range", "shipments", "totalPages", "ceil", "response", "pagination", "total", "total_pages", "has_next", "has_prev", "console", "ZodError", "details", "errors", "reduce", "acc", "err", "path", "join", "message", "Error", "body", "validatedData", "orderExists", "shipmentNumber", "shipment", "shipmentError", "shipment_number", "id", "completeShipment", "fetchError", "description", "occurred_at"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "5edb0e8b8d91dc2395a75ac2cb75427de6d53eb6"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_9pglkml6o = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_9pglkml6o();
cov_9pglkml6o().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[0]++;
  cov_9pglkml6o().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_9pglkml6o().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_9pglkml6o().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_9pglkml6o().f[1]++;
    cov_9pglkml6o().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_9pglkml6o().f[2]++;
    cov_9pglkml6o().s[5]++;
    return POST;
  },
  get runtime() {
    /* istanbul ignore next */
    cov_9pglkml6o().f[3]++;
    cov_9pglkml6o().s[6]++;
    return runtime;
  }
});
const _server =
/* istanbul ignore next */
(cov_9pglkml6o().s[7]++, require("next/server"));
const _config =
/* istanbul ignore next */
(cov_9pglkml6o().s[8]++, require("../../../../../lib/auth/config"));
const _server1 =
/* istanbul ignore next */
(cov_9pglkml6o().s[9]++, require("../../../../../lib/integrations/supabase/server"));
const _zod =
/* istanbul ignore next */
(cov_9pglkml6o().s[10]++, require("zod"));
const _logistics =
/* istanbul ignore next */
(cov_9pglkml6o().s[11]++, require("../../../../../types/logistics"));
const runtime =
/* istanbul ignore next */
(cov_9pglkml6o().s[12]++, 'nodejs');
// =====================================================
// SCHEMAS DE VALIDACIÃN ZOD
// =====================================================
const AddressSchema =
/* istanbul ignore next */
(cov_9pglkml6o().s[13]++, _zod.z.object({
  street: _zod.z.string().min(1, 'Calle es requerida'),
  number: _zod.z.string().min(1, 'NÃºmero es requerido'),
  apartment: _zod.z.string().optional(),
  neighborhood: _zod.z.string().min(1, 'Barrio es requerido'),
  city: _zod.z.string().min(1, 'Ciudad es requerida'),
  state: _zod.z.string().min(1, 'Provincia es requerida'),
  postal_code: _zod.z.string().min(4, 'CÃ³digo postal debe tener al menos 4 caracteres'),
  country: _zod.z.string().default('Argentina'),
  latitude: _zod.z.number().optional(),
  longitude: _zod.z.number().optional(),
  reference: _zod.z.string().optional()
}));
const CreateShipmentSchema =
/* istanbul ignore next */
(cov_9pglkml6o().s[14]++, _zod.z.object({
  order_id: _zod.z.number().positive('ID de orden debe ser positivo'),
  carrier_id: _zod.z.number().positive().optional(),
  shipping_service: _zod.z.nativeEnum(_logistics.ShippingService),
  items: _zod.z.array(_zod.z.object({
    order_item_id: _zod.z.number().positive().optional(),
    product_id: _zod.z.number().positive('ID de producto es requerido'),
    quantity: _zod.z.number().positive('Cantidad debe ser positiva'),
    weight_kg: _zod.z.number().positive().optional()
  })).min(1, 'Debe incluir al menos un item'),
  pickup_address: AddressSchema.optional(),
  delivery_address: AddressSchema,
  weight_kg: _zod.z.number().positive().optional(),
  dimensions_cm: _zod.z.string().regex(/^\d+x\d+x\d+$/, 'Formato debe ser LxWxH (ej: 30x20x15)').optional(),
  special_instructions: _zod.z.string().max(500).optional(),
  notes: _zod.z.string().max(1000).optional(),
  estimated_delivery_date: _zod.z.string().datetime().optional()
}));
const GetShipmentsSchema =
/* istanbul ignore next */
(cov_9pglkml6o().s[15]++, _zod.z.object({
  page: _zod.z.coerce.number().positive().default(1),
  limit: _zod.z.coerce.number().positive().max(100).default(20),
  status: _zod.z.nativeEnum(_logistics.ShipmentStatus).optional(),
  carrier: _zod.z.string().optional(),
  date_from: _zod.z.string().datetime().optional(),
  date_to: _zod.z.string().datetime().optional(),
  search: _zod.z.string().optional(),
  order_by: _zod.z.enum(['created_at', 'updated_at', 'estimated_delivery_date']).default('created_at'),
  order_direction: _zod.z.enum(['asc', 'desc']).default('desc')
}));
// =====================================================
// MIDDLEWARE DE AUTENTICACIÃN
// =====================================================
async function validateAdminAuth(request) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[4]++;
  const session =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[16]++, await (0, _config.auth)());
  /* istanbul ignore next */
  cov_9pglkml6o().s[17]++;
  if (!session?.user) {
    /* istanbul ignore next */
    cov_9pglkml6o().b[0][0]++;
    cov_9pglkml6o().s[18]++;
    return _server.NextResponse.json({
      error: 'Unauthorized'
    }, {
      status: 401
    });
  } else
  /* istanbul ignore next */
  {
    cov_9pglkml6o().b[0][1]++;
  }
  // Verificar rol de administrador usando el email
  const adminEmails =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[19]++, ['santiago@xor.com.ar']);
  /* istanbul ignore next */
  cov_9pglkml6o().s[20]++;
  if (!adminEmails.includes(
  /* istanbul ignore next */
  (cov_9pglkml6o().b[2][0]++, session.user.email) ||
  /* istanbul ignore next */
  (cov_9pglkml6o().b[2][1]++, ''))) {
    /* istanbul ignore next */
    cov_9pglkml6o().b[1][0]++;
    cov_9pglkml6o().s[21]++;
    return _server.NextResponse.json({
      error: 'Insufficient permissions'
    }, {
      status: 403
    });
  } else
  /* istanbul ignore next */
  {
    cov_9pglkml6o().b[1][1]++;
  }
  cov_9pglkml6o().s[22]++;
  return null;
}
// =====================================================
// FUNCIONES AUXILIARES
// =====================================================
function generateShipmentNumber() {
  /* istanbul ignore next */
  cov_9pglkml6o().f[5]++;
  const date =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[23]++, new Date());
  const dateStr =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[24]++, date.toISOString().slice(0, 10).replace(/-/g, ''));
  const randomStr =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[25]++, Math.random().toString(36).substring(2, 8).toUpperCase());
  /* istanbul ignore next */
  cov_9pglkml6o().s[26]++;
  return `SH${dateStr}${randomStr}`;
}
async function validateOrderExists(supabase, orderId) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[6]++;
  const {
    data,
    error
  } =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[27]++, await supabase.from('orders').select('id').eq('id', orderId).single());
  /* istanbul ignore next */
  cov_9pglkml6o().s[28]++;
  return /* istanbul ignore next */(cov_9pglkml6o().b[3][0]++, !error) &&
  /* istanbul ignore next */
  (cov_9pglkml6o().b[3][1]++, data);
}
async function createShipmentItems(supabase, shipmentId, items) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[7]++;
  const shipmentItems =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[29]++, items.map(item => {
    /* istanbul ignore next */
    cov_9pglkml6o().f[8]++;
    cov_9pglkml6o().s[30]++;
    return {
      shipment_id: shipmentId,
      order_item_id: item.order_item_id,
      product_id: item.product_id,
      quantity: item.quantity,
      weight_kg: item.weight_kg
    };
  }));
  const {
    error
  } =
  /* istanbul ignore next */
  (cov_9pglkml6o().s[31]++, await supabase.from('shipment_items').insert(shipmentItems));
  /* istanbul ignore next */
  cov_9pglkml6o().s[32]++;
  if (error) {
    /* istanbul ignore next */
    cov_9pglkml6o().b[4][0]++;
    cov_9pglkml6o().s[33]++;
    throw error;
  } else
  /* istanbul ignore next */
  {
    cov_9pglkml6o().b[4][1]++;
  }
}
async function GET(request) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[9]++;
  cov_9pglkml6o().s[34]++;
  try {
    // Validar autenticaciÃ³n
    const authError =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[35]++, await validateAdminAuth(request));
    /* istanbul ignore next */
    cov_9pglkml6o().s[36]++;
    if (authError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[5][0]++;
      cov_9pglkml6o().s[37]++;
      return authError;
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[5][1]++;
    }
    // Parsear y validar query parameters
    const {
      searchParams
    } =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[38]++, new URL(request.url));
    const queryParams =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[39]++, Object.fromEntries(searchParams.entries()));
    const validatedParams =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[40]++, GetShipmentsSchema.parse(queryParams));
    // Crear cliente Supabase
    const supabase =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[41]++, await (0, _server1.createClient)());
    // Construir query base
    let query =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[42]++, supabase.from('shipments').select(`
        *,
        carrier:couriers(id, name, code),
        items:shipment_items(
          id, quantity, weight_kg,
          product:products(id, name, slug, images)
        )
      `, {
      count: 'exact'
    }));
    // Aplicar filtros
    /* istanbul ignore next */
    cov_9pglkml6o().s[43]++;
    if (validatedParams.status) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[6][0]++;
      cov_9pglkml6o().s[44]++;
      query = query.eq('status', validatedParams.status);
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[6][1]++;
    }
    cov_9pglkml6o().s[45]++;
    if (validatedParams.carrier) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[7][0]++;
      cov_9pglkml6o().s[46]++;
      query = query.eq('couriers.code', validatedParams.carrier);
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[7][1]++;
    }
    cov_9pglkml6o().s[47]++;
    if (validatedParams.date_from) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[8][0]++;
      cov_9pglkml6o().s[48]++;
      query = query.gte('created_at', validatedParams.date_from);
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[8][1]++;
    }
    cov_9pglkml6o().s[49]++;
    if (validatedParams.date_to) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[9][0]++;
      cov_9pglkml6o().s[50]++;
      query = query.lte('created_at', validatedParams.date_to);
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[9][1]++;
    }
    cov_9pglkml6o().s[51]++;
    if (validatedParams.search) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[10][0]++;
      cov_9pglkml6o().s[52]++;
      query = query.or(`
        shipment_number.ilike.%${validatedParams.search}%,
        tracking_number.ilike.%${validatedParams.search}%,
        order_id.eq.${isNaN(Number(validatedParams.search)) ?
      /* istanbul ignore next */
      (cov_9pglkml6o().b[11][0]++, 0) :
      /* istanbul ignore next */
      (cov_9pglkml6o().b[11][1]++, validatedParams.search)}
      `);
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[10][1]++;
    }
    // Aplicar ordenamiento
    cov_9pglkml6o().s[53]++;
    query = query.order(validatedParams.order_by, {
      ascending: validatedParams.order_direction === 'asc'
    });
    // Aplicar paginaciÃ³n
    const offset =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[54]++, (validatedParams.page - 1) * validatedParams.limit);
    /* istanbul ignore next */
    cov_9pglkml6o().s[55]++;
    query = query.range(offset, offset + validatedParams.limit - 1);
    // Ejecutar query
    const {
      data: shipments,
      error,
      count
    } =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[56]++, await query);
    /* istanbul ignore next */
    cov_9pglkml6o().s[57]++;
    if (error) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[12][0]++;
      cov_9pglkml6o().s[58]++;
      throw error;
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[12][1]++;
    }
    // Construir respuesta paginada
    const totalPages =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[59]++, Math.ceil((
    /* istanbul ignore next */
    (cov_9pglkml6o().b[13][0]++, count) ||
    /* istanbul ignore next */
    (cov_9pglkml6o().b[13][1]++, 0)) / validatedParams.limit));
    const response =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[60]++, {
      data:
      /* istanbul ignore next */
      (cov_9pglkml6o().b[14][0]++, shipments) ||
      /* istanbul ignore next */
      (cov_9pglkml6o().b[14][1]++, []),
      pagination: {
        page: validatedParams.page,
        limit: validatedParams.limit,
        total:
        /* istanbul ignore next */
        (cov_9pglkml6o().b[15][0]++, count) ||
        /* istanbul ignore next */
        (cov_9pglkml6o().b[15][1]++, 0),
        total_pages: totalPages,
        has_next: validatedParams.page < totalPages,
        has_prev: validatedParams.page > 1
      }
    });
    /* istanbul ignore next */
    cov_9pglkml6o().s[61]++;
    return _server.NextResponse.json(response);
  } catch (error) {
    /* istanbul ignore next */
    cov_9pglkml6o().s[62]++;
    console.error('Error in GET shipments API:', error);
    /* istanbul ignore next */
    cov_9pglkml6o().s[63]++;
    if (error instanceof _zod.z.ZodError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[16][0]++;
      cov_9pglkml6o().s[64]++;
      return _server.NextResponse.json({
        error: 'Validation error',
        details: error.errors.reduce((acc, err) => {
          /* istanbul ignore next */
          cov_9pglkml6o().f[10]++;
          cov_9pglkml6o().s[65]++;
          acc[err.path.join('.')] = [err.message];
          /* istanbul ignore next */
          cov_9pglkml6o().s[66]++;
          return acc;
        }, {})
      }, {
        status: 422
      });
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[16][1]++;
    }
    cov_9pglkml6o().s[67]++;
    return _server.NextResponse.json({
      error: 'Internal server error',
      details: error instanceof Error ?
      /* istanbul ignore next */
      (cov_9pglkml6o().b[17][0]++, error.message) :
      /* istanbul ignore next */
      (cov_9pglkml6o().b[17][1]++, 'Unknown error')
    }, {
      status: 500
    });
  }
}
async function POST(request) {
  /* istanbul ignore next */
  cov_9pglkml6o().f[11]++;
  cov_9pglkml6o().s[68]++;
  try {
    // Validar autenticaciÃ³n
    const authError =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[69]++, await validateAdminAuth(request));
    /* istanbul ignore next */
    cov_9pglkml6o().s[70]++;
    if (authError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[18][0]++;
      cov_9pglkml6o().s[71]++;
      return authError;
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[18][1]++;
    }
    // Parsear y validar body
    const body =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[72]++, await request.json());
    const validatedData =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[73]++, CreateShipmentSchema.parse(body));
    // Crear cliente Supabase
    const supabase =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[74]++, await (0, _server1.createClient)());
    // Validar que la orden existe
    const orderExists =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[75]++, await validateOrderExists(supabase, validatedData.order_id));
    /* istanbul ignore next */
    cov_9pglkml6o().s[76]++;
    if (!orderExists) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[19][0]++;
      cov_9pglkml6o().s[77]++;
      return _server.NextResponse.json({
        error: 'Order not found'
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[19][1]++;
    }
    // Generar nÃºmero de envÃ­o Ãºnico
    const shipmentNumber =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[78]++, generateShipmentNumber());
    // Crear el envÃ­o
    const {
      data: shipment,
      error: shipmentError
    } =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[79]++, await supabase.from('shipments').insert({
      shipment_number: shipmentNumber,
      order_id: validatedData.order_id,
      status: 'pending',
      carrier_id: validatedData.carrier_id,
      shipping_service: validatedData.shipping_service,
      pickup_address: validatedData.pickup_address,
      delivery_address: validatedData.delivery_address,
      weight_kg: validatedData.weight_kg,
      dimensions_cm: validatedData.dimensions_cm,
      special_instructions: validatedData.special_instructions,
      notes: validatedData.notes,
      estimated_delivery_date: validatedData.estimated_delivery_date
    }).select(`
        *,
        carrier:couriers(id, name, code)
      `).single());
    /* istanbul ignore next */
    cov_9pglkml6o().s[80]++;
    if (shipmentError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[20][0]++;
      cov_9pglkml6o().s[81]++;
      throw shipmentError;
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[20][1]++;
    }
    // Crear los items del envÃ­o
    cov_9pglkml6o().s[82]++;
    await createShipmentItems(supabase, shipment.id, validatedData.items);
    // Obtener el envÃ­o completo con items
    const {
      data: completeShipment,
      error: fetchError
    } =
    /* istanbul ignore next */
    (cov_9pglkml6o().s[83]++, await supabase.from('shipments').select(`
        *,
        carrier:couriers(id, name, code),
        items:shipment_items(
          id, quantity, weight_kg,
          product:products(id, name, slug, images)
        )
      `).eq('id', shipment.id).single());
    /* istanbul ignore next */
    cov_9pglkml6o().s[84]++;
    if (fetchError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[21][0]++;
      cov_9pglkml6o().s[85]++;
      throw fetchError;
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[21][1]++;
    }
    // Crear evento de tracking inicial
    cov_9pglkml6o().s[86]++;
    await supabase.from('tracking_events').insert({
      shipment_id: shipment.id,
      status: 'pending',
      description: 'EnvÃ­o creado y pendiente de confirmaciÃ³n',
      occurred_at: new Date().toISOString()
    });
    /* istanbul ignore next */
    cov_9pglkml6o().s[87]++;
    return _server.NextResponse.json({
      data: completeShipment,
      message: 'Shipment created successfully'
    }, {
      status: 201
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_9pglkml6o().s[88]++;
    console.error('Error in POST shipments API:', error);
    /* istanbul ignore next */
    cov_9pglkml6o().s[89]++;
    if (error instanceof _zod.z.ZodError) {
      /* istanbul ignore next */
      cov_9pglkml6o().b[22][0]++;
      cov_9pglkml6o().s[90]++;
      return _server.NextResponse.json({
        error: 'Validation error',
        details: error.errors.reduce((acc, err) => {
          /* istanbul ignore next */
          cov_9pglkml6o().f[12]++;
          cov_9pglkml6o().s[91]++;
          acc[err.path.join('.')] = [err.message];
          /* istanbul ignore next */
          cov_9pglkml6o().s[92]++;
          return acc;
        }, {})
      }, {
        status: 422
      });
    } else
    /* istanbul ignore next */
    {
      cov_9pglkml6o().b[22][1]++;
    }
    cov_9pglkml6o().s[93]++;
    return _server.NextResponse.json({
      error: 'Internal server error',
      details: error instanceof Error ?
      /* istanbul ignore next */
      (cov_9pglkml6o().b[23][0]++, error.message) :
      /* istanbul ignore next */
      (cov_9pglkml6o().b[23][1]++, 'Unknown error')
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOXBnbGttbDZvIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiR0VUIiwiZiIsIlBPU1QiLCJydW50aW1lIiwiQWRkcmVzc1NjaGVtYSIsIl96b2QiLCJ6Iiwib2JqZWN0Iiwic3RyZWV0Iiwic3RyaW5nIiwibWluIiwibnVtYmVyIiwiYXBhcnRtZW50Iiwib3B0aW9uYWwiLCJuZWlnaGJvcmhvb2QiLCJjaXR5Iiwic3RhdGUiLCJwb3N0YWxfY29kZSIsImNvdW50cnkiLCJkZWZhdWx0IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJyZWZlcmVuY2UiLCJDcmVhdGVTaGlwbWVudFNjaGVtYSIsIm9yZGVyX2lkIiwicG9zaXRpdmUiLCJjYXJyaWVyX2lkIiwic2hpcHBpbmdfc2VydmljZSIsIm5hdGl2ZUVudW0iLCJfbG9naXN0aWNzIiwiU2hpcHBpbmdTZXJ2aWNlIiwiaXRlbXMiLCJhcnJheSIsIm9yZGVyX2l0ZW1faWQiLCJwcm9kdWN0X2lkIiwicXVhbnRpdHkiLCJ3ZWlnaHRfa2ciLCJwaWNrdXBfYWRkcmVzcyIsImRlbGl2ZXJ5X2FkZHJlc3MiLCJkaW1lbnNpb25zX2NtIiwicmVnZXgiLCJzcGVjaWFsX2luc3RydWN0aW9ucyIsIm1heCIsIm5vdGVzIiwiZXN0aW1hdGVkX2RlbGl2ZXJ5X2RhdGUiLCJkYXRldGltZSIsIkdldFNoaXBtZW50c1NjaGVtYSIsInBhZ2UiLCJjb2VyY2UiLCJsaW1pdCIsInN0YXR1cyIsIlNoaXBtZW50U3RhdHVzIiwiY2FycmllciIsImRhdGVfZnJvbSIsImRhdGVfdG8iLCJzZWFyY2giLCJvcmRlcl9ieSIsImVudW0iLCJvcmRlcl9kaXJlY3Rpb24iLCJ2YWxpZGF0ZUFkbWluQXV0aCIsInJlcXVlc3QiLCJzZXNzaW9uIiwiX2NvbmZpZyIsImF1dGgiLCJ1c2VyIiwiYiIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZXJyb3IiLCJhZG1pbkVtYWlscyIsImluY2x1ZGVzIiwiZW1haWwiLCJnZW5lcmF0ZVNoaXBtZW50TnVtYmVyIiwiZGF0ZSIsIkRhdGUiLCJkYXRlU3RyIiwidG9JU09TdHJpbmciLCJzbGljZSIsInJlcGxhY2UiLCJyYW5kb21TdHIiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ0b1VwcGVyQ2FzZSIsInZhbGlkYXRlT3JkZXJFeGlzdHMiLCJzdXBhYmFzZSIsIm9yZGVySWQiLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY3JlYXRlU2hpcG1lbnRJdGVtcyIsInNoaXBtZW50SWQiLCJzaGlwbWVudEl0ZW1zIiwibWFwIiwiaXRlbSIsInNoaXBtZW50X2lkIiwiaW5zZXJ0IiwiYXV0aEVycm9yIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicXVlcnlQYXJhbXMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJ2YWxpZGF0ZWRQYXJhbXMiLCJwYXJzZSIsIl9zZXJ2ZXIxIiwiY3JlYXRlQ2xpZW50IiwicXVlcnkiLCJjb3VudCIsImd0ZSIsImx0ZSIsIm9yIiwiaXNOYU4iLCJOdW1iZXIiLCJvcmRlciIsImFzY2VuZGluZyIsIm9mZnNldCIsInJhbmdlIiwic2hpcG1lbnRzIiwidG90YWxQYWdlcyIsImNlaWwiLCJyZXNwb25zZSIsInBhZ2luYXRpb24iLCJ0b3RhbCIsInRvdGFsX3BhZ2VzIiwiaGFzX25leHQiLCJoYXNfcHJldiIsImNvbnNvbGUiLCJab2RFcnJvciIsImRldGFpbHMiLCJlcnJvcnMiLCJyZWR1Y2UiLCJhY2MiLCJlcnIiLCJwYXRoIiwiam9pbiIsIm1lc3NhZ2UiLCJFcnJvciIsImJvZHkiLCJ2YWxpZGF0ZWREYXRhIiwib3JkZXJFeGlzdHMiLCJzaGlwbWVudE51bWJlciIsInNoaXBtZW50Iiwic2hpcG1lbnRFcnJvciIsInNoaXBtZW50X251bWJlciIsImlkIiwiY29tcGxldGVTaGlwbWVudCIsImZldGNoRXJyb3IiLCJkZXNjcmlwdGlvbiIsIm9jY3VycmVkX2F0Il0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxhcHBcXGFwaVxcYWRtaW5cXGxvZ2lzdGljc1xcc2hpcG1lbnRzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb25maWd1cmFjacOzbiBwYXJhIE5vZGUuanMgUnVudGltZVxyXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQVBJOiBHRVNUScOTTiBERSBFTlbDjU9TIEVOVEVSUFJJU0VcclxuLy8gRW5kcG9pbnRzOiBHRVQvUE9TVCAvYXBpL2FkbWluL2xvZ2lzdGljcy9zaGlwbWVudHNcclxuLy8gRGVzY3JpcGNpw7NuOiBDUlVEIGNvbXBsZXRvIGRlIGVudsOtb3MgY29uIHZhbGlkYWNpw7NuXHJcbi8vIEJhc2FkbyBlbjogUGF0cm9uZXMgU3ByZWUgQ29tbWVyY2UgKyBXb29Db21tZXJjZVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJ0AvbGliL2F1dGgvY29uZmlnJztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvaW50ZWdyYXRpb25zL3N1cGFiYXNlL3NlcnZlcic7XHJcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnQC90eXBlcy9kYXRhYmFzZSc7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgeyBcclxuICBDcmVhdGVTaGlwbWVudFJlcXVlc3QsIFxyXG4gIEdldFNoaXBtZW50c1JlcXVlc3QsXHJcbiAgU2hpcG1lbnQsXHJcbiAgUGFnaW5hdGVkUmVzcG9uc2UsXHJcbiAgU2hpcG1lbnRTdGF0dXMsXHJcbiAgU2hpcHBpbmdTZXJ2aWNlIFxyXG59IGZyb20gJ0AvdHlwZXMvbG9naXN0aWNzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFNDSEVNQVMgREUgVkFMSURBQ0nDk04gWk9EXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBBZGRyZXNzU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIHN0cmVldDogei5zdHJpbmcoKS5taW4oMSwgJ0NhbGxlIGVzIHJlcXVlcmlkYScpLFxyXG4gIG51bWJlcjogei5zdHJpbmcoKS5taW4oMSwgJ07Dum1lcm8gZXMgcmVxdWVyaWRvJyksXHJcbiAgYXBhcnRtZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgbmVpZ2hib3Job29kOiB6LnN0cmluZygpLm1pbigxLCAnQmFycmlvIGVzIHJlcXVlcmlkbycpLFxyXG4gIGNpdHk6IHouc3RyaW5nKCkubWluKDEsICdDaXVkYWQgZXMgcmVxdWVyaWRhJyksXHJcbiAgc3RhdGU6IHouc3RyaW5nKCkubWluKDEsICdQcm92aW5jaWEgZXMgcmVxdWVyaWRhJyksXHJcbiAgcG9zdGFsX2NvZGU6IHouc3RyaW5nKCkubWluKDQsICdDw7NkaWdvIHBvc3RhbCBkZWJlIHRlbmVyIGFsIG1lbm9zIDQgY2FyYWN0ZXJlcycpLFxyXG4gIGNvdW50cnk6IHouc3RyaW5nKCkuZGVmYXVsdCgnQXJnZW50aW5hJyksXHJcbiAgbGF0aXR1ZGU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICBsb25naXR1ZGU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICByZWZlcmVuY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxyXG59KTtcclxuXHJcbmNvbnN0IENyZWF0ZVNoaXBtZW50U2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIG9yZGVyX2lkOiB6Lm51bWJlcigpLnBvc2l0aXZlKCdJRCBkZSBvcmRlbiBkZWJlIHNlciBwb3NpdGl2bycpLFxyXG4gIGNhcnJpZXJfaWQ6IHoubnVtYmVyKCkucG9zaXRpdmUoKS5vcHRpb25hbCgpLFxyXG4gIHNoaXBwaW5nX3NlcnZpY2U6IHoubmF0aXZlRW51bShTaGlwcGluZ1NlcnZpY2UpLFxyXG4gIGl0ZW1zOiB6LmFycmF5KHoub2JqZWN0KHtcclxuICAgIG9yZGVyX2l0ZW1faWQ6IHoubnVtYmVyKCkucG9zaXRpdmUoKS5vcHRpb25hbCgpLFxyXG4gICAgcHJvZHVjdF9pZDogei5udW1iZXIoKS5wb3NpdGl2ZSgnSUQgZGUgcHJvZHVjdG8gZXMgcmVxdWVyaWRvJyksXHJcbiAgICBxdWFudGl0eTogei5udW1iZXIoKS5wb3NpdGl2ZSgnQ2FudGlkYWQgZGViZSBzZXIgcG9zaXRpdmEnKSxcclxuICAgIHdlaWdodF9rZzogei5udW1iZXIoKS5wb3NpdGl2ZSgpLm9wdGlvbmFsKClcclxuICB9KSkubWluKDEsICdEZWJlIGluY2x1aXIgYWwgbWVub3MgdW4gaXRlbScpLFxyXG4gIHBpY2t1cF9hZGRyZXNzOiBBZGRyZXNzU2NoZW1hLm9wdGlvbmFsKCksXHJcbiAgZGVsaXZlcnlfYWRkcmVzczogQWRkcmVzc1NjaGVtYSxcclxuICB3ZWlnaHRfa2c6IHoubnVtYmVyKCkucG9zaXRpdmUoKS5vcHRpb25hbCgpLFxyXG4gIGRpbWVuc2lvbnNfY206IHouc3RyaW5nKCkucmVnZXgoL15cXGQreFxcZCt4XFxkKyQvLCAnRm9ybWF0byBkZWJlIHNlciBMeFd4SCAoZWo6IDMweDIweDE1KScpLm9wdGlvbmFsKCksXHJcbiAgc3BlY2lhbF9pbnN0cnVjdGlvbnM6IHouc3RyaW5nKCkubWF4KDUwMCkub3B0aW9uYWwoKSxcclxuICBub3Rlczogei5zdHJpbmcoKS5tYXgoMTAwMCkub3B0aW9uYWwoKSxcclxuICBlc3RpbWF0ZWRfZGVsaXZlcnlfZGF0ZTogei5zdHJpbmcoKS5kYXRldGltZSgpLm9wdGlvbmFsKClcclxufSk7XHJcblxyXG5jb25zdCBHZXRTaGlwbWVudHNTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgcGFnZTogei5jb2VyY2UubnVtYmVyKCkucG9zaXRpdmUoKS5kZWZhdWx0KDEpLFxyXG4gIGxpbWl0OiB6LmNvZXJjZS5udW1iZXIoKS5wb3NpdGl2ZSgpLm1heCgxMDApLmRlZmF1bHQoMjApLFxyXG4gIHN0YXR1czogei5uYXRpdmVFbnVtKFNoaXBtZW50U3RhdHVzKS5vcHRpb25hbCgpLFxyXG4gIGNhcnJpZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBkYXRlX2Zyb206IHouc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpLFxyXG4gIGRhdGVfdG86IHouc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpLFxyXG4gIHNlYXJjaDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIG9yZGVyX2J5OiB6LmVudW0oWydjcmVhdGVkX2F0JywgJ3VwZGF0ZWRfYXQnLCAnZXN0aW1hdGVkX2RlbGl2ZXJ5X2RhdGUnXSkuZGVmYXVsdCgnY3JlYXRlZF9hdCcpLFxyXG4gIG9yZGVyX2RpcmVjdGlvbjogei5lbnVtKFsnYXNjJywgJ2Rlc2MnXSkuZGVmYXVsdCgnZGVzYycpXHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTUlERExFV0FSRSBERSBBVVRFTlRJQ0FDScOTTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUFkbWluQXV0aChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBhdXRoKCk7XHJcblxyXG4gIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBWZXJpZmljYXIgcm9sIGRlIGFkbWluaXN0cmFkb3IgdXNhbmRvIGVsIGVtYWlsXHJcbiAgY29uc3QgYWRtaW5FbWFpbHMgPSBbJ3NhbnRpYWdvQHhvci5jb20uYXInXTtcclxuICBpZiAoIWFkbWluRW1haWxzLmluY2x1ZGVzKHNlc3Npb24udXNlci5lbWFpbCB8fCAnJykpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSxcclxuICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEZVTkNJT05FUyBBVVhJTElBUkVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVNoaXBtZW50TnVtYmVyKCk6IHN0cmluZyB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgZGF0ZVN0ciA9IGRhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkucmVwbGFjZSgvLS9nLCAnJyk7XHJcbiAgY29uc3QgcmFuZG9tU3RyID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpLnRvVXBwZXJDYXNlKCk7XHJcbiAgcmV0dXJuIGBTSCR7ZGF0ZVN0cn0ke3JhbmRvbVN0cn1gO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZU9yZGVyRXhpc3RzKHN1cGFiYXNlOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGllbnQ8RGF0YWJhc2U+Piwgb3JkZXJJZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdvcmRlcnMnKVxyXG4gICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgLmVxKCdpZCcsIG9yZGVySWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcbiAgXHJcbiAgcmV0dXJuICFlcnJvciAmJiBkYXRhO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVTaGlwbWVudEl0ZW1zKFxyXG4gIHN1cGFiYXNlOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGllbnQ8RGF0YWJhc2U+PiwgXHJcbiAgc2hpcG1lbnRJZDogbnVtYmVyLCBcclxuICBpdGVtczogQ3JlYXRlU2hpcG1lbnRSZXF1ZXN0WydpdGVtcyddXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHNoaXBtZW50SXRlbXMgPSBpdGVtcy5tYXAoaXRlbSA9PiAoe1xyXG4gICAgc2hpcG1lbnRfaWQ6IHNoaXBtZW50SWQsXHJcbiAgICBvcmRlcl9pdGVtX2lkOiBpdGVtLm9yZGVyX2l0ZW1faWQsXHJcbiAgICBwcm9kdWN0X2lkOiBpdGVtLnByb2R1Y3RfaWQsXHJcbiAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcclxuICAgIHdlaWdodF9rZzogaXRlbS53ZWlnaHRfa2dcclxuICB9KSk7XHJcbiAgXHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzaGlwbWVudF9pdGVtcycpXHJcbiAgICAuaW5zZXJ0KHNoaXBtZW50SXRlbXMpO1xyXG4gIFxyXG4gIGlmIChlcnJvcikge3Rocm93IGVycm9yO31cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0VUOiBPQlRFTkVSIEVOVsONT1MgQ09OIEZJTFRST1MgWSBQQUdJTkFDScOTTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBWYWxpZGFyIGF1dGVudGljYWNpw7NuXHJcbiAgICBjb25zdCBhdXRoRXJyb3IgPSBhd2FpdCB2YWxpZGF0ZUFkbWluQXV0aChyZXF1ZXN0KTtcclxuICAgIGlmIChhdXRoRXJyb3IpIHtyZXR1cm4gYXV0aEVycm9yO31cclxuICAgIFxyXG4gICAgLy8gUGFyc2VhciB5IHZhbGlkYXIgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBPYmplY3QuZnJvbUVudHJpZXMoc2VhcmNoUGFyYW1zLmVudHJpZXMoKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHZhbGlkYXRlZFBhcmFtcyA9IEdldFNoaXBtZW50c1NjaGVtYS5wYXJzZShxdWVyeVBhcmFtcyk7XHJcbiAgICBcclxuICAgIC8vIENyZWFyIGNsaWVudGUgU3VwYWJhc2VcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcbiAgICBcclxuICAgIC8vIENvbnN0cnVpciBxdWVyeSBiYXNlXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnc2hpcG1lbnRzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBjYXJyaWVyOmNvdXJpZXJzKGlkLCBuYW1lLCBjb2RlKSxcclxuICAgICAgICBpdGVtczpzaGlwbWVudF9pdGVtcyhcclxuICAgICAgICAgIGlkLCBxdWFudGl0eSwgd2VpZ2h0X2tnLFxyXG4gICAgICAgICAgcHJvZHVjdDpwcm9kdWN0cyhpZCwgbmFtZSwgc2x1ZywgaW1hZ2VzKVxyXG4gICAgICAgIClcclxuICAgICAgYCwgeyBjb3VudDogJ2V4YWN0JyB9KTtcclxuICAgIFxyXG4gICAgLy8gQXBsaWNhciBmaWx0cm9zXHJcbiAgICBpZiAodmFsaWRhdGVkUGFyYW1zLnN0YXR1cykge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdGF0dXMnLCB2YWxpZGF0ZWRQYXJhbXMuc3RhdHVzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHZhbGlkYXRlZFBhcmFtcy5jYXJyaWVyKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2NvdXJpZXJzLmNvZGUnLCB2YWxpZGF0ZWRQYXJhbXMuY2Fycmllcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh2YWxpZGF0ZWRQYXJhbXMuZGF0ZV9mcm9tKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZ3RlKCdjcmVhdGVkX2F0JywgdmFsaWRhdGVkUGFyYW1zLmRhdGVfZnJvbSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh2YWxpZGF0ZWRQYXJhbXMuZGF0ZV90bykge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgnY3JlYXRlZF9hdCcsIHZhbGlkYXRlZFBhcmFtcy5kYXRlX3RvKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHZhbGlkYXRlZFBhcmFtcy5zZWFyY2gpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5vcihgXHJcbiAgICAgICAgc2hpcG1lbnRfbnVtYmVyLmlsaWtlLiUke3ZhbGlkYXRlZFBhcmFtcy5zZWFyY2h9JSxcclxuICAgICAgICB0cmFja2luZ19udW1iZXIuaWxpa2UuJSR7dmFsaWRhdGVkUGFyYW1zLnNlYXJjaH0lLFxyXG4gICAgICAgIG9yZGVyX2lkLmVxLiR7aXNOYU4oTnVtYmVyKHZhbGlkYXRlZFBhcmFtcy5zZWFyY2gpKSA/IDAgOiB2YWxpZGF0ZWRQYXJhbXMuc2VhcmNofVxyXG4gICAgICBgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQXBsaWNhciBvcmRlbmFtaWVudG9cclxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoXHJcbiAgICAgIHZhbGlkYXRlZFBhcmFtcy5vcmRlcl9ieSwgXHJcbiAgICAgIHsgYXNjZW5kaW5nOiB2YWxpZGF0ZWRQYXJhbXMub3JkZXJfZGlyZWN0aW9uID09PSAnYXNjJyB9XHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBBcGxpY2FyIHBhZ2luYWNpw7NuXHJcbiAgICBjb25zdCBvZmZzZXQgPSAodmFsaWRhdGVkUGFyYW1zLnBhZ2UgLSAxKSAqIHZhbGlkYXRlZFBhcmFtcy5saW1pdDtcclxuICAgIHF1ZXJ5ID0gcXVlcnkucmFuZ2Uob2Zmc2V0LCBvZmZzZXQgKyB2YWxpZGF0ZWRQYXJhbXMubGltaXQgLSAxKTtcclxuICAgIFxyXG4gICAgLy8gRWplY3V0YXIgcXVlcnlcclxuICAgIGNvbnN0IHsgZGF0YTogc2hpcG1lbnRzLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHF1ZXJ5O1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHt0aHJvdyBlcnJvcjt9XHJcbiAgICBcclxuICAgIC8vIENvbnN0cnVpciByZXNwdWVzdGEgcGFnaW5hZGFcclxuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwoKGNvdW50IHx8IDApIC8gdmFsaWRhdGVkUGFyYW1zLmxpbWl0KTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2U6IFBhZ2luYXRlZFJlc3BvbnNlPFNoaXBtZW50PiA9IHtcclxuICAgICAgZGF0YTogc2hpcG1lbnRzIHx8IFtdLFxyXG4gICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgcGFnZTogdmFsaWRhdGVkUGFyYW1zLnBhZ2UsXHJcbiAgICAgICAgbGltaXQ6IHZhbGlkYXRlZFBhcmFtcy5saW1pdCxcclxuICAgICAgICB0b3RhbDogY291bnQgfHwgMCxcclxuICAgICAgICB0b3RhbF9wYWdlczogdG90YWxQYWdlcyxcclxuICAgICAgICBoYXNfbmV4dDogdmFsaWRhdGVkUGFyYW1zLnBhZ2UgPCB0b3RhbFBhZ2VzLFxyXG4gICAgICAgIGhhc19wcmV2OiB2YWxpZGF0ZWRQYXJhbXMucGFnZSA+IDFcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBHRVQgc2hpcG1lbnRzIEFQSTonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZXJyb3InLFxyXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IuZXJyb3JzLnJlZHVjZSgoYWNjLCBlcnIpID0+IHtcclxuICAgICAgICAgICAgYWNjW2Vyci5wYXRoLmpvaW4oJy4nKV0gPSBbZXJyLm1lc3NhZ2VdO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nW10+KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyMiB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUE9TVDogQ1JFQVIgTlVFVk8gRU5Ww41PXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBWYWxpZGFyIGF1dGVudGljYWNpw7NuXHJcbiAgICBjb25zdCBhdXRoRXJyb3IgPSBhd2FpdCB2YWxpZGF0ZUFkbWluQXV0aChyZXF1ZXN0KTtcclxuICAgIGlmIChhdXRoRXJyb3IpIHtyZXR1cm4gYXV0aEVycm9yO31cclxuICAgIFxyXG4gICAgLy8gUGFyc2VhciB5IHZhbGlkYXIgYm9keVxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IENyZWF0ZVNoaXBtZW50U2NoZW1hLnBhcnNlKGJvZHkpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhciBjbGllbnRlIFN1cGFiYXNlXHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGFyIHF1ZSBsYSBvcmRlbiBleGlzdGVcclxuICAgIGNvbnN0IG9yZGVyRXhpc3RzID0gYXdhaXQgdmFsaWRhdGVPcmRlckV4aXN0cyhzdXBhYmFzZSwgdmFsaWRhdGVkRGF0YS5vcmRlcl9pZCk7XHJcbiAgICBpZiAoIW9yZGVyRXhpc3RzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmFyIG7Dum1lcm8gZGUgZW52w61vIMO6bmljb1xyXG4gICAgY29uc3Qgc2hpcG1lbnROdW1iZXIgPSBnZW5lcmF0ZVNoaXBtZW50TnVtYmVyKCk7XHJcbiAgICBcclxuICAgIC8vIENyZWFyIGVsIGVudsOtb1xyXG4gICAgY29uc3QgeyBkYXRhOiBzaGlwbWVudCwgZXJyb3I6IHNoaXBtZW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdzaGlwbWVudHMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBzaGlwbWVudF9udW1iZXI6IHNoaXBtZW50TnVtYmVyLFxyXG4gICAgICAgIG9yZGVyX2lkOiB2YWxpZGF0ZWREYXRhLm9yZGVyX2lkLFxyXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIGNhcnJpZXJfaWQ6IHZhbGlkYXRlZERhdGEuY2Fycmllcl9pZCxcclxuICAgICAgICBzaGlwcGluZ19zZXJ2aWNlOiB2YWxpZGF0ZWREYXRhLnNoaXBwaW5nX3NlcnZpY2UsXHJcbiAgICAgICAgcGlja3VwX2FkZHJlc3M6IHZhbGlkYXRlZERhdGEucGlja3VwX2FkZHJlc3MsXHJcbiAgICAgICAgZGVsaXZlcnlfYWRkcmVzczogdmFsaWRhdGVkRGF0YS5kZWxpdmVyeV9hZGRyZXNzLFxyXG4gICAgICAgIHdlaWdodF9rZzogdmFsaWRhdGVkRGF0YS53ZWlnaHRfa2csXHJcbiAgICAgICAgZGltZW5zaW9uc19jbTogdmFsaWRhdGVkRGF0YS5kaW1lbnNpb25zX2NtLFxyXG4gICAgICAgIHNwZWNpYWxfaW5zdHJ1Y3Rpb25zOiB2YWxpZGF0ZWREYXRhLnNwZWNpYWxfaW5zdHJ1Y3Rpb25zLFxyXG4gICAgICAgIG5vdGVzOiB2YWxpZGF0ZWREYXRhLm5vdGVzLFxyXG4gICAgICAgIGVzdGltYXRlZF9kZWxpdmVyeV9kYXRlOiB2YWxpZGF0ZWREYXRhLmVzdGltYXRlZF9kZWxpdmVyeV9kYXRlXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgY2Fycmllcjpjb3VyaWVycyhpZCwgbmFtZSwgY29kZSlcclxuICAgICAgYClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoc2hpcG1lbnRFcnJvcikge3Rocm93IHNoaXBtZW50RXJyb3I7fVxyXG4gICAgXHJcbiAgICAvLyBDcmVhciBsb3MgaXRlbXMgZGVsIGVudsOtb1xyXG4gICAgYXdhaXQgY3JlYXRlU2hpcG1lbnRJdGVtcyhzdXBhYmFzZSwgc2hpcG1lbnQuaWQsIHZhbGlkYXRlZERhdGEuaXRlbXMpO1xyXG4gICAgXHJcbiAgICAvLyBPYnRlbmVyIGVsIGVudsOtbyBjb21wbGV0byBjb24gaXRlbXNcclxuICAgIGNvbnN0IHsgZGF0YTogY29tcGxldGVTaGlwbWVudCwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdzaGlwbWVudHMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIGNhcnJpZXI6Y291cmllcnMoaWQsIG5hbWUsIGNvZGUpLFxyXG4gICAgICAgIGl0ZW1zOnNoaXBtZW50X2l0ZW1zKFxyXG4gICAgICAgICAgaWQsIHF1YW50aXR5LCB3ZWlnaHRfa2csXHJcbiAgICAgICAgICBwcm9kdWN0OnByb2R1Y3RzKGlkLCBuYW1lLCBzbHVnLCBpbWFnZXMpXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ2lkJywgc2hpcG1lbnQuaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGZldGNoRXJyb3IpIHt0aHJvdyBmZXRjaEVycm9yO31cclxuICAgIFxyXG4gICAgLy8gQ3JlYXIgZXZlbnRvIGRlIHRyYWNraW5nIGluaWNpYWxcclxuICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd0cmFja2luZ19ldmVudHMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBzaGlwbWVudF9pZDogc2hpcG1lbnQuaWQsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdFbnbDrW8gY3JlYWRvIHkgcGVuZGllbnRlIGRlIGNvbmZpcm1hY2nDs24nLFxyXG4gICAgICAgIG9jY3VycmVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBkYXRhOiBjb21wbGV0ZVNoaXBtZW50LFxyXG4gICAgICAgIG1lc3NhZ2U6ICdTaGlwbWVudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSdcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMSB9XHJcbiAgICApO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIFBPU1Qgc2hpcG1lbnRzIEFQSTonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZXJyb3InLFxyXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IuZXJyb3JzLnJlZHVjZSgoYWNjLCBlcnIpID0+IHtcclxuICAgICAgICAgICAgYWNjW2Vyci5wYXRoLmpvaW4oJy4nKV0gPSBbZXJyLm1lc3NhZ2VdO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nW10+KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQyMiB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBaVFzQjtJQUFBQSxhQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxhQUFBO0FBQUFBLGFBQUEsR0FBQUUsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUFsSEFDLElBQUE7SUFBQTtJQUFBSCxhQUFBLEdBQUFJLENBQUE7SUFBQUosYUFBQSxHQUFBRSxDQUFBO1dBQUFDLEdBQUE7O01Ba0hBRSxLQUFBO0lBQUE7SUFBQUwsYUFBQSxHQUFBSSxDQUFBO0lBQUFKLGFBQUEsR0FBQUUsQ0FBQTtXQUFBRyxJQUFB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