{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\useFilterAnalytics.ts"],"sourcesContent":["// ===================================\n// HOOK: useFilterAnalytics - Sistema de Analytics para Filtros\n// ===================================\n\nimport { useCallback, useEffect, useRef } from 'react'\nimport { ProductFilterState } from './useProductFilters'\n\n// ===================================\n// TIPOS\n// ===================================\n\nexport interface FilterAnalyticsEvent {\n  event: string\n  category: 'filter'\n  action: string\n  label?: string\n  value?: number\n  custom_parameters?: Record<string, any>\n  timestamp: number\n  session_id: string\n  user_id?: string\n  page_url: string\n  page_title: string\n}\n\nexport interface FilterMetrics {\n  filter_applied: {\n    filter_type: string\n    filter_value: string\n    results_count: number\n    time_to_apply: number\n  }\n  filter_removed: {\n    filter_type: string\n    filter_value: string\n    remaining_filters: number\n  }\n  filter_cleared: {\n    total_filters_cleared: number\n    filter_types: string[]\n  }\n  search_performed: {\n    query: string\n    results_count: number\n    has_filters: boolean\n    filter_count: number\n  }\n  pagination_used: {\n    from_page: number\n    to_page: number\n    total_pages: number\n    results_per_page: number\n  }\n  sort_changed: {\n    from_sort: string\n    to_sort: string\n    results_count: number\n  }\n}\n\nexport interface UseFilterAnalyticsOptions {\n  enabled?: boolean\n  debug?: boolean\n  sessionId?: string\n  userId?: string\n}\n\n// ===================================\n// UTILIDADES\n// ===================================\n\n// Generar ID de sesión único\nconst generateSessionId = (): string => {\n  return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n}\n\n// Obtener o crear session ID\nconst getSessionId = (): string => {\n  if (typeof window === 'undefined') {\n    return generateSessionId()\n  }\n\n  let sessionId = sessionStorage.getItem('filter_analytics_session')\n  if (!sessionId) {\n    sessionId = generateSessionId()\n    sessionStorage.setItem('filter_analytics_session', sessionId)\n  }\n  return sessionId\n}\n\n// Enviar evento a Google Analytics 4\nconst sendToGA4 = (event: FilterAnalyticsEvent) => {\n  if (typeof window === 'undefined' || !window.gtag) {\n    return\n  }\n\n  window.gtag('event', event.action, {\n    event_category: event.category,\n    event_label: event.label,\n    value: event.value,\n    custom_map: event.custom_parameters,\n    session_id: event.session_id,\n    page_location: event.page_url,\n    page_title: event.page_title,\n  })\n}\n\n// Enviar evento a Supabase Analytics\nconst sendToSupabase = async (event: FilterAnalyticsEvent) => {\n  try {\n    await fetch('/api/analytics/events', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(event),\n    })\n  } catch (error) {\n    console.warn('Failed to send analytics event to Supabase:', error)\n  }\n}\n\n// ===================================\n// HOOK PRINCIPAL\n// ===================================\n\nexport function useFilterAnalytics(options: UseFilterAnalyticsOptions = {}) {\n  const {\n    enabled = true,\n    debug = process.env.NODE_ENV === 'development',\n    sessionId: providedSessionId,\n    userId,\n  } = options\n\n  const sessionId = useRef(providedSessionId || getSessionId())\n  const startTime = useRef<number>(Date.now())\n\n  // Función para crear evento base\n  const createBaseEvent = useCallback(\n    (\n      action: string,\n      label?: string,\n      value?: number,\n      customParameters?: Record<string, any>\n    ): FilterAnalyticsEvent => {\n      return {\n        event: `filter_${action}`,\n        category: 'filter',\n        action,\n        label,\n        value,\n        custom_parameters: customParameters,\n        timestamp: Date.now(),\n        session_id: sessionId.current,\n        user_id: userId,\n        page_url: typeof window !== 'undefined' ? window.location.href : '',\n        page_title: typeof window !== 'undefined' ? document.title : '',\n      }\n    },\n    [userId]\n  )\n\n  // Función para enviar evento\n  const trackEvent = useCallback(\n    async (event: FilterAnalyticsEvent) => {\n      if (!enabled) {\n        return\n      }\n\n      if (debug) {\n      }\n\n      // Enviar a múltiples destinos\n      try {\n        // Google Analytics 4\n        sendToGA4(event)\n\n        // Supabase Analytics\n        await sendToSupabase(event)\n      } catch (error) {\n        console.warn('Analytics tracking error:', error)\n      }\n    },\n    [enabled, debug]\n  )\n\n  // ===================================\n  // MÉTODOS DE TRACKING ESPECÍFICOS\n  // ===================================\n\n  const trackFilterApplied = useCallback(\n    (filterType: string, filterValue: string, resultsCount: number) => {\n      const timeToApply = Date.now() - startTime.current\n      const event = createBaseEvent('applied', `${filterType}:${filterValue}`, resultsCount, {\n        filter_type: filterType,\n        filter_value: filterValue,\n        results_count: resultsCount,\n        time_to_apply: timeToApply,\n      })\n      trackEvent(event)\n      startTime.current = Date.now() // Reset para próxima medición\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  const trackFilterRemoved = useCallback(\n    (filterType: string, filterValue: string, remainingFilters: number) => {\n      const event = createBaseEvent('removed', `${filterType}:${filterValue}`, remainingFilters, {\n        filter_type: filterType,\n        filter_value: filterValue,\n        remaining_filters: remainingFilters,\n      })\n      trackEvent(event)\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  const trackFiltersCleared = useCallback(\n    (totalFiltersCleared: number, filterTypes: string[]) => {\n      const event = createBaseEvent('cleared', 'all_filters', totalFiltersCleared, {\n        total_filters_cleared: totalFiltersCleared,\n        filter_types: filterTypes,\n      })\n      trackEvent(event)\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  const trackSearchPerformed = useCallback(\n    (query: string, resultsCount: number, hasFilters: boolean, filterCount: number) => {\n      const event = createBaseEvent('search', query, resultsCount, {\n        query,\n        results_count: resultsCount,\n        has_filters: hasFilters,\n        filter_count: filterCount,\n      })\n      trackEvent(event)\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  const trackPaginationUsed = useCallback(\n    (fromPage: number, toPage: number, totalPages: number, resultsPerPage: number) => {\n      const event = createBaseEvent('pagination', `${fromPage}_to_${toPage}`, toPage, {\n        from_page: fromPage,\n        to_page: toPage,\n        total_pages: totalPages,\n        results_per_page: resultsPerPage,\n      })\n      trackEvent(event)\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  const trackSortChanged = useCallback(\n    (fromSort: string, toSort: string, resultsCount: number) => {\n      const event = createBaseEvent('sort_changed', `${fromSort}_to_${toSort}`, resultsCount, {\n        from_sort: fromSort,\n        to_sort: toSort,\n        results_count: resultsCount,\n      })\n      trackEvent(event)\n    },\n    [createBaseEvent, trackEvent]\n  )\n\n  // Tracking automático de cambios en filtros\n  const trackFilterChanges = useCallback(\n    (\n      previousFilters: ProductFilterState,\n      currentFilters: ProductFilterState,\n      resultsCount: number\n    ) => {\n      // Detectar filtros añadidos\n      const addedCategories = currentFilters.categories.filter(\n        cat => !previousFilters.categories.includes(cat)\n      )\n      const addedBrands = currentFilters.brands.filter(\n        brand => !previousFilters.brands.includes(brand)\n      )\n\n      // Detectar filtros removidos\n      const removedCategories = previousFilters.categories.filter(\n        cat => !currentFilters.categories.includes(cat)\n      )\n      const removedBrands = previousFilters.brands.filter(\n        brand => !currentFilters.brands.includes(brand)\n      )\n\n      // Track filtros añadidos\n      addedCategories.forEach(category => {\n        trackFilterApplied('category', category, resultsCount)\n      })\n      addedBrands.forEach(brand => {\n        trackFilterApplied('brand', brand, resultsCount)\n      })\n\n      // Track filtros removidos\n      const remainingFilters = currentFilters.categories.length + currentFilters.brands.length\n      removedCategories.forEach(category => {\n        trackFilterRemoved('category', category, remainingFilters)\n      })\n      removedBrands.forEach(brand => {\n        trackFilterRemoved('brand', brand, remainingFilters)\n      })\n\n      // Track cambios de precio\n      if (\n        previousFilters.priceMin !== currentFilters.priceMin ||\n        previousFilters.priceMax !== currentFilters.priceMax\n      ) {\n        const priceRange = `${currentFilters.priceMin || 0}-${currentFilters.priceMax || 'max'}`\n        trackFilterApplied('price_range', priceRange, resultsCount)\n      }\n\n      // Track cambios de búsqueda\n      if (previousFilters.search !== currentFilters.search && currentFilters.search) {\n        const hasFilters = currentFilters.categories.length > 0 || currentFilters.brands.length > 0\n        const filterCount = currentFilters.categories.length + currentFilters.brands.length\n        trackSearchPerformed(currentFilters.search, resultsCount, hasFilters, filterCount)\n      }\n\n      // Track cambios de ordenamiento\n      if (previousFilters.sortBy !== currentFilters.sortBy) {\n        trackSortChanged(previousFilters.sortBy, currentFilters.sortBy, resultsCount)\n      }\n\n      // Track cambios de página\n      if (previousFilters.page !== currentFilters.page) {\n        trackPaginationUsed(\n          previousFilters.page,\n          currentFilters.page,\n          Math.ceil(resultsCount / currentFilters.limit),\n          currentFilters.limit\n        )\n      }\n    },\n    [\n      trackFilterApplied,\n      trackFilterRemoved,\n      trackSearchPerformed,\n      trackSortChanged,\n      trackPaginationUsed,\n    ]\n  )\n\n  // Tracking de sesión al montar\n  useEffect(() => {\n    if (!enabled) {\n      return\n    }\n\n    const event = createBaseEvent('session_started', 'filter_system', 1, {\n      user_agent: typeof window !== 'undefined' ? navigator.userAgent : '',\n      screen_resolution:\n        typeof window !== 'undefined' ? `${window.screen.width}x${window.screen.height}` : '',\n      viewport_size:\n        typeof window !== 'undefined' ? `${window.innerWidth}x${window.innerHeight}` : '',\n    })\n\n    trackEvent(event)\n\n    // Cleanup al desmontar\n    return () => {\n      const endEvent = createBaseEvent('session_ended', 'filter_system', 1, {\n        session_duration: Date.now() - startTime.current,\n      })\n      trackEvent(endEvent)\n    }\n  }, [enabled, createBaseEvent, trackEvent])\n\n  return {\n    // Métodos de tracking específicos\n    trackFilterApplied,\n    trackFilterRemoved,\n    trackFiltersCleared,\n    trackSearchPerformed,\n    trackPaginationUsed,\n    trackSortChanged,\n    trackFilterChanges,\n\n    // Método genérico\n    trackEvent,\n\n    // Información de sesión\n    sessionId: sessionId.current,\n    userId,\n    enabled,\n  }\n}\n"],"names":["useFilterAnalytics","generateSessionId","Date","now","Math","random","toString","substr","getSessionId","window","sessionId","sessionStorage","getItem","setItem","sendToGA4","event","gtag","action","event_category","category","event_label","label","value","custom_map","custom_parameters","session_id","page_location","page_url","page_title","sendToSupabase","fetch","method","headers","body","JSON","stringify","error","console","warn","options","enabled","debug","process","env","NODE_ENV","providedSessionId","userId","useRef","startTime","createBaseEvent","useCallback","customParameters","timestamp","current","user_id","location","href","document","title","trackEvent","trackFilterApplied","filterType","filterValue","resultsCount","timeToApply","filter_type","filter_value","results_count","time_to_apply","trackFilterRemoved","remainingFilters","remaining_filters","trackFiltersCleared","totalFiltersCleared","filterTypes","total_filters_cleared","filter_types","trackSearchPerformed","query","hasFilters","filterCount","has_filters","filter_count","trackPaginationUsed","fromPage","toPage","totalPages","resultsPerPage","from_page","to_page","total_pages","results_per_page","trackSortChanged","fromSort","toSort","from_sort","to_sort","trackFilterChanges","previousFilters","currentFilters","addedCategories","categories","filter","cat","includes","addedBrands","brands","brand","removedCategories","removedBrands","forEach","length","priceMin","priceMax","priceRange","search","sortBy","page","ceil","limit","useEffect","user_agent","navigator","userAgent","screen_resolution","screen","width","height","viewport_size","innerWidth","innerHeight","endEvent","session_duration"],"mappings":"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"}