{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\__tests__\\product-card-ecommerce.test.tsx"],"sourcesContent":["import { render, screen } from '@testing-library/react'\nimport { ProductCard } from '../card'\n\ndescribe('ProductCard with E-commerce Components', () => {\n  const defaultProps = {\n    title: 'Pintura Sherwin Williams',\n    price: 8500,\n    originalPrice: 10000,\n    stock: 12,\n    onAddToCart: jest.fn(),\n  }\n\n  it('renders legacy version when useNewComponents is false', () => {\n    render(<ProductCard {...defaultProps} useNewComponents={false} />)\n\n    // Verifica que use el formato legacy de precios\n    expect(screen.getByText('$8.500')).toBeInTheDocument()\n    expect(screen.getByText('$10.000')).toBeInTheDocument()\n\n    // Verifica mensaje de stock legacy\n    expect(screen.queryByText(/Solo quedan/)).not.toBeInTheDocument()\n  })\n\n  it('renders new components when useNewComponents is true', () => {\n    render(\n      <ProductCard\n        {...defaultProps}\n        useNewComponents={true}\n        showExactStock={true}\n        stockUnit='latas'\n      />\n    )\n\n    // Verifica que use PriceDisplay (formato con separadores de miles)\n    expect(screen.getByText('$ 8.500,00')).toBeInTheDocument()\n\n    // Verifica que use StockIndicator\n    expect(screen.getByText(/12 latas disponibles/)).toBeInTheDocument()\n  })\n\n  it('shows installments when enabled', () => {\n    render(\n      <ProductCard\n        {...defaultProps}\n        useNewComponents={true}\n        showInstallments={true}\n        installments={{\n          quantity: 6,\n          amount: 1417,\n          interestFree: true,\n        }}\n      />\n    )\n\n    // Verifica información de cuotas (ahora en una sola línea en variant compact)\n    expect(screen.getByText(/6x de.*\\$ 14,17.*sin interés/)).toBeInTheDocument()\n  })\n\n  it('shows free shipping badge when enabled', () => {\n    render(<ProductCard {...defaultProps} useNewComponents={true} showFreeShipping={true} />)\n\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\n  })\n\n  it('shows low stock warning with new components', () => {\n    render(\n      <ProductCard\n        {...defaultProps}\n        stock={3}\n        useNewComponents={true}\n        showExactStock={true}\n        lowStockThreshold={5}\n        stockUnit='unidades'\n      />\n    )\n\n    // Verifica que muestre stock bajo\n    expect(screen.getByText(/3 unidades disponibles/)).toBeInTheDocument()\n  })\n\n  it('shows out of stock with new components', () => {\n    render(<ProductCard {...defaultProps} stock={0} useNewComponents={true} />)\n\n    expect(screen.getAllByText('Sin stock')[0]).toBeInTheDocument()\n  })\n\n  it('handles different stock units correctly', () => {\n    render(\n      <ProductCard\n        {...defaultProps}\n        stock={5}\n        useNewComponents={true}\n        showExactStock={true}\n        stockUnit='litros'\n      />\n    )\n\n    expect(screen.getByText(/5 litros disponibles/)).toBeInTheDocument()\n  })\n\n  it('shows discount percentage with new PriceDisplay', () => {\n    render(<ProductCard {...defaultProps} useNewComponents={true} />)\n\n    // PriceDisplay calcula automáticamente el descuento\n    // (10000-8500)/10000 * 100 = 15%\n    expect(screen.getByText('-15%')).toBeInTheDocument()\n  })\n\n  it('maintains backward compatibility with legacy props', () => {\n    render(\n      <ProductCard {...defaultProps} badge='Envío gratis' discount='15%' useNewComponents={false} />\n    )\n\n    // Verifica que los props legacy sigan funcionando\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument()\n    expect(screen.getByText('15%')).toBeInTheDocument()\n  })\n\n  it('applies compact variant for PriceDisplay in ProductCard', () => {\n    const { container } = render(<ProductCard {...defaultProps} useNewComponents={true} />)\n\n    // Verifica que PriceDisplay use variante compact\n    expect(container.querySelector('.flex-col.gap-0\\\\.5')).toBeInTheDocument()\n  })\n\n  it('uses minimal variant for StockIndicator in ProductCard', () => {\n    render(\n      <ProductCard {...defaultProps} stock={10} useNewComponents={true} showExactStock={true} />\n    )\n\n    // StockIndicator debería estar presente con información de stock\n    expect(screen.getByText(/10 unidades disponibles/)).toBeInTheDocument()\n  })\n\n  it('handles zero price correctly with new components', () => {\n    render(\n      <ProductCard {...defaultProps} price={0} originalPrice={undefined} useNewComponents={true} />\n    )\n\n    expect(screen.getByText('$ 0,00')).toBeInTheDocument()\n  })\n\n  it('handles large prices correctly with new components', () => {\n    render(<ProductCard {...defaultProps} price={123456} useNewComponents={true} />)\n\n    // Verifica formato con separadores de miles\n    expect(screen.getByText('$ 123.456,00')).toBeInTheDocument()\n  })\n\n  it('shows pre-order option when stock is 0 and allowPreOrder is enabled', () => {\n    // Nota: Esta funcionalidad requeriría agregar allowPreOrder prop al ProductCard\n    render(<ProductCard {...defaultProps} stock={0} useNewComponents={true} />)\n\n    // Por ahora solo verifica que muestre sin stock\n    expect(screen.getAllByText('Sin stock')[0]).toBeInTheDocument()\n  })\n\n  it('integrates all new components together', () => {\n    render(\n      <ProductCard\n        {...defaultProps}\n        useNewComponents={true}\n        showInstallments={true}\n        installments={{\n          quantity: 12,\n          amount: 708,\n          interestFree: true,\n        }}\n        showFreeShipping={true}\n        showExactStock={true}\n        stockUnit='latas'\n        lowStockThreshold={10}\n      />\n    )\n\n    // Verifica que todos los componentes estén presentes\n    expect(screen.getByText('$ 8.500,00')).toBeInTheDocument() // PriceDisplay\n    expect(screen.getByText(/12x de/)).toBeInTheDocument() // Installments\n    expect(screen.getByAltText('Envío gratis')).toBeInTheDocument() // Free shipping\n    expect(screen.getByText(/12 latas disponibles/)).toBeInTheDocument() // StockIndicator\n  })\n})\n"],"names":["describe","defaultProps","title","price","originalPrice","stock","onAddToCart","jest","fn","it","render","ProductCard","useNewComponents","expect","screen","getByText","toBeInTheDocument","queryByText","not","showExactStock","stockUnit","showInstallments","installments","quantity","amount","interestFree","showFreeShipping","getByAltText","lowStockThreshold","getAllByText","badge","discount","container","querySelector","undefined"],"mappings":"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"}