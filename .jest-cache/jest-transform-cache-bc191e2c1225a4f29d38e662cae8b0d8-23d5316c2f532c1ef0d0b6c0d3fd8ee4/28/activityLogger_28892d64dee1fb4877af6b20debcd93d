657d3380bea7ce665412b33ad75fb8c4
// ===================================
// PINTEYA E-COMMERCE - ACTIVITY LOGGER UTILITY
// ===================================
"use strict";

/* istanbul ignore next */
function cov_1lzxodwomw() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\activity\\activityLogger.ts";
  var hash = "86482bd09407f87bbdcdb1dfcfe88992037dfdb6";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\activity\\activityLogger.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 7,
          column: 3
        }
      },
      "1": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "2": {
        start: {
          line: 9,
          column: 24
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "3": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 45,
          column: 3
        }
      },
      "4": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 30
        }
      },
      "5": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 37
        }
      },
      "6": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 31
        }
      },
      "7": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 31
        }
      },
      "8": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 32
        }
      },
      "9": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 37
        }
      },
      "10": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 34
        }
      },
      "11": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 37,
          column: 35
        }
      },
      "12": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 34
        }
      },
      "13": {
        start: {
          line: 43,
          column: 8
        },
        end: {
          line: 43,
          column: 31
        }
      },
      "14": {
        start: {
          line: 46,
          column: 18
        },
        end: {
          line: 46,
          column: 53
        }
      },
      "15": {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 79,
          column: 5
        }
      },
      "16": {
        start: {
          line: 49,
          column: 64
        },
        end: {
          line: 49,
          column: 71
        }
      },
      "17": {
        start: {
          line: 51,
          column: 24
        },
        end: {
          line: 62,
          column: 9
        }
      },
      "18": {
        start: {
          line: 64,
          column: 26
        },
        end: {
          line: 64,
          column: 93
        }
      },
      "19": {
        start: {
          line: 65,
          column: 8
        },
        end: {
          line: 71,
          column: 9
        }
      },
      "20": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 66,
          column: 66
        }
      },
      "21": {
        start: {
          line: 67,
          column: 12
        },
        end: {
          line: 69,
          column: 13
        }
      },
      "22": {
        start: {
          line: 68,
          column: 16
        },
        end: {
          line: 68,
          column: 28
        }
      },
      "23": {
        start: {
          line: 70,
          column: 12
        },
        end: {
          line: 70,
          column: 25
        }
      },
      "24": {
        start: {
          line: 72,
          column: 8
        },
        end: {
          line: 72,
          column: 20
        }
      },
      "25": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 74,
          column: 58
        }
      },
      "26": {
        start: {
          line: 75,
          column: 8
        },
        end: {
          line: 77,
          column: 9
        }
      },
      "27": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 76,
          column: 24
        }
      },
      "28": {
        start: {
          line: 78,
          column: 8
        },
        end: {
          line: 78,
          column: 21
        }
      },
      "29": {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 92,
          column: 7
        }
      },
      "30": {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 102,
          column: 7
        }
      },
      "31": {
        start: {
          line: 105,
          column: 4
        },
        end: {
          line: 115,
          column: 7
        }
      },
      "32": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 129,
          column: 7
        }
      },
      "33": {
        start: {
          line: 132,
          column: 4
        },
        end: {
          line: 142,
          column: 7
        }
      },
      "34": {
        start: {
          line: 145,
          column: 4
        },
        end: {
          line: 152,
          column: 7
        }
      },
      "35": {
        start: {
          line: 155,
          column: 4
        },
        end: {
          line: 168,
          column: 5
        }
      },
      "36": {
        start: {
          line: 156,
          column: 19
        },
        end: {
          line: 156,
          column: 149
        }
      },
      "37": {
        start: {
          line: 157,
          column: 26
        },
        end: {
          line: 157,
          column: 75
        }
      },
      "38": {
        start: {
          line: 158,
          column: 8
        },
        end: {
          line: 161,
          column: 10
        }
      },
      "39": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 74
        }
      },
      "40": {
        start: {
          line: 164,
          column: 8
        },
        end: {
          line: 167,
          column: 10
        }
      },
      "41": {
        start: {
          line: 171,
          column: 4
        },
        end: {
          line: 193,
          column: 5
        }
      },
      "42": {
        start: {
          line: 172,
          column: 25
        },
        end: {
          line: 183,
          column: 10
        }
      },
      "43": {
        start: {
          line: 184,
          column: 8
        },
        end: {
          line: 187,
          column: 9
        }
      },
      "44": {
        start: {
          line: 185,
          column: 12
        },
        end: {
          line: 185,
          column: 94
        }
      },
      "45": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 186,
          column: 25
        }
      },
      "46": {
        start: {
          line: 188,
          column: 21
        },
        end: {
          line: 188,
          column: 42
        }
      },
      "47": {
        start: {
          line: 189,
          column: 8
        },
        end: {
          line: 189,
          column: 37
        }
      },
      "48": {
        start: {
          line: 191,
          column: 8
        },
        end: {
          line: 191,
          column: 64
        }
      },
      "49": {
        start: {
          line: 192,
          column: 8
        },
        end: {
          line: 192,
          column: 21
        }
      },
      "50": {
        start: {
          line: 196,
          column: 18
        },
        end: {
          line: 196,
          column: 19
        }
      },
      "51": {
        start: {
          line: 197,
          column: 17
        },
        end: {
          line: 197,
          column: 18
        }
      },
      "52": {
        start: {
          line: 198,
          column: 4
        },
        end: {
          line: 205,
          column: 5
        }
      },
      "53": {
        start: {
          line: 199,
          column: 23
        },
        end: {
          line: 199,
          column: 75
        }
      },
      "54": {
        start: {
          line: 200,
          column: 8
        },
        end: {
          line: 204,
          column: 9
        }
      },
      "55": {
        start: {
          line: 201,
          column: 12
        },
        end: {
          line: 201,
          column: 22
        }
      },
      "56": {
        start: {
          line: 203,
          column: 12
        },
        end: {
          line: 203,
          column: 21
        }
      },
      "57": {
        start: {
          line: 206,
          column: 4
        },
        end: {
          line: 209,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 8,
            column: 9
          },
          end: {
            line: 8,
            column: 16
          }
        },
        loc: {
          start: {
            line: 8,
            column: 30
          },
          end: {
            line: 13,
            column: 1
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 26
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 33
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        loc: {
          start: {
            line: 21,
            column: 27
          },
          end: {
            line: 23,
            column: 5
          }
        },
        line: 21
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        loc: {
          start: {
            line: 24,
            column: 27
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 24
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 28
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 27
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        loc: {
          start: {
            line: 30,
            column: 33
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 30
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        loc: {
          start: {
            line: 33,
            column: 30
          },
          end: {
            line: 35,
            column: 5
          }
        },
        line: 33
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 36,
            column: 4
          },
          end: {
            line: 36,
            column: 5
          }
        },
        loc: {
          start: {
            line: 36,
            column: 31
          },
          end: {
            line: 38,
            column: 5
          }
        },
        line: 36
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 39,
            column: 5
          }
        },
        loc: {
          start: {
            line: 39,
            column: 30
          },
          end: {
            line: 41,
            column: 5
          }
        },
        line: 39
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        },
        loc: {
          start: {
            line: 42,
            column: 27
          },
          end: {
            line: 44,
            column: 5
          }
        },
        line: 42
      },
      "11": {
        name: "logUserActivity",
        decl: {
          start: {
            line: 47,
            column: 15
          },
          end: {
            line: 47,
            column: 30
          }
        },
        loc: {
          start: {
            line: 47,
            column: 67
          },
          end: {
            line: 80,
            column: 1
          }
        },
        line: 47
      },
      "12": {
        name: "logAuthActivity",
        decl: {
          start: {
            line: 81,
            column: 15
          },
          end: {
            line: 81,
            column: 30
          }
        },
        loc: {
          start: {
            line: 81,
            column: 66
          },
          end: {
            line: 93,
            column: 1
          }
        },
        line: 81
      },
      "13": {
        name: "logProfileActivity",
        decl: {
          start: {
            line: 94,
            column: 15
          },
          end: {
            line: 94,
            column: 33
          }
        },
        loc: {
          start: {
            line: 94,
            column: 69
          },
          end: {
            line: 103,
            column: 1
          }
        },
        line: 94
      },
      "14": {
        name: "logSecurityActivity",
        decl: {
          start: {
            line: 104,
            column: 15
          },
          end: {
            line: 104,
            column: 34
          }
        },
        loc: {
          start: {
            line: 104,
            column: 70
          },
          end: {
            line: 116,
            column: 1
          }
        },
        line: 104
      },
      "15": {
        name: "logSessionActivity",
        decl: {
          start: {
            line: 117,
            column: 15
          },
          end: {
            line: 117,
            column: 33
          }
        },
        loc: {
          start: {
            line: 117,
            column: 69
          },
          end: {
            line: 130,
            column: 1
          }
        },
        line: 117
      },
      "16": {
        name: "logOrderActivity",
        decl: {
          start: {
            line: 131,
            column: 15
          },
          end: {
            line: 131,
            column: 31
          }
        },
        loc: {
          start: {
            line: 131,
            column: 76
          },
          end: {
            line: 143,
            column: 1
          }
        },
        line: 131
      },
      "17": {
        name: "logPreferenceActivity",
        decl: {
          start: {
            line: 144,
            column: 15
          },
          end: {
            line: 144,
            column: 36
          }
        },
        loc: {
          start: {
            line: 144,
            column: 72
          },
          end: {
            line: 153,
            column: 1
          }
        },
        line: 144
      },
      "18": {
        name: "getRequestInfo",
        decl: {
          start: {
            line: 154,
            column: 9
          },
          end: {
            line: 154,
            column: 23
          }
        },
        loc: {
          start: {
            line: 154,
            column: 33
          },
          end: {
            line: 169,
            column: 1
          }
        },
        line: 154
      },
      "19": {
        name: "logActivityFromClient",
        decl: {
          start: {
            line: 170,
            column: 15
          },
          end: {
            line: 170,
            column: 36
          }
        },
        loc: {
          start: {
            line: 170,
            column: 78
          },
          end: {
            line: 194,
            column: 1
          }
        },
        line: 170
      },
      "20": {
        name: "logBulkActivity",
        decl: {
          start: {
            line: 195,
            column: 15
          },
          end: {
            line: 195,
            column: 30
          }
        },
        loc: {
          start: {
            line: 195,
            column: 57
          },
          end: {
            line: 210,
            column: 1
          }
        },
        line: 195
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 47,
            column: 53
          },
          end: {
            line: 47,
            column: 65
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 47,
            column: 63
          },
          end: {
            line: 47,
            column: 65
          }
        }],
        line: 47
      },
      "1": {
        loc: {
          start: {
            line: 49,
            column: 16
          },
          end: {
            line: 49,
            column: 34
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 49,
            column: 30
          },
          end: {
            line: 49,
            column: 34
          }
        }],
        line: 49
      },
      "2": {
        loc: {
          start: {
            line: 49,
            column: 36
          },
          end: {
            line: 49,
            column: 59
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 49,
            column: 55
          },
          end: {
            line: 49,
            column: 59
          }
        }],
        line: 49
      },
      "3": {
        loc: {
          start: {
            line: 59,
            column: 15
          },
          end: {
            line: 61,
            column: 13
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 59,
            column: 15
          },
          end: {
            line: 59,
            column: 31
          }
        }, {
          start: {
            line: 59,
            column: 35
          },
          end: {
            line: 61,
            column: 13
          }
        }],
        line: 59
      },
      "4": {
        loc: {
          start: {
            line: 65,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 65,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 65
      },
      "5": {
        loc: {
          start: {
            line: 67,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 67,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 67
      },
      "6": {
        loc: {
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 75
      },
      "7": {
        loc: {
          start: {
            line: 110,
            column: 22
          },
          end: {
            line: 110,
            column: 74
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 110,
            column: 57
          },
          end: {
            line: 110,
            column: 63
          }
        }, {
          start: {
            line: 110,
            column: 66
          },
          end: {
            line: 110,
            column: 74
          }
        }],
        line: 110
      },
      "8": {
        loc: {
          start: {
            line: 156,
            column: 19
          },
          end: {
            line: 156,
            column: 149
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 156,
            column: 19
          },
          end: {
            line: 156,
            column: 83
          }
        }, {
          start: {
            line: 156,
            column: 87
          },
          end: {
            line: 156,
            column: 122
          }
        }, {
          start: {
            line: 156,
            column: 126
          },
          end: {
            line: 156,
            column: 136
          }
        }, {
          start: {
            line: 156,
            column: 140
          },
          end: {
            line: 156,
            column: 149
          }
        }],
        line: 156
      },
      "9": {
        loc: {
          start: {
            line: 157,
            column: 26
          },
          end: {
            line: 157,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 157,
            column: 26
          },
          end: {
            line: 157,
            column: 62
          }
        }, {
          start: {
            line: 157,
            column: 66
          },
          end: {
            line: 157,
            column: 75
          }
        }],
        line: 157
      },
      "10": {
        loc: {
          start: {
            line: 184,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 184,
            column: 8
          },
          end: {
            line: 187,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 184
      },
      "11": {
        loc: {
          start: {
            line: 189,
            column: 15
          },
          end: {
            line: 189,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 189,
            column: 15
          },
          end: {
            line: 189,
            column: 27
          }
        }, {
          start: {
            line: 189,
            column: 31
          },
          end: {
            line: 189,
            column: 36
          }
        }],
        line: 189
      },
      "12": {
        loc: {
          start: {
            line: 195,
            column: 43
          },
          end: {
            line: 195,
            column: 55
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 195,
            column: 53
          },
          end: {
            line: 195,
            column: 55
          }
        }],
        line: 195
      },
      "13": {
        loc: {
          start: {
            line: 200,
            column: 8
          },
          end: {
            line: 204,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 200,
            column: 8
          },
          end: {
            line: 204,
            column: 9
          }
        }, {
          start: {
            line: 202,
            column: 15
          },
          end: {
            line: 204,
            column: 9
          }
        }],
        line: 200
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0
    },
    b: {
      "0": [0],
      "1": [0],
      "2": [0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0, 0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0],
      "13": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\activity\\activityLogger.ts"],
      sourcesContent: ["// ===================================\r\n// PINTEYA E-COMMERCE - ACTIVITY LOGGER UTILITY\r\n// ===================================\r\n\r\nimport { supabaseAdmin } from '@/lib/integrations/supabase';\r\n\r\n// Tipos para actividad\r\nexport interface ActivityLogData {\r\n  action: string;\r\n  category: 'auth' | 'profile' | 'order' | 'security' | 'session' | 'preference';\r\n  description?: string;\r\n  metadata?: Record<string, any>;\r\n  ip_address?: string;\r\n  user_agent?: string;\r\n}\r\n\r\nexport interface ActivityLogOptions {\r\n  skipIfError?: boolean;\r\n  includeTimestamp?: boolean;\r\n}\r\n\r\n/**\r\n * Funci\xF3n utilitaria centralizada para registrar actividad de usuario\r\n * Puede ser usada desde APIs del servidor o desde el cliente\r\n */\r\nexport async function logUserActivity(\r\n  userId: string,\r\n  activityData: ActivityLogData,\r\n  options: ActivityLogOptions = {}\r\n): Promise<boolean> {\r\n  try {\r\n    const { skipIfError = true, includeTimestamp = true } = options;\r\n\r\n    // Preparar datos de actividad\r\n    const logData = {\r\n      user_id: userId,\r\n      action: activityData.action,\r\n      category: activityData.category,\r\n      description: activityData.description,\r\n      metadata: activityData.metadata,\r\n      ip_address: activityData.ip_address,\r\n      user_agent: activityData.user_agent,\r\n      ...(includeTimestamp && { created_at: new Date().toISOString() })\r\n    };\r\n\r\n    // Insertar en base de datos\r\n    const { error } = await supabaseAdmin\r\n      .from('user_activity')\r\n      .insert(logData);\r\n\r\n    if (error) {\r\n      console.error('Error al registrar actividad:', error);\r\n      if (!skipIfError) {\r\n        throw error;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error en logUserActivity:', error);\r\n    if (!options.skipIfError) {\r\n      throw error;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de autenticaci\xF3n\r\n */\r\nexport async function logAuthActivity(\r\n  userId: string,\r\n  action: 'login' | 'logout' | 'register' | 'password_reset' | 'email_verification',\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'auth',\r\n    description: `Usuario ${action}`,\r\n    metadata: {\r\n      timestamp: new Date().toISOString(),\r\n      ...metadata\r\n    },\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de perfil\r\n */\r\nexport async function logProfileActivity(\r\n  userId: string,\r\n  action: 'update_profile' | 'upload_avatar' | 'delete_avatar' | 'add_address' | 'update_address' | 'delete_address',\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'profile',\r\n    description: `Perfil: ${action.replace('_', ' ')}`,\r\n    metadata,\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de seguridad\r\n */\r\nexport async function logSecurityActivity(\r\n  userId: string,\r\n  action: 'enable_2fa' | 'disable_2fa' | 'update_security_settings' | 'suspicious_activity' | 'password_change',\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'security',\r\n    description: `Seguridad: ${action.replace('_', ' ')}`,\r\n    metadata: {\r\n      severity: action === 'suspicious_activity' ? 'high' : 'medium',\r\n      ...metadata\r\n    },\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de sesiones\r\n */\r\nexport async function logSessionActivity(\r\n  userId: string,\r\n  action: 'session_start' | 'session_end' | 'session_timeout' | 'revoke_session' | 'trust_device',\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'session',\r\n    description: `Sesi\xF3n: ${action.replace('_', ' ')}`,\r\n    metadata: {\r\n      device_info: metadata?.device_info,\r\n      session_id: metadata?.session_id,\r\n      ...metadata\r\n    },\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de \xF3rdenes\r\n */\r\nexport async function logOrderActivity(\r\n  userId: string,\r\n  action: 'create_order' | 'update_order' | 'cancel_order' | 'payment_completed' | 'order_shipped' | 'order_delivered',\r\n  orderId: string,\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'order',\r\n    description: `Orden ${orderId}: ${action.replace('_', ' ')}`,\r\n    metadata: {\r\n      order_id: orderId,\r\n      ...metadata\r\n    },\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n espec\xEDfica para logging de preferencias\r\n */\r\nexport async function logPreferenceActivity(\r\n  userId: string,\r\n  action: 'update_notifications' | 'update_display' | 'update_privacy' | 'update_theme',\r\n  metadata?: Record<string, any>,\r\n  request?: { ip?: string; userAgent?: string }\r\n): Promise<boolean> {\r\n  return logUserActivity(userId, {\r\n    action,\r\n    category: 'preference',\r\n    description: `Preferencias: ${action.replace('_', ' ')}`,\r\n    metadata,\r\n    ip_address: request?.ip,\r\n    user_agent: request?.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Funci\xF3n para obtener informaci\xF3n del request (para usar en APIs)\r\n */\r\nexport function getRequestInfo(request: Request | any): { ip?: string; userAgent?: string } {\r\n  try {\r\n    const ip = request.headers?.get?.('x-forwarded-for')?.split(',')[0]?.trim() ||\r\n              request.headers?.get?.('x-real-ip') ||\r\n              request.ip ||\r\n              'unknown';\r\n    \r\n    const userAgent = request.headers?.get?.('user-agent') || 'unknown';\r\n    \r\n    return { ip, userAgent };\r\n  } catch (error) {\r\n    console.error('Error obteniendo informaci\xF3n del request:', error);\r\n    return { ip: 'unknown', userAgent: 'unknown' };\r\n  }\r\n}\r\n\r\n/**\r\n * Funci\xF3n para logging desde el cliente (usando fetch a la API)\r\n */\r\nexport async function logActivityFromClient(\r\n  action: string,\r\n  category: ActivityLogData['category'],\r\n  description?: string,\r\n  metadata?: Record<string, any>\r\n): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/user/activity', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        action,\r\n        category,\r\n        description,\r\n        metadata,\r\n      }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      console.error('Error al registrar actividad desde cliente:', response.statusText);\r\n      return false;\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.success || false;\r\n  } catch (error) {\r\n    console.error('Error en logActivityFromClient:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Funci\xF3n para logging masivo (\xFAtil para migraciones o importaciones)\r\n */\r\nexport async function logBulkActivity(\r\n  activities: Array<{ userId: string; activityData: ActivityLogData }>,\r\n  options: ActivityLogOptions = {}\r\n): Promise<{ success: number; failed: number }> {\r\n  let success = 0;\r\n  let failed = 0;\r\n\r\n  for (const { userId, activityData } of activities) {\r\n    const result = await logUserActivity(userId, activityData, options);\r\n    if (result) {\r\n      success++;\r\n    } else {\r\n      failed++;\r\n    }\r\n  }\r\n\r\n  return { success, failed };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["getRequestInfo", "logActivityFromClient", "logAuthActivity", "logBulkActivity", "logOrderActivity", "logPreferenceActivity", "logProfileActivity", "logSecurityActivity", "logSessionActivity", "logUserActivity", "userId", "activityData", "options", "skipIfError", "includeTimestamp", "logData", "user_id", "action", "category", "description", "metadata", "ip_address", "user_agent", "created_at", "Date", "toISOString", "error", "supabaseAdmin", "from", "insert", "console", "request", "timestamp", "ip", "userAgent", "replace", "severity", "device_info", "session_id", "orderId", "order_id", "headers", "get", "split", "trim", "response", "fetch", "method", "body", "JSON", "stringify", "ok", "statusText", "data", "json", "success", "activities", "failed", "result"],
      mappings: "AAAA,sCAAsC;AACtC,+CAA+C;AAC/C,sCAAsC;;;;;;;;;;;;QAqMtBA;eAAAA;;QAmBMC;eAAAA;;QAnJAC;eAAAA;;QAuLAC;eAAAA;;QAjGAC;eAAAA;;QAuBAC;eAAAA;;QAvFAC;eAAAA;;QAmBAC;eAAAA;;QAsBAC;eAAAA;;QA7GAC;eAAAA;;;0BArBQ;AAqBvB,eAAeA,gBACpBC,MAAc,EACdC,YAA6B,EAC7BC,UAA8B,CAAC,CAAC;IAEhC,IAAI;QACF,MAAM,EAAEC,cAAc,IAAI,EAAEC,mBAAmB,IAAI,EAAE,GAAGF;QAExD,8BAA8B;QAC9B,MAAMG,UAAU;YACdC,SAASN;YACTO,QAAQN,aAAaM,MAAM;YAC3BC,UAAUP,aAAaO,QAAQ;YAC/BC,aAAaR,aAAaQ,WAAW;YACrCC,UAAUT,aAAaS,QAAQ;YAC/BC,YAAYV,aAAaU,UAAU;YACnCC,YAAYX,aAAaW,UAAU;YACnC,GAAIR,oBAAoB;gBAAES,YAAY,IAAIC,OAAOC,WAAW;YAAG,CAAC;QAClE;QAEA,4BAA4B;QAC5B,MAAM,EAAEC,KAAK,EAAE,GAAG,MAAMC,uBAAa,CAClCC,IAAI,CAAC,iBACLC,MAAM,CAACd;QAEV,IAAIW,OAAO;YACTI,QAAQJ,KAAK,CAAC,iCAAiCA;YAC/C,IAAI,CAACb,aAAa;gBAChB,MAAMa;YACR;YACA,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAOA,OAAO;QACdI,QAAQJ,KAAK,CAAC,6BAA6BA;QAC3C,IAAI,CAACd,QAAQC,WAAW,EAAE;YACxB,MAAMa;QACR;QACA,OAAO;IACT;AACF;AAKO,eAAexB,gBACpBQ,MAAc,EACdO,MAAiF,EACjFG,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,QAAQ,EAAEF,QAAQ;QAChCG,UAAU;YACRY,WAAW,IAAIR,OAAOC,WAAW;YACjC,GAAGL,QAAQ;QACb;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,eAAe5B,mBACpBI,MAAc,EACdO,MAAkH,EAClHG,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,QAAQ,EAAEF,OAAOkB,OAAO,CAAC,KAAK,MAAM;QAClDf;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,eAAe3B,oBACpBG,MAAc,EACdO,MAA6G,EAC7GG,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,WAAW,EAAEF,OAAOkB,OAAO,CAAC,KAAK,MAAM;QACrDf,UAAU;YACRgB,UAAUnB,WAAW,wBAAwB,SAAS;YACtD,GAAGG,QAAQ;QACb;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,eAAe1B,mBACpBE,MAAc,EACdO,MAA+F,EAC/FG,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,QAAQ,EAAEF,OAAOkB,OAAO,CAAC,KAAK,MAAM;QAClDf,UAAU;YACRiB,aAAajB,UAAUiB;YACvBC,YAAYlB,UAAUkB;YACtB,GAAGlB,QAAQ;QACb;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,eAAe9B,iBACpBM,MAAc,EACdO,MAAoH,EACpHsB,OAAe,EACfnB,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,MAAM,EAAEoB,QAAQ,EAAE,EAAEtB,OAAOkB,OAAO,CAAC,KAAK,MAAM;QAC5Df,UAAU;YACRoB,UAAUD;YACV,GAAGnB,QAAQ;QACb;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,eAAe7B,sBACpBK,MAAc,EACdO,MAAqF,EACrFG,QAA8B,EAC9BW,OAA6C;IAE7C,OAAOtB,gBAAgBC,QAAQ;QAC7BO;QACAC,UAAU;QACVC,aAAa,CAAC,cAAc,EAAEF,OAAOkB,OAAO,CAAC,KAAK,MAAM;QACxDf;QACAC,YAAYU,SAASE;QACrBX,YAAYS,SAASG;IACvB;AACF;AAKO,SAASlC,eAAe+B,OAAsB;IACnD,IAAI;QACF,MAAME,KAAKF,QAAQU,OAAO,EAAEC,MAAM,oBAAoBC,MAAM,IAAI,CAAC,EAAE,EAAEC,UAC3Db,QAAQU,OAAO,EAAEC,MAAM,gBACvBX,QAAQE,EAAE,IACV;QAEV,MAAMC,YAAYH,QAAQU,OAAO,EAAEC,MAAM,iBAAiB;QAE1D,OAAO;YAAET;YAAIC;QAAU;IACzB,EAAE,OAAOR,OAAO;QACdI,QAAQJ,KAAK,CAAC,6CAA6CA;QAC3D,OAAO;YAAEO,IAAI;YAAWC,WAAW;QAAU;IAC/C;AACF;AAKO,eAAejC,sBACpBgB,MAAc,EACdC,QAAqC,EACrCC,WAAoB,EACpBC,QAA8B;IAE9B,IAAI;QACF,MAAMyB,WAAW,MAAMC,MAAM,sBAAsB;YACjDC,QAAQ;YACRN,SAAS;gBACP,gBAAgB;YAClB;YACAO,MAAMC,KAAKC,SAAS,CAAC;gBACnBjC;gBACAC;gBACAC;gBACAC;YACF;QACF;QAEA,IAAI,CAACyB,SAASM,EAAE,EAAE;YAChBrB,QAAQJ,KAAK,CAAC,+CAA+CmB,SAASO,UAAU;YAChF,OAAO;QACT;QAEA,MAAMC,OAAO,MAAMR,SAASS,IAAI;QAChC,OAAOD,KAAKE,OAAO,IAAI;IACzB,EAAE,OAAO7B,OAAO;QACdI,QAAQJ,KAAK,CAAC,mCAAmCA;QACjD,OAAO;IACT;AACF;AAKO,eAAevB,gBACpBqD,UAAoE,EACpE5C,UAA8B,CAAC,CAAC;IAEhC,IAAI2C,UAAU;IACd,IAAIE,SAAS;IAEb,KAAK,MAAM,EAAE/C,MAAM,EAAEC,YAAY,EAAE,IAAI6C,WAAY;QACjD,MAAME,SAAS,MAAMjD,gBAAgBC,QAAQC,cAAcC;QAC3D,IAAI8C,QAAQ;YACVH;QACF,OAAO;YACLE;QACF;IACF;IAEA,OAAO;QAAEF;QAASE;IAAO;AAC3B"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "86482bd09407f87bbdcdb1dfcfe88992037dfdb6"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1lzxodwomw = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1lzxodwomw();
cov_1lzxodwomw().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[0]++;
  cov_1lzxodwomw().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1lzxodwomw().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1lzxodwomw().s[3]++;
_export(exports, {
  get getRequestInfo() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[1]++;
    cov_1lzxodwomw().s[4]++;
    return getRequestInfo;
  },
  get logActivityFromClient() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[2]++;
    cov_1lzxodwomw().s[5]++;
    return logActivityFromClient;
  },
  get logAuthActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[3]++;
    cov_1lzxodwomw().s[6]++;
    return logAuthActivity;
  },
  get logBulkActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[4]++;
    cov_1lzxodwomw().s[7]++;
    return logBulkActivity;
  },
  get logOrderActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[5]++;
    cov_1lzxodwomw().s[8]++;
    return logOrderActivity;
  },
  get logPreferenceActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[6]++;
    cov_1lzxodwomw().s[9]++;
    return logPreferenceActivity;
  },
  get logProfileActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[7]++;
    cov_1lzxodwomw().s[10]++;
    return logProfileActivity;
  },
  get logSecurityActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[8]++;
    cov_1lzxodwomw().s[11]++;
    return logSecurityActivity;
  },
  get logSessionActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[9]++;
    cov_1lzxodwomw().s[12]++;
    return logSessionActivity;
  },
  get logUserActivity() {
    /* istanbul ignore next */
    cov_1lzxodwomw().f[10]++;
    cov_1lzxodwomw().s[13]++;
    return logUserActivity;
  }
});
const _supabase =
/* istanbul ignore next */
(cov_1lzxodwomw().s[14]++, require("../integrations/supabase"));
async function logUserActivity(userId, activityData, options =
/* istanbul ignore next */
(cov_1lzxodwomw().b[0][0]++, {})) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[11]++;
  cov_1lzxodwomw().s[15]++;
  try {
    const {
      skipIfError =
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[1][0]++, true),
      includeTimestamp =
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[2][0]++, true)
    } =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[16]++, options);
    // Preparar datos de actividad
    const logData =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[17]++, {
      user_id: userId,
      action: activityData.action,
      category: activityData.category,
      description: activityData.description,
      metadata: activityData.metadata,
      ip_address: activityData.ip_address,
      user_agent: activityData.user_agent,
      ...(
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[3][0]++, includeTimestamp) &&
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[3][1]++, {
        created_at: new Date().toISOString()
      }))
    });
    // Insertar en base de datos
    const {
      error
    } =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[18]++, await _supabase.supabaseAdmin.from('user_activity').insert(logData));
    /* istanbul ignore next */
    cov_1lzxodwomw().s[19]++;
    if (error) {
      /* istanbul ignore next */
      cov_1lzxodwomw().b[4][0]++;
      cov_1lzxodwomw().s[20]++;
      console.error('Error al registrar actividad:', error);
      /* istanbul ignore next */
      cov_1lzxodwomw().s[21]++;
      if (!skipIfError) {
        /* istanbul ignore next */
        cov_1lzxodwomw().b[5][0]++;
        cov_1lzxodwomw().s[22]++;
        throw error;
      } else
      /* istanbul ignore next */
      {
        cov_1lzxodwomw().b[5][1]++;
      }
      cov_1lzxodwomw().s[23]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_1lzxodwomw().b[4][1]++;
    }
    cov_1lzxodwomw().s[24]++;
    return true;
  } catch (error) {
    /* istanbul ignore next */
    cov_1lzxodwomw().s[25]++;
    console.error('Error en logUserActivity:', error);
    /* istanbul ignore next */
    cov_1lzxodwomw().s[26]++;
    if (!options.skipIfError) {
      /* istanbul ignore next */
      cov_1lzxodwomw().b[6][0]++;
      cov_1lzxodwomw().s[27]++;
      throw error;
    } else
    /* istanbul ignore next */
    {
      cov_1lzxodwomw().b[6][1]++;
    }
    cov_1lzxodwomw().s[28]++;
    return false;
  }
}
async function logAuthActivity(userId, action, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[12]++;
  cov_1lzxodwomw().s[29]++;
  return logUserActivity(userId, {
    action,
    category: 'auth',
    description: `Usuario ${action}`,
    metadata: {
      timestamp: new Date().toISOString(),
      ...metadata
    },
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
async function logProfileActivity(userId, action, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[13]++;
  cov_1lzxodwomw().s[30]++;
  return logUserActivity(userId, {
    action,
    category: 'profile',
    description: `Perfil: ${action.replace('_', ' ')}`,
    metadata,
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
async function logSecurityActivity(userId, action, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[14]++;
  cov_1lzxodwomw().s[31]++;
  return logUserActivity(userId, {
    action,
    category: 'security',
    description: `Seguridad: ${action.replace('_', ' ')}`,
    metadata: {
      severity: action === 'suspicious_activity' ?
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[7][0]++, 'high') :
      /* istanbul ignore next */
      (cov_1lzxodwomw().b[7][1]++, 'medium'),
      ...metadata
    },
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
async function logSessionActivity(userId, action, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[15]++;
  cov_1lzxodwomw().s[32]++;
  return logUserActivity(userId, {
    action,
    category: 'session',
    description: `Sesión: ${action.replace('_', ' ')}`,
    metadata: {
      device_info: metadata?.device_info,
      session_id: metadata?.session_id,
      ...metadata
    },
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
async function logOrderActivity(userId, action, orderId, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[16]++;
  cov_1lzxodwomw().s[33]++;
  return logUserActivity(userId, {
    action,
    category: 'order',
    description: `Orden ${orderId}: ${action.replace('_', ' ')}`,
    metadata: {
      order_id: orderId,
      ...metadata
    },
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
async function logPreferenceActivity(userId, action, metadata, request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[17]++;
  cov_1lzxodwomw().s[34]++;
  return logUserActivity(userId, {
    action,
    category: 'preference',
    description: `Preferencias: ${action.replace('_', ' ')}`,
    metadata,
    ip_address: request?.ip,
    user_agent: request?.userAgent
  });
}
function getRequestInfo(request) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[18]++;
  cov_1lzxodwomw().s[35]++;
  try {
    const ip =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[36]++,
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[8][0]++, request.headers?.get?.('x-forwarded-for')?.split(',')[0]?.trim()) ||
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[8][1]++, request.headers?.get?.('x-real-ip')) ||
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[8][2]++, request.ip) ||
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[8][3]++, 'unknown'));
    const userAgent =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[37]++,
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[9][0]++, request.headers?.get?.('user-agent')) ||
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[9][1]++, 'unknown'));
    /* istanbul ignore next */
    cov_1lzxodwomw().s[38]++;
    return {
      ip,
      userAgent
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_1lzxodwomw().s[39]++;
    console.error('Error obteniendo información del request:', error);
    /* istanbul ignore next */
    cov_1lzxodwomw().s[40]++;
    return {
      ip: 'unknown',
      userAgent: 'unknown'
    };
  }
}
async function logActivityFromClient(action, category, description, metadata) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[19]++;
  cov_1lzxodwomw().s[41]++;
  try {
    const response =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[42]++, await fetch('/api/user/activity', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        action,
        category,
        description,
        metadata
      })
    }));
    /* istanbul ignore next */
    cov_1lzxodwomw().s[43]++;
    if (!response.ok) {
      /* istanbul ignore next */
      cov_1lzxodwomw().b[10][0]++;
      cov_1lzxodwomw().s[44]++;
      console.error('Error al registrar actividad desde cliente:', response.statusText);
      /* istanbul ignore next */
      cov_1lzxodwomw().s[45]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_1lzxodwomw().b[10][1]++;
    }
    const data =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[46]++, await response.json());
    /* istanbul ignore next */
    cov_1lzxodwomw().s[47]++;
    return /* istanbul ignore next */(cov_1lzxodwomw().b[11][0]++, data.success) ||
    /* istanbul ignore next */
    (cov_1lzxodwomw().b[11][1]++, false);
  } catch (error) {
    /* istanbul ignore next */
    cov_1lzxodwomw().s[48]++;
    console.error('Error en logActivityFromClient:', error);
    /* istanbul ignore next */
    cov_1lzxodwomw().s[49]++;
    return false;
  }
}
async function logBulkActivity(activities, options =
/* istanbul ignore next */
(cov_1lzxodwomw().b[12][0]++, {})) {
  /* istanbul ignore next */
  cov_1lzxodwomw().f[20]++;
  let success =
  /* istanbul ignore next */
  (cov_1lzxodwomw().s[50]++, 0);
  let failed =
  /* istanbul ignore next */
  (cov_1lzxodwomw().s[51]++, 0);
  /* istanbul ignore next */
  cov_1lzxodwomw().s[52]++;
  for (const {
    userId,
    activityData
  } of activities) {
    const result =
    /* istanbul ignore next */
    (cov_1lzxodwomw().s[53]++, await logUserActivity(userId, activityData, options));
    /* istanbul ignore next */
    cov_1lzxodwomw().s[54]++;
    if (result) {
      /* istanbul ignore next */
      cov_1lzxodwomw().b[13][0]++;
      cov_1lzxodwomw().s[55]++;
      success++;
    } else {
      /* istanbul ignore next */
      cov_1lzxodwomw().b[13][1]++;
      cov_1lzxodwomw().s[56]++;
      failed++;
    }
  }
  /* istanbul ignore next */
  cov_1lzxodwomw().s[57]++;
  return {
    success,
    failed
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRSZXF1ZXN0SW5mbyIsImNvdl8xbHp4b2R3b213IiwiZiIsInMiLCJsb2dBY3Rpdml0eUZyb21DbGllbnQiLCJsb2dBdXRoQWN0aXZpdHkiLCJsb2dCdWxrQWN0aXZpdHkiLCJsb2dPcmRlckFjdGl2aXR5IiwibG9nUHJlZmVyZW5jZUFjdGl2aXR5IiwibG9nUHJvZmlsZUFjdGl2aXR5IiwibG9nU2VjdXJpdHlBY3Rpdml0eSIsImxvZ1Nlc3Npb25BY3Rpdml0eSIsImxvZ1VzZXJBY3Rpdml0eSIsInVzZXJJZCIsImFjdGl2aXR5RGF0YSIsIm9wdGlvbnMiLCJiIiwic2tpcElmRXJyb3IiLCJpbmNsdWRlVGltZXN0YW1wIiwibG9nRGF0YSIsInVzZXJfaWQiLCJhY3Rpb24iLCJjYXRlZ29yeSIsImRlc2NyaXB0aW9uIiwibWV0YWRhdGEiLCJpcF9hZGRyZXNzIiwidXNlcl9hZ2VudCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsIl9zdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iLCJmcm9tIiwiaW5zZXJ0IiwiY29uc29sZSIsInJlcXVlc3QiLCJ0aW1lc3RhbXAiLCJpcCIsInVzZXJBZ2VudCIsInJlcGxhY2UiLCJzZXZlcml0eSIsImRldmljZV9pbmZvIiwic2Vzc2lvbl9pZCIsIm9yZGVySWQiLCJvcmRlcl9pZCIsImhlYWRlcnMiLCJnZXQiLCJzcGxpdCIsInRyaW0iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsInN0YXR1c1RleHQiLCJkYXRhIiwianNvbiIsInN1Y2Nlc3MiLCJhY3Rpdml0aWVzIiwiZmFpbGVkIiwicmVzdWx0Il0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxsaWJcXGFjdGl2aXR5XFxhY3Rpdml0eUxvZ2dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBBQ1RJVklUWSBMT0dHRVIgVVRJTElUWVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucy9zdXBhYmFzZSc7XHJcblxyXG4vLyBUaXBvcyBwYXJhIGFjdGl2aWRhZFxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2aXR5TG9nRGF0YSB7XHJcbiAgYWN0aW9uOiBzdHJpbmc7XHJcbiAgY2F0ZWdvcnk6ICdhdXRoJyB8ICdwcm9maWxlJyB8ICdvcmRlcicgfCAnc2VjdXJpdHknIHwgJ3Nlc3Npb24nIHwgJ3ByZWZlcmVuY2UnO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICBpcF9hZGRyZXNzPzogc3RyaW5nO1xyXG4gIHVzZXJfYWdlbnQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZpdHlMb2dPcHRpb25zIHtcclxuICBza2lwSWZFcnJvcj86IGJvb2xlYW47XHJcbiAgaW5jbHVkZVRpbWVzdGFtcD86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGdW5jacOzbiB1dGlsaXRhcmlhIGNlbnRyYWxpemFkYSBwYXJhIHJlZ2lzdHJhciBhY3RpdmlkYWQgZGUgdXN1YXJpb1xyXG4gKiBQdWVkZSBzZXIgdXNhZGEgZGVzZGUgQVBJcyBkZWwgc2Vydmlkb3IgbyBkZXNkZSBlbCBjbGllbnRlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nVXNlckFjdGl2aXR5KFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIGFjdGl2aXR5RGF0YTogQWN0aXZpdHlMb2dEYXRhLFxyXG4gIG9wdGlvbnM6IEFjdGl2aXR5TG9nT3B0aW9ucyA9IHt9XHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNraXBJZkVycm9yID0gdHJ1ZSwgaW5jbHVkZVRpbWVzdGFtcCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgLy8gUHJlcGFyYXIgZGF0b3MgZGUgYWN0aXZpZGFkXHJcbiAgICBjb25zdCBsb2dEYXRhID0ge1xyXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogYWN0aXZpdHlEYXRhLmFjdGlvbixcclxuICAgICAgY2F0ZWdvcnk6IGFjdGl2aXR5RGF0YS5jYXRlZ29yeSxcclxuICAgICAgZGVzY3JpcHRpb246IGFjdGl2aXR5RGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgbWV0YWRhdGE6IGFjdGl2aXR5RGF0YS5tZXRhZGF0YSxcclxuICAgICAgaXBfYWRkcmVzczogYWN0aXZpdHlEYXRhLmlwX2FkZHJlc3MsXHJcbiAgICAgIHVzZXJfYWdlbnQ6IGFjdGl2aXR5RGF0YS51c2VyX2FnZW50LFxyXG4gICAgICAuLi4oaW5jbHVkZVRpbWVzdGFtcCAmJiB7IGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJbnNlcnRhciBlbiBiYXNlIGRlIGRhdG9zXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VyX2FjdGl2aXR5JylcclxuICAgICAgLmluc2VydChsb2dEYXRhKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVnaXN0cmFyIGFjdGl2aWRhZDonLCBlcnJvcik7XHJcbiAgICAgIGlmICghc2tpcElmRXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGxvZ1VzZXJBY3Rpdml0eTonLCBlcnJvcik7XHJcbiAgICBpZiAoIW9wdGlvbnMuc2tpcElmRXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRnVuY2nDs24gZXNwZWPDrWZpY2EgcGFyYSBsb2dnaW5nIGRlIGF1dGVudGljYWNpw7NuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nQXV0aEFjdGl2aXR5KFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIGFjdGlvbjogJ2xvZ2luJyB8ICdsb2dvdXQnIHwgJ3JlZ2lzdGVyJyB8ICdwYXNzd29yZF9yZXNldCcgfCAnZW1haWxfdmVyaWZpY2F0aW9uJyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgcmVxdWVzdD86IHsgaXA/OiBzdHJpbmc7IHVzZXJBZ2VudD86IHN0cmluZyB9XHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBsb2dVc2VyQWN0aXZpdHkodXNlcklkLCB7XHJcbiAgICBhY3Rpb24sXHJcbiAgICBjYXRlZ29yeTogJ2F1dGgnLFxyXG4gICAgZGVzY3JpcHRpb246IGBVc3VhcmlvICR7YWN0aW9ufWAsXHJcbiAgICBtZXRhZGF0YToge1xyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgLi4ubWV0YWRhdGFcclxuICAgIH0sXHJcbiAgICBpcF9hZGRyZXNzOiByZXF1ZXN0Py5pcCxcclxuICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3Q/LnVzZXJBZ2VudFxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRnVuY2nDs24gZXNwZWPDrWZpY2EgcGFyYSBsb2dnaW5nIGRlIHBlcmZpbFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ1Byb2ZpbGVBY3Rpdml0eShcclxuICB1c2VySWQ6IHN0cmluZyxcclxuICBhY3Rpb246ICd1cGRhdGVfcHJvZmlsZScgfCAndXBsb2FkX2F2YXRhcicgfCAnZGVsZXRlX2F2YXRhcicgfCAnYWRkX2FkZHJlc3MnIHwgJ3VwZGF0ZV9hZGRyZXNzJyB8ICdkZWxldGVfYWRkcmVzcycsXHJcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxyXG4gIHJlcXVlc3Q/OiB7IGlwPzogc3RyaW5nOyB1c2VyQWdlbnQ/OiBzdHJpbmcgfVxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICByZXR1cm4gbG9nVXNlckFjdGl2aXR5KHVzZXJJZCwge1xyXG4gICAgYWN0aW9uLFxyXG4gICAgY2F0ZWdvcnk6ICdwcm9maWxlJyxcclxuICAgIGRlc2NyaXB0aW9uOiBgUGVyZmlsOiAke2FjdGlvbi5yZXBsYWNlKCdfJywgJyAnKX1gLFxyXG4gICAgbWV0YWRhdGEsXHJcbiAgICBpcF9hZGRyZXNzOiByZXF1ZXN0Py5pcCxcclxuICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3Q/LnVzZXJBZ2VudFxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRnVuY2nDs24gZXNwZWPDrWZpY2EgcGFyYSBsb2dnaW5nIGRlIHNlZ3VyaWRhZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ1NlY3VyaXR5QWN0aXZpdHkoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgYWN0aW9uOiAnZW5hYmxlXzJmYScgfCAnZGlzYWJsZV8yZmEnIHwgJ3VwZGF0ZV9zZWN1cml0eV9zZXR0aW5ncycgfCAnc3VzcGljaW91c19hY3Rpdml0eScgfCAncGFzc3dvcmRfY2hhbmdlJyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgcmVxdWVzdD86IHsgaXA/OiBzdHJpbmc7IHVzZXJBZ2VudD86IHN0cmluZyB9XHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBsb2dVc2VyQWN0aXZpdHkodXNlcklkLCB7XHJcbiAgICBhY3Rpb24sXHJcbiAgICBjYXRlZ29yeTogJ3NlY3VyaXR5JyxcclxuICAgIGRlc2NyaXB0aW9uOiBgU2VndXJpZGFkOiAke2FjdGlvbi5yZXBsYWNlKCdfJywgJyAnKX1gLFxyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgc2V2ZXJpdHk6IGFjdGlvbiA9PT0gJ3N1c3BpY2lvdXNfYWN0aXZpdHknID8gJ2hpZ2gnIDogJ21lZGl1bScsXHJcbiAgICAgIC4uLm1ldGFkYXRhXHJcbiAgICB9LFxyXG4gICAgaXBfYWRkcmVzczogcmVxdWVzdD8uaXAsXHJcbiAgICB1c2VyX2FnZW50OiByZXF1ZXN0Py51c2VyQWdlbnRcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmNpw7NuIGVzcGVjw61maWNhIHBhcmEgbG9nZ2luZyBkZSBzZXNpb25lc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ1Nlc3Npb25BY3Rpdml0eShcclxuICB1c2VySWQ6IHN0cmluZyxcclxuICBhY3Rpb246ICdzZXNzaW9uX3N0YXJ0JyB8ICdzZXNzaW9uX2VuZCcgfCAnc2Vzc2lvbl90aW1lb3V0JyB8ICdyZXZva2Vfc2Vzc2lvbicgfCAndHJ1c3RfZGV2aWNlJyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgcmVxdWVzdD86IHsgaXA/OiBzdHJpbmc7IHVzZXJBZ2VudD86IHN0cmluZyB9XHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBsb2dVc2VyQWN0aXZpdHkodXNlcklkLCB7XHJcbiAgICBhY3Rpb24sXHJcbiAgICBjYXRlZ29yeTogJ3Nlc3Npb24nLFxyXG4gICAgZGVzY3JpcHRpb246IGBTZXNpw7NuOiAke2FjdGlvbi5yZXBsYWNlKCdfJywgJyAnKX1gLFxyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgZGV2aWNlX2luZm86IG1ldGFkYXRhPy5kZXZpY2VfaW5mbyxcclxuICAgICAgc2Vzc2lvbl9pZDogbWV0YWRhdGE/LnNlc3Npb25faWQsXHJcbiAgICAgIC4uLm1ldGFkYXRhXHJcbiAgICB9LFxyXG4gICAgaXBfYWRkcmVzczogcmVxdWVzdD8uaXAsXHJcbiAgICB1c2VyX2FnZW50OiByZXF1ZXN0Py51c2VyQWdlbnRcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmNpw7NuIGVzcGVjw61maWNhIHBhcmEgbG9nZ2luZyBkZSDDs3JkZW5lc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ09yZGVyQWN0aXZpdHkoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgYWN0aW9uOiAnY3JlYXRlX29yZGVyJyB8ICd1cGRhdGVfb3JkZXInIHwgJ2NhbmNlbF9vcmRlcicgfCAncGF5bWVudF9jb21wbGV0ZWQnIHwgJ29yZGVyX3NoaXBwZWQnIHwgJ29yZGVyX2RlbGl2ZXJlZCcsXHJcbiAgb3JkZXJJZDogc3RyaW5nLFxyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PixcclxuICByZXF1ZXN0PzogeyBpcD86IHN0cmluZzsgdXNlckFnZW50Pzogc3RyaW5nIH1cclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGxvZ1VzZXJBY3Rpdml0eSh1c2VySWQsIHtcclxuICAgIGFjdGlvbixcclxuICAgIGNhdGVnb3J5OiAnb3JkZXInLFxyXG4gICAgZGVzY3JpcHRpb246IGBPcmRlbiAke29yZGVySWR9OiAke2FjdGlvbi5yZXBsYWNlKCdfJywgJyAnKX1gLFxyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXHJcbiAgICAgIC4uLm1ldGFkYXRhXHJcbiAgICB9LFxyXG4gICAgaXBfYWRkcmVzczogcmVxdWVzdD8uaXAsXHJcbiAgICB1c2VyX2FnZW50OiByZXF1ZXN0Py51c2VyQWdlbnRcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmNpw7NuIGVzcGVjw61maWNhIHBhcmEgbG9nZ2luZyBkZSBwcmVmZXJlbmNpYXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dQcmVmZXJlbmNlQWN0aXZpdHkoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgYWN0aW9uOiAndXBkYXRlX25vdGlmaWNhdGlvbnMnIHwgJ3VwZGF0ZV9kaXNwbGF5JyB8ICd1cGRhdGVfcHJpdmFjeScgfCAndXBkYXRlX3RoZW1lJyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgcmVxdWVzdD86IHsgaXA/OiBzdHJpbmc7IHVzZXJBZ2VudD86IHN0cmluZyB9XHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBsb2dVc2VyQWN0aXZpdHkodXNlcklkLCB7XHJcbiAgICBhY3Rpb24sXHJcbiAgICBjYXRlZ29yeTogJ3ByZWZlcmVuY2UnLFxyXG4gICAgZGVzY3JpcHRpb246IGBQcmVmZXJlbmNpYXM6ICR7YWN0aW9uLnJlcGxhY2UoJ18nLCAnICcpfWAsXHJcbiAgICBtZXRhZGF0YSxcclxuICAgIGlwX2FkZHJlc3M6IHJlcXVlc3Q/LmlwLFxyXG4gICAgdXNlcl9hZ2VudDogcmVxdWVzdD8udXNlckFnZW50XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGdW5jacOzbiBwYXJhIG9idGVuZXIgaW5mb3JtYWNpw7NuIGRlbCByZXF1ZXN0IChwYXJhIHVzYXIgZW4gQVBJcylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0SW5mbyhyZXF1ZXN0OiBSZXF1ZXN0IHwgYW55KTogeyBpcD86IHN0cmluZzsgdXNlckFnZW50Pzogc3RyaW5nIH0ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpcCA9IHJlcXVlc3QuaGVhZGVycz8uZ2V0Py4oJ3gtZm9yd2FyZGVkLWZvcicpPy5zcGxpdCgnLCcpWzBdPy50cmltKCkgfHxcclxuICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnM/LmdldD8uKCd4LXJlYWwtaXAnKSB8fFxyXG4gICAgICAgICAgICAgIHJlcXVlc3QuaXAgfHxcclxuICAgICAgICAgICAgICAndW5rbm93bic7XHJcbiAgICBcclxuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHJlcXVlc3QuaGVhZGVycz8uZ2V0Py4oJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bic7XHJcbiAgICBcclxuICAgIHJldHVybiB7IGlwLCB1c2VyQWdlbnQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igb2J0ZW5pZW5kbyBpbmZvcm1hY2nDs24gZGVsIHJlcXVlc3Q6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgaXA6ICd1bmtub3duJywgdXNlckFnZW50OiAndW5rbm93bicgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGdW5jacOzbiBwYXJhIGxvZ2dpbmcgZGVzZGUgZWwgY2xpZW50ZSAodXNhbmRvIGZldGNoIGEgbGEgQVBJKVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0FjdGl2aXR5RnJvbUNsaWVudChcclxuICBhY3Rpb246IHN0cmluZyxcclxuICBjYXRlZ29yeTogQWN0aXZpdHlMb2dEYXRhWydjYXRlZ29yeSddLFxyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS91c2VyL2FjdGl2aXR5Jywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgbWV0YWRhdGEsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCByZWdpc3RyYXIgYWN0aXZpZGFkIGRlc2RlIGNsaWVudGU6JywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgcmV0dXJuIGRhdGEuc3VjY2VzcyB8fCBmYWxzZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gbG9nQWN0aXZpdHlGcm9tQ2xpZW50OicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGdW5jacOzbiBwYXJhIGxvZ2dpbmcgbWFzaXZvICjDunRpbCBwYXJhIG1pZ3JhY2lvbmVzIG8gaW1wb3J0YWNpb25lcylcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dCdWxrQWN0aXZpdHkoXHJcbiAgYWN0aXZpdGllczogQXJyYXk8eyB1c2VySWQ6IHN0cmluZzsgYWN0aXZpdHlEYXRhOiBBY3Rpdml0eUxvZ0RhdGEgfT4sXHJcbiAgb3B0aW9uczogQWN0aXZpdHlMb2dPcHRpb25zID0ge31cclxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfT4ge1xyXG4gIGxldCBzdWNjZXNzID0gMDtcclxuICBsZXQgZmFpbGVkID0gMDtcclxuXHJcbiAgZm9yIChjb25zdCB7IHVzZXJJZCwgYWN0aXZpdHlEYXRhIH0gb2YgYWN0aXZpdGllcykge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9nVXNlckFjdGl2aXR5KHVzZXJJZCwgYWN0aXZpdHlEYXRhLCBvcHRpb25zKTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgc3VjY2VzcysrO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmFpbGVkKys7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBzdWNjZXNzLCBmYWlsZWQgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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