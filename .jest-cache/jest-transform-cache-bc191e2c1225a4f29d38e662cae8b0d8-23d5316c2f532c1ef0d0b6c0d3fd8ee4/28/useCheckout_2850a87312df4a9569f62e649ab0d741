8e6dc0fa81b804aec7122ba2f0bce900
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useCheckout", {
    enumerable: true,
    get: function() {
        return useCheckout;
    }
});
const _react = require("react");
const _store = require("../redux/store");
const _cartslice = require("../redux/features/cart-slice");
const _useAuth = require("./useAuth");
const _consolidatedutils = require("../lib/utils/consolidated-utils");
const initialFormData = {
    billing: {
        firstName: '',
        lastName: '',
        dni: '',
        companyName: '',
        country: 'Argentina',
        streetAddress: '',
        apartment: '',
        city: '',
        state: '',
        zipCode: '',
        phone: '',
        email: '',
        orderNotes: '',
        observations: ''
    },
    shipping: {
        differentAddress: false
    },
    paymentMethod: 'mercadopago',
    shippingMethod: 'free',
    couponCode: ''
};
const useCheckout = ()=>{
    const dispatch = (0, _store.useAppDispatch)();
    const cartItems = (0, _store.useAppSelector)(_cartslice.selectCartItems);
    const totalPrice = (0, _store.useAppSelector)(_cartslice.selectTotalPrice);
    const { user, isLoaded } = (0, _useAuth.useAuth)();
    const [checkoutState, setCheckoutState] = (0, _react.useState)({
        formData: initialFormData,
        isLoading: false,
        errors: {},
        step: 'form',
        preferenceId: undefined,
        initPoint: undefined
    });
    // Estado para cupones
    const [appliedCoupon, setAppliedCoupon] = (0, _react.useState)(null);
    // ===================================
    // AUTO-COMPLETAR DATOS DEL USUARIO AUTENTICADO
    // ===================================
    (0, _react.useEffect)(()=>{
        if (isLoaded && user) {
            const userEmail = user.email || '';
            const fullName = user.name || '';
            const [firstName, ...lastNameParts] = fullName.split(' ');
            const lastName = lastNameParts.join(' ');
            // Solo actualizar si los datos han cambiado para evitar recursión
            setCheckoutState((prev)=>{
                const currentBilling = prev.formData.billing;
                // Verificar si realmente necesitamos actualizar
                const shouldUpdateFirstName = !currentBilling.firstName && firstName;
                const shouldUpdateLastName = !currentBilling.lastName && lastName;
                const shouldUpdateEmail = !currentBilling.email && userEmail;
                if (!shouldUpdateFirstName && !shouldUpdateLastName && !shouldUpdateEmail) {
                    return prev;
                }
                return {
                    ...prev,
                    formData: {
                        ...prev.formData,
                        billing: {
                            ...currentBilling,
                            firstName: shouldUpdateFirstName ? firstName : currentBilling.firstName,
                            lastName: shouldUpdateLastName ? lastName : currentBilling.lastName,
                            email: shouldUpdateEmail ? userEmail : currentBilling.email
                        }
                    }
                };
            });
        }
    }, [
        isLoaded,
        user?.email,
        user?.name
    ]);
    // ===================================
    // FUNCIONES DE CÁLCULO
    // ===================================
    const calculateShippingCost = (0, _react.useCallback)(()=>{
        const { shippingMethod } = checkoutState.formData;
        switch(shippingMethod){
            case 'free':
                return 0;
            case 'standard':
                return totalPrice > 50000 ? 0 : 5000 // Envío gratis por compras mayores a $50,000
                ;
            case 'express':
                return 8000;
            default:
                return 0;
        }
    }, [
        checkoutState.formData.shippingMethod,
        totalPrice
    ]);
    const calculateDiscount = (0, _react.useCallback)(()=>{
        if (!appliedCoupon) {
            return 0;
        }
        if (appliedCoupon.type === 'percentage') {
            return Math.round(totalPrice * appliedCoupon.discount / 100);
        } else {
            return appliedCoupon.discount;
        }
    }, [
        appliedCoupon,
        totalPrice
    ]);
    const calculateTotal = (0, _react.useCallback)(()=>{
        const shipping = calculateShippingCost();
        const discount = calculateDiscount();
        const total = Math.max(0, totalPrice + shipping - discount);
        console.log('🔍 calculateTotal:', {
            totalPrice,
            shipping,
            discount,
            total
        });
        return total;
    }, [
        totalPrice,
        calculateShippingCost,
        calculateDiscount
    ]);
    // Actualizar datos del formulario
    const updateFormData = (0, _react.useCallback)((updates)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    ...updates
                },
                errors: {}
            }));
    }, []);
    // Actualizar datos de facturación
    const updateBillingData = (0, _react.useCallback)((billingData)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    billing: {
                        ...prev.formData.billing,
                        ...billingData
                    }
                },
                errors: {}
            }));
    }, []);
    // Actualizar datos de envío
    const updateShippingData = (0, _react.useCallback)((shippingData)=>{
        setCheckoutState((prev)=>({
                ...prev,
                formData: {
                    ...prev.formData,
                    shipping: {
                        ...prev.formData.shipping,
                        ...shippingData
                    }
                },
                errors: {}
            }));
    }, []);
    // Aplicar cupón de descuento
    const applyCoupon = (0, _react.useCallback)(async (couponCode)=>{
        if (!couponCode.trim()) {
            setCheckoutState((prev)=>({
                    ...prev,
                    errors: {
                        ...prev.errors,
                        coupon: 'Ingresa un código de cupón'
                    }
                }));
            return;
        }
        try {
            // Simular validación de cupón (aquí iría la llamada a la API)
            const validCoupons = {
                DESCUENTO10: {
                    discount: 10,
                    type: 'percentage'
                },
                ENVIOGRATIS: {
                    discount: 5000,
                    type: 'fixed'
                },
                BIENVENIDO: {
                    discount: 15,
                    type: 'percentage'
                }
            };
            const coupon = validCoupons[couponCode.toUpperCase()];
            if (coupon) {
                setAppliedCoupon({
                    code: couponCode.toUpperCase(),
                    ...coupon
                });
                setCheckoutState((prev)=>({
                        ...prev,
                        formData: {
                            ...prev.formData,
                            couponCode: couponCode.toUpperCase()
                        },
                        errors: {
                            ...prev.errors,
                            coupon: undefined
                        }
                    }));
            } else {
                setCheckoutState((prev)=>({
                        ...prev,
                        errors: {
                            ...prev.errors,
                            coupon: 'Código de cupón inválido'
                        }
                    }));
            }
        } catch (error) {
            setCheckoutState((prev)=>({
                    ...prev,
                    errors: {
                        ...prev.errors,
                        coupon: 'Error validando el cupón'
                    }
                }));
        }
    }, []);
    // ===================================
    // FUNCIONES DE VALIDACIÓN
    // ===================================
    // Validar formulario completo
    const validateForm = (0, _react.useCallback)(()=>{
        const { billing, shipping } = checkoutState.formData;
        const errors = {};
        // Validaciones básicas
        if (!billing.firstName?.trim()) {
            errors.firstName = 'Nombre es requerido';
        }
        if (!billing.lastName?.trim()) {
            errors.lastName = 'Apellido es requerido';
        }
        if (!billing.email?.trim()) {
            errors.email = 'Email es requerido';
        }
        if (!billing.phone?.trim()) {
            errors.phone = 'Teléfono es requerido';
        }
        if (!billing.streetAddress?.trim()) {
            errors.streetAddress = 'Dirección es requerida';
        }
        if (!billing.city?.trim()) {
            errors.city = 'Ciudad es requerida';
        }
        if (!billing.state?.trim()) {
            errors.state = 'Provincia es requerida';
        }
        if (!billing.zipCode?.trim()) {
            errors.zipCode = 'Código postal es requerido';
        }
        // Validaciones avanzadas
        if (billing.email && !(0, _consolidatedutils.validateEmail)(billing.email)) {
            errors.email = 'Email inválido';
        }
        if (billing.phone && !(0, _consolidatedutils.validatePhoneNumber)(billing.phone)) {
            errors.phone = 'Teléfono inválido. Formato: +54 351 XXX XXXX';
        }
        if (billing.streetAddress && billing.streetAddress.length < 10) {
            errors.streetAddress = 'La dirección debe tener al menos 10 caracteres';
        }
        // Validar código postal argentino (formato XXXX o AXXXX)
        if (billing.zipCode && !/^[A-Z]?\d{4}$/.test(billing.zipCode.toUpperCase())) {
            errors.zipCode = 'Código postal inválido';
        }
        // Validar envío si es dirección diferente
        if (shipping.differentAddress) {
            if (!shipping.streetAddress?.trim()) {
                errors.shippingStreetAddress = 'Dirección de envío es requerida';
            }
            if (!shipping.city?.trim()) {
                errors.shippingCity = 'Ciudad de envío es requerida';
            }
            if (!shipping.state?.trim()) {
                errors.shippingState = 'Provincia de envío es requerida';
            }
            if (!shipping.zipCode?.trim()) {
                errors.shippingZipCode = 'Código postal de envío es requerido';
            }
            if (shipping.zipCode && !/^[A-Z]?\d{4}$/.test(shipping.zipCode.toUpperCase())) {
                errors.shippingZipCode = 'Código postal de envío inválido';
            }
        }
        // Validar que hay items en el carrito
        if (cartItems.length === 0) {
            errors.cart = 'El carrito está vacío';
        }
        setCheckoutState((prev)=>({
                ...prev,
                errors
            }));
        return Object.keys(errors).length === 0;
    }, [
        cartItems.length
    ]);
    // Validar formulario express (solo campos esenciales)
    const validateExpressForm = (0, _react.useCallback)(()=>{
        const { billing } = checkoutState.formData;
        const errors = {};
        console.log('🔍 validateExpressForm - Datos del formulario:', {
            firstName: billing.firstName,
            lastName: billing.lastName,
            dni: billing.dni,
            email: billing.email,
            phone: billing.phone,
            streetAddress: billing.streetAddress,
            paymentMethod: checkoutState.formData.paymentMethod,
            cartItemsLength: cartItems.length,
            currentStep: checkoutState.step
        });
        // Validaciones esenciales para checkout express
        if (!billing.firstName?.trim()) {
            errors.firstName = 'Nombre es requerido';
        }
        if (!billing.lastName?.trim()) {
            errors.lastName = 'Apellido es requerido';
        }
        if (!billing.dni?.trim()) {
            errors.dni = 'DNI/CUIT es requerido';
        }
        if (!billing.email?.trim()) {
            errors.email = 'Email es requerido';
        }
        if (!billing.phone?.trim()) {
            errors.phone = 'Teléfono es requerido';
        }
        if (!billing.streetAddress?.trim()) {
            errors.streetAddress = 'Dirección es requerida';
        }
        // Validaciones avanzadas
        if (billing.email && !(0, _consolidatedutils.validateEmail)(billing.email)) {
            errors.email = 'Email inválido';
        }
        if (billing.phone && !(0, _consolidatedutils.validatePhoneNumber)(billing.phone)) {
            errors.phone = 'Teléfono inválido. Formato: +54 351 XXX XXXX';
        }
        // Validación de DNI/CUIT argentino
        if (billing.dni && !(0, _consolidatedutils.validateDNI)(billing.dni)) {
            errors.dni = 'DNI/CUIT inválido. Formato: 12345678 o 20-12345678-9';
        }
        // Validar método de pago
        if (!checkoutState.formData.paymentMethod) {
            errors.paymentMethod = 'Método de pago es requerido';
        }
        // ✅ NUEVO: Solo validar carrito si NO estamos en el step de pago
        // Durante el step 'payment', el carrito ya se vació pero es normal
        if (checkoutState.step !== 'payment' && cartItems.length === 0) {
            errors.cart = 'El carrito está vacío';
        }
        console.log('🔍 validateExpressForm - Errores encontrados:', errors);
        console.log('🔍 validateExpressForm - Formulario válido:', Object.keys(errors).length === 0);
        setCheckoutState((prev)=>({
                ...prev,
                errors
            }));
        return Object.keys(errors).length === 0;
    }, [
        checkoutState.formData,
        checkoutState.step,
        cartItems.length
    ]) // ✅ NUEVO: Agregar step a dependencias
    ;
    // ===================================
    // FUNCIONES DE PROCESAMIENTO
    // ===================================
    // Procesar checkout express
    const processExpressCheckout = (0, _react.useCallback)(async ()=>{
        if (!validateExpressForm()) {
            return;
        }
        // Marcar que el checkout está en progreso
        sessionStorage.setItem('checkout-in-progress', 'true');
        setCheckoutState((prev)=>({
                ...prev,
                isLoading: true,
                step: 'processing'
            }));
        try {
            const { billing } = checkoutState.formData;
            const shippingCost = calculateShippingCost();
            // Sanitizar teléfono para el backend (solo números, formato argentino 10-11 dígitos)
            let sanitizedPhone = billing.phone?.replace(/\D/g, '') || '';
            // Si empieza con 54 (código de Argentina), remover el código de país
            if (sanitizedPhone.startsWith('54') && sanitizedPhone.length > 11) {
                sanitizedPhone = sanitizedPhone.substring(2); // Remover "54"
            }
            // Si empieza con 9 (código de celular), mantenerlo para que sea 11 dígitos
            // Si no empieza con 9, debería ser 10 dígitos (teléfono fijo)
            console.log('🔍 processExpressCheckout - Teléfono original:', billing.phone);
            console.log('🔍 processExpressCheckout - Teléfono sanitizado:', sanitizedPhone);
            console.log('🔍 processExpressCheckout - Longitud del teléfono:', sanitizedPhone.length);
            // Preparar datos para la API (Express Checkout - campos simplificados)
            const payload = {
                items: cartItems.map((item)=>({
                        id: item.id.toString(),
                        name: item.title,
                        price: item.discountedPrice,
                        quantity: item.quantity,
                        image: item.imgs?.previews?.[0] || ''
                    })),
                payer: {
                    name: billing.firstName || 'Cliente',
                    surname: billing.lastName || 'Express',
                    email: billing.email,
                    phone: sanitizedPhone
                },
                shipping: shippingCost > 0 ? {
                    cost: shippingCost,
                    address: {
                        street_name: billing.streetAddress,
                        street_number: '123',
                        zip_code: billing.zipCode || '5000',
                        city_name: billing.city || 'Córdoba',
                        state_name: billing.state || 'Córdoba'
                    }
                } : undefined,
                external_reference: `express_checkout_${Date.now()}`
            };
            console.log('🔍 processExpressCheckout - Payload enviado:', payload);
            // Llamar a la API
            const response = await fetch('/api/payments/create-preference', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!result.success) {
                throw new Error(result.error || 'Error procesando el pago');
            }
            // ✅ SOLUCIÓN FINAL: Redirección directa a MercadoPago
            // Esto evita el problema de hooks con el Wallet Brick embebido
            console.log('🔄 Redirigiendo directamente a MercadoPago:', result.data.init_point);
            // Cambiar a estado de redirección inmediatamente
            setCheckoutState((prev)=>({
                    ...prev,
                    step: 'redirect',
                    preferenceId: result.data.preference_id,
                    initPoint: result.data.init_point,
                    isLoading: false
                }));
        } catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Error procesando el pago';
            console.error('Error en express checkout:', error);
            setCheckoutState((prev)=>({
                    ...prev,
                    isLoading: false,
                    step: 'form',
                    errors: {
                        general: errorMessage
                    }
                }));
        }
    }, [
        checkoutState.formData,
        cartItems,
        validateExpressForm,
        calculateShippingCost,
        dispatch
    ]);
    // Procesar checkout completo
    const processCheckout = (0, _react.useCallback)(async ()=>{
        if (!validateForm()) {
            return;
        }
        // Marcar que el checkout está en progreso
        sessionStorage.setItem('checkout-in-progress', 'true');
        setCheckoutState((prev)=>({
                ...prev,
                isLoading: true,
                step: 'processing'
            }));
        try {
            const { billing, shipping } = checkoutState.formData;
            const shippingCost = calculateShippingCost();
            // Preparar datos para la API
            const payload = {
                items: cartItems.map((item)=>({
                        id: item.id.toString(),
                        name: item.title,
                        price: item.discountedPrice,
                        quantity: item.quantity,
                        image: item.imgs?.previews?.[0] || ''
                    })),
                payer: {
                    name: billing.firstName,
                    surname: billing.lastName,
                    email: billing.email,
                    phone: billing.phone
                },
                shipping: shippingCost > 0 ? {
                    cost: shippingCost,
                    address: {
                        street_name: shipping.differentAddress ? shipping.streetAddress : billing.streetAddress,
                        street_number: '123',
                        zip_code: shipping.differentAddress ? shipping.zipCode : billing.zipCode,
                        city_name: shipping.differentAddress ? shipping.city : billing.city,
                        state_name: shipping.differentAddress ? shipping.state : billing.state
                    }
                } : undefined,
                external_reference: `checkout_${Date.now()}`
            };
            // Llamar a la API
            const response = await fetch('/api/payments/create-preference', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!result.success) {
                throw new Error(result.error || 'Error procesando el pago');
            }
            // Procesar resultado exitoso - mostrar paso de pago manual
            // NOTA: No limpiar el carrito aquí, se limpiará cuando el pago se complete exitosamente
            // ✅ CORREGIDO: Ir directamente a redirect para evitar error de hooks con MercadoPagoWallet
            console.log('🔄 Redirigiendo directamente a MercadoPago:', result.data.init_point);
            setCheckoutState((prev)=>({
                    ...prev,
                    step: 'redirect',
                    preferenceId: result.data.preference_id,
                    initPoint: result.data.init_point,
                    isLoading: false
                }));
        } catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Error procesando el pago';
            console.error('Error en checkout:', error);
            setCheckoutState((prev)=>({
                    ...prev,
                    isLoading: false,
                    step: 'form',
                    errors: {
                        general: errorMessage
                    }
                }));
        }
    }, [
        checkoutState.formData,
        cartItems,
        validateForm,
        calculateShippingCost,
        dispatch
    ]);
    // ===================================
    // CALLBACKS PARA WALLET BRICK
    // ===================================
    const handleWalletReady = (0, _react.useCallback)(()=>{
        console.log('Wallet Brick está listo');
    }, []);
    const handleWalletError = (0, _react.useCallback)((error)=>{
        console.error('Error en Wallet Brick:', error);
        setCheckoutState((prev)=>({
                ...prev,
                errors: {
                    payment: error.message || 'Error en el sistema de pagos'
                },
                isLoading: false
            }));
    }, []);
    const handleWalletSubmit = (0, _react.useCallback)((data)=>{
        console.log('💳 Wallet Submit - Pago enviado desde Wallet Brick:', data);
        console.log('💳 Wallet Submit - Cambiando a step redirect');
        // IMPORTANTE: NO limpiar el carrito aquí
        // El carrito se limpiará solo cuando el pago sea confirmado como exitoso
        setCheckoutState((prev)=>({
                ...prev,
                step: 'redirect',
                isLoading: false
            }));
    }, []);
    // Memorizar valores calculados para evitar recursión infinita
    const memoizedShippingCost = (0, _react.useMemo)(()=>{
        try {
            const cost = calculateShippingCost();
            return typeof cost === 'number' && !isNaN(cost) ? cost : 0;
        } catch (error) {
            console.error('❌ Error calculating shippingCost:', error);
            return 0;
        }
    }, [
        calculateShippingCost
    ]);
    const memoizedDiscount = (0, _react.useMemo)(()=>{
        try {
            const disc = calculateDiscount();
            return typeof disc === 'number' && !isNaN(disc) ? disc : 0;
        } catch (error) {
            console.error('❌ Error calculating discount:', error);
            return 0;
        }
    }, [
        calculateDiscount
    ]);
    const memoizedFinalTotal = (0, _react.useMemo)(()=>{
        try {
            const total = calculateTotal();
            return typeof total === 'number' && !isNaN(total) ? total : 0;
        } catch (error) {
            console.error('❌ Error calculating finalTotal:', error);
            return 0;
        }
    }, [
        calculateTotal
    ]);
    return {
        // Estado
        formData: checkoutState.formData,
        isLoading: checkoutState.isLoading,
        errors: checkoutState.errors,
        step: checkoutState.step,
        // Datos para Wallet Brick
        preferenceId: checkoutState.preferenceId,
        initPoint: checkoutState.initPoint,
        // Datos calculados
        cartItems,
        totalPrice,
        shippingCost: memoizedShippingCost,
        discount: memoizedDiscount,
        finalTotal: memoizedFinalTotal,
        // Cupones
        appliedCoupon,
        applyCoupon,
        // Acciones
        updateFormData,
        updateBillingData,
        updateShippingData,
        validateForm,
        validateExpressForm,
        processCheckout,
        processExpressCheckout,
        // Callbacks para Wallet Brick
        handleWalletReady,
        handleWalletError,
        handleWalletSubmit
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZUNoZWNrb3V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlQXBwRGlzcGF0Y2gsIHVzZUFwcFNlbGVjdG9yIH0gZnJvbSAnQC9yZWR1eC9zdG9yZSdcbmltcG9ydCB7XG4gIHNlbGVjdENhcnRJdGVtcyxcbiAgc2VsZWN0VG90YWxQcmljZSxcbiAgcmVtb3ZlQWxsSXRlbXNGcm9tQ2FydCxcbn0gZnJvbSAnQC9yZWR1eC9mZWF0dXJlcy9jYXJ0LXNsaWNlJ1xuaW1wb3J0IHtcbiAgQ2hlY2tvdXRGb3JtRGF0YSxcbiAgQ2hlY2tvdXRTdGF0ZSxcbiAgQ3JlYXRlUHJlZmVyZW5jZVBheWxvYWQsXG4gIFBheW1lbnRQcmVmZXJlbmNlUmVzcG9uc2UsXG59IGZyb20gJ0AvdHlwZXMvY2hlY2tvdXQnXG5pbXBvcnQgeyBBcGlSZXNwb25zZSB9IGZyb20gJ0AvdHlwZXMvYXBpJ1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vdXNlQXV0aCdcbmltcG9ydCB7IHZhbGlkYXRlRW1haWwsIHZhbGlkYXRlUGhvbmVOdW1iZXIsIHZhbGlkYXRlRE5JIH0gZnJvbSAnQC9saWIvdXRpbHMvY29uc29saWRhdGVkLXV0aWxzJ1xuXG5jb25zdCBpbml0aWFsRm9ybURhdGE6IENoZWNrb3V0Rm9ybURhdGEgPSB7XG4gIGJpbGxpbmc6IHtcbiAgICBmaXJzdE5hbWU6ICcnLFxuICAgIGxhc3ROYW1lOiAnJyxcbiAgICBkbmk6ICcnLFxuICAgIGNvbXBhbnlOYW1lOiAnJyxcbiAgICBjb3VudHJ5OiAnQXJnZW50aW5hJyxcbiAgICBzdHJlZXRBZGRyZXNzOiAnJyxcbiAgICBhcGFydG1lbnQ6ICcnLFxuICAgIGNpdHk6ICcnLFxuICAgIHN0YXRlOiAnJyxcbiAgICB6aXBDb2RlOiAnJyxcbiAgICBwaG9uZTogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIG9yZGVyTm90ZXM6ICcnLFxuICAgIG9ic2VydmF0aW9uczogJycsXG4gIH0sXG4gIHNoaXBwaW5nOiB7XG4gICAgZGlmZmVyZW50QWRkcmVzczogZmFsc2UsXG4gIH0sXG4gIHBheW1lbnRNZXRob2Q6ICdtZXJjYWRvcGFnbycsXG4gIHNoaXBwaW5nTWV0aG9kOiAnZnJlZScsXG4gIGNvdXBvbkNvZGU6ICcnLFxufVxuXG5leHBvcnQgY29uc3QgdXNlQ2hlY2tvdXQgPSAoKSA9PiB7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlQXBwRGlzcGF0Y2goKVxuICBjb25zdCBjYXJ0SXRlbXMgPSB1c2VBcHBTZWxlY3RvcihzZWxlY3RDYXJ0SXRlbXMpXG4gIGNvbnN0IHRvdGFsUHJpY2UgPSB1c2VBcHBTZWxlY3RvcihzZWxlY3RUb3RhbFByaWNlKVxuICBjb25zdCB7IHVzZXIsIGlzTG9hZGVkIH0gPSB1c2VBdXRoKClcblxuICBjb25zdCBbY2hlY2tvdXRTdGF0ZSwgc2V0Q2hlY2tvdXRTdGF0ZV0gPSB1c2VTdGF0ZTxDaGVja291dFN0YXRlPih7XG4gICAgZm9ybURhdGE6IGluaXRpYWxGb3JtRGF0YSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIGVycm9yczoge30sXG4gICAgc3RlcDogJ2Zvcm0nLFxuICAgIHByZWZlcmVuY2VJZDogdW5kZWZpbmVkLFxuICAgIGluaXRQb2ludDogdW5kZWZpbmVkLFxuICB9KVxuXG4gIC8vIEVzdGFkbyBwYXJhIGN1cG9uZXNcbiAgY29uc3QgW2FwcGxpZWRDb3Vwb24sIHNldEFwcGxpZWRDb3Vwb25dID0gdXNlU3RhdGU8e1xuICAgIGNvZGU6IHN0cmluZ1xuICAgIGRpc2NvdW50OiBudW1iZXJcbiAgICB0eXBlOiAncGVyY2VudGFnZScgfCAnZml4ZWQnXG4gIH0gfCBudWxsPihudWxsKVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEFVVE8tQ09NUExFVEFSIERBVE9TIERFTCBVU1VBUklPIEFVVEVOVElDQURPXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzTG9hZGVkICYmIHVzZXIpIHtcbiAgICAgIGNvbnN0IHVzZXJFbWFpbCA9IHVzZXIuZW1haWwgfHwgJydcbiAgICAgIGNvbnN0IGZ1bGxOYW1lID0gdXNlci5uYW1lIHx8ICcnXG4gICAgICBjb25zdCBbZmlyc3ROYW1lLCAuLi5sYXN0TmFtZVBhcnRzXSA9IGZ1bGxOYW1lLnNwbGl0KCcgJylcbiAgICAgIGNvbnN0IGxhc3ROYW1lID0gbGFzdE5hbWVQYXJ0cy5qb2luKCcgJylcblxuICAgICAgLy8gU29sbyBhY3R1YWxpemFyIHNpIGxvcyBkYXRvcyBoYW4gY2FtYmlhZG8gcGFyYSBldml0YXIgcmVjdXJzacOzblxuICAgICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEJpbGxpbmcgPSBwcmV2LmZvcm1EYXRhLmJpbGxpbmdcblxuICAgICAgICAvLyBWZXJpZmljYXIgc2kgcmVhbG1lbnRlIG5lY2VzaXRhbW9zIGFjdHVhbGl6YXJcbiAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlRmlyc3ROYW1lID0gIWN1cnJlbnRCaWxsaW5nLmZpcnN0TmFtZSAmJiBmaXJzdE5hbWVcbiAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlTGFzdE5hbWUgPSAhY3VycmVudEJpbGxpbmcubGFzdE5hbWUgJiYgbGFzdE5hbWVcbiAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlRW1haWwgPSAhY3VycmVudEJpbGxpbmcuZW1haWwgJiYgdXNlckVtYWlsXG5cbiAgICAgICAgaWYgKCFzaG91bGRVcGRhdGVGaXJzdE5hbWUgJiYgIXNob3VsZFVwZGF0ZUxhc3ROYW1lICYmICFzaG91bGRVcGRhdGVFbWFpbCkge1xuICAgICAgICAgIHJldHVybiBwcmV2XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgZm9ybURhdGE6IHtcbiAgICAgICAgICAgIC4uLnByZXYuZm9ybURhdGEsXG4gICAgICAgICAgICBiaWxsaW5nOiB7XG4gICAgICAgICAgICAgIC4uLmN1cnJlbnRCaWxsaW5nLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHNob3VsZFVwZGF0ZUZpcnN0TmFtZSA/IGZpcnN0TmFtZSA6IGN1cnJlbnRCaWxsaW5nLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWU6IHNob3VsZFVwZGF0ZUxhc3ROYW1lID8gbGFzdE5hbWUgOiBjdXJyZW50QmlsbGluZy5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgZW1haWw6IHNob3VsZFVwZGF0ZUVtYWlsID8gdXNlckVtYWlsIDogY3VycmVudEJpbGxpbmcuZW1haWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbaXNMb2FkZWQsIHVzZXI/LmVtYWlsLCB1c2VyPy5uYW1lXSlcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBGVU5DSU9ORVMgREUgQ8OBTENVTE9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgY2FsY3VsYXRlU2hpcHBpbmdDb3N0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHsgc2hpcHBpbmdNZXRob2QgfSA9IGNoZWNrb3V0U3RhdGUuZm9ybURhdGFcblxuICAgIHN3aXRjaCAoc2hpcHBpbmdNZXRob2QpIHtcbiAgICAgIGNhc2UgJ2ZyZWUnOlxuICAgICAgICByZXR1cm4gMFxuICAgICAgY2FzZSAnc3RhbmRhcmQnOlxuICAgICAgICByZXR1cm4gdG90YWxQcmljZSA+IDUwMDAwID8gMCA6IDUwMDAgLy8gRW52w61vIGdyYXRpcyBwb3IgY29tcHJhcyBtYXlvcmVzIGEgJDUwLDAwMFxuICAgICAgY2FzZSAnZXhwcmVzcyc6XG4gICAgICAgIHJldHVybiA4MDAwXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gMFxuICAgIH1cbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEuc2hpcHBpbmdNZXRob2QsIHRvdGFsUHJpY2VdKVxuXG4gIGNvbnN0IGNhbGN1bGF0ZURpc2NvdW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghYXBwbGllZENvdXBvbikge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG5cbiAgICBpZiAoYXBwbGllZENvdXBvbi50eXBlID09PSAncGVyY2VudGFnZScpIHtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKCh0b3RhbFByaWNlICogYXBwbGllZENvdXBvbi5kaXNjb3VudCkgLyAxMDApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcHBsaWVkQ291cG9uLmRpc2NvdW50XG4gICAgfVxuICB9LCBbYXBwbGllZENvdXBvbiwgdG90YWxQcmljZV0pXG5cbiAgY29uc3QgY2FsY3VsYXRlVG90YWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3Qgc2hpcHBpbmcgPSBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QoKVxuICAgIGNvbnN0IGRpc2NvdW50ID0gY2FsY3VsYXRlRGlzY291bnQoKVxuICAgIGNvbnN0IHRvdGFsID0gTWF0aC5tYXgoMCwgdG90YWxQcmljZSArIHNoaXBwaW5nIC0gZGlzY291bnQpXG4gICAgY29uc29sZS5sb2coJ/CflI0gY2FsY3VsYXRlVG90YWw6JywgeyB0b3RhbFByaWNlLCBzaGlwcGluZywgZGlzY291bnQsIHRvdGFsIH0pXG4gICAgcmV0dXJuIHRvdGFsXG4gIH0sIFt0b3RhbFByaWNlLCBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QsIGNhbGN1bGF0ZURpc2NvdW50XSlcblxuICAvLyBBY3R1YWxpemFyIGRhdG9zIGRlbCBmb3JtdWxhcmlvXG4gIGNvbnN0IHVwZGF0ZUZvcm1EYXRhID0gdXNlQ2FsbGJhY2soKHVwZGF0ZXM6IFBhcnRpYWw8Q2hlY2tvdXRGb3JtRGF0YT4pID0+IHtcbiAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBmb3JtRGF0YTogeyAuLi5wcmV2LmZvcm1EYXRhLCAuLi51cGRhdGVzIH0sXG4gICAgICBlcnJvcnM6IHt9LCAvLyBMaW1waWFyIGVycm9yZXMgYWwgYWN0dWFsaXphclxuICAgIH0pKVxuICB9LCBbXSlcblxuICAvLyBBY3R1YWxpemFyIGRhdG9zIGRlIGZhY3R1cmFjacOzblxuICBjb25zdCB1cGRhdGVCaWxsaW5nRGF0YSA9IHVzZUNhbGxiYWNrKChiaWxsaW5nRGF0YTogUGFydGlhbDxDaGVja291dEZvcm1EYXRhWydiaWxsaW5nJ10+KSA9PiB7XG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgZm9ybURhdGE6IHtcbiAgICAgICAgLi4ucHJldi5mb3JtRGF0YSxcbiAgICAgICAgYmlsbGluZzogeyAuLi5wcmV2LmZvcm1EYXRhLmJpbGxpbmcsIC4uLmJpbGxpbmdEYXRhIH0sXG4gICAgICB9LFxuICAgICAgZXJyb3JzOiB7fSwgLy8gTGltcGlhciBlcnJvcmVzIGFsIGFjdHVhbGl6YXJcbiAgICB9KSlcbiAgfSwgW10pXG5cbiAgLy8gQWN0dWFsaXphciBkYXRvcyBkZSBlbnbDrW9cbiAgY29uc3QgdXBkYXRlU2hpcHBpbmdEYXRhID0gdXNlQ2FsbGJhY2soKHNoaXBwaW5nRGF0YTogUGFydGlhbDxDaGVja291dEZvcm1EYXRhWydzaGlwcGluZyddPikgPT4ge1xuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGZvcm1EYXRhOiB7XG4gICAgICAgIC4uLnByZXYuZm9ybURhdGEsXG4gICAgICAgIHNoaXBwaW5nOiB7IC4uLnByZXYuZm9ybURhdGEuc2hpcHBpbmcsIC4uLnNoaXBwaW5nRGF0YSB9LFxuICAgICAgfSxcbiAgICAgIGVycm9yczoge30sIC8vIExpbXBpYXIgZXJyb3JlcyBhbCBhY3R1YWxpemFyXG4gICAgfSkpXG4gIH0sIFtdKVxuXG4gIC8vIEFwbGljYXIgY3Vww7NuIGRlIGRlc2N1ZW50b1xuICBjb25zdCBhcHBseUNvdXBvbiA9IHVzZUNhbGxiYWNrKGFzeW5jIChjb3Vwb25Db2RlOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWNvdXBvbkNvZGUudHJpbSgpKSB7XG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgZXJyb3JzOiB7IC4uLnByZXYuZXJyb3JzLCBjb3Vwb246ICdJbmdyZXNhIHVuIGPDs2RpZ28gZGUgY3Vww7NuJyB9LFxuICAgICAgfSkpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gU2ltdWxhciB2YWxpZGFjacOzbiBkZSBjdXDDs24gKGFxdcOtIGlyw61hIGxhIGxsYW1hZGEgYSBsYSBBUEkpXG4gICAgICBjb25zdCB2YWxpZENvdXBvbnMgPSB7XG4gICAgICAgIERFU0NVRU5UTzEwOiB7IGRpc2NvdW50OiAxMCwgdHlwZTogJ3BlcmNlbnRhZ2UnIGFzIGNvbnN0IH0sXG4gICAgICAgIEVOVklPR1JBVElTOiB7IGRpc2NvdW50OiA1MDAwLCB0eXBlOiAnZml4ZWQnIGFzIGNvbnN0IH0sXG4gICAgICAgIEJJRU5WRU5JRE86IHsgZGlzY291bnQ6IDE1LCB0eXBlOiAncGVyY2VudGFnZScgYXMgY29uc3QgfSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgY291cG9uID0gdmFsaWRDb3Vwb25zW2NvdXBvbkNvZGUudG9VcHBlckNhc2UoKSBhcyBrZXlvZiB0eXBlb2YgdmFsaWRDb3Vwb25zXVxuXG4gICAgICBpZiAoY291cG9uKSB7XG4gICAgICAgIHNldEFwcGxpZWRDb3Vwb24oe1xuICAgICAgICAgIGNvZGU6IGNvdXBvbkNvZGUudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAuLi5jb3Vwb24sXG4gICAgICAgIH0pXG4gICAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgZm9ybURhdGE6IHsgLi4ucHJldi5mb3JtRGF0YSwgY291cG9uQ29kZTogY291cG9uQ29kZS50b1VwcGVyQ2FzZSgpIH0sXG4gICAgICAgICAgZXJyb3JzOiB7IC4uLnByZXYuZXJyb3JzLCBjb3Vwb246IHVuZGVmaW5lZCB9LFxuICAgICAgICB9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgZXJyb3JzOiB7IC4uLnByZXYuZXJyb3JzLCBjb3Vwb246ICdDw7NkaWdvIGRlIGN1cMOzbiBpbnbDoWxpZG8nIH0sXG4gICAgICAgIH0pKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgZXJyb3JzOiB7IC4uLnByZXYuZXJyb3JzLCBjb3Vwb246ICdFcnJvciB2YWxpZGFuZG8gZWwgY3Vww7NuJyB9LFxuICAgICAgfSkpXG4gICAgfVxuICB9LCBbXSlcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBGVU5DSU9ORVMgREUgVkFMSURBQ0nDk05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyBWYWxpZGFyIGZvcm11bGFyaW8gY29tcGxldG9cbiAgY29uc3QgdmFsaWRhdGVGb3JtID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHsgYmlsbGluZywgc2hpcHBpbmcgfSA9IGNoZWNrb3V0U3RhdGUuZm9ybURhdGFcbiAgICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuXG4gICAgLy8gVmFsaWRhY2lvbmVzIGLDoXNpY2FzXG4gICAgaWYgKCFiaWxsaW5nLmZpcnN0TmFtZT8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMuZmlyc3ROYW1lID0gJ05vbWJyZSBlcyByZXF1ZXJpZG8nXG4gICAgfVxuICAgIGlmICghYmlsbGluZy5sYXN0TmFtZT8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMubGFzdE5hbWUgPSAnQXBlbGxpZG8gZXMgcmVxdWVyaWRvJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuZW1haWw/LnRyaW0oKSkge1xuICAgICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGVzIHJlcXVlcmlkbydcbiAgICB9XG4gICAgaWYgKCFiaWxsaW5nLnBob25lPy50cmltKCkpIHtcbiAgICAgIGVycm9ycy5waG9uZSA9ICdUZWzDqWZvbm8gZXMgcmVxdWVyaWRvJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuc3RyZWV0QWRkcmVzcz8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMuc3RyZWV0QWRkcmVzcyA9ICdEaXJlY2Npw7NuIGVzIHJlcXVlcmlkYSdcbiAgICB9XG4gICAgaWYgKCFiaWxsaW5nLmNpdHk/LnRyaW0oKSkge1xuICAgICAgZXJyb3JzLmNpdHkgPSAnQ2l1ZGFkIGVzIHJlcXVlcmlkYSdcbiAgICB9XG4gICAgaWYgKCFiaWxsaW5nLnN0YXRlPy50cmltKCkpIHtcbiAgICAgIGVycm9ycy5zdGF0ZSA9ICdQcm92aW5jaWEgZXMgcmVxdWVyaWRhJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuemlwQ29kZT8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMuemlwQ29kZSA9ICdDw7NkaWdvIHBvc3RhbCBlcyByZXF1ZXJpZG8nXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhY2lvbmVzIGF2YW56YWRhc1xuICAgIGlmIChiaWxsaW5nLmVtYWlsICYmICF2YWxpZGF0ZUVtYWlsKGJpbGxpbmcuZW1haWwpKSB7XG4gICAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaW52w6FsaWRvJ1xuICAgIH1cblxuICAgIGlmIChiaWxsaW5nLnBob25lICYmICF2YWxpZGF0ZVBob25lTnVtYmVyKGJpbGxpbmcucGhvbmUpKSB7XG4gICAgICBlcnJvcnMucGhvbmUgPSAnVGVsw6lmb25vIGludsOhbGlkby4gRm9ybWF0bzogKzU0IDM1MSBYWFggWFhYWCdcbiAgICB9XG5cbiAgICBpZiAoYmlsbGluZy5zdHJlZXRBZGRyZXNzICYmIGJpbGxpbmcuc3RyZWV0QWRkcmVzcy5sZW5ndGggPCAxMCkge1xuICAgICAgZXJyb3JzLnN0cmVldEFkZHJlc3MgPSAnTGEgZGlyZWNjacOzbiBkZWJlIHRlbmVyIGFsIG1lbm9zIDEwIGNhcmFjdGVyZXMnXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhciBjw7NkaWdvIHBvc3RhbCBhcmdlbnRpbm8gKGZvcm1hdG8gWFhYWCBvIEFYWFhYKVxuICAgIGlmIChiaWxsaW5nLnppcENvZGUgJiYgIS9eW0EtWl0/XFxkezR9JC8udGVzdChiaWxsaW5nLnppcENvZGUudG9VcHBlckNhc2UoKSkpIHtcbiAgICAgIGVycm9ycy56aXBDb2RlID0gJ0PDs2RpZ28gcG9zdGFsIGludsOhbGlkbydcbiAgICB9XG5cbiAgICAvLyBWYWxpZGFyIGVudsOtbyBzaSBlcyBkaXJlY2Npw7NuIGRpZmVyZW50ZVxuICAgIGlmIChzaGlwcGluZy5kaWZmZXJlbnRBZGRyZXNzKSB7XG4gICAgICBpZiAoIXNoaXBwaW5nLnN0cmVldEFkZHJlc3M/LnRyaW0oKSkge1xuICAgICAgICBlcnJvcnMuc2hpcHBpbmdTdHJlZXRBZGRyZXNzID0gJ0RpcmVjY2nDs24gZGUgZW52w61vIGVzIHJlcXVlcmlkYSdcbiAgICAgIH1cbiAgICAgIGlmICghc2hpcHBpbmcuY2l0eT8udHJpbSgpKSB7XG4gICAgICAgIGVycm9ycy5zaGlwcGluZ0NpdHkgPSAnQ2l1ZGFkIGRlIGVudsOtbyBlcyByZXF1ZXJpZGEnXG4gICAgICB9XG4gICAgICBpZiAoIXNoaXBwaW5nLnN0YXRlPy50cmltKCkpIHtcbiAgICAgICAgZXJyb3JzLnNoaXBwaW5nU3RhdGUgPSAnUHJvdmluY2lhIGRlIGVudsOtbyBlcyByZXF1ZXJpZGEnXG4gICAgICB9XG4gICAgICBpZiAoIXNoaXBwaW5nLnppcENvZGU/LnRyaW0oKSkge1xuICAgICAgICBlcnJvcnMuc2hpcHBpbmdaaXBDb2RlID0gJ0PDs2RpZ28gcG9zdGFsIGRlIGVudsOtbyBlcyByZXF1ZXJpZG8nXG4gICAgICB9XG5cbiAgICAgIGlmIChzaGlwcGluZy56aXBDb2RlICYmICEvXltBLVpdP1xcZHs0fSQvLnRlc3Qoc2hpcHBpbmcuemlwQ29kZS50b1VwcGVyQ2FzZSgpKSkge1xuICAgICAgICBlcnJvcnMuc2hpcHBpbmdaaXBDb2RlID0gJ0PDs2RpZ28gcG9zdGFsIGRlIGVudsOtbyBpbnbDoWxpZG8nXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhciBxdWUgaGF5IGl0ZW1zIGVuIGVsIGNhcnJpdG9cbiAgICBpZiAoY2FydEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JzLmNhcnQgPSAnRWwgY2Fycml0byBlc3TDoSB2YWPDrW8nXG4gICAgfVxuXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9ycyB9KSlcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDBcbiAgfSwgW2NhcnRJdGVtcy5sZW5ndGhdKVxuXG4gIC8vIFZhbGlkYXIgZm9ybXVsYXJpbyBleHByZXNzIChzb2xvIGNhbXBvcyBlc2VuY2lhbGVzKVxuICBjb25zdCB2YWxpZGF0ZUV4cHJlc3NGb3JtID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHsgYmlsbGluZyB9ID0gY2hlY2tvdXRTdGF0ZS5mb3JtRGF0YVxuICAgIGNvbnN0IGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSB2YWxpZGF0ZUV4cHJlc3NGb3JtIC0gRGF0b3MgZGVsIGZvcm11bGFyaW86Jywge1xuICAgICAgZmlyc3ROYW1lOiBiaWxsaW5nLmZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lOiBiaWxsaW5nLmxhc3ROYW1lLFxuICAgICAgZG5pOiBiaWxsaW5nLmRuaSxcbiAgICAgIGVtYWlsOiBiaWxsaW5nLmVtYWlsLFxuICAgICAgcGhvbmU6IGJpbGxpbmcucGhvbmUsXG4gICAgICBzdHJlZXRBZGRyZXNzOiBiaWxsaW5nLnN0cmVldEFkZHJlc3MsXG4gICAgICBwYXltZW50TWV0aG9kOiBjaGVja291dFN0YXRlLmZvcm1EYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICBjYXJ0SXRlbXNMZW5ndGg6IGNhcnRJdGVtcy5sZW5ndGgsXG4gICAgICBjdXJyZW50U3RlcDogY2hlY2tvdXRTdGF0ZS5zdGVwLCAvLyDinIUgTlVFVk86IEFncmVnYXIgc3RlcCBhY3R1YWxcbiAgICB9KVxuXG4gICAgLy8gVmFsaWRhY2lvbmVzIGVzZW5jaWFsZXMgcGFyYSBjaGVja291dCBleHByZXNzXG4gICAgaWYgKCFiaWxsaW5nLmZpcnN0TmFtZT8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMuZmlyc3ROYW1lID0gJ05vbWJyZSBlcyByZXF1ZXJpZG8nXG4gICAgfVxuICAgIGlmICghYmlsbGluZy5sYXN0TmFtZT8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMubGFzdE5hbWUgPSAnQXBlbGxpZG8gZXMgcmVxdWVyaWRvJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuZG5pPy50cmltKCkpIHtcbiAgICAgIGVycm9ycy5kbmkgPSAnRE5JL0NVSVQgZXMgcmVxdWVyaWRvJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuZW1haWw/LnRyaW0oKSkge1xuICAgICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGVzIHJlcXVlcmlkbydcbiAgICB9XG4gICAgaWYgKCFiaWxsaW5nLnBob25lPy50cmltKCkpIHtcbiAgICAgIGVycm9ycy5waG9uZSA9ICdUZWzDqWZvbm8gZXMgcmVxdWVyaWRvJ1xuICAgIH1cbiAgICBpZiAoIWJpbGxpbmcuc3RyZWV0QWRkcmVzcz8udHJpbSgpKSB7XG4gICAgICBlcnJvcnMuc3RyZWV0QWRkcmVzcyA9ICdEaXJlY2Npw7NuIGVzIHJlcXVlcmlkYSdcbiAgICB9XG5cbiAgICAvLyBWYWxpZGFjaW9uZXMgYXZhbnphZGFzXG4gICAgaWYgKGJpbGxpbmcuZW1haWwgJiYgIXZhbGlkYXRlRW1haWwoYmlsbGluZy5lbWFpbCkpIHtcbiAgICAgIGVycm9ycy5lbWFpbCA9ICdFbWFpbCBpbnbDoWxpZG8nXG4gICAgfVxuXG4gICAgaWYgKGJpbGxpbmcucGhvbmUgJiYgIXZhbGlkYXRlUGhvbmVOdW1iZXIoYmlsbGluZy5waG9uZSkpIHtcbiAgICAgIGVycm9ycy5waG9uZSA9ICdUZWzDqWZvbm8gaW52w6FsaWRvLiBGb3JtYXRvOiArNTQgMzUxIFhYWCBYWFhYJ1xuICAgIH1cblxuICAgIC8vIFZhbGlkYWNpw7NuIGRlIEROSS9DVUlUIGFyZ2VudGlub1xuICAgIGlmIChiaWxsaW5nLmRuaSAmJiAhdmFsaWRhdGVETkkoYmlsbGluZy5kbmkpKSB7XG4gICAgICBlcnJvcnMuZG5pID0gJ0ROSS9DVUlUIGludsOhbGlkby4gRm9ybWF0bzogMTIzNDU2NzggbyAyMC0xMjM0NTY3OC05J1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgbcOpdG9kbyBkZSBwYWdvXG4gICAgaWYgKCFjaGVja291dFN0YXRlLmZvcm1EYXRhLnBheW1lbnRNZXRob2QpIHtcbiAgICAgIGVycm9ycy5wYXltZW50TWV0aG9kID0gJ03DqXRvZG8gZGUgcGFnbyBlcyByZXF1ZXJpZG8nXG4gICAgfVxuXG4gICAgLy8g4pyFIE5VRVZPOiBTb2xvIHZhbGlkYXIgY2Fycml0byBzaSBOTyBlc3RhbW9zIGVuIGVsIHN0ZXAgZGUgcGFnb1xuICAgIC8vIER1cmFudGUgZWwgc3RlcCAncGF5bWVudCcsIGVsIGNhcnJpdG8geWEgc2UgdmFjacOzIHBlcm8gZXMgbm9ybWFsXG4gICAgaWYgKGNoZWNrb3V0U3RhdGUuc3RlcCAhPT0gJ3BheW1lbnQnICYmIGNhcnRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGVycm9ycy5jYXJ0ID0gJ0VsIGNhcnJpdG8gZXN0w6EgdmFjw61vJ1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfwn5SNIHZhbGlkYXRlRXhwcmVzc0Zvcm0gLSBFcnJvcmVzIGVuY29udHJhZG9zOicsIGVycm9ycylcbiAgICBjb25zb2xlLmxvZygn8J+UjSB2YWxpZGF0ZUV4cHJlc3NGb3JtIC0gRm9ybXVsYXJpbyB2w6FsaWRvOicsIE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwKVxuXG4gICAgc2V0Q2hlY2tvdXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9ycyB9KSlcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDBcbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEsIGNoZWNrb3V0U3RhdGUuc3RlcCwgY2FydEl0ZW1zLmxlbmd0aF0pIC8vIOKchSBOVUVWTzogQWdyZWdhciBzdGVwIGEgZGVwZW5kZW5jaWFzXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRlVOQ0lPTkVTIERFIFBST0NFU0FNSUVOVE9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyBQcm9jZXNhciBjaGVja291dCBleHByZXNzXG4gIGNvbnN0IHByb2Nlc3NFeHByZXNzQ2hlY2tvdXQgPSB1c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCF2YWxpZGF0ZUV4cHJlc3NGb3JtKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIE1hcmNhciBxdWUgZWwgY2hlY2tvdXQgZXN0w6EgZW4gcHJvZ3Jlc29cbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdjaGVja291dC1pbi1wcm9ncmVzcycsICd0cnVlJylcblxuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0xvYWRpbmc6IHRydWUsIHN0ZXA6ICdwcm9jZXNzaW5nJyB9KSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGJpbGxpbmcgfSA9IGNoZWNrb3V0U3RhdGUuZm9ybURhdGFcbiAgICAgIGNvbnN0IHNoaXBwaW5nQ29zdCA9IGNhbGN1bGF0ZVNoaXBwaW5nQ29zdCgpXG5cbiAgICAgIC8vIFNhbml0aXphciB0ZWzDqWZvbm8gcGFyYSBlbCBiYWNrZW5kIChzb2xvIG7Dum1lcm9zLCBmb3JtYXRvIGFyZ2VudGlubyAxMC0xMSBkw61naXRvcylcbiAgICAgIGxldCBzYW5pdGl6ZWRQaG9uZSA9IGJpbGxpbmcucGhvbmU/LnJlcGxhY2UoL1xcRC9nLCAnJykgfHwgJydcblxuICAgICAgLy8gU2kgZW1waWV6YSBjb24gNTQgKGPDs2RpZ28gZGUgQXJnZW50aW5hKSwgcmVtb3ZlciBlbCBjw7NkaWdvIGRlIHBhw61zXG4gICAgICBpZiAoc2FuaXRpemVkUGhvbmUuc3RhcnRzV2l0aCgnNTQnKSAmJiBzYW5pdGl6ZWRQaG9uZS5sZW5ndGggPiAxMSkge1xuICAgICAgICBzYW5pdGl6ZWRQaG9uZSA9IHNhbml0aXplZFBob25lLnN1YnN0cmluZygyKSAvLyBSZW1vdmVyIFwiNTRcIlxuICAgICAgfVxuXG4gICAgICAvLyBTaSBlbXBpZXphIGNvbiA5IChjw7NkaWdvIGRlIGNlbHVsYXIpLCBtYW50ZW5lcmxvIHBhcmEgcXVlIHNlYSAxMSBkw61naXRvc1xuICAgICAgLy8gU2kgbm8gZW1waWV6YSBjb24gOSwgZGViZXLDrWEgc2VyIDEwIGTDrWdpdG9zICh0ZWzDqWZvbm8gZmlqbylcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gcHJvY2Vzc0V4cHJlc3NDaGVja291dCAtIFRlbMOpZm9ubyBvcmlnaW5hbDonLCBiaWxsaW5nLnBob25lKVxuICAgICAgY29uc29sZS5sb2coJ/CflI0gcHJvY2Vzc0V4cHJlc3NDaGVja291dCAtIFRlbMOpZm9ubyBzYW5pdGl6YWRvOicsIHNhbml0aXplZFBob25lKVxuICAgICAgY29uc29sZS5sb2coJ/CflI0gcHJvY2Vzc0V4cHJlc3NDaGVja291dCAtIExvbmdpdHVkIGRlbCB0ZWzDqWZvbm86Jywgc2FuaXRpemVkUGhvbmUubGVuZ3RoKVxuXG4gICAgICAvLyBQcmVwYXJhciBkYXRvcyBwYXJhIGxhIEFQSSAoRXhwcmVzcyBDaGVja291dCAtIGNhbXBvcyBzaW1wbGlmaWNhZG9zKVxuICAgICAgY29uc3QgcGF5bG9hZDogQ3JlYXRlUHJlZmVyZW5jZVBheWxvYWQgPSB7XG4gICAgICAgIGl0ZW1zOiBjYXJ0SXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGl0ZW0uaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICBuYW1lOiBpdGVtLnRpdGxlLFxuICAgICAgICAgIHByaWNlOiBpdGVtLmRpc2NvdW50ZWRQcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICBpbWFnZTogaXRlbS5pbWdzPy5wcmV2aWV3cz8uWzBdIHx8ICcnLFxuICAgICAgICB9KSksXG4gICAgICAgIHBheWVyOiB7XG4gICAgICAgICAgbmFtZTogYmlsbGluZy5maXJzdE5hbWUgfHwgJ0NsaWVudGUnLCAvLyBWYWxvciBwb3IgZGVmZWN0byBwYXJhIGV4cHJlc3MgY2hlY2tvdXRcbiAgICAgICAgICBzdXJuYW1lOiBiaWxsaW5nLmxhc3ROYW1lIHx8ICdFeHByZXNzJywgLy8gVmFsb3IgcG9yIGRlZmVjdG8gcGFyYSBleHByZXNzIGNoZWNrb3V0XG4gICAgICAgICAgZW1haWw6IGJpbGxpbmcuZW1haWwsXG4gICAgICAgICAgcGhvbmU6IHNhbml0aXplZFBob25lLCAvLyBUZWzDqWZvbm8gc2FuaXRpemFkbyAoc29sbyBuw7ptZXJvcylcbiAgICAgICAgfSxcbiAgICAgICAgc2hpcHBpbmc6XG4gICAgICAgICAgc2hpcHBpbmdDb3N0ID4gMFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgY29zdDogc2hpcHBpbmdDb3N0LFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgIHN0cmVldF9uYW1lOiBiaWxsaW5nLnN0cmVldEFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICBzdHJlZXRfbnVtYmVyOiAnMTIzJywgLy8gTsO6bWVybyBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgemlwX2NvZGU6IGJpbGxpbmcuemlwQ29kZSB8fCAnNTAwMCcsIC8vIEPDs2RpZ28gcG9zdGFsIHBvciBkZWZlY3RvIHBhcmEgQ8OzcmRvYmFcbiAgICAgICAgICAgICAgICAgIGNpdHlfbmFtZTogYmlsbGluZy5jaXR5IHx8ICdDw7NyZG9iYScsXG4gICAgICAgICAgICAgICAgICBzdGF0ZV9uYW1lOiBiaWxsaW5nLnN0YXRlIHx8ICdDw7NyZG9iYScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGV4dGVybmFsX3JlZmVyZW5jZTogYGV4cHJlc3NfY2hlY2tvdXRfJHtEYXRlLm5vdygpfWAsXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIHByb2Nlc3NFeHByZXNzQ2hlY2tvdXQgLSBQYXlsb2FkIGVudmlhZG86JywgcGF5bG9hZClcblxuICAgICAgLy8gTGxhbWFyIGEgbGEgQVBJXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3BheW1lbnRzL2NyZWF0ZS1wcmVmZXJlbmNlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0OiBBcGlSZXNwb25zZTxQYXltZW50UHJlZmVyZW5jZVJlc3BvbnNlPiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0Vycm9yIHByb2Nlc2FuZG8gZWwgcGFnbycpXG4gICAgICB9XG5cbiAgICAgIC8vIOKchSBTT0xVQ0nDk04gRklOQUw6IFJlZGlyZWNjacOzbiBkaXJlY3RhIGEgTWVyY2Fkb1BhZ29cbiAgICAgIC8vIEVzdG8gZXZpdGEgZWwgcHJvYmxlbWEgZGUgaG9va3MgY29uIGVsIFdhbGxldCBCcmljayBlbWJlYmlkb1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgUmVkaXJpZ2llbmRvIGRpcmVjdGFtZW50ZSBhIE1lcmNhZG9QYWdvOicsIHJlc3VsdC5kYXRhLmluaXRfcG9pbnQpXG5cbiAgICAgIC8vIENhbWJpYXIgYSBlc3RhZG8gZGUgcmVkaXJlY2Npw7NuIGlubWVkaWF0YW1lbnRlXG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgc3RlcDogJ3JlZGlyZWN0JyxcbiAgICAgICAgcHJlZmVyZW5jZUlkOiByZXN1bHQuZGF0YS5wcmVmZXJlbmNlX2lkLFxuICAgICAgICBpbml0UG9pbnQ6IHJlc3VsdC5kYXRhLmluaXRfcG9pbnQsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICB9KSlcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgcHJvY2VzYW5kbyBlbCBwYWdvJ1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gZXhwcmVzcyBjaGVja291dDonLCBlcnJvcilcbiAgICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBzdGVwOiAnZm9ybScsXG4gICAgICAgIGVycm9yczogeyBnZW5lcmFsOiBlcnJvck1lc3NhZ2UgfSxcbiAgICAgIH0pKVxuICAgIH1cbiAgfSwgW2NoZWNrb3V0U3RhdGUuZm9ybURhdGEsIGNhcnRJdGVtcywgdmFsaWRhdGVFeHByZXNzRm9ybSwgY2FsY3VsYXRlU2hpcHBpbmdDb3N0LCBkaXNwYXRjaF0pXG5cbiAgLy8gUHJvY2VzYXIgY2hlY2tvdXQgY29tcGxldG9cbiAgY29uc3QgcHJvY2Vzc0NoZWNrb3V0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGlmICghdmFsaWRhdGVGb3JtKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIE1hcmNhciBxdWUgZWwgY2hlY2tvdXQgZXN0w6EgZW4gcHJvZ3Jlc29cbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdjaGVja291dC1pbi1wcm9ncmVzcycsICd0cnVlJylcblxuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0xvYWRpbmc6IHRydWUsIHN0ZXA6ICdwcm9jZXNzaW5nJyB9KSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGJpbGxpbmcsIHNoaXBwaW5nIH0gPSBjaGVja291dFN0YXRlLmZvcm1EYXRhXG4gICAgICBjb25zdCBzaGlwcGluZ0Nvc3QgPSBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QoKVxuXG4gICAgICAvLyBQcmVwYXJhciBkYXRvcyBwYXJhIGxhIEFQSVxuICAgICAgY29uc3QgcGF5bG9hZDogQ3JlYXRlUHJlZmVyZW5jZVBheWxvYWQgPSB7XG4gICAgICAgIGl0ZW1zOiBjYXJ0SXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGl0ZW0uaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICBuYW1lOiBpdGVtLnRpdGxlLFxuICAgICAgICAgIHByaWNlOiBpdGVtLmRpc2NvdW50ZWRQcmljZSxcbiAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICBpbWFnZTogaXRlbS5pbWdzPy5wcmV2aWV3cz8uWzBdIHx8ICcnLFxuICAgICAgICB9KSksXG4gICAgICAgIHBheWVyOiB7XG4gICAgICAgICAgbmFtZTogYmlsbGluZy5maXJzdE5hbWUsXG4gICAgICAgICAgc3VybmFtZTogYmlsbGluZy5sYXN0TmFtZSxcbiAgICAgICAgICBlbWFpbDogYmlsbGluZy5lbWFpbCxcbiAgICAgICAgICBwaG9uZTogYmlsbGluZy5waG9uZSxcbiAgICAgICAgfSxcbiAgICAgICAgc2hpcHBpbmc6XG4gICAgICAgICAgc2hpcHBpbmdDb3N0ID4gMFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgY29zdDogc2hpcHBpbmdDb3N0LFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgIHN0cmVldF9uYW1lOiBzaGlwcGluZy5kaWZmZXJlbnRBZGRyZXNzXG4gICAgICAgICAgICAgICAgICAgID8gc2hpcHBpbmcuc3RyZWV0QWRkcmVzcyFcbiAgICAgICAgICAgICAgICAgICAgOiBiaWxsaW5nLnN0cmVldEFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICBzdHJlZXRfbnVtYmVyOiAnMTIzJywgLy8gTsO6bWVybyBwb3IgZGVmZWN0byBjb21vIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgemlwX2NvZGU6IHNoaXBwaW5nLmRpZmZlcmVudEFkZHJlc3MgPyBzaGlwcGluZy56aXBDb2RlISA6IGJpbGxpbmcuemlwQ29kZSxcbiAgICAgICAgICAgICAgICAgIGNpdHlfbmFtZTogc2hpcHBpbmcuZGlmZmVyZW50QWRkcmVzcyA/IHNoaXBwaW5nLmNpdHkhIDogYmlsbGluZy5jaXR5LFxuICAgICAgICAgICAgICAgICAgc3RhdGVfbmFtZTogc2hpcHBpbmcuZGlmZmVyZW50QWRkcmVzcyA/IHNoaXBwaW5nLnN0YXRlISA6IGJpbGxpbmcuc3RhdGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGV4dGVybmFsX3JlZmVyZW5jZTogYGNoZWNrb3V0XyR7RGF0ZS5ub3coKX1gLFxuICAgICAgfVxuXG4gICAgICAvLyBMbGFtYXIgYSBsYSBBUElcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvcGF5bWVudHMvY3JlYXRlLXByZWZlcmVuY2UnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZXN1bHQ6IEFwaVJlc3BvbnNlPFBheW1lbnRQcmVmZXJlbmNlUmVzcG9uc2U+ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnRXJyb3IgcHJvY2VzYW5kbyBlbCBwYWdvJylcbiAgICAgIH1cblxuICAgICAgLy8gUHJvY2VzYXIgcmVzdWx0YWRvIGV4aXRvc28gLSBtb3N0cmFyIHBhc28gZGUgcGFnbyBtYW51YWxcbiAgICAgIC8vIE5PVEE6IE5vIGxpbXBpYXIgZWwgY2Fycml0byBhcXXDrSwgc2UgbGltcGlhcsOhIGN1YW5kbyBlbCBwYWdvIHNlIGNvbXBsZXRlIGV4aXRvc2FtZW50ZVxuXG4gICAgICAvLyDinIUgQ09SUkVHSURPOiBJciBkaXJlY3RhbWVudGUgYSByZWRpcmVjdCBwYXJhIGV2aXRhciBlcnJvciBkZSBob29rcyBjb24gTWVyY2Fkb1BhZ29XYWxsZXRcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJlZGlyaWdpZW5kbyBkaXJlY3RhbWVudGUgYSBNZXJjYWRvUGFnbzonLCByZXN1bHQuZGF0YS5pbml0X3BvaW50KVxuXG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgc3RlcDogJ3JlZGlyZWN0JyxcbiAgICAgICAgcHJlZmVyZW5jZUlkOiByZXN1bHQuZGF0YS5wcmVmZXJlbmNlX2lkLFxuICAgICAgICBpbml0UG9pbnQ6IHJlc3VsdC5kYXRhLmluaXRfcG9pbnQsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICB9KSlcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgcHJvY2VzYW5kbyBlbCBwYWdvJ1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gY2hlY2tvdXQ6JywgZXJyb3IpXG4gICAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgc3RlcDogJ2Zvcm0nLFxuICAgICAgICBlcnJvcnM6IHsgZ2VuZXJhbDogZXJyb3JNZXNzYWdlIH0sXG4gICAgICB9KSlcbiAgICB9XG4gIH0sIFtjaGVja291dFN0YXRlLmZvcm1EYXRhLCBjYXJ0SXRlbXMsIHZhbGlkYXRlRm9ybSwgY2FsY3VsYXRlU2hpcHBpbmdDb3N0LCBkaXNwYXRjaF0pXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQ0FMTEJBQ0tTIFBBUkEgV0FMTEVUIEJSSUNLXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGhhbmRsZVdhbGxldFJlYWR5ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdXYWxsZXQgQnJpY2sgZXN0w6EgbGlzdG8nKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVXYWxsZXRFcnJvciA9IHVzZUNhbGxiYWNrKChlcnJvcjogYW55KSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gV2FsbGV0IEJyaWNrOicsIGVycm9yKVxuICAgIHNldENoZWNrb3V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGVycm9yczogeyBwYXltZW50OiBlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBlbiBlbCBzaXN0ZW1hIGRlIHBhZ29zJyB9LFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICB9KSlcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlV2FsbGV0U3VibWl0ID0gdXNlQ2FsbGJhY2soKGRhdGE6IGFueSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5KzIFdhbGxldCBTdWJtaXQgLSBQYWdvIGVudmlhZG8gZGVzZGUgV2FsbGV0IEJyaWNrOicsIGRhdGEpXG4gICAgY29uc29sZS5sb2coJ/CfkrMgV2FsbGV0IFN1Ym1pdCAtIENhbWJpYW5kbyBhIHN0ZXAgcmVkaXJlY3QnKVxuXG4gICAgLy8gSU1QT1JUQU5URTogTk8gbGltcGlhciBlbCBjYXJyaXRvIGFxdcOtXG4gICAgLy8gRWwgY2Fycml0byBzZSBsaW1waWFyw6Egc29sbyBjdWFuZG8gZWwgcGFnbyBzZWEgY29uZmlybWFkbyBjb21vIGV4aXRvc29cbiAgICBzZXRDaGVja291dFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBzdGVwOiAncmVkaXJlY3QnLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICB9KSlcbiAgfSwgW10pXG5cbiAgLy8gTWVtb3JpemFyIHZhbG9yZXMgY2FsY3VsYWRvcyBwYXJhIGV2aXRhciByZWN1cnNpw7NuIGluZmluaXRhXG4gIGNvbnN0IG1lbW9pemVkU2hpcHBpbmdDb3N0ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvc3QgPSBjYWxjdWxhdGVTaGlwcGluZ0Nvc3QoKVxuICAgICAgcmV0dXJuIHR5cGVvZiBjb3N0ID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oY29zdCkgPyBjb3N0IDogMFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgY2FsY3VsYXRpbmcgc2hpcHBpbmdDb3N0OicsIGVycm9yKVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gIH0sIFtjYWxjdWxhdGVTaGlwcGluZ0Nvc3RdKVxuXG4gIGNvbnN0IG1lbW9pemVkRGlzY291bnQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGlzYyA9IGNhbGN1bGF0ZURpc2NvdW50KClcbiAgICAgIHJldHVybiB0eXBlb2YgZGlzYyA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGRpc2MpID8gZGlzYyA6IDBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNhbGN1bGF0aW5nIGRpc2NvdW50OicsIGVycm9yKVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gIH0sIFtjYWxjdWxhdGVEaXNjb3VudF0pXG5cbiAgY29uc3QgbWVtb2l6ZWRGaW5hbFRvdGFsID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRvdGFsID0gY2FsY3VsYXRlVG90YWwoKVxuICAgICAgcmV0dXJuIHR5cGVvZiB0b3RhbCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHRvdGFsKSA/IHRvdGFsIDogMFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgY2FsY3VsYXRpbmcgZmluYWxUb3RhbDonLCBlcnJvcilcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICB9LCBbY2FsY3VsYXRlVG90YWxdKVxuXG4gIHJldHVybiB7XG4gICAgLy8gRXN0YWRvXG4gICAgZm9ybURhdGE6IGNoZWNrb3V0U3RhdGUuZm9ybURhdGEsXG4gICAgaXNMb2FkaW5nOiBjaGVja291dFN0YXRlLmlzTG9hZGluZyxcbiAgICBlcnJvcnM6IGNoZWNrb3V0U3RhdGUuZXJyb3JzLFxuICAgIHN0ZXA6IGNoZWNrb3V0U3RhdGUuc3RlcCxcblxuICAgIC8vIERhdG9zIHBhcmEgV2FsbGV0IEJyaWNrXG4gICAgcHJlZmVyZW5jZUlkOiBjaGVja291dFN0YXRlLnByZWZlcmVuY2VJZCxcbiAgICBpbml0UG9pbnQ6IGNoZWNrb3V0U3RhdGUuaW5pdFBvaW50LFxuXG4gICAgLy8gRGF0b3MgY2FsY3VsYWRvc1xuICAgIGNhcnRJdGVtcyxcbiAgICB0b3RhbFByaWNlLFxuICAgIHNoaXBwaW5nQ29zdDogbWVtb2l6ZWRTaGlwcGluZ0Nvc3QsXG4gICAgZGlzY291bnQ6IG1lbW9pemVkRGlzY291bnQsXG4gICAgZmluYWxUb3RhbDogbWVtb2l6ZWRGaW5hbFRvdGFsLFxuXG4gICAgLy8gQ3Vwb25lc1xuICAgIGFwcGxpZWRDb3Vwb24sXG4gICAgYXBwbHlDb3Vwb24sXG5cbiAgICAvLyBBY2Npb25lc1xuICAgIHVwZGF0ZUZvcm1EYXRhLFxuICAgIHVwZGF0ZUJpbGxpbmdEYXRhLFxuICAgIHVwZGF0ZVNoaXBwaW5nRGF0YSxcbiAgICB2YWxpZGF0ZUZvcm0sXG4gICAgdmFsaWRhdGVFeHByZXNzRm9ybSxcbiAgICBwcm9jZXNzQ2hlY2tvdXQsXG4gICAgcHJvY2Vzc0V4cHJlc3NDaGVja291dCxcblxuICAgIC8vIENhbGxiYWNrcyBwYXJhIFdhbGxldCBCcmlja1xuICAgIGhhbmRsZVdhbGxldFJlYWR5LFxuICAgIGhhbmRsZVdhbGxldEVycm9yLFxuICAgIGhhbmRsZVdhbGxldFN1Ym1pdCxcbiAgfVxufVxuIl0sIm5hbWVzIjpbInVzZUNoZWNrb3V0IiwiaW5pdGlhbEZvcm1EYXRhIiwiYmlsbGluZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZG5pIiwiY29tcGFueU5hbWUiLCJjb3VudHJ5Iiwic3RyZWV0QWRkcmVzcyIsImFwYXJ0bWVudCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJwaG9uZSIsImVtYWlsIiwib3JkZXJOb3RlcyIsIm9ic2VydmF0aW9ucyIsInNoaXBwaW5nIiwiZGlmZmVyZW50QWRkcmVzcyIsInBheW1lbnRNZXRob2QiLCJzaGlwcGluZ01ldGhvZCIsImNvdXBvbkNvZGUiLCJkaXNwYXRjaCIsInVzZUFwcERpc3BhdGNoIiwiY2FydEl0ZW1zIiwidXNlQXBwU2VsZWN0b3IiLCJzZWxlY3RDYXJ0SXRlbXMiLCJ0b3RhbFByaWNlIiwic2VsZWN0VG90YWxQcmljZSIsInVzZXIiLCJpc0xvYWRlZCIsInVzZUF1dGgiLCJjaGVja291dFN0YXRlIiwic2V0Q2hlY2tvdXRTdGF0ZSIsInVzZVN0YXRlIiwiZm9ybURhdGEiLCJpc0xvYWRpbmciLCJlcnJvcnMiLCJzdGVwIiwicHJlZmVyZW5jZUlkIiwidW5kZWZpbmVkIiwiaW5pdFBvaW50IiwiYXBwbGllZENvdXBvbiIsInNldEFwcGxpZWRDb3Vwb24iLCJ1c2VFZmZlY3QiLCJ1c2VyRW1haWwiLCJmdWxsTmFtZSIsIm5hbWUiLCJsYXN0TmFtZVBhcnRzIiwic3BsaXQiLCJqb2luIiwicHJldiIsImN1cnJlbnRCaWxsaW5nIiwic2hvdWxkVXBkYXRlRmlyc3ROYW1lIiwic2hvdWxkVXBkYXRlTGFzdE5hbWUiLCJzaG91bGRVcGRhdGVFbWFpbCIsImNhbGN1bGF0ZVNoaXBwaW5nQ29zdCIsInVzZUNhbGxiYWNrIiwiY2FsY3VsYXRlRGlzY291bnQiLCJ0eXBlIiwiTWF0aCIsInJvdW5kIiwiZGlzY291bnQiLCJjYWxjdWxhdGVUb3RhbCIsInRvdGFsIiwibWF4IiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUZvcm1EYXRhIiwidXBkYXRlcyIsInVwZGF0ZUJpbGxpbmdEYXRhIiwiYmlsbGluZ0RhdGEiLCJ1cGRhdGVTaGlwcGluZ0RhdGEiLCJzaGlwcGluZ0RhdGEiLCJhcHBseUNvdXBvbiIsInRyaW0iLCJjb3Vwb24iLCJ2YWxpZENvdXBvbnMiLCJERVNDVUVOVE8xMCIsIkVOVklPR1JBVElTIiwiQklFTlZFTklETyIsInRvVXBwZXJDYXNlIiwiY29kZSIsImVycm9yIiwidmFsaWRhdGVGb3JtIiwidmFsaWRhdGVFbWFpbCIsInZhbGlkYXRlUGhvbmVOdW1iZXIiLCJsZW5ndGgiLCJ0ZXN0Iiwic2hpcHBpbmdTdHJlZXRBZGRyZXNzIiwic2hpcHBpbmdDaXR5Iiwic2hpcHBpbmdTdGF0ZSIsInNoaXBwaW5nWmlwQ29kZSIsImNhcnQiLCJPYmplY3QiLCJrZXlzIiwidmFsaWRhdGVFeHByZXNzRm9ybSIsImNhcnRJdGVtc0xlbmd0aCIsImN1cnJlbnRTdGVwIiwidmFsaWRhdGVETkkiLCJwcm9jZXNzRXhwcmVzc0NoZWNrb3V0Iiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwic2hpcHBpbmdDb3N0Iiwic2FuaXRpemVkUGhvbmUiLCJyZXBsYWNlIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsInBheWxvYWQiLCJpdGVtcyIsIm1hcCIsIml0ZW0iLCJpZCIsInRvU3RyaW5nIiwidGl0bGUiLCJwcmljZSIsImRpc2NvdW50ZWRQcmljZSIsInF1YW50aXR5IiwiaW1hZ2UiLCJpbWdzIiwicHJldmlld3MiLCJwYXllciIsInN1cm5hbWUiLCJjb3N0IiwiYWRkcmVzcyIsInN0cmVldF9uYW1lIiwic3RyZWV0X251bWJlciIsInppcF9jb2RlIiwiY2l0eV9uYW1lIiwic3RhdGVfbmFtZSIsImV4dGVybmFsX3JlZmVyZW5jZSIsIkRhdGUiLCJub3ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJFcnJvciIsImRhdGEiLCJpbml0X3BvaW50IiwicHJlZmVyZW5jZV9pZCIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJnZW5lcmFsIiwicHJvY2Vzc0NoZWNrb3V0IiwiaGFuZGxlV2FsbGV0UmVhZHkiLCJoYW5kbGVXYWxsZXRFcnJvciIsInBheW1lbnQiLCJoYW5kbGVXYWxsZXRTdWJtaXQiLCJtZW1vaXplZFNoaXBwaW5nQ29zdCIsInVzZU1lbW8iLCJpc05hTiIsIm1lbW9pemVkRGlzY291bnQiLCJkaXNjIiwibWVtb2l6ZWRGaW5hbFRvdGFsIiwiZmluYWxUb3RhbCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQTRDYUE7OztlQUFBQTs7O3VCQTFDNkM7dUJBQ1g7MkJBS3hDO3lCQVFpQjttQ0FDd0M7QUFFaEUsTUFBTUMsa0JBQW9DO0lBQ3hDQyxTQUFTO1FBQ1BDLFdBQVc7UUFDWEMsVUFBVTtRQUNWQyxLQUFLO1FBQ0xDLGFBQWE7UUFDYkMsU0FBUztRQUNUQyxlQUFlO1FBQ2ZDLFdBQVc7UUFDWEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFlBQVk7UUFDWkMsY0FBYztJQUNoQjtJQUNBQyxVQUFVO1FBQ1JDLGtCQUFrQjtJQUNwQjtJQUNBQyxlQUFlO0lBQ2ZDLGdCQUFnQjtJQUNoQkMsWUFBWTtBQUNkO0FBRU8sTUFBTXJCLGNBQWM7SUFDekIsTUFBTXNCLFdBQVdDLElBQUFBLHFCQUFjO0lBQy9CLE1BQU1DLFlBQVlDLElBQUFBLHFCQUFjLEVBQUNDLDBCQUFlO0lBQ2hELE1BQU1DLGFBQWFGLElBQUFBLHFCQUFjLEVBQUNHLDJCQUFnQjtJQUNsRCxNQUFNLEVBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFLEdBQUdDLElBQUFBLGdCQUFPO0lBRWxDLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUdDLElBQUFBLGVBQVEsRUFBZ0I7UUFDaEVDLFVBQVVsQztRQUNWbUMsV0FBVztRQUNYQyxRQUFRLENBQUM7UUFDVEMsTUFBTTtRQUNOQyxjQUFjQztRQUNkQyxXQUFXRDtJQUNiO0lBRUEsc0JBQXNCO0lBQ3RCLE1BQU0sQ0FBQ0UsZUFBZUMsaUJBQWlCLEdBQUdULElB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