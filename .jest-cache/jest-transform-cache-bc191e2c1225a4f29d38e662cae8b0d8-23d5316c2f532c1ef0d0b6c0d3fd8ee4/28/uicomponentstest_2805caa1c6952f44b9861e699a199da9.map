{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\optimization\\ui-components.test.tsx"],"sourcesContent":["// ===================================\r\n// TESTS DE OPTIMIZACIÓN UI COMPONENTS\r\n// Tests para verificar optimizaciones de performance\r\n// ===================================\r\n\r\nimport React from 'react';\r\nimport { render, screen } from '@testing-library/react';\r\nimport { ProductCard } from '@/components/ui/card';\r\nimport { SearchAutocompleteIntegrated } from '@/components/ui/SearchAutocompleteIntegrated';\r\n\r\n// Mock de hooks\r\njest.mock('@/hooks/useSearchOptimized', () => ({\r\n  useSearchOptimized: () => ({\r\n    searchTerm: '',\r\n    suggestions: [],\r\n    isLoading: false,\r\n    error: null,\r\n    handleSearch: jest.fn(),\r\n    handleSuggestionSelect: jest.fn(),\r\n    searchWithDebounce: jest.fn(),\r\n    handleClear: jest.fn(),\r\n  }),\r\n}));\r\n\r\ndescribe('UI Components Optimization', () => {\r\n  describe('ProductCard Optimization', () => {\r\n    const mockProps = {\r\n      title: 'Test Product',\r\n      price: 100,\r\n      image: '/test-image.jpg',\r\n      productId: '1',\r\n    };\r\n\r\n    it('debe renderizar ProductCard correctamente', () => {\r\n      render(<ProductCard {...mockProps} />);\r\n      \r\n      expect(screen.getByText('Test Product')).toBeInTheDocument();\r\n    });\r\n\r\n    it('debe ser memoizado (React.memo)', () => {\r\n      // Verificar que el componente tiene displayName (indicativo de memo)\r\n      expect(ProductCard.displayName).toBe('ProductCard');\r\n    });\r\n\r\n    it('debe manejar props opcionales sin errores', () => {\r\n      const minimalProps = {\r\n        title: 'Minimal Product',\r\n        price: 50,\r\n        productId: '2',\r\n      };\r\n\r\n      expect(() => {\r\n        render(<ProductCard {...minimalProps} />);\r\n      }).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('SearchAutocompleteIntegrated Optimization', () => {\r\n    it('debe renderizar SearchAutocompleteIntegrated correctamente', () => {\r\n      render(<SearchAutocompleteIntegrated />);\r\n      \r\n      // Verificar que el componente se renderiza sin errores\r\n      const searchInput = screen.getByRole('searchbox');\r\n      expect(searchInput).toBeInTheDocument();\r\n    });\r\n\r\n    it('debe ser memoizado (React.memo)', () => {\r\n      // Verificar que el componente tiene displayName (indicativo de memo)\r\n      expect(SearchAutocompleteIntegrated.displayName).toBe('SearchAutocompleteIntegrated');\r\n    });\r\n\r\n    it('debe manejar props vacías sin errores', () => {\r\n      expect(() => {\r\n        render(<SearchAutocompleteIntegrated />);\r\n      }).not.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('Performance Optimizations', () => {\r\n    it('debe cargar componentes sin errores de performance', () => {\r\n      const startTime = performance.now();\r\n      \r\n      render(\r\n        <div>\r\n          <ProductCard\r\n            title=\"Performance Test\"\r\n            price={100}\r\n            productId=\"perf-1\"\r\n          />\r\n          <SearchAutocompleteIntegrated />\r\n        </div>\r\n      );\r\n      \r\n      const endTime = performance.now();\r\n      const renderTime = endTime - startTime;\r\n      \r\n      // El render no debería tomar más de 100ms\r\n      expect(renderTime).toBeLessThan(100);\r\n    });\r\n\r\n    it('debe manejar múltiples instancias eficientemente', () => {\r\n      const products = Array.from({ length: 10 }, (_, i) => ({\r\n        title: `Product ${i}`,\r\n        price: 100 + i,\r\n        productId: `prod-${i}`,\r\n      }));\r\n\r\n      const startTime = performance.now();\r\n      \r\n      render(\r\n        <div>\r\n          {products.map((product) => (\r\n            <ProductCard key={product.productId} {...product} />\r\n          ))}\r\n        </div>\r\n      );\r\n      \r\n      const endTime = performance.now();\r\n      const renderTime = endTime - startTime;\r\n      \r\n      // Renderizar 10 productos no debería tomar más de 200ms\r\n      expect(renderTime).toBeLessThan(200);\r\n    });\r\n  });\r\n\r\n  describe('Accessibility Optimizations', () => {\r\n    it('debe tener atributos de accesibilidad básicos', () => {\r\n      render(\r\n        <ProductCard\r\n          title=\"Accessible Product\"\r\n          price={100}\r\n          productId=\"acc-1\"\r\n        />\r\n      );\r\n      \r\n      // Verificar que el título es accesible\r\n      expect(screen.getByText('Accessible Product')).toBeInTheDocument();\r\n    });\r\n\r\n    it('debe manejar navegación por teclado', () => {\r\n      render(<SearchAutocompleteIntegrated />);\r\n      \r\n      const searchInput = screen.getByRole('searchbox');\r\n      expect(searchInput).toHaveAttribute('type', 'search');\r\n    });\r\n  });\r\n\r\n  describe('Responsive Optimizations', () => {\r\n    it('debe renderizar sin errores en diferentes tamaños', () => {\r\n      // Simular diferentes tamaños de ventana\r\n      const originalInnerWidth = window.innerWidth;\r\n      \r\n      try {\r\n        // Mobile\r\n        Object.defineProperty(window, 'innerWidth', {\r\n          writable: true,\r\n          configurable: true,\r\n          value: 375,\r\n        });\r\n        \r\n        render(\r\n          <ProductCard\r\n            title=\"Responsive Product\"\r\n            price={100}\r\n            productId=\"resp-1\"\r\n          />\r\n        );\r\n        \r\n        expect(screen.getByText('Responsive Product')).toBeInTheDocument();\r\n        \r\n        // Desktop\r\n        Object.defineProperty(window, 'innerWidth', {\r\n          writable: true,\r\n          configurable: true,\r\n          value: 1024,\r\n        });\r\n        \r\n        render(\r\n          <ProductCard\r\n            title=\"Desktop Product\"\r\n            price={100}\r\n            productId=\"resp-2\"\r\n          />\r\n        );\r\n        \r\n        expect(screen.getByText('Desktop Product')).toBeInTheDocument();\r\n        \r\n      } finally {\r\n        // Restaurar valor original\r\n        Object.defineProperty(window, 'innerWidth', {\r\n          writable: true,\r\n          configurable: true,\r\n          value: originalInnerWidth,\r\n        });\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["jest","mock","useSearchOptimized","searchTerm","suggestions","isLoading","error","handleSearch","fn","handleSuggestionSelect","searchWithDebounce","handleClear","describe","mockProps","title","price","image","productId","it","render","ProductCard","expect","screen","getByText","toBeInTheDocument","displayName","toBe","minimalProps","not","toThrow","SearchAutocompleteIntegrated","searchInput","getByRole","startTime","performance","now","div","endTime","renderTime","toBeLessThan","products","Array","from","length","_","i","map","product","toHaveAttribute","originalInnerWidth","window","innerWidth","Object","defineProperty","writable","configurable","value"],"mappings":"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"}