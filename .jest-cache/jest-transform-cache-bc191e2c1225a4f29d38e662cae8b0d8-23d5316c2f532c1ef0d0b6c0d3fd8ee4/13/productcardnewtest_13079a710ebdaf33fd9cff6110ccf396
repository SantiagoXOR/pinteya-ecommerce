f5ecf6cf651a934835b4dc59c452e347
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _card = require("../card");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe('ProductCard - Nuevo Diseño', ()=>{
    const defaultProps = {
        image: '/test-image.jpg',
        title: 'Pintura Látex Premium Sherwin Williams',
        price: 2500,
        originalPrice: 3200,
        discount: '25%',
        badge: 'Llega gratis hoy',
        cta: 'Agregar al carrito',
        stock: 10,
        onAddToCart: jest.fn()
    };
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('renderiza correctamente con todas las props', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByTestId('product-card')).toBeInTheDocument();
        expect(_react1.screen.getByTestId('product-name')).toHaveTextContent('Pintura Látex Premium Sherwin Williams');
        expect(_react1.screen.getByTestId('product-price')).toBeInTheDocument();
        expect(_react1.screen.getByTestId('add-to-cart-btn')).toHaveTextContent('Agregar al carrito');
    });
    it('muestra el badge de descuento correctamente', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('25%')).toBeInTheDocument();
        expect(_react1.screen.getByText('Descuento')).toBeInTheDocument();
        expect(_react1.screen.getByText('especial')).toBeInTheDocument();
    });
    it('muestra el badge de envío', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Llega gratis hoy')).toBeInTheDocument();
    });
    it('muestra precios correctamente formateados', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('$2.500')).toBeInTheDocument();
        expect(_react1.screen.getByText('$3.200')).toBeInTheDocument();
    });
    it('no muestra precio original si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            originalPrice: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('$2.500')).toBeInTheDocument();
        expect(_react1.screen.queryByText('$3.200')).not.toBeInTheDocument();
    });
    it('no muestra badge de descuento si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            discount: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.queryByText('25%')).not.toBeInTheDocument();
        expect(_react1.screen.queryByText('Descuento especial')).not.toBeInTheDocument();
    });
    it('muestra placeholder cuando no hay imagen', ()=>{
        const props = {
            ...defaultProps,
            image: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        // Verifica que se muestra el placeholder SVG
        const placeholder = _react1.screen.getByTestId('product-card').querySelector('svg');
        expect(placeholder).toBeInTheDocument();
    });
    it('llama a onAddToCart cuando se hace click en el botón', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        _react1.fireEvent.click(button);
        expect(defaultProps.onAddToCart).toHaveBeenCalledTimes(1);
    });
    it('muestra animación de carga al agregar al carrito', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            showCartAnimation: true
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        _react1.fireEvent.click(button);
        // Debe mostrar "Agregando..." inmediatamente
        expect(_react1.screen.getByText('Agregando...')).toBeInTheDocument();
        expect(button).toBeDisabled();
        // Debe volver al estado original después de 1 segundo
        await (0, _react1.waitFor)(()=>{
            expect(_react1.screen.getByText('Agregar al carrito')).toBeInTheDocument();
            expect(button).not.toBeDisabled();
        }, {
            timeout: 1500
        });
    });
    it('deshabilita el botón cuando stock es 0', ()=>{
        const props = {
            ...defaultProps,
            stock: 0
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        expect(button).toBeDisabled();
        expect(button).toHaveTextContent('Sin stock');
    });
    it('permite personalizar el texto del CTA', ()=>{
        const props = {
            ...defaultProps,
            cta: 'Comprar ahora'
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('Comprar ahora')).toBeInTheDocument();
    });
    it('usa CTA por defecto si no se proporciona', ()=>{
        const props = {
            ...defaultProps,
            cta: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        expect(_react1.screen.getByText('Agregar al carrito')).toBeInTheDocument();
    });
    it('renderiza link al producto si se proporciona productId', ()=>{
        const props = {
            ...defaultProps,
            productId: '123'
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        const link = _react1.screen.getByRole('link');
        expect(link).toHaveAttribute('href', '/shop-details/123');
    });
    it('no renderiza link si no se proporciona productId', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        expect(_react1.screen.queryByRole('link')).not.toBeInTheDocument();
    });
    it('aplica clases CSS correctas para el diseño', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveClass('bg-white');
        expect(card).toHaveClass('rounded-xl'); // Mobile-first: rounded-xl
        expect(card).toHaveClass('md:rounded-2xl'); // Desktop: rounded-2xl
        expect(card).toHaveClass('md:max-w-[300px]'); // Desktop: max-width
    });
    it('muestra ícono de carrito en el botón CTA', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps
        }));
        const button = _react1.screen.getByTestId('add-to-cart-btn');
        const icon = button.querySelector('svg');
        expect(icon).toBeInTheDocument();
    });
    it('maneja correctamente productos sin precio', ()=>{
        const props = {
            ...defaultProps,
            price: undefined
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...props
        }));
        // El ProductCard siempre muestra el precio, incluso si es undefined (muestra $0)
        expect(_react1.screen.getByTestId('product-price')).toBeInTheDocument();
        expect(_react1.screen.getByText('$0')).toBeInTheDocument();
    });
    it('renderiza children adicionales si se proporcionan', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "custom-content",
                children: "Contenido personalizado"
            })
        }));
        expect(_react1.screen.getByTestId('custom-content')).toBeInTheDocument();
        expect(_react1.screen.getByText('Contenido personalizado')).toBeInTheDocument();
    });
    it('aplica className personalizada', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            className: "custom-class"
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveClass('custom-class');
    });
    it('pasa props adicionales al componente Card', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_card.ProductCard, {
            ...defaultProps,
            "data-custom": "test-value"
        }));
        const card = _react1.screen.getByTestId('product-card');
        expect(card).toHaveAttribute('data-custom', 'test-value');
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXF9fdGVzdHNfX1xccHJvZHVjdC1jYXJkLW5ldy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB7IFByb2R1Y3RDYXJkIH0gZnJvbSAnLi4vY2FyZCdcblxuZGVzY3JpYmUoJ1Byb2R1Y3RDYXJkIC0gTnVldm8gRGlzZcOxbycsICgpID0+IHtcbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgIGltYWdlOiAnL3Rlc3QtaW1hZ2UuanBnJyxcbiAgICB0aXRsZTogJ1BpbnR1cmEgTMOhdGV4IFByZW1pdW0gU2hlcndpbiBXaWxsaWFtcycsXG4gICAgcHJpY2U6IDI1MDAsXG4gICAgb3JpZ2luYWxQcmljZTogMzIwMCxcbiAgICBkaXNjb3VudDogJzI1JScsXG4gICAgYmFkZ2U6ICdMbGVnYSBncmF0aXMgaG95JyxcbiAgICBjdGE6ICdBZ3JlZ2FyIGFsIGNhcnJpdG8nLFxuICAgIHN0b2NrOiAxMCwgLy8gQWdyZWdhbW9zIHN0b2NrIHBhcmEgcXVlIG5vIGFwYXJlemNhIFwiU2luIHN0b2NrXCJcbiAgICBvbkFkZFRvQ2FydDogamVzdC5mbigpLFxuICB9XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgfSlcblxuICBpdCgncmVuZGVyaXphIGNvcnJlY3RhbWVudGUgY29uIHRvZGFzIGxhcyBwcm9wcycsICgpID0+IHtcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvZHVjdC1jYXJkJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm9kdWN0LW5hbWUnKSkudG9IYXZlVGV4dENvbnRlbnQoXG4gICAgICAnUGludHVyYSBMw6F0ZXggUHJlbWl1bSBTaGVyd2luIFdpbGxpYW1zJ1xuICAgIClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm9kdWN0LXByaWNlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtdG8tY2FydC1idG4nKSkudG9IYXZlVGV4dENvbnRlbnQoJ0FncmVnYXIgYWwgY2Fycml0bycpXG4gIH0pXG5cbiAgaXQoJ211ZXN0cmEgZWwgYmFkZ2UgZGUgZGVzY3VlbnRvIGNvcnJlY3RhbWVudGUnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4uZGVmYXVsdFByb3BzfSAvPilcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyNSUnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdEZXNjdWVudG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdlc3BlY2lhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ211ZXN0cmEgZWwgYmFkZ2UgZGUgZW52w61vJywgKCkgPT4ge1xuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTGxlZ2EgZ3JhdGlzIGhveScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ211ZXN0cmEgcHJlY2lvcyBjb3JyZWN0YW1lbnRlIGZvcm1hdGVhZG9zJywgKCkgPT4ge1xuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDIuNTAwJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDMuMjAwJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBpdCgnbm8gbXVlc3RyYSBwcmVjaW8gb3JpZ2luYWwgc2kgbm8gc2UgcHJvcG9yY2lvbmEnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgb3JpZ2luYWxQcmljZTogdW5kZWZpbmVkIH1cbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5wcm9wc30gLz4pXG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDIuNTAwJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCckMy4yMDAnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBpdCgnbm8gbXVlc3RyYSBiYWRnZSBkZSBkZXNjdWVudG8gc2kgbm8gc2UgcHJvcG9yY2lvbmEnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgZGlzY291bnQ6IHVuZGVmaW5lZCB9XG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxuXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnMjUlJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnRGVzY3VlbnRvIGVzcGVjaWFsJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ211ZXN0cmEgcGxhY2Vob2xkZXIgY3VhbmRvIG5vIGhheSBpbWFnZW4nLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgaW1hZ2U6IHVuZGVmaW5lZCB9XG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxuXG4gICAgLy8gVmVyaWZpY2EgcXVlIHNlIG11ZXN0cmEgZWwgcGxhY2Vob2xkZXIgU1ZHXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtY2FyZCcpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXG4gICAgZXhwZWN0KHBsYWNlaG9sZGVyKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2xsYW1hIGEgb25BZGRUb0NhcnQgY3VhbmRvIHNlIGhhY2UgY2xpY2sgZW4gZWwgYm90w7NuJywgKCkgPT4ge1xuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXG5cbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC10by1jYXJ0LWJ0bicpXG4gICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbilcblxuICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25BZGRUb0NhcnQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKVxuICB9KVxuXG4gIGl0KCdtdWVzdHJhIGFuaW1hY2nDs24gZGUgY2FyZ2EgYWwgYWdyZWdhciBhbCBjYXJyaXRvJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gc2hvd0NhcnRBbmltYXRpb249e3RydWV9IC8+KVxuXG4gICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtdG8tY2FydC1idG4nKVxuICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pXG5cbiAgICAvLyBEZWJlIG1vc3RyYXIgXCJBZ3JlZ2FuZG8uLi5cIiBpbm1lZGlhdGFtZW50ZVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZ3JlZ2FuZG8uLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChidXR0b24pLnRvQmVEaXNhYmxlZCgpXG5cbiAgICAvLyBEZWJlIHZvbHZlciBhbCBlc3RhZG8gb3JpZ2luYWwgZGVzcHXDqXMgZGUgMSBzZWd1bmRvXG4gICAgYXdhaXQgd2FpdEZvcihcbiAgICAgICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FncmVnYXIgYWwgY2Fycml0bycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICAgIGV4cGVjdChidXR0b24pLm5vdC50b0JlRGlzYWJsZWQoKVxuICAgICAgfSxcbiAgICAgIHsgdGltZW91dDogMTUwMCB9XG4gICAgKVxuICB9KVxuXG4gIGl0KCdkZXNoYWJpbGl0YSBlbCBib3TDs24gY3VhbmRvIHN0b2NrIGVzIDAnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgc3RvY2s6IDAgfVxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcblxuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXRvLWNhcnQtYnRuJylcbiAgICBleHBlY3QoYnV0dG9uKS50b0JlRGlzYWJsZWQoKVxuICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCdTaW4gc3RvY2snKVxuICB9KVxuXG4gIGl0KCdwZXJtaXRlIHBlcnNvbmFsaXphciBlbCB0ZXh0byBkZWwgQ1RBJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0geyAuLi5kZWZhdWx0UHJvcHMsIGN0YTogJ0NvbXByYXIgYWhvcmEnIH1cbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5wcm9wc30gLz4pXG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29tcHJhciBhaG9yYScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ3VzYSBDVEEgcG9yIGRlZmVjdG8gc2kgbm8gc2UgcHJvcG9yY2lvbmEnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgY3RhOiB1bmRlZmluZWQgfVxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZ3JlZ2FyIGFsIGNhcnJpdG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdyZW5kZXJpemEgbGluayBhbCBwcm9kdWN0byBzaSBzZSBwcm9wb3JjaW9uYSBwcm9kdWN0SWQnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7IC4uLmRlZmF1bHRQcm9wcywgcHJvZHVjdElkOiAnMTIzJyB9XG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4ucHJvcHN9IC8+KVxuXG4gICAgY29uc3QgbGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnKVxuICAgIGV4cGVjdChsaW5rKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnL3Nob3AtZGV0YWlscy8xMjMnKVxuICB9KVxuXG4gIGl0KCdubyByZW5kZXJpemEgbGluayBzaSBubyBzZSBwcm9wb3JjaW9uYSBwcm9kdWN0SWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxQcm9kdWN0Q2FyZCB7Li4uZGVmYXVsdFByb3BzfSAvPilcblxuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVJvbGUoJ2xpbmsnKSkubm90LnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBpdCgnYXBsaWNhIGNsYXNlcyBDU1MgY29ycmVjdGFzIHBhcmEgZWwgZGlzZcOxbycsICgpID0+IHtcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuXG4gICAgY29uc3QgY2FyZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvZHVjdC1jYXJkJylcbiAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ2JnLXdoaXRlJylcbiAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ3JvdW5kZWQteGwnKSAvLyBNb2JpbGUtZmlyc3Q6IHJvdW5kZWQteGxcbiAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ21kOnJvdW5kZWQtMnhsJykgLy8gRGVza3RvcDogcm91bmRlZC0yeGxcbiAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ21kOm1heC13LVszMDBweF0nKSAvLyBEZXNrdG9wOiBtYXgtd2lkdGhcbiAgfSlcblxuICBpdCgnbXVlc3RyYSDDrWNvbm8gZGUgY2Fycml0byBlbiBlbCBib3TDs24gQ1RBJywgKCkgPT4ge1xuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLmRlZmF1bHRQcm9wc30gLz4pXG5cbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC10by1jYXJ0LWJ0bicpXG4gICAgY29uc3QgaWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKVxuICAgIGV4cGVjdChpY29uKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ21hbmVqYSBjb3JyZWN0YW1lbnRlIHByb2R1Y3RvcyBzaW4gcHJlY2lvJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0geyAuLi5kZWZhdWx0UHJvcHMsIHByaWNlOiB1bmRlZmluZWQgfVxuICAgIHJlbmRlcig8UHJvZHVjdENhcmQgey4uLnByb3BzfSAvPilcblxuICAgIC8vIEVsIFByb2R1Y3RDYXJkIHNpZW1wcmUgbXVlc3RyYSBlbCBwcmVjaW8sIGluY2x1c28gc2kgZXMgdW5kZWZpbmVkIChtdWVzdHJhICQwKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtcHJpY2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCckMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcml6YSBjaGlsZHJlbiBhZGljaW9uYWxlcyBzaSBzZSBwcm9wb3JjaW9uYW4nLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9PlxuICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdjdXN0b20tY29udGVudCc+Q29udGVuaWRvIHBlcnNvbmFsaXphZG88L2Rpdj5cbiAgICAgIDwvUHJvZHVjdENhcmQ+XG4gICAgKVxuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY3VzdG9tLWNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb250ZW5pZG8gcGVyc29uYWxpemFkbycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2FwbGljYSBjbGFzc05hbWUgcGVyc29uYWxpemFkYScsICgpID0+IHtcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IGNsYXNzTmFtZT0nY3VzdG9tLWNsYXNzJyAvPilcblxuICAgIGNvbnN0IGNhcmQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtY2FyZCcpXG4gICAgZXhwZWN0KGNhcmQpLnRvSGF2ZUNsYXNzKCdjdXN0b20tY2xhc3MnKVxuICB9KVxuXG4gIGl0KCdwYXNhIHByb3BzIGFkaWNpb25hbGVzIGFsIGNvbXBvbmVudGUgQ2FyZCcsICgpID0+IHtcbiAgICByZW5kZXIoPFByb2R1Y3RDYXJkIHsuLi5kZWZhdWx0UHJvcHN9IGRhdGEtY3VzdG9tPSd0ZXN0LXZhbHVlJyAvPilcblxuICAgIGNvbnN0IGNhcmQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb2R1Y3QtY2FyZCcpXG4gICAgZXhwZWN0KGNhcmQpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS1jdXN0b20nLCAndGVzdC12YWx1ZScpXG4gIH0pXG59KVxuIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwiZGVmYXVsdFByb3BzIiwiaW1hZ2UiLCJ0aXRsZSIsInByaWNlIiwib3JpZ2luYWxQcmljZSIsImRpc2NvdW50IiwiYmFkZ2UiLCJjdGEiLCJzdG9jayIsIm9uQWRkVG9DYXJ0IiwiamVzdCIsImZuIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIlByb2R1Y3RDYXJkIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXN0SWQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRvSGF2ZVRleHRDb250ZW50IiwiZ2V0QnlUZXh0IiwicHJvcHMiLCJ1bmRlZmluZWQiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInBsYWNlaG9sZGVyIiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbiIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwic2hvd0NhcnRBbmltYXRpb24iLCJ0b0JlRGlzYWJsZWQiLCJ3YWl0Rm9yIiwidGltZW91dCIsInByb2R1Y3RJZCIsImxpbmsiLCJnZXRCeVJvbGUiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJxdWVyeUJ5Um9sZSIsImNhcmQiLCJ0b0hhdmVDbGFzcyIsImljb24iLCJkaXYiLCJkYXRhLXRlc3RpZCIsImNsYXNzTmFtZSIsImRhdGEtY3VzdG9tIl0sIm1hcHBpbmdzIjoiOzs7Ozs4REFBa0I7d0JBQ2lDO3NCQUN2Qjs7Ozs7O0FBRTVCQSxTQUFTLDhCQUE4QjtJQUNyQyxNQUFNQyxlQUFlO1FBQ25CQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxlQUFlO1FBQ2ZDLFVBQVU7UUFDVkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsYUFBYUMsS0FBS0MsRUFBRTtJQUN0QjtJQUVBQyxXQUFXO1FBQ1RGLEtBQUtHLGFBQWE7SUFDcEI7SUFFQUMsR0FBRywrQ0FBK0M7UUFDaERDLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNDLGlCQUFXO1lBQUUsR0FBR2hCLFlBQVk7O1FBRXBDaUIsT0FBT0MsY0FBTSxDQUFDQyxXQUFXLENBQUMsaUJBQWlCQyxpQkFBaUI7UUFDNURILE9BQU9DLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDLGlCQUFpQkUsaUJBQWlCLENBQzFEO1FBRUZKLE9BQU9DLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDLGtCQUFrQkMsaUJBQWlCO1FBQzdESCxPQUFPQyxjQUFNLENBQUNDLFdBQVcs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