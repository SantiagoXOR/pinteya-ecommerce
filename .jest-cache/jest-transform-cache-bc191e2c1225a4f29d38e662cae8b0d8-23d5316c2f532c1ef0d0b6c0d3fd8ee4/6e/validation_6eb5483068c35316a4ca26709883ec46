4a6550c40b82aefb910f92011213a596
// =====================================================
// UTILIDADES: VALIDACIÓN DE DATOS
// Descripción: Funciones para validar datos de logística
// Basado en: Zod + patrones enterprise
// =====================================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get addressSchema () {
        return addressSchema;
    },
    get sanitizePhoneNumber () {
        return sanitizePhoneNumber;
    },
    get sanitizePostalCode () {
        return sanitizePostalCode;
    },
    get sanitizeString () {
        return sanitizeString;
    },
    get sanitizeTrackingNumber () {
        return sanitizeTrackingNumber;
    },
    get shipmentSchema () {
        return shipmentSchema;
    },
    get validateAddress () {
        return validateAddress;
    },
    get validateCoordinates () {
        return validateCoordinates;
    },
    get validateDNI () {
        return validateDNI;
    },
    get validateDeliveryDate () {
        return validateDeliveryDate;
    },
    get validateDimensions () {
        return validateDimensions;
    },
    get validateEmail () {
        return validateEmail;
    },
    get validatePackageValue () {
        return validatePackageValue;
    },
    get validatePhoneNumber () {
        return validatePhoneNumber;
    },
    get validatePostalCode () {
        return validatePostalCode;
    },
    get validateShipment () {
        return validateShipment;
    },
    get validateShippingCost () {
        return validateShippingCost;
    },
    get validateTrackingNumber () {
        return validateTrackingNumber;
    },
    get validateWeight () {
        return validateWeight;
    }
});
const _zod = require("zod");
const addressSchema = _zod.z.object({
    street: _zod.z.string().min(1, 'La calle es requerida'),
    number: _zod.z.string().min(1, 'El número es requerido'),
    apartment: _zod.z.string().optional(),
    neighborhood: _zod.z.string().min(1, 'El barrio es requerido'),
    city: _zod.z.string().min(1, 'La ciudad es requerida'),
    state: _zod.z.string().min(1, 'La provincia es requerida'),
    postal_code: _zod.z.string().min(4, 'El código postal debe tener al menos 4 dígitos'),
    country: _zod.z.string().default('AR'),
    latitude: _zod.z.number().optional(),
    longitude: _zod.z.number().optional(),
    reference: _zod.z.string().optional()
});
const shipmentSchema = _zod.z.object({
    tracking_number: _zod.z.string().min(1, 'El número de tracking es requerido'),
    courier_id: _zod.z.number().min(1, 'El courier es requerido'),
    service_type: _zod.z.enum([
        'standard',
        'express',
        'next_day',
        'same_day'
    ]),
    origin_address: addressSchema,
    destination_address: addressSchema,
    package_details: _zod.z.object({
        weight: _zod.z.number().min(0.1, 'El peso debe ser mayor a 0'),
        dimensions: _zod.z.object({
            length: _zod.z.number().min(1, 'El largo debe ser mayor a 0'),
            width: _zod.z.number().min(1, 'El ancho debe ser mayor a 0'),
            height: _zod.z.number().min(1, 'La altura debe ser mayor a 0')
        }),
        declared_value: _zod.z.number().min(0, 'El valor declarado debe ser mayor o igual a 0'),
        description: _zod.z.string().min(1, 'La descripción es requerida')
    }),
    estimated_delivery: _zod.z.string().optional(),
    special_instructions: _zod.z.string().optional()
});
function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}
function validatePhoneNumber(phone) {
    // Formato argentino: +54 9 351 123 4567, +54 351 123-4567, 351 123 4567, etc.
    // Limpiar el teléfono de espacios, guiones y paréntesis
    const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
    // Patrones aceptados:
    // +54351234567 (con código país)
    // +549351234567 (con código país y 9)
    // 351234567 (sin código país)
    const phoneRegex = /^(\+54(9)?)?\d{10}$|^\d{10}$/;
    return phoneRegex.test(cleanPhone) && cleanPhone.length >= 10;
}
function validateDNI(dni) {
    // Limpiar el DNI de espacios, guiones y puntos
    const cleanDNI = dni.replace(/[\s\-\.]/g, '');
    // Patrones aceptados:
    // DNI: 8 dígitos (12345678)
    // CUIT: 11 dígitos (20123456789)
    const dniRegex = /^\d{8}$/;
    const cuitRegex = /^\d{11}$/;
    if (dniRegex.test(cleanDNI)) {
        // Validar DNI (8 dígitos)
        return cleanDNI.length === 8 && parseInt(cleanDNI) > 0;
    } else if (cuitRegex.test(cleanDNI)) {
        // Validar CUIT (11 dígitos) - validación básica
        return cleanDNI.length === 11 && parseInt(cleanDNI) > 0;
    }
    return false;
}
function validatePostalCode(postalCode) {
    // Código postal argentino: 4 dígitos
    const postalCodeRegex = /^\d{4}$/;
    return postalCodeRegex.test(postalCode);
}
function validateTrackingNumber(trackingNumber) {
    // Formato general: al menos 6 caracteres alfanuméricos
    const trackingRegex = /^[A-Z0-9]{6,}$/i;
    return trackingRegex.test(trackingNumber);
}
function validateCoordinates(lat, lng) {
    return lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180;
}
function validateWeight(weight) {
    return weight > 0 && weight <= 1000 // Máximo 1000kg
    ;
}
function validateDimensions(dimensions) {
    const { length, width, height } = dimensions;
    return length > 0 && length <= 200 && // Máximo 200cm
    width > 0 && width <= 200 && height > 0 && height <= 200;
}
function validateDeliveryDate(date) {
    const deliveryDate = new Date(date);
    const today = new Date();
    const maxDate = new Date();
    maxDate.setDate(today.getDate() + 30); // Máximo 30 días
    return deliveryDate >= today && deliveryDate <= maxDate;
}
function validateShippingCost(cost) {
    return cost >= 0 && cost <= 100000 // Máximo $100,000
    ;
}
function validatePackageValue(value) {
    return value >= 0 && value <= 1000000 // Máximo $1,000,000
    ;
}
function sanitizeString(input) {
    return input.trim().replace(/[<>]/g, '');
}
function sanitizePhoneNumber(phone) {
    return phone.replace(/\D/g, '');
}
function sanitizePostalCode(postalCode) {
    return postalCode.replace(/\D/g, '').substring(0, 4);
}
function sanitizeTrackingNumber(trackingNumber) {
    return trackingNumber.toUpperCase().replace(/[^A-Z0-9]/g, '');
}
function validateAddress(address) {
    try {
        addressSchema.parse(address);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}
function validateShipment(shipment) {
    try {
        shipmentSchema.parse(shipment);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx1dGlsc1xcdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFUzogVkFMSURBQ0nDk04gREUgREFUT1Ncbi8vIERlc2NyaXBjacOzbjogRnVuY2lvbmVzIHBhcmEgdmFsaWRhciBkYXRvcyBkZSBsb2fDrXN0aWNhXG4vLyBCYXNhZG8gZW46IFpvZCArIHBhdHJvbmVzIGVudGVycHJpc2Vcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTQ0hFTUFTIERFIFZBTElEQUNJw5NOXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgYWRkcmVzc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgc3RyZWV0OiB6LnN0cmluZygpLm1pbigxLCAnTGEgY2FsbGUgZXMgcmVxdWVyaWRhJyksXG4gIG51bWJlcjogei5zdHJpbmcoKS5taW4oMSwgJ0VsIG7Dum1lcm8gZXMgcmVxdWVyaWRvJyksXG4gIGFwYXJ0bWVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBuZWlnaGJvcmhvb2Q6IHouc3RyaW5nKCkubWluKDEsICdFbCBiYXJyaW8gZXMgcmVxdWVyaWRvJyksXG4gIGNpdHk6IHouc3RyaW5nKCkubWluKDEsICdMYSBjaXVkYWQgZXMgcmVxdWVyaWRhJyksXG4gIHN0YXRlOiB6LnN0cmluZygpLm1pbigxLCAnTGEgcHJvdmluY2lhIGVzIHJlcXVlcmlkYScpLFxuICBwb3N0YWxfY29kZTogei5zdHJpbmcoKS5taW4oNCwgJ0VsIGPDs2RpZ28gcG9zdGFsIGRlYmUgdGVuZXIgYWwgbWVub3MgNCBkw61naXRvcycpLFxuICBjb3VudHJ5OiB6LnN0cmluZygpLmRlZmF1bHQoJ0FSJyksXG4gIGxhdGl0dWRlOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGxvbmdpdHVkZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICByZWZlcmVuY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBzaGlwbWVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdHJhY2tpbmdfbnVtYmVyOiB6LnN0cmluZygpLm1pbigxLCAnRWwgbsO6bWVybyBkZSB0cmFja2luZyBlcyByZXF1ZXJpZG8nKSxcbiAgY291cmllcl9pZDogei5udW1iZXIoKS5taW4oMSwgJ0VsIGNvdXJpZXIgZXMgcmVxdWVyaWRvJyksXG4gIHNlcnZpY2VfdHlwZTogei5lbnVtKFsnc3RhbmRhcmQnLCAnZXhwcmVzcycsICduZXh0X2RheScsICdzYW1lX2RheSddKSxcbiAgb3JpZ2luX2FkZHJlc3M6IGFkZHJlc3NTY2hlbWEsXG4gIGRlc3RpbmF0aW9uX2FkZHJlc3M6IGFkZHJlc3NTY2hlbWEsXG4gIHBhY2thZ2VfZGV0YWlsczogei5vYmplY3Qoe1xuICAgIHdlaWdodDogei5udW1iZXIoKS5taW4oMC4xLCAnRWwgcGVzbyBkZWJlIHNlciBtYXlvciBhIDAnKSxcbiAgICBkaW1lbnNpb25zOiB6Lm9iamVjdCh7XG4gICAgICBsZW5ndGg6IHoubnVtYmVyKCkubWluKDEsICdFbCBsYXJnbyBkZWJlIHNlciBtYXlvciBhIDAnKSxcbiAgICAgIHdpZHRoOiB6Lm51bWJlcigpLm1pbigxLCAnRWwgYW5jaG8gZGViZSBzZXIgbWF5b3IgYSAwJyksXG4gICAgICBoZWlnaHQ6IHoubnVtYmVyKCkubWluKDEsICdMYSBhbHR1cmEgZGViZSBzZXIgbWF5b3IgYSAwJyksXG4gICAgfSksXG4gICAgZGVjbGFyZWRfdmFsdWU6IHoubnVtYmVyKCkubWluKDAsICdFbCB2YWxvciBkZWNsYXJhZG8gZGViZSBzZXIgbWF5b3IgbyBpZ3VhbCBhIDAnKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5taW4oMSwgJ0xhIGRlc2NyaXBjacOzbiBlcyByZXF1ZXJpZGEnKSxcbiAgfSksXG4gIGVzdGltYXRlZF9kZWxpdmVyeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzcGVjaWFsX2luc3RydWN0aW9uczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSlcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJT05FUyBERSBWQUxJREFDScOTTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC9cbiAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGhvbmVOdW1iZXIocGhvbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBGb3JtYXRvIGFyZ2VudGlubzogKzU0IDkgMzUxIDEyMyA0NTY3LCArNTQgMzUxIDEyMy00NTY3LCAzNTEgMTIzIDQ1NjcsIGV0Yy5cbiAgLy8gTGltcGlhciBlbCB0ZWzDqWZvbm8gZGUgZXNwYWNpb3MsIGd1aW9uZXMgeSBwYXLDqW50ZXNpc1xuICBjb25zdCBjbGVhblBob25lID0gcGhvbmUucmVwbGFjZSgvW1xcc1xcLVxcKFxcKV0vZywgJycpXG5cbiAgLy8gUGF0cm9uZXMgYWNlcHRhZG9zOlxuICAvLyArNTQzNTEyMzQ1NjcgKGNvbiBjw7NkaWdvIHBhw61zKVxuICAvLyArNTQ5MzUxMjM0NTY3IChjb24gY8OzZGlnbyBwYcOtcyB5IDkpXG4gIC8vIDM1MTIzNDU2NyAoc2luIGPDs2RpZ28gcGHDrXMpXG4gIGNvbnN0IHBob25lUmVnZXggPSAvXihcXCs1NCg5KT8pP1xcZHsxMH0kfF5cXGR7MTB9JC9cblxuICByZXR1cm4gcGhvbmVSZWdleC50ZXN0KGNsZWFuUGhvbmUpICYmIGNsZWFuUGhvbmUubGVuZ3RoID49IDEwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUROSShkbmk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBMaW1waWFyIGVsIEROSSBkZSBlc3BhY2lvcywgZ3Vpb25lcyB5IHB1bnRvc1xuICBjb25zdCBjbGVhbkROSSA9IGRuaS5yZXBsYWNlKC9bXFxzXFwtXFwuXS9nLCAnJylcblxuICAvLyBQYXRyb25lcyBhY2VwdGFkb3M6XG4gIC8vIEROSTogOCBkw61naXRvcyAoMTIzNDU2NzgpXG4gIC8vIENVSVQ6IDExIGTDrWdpdG9zICgyMDEyMzQ1Njc4OSlcbiAgY29uc3QgZG5pUmVnZXggPSAvXlxcZHs4fSQvXG4gIGNvbnN0IGN1aXRSZWdleCA9IC9eXFxkezExfSQvXG5cbiAgaWYgKGRuaVJlZ2V4LnRlc3QoY2xlYW5ETkkpKSB7XG4gICAgLy8gVmFsaWRhciBETkkgKDggZMOtZ2l0b3MpXG4gICAgcmV0dXJuIGNsZWFuRE5JLmxlbmd0aCA9PT0gOCAmJiBwYXJzZUludChjbGVhbkROSSkgPiAwXG4gIH0gZWxzZSBpZiAoY3VpdFJlZ2V4LnRlc3QoY2xlYW5ETkkpKSB7XG4gICAgLy8gVmFsaWRhciBDVUlUICgxMSBkw61naXRvcykgLSB2YWxpZGFjacOzbiBiw6FzaWNhXG4gICAgcmV0dXJuIGNsZWFuRE5JLmxlbmd0aCA9PT0gMTEgJiYgcGFyc2VJbnQoY2xlYW5ETkkpID4gMFxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEPDs2RpZ28gcG9zdGFsIGFyZ2VudGlubzogNCBkw61naXRvc1xuICBjb25zdCBwb3N0YWxDb2RlUmVnZXggPSAvXlxcZHs0fSQvXG4gIHJldHVybiBwb3N0YWxDb2RlUmVnZXgudGVzdChwb3N0YWxDb2RlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUcmFja2luZ051bWJlcih0cmFja2luZ051bWJlcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEZvcm1hdG8gZ2VuZXJhbDogYWwgbWVub3MgNiBjYXJhY3RlcmVzIGFsZmFudW3DqXJpY29zXG4gIGNvbnN0IHRyYWNraW5nUmVnZXggPSAvXltBLVowLTldezYsfSQvaVxuICByZXR1cm4gdHJhY2tpbmdSZWdleC50ZXN0KHRyYWNraW5nTnVtYmVyKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb29yZGluYXRlcyhsYXQ6IG51bWJlciwgbG5nOiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGxhdCA+PSAtOTAgJiYgbGF0IDw9IDkwICYmIGxuZyA+PSAtMTgwICYmIGxuZyA8PSAxODBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlV2VpZ2h0KHdlaWdodDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiB3ZWlnaHQgPiAwICYmIHdlaWdodCA8PSAxMDAwIC8vIE3DoXhpbW8gMTAwMGtnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURpbWVuc2lvbnMoZGltZW5zaW9uczoge1xuICBsZW5ndGg6IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG4gIGhlaWdodDogbnVtYmVyXG59KTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbGVuZ3RoLCB3aWR0aCwgaGVpZ2h0IH0gPSBkaW1lbnNpb25zXG4gIHJldHVybiAoXG4gICAgbGVuZ3RoID4gMCAmJlxuICAgIGxlbmd0aCA8PSAyMDAgJiYgLy8gTcOheGltbyAyMDBjbVxuICAgIHdpZHRoID4gMCAmJlxuICAgIHdpZHRoIDw9IDIwMCAmJlxuICAgIGhlaWdodCA+IDAgJiZcbiAgICBoZWlnaHQgPD0gMjAwXG4gIClcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZBTElEQUNJT05FUyBERSBORUdPQ0lPXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVEZWxpdmVyeURhdGUoZGF0ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGRlbGl2ZXJ5RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICBjb25zdCBtYXhEYXRlID0gbmV3IERhdGUoKVxuICBtYXhEYXRlLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApIC8vIE3DoXhpbW8gMzAgZMOtYXNcblxuICByZXR1cm4gZGVsaXZlcnlEYXRlID49IHRvZGF5ICYmIGRlbGl2ZXJ5RGF0ZSA8PSBtYXhEYXRlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNoaXBwaW5nQ29zdChjb3N0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvc3QgPj0gMCAmJiBjb3N0IDw9IDEwMDAwMCAvLyBNw6F4aW1vICQxMDAsMDAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhY2thZ2VWYWx1ZSh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDEwMDAwMDAgLy8gTcOheGltbyAkMSwwMDAsMDAwXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTQU5JVElaQUNJw5NOIERFIERBVE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBpbnB1dC50cmltKCkucmVwbGFjZSgvWzw+XS9nLCAnJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUGhvbmVOdW1iZXIocGhvbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwaG9uZS5yZXBsYWNlKC9cXEQvZywgJycpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBvc3RhbENvZGUucmVwbGFjZSgvXFxEL2csICcnKS5zdWJzdHJpbmcoMCwgNClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplVHJhY2tpbmdOdW1iZXIodHJhY2tpbmdOdW1iZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0cmFja2luZ051bWJlci50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL1teQS1aMC05XS9nLCAnJylcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIERFIFZBTElEQUNJw5NOXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICBpc1ZhbGlkOiBib29sZWFuXG4gIGVycm9yczogc3RyaW5nW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQWRkcmVzcyhhZGRyZXNzOiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdHJ5IHtcbiAgICBhZGRyZXNzU2NoZW1hLnBhcnNlKGFkZHJlc3MpXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4gZXJyLm1lc3NhZ2UpLFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzOiBbJ0Vycm9yIGRlIHZhbGlkYWNpw7NuIGRlc2Nvbm9jaWRvJ10gfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNoaXBtZW50KHNoaXBtZW50OiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdHJ5IHtcbiAgICBzaGlwbWVudFNjaGVtYS5wYXJzZShzaGlwbWVudClcbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3JzOiBlcnJvci5lcnJvcnMubWFwKGVyciA9PiBlcnIubWVzc2FnZSksXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcnM6IFsnRXJyb3IgZGUgdmFsaWRhY2nDs24gZGVzY29ub2NpZG8nXSB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJhZGRyZXNzU2NoZW1hIiwic2FuaXRpemVQaG9uZU51bWJlciIsInNhbml0aXplUG9zdGFsQ29kZSIsInNhbml0aXplU3RyaW5nIiwic2FuaXRpemVUcmFja2luZ051bWJlciIsInNoaXBtZW50U2NoZW1hIiwidmFsaWRhdGVBZGRyZXNzIiwidmFsaWRhdGVDb29yZGluYXRlcyIsInZhbGlkYXRlRE5JIiwidmFsaWRhdGVEZWxpdmVyeURhdGUiLCJ2YWxpZGF0ZURpbWVuc2lvbnMiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQYWNrYWdlVmFsdWUiLCJ2YWxpZGF0ZVBob25lTnVtYmVyIiwidmFsaWRhdGVQb3N0YWxDb2RlIiwidmFsaWRhdGVTaGlwbWVudCIsInZhbGlkYXRlU2hpcHBpbmdDb3N0IiwidmFsaWRhdGVUcmFja2luZ051bWJlciIsInZhbGlkYXRlV2VpZ2h0IiwieiIsIm9iamVjdCIsInN0cmVldCIsInN0cmluZyIsIm1pbiIsIm51bWJlciIsImFwYXJ0bWVudCIsIm9wdGlvbmFsIiwibmVpZ2hib3Job29kIiwiY2l0eSIsInN0YXRlIiwicG9zdGFsX2NvZGUiLCJjb3VudHJ5IiwiZGVmYXVsdCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwicmVmZXJlbmNlIiwidHJhY2tpbmdfbnVtYmVyIiwiY291cmllcl9pZCIsInNlcnZpY2VfdHlwZSIsImVudW0iLCJvcmlnaW5fYWRkcmVzcyIsImRlc3RpbmF0aW9uX2FkZHJlc3MiLCJwYWNrYWdlX2RldGFpbHMiLCJ3ZWlnaHQiLCJkaW1lbnNpb25zIiwibGVuZ3RoIiwid2lkdGgiLCJoZWlnaHQiLCJkZWNsYXJlZF92YWx1ZSIsImRlc2NyaXB0aW9uIiwiZXN0aW1hdGVkX2RlbGl2ZXJ5Iiwic3BlY2lhbF9pbnN0cnVjdGlvbnMiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwicGhvbmUiLCJjbGVhblBob25lIiwicmVwbGFjZSIsInBob25lUmVnZXgiLCJkbmkiLCJjbGVhbkROSSIsImRuaVJlZ2V4IiwiY3VpdFJlZ2V4IiwicGFyc2VJbnQiLCJwb3N0YWxDb2RlIiwicG9zdGFsQ29kZVJlZ2V4IiwidHJhY2tpbmdOdW1iZXIiLCJ0cmFja2luZ1JlZ2V4IiwibGF0IiwibG5nIiwiZGF0ZSIsImRlbGl2ZXJ5RGF0ZSIsIkRhdGUiLCJ0b2RheSIsIm1heERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNvc3QiLCJ2YWx1ZSIsImlucHV0IiwidHJpbSIsInN1YnN0cmluZyIsInRvVXBwZXJDYXNlIiwiYWRkcmVzcyIsInBhcnNlIiwiaXNWYWxpZCIsImVycm9ycyIsImVycm9yIiwiWm9kRXJyb3IiLCJtYXAiLCJlcnIiLCJtZXNzYWdlIiwic2hpcG1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLHdEQUF3RDtBQUN4RCxrQ0FBa0M7QUFDbEMseURBQXlEO0FBQ3pELHVDQUF1QztBQUN2Qyx3REFBd0Q7Ozs7Ozs7Ozs7OztRQVEzQ0E7ZUFBQUE7O1FBK0lHQztlQUFBQTs7UUFJQUM7ZUFBQUE7O1FBUkFDO2VBQUFBOztRQVlBQztlQUFBQTs7UUF6SUhDO2VBQUFBOztRQXNKR0M7ZUFBQUE7O1FBMUVBQztlQUFBQTs7UUFqQ0FDO2VBQUFBOztRQTZEQUM7ZUFBQUE7O1FBcEJBQztlQUFBQTs7UUE1REFDO2VBQUFBOztRQTZGQUM7ZUFBQUE7O1FBeEZBQztlQUFBQTs7UUFtQ0FDO2VBQUFBOztRQXFHQUM7ZUFBQUE7O1FBcERBQztlQUFBQTs7UUEzQ0FDO2VBQUFBOztRQVVBQztlQUFBQTs7O3FCQXBHRTtBQU1YLE1BQU1sQixnQkFBZ0JtQixNQUFDLENBQUNDLE1BQU0sQ0FBQztJQUNwQ0MsUUFBUUYsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQzFCQyxRQUFRTCxNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDMUJFLFdBQVdOLE1BQUMsQ0FBQ0csTUFBTSxHQUFHSSxRQUFRO0lBQzlCQyxjQUFjUixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDaENLLE1BQU1ULE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUN4Qk0sT0FBT1YsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ3pCTyxhQUFhWCxNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDL0JRLFNBQVNaLE1BQUMsQ0FBQ0csTUFBTSxHQUFHVSxPQUFPLENBQUM7SUFDNUJDLFVBQVVkLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRSxRQUFRO0lBQzdCUSxXQUFXZixNQUFDLENBQUNLLE1BQU0sR0FBR0UsUUFBUTtJQUM5QlMsV0FBV2hCLE1BQUMsQ0FBQ0csTUFBTSxHQUFHSSxRQUFRO0FBQ2hDO0FBRU8sTUFBTXJCLGlCQUFpQmMsTUFBQyxDQUFDQyxNQUFNLENBQUM7SUFDckNnQixpQkFBaUJqQixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDbkNjLFlBQVlsQixNQUFDLENBQUNLLE1BQU0sR0FBR0QsR0FBRyxDQUFDLEdBQUc7SUFDOUJlLGNBQWNuQixNQUFDLENBQUNvQixJQUFJLENBQUM7UUFBQztRQUFZO1FBQVc7UUFBWTtLQUFXO0lBQ3BFQyxnQkFBZ0J4QztJQUNoQnlDLHFCQUFxQnpDO0lBQ3JCMEMsaUJBQWlCdkIsTUFBQyxDQUFDQyxNQUFNLENBQUM7UUFDeEJ1QixRQUFReEIsTUFBQyxDQUFDSyxNQUFNLEdBQUdELEdBQUcsQ0FBQyxLQUFLO1FBQzVCcUIsWUFBWXpCLE1BQUMsQ0FBQ0MsTUFBTSxDQUFDO1lBQ25CeUIsUUFBUTFCLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRCxHQUFHLENBQUMsR0FBRztZQUMxQnVCLE9BQU8zQixNQUFDLENBQUNLLE1BQU0sR0FBR0QsR0FBRyxDQUFDLEdBQUc7WUFDekJ3QixRQUFRNUIsTUFBQyxDQUFDSyxNQUFNLEdBQUdELEdBQUcsQ0FBQyxHQUFHO1FBQzVCO1FBQ0F5QixnQkFBZ0I3QixNQUFDLENBQUNLLE1BQU0sR0FBR0QsR0FBRyxDQUFDLEdBQUc7UUFDbEMwQixhQUFhOUIsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ2pDO0lBQ0EyQixvQkFBb0IvQixNQUFDLENBQUNHLE1BQU0sR0FBR0ksUUFBUTtJQUN2Q3lCLHNCQUFzQmhDLE1BQUMsQ0FBQ0csTUFBTSxHQUFHSSxRQUFRO0FBQzNDO0FBTU8sU0FBU2YsY0FBY3lDLEtBQWE7SUFDekMsTUFBTUMsYUFBYTtJQUNuQixPQUFPQSxXQUFXQyxJQUFJLENBQUNGO0FBQ3pCO0FBRU8sU0FBU3ZDLG9CQUFvQjBDLEtBQWE7SUFDL0MsOEVBQThFO0lBQzlFLHdEQUF3RDtJQUN4RCxNQUFNQyxhQUFhRCxNQUFNRSxPQUFPLENBQUMsZUFBZTtJQUVoRCxzQkFBc0I7SUFDdEIsaUNBQWlDO0lBQ2pDLHNDQUFzQztJQUN0Qyw4QkFBOEI7SUFDOUIsTUFBTUMsYUFBYTtJQUVuQixPQUFPQSxXQUFXSixJQUFJLENBQUNFLGVBQWVBLFdBQVdYLE1BQU0sSUFBSTtBQUM3RDtBQUVPLFNBQVNyQyxZQUFZbUQsR0FBVztJQUNyQywrQ0FBK0M7SUFDL0MsTUFBTUMsV0FBV0QsSUFBSUYsT0FBTyxDQUFDLGFBQWE7SUFFMUMsc0JBQXNCO0lBQ3RCLDRCQUE0QjtJQUM1QixpQ0FBaUM7SUFDakMsTUFBTUksV0FBVztJQUNqQixNQUFNQyxZQUFZO0lBRWxCLElBQUlELFNBQVNQLElBQUksQ0FBQ00sV0FBVztRQUMzQiwwQkFBMEI7UUFDMUIsT0FBT0EsU0FBU2YsTUFBTSxLQUFLLEtBQUtrQixTQUFTSCxZQUFZO0lBQ3ZELE9BQU8sSUFBSUUsVUFBVVIsSUFBSSxDQUFDTSxXQUFXO1FBQ25DLGdEQUFnRDtRQUNoRCxPQUFPQSxTQUFTZixNQUFNLEtBQUssTUFBTWtCLFNBQVNILFlBQVk7SUFDeEQ7SUFFQSxPQUFPO0FBQ1Q7QUFFTyxTQUFTOUMsbUJBQW1Ca0QsVUFBa0I7SUFDbkQscUNBQXFDO0lBQ3JDLE1BQU1DLGtCQUFrQjtJQUN4QixPQUFPQSxnQkFBZ0JYLElBQUksQ0FBQ1U7QUFDOUI7QUFFTyxTQUFTL0MsdUJBQXVCaUQsY0FBc0I7SUFDM0QsdURBQXVEO0lBQ3ZELE1BQU1DLGdCQUFnQjtJQUN0QixPQUFPQSxjQUFjYixJQUFJLENBQUNZO0FBQzVCO0FBRU8sU0FBUzNELG9CQUFvQjZELEdBQVcsRUFBRUMsR0FBVztJQUMxRCxPQUFPRCxPQUFPLENBQUMsTUFBTUEsT0FBTyxNQUFNQyxPQUFPLENBQUMsT0FBT0EsT0FBTztBQUMxRDtBQUVPLFNBQVNuRCxlQUFleUIsTUFBYztJQUMzQyxPQUFPQSxTQUFTLEtBQUtBLFVBQVUsS0FBSyxnQkFBZ0I7O0FBQ3REO0FBRU8sU0FBU2pDLG1CQUFtQmtDLFVBSWxDO0lBQ0MsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUdIO0lBQ2xDLE9BQ0VDLFNBQVMsS0FDVEEsVUFBVSxPQUFPLGVBQWU7SUFDaENDLFFBQVEsS0FDUkEsU0FBUyxPQUNUQyxTQUFTLEtBQ1RBLFVBQVU7QUFFZDtBQU1PLFNBQVN0QyxxQkFBcUI2RCxJQUFZO0lBQy9DLE1BQU1DLGVBQWUsSUFBSUMsS0FBS0Y7SUFDOUIsTUFBTUcsUUFBUSxJQUFJRDtJQUNsQixNQUFNRSxVQUFVLElBQUlGO0lBQ3BCRSxRQUFRQyxPQUFPLENBQUNGLE1BQU1HLE9BQU8sS0FBSyxLQUFJLGlCQUFpQjtJQUV2RCxPQUFPTCxnQkFBZ0JFLFNBQVNGLGdCQUFnQkc7QUFDbEQ7QUFFTyxTQUFTMUQscUJBQXFCNkQsSUFBWTtJQUMvQyxPQUFPQSxRQUFRLEtBQUtBLFFBQVEsT0FBTyxrQkFBa0I7O0FBQ3ZEO0FBRU8sU0FBU2pFLHFCQUFxQmtFLEtBQWE7SUFDaEQsT0FBT0EsU0FBUyxLQUFLQSxTQUFTLFFBQVEsb0JBQW9COztBQUM1RDtBQU1PLFNBQVMzRSxlQUFlNEUsS0FBYTtJQUMxQyxPQUFPQSxNQUFNQyxJQUFJLEdBQUd2QixPQUFPLENBQUMsU0FBUztBQUN2QztBQUVPLFNBQVN4RCxvQkFBb0JzRCxLQUFhO0lBQy9DLE9BQU9BLE1BQU1FLE9BQU8sQ0FBQyxPQUFPO0FBQzlCO0FBRU8sU0FBU3ZELG1CQUFtQjhELFVBQWtCO0lBQ25ELE9BQU9BLFdBQVdQLE9BQU8sQ0FBQyxPQUFPLElBQUl3QixTQUFTLENBQUMsR0FBRztBQUNwRDtBQUVPLFNBQVM3RSx1QkFBdUI4RCxjQUFzQjtJQUMzRCxPQUFPQSxlQUFlZ0IsV0FBVyxHQUFHekIsT0FBTyxDQUFDLGNBQWM7QUFDNUQ7QUFXTyxTQUFTbkQsZ0JBQWdCNkUsT0FBWTtJQUMxQyxJQUFJO1FBQ0ZuRixjQUFjb0YsS0FBSyxDQUFDRDtRQUNwQixPQUFPO1lBQUVFLFNBQVM7WUFBTUMsUUFBUSxFQUFFO1FBQUM7SUFDckMsRUFBRSxPQUFPQyxPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCcEUsTUFBQyxDQUFDcUUsUUFBUSxFQUFFO1lBQy9CLE9BQU87Z0JBQ0xILFNBQVM7Z0JBQ1RDLFFBQVFDLE1BQU1ELE1BQU0sQ0FBQ0csR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJQyxPQUFPO1lBQzdDO1FBQ0Y7UUFDQSxPQUFPO1lBQUVOLFNBQVM7WUFBT0MsUUFBUTtnQkFBQzthQUFrQztRQUFDO0lBQ3ZFO0FBQ0Y7QUFFTyxTQUFTdkUsaUJBQWlCNkUsUUFBYTtJQUM1QyxJQUFJO1FBQ0Z2RixlQUFlK0UsS0FBSyxDQUFDUTtRQUNyQixPQUFPO1lBQUVQLFNBQVM7WUFBTUMsUUFBUSxFQUFFO1FBQUM7SUFDckMsRUFBRSxPQUFPQyxPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCcEUsTUFBQyxDQUFDcUUsUUFBUSxFQUFFO1lBQy9CLE9BQU87Z0JBQ0xILFNBQVM7Z0JBQ1RDLFFBQVFDLE1BQU1ELE1BQU0sQ0FBQ0csR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJQyxPQUFPO1lBQzdDO1FBQ0Y7UUFDQSxPQUFPO1lBQUVOLFNBQVM7WUFBT0MsUUFBUTtnQkFBQzthQUFrQztRQUFDO0lBQ3ZFO0FBQ0YifQ==