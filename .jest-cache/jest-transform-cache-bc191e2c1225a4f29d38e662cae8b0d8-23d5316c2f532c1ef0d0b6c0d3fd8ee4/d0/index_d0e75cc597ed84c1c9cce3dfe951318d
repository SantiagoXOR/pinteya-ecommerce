79679682e73767cd06b8aded79838782
/**
 * Sistema de Analytics para Pinteya E-commerce
 * Tracking de eventos, métricas de conversión y análisis de comportamiento
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get analytics () {
        return analytics;
    },
    get initializeAnalytics () {
        return initializeAnalytics;
    },
    get trackConversion () {
        return trackConversion;
    },
    get trackEcommerceEvent () {
        return trackEcommerceEvent;
    },
    get trackEvent () {
        return trackEvent;
    },
    get trackPageView () {
        return trackPageView;
    }
});
class AnalyticsManager {
    constructor(){
        this.events = [];
        this.interactions = [];
        this.isEnabled = true;
        this.isInitialized = false;
        this.initializationPromise = null;
        this.eventQueue = [];
        this.isProcessingQueue = false;
        this.queueTimeout = null;
        this.sessionId = this.generateSessionId();
    // No inicializar automáticamente - usar lazy initialization
    }
    generateSessionId() {
        return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
    async ensureInitialized() {
        // Si ya está inicializado, no hacer nada
        if (this.isInitialized) {
            return;
        }
        // Si ya hay una inicialización en progreso, esperar a que termine
        if (this.initializationPromise) {
            return this.initializationPromise;
        }
        // Crear la promesa de inicialización
        this.initializationPromise = this.initializeTracking();
        try {
            await this.initializationPromise;
        } catch (error) {
            // En caso de error, limpiar la promesa para permitir reintentos
            this.initializationPromise = null;
            throw error;
        }
    }
    async initializeTracking() {
        if (typeof window === 'undefined') {
            return;
        }
        if (this.isInitialized) {
            return;
        }
        try {
            // Esperar a que el DOM esté listo
            if (document.readyState === 'loading') {
                await new Promise((resolve)=>{
                    document.addEventListener('DOMContentLoaded', resolve, {
                        once: true
                    });
                });
            }
            // Marcar como inicializado ANTES de hacer cualquier tracking
            // para evitar recursión infinita
            this.isInitialized = true;
            // Track page views automáticamente (ahora que ya está inicializado)
            this.trackPageView();
            // Track clicks globalmente
            document.addEventListener('click', this.handleClick.bind(this));
            // Track scroll events
            let scrollTimeout;
            document.addEventListener('scroll', ()=>{
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(()=>{
                    this.trackInteraction('scroll', 'page', window.scrollX, window.scrollY);
                }, 100);
            });
            // Track form interactions
            document.addEventListener('input', this.handleInput.bind(this));
            document.addEventListener('focus', this.handleFocus.bind(this));
        } catch (error) {
            console.warn('Error initializing analytics tracking:', error);
            // En caso de error, resetear el estado de inicialización
            this.isInitialized = false;
        }
    }
    handleClick(event) {
        const target = event.target;
        const elementInfo = this.getElementInfo(target);
        this.trackInteraction('click', elementInfo, event.clientX, event.clientY);
        // Track specific e-commerce events
        if (target.closest('[data-analytics="add-to-cart"]')) {
            this.trackEcommerceEvent('add_to_cart', {
                productId: target.getAttribute('data-product-id'),
                productName: target.getAttribute('data-product-name'),
                price: target.getAttribute('data-product-price')
            });
        }
        if (target.closest('[data-analytics="remove-from-cart"]')) {
            this.trackEcommerceEvent('remove_from_cart', {
                productId: target.getAttribute('data-product-id')
            });
        }
        if (target.closest('[data-analytics="checkout-start"]')) {
            this.trackEcommerceEvent('begin_checkout', {
                cartValue: target.getAttribute('data-cart-value'),
                itemCount: target.getAttribute('data-item-count')
            });
        }
    }
    handleInput(event) {
        const target = event.target;
        const elementInfo = this.getElementInfo(target);
        this.trackInteraction('input', elementInfo, 0, 0);
    }
    handleFocus(event) {
        const target = event.target;
        const elementInfo = this.getElementInfo(target);
        this.trackInteraction('focus', elementInfo, 0, 0);
    }
    getElementInfo(element) {
        const id = element.id ? `#${element.id}` : '';
        // Manejar className que puede ser string o DOMTokenList
        let className = '';
        if (element.className) {
            // Si className es un DOMTokenList, convertir a string
            const classNameValue = element.className;
            const classNameStr = typeof classNameValue === 'string' ? classNameValue : classNameValue.toString();
            // Solo procesar si hay clases
            if (classNameStr.trim()) {
                className = `.${classNameStr.split(' ').filter((cls)=>cls.trim()).join('.')}`;
            }
        }
        const tagName = element.tagName.toLowerCase();
        const dataAnalytics = element.getAttribute('data-analytics') || '';
        return `${tagName}${id}${className}${dataAnalytics ? `[${dataAnalytics}]` : ''}`;
    }
    async trackEvent(event, category, action, label, value, metadata) {
        if (!this.isEnabled) {
            return;
        }
        // Solo inicializar si no está ya inicializado para evitar recursión
        if (!this.isInitialized) {
            await this.ensureInitialized();
        }
        const analyticsEvent = {
            event,
            category,
            action,
            label,
            value,
            sessionId: this.sessionId,
            timestamp: Date.now(),
            page: typeof window !== 'undefined' ? window.location.pathname : '',
            userAgent: typeof window !== 'undefined' ? window.navigator.userAgent : '',
            metadata
        };
        this.events.push(analyticsEvent);
        this.sendToAnalytics(analyticsEvent);
    }
    async trackEcommerceEvent(action, data) {
        await this.trackEvent('ecommerce', 'shop', action, undefined, undefined, data);
    }
    async trackPageView(page) {
        const currentPage = page || (typeof window !== 'undefined' ? window.location.pathname : '');
        await this.trackEvent('page_view', 'navigation', 'view', currentPage);
    }
    async trackInteraction(type, element, x, y) {
        if (!this.isEnabled) {
            return;
        }
        // Solo inicializar si no está ya inicializado para evitar recursión
        if (!this.isInitialized) {
            await this.ensureInitialized();
        }
        const interaction = {
            type,
            element,
            x,
            y,
            timestamp: Date.now(),
            page: typeof window !== 'undefined' ? window.location.pathname : '',
            sessionId: this.sessionId
        };
        this.interactions.push(interaction);
    }
    async trackConversion(type, value, metadata) {
        await this.trackEvent('conversion', 'ecommerce', type, undefined, value, metadata);
    }
    sendToAnalytics(event) {
        // Solo ejecutar en el cliente
        if (typeof window === 'undefined') {
            return;
        }
        // Enviar a Google Analytics 4
        if (window.gtag) {
            try {
                window.gtag('event', event.action, {
                    event_category: event.category,
                    event_label: event.label,
                    value: event.value,
                    custom_parameter_session_id: event.sessionId,
                    ...event.metadata
                });
            } catch (error) {
                console.warn('Error sending event to GA:', error);
            }
        }
        // Enviar a nuestro endpoint interno con mejor manejo de errores
        this.sendToInternalAPI(event);
    }
    async sendToInternalAPI(event) {
        // Agregar evento a la cola en lugar de enviarlo inmediatamente
        this.eventQueue.push(event);
        // Procesar la cola con debounce
        this.debouncedProcessQueue();
    }
    debouncedProcessQueue() {
        if (this.queueTimeout) {
            clearTimeout(this.queueTimeout);
        }
        this.queueTimeout = setTimeout(()=>{
            this.processEventQueue();
        }, 100); // Debounce de 100ms
    }
    async processEventQueue() {
        if (this.isProcessingQueue || this.eventQueue.length === 0) {
            return;
        }
        if (typeof window === 'undefined') {
            return;
        }
        this.isProcessingQueue = true;
        try {
            // Verificar que el documento está listo
            if (document.readyState === 'loading') {
                await new Promise((resolve)=>{
                    document.addEventListener('DOMContentLoaded', resolve, {
                        once: true
                    });
                });
            }
            // Procesar eventos en lotes
            const eventsToProcess = [
                ...this.eventQueue
            ];
            this.eventQueue = [];
            // Enviar eventos en lotes de 5 para evitar rate limiting
            const batchSize = 5;
            for(let i = 0; i < eventsToProcess.length; i += batchSize){
                const batch = eventsToProcess.slice(i, i + batchSize);
                for (const event of batch){
                    try {
                        const response = await fetch('/api/analytics/events', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(event)
                        });
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                    } catch (error) {
                        // En caso de error, almacenar el evento para reintento
                        this.storeEventForRetry(event);
                    }
                }
                // Pausa entre lotes para evitar rate limiting
                if (i + batchSize < eventsToProcess.length) {
                    await new Promise((resolve)=>setTimeout(resolve, 50));
                }
            }
        } catch (error) {
            if (process.env.NODE_ENV === 'development') {
                console.warn('Analytics queue processing error (non-critical):', error);
            }
        } finally{
            this.isProcessingQueue = false;
        }
    }
    storeEventForRetry(event) {
        try {
            if (typeof window !== 'undefined' && window.localStorage) {
                // Usar parsing seguro para evitar errores JSON
                const stored = localStorage.getItem('analytics_failed_events') || '[]';
                let failedEvents = [];
                try {
                    failedEvents = JSON.parse(stored);
                    // Verificar que sea un array válido
                    if (!Array.isArray(failedEvents)) {
                        failedEvents = [];
                    }
                } catch (parseError) {
                    console.warn('Error parsing analytics failed events, resetting:', parseError);
                    failedEvents = [];
                }
                failedEvents.push(event);
                // Limitar a los últimos 50 eventos fallidos
                if (failedEvents.length > 50) {
                    failedEvents.splice(0, failedEvents.length - 50);
                }
                localStorage.setItem('analytics_failed_events', JSON.stringify(failedEvents));
            }
        } catch (error) {
            // Ignorar errores de localStorage
            console.warn('Error storing analytics event for retry:', error);
        }
    }
    getEvents() {
        return [
            ...this.events
        ];
    }
    getInteractions() {
        return [
            ...this.interactions
        ];
    }
    getSessionId() {
        return this.sessionId;
    }
    clearData() {
        this.events = [];
        this.interactions = [];
        this.eventQueue = [];
        // Limpiar timeouts
        if (this.queueTimeout) {
            clearTimeout(this.queueTimeout);
            this.queueTimeout = null;
        }
    }
    disable() {
        this.isEnabled = false;
    }
    enable() {
        this.isEnabled = true;
    }
    async initialize() {
        await this.ensureInitialized();
    }
    getConversionMetrics() {
        const ecommerceEvents = this.events.filter((e)=>e.category === 'shop');
        const cartAdditions = ecommerceEvents.filter((e)=>e.action === 'add_to_cart').length;
        const cartRemovals = ecommerceEvents.filter((e)=>e.action === 'remove_from_cart').length;
        const checkoutStarts = ecommerceEvents.filter((e)=>e.action === 'begin_checkout').length;
        const checkoutCompletions = ecommerceEvents.filter((e)=>e.action === 'purchase').length;
        const productViews = this.events.filter((e)=>e.category === 'navigation' && e.label?.includes('/product/')).length;
        const categoryViews = this.events.filter((e)=>e.category === 'navigation' && e.label?.includes('/category/')).length;
        const searchQueries = ecommerceEvents.filter((e)=>e.action === 'search').length;
        const conversionRate = checkoutStarts > 0 ? checkoutCompletions / checkoutStarts * 100 : 0;
        const cartAbandonmentRate = cartAdditions > 0 ? (cartAdditions - checkoutCompletions) / cartAdditions * 100 : 0;
        // Calcular AOV desde los eventos de compra
        const purchaseEvents = ecommerceEvents.filter((e)=>e.action === 'purchase');
        const totalValue = purchaseEvents.reduce((sum, event)=>sum + (event.value || 0), 0);
        const averageOrderValue = purchaseEvents.length > 0 ? totalValue / purchaseEvents.length : 0;
        return {
            cartAdditions,
            cartRemovals,
            checkoutStarts,
            checkoutCompletions,
            productViews,
            categoryViews,
            searchQueries,
            conversionRate,
            averageOrderValue,
            cartAbandonmentRate
        };
    }
}
const analytics = new AnalyticsManager();
const trackEvent = async (event, category, action, label, value, metadata)=>{
    try {
        await optimizedAnalytics.trackEvent(event, category, action, label, value, metadata);
    } catch (error) {
        if (process.env.NODE_ENV === 'development') {
            console.warn('Analytics trackEvent error:', error);
        }
    }
};
const trackEcommerceEvent = async (action, data)=>{
    try {
        await analytics.trackEcommerceEvent(action, data);
    } catch (error) {
        if (process.env.NODE_ENV === 'development') {
            console.warn('Analytics trackEcommerceEvent error:', error);
        }
    }
};
const trackPageView = async (page)=>{
    try {
        await analytics.trackPageView(page);
    } catch (error) {
        if (process.env.NODE_ENV === 'development') {
            console.warn('Analytics trackPageView error:', error);
        }
    }
};
const trackConversion = async (type, value, metadata)=>{
    try {
        await analytics.trackConversion(type, value, metadata);
    } catch (error) {
        if (process.env.NODE_ENV === 'development') {
            console.warn('Analytics trackConversion error:', error);
        }
    }
};
const initializeAnalytics = async ()=>{
    try {
        await analytics.initialize();
    } catch (error) {
        if (process.env.NODE_ENV === 'development') {
            console.warn('Analytics initialization error:', error);
        }
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxpbnRlZ3JhdGlvbnNcXGFuYWx5dGljc1xcaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFNpc3RlbWEgZGUgQW5hbHl0aWNzIHBhcmEgUGludGV5YSBFLWNvbW1lcmNlXHJcbiAqIFRyYWNraW5nIGRlIGV2ZW50b3MsIG3DqXRyaWNhcyBkZSBjb252ZXJzacOzbiB5IGFuw6FsaXNpcyBkZSBjb21wb3J0YW1pZW50b1xyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHl0aWNzRXZlbnQge1xyXG4gIGV2ZW50OiBzdHJpbmc7XHJcbiAgY2F0ZWdvcnk6IHN0cmluZztcclxuICBhY3Rpb246IHN0cmluZztcclxuICBsYWJlbD86IHN0cmluZztcclxuICB2YWx1ZT86IG51bWJlcjtcclxuICB1c2VySWQ/OiBzdHJpbmc7XHJcbiAgc2Vzc2lvbklkOiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgcGFnZTogc3RyaW5nO1xyXG4gIHVzZXJBZ2VudDogc3RyaW5nO1xyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzaW9uTWV0cmljcyB7XHJcbiAgY2FydEFkZGl0aW9uczogbnVtYmVyO1xyXG4gIGNhcnRSZW1vdmFsczogbnVtYmVyO1xyXG4gIGNoZWNrb3V0U3RhcnRzOiBudW1iZXI7XHJcbiAgY2hlY2tvdXRDb21wbGV0aW9uczogbnVtYmVyO1xyXG4gIHByb2R1Y3RWaWV3czogbnVtYmVyO1xyXG4gIGNhdGVnb3J5Vmlld3M6IG51bWJlcjtcclxuICBzZWFyY2hRdWVyaWVzOiBudW1iZXI7XHJcbiAgY29udmVyc2lvblJhdGU6IG51bWJlcjtcclxuICBhdmVyYWdlT3JkZXJWYWx1ZTogbnVtYmVyO1xyXG4gIGNhcnRBYmFuZG9ubWVudFJhdGU6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VySW50ZXJhY3Rpb24ge1xyXG4gIHR5cGU6ICdjbGljaycgfCAnaG92ZXInIHwgJ3Njcm9sbCcgfCAnZm9jdXMnIHwgJ2lucHV0JztcclxuICBlbGVtZW50OiBzdHJpbmc7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICBwYWdlOiBzdHJpbmc7XHJcbiAgc2Vzc2lvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIEFuYWx5dGljc01hbmFnZXIge1xyXG4gIHByaXZhdGUgZXZlbnRzOiBBbmFseXRpY3NFdmVudFtdID0gW107XHJcbiAgcHJpdmF0ZSBpbnRlcmFjdGlvbnM6IFVzZXJJbnRlcmFjdGlvbltdID0gW107XHJcbiAgcHJpdmF0ZSBzZXNzaW9uSWQ6IHN0cmluZztcclxuICBwcml2YXRlIGlzRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpbml0aWFsaXphdGlvblByb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnNlc3Npb25JZCA9IHRoaXMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcclxuICAgIC8vIE5vIGluaWNpYWxpemFyIGF1dG9tw6F0aWNhbWVudGUgLSB1c2FyIGxhenkgaW5pdGlhbGl6YXRpb25cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgc2Vzc2lvbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGVuc3VyZUluaXRpYWxpemVkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy8gU2kgeWEgZXN0w6EgaW5pY2lhbGl6YWRvLCBubyBoYWNlciBuYWRhXHJcbiAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7cmV0dXJuO31cclxuXHJcbiAgICAvLyBTaSB5YSBoYXkgdW5hIGluaWNpYWxpemFjacOzbiBlbiBwcm9ncmVzbywgZXNwZXJhciBhIHF1ZSB0ZXJtaW5lXHJcbiAgICBpZiAodGhpcy5pbml0aWFsaXphdGlvblByb21pc2UpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWFyIGxhIHByb21lc2EgZGUgaW5pY2lhbGl6YWNpw7NuXHJcbiAgICB0aGlzLmluaXRpYWxpemF0aW9uUHJvbWlzZSA9IHRoaXMuaW5pdGlhbGl6ZVRyYWNraW5nKCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBFbiBjYXNvIGRlIGVycm9yLCBsaW1waWFyIGxhIHByb21lc2EgcGFyYSBwZXJtaXRpciByZWludGVudG9zXHJcbiAgICAgIHRoaXMuaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUcmFja2luZygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge3JldHVybjt9XHJcbiAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7cmV0dXJuO31cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBFc3BlcmFyIGEgcXVlIGVsIERPTSBlc3TDqSBsaXN0b1xyXG4gICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgcmVzb2x2ZSwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBNYXJjYXIgY29tbyBpbmljaWFsaXphZG8gQU5URVMgZGUgaGFjZXIgY3VhbHF1aWVyIHRyYWNraW5nXHJcbiAgICAgIC8vIHBhcmEgZXZpdGFyIHJlY3Vyc2nDs24gaW5maW5pdGFcclxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIFRyYWNrIHBhZ2Ugdmlld3MgYXV0b23DoXRpY2FtZW50ZSAoYWhvcmEgcXVlIHlhIGVzdMOhIGluaWNpYWxpemFkbylcclxuICAgICAgdGhpcy50cmFja1BhZ2VWaWV3KCk7XHJcblxyXG4gICAgICAvLyBUcmFjayBjbGlja3MgZ2xvYmFsbWVudGVcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgLy8gVHJhY2sgc2Nyb2xsIGV2ZW50c1xyXG4gICAgICBsZXQgc2Nyb2xsVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZW91dCk7XHJcbiAgICAgICAgc2Nyb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy50cmFja0ludGVyYWN0aW9uKCdzY3JvbGwnLCAncGFnZScsIHdpbmRvdy5zY3JvbGxYLCB3aW5kb3cuc2Nyb2xsWSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUcmFjayBmb3JtIGludGVyYWN0aW9uc1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKSk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGluaXRpYWxpemluZyBhbmFseXRpY3MgdHJhY2tpbmc6JywgZXJyb3IpO1xyXG4gICAgICAvLyBFbiBjYXNvIGRlIGVycm9yLCByZXNldGVhciBlbCBlc3RhZG8gZGUgaW5pY2lhbGl6YWNpw7NuXHJcbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgZWxlbWVudEluZm8gPSB0aGlzLmdldEVsZW1lbnRJbmZvKHRhcmdldCk7XHJcbiAgICBcclxuICAgIHRoaXMudHJhY2tJbnRlcmFjdGlvbignY2xpY2snLCBlbGVtZW50SW5mbywgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XHJcbiAgICBcclxuICAgIC8vIFRyYWNrIHNwZWNpZmljIGUtY29tbWVyY2UgZXZlbnRzXHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWFuYWx5dGljcz1cImFkZC10by1jYXJ0XCJdJykpIHtcclxuICAgICAgdGhpcy50cmFja0Vjb21tZXJjZUV2ZW50KCdhZGRfdG9fY2FydCcsIHtcclxuICAgICAgICBwcm9kdWN0SWQ6IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvZHVjdC1pZCcpLFxyXG4gICAgICAgIHByb2R1Y3ROYW1lOiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2R1Y3QtbmFtZScpLFxyXG4gICAgICAgIHByaWNlOiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2R1Y3QtcHJpY2UnKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnW2RhdGEtYW5hbHl0aWNzPVwicmVtb3ZlLWZyb20tY2FydFwiXScpKSB7XHJcbiAgICAgIHRoaXMudHJhY2tFY29tbWVyY2VFdmVudCgncmVtb3ZlX2Zyb21fY2FydCcsIHtcclxuICAgICAgICBwcm9kdWN0SWQ6IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvZHVjdC1pZCcpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCdbZGF0YS1hbmFseXRpY3M9XCJjaGVja291dC1zdGFydFwiXScpKSB7XHJcbiAgICAgIHRoaXMudHJhY2tFY29tbWVyY2VFdmVudCgnYmVnaW5fY2hlY2tvdXQnLCB7XHJcbiAgICAgICAgY2FydFZhbHVlOiB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcnQtdmFsdWUnKSxcclxuICAgICAgICBpdGVtQ291bnQ6IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbS1jb3VudCcpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlSW5wdXQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBlbGVtZW50SW5mbyA9IHRoaXMuZ2V0RWxlbWVudEluZm8odGFyZ2V0KTtcclxuICAgIHRoaXMudHJhY2tJbnRlcmFjdGlvbignaW5wdXQnLCBlbGVtZW50SW5mbywgMCwgMCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZUZvY3VzKGV2ZW50OiBGb2N1c0V2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBlbGVtZW50SW5mbyA9IHRoaXMuZ2V0RWxlbWVudEluZm8odGFyZ2V0KTtcclxuICAgIHRoaXMudHJhY2tJbnRlcmFjdGlvbignZm9jdXMnLCBlbGVtZW50SW5mbywgMCwgMCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEVsZW1lbnRJbmZvKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGlkID0gZWxlbWVudC5pZCA/IGAjJHtlbGVtZW50LmlkfWAgOiAnJztcclxuXHJcbiAgICAvLyBNYW5lamFyIGNsYXNzTmFtZSBxdWUgcHVlZGUgc2VyIHN0cmluZyBvIERPTVRva2VuTGlzdFxyXG4gICAgbGV0IGNsYXNzTmFtZSA9ICcnO1xyXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lKSB7XHJcbiAgICAgIC8vIFNpIGNsYXNzTmFtZSBlcyB1biBET01Ub2tlbkxpc3QsIGNvbnZlcnRpciBhIHN0cmluZ1xyXG4gICAgICBjb25zdCBjbGFzc05hbWVWYWx1ZSA9IGVsZW1lbnQuY2xhc3NOYW1lIGFzIHN0cmluZyB8IERPTVRva2VuTGlzdDtcclxuICAgICAgY29uc3QgY2xhc3NOYW1lU3RyID0gdHlwZW9mIGNsYXNzTmFtZVZhbHVlID09PSAnc3RyaW5nJ1xyXG4gICAgICAgID8gY2xhc3NOYW1lVmFsdWVcclxuICAgICAgICA6IGNsYXNzTmFtZVZhbHVlLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAvLyBTb2xvIHByb2Nlc2FyIHNpIGhheSBjbGFzZXNcclxuICAgICAgaWYgKGNsYXNzTmFtZVN0ci50cmltKCkpIHtcclxuICAgICAgICBjbGFzc05hbWUgPSBgLiR7Y2xhc3NOYW1lU3RyLnNwbGl0KCcgJykuZmlsdGVyKGNscyA9PiBjbHMudHJpbSgpKS5qb2luKCcuJyl9YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGRhdGFBbmFseXRpY3MgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hbmFseXRpY3MnKSB8fCAnJztcclxuXHJcbiAgICByZXR1cm4gYCR7dGFnTmFtZX0ke2lkfSR7Y2xhc3NOYW1lfSR7ZGF0YUFuYWx5dGljcyA/IGBbJHtkYXRhQW5hbHl0aWNzfV1gIDogJyd9YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyB0cmFja0V2ZW50KFxyXG4gICAgZXZlbnQ6IHN0cmluZyxcclxuICAgIGNhdGVnb3J5OiBzdHJpbmcsXHJcbiAgICBhY3Rpb246IHN0cmluZyxcclxuICAgIGxhYmVsPzogc3RyaW5nLFxyXG4gICAgdmFsdWU/OiBudW1iZXIsXHJcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHtyZXR1cm47fVxyXG5cclxuICAgIC8vIFNvbG8gaW5pY2lhbGl6YXIgc2kgbm8gZXN0w6EgeWEgaW5pY2lhbGl6YWRvIHBhcmEgZXZpdGFyIHJlY3Vyc2nDs25cclxuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhbmFseXRpY3NFdmVudDogQW5hbHl0aWNzRXZlbnQgPSB7XHJcbiAgICAgIGV2ZW50LFxyXG4gICAgICBjYXRlZ29yeSxcclxuICAgICAgYWN0aW9uLFxyXG4gICAgICBsYWJlbCxcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgcGFnZTogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgOiAnJyxcclxuICAgICAgdXNlckFnZW50OiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50IDogJycsXHJcbiAgICAgIG1ldGFkYXRhLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmV2ZW50cy5wdXNoKGFuYWx5dGljc0V2ZW50KTtcclxuICAgIHRoaXMuc2VuZFRvQW5hbHl0aWNzKGFuYWx5dGljc0V2ZW50KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyB0cmFja0Vjb21tZXJjZUV2ZW50KGFjdGlvbjogc3RyaW5nLCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLnRyYWNrRXZlbnQoJ2Vjb21tZXJjZScsICdzaG9wJywgYWN0aW9uLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgdHJhY2tQYWdlVmlldyhwYWdlPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjdXJyZW50UGFnZSA9IHBhZ2UgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lIDogJycpO1xyXG4gICAgYXdhaXQgdGhpcy50cmFja0V2ZW50KCdwYWdlX3ZpZXcnLCAnbmF2aWdhdGlvbicsICd2aWV3JywgY3VycmVudFBhZ2UpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHRyYWNrSW50ZXJhY3Rpb24oXHJcbiAgICB0eXBlOiBVc2VySW50ZXJhY3Rpb25bJ3R5cGUnXSxcclxuICAgIGVsZW1lbnQ6IHN0cmluZyxcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlclxyXG4gICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKCF0aGlzLmlzRW5hYmxlZCkge3JldHVybjt9XHJcblxyXG4gICAgLy8gU29sbyBpbmljaWFsaXphciBzaSBubyBlc3TDoSB5YSBpbmljaWFsaXphZG8gcGFyYSBldml0YXIgcmVjdXJzacOzblxyXG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGludGVyYWN0aW9uOiBVc2VySW50ZXJhY3Rpb24gPSB7XHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIGVsZW1lbnQsXHJcbiAgICAgIHgsXHJcbiAgICAgIHksXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgcGFnZTogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgOiAnJyxcclxuICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMucHVzaChpbnRlcmFjdGlvbik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgdHJhY2tDb252ZXJzaW9uKHR5cGU6IHN0cmluZywgdmFsdWU/OiBudW1iZXIsIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy50cmFja0V2ZW50KCdjb252ZXJzaW9uJywgJ2Vjb21tZXJjZScsIHR5cGUsIHVuZGVmaW5lZCwgdmFsdWUsIG1ldGFkYXRhKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2VuZFRvQW5hbHl0aWNzKGV2ZW50OiBBbmFseXRpY3NFdmVudCk6IHZvaWQge1xyXG4gICAgLy8gU29sbyBlamVjdXRhciBlbiBlbCBjbGllbnRlXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtyZXR1cm47fVxyXG5cclxuICAgIC8vIEVudmlhciBhIEdvb2dsZSBBbmFseXRpY3MgNFxyXG4gICAgaWYgKCh3aW5kb3cgYXMgYW55KS5ndGFnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmd0YWcoJ2V2ZW50JywgZXZlbnQuYWN0aW9uLCB7XHJcbiAgICAgICAgICBldmVudF9jYXRlZ29yeTogZXZlbnQuY2F0ZWdvcnksXHJcbiAgICAgICAgICBldmVudF9sYWJlbDogZXZlbnQubGFiZWwsXHJcbiAgICAgICAgICB2YWx1ZTogZXZlbnQudmFsdWUsXHJcbiAgICAgICAgICBjdXN0b21fcGFyYW1ldGVyX3Nlc3Npb25faWQ6IGV2ZW50LnNlc3Npb25JZCxcclxuICAgICAgICAgIC4uLmV2ZW50Lm1ldGFkYXRhLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignRXJyb3Igc2VuZGluZyBldmVudCB0byBHQTonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbnZpYXIgYSBudWVzdHJvIGVuZHBvaW50IGludGVybm8gY29uIG1lam9yIG1hbmVqbyBkZSBlcnJvcmVzXHJcbiAgICB0aGlzLnNlbmRUb0ludGVybmFsQVBJKGV2ZW50KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXZlbnRRdWV1ZTogQW5hbHl0aWNzRXZlbnRbXSA9IFtdO1xyXG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nUXVldWU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIHF1ZXVlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzZW5kVG9JbnRlcm5hbEFQSShldmVudDogQW5hbHl0aWNzRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIEFncmVnYXIgZXZlbnRvIGEgbGEgY29sYSBlbiBsdWdhciBkZSBlbnZpYXJsbyBpbm1lZGlhdGFtZW50ZVxyXG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xyXG5cclxuICAgIC8vIFByb2Nlc2FyIGxhIGNvbGEgY29uIGRlYm91bmNlXHJcbiAgICB0aGlzLmRlYm91bmNlZFByb2Nlc3NRdWV1ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkZWJvdW5jZWRQcm9jZXNzUXVldWUoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5xdWV1ZVRpbWVvdXQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucXVldWVUaW1lb3V0KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnF1ZXVlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnByb2Nlc3NFdmVudFF1ZXVlKCk7XHJcbiAgICB9LCAxMDApOyAvLyBEZWJvdW5jZSBkZSAxMDBtc1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzRXZlbnRRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPT09IDApIHtyZXR1cm47fVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7cmV0dXJuO31cclxuXHJcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIGRvY3VtZW50byBlc3TDoSBsaXN0b1xyXG4gICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgcmVzb2x2ZSwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBQcm9jZXNhciBldmVudG9zIGVuIGxvdGVzXHJcbiAgICAgIGNvbnN0IGV2ZW50c1RvUHJvY2VzcyA9IFsuLi50aGlzLmV2ZW50UXVldWVdO1xyXG4gICAgICB0aGlzLmV2ZW50UXVldWUgPSBbXTtcclxuXHJcbiAgICAgIC8vIEVudmlhciBldmVudG9zIGVuIGxvdGVzIGRlIDUgcGFyYSBldml0YXIgcmF0ZSBsaW1pdGluZ1xyXG4gICAgICBjb25zdCBiYXRjaFNpemUgPSA1O1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50c1RvUHJvY2Vzcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XHJcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBldmVudHNUb1Byb2Nlc3Muc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgYmF0Y2gpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYW5hbHl0aWNzL2V2ZW50cycsIHtcclxuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZXZlbnQpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEVuIGNhc28gZGUgZXJyb3IsIGFsbWFjZW5hciBlbCBldmVudG8gcGFyYSByZWludGVudG9cclxuICAgICAgICAgICAgdGhpcy5zdG9yZUV2ZW50Rm9yUmV0cnkoZXZlbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGF1c2EgZW50cmUgbG90ZXMgcGFyYSBldml0YXIgcmF0ZSBsaW1pdGluZ1xyXG4gICAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgZXZlbnRzVG9Qcm9jZXNzLmxlbmd0aCkge1xyXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0FuYWx5dGljcyBxdWV1ZSBwcm9jZXNzaW5nIGVycm9yIChub24tY3JpdGljYWwpOicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdG9yZUV2ZW50Rm9yUmV0cnkoZXZlbnQ6IEFuYWx5dGljc0V2ZW50KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgIC8vIFVzYXIgcGFyc2luZyBzZWd1cm8gcGFyYSBldml0YXIgZXJyb3JlcyBKU09OXHJcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FuYWx5dGljc19mYWlsZWRfZXZlbnRzJykgfHwgJ1tdJztcclxuICAgICAgICBsZXQgZmFpbGVkRXZlbnRzOiBBbmFseXRpY3NFdmVudFtdID0gW107XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBmYWlsZWRFdmVudHMgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICAvLyBWZXJpZmljYXIgcXVlIHNlYSB1biBhcnJheSB2w6FsaWRvXHJcbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmFpbGVkRXZlbnRzKSkge1xyXG4gICAgICAgICAgICBmYWlsZWRFdmVudHMgPSBbXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNpbmcgYW5hbHl0aWNzIGZhaWxlZCBldmVudHMsIHJlc2V0dGluZzonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICAgIGZhaWxlZEV2ZW50cyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmFpbGVkRXZlbnRzLnB1c2goZXZlbnQpO1xyXG5cclxuICAgICAgICAvLyBMaW1pdGFyIGEgbG9zIMO6bHRpbW9zIDUwIGV2ZW50b3MgZmFsbGlkb3NcclxuICAgICAgICBpZiAoZmFpbGVkRXZlbnRzLmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgICAgICBmYWlsZWRFdmVudHMuc3BsaWNlKDAsIGZhaWxlZEV2ZW50cy5sZW5ndGggLSA1MCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYW5hbHl0aWNzX2ZhaWxlZF9ldmVudHMnLCBKU09OLnN0cmluZ2lmeShmYWlsZWRFdmVudHMpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JhciBlcnJvcmVzIGRlIGxvY2FsU3RvcmFnZVxyXG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHN0b3JpbmcgYW5hbHl0aWNzIGV2ZW50IGZvciByZXRyeTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0RXZlbnRzKCk6IEFuYWx5dGljc0V2ZW50W10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmV2ZW50c107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25zKCk6IFVzZXJJbnRlcmFjdGlvbltdIHtcclxuICAgIHJldHVybiBbLi4udGhpcy5pbnRlcmFjdGlvbnNdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFNlc3Npb25JZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbklkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNsZWFyRGF0YSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZXZlbnRzID0gW107XHJcbiAgICB0aGlzLmludGVyYWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XHJcblxyXG4gICAgLy8gTGltcGlhciB0aW1lb3V0c1xyXG4gICAgaWYgKHRoaXMucXVldWVUaW1lb3V0KSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnF1ZXVlVGltZW91dCk7XHJcbiAgICAgIHRoaXMucXVldWVUaW1lb3V0ID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaXNhYmxlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlbmFibGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzRW5hYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDb252ZXJzaW9uTWV0cmljcygpOiBDb252ZXJzaW9uTWV0cmljcyB7XHJcbiAgICBjb25zdCBlY29tbWVyY2VFdmVudHMgPSB0aGlzLmV2ZW50cy5maWx0ZXIoZSA9PiBlLmNhdGVnb3J5ID09PSAnc2hvcCcpO1xyXG4gICAgXHJcbiAgICBjb25zdCBjYXJ0QWRkaXRpb25zID0gZWNvbW1lcmNlRXZlbnRzLmZpbHRlcihlID0+IGUuYWN0aW9uID09PSAnYWRkX3RvX2NhcnQnKS5sZW5ndGg7XHJcbiAgICBjb25zdCBjYXJ0UmVtb3ZhbHMgPSBlY29tbWVyY2VFdmVudHMuZmlsdGVyKGUgPT4gZS5hY3Rpb24gPT09ICdyZW1vdmVfZnJvbV9jYXJ0JykubGVuZ3RoO1xyXG4gICAgY29uc3QgY2hlY2tvdXRTdGFydHMgPSBlY29tbWVyY2VFdmVudHMuZmlsdGVyKGUgPT4gZS5hY3Rpb24gPT09ICdiZWdpbl9jaGVja291dCcpLmxlbmd0aDtcclxuICAgIGNvbnN0IGNoZWNrb3V0Q29tcGxldGlvbnMgPSBlY29tbWVyY2VFdmVudHMuZmlsdGVyKGUgPT4gZS5hY3Rpb24gPT09ICdwdXJjaGFzZScpLmxlbmd0aDtcclxuICAgIGNvbnN0IHByb2R1Y3RWaWV3cyA9IHRoaXMuZXZlbnRzLmZpbHRlcihlID0+IGUuY2F0ZWdvcnkgPT09ICduYXZpZ2F0aW9uJyAmJiBlLmxhYmVsPy5pbmNsdWRlcygnL3Byb2R1Y3QvJykpLmxlbmd0aDtcclxuICAgIGNvbnN0IGNhdGVnb3J5Vmlld3MgPSB0aGlzLmV2ZW50cy5maWx0ZXIoZSA9PiBlLmNhdGVnb3J5ID09PSAnbmF2aWdhdGlvbicgJiYgZS5sYWJlbD8uaW5jbHVkZXMoJy9jYXRlZ29yeS8nKSkubGVuZ3RoO1xyXG4gICAgY29uc3Qgc2VhcmNoUXVlcmllcyA9IGVjb21tZXJjZUV2ZW50cy5maWx0ZXIoZSA9PiBlLmFjdGlvbiA9PT0gJ3NlYXJjaCcpLmxlbmd0aDtcclxuXHJcbiAgICBjb25zdCBjb252ZXJzaW9uUmF0ZSA9IGNoZWNrb3V0U3RhcnRzID4gMCA/IChjaGVja291dENvbXBsZXRpb25zIC8gY2hlY2tvdXRTdGFydHMpICogMTAwIDogMDtcclxuICAgIGNvbnN0IGNhcnRBYmFuZG9ubWVudFJhdGUgPSBjYXJ0QWRkaXRpb25zID4gMCA/ICgoY2FydEFkZGl0aW9ucyAtIGNoZWNrb3V0Q29tcGxldGlvbnMpIC8gY2FydEFkZGl0aW9ucykgKiAxMDAgOiAwO1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhciBBT1YgZGVzZGUgbG9zIGV2ZW50b3MgZGUgY29tcHJhXHJcbiAgICBjb25zdCBwdXJjaGFzZUV2ZW50cyA9IGVjb21tZXJjZUV2ZW50cy5maWx0ZXIoZSA9PiBlLmFjdGlvbiA9PT0gJ3B1cmNoYXNlJyk7XHJcbiAgICBjb25zdCB0b3RhbFZhbHVlID0gcHVyY2hhc2VFdmVudHMucmVkdWNlKChzdW0sIGV2ZW50KSA9PiBzdW0gKyAoZXZlbnQudmFsdWUgfHwgMCksIDApO1xyXG4gICAgY29uc3QgYXZlcmFnZU9yZGVyVmFsdWUgPSBwdXJjaGFzZUV2ZW50cy5sZW5ndGggPiAwID8gdG90YWxWYWx1ZSAvIHB1cmNoYXNlRXZlbnRzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2FydEFkZGl0aW9ucyxcclxuICAgICAgY2FydFJlbW92YWxzLFxyXG4gICAgICBjaGVja291dFN0YXJ0cyxcclxuICAgICAgY2hlY2tvdXRDb21wbGV0aW9ucyxcclxuICAgICAgcHJvZHVjdFZpZXdzLFxyXG4gICAgICBjYXRlZ29yeVZpZXdzLFxyXG4gICAgICBzZWFyY2hRdWVyaWVzLFxyXG4gICAgICBjb252ZXJzaW9uUmF0ZSxcclxuICAgICAgYXZlcmFnZU9yZGVyVmFsdWUsXHJcbiAgICAgIGNhcnRBYmFuZG9ubWVudFJhdGUsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gU2luZ2xldG9uIGluc3RhbmNlXHJcbmV4cG9ydCBjb25zdCBhbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzTWFuYWdlcigpO1xyXG5cclxuLy8gVXRpbGl0eSBmdW5jdGlvbnMgY29uIG1hbmVqbyBkZSBlcnJvcmVzXHJcbmV4cG9ydCBjb25zdCB0cmFja0V2ZW50ID0gYXN5bmMgKFxyXG4gIGV2ZW50OiBzdHJpbmcsXHJcbiAgY2F0ZWdvcnk6IHN0cmluZyxcclxuICBhY3Rpb246IHN0cmluZyxcclxuICBsYWJlbD86IHN0cmluZyxcclxuICB2YWx1ZT86IG51bWJlcixcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IG9wdGltaXplZEFuYWx5dGljcy50cmFja0V2ZW50KGV2ZW50LCBjYXRlZ29yeSwgYWN0aW9uLCBsYWJlbCwgdmFsdWUsIG1ldGFkYXRhKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQW5hbHl0aWNzIHRyYWNrRXZlbnQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0cmFja0Vjb21tZXJjZUV2ZW50ID0gYXN5bmMgKGFjdGlvbjogc3RyaW5nLCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGFuYWx5dGljcy50cmFja0Vjb21tZXJjZUV2ZW50KGFjdGlvbiwgZGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0FuYWx5dGljcyB0cmFja0Vjb21tZXJjZUV2ZW50IGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdHJhY2tQYWdlVmlldyA9IGFzeW5jIChwYWdlPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGFuYWx5dGljcy50cmFja1BhZ2VWaWV3KHBhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdBbmFseXRpY3MgdHJhY2tQYWdlVmlldyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRyYWNrQ29udmVyc2lvbiA9IGFzeW5jICh0eXBlOiBzdHJpbmcsIHZhbHVlPzogbnVtYmVyLCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgYW5hbHl0aWNzLnRyYWNrQ29udmVyc2lvbih0eXBlLCB2YWx1ZSwgbWV0YWRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdBbmFseXRpY3MgdHJhY2tDb252ZXJzaW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZUFuYWx5dGljcyA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgYW5hbHl0aWNzLmluaXRpYWxpemUoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQW5hbHl0aWNzIGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJhbmFseXRpY3MiLCJpbml0aWFsaXplQW5hbHl0aWNzIiwidHJhY2tDb252ZXJzaW9uIiwidHJhY2tFY29tbWVyY2VFdmVudCIsInRyYWNrRXZlbnQiLCJ0cmFja1BhZ2VWaWV3IiwiQW5hbHl0aWNzTWFuYWdlciIsImV2ZW50cyIsImludGVyYWN0aW9ucyIsImlzRW5hYmxlZCIsImlzSW5pdGlhbGl6ZWQiLCJpbml0aWFsaXphdGlvblByb21pc2UiLCJldmVudFF1ZXVlIiwiaXNQcm9jZXNzaW5nUXVldWUiLCJxdWV1ZVRpbWVvdXQiLCJzZXNzaW9uSWQiLCJnZW5lcmF0ZVNlc3Npb25JZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJlbnN1cmVJbml0aWFsaXplZCIsImluaXRpYWxpemVUcmFja2luZyIsImVycm9yIiwid2luZG93IiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImhhbmRsZUNsaWNrIiwiYmluZCIsInNjcm9sbFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidHJhY2tJbnRlcmFjdGlvbiIsInNjcm9sbFgiLCJzY3JvbGxZIiwiaGFuZGxlSW5wdXQiLCJoYW5kbGVGb2N1cyIsImNvbnNvbGUiLCJ3YXJuIiwiZXZlbnQiLCJ0YXJnZXQiLCJlbGVtZW50SW5mbyIsImdldEVsZW1lbnRJbmZvIiwiY2xpZW50WCIsImNsaWVudFkiLCJjbG9zZXN0IiwicHJvZHVjdElkIiwiZ2V0QXR0cmlidXRlIiwicHJvZHVjdE5hbWUiLCJwcmljZSIsImNhcnRWYWx1ZSIsIml0ZW1Db3VudCIsImVsZW1lbnQiLCJpZCIsImNsYXNzTmFtZSIsImNsYXNzTmFtZVZhbHVlIiwiY2xhc3NOYW1lU3RyIiwidHJpbSIsInNwbGl0IiwiZmlsdGVyIiwiY2xzIiwiam9pbiIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImRhdGFBbmFseXRpY3MiLCJjYXRlZ29yeSIsImFjdGlvbiIsImxhYmVsIiwidmFsdWUiLCJtZXRhZGF0YSIsImFuYWx5dGljc0V2ZW50IiwidGltZXN0YW1wIiwicGFnZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJwdXNoIiwic2VuZFRvQW5hbHl0aWNzIiwiZGF0YSIsInVuZGVmaW5lZCIsImN1cnJlbnRQYWdlIiwidHlwZSIsIngiLCJ5IiwiaW50ZXJhY3Rpb24iLCJndGFnIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsImN1c3RvbV9wYXJhbWV0ZXJfc2Vzc2lvbl9pZCIsInNlbmRUb0ludGVybmFsQVBJIiwiZGVib3VuY2VkUHJvY2Vzc1F1ZXVlIiwicHJvY2Vzc0V2ZW50UXVldWUiLCJsZW5ndGgiLCJldmVudHNUb1Byb2Nlc3MiLCJiYXRjaFNpemUiLCJpIiwiYmF0Y2giLCJzbGljZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RvcmVFdmVudEZvclJldHJ5IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibG9jYWxTdG9yYWdlIiwic3RvcmVkIiwiZ2V0SXRlbSIsImZhaWxlZEV2ZW50cyIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwicGFyc2VFcnJvciIsInNwbGljZSIsInNldEl0ZW0iLCJnZXRFdmVudHMiLCJnZXRJbnRlcmFjdGlvbnMiLCJnZXRTZXNzaW9uSWQiLCJjbGVhckRhdGEiLCJkaXNhYmxlIiwiZW5hYmxlIiwiaW5pdGlhbGl6ZSIsImdldENvbnZlcnNpb25NZXRyaWNzIiwiZWNvbW1lcmNlRXZlbnRzIiwiZSIsImNhcnRBZGRpdGlvbnMiLCJjYXJ0UmVtb3ZhbHMiLCJjaGVja291dFN0YXJ0cyIsImNoZWNrb3V0Q29tcGxldGlvbnMiLCJwcm9kdWN0Vmlld3MiLCJpbmNsdWRlcyIsImNhdGVnb3J5Vmlld3MiLCJzZWFyY2hRdWVyaWVzIiwiY29udmVyc2lvblJhdGUiLCJjYXJ0QWJhbmRvbm1lbnRSYXRlIiwicHVyY2hhc2VFdmVudHMiLCJ0b3RhbFZhbHVlIiwicmVkdWNlIiwic3VtIiwiYXZlcmFnZU9yZGVyVmFsdWUiLCJvcHRpbWl6ZWRBbmFseXRpY3Mi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