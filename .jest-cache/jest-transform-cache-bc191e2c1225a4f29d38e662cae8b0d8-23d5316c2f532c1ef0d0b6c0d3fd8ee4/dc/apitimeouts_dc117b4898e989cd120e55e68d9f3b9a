bffc6da7a7fe0b9185dbfd90c452467b
// ===================================
// PINTEYA E-COMMERCE - CONFIGURACIÓN CENTRALIZADA DE TIMEOUTS
// ===================================
// Configuración centralizada para todos los timeouts de APIs
// con valores por defecto y variables de entorno
// ===================================
// TIPOS Y INTERFACES
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get API_TIMEOUTS () {
        return API_TIMEOUTS;
    },
    get ENDPOINT_TIMEOUTS () {
        return ENDPOINT_TIMEOUTS;
    },
    get createTimeoutController () {
        return createTimeoutController;
    },
    get fetchWithTimeout () {
        return fetchWithTimeout;
    },
    get getEndpointTimeouts () {
        return getEndpointTimeouts;
    },
    get getTimeout () {
        return getTimeout;
    },
    get logTimeoutConfig () {
        return logTimeoutConfig;
    },
    get validateTimeoutConfig () {
        return validateTimeoutConfig;
    },
    get withDatabaseTimeout () {
        return withDatabaseTimeout;
    },
    get withExternalTimeout () {
        return withExternalTimeout;
    },
    get withTimeout () {
        return withTimeout;
    }
});
// ===================================
// CONFIGURACIÓN BASE DE TIMEOUTS
// ===================================
const DEFAULT_TIMEOUTS = {
    // Timeout por defecto para operaciones generales
    default: 30000,
    // Timeout para operaciones de base de datos
    database: 15000,
    // Timeout para APIs externas (MercadoPago, etc.)
    external: 45000,
    // Timeout para uploads de archivos
    upload: 120000,
    // Timeout para operaciones de pago
    payment: 60000,
    // Timeout para operaciones de autenticación
    auth: 20000,
    // Timeout para operaciones administrativas
    admin: 45000,
    // Timeout para webhooks
    webhook: 10000,
    // Timeout para envío de emails
    email: 30000,
    // Timeout para procesamiento de imágenes
    image: 90000
};
// ===================================
// FUNCIÓN PARA OBTENER TIMEOUT DESDE ENV
// ===================================
function getTimeoutFromEnv(key, defaultValue) {
    const envValue = process.env[`API_TIMEOUT_${key.toUpperCase()}`];
    if (!envValue) {
        return defaultValue;
    }
    const parsed = parseInt(envValue, 10);
    if (isNaN(parsed) || parsed <= 0) {
        console.warn(`[TIMEOUT_CONFIG] Invalid timeout value for ${key}: ${envValue}, using default: ${defaultValue}`);
        return defaultValue;
    }
    return parsed;
}
const API_TIMEOUTS = {
    default: getTimeoutFromEnv('DEFAULT', DEFAULT_TIMEOUTS.default),
    database: getTimeoutFromEnv('DATABASE', DEFAULT_TIMEOUTS.database),
    external: getTimeoutFromEnv('EXTERNAL', DEFAULT_TIMEOUTS.external),
    upload: getTimeoutFromEnv('UPLOAD', DEFAULT_TIMEOUTS.upload),
    payment: getTimeoutFromEnv('PAYMENT', DEFAULT_TIMEOUTS.payment),
    auth: getTimeoutFromEnv('AUTH', DEFAULT_TIMEOUTS.auth),
    admin: getTimeoutFromEnv('ADMIN', DEFAULT_TIMEOUTS.admin),
    webhook: getTimeoutFromEnv('WEBHOOK', DEFAULT_TIMEOUTS.webhook),
    email: getTimeoutFromEnv('EMAIL', DEFAULT_TIMEOUTS.email),
    image: getTimeoutFromEnv('IMAGE', DEFAULT_TIMEOUTS.image)
};
const ENDPOINT_TIMEOUTS = {
    // APIs de productos
    '/api/products': {
        connection: 5000,
        request: API_TIMEOUTS.database,
        response: 10000,
        total: API_TIMEOUTS.database + 15000
    },
    // APIs de órdenes
    '/api/orders': {
        connection: 5000,
        request: API_TIMEOUTS.database,
        response: 15000,
        total: API_TIMEOUTS.database + 20000
    },
    // APIs de pagos
    '/api/payments': {
        connection: 10000,
        request: API_TIMEOUTS.payment,
        response: 20000,
        total: Math.max(API_TIMEOUTS.payment + 30000, API_TIMEOUTS.external)
    },
    // APIs de autenticación
    '/api/auth': {
        connection: 3000,
        request: API_TIMEOUTS.auth,
        response: 5000,
        total: API_TIMEOUTS.auth + 8000
    },
    // APIs administrativas
    '/api/admin': {
        connection: 5000,
        request: API_TIMEOUTS.admin,
        response: 15000,
        total: API_TIMEOUTS.admin + 20000
    },
    // Webhooks
    '/api/webhooks': {
        connection: 2000,
        request: API_TIMEOUTS.webhook,
        response: 3000,
        total: API_TIMEOUTS.webhook + 5000
    },
    // APIs de upload
    '/api/upload': {
        connection: 10000,
        request: API_TIMEOUTS.upload,
        response: 30000,
        total: API_TIMEOUTS.upload + 40000
    }
};
function getTimeout(type) {
    return API_TIMEOUTS[type];
}
function getEndpointTimeouts(path) {
    // Buscar coincidencia exacta primero
    if (ENDPOINT_TIMEOUTS[path]) {
        return ENDPOINT_TIMEOUTS[path];
    }
    // Buscar coincidencia por prefijo
    const matchingPath = Object.keys(ENDPOINT_TIMEOUTS).find((key)=>path.startsWith(key));
    if (matchingPath) {
        return ENDPOINT_TIMEOUTS[matchingPath];
    }
    // Fallback a timeouts por defecto
    return {
        connection: 5000,
        request: API_TIMEOUTS.default,
        response: 10000,
        total: API_TIMEOUTS.default
    };
}
function createTimeoutController(timeout) {
    const controller = new AbortController();
    const timeoutId = setTimeout(()=>{
        controller.abort();
    }, timeout);
    return {
        controller,
        timeoutId
    };
}
async function fetchWithTimeout(url, options = {}) {
    const timeout = options.timeout || API_TIMEOUTS.default;
    const { controller, timeoutId } = createTimeoutController(timeout);
    try {
        const response = await fetch(url, {
            ...options,
            signal: controller.signal
        });
        clearTimeout(timeoutId);
        return response;
    } catch (error) {
        clearTimeout(timeoutId);
        if (error instanceof Error && error.name === 'AbortError') {
            throw new Error(`Request timeout after ${timeout}ms`);
        }
        throw error;
    }
}
function withDatabaseTimeout(operation, timeout = API_TIMEOUTS.database) {
    const { controller, timeoutId } = createTimeoutController(timeout);
    return operation(controller.signal).finally(()=>clearTimeout(timeoutId));
}
function withExternalTimeout(operation, timeout = API_TIMEOUTS.external) {
    const { controller, timeoutId } = createTimeoutController(timeout);
    return operation(controller.signal).finally(()=>clearTimeout(timeoutId));
}
function withTimeout(operation, timeout = API_TIMEOUTS.default) {
    return new Promise((resolve, reject)=>{
        const timeoutId = setTimeout(()=>{
            reject(new Error(`Operation timeout after ${timeout}ms`));
        }, timeout);
        operation().then(resolve).catch(reject).finally(()=>clearTimeout(timeoutId));
    });
}
function logTimeoutConfig() {
    console.log('[TIMEOUT_CONFIG] Configuración de timeouts cargada:', {
        environment: process.env.NODE_ENV,
        timeouts: API_TIMEOUTS,
        customEnvVars: Object.keys(process.env).filter((key)=>key.startsWith('API_TIMEOUT_')).reduce((acc, key)=>{
            acc[key] = process.env[key];
            return acc;
        }, {})
    });
}
function validateTimeoutConfig() {
    const errors = [];
    Object.entries(API_TIMEOUTS).forEach(([key, value])=>{
        if (typeof value !== 'number' || value <= 0) {
            errors.push(`Invalid timeout for ${key}: ${value}`);
        }
        if (value > 300000) {
            // 5 minutos máximo
            errors.push(`Timeout too high for ${key}: ${value}ms (max: 300000ms)`);
        }
    });
    if (errors.length > 0) {
        console.error('[TIMEOUT_CONFIG] Validation errors:', errors);
        return false;
    }
    return true;
}
// ===================================
// INICIALIZACIÓN
// ===================================
// Validar configuración al cargar el módulo
if (process.env.NODE_ENV !== 'test') {
    validateTimeoutConfig();
    if (process.env.NODE_ENV === 'development') {
        logTimeoutConfig();
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxjb25maWdcXGFwaS10aW1lb3V0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gQ09ORklHVVJBQ0nDk04gQ0VOVFJBTElaQURBIERFIFRJTUVPVVRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ29uZmlndXJhY2nDs24gY2VudHJhbGl6YWRhIHBhcmEgdG9kb3MgbG9zIHRpbWVvdXRzIGRlIEFQSXNcbi8vIGNvbiB2YWxvcmVzIHBvciBkZWZlY3RvIHkgdmFyaWFibGVzIGRlIGVudG9ybm9cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJUE9TIFkgSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lb3V0Q29uZmlnIHtcbiAgZGVmYXVsdDogbnVtYmVyXG4gIGRhdGFiYXNlOiBudW1iZXJcbiAgZXh0ZXJuYWw6IG51bWJlclxuICB1cGxvYWQ6IG51bWJlclxuICBwYXltZW50OiBudW1iZXJcbiAgYXV0aDogbnVtYmVyXG4gIGFkbWluOiBudW1iZXJcbiAgd2ViaG9vazogbnVtYmVyXG4gIGVtYWlsOiBudW1iZXJcbiAgaW1hZ2U6IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVuZHBvaW50VGltZW91dHMge1xuICBjb25uZWN0aW9uOiBudW1iZXJcbiAgcmVxdWVzdDogbnVtYmVyXG4gIHJlc3BvbnNlOiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBQ0nDk04gQkFTRSBERSBUSU1FT1VUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgREVGQVVMVF9USU1FT1VUUyA9IHtcbiAgLy8gVGltZW91dCBwb3IgZGVmZWN0byBwYXJhIG9wZXJhY2lvbmVzIGdlbmVyYWxlc1xuICBkZWZhdWx0OiAzMDAwMCwgLy8gMzAgc2VndW5kb3NcblxuICAvLyBUaW1lb3V0IHBhcmEgb3BlcmFjaW9uZXMgZGUgYmFzZSBkZSBkYXRvc1xuICBkYXRhYmFzZTogMTUwMDAsIC8vIDE1IHNlZ3VuZG9zXG5cbiAgLy8gVGltZW91dCBwYXJhIEFQSXMgZXh0ZXJuYXMgKE1lcmNhZG9QYWdvLCBldGMuKVxuICBleHRlcm5hbDogNDUwMDAsIC8vIDQ1IHNlZ3VuZG9zXG5cbiAgLy8gVGltZW91dCBwYXJhIHVwbG9hZHMgZGUgYXJjaGl2b3NcbiAgdXBsb2FkOiAxMjAwMDAsIC8vIDIgbWludXRvc1xuXG4gIC8vIFRpbWVvdXQgcGFyYSBvcGVyYWNpb25lcyBkZSBwYWdvXG4gIHBheW1lbnQ6IDYwMDAwLCAvLyAxIG1pbnV0b1xuXG4gIC8vIFRpbWVvdXQgcGFyYSBvcGVyYWNpb25lcyBkZSBhdXRlbnRpY2FjacOzblxuICBhdXRoOiAyMDAwMCwgLy8gMjAgc2VndW5kb3NcblxuICAvLyBUaW1lb3V0IHBhcmEgb3BlcmFjaW9uZXMgYWRtaW5pc3RyYXRpdmFzXG4gIGFkbWluOiA0NTAwMCwgLy8gNDUgc2VndW5kb3NcblxuICAvLyBUaW1lb3V0IHBhcmEgd2ViaG9va3NcbiAgd2ViaG9vazogMTAwMDAsIC8vIDEwIHNlZ3VuZG9zXG5cbiAgLy8gVGltZW91dCBwYXJhIGVudsOtbyBkZSBlbWFpbHNcbiAgZW1haWw6IDMwMDAwLCAvLyAzMCBzZWd1bmRvc1xuXG4gIC8vIFRpbWVvdXQgcGFyYSBwcm9jZXNhbWllbnRvIGRlIGltw6FnZW5lc1xuICBpbWFnZTogOTAwMDAsIC8vIDEuNSBtaW51dG9zXG59IGFzIGNvbnN0XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DScOTTiBQQVJBIE9CVEVORVIgVElNRU9VVCBERVNERSBFTlZcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGdldFRpbWVvdXRGcm9tRW52KGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlcik6IG51bWJlciB7XG4gIGNvbnN0IGVudlZhbHVlID0gcHJvY2Vzcy5lbnZbYEFQSV9USU1FT1VUXyR7a2V5LnRvVXBwZXJDYXNlKCl9YF1cbiAgaWYgKCFlbnZWYWx1ZSkge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgfVxuXG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KGVudlZhbHVlLCAxMClcbiAgaWYgKGlzTmFOKHBhcnNlZCkgfHwgcGFyc2VkIDw9IDApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgW1RJTUVPVVRfQ09ORklHXSBJbnZhbGlkIHRpbWVvdXQgdmFsdWUgZm9yICR7a2V5fTogJHtlbnZWYWx1ZX0sIHVzaW5nIGRlZmF1bHQ6ICR7ZGVmYXVsdFZhbHVlfWBcbiAgICApXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICB9XG5cbiAgcmV0dXJuIHBhcnNlZFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBQ0nDk04gRklOQUwgREUgVElNRU9VVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBBUElfVElNRU9VVFM6IFRpbWVvdXRDb25maWcgPSB7XG4gIGRlZmF1bHQ6IGdldFRpbWVvdXRGcm9tRW52KCdERUZBVUxUJywgREVGQVVMVF9USU1FT1VUUy5kZWZhdWx0KSxcbiAgZGF0YWJhc2U6IGdldFRpbWVvdXRGcm9tRW52KCdEQVRBQkFTRScsIERFRkFVTFRfVElNRU9VVFMuZGF0YWJhc2UpLFxuICBleHRlcm5hbDogZ2V0VGltZW91dEZyb21FbnYoJ0VYVEVSTkFMJywgREVGQVVMVF9USU1FT1VUUy5leHRlcm5hbCksXG4gIHVwbG9hZDogZ2V0VGltZW91dEZyb21FbnYoJ1VQTE9BRCcsIERFRkFVTFRfVElNRU9VVFMudXBsb2FkKSxcbiAgcGF5bWVudDogZ2V0VGltZW91dEZyb21FbnYoJ1BBWU1FTlQnLCBERUZBVUxUX1RJTUVPVVRTLnBheW1lbnQpLFxuICBhdXRoOiBnZXRUaW1lb3V0RnJvbUVudignQVVUSCcsIERFRkFVTFRfVElNRU9VVFMuYXV0aCksXG4gIGFkbWluOiBnZXRUaW1lb3V0RnJvbUVudignQURNSU4nLCBERUZBVUxUX1RJTUVPVVRTLmFkbWluKSxcbiAgd2ViaG9vazogZ2V0VGltZW91dEZyb21FbnYoJ1dFQkhPT0snLCBERUZBVUxUX1RJTUVPVVRTLndlYmhvb2spLFxuICBlbWFpbDogZ2V0VGltZW91dEZyb21FbnYoJ0VNQUlMJywgREVGQVVMVF9USU1FT1VUUy5lbWFpbCksXG4gIGltYWdlOiBnZXRUaW1lb3V0RnJvbUVudignSU1BR0UnLCBERUZBVUxUX1RJTUVPVVRTLmltYWdlKSxcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRJTUVPVVRTIEVTUEVDw41GSUNPUyBQT1IgRU5EUE9JTlRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBFTkRQT0lOVF9USU1FT1VUUzogUmVjb3JkPHN0cmluZywgRW5kcG9pbnRUaW1lb3V0cz4gPSB7XG4gIC8vIEFQSXMgZGUgcHJvZHVjdG9zXG4gICcvYXBpL3Byb2R1Y3RzJzoge1xuICAgIGNvbm5lY3Rpb246IDUwMDAsXG4gICAgcmVxdWVzdDogQVBJX1RJTUVPVVRTLmRhdGFiYXNlLFxuICAgIHJlc3BvbnNlOiAxMDAwMCxcbiAgICB0b3RhbDogQVBJX1RJTUVPVVRTLmRhdGFiYXNlICsgMTUwMDAsIC8vIGRhdGFiYXNlICsgYnVmZmVyXG4gIH0sXG5cbiAgLy8gQVBJcyBkZSDDs3JkZW5lc1xuICAnL2FwaS9vcmRlcnMnOiB7XG4gICAgY29ubmVjdGlvbjogNTAwMCxcbiAgICByZXF1ZXN0OiBBUElfVElNRU9VVFMuZGF0YWJhc2UsXG4gICAgcmVzcG9uc2U6IDE1MDAwLFxuICAgIHRvdGFsOiBBUElfVElNRU9VVFMuZGF0YWJhc2UgKyAyMDAwMCwgLy8gZGF0YWJhc2UgKyBidWZmZXJcbiAgfSxcblxuICAvLyBBUElzIGRlIHBhZ29zXG4gICcvYXBpL3BheW1lbnRzJzoge1xuICAgIGNvbm5lY3Rpb246IDEwMDAwLFxuICAgIHJlcXVlc3Q6IEFQSV9USU1FT1VUUy5wYXltZW50LFxuICAgIHJlc3BvbnNlOiAyMDAwMCxcbiAgICB0b3RhbDogTWF0aC5tYXgoQVBJX1RJTUVPVVRTLnBheW1lbnQgKyAzMDAwMCwgQVBJX1RJTUVPVVRTLmV4dGVybmFsKSxcbiAgfSxcblxuICAvLyBBUElzIGRlIGF1dGVudGljYWNpw7NuXG4gICcvYXBpL2F1dGgnOiB7XG4gICAgY29ubmVjdGlvbjogMzAwMCxcbiAgICByZXF1ZXN0OiBBUElfVElNRU9VVFMuYXV0aCxcbiAgICByZXNwb25zZTogNTAwMCxcbiAgICB0b3RhbDogQVBJX1RJTUVPVVRTLmF1dGggKyA4MDAwLFxuICB9LFxuXG4gIC8vIEFQSXMgYWRtaW5pc3RyYXRpdmFzXG4gICcvYXBpL2FkbWluJzoge1xuICAgIGNvbm5lY3Rpb246IDUwMDAsXG4gICAgcmVxdWVzdDogQVBJX1RJTUVPVVRTLmFkbWluLFxuICAgIHJlc3BvbnNlOiAxNTAwMCxcbiAgICB0b3RhbDogQVBJX1RJTUVPVVRTLmFkbWluICsgMjAwMDAsXG4gIH0sXG5cbiAgLy8gV2ViaG9va3NcbiAgJy9hcGkvd2ViaG9va3MnOiB7XG4gICAgY29ubmVjdGlvbjogMjAwMCxcbiAgICByZXF1ZXN0OiBBUElfVElNRU9VVFMud2ViaG9vayxcbiAgICByZXNwb25zZTogMzAwMCxcbiAgICB0b3RhbDogQVBJX1RJTUVPVVRTLndlYmhvb2sgKyA1MDAwLFxuICB9LFxuXG4gIC8vIEFQSXMgZGUgdXBsb2FkXG4gICcvYXBpL3VwbG9hZCc6IHtcbiAgICBjb25uZWN0aW9uOiAxMDAwMCxcbiAgICByZXF1ZXN0OiBBUElfVElNRU9VVFMudXBsb2FkLFxuICAgIHJlc3BvbnNlOiAzMDAwMCxcbiAgICB0b3RhbDogQVBJX1RJTUVPVVRTLnVwbG9hZCArIDQwMDAwLFxuICB9LFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSEVMUEVSUyBQQVJBIE9CVEVORVIgVElNRU9VVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogT2J0aWVuZSBlbCB0aW1lb3V0IGFwcm9waWFkbyBwYXJhIHVuIHRpcG8gZGUgb3BlcmFjacOzblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZW91dCh0eXBlOiBrZXlvZiBUaW1lb3V0Q29uZmlnKTogbnVtYmVyIHtcbiAgcmV0dXJuIEFQSV9USU1FT1VUU1t0eXBlXVxufVxuXG4vKipcbiAqIE9idGllbmUgbG9zIHRpbWVvdXRzIGVzcGVjw61maWNvcyBwYXJhIHVuIGVuZHBvaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmRwb2ludFRpbWVvdXRzKHBhdGg6IHN0cmluZyk6IEVuZHBvaW50VGltZW91dHMge1xuICAvLyBCdXNjYXIgY29pbmNpZGVuY2lhIGV4YWN0YSBwcmltZXJvXG4gIGlmIChFTkRQT0lOVF9USU1FT1VUU1twYXRoXSkge1xuICAgIHJldHVybiBFTkRQT0lOVF9USU1FT1VUU1twYXRoXVxuICB9XG5cbiAgLy8gQnVzY2FyIGNvaW5jaWRlbmNpYSBwb3IgcHJlZmlqb1xuICBjb25zdCBtYXRjaGluZ1BhdGggPSBPYmplY3Qua2V5cyhFTkRQT0lOVF9USU1FT1VUUykuZmluZChrZXkgPT4gcGF0aC5zdGFydHNXaXRoKGtleSkpXG5cbiAgaWYgKG1hdGNoaW5nUGF0aCkge1xuICAgIHJldHVybiBFTkRQT0lOVF9USU1FT1VUU1ttYXRjaGluZ1BhdGhdXG4gIH1cblxuICAvLyBGYWxsYmFjayBhIHRpbWVvdXRzIHBvciBkZWZlY3RvXG4gIHJldHVybiB7XG4gICAgY29ubmVjdGlvbjogNTAwMCxcbiAgICByZXF1ZXN0OiBBUElfVElNRU9VVFMuZGVmYXVsdCxcbiAgICByZXNwb25zZTogMTAwMDAsXG4gICAgdG90YWw6IEFQSV9USU1FT1VUUy5kZWZhdWx0LFxuICB9XG59XG5cbi8qKlxuICogQ3JlYSB1biBBYm9ydENvbnRyb2xsZXIgY29uIHRpbWVvdXQgYXV0b23DoXRpY29cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRpbWVvdXRDb250cm9sbGVyKHRpbWVvdXQ6IG51bWJlcik6IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyXG4gIHRpbWVvdXRJZDogTm9kZUpTLlRpbWVvdXRcbn0ge1xuICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGNvbnRyb2xsZXIuYWJvcnQoKVxuICB9LCB0aW1lb3V0KVxuXG4gIHJldHVybiB7IGNvbnRyb2xsZXIsIHRpbWVvdXRJZCB9XG59XG5cbi8qKlxuICogV3JhcHBlciBwYXJhIGZldGNoIGNvbiB0aW1lb3V0IGF1dG9tw6F0aWNvXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhUaW1lb3V0KFxuICB1cmw6IHN0cmluZyxcbiAgb3B0aW9uczogUmVxdWVzdEluaXQgJiB7IHRpbWVvdXQ/OiBudW1iZXIgfSA9IHt9XG4pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gIGNvbnN0IHRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQgfHwgQVBJX1RJTUVPVVRTLmRlZmF1bHRcbiAgY29uc3QgeyBjb250cm9sbGVyLCB0aW1lb3V0SWQgfSA9IGNyZWF0ZVRpbWVvdXRDb250cm9sbGVyKHRpbWVvdXQpXG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgfSlcblxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcblxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1ZXN0IHRpbWVvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zYClcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBwYXJhIG9wZXJhY2lvbmVzIGRlIGJhc2UgZGUgZGF0b3MgY29uIHRpbWVvdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhEYXRhYmFzZVRpbWVvdXQ8VD4oXG4gIG9wZXJhdGlvbjogKHNpZ25hbDogQWJvcnRTaWduYWwpID0+IFByb21pc2U8VD4sXG4gIHRpbWVvdXQ6IG51bWJlciA9IEFQSV9USU1FT1VUUy5kYXRhYmFzZVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IHsgY29udHJvbGxlciwgdGltZW91dElkIH0gPSBjcmVhdGVUaW1lb3V0Q29udHJvbGxlcih0aW1lb3V0KVxuXG4gIHJldHVybiBvcGVyYXRpb24oY29udHJvbGxlci5zaWduYWwpLmZpbmFsbHkoKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkpXG59XG5cbi8qKlxuICogV3JhcHBlciBwYXJhIG9wZXJhY2lvbmVzIGV4dGVybmFzIGNvbiB0aW1lb3V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXh0ZXJuYWxUaW1lb3V0PFQ+KFxuICBvcGVyYXRpb246IChzaWduYWw6IEFib3J0U2lnbmFsKSA9PiBQcm9taXNlPFQ+LFxuICB0aW1lb3V0OiBudW1iZXIgPSBBUElfVElNRU9VVFMuZXh0ZXJuYWxcbik6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IGNvbnRyb2xsZXIsIHRpbWVvdXRJZCB9ID0gY3JlYXRlVGltZW91dENvbnRyb2xsZXIodGltZW91dClcblxuICByZXR1cm4gb3BlcmF0aW9uKGNvbnRyb2xsZXIuc2lnbmFsKS5maW5hbGx5KCgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpKVxufVxuXG4vKipcbiAqIFdyYXBwZXIgZ2Vuw6lyaWNvIHBhcmEgb3BlcmFjaW9uZXMgY29uIHRpbWVvdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhUaW1lb3V0PFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIHRpbWVvdXQ6IG51bWJlciA9IEFQSV9USU1FT1VUUy5kZWZhdWx0XG4pOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYE9wZXJhdGlvbiB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApKVxuICAgIH0sIHRpbWVvdXQpXG5cbiAgICBvcGVyYXRpb24oKVxuICAgICAgLnRoZW4ocmVzb2x2ZSlcbiAgICAgIC5jYXRjaChyZWplY3QpXG4gICAgICAuZmluYWxseSgoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dElkKSlcbiAgfSlcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTkZJR1VSQUNJw5NOIERFIExPR0dJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogTG9nIGRlIHRpbWVvdXQgY29uZmlndXJhZG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ1RpbWVvdXRDb25maWcoKTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKCdbVElNRU9VVF9DT05GSUddIENvbmZpZ3VyYWNpw7NuIGRlIHRpbWVvdXRzIGNhcmdhZGE6Jywge1xuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgICB0aW1lb3V0czogQVBJX1RJTUVPVVRTLFxuICAgIGN1c3RvbUVudlZhcnM6IE9iamVjdC5rZXlzKHByb2Nlc3MuZW52KVxuICAgICAgLmZpbHRlcihrZXkgPT4ga2V5LnN0YXJ0c1dpdGgoJ0FQSV9USU1FT1VUXycpKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKGFjYywga2V5KSA9PiB7XG4gICAgICAgICAgYWNjW2tleV0gPSBwcm9jZXNzLmVudltrZXldXG4gICAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgICB9LFxuICAgICAgICB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+XG4gICAgICApLFxuICB9KVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBQ0nDk04gREUgQ09ORklHVVJBQ0nDk05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVmFsaWRhIHF1ZSB0b2RvcyBsb3MgdGltZW91dHMgZXN0w6luIGNvbmZpZ3VyYWRvcyBjb3JyZWN0YW1lbnRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRpbWVvdXRDb25maWcoKTogYm9vbGVhbiB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXVxuXG4gIE9iamVjdC5lbnRyaWVzKEFQSV9USU1FT1VUUykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgfHwgdmFsdWUgPD0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goYEludmFsaWQgdGltZW91dCBmb3IgJHtrZXl9OiAke3ZhbHVlfWApXG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID4gMzAwMDAwKSB7XG4gICAgICAvLyA1IG1pbnV0b3MgbcOheGltb1xuICAgICAgZXJyb3JzLnB1c2goYFRpbWVvdXQgdG9vIGhpZ2ggZm9yICR7a2V5fTogJHt2YWx1ZX1tcyAobWF4OiAzMDAwMDBtcylgKVxuICAgIH1cbiAgfSlcblxuICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdbVElNRU9VVF9DT05GSUddIFZhbGlkYXRpb24gZXJyb3JzOicsIGVycm9ycylcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBJTklDSUFMSVpBQ0nDk05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIFZhbGlkYXIgY29uZmlndXJhY2nDs24gYWwgY2FyZ2FyIGVsIG3Ds2R1bG9cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gIHZhbGlkYXRlVGltZW91dENvbmZpZygpXG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgbG9nVGltZW91dENvbmZpZygpXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJBUElfVElNRU9VVFMiLCJFTkRQT0lOVF9USU1FT1VUUyIsImNyZWF0ZVRpbWVvdXRDb250cm9sbGVyIiwiZmV0Y2hXaXRoVGltZW91dCIsImdldEVuZHBvaW50VGltZW91dHMiLCJnZXRUaW1lb3V0IiwibG9nVGltZW91dENvbmZpZyIsInZhbGlkYXRlVGltZW91dENvbmZpZyIsIndpdGhEYXRhYmFzZVRpbWVvdXQiLCJ3aXRoRXh0ZXJuYWxUaW1lb3V0Iiwid2l0aFRpbWVvdXQiLCJERUZBVUxUX1RJTUVPVVRTIiwiZGVmYXVsdCIsImRhdGFiYXNlIiwiZXh0ZXJuYWwiLCJ1cGxvYWQiLCJwYXltZW50IiwiYXV0aCIsImFkbWluIiwid2ViaG9vayIsImVtYWlsIiwiaW1hZ2UiLCJnZXRUaW1lb3V0RnJvbUVudiIsImtleSIsImRlZmF1bHRWYWx1ZSIsImVudlZhbHVlIiwicHJvY2VzcyIsImVudiIsInRvVXBwZXJDYXNlIiwicGFyc2VkIiwicGFyc2VJbnQiLCJpc05hTiIsImNvbnNvbGUiLCJ3YXJuIiwiY29ubmVjdGlvbiIsInJlcXVlc3QiLCJyZXNwb25zZSIsInRvdGFsIiwiTWF0aCIsIm1heCIsInR5cGUiLCJwYXRoIiwibWF0Y2hpbmdQYXRoIiwiT2JqZWN0Iiwia2V5cyIsImZpbmQiLCJzdGFydHNXaXRoIiwidGltZW91dCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJlcnJvciIsIkVycm9yIiwibmFtZSIsIm9wZXJhdGlvbiIsImZpbmFsbHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRoZW4iLCJjYXRjaCIsImxvZyIsImVudmlyb25tZW50IiwiTk9ERV9FTlYiLCJ0aW1lb3V0cyIsImN1c3RvbUVudlZhcnMiLCJmaWx0ZXIiLCJyZWR1Y2UiLCJhY2MiLCJlcnJvcnMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbHVlIiwicHVzaCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDhEQUE4RDtBQUM5RCxzQ0FBc0M7QUFDdEMsNkRBQTZEO0FBQzdELGlEQUFpRDtBQUVqRCxzQ0FBc0M7QUFDdEMscUJBQXFCO0FBQ3JCLHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBbUZ6QkE7ZUFBQUE7O1FBaUJBQztlQUFBQTs7UUFpR0dDO2VBQUFBOztRQWVNQztlQUFBQTs7UUF4Q05DO2VBQUFBOztRQVBBQztlQUFBQTs7UUEySEFDO2VBQUFBOztRQXVCQUM7ZUFBQUE7O1FBdEVBQztlQUFBQTs7UUFZQUM7ZUFBQUE7O1FBWUFDO2VBQUFBOzs7QUFuUGhCLHNDQUFzQztBQUN0QyxpQ0FBaUM7QUFDakMsc0NBQXNDO0FBRXRDLE1B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