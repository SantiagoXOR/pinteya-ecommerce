{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\config\\timeouts.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - TIMEOUT CONFIGURATION\r\n// ===================================\r\n\r\n/**\r\n * Configuración centralizada de timeouts para toda la aplicación\r\n * Todos los valores están en milisegundos\r\n */\r\n\r\n/**\r\n * Timeouts para APIs externas\r\n */\r\nexport const EXTERNAL_API_TIMEOUTS = {\r\n  // MercadoPago\r\n  MERCADOPAGO: {\r\n    PAYMENT_CREATION: 15000,      // 15 segundos\r\n    PAYMENT_STATUS: 10000,        // 10 segundos\r\n    WEBHOOK_PROCESSING: 5000,     // 5 segundos\r\n    PREFERENCE_CREATION: 12000,   // 12 segundos\r\n    REFUND_PROCESSING: 20000,     // 20 segundos\r\n  },\r\n  \r\n  // APIs de terceros generales\r\n  THIRD_PARTY: {\r\n    DEFAULT: 10000,               // 10 segundos\r\n    SLOW_OPERATIONS: 30000,       // 30 segundos\r\n    FAST_OPERATIONS: 5000,        // 5 segundos\r\n  },\r\n  \r\n  // Servicios de email\r\n  EMAIL: {\r\n    SEND_EMAIL: 15000,            // 15 segundos\r\n    TEMPLATE_PROCESSING: 8000,    // 8 segundos\r\n  },\r\n  \r\n  // Servicios de notificaciones\r\n  NOTIFICATIONS: {\r\n    PUSH_NOTIFICATION: 10000,     // 10 segundos\r\n    SMS: 12000,                   // 12 segundos\r\n    SLACK_WEBHOOK: 8000,          // 8 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para base de datos\r\n */\r\nexport const DATABASE_TIMEOUTS = {\r\n  // Operaciones de lectura\r\n  READ: {\r\n    SIMPLE_QUERY: 5000,           // 5 segundos\r\n    COMPLEX_QUERY: 15000,         // 15 segundos\r\n    AGGREGATION: 20000,           // 20 segundos\r\n    SEARCH: 10000,                // 10 segundos\r\n  },\r\n  \r\n  // Operaciones de escritura\r\n  WRITE: {\r\n    INSERT: 8000,                 // 8 segundos\r\n    UPDATE: 10000,                // 10 segundos\r\n    DELETE: 12000,                // 12 segundos\r\n    BULK_OPERATIONS: 30000,       // 30 segundos\r\n  },\r\n  \r\n  // Transacciones\r\n  TRANSACTION: {\r\n    SIMPLE: 15000,                // 15 segundos\r\n    COMPLEX: 30000,               // 30 segundos\r\n    MIGRATION: 60000,             // 60 segundos\r\n  },\r\n  \r\n  // Conexiones\r\n  CONNECTION: {\r\n    ACQUIRE: 5000,                // 5 segundos\r\n    IDLE_TIMEOUT: 300000,         // 5 minutos\r\n    LIFETIME: 1800000,            // 30 minutos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para cache\r\n */\r\nexport const CACHE_TIMEOUTS = {\r\n  // Redis\r\n  REDIS: {\r\n    CONNECT: 5000,                // 5 segundos\r\n    COMMAND: 3000,                // 3 segundos\r\n    PIPELINE: 10000,              // 10 segundos\r\n  },\r\n  \r\n  // Cache en memoria\r\n  MEMORY: {\r\n    OPERATION: 1000,              // 1 segundo\r\n    CLEANUP: 5000,                // 5 segundos\r\n  },\r\n  \r\n  // CDN\r\n  CDN: {\r\n    PURGE: 30000,                 // 30 segundos\r\n    UPLOAD: 60000,                // 60 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para APIs internas\r\n */\r\nexport const INTERNAL_API_TIMEOUTS = {\r\n  // APIs de productos\r\n  PRODUCTS: {\r\n    LIST: 8000,                   // 8 segundos\r\n    DETAIL: 5000,                 // 5 segundos\r\n    SEARCH: 10000,                // 10 segundos\r\n    CREATE: 12000,                // 12 segundos\r\n    UPDATE: 10000,                // 10 segundos\r\n    DELETE: 8000,                 // 8 segundos\r\n  },\r\n  \r\n  // APIs de usuarios\r\n  USERS: {\r\n    AUTHENTICATION: 8000,         // 8 segundos\r\n    PROFILE: 5000,                // 5 segundos\r\n    UPDATE_PROFILE: 10000,        // 10 segundos\r\n    PASSWORD_RESET: 15000,        // 15 segundos\r\n  },\r\n  \r\n  // APIs de órdenes\r\n  ORDERS: {\r\n    CREATE: 15000,                // 15 segundos\r\n    LIST: 8000,                   // 8 segundos\r\n    DETAIL: 5000,                 // 5 segundos\r\n    UPDATE_STATUS: 10000,         // 10 segundos\r\n    CANCEL: 12000,                // 12 segundos\r\n  },\r\n  \r\n  // APIs de carrito\r\n  CART: {\r\n    ADD_ITEM: 5000,               // 5 segundos\r\n    REMOVE_ITEM: 3000,            // 3 segundos\r\n    UPDATE_QUANTITY: 4000,        // 4 segundos\r\n    CLEAR: 3000,                  // 3 segundos\r\n    CHECKOUT: 20000,              // 20 segundos\r\n  },\r\n  \r\n  // APIs de categorías\r\n  CATEGORIES: {\r\n    LIST: 5000,                   // 5 segundos\r\n    DETAIL: 3000,                 // 3 segundos\r\n    CREATE: 8000,                 // 8 segundos\r\n    UPDATE: 6000,                 // 6 segundos\r\n  },\r\n  \r\n  // APIs de búsqueda\r\n  SEARCH: {\r\n    PRODUCTS: 10000,              // 10 segundos\r\n    SUGGESTIONS: 5000,            // 5 segundos\r\n    TRENDING: 8000,               // 8 segundos\r\n    FILTERS: 6000,                // 6 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para operaciones de archivos\r\n */\r\nexport const FILE_TIMEOUTS = {\r\n  // Upload de archivos\r\n  UPLOAD: {\r\n    SMALL_FILE: 30000,            // 30 segundos (< 1MB)\r\n    MEDIUM_FILE: 60000,           // 60 segundos (1-10MB)\r\n    LARGE_FILE: 180000,           // 3 minutos (> 10MB)\r\n  },\r\n  \r\n  // Procesamiento de imágenes\r\n  IMAGE_PROCESSING: {\r\n    RESIZE: 15000,                // 15 segundos\r\n    OPTIMIZATION: 20000,          // 20 segundos\r\n    THUMBNAIL: 10000,             // 10 segundos\r\n  },\r\n  \r\n  // Operaciones de archivos\r\n  FILE_OPERATIONS: {\r\n    READ: 10000,                  // 10 segundos\r\n    WRITE: 15000,                 // 15 segundos\r\n    DELETE: 5000,                 // 5 segundos\r\n    COPY: 20000,                  // 20 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para monitoreo y logging\r\n */\r\nexport const MONITORING_TIMEOUTS = {\r\n  // Métricas\r\n  METRICS: {\r\n    COLLECTION: 5000,             // 5 segundos\r\n    AGGREGATION: 10000,           // 10 segundos\r\n    EXPORT: 30000,                // 30 segundos\r\n  },\r\n  \r\n  // Alertas\r\n  ALERTS: {\r\n    SEND: 8000,                   // 8 segundos\r\n    WEBHOOK: 10000,               // 10 segundos\r\n    EMAIL: 15000,                 // 15 segundos\r\n  },\r\n  \r\n  // Health checks\r\n  HEALTH_CHECK: {\r\n    SIMPLE: 3000,                 // 3 segundos\r\n    DETAILED: 10000,              // 10 segundos\r\n    EXTERNAL_SERVICES: 15000,     // 15 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts para testing\r\n */\r\nexport const TEST_TIMEOUTS = {\r\n  // Tests unitarios\r\n  UNIT: {\r\n    DEFAULT: 5000,                // 5 segundos\r\n    ASYNC_OPERATIONS: 10000,      // 10 segundos\r\n  },\r\n  \r\n  // Tests de integración\r\n  INTEGRATION: {\r\n    API_CALLS: 15000,             // 15 segundos\r\n    DATABASE_OPERATIONS: 20000,   // 20 segundos\r\n    EXTERNAL_SERVICES: 30000,     // 30 segundos\r\n  },\r\n  \r\n  // Tests E2E\r\n  E2E: {\r\n    PAGE_LOAD: 30000,             // 30 segundos\r\n    USER_INTERACTION: 10000,      // 10 segundos\r\n    FORM_SUBMISSION: 20000,       // 20 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Timeouts por ambiente\r\n */\r\nexport const ENVIRONMENT_TIMEOUTS = {\r\n  development: {\r\n    multiplier: 2,                // 2x más tiempo en desarrollo\r\n    maxTimeout: 60000,            // Máximo 60 segundos\r\n  },\r\n  \r\n  staging: {\r\n    multiplier: 1.5,              // 1.5x más tiempo en staging\r\n    maxTimeout: 45000,            // Máximo 45 segundos\r\n  },\r\n  \r\n  production: {\r\n    multiplier: 1,                // Tiempo normal en producción\r\n    maxTimeout: 30000,            // Máximo 30 segundos\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Configuración de reintentos\r\n */\r\nexport const RETRY_CONFIG = {\r\n  // Configuración por defecto\r\n  DEFAULT: {\r\n    maxRetries: 3,\r\n    baseDelay: 1000,              // 1 segundo\r\n    maxDelay: 10000,              // 10 segundos\r\n    backoffMultiplier: 2,\r\n  },\r\n  \r\n  // APIs críticas\r\n  CRITICAL: {\r\n    maxRetries: 5,\r\n    baseDelay: 500,               // 0.5 segundos\r\n    maxDelay: 5000,               // 5 segundos\r\n    backoffMultiplier: 1.5,\r\n  },\r\n  \r\n  // APIs no críticas\r\n  NON_CRITICAL: {\r\n    maxRetries: 2,\r\n    baseDelay: 2000,              // 2 segundos\r\n    maxDelay: 15000,              // 15 segundos\r\n    backoffMultiplier: 3,\r\n  }\r\n} as const;\r\n\r\n/**\r\n * Utilidades para trabajar con timeouts\r\n */\r\nexport class TimeoutUtils {\r\n  /**\r\n   * Obtiene timeout ajustado por ambiente\r\n   */\r\n  static getEnvironmentTimeout(baseTimeout: number): number {\r\n    const env = process.env.NODE_ENV as keyof typeof ENVIRONMENT_TIMEOUTS || 'development';\r\n    const config = ENVIRONMENT_TIMEOUTS[env];\r\n    \r\n    const adjustedTimeout = Math.min(\r\n      baseTimeout * config.multiplier,\r\n      config.maxTimeout\r\n    );\r\n    \r\n    return Math.round(adjustedTimeout);\r\n  }\r\n  \r\n  /**\r\n   * Crea AbortController con timeout\r\n   */\r\n  static createTimeoutController(timeout: number): AbortController {\r\n    const controller = new AbortController();\r\n    \r\n    setTimeout(() => {\r\n      controller.abort();\r\n    }, timeout);\r\n    \r\n    return controller;\r\n  }\r\n  \r\n  /**\r\n   * Wrapper para promesas con timeout\r\n   */\r\n  static withTimeout<T>(\r\n    promise: Promise<T>,\r\n    timeout: number,\r\n    errorMessage?: string\r\n  ): Promise<T> {\r\n    return Promise.race([\r\n      promise,\r\n      new Promise<never>((_, reject) => {\r\n        setTimeout(() => {\r\n          reject(new Error(errorMessage || `Operation timed out after ${timeout}ms`));\r\n        }, timeout);\r\n      })\r\n    ]);\r\n  }\r\n  \r\n  /**\r\n   * Implementa retry con backoff exponencial\r\n   */\r\n  static async withRetry<T>(\r\n    operation: () => Promise<T>,\r\n    config = RETRY_CONFIG.DEFAULT\r\n  ): Promise<T> {\r\n    let lastError: Error;\r\n    \r\n    for (let attempt = 0; attempt <= config.maxRetries; attempt++) {\r\n      try {\r\n        return await operation();\r\n      } catch (error) {\r\n        lastError = error as Error;\r\n        \r\n        if (attempt === config.maxRetries) {\r\n          throw lastError;\r\n        }\r\n        \r\n        const delay = Math.min(\r\n          config.baseDelay * Math.pow(config.backoffMultiplier, attempt),\r\n          config.maxDelay\r\n        );\r\n        \r\n        await new Promise(resolve => setTimeout(resolve, delay));\r\n      }\r\n    }\r\n    \r\n    throw lastError!;\r\n  }\r\n  \r\n  /**\r\n   * Obtiene timeout para operación específica\r\n   */\r\n  static getTimeout(category: string, operation: string): number {\r\n    const timeoutMap: Record<string, any> = {\r\n      'external-api': EXTERNAL_API_TIMEOUTS,\r\n      'database': DATABASE_TIMEOUTS,\r\n      'cache': CACHE_TIMEOUTS,\r\n      'internal-api': INTERNAL_API_TIMEOUTS,\r\n      'file': FILE_TIMEOUTS,\r\n      'monitoring': MONITORING_TIMEOUTS,\r\n      'test': TEST_TIMEOUTS\r\n    };\r\n    \r\n    const categoryConfig = timeoutMap[category];\r\n    if (!categoryConfig) {\r\n      return this.getEnvironmentTimeout(10000); // 10 segundos por defecto\r\n    }\r\n    \r\n    // Navegar por la estructura anidada\r\n    const parts = operation.split('.');\r\n    let current = categoryConfig;\r\n    \r\n    for (const part of parts) {\r\n      if (current[part] !== undefined) {\r\n        current = current[part];\r\n      } else {\r\n        return this.getEnvironmentTimeout(10000); // Fallback\r\n      }\r\n    }\r\n    \r\n    return this.getEnvironmentTimeout(typeof current === 'number' ? current : 10000);\r\n  }\r\n}\r\n\r\n/**\r\n * Constantes de timeout más utilizadas\r\n */\r\nexport const COMMON_TIMEOUTS = {\r\n  VERY_SHORT: TimeoutUtils.getEnvironmentTimeout(2000),    // 2 segundos\r\n  SHORT: TimeoutUtils.getEnvironmentTimeout(5000),        // 5 segundos\r\n  MEDIUM: TimeoutUtils.getEnvironmentTimeout(10000),      // 10 segundos\r\n  LONG: TimeoutUtils.getEnvironmentTimeout(20000),        // 20 segundos\r\n  VERY_LONG: TimeoutUtils.getEnvironmentTimeout(60000),   // 60 segundos\r\n} as const;\r\n\r\n/**\r\n * Configuración por defecto para fetch\r\n */\r\nexport const DEFAULT_FETCH_CONFIG = {\r\n  timeout: COMMON_TIMEOUTS.MEDIUM,\r\n  retries: RETRY_CONFIG.DEFAULT.maxRetries,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  }\r\n} as const;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["CACHE_TIMEOUTS","COMMON_TIMEOUTS","DATABASE_TIMEOUTS","DEFAULT_FETCH_CONFIG","ENVIRONMENT_TIMEOUTS","EXTERNAL_API_TIMEOUTS","FILE_TIMEOUTS","INTERNAL_API_TIMEOUTS","MONITORING_TIMEOUTS","RETRY_CONFIG","TEST_TIMEOUTS","TimeoutUtils","MERCADOPAGO","PAYMENT_CREATION","PAYMENT_STATUS","WEBHOOK_PROCESSING","PREFERENCE_CREATION","REFUND_PROCESSING","THIRD_PARTY","DEFAULT","SLOW_OPERATIONS","FAST_OPERATIONS","EMAIL","SEND_EMAIL","TEMPLATE_PROCESSING","NOTIFICATIONS","PUSH_NOTIFICATION","SMS","SLACK_WEBHOOK","READ","SIMPLE_QUERY","COMPLEX_QUERY","AGGREGATION","SEARCH","WRITE","INSERT","UPDATE","DELETE","BULK_OPERATIONS","TRANSACTION","SIMPLE","COMPLEX","MIGRATION","CONNECTION","ACQUIRE","IDLE_TIMEOUT","LIFETIME","REDIS","CONNECT","COMMAND","PIPELINE","MEMORY","OPERATION","CLEANUP","CDN","PURGE","UPLOAD","PRODUCTS","LIST","DETAIL","CREATE","USERS","AUTHENTICATION","PROFILE","UPDATE_PROFILE","PASSWORD_RESET","ORDERS","UPDATE_STATUS","CANCEL","CART","ADD_ITEM","REMOVE_ITEM","UPDATE_QUANTITY","CLEAR","CHECKOUT","CATEGORIES","SUGGESTIONS","TRENDING","FILTERS","SMALL_FILE","MEDIUM_FILE","LARGE_FILE","IMAGE_PROCESSING","RESIZE","OPTIMIZATION","THUMBNAIL","FILE_OPERATIONS","COPY","METRICS","COLLECTION","EXPORT","ALERTS","SEND","WEBHOOK","HEALTH_CHECK","DETAILED","EXTERNAL_SERVICES","UNIT","ASYNC_OPERATIONS","INTEGRATION","API_CALLS","DATABASE_OPERATIONS","E2E","PAGE_LOAD","USER_INTERACTION","FORM_SUBMISSION","development","multiplier","maxTimeout","staging","production","maxRetries","baseDelay","maxDelay","backoffMultiplier","CRITICAL","NON_CRITICAL","getEnvironmentTimeout","baseTimeout","env","process","NODE_ENV","config","adjustedTimeout","Math","min","round","createTimeoutController","timeout","controller","AbortController","setTimeout","abort","withTimeout","promise","errorMessage","Promise","race","_","reject","Error","withRetry","operation","lastError","attempt","error","delay","pow","resolve","getTimeout","category","timeoutMap","categoryConfig","parts","split","current","part","undefined","VERY_SHORT","SHORT","MEDIUM","LONG","VERY_LONG","retries","headers"],"mappings":"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"}