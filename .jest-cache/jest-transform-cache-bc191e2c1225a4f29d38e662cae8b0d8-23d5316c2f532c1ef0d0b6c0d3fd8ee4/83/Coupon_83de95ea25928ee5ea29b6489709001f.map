{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Checkout\\Coupon.tsx"],"sourcesContent":["import React, { useState } from 'react'\n\ninterface CouponProps {\n  onCouponApply: (couponCode: string, discount: number) => void\n  appliedCoupon?: {\n    code: string\n    discount: number\n    type: 'percentage' | 'fixed'\n  } | null\n  isLoading?: boolean\n}\n\n// Cupones de ejemplo para testing\nconst AVAILABLE_COUPONS = {\n  PINTEYA10: { discount: 10, type: 'percentage' as const, description: '10% de descuento' },\n  BIENVENIDO: { discount: 5000, type: 'fixed' as const, description: '$5000 de descuento' },\n  ENVIOGRATIS: { discount: 1500, type: 'fixed' as const, description: 'Envío gratis' },\n  FERRETERIA15: {\n    discount: 15,\n    type: 'percentage' as const,\n    description: '15% en productos de ferretería',\n  },\n}\n\nconst Coupon: React.FC<CouponProps> = ({ onCouponApply, appliedCoupon, isLoading = false }) => {\n  const [couponCode, setCouponCode] = useState('')\n  const [error, setError] = useState('')\n  const [isApplying, setIsApplying] = useState(false)\n\n  const handleApplyCoupon = async () => {\n    if (!couponCode.trim()) {\n      setError('Ingresa un código de cupón')\n      return\n    }\n\n    setIsApplying(true)\n    setError('')\n\n    // Simular delay de API\n    await new Promise(resolve => setTimeout(resolve, 1000))\n\n    const upperCouponCode = couponCode.toUpperCase()\n    const coupon = AVAILABLE_COUPONS[upperCouponCode as keyof typeof AVAILABLE_COUPONS]\n\n    if (coupon) {\n      onCouponApply(upperCouponCode, coupon.discount)\n      setCouponCode('')\n      setError('')\n    } else {\n      setError('Código de cupón inválido')\n    }\n\n    setIsApplying(false)\n  }\n\n  const handleRemoveCoupon = () => {\n    onCouponApply('', 0)\n  }\n\n  return (\n    <div className='bg-white shadow-1 rounded-[10px] mt-7.5'>\n      <div className='border-b border-gray-3 py-5 px-4 sm:px-8.5'>\n        <h3 className='font-medium text-xl text-dark'>Código de Descuento</h3>\n      </div>\n\n      <div className='py-8 px-4 sm:px-8.5'>\n        {appliedCoupon ? (\n          // Cupón aplicado\n          <div className='p-4 bg-green-50 border border-green-200 rounded-lg'>\n            <div className='flex items-center justify-between'>\n              <div>\n                <p className='font-semibold text-green-800'>\n                  ✅ Cupón aplicado: {appliedCoupon.code}\n                </p>\n                <p className='text-sm text-green-600'>\n                  {appliedCoupon.type === 'percentage'\n                    ? `${appliedCoupon.discount}% de descuento`\n                    : `$${appliedCoupon.discount.toLocaleString()} de descuento`}\n                </p>\n              </div>\n              <button\n                onClick={handleRemoveCoupon}\n                className='text-red-600 hover:text-red-800 font-medium text-sm'\n              >\n                Remover\n              </button>\n            </div>\n          </div>\n        ) : (\n          // Formulario de cupón\n          <>\n            <div className='flex flex-col sm:flex-row gap-4'>\n              <input\n                type='text'\n                name='coupon'\n                id='coupon'\n                placeholder='Ingresa tu código de descuento'\n                value={couponCode}\n                onChange={e => setCouponCode(e.target.value)}\n                onKeyPress={e => e.key === 'Enter' && handleApplyCoupon()}\n                disabled={isLoading || isApplying}\n                className={`rounded-md border bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20 ${\n                  error ? 'border-red-500' : 'border-gray-3'\n                }`}\n              />\n\n              <button\n                onClick={handleApplyCoupon}\n                disabled={isLoading || isApplying || !couponCode.trim()}\n                className={`flex justify-center font-medium text-white py-2.5 px-6 rounded-md ease-out duration-200 ${\n                  isLoading || isApplying || !couponCode.trim()\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-tahiti-gold-500 hover:bg-tahiti-gold-700'\n                }`}\n              >\n                {isApplying ? (\n                  <div className='flex items-center gap-2'>\n                    <div className='animate-spin rounded-full h-4 w-4 border-b-2 border-white'></div>\n                    Aplicando...\n                  </div>\n                ) : (\n                  'Aplicar'\n                )}\n              </button>\n            </div>\n\n            {error && (\n              <p className='text-red-500 text-sm mt-2'>\n                {error instanceof Error\n                  ? error.message\n                  : typeof error === 'string'\n                    ? error\n                    : 'Error desconocido'}\n              </p>\n            )}\n\n            {/* Cupones disponibles para testing */}\n            <div className='mt-4 p-3 bg-tahiti-gold-50 border border-tahiti-gold-200 rounded-lg'>\n              <p className='text-sm font-medium text-tahiti-gold-800 mb-2'>\n                Cupones disponibles para testing:\n              </p>\n              <div className='grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs'>\n                {Object.entries(AVAILABLE_COUPONS).map(([code, coupon]) => (\n                  <div key={code} className='flex justify-between'>\n                    <span className='font-mono bg-white px-2 py-1 rounded'>{code}</span>\n                    <span className='text-tahiti-gold-600'>{coupon.description}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Coupon\n"],"names":["AVAILABLE_COUPONS","PINTEYA10","discount","type","description","BIENVENIDO","ENVIOGRATIS","FERRETERIA15","Coupon","onCouponApply","appliedCoupon","isLoading","couponCode","setCouponCode","useState","error","setError","isApplying","setIsApplying","handleApplyCoupon","trim","Promise","resolve","setTimeout","upperCouponCode","toUpperCase","coupon","handleRemoveCoupon","div","className","h3","p","code","toLocaleString","button","onClick","input","name","id","placeholder","value","onChange","e","target","onKeyPress","key","disabled","Error","message","Object","entries","map","span"],"mappings":"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"}