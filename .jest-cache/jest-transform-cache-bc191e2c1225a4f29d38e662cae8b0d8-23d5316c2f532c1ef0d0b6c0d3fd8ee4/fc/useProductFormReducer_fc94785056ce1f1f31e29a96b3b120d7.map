{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\optimization\\useProductFormReducer.ts"],"sourcesContent":["import { useReducer, useCallback, useMemo } from 'react'\n\n// Tipos para el estado del formulario de productos\ninterface ProductFormState {\n  // Información básica\n  name: string\n  description: string\n  shortDescription: string\n  categoryId: string\n  status: 'active' | 'inactive' | 'draft'\n\n  // Detalles del producto\n  brand: string\n  model: string\n  sku: string\n  barcode: string\n\n  // Precios\n  price: number\n  comparePrice: number\n  costPrice: number\n  taxRate: number\n\n  // Inventario\n  trackInventory: boolean\n  stock: number\n  lowStockThreshold: number\n  allowBackorder: boolean\n\n  // Envío\n  requiresShipping: boolean\n  weight: number\n  dimensions: {\n    length: number\n    width: number\n    height: number\n  }\n\n  // SEO\n  seoTitle: string\n  seoDescription: string\n  seoKeywords: string[]\n\n  // Imágenes y variantes\n  images: string[]\n  variants: any[]\n\n  // Estado del formulario\n  isLoading: boolean\n  isSaving: boolean\n  errors: Record<string, string>\n  isDirty: boolean\n  currentStep: number\n  validationErrors: Record<string, string[]>\n}\n\n// Tipos de acciones\ntype ProductFormAction =\n  | { type: 'SET_FIELD'; field: keyof ProductFormState; value: any }\n  | { type: 'SET_MULTIPLE_FIELDS'; fields: Partial<ProductFormState> }\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_SAVING'; payload: boolean }\n  | { type: 'SET_ERROR'; field: string; error: string }\n  | { type: 'CLEAR_ERROR'; field: string }\n  | { type: 'CLEAR_ALL_ERRORS' }\n  | { type: 'SET_VALIDATION_ERRORS'; errors: Record<string, string[]> }\n  | { type: 'SET_DIRTY'; payload: boolean }\n  | { type: 'SET_STEP'; step: number }\n  | { type: 'NEXT_STEP' }\n  | { type: 'PREV_STEP' }\n  | { type: 'ADD_IMAGE'; image: string }\n  | { type: 'REMOVE_IMAGE'; index: number }\n  | { type: 'ADD_VARIANT'; variant: any }\n  | { type: 'REMOVE_VARIANT'; index: number }\n  | { type: 'UPDATE_VARIANT'; index: number; variant: any }\n  | { type: 'ADD_SEO_KEYWORD'; keyword: string }\n  | { type: 'REMOVE_SEO_KEYWORD'; index: number }\n  | { type: 'RESET_FORM' }\n  | { type: 'LOAD_PRODUCT'; product: Partial<ProductFormState> }\n\n// Estado inicial\nconst initialState: ProductFormState = {\n  // Información básica\n  name: '',\n  description: '',\n  shortDescription: '',\n  categoryId: '',\n  status: 'draft',\n\n  // Detalles del producto\n  brand: '',\n  model: '',\n  sku: '',\n  barcode: '',\n\n  // Precios\n  price: 0,\n  comparePrice: 0,\n  costPrice: 0,\n  taxRate: 0,\n\n  // Inventario\n  trackInventory: true,\n  stock: 0,\n  lowStockThreshold: 5,\n  allowBackorder: false,\n\n  // Envío\n  requiresShipping: true,\n  weight: 0,\n  dimensions: {\n    length: 0,\n    width: 0,\n    height: 0,\n  },\n\n  // SEO\n  seoTitle: '',\n  seoDescription: '',\n  seoKeywords: [],\n\n  // Imágenes y variantes\n  images: [],\n  variants: [],\n\n  // Estado del formulario\n  isLoading: false,\n  isSaving: false,\n  errors: {},\n  isDirty: false,\n  currentStep: 0,\n  validationErrors: {},\n}\n\n// Reducer function\nfunction productFormReducer(state: ProductFormState, action: ProductFormAction): ProductFormState {\n  switch (action.type) {\n    case 'SET_FIELD':\n      return {\n        ...state,\n        [action.field]: action.value,\n        isDirty: true,\n        // Limpiar error del campo si existe\n        errors: {\n          ...state.errors,\n          [action.field]: undefined,\n        },\n      }\n\n    case 'SET_MULTIPLE_FIELDS':\n      return {\n        ...state,\n        ...action.fields,\n        isDirty: true,\n      }\n\n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload }\n\n    case 'SET_SAVING':\n      return { ...state, isSaving: action.payload }\n\n    case 'SET_ERROR':\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          [action.field]: action.error,\n        },\n      }\n\n    case 'CLEAR_ERROR':\n      const { [action.field]: _, ...restErrors } = state.errors\n      return {\n        ...state,\n        errors: restErrors,\n      }\n\n    case 'CLEAR_ALL_ERRORS':\n      return {\n        ...state,\n        errors: {},\n        validationErrors: {},\n      }\n\n    case 'SET_VALIDATION_ERRORS':\n      return {\n        ...state,\n        validationErrors: action.errors,\n      }\n\n    case 'SET_DIRTY':\n      return { ...state, isDirty: action.payload }\n\n    case 'SET_STEP':\n      return { ...state, currentStep: Math.max(0, Math.min(4, action.step)) }\n\n    case 'NEXT_STEP':\n      return { ...state, currentStep: Math.min(4, state.currentStep + 1) }\n\n    case 'PREV_STEP':\n      return { ...state, currentStep: Math.max(0, state.currentStep - 1) }\n\n    case 'ADD_IMAGE':\n      return {\n        ...state,\n        images: [...state.images, action.image],\n        isDirty: true,\n      }\n\n    case 'REMOVE_IMAGE':\n      return {\n        ...state,\n        images: state.images.filter((_, index) => index !== action.index),\n        isDirty: true,\n      }\n\n    case 'ADD_VARIANT':\n      return {\n        ...state,\n        variants: [...state.variants, action.variant],\n        isDirty: true,\n      }\n\n    case 'REMOVE_VARIANT':\n      return {\n        ...state,\n        variants: state.variants.filter((_, index) => index !== action.index),\n        isDirty: true,\n      }\n\n    case 'UPDATE_VARIANT':\n      return {\n        ...state,\n        variants: state.variants.map((variant, index) =>\n          index === action.index ? action.variant : variant\n        ),\n        isDirty: true,\n      }\n\n    case 'ADD_SEO_KEYWORD':\n      if (!state.seoKeywords.includes(action.keyword)) {\n        return {\n          ...state,\n          seoKeywords: [...state.seoKeywords, action.keyword],\n          isDirty: true,\n        }\n      }\n      return state\n\n    case 'REMOVE_SEO_KEYWORD':\n      return {\n        ...state,\n        seoKeywords: state.seoKeywords.filter((_, index) => index !== action.index),\n        isDirty: true,\n      }\n\n    case 'RESET_FORM':\n      return initialState\n\n    case 'LOAD_PRODUCT':\n      return {\n        ...state,\n        ...action.product,\n        isDirty: false,\n      }\n\n    default:\n      return state\n  }\n}\n\n// Hook personalizado\nexport function useProductFormReducer() {\n  const [state, dispatch] = useReducer(productFormReducer, initialState)\n\n  // Acciones memoizadas\n  const actions = useMemo(\n    () => ({\n      setField: (field: keyof ProductFormState, value: any) =>\n        dispatch({ type: 'SET_FIELD', field, value }),\n\n      setMultipleFields: (fields: Partial<ProductFormState>) =>\n        dispatch({ type: 'SET_MULTIPLE_FIELDS', fields }),\n\n      setLoading: (loading: boolean) => dispatch({ type: 'SET_LOADING', payload: loading }),\n\n      setSaving: (saving: boolean) => dispatch({ type: 'SET_SAVING', payload: saving }),\n\n      setError: (field: string, error: string) => dispatch({ type: 'SET_ERROR', field, error }),\n\n      clearError: (field: string) => dispatch({ type: 'CLEAR_ERROR', field }),\n\n      clearAllErrors: () => dispatch({ type: 'CLEAR_ALL_ERRORS' }),\n\n      setValidationErrors: (errors: Record<string, string[]>) =>\n        dispatch({ type: 'SET_VALIDATION_ERRORS', errors }),\n\n      setDirty: (dirty: boolean) => dispatch({ type: 'SET_DIRTY', payload: dirty }),\n\n      setStep: (step: number) => dispatch({ type: 'SET_STEP', step }),\n\n      nextStep: () => dispatch({ type: 'NEXT_STEP' }),\n\n      prevStep: () => dispatch({ type: 'PREV_STEP' }),\n\n      addImage: (image: string) => dispatch({ type: 'ADD_IMAGE', image }),\n\n      removeImage: (index: number) => dispatch({ type: 'REMOVE_IMAGE', index }),\n\n      addVariant: (variant: any) => dispatch({ type: 'ADD_VARIANT', variant }),\n\n      removeVariant: (index: number) => dispatch({ type: 'REMOVE_VARIANT', index }),\n\n      updateVariant: (index: number, variant: any) =>\n        dispatch({ type: 'UPDATE_VARIANT', index, variant }),\n\n      addSeoKeyword: (keyword: string) => dispatch({ type: 'ADD_SEO_KEYWORD', keyword }),\n\n      removeSeoKeyword: (index: number) => dispatch({ type: 'REMOVE_SEO_KEYWORD', index }),\n\n      resetForm: () => dispatch({ type: 'RESET_FORM' }),\n\n      loadProduct: (product: Partial<ProductFormState>) =>\n        dispatch({ type: 'LOAD_PRODUCT', product }),\n    }),\n    []\n  )\n\n  // Selectores memoizados\n  const selectors = useMemo(\n    () => ({\n      // Verificaciones de estado\n      hasErrors: Object.keys(state.errors).length > 0,\n      hasValidationErrors: Object.keys(state.validationErrors).length > 0,\n      isFormValid: Object.keys(state.errors).length === 0 && state.name.trim() !== '',\n\n      // Información de pasos\n      isFirstStep: state.currentStep === 0,\n      isLastStep: state.currentStep === 4,\n      stepProgress: ((state.currentStep + 1) / 5) * 100,\n\n      // Cálculos de precios\n      profitMargin:\n        state.price > 0 && state.costPrice > 0\n          ? ((state.price - state.costPrice) / state.price) * 100\n          : 0,\n\n      discountPercentage:\n        state.comparePrice > 0 && state.price > 0\n          ? ((state.comparePrice - state.price) / state.comparePrice) * 100\n          : 0,\n\n      // Estado de inventario\n      isLowStock: state.stock <= state.lowStockThreshold,\n      isOutOfStock: state.stock === 0,\n\n      // Validaciones específicas\n      isPriceValid: state.price > 0,\n      isSkuValid: state.sku.length > 0,\n      areDimensionsValid:\n        state.dimensions.length > 0 && state.dimensions.width > 0 && state.dimensions.height > 0,\n\n      // Contadores\n      imageCount: state.images.length,\n      variantCount: state.variants.length,\n      keywordCount: state.seoKeywords.length,\n\n      // Obtener errores por paso\n      getStepErrors: (step: number) => {\n        const stepFields = {\n          0: ['name', 'description', 'categoryId'],\n          1: ['price', 'comparePrice', 'costPrice'],\n          2: ['stock', 'lowStockThreshold'],\n          3: ['images'],\n          4: ['seoTitle', 'seoDescription'],\n        }\n\n        const fields = stepFields[step as keyof typeof stepFields] || []\n        return fields.filter(field => state.errors[field])\n      },\n    }),\n    [state]\n  )\n\n  return {\n    state,\n    actions,\n    selectors,\n  }\n}\n\n// Hook para validación en tiempo real\nexport function useProductFormValidation() {\n  const { state, actions, selectors } = useProductFormReducer()\n\n  const validateField = useCallback(\n    (field: keyof ProductFormState, value: any) => {\n      let error = ''\n\n      switch (field) {\n        case 'name':\n          if (!value || value.trim().length === 0) {\n            error = 'El nombre es requerido'\n          } else if (value.length > 255) {\n            error = 'Máximo 255 caracteres'\n          }\n          break\n\n        case 'price':\n          if (value <= 0) {\n            error = 'El precio debe ser mayor a 0'\n          } else if (value > 999999.99) {\n            error = 'Precio máximo excedido'\n          }\n          break\n\n        case 'comparePrice':\n          if (value > 0 && value < state.price) {\n            error = 'El precio de comparación debe ser mayor al precio base'\n          }\n          break\n\n        case 'costPrice':\n          if (value > 0 && value > state.price) {\n            error = 'El precio de costo debe ser menor al precio de venta'\n          }\n          break\n\n        case 'stock':\n          if (value < 0) {\n            error = 'El stock debe ser mayor o igual a 0'\n          } else if (value > 999999) {\n            error = 'Stock máximo excedido'\n          }\n          break\n\n        case 'sku':\n          if (value && !/^[A-Z0-9\\-_]+$/.test(value)) {\n            error = 'SKU debe contener solo letras mayúsculas, números, guiones y guiones bajos'\n          }\n          break\n      }\n\n      if (error) {\n        actions.setError(field, error)\n      } else {\n        actions.clearError(field)\n      }\n\n      return error === ''\n    },\n    [state.price, actions]\n  )\n\n  const validateForm = useCallback(() => {\n    const fields: (keyof ProductFormState)[] = ['name', 'price', 'stock', 'categoryId']\n\n    let isValid = true\n    fields.forEach(field => {\n      const fieldValid = validateField(field, state[field])\n      if (!fieldValid) {\n        isValid = false\n      }\n    })\n\n    return isValid\n  }, [state, validateField])\n\n  return {\n    state,\n    actions,\n    selectors,\n    validateField,\n    validateForm,\n  }\n}\n\nexport type { ProductFormState, ProductFormAction }\n"],"names":["useProductFormReducer","useProductFormValidation","initialState","name","description","shortDescription","categoryId","status","brand","model","sku","barcode","price","comparePrice","costPrice","taxRate","trackInventory","stock","lowStockThreshold","allowBackorder","requiresShipping","weight","dimensions","length","width","height","seoTitle","seoDescription","seoKeywords","images","variants","isLoading","isSaving","errors","isDirty","currentStep","validationErrors","productFormReducer","state","action","type","field","value","undefined","fields","payload","error","_","restErrors","Math","max","min","step","image","filter","index","variant","map","includes","keyword","product","dispatch","useReducer","actions","useMemo","setField","setMultipleFields","setLoading","loading","setSaving","saving","setError","clearError","clearAllErrors","setValidationErrors","setDirty","dirty","setStep","nextStep","prevStep","addImage","removeImage","addVariant","removeVariant","updateVariant","addSeoKeyword","removeSeoKeyword","resetForm","loadProduct","selectors","hasErrors","Object","keys","hasValidationErrors","isFormValid","trim","isFirstStep","isLastStep","stepProgress","profitMargin","discountPercentage","isLowStock","isOutOfStock","isPriceValid","isSkuValid","areDimensionsValid","imageCount","variantCount","keywordCount","getStepErrors","stepFields","validateField","useCallback","test","validateForm","isValid","forEach","fieldValid"],"mappings":"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"}