000c30df18468d1d1a8e67e64006af0f
// ===================================
// PINTEYA E-COMMERCE - FUNCIONES DE API PARA PRODUCTOS
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get calculateDiscountPercentage () {
        return calculateDiscountPercentage;
    },
    get convertLegacyProduct () {
        return convertLegacyProduct;
    },
    get formatPrice () {
        return formatPrice;
    },
    get getDiscountedProducts () {
        return getDiscountedProducts;
    },
    get getProductById () {
        return getProductById;
    },
    get getProductMainImage () {
        return getProductMainImage;
    },
    get getProducts () {
        return getProducts;
    },
    get getProductsByBrand () {
        return getProductsByBrand;
    },
    get getProductsByCategory () {
        return getProductsByCategory;
    },
    get getRelatedProducts () {
        return getRelatedProducts;
    },
    get isProductInStock () {
        return isProductInStock;
    },
    get searchProducts () {
        return searchProducts;
    }
});
const _jsonutils = require("../json-utils");
async function getProducts(filters, signal) {
    try {
        const searchParams = new URLSearchParams();
        if (filters) {
            Object.entries(filters).forEach(([key, value])=>{
                if (value !== undefined && value !== null) {
                    searchParams.append(key, value.toString());
                }
            });
        }
        const url = `/api/products?${searchParams.toString()}`;
        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            },
            signal
        });
        // Usar parsing seguro de JSON
        const result = await (0, _jsonutils.safeApiResponseJson)(response);
        if (!result.success) {
            console.error('❌ JSON parsing failed:', result.error);
            // Return a fallback response instead of throwing
            return {
                data: [],
                pagination: {
                    page: 1,
                    limit: 12,
                    total: 0,
                    totalPages: 0
                },
                success: false,
                message: result.error || 'Error loading products'
            };
        }
        if (!result.data) {
            console.error('❌ Result data is null');
            // Return a fallback response instead of throwing
            return {
                data: [],
                pagination: {
                    page: 1,
                    limit: 12,
                    total: 0,
                    totalPages: 0
                },
                success: false,
                message: 'Error: respuesta nula del servidor'
            };
        }
        return result.data;
    } catch (error) {
        // Solo loggear errores que no sean AbortError
        if (error instanceof Error && error.name !== 'AbortError') {
            console.error('❌ Error obteniendo productos:', error);
        }
        // Return a fallback response instead of throwing
        return {
            data: [],
            pagination: {
                page: 1,
                limit: 12,
                total: 0,
                totalPages: 0
            },
            success: false,
            message: error instanceof Error ? error.message : 'Error inesperado'
        };
    }
}
async function getProductById(id) {
    try {
        const response = await fetch(`/api/products/${id}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        // Usar parsing seguro de JSON
        const result = await (0, _jsonutils.safeApiResponseJson)(response);
        if (!result || !result.success || !result.data) {
            throw new Error(result?.error || 'Error parsing API response');
        }
        return result.data;
    } catch (error) {
        console.error(`Error obteniendo producto ${id}:`, error);
        throw error;
    }
}
async function searchProducts(searchTerm, limit = 12) {
    return getProducts({
        search: searchTerm,
        limit,
        page: 1
    });
}
async function getProductsByCategory(categorySlug, page = 1, limit = 12) {
    return getProducts({
        category: categorySlug,
        page,
        limit
    });
}
async function getDiscountedProducts(page = 1, limit = 12) {
    // Nota: Esto requeriría un filtro adicional en la API
    // Por ahora, obtenemos todos los productos y filtramos en el frontend
    const response = await getProducts({
        page,
        limit
    });
    // Filtrar productos con descuento
    const discountedProducts = response.data.filter((product)=>product.discounted_price && product.discounted_price < product.price);
    return {
        ...response,
        data: discountedProducts
    };
}
async function getProductsByBrand(brandName, page = 1, limit = 12) {
    return getProducts({
        brand: brandName,
        page,
        limit
    });
}
async function getRelatedProducts(productId, categoryId, limit = 4) {
    try {
        // Obtener productos de la misma categoría
        const response = await fetch(`/api/products?category_id=${categoryId}&limit=${limit + 1}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        // Usar parsing seguro de JSON
        const result = await (0, _jsonutils.safeApiResponseJson)(response);
        if (!result || !result.success || !result.data) {
            throw new Error(result?.error || 'Error parsing API response');
        }
        const data = result.data;
        // Filtrar el producto actual y limitar resultados
        return data.data.filter((product)=>product.id !== productId).slice(0, limit);
    } catch (error) {
        // Solo loggear errores que no sean AbortError
        if (error instanceof Error && error.name !== 'AbortError') {
            console.error('Error obteniendo productos relacionados:', error);
        }
        return [];
    }
}
function convertLegacyProduct(oldProduct) {
    return {
        id: oldProduct.id,
        name: oldProduct.title,
        brand: oldProduct.brand || null,
        slug: oldProduct.title.toLowerCase().replace(/[^a-z0-9]+/g, '-'),
        description: `Producto ${oldProduct.title}`,
        price: oldProduct.price,
        discounted_price: oldProduct.discountedPrice,
        stock: 50,
        category_id: 1,
        images: oldProduct.imgs,
        created_at: new Date().toISOString(),
        updated_at: null
    };
}
function calculateDiscountPercentage(originalPrice, discountedPrice) {
    if (!discountedPrice || discountedPrice >= originalPrice) {
        return 0;
    }
    return Math.round((originalPrice - discountedPrice) / originalPrice * 100);
}
function formatPrice(price, currency = 'ARS') {
    return new Intl.NumberFormat('es-AR', {
        style: 'currency',
        currency,
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
    }).format(price);
}
function isProductInStock(product) {
    return product.stock > 0;
}
function getProductMainImage(product) {
    if (product.images?.previews?.[0]) {
        return product.images.previews[0];
    }
    if (product.images?.thumbnails?.[0]) {
        return product.images.thumbnails[0];
    }
    return '/images/products/placeholder.jpg';
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxhcGlcXHByb2R1Y3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBGVU5DSU9ORVMgREUgQVBJIFBBUkEgUFJPRFVDVE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBQcm9kdWN0RmlsdGVycywgUHJvZHVjdFdpdGhDYXRlZ29yeSwgQXBpUmVzcG9uc2UsIFBhZ2luYXRlZFJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9hcGknXG5pbXBvcnQgeyBzYWZlQXBpUmVzcG9uc2VKc29uIH0gZnJvbSAnQC9saWIvanNvbi11dGlscydcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZVTkNJT05FUyBQQVJBIEVMIEZST05URU5EXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIE9idGllbmUgcHJvZHVjdG9zIGNvbiBmaWx0cm9zIGRlc2RlIGxhIEFQSVxuICogQHBhcmFtIGZpbHRlcnMgLSBGaWx0cm9zIGRlIHByb2R1Y3Rvc1xuICogQHBhcmFtIHNpZ25hbCAtIEFib3J0U2lnbmFsIHBhcmEgY2FuY2VsYXIgbGEgcmVxdWVzdFxuICogQHJldHVybnMgUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzKFxuICBmaWx0ZXJzPzogUHJvZHVjdEZpbHRlcnMsXG4gIHNpZ25hbD86IEFib3J0U2lnbmFsXG4pOiBQcm9taXNlPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXG5cbiAgICBpZiAoZmlsdGVycykge1xuICAgICAgT2JqZWN0LmVudHJpZXMoZmlsdGVycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcHJvZHVjdHM/JHtzZWFyY2hQYXJhbXMudG9TdHJpbmcoKX1gXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBzaWduYWwsIC8vIEFncmVnYXIgc29wb3J0ZSBwYXJhIEFib3J0Q29udHJvbGxlclxuICAgIH0pXG5cbiAgICAvLyBVc2FyIHBhcnNpbmcgc2VndXJvIGRlIEpTT05cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlQXBpUmVzcG9uc2VKc29uPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PihyZXNwb25zZSlcblxuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBKU09OIHBhcnNpbmcgZmFpbGVkOicsIHJlc3VsdC5lcnJvcilcblxuICAgICAgLy8gUmV0dXJuIGEgZmFsbGJhY2sgcmVzcG9uc2UgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiAxMixcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiAwLFxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0LmVycm9yIHx8ICdFcnJvciBsb2FkaW5nIHByb2R1Y3RzJyxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdC5kYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgUmVzdWx0IGRhdGEgaXMgbnVsbCcpXG5cbiAgICAgIC8vIFJldHVybiBhIGZhbGxiYWNrIHJlc3BvbnNlIGluc3RlYWQgb2YgdGhyb3dpbmdcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBsaW1pdDogMTIsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvcjogcmVzcHVlc3RhIG51bGEgZGVsIHNlcnZpZG9yJyxcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBTb2xvIGxvZ2dlYXIgZXJyb3JlcyBxdWUgbm8gc2VhbiBBYm9ydEVycm9yXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3Igb2J0ZW5pZW5kbyBwcm9kdWN0b3M6JywgZXJyb3IpXG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGEgZmFsbGJhY2sgcmVzcG9uc2UgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBbXSxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgbGltaXQ6IDEyLFxuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Vycm9yIGluZXNwZXJhZG8nLFxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE9idGllbmUgdW4gcHJvZHVjdG8gcG9yIElEIGRlc2RlIGxhIEFQSVxuICogQHBhcmFtIGlkIC0gSUQgZGVsIHByb2R1Y3RvXG4gKiBAcmV0dXJucyBQcm9taXNlPEFwaVJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdEJ5SWQoaWQ6IG51bWJlcik6IFByb21pc2U8QXBpUmVzcG9uc2U8UHJvZHVjdFdpdGhDYXRlZ29yeT4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL3Byb2R1Y3RzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIC8vIFVzYXIgcGFyc2luZyBzZWd1cm8gZGUgSlNPTlxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVBcGlSZXNwb25zZUpzb248QXBpUmVzcG9uc2U8UHJvZHVjdFdpdGhDYXRlZ29yeT4+KHJlc3BvbnNlKVxuXG4gICAgaWYgKCFyZXN1bHQgfHwgIXJlc3VsdC5zdWNjZXNzIHx8ICFyZXN1bHQuZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdD8uZXJyb3IgfHwgJ0Vycm9yIHBhcnNpbmcgQVBJIHJlc3BvbnNlJylcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvYnRlbmllbmRvIHByb2R1Y3RvICR7aWR9OmAsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBCdXNjYSBwcm9kdWN0b3MgcG9yIHTDqXJtaW5vIGRlIGLDunNxdWVkYVxuICogQHBhcmFtIHNlYXJjaFRlcm0gLSBUw6lybWlubyBkZSBiw7pzcXVlZGFcbiAqIEBwYXJhbSBsaW1pdCAtIEzDrW1pdGUgZGUgcmVzdWx0YWRvc1xuICogQHJldHVybnMgUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFByb2R1Y3RzKFxuICBzZWFyY2hUZXJtOiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSAxMlxuKTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj4ge1xuICByZXR1cm4gZ2V0UHJvZHVjdHMoe1xuICAgIHNlYXJjaDogc2VhcmNoVGVybSxcbiAgICBsaW1pdCxcbiAgICBwYWdlOiAxLFxuICB9KVxufVxuXG4vKipcbiAqIE9idGllbmUgcHJvZHVjdG9zIHBvciBjYXRlZ29yw61hXG4gKiBAcGFyYW0gY2F0ZWdvcnlTbHVnIC0gU2x1ZyBkZSBsYSBjYXRlZ29yw61hXG4gKiBAcGFyYW0gcGFnZSAtIFDDoWdpbmFcbiAqIEBwYXJhbSBsaW1pdCAtIEzDrW1pdGUgZGUgcmVzdWx0YWRvc1xuICogQHJldHVybnMgUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzQnlDYXRlZ29yeShcbiAgY2F0ZWdvcnlTbHVnOiBzdHJpbmcsXG4gIHBhZ2U6IG51bWJlciA9IDEsXG4gIGxpbWl0OiBudW1iZXIgPSAxMlxuKTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj4ge1xuICByZXR1cm4gZ2V0UHJvZHVjdHMoe1xuICAgIGNhdGVnb3J5OiBjYXRlZ29yeVNsdWcsXG4gICAgcGFnZSxcbiAgICBsaW1pdCxcbiAgfSlcbn1cblxuLyoqXG4gKiBPYnRpZW5lIHByb2R1Y3RvcyBjb24gZGVzY3VlbnRvXG4gKiBAcGFyYW0gcGFnZSAtIFDDoWdpbmFcbiAqIEBwYXJhbSBsaW1pdCAtIEzDrW1pdGUgZGUgcmVzdWx0YWRvc1xuICogQHJldHVybnMgUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERpc2NvdW50ZWRQcm9kdWN0cyhcbiAgcGFnZTogbnVtYmVyID0gMSxcbiAgbGltaXQ6IG51bWJlciA9IDEyXG4pOiBQcm9taXNlPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PiB7XG4gIC8vIE5vdGE6IEVzdG8gcmVxdWVyaXLDrWEgdW4gZmlsdHJvIGFkaWNpb25hbCBlbiBsYSBBUElcbiAgLy8gUG9yIGFob3JhLCBvYnRlbmVtb3MgdG9kb3MgbG9zIHByb2R1Y3RvcyB5IGZpbHRyYW1vcyBlbiBlbCBmcm9udGVuZFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFByb2R1Y3RzKHsgcGFnZSwgbGltaXQgfSlcblxuICAvLyBGaWx0cmFyIHByb2R1Y3RvcyBjb24gZGVzY3VlbnRvXG4gIGNvbnN0IGRpc2NvdW50ZWRQcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKFxuICAgIHByb2R1Y3QgPT4gcHJvZHVjdC5kaXNjb3VudGVkX3ByaWNlICYmIHByb2R1Y3QuZGlzY291bnRlZF9wcmljZSA8IHByb2R1Y3QucHJpY2VcbiAgKVxuXG4gIHJldHVybiB7XG4gICAgLi4ucmVzcG9uc2UsXG4gICAgZGF0YTogZGlzY291bnRlZFByb2R1Y3RzLFxuICB9XG59XG5cbi8qKlxuICogT2J0aWVuZSBwcm9kdWN0b3MgcG9yIG1hcmNhXG4gKiBAcGFyYW0gYnJhbmROYW1lIC0gTm9tYnJlIGRlIGxhIG1hcmNhXG4gKiBAcGFyYW0gcGFnZSAtIFDDoWdpbmFcbiAqIEBwYXJhbSBsaW1pdCAtIEzDrW1pdGUgZGUgcmVzdWx0YWRvc1xuICogQHJldHVybnMgUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzQnlCcmFuZChcbiAgYnJhbmROYW1lOiBzdHJpbmcsXG4gIHBhZ2U6IG51bWJlciA9IDEsXG4gIGxpbWl0OiBudW1iZXIgPSAxMlxuKTogUHJvbWlzZTxQYWdpbmF0ZWRSZXNwb25zZTxQcm9kdWN0V2l0aENhdGVnb3J5Pj4ge1xuICByZXR1cm4gZ2V0UHJvZHVjdHMoe1xuICAgIGJyYW5kOiBicmFuZE5hbWUsXG4gICAgcGFnZSxcbiAgICBsaW1pdCxcbiAgfSlcbn1cblxuLyoqXG4gKiBPYnRpZW5lIHByb2R1Y3RvcyByZWxhY2lvbmFkb3MgKG1pc21hIGNhdGVnb3LDrWEpXG4gKiBAcGFyYW0gcHJvZHVjdElkIC0gSUQgZGVsIHByb2R1Y3RvIGFjdHVhbFxuICogQHBhcmFtIGNhdGVnb3J5SWQgLSBJRCBkZSBsYSBjYXRlZ29yw61hXG4gKiBAcGFyYW0gbGltaXQgLSBMw61taXRlIGRlIHJlc3VsdGFkb3NcbiAqIEByZXR1cm5zIFByb21pc2U8UHJvZHVjdFdpdGhDYXRlZ29yeVtdPlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVsYXRlZFByb2R1Y3RzKFxuICBwcm9kdWN0SWQ6IG51bWJlcixcbiAgY2F0ZWdvcnlJZDogbnVtYmVyLFxuICBsaW1pdDogbnVtYmVyID0gNFxuKTogUHJvbWlzZTxQcm9kdWN0V2l0aENhdGVnb3J5W10+IHtcbiAgdHJ5IHtcbiAgICAvLyBPYnRlbmVyIHByb2R1Y3RvcyBkZSBsYSBtaXNtYSBjYXRlZ29yw61hXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9wcm9kdWN0cz9jYXRlZ29yeV9pZD0ke2NhdGVnb3J5SWR9JmxpbWl0PSR7bGltaXQgKyAxfWAsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICAvLyBVc2FyIHBhcnNpbmcgc2VndXJvIGRlIEpTT05cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlQXBpUmVzcG9uc2VKc29uPFBhZ2luYXRlZFJlc3BvbnNlPFByb2R1Y3RXaXRoQ2F0ZWdvcnk+PihyZXNwb25zZSlcblxuICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQuc3VjY2VzcyB8fCAhcmVzdWx0LmRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQ/LmVycm9yIHx8ICdFcnJvciBwYXJzaW5nIEFQSSByZXNwb25zZScpXG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHJlc3VsdC5kYXRhXG5cbiAgICAvLyBGaWx0cmFyIGVsIHByb2R1Y3RvIGFjdHVhbCB5IGxpbWl0YXIgcmVzdWx0YWRvc1xuICAgIHJldHVybiBkYXRhLmRhdGEuZmlsdGVyKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCAhPT0gcHJvZHVjdElkKS5zbGljZSgwLCBsaW1pdClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBTb2xvIGxvZ2dlYXIgZXJyb3JlcyBxdWUgbm8gc2VhbiBBYm9ydEVycm9yXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvYnRlbmllbmRvIHByb2R1Y3RvcyByZWxhY2lvbmFkb3M6JywgZXJyb3IpXG4gICAgfVxuICAgIHJldHVybiBbXVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgQVVYSUxJQVJFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDb252aWVydGUgdW4gcHJvZHVjdG8gZGVsIGZvcm1hdG8gYW50aWd1byBhbCBudWV2b1xuICogQHBhcmFtIG9sZFByb2R1Y3QgLSBQcm9kdWN0byBlbiBmb3JtYXRvIGFudGlndW9cbiAqIEByZXR1cm5zIFByb2R1Y3RXaXRoQ2F0ZWdvcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRMZWdhY3lQcm9kdWN0KG9sZFByb2R1Y3Q6IGFueSk6IFByb2R1Y3RXaXRoQ2F0ZWdvcnkge1xuICByZXR1cm4ge1xuICAgIGlkOiBvbGRQcm9kdWN0LmlkLFxuICAgIG5hbWU6IG9sZFByb2R1Y3QudGl0bGUsXG4gICAgYnJhbmQ6IG9sZFByb2R1Y3QuYnJhbmQgfHwgbnVsbCwgLy8gTWFyY2EgZGVsIHByb2R1Y3RvIGxlZ2FjeVxuICAgIHNsdWc6IG9sZFByb2R1Y3QudGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtejAtOV0rL2csICctJyksXG4gICAgZGVzY3JpcHRpb246IGBQcm9kdWN0byAke29sZFByb2R1Y3QudGl0bGV9YCxcbiAgICBwcmljZTogb2xkUHJvZHVjdC5wcmljZSxcbiAgICBkaXNjb3VudGVkX3ByaWNlOiBvbGRQcm9kdWN0LmRpc2NvdW50ZWRQcmljZSxcbiAgICBzdG9jazogNTAsIC8vIFN0b2NrIHBvciBkZWZlY3RvXG4gICAgY2F0ZWdvcnlfaWQ6IDEsIC8vIENhdGVnb3LDrWEgcG9yIGRlZmVjdG9cbiAgICBpbWFnZXM6IG9sZFByb2R1Y3QuaW1ncyxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogbnVsbCwgLy8gQ2FtcG8gcmVxdWVyaWRvIHBvciBlbCB0aXBvXG4gIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhIGVsIHBvcmNlbnRhamUgZGUgZGVzY3VlbnRvXG4gKiBAcGFyYW0gb3JpZ2luYWxQcmljZSAtIFByZWNpbyBvcmlnaW5hbFxuICogQHBhcmFtIGRpc2NvdW50ZWRQcmljZSAtIFByZWNpbyBjb24gZGVzY3VlbnRvXG4gKiBAcmV0dXJucyBudW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURpc2NvdW50UGVyY2VudGFnZShcbiAgb3JpZ2luYWxQcmljZTogbnVtYmVyLFxuICBkaXNjb3VudGVkUHJpY2U6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgaWYgKCFkaXNjb3VudGVkUHJpY2UgfHwgZGlzY291bnRlZFByaWNlID49IG9yaWdpbmFsUHJpY2UpIHtcbiAgICByZXR1cm4gMFxuICB9XG5cbiAgcmV0dXJuIE1hdGgucm91bmQoKChvcmlnaW5hbFByaWNlIC0gZGlzY291bnRlZFByaWNlKSAvIG9yaWdpbmFsUHJpY2UpICogMTAwKVxufVxuXG4vKipcbiAqIEZvcm1hdGVhIGVsIHByZWNpbyBwYXJhIG1vc3RyYXJcbiAqIEBwYXJhbSBwcmljZSAtIFByZWNpb1xuICogQHBhcmFtIGN1cnJlbmN5IC0gTW9uZWRhXG4gKiBAcmV0dXJucyBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFByaWNlKHByaWNlOiBudW1iZXIsIGN1cnJlbmN5OiBzdHJpbmcgPSAnQVJTJyk6IHN0cmluZyB7XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VzLUFSJywge1xuICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgIGN1cnJlbmN5LFxuICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMCxcbiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIsXG4gIH0pLmZvcm1hdChwcmljZSlcbn1cblxuLyoqXG4gKiBWZXJpZmljYSBzaSB1biBwcm9kdWN0byBlc3TDoSBlbiBzdG9ja1xuICogQHBhcmFtIHByb2R1Y3QgLSBQcm9kdWN0b1xuICogQHJldHVybnMgYm9vbGVhblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQcm9kdWN0SW5TdG9jayhwcm9kdWN0OiBQcm9kdWN0V2l0aENhdGVnb3J5KTogYm9vbGVhbiB7XG4gIHJldHVybiBwcm9kdWN0LnN0b2NrID4gMFxufVxuXG4vKipcbiAqIE9idGllbmUgbGEgVVJMIGRlIGxhIGltYWdlbiBwcmluY2lwYWwgZGVsIHByb2R1Y3RvXG4gKiBAcGFyYW0gcHJvZHVjdCAtIFByb2R1Y3RvXG4gKiBAcmV0dXJucyBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2R1Y3RNYWluSW1hZ2UocHJvZHVjdDogUHJvZHVjdFdpdGhDYXRlZ29yeSk6IHN0cmluZyB7XG4gIGlmIChwcm9kdWN0LmltYWdlcz8ucHJldmlld3M/LlswXSkge1xuICAgIHJldHVybiBwcm9kdWN0LmltYWdlcy5wcmV2aWV3c1swXVxuICB9XG5cbiAgaWYgKHByb2R1Y3QuaW1hZ2VzPy50aHVtYm5haWxzPy5bMF0pIHtcbiAgICByZXR1cm4gcHJvZHVjdC5pbWFnZXMudGh1bWJuYWlsc1swXVxuICB9XG5cbiAgcmV0dXJuICcvaW1hZ2VzL3Byb2R1Y3RzL3BsYWNlaG9sZGVyLmpwZydcbn1cbiJdLCJuYW1lcyI6WyJjYWxjdWxhdGVEaXNjb3VudFBlcmNlbnRhZ2UiLCJjb252ZXJ0TGVnYWN5UHJvZHVjdCIsImZvcm1hdFByaWNlIiwiZ2V0RGlzY291bnRlZFByb2R1Y3RzIiwiZ2V0UHJvZHVjdEJ5SWQiLCJnZXRQcm9kdWN0TWFpbkltYWdlIiwiZ2V0UHJvZHVjdHMiLCJnZXRQcm9kdWN0c0J5QnJhbmQiLCJnZXRQcm9kdWN0c0J5Q2F0ZWdvcnkiLCJnZXRSZWxhdGVkUHJvZHVjdHMiLCJpc1Byb2R1Y3RJblN0b2NrIiwic2VhcmNoUHJvZHVjdHMiLCJmaWx0ZXJzIiwic2lnbmFsIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImFwcGVuZCIsInRvU3RyaW5nIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZXN1bHQiLCJzYWZlQXBpUmVzcG9uc2VKc29uIiwic3VjY2VzcyIsImNvbnNvbGUiLCJlcnJvciIsImRhdGEiLCJwYWdpbmF0aW9uIiwicGFnZSIsImxpbWl0IiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwibWVzc2FnZSIsIkVycm9yIiwibmFtZSIsImlkIiwic2VhcmNoVGVybSIsInNlYXJjaCIsImNhdGVnb3J5U2x1ZyIsImNhdGVnb3J5IiwiZGlzY291bnRlZFByb2R1Y3RzIiwiZmlsdGVyIiwicHJvZHVjdCIsImRpc2NvdW50ZWRfcHJpY2UiLCJwcmljZSIsImJyYW5kTmFtZSIsImJyYW5kIiwicHJvZHVjdElkIiwiY2F0ZWdvcnlJZCIsInNsaWNlIiwib2xkUHJvZHVjdCIsInRpdGxlIiwic2x1ZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImRlc2NyaXB0aW9uIiwiZGlzY291bnRlZFByaWNlIiwic3RvY2siLCJjYXRlZ29yeV9pZCIsImltYWdlcyIsImltZ3MiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsIm9yaWdpbmFsUHJpY2UiLCJNYXRoIiwicm91bmQiLCJjdXJyZW5jeSIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImZvcm1hdCIsInByZXZpZXdzIiwidGh1bWJuYWlscyJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLHVEQUF1RDtBQUN2RCxzQ0FBc0M7Ozs7Ozs7Ozs7OztRQXdSdEJBO2VBQUFBOztRQXZCQUM7ZUFBQUE7O1FBd0NBQztlQUFBQTs7UUFoSU1DO2VBQUFBOztRQWpFQUM7ZUFBQUE7O1FBd05OQztlQUFBQTs7UUFqVE1DO2VBQUFBOztRQW9MQUM7ZUFBQUE7O1FBNUNBQztlQUFBQTs7UUErREFDO2VBQUFBOztRQWlHTkM7ZUFBQUE7O1FB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