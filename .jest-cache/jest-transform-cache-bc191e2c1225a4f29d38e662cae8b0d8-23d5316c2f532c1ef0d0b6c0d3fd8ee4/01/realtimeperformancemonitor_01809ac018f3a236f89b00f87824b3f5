71fe4e45f7995f9bfd8a22a67c354cfb
// ===================================
// PINTEYA E-COMMERCE - REAL-TIME PERFORMANCE MONITOR
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DEFAULT_THRESHOLDS () {
        return DEFAULT_THRESHOLDS;
    },
    get RealTimeMonitoringUtils () {
        return RealTimeMonitoringUtils;
    },
    get RealTimePerformanceMonitor () {
        return RealTimePerformanceMonitor;
    },
    get realTimePerformanceMonitor () {
        return realTimePerformanceMonitor;
    }
});
const _logger = require("../enterprise/logger");
const _redis = require("../integrations/redis");
const DEFAULT_THRESHOLDS = {
    responseTime: {
        warning: 1000,
        critical: 3000
    },
    errorRate: {
        warning: 0.05,
        critical: 0.1
    },
    cpuUsage: {
        warning: 0.7,
        critical: 0.9
    },
    memoryUsage: {
        warning: 0.8,
        critical: 0.95
    },
    coreWebVitals: {
        lcp: {
            good: 2500,
            poor: 4000
        },
        fid: {
            good: 100,
            poor: 300
        },
        cls: {
            good: 0.1,
            poor: 0.25
        },
        fcp: {
            good: 1800,
            poor: 3000
        },
        ttfb: {
            good: 800,
            poor: 1800
        }
    }
};
class RealTimePerformanceMonitor {
    constructor(){
        this.redis = (0, _redis.getRedisClient)();
        this.thresholds = DEFAULT_THRESHOLDS;
        this.alerts = new Map();
        this.metricsBuffer = [];
        this.webVitalsBuffer = [];
        this.apiMetricsBuffer = [];
        this.dbMetricsBuffer = [];
        this.subscribers = new Set();
        this.startMonitoring();
        this.startPeriodicFlush();
    }
    static getInstance() {
        if (!RealTimePerformanceMonitor.instance) {
            RealTimePerformanceMonitor.instance = new RealTimePerformanceMonitor();
        }
        return RealTimePerformanceMonitor.instance;
    }
    /**
   * Inicia el monitoreo en tiempo real
   */ startMonitoring() {
        this.monitoringInterval = setInterval(()=>{
            this.collectSystemMetrics();
        }, 5000); // Cada 5 segundos
        _logger.logger.info(_logger.LogCategory.MONITORING, 'Real-time performance monitoring started');
    }
    /**
   * Inicia el flush periódico de métricas
   */ startPeriodicFlush() {
        this.flushInterval = setInterval(()=>{
            this.flushMetricsToRedis();
        }, 30000); // Cada 30 segundos
    }
    /**
   * Recolecta métricas del sistema
   */ async collectSystemMetrics() {
        try {
            const metrics = {
                timestamp: Date.now(),
                responseTime: await this.getAverageResponseTime(),
                throughput: await this.getCurrentThroughput(),
                errorRate: await this.getCurrentErrorRate(),
                cpuUsage: await this.getCPUUsage(),
                memoryUsage: await this.getMemoryUsage(),
                activeConnections: await this.getActiveConnections(),
                queueSize: await this.getQueueSize(),
                cacheHitRate: await this.getCacheHitRate(),
                dbConnectionPool: await this.getDBConnectionPoolSize()
            };
            this.metricsBuffer.push(metrics);
            // Mantener solo las últimas 100 métricas en buffer
            if (this.metricsBuffer.length > 100) {
                this.metricsBuffer = this.metricsBuffer.slice(-100);
            }
            // Verificar umbrales y generar alertas
            await this.checkThresholds(metrics);
            // Notificar a suscriptores
            this.notifySubscribers('metrics', metrics);
        } catch (error) {
            _logger.logger.error(_logger.LogCategory.MONITORING, 'Error collecting system metrics', error);
        }
    }
    /**
   * Registra métricas de Core Web Vitals
   */ recordWebVitals(vitals) {
        const webVitals = {
            ...vitals,
            timestamp: Date.now()
        };
        this.webVitalsBuffer.push(webVitals);
        // Mantener solo las últimas 50 métricas
        if (this.webVitalsBuffer.length > 50) {
            this.webVitalsBuffer = this.webVitalsBuffer.slice(-50);
        }
        // Verificar umbrales de Core Web Vitals
        this.checkWebVitalsThresholds(webVitals);
        // Notificar a suscriptores
        this.notifySubscribers('webVitals', webVitals);
    }
    /**
   * Registra métricas de API
   */ recordAPIMetrics(metrics) {
        const apiMetrics = {
            ...metrics,
            timestamp: Date.now()
        };
        this.apiMetricsBuffer.push(apiMetrics);
        // Mantener solo las últimas 200 métricas
        if (this.apiMetricsBuffer.length > 200) {
            this.apiMetricsBuffer = this.apiMetricsBuffer.slice(-200);
        }
        // Verificar umbrales de API
        this.checkAPIThresholds(apiMetrics);
        // Notificar a suscriptores
        this.notifySubscribers('apiMetrics', apiMetrics);
    }
    /**
   * Registra métricas de base de datos
   */ recordDatabaseMetrics(metrics) {
        const dbMetrics = {
            ...metrics,
            timestamp: Date.now()
        };
        this.dbMetricsBuffer.push(dbMetrics);
        // Mantener solo las últimas 100 métricas
        if (this.dbMetricsBuffer.length > 100) {
            this.dbMetricsBuffer = this.dbMetricsBuffer.slice(-100);
        }
        // Verificar umbrales de DB
        this.checkDatabaseThresholds(dbMetrics);
        // Notificar a suscriptores
        this.notifySubscribers('dbMetrics', dbMetrics);
    }
    /**
   * Verifica umbrales y genera alertas
   */ async checkThresholds(metrics) {
        // Verificar tiempo de respuesta
        if (metrics.responseTime > this.thresholds.responseTime.critical) {
            await this.createAlert('performance', 'critical', 'responseTime', metrics.responseTime, this.thresholds.responseTime.critical, `Response time crítico: ${metrics.responseTime}ms`);
        } else if (metrics.responseTime > this.thresholds.responseTime.warning) {
            await this.createAlert('performance', 'medium', 'responseTime', metrics.responseTime, this.thresholds.responseTime.warning, `Response time alto: ${metrics.responseTime}ms`);
        }
        // Verificar tasa de errores
        if (metrics.errorRate > this.thresholds.errorRate.critical) {
            await this.createAlert('error', 'critical', 'errorRate', metrics.errorRate, this.thresholds.errorRate.critical, `Tasa de errores crítica: ${(metrics.errorRate * 100).toFixed(1)}%`);
        } else if (metrics.errorRate > this.thresholds.errorRate.warning) {
            await this.createAlert('error', 'medium', 'errorRate', metrics.errorRate, this.thresholds.errorRate.warning, `Tasa de errores alta: ${(metrics.errorRate * 100).toFixed(1)}%`);
        }
        // Verificar uso de CPU
        if (metrics.cpuUsage > this.thresholds.cpuUsage.critical) {
            await this.createAlert('capacity', 'critical', 'cpuUsage', metrics.cpuUsage, this.thresholds.cpuUsage.critical, `Uso de CPU crítico: ${(metrics.cpuUsage * 100).toFixed(1)}%`);
        } else if (metrics.cpuUsage > this.thresholds.cpuUsage.warning) {
            await this.createAlert('capacity', 'medium', 'cpuUsage', metrics.cpuUsage, this.thresholds.cpuUsage.warning, `Uso de CPU alto: ${(metrics.cpuUsage * 100).toFixed(1)}%`);
        }
        // Verificar uso de memoria
        if (metrics.memoryUsage > this.thresholds.memoryUsage.critical) {
            await this.createAlert('capacity', 'critical', 'memoryUsage', metrics.memoryUsage, this.thresholds.memoryUsage.critical, `Uso de memoria crítico: ${(metrics.memoryUsage * 100).toFixed(1)}%`);
        } else if (metrics.memoryUsage > this.thresholds.memoryUsage.warning) {
            await this.createAlert('capacity', 'medium', 'memoryUsage', metrics.memoryUsage, this.thresholds.memoryUsage.warning, `Uso de memoria alto: ${(metrics.memoryUsage * 100).toFixed(1)}%`);
        }
    }
    /**
   * Verifica umbrales de Core Web Vitals
   */ checkWebVitalsThresholds(vitals) {
        const { coreWebVitals } = this.thresholds;
        // Verificar LCP
        if (vitals.lcp > coreWebVitals.lcp.poor) {
            this.createAlert('performance', 'high', 'lcp', vitals.lcp, coreWebVitals.lcp.poor, `LCP pobre: ${vitals.lcp}ms`);
        } else if (vitals.lcp > coreWebVitals.lcp.good) {
            this.createAlert('performance', 'medium', 'lcp', vitals.lcp, coreWebVitals.lcp.good, `LCP necesita mejora: ${vitals.lcp}ms`);
        }
        // Verificar FID
        if (vitals.fid > coreWebVitals.fid.poor) {
            this.createAlert('performance', 'high', 'fid', vitals.fid, coreWebVitals.fid.poor, `FID pobre: ${vitals.fid}ms`);
        } else if (vitals.fid > coreWebVitals.fid.good) {
            this.createAlert('performance', 'medium', 'fid', vitals.fid, coreWebVitals.fid.good, `FID necesita mejora: ${vitals.fid}ms`);
        }
        // Verificar CLS
        if (vitals.cls > coreWebVitals.cls.poor) {
            this.createAlert('performance', 'high', 'cls', vitals.cls, coreWebVitals.cls.poor, `CLS pobre: ${vitals.cls}`);
        } else if (vitals.cls > coreWebVitals.cls.good) {
            this.createAlert('performance', 'medium', 'cls', vitals.cls, coreWebVitals.cls.good, `CLS necesita mejora: ${vitals.cls}`);
        }
    }
    /**
   * Verifica umbrales de API
   */ checkAPIThresholds(metrics) {
        if (metrics.responseTime > this.thresholds.responseTime.critical) {
            this.createAlert('performance', 'high', 'apiResponseTime', metrics.responseTime, this.thresholds.responseTime.critical, `API lenta: ${metrics.method} ${metrics.endpoint} - ${metrics.responseTime}ms`);
        }
        if (metrics.statusCode >= 500) {
            this.createAlert('error', 'high', 'apiError', metrics.statusCode, 500, `Error de servidor: ${metrics.method} ${metrics.endpoint} - ${metrics.statusCode}`);
        } else if (metrics.statusCode >= 400) {
            this.createAlert('error', 'medium', 'apiClientError', metrics.statusCode, 400, `Error de cliente: ${metrics.method} ${metrics.endpoint} - ${metrics.statusCode}`);
        }
    }
    /**
   * Verifica umbrales de base de datos
   */ checkDatabaseThresholds(metrics) {
        if (metrics.queryTime > 5000) {
            // 5 segundos
            this.createAlert('performance', 'high', 'slowQuery', metrics.queryTime, 5000, `Query lenta: ${metrics.queryType} en ${metrics.tableName} - ${metrics.queryTime}ms`);
        }
        if (metrics.waitingConnections > 10) {
            this.createAlert('capacity', 'medium', 'dbConnectionWait', metrics.waitingConnections, 10, `Conexiones esperando: ${metrics.waitingConnections}`);
        }
    }
    /**
   * Crea una alerta
   */ async createAlert(type, severity, metric, value, threshold, message) {
        const alertId = `${type}_${metric}_${Date.now()}`;
        const alert = {
            id: alertId,
            type,
            severity,
            metric,
            value,
            threshold,
            message,
            timestamp: Date.now(),
            resolved: false,
            escalated: false
        };
        this.alerts.set(alertId, alert);
        // Notificar a suscriptores
        this.notifySubscribers('alert', alert);
        // Log de la alerta
        _logger.logger.warn(_logger.LogCategory.MONITORING, `Performance alert: ${message}`, {
            type,
            severity,
            metric,
            value,
            threshold
        });
        // Persistir en Redis
        await this.persistAlert(alert);
    }
    /**
   * Suscribirse a actualizaciones en tiempo real
   */ subscribe(callback) {
        this.subscribers.add(callback);
        return ()=>{
            this.subscribers.delete(callback);
        };
    }
    /**
   * Notifica a todos los suscriptores
   */ notifySubscribers(type, data) {
        this.subscribers.forEach((callback)=>{
            try {
                callback({
                    type,
                    data,
                    timestamp: Date.now()
                });
            } catch (error) {
                _logger.logger.error(_logger.LogCategory.MONITORING, 'Error notifying subscriber', error);
            }
        });
    }
    /**
   * Obtiene métricas actuales
   */ getCurrentMetrics() {
        return {
            realTime: [
                ...this.metricsBuffer
            ],
            webVitals: [
                ...this.webVitalsBuffer
            ],
            apiMetrics: [
                ...this.apiMetricsBuffer
            ],
            dbMetrics: [
                ...this.dbMetricsBuffer
            ],
            alerts: Array.from(this.alerts.values()).filter((a)=>!a.resolved)
        };
    }
    /**
   * Actualiza umbrales
   */ updateThresholds(newThresholds) {
        this.thresholds = {
            ...this.thresholds,
            ...newThresholds
        };
        _logger.logger.info(_logger.LogCategory.MONITORING, 'Performance thresholds updated');
    }
    /**
   * Resuelve una alerta
   */ resolveAlert(alertId) {
        const alert = this.alerts.get(alertId);
        if (alert && !alert.resolved) {
            alert.resolved = true;
            alert.resolvedAt = Date.now();
            this.notifySubscribers('alertResolved', alert);
            _logger.logger.info(_logger.LogCategory.MONITORING, `Alert resolved: ${alertId}`);
            return true;
        }
        return false;
    }
    /**
   * Flush de métricas a Redis
   */ async flushMetricsToRedis() {
        try {
            const timestamp = Date.now();
            // Guardar métricas en Redis con TTL de 24 horas
            if (this.metricsBuffer.length > 0) {
                await this.redis.setex(`metrics:realtime:${timestamp}`, 86400, JSON.stringify(this.metricsBuffer));
            }
            if (this.webVitalsBuffer.length > 0) {
                await this.redis.setex(`metrics:webvitals:${timestamp}`, 86400, JSON.stringify(this.webVitalsBuffer));
            }
            if (this.apiMetricsBuffer.length > 0) {
                await this.redis.setex(`metrics:api:${timestamp}`, 86400, JSON.stringify(this.apiMetricsBuffer));
            }
            if (this.dbMetricsBuffer.length > 0) {
                await this.redis.setex(`metrics:database:${timestamp}`, 86400, JSON.stringify(this.dbMetricsBuffer));
            }
        } catch (error) {
            _logger.logger.error(_logger.LogCategory.MONITORING, 'Error flushing metrics to Redis', error);
        }
    }
    /**
   * Persiste alerta en Redis
   */ async persistAlert(alert) {
        try {
            await this.redis.setex(`alert:${alert.id}`, 86400 * 7, JSON.stringify(alert));
        } catch (error) {
            _logger.logger.error(_logger.LogCategory.MONITORING, 'Error persisting alert', error);
        }
    }
    // ===================================
    // MÉTODOS DE RECOLECCIÓN DE MÉTRICAS
    // ===================================
    async getAverageResponseTime() {
        // Calcular tiempo de respuesta promedio de las últimas métricas de API
        const recentAPI = this.apiMetricsBuffer.slice(-10);
        if (recentAPI.length === 0) {
            return 0;
        }
        const total = recentAPI.reduce((sum, metric)=>sum + metric.responseTime, 0);
        return total / recentAPI.length;
    }
    async getCurrentThroughput() {
        // Calcular throughput basado en requests por segundo
        const now = Date.now();
        const oneMinuteAgo = now - 60000;
        const recentRequests = this.apiMetricsBuffer.filter((m)=>m.timestamp > oneMinuteAgo);
        return recentRequests.length / 60 // requests por segundo
        ;
    }
    async getCurrentErrorRate() {
        const recentAPI = this.apiMetricsBuffer.slice(-100);
        if (recentAPI.length === 0) {
            return 0;
        }
        const errors = recentAPI.filter((m)=>m.statusCode >= 400).length;
        return errors / recentAPI.length;
    }
    async getCPUUsage() {
        // Simulación de uso de CPU (en implementación real, usar librerías del sistema)
        return Math.random() * 0.8 // 0-80%
        ;
    }
    async getMemoryUsage() {
        // Obtener uso de memoria real
        if (typeof process !== 'undefined') {
            const memUsage = process.memoryUsage();
            return memUsage.heapUsed / memUsage.heapTotal;
        }
        return Math.random() * 0.7 // Fallback
        ;
    }
    async getActiveConnections() {
        // Simulación de conexiones activas
        return Math.floor(Math.random() * 100) + 10;
    }
    async getQueueSize() {
        // Simulación de tamaño de cola
        return Math.floor(Math.random() * 20);
    }
    async getCacheHitRate() {
        // Obtener hit rate del cache (integrar con cache manager)
        return Math.random() * 0.3 + 0.7 // 70-100%
        ;
    }
    async getDBConnectionPoolSize() {
        // Simulación de pool de conexiones DB
        return Math.floor(Math.random() * 10) + 5;
    }
    /**
   * Destructor
   */ destroy() {
        if (this.monitoringInterval) {
            clearInterval(this.monitoringInterval);
        }
        if (this.flushInterval) {
            clearInterval(this.flushInterval);
        }
        this.subscribers.clear();
    }
}
const realTimePerformanceMonitor = RealTimePerformanceMonitor.getInstance();
const RealTimeMonitoringUtils = {
    /**
   * Registra métricas de Web Vitals desde el cliente
   */ recordWebVitals (vitals) {
        realTimePerformanceMonitor.recordWebVitals(vitals);
    },
    /**
   * Registra métricas de API
   */ recordAPICall (metrics) {
        realTimePerformanceMonitor.recordAPIMetrics(metrics);
    },
    /**
   * Registra métricas de base de datos
   */ recordDatabaseQuery (metrics) {
        realTimePerformanceMonitor.recordDatabaseMetrics(metrics);
    },
    /**
   * Obtiene resumen de estado actual
   */ getCurrentStatus () {
        const current = realTimePerformanceMonitor.getCurrentMetrics();
        const latestMetrics = current.realTime[current.realTime.length - 1];
        if (!latestMetrics) {
            return {
                healthy: false,
                activeAlerts: 0,
                avgResponseTime: 0,
                errorRate: 0,
                lastUpdate: 0
            };
        }
        const activeAlerts = current.alerts.length;
        const healthy = activeAlerts === 0 && latestMetrics.responseTime < 2000 && latestMetrics.errorRate < 0.05;
        return {
            healthy,
            activeAlerts,
            avgResponseTime: latestMetrics.responseTime,
            errorRate: latestMetrics.errorRate,
            lastUpdate: latestMetrics.timestamp
        };
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxtb25pdG9yaW5nXFxyZWFsLXRpbWUtcGVyZm9ybWFuY2UtbW9uaXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gUkVBTC1USU1FIFBFUkZPUk1BTkNFIE1PTklUT1Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IGxvZ2dlciwgTG9nQ2F0ZWdvcnkgfSBmcm9tICcuLi9lbnRlcnByaXNlL2xvZ2dlcidcbmltcG9ydCB7IGdldFJlZGlzQ2xpZW50IH0gZnJvbSAnLi4vaW50ZWdyYXRpb25zL3JlZGlzJ1xuXG4vKipcbiAqIE3DqXRyaWNhcyBkZSBwZXJmb3JtYW5jZSBlbiB0aWVtcG8gcmVhbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWxUaW1lTWV0cmljcyB7XG4gIHRpbWVzdGFtcDogbnVtYmVyXG4gIHJlc3BvbnNlVGltZTogbnVtYmVyXG4gIHRocm91Z2hwdXQ6IG51bWJlclxuICBlcnJvclJhdGU6IG51bWJlclxuICBjcHVVc2FnZTogbnVtYmVyXG4gIG1lbW9yeVVzYWdlOiBudW1iZXJcbiAgYWN0aXZlQ29ubmVjdGlvbnM6IG51bWJlclxuICBxdWV1ZVNpemU6IG51bWJlclxuICBjYWNoZUhpdFJhdGU6IG51bWJlclxuICBkYkNvbm5lY3Rpb25Qb29sOiBudW1iZXJcbn1cblxuLyoqXG4gKiBDb3JlIFdlYiBWaXRhbHMgZW4gdGllbXBvIHJlYWxcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb3JlV2ViVml0YWxzIHtcbiAgbGNwOiBudW1iZXIgLy8gTGFyZ2VzdCBDb250ZW50ZnVsIFBhaW50XG4gIGZpZDogbnVtYmVyIC8vIEZpcnN0IElucHV0IERlbGF5XG4gIGNsczogbnVtYmVyIC8vIEN1bXVsYXRpdmUgTGF5b3V0IFNoaWZ0XG4gIGZjcDogbnVtYmVyIC8vIEZpcnN0IENvbnRlbnRmdWwgUGFpbnRcbiAgdHRmYjogbnVtYmVyIC8vIFRpbWUgdG8gRmlyc3QgQnl0ZVxuICBpbnA6IG51bWJlciAvLyBJbnRlcmFjdGlvbiB0byBOZXh0IFBhaW50XG4gIHRpbWVzdGFtcDogbnVtYmVyXG59XG5cbi8qKlxuICogTcOpdHJpY2FzIGRlIEFQSSBlbiB0aWVtcG8gcmVhbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFQSU1ldHJpY3Mge1xuICBlbmRwb2ludDogc3RyaW5nXG4gIG1ldGhvZDogc3RyaW5nXG4gIHJlc3BvbnNlVGltZTogbnVtYmVyXG4gIHN0YXR1c0NvZGU6IG51bWJlclxuICByZXF1ZXN0U2l6ZTogbnVtYmVyXG4gIHJlc3BvbnNlU2l6ZTogbnVtYmVyXG4gIHVzZXJBZ2VudDogc3RyaW5nXG4gIGlwOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBudW1iZXJcbn1cblxuLyoqXG4gKiBNw6l0cmljYXMgZGUgYmFzZSBkZSBkYXRvc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlTWV0cmljcyB7XG4gIHF1ZXJ5VGltZTogbnVtYmVyXG4gIHF1ZXJ5VHlwZTogJ1NFTEVDVCcgfCAnSU5TRVJUJyB8ICdVUERBVEUnIHwgJ0RFTEVURSdcbiAgdGFibGVOYW1lOiBzdHJpbmdcbiAgcm93c0FmZmVjdGVkOiBudW1iZXJcbiAgY29ubmVjdGlvblBvb2xTaXplOiBudW1iZXJcbiAgYWN0aXZlQ29ubmVjdGlvbnM6IG51bWJlclxuICB3YWl0aW5nQ29ubmVjdGlvbnM6IG51bWJlclxuICB0aW1lc3RhbXA6IG51bWJlclxufVxuXG4vKipcbiAqIEFsZXJ0YXMgZGUgcGVyZm9ybWFuY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZUFsZXJ0IHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiAncGVyZm9ybWFuY2UnIHwgJ2Vycm9yJyB8ICdjYXBhY2l0eScgfCAnYXZhaWxhYmlsaXR5J1xuICBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCdcbiAgbWV0cmljOiBzdHJpbmdcbiAgdmFsdWU6IG51bWJlclxuICB0aHJlc2hvbGQ6IG51bWJlclxuICBtZXNzYWdlOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBudW1iZXJcbiAgcmVzb2x2ZWQ6IGJvb2xlYW5cbiAgcmVzb2x2ZWRBdD86IG51bWJlclxuICBlc2NhbGF0ZWQ6IGJvb2xlYW5cbiAgZXNjYWxhdGVkQXQ/OiBudW1iZXJcbn1cblxuLyoqXG4gKiBDb25maWd1cmFjacOzbiBkZSB1bWJyYWxlc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlVGhyZXNob2xkcyB7XG4gIHJlc3BvbnNlVGltZToge1xuICAgIHdhcm5pbmc6IG51bWJlclxuICAgIGNyaXRpY2FsOiBudW1iZXJcbiAgfVxuICBlcnJvclJhdGU6IHtcbiAgICB3YXJuaW5nOiBudW1iZXJcbiAgICBjcml0aWNhbDogbnVtYmVyXG4gIH1cbiAgY3B1VXNhZ2U6IHtcbiAgICB3YXJuaW5nOiBudW1iZXJcbiAgICBjcml0aWNhbDogbnVtYmVyXG4gIH1cbiAgbWVtb3J5VXNhZ2U6IHtcbiAgICB3YXJuaW5nOiBudW1iZXJcbiAgICBjcml0aWNhbDogbnVtYmVyXG4gIH1cbiAgY29yZVdlYlZpdGFsczoge1xuICAgIGxjcDogeyBnb29kOiBudW1iZXI7IHBvb3I6IG51bWJlciB9XG4gICAgZmlkOiB7IGdvb2Q6IG51bWJlcjsgcG9vcjogbnVtYmVyIH1cbiAgICBjbHM6IHsgZ29vZDogbnVtYmVyOyBwb29yOiBudW1iZXIgfVxuICAgIGZjcDogeyBnb29kOiBudW1iZXI7IHBvb3I6IG51bWJlciB9XG4gICAgdHRmYjogeyBnb29kOiBudW1iZXI7IHBvb3I6IG51bWJlciB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb25maWd1cmFjacOzbiBwb3IgZGVmZWN0byBkZSB1bWJyYWxlc1xuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9USFJFU0hPTERTOiBQZXJmb3JtYW5jZVRocmVzaG9sZHMgPSB7XG4gIHJlc3BvbnNlVGltZToge1xuICAgIHdhcm5pbmc6IDEwMDAsIC8vIDEgc2VndW5kb1xuICAgIGNyaXRpY2FsOiAzMDAwLCAvLyAzIHNlZ3VuZG9zXG4gIH0sXG4gIGVycm9yUmF0ZToge1xuICAgIHdhcm5pbmc6IDAuMDUsIC8vIDUlXG4gICAgY3JpdGljYWw6IDAuMSwgLy8gMTAlXG4gIH0sXG4gIGNwdVVzYWdlOiB7XG4gICAgd2FybmluZzogMC43LCAvLyA3MCVcbiAgICBjcml0aWNhbDogMC45LCAvLyA5MCVcbiAgfSxcbiAgbWVtb3J5VXNhZ2U6IHtcbiAgICB3YXJuaW5nOiAwLjgsIC8vIDgwJVxuICAgIGNyaXRpY2FsOiAwLjk1LCAvLyA5NSVcbiAgfSxcbiAgY29yZVdlYlZpdGFsczoge1xuICAgIGxjcDogeyBnb29kOiAyNTAwLCBwb29yOiA0MDAwIH0sXG4gICAgZmlkOiB7IGdvb2Q6IDEwMCwgcG9vcjogMzAwIH0sXG4gICAgY2xzOiB7IGdvb2Q6IDAuMSwgcG9vcjogMC4yNSB9LFxuICAgIGZjcDogeyBnb29kOiAxODAwLCBwb29yOiAzMDAwIH0sXG4gICAgdHRmYjogeyBnb29kOiA4MDAsIHBvb3I6IDE4MDAgfSxcbiAgfSxcbn1cblxuLyoqXG4gKiBNb25pdG9yIGRlIHBlcmZvcm1hbmNlIGVuIHRpZW1wbyByZWFsXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBSZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvclxuICBwcml2YXRlIHJlZGlzID0gZ2V0UmVkaXNDbGllbnQoKVxuICBwcml2YXRlIHRocmVzaG9sZHM6IFBlcmZvcm1hbmNlVGhyZXNob2xkcyA9IERFRkFVTFRfVEhSRVNIT0xEU1xuICBwcml2YXRlIGFsZXJ0czogTWFwPHN0cmluZywgUGVyZm9ybWFuY2VBbGVydD4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBtZXRyaWNzQnVmZmVyOiBSZWFsVGltZU1ldHJpY3NbXSA9IFtdXG4gIHByaXZhdGUgd2ViVml0YWxzQnVmZmVyOiBDb3JlV2ViVml0YWxzW10gPSBbXVxuICBwcml2YXRlIGFwaU1ldHJpY3NCdWZmZXI6IEFQSU1ldHJpY3NbXSA9IFtdXG4gIHByaXZhdGUgZGJNZXRyaWNzQnVmZmVyOiBEYXRhYmFzZU1ldHJpY3NbXSA9IFtdXG4gIHByaXZhdGUgc3Vic2NyaWJlcnM6IFNldDwoZGF0YTogYW55KSA9PiB2b2lkPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIGZsdXNoSW50ZXJ2YWw/OiBOb2RlSlMuVGltZW91dFxuICBwcml2YXRlIG1vbml0b3JpbmdJbnRlcnZhbD86IE5vZGVKUy5UaW1lb3V0XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YXJ0TW9uaXRvcmluZygpXG4gICAgdGhpcy5zdGFydFBlcmlvZGljRmx1c2goKVxuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFJlYWxUaW1lUGVyZm9ybWFuY2VNb25pdG9yIHtcbiAgICBpZiAoIVJlYWxUaW1lUGVyZm9ybWFuY2VNb25pdG9yLmluc3RhbmNlKSB7XG4gICAgICBSZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvci5pbnN0YW5jZSA9IG5ldyBSZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvcigpXG4gICAgfVxuICAgIHJldHVybiBSZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvci5pbnN0YW5jZVxuICB9XG5cbiAgLyoqXG4gICAqIEluaWNpYSBlbCBtb25pdG9yZW8gZW4gdGllbXBvIHJlYWxcbiAgICovXG4gIHByaXZhdGUgc3RhcnRNb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIHRoaXMubW9uaXRvcmluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb2xsZWN0U3lzdGVtTWV0cmljcygpXG4gICAgfSwgNTAwMCkgLy8gQ2FkYSA1IHNlZ3VuZG9zXG5cbiAgICBsb2dnZXIuaW5mbyhMb2dDYXRlZ29yeS5NT05JVE9SSU5HLCAnUmVhbC10aW1lIHBlcmZvcm1hbmNlIG1vbml0b3Jpbmcgc3RhcnRlZCcpXG4gIH1cblxuICAvKipcbiAgICogSW5pY2lhIGVsIGZsdXNoIHBlcmnDs2RpY28gZGUgbcOpdHJpY2FzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0UGVyaW9kaWNGbHVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLmZsdXNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmZsdXNoTWV0cmljc1RvUmVkaXMoKVxuICAgIH0sIDMwMDAwKSAvLyBDYWRhIDMwIHNlZ3VuZG9zXG4gIH1cblxuICAvKipcbiAgICogUmVjb2xlY3RhIG3DqXRyaWNhcyBkZWwgc2lzdGVtYVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjb2xsZWN0U3lzdGVtTWV0cmljcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWV0cmljczogUmVhbFRpbWVNZXRyaWNzID0ge1xuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHJlc3BvbnNlVGltZTogYXdhaXQgdGhpcy5nZXRBdmVyYWdlUmVzcG9uc2VUaW1lKCksXG4gICAgICAgIHRocm91Z2hwdXQ6IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFRocm91Z2hwdXQoKSxcbiAgICAgICAgZXJyb3JSYXRlOiBhd2FpdCB0aGlzLmdldEN1cnJlbnRFcnJvclJhdGUoKSxcbiAgICAgICAgY3B1VXNhZ2U6IGF3YWl0IHRoaXMuZ2V0Q1BVVXNhZ2UoKSxcbiAgICAgICAgbWVtb3J5VXNhZ2U6IGF3YWl0IHRoaXMuZ2V0TWVtb3J5VXNhZ2UoKSxcbiAgICAgICAgYWN0aXZlQ29ubmVjdGlvbnM6IGF3YWl0IHRoaXMuZ2V0QWN0aXZlQ29ubmVjdGlvbnMoKSxcbiAgICAgICAgcXVldWVTaXplOiBhd2FpdCB0aGlzLmdldFF1ZXVlU2l6ZSgpLFxuICAgICAgICBjYWNoZUhpdFJhdGU6IGF3YWl0IHRoaXMuZ2V0Q2FjaGVIaXRSYXRlKCksXG4gICAgICAgIGRiQ29ubmVjdGlvblBvb2w6IGF3YWl0IHRoaXMuZ2V0REJDb25uZWN0aW9uUG9vbFNpemUoKSxcbiAgICAgIH1cblxuICAgICAgdGhpcy5tZXRyaWNzQnVmZmVyLnB1c2gobWV0cmljcylcblxuICAgICAgLy8gTWFudGVuZXIgc29sbyBsYXMgw7psdGltYXMgMTAwIG3DqXRyaWNhcyBlbiBidWZmZXJcbiAgICAgIGlmICh0aGlzLm1ldHJpY3NCdWZmZXIubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgIHRoaXMubWV0cmljc0J1ZmZlciA9IHRoaXMubWV0cmljc0J1ZmZlci5zbGljZSgtMTAwKVxuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZmljYXIgdW1icmFsZXMgeSBnZW5lcmFyIGFsZXJ0YXNcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tUaHJlc2hvbGRzKG1ldHJpY3MpXG5cbiAgICAgIC8vIE5vdGlmaWNhciBhIHN1c2NyaXB0b3Jlc1xuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygnbWV0cmljcycsIG1ldHJpY3MpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dDYXRlZ29yeS5NT05JVE9SSU5HLCAnRXJyb3IgY29sbGVjdGluZyBzeXN0ZW0gbWV0cmljcycsIGVycm9yIGFzIEVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSBtw6l0cmljYXMgZGUgQ29yZSBXZWIgVml0YWxzXG4gICAqL1xuICByZWNvcmRXZWJWaXRhbHModml0YWxzOiBPbWl0PENvcmVXZWJWaXRhbHMsICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICAgIGNvbnN0IHdlYlZpdGFsczogQ29yZVdlYlZpdGFscyA9IHtcbiAgICAgIC4uLnZpdGFscyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9XG5cbiAgICB0aGlzLndlYlZpdGFsc0J1ZmZlci5wdXNoKHdlYlZpdGFscylcblxuICAgIC8vIE1hbnRlbmVyIHNvbG8gbGFzIMO6bHRpbWFzIDUwIG3DqXRyaWNhc1xuICAgIGlmICh0aGlzLndlYlZpdGFsc0J1ZmZlci5sZW5ndGggPiA1MCkge1xuICAgICAgdGhpcy53ZWJWaXRhbHNCdWZmZXIgPSB0aGlzLndlYlZpdGFsc0J1ZmZlci5zbGljZSgtNTApXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHVtYnJhbGVzIGRlIENvcmUgV2ViIFZpdGFsc1xuICAgIHRoaXMuY2hlY2tXZWJWaXRhbHNUaHJlc2hvbGRzKHdlYlZpdGFscylcblxuICAgIC8vIE5vdGlmaWNhciBhIHN1c2NyaXB0b3Jlc1xuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoJ3dlYlZpdGFscycsIHdlYlZpdGFscylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSBtw6l0cmljYXMgZGUgQVBJXG4gICAqL1xuICByZWNvcmRBUElNZXRyaWNzKG1ldHJpY3M6IE9taXQ8QVBJTWV0cmljcywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgY29uc3QgYXBpTWV0cmljczogQVBJTWV0cmljcyA9IHtcbiAgICAgIC4uLm1ldHJpY3MsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfVxuXG4gICAgdGhpcy5hcGlNZXRyaWNzQnVmZmVyLnB1c2goYXBpTWV0cmljcylcblxuICAgIC8vIE1hbnRlbmVyIHNvbG8gbGFzIMO6bHRpbWFzIDIwMCBtw6l0cmljYXNcbiAgICBpZiAodGhpcy5hcGlNZXRyaWNzQnVmZmVyLmxlbmd0aCA+IDIwMCkge1xuICAgICAgdGhpcy5hcGlNZXRyaWNzQnVmZmVyID0gdGhpcy5hcGlNZXRyaWNzQnVmZmVyLnNsaWNlKC0yMDApXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHVtYnJhbGVzIGRlIEFQSVxuICAgIHRoaXMuY2hlY2tBUElUaHJlc2hvbGRzKGFwaU1ldHJpY3MpXG5cbiAgICAvLyBOb3RpZmljYXIgYSBzdXNjcmlwdG9yZXNcbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCdhcGlNZXRyaWNzJywgYXBpTWV0cmljcylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSBtw6l0cmljYXMgZGUgYmFzZSBkZSBkYXRvc1xuICAgKi9cbiAgcmVjb3JkRGF0YWJhc2VNZXRyaWNzKG1ldHJpY3M6IE9taXQ8RGF0YWJhc2VNZXRyaWNzLCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgICBjb25zdCBkYk1ldHJpY3M6IERhdGFiYXNlTWV0cmljcyA9IHtcbiAgICAgIC4uLm1ldHJpY3MsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfVxuXG4gICAgdGhpcy5kYk1ldHJpY3NCdWZmZXIucHVzaChkYk1ldHJpY3MpXG5cbiAgICAvLyBNYW50ZW5lciBzb2xvIGxhcyDDumx0aW1hcyAxMDAgbcOpdHJpY2FzXG4gICAgaWYgKHRoaXMuZGJNZXRyaWNzQnVmZmVyLmxlbmd0aCA+IDEwMCkge1xuICAgICAgdGhpcy5kYk1ldHJpY3NCdWZmZXIgPSB0aGlzLmRiTWV0cmljc0J1ZmZlci5zbGljZSgtMTAwKVxuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciB1bWJyYWxlcyBkZSBEQlxuICAgIHRoaXMuY2hlY2tEYXRhYmFzZVRocmVzaG9sZHMoZGJNZXRyaWNzKVxuXG4gICAgLy8gTm90aWZpY2FyIGEgc3VzY3JpcHRvcmVzXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygnZGJNZXRyaWNzJywgZGJNZXRyaWNzKVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHVtYnJhbGVzIHkgZ2VuZXJhIGFsZXJ0YXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tUaHJlc2hvbGRzKG1ldHJpY3M6IFJlYWxUaW1lTWV0cmljcyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFZlcmlmaWNhciB0aWVtcG8gZGUgcmVzcHVlc3RhXG4gICAgaWYgKG1ldHJpY3MucmVzcG9uc2VUaW1lID4gdGhpcy50aHJlc2hvbGRzLnJlc3BvbnNlVGltZS5jcml0aWNhbCkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVBbGVydChcbiAgICAgICAgJ3BlcmZvcm1hbmNlJyxcbiAgICAgICAgJ2NyaXRpY2FsJyxcbiAgICAgICAgJ3Jlc3BvbnNlVGltZScsXG4gICAgICAgIG1ldHJpY3MucmVzcG9uc2VUaW1lLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMucmVzcG9uc2VUaW1lLmNyaXRpY2FsLFxuICAgICAgICBgUmVzcG9uc2UgdGltZSBjcsOtdGljbzogJHttZXRyaWNzLnJlc3BvbnNlVGltZX1tc2BcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKG1ldHJpY3MucmVzcG9uc2VUaW1lID4gdGhpcy50aHJlc2hvbGRzLnJlc3BvbnNlVGltZS53YXJuaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAncGVyZm9ybWFuY2UnLFxuICAgICAgICAnbWVkaXVtJyxcbiAgICAgICAgJ3Jlc3BvbnNlVGltZScsXG4gICAgICAgIG1ldHJpY3MucmVzcG9uc2VUaW1lLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMucmVzcG9uc2VUaW1lLndhcm5pbmcsXG4gICAgICAgIGBSZXNwb25zZSB0aW1lIGFsdG86ICR7bWV0cmljcy5yZXNwb25zZVRpbWV9bXNgXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHRhc2EgZGUgZXJyb3Jlc1xuICAgIGlmIChtZXRyaWNzLmVycm9yUmF0ZSA+IHRoaXMudGhyZXNob2xkcy5lcnJvclJhdGUuY3JpdGljYWwpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdlcnJvcicsXG4gICAgICAgICdjcml0aWNhbCcsXG4gICAgICAgICdlcnJvclJhdGUnLFxuICAgICAgICBtZXRyaWNzLmVycm9yUmF0ZSxcbiAgICAgICAgdGhpcy50aHJlc2hvbGRzLmVycm9yUmF0ZS5jcml0aWNhbCxcbiAgICAgICAgYFRhc2EgZGUgZXJyb3JlcyBjcsOtdGljYTogJHsobWV0cmljcy5lcnJvclJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKG1ldHJpY3MuZXJyb3JSYXRlID4gdGhpcy50aHJlc2hvbGRzLmVycm9yUmF0ZS53YXJuaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICAnbWVkaXVtJyxcbiAgICAgICAgJ2Vycm9yUmF0ZScsXG4gICAgICAgIG1ldHJpY3MuZXJyb3JSYXRlLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMuZXJyb3JSYXRlLndhcm5pbmcsXG4gICAgICAgIGBUYXNhIGRlIGVycm9yZXMgYWx0YTogJHsobWV0cmljcy5lcnJvclJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWBcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgdXNvIGRlIENQVVxuICAgIGlmIChtZXRyaWNzLmNwdVVzYWdlID4gdGhpcy50aHJlc2hvbGRzLmNwdVVzYWdlLmNyaXRpY2FsKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAnY2FwYWNpdHknLFxuICAgICAgICAnY3JpdGljYWwnLFxuICAgICAgICAnY3B1VXNhZ2UnLFxuICAgICAgICBtZXRyaWNzLmNwdVVzYWdlLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMuY3B1VXNhZ2UuY3JpdGljYWwsXG4gICAgICAgIGBVc28gZGUgQ1BVIGNyw610aWNvOiAkeyhtZXRyaWNzLmNwdVVzYWdlICogMTAwKS50b0ZpeGVkKDEpfSVgXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChtZXRyaWNzLmNwdVVzYWdlID4gdGhpcy50aHJlc2hvbGRzLmNwdVVzYWdlLndhcm5pbmcpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdjYXBhY2l0eScsXG4gICAgICAgICdtZWRpdW0nLFxuICAgICAgICAnY3B1VXNhZ2UnLFxuICAgICAgICBtZXRyaWNzLmNwdVVzYWdlLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMuY3B1VXNhZ2Uud2FybmluZyxcbiAgICAgICAgYFVzbyBkZSBDUFUgYWx0bzogJHsobWV0cmljcy5jcHVVc2FnZSAqIDEwMCkudG9GaXhlZCgxKX0lYFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciB1c28gZGUgbWVtb3JpYVxuICAgIGlmIChtZXRyaWNzLm1lbW9yeVVzYWdlID4gdGhpcy50aHJlc2hvbGRzLm1lbW9yeVVzYWdlLmNyaXRpY2FsKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAnY2FwYWNpdHknLFxuICAgICAgICAnY3JpdGljYWwnLFxuICAgICAgICAnbWVtb3J5VXNhZ2UnLFxuICAgICAgICBtZXRyaWNzLm1lbW9yeVVzYWdlLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMubWVtb3J5VXNhZ2UuY3JpdGljYWwsXG4gICAgICAgIGBVc28gZGUgbWVtb3JpYSBjcsOtdGljbzogJHsobWV0cmljcy5tZW1vcnlVc2FnZSAqIDEwMCkudG9GaXhlZCgxKX0lYFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAobWV0cmljcy5tZW1vcnlVc2FnZSA+IHRoaXMudGhyZXNob2xkcy5tZW1vcnlVc2FnZS53YXJuaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAnY2FwYWNpdHknLFxuICAgICAgICAnbWVkaXVtJyxcbiAgICAgICAgJ21lbW9yeVVzYWdlJyxcbiAgICAgICAgbWV0cmljcy5tZW1vcnlVc2FnZSxcbiAgICAgICAgdGhpcy50aHJlc2hvbGRzLm1lbW9yeVVzYWdlLndhcm5pbmcsXG4gICAgICAgIGBVc28gZGUgbWVtb3JpYSBhbHRvOiAkeyhtZXRyaWNzLm1lbW9yeVVzYWdlICogMTAwKS50b0ZpeGVkKDEpfSVgXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHVtYnJhbGVzIGRlIENvcmUgV2ViIFZpdGFsc1xuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1dlYlZpdGFsc1RocmVzaG9sZHModml0YWxzOiBDb3JlV2ViVml0YWxzKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb3JlV2ViVml0YWxzIH0gPSB0aGlzLnRocmVzaG9sZHNcblxuICAgIC8vIFZlcmlmaWNhciBMQ1BcbiAgICBpZiAodml0YWxzLmxjcCA+IGNvcmVXZWJWaXRhbHMubGNwLnBvb3IpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdwZXJmb3JtYW5jZScsXG4gICAgICAgICdoaWdoJyxcbiAgICAgICAgJ2xjcCcsXG4gICAgICAgIHZpdGFscy5sY3AsXG4gICAgICAgIGNvcmVXZWJWaXRhbHMubGNwLnBvb3IsXG4gICAgICAgIGBMQ1AgcG9icmU6ICR7dml0YWxzLmxjcH1tc2BcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKHZpdGFscy5sY3AgPiBjb3JlV2ViVml0YWxzLmxjcC5nb29kKSB7XG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAncGVyZm9ybWFuY2UnLFxuICAgICAgICAnbWVkaXVtJyxcbiAgICAgICAgJ2xjcCcsXG4gICAgICAgIHZpdGFscy5sY3AsXG4gICAgICAgIGNvcmVXZWJWaXRhbHMubGNwLmdvb2QsXG4gICAgICAgIGBMQ1AgbmVjZXNpdGEgbWVqb3JhOiAke3ZpdGFscy5sY3B9bXNgXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIEZJRFxuICAgIGlmICh2aXRhbHMuZmlkID4gY29yZVdlYlZpdGFscy5maWQucG9vcikge1xuICAgICAgdGhpcy5jcmVhdGVBbGVydChcbiAgICAgICAgJ3BlcmZvcm1hbmNlJyxcbiAgICAgICAgJ2hpZ2gnLFxuICAgICAgICAnZmlkJyxcbiAgICAgICAgdml0YWxzLmZpZCxcbiAgICAgICAgY29yZVdlYlZpdGFscy5maWQucG9vcixcbiAgICAgICAgYEZJRCBwb2JyZTogJHt2aXRhbHMuZmlkfW1zYFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAodml0YWxzLmZpZCA+IGNvcmVXZWJWaXRhbHMuZmlkLmdvb2QpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdwZXJmb3JtYW5jZScsXG4gICAgICAgICdtZWRpdW0nLFxuICAgICAgICAnZmlkJyxcbiAgICAgICAgdml0YWxzLmZpZCxcbiAgICAgICAgY29yZVdlYlZpdGFscy5maWQuZ29vZCxcbiAgICAgICAgYEZJRCBuZWNlc2l0YSBtZWpvcmE6ICR7dml0YWxzLmZpZH1tc2BcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgQ0xTXG4gICAgaWYgKHZpdGFscy5jbHMgPiBjb3JlV2ViVml0YWxzLmNscy5wb29yKSB7XG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAncGVyZm9ybWFuY2UnLFxuICAgICAgICAnaGlnaCcsXG4gICAgICAgICdjbHMnLFxuICAgICAgICB2aXRhbHMuY2xzLFxuICAgICAgICBjb3JlV2ViVml0YWxzLmNscy5wb29yLFxuICAgICAgICBgQ0xTIHBvYnJlOiAke3ZpdGFscy5jbHN9YFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAodml0YWxzLmNscyA+IGNvcmVXZWJWaXRhbHMuY2xzLmdvb2QpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdwZXJmb3JtYW5jZScsXG4gICAgICAgICdtZWRpdW0nLFxuICAgICAgICAnY2xzJyxcbiAgICAgICAgdml0YWxzLmNscyxcbiAgICAgICAgY29yZVdlYlZpdGFscy5jbHMuZ29vZCxcbiAgICAgICAgYENMUyBuZWNlc2l0YSBtZWpvcmE6ICR7dml0YWxzLmNsc31gXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHVtYnJhbGVzIGRlIEFQSVxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja0FQSVRocmVzaG9sZHMobWV0cmljczogQVBJTWV0cmljcyk6IHZvaWQge1xuICAgIGlmIChtZXRyaWNzLnJlc3BvbnNlVGltZSA+IHRoaXMudGhyZXNob2xkcy5yZXNwb25zZVRpbWUuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdwZXJmb3JtYW5jZScsXG4gICAgICAgICdoaWdoJyxcbiAgICAgICAgJ2FwaVJlc3BvbnNlVGltZScsXG4gICAgICAgIG1ldHJpY3MucmVzcG9uc2VUaW1lLFxuICAgICAgICB0aGlzLnRocmVzaG9sZHMucmVzcG9uc2VUaW1lLmNyaXRpY2FsLFxuICAgICAgICBgQVBJIGxlbnRhOiAke21ldHJpY3MubWV0aG9kfSAke21ldHJpY3MuZW5kcG9pbnR9IC0gJHttZXRyaWNzLnJlc3BvbnNlVGltZX1tc2BcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5zdGF0dXNDb2RlID49IDUwMCkge1xuICAgICAgdGhpcy5jcmVhdGVBbGVydChcbiAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgJ2hpZ2gnLFxuICAgICAgICAnYXBpRXJyb3InLFxuICAgICAgICBtZXRyaWNzLnN0YXR1c0NvZGUsXG4gICAgICAgIDUwMCxcbiAgICAgICAgYEVycm9yIGRlIHNlcnZpZG9yOiAke21ldHJpY3MubWV0aG9kfSAke21ldHJpY3MuZW5kcG9pbnR9IC0gJHttZXRyaWNzLnN0YXR1c0NvZGV9YFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAobWV0cmljcy5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgdGhpcy5jcmVhdGVBbGVydChcbiAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgJ21lZGl1bScsXG4gICAgICAgICdhcGlDbGllbnRFcnJvcicsXG4gICAgICAgIG1ldHJpY3Muc3RhdHVzQ29kZSxcbiAgICAgICAgNDAwLFxuICAgICAgICBgRXJyb3IgZGUgY2xpZW50ZTogJHttZXRyaWNzLm1ldGhvZH0gJHttZXRyaWNzLmVuZHBvaW50fSAtICR7bWV0cmljcy5zdGF0dXNDb2RlfWBcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2EgdW1icmFsZXMgZGUgYmFzZSBkZSBkYXRvc1xuICAgKi9cbiAgcHJpdmF0ZSBjaGVja0RhdGFiYXNlVGhyZXNob2xkcyhtZXRyaWNzOiBEYXRhYmFzZU1ldHJpY3MpOiB2b2lkIHtcbiAgICBpZiAobWV0cmljcy5xdWVyeVRpbWUgPiA1MDAwKSB7XG4gICAgICAvLyA1IHNlZ3VuZG9zXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KFxuICAgICAgICAncGVyZm9ybWFuY2UnLFxuICAgICAgICAnaGlnaCcsXG4gICAgICAgICdzbG93UXVlcnknLFxuICAgICAgICBtZXRyaWNzLnF1ZXJ5VGltZSxcbiAgICAgICAgNTAwMCxcbiAgICAgICAgYFF1ZXJ5IGxlbnRhOiAke21ldHJpY3MucXVlcnlUeXBlfSBlbiAke21ldHJpY3MudGFibGVOYW1lfSAtICR7bWV0cmljcy5xdWVyeVRpbWV9bXNgXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKG1ldHJpY3Mud2FpdGluZ0Nvbm5lY3Rpb25zID4gMTApIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXG4gICAgICAgICdjYXBhY2l0eScsXG4gICAgICAgICdtZWRpdW0nLFxuICAgICAgICAnZGJDb25uZWN0aW9uV2FpdCcsXG4gICAgICAgIG1ldHJpY3Mud2FpdGluZ0Nvbm5lY3Rpb25zLFxuICAgICAgICAxMCxcbiAgICAgICAgYENvbmV4aW9uZXMgZXNwZXJhbmRvOiAke21ldHJpY3Mud2FpdGluZ0Nvbm5lY3Rpb25zfWBcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYSB1bmEgYWxlcnRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUFsZXJ0KFxuICAgIHR5cGU6IFBlcmZvcm1hbmNlQWxlcnRbJ3R5cGUnXSxcbiAgICBzZXZlcml0eTogUGVyZm9ybWFuY2VBbGVydFsnc2V2ZXJpdHknXSxcbiAgICBtZXRyaWM6IHN0cmluZyxcbiAgICB2YWx1ZTogbnVtYmVyLFxuICAgIHRocmVzaG9sZDogbnVtYmVyLFxuICAgIG1lc3NhZ2U6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhbGVydElkID0gYCR7dHlwZX1fJHttZXRyaWN9XyR7RGF0ZS5ub3coKX1gXG5cbiAgICBjb25zdCBhbGVydDogUGVyZm9ybWFuY2VBbGVydCA9IHtcbiAgICAgIGlkOiBhbGVydElkLFxuICAgICAgdHlwZSxcbiAgICAgIHNldmVyaXR5LFxuICAgICAgbWV0cmljLFxuICAgICAgdmFsdWUsXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxuICAgICAgZXNjYWxhdGVkOiBmYWxzZSxcbiAgICB9XG5cbiAgICB0aGlzLmFsZXJ0cy5zZXQoYWxlcnRJZCwgYWxlcnQpXG5cbiAgICAvLyBOb3RpZmljYXIgYSBzdXNjcmlwdG9yZXNcbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCdhbGVydCcsIGFsZXJ0KVxuXG4gICAgLy8gTG9nIGRlIGxhIGFsZXJ0YVxuICAgIGxvZ2dlci53YXJuKExvZ0NhdGVnb3J5Lk1PTklUT1JJTkcsIGBQZXJmb3JtYW5jZSBhbGVydDogJHttZXNzYWdlfWAsIHtcbiAgICAgIHR5cGUsXG4gICAgICBzZXZlcml0eSxcbiAgICAgIG1ldHJpYyxcbiAgICAgIHZhbHVlLFxuICAgICAgdGhyZXNob2xkLFxuICAgIH0pXG5cbiAgICAvLyBQZXJzaXN0aXIgZW4gUmVkaXNcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RBbGVydChhbGVydClcbiAgfVxuXG4gIC8qKlxuICAgKiBTdXNjcmliaXJzZSBhIGFjdHVhbGl6YWNpb25lcyBlbiB0aWVtcG8gcmVhbFxuICAgKi9cbiAgc3Vic2NyaWJlKGNhbGxiYWNrOiAoZGF0YTogYW55KSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5hZGQoY2FsbGJhY2spXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5zdWJzY3JpYmVycy5kZWxldGUoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWNhIGEgdG9kb3MgbG9zIHN1c2NyaXB0b3Jlc1xuICAgKi9cbiAgcHJpdmF0ZSBub3RpZnlTdWJzY3JpYmVycyh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjYWxsYmFjayh7IHR5cGUsIGRhdGEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKExvZ0NhdGVnb3J5Lk1PTklUT1JJTkcsICdFcnJvciBub3RpZnlpbmcgc3Vic2NyaWJlcicsIGVycm9yIGFzIEVycm9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogT2J0aWVuZSBtw6l0cmljYXMgYWN0dWFsZXNcbiAgICovXG4gIGdldEN1cnJlbnRNZXRyaWNzKCk6IHtcbiAgICByZWFsVGltZTogUmVhbFRpbWVNZXRyaWNzW11cbiAgICB3ZWJWaXRhbHM6IENvcmVXZWJWaXRhbHNbXVxuICAgIGFwaU1ldHJpY3M6IEFQSU1ldHJpY3NbXVxuICAgIGRiTWV0cmljczogRGF0YWJhc2VNZXRyaWNzW11cbiAgICBhbGVydHM6IFBlcmZvcm1hbmNlQWxlcnRbXVxuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVhbFRpbWU6IFsuLi50aGlzLm1ldHJpY3NCdWZmZXJdLFxuICAgICAgd2ViVml0YWxzOiBbLi4udGhpcy53ZWJWaXRhbHNCdWZmZXJdLFxuICAgICAgYXBpTWV0cmljczogWy4uLnRoaXMuYXBpTWV0cmljc0J1ZmZlcl0sXG4gICAgICBkYk1ldHJpY3M6IFsuLi50aGlzLmRiTWV0cmljc0J1ZmZlcl0sXG4gICAgICBhbGVydHM6IEFycmF5LmZyb20odGhpcy5hbGVydHMudmFsdWVzKCkpLmZpbHRlcihhID0+ICFhLnJlc29sdmVkKSxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0dWFsaXphIHVtYnJhbGVzXG4gICAqL1xuICB1cGRhdGVUaHJlc2hvbGRzKG5ld1RocmVzaG9sZHM6IFBhcnRpYWw8UGVyZm9ybWFuY2VUaHJlc2hvbGRzPik6IHZvaWQge1xuICAgIHRoaXMudGhyZXNob2xkcyA9IHsgLi4udGhpcy50aHJlc2hvbGRzLCAuLi5uZXdUaHJlc2hvbGRzIH1cbiAgICBsb2dnZXIuaW5mbyhMb2dDYXRlZ29yeS5NT05JVE9SSU5HLCAnUGVyZm9ybWFuY2UgdGhyZXNob2xkcyB1cGRhdGVkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1ZWx2ZSB1bmEgYWxlcnRhXG4gICAqL1xuICByZXNvbHZlQWxlcnQoYWxlcnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFsZXJ0cy5nZXQoYWxlcnRJZClcbiAgICBpZiAoYWxlcnQgJiYgIWFsZXJ0LnJlc29sdmVkKSB7XG4gICAgICBhbGVydC5yZXNvbHZlZCA9IHRydWVcbiAgICAgIGFsZXJ0LnJlc29sdmVkQXQgPSBEYXRlLm5vdygpXG5cbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoJ2FsZXJ0UmVzb2x2ZWQnLCBhbGVydClcbiAgICAgIGxvZ2dlci5pbmZvKExvZ0NhdGVnb3J5Lk1PTklUT1JJTkcsIGBBbGVydCByZXNvbHZlZDogJHthbGVydElkfWApXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCBkZSBtw6l0cmljYXMgYSBSZWRpc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmbHVzaE1ldHJpY3NUb1JlZGlzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpXG5cbiAgICAgIC8vIEd1YXJkYXIgbcOpdHJpY2FzIGVuIFJlZGlzIGNvbiBUVEwgZGUgMjQgaG9yYXNcbiAgICAgIGlmICh0aGlzLm1ldHJpY3NCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZGlzLnNldGV4KFxuICAgICAgICAgIGBtZXRyaWNzOnJlYWx0aW1lOiR7dGltZXN0YW1wfWAsXG4gICAgICAgICAgODY0MDAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5tZXRyaWNzQnVmZmVyKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLndlYlZpdGFsc0J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXMuc2V0ZXgoXG4gICAgICAgICAgYG1ldHJpY3M6d2Vidml0YWxzOiR7dGltZXN0YW1wfWAsXG4gICAgICAgICAgODY0MDAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy53ZWJWaXRhbHNCdWZmZXIpXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXBpTWV0cmljc0J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXMuc2V0ZXgoXG4gICAgICAgICAgYG1ldHJpY3M6YXBpOiR7dGltZXN0YW1wfWAsXG4gICAgICAgICAgODY0MDAsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5hcGlNZXRyaWNzQnVmZmVyKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRiTWV0cmljc0J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXMuc2V0ZXgoXG4gICAgICAgICAgYG1ldHJpY3M6ZGF0YWJhc2U6JHt0aW1lc3RhbXB9YCxcbiAgICAgICAgICA4NjQwMCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLmRiTWV0cmljc0J1ZmZlcilcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoTG9nQ2F0ZWdvcnkuTU9OSVRPUklORywgJ0Vycm9yIGZsdXNoaW5nIG1ldHJpY3MgdG8gUmVkaXMnLCBlcnJvciBhcyBFcnJvcilcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyc2lzdGUgYWxlcnRhIGVuIFJlZGlzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3RBbGVydChhbGVydDogUGVyZm9ybWFuY2VBbGVydCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLnNldGV4KFxuICAgICAgICBgYWxlcnQ6JHthbGVydC5pZH1gLFxuICAgICAgICA4NjQwMCAqIDcsIC8vIDcgZMOtYXNcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYWxlcnQpXG4gICAgICApXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihMb2dDYXRlZ29yeS5NT05JVE9SSU5HLCAnRXJyb3IgcGVyc2lzdGluZyBhbGVydCcsIGVycm9yIGFzIEVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIE3DiVRPRE9TIERFIFJFQ09MRUNDScOTTiBERSBNw4lUUklDQVNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGFzeW5jIGdldEF2ZXJhZ2VSZXNwb25zZVRpbWUoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAvLyBDYWxjdWxhciB0aWVtcG8gZGUgcmVzcHVlc3RhIHByb21lZGlvIGRlIGxhcyDDumx0aW1hcyBtw6l0cmljYXMgZGUgQVBJXG4gICAgY29uc3QgcmVjZW50QVBJID0gdGhpcy5hcGlNZXRyaWNzQnVmZmVyLnNsaWNlKC0xMClcbiAgICBpZiAocmVjZW50QVBJLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbCA9IHJlY2VudEFQSS5yZWR1Y2UoKHN1bSwgbWV0cmljKSA9PiBzdW0gKyBtZXRyaWMucmVzcG9uc2VUaW1lLCAwKVxuICAgIHJldHVybiB0b3RhbCAvIHJlY2VudEFQSS5sZW5ndGhcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q3VycmVudFRocm91Z2hwdXQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAvLyBDYWxjdWxhciB0aHJvdWdocHV0IGJhc2FkbyBlbiByZXF1ZXN0cyBwb3Igc2VndW5kb1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICBjb25zdCBvbmVNaW51dGVBZ28gPSBub3cgLSA2MDAwMFxuICAgIGNvbnN0IHJlY2VudFJlcXVlc3RzID0gdGhpcy5hcGlNZXRyaWNzQnVmZmVyLmZpbHRlcihtID0+IG0udGltZXN0YW1wID4gb25lTWludXRlQWdvKVxuICAgIHJldHVybiByZWNlbnRSZXF1ZXN0cy5sZW5ndGggLyA2MCAvLyByZXF1ZXN0cyBwb3Igc2VndW5kb1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRDdXJyZW50RXJyb3JSYXRlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgcmVjZW50QVBJID0gdGhpcy5hcGlNZXRyaWNzQnVmZmVyLnNsaWNlKC0xMDApXG4gICAgaWYgKHJlY2VudEFQSS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JzID0gcmVjZW50QVBJLmZpbHRlcihtID0+IG0uc3RhdHVzQ29kZSA+PSA0MDApLmxlbmd0aFxuICAgIHJldHVybiBlcnJvcnMgLyByZWNlbnRBUEkubGVuZ3RoXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldENQVVVzYWdlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgLy8gU2ltdWxhY2nDs24gZGUgdXNvIGRlIENQVSAoZW4gaW1wbGVtZW50YWNpw7NuIHJlYWwsIHVzYXIgbGlicmVyw61hcyBkZWwgc2lzdGVtYSlcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDAuOCAvLyAwLTgwJVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRNZW1vcnlVc2FnZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIC8vIE9idGVuZXIgdXNvIGRlIG1lbW9yaWEgcmVhbFxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IG1lbVVzYWdlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpXG4gICAgICByZXR1cm4gbWVtVXNhZ2UuaGVhcFVzZWQgLyBtZW1Vc2FnZS5oZWFwVG90YWxcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAwLjcgLy8gRmFsbGJhY2tcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWN0aXZlQ29ubmVjdGlvbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAvLyBTaW11bGFjacOzbiBkZSBjb25leGlvbmVzIGFjdGl2YXNcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArIDEwXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFF1ZXVlU2l6ZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIC8vIFNpbXVsYWNpw7NuIGRlIHRhbWHDsW8gZGUgY29sYVxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMClcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q2FjaGVIaXRSYXRlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgLy8gT2J0ZW5lciBoaXQgcmF0ZSBkZWwgY2FjaGUgKGludGVncmFyIGNvbiBjYWNoZSBtYW5hZ2VyKVxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogMC4zICsgMC43IC8vIDcwLTEwMCVcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0REJDb25uZWN0aW9uUG9vbFNpemUoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAvLyBTaW11bGFjacOzbiBkZSBwb29sIGRlIGNvbmV4aW9uZXMgREJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgNVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3RydWN0b3JcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9uaXRvcmluZ0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMubW9uaXRvcmluZ0ludGVydmFsKVxuICAgIH1cbiAgICBpZiAodGhpcy5mbHVzaEludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuZmx1c2hJbnRlcnZhbClcbiAgICB9XG4gICAgdGhpcy5zdWJzY3JpYmVycy5jbGVhcigpXG4gIH1cbn1cblxuLy8gSW5zdGFuY2lhIHNpbmdsZXRvblxuZXhwb3J0IGNvbnN0IHJlYWxUaW1lUGVyZm9ybWFuY2VNb25pdG9yID0gUmVhbFRpbWVQZXJmb3JtYW5jZU1vbml0b3IuZ2V0SW5zdGFuY2UoKVxuXG4vKipcbiAqIFV0aWxpZGFkZXMgcGFyYSBtb25pdG9yZW8gZW4gdGllbXBvIHJlYWxcbiAqL1xuZXhwb3J0IGNvbnN0IFJlYWxUaW1lTW9uaXRvcmluZ1V0aWxzID0ge1xuICAvKipcbiAgICogUmVnaXN0cmEgbcOpdHJpY2FzIGRlIFdlYiBWaXRhbHMgZGVzZGUgZWwgY2xpZW50ZVxuICAgKi9cbiAgcmVjb3JkV2ViVml0YWxzKHZpdGFsczogT21pdDxDb3JlV2ViVml0YWxzLCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgICByZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvci5yZWNvcmRXZWJWaXRhbHModml0YWxzKVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSBtw6l0cmljYXMgZGUgQVBJXG4gICAqL1xuICByZWNvcmRBUElDYWxsKG1ldHJpY3M6IE9taXQ8QVBJTWV0cmljcywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgcmVhbFRpbWVQZXJmb3JtYW5jZU1vbml0b3IucmVjb3JkQVBJTWV0cmljcyhtZXRyaWNzKVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RyYSBtw6l0cmljYXMgZGUgYmFzZSBkZSBkYXRvc1xuICAgKi9cbiAgcmVjb3JkRGF0YWJhc2VRdWVyeShtZXRyaWNzOiBPbWl0PERhdGFiYXNlTWV0cmljcywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgcmVhbFRpbWVQZXJmb3JtYW5jZU1vbml0b3IucmVjb3JkRGF0YWJhc2VNZXRyaWNzKG1ldHJpY3MpXG4gIH0sXG5cbiAgLyoqXG4gICAqIE9idGllbmUgcmVzdW1lbiBkZSBlc3RhZG8gYWN0dWFsXG4gICAqL1xuICBnZXRDdXJyZW50U3RhdHVzKCk6IHtcbiAgICBoZWFsdGh5OiBib29sZWFuXG4gICAgYWN0aXZlQWxlcnRzOiBudW1iZXJcbiAgICBhdmdSZXNwb25zZVRpbWU6IG51bWJlclxuICAgIGVycm9yUmF0ZTogbnVtYmVyXG4gICAgbGFzdFVwZGF0ZTogbnVtYmVyXG4gIH0ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSByZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvci5nZXRDdXJyZW50TWV0cmljcygpXG4gICAgY29uc3QgbGF0ZXN0TWV0cmljcyA9IGN1cnJlbnQucmVhbFRpbWVbY3VycmVudC5yZWFsVGltZS5sZW5ndGggLSAxXVxuXG4gICAgaWYgKCFsYXRlc3RNZXRyaWNzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBoZWFsdGh5OiBmYWxzZSxcbiAgICAgICAgYWN0aXZlQWxlcnRzOiAwLFxuICAgICAgICBhdmdSZXNwb25zZVRpbWU6IDAsXG4gICAgICAgIGVycm9yUmF0ZTogMCxcbiAgICAgICAgbGFzdFVwZGF0ZTogMCxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVBbGVydHMgPSBjdXJyZW50LmFsZXJ0cy5sZW5ndGhcbiAgICBjb25zdCBoZWFsdGh5ID1cbiAgICAgIGFjdGl2ZUFsZXJ0cyA9PT0gMCAmJiBsYXRlc3RNZXRyaWNzLnJlc3BvbnNlVGltZSA8IDIwMDAgJiYgbGF0ZXN0TWV0cmljcy5lcnJvclJhdGUgPCAwLjA1XG5cbiAgICByZXR1cm4ge1xuICAgICAgaGVhbHRoeSxcbiAgICAgIGFjdGl2ZUFsZXJ0cyxcbiAgICAgIGF2Z1Jlc3BvbnNlVGltZTogbGF0ZXN0TWV0cmljcy5yZXNwb25zZVRpbWUsXG4gICAgICBlcnJvclJhdGU6IGxhdGVzdE1ldHJpY3MuZXJyb3JSYXRlLFxuICAgICAgbGFzdFVwZGF0ZTogbGF0ZXN0TWV0cmljcy50aW1lc3RhbXAsXG4gICAgfVxuICB9LFxufVxuIl0sIm5hbWVzIjpbIkRFRkFVTFRfVEhSRVNIT0xEUyIsIlJlYWxUaW1lTW9uaXRvcmluZ1V0aWxzIiwiUmVhbFRpbWVQZXJmb3JtYW5jZU1vbml0b3IiLCJyZWFsVGltZVBlcmZvcm1hbmNlTW9uaXRvciIsInJlc3BvbnNlVGltZSIsIndhcm5pbmciLCJjcml0aWNhbCIsImVycm9yUmF0ZSIsImNwdVVzYWdlIiwibWVtb3J5VXNhZ2UiLCJjb3JlV2ViVml0YWxzIiwibGNwIiwiZ29vZCIsInBvb3IiLCJmaWQiLCJjbHMiLCJmY3AiLCJ0dGZiIiwicmVkaXMiLCJnZXRSZWRpc0NsaWVudCIsInRocmVzaG9sZHMiLCJhbGVydHMiLCJNYXAiLCJtZXRyaWNzQnVmZmVyIiwid2ViVml0YWxzQnVmZmVyIiwiYXBpTWV0cmljc0J1ZmZlciIsImRiTWV0cmljc0J1ZmZlciIsInN1YnNjcmliZXJzIiwiU2V0Iiwic3RhcnRNb25pdG9yaW5nIiwic3RhcnRQZXJpb2RpY0ZsdXNoIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIm1vbml0b3JpbmdJbnRlcnZhbCIsInNldEludGVydmFsIiwiY29sbGVjdFN5c3RlbU1ldHJpY3MiLCJsb2dnZXIiLCJpbmZvIiwiTG9nQ2F0ZWdvcnkiLCJNT05JVE9SSU5HIiwiZmx1c2hJbnRlcnZhbCIsImZsdXNoTWV0cmljc1RvUmVkaXMiLCJtZXRyaWNzIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImdldEF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJ0aHJvdWdocHV0IiwiZ2V0Q3VycmVudFRocm91Z2hwdXQiLCJnZXRDdXJyZW50RXJyb3JSYXRlIiwiZ2V0Q1BVVXNhZ2UiLCJnZXRNZW1vcnlVc2FnZSIsImFjdGl2ZUNvbm5lY3Rpb25zIiwiZ2V0QWN0aXZlQ29ubmVjdGlvbnMiLCJxdWV1ZVNpemUiLCJnZXRRdWV1ZVNpemUiLCJjYWNoZUhpdFJhdGUiLCJnZXRDYWNoZUhpdFJhdGUiLCJkYkNvbm5lY3Rpb25Qb29sIiwiZ2V0REJDb25uZWN0aW9uUG9vbFNpemUiLCJwdXNoIiwibGVuZ3RoIiwic2xpY2UiLCJjaGVja1RocmVzaG9sZHMiLCJub3RpZnlTdWJzY3JpYmVycyIsImVycm9yIiwicmVjb3JkV2ViVml0YWxzIiwidml0YWxzIiwid2ViVml0YWxzIiwiY2hlY2tXZWJWaXRhbHNUaHJlc2hvbGRzIiwicmVjb3JkQVBJTWV0cmljcyIsImFwaU1ldHJpY3MiLCJjaGVja0FQSVRocmVzaG9sZHMiLCJyZWNvcmREYXRhYmFzZU1ldHJpY3MiLCJkYk1ldHJpY3MiLCJjaGVja0RhdGFiYXNlVGhyZXNob2xkcyIsImNyZWF0ZUFsZXJ0IiwidG9GaXhlZCIsIm1ldGhvZCIsImVuZHBvaW50Iiwic3RhdHVzQ29kZSIsInF1ZXJ5VGltZSIsInF1ZXJ5VHlwZSIsInRhYmxlTmFtZSIsIndhaXRpbmdDb25uZWN0aW9ucyIsInR5cGUiLCJzZXZlcml0eSIsIm1ldHJpYyIsInZhbHVlIiwidGhyZXNob2xkIiwibWVzc2FnZSIsImFsZXJ0SWQiLCJhbGVydCIsImlkIiwicmVzb2x2ZWQiLCJlc2NhbGF0ZWQiLCJzZXQiLCJ3YXJuIiwicGVyc2lzdEFsZXJ0Iiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJhZGQiLCJkZWxldGUiLCJkYXRhIiwiZm9yRWFjaCIsImdldEN1cnJlbnRNZXRyaWNzIiwicmVhbFRpbWUiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJhIiwidXBkYXRlVGhyZXNob2xkcyIsIm5ld1RocmVzaG9sZHMiLCJyZXNvbHZlQWxlcnQiLCJnZXQiLCJyZXNvbHZlZEF0Iiwic2V0ZXgiLCJKU09OIiwic3RyaW5naWZ5IiwicmVjZW50QVBJIiwidG90YWwiLCJyZWR1Y2UiLCJzdW0iLCJvbmVNaW51dGVBZ28iLCJyZWNlbnRSZXF1ZXN0cyIsIm0iLCJlcnJvcnMiLCJNYXRoIiwicmFuZG9tIiwicHJvY2VzcyIsIm1lbVVzYWdlIiwiaGVhcFVzZWQiLCJoZWFwVG90YWwiLCJmbG9vciIsImRlc3Ryb3kiLCJjbGVhckludGVydmFsIiwiY2xlYXIiLCJyZWNvcmRBUElDYWxsIiwicmVjb3JkRGF0YWJhc2VRdWVyeSIsImdldEN1cnJlbnRTdGF0dXMiLCJjdXJyZW50IiwibGF0ZXN0TWV0cmljcyIsImhlYWx0aHkiLCJhY3RpdmVBbGVydHMiLCJhdmdSZXNwb25zZVRpbWUiLCJsYXN0VXBkYXRlIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELHNDQUFzQzs7Ozs7Ozs7Ozs7O1FBaUh6QkE7ZUFBQUE7O1FBa3BCQUM7ZUFBQUE7O1FBcm5CQUM7ZUFBQUE7O1FBZ25CQUM7ZUFBQUE7Ozt3QkE1dkJ1Qjt1QkFDTDtBQThHeEIsTUFBTUgscUJBQTRDO0lBQ3ZESSxjQUFjO1FBQ1pDLFNBQVM7UUFDVEMsVUFBVTtJQUNaO0lBQ0FDLFdBQVc7UUFDVEYsU0FBUztRQUNUQyxVQUFVO0lBQ1o7SUFDQUUsVUFBVTtRQUNSSCxTQUFTO1FBQ1RDLFVBQVU7SUFDWjtJQUNBRyxhQUFhO1FBQ1hKLFNBQVM7UUFDVEMsVUFBVTtJQUNaO0lBQ0FJLGVBQWU7UUFDYkMsS0FBSztZQUFFQyxNQUFNO1lBQU1DLE1BQU07UUFBSztRQUM5QkMsS0FBSztZQUFFRixNQUFNO1lBQUtDLE1BQU07UUFBSTtRQUM1QkUsS0FBSztZQUFFSCxNQUFNO1lBQUtDLE1BQU07UUFBSztRQUM3QkcsS0FBSztZQUFFSixNQUFNO1lBQU1DLE1BQU07UUFBSztRQUM5QkksTUFBTTtZQUFFTCxNQUFNO1lBQUtDLE1BQU07UUFBSztJQUNoQztBQUNGO0FBS08sTUFBTVg7SUFhWCxhQUFzQjthQVhkZ0IsUUFBUUMsSUFBQUEscUJBQWM7YUFD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