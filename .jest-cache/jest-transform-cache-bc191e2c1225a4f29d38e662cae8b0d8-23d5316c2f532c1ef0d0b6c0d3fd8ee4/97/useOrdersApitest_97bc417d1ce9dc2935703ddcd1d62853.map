{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\admin\\useOrdersApi.test.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - USEORDERSAPI TESTS\r\n// Tests completos para el hook de API de órdenes\r\n// ===================================\r\n\r\nimport { renderHook, act } from '@testing-library/react';\r\nimport { describe, it, expect, beforeEach, afterEach, jest } from '@jest/globals';\r\nimport { useOrdersApi } from '@/hooks/admin/useOrdersApi';\r\n\r\n// ===================================\r\n// MOCKS Y SETUP\r\n// ===================================\r\n\r\n// Mock de fetch global\r\nconst mockFetch = jest.fn();\r\nglobal.fetch = mockFetch;\r\n\r\n// Mock de AbortController\r\nconst mockAbort = jest.fn();\r\nconst mockAbortController = {\r\n  abort: mockAbort,\r\n  signal: { aborted: false }\r\n};\r\n\r\nglobal.AbortController = jest.fn(() => mockAbortController) as any;\r\n\r\n// Datos de prueba\r\nconst mockOrdersResponse = {\r\n  orders: [\r\n    { id: '1', order_number: 'ORD-001', status: 'pending', total: 100 },\r\n    { id: '2', order_number: 'ORD-002', status: 'confirmed', total: 200 },\r\n  ],\r\n  pagination: { page: 1, totalPages: 5, hasNextPage: true },\r\n  analytics: { totalOrders: 2, totalRevenue: 300 }\r\n};\r\n\r\nconst mockFilters = {\r\n  page: 1,\r\n  limit: 20,\r\n  status: 'pending',\r\n  search: 'test'\r\n};\r\n\r\nconst mockOptions = {\r\n  timeout: 10000,\r\n  maxRetries: 3\r\n};\r\n\r\n// ===================================\r\n// SETUP Y CLEANUP\r\n// ===================================\r\n\r\nbeforeEach(() => {\r\n  jest.clearAllMocks();\r\n  mockAbort.mockClear();\r\n  mockAbortController.signal.aborted = false;\r\n  \r\n  // Mock de respuesta exitosa por defecto\r\n  mockFetch.mockResolvedValue({\r\n    ok: true,\r\n    status: 200,\r\n    json: jest.fn().mockResolvedValue(mockOrdersResponse),\r\n    headers: new Headers(),\r\n    statusText: 'OK'\r\n  });\r\n});\r\n\r\nafterEach(() => {\r\n  jest.clearAllTimers();\r\n});\r\n\r\n// ===================================\r\n// TESTS PRINCIPALES\r\n// ===================================\r\n\r\ndescribe('useOrdersApi', () => {\r\n  it('debe inicializarse correctamente', () => {\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    expect(result.current.fetchOrdersInternal).toBeDefined();\r\n    expect(result.current.abortCurrentRequest).toBeDefined();\r\n    expect(result.current.isRequestInProgress).toBeDefined();\r\n    expect(typeof result.current.fetchOrdersInternal).toBe('function');\r\n    expect(typeof result.current.abortCurrentRequest).toBe('function');\r\n    expect(typeof result.current.isRequestInProgress).toBe('function');\r\n  });\r\n\r\n  it('debe realizar fetch exitoso de órdenes', async () => {\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    let response;\r\n    await act(async () => {\r\n      response = await result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledWith(\r\n      '/api/admin/orders?page=1&limit=20&status=pending&search=test',\r\n      expect.objectContaining({\r\n        method: 'GET',\r\n        headers: expect.objectContaining({\r\n          'Content-Type': 'application/json'\r\n        }),\r\n        signal: expect.any(Object)\r\n      })\r\n    );\r\n\r\n    expect(response).toEqual(mockOrdersResponse);\r\n  });\r\n\r\n  it('debe construir URL correctamente con diferentes filtros', async () => {\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    const filtersWithNulls = {\r\n      page: 2,\r\n      limit: 10,\r\n      status: undefined,\r\n      search: null,\r\n      sort_by: 'created_at',\r\n      sort_order: 'desc'\r\n    };\r\n\r\n    await act(async () => {\r\n      await result.current.fetchOrdersInternal(filtersWithNulls);\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledWith(\r\n      '/api/admin/orders?page=2&limit=10&sort_by=created_at&sort_order=desc',\r\n      expect.any(Object)\r\n    );\r\n  });\r\n\r\n  it('debe manejar errores de red correctamente', async () => {\r\n    mockFetch.mockRejectedValue(new Error('Network error'));\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    await act(async () => {\r\n      await expect(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Network error');\r\n    });\r\n  });\r\n\r\n  it('debe manejar respuestas HTTP de error', async () => {\r\n    mockFetch.mockResolvedValue({\r\n      ok: false,\r\n      status: 500,\r\n      statusText: 'Internal Server Error',\r\n      json: jest.fn().mockResolvedValue({ error: 'Server error' })\r\n    });\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    await act(async () => {\r\n      await expect(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('HTTP error! status: 500');\r\n    });\r\n  });\r\n\r\n  it('debe implementar retry logic correctamente', async () => {\r\n    // Fallar las primeras 2 llamadas, exitosa en la 3ra\r\n    mockFetch\r\n      .mockRejectedValueOnce(new Error('Network error'))\r\n      .mockRejectedValueOnce(new Error('Network error'))\r\n      .mockResolvedValueOnce({\r\n        ok: true,\r\n        status: 200,\r\n        json: jest.fn().mockResolvedValue(mockOrdersResponse)\r\n      });\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    let response;\r\n    await act(async () => {\r\n      response = await result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledTimes(3);\r\n    expect(response).toEqual(mockOrdersResponse);\r\n  });\r\n\r\n  it('debe fallar después de agotar todos los reintentos', async () => {\r\n    mockFetch.mockRejectedValue(new Error('Persistent network error'));\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    await act(async () => {\r\n      await expect(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Persistent network error');\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledTimes(4); // 1 intento inicial + 3 reintentos\r\n  });\r\n\r\n  it('debe implementar timeout correctamente', async () => {\r\n    jest.useFakeTimers();\r\n\r\n    // Mock de fetch que nunca se resuelve\r\n    mockFetch.mockImplementation(() => new Promise(() => {}));\r\n\r\n    const { result } = renderHook(() => useOrdersApi({ ...mockOptions, timeout: 5000 }));\r\n\r\n    const fetchPromise = act(async () => {\r\n      return result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    // Avanzar el tiempo más allá del timeout\r\n    act(() => {\r\n      jest.advanceTimersByTime(6000);\r\n    });\r\n\r\n    await expect(fetchPromise).rejects.toThrow();\r\n\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it('debe abortar requests correctamente', async () => {\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    // Iniciar un request\r\n    const fetchPromise = act(async () => {\r\n      return result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    // Abortar el request\r\n    act(() => {\r\n      result.current.abortCurrentRequest();\r\n    });\r\n\r\n    expect(mockAbort).toHaveBeenCalled();\r\n  });\r\n\r\n  it('debe detectar requests en progreso', async () => {\r\n    jest.useFakeTimers();\r\n\r\n    // Mock de fetch que tarda en resolverse\r\n    mockFetch.mockImplementation(() => \r\n      new Promise(resolve => setTimeout(() => resolve({\r\n        ok: true,\r\n        status: 200,\r\n        json: jest.fn().mockResolvedValue(mockOrdersResponse)\r\n      }), 1000))\r\n    );\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    // Iniciar request\r\n    const fetchPromise = act(async () => {\r\n      return result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    // Verificar que está en progreso\r\n    expect(result.current.isRequestInProgress()).toBe(true);\r\n\r\n    // Completar el request\r\n    act(() => {\r\n      jest.advanceTimersByTime(1000);\r\n    });\r\n\r\n    await fetchPromise;\r\n\r\n    // Verificar que ya no está en progreso\r\n    expect(result.current.isRequestInProgress()).toBe(false);\r\n\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it('debe validar respuesta JSON correctamente', async () => {\r\n    mockFetch.mockResolvedValue({\r\n      ok: true,\r\n      status: 200,\r\n      json: jest.fn().mockResolvedValue({ invalid: 'response' }) // Respuesta sin estructura esperada\r\n    });\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    await act(async () => {\r\n      await expect(result.current.fetchOrdersInternal(mockFilters)).rejects.toThrow('Invalid response format');\r\n    });\r\n  });\r\n\r\n  it('debe manejar respuestas vacías correctamente', async () => {\r\n    mockFetch.mockResolvedValue({\r\n      ok: true,\r\n      status: 200,\r\n      json: jest.fn().mockResolvedValue({\r\n        orders: [],\r\n        pagination: { page: 1, totalPages: 0, hasNextPage: false },\r\n        analytics: { totalOrders: 0, totalRevenue: 0 }\r\n      })\r\n    });\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    let response;\r\n    await act(async () => {\r\n      response = await result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    expect(response.orders).toEqual([]);\r\n    expect(response.analytics.totalOrders).toBe(0);\r\n  });\r\n\r\n  it('debe usar headers de autenticación cuando están disponibles', async () => {\r\n    // Mock de session con token\r\n    const mockSession = { accessToken: 'test-token' };\r\n    jest.doMock('next-auth/react', () => ({\r\n      useSession: () => ({ data: mockSession })\r\n    }));\r\n\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    await act(async () => {\r\n      await result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledWith(\r\n      expect.any(String),\r\n      expect.objectContaining({\r\n        headers: expect.objectContaining({\r\n          'Content-Type': 'application/json'\r\n        })\r\n      })\r\n    );\r\n  });\r\n\r\n  it('debe limpiar recursos al desmontar', () => {\r\n    const { result, unmount } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    // Iniciar un request\r\n    act(() => {\r\n      result.current.fetchOrdersInternal(mockFilters);\r\n    });\r\n\r\n    // Desmontar el hook\r\n    unmount();\r\n\r\n    // Debe haber abortado el request\r\n    expect(mockAbort).toHaveBeenCalled();\r\n  });\r\n\r\n  it('debe manejar múltiples requests concurrentes', async () => {\r\n    const { result } = renderHook(() => useOrdersApi(mockOptions));\r\n\r\n    // Iniciar múltiples requests\r\n    const promises = [\r\n      result.current.fetchOrdersInternal(mockFilters),\r\n      result.current.fetchOrdersInternal({ ...mockFilters, page: 2 }),\r\n      result.current.fetchOrdersInternal({ ...mockFilters, page: 3 })\r\n    ];\r\n\r\n    await act(async () => {\r\n      await Promise.all(promises);\r\n    });\r\n\r\n    expect(mockFetch).toHaveBeenCalledTimes(3);\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["mockFetch","jest","fn","global","fetch","mockAbort","mockAbortController","abort","signal","aborted","AbortController","mockOrdersResponse","orders","id","order_number","status","total","pagination","page","totalPages","hasNextPage","analytics","totalOrders","totalRevenue","mockFilters","limit","search","mockOptions","timeout","maxRetries","beforeEach","clearAllMocks","mockClear","mockResolvedValue","ok","json","headers","Headers","statusText","afterEach","clearAllTimers","describe","it","result","renderHook","useOrdersApi","expect","current","fetchOrdersInternal","toBeDefined","abortCurrentRequest","isRequestInProgress","toBe","response","act","toHaveBeenCalledWith","objectContaining","method","any","Object","toEqual","filtersWithNulls","undefined","sort_by","sort_order","mockRejectedValue","Error","rejects","toThrow","error","mockRejectedValueOnce","mockResolvedValueOnce","toHaveBeenCalledTimes","useFakeTimers","mockImplementation","Promise","fetchPromise","advanceTimersByTime","useRealTimers","toHaveBeenCalled","resolve","setTimeout","invalid","mockSession","accessToken","doMock","useSession","data","String","unmount","promises","all"],"mappings":"AAAA,sCAAsC;AACtC,0CAA0C;AAC1C,iDAAiD;AACjD,sCAAsC;;;;;uBAEN;yBACkC;8BACrC;AAE7B,sCAAsC;AACtC,gBAAgB;AAChB,sCAAsC;AAEtC,uBAAuB;AACvB,MAAMA,YAAYC,aAAI,CAACC,EAAE;AACzBC,OAAOC,KAAK,GAAGJ;AAEf,0BAA0B;AAC1B,MAAMK,YAAYJ,aAAI,CAACC,EAAE;AACzB,MAAMI,sBAAsB;IAC1BC,OAAOF;IACPG,QAAQ;QAAEC,SAAS;IAAM;AAC3B;AAEAN,OAAOO,eAAe,GAAGT,aAAI,CAACC,EAAE,CAAC,IAAMI;AAEvC,kBAAkB;AAClB,MAAMK,qBAAqB;IACzBC,QAAQ;QACN;YAAEC,IAAI;YAAKC,cAAc;YAAWC,QAAQ;YAAWC,OAAO;QAAI;QAClE;YAAEH,IAAI;YAAKC,cAAc;YAAWC,QAAQ;YAAaC,OAAO;QAAI;KACrE;IACDC,YAAY;QAAEC,MAAM;QAAGC,YAAY;QAAGC,aAAa;IAAK;IACxDC,WAAW;QAAEC,aAAa;QAAGC,cAAc;IAAI;AACjD;AAEA,MAAMC,cAAc;IAClBN,MAAM;IACNO,OAAO;IACPV,QAAQ;IACRW,QAAQ;AACV;AAEA,MAAMC,cAAc;IAClBC,SAAS;IACTC,YAAY;AACd;AAEA,sCAAsC;AACtC,kBAAkB;AAClB,sCAAsC;AAEtCC,IAAAA,mBAAU,EAAC;IACT7B,aAAI,CAAC8B,aAAa;IAClB1B,UAAU2B,SAAS;IACnB1B,oBAAoBE,MAAM,CAACC,OAAO,GAAG;IAErC,wCAAwC;IACxCT,UAAUiC,iBAAiB,CAAC;QAC1BC,IAAI;QACJnB,QAAQ;QACRoB,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAACtB;QAClCyB,SAAS,IAAIC;QACbC,YAAY;IACd;AACF;AAEAC,IAAAA,kBAAS,EAAC;IACRtC,aAAI,CAACuC,cAAc;AACrB;AAEA,sCAAsC;AACtC,oBAAoB;AACpB,sCAAsC;AAEtCC,IAAAA,iBAAQ,EAAC,gBAAgB;IACvBC,IAAAA,WAAE,EAAC,oCAAoC;QACrC,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjDmB,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACC,mBAAmB,EAAEC,WAAW;QACtDH,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACG,mBAAmB,EAAED,WAAW;QACtDH,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACI,mBAAmB,EAAEF,WAAW;QACtDH,IAAAA,eAAM,EAAC,OAAOH,OAAOI,OAAO,CAACC,mBAAmB,EAAEI,IAAI,CAAC;QACvDN,IAAAA,eAAM,EAAC,OAAOH,OAAOI,OAAO,CAACG,mBAAmB,EAAEE,IAAI,CAAC;QACvDN,IAAAA,eAAM,EAAC,OAAOH,OAAOI,OAAO,CAACI,mBAAmB,EAAEC,IAAI,CAAC;IACzD;IAEAV,IAAAA,WAAE,EAAC,0CAA0C;QAC3C,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,IAAI0B;QACJ,MAAMC,IAAAA,UAAG,EAAC;YACRD,WAAW,MAAMV,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QACtD;QAEAsB,IAAAA,eAAM,EAAC9C,WAAWuD,oBAAoB,CACpC,gEACAT,eAAM,CAACU,gBAAgB,CAAC;YACtBC,QAAQ;YACRrB,SAASU,eAAM,CAACU,gBAAgB,CAAC;gBAC/B,gBAAgB;YAClB;YACAhD,QAAQsC,eAAM,CAACY,GAAG,CAACC;QACrB;QAGFb,IAAAA,eAAM,EAACO,UAAUO,OAAO,CAACjD;IAC3B;IAEA+B,IAAAA,WAAE,EAAC,2DAA2D;QAC5D,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAMkC,mBAAmB;YACvB3C,MAAM;YACNO,OAAO;YACPV,QAAQ+C;YACRpC,QAAQ;YACRqC,SAAS;YACTC,YAAY;QACd;QAEA,MAAMV,IAAAA,UAAG,EAAC;YACR,MAAMX,OAAOI,OAAO,CAACC,mBAAmB,CAACa;QAC3C;QAEAf,IAAAA,eAAM,EAAC9C,WAAWuD,oBAAoB,CACpC,wEACAT,eAAM,CAACY,GAAG,CAACC;IAEf;IAEAjB,IAAAA,WAAE,EAAC,6CAA6C;QAC9C1C,UAAUiE,iBAAiB,CAAC,IAAIC,MAAM;QAEtC,MAAM,EAAEvB,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAM2B,IAAAA,UAAG,EAAC;YACR,MAAMR,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACC,mBAAmB,CAACxB,cAAc2C,OAAO,CAACC,OAAO,CAAC;QAChF;IACF;IAEA1B,IAAAA,WAAE,EAAC,yCAAyC;QAC1C1C,UAAUiC,iBAAiB,CAAC;YAC1BC,IAAI;YACJnB,QAAQ;YACRuB,YAAY;YACZH,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAAC;gBAAEoC,OAAO;YAAe;QAC5D;QAEA,MAAM,EAAE1B,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAM2B,IAAAA,UAAG,EAAC;YACR,MAAMR,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACC,mBAAmB,CAACxB,cAAc2C,OAAO,CAACC,OAAO,CAAC;QAChF;IACF;IAEA1B,IAAAA,WAAE,EAAC,8CAA8C;QAC/C,oDAAoD;QACpD1C,UACGsE,qBAAqB,CAAC,IAAIJ,MAAM,kBAChCI,qBAAqB,CAAC,IAAIJ,MAAM,kBAChCK,qBAAqB,CAAC;YACrBrC,IAAI;YACJnB,QAAQ;YACRoB,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAACtB;QACpC;QAEF,MAAM,EAAEgC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,IAAI0B;QACJ,MAAMC,IAAAA,UAAG,EAAC;YACRD,WAAW,MAAMV,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QACtD;QAEAsB,IAAAA,eAAM,EAAC9C,WAAWwE,qBAAqB,CAAC;QACxC1B,IAAAA,eAAM,EAACO,UAAUO,OAAO,CAACjD;IAC3B;IAEA+B,IAAAA,WAAE,EAAC,sDAAsD;QACvD1C,UAAUiE,iBAAiB,CAAC,IAAIC,MAAM;QAEtC,MAAM,EAAEvB,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAM2B,IAAAA,UAAG,EAAC;YACR,MAAMR,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACC,mBAAmB,CAACxB,cAAc2C,OAAO,CAACC,OAAO,CAAC;QAChF;QAEAtB,IAAAA,eAAM,EAAC9C,WAAWwE,qBAAqB,CAAC,IAAI,mCAAmC;IACjF;IAEA9B,IAAAA,WAAE,EAAC,0CAA0C;QAC3CzC,aAAI,CAACwE,aAAa;QAElB,sCAAsC;QACtCzE,UAAU0E,kBAAkB,CAAC,IAAM,IAAIC,QAAQ,KAAO;QAEtD,MAAM,EAAEhC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAC;gBAAE,GAAGlB,WAAW;gBAAEC,SAAS;YAAK;QAEjF,MAAMgD,eAAetB,IAAAA,UAAG,EAAC;YACvB,OAAOX,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QAC5C;QAEA,yCAAyC;QACzC8B,IAAAA,UAAG,EAAC;YACFrD,aAAI,CAAC4E,mBAAmB,CAAC;QAC3B;QAEA,MAAM/B,IAAAA,eAAM,EAAC8B,cAAcT,OAAO,CAACC,OAAO;QAE1CnE,aAAI,CAAC6E,aAAa;IACpB;IAEApC,IAAAA,WAAE,EAAC,uCAAuC;QACxC,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,qBAAqB;QACrB,MAAMiD,eAAetB,IAAAA,UAAG,EAAC;YACvB,OAAOX,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QAC5C;QAEA,qBAAqB;QACrB8B,IAAAA,UAAG,EAAC;YACFX,OAAOI,OAAO,CAACG,mBAAmB;QACpC;QAEAJ,IAAAA,eAAM,EAACzC,WAAW0E,gBAAgB;IACpC;IAEArC,IAAAA,WAAE,EAAC,sCAAsC;QACvCzC,aAAI,CAACwE,aAAa;QAElB,wCAAwC;QACxCzE,UAAU0E,kBAAkB,CAAC,IAC3B,IAAIC,QAAQK,CAAAA,UAAWC,WAAW,IAAMD,QAAQ;wBAC9C9C,IAAI;wBACJnB,QAAQ;wBACRoB,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAACtB;oBACpC,IAAI;QAGN,MAAM,EAAEgC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,kBAAkB;QAClB,MAAMiD,eAAetB,IAAAA,UAAG,EAAC;YACvB,OAAOX,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QAC5C;QAEA,iCAAiC;QACjCsB,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACI,mBAAmB,IAAIC,IAAI,CAAC;QAElD,uBAAuB;QACvBE,IAAAA,UAAG,EAAC;YACFrD,aAAI,CAAC4E,mBAAmB,CAAC;QAC3B;QAEA,MAAMD;QAEN,uCAAuC;QACvC9B,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACI,mBAAmB,IAAIC,IAAI,CAAC;QAElDnD,aAAI,CAAC6E,aAAa;IACpB;IAEApC,IAAAA,WAAE,EAAC,6CAA6C;QAC9C1C,UAAUiC,iBAAiB,CAAC;YAC1BC,IAAI;YACJnB,QAAQ;YACRoB,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAAC;gBAAEiD,SAAS;YAAW,GAAG,oCAAoC;QACjG;QAEA,MAAM,EAAEvC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAM2B,IAAAA,UAAG,EAAC;YACR,MAAMR,IAAAA,eAAM,EAACH,OAAOI,OAAO,CAACC,mBAAmB,CAACxB,cAAc2C,OAAO,CAACC,OAAO,CAAC;QAChF;IACF;IAEA1B,IAAAA,WAAE,EAAC,gDAAgD;QACjD1C,UAAUiC,iBAAiB,CAAC;YAC1BC,IAAI;YACJnB,QAAQ;YACRoB,MAAMlC,aAAI,CAACC,EAAE,GAAG+B,iBAAiB,CAAC;gBAChCrB,QAAQ,EAAE;gBACVK,YAAY;oBAAEC,MAAM;oBAAGC,YAAY;oBAAGC,aAAa;gBAAM;gBACzDC,WAAW;oBAAEC,aAAa;oBAAGC,cAAc;gBAAE;YAC/C;QACF;QAEA,MAAM,EAAEoB,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,IAAI0B;QACJ,MAAMC,IAAAA,UAAG,EAAC;YACRD,WAAW,MAAMV,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QACtD;QAEAsB,IAAAA,eAAM,EAACO,SAASzC,MAAM,EAAEgD,OAAO,CAAC,EAAE;QAClCd,IAAAA,eAAM,EAACO,SAAShC,SAAS,CAACC,WAAW,EAAE8B,IAAI,CAAC;IAC9C;IAEAV,IAAAA,WAAE,EAAC,+DAA+D;QAChE,4BAA4B;QAC5B,MAAMyC,cAAc;YAAEC,aAAa;QAAa;QAChDnF,aAAI,CAACoF,MAAM,CAAC,mBAAmB,IAAO,CAAA;gBACpCC,YAAY,IAAO,CAAA;wBAAEC,MAAMJ;oBAAY,CAAA;YACzC,CAAA;QAEA,MAAM,EAAExC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,MAAM2B,IAAAA,UAAG,EAAC;YACR,MAAMX,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QAC3C;QAEAsB,IAAAA,eAAM,EAAC9C,WAAWuD,oBAAoB,CACpCT,eAAM,CAACY,GAAG,CAAC8B,SACX1C,eAAM,CAACU,gBAAgB,CAAC;YACtBpB,SAASU,eAAM,CAACU,gBAAgB,CAAC;gBAC/B,gBAAgB;YAClB;QACF;IAEJ;IAEAd,IAAAA,WAAE,EAAC,sCAAsC;QACvC,MAAM,EAAEC,MAAM,EAAE8C,OAAO,EAAE,GAAG7C,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAE1D,qBAAqB;QACrB2B,IAAAA,UAAG,EAAC;YACFX,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;QACrC;QAEA,oBAAoB;QACpBiE;QAEA,iCAAiC;QACjC3C,IAAAA,eAAM,EAACzC,WAAW0E,gBAAgB;IACpC;IAEArC,IAAAA,WAAE,EAAC,gDAAgD;QACjD,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,0BAAY,EAAClB;QAEjD,6BAA6B;QAC7B,MAAM+D,WAAW;YACf/C,OAAOI,OAAO,CAACC,mBAAmB,CAACxB;YACnCmB,OAAOI,OAAO,CAACC,mBAAmB,CAAC;gBAAE,GAAGxB,WAAW;gBAAEN,MAAM;YAAE;YAC7DyB,OAAOI,OAAO,CAACC,mBAAmB,CAAC;gBAAE,GAAGxB,WAAW;gBAAEN,MAAM;YAAE;SAC9D;QAED,MAAMoC,IAAAA,UAAG,EAAC;YACR,MAAMqB,QAAQgB,GAAG,CAACD;QACpB;QAEA5C,IAAAA,eAAM,EAAC9C,WAAWwE,qBAAqB,CAAC;IAC1C;AACF"}