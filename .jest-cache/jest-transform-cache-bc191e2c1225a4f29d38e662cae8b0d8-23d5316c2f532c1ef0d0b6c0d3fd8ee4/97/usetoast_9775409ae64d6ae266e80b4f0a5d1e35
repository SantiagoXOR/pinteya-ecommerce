848b7c48a9dd57b57a47d250200ffaac
/**
 * Hook de Toast General para Pinteya E-commerce
 * Compatible con shadcn/ui y tests enterprise
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get reducer () {
        return reducer;
    },
    get toast () {
        return toast;
    },
    get useToast () {
        return useToast;
    }
});
const _react = require("react");
// ===================================
// CONFIGURACIÃ“N
// ===================================
const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;
// ===================================
// ESTADO GLOBAL
// ===================================
let count = 0;
function genId() {
    count = (count + 1) % Number.MAX_VALUE;
    return count.toString();
}
const toastTimeouts = new Map();
const addToRemoveQueue = (toastId)=>{
    if (toastTimeouts.has(toastId)) {
        return;
    }
    const timeout = setTimeout(()=>{
        toastTimeouts.delete(toastId);
        dispatch({
            type: 'REMOVE_TOAST',
            toastId: toastId
        });
    }, TOAST_REMOVE_DELAY);
    toastTimeouts.set(toastId, timeout);
};
const reducer = (state, action)=>{
    switch(action.type){
        case 'ADD_TOAST':
            return [
                action.toast,
                ...state
            ].slice(0, TOAST_LIMIT);
        case 'UPDATE_TOAST':
            return state.map((t)=>t.id === action.toast.id ? {
                    ...t,
                    ...action.toast
                } : t);
        case 'DISMISS_TOAST':
            {
                const { toastId } = action;
                if (toastId) {
                    addToRemoveQueue(toastId);
                } else {
                    state.forEach((toast)=>{
                        addToRemoveQueue(toast.id);
                    });
                }
                return state.map((t)=>t.id === toastId || toastId === undefined ? {
                        ...t,
                        open: false
                    } : t);
            }
        case 'REMOVE_TOAST':
            if (action.toastId === undefined) {
                return [];
            }
            return state.filter((t)=>t.id !== action.toastId);
    }
};
// ===================================
// LISTENERS
// ===================================
const listeners = [];
let memoryState = [];
function dispatch(action) {
    memoryState = reducer(memoryState, action);
    listeners.forEach((listener)=>{
        listener(memoryState);
    });
}
function toast({ ...props }) {
    const id = genId();
    const update = (props)=>dispatch({
            type: 'UPDATE_TOAST',
            toast: {
                ...props,
                id
            }
        });
    const dismiss = ()=>dispatch({
            type: 'DISMISS_TOAST',
            toastId: id
        });
    dispatch({
        type: 'ADD_TOAST',
        toast: {
            ...props,
            id,
            open: true,
            onOpenChange: (open)=>{
                if (!open) {
                    dismiss();
                }
            }
        }
    });
    return {
        id: id,
        dismiss,
        update
    };
}
// ===================================
// HOOK PRINCIPAL
// ===================================
function useToast() {
    const [state, setState] = (0, _react.useState)(memoryState);
    (0, _react.useState)(()=>{
        listeners.push(setState);
        return ()=>{
            const index = listeners.indexOf(setState);
            if (index > -1) {
                listeners.splice(index, 1);
            }
        };
    });
    return {
        ...state,
        toast,
        dismiss: (toastId)=>dispatch({
                type: 'DISMISS_TOAST',
                toastId
            })
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXHVzZS10b2FzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhvb2sgZGUgVG9hc3QgR2VuZXJhbCBwYXJhIFBpbnRleWEgRS1jb21tZXJjZVxuICogQ29tcGF0aWJsZSBjb24gc2hhZGNuL3VpIHkgdGVzdHMgZW50ZXJwcmlzZVxuICovXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9hc3Qge1xuICBpZDogc3RyaW5nXG4gIHRpdGxlPzogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIGFjdGlvbj86IFJlYWN0LlJlYWN0Tm9kZVxuICB2YXJpYW50PzogJ2RlZmF1bHQnIHwgJ2Rlc3RydWN0aXZlJyB8ICdzdWNjZXNzJyB8ICd3YXJuaW5nJ1xuICBkdXJhdGlvbj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvYXN0QWN0aW9uRWxlbWVudCB7XG4gIGFsdFRleHQ/OiBzdHJpbmdcbiAgb25DbGljaz86ICgpID0+IHZvaWRcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGVcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTkZJR1VSQUNJw5NOXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBUT0FTVF9MSU1JVCA9IDFcbmNvbnN0IFRPQVNUX1JFTU9WRV9ERUxBWSA9IDEwMDAwMDBcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVTVEFETyBHTE9CQUxcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmxldCBjb3VudCA9IDBcblxuZnVuY3Rpb24gZ2VuSWQoKSB7XG4gIGNvdW50ID0gKGNvdW50ICsgMSkgJSBOdW1iZXIuTUFYX1ZBTFVFXG4gIHJldHVybiBjb3VudC50b1N0cmluZygpXG59XG5cbmNvbnN0IHRvYXN0VGltZW91dHMgPSBuZXcgTWFwPHN0cmluZywgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4+KClcblxuY29uc3QgYWRkVG9SZW1vdmVRdWV1ZSA9ICh0b2FzdElkOiBzdHJpbmcpID0+IHtcbiAgaWYgKHRvYXN0VGltZW91dHMuaGFzKHRvYXN0SWQpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdG9hc3RUaW1lb3V0cy5kZWxldGUodG9hc3RJZClcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiAnUkVNT1ZFX1RPQVNUJyxcbiAgICAgIHRvYXN0SWQ6IHRvYXN0SWQsXG4gICAgfSlcbiAgfSwgVE9BU1RfUkVNT1ZFX0RFTEFZKVxuXG4gIHRvYXN0VGltZW91dHMuc2V0KHRvYXN0SWQsIHRpbWVvdXQpXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBSRURVQ0VSXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgcmVkdWNlciA9IChzdGF0ZTogVG9hc3RbXSwgYWN0aW9uOiBhbnkpOiBUb2FzdFtdID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ0FERF9UT0FTVCc6XG4gICAgICByZXR1cm4gW2FjdGlvbi50b2FzdCwgLi4uc3RhdGVdLnNsaWNlKDAsIFRPQVNUX0xJTUlUKVxuXG4gICAgY2FzZSAnVVBEQVRFX1RPQVNUJzpcbiAgICAgIHJldHVybiBzdGF0ZS5tYXAodCA9PiAodC5pZCA9PT0gYWN0aW9uLnRvYXN0LmlkID8geyAuLi50LCAuLi5hY3Rpb24udG9hc3QgfSA6IHQpKVxuXG4gICAgY2FzZSAnRElTTUlTU19UT0FTVCc6IHtcbiAgICAgIGNvbnN0IHsgdG9hc3RJZCB9ID0gYWN0aW9uXG5cbiAgICAgIGlmICh0b2FzdElkKSB7XG4gICAgICAgIGFkZFRvUmVtb3ZlUXVldWUodG9hc3RJZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmZvckVhY2godG9hc3QgPT4ge1xuICAgICAgICAgIGFkZFRvUmVtb3ZlUXVldWUodG9hc3QuaWQpXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdGF0ZS5tYXAodCA9PlxuICAgICAgICB0LmlkID09PSB0b2FzdElkIHx8IHRvYXN0SWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAuLi50LFxuICAgICAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHRcbiAgICAgIClcbiAgICB9XG4gICAgY2FzZSAnUkVNT1ZFX1RPQVNUJzpcbiAgICAgIGlmIChhY3Rpb24udG9hc3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlLmZpbHRlcih0ID0+IHQuaWQgIT09IGFjdGlvbi50b2FzdElkKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMSVNURU5FUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IGxpc3RlbmVyczogQXJyYXk8KHN0YXRlOiBUb2FzdFtdKSA9PiB2b2lkPiA9IFtdXG5cbmxldCBtZW1vcnlTdGF0ZTogVG9hc3RbXSA9IFtdXG5cbmZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbjogYW55KSB7XG4gIG1lbW9yeVN0YXRlID0gcmVkdWNlcihtZW1vcnlTdGF0ZSwgYWN0aW9uKVxuICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgbGlzdGVuZXIobWVtb3J5U3RhdGUpXG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGVU5DSU9ORVMgUMOaQkxJQ0FTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG50eXBlIFRvYXN0UHJvcHMgPSBPbWl0PFRvYXN0LCAnaWQnPlxuXG5mdW5jdGlvbiB0b2FzdCh7IC4uLnByb3BzIH06IFRvYXN0UHJvcHMpIHtcbiAgY29uc3QgaWQgPSBnZW5JZCgpXG5cbiAgY29uc3QgdXBkYXRlID0gKHByb3BzOiBUb2FzdFByb3BzKSA9PlxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6ICdVUERBVEVfVE9BU1QnLFxuICAgICAgdG9hc3Q6IHsgLi4ucHJvcHMsIGlkIH0sXG4gICAgfSlcbiAgY29uc3QgZGlzbWlzcyA9ICgpID0+IGRpc3BhdGNoKHsgdHlwZTogJ0RJU01JU1NfVE9BU1QnLCB0b2FzdElkOiBpZCB9KVxuXG4gIGRpc3BhdGNoKHtcbiAgICB0eXBlOiAnQUREX1RPQVNUJyxcbiAgICB0b2FzdDoge1xuICAgICAgLi4ucHJvcHMsXG4gICAgICBpZCxcbiAgICAgIG9wZW46IHRydWUsXG4gICAgICBvbk9wZW5DaGFuZ2U6IChvcGVuOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmICghb3Blbikge1xuICAgICAgICAgIGRpc21pc3MoKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBpZDogaWQsXG4gICAgZGlzbWlzcyxcbiAgICB1cGRhdGUsXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhPT0sgUFJJTkNJUEFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiB1c2VUb2FzdCgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxUb2FzdFtdPihtZW1vcnlTdGF0ZSlcblxuICB1c2VTdGF0ZSgoKSA9PiB7XG4gICAgbGlzdGVuZXJzLnB1c2goc2V0U3RhdGUpXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2Yoc2V0U3RhdGUpXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4ge1xuICAgIC4uLnN0YXRlLFxuICAgIHRvYXN0LFxuICAgIGRpc21pc3M6ICh0b2FzdElkPzogc3RyaW5nKSA9PiBkaXNwYXRjaCh7IHR5cGU6ICdESVNNSVNTX1RPQVNUJywgdG9hc3RJZCB9KSxcbiAgfVxufVxuXG5leHBvcnQgeyB1c2VUb2FzdCwgdG9hc3QgfVxuIl0sIm5hbWVzIjpbInJlZHVjZXIiLCJ0b2FzdCIsInVzZVRvYXN0IiwiVE9BU1RfTElNSVQiLCJUT0FTVF9SRU1PVkVfREVMQVkiLCJjb3VudCIsImdlbklkIiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwidG9TdHJpbmciLCJ0b2FzdFRpbWVvdXRzIiwiTWFwIiwiYWRkVG9SZW1vdmVRdWV1ZSIsInRvYXN0SWQiLCJoYXMiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImRlbGV0ZSIsImRpc3BhdGNoIiwidHlwZSIsInNldCIsInN0YXRlIiwiYWN0aW9uIiwic2xpY2UiLCJtYXAiLCJ0IiwiaWQiLCJmb3JFYWNoIiwidW5kZWZpbmVkIiwib3BlbiIsImZpbHRlciIsImxpc3RlbmVycyIsIm1lbW9yeVN0YXRlIiwibGlzdGVuZXIiLCJwcm9wcyIsInVwZGF0ZSIsImRpc21pc3MiLCJvbk9wZW5DaGFuZ2UiLCJzZXRTdGF0ZSIsInVzZVN0YXRlIiwicHVzaCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSJdLCJtYXBw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