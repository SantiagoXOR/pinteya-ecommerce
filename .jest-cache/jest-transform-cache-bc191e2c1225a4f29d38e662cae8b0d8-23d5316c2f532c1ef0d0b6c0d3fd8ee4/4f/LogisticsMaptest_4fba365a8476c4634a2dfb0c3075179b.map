{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\__tests__\\logistics\\components\\LogisticsMap.test.tsx"],"sourcesContent":["// =====================================================\r\n// TEST: LOGISTICS MAP COMPONENT\r\n// Descripción: Tests comprehensivos para el componente de mapa\r\n// Basado en: Jest + RTL + MSW\r\n// =====================================================\r\n\r\nimport React from 'react';\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { LogisticsMap } from '@/components/admin/logistics/LogisticsMap';\r\nimport { mockShipment, createMockWebSocket } from '../setup/test-config';\r\n\r\n// =====================================================\r\n// SETUP\r\n// =====================================================\r\n\r\nconst createTestQueryClient = () => new QueryClient({\r\n  defaultOptions: {\r\n    queries: { retry: false },\r\n    mutations: { retry: false }\r\n  }\r\n});\r\n\r\nconst renderWithProviders = (component: React.ReactElement) => {\r\n  const queryClient = createTestQueryClient();\r\n  return render(\r\n    <QueryClientProvider client={queryClient}>\r\n      {component}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\n// =====================================================\r\n// TESTS BÁSICOS\r\n// =====================================================\r\n\r\ndescribe('LogisticsMap Component', () => {\r\n  beforeEach(() => {\r\n    createMockWebSocket();\r\n  });\r\n\r\n  it('should render map container', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    expect(screen.getByText('Mapa de Logística')).toBeInTheDocument();\r\n    expect(screen.getByText('Tracking en tiempo real de 0 envíos')).toBeInTheDocument();\r\n  });\r\n\r\n  it('should display shipments count correctly', () => {\r\n    const shipments = [mockShipment, { ...mockShipment, id: 2 }];\r\n    \r\n    renderWithProviders(\r\n      <LogisticsMap shipments={shipments} />\r\n    );\r\n\r\n    expect(screen.getByText('Tracking en tiempo real de 2 envíos')).toBeInTheDocument();\r\n  });\r\n\r\n  it('should show loading state initially', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    expect(screen.getByText('Cargando mapa...')).toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE FILTROS\r\n  // =====================================================\r\n\r\n  it('should render filter controls', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[mockShipment]} />\r\n    );\r\n\r\n    // Filtro de estado\r\n    const comboboxes = screen.getAllByRole('combobox');\r\n    expect(comboboxes.length).toBeGreaterThan(0);\r\n    expect(comboboxes[0]).toBeInTheDocument();\r\n    \r\n    // Switches de capas\r\n    expect(screen.getByText('Zonas')).toBeInTheDocument();\r\n    expect(screen.getByText('Rutas')).toBeInTheDocument();\r\n  });\r\n\r\n  it('should filter shipments by status', async () => {\r\n    const shipments = [\r\n      { ...mockShipment, id: 1, status: 'in_transit' },\r\n      { ...mockShipment, id: 2, status: 'delivered' }\r\n    ];\r\n\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={shipments} />\r\n    );\r\n\r\n    // Verificar que hay filtros disponibles\r\n    const comboboxes = screen.getAllByRole('combobox');\r\n    expect(comboboxes.length).toBeGreaterThan(0);\r\n    \r\n    const filterSelect = comboboxes[0]; // Usar el primer combobox\r\n    expect(filterSelect).toBeInTheDocument();\r\n    \r\n    // Simular interacción con el filtro\r\n    fireEvent.click(filterSelect);\r\n    \r\n    // Verificar que el componente sigue funcionando\r\n    expect(comboboxes[0]).toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE CONTROLES\r\n  // =====================================================\r\n\r\n  it('should have map control buttons', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    // Verificar que hay botones de control disponibles\r\n    const buttons = screen.getAllByRole('button');\r\n    expect(buttons.length).toBeGreaterThan(0);\r\n    \r\n    // Verificar que los botones son interactuables\r\n    buttons.forEach(button => {\r\n      expect(button).toBeInTheDocument();\r\n      expect(button).not.toBeDisabled();\r\n    });\r\n  });\r\n\r\n  it('should toggle geofences visibility', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    const switches = screen.getAllByRole('switch');\r\n    const geofenceSwitch = switches[1] || switches[0]; // Usar el segundo switch o el primero si solo hay uno\r\n    expect(geofenceSwitch).toBeInTheDocument();\r\n\r\n    fireEvent.click(geofenceSwitch);\r\n    // Verificar que el click fue procesado\r\n    expect(geofenceSwitch).toBeInTheDocument();\r\n  });\r\n\r\n  it('should toggle routes visibility', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    const switches = screen.getAllByRole('switch');\r\n    const routesSwitch = switches[0]; // Usar el primer switch disponible\r\n    expect(routesSwitch).toBeInTheDocument();\r\n\r\n    fireEvent.click(routesSwitch);\r\n    // Verificar que el click fue procesado\r\n    expect(routesSwitch).toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE ESTILOS DE MAPA\r\n  // =====================================================\r\n\r\n  it('should change map style', async () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    // Encontrar el select de estilo\r\n    const styleSelects = screen.getAllByRole('combobox');\r\n    const styleSelect = styleSelects.find(select => \r\n      select.getAttribute('aria-label')?.includes('style') || \r\n      select.closest('[data-testid]')?.getAttribute('data-testid')?.includes('style')\r\n    ) || styleSelects[1]; // Fallback al segundo select\r\n\r\n    if (styleSelect) {\r\n      fireEvent.click(styleSelect);\r\n\r\n      await waitFor(() => {\r\n        // Buscar opción de satélite si existe\r\n        const satelliteOption = screen.queryByText('Satélite') || screen.queryByText('satellite');\r\n        if (satelliteOption) {\r\n          fireEvent.click(satelliteOption);\r\n        }\r\n      });\r\n\r\n      // Verificar que el select sigue siendo válido después del cambio\r\n      expect(styleSelect).toBeInTheDocument();\r\n    }\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE TIEMPO REAL\r\n  // =====================================================\r\n\r\n  it('should show real-time badge when enabled', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} realTimeEnabled={true} />\r\n    );\r\n\r\n    expect(screen.getByText('Tiempo Real')).toBeInTheDocument();\r\n  });\r\n\r\n  it('should not show real-time badge when disabled', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} realTimeEnabled={false} />\r\n    );\r\n\r\n    expect(screen.queryByText('Tiempo Real')).not.toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE SELECCIÓN DE ENVÍOS\r\n  // =====================================================\r\n\r\n  it('should call onShipmentSelect when shipment is selected', () => {\r\n    const onShipmentSelect = jest.fn();\r\n    \r\n    renderWithProviders(\r\n      <LogisticsMap \r\n        shipments={[mockShipment]} \r\n        onShipmentSelect={onShipmentSelect}\r\n      />\r\n    );\r\n\r\n    // Simular click en el mapa (esto normalmente sería manejado por MapLibre)\r\n    // Como MapLibre está mockeado, simulamos el comportamiento\r\n    const mapContainer = document.querySelector('[data-testid=\"map-container\"]') || \r\n                        document.querySelector('.maplibregl-map');\r\n    \r\n    if (mapContainer) {\r\n      fireEvent.click(mapContainer);\r\n      // En un test real, esto triggearía el evento de MapLibre\r\n      // que llamaría a onShipmentSelect\r\n    }\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE LEYENDA\r\n  // =====================================================\r\n\r\n  it('should display map legend', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    expect(screen.getByText('En Tránsito')).toBeInTheDocument();\r\n    expect(screen.getByText('En Reparto')).toBeInTheDocument();\r\n    expect(screen.getByText('Entregado')).toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE RESPONSIVE\r\n  // =====================================================\r\n\r\n  it('should be responsive', () => {\r\n    const { container } = renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    const mapCard = container.querySelector('.relative');\r\n    expect(mapCard).toHaveClass('relative');\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE ACCESIBILIDAD\r\n  // =====================================================\r\n\r\n  it('should have proper ARIA labels', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    // Verificar que los controles están presentes y son accesibles\r\n    const switches = screen.getAllByRole('switch');\r\n    expect(switches.length).toBeGreaterThan(0);\r\n    \r\n    switches.forEach(switchElement => {\r\n      // Verificar que el switch es interactuable\r\n      expect(switchElement).toBeInTheDocument();\r\n      expect(switchElement).not.toBeDisabled();\r\n    });\r\n  });\r\n\r\n  it('should support keyboard navigation', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    const filterSelect = screen.getAllByRole('combobox')[0];\r\n    \r\n    // Verificar que es focuseable\r\n    filterSelect.focus();\r\n    expect(filterSelect).toHaveFocus();\r\n\r\n    // Simular navegación con teclado\r\n    fireEvent.keyDown(filterSelect, { key: 'ArrowDown' });\r\n    fireEvent.keyDown(filterSelect, { key: 'Enter' });\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE ERROR HANDLING\r\n  // =====================================================\r\n\r\n  it('should handle empty shipments gracefully', () => {\r\n    renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    expect(screen.getByText('Tracking en tiempo real de 0 envíos')).toBeInTheDocument();\r\n  });\r\n\r\n  it('should handle invalid shipment data', () => {\r\n    const invalidShipments = [\r\n      { ...mockShipment, id: null },\r\n      { ...mockShipment, status: 'invalid_status' }\r\n    ] as Partial<typeof mockShipment>[];\r\n\r\n    expect(() => {\r\n      renderWithProviders(\r\n        <LogisticsMap shipments={invalidShipments} />\r\n      );\r\n    }).not.toThrow();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE PERFORMANCE\r\n  // =====================================================\r\n\r\n  it('should handle large number of shipments', () => {\r\n    const manyShipments = Array.from({ length: 1000 }, (_, i) => ({\r\n      ...mockShipment,\r\n      id: i + 1,\r\n      shipment_number: `SHP-${i + 1}`\r\n    }));\r\n\r\n    const startTime = performance.now();\r\n    \r\n    renderWithProviders(\r\n      <LogisticsMap shipments={manyShipments} />\r\n    );\r\n\r\n    const endTime = performance.now();\r\n    const renderTime = endTime - startTime;\r\n\r\n    // Verificar que el render no tome más de 1 segundo\r\n    expect(renderTime).toBeLessThan(1000);\r\n    \r\n    expect(screen.getByText('Tracking en tiempo real de 1000 envíos')).toBeInTheDocument();\r\n  });\r\n\r\n  // =====================================================\r\n  // TESTS DE CLEANUP\r\n  // =====================================================\r\n\r\n  it('should cleanup resources on unmount', () => {\r\n    const { unmount } = renderWithProviders(\r\n      <LogisticsMap shipments={[]} />\r\n    );\r\n\r\n    // Verificar que no hay memory leaks\r\n    expect(() => unmount()).not.toThrow();\r\n  });\r\n});\r\n"],"names":["createTestQueryClient","QueryClient","defaultOptions","queries","retry","mutations","renderWithProviders","component","queryClient","render","QueryClientProvider","client","describe","beforeEach","createMockWebSocket","it","LogisticsMap","shipments","expect","screen","getByText","toBeInTheDocument","mockShipment","id","comboboxes","getAllByRole","length","toBeGreaterThan","status","filterSelect","fireEvent","click","buttons","forEach","button","not","toBeDisabled","switches","geofenceSwitch","routesSwitch","styleSelects","styleSelect","find","select","getAttribute","includes","closest","waitFor","satelliteOption","queryByText","realTimeEnabled","onShipmentSelect","jest","fn","mapContainer","document","querySelector","container","mapCard","toHaveClass","switchElement","focus","toHaveFocus","keyDown","key","invalidShipments","toThrow","manyShipments","Array","from","_","i","shipment_number","startTime","performance","now","endTime","renderTime","toBeLessThan","unmount"],"mappings":"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"}