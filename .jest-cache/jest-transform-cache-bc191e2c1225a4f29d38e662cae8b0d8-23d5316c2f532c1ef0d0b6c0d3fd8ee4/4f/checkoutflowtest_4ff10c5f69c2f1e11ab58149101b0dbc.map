{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\__tests__\\checkout-flow.test.tsx"],"sourcesContent":["import React from 'react'\nimport { render, screen, fireEvent } from '@testing-library/react'\nimport '@testing-library/jest-dom'\nimport { CheckoutFlow } from '../checkout-flow'\n\ninterface ShippingInfoProps {\n  options: string[]\n  selectedOption: string\n}\n\ninterface CartSummaryProps {\n  cartItems: Array<{ id: number; title: string; price: number; quantity: number }>\n  variant: string\n}\n\n// Mock de los componentes del Design System\njest.mock('../shipping-info', () => ({\n  ShippingInfo: ({ options, selectedOption }: ShippingInfoProps) => (\n    <div data-testid='shipping-info'>Shipping options for: {selectedOption}</div>\n  ),\n}))\n\njest.mock('../cart-summary', () => ({\n  CartSummary: ({ cartItems, variant }: CartSummaryProps) => (\n    <div data-testid='cart-summary'>\n      Cart Summary - {cartItems.length} items - {variant}\n    </div>\n  ),\n}))\n\nconst mockCartItems = [\n  {\n    id: 1,\n    title: 'Pintura Sherwin Williams 4L',\n    price: 10000,\n    discountedPrice: 8500,\n    quantity: 2,\n  },\n]\n\nconst mockCheckoutData = {\n  totalPrice: 17000,\n  shippingCost: 2500,\n  discount: 0,\n  finalTotal: 19500,\n  shippingMethod: 'standard' as const,\n}\n\ndescribe('CheckoutFlow', () => {\n  const defaultProps = {\n    cartItems: mockCartItems,\n    checkoutData: mockCheckoutData,\n  }\n\n  it('renders checkout flow with basic elements', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\n  })\n\n  it('renders without errors when no errors provided', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    // No debería mostrar sección de errores\n    expect(screen.queryByText('Errores:')).not.toBeInTheDocument()\n  })\n\n  it('displays cart summary correctly', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    // Verificar que CartSummary se renderiza con los datos correctos\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\n  })\n\n  it('renders with proper accessibility', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    // Verificar elementos accesibles\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\n  })\n\n  it('renders with custom className', () => {\n    const customClass = 'custom-checkout-class'\n\n    const { container } = render(<CheckoutFlow {...defaultProps} className={customClass} />)\n\n    // Verificar que la clase se aplica al contenedor principal\n    expect(container.firstChild).toHaveClass(customClass)\n  })\n\n  it('shows cart summary by default', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\n    expect(screen.getByText('Cart Summary - 1 items - compact')).toBeInTheDocument()\n  })\n\n  it('renders with empty cart items', () => {\n    render(<CheckoutFlow {...defaultProps} cartItems={[]} />)\n\n    expect(screen.getByTestId('cart-summary')).toBeInTheDocument()\n    expect(screen.getByText('Cart Summary - 0 items - compact')).toBeInTheDocument()\n  })\n\n  it('calls onComplete when complete button is clicked', () => {\n    const mockOnComplete = jest.fn()\n\n    render(<CheckoutFlow {...defaultProps} onComplete={mockOnComplete} />)\n\n    const completeButton = screen.getByRole('button', { name: /completar pedido/i })\n    fireEvent.click(completeButton)\n\n    expect(mockOnComplete).toHaveBeenCalledTimes(1)\n  })\n\n  it('disables complete button when loading', () => {\n    render(<CheckoutFlow {...defaultProps} isLoading={true} />)\n\n    const completeButton = screen.getByRole('button', { name: /procesando/i })\n    expect(completeButton).toBeDisabled()\n  })\n\n  it('shows complete button by default', () => {\n    render(<CheckoutFlow {...defaultProps} />)\n\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\n    expect(screen.getByRole('button', { name: /completar pedido/i })).toBeInTheDocument()\n  })\n\n  it('calls onComplete when finish button is clicked', () => {\n    const mockOnComplete = jest.fn()\n\n    render(<CheckoutFlow {...defaultProps} onComplete={mockOnComplete} />)\n\n    const finishButton = screen.getByRole('button', { name: /completar pedido/i })\n    fireEvent.click(finishButton)\n\n    expect(mockOnComplete).toHaveBeenCalledTimes(1)\n  })\n\n  it('shows loading state', () => {\n    render(<CheckoutFlow {...defaultProps} isLoading={true} />)\n\n    expect(screen.getByText('Procesando...')).toBeInTheDocument()\n  })\n\n  it('displays errors when present', () => {\n    const errors = {\n      email: 'Email es requerido',\n      address: 'Dirección es requerida',\n    }\n\n    render(<CheckoutFlow {...defaultProps} errors={errors} />)\n\n    expect(screen.getByText('Errores:')).toBeInTheDocument()\n    expect(screen.getByText('• Email es requerido')).toBeInTheDocument()\n    expect(screen.getByText('• Dirección es requerida')).toBeInTheDocument()\n  })\n\n  it('renders with custom children content', () => {\n    const customContent = <div>Custom checkout content</div>\n\n    render(<CheckoutFlow {...defaultProps}>{customContent}</CheckoutFlow>)\n\n    expect(screen.getByText('Custom checkout content')).toBeInTheDocument()\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\n  })\n\n  it('renders cart summary with correct data', () => {\n    const checkoutData = {\n      totalPrice: 100,\n      shippingCost: 10,\n      discount: 5,\n      finalTotal: 105,\n    }\n\n    render(<CheckoutFlow {...defaultProps} checkoutData={checkoutData} />)\n\n    // Verificar que el componente se renderiza (CartSummary está presente)\n    expect(screen.getByText('Finalizar Compra')).toBeInTheDocument()\n  })\n\n  it('shows loading state correctly', () => {\n    render(<CheckoutFlow {...defaultProps} isLoading={true} />)\n\n    // Verificar que muestra el estado de carga\n    expect(screen.getByText('Procesando...')).toBeInTheDocument()\n\n    // Verificar que el botón está deshabilitado\n    const button = screen.getByRole('button', { name: /procesando/i })\n    expect(button).toBeDisabled()\n  })\n\n  it('renders children content', () => {\n    render(\n      <CheckoutFlow {...defaultProps}>\n        <div data-testid='custom-content'>Custom step content</div>\n      </CheckoutFlow>\n    )\n\n    expect(screen.getByTestId('custom-content')).toBeInTheDocument()\n    expect(screen.getByText('Custom step content')).toBeInTheDocument()\n  })\n})\n"],"names":["jest","mock","ShippingInfo","options","selectedOption","div","data-testid","CartSummary","cartItems","variant","length","mockCartItems","id","title","price","discountedPrice","quantity","mockCheckoutData","totalPrice","shippingCost","discount","finalTotal","shippingMethod","describe","defaultProps","checkoutData","it","render","CheckoutFlow","expect","screen","getByText","toBeInTheDocument","getByRole","name","getByTestId","queryByText","not","customClass","container","className","firstChild","toHaveClass","mockOnComplete","fn","onComplete","completeButton","fireEvent","click","toHaveBeenCalledTimes","isLoading","toBeDisabled","finishButton","errors","email","address","customContent","button"],"mappings":"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"}