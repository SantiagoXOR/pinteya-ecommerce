{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\asset-optimizer.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - ASSET OPTIMIZER\n// ===================================\n\nimport { logger, LogLevel, LogCategory } from './enterprise/logger'\n\n// Configuración de optimización de assets\ninterface AssetConfig {\n  compress: boolean\n  quality?: number\n  format?: 'webp' | 'jpeg' | 'png'\n  maxWidth?: number\n  maxHeight?: number\n  lazy?: boolean\n}\n\n// Configuraciones predefinidas\nexport const ASSET_CONFIGS = {\n  // Para imágenes de productos\n  PRODUCT_IMAGES: {\n    compress: true,\n    quality: 85,\n    format: 'webp' as const,\n    maxWidth: 800,\n    maxHeight: 600,\n    lazy: true,\n  },\n\n  // Para iconos de pago\n  PAYMENT_ICONS: {\n    compress: true,\n    quality: 90,\n    format: 'webp' as const,\n    maxWidth: 64,\n    maxHeight: 64,\n    lazy: false,\n  },\n\n  // Para imágenes de hero/banner\n  HERO_IMAGES: {\n    compress: true,\n    quality: 80,\n    format: 'webp' as const,\n    maxWidth: 1920,\n    maxHeight: 1080,\n    lazy: true,\n  },\n\n  // Para avatares de usuario\n  AVATARS: {\n    compress: true,\n    quality: 85,\n    format: 'webp' as const,\n    maxWidth: 200,\n    maxHeight: 200,\n    lazy: true,\n  },\n} as const\n\n/**\n * Clase principal para optimización de assets\n */\nexport class AssetOptimizer {\n  private static instance: AssetOptimizer\n\n  private constructor() {}\n\n  static getInstance(): AssetOptimizer {\n    if (!AssetOptimizer.instance) {\n      AssetOptimizer.instance = new AssetOptimizer()\n    }\n    return AssetOptimizer.instance\n  }\n\n  /**\n   * Optimiza una URL de imagen\n   */\n  optimizeImageUrl(\n    originalUrl: string,\n    config: AssetConfig = ASSET_CONFIGS.PRODUCT_IMAGES\n  ): string {\n    try {\n      // Si es una URL externa, aplicar parámetros de optimización\n      if (originalUrl.startsWith('http')) {\n        const url = new URL(originalUrl)\n\n        // Para Supabase Storage, agregar parámetros de transformación\n        if (url.hostname.includes('supabase')) {\n          const params = new URLSearchParams()\n\n          if (config.maxWidth) {\n            params.set('width', config.maxWidth.toString())\n          }\n\n          if (config.maxHeight) {\n            params.set('height', config.maxHeight.toString())\n          }\n\n          if (config.quality) {\n            params.set('quality', config.quality.toString())\n          }\n\n          if (config.format) {\n            params.set('format', config.format)\n          }\n\n          if (params.toString()) {\n            url.search = params.toString()\n          }\n        }\n\n        return url.toString()\n      }\n\n      // Para URLs locales, mantener como están\n      return originalUrl\n    } catch (error) {\n      logger.error(LogCategory.API, 'Image URL optimization failed', error as Error)\n      return originalUrl\n    }\n  }\n\n  /**\n   * Genera srcSet para imágenes responsivas\n   */\n  generateSrcSet(baseUrl: string, config: AssetConfig = ASSET_CONFIGS.PRODUCT_IMAGES): string {\n    try {\n      const sizes = [\n        { width: 320, suffix: 'sm' },\n        { width: 640, suffix: 'md' },\n        { width: 1024, suffix: 'lg' },\n        { width: 1920, suffix: 'xl' },\n      ]\n\n      const srcSet = sizes\n        .filter(size => !config.maxWidth || size.width <= config.maxWidth)\n        .map(size => {\n          const optimizedConfig = { ...config, maxWidth: size.width }\n          const url = this.optimizeImageUrl(baseUrl, optimizedConfig)\n          return `${url} ${size.width}w`\n        })\n        .join(', ')\n\n      return srcSet\n    } catch (error) {\n      logger.error(LogCategory.API, 'SrcSet generation failed', error as Error)\n      return baseUrl\n    }\n  }\n\n  /**\n   * Genera sizes attribute para imágenes responsivas\n   */\n  generateSizes(breakpoints: Array<{ condition: string; size: string }>): string {\n    return breakpoints.map(bp => `${bp.condition} ${bp.size}`).join(', ')\n  }\n\n  /**\n   * Precarga assets críticos\n   */\n  preloadCriticalAssets(assets: Array<{ url: string; type: 'image' | 'font' | 'style' }>): void {\n    if (typeof window === 'undefined') {\n      return\n    }\n\n    assets.forEach(asset => {\n      try {\n        const link = document.createElement('link')\n        link.rel = 'preload'\n        link.href = asset.url\n\n        switch (asset.type) {\n          case 'image':\n            link.as = 'image'\n            break\n          case 'font':\n            link.as = 'font'\n            link.crossOrigin = 'anonymous'\n            break\n          case 'style':\n            link.as = 'style'\n            break\n        }\n\n        document.head.appendChild(link)\n\n        logger.info(LogCategory.API, 'Asset preloaded')\n      } catch (error) {\n        logger.error(LogCategory.API, 'Asset preload failed', error as Error)\n      }\n    })\n  }\n\n  /**\n   * Lazy load de imágenes con Intersection Observer\n   */\n  setupLazyLoading(): void {\n    if (typeof window === 'undefined' || !('IntersectionObserver' in window)) {\n      return\n    }\n\n    const imageObserver = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const img = entry.target as HTMLImageElement\n\n            if (img.dataset.src) {\n              img.src = img.dataset.src\n              img.removeAttribute('data-src')\n            }\n\n            if (img.dataset.srcset) {\n              img.srcset = img.dataset.srcset\n              img.removeAttribute('data-srcset')\n            }\n\n            img.classList.remove('lazy')\n            observer.unobserve(img)\n\n            logger.info(LogCategory.API, 'Lazy image loaded')\n          }\n        })\n      },\n      {\n        rootMargin: '50px 0px',\n        threshold: 0.01,\n      }\n    )\n\n    // Observar todas las imágenes lazy\n    document.querySelectorAll('img[data-src]').forEach(img => {\n      imageObserver.observe(img)\n    })\n  }\n\n  /**\n   * Optimiza CSS crítico\n   */\n  optimizeCriticalCSS(criticalSelectors: string[]): string {\n    try {\n      // En una implementación real, esto extraería CSS crítico\n      // Por ahora, retornamos un placeholder\n      const criticalCSS = criticalSelectors\n        .map(selector => `${selector} { /* critical styles */ }`)\n        .join('\\n')\n\n      logger.info(LogCategory.API, 'Critical CSS optimized')\n\n      return criticalCSS\n    } catch (error) {\n      logger.error(LogCategory.API, 'Critical CSS optimization failed', error as Error)\n      return ''\n    }\n  }\n\n  /**\n   * Comprime y optimiza JSON para APIs\n   */\n  optimizeJsonResponse(data: any): string {\n    try {\n      // Remover propiedades null/undefined\n      const cleaned = this.removeNullValues(data)\n\n      // Comprimir JSON (sin espacios)\n      const compressed = JSON.stringify(cleaned)\n\n      logger.info(LogCategory.API, 'JSON response optimized')\n\n      return compressed\n    } catch (error) {\n      logger.error(LogCategory.API, 'JSON optimization failed', error as Error)\n      // En caso de error (como objetos circulares), retornar string simple\n      try {\n        return JSON.stringify({ error: 'Serialization failed' })\n      } catch {\n        return '{\"error\":\"Serialization failed\"}'\n      }\n    }\n  }\n\n  /**\n   * Remueve valores null/undefined de objetos\n   */\n  private removeNullValues(obj: any): any {\n    if (obj === null || obj === undefined) {\n      return undefined\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(item => this.removeNullValues(item)).filter(item => item !== undefined)\n    }\n\n    if (typeof obj === 'object') {\n      const cleaned: any = {}\n      for (const [key, value] of Object.entries(obj)) {\n        const cleanedValue = this.removeNullValues(value)\n        if (cleanedValue !== undefined) {\n          cleaned[key] = cleanedValue\n        }\n      }\n      return cleaned\n    }\n\n    return obj\n  }\n}\n\n// Instancia singleton\nexport const assetOptimizer = AssetOptimizer.getInstance()\n\n/**\n * Funciones de utilidad para optimización de assets\n */\nexport const AssetUtils = {\n  /**\n   * Optimiza imagen de producto\n   */\n  optimizeProductImage(url: string): string {\n    return assetOptimizer.optimizeImageUrl(url, ASSET_CONFIGS.PRODUCT_IMAGES)\n  },\n\n  /**\n   * Optimiza icono de pago\n   */\n  optimizePaymentIcon(url: string): string {\n    return assetOptimizer.optimizeImageUrl(url, ASSET_CONFIGS.PAYMENT_ICONS)\n  },\n\n  /**\n   * Genera imagen responsiva para productos\n   */\n  generateProductImageProps(url: string) {\n    return {\n      src: assetOptimizer.optimizeImageUrl(url, ASSET_CONFIGS.PRODUCT_IMAGES),\n      srcSet: assetOptimizer.generateSrcSet(url, ASSET_CONFIGS.PRODUCT_IMAGES),\n      sizes: assetOptimizer.generateSizes([\n        { condition: '(max-width: 640px)', size: '100vw' },\n        { condition: '(max-width: 1024px)', size: '50vw' },\n        { condition: '', size: '33vw' },\n      ]),\n      loading: 'lazy' as const,\n      decoding: 'async' as const,\n    }\n  },\n\n  /**\n   * Precarga assets críticos de pago\n   */\n  preloadPaymentAssets(): void {\n    const criticalAssets = [\n      { url: '/images/logo/visa.svg', type: 'image' as const },\n      { url: '/images/logo/mastercard.svg', type: 'image' as const },\n      { url: '/images/logo/mercadopago.svg', type: 'image' as const },\n    ]\n\n    assetOptimizer.preloadCriticalAssets(criticalAssets)\n  },\n\n  /**\n   * Inicializa optimizaciones en el cliente\n   */\n  initializeClientOptimizations(): void {\n    if (typeof window === 'undefined') {\n      return\n    }\n\n    // Configurar lazy loading\n    assetOptimizer.setupLazyLoading()\n\n    // Precargar assets críticos\n    AssetUtils.preloadPaymentAssets()\n\n    logger.info(LogCategory.API, 'Client asset optimizations initialized')\n  },\n}\n"],"names":["ASSET_CONFIGS","AssetOptimizer","AssetUtils","assetOptimizer","PRODUCT_IMAGES","compress","quality","format","maxWidth","maxHeight","lazy","PAYMENT_ICONS","HERO_IMAGES","AVATARS","getInstance","instance","optimizeImageUrl","originalUrl","config","startsWith","url","URL","hostname","includes","params","URLSearchParams","set","toString","search","error","logger","LogCategory","API","generateSrcSet","baseUrl","sizes","width","suffix","srcSet","filter","size","map","optimizedConfig","join","generateSizes","breakpoints","bp","condition","preloadCriticalAssets","assets","window","forEach","asset","link","document","createElement","rel","href","type","as","crossOrigin","head","appendChild","info","setupLazyLoading","imageObserver","IntersectionObserver","entries","observer","entry","isIntersecting","img","target","dataset","src","removeAttribute","srcset","classList","remove","unobserve","rootMargin","threshold","querySelectorAll","observe","optimizeCriticalCSS","criticalSelectors","criticalCSS","selector","optimizeJsonResponse","data","cleaned","removeNullValues","compressed","JSON","stringify","obj","undefined","Array","isArray","item","key","value","Object","cleanedValue","optimizeProductImage","optimizePaymentIcon","generateProductImageProps","loading","decoding","preloadPaymentAssets","criticalAssets","initializeClientOptimizations"],"mappings":"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"}