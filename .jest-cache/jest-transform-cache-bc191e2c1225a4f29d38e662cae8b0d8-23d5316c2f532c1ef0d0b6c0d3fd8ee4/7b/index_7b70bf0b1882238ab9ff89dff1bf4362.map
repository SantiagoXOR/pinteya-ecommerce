{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Home\\BestSeller\\index.tsx"],"sourcesContent":["'use client'\n\nimport React from 'react'\nimport ProductItem from '@/components/Common/ProductItem'\nimport { adaptApiProductsToComponents } from '@/lib/adapters/product-adapter'\nimport Link from 'next/link'\nimport { useFilteredProducts } from '@/hooks/useFilteredProducts'\nimport { useProductFilters } from '@/hooks/useProductFilters'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { TrendingUp, ArrowRight, Trophy } from '@/lib/optimized-imports'\n\nconst BestSeller: React.FC = () => {\n  const { filters } = useProductFilters({ syncWithUrl: true })\n\n  // IDs espec√≠ficos de productos para Ofertas Especiales\n  const specialOfferProductIds = [52, 55, 59, 62, 66, 73, 75, 77]\n\n  // Obtener productos con descuentos y m√°s variados\n  const { data, isLoading, error } = useFilteredProducts({\n    categories: filters.categories.length > 0 ? filters.categories : undefined,\n    limit: 50, // Aumentamos el l√≠mite para asegurar que obtenemos todos los productos\n    sortBy: 'created_at',\n    sortOrder: 'desc',\n    hasDiscount: true, // Nuevo filtro para productos con descuento\n  })\n\n  // Adaptar productos de la API al formato de componentes\n  const adaptedProducts = data?.data ? adaptApiProductsToComponents(data.data) : []\n\n  // Filtrar productos espec√≠ficos para Ofertas Especiales\n  const specialOfferProducts = adaptedProducts.filter(p => specialOfferProductIds.includes(p.id))\n\n  // Si no encontramos suficientes productos espec√≠ficos, complementamos con productos con descuento\n  const fallbackProducts = adaptedProducts.filter(\n    p => !specialOfferProductIds.includes(p.id) && p.discountedPrice && p.discountedPrice < p.price\n  )\n\n  // Debug: Verificar productos filtrados\n  console.log('üîç DEBUG - Productos adaptados:', adaptedProducts.length)\n  console.log('üîç DEBUG - IDs buscados:', specialOfferProductIds)\n  console.log(\n    'üîç DEBUG - Productos encontrados por ID:',\n    specialOfferProducts.map(p => `ID: ${p.id} - ${p.brand} - ${p.name}`)\n  )\n  console.log('üîç DEBUG - Productos de respaldo:', fallbackProducts.length)\n\n  // Construir lista final priorizando productos espec√≠ficos\n  const bestSellerProducts = [...specialOfferProducts, ...fallbackProducts].slice(0, 8)\n\n  console.log(\n    'üîç DEBUG - Productos finales ordenados:',\n    bestSellerProducts.map(p => `${p.brand} - ${p.name}`)\n  )\n\n  // Mostrar t√≠tulo din√°mico seg√∫n si hay filtros activos\n  const sectionTitle =\n    filters.categories.length > 0\n      ? `Top productos en ${filters.categories.length === 1 ? 'esta categor√≠a' : 'estas categor√≠as'}`\n      : 'Ofertas Especiales'\n\n  if (isLoading) {\n    return (\n      <section className='overflow-hidden py-2 sm:py-4'>\n        <div className='max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0'>\n          {/* Header con Design System */}\n          <div className='mb-10 flex items-center justify-between'>\n            <div>\n              <div className='flex items-center gap-2.5 font-medium text-gray-700 mb-1.5'>\n                <div className='w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center'>\n                  <Trophy className='w-3 h-3 text-yellow-600' />\n                </div>\n                <span>Ofertas Especiales</span>\n                <Badge variant='warning' size='sm'>\n                  Descuentos\n                </Badge>\n              </div>\n            </div>\n          </div>\n\n          {/* Loading State mejorado - Mobile-First 2 columnas */}\n          <div className='grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-7.5'>\n            {[...Array(6)].map((_, index) => (\n              <Card key={index} className='overflow-hidden'>\n                <div className='animate-pulse'>\n                  <div className='bg-gray-200 h-40 md:h-64 rounded-t-lg'></div>\n                  <CardContent className='p-2 md:p-4'>\n                    <div className='space-y-2 md:space-y-3'>\n                      <div className='bg-gray-200 h-3 md:h-4 rounded w-3/4'></div>\n                      <div className='bg-gray-200 h-3 md:h-4 rounded w-1/2'></div>\n                      <div className='bg-gray-200 h-4 md:h-6 rounded w-1/3'></div>\n                    </div>\n                  </CardContent>\n                </div>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n    )\n  }\n\n  if (error) {\n    return (\n      <section className='overflow-hidden py-2 sm:py-4'>\n        <div className='max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0'>\n          {/* Error State mejorado */}\n          <Card variant='outlined' className='border-red-200 bg-red-50'>\n            <CardContent className='p-8 text-center'>\n              <div className='flex flex-col items-center gap-3'>\n                <div className='w-12 h-12 rounded-full bg-red-100 flex items-center justify-center'>\n                  <span className='text-red-600 text-xl'>‚ö†Ô∏è</span>\n                </div>\n                <div>\n                  <h3 className='font-semibold text-red-900 mb-1'>Error al cargar productos top</h3>\n                  <p className='text-red-700 text-sm'>\n                    {error instanceof Error\n                      ? error.message\n                      : error?.toString() || 'Error desconocido'}\n                  </p>\n                </div>\n                <Button\n                  variant='outline'\n                  size='sm'\n                  onClick={() => window.location.reload()}\n                  className='border-red-300 text-red-700 hover:bg-red-100'\n                >\n                  Reintentar\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n    )\n  }\n\n  return (\n    <section className='overflow-hidden py-2 sm:py-4'>\n      <div className='max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0'>\n        {/* Section Header - Migrado al Design System */}\n        <div className='mb-10 flex items-center justify-between'>\n          <div>\n            <div className='flex items-center gap-2.5 font-medium text-gray-700 mb-1.5'>\n              <div className='w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center'>\n                <Trophy className='w-3 h-3 text-yellow-600' />\n              </div>\n              <span>Ofertas Especiales</span>\n              <Badge variant='warning' size='sm'>\n                Descuentos\n              </Badge>\n            </div>\n          </div>\n        </div>\n\n        <div className='grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-7.5'>\n          {/* Best Sellers Grid - Mobile-First 2 columnas */}\n          {bestSellerProducts.length > 0 ? (\n            bestSellerProducts.map((item, key) => <ProductItem key={key} product={item} />)\n          ) : (\n            /* Empty State mejorado */\n            <div className='col-span-full'>\n              <Card variant='outlined' className='border-gray-200'>\n                <CardContent className='p-12 text-center'>\n                  <div className='flex flex-col items-center gap-4'>\n                    <div className='w-16 h-16 rounded-full bg-yellow-100 flex items-center justify-center'>\n                      <Trophy className='w-8 h-8 text-yellow-500' />\n                    </div>\n                    <div>\n                      <h3 className='font-semibold text-gray-900 mb-2'>\n                        No hay productos disponibles\n                      </h3>\n                      <p className='text-gray-600 text-sm mb-4'>\n                        No se encontraron productos en este momento.\n                      </p>\n                      <Button variant='outline' asChild>\n                        <Link href='/shop-with-sidebar'>Ver Cat√°logo Completo</Link>\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default BestSeller\n"],"names":["BestSeller","filters","useProductFilters","syncWithUrl","specialOfferProductIds","data","isLoading","error","useFilteredProducts","categories","length","undefined","limit","sortBy","sortOrder","hasDiscount","adaptedProducts","adaptApiProductsToComponents","specialOfferProducts","filter","p","includes","id","fallbackProducts","discountedPrice","price","console","log","map","brand","name","bestSellerProducts","slice","sectionTitle","section","className","div","Trophy","span","Badge","variant","size","Array","_","index","Card","CardContent","h3","Error","message","toString","Button","onClick","window","location","reload","item","key","ProductItem","product","asChild","Link","href"],"mappings":"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"}