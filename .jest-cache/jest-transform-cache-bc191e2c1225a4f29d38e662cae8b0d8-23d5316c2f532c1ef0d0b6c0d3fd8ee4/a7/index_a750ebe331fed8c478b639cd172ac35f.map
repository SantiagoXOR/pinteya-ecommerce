{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Home\\BestSeller\\index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport ProductItem from \"@/components/Common/ProductItem\";\r\nimport { adaptApiProductsToComponents } from \"@/lib/adapters/product-adapter\";\r\nimport Link from \"next/link\";\r\nimport { useFilteredProducts } from \"@/hooks/useFilteredProducts\";\r\nimport { useProductFilters } from \"@/hooks/useProductFilters\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { TrendingUp, ArrowRight, Trophy } from \"@/lib/optimized-imports\";\r\n\r\nconst BestSeller: React.FC = () => {\r\n  const { filters } = useProductFilters({ syncWithUrl: true });\r\n  \r\n  // IDs espec√≠ficos de productos para Ofertas Especiales\r\n  const specialOfferProductIds = [52, 55, 59, 62, 66, 73, 75, 77];\r\n  \r\n  // Obtener productos con descuentos y m√°s variados\r\n  const { data, isLoading, error } = useFilteredProducts({\r\n    categories: filters.categories.length > 0 ? filters.categories : undefined,\r\n    limit: 50, // Aumentamos el l√≠mite para asegurar que obtenemos todos los productos\r\n    sortBy: 'created_at',\r\n    sortOrder: 'desc',\r\n    hasDiscount: true // Nuevo filtro para productos con descuento\r\n  });\r\n\r\n  // Adaptar productos de la API al formato de componentes\r\n  const adaptedProducts = data?.data ? adaptApiProductsToComponents(data.data) : [];\r\n  \r\n  // Filtrar productos espec√≠ficos para Ofertas Especiales\r\n  const specialOfferProducts = adaptedProducts.filter(p => \r\n    specialOfferProductIds.includes(p.id)\r\n  );\r\n  \r\n  // Si no encontramos suficientes productos espec√≠ficos, complementamos con productos con descuento\r\n  const fallbackProducts = adaptedProducts.filter(p => \r\n    !specialOfferProductIds.includes(p.id) && \r\n    p.discountedPrice && \r\n    p.discountedPrice < p.price\r\n  );\r\n  \r\n  // Debug: Verificar productos filtrados\r\n  console.log('üîç DEBUG - Productos adaptados:', adaptedProducts.length);\r\n  console.log('üîç DEBUG - IDs buscados:', specialOfferProductIds);\r\n  console.log('üîç DEBUG - Productos encontrados por ID:', specialOfferProducts.map(p => `ID: ${p.id} - ${p.brand} - ${p.name}`));\r\n  console.log('üîç DEBUG - Productos de respaldo:', fallbackProducts.length);\r\n  \r\n  // Construir lista final priorizando productos espec√≠ficos\r\n  const bestSellerProducts = [\r\n    ...specialOfferProducts,\r\n    ...fallbackProducts\r\n  ].slice(0, 8);\r\n\r\n  console.log('üîç DEBUG - Productos finales ordenados:', bestSellerProducts.map(p => `${p.brand} - ${p.name}`));\r\n\r\n  // Mostrar t√≠tulo din√°mico seg√∫n si hay filtros activos\r\n  const sectionTitle = filters.categories.length > 0\r\n    ? `Top productos en ${filters.categories.length === 1 ? 'esta categor√≠a' : 'estas categor√≠as'}`\r\n    : 'Ofertas Especiales';\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className=\"overflow-hidden py-2 sm:py-4\">\r\n        <div className=\"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0\">\r\n          {/* Header con Design System */}\r\n          <div className=\"mb-10 flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2.5 font-medium text-gray-700 mb-1.5\">\r\n                <div className=\"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center\">\r\n                  <Trophy className=\"w-3 h-3 text-yellow-600\" />\r\n                </div>\r\n                <span>Ofertas Especiales</span>\r\n              <Badge variant=\"warning\" size=\"sm\">\r\n                Descuentos\r\n              </Badge>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          {/* Loading State mejorado - Mobile-First 2 columnas */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-7.5\">\r\n            {[...Array(6)].map((_, index) => (\r\n              <Card key={index} className=\"overflow-hidden\">\r\n                <div className=\"animate-pulse\">\r\n                  <div className=\"bg-gray-200 h-40 md:h-64 rounded-t-lg\"></div>\r\n                  <CardContent className=\"p-2 md:p-4\">\r\n                    <div className=\"space-y-2 md:space-y-3\">\r\n                      <div className=\"bg-gray-200 h-3 md:h-4 rounded w-3/4\"></div>\r\n                      <div className=\"bg-gray-200 h-3 md:h-4 rounded w-1/2\"></div>\r\n                      <div className=\"bg-gray-200 h-4 md:h-6 rounded w-1/3\"></div>\r\n                    </div>\r\n                  </CardContent>\r\n                </div>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <section className=\"overflow-hidden py-2 sm:py-4\">\r\n        <div className=\"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0\">\r\n          {/* Error State mejorado */}\r\n          <Card variant=\"outlined\" className=\"border-red-200 bg-red-50\">\r\n            <CardContent className=\"p-8 text-center\">\r\n              <div className=\"flex flex-col items-center gap-3\">\r\n                <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center\">\r\n                  <span className=\"text-red-600 text-xl\">‚ö†Ô∏è</span>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-semibold text-red-900 mb-1\">\r\n                    Error al cargar productos top\r\n                  </h3>\r\n                  <p className=\"text-red-700 text-sm\">\r\n                    {error instanceof Error ? error.message : error?.toString() || 'Error desconocido'}\r\n                  </p>\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => window.location.reload()}\r\n                  className=\"border-red-300 text-red-700 hover:bg-red-100\"\r\n                >\r\n                  Reintentar\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <section className=\"overflow-hidden py-2 sm:py-4\">\r\n      <div className=\"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0\">\r\n        {/* Section Header - Migrado al Design System */}\r\n        <div className=\"mb-10 flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"flex items-center gap-2.5 font-medium text-gray-700 mb-1.5\">\r\n              <div className=\"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center\">\r\n                <Trophy className=\"w-3 h-3 text-yellow-600\" />\r\n              </div>\r\n              <span>Ofertas Especiales</span>\r\n              <Badge variant=\"warning\" size=\"sm\">\r\n                Descuentos\r\n              </Badge>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-7.5\">\r\n          {/* Best Sellers Grid - Mobile-First 2 columnas */}\r\n          {bestSellerProducts.length > 0 ? (\r\n            bestSellerProducts.map((item, key) => (\r\n              <ProductItem key={key} product={item} />\r\n            ))\r\n          ) : (\r\n            /* Empty State mejorado */\r\n            <div className=\"col-span-full\">\r\n              <Card variant=\"outlined\" className=\"border-gray-200\">\r\n                <CardContent className=\"p-12 text-center\">\r\n                  <div className=\"flex flex-col items-center gap-4\">\r\n                    <div className=\"w-16 h-16 rounded-full bg-yellow-100 flex items-center justify-center\">\r\n                      <Trophy className=\"w-8 h-8 text-yellow-500\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-gray-900 mb-2\">\r\n                        No hay productos disponibles\r\n                      </h3>\r\n                      <p className=\"text-gray-600 text-sm mb-4\">\r\n                        No se encontraron productos en este momento.\r\n                      </p>\r\n                      <Button variant=\"outline\" asChild>\r\n                        <Link href=\"/shop-with-sidebar\">\r\n                          Ver Cat√°logo Completo\r\n                        </Link>\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BestSeller;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["BestSeller","filters","useProductFilters","syncWithUrl","specialOfferProductIds","data","isLoading","error","useFilteredProducts","categories","length","undefined","limit","sortBy","sortOrder","hasDiscount","adaptedProducts","adaptApiProductsToComponents","specialOfferProducts","filter","p","includes","id","fallbackProducts","discountedPrice","price","console","log","map","brand","name","bestSellerProducts","slice","sectionTitle","section","className","div","Trophy","span","Badge","variant","size","Array","_","index","Card","CardContent","h3","Error","message","toString","Button","onClick","window","location","reload","item","key","ProductItem","product","asChild","Link","href"],"mappings":"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"}