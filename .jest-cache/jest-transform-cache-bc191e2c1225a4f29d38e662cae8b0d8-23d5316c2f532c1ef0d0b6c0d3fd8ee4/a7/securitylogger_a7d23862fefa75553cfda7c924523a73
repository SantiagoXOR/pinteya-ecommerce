0474eb1bde6c7a045a49cb53f63280dd
// ===================================
// PINTEYA E-COMMERCE - LOGGING ESTRUCTURADO DE SEGURIDAD
// ===================================
// Sistema de logging estructurado para eventos de seguridad
// con contexto enriquecido y formato consistente
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createSecurityLogger () {
        return createSecurityLogger;
    },
    get default () {
        return _default;
    },
    get extractSecurityContext () {
        return extractSecurityContext;
    },
    get securityLog () {
        return securityLog;
    }
});
function extractSecurityContext(request, additionalContext = {}) {
    const url = new URL(request.url);
    // Extraer IP de headers
    const forwarded = request.headers.get('x-forwarded-for');
    const ip = forwarded ? forwarded.split(',')[0].trim() : request.headers.get('x-real-ip') || 'unknown';
    // Generar request ID único
    const requestId = request.headers.get('x-request-id') || `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    return {
        ip,
        userAgent: request.headers.get('user-agent') || 'unknown',
        endpoint: url.pathname,
        method: request.method,
        timestamp: new Date().toISOString(),
        requestId,
        ...additionalContext
    };
}
// ===================================
// IMPLEMENTACIÓN DEL LOGGER
// ===================================
class SecurityLoggerImpl {
    formatLogEntry(event) {
        const logEntry = {
            timestamp: event.context.timestamp,
            level: this.mapSeverityToLevel(event.severity),
            type: 'SECURITY',
            event_type: event.type,
            severity: event.severity,
            message: event.message,
            context: event.context,
            metadata: event.metadata,
            error: event.error ? {
                name: event.error.name,
                message: event.error.message,
                stack: event.error.stack
            } : undefined
        };
        return JSON.stringify(logEntry, null, process.env.NODE_ENV === 'development' ? 2 : 0);
    }
    mapSeverityToLevel(severity) {
        switch(severity){
            case 'low':
                return 'info';
            case 'medium':
                return 'warn';
            case 'high':
                return 'error';
            case 'critical':
                return 'error';
            default:
                return 'info';
        }
    }
    shouldLog(severity) {
        const logLevel = process.env.SECURITY_LOG_LEVEL || 'medium';
        const levels = {
            low: 1,
            medium: 2,
            high: 3,
            critical: 4
        };
        const currentLevel = levels[logLevel] || 2;
        const eventLevel = levels[severity];
        return eventLevel >= currentLevel;
    }
    log(event) {
        if (!this.shouldLog(event.severity)) {
            return;
        }
        const logEntry = this.formatLogEntry(event);
        // En desarrollo, usar console con colores
        if (process.env.NODE_ENV === 'development') {
            const colors = {
                low: '\x1b[36m',
                medium: '\x1b[33m',
                high: '\x1b[31m',
                critical: '\x1b[35m'
            };
            const reset = '\x1b[0m';
            const color = colors[event.severity];
            console.log(`${color}[SECURITY:${event.type.toUpperCase()}]${reset}`, logEntry);
        } else {
            // En producción, usar console.log estándar para integración con sistemas de logging
            console.log(logEntry);
        }
    // TODO: Integrar con servicio de logging externo (DataDog, LogRocket, etc.)
    // await this.sendToExternalLogger(logEntry);
    }
    logAuthAttempt(context, success, metadata) {
        this.log({
            type: success ? 'auth_success' : 'auth_failure',
            severity: success ? 'low' : 'medium',
            message: success ? `Authentication successful for ${context.userId || 'unknown user'}` : `Authentication failed for ${context.userId || 'unknown user'}`,
            context,
            metadata: {
                success,
                ...metadata
            }
        });
    }
    logRateLimitExceeded(context, metadata) {
        this.log({
            type: 'rate_limit_exceeded',
            severity: 'medium',
            message: `Rate limit exceeded for ${context.endpoint}`,
            context,
            metadata: {
                endpoint: context.endpoint,
                ip: context.ip,
                ...metadata
            }
        });
    }
    logPermissionDenied(context, resource, action) {
        this.log({
            type: 'permission_denied',
            severity: 'high',
            message: `Permission denied: ${action} on ${resource}`,
            context,
            metadata: {
                resource,
                action,
                userId: context.userId
            }
        });
    }
    logSuspiciousActivity(context, reason, metadata) {
        this.log({
            type: 'suspicious_activity',
            severity: 'high',
            message: `Suspicious activity detected: ${reason}`,
            context,
            metadata: {
                reason,
                ...metadata
            }
        });
    }
    logAdminAction(context, action, metadata) {
        this.log({
            type: 'admin_action',
            severity: 'medium',
            message: `Admin action performed: ${action}`,
            context,
            metadata: {
                action,
                adminUserId: context.userId,
                ...metadata
            }
        });
    }
    logApiError(context, error, metadata) {
        this.log({
            type: 'api_error',
            severity: 'medium',
            message: `API error in ${context.endpoint}: ${error.message}`,
            context,
            error,
            metadata
        });
    }
}
// ===================================
// INSTANCIA GLOBAL Y FACTORY
// ===================================
const globalSecurityLogger = new SecurityLoggerImpl();
function createSecurityLogger(request, additionalContext) {
    const context = request ? extractSecurityContext(request, additionalContext) : {
        endpoint: 'unknown',
        method: 'unknown',
        timestamp: new Date().toISOString(),
        ...additionalContext
    };
    return {
        context,
        log: globalSecurityLogger.log.bind(globalSecurityLogger),
        logAuthAttempt: (ctx, success, metadata)=>globalSecurityLogger.logAuthAttempt({
                ...context,
                ...ctx
            }, success, metadata),
        logRateLimitExceeded: (ctx, metadata)=>globalSecurityLogger.logRateLimitExceeded({
                ...context,
                ...ctx
            }, metadata),
        logPermissionDenied: (ctx, resource, action)=>globalSecurityLogger.logPermissionDenied({
                ...context,
                ...ctx
            }, resource, action),
        logSuspiciousActivity: (ctx, reason, metadata)=>globalSecurityLogger.logSuspiciousActivity({
                ...context,
                ...ctx
            }, reason, metadata),
        logAdminAction: (ctx, action, metadata)=>globalSecurityLogger.logAdminAction({
                ...context,
                ...ctx
            }, action, metadata),
        logApiError: (ctx, error, metadata)=>globalSecurityLogger.logApiError({
                ...context,
                ...ctx
            }, error, metadata)
    };
}
const securityLog = {
    info: (message, context = {})=>{
        globalSecurityLogger.log({
            type: 'security_scan',
            severity: 'low',
            message,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    },
    warn: (message, context = {})=>{
        globalSecurityLogger.log({
            type: 'suspicious_activity',
            severity: 'medium',
            message,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    },
    error: (message, error, context = {})=>{
        globalSecurityLogger.log({
            type: 'api_error',
            severity: 'high',
            message,
            error,
            context: {
                endpoint: 'system',
                method: 'SYSTEM',
                timestamp: new Date().toISOString(),
                ...context
            }
        });
    }
};
const _default = globalSecurityLogger;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxsb2dnaW5nXFxzZWN1cml0eS1sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUElOVEVZQSBFLUNPTU1FUkNFIC0gTE9HR0lORyBFU1RSVUNUVVJBRE8gREUgU0VHVVJJREFEXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFNpc3RlbWEgZGUgbG9nZ2luZyBlc3RydWN0dXJhZG8gcGFyYSBldmVudG9zIGRlIHNlZ3VyaWRhZFxyXG4vLyBjb24gY29udGV4dG8gZW5yaXF1ZWNpZG8geSBmb3JtYXRvIGNvbnNpc3RlbnRlXHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TIFkgSU5URVJGQUNFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUxvZ0NvbnRleHQge1xyXG4gIHVzZXJJZD86IHN0cmluZztcclxuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XHJcbiAgaXA/OiBzdHJpbmc7XHJcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xyXG4gIGVuZHBvaW50OiBzdHJpbmc7XHJcbiAgbWV0aG9kOiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbiAgcmVxdWVzdElkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyaXR5RXZlbnQge1xyXG4gIHR5cGU6IFNlY3VyaXR5RXZlbnRUeXBlO1xyXG4gIHNldmVyaXR5OiBTZWN1cml0eVNldmVyaXR5O1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQ7XHJcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gIGVycm9yPzogRXJyb3I7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNlY3VyaXR5RXZlbnRUeXBlID0gXHJcbiAgfCAnYXV0aF9hdHRlbXB0J1xyXG4gIHwgJ2F1dGhfc3VjY2VzcydcclxuICB8ICdhdXRoX2ZhaWx1cmUnXHJcbiAgfCAncmF0ZV9saW1pdF9leGNlZWRlZCdcclxuICB8ICdwZXJtaXNzaW9uX2RlbmllZCdcclxuICB8ICdzdXNwaWNpb3VzX2FjdGl2aXR5J1xyXG4gIHwgJ2RhdGFfYWNjZXNzJ1xyXG4gIHwgJ2FkbWluX2FjdGlvbidcclxuICB8ICdhcGlfZXJyb3InXHJcbiAgfCAndmFsaWRhdGlvbl9lcnJvcidcclxuICB8ICdzZWN1cml0eV9zY2FuJ1xyXG4gIHwgJ3VuYXV0aG9yaXplZF9hY2Nlc3MnO1xyXG5cclxuZXhwb3J0IHR5cGUgU2VjdXJpdHlTZXZlcml0eSA9ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUxvZ2dlciB7XHJcbiAgbG9nKGV2ZW50OiBTZWN1cml0eUV2ZW50KTogdm9pZDtcclxuICBsb2dBdXRoQXR0ZW1wdChjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsIHN1Y2Nlc3M6IGJvb2xlYW4sIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQ7XHJcbiAgbG9nUmF0ZUxpbWl0RXhjZWVkZWQoY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkO1xyXG4gIGxvZ1Blcm1pc3Npb25EZW5pZWQoY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCByZXNvdXJjZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZyk6IHZvaWQ7XHJcbiAgbG9nU3VzcGljaW91c0FjdGl2aXR5KGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgcmVhc29uOiBzdHJpbmcsIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQ7XHJcbiAgbG9nQWRtaW5BY3Rpb24oY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBhY3Rpb246IHN0cmluZywgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZDtcclxuICBsb2dBcGlFcnJvcihjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsIGVycm9yOiBFcnJvciwgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZDtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRVhUUkFDVE9SIERFIENPTlRFWFRPIERFIFJFUVVFU1RcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0U2VjdXJpdHlDb250ZXh0KFxyXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxyXG4gIGFkZGl0aW9uYWxDb250ZXh0OiBQYXJ0aWFsPFNlY3VyaXR5TG9nQ29udGV4dD4gPSB7fVxyXG4pOiBTZWN1cml0eUxvZ0NvbnRleHQge1xyXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gIFxyXG4gIC8vIEV4dHJhZXIgSVAgZGUgaGVhZGVyc1xyXG4gIGNvbnN0IGZvcndhcmRlZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpO1xyXG4gIGNvbnN0IGlwID0gZm9yd2FyZGVkIFxyXG4gICAgPyBmb3J3YXJkZWQuc3BsaXQoJywnKVswXS50cmltKCkgXHJcbiAgICA6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpIHx8ICd1bmtub3duJztcclxuICBcclxuICAvLyBHZW5lcmFyIHJlcXVlc3QgSUQgw7puaWNvXHJcbiAgY29uc3QgcmVxdWVzdElkID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZXF1ZXN0LWlkJykgfHwgXHJcbiAgICBgcmVxXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgaXAsXHJcbiAgICB1c2VyQWdlbnQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bicsXHJcbiAgICBlbmRwb2ludDogdXJsLnBhdGhuYW1lLFxyXG4gICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgcmVxdWVzdElkLFxyXG4gICAgLi4uYWRkaXRpb25hbENvbnRleHQsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSU1QTEVNRU5UQUNJw5NOIERFTCBMT0dHRVJcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNsYXNzIFNlY3VyaXR5TG9nZ2VySW1wbCBpbXBsZW1lbnRzIFNlY3VyaXR5TG9nZ2VyIHtcclxuICBwcml2YXRlIGZvcm1hdExvZ0VudHJ5KGV2ZW50OiBTZWN1cml0eUV2ZW50KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xyXG4gICAgICB0aW1lc3RhbXA6IGV2ZW50LmNvbnRleHQudGltZXN0YW1wLFxyXG4gICAgICBsZXZlbDogdGhpcy5tYXBTZXZlcml0eVRvTGV2ZWwoZXZlbnQuc2V2ZXJpdHkpLFxyXG4gICAgICB0eXBlOiAnU0VDVVJJVFknLFxyXG4gICAgICBldmVudF90eXBlOiBldmVudC50eXBlLFxyXG4gICAgICBzZXZlcml0eTogZXZlbnQuc2V2ZXJpdHksXHJcbiAgICAgIG1lc3NhZ2U6IGV2ZW50Lm1lc3NhZ2UsXHJcbiAgICAgIGNvbnRleHQ6IGV2ZW50LmNvbnRleHQsXHJcbiAgICAgIG1ldGFkYXRhOiBldmVudC5tZXRhZGF0YSxcclxuICAgICAgZXJyb3I6IGV2ZW50LmVycm9yID8ge1xyXG4gICAgICAgIG5hbWU6IGV2ZW50LmVycm9yLm5hbWUsXHJcbiAgICAgICAgbWVzc2FnZTogZXZlbnQuZXJyb3IubWVzc2FnZSxcclxuICAgICAgICBzdGFjazogZXZlbnQuZXJyb3Iuc3RhY2ssXHJcbiAgICAgIH0gOiB1bmRlZmluZWQsXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobG9nRW50cnksIG51bGwsIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gMiA6IDApO1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIG1hcFNldmVyaXR5VG9MZXZlbChzZXZlcml0eTogU2VjdXJpdHlTZXZlcml0eSk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKHNldmVyaXR5KSB7XHJcbiAgICAgIGNhc2UgJ2xvdyc6IHJldHVybiAnaW5mbyc7XHJcbiAgICAgIGNhc2UgJ21lZGl1bSc6IHJldHVybiAnd2Fybic7XHJcbiAgICAgIGNhc2UgJ2hpZ2gnOiByZXR1cm4gJ2Vycm9yJztcclxuICAgICAgY2FzZSAnY3JpdGljYWwnOiByZXR1cm4gJ2Vycm9yJztcclxuICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBzaG91bGRMb2coc2V2ZXJpdHk6IFNlY3VyaXR5U2V2ZXJpdHkpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGxvZ0xldmVsID0gcHJvY2Vzcy5lbnYuU0VDVVJJVFlfTE9HX0xFVkVMIHx8ICdtZWRpdW0nO1xyXG4gICAgXHJcbiAgICBjb25zdCBsZXZlbHMgPSB7IGxvdzogMSwgbWVkaXVtOiAyLCBoaWdoOiAzLCBjcml0aWNhbDogNCB9O1xyXG4gICAgY29uc3QgY3VycmVudExldmVsID0gbGV2ZWxzW2xvZ0xldmVsIGFzIFNlY3VyaXR5U2V2ZXJpdHldIHx8IDI7XHJcbiAgICBjb25zdCBldmVudExldmVsID0gbGV2ZWxzW3NldmVyaXR5XTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGV2ZW50TGV2ZWwgPj0gY3VycmVudExldmVsO1xyXG4gIH1cclxuICBcclxuICBsb2coZXZlbnQ6IFNlY3VyaXR5RXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zaG91bGRMb2coZXZlbnQuc2V2ZXJpdHkpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgbG9nRW50cnkgPSB0aGlzLmZvcm1hdExvZ0VudHJ5KGV2ZW50KTtcclxuICAgIFxyXG4gICAgLy8gRW4gZGVzYXJyb2xsbywgdXNhciBjb25zb2xlIGNvbiBjb2xvcmVzXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc3QgY29sb3JzID0ge1xyXG4gICAgICAgIGxvdzogJ1xceDFiWzM2bScsICAgICAgLy8gY3lhblxyXG4gICAgICAgIG1lZGl1bTogJ1xceDFiWzMzbScsICAgLy8geWVsbG93XHJcbiAgICAgICAgaGlnaDogJ1xceDFiWzMxbScsICAgICAvLyByZWRcclxuICAgICAgICBjcml0aWNhbDogJ1xceDFiWzM1bScsIC8vIG1hZ2VudGFcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc2V0ID0gJ1xceDFiWzBtJztcclxuICAgICAgY29uc3QgY29sb3IgPSBjb2xvcnNbZXZlbnQuc2V2ZXJpdHldO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYCR7Y29sb3J9W1NFQ1VSSVRZOiR7ZXZlbnQudHlwZS50b1VwcGVyQ2FzZSgpfV0ke3Jlc2V0fWAsIGxvZ0VudHJ5KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEVuIHByb2R1Y2Npw7NuLCB1c2FyIGNvbnNvbGUubG9nIGVzdMOhbmRhciBwYXJhIGludGVncmFjacOzbiBjb24gc2lzdGVtYXMgZGUgbG9nZ2luZ1xyXG4gICAgICBjb25zb2xlLmxvZyhsb2dFbnRyeSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFRPRE86IEludGVncmFyIGNvbiBzZXJ2aWNpbyBkZSBsb2dnaW5nIGV4dGVybm8gKERhdGFEb2csIExvZ1JvY2tldCwgZXRjLilcclxuICAgIC8vIGF3YWl0IHRoaXMuc2VuZFRvRXh0ZXJuYWxMb2dnZXIobG9nRW50cnkpO1xyXG4gIH1cclxuICBcclxuICBsb2dBdXRoQXR0ZW1wdChcclxuICAgIGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgXHJcbiAgICBzdWNjZXNzOiBib29sZWFuLCBcclxuICAgIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2coe1xyXG4gICAgICB0eXBlOiBzdWNjZXNzID8gJ2F1dGhfc3VjY2VzcycgOiAnYXV0aF9mYWlsdXJlJyxcclxuICAgICAgc2V2ZXJpdHk6IHN1Y2Nlc3MgPyAnbG93JyA6ICdtZWRpdW0nLFxyXG4gICAgICBtZXNzYWdlOiBzdWNjZXNzIFxyXG4gICAgICAgID8gYEF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICR7Y29udGV4dC51c2VySWQgfHwgJ3Vua25vd24gdXNlcid9YCBcclxuICAgICAgICA6IGBBdXRoZW50aWNhdGlvbiBmYWlsZWQgZm9yICR7Y29udGV4dC51c2VySWQgfHwgJ3Vua25vd24gdXNlcid9YCxcclxuICAgICAgY29udGV4dCxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBzdWNjZXNzLFxyXG4gICAgICAgIC4uLm1ldGFkYXRhLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGxvZ1JhdGVMaW1pdEV4Y2VlZGVkKFxyXG4gICAgY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBcclxuICAgIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2coe1xyXG4gICAgICB0eXBlOiAncmF0ZV9saW1pdF9leGNlZWRlZCcsXHJcbiAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcclxuICAgICAgbWVzc2FnZTogYFJhdGUgbGltaXQgZXhjZWVkZWQgZm9yICR7Y29udGV4dC5lbmRwb2ludH1gLFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIGVuZHBvaW50OiBjb250ZXh0LmVuZHBvaW50LFxyXG4gICAgICAgIGlwOiBjb250ZXh0LmlwLFxyXG4gICAgICAgIC4uLm1ldGFkYXRhLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGxvZ1Blcm1pc3Npb25EZW5pZWQoXHJcbiAgICBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQsIFxyXG4gICAgcmVzb3VyY2U6IHN0cmluZywgXHJcbiAgICBhY3Rpb246IHN0cmluZ1xyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2coe1xyXG4gICAgICB0eXBlOiAncGVybWlzc2lvbl9kZW5pZWQnLFxyXG4gICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICBtZXNzYWdlOiBgUGVybWlzc2lvbiBkZW5pZWQ6ICR7YWN0aW9ufSBvbiAke3Jlc291cmNlfWAsXHJcbiAgICAgIGNvbnRleHQsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgcmVzb3VyY2UsXHJcbiAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgIHVzZXJJZDogY29udGV4dC51c2VySWQsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgbG9nU3VzcGljaW91c0FjdGl2aXR5KFxyXG4gICAgY29udGV4dDogU2VjdXJpdHlMb2dDb250ZXh0LCBcclxuICAgIHJlYXNvbjogc3RyaW5nLCBcclxuICAgIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2coe1xyXG4gICAgICB0eXBlOiAnc3VzcGljaW91c19hY3Rpdml0eScsXHJcbiAgICAgIHNldmVyaXR5OiAnaGlnaCcsXHJcbiAgICAgIG1lc3NhZ2U6IGBTdXNwaWNpb3VzIGFjdGl2aXR5IGRldGVjdGVkOiAke3JlYXNvbn1gLFxyXG4gICAgICBjb250ZXh0LFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHJlYXNvbixcclxuICAgICAgICAuLi5tZXRhZGF0YSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBsb2dBZG1pbkFjdGlvbihcclxuICAgIGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgXHJcbiAgICBhY3Rpb246IHN0cmluZywgXHJcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuICApOiB2b2lkIHtcclxuICAgIHRoaXMubG9nKHtcclxuICAgICAgdHlwZTogJ2FkbWluX2FjdGlvbicsXHJcbiAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcclxuICAgICAgbWVzc2FnZTogYEFkbWluIGFjdGlvbiBwZXJmb3JtZWQ6ICR7YWN0aW9ufWAsXHJcbiAgICAgIGNvbnRleHQsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgIGFkbWluVXNlcklkOiBjb250ZXh0LnVzZXJJZCxcclxuICAgICAgICAuLi5tZXRhZGF0YSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBsb2dBcGlFcnJvcihcclxuICAgIGNvbnRleHQ6IFNlY3VyaXR5TG9nQ29udGV4dCwgXHJcbiAgICBlcnJvcjogRXJyb3IsIFxyXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbiAgKTogdm9pZCB7XHJcbiAgICB0aGlzLmxvZyh7XHJcbiAgICAgIHR5cGU6ICdhcGlfZXJyb3InLFxyXG4gICAgICBzZXZlcml0eTogJ21lZGl1bScsXHJcbiAgICAgIG1lc3NhZ2U6IGBBUEkgZXJyb3IgaW4gJHtjb250ZXh0LmVuZHBvaW50fTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgIGNvbnRleHQsXHJcbiAgICAgIGVycm9yLFxyXG4gICAgICBtZXRhZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSU5TVEFOQ0lBIEdMT0JBTCBZIEZBQ1RPUllcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNvbnN0IGdsb2JhbFNlY3VyaXR5TG9nZ2VyID0gbmV3IFNlY3VyaXR5TG9nZ2VySW1wbCgpO1xyXG5cclxuLyoqXHJcbiAqIENyZWEgdW4gbG9nZ2VyIGRlIHNlZ3VyaWRhZCBjb24gY29udGV4dG8gcHJlLWNvbmZpZ3VyYWRvXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VjdXJpdHlMb2dnZXIoXHJcbiAgcmVxdWVzdD86IE5leHRSZXF1ZXN0LFxyXG4gIGFkZGl0aW9uYWxDb250ZXh0PzogUGFydGlhbDxTZWN1cml0eUxvZ0NvbnRleHQ+XHJcbik6IFNlY3VyaXR5TG9nZ2VyICYgeyBjb250ZXh0OiBTZWN1cml0eUxvZ0NvbnRleHQgfSB7XHJcbiAgY29uc3QgY29udGV4dCA9IHJlcXVlc3QgXHJcbiAgICA/IGV4dHJhY3RTZWN1cml0eUNvbnRleHQocmVxdWVzdCwgYWRkaXRpb25hbENvbnRleHQpXHJcbiAgICA6IHtcclxuICAgICAgICBlbmRwb2ludDogJ3Vua25vd24nLFxyXG4gICAgICAgIG1ldGhvZDogJ3Vua25vd24nLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIC4uLmFkZGl0aW9uYWxDb250ZXh0LFxyXG4gICAgICB9IGFzIFNlY3VyaXR5TG9nQ29udGV4dDtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgY29udGV4dCxcclxuICAgIGxvZzogZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nLmJpbmQoZ2xvYmFsU2VjdXJpdHlMb2dnZXIpLFxyXG4gICAgbG9nQXV0aEF0dGVtcHQ6IChjdHgsIHN1Y2Nlc3MsIG1ldGFkYXRhKSA9PiBcclxuICAgICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nQXV0aEF0dGVtcHQoeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgc3VjY2VzcywgbWV0YWRhdGEpLFxyXG4gICAgbG9nUmF0ZUxpbWl0RXhjZWVkZWQ6IChjdHgsIG1ldGFkYXRhKSA9PiBcclxuICAgICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nUmF0ZUxpbWl0RXhjZWVkZWQoeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgbWV0YWRhdGEpLFxyXG4gICAgbG9nUGVybWlzc2lvbkRlbmllZDogKGN0eCwgcmVzb3VyY2UsIGFjdGlvbikgPT4gXHJcbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ1Blcm1pc3Npb25EZW5pZWQoeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgcmVzb3VyY2UsIGFjdGlvbiksXHJcbiAgICBsb2dTdXNwaWNpb3VzQWN0aXZpdHk6IChjdHgsIHJlYXNvbiwgbWV0YWRhdGEpID0+IFxyXG4gICAgICBnbG9iYWxTZWN1cml0eUxvZ2dlci5sb2dTdXNwaWNpb3VzQWN0aXZpdHkoeyAuLi5jb250ZXh0LCAuLi5jdHggfSwgcmVhc29uLCBtZXRhZGF0YSksXHJcbiAgICBsb2dBZG1pbkFjdGlvbjogKGN0eCwgYWN0aW9uLCBtZXRhZGF0YSkgPT4gXHJcbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ0FkbWluQWN0aW9uKHsgLi4uY29udGV4dCwgLi4uY3R4IH0sIGFjdGlvbiwgbWV0YWRhdGEpLFxyXG4gICAgbG9nQXBpRXJyb3I6IChjdHgsIGVycm9yLCBtZXRhZGF0YSkgPT4gXHJcbiAgICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZ0FwaUVycm9yKHsgLi4uY29udGV4dCwgLi4uY3R4IH0sIGVycm9yLCBtZXRhZGF0YSksXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSEVMUEVSUyBZIFVUSUxJREFERVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgcGFyYSBsb2dnaW5nIHLDoXBpZG8gZGUgZXZlbnRvcyBkZSBzZWd1cmlkYWRcclxuICovXHJcbmV4cG9ydCBjb25zdCBzZWN1cml0eUxvZyA9IHtcclxuICBpbmZvOiAobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0OiBQYXJ0aWFsPFNlY3VyaXR5TG9nQ29udGV4dD4gPSB7fSkgPT4ge1xyXG4gICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nKHtcclxuICAgICAgdHlwZTogJ3NlY3VyaXR5X3NjYW4nLFxyXG4gICAgICBzZXZlcml0eTogJ2xvdycsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICBlbmRwb2ludDogJ3N5c3RlbScsXHJcbiAgICAgICAgbWV0aG9kOiAnU1lTVEVNJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBcclxuICB3YXJuOiAobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0OiBQYXJ0aWFsPFNlY3VyaXR5TG9nQ29udGV4dD4gPSB7fSkgPT4ge1xyXG4gICAgZ2xvYmFsU2VjdXJpdHlMb2dnZXIubG9nKHtcclxuICAgICAgdHlwZTogJ3N1c3BpY2lvdXNfYWN0aXZpdHknLFxyXG4gICAgICBzZXZlcml0eTogJ21lZGl1bScsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICBlbmRwb2ludDogJ3N5c3RlbScsXHJcbiAgICAgICAgbWV0aG9kOiAnU1lTVEVNJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBcclxuICBlcnJvcjogKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBFcnJvciwgY29udGV4dDogUGFydGlhbDxTZWN1cml0eUxvZ0NvbnRleHQ+ID0ge30pID0+IHtcclxuICAgIGdsb2JhbFNlY3VyaXR5TG9nZ2VyLmxvZyh7XHJcbiAgICAgIHR5cGU6ICdhcGlfZXJyb3InLFxyXG4gICAgICBzZXZlcml0eTogJ2hpZ2gnLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICBlcnJvcixcclxuICAgICAgY29udGV4dDoge1xyXG4gICAgICAgIGVuZHBvaW50OiAnc3lzdGVtJyxcclxuICAgICAgICBtZXRob2Q6ICdTWVNURU0nLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIC4uLmNvbnRleHQsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsU2VjdXJpdHlMb2dnZXI7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVTZWN1cml0eUxvZ2dlciIsImV4dHJhY3RTZWN1cml0eUNvbnRleHQiLCJzZWN1cml0eUxvZyIsInJlcXVlc3QiLCJhZGRpdGlvbmFsQ29udGV4dCIsInVybCIsIlVSTCIsImZvcndhcmRlZCIsImhlYWRlcnMiLCJnZXQiLCJpcCIsInNwbGl0IiwidHJpbSIsInJlcXVlc3RJZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJ1c2VyQWdlbnQiLCJlbmRwb2ludCIsInBhdGhuYW1lIiwibWV0aG9kIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJTZWN1cml0eUxvZ2dlckltcGwiLCJmb3JtYXRMb2dFbnRyeSIsImV2ZW50IiwibG9nRW50cnkiLCJjb250ZXh0IiwibGV2ZWwiLCJtYXBTZXZlcml0eVRvTGV2ZWwiLCJzZXZlcml0eSIsInR5cGUiLCJldmVudF90eXBlIiwibWVzc2FnZSIsIm1ldGFkYXRhIiwiZXJyb3IiLCJuYW1lIiwic3RhY2siLCJ1bmRlZmluZWQiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2hvdWxkTG9nIiwibG9nTGV2ZWwiLCJTRUNVUklUWV9MT0dfTEVWRUwiLCJsZXZlbHMiLCJsb3ciLCJtZWRpdW0iLCJoaWdoIiwiY3JpdGljYWwiLCJjdXJyZW50TGV2ZWwiLCJldmVudExldmVsIiwibG9nIiwiY29sb3JzIiwicmVzZXQiLCJjb2xvciIsImNvbnNvbGUiLCJ0b1VwcGVyQ2FzZSIsImxvZ0F1dGhBdHRlbXB0Iiwic3VjY2VzcyIsInVzZXJJZCIsImxvZ1JhdGVMaW1pdEV4Y2VlZGVkIiwibG9nUGVybWlzc2lvbkRlbmllZCIsInJlc291cmNlIiwiYWN0aW9uIiwibG9nU3VzcGljaW91c0FjdGl2aXR5IiwicmVhc29uIiwibG9nQWRtaW5BY3Rpb24iLCJhZG1pblVzZXJJZCIsImxvZ0FwaUVycm9yIiwiZ2xvYmFsU2VjdXJpdHlMb2dnZXIiLCJiaW5kIiwiY3R4IiwiaW5mbyIsIndhcm4iXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0Qyx5REFBeUQ7QUFDekQsc0NBQXNDO0FBQ3RDLDREQUE0RDtBQUM1RCxpREFBaUQ7Ozs7Ozs7Ozs7OztRQWlSakNBO2VBQUFBOztRQW1GaEI7ZUFBQTs7UUExU2dCQztlQUFBQTs7UUE2UEhDO2VBQUFBOzs7QUE3UE4sU0FBU0QsdUJBQ2RFLE9BQW9CLEVBQ3BCQyxvQkFBaUQsQ0FBQyxDQUFDO0lBRW5ELE1BQU1DLE1BQU0sSUFBSUMsSUFBSUgsUUFBUUUsR0FBRztJQUUvQix3QkFBd0I7SUFDeEIsTUFBTUUsWUFBWUos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