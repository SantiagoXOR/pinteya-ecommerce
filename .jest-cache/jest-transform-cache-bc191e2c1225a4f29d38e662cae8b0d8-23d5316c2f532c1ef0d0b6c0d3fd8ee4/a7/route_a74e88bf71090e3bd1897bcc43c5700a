c8dfd3e1d273ffbe24d2876707d78a1a
// Configuración para Node.js Runtime
"use strict";

/* istanbul ignore next */
function cov_25wkcbcvbx() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\monitoring\\route.ts";
  var hash = "eafbd2a1a6999b88039dff0dd421199f58c3e4bf";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\monitoring\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "2": {
        start: {
          line: 7,
          column: 24
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "3": {
        start: {
          line: 12,
          column: 0
        },
        end: {
          line: 22,
          column: 3
        }
      },
      "4": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 19
        }
      },
      "5": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 20
        }
      },
      "6": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 23
        }
      },
      "7": {
        start: {
          line: 23,
          column: 16
        },
        end: {
          line: 23,
          column: 38
        }
      },
      "8": {
        start: {
          line: 24,
          column: 27
        },
        end: {
          line: 24,
          column: 78
        }
      },
      "9": {
        start: {
          line: 25,
          column: 25
        },
        end: {
          line: 25,
          column: 79
        }
      },
      "10": {
        start: {
          line: 26,
          column: 16
        },
        end: {
          line: 26,
          column: 24
        }
      },
      "11": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 114,
          column: 5
        }
      },
      "12": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 35,
          column: 11
        }
      },
      "13": {
        start: {
          line: 37,
          column: 27
        },
        end: {
          line: 37,
          column: 82
        }
      },
      "14": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 50,
          column: 9
        }
      },
      "15": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 42,
          column: 15
        }
      },
      "16": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 49,
          column: 15
        }
      },
      "17": {
        start: {
          line: 51,
          column: 25
        },
        end: {
          line: 51,
          column: 35
        }
      },
      "18": {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 55,
          column: 11
        }
      },
      "19": {
        start: {
          line: 57,
          column: 20
        },
        end: {
          line: 57,
          column: 40
        }
      },
      "20": {
        start: {
          line: 58,
          column: 26
        },
        end: {
          line: 58,
          column: 68
        }
      },
      "21": {
        start: {
          line: 59,
          column: 30
        },
        end: {
          line: 59,
          column: 72
        }
      },
      "22": {
        start: {
          line: 61,
          column: 35
        },
        end: {
          line: 61,
          column: 95
        }
      },
      "23": {
        start: {
          line: 63,
          column: 27
        },
        end: {
          line: 63,
          column: 31
        }
      },
      "24": {
        start: {
          line: 64,
          column: 8
        },
        end: {
          line: 66,
          column: 9
        }
      },
      "25": {
        start: {
          line: 65,
          column: 12
        },
        end: {
          line: 65,
          column: 73
        }
      },
      "26": {
        start: {
          line: 68,
          column: 20
        },
        end: {
          line: 68,
          column: 30
        }
      },
      "27": {
        start: {
          line: 69,
          column: 29
        },
        end: {
          line: 74,
          column: 9
        }
      },
      "28": {
        start: {
          line: 75,
          column: 25
        },
        end: {
          line: 93,
          column: 9
        }
      },
      "29": {
        start: {
          line: 94,
          column: 8
        },
        end: {
          line: 100,
          column: 11
        }
      },
      "30": {
        start: {
          line: 101,
          column: 8
        },
        end: {
          line: 101,
          column: 51
        }
      },
      "31": {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 106,
          column: 11
        }
      },
      "32": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 113,
          column: 11
        }
      },
      "33": {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 244,
          column: 5
        }
      },
      "34": {
        start: {
          line: 122,
          column: 27
        },
        end: {
          line: 122,
          column: 82
        }
      },
      "35": {
        start: {
          line: 123,
          column: 8
        },
        end: {
          line: 129,
          column: 9
        }
      },
      "36": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 128,
          column: 15
        }
      },
      "37": {
        start: {
          line: 130,
          column: 35
        },
        end: {
          line: 130,
          column: 45
        }
      },
      "38": {
        start: {
          line: 131,
          column: 21
        },
        end: {
          line: 131,
          column: 41
        }
      },
      "39": {
        start: {
          line: 132,
          column: 46
        },
        end: {
          line: 132,
          column: 50
        }
      },
      "40": {
        start: {
          line: 133,
          column: 8
        },
        end: {
          line: 139,
          column: 9
        }
      },
      "41": {
        start: {
          line: 134,
          column: 12
        },
        end: {
          line: 138,
          column: 15
        }
      },
      "42": {
        start: {
          line: 140,
          column: 21
        },
        end: {
          line: 140,
          column: 25
        }
      },
      "43": {
        start: {
          line: 141,
          column: 8
        },
        end: {
          line: 223,
          column: 9
        }
      },
      "44": {
        start: {
          line: 143,
          column: 16
        },
        end: {
          line: 149,
          column: 17
        }
      },
      "45": {
        start: {
          line: 144,
          column: 20
        },
        end: {
          line: 148,
          column: 23
        }
      },
      "46": {
        start: {
          line: 151,
          column: 48
        },
        end: {
          line: 155,
          column: 36
        }
      },
      "47": {
        start: {
          line: 156,
          column: 16
        },
        end: {
          line: 167,
          column: 17
        }
      },
      "48": {
        start: {
          line: 157,
          column: 20
        },
        end: {
          line: 161,
          column: 23
        }
      },
      "49": {
        start: {
          line: 162,
          column: 20
        },
        end: {
          line: 166,
          column: 23
        }
      },
      "50": {
        start: {
          line: 168,
          column: 16
        },
        end: {
          line: 171,
          column: 18
        }
      },
      "51": {
        start: {
          line: 172,
          column: 16
        },
        end: {
          line: 176,
          column: 19
        }
      },
      "52": {
        start: {
          line: 177,
          column: 16
        },
        end: {
          line: 177,
          column: 22
        }
      },
      "53": {
        start: {
          line: 180,
          column: 48
        },
        end: {
          line: 180,
          column: 95
        }
      },
      "54": {
        start: {
          line: 181,
          column: 16
        },
        end: {
          line: 191,
          column: 17
        }
      },
      "55": {
        start: {
          line: 182,
          column: 20
        },
        end: {
          line: 185,
          column: 23
        }
      },
      "56": {
        start: {
          line: 186,
          column: 20
        },
        end: {
          line: 190,
          column: 23
        }
      },
      "57": {
        start: {
          line: 192,
          column: 16
        },
        end: {
          line: 195,
          column: 18
        }
      },
      "58": {
        start: {
          line: 196,
          column: 16
        },
        end: {
          line: 199,
          column: 19
        }
      },
      "59": {
        start: {
          line: 200,
          column: 16
        },
        end: {
          line: 200,
          column: 22
        }
      },
      "60": {
        start: {
          line: 202,
          column: 39
        },
        end: {
          line: 202,
          column: 69
        }
      },
      "61": {
        start: {
          line: 203,
          column: 59
        },
        end: {
          line: 205,
          column: 18
        }
      },
      "62": {
        start: {
          line: 206,
          column: 16
        },
        end: {
          line: 212,
          column: 17
        }
      },
      "63": {
        start: {
          line: 207,
          column: 20
        },
        end: {
          line: 211,
          column: 23
        }
      },
      "64": {
        start: {
          line: 213,
          column: 16
        },
        end: {
          line: 215,
          column: 18
        }
      },
      "65": {
        start: {
          line: 216,
          column: 16
        },
        end: {
          line: 216,
          column: 22
        }
      },
      "66": {
        start: {
          line: 218,
          column: 16
        },
        end: {
          line: 222,
          column: 19
        }
      },
      "67": {
        start: {
          line: 224,
          column: 8
        },
        end: {
          line: 233,
          column: 11
        }
      },
      "68": {
        start: {
          line: 235,
          column: 8
        },
        end: {
          line: 237,
          column: 11
        }
      },
      "69": {
        start: {
          line: 238,
          column: 8
        },
        end: {
          line: 243,
          column: 11
        }
      },
      "70": {
        start: {
          line: 246,
          column: 12
        },
        end: {
          line: 246,
          column: 71
        }
      },
      "71": {
        start: {
          line: 247,
          column: 13
        },
        end: {
          line: 247,
          column: 73
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 6,
            column: 9
          },
          end: {
            line: 6,
            column: 16
          }
        },
        loc: {
          start: {
            line: 6,
            column: 30
          },
          end: {
            line: 11,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 18,
            column: 5
          }
        },
        line: 16
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 19,
            column: 5
          }
        },
        loc: {
          start: {
            line: 19,
            column: 19
          },
          end: {
            line: 21,
            column: 5
          }
        },
        line: 19
      },
      "4": {
        name: "getHandler",
        decl: {
          start: {
            line: 30,
            column: 19
          },
          end: {
            line: 30,
            column: 29
          }
        },
        loc: {
          start: {
            line: 30,
            column: 39
          },
          end: {
            line: 115,
            column: 1
          }
        },
        line: 30
      },
      "5": {
        name: "postHandler",
        decl: {
          start: {
            line: 119,
            column: 19
          },
          end: {
            line: 119,
            column: 30
          }
        },
        loc: {
          start: {
            line: 119,
            column: 40
          },
          end: {
            line: 245,
            column: 1
          }
        },
        line: 119
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 38,
            column: 8
          },
          end: {
            line: 50,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 38,
            column: 8
          },
          end: {
            line: 50,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 38
      },
      "1": {
        loc: {
          start: {
            line: 41,
            column: 20
          },
          end: {
            line: 41,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 41,
            column: 20
          },
          end: {
            line: 41,
            column: 58
          }
        }, {
          start: {
            line: 41,
            column: 62
          },
          end: {
            line: 41,
            column: 71
          }
        }],
        line: 41
      },
      "2": {
        loc: {
          start: {
            line: 48,
            column: 24
          },
          end: {
            line: 48,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 48,
            column: 24
          },
          end: {
            line: 48,
            column: 41
          }
        }, {
          start: {
            line: 48,
            column: 45
          },
          end: {
            line: 48,
            column: 48
          }
        }],
        line: 48
      },
      "3": {
        loc: {
          start: {
            line: 58,
            column: 26
          },
          end: {
            line: 58,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 58,
            column: 26
          },
          end: {
            line: 58,
            column: 59
          }
        }, {
          start: {
            line: 58,
            column: 63
          },
          end: {
            line: 58,
            column: 68
          }
        }],
        line: 58
      },
      "4": {
        loc: {
          start: {
            line: 64,
            column: 8
          },
          end: {
            line: 66,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 64,
            column: 8
          },
          end: {
            line: 66,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 64
      },
      "5": {
        loc: {
          start: {
            line: 98,
            column: 26
          },
          end: {
            line: 98,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 98,
            column: 26
          },
          end: {
            line: 98,
            column: 66
          }
        }, {
          start: {
            line: 98,
            column: 70
          },
          end: {
            line: 98,
            column: 71
          }
        }],
        line: 98
      },
      "6": {
        loc: {
          start: {
            line: 99,
            column: 25
          },
          end: {
            line: 99,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 99,
            column: 25
          },
          end: {
            line: 99,
            column: 45
          }
        }, {
          start: {
            line: 99,
            column: 49
          },
          end: {
            line: 99,
            column: 50
          }
        }],
        line: 99
      },
      "7": {
        loc: {
          start: {
            line: 104,
            column: 19
          },
          end: {
            line: 104,
            column: 75
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 104,
            column: 44
          },
          end: {
            line: 104,
            column: 57
          }
        }, {
          start: {
            line: 104,
            column: 60
          },
          end: {
            line: 104,
            column: 75
          }
        }],
        line: 104
      },
      "8": {
        loc: {
          start: {
            line: 105,
            column: 19
          },
          end: {
            line: 105,
            column: 67
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 105,
            column: 44
          },
          end: {
            line: 105,
            column: 55
          }
        }, {
          start: {
            line: 105,
            column: 58
          },
          end: {
            line: 105,
            column: 67
          }
        }],
        line: 105
      },
      "9": {
        loc: {
          start: {
            line: 123,
            column: 8
          },
          end: {
            line: 129,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 123,
            column: 8
          },
          end: {
            line: 129,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 123
      },
      "10": {
        loc: {
          start: {
            line: 127,
            column: 24
          },
          end: {
            line: 127,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 127,
            column: 24
          },
          end: {
            line: 127,
            column: 41
          }
        }, {
          start: {
            line: 127,
            column: 45
          },
          end: {
            line: 127,
            column: 48
          }
        }],
        line: 127
      },
      "11": {
        loc: {
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 139,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 139,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 133
      },
      "12": {
        loc: {
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 223,
            column: 9
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 142,
            column: 12
          },
          end: {
            line: 177,
            column: 22
          }
        }, {
          start: {
            line: 178,
            column: 12
          },
          end: {
            line: 200,
            column: 22
          }
        }, {
          start: {
            line: 201,
            column: 12
          },
          end: {
            line: 216,
            column: 22
          }
        }, {
          start: {
            line: 217,
            column: 12
          },
          end: {
            line: 222,
            column: 19
          }
        }],
        line: 141
      },
      "13": {
        loc: {
          start: {
            line: 143,
            column: 16
          },
          end: {
            line: 149,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 143,
            column: 16
          },
          end: {
            line: 149,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 143
      },
      "14": {
        loc: {
          start: {
            line: 156,
            column: 16
          },
          end: {
            line: 167,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 156,
            column: 16
          },
          end: {
            line: 167,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 156
      },
      "15": {
        loc: {
          start: {
            line: 181,
            column: 16
          },
          end: {
            line: 191,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 181,
            column: 16
          },
          end: {
            line: 191,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 181
      },
      "16": {
        loc: {
          start: {
            line: 202,
            column: 39
          },
          end: {
            line: 202,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 202,
            column: 39
          },
          end: {
            line: 202,
            column: 63
          }
        }, {
          start: {
            line: 202,
            column: 67
          },
          end: {
            line: 202,
            column: 69
          }
        }],
        line: 202
      },
      "17": {
        loc: {
          start: {
            line: 206,
            column: 16
          },
          end: {
            line: 212,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 206,
            column: 16
          },
          end: {
            line: 212,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 206
      },
      "18": {
        loc: {
          start: {
            line: 214,
            column: 27
          },
          end: {
            line: 214,
            column: 43
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 214,
            column: 27
          },
          end: {
            line: 214,
            column: 35
          }
        }, {
          start: {
            line: 214,
            column: 39
          },
          end: {
            line: 214,
            column: 43
          }
        }],
        line: 214
      },
      "19": {
        loc: {
          start: {
            line: 236,
            column: 19
          },
          end: {
            line: 236,
            column: 75
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 236,
            column: 44
          },
          end: {
            line: 236,
            column: 57
          }
        }, {
          start: {
            line: 236,
            column: 60
          },
          end: {
            line: 236,
            column: 75
          }
        }],
        line: 236
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0, 0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\admin\\monitoring\\route.ts"],
      sourcesContent: ["// Configuraci\xF3n para Node.js Runtime\r\nexport const runtime = 'nodejs';\r\n\r\n/**\r\n * API de monitoreo para panel administrativo\r\n * Proporciona m\xE9tricas de performance y alertas de seguridad\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { requireAdminAuth } from '@/lib/auth/supabase-auth-utils';\r\nimport { \r\n  getPerformanceMetrics, \r\n  getActiveAlerts,\r\n  withPerformanceMonitoring,\r\n  logStructured \r\n} from '@/lib/monitoring/admin-monitoring';\r\n\r\n/**\r\n * GET /api/admin/monitoring\r\n * Obtener m\xE9tricas de monitoreo y alertas\r\n */\r\nasync function getHandler(request: NextRequest) {\r\n  try {\r\n    logStructured('info', 'Admin monitoring API called', {\r\n      endpoint: '/api/admin/monitoring',\r\n      method: 'GET'\r\n    });\r\n\r\n    // Verificar autenticaci\xF3n admin\r\n    const authResult = await requireAdminAuth(request);\r\n\r\n    if (!authResult.success) {\r\n      logStructured('warn', 'Unauthorized access to monitoring API', {\r\n        error: authResult.error,\r\n        ip: request.headers.get('x-forwarded-for') || 'unknown'\r\n      });\r\n\r\n      return NextResponse.json(\r\n        { \r\n          error: authResult.error,\r\n          code: 'AUTH_FAILED',\r\n          timestamp: new Date().toISOString()\r\n        },\r\n        { status: authResult.status || 401 }\r\n      );\r\n    }\r\n\r\n    const { user } = authResult;\r\n    logStructured('info', 'Admin monitoring access granted', {\r\n      userId: user?.id,\r\n      email: user?.email\r\n    });\r\n\r\n    // Obtener par\xE1metros de query\r\n    const url = new URL(request.url);\r\n    const timeframe = url.searchParams.get('timeframe') as '1h' | '24h' | '7d' || '24h';\r\n    const includeAlerts = url.searchParams.get('alerts') !== 'false';\r\n\r\n    // Obtener m\xE9tricas de performance\r\n    const performanceMetrics = await getPerformanceMetrics(timeframe);\r\n\r\n    // Obtener alertas activas si se solicitan\r\n    let activeAlerts = null;\r\n    if (includeAlerts) {\r\n      activeAlerts = await getActiveAlerts();\r\n    }\r\n\r\n    // Calcular estad\xEDsticas adicionales\r\n    const now = new Date();\r\n    const systemStatus = {\r\n      uptime: process.uptime(),\r\n      memory: process.memoryUsage(),\r\n      timestamp: now.toISOString(),\r\n      version: '2.0.0'\r\n    };\r\n\r\n    const response = {\r\n      success: true,\r\n      data: {\r\n        performance: performanceMetrics,\r\n        alerts: activeAlerts,\r\n        system: systemStatus,\r\n        timeframe,\r\n        requestedBy: {\r\n          userId: user?.id,\r\n          email: user?.email,\r\n          timestamp: now.toISOString()\r\n        }\r\n      },\r\n      meta: {\r\n        api: 'admin-monitoring',\r\n        version: '2.0.0',\r\n        timestamp: now.toISOString()\r\n      }\r\n    };\r\n\r\n    logStructured('info', 'Admin monitoring data retrieved successfully', {\r\n      userId: user?.id,\r\n      timeframe,\r\n      alertsIncluded: includeAlerts,\r\n      metricsCount: performanceMetrics?.stats?.totalRequests || 0,\r\n      alertsCount: activeAlerts?.length || 0\r\n    });\r\n\r\n    return NextResponse.json(response);\r\n\r\n  } catch (error) {\r\n    logStructured('error', 'Error in admin monitoring API', {\r\n      error: error instanceof Error ? error.message : 'Unknown error',\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    });\r\n\r\n    return NextResponse.json(\r\n      {\r\n        error: 'Error interno del servidor',\r\n        code: 'INTERNAL_ERROR',\r\n        timestamp: new Date().toISOString()\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/admin/monitoring\r\n * Resolver alertas o ejecutar acciones de monitoreo\r\n */\r\nasync function postHandler(request: NextRequest) {\r\n  try {\r\n    // Verificar autenticaci\xF3n admin\r\n    const authResult = await requireAdminAuth(request);\r\n\r\n    if (!authResult.success) {\r\n      return NextResponse.json(\r\n        { error: authResult.error },\r\n        { status: authResult.status || 401 }\r\n      );\r\n    }\r\n\r\n    const { user, supabase } = authResult;\r\n    const body = await request.json();\r\n\r\n    const { action, alertId, metadata } = body;\r\n\r\n    if (!action) {\r\n      return NextResponse.json(\r\n        { error: 'Acci\xF3n requerida' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    let result = null;\r\n\r\n    switch (action) {\r\n      case 'resolve_alert':\r\n        if (!alertId) {\r\n          return NextResponse.json(\r\n            { error: 'ID de alerta requerido' },\r\n            { status: 400 }\r\n          );\r\n        }\r\n\r\n        // Resolver alerta en base de datos\r\n        const { error: resolveError } = await supabase\r\n          .from('admin_security_alerts')\r\n          .update({\r\n            resolved: true,\r\n            resolved_by: user?.id,\r\n            resolved_at: new Date().toISOString()\r\n          })\r\n          .eq('id', alertId);\r\n\r\n        if (resolveError) {\r\n          logStructured('error', 'Error resolving alert', {\r\n            alertId,\r\n            error: resolveError.message,\r\n            userId: user?.id\r\n          });\r\n\r\n          return NextResponse.json(\r\n            { error: 'Error al resolver alerta' },\r\n            { status: 500 }\r\n          );\r\n        }\r\n\r\n        result = { alertId, resolved: true };\r\n        \r\n        logStructured('info', 'Alert resolved by admin', {\r\n          alertId,\r\n          userId: user?.id,\r\n          email: user?.email\r\n        });\r\n        break;\r\n\r\n      case 'cleanup_metrics':\r\n        // Ejecutar limpieza de m\xE9tricas antiguas\r\n        const { error: cleanupError } = await supabase.rpc('cleanup_old_admin_metrics');\r\n\r\n        if (cleanupError) {\r\n          logStructured('error', 'Error cleaning up metrics', {\r\n            error: cleanupError.message,\r\n            userId: user?.id\r\n          });\r\n\r\n          return NextResponse.json(\r\n            { error: 'Error al limpiar m\xE9tricas' },\r\n            { status: 500 }\r\n          );\r\n        }\r\n\r\n        result = { cleaned: true, timestamp: new Date().toISOString() };\r\n        \r\n        logStructured('info', 'Metrics cleanup executed by admin', {\r\n          userId: user?.id,\r\n          email: user?.email\r\n        });\r\n        break;\r\n\r\n      case 'get_performance_stats':\r\n        const timeframeHours = metadata?.timeframeHours || 24;\r\n        \r\n        const { data: stats, error: statsError } = await supabase\r\n          .rpc('get_admin_performance_stats', { timeframe_hours: timeframeHours });\r\n\r\n        if (statsError) {\r\n          return NextResponse.json(\r\n            { error: 'Error al obtener estad\xEDsticas' },\r\n            { status: 500 }\r\n          );\r\n        }\r\n\r\n        result = { stats: stats[0] || null };\r\n        break;\r\n\r\n      default:\r\n        return NextResponse.json(\r\n          { error: 'Acci\xF3n no v\xE1lida' },\r\n          { status: 400 }\r\n        );\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      action,\r\n      result,\r\n      timestamp: new Date().toISOString(),\r\n      executedBy: {\r\n        userId: user?.id,\r\n        email: user?.email\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    logStructured('error', 'Error in admin monitoring POST', {\r\n      error: error instanceof Error ? error.message : 'Unknown error'\r\n    });\r\n\r\n    return NextResponse.json(\r\n      {\r\n        error: 'Error interno del servidor',\r\n        code: 'INTERNAL_ERROR'\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// Aplicar middleware de monitoreo de performance\r\nexport const GET = withPerformanceMonitoring(getHandler);\r\nexport const POST = withPerformanceMonitoring(postHandler);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["GET", "POST", "runtime", "getHandler", "request", "logStructured", "endpoint", "method", "authResult", "requireAdminAuth", "success", "error", "ip", "headers", "get", "NextResponse", "json", "code", "timestamp", "Date", "toISOString", "status", "user", "userId", "id", "email", "url", "URL", "timeframe", "searchParams", "includeAlerts", "performanceMetrics", "getPerformanceMetrics", "activeAlerts", "getActiveAlerts", "now", "systemStatus", "uptime", "process", "memory", "memoryUsage", "version", "response", "data", "performance", "alerts", "system", "requestedBy", "meta", "api", "alertsIncluded", "metricsCount", "stats", "totalRequests", "alertsCount", "length", "Error", "message", "stack", "undefined", "postHandler", "supabase", "body", "action", "alertId", "metadata", "result", "resolveError", "from", "update", "resolved", "resolved_by", "resolved_at", "eq", "cleanupError", "rpc", "cleaned", "timeframeHours", "statsError", "timeframe_hours", "executedBy", "withPerformanceMonitoring"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "eafbd2a1a6999b88039dff0dd421199f58c3e4bf"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_25wkcbcvbx = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_25wkcbcvbx();
cov_25wkcbcvbx().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_25wkcbcvbx().f[0]++;
  cov_25wkcbcvbx().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_25wkcbcvbx().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_25wkcbcvbx().f[1]++;
    cov_25wkcbcvbx().s[4]++;
    return GET;
  },
  get POST() {
    /* istanbul ignore next */
    cov_25wkcbcvbx().f[2]++;
    cov_25wkcbcvbx().s[5]++;
    return POST;
  },
  get runtime() {
    /* istanbul ignore next */
    cov_25wkcbcvbx().f[3]++;
    cov_25wkcbcvbx().s[6]++;
    return runtime;
  }
});
const _server =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[7]++, require("next/server"));
const _supabaseauthutils =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[8]++, require("../../../../lib/auth/supabase-auth-utils"));
const _adminmonitoring =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[9]++, require("../../../../lib/monitoring/admin-monitoring"));
const runtime =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[10]++, 'nodejs');
/**
 * GET /api/admin/monitoring
 * Obtener métricas de monitoreo y alertas
 */
async function getHandler(request) {
  /* istanbul ignore next */
  cov_25wkcbcvbx().f[4]++;
  cov_25wkcbcvbx().s[11]++;
  try {
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[12]++;
    (0, _adminmonitoring.logStructured)('info', 'Admin monitoring API called', {
      endpoint: '/api/admin/monitoring',
      method: 'GET'
    });
    // Verificar autenticación admin
    const authResult =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[13]++, await (0, _supabaseauthutils.requireAdminAuth)(request));
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[14]++;
    if (!authResult.success) {
      /* istanbul ignore next */
      cov_25wkcbcvbx().b[0][0]++;
      cov_25wkcbcvbx().s[15]++;
      (0, _adminmonitoring.logStructured)('warn', 'Unauthorized access to monitoring API', {
        error: authResult.error,
        ip:
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[1][0]++, request.headers.get('x-forwarded-for')) ||
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[1][1]++, 'unknown')
      });
      /* istanbul ignore next */
      cov_25wkcbcvbx().s[16]++;
      return _server.NextResponse.json({
        error: authResult.error,
        code: 'AUTH_FAILED',
        timestamp: new Date().toISOString()
      }, {
        status:
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[2][0]++, authResult.status) ||
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[2][1]++, 401)
      });
    } else
    /* istanbul ignore next */
    {
      cov_25wkcbcvbx().b[0][1]++;
    }
    const {
      user
    } =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[17]++, authResult);
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[18]++;
    (0, _adminmonitoring.logStructured)('info', 'Admin monitoring access granted', {
      userId: user?.id,
      email: user?.email
    });
    // Obtener parámetros de query
    const url =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[19]++, new URL(request.url));
    const timeframe =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[20]++,
    /* istanbul ignore next */
    (cov_25wkcbcvbx().b[3][0]++, url.searchParams.get('timeframe')) ||
    /* istanbul ignore next */
    (cov_25wkcbcvbx().b[3][1]++, '24h'));
    const includeAlerts =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[21]++, url.searchParams.get('alerts') !== 'false');
    // Obtener métricas de performance
    const performanceMetrics =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[22]++, await (0, _adminmonitoring.getPerformanceMetrics)(timeframe));
    // Obtener alertas activas si se solicitan
    let activeAlerts =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[23]++, null);
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[24]++;
    if (includeAlerts) {
      /* istanbul ignore next */
      cov_25wkcbcvbx().b[4][0]++;
      cov_25wkcbcvbx().s[25]++;
      activeAlerts = await (0, _adminmonitoring.getActiveAlerts)();
    } else
    /* istanbul ignore next */
    {
      cov_25wkcbcvbx().b[4][1]++;
    }
    // Calcular estadísticas adicionales
    const now =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[26]++, new Date());
    const systemStatus =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[27]++, {
      uptime: process.uptime(),
      memory: process.memoryUsage(),
      timestamp: now.toISOString(),
      version: '2.0.0'
    });
    const response =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[28]++, {
      success: true,
      data: {
        performance: performanceMetrics,
        alerts: activeAlerts,
        system: systemStatus,
        timeframe,
        requestedBy: {
          userId: user?.id,
          email: user?.email,
          timestamp: now.toISOString()
        }
      },
      meta: {
        api: 'admin-monitoring',
        version: '2.0.0',
        timestamp: now.toISOString()
      }
    });
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[29]++;
    (0, _adminmonitoring.logStructured)('info', 'Admin monitoring data retrieved successfully', {
      userId: user?.id,
      timeframe,
      alertsIncluded: includeAlerts,
      metricsCount:
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[5][0]++, performanceMetrics?.stats?.totalRequests) ||
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[5][1]++, 0),
      alertsCount:
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[6][0]++, activeAlerts?.length) ||
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[6][1]++, 0)
    });
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[30]++;
    return _server.NextResponse.json(response);
  } catch (error) {
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[31]++;
    (0, _adminmonitoring.logStructured)('error', 'Error in admin monitoring API', {
      error: error instanceof Error ?
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[7][0]++, error.message) :
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[7][1]++, 'Unknown error'),
      stack: error instanceof Error ?
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[8][0]++, error.stack) :
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[8][1]++, undefined)
    });
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[32]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor',
      code: 'INTERNAL_ERROR',
      timestamp: new Date().toISOString()
    }, {
      status: 500
    });
  }
}
/**
 * POST /api/admin/monitoring
 * Resolver alertas o ejecutar acciones de monitoreo
 */
async function postHandler(request) {
  /* istanbul ignore next */
  cov_25wkcbcvbx().f[5]++;
  cov_25wkcbcvbx().s[33]++;
  try {
    // Verificar autenticación admin
    const authResult =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[34]++, await (0, _supabaseauthutils.requireAdminAuth)(request));
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[35]++;
    if (!authResult.success) {
      /* istanbul ignore next */
      cov_25wkcbcvbx().b[9][0]++;
      cov_25wkcbcvbx().s[36]++;
      return _server.NextResponse.json({
        error: authResult.error
      }, {
        status:
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[10][0]++, authResult.status) ||
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[10][1]++, 401)
      });
    } else
    /* istanbul ignore next */
    {
      cov_25wkcbcvbx().b[9][1]++;
    }
    const {
      user,
      supabase
    } =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[37]++, authResult);
    const body =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[38]++, await request.json());
    const {
      action,
      alertId,
      metadata
    } =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[39]++, body);
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[40]++;
    if (!action) {
      /* istanbul ignore next */
      cov_25wkcbcvbx().b[11][0]++;
      cov_25wkcbcvbx().s[41]++;
      return _server.NextResponse.json({
        error: 'Acción requerida'
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_25wkcbcvbx().b[11][1]++;
    }
    let result =
    /* istanbul ignore next */
    (cov_25wkcbcvbx().s[42]++, null);
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[43]++;
    switch (action) {
      case 'resolve_alert':
        /* istanbul ignore next */
        cov_25wkcbcvbx().b[12][0]++;
        cov_25wkcbcvbx().s[44]++;
        if (!alertId) {
          /* istanbul ignore next */
          cov_25wkcbcvbx().b[13][0]++;
          cov_25wkcbcvbx().s[45]++;
          return _server.NextResponse.json({
            error: 'ID de alerta requerido'
          }, {
            status: 400
          });
        } else
        /* istanbul ignore next */
        {
          cov_25wkcbcvbx().b[13][1]++;
        }
        // Resolver alerta en base de datos
        const {
          error: resolveError
        } =
        /* istanbul ignore next */
        (cov_25wkcbcvbx().s[46]++, await supabase.from('admin_security_alerts').update({
          resolved: true,
          resolved_by: user?.id,
          resolved_at: new Date().toISOString()
        }).eq('id', alertId));
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[47]++;
        if (resolveError) {
          /* istanbul ignore next */
          cov_25wkcbcvbx().b[14][0]++;
          cov_25wkcbcvbx().s[48]++;
          (0, _adminmonitoring.logStructured)('error', 'Error resolving alert', {
            alertId,
            error: resolveError.message,
            userId: user?.id
          });
          /* istanbul ignore next */
          cov_25wkcbcvbx().s[49]++;
          return _server.NextResponse.json({
            error: 'Error al resolver alerta'
          }, {
            status: 500
          });
        } else
        /* istanbul ignore next */
        {
          cov_25wkcbcvbx().b[14][1]++;
        }
        cov_25wkcbcvbx().s[50]++;
        result = {
          alertId,
          resolved: true
        };
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[51]++;
        (0, _adminmonitoring.logStructured)('info', 'Alert resolved by admin', {
          alertId,
          userId: user?.id,
          email: user?.email
        });
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[52]++;
        break;
      case 'cleanup_metrics':
        /* istanbul ignore next */
        cov_25wkcbcvbx().b[12][1]++;
        // Ejecutar limpieza de métricas antiguas
        const {
          error: cleanupError
        } =
        /* istanbul ignore next */
        (cov_25wkcbcvbx().s[53]++, await supabase.rpc('cleanup_old_admin_metrics'));
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[54]++;
        if (cleanupError) {
          /* istanbul ignore next */
          cov_25wkcbcvbx().b[15][0]++;
          cov_25wkcbcvbx().s[55]++;
          (0, _adminmonitoring.logStructured)('error', 'Error cleaning up metrics', {
            error: cleanupError.message,
            userId: user?.id
          });
          /* istanbul ignore next */
          cov_25wkcbcvbx().s[56]++;
          return _server.NextResponse.json({
            error: 'Error al limpiar métricas'
          }, {
            status: 500
          });
        } else
        /* istanbul ignore next */
        {
          cov_25wkcbcvbx().b[15][1]++;
        }
        cov_25wkcbcvbx().s[57]++;
        result = {
          cleaned: true,
          timestamp: new Date().toISOString()
        };
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[58]++;
        (0, _adminmonitoring.logStructured)('info', 'Metrics cleanup executed by admin', {
          userId: user?.id,
          email: user?.email
        });
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[59]++;
        break;
      case 'get_performance_stats':
        /* istanbul ignore next */
        cov_25wkcbcvbx().b[12][2]++;
        const timeframeHours =
        /* istanbul ignore next */
        (cov_25wkcbcvbx().s[60]++,
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[16][0]++, metadata?.timeframeHours) ||
        /* istanbul ignore next */
        (cov_25wkcbcvbx().b[16][1]++, 24));
        const {
          data: stats,
          error: statsError
        } =
        /* istanbul ignore next */
        (cov_25wkcbcvbx().s[61]++, await supabase.rpc('get_admin_performance_stats', {
          timeframe_hours: timeframeHours
        }));
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[62]++;
        if (statsError) {
          /* istanbul ignore next */
          cov_25wkcbcvbx().b[17][0]++;
          cov_25wkcbcvbx().s[63]++;
          return _server.NextResponse.json({
            error: 'Error al obtener estadísticas'
          }, {
            status: 500
          });
        } else
        /* istanbul ignore next */
        {
          cov_25wkcbcvbx().b[17][1]++;
        }
        cov_25wkcbcvbx().s[64]++;
        result = {
          stats:
          /* istanbul ignore next */
          (cov_25wkcbcvbx().b[18][0]++, stats[0]) ||
          /* istanbul ignore next */
          (cov_25wkcbcvbx().b[18][1]++, null)
        };
        /* istanbul ignore next */
        cov_25wkcbcvbx().s[65]++;
        break;
      default:
        /* istanbul ignore next */
        cov_25wkcbcvbx().b[12][3]++;
        cov_25wkcbcvbx().s[66]++;
        return _server.NextResponse.json({
          error: 'Acción no válida'
        }, {
          status: 400
        });
    }
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[67]++;
    return _server.NextResponse.json({
      success: true,
      action,
      result,
      timestamp: new Date().toISOString(),
      executedBy: {
        userId: user?.id,
        email: user?.email
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[68]++;
    (0, _adminmonitoring.logStructured)('error', 'Error in admin monitoring POST', {
      error: error instanceof Error ?
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[19][0]++, error.message) :
      /* istanbul ignore next */
      (cov_25wkcbcvbx().b[19][1]++, 'Unknown error')
    });
    /* istanbul ignore next */
    cov_25wkcbcvbx().s[69]++;
    return _server.NextResponse.json({
      error: 'Error interno del servidor',
      code: 'INTERNAL_ERROR'
    }, {
      status: 500
    });
  }
}
const GET =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[70]++, (0, _adminmonitoring.withPerformanceMonitoring)(getHandler));
const POST =
/* istanbul ignore next */
(cov_25wkcbcvbx().s[71]++, (0, _adminmonitoring.withPerformanceMonitoring)(postHandler));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjV3a2NiY3ZieCIsImFjdHVhbENvdmVyYWdlIiwicyIsIkdFVCIsImYiLCJQT1NUIiwicnVudGltZSIsImdldEhhbmRsZXIiLCJyZXF1ZXN0IiwiX2FkbWlubW9uaXRvcmluZyIsImxvZ1N0cnVjdHVyZWQiLCJlbmRwb2ludCIsIm1ldGhvZCIsImF1dGhSZXN1bHQiLCJfc3VwYWJhc2VhdXRodXRpbHMiLCJyZXF1aXJlQWRtaW5BdXRoIiwic3VjY2VzcyIsImIiLCJlcnJvciIsImlwIiwiaGVhZGVycyIsImdldCIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiY29kZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN0YXR1cyIsInVzZXIiLCJ1c2VySWQiLCJpZCIsImVtYWlsIiwidXJsIiwiVVJMIiwidGltZWZyYW1lIiwic2VhcmNoUGFyYW1zIiwiaW5jbHVkZUFsZXJ0cyIsInBlcmZvcm1hbmNlTWV0cmljcyIsImdldFBlcmZvcm1hbmNlTWV0cmljcyIsImFjdGl2ZUFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0cyIsIm5vdyIsInN5c3RlbVN0YXR1cyIsInVwdGltZSIsInByb2Nlc3MiLCJtZW1vcnkiLCJtZW1vcnlVc2FnZSIsInZlcnNpb24iLCJyZXNwb25zZSIsImRhdGEiLCJwZXJmb3JtYW5jZSIsImFsZXJ0cyIsInN5c3RlbSIsInJlcXVlc3RlZEJ5IiwibWV0YSIsImFwaSIsImFsZXJ0c0luY2x1ZGVkIiwibWV0cmljc0NvdW50Iiwic3RhdHMiLCJ0b3RhbFJlcXVlc3RzIiwiYWxlcnRzQ291bnQiLCJsZW5ndGgiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsInVuZGVmaW5lZCIsInBvc3RIYW5kbGVyIiwic3VwYWJhc2UiLCJib2R5IiwiYWN0aW9uIiwiYWxlcnRJZCIsIm1ldGFkYXRhIiwicmVzdWx0IiwicmVzb2x2ZUVycm9yIiwiZnJvbSIsInVwZGF0ZSIsInJlc29sdmVkIiwicmVzb2x2ZWRfYnkiLCJyZXNvbHZlZF9hdCIsImVxIiwiY2xlYW51cEVycm9yIiwicnBjIiwiY2xlYW5lZCIsInRpbWVmcmFtZUhvdXJzIiwic3RhdHNFcnJvciIsInRpbWVmcmFtZV9ob3VycyIsImV4ZWN1dGVkQnkiLCJ3aXRoUGVyZm9ybWFuY2VNb25pdG9yaW5nIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxhcHBcXGFwaVxcYWRtaW5cXG1vbml0b3JpbmdcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvbmZpZ3VyYWNpw7NuIHBhcmEgTm9kZS5qcyBSdW50aW1lXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XHJcblxyXG4vKipcclxuICogQVBJIGRlIG1vbml0b3JlbyBwYXJhIHBhbmVsIGFkbWluaXN0cmF0aXZvXHJcbiAqIFByb3BvcmNpb25hIG3DqXRyaWNhcyBkZSBwZXJmb3JtYW5jZSB5IGFsZXJ0YXMgZGUgc2VndXJpZGFkXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgcmVxdWlyZUFkbWluQXV0aCB9IGZyb20gJ0AvbGliL2F1dGgvc3VwYWJhc2UtYXV0aC11dGlscyc7XHJcbmltcG9ydCB7IFxyXG4gIGdldFBlcmZvcm1hbmNlTWV0cmljcywgXHJcbiAgZ2V0QWN0aXZlQWxlcnRzLFxyXG4gIHdpdGhQZXJmb3JtYW5jZU1vbml0b3JpbmcsXHJcbiAgbG9nU3RydWN0dXJlZCBcclxufSBmcm9tICdAL2xpYi9tb25pdG9yaW5nL2FkbWluLW1vbml0b3JpbmcnO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL2FkbWluL21vbml0b3JpbmdcclxuICogT2J0ZW5lciBtw6l0cmljYXMgZGUgbW9uaXRvcmVvIHkgYWxlcnRhc1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SGFuZGxlcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBsb2dTdHJ1Y3R1cmVkKCdpbmZvJywgJ0FkbWluIG1vbml0b3JpbmcgQVBJIGNhbGxlZCcsIHtcclxuICAgICAgZW5kcG9pbnQ6ICcvYXBpL2FkbWluL21vbml0b3JpbmcnLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBWZXJpZmljYXIgYXV0ZW50aWNhY2nDs24gYWRtaW5cclxuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCByZXF1aXJlQWRtaW5BdXRoKHJlcXVlc3QpO1xyXG5cclxuICAgIGlmICghYXV0aFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIGxvZ1N0cnVjdHVyZWQoJ3dhcm4nLCAnVW5hdXRob3JpemVkIGFjY2VzcyB0byBtb25pdG9yaW5nIEFQSScsIHtcclxuICAgICAgICBlcnJvcjogYXV0aFJlc3VsdC5lcnJvcixcclxuICAgICAgICBpcDogcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogYXV0aFJlc3VsdC5lcnJvcixcclxuICAgICAgICAgIGNvZGU6ICdBVVRIX0ZBSUxFRCcsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IGF1dGhSZXN1bHQuc3RhdHVzIHx8IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyB1c2VyIH0gPSBhdXRoUmVzdWx0O1xyXG4gICAgbG9nU3RydWN0dXJlZCgnaW5mbycsICdBZG1pbiBtb25pdG9yaW5nIGFjY2VzcyBncmFudGVkJywge1xyXG4gICAgICB1c2VySWQ6IHVzZXI/LmlkLFxyXG4gICAgICBlbWFpbDogdXNlcj8uZW1haWxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9idGVuZXIgcGFyw6FtZXRyb3MgZGUgcXVlcnlcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgdGltZWZyYW1lID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3RpbWVmcmFtZScpIGFzICcxaCcgfCAnMjRoJyB8ICc3ZCcgfHwgJzI0aCc7XHJcbiAgICBjb25zdCBpbmNsdWRlQWxlcnRzID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2FsZXJ0cycpICE9PSAnZmFsc2UnO1xyXG5cclxuICAgIC8vIE9idGVuZXIgbcOpdHJpY2FzIGRlIHBlcmZvcm1hbmNlXHJcbiAgICBjb25zdCBwZXJmb3JtYW5jZU1ldHJpY3MgPSBhd2FpdCBnZXRQZXJmb3JtYW5jZU1ldHJpY3ModGltZWZyYW1lKTtcclxuXHJcbiAgICAvLyBPYnRlbmVyIGFsZXJ0YXMgYWN0aXZhcyBzaSBzZSBzb2xpY2l0YW5cclxuICAgIGxldCBhY3RpdmVBbGVydHMgPSBudWxsO1xyXG4gICAgaWYgKGluY2x1ZGVBbGVydHMpIHtcclxuICAgICAgYWN0aXZlQWxlcnRzID0gYXdhaXQgZ2V0QWN0aXZlQWxlcnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXIgZXN0YWTDrXN0aWNhcyBhZGljaW9uYWxlc1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IHN5c3RlbVN0YXR1cyA9IHtcclxuICAgICAgdXB0aW1lOiBwcm9jZXNzLnVwdGltZSgpLFxyXG4gICAgICBtZW1vcnk6IHByb2Nlc3MubWVtb3J5VXNhZ2UoKSxcclxuICAgICAgdGltZXN0YW1wOiBub3cudG9JU09TdHJpbmcoKSxcclxuICAgICAgdmVyc2lvbjogJzIuMC4wJ1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHBlcmZvcm1hbmNlOiBwZXJmb3JtYW5jZU1ldHJpY3MsXHJcbiAgICAgICAgYWxlcnRzOiBhY3RpdmVBbGVydHMsXHJcbiAgICAgICAgc3lzdGVtOiBzeXN0ZW1TdGF0dXMsXHJcbiAgICAgICAgdGltZWZyYW1lLFxyXG4gICAgICAgIHJlcXVlc3RlZEJ5OiB7XHJcbiAgICAgICAgICB1c2VySWQ6IHVzZXI/LmlkLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXI/LmVtYWlsLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBub3cudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbWV0YToge1xyXG4gICAgICAgIGFwaTogJ2FkbWluLW1vbml0b3JpbmcnLFxyXG4gICAgICAgIHZlcnNpb246ICcyLjAuMCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBub3cudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxvZ1N0cnVjdHVyZWQoJ2luZm8nLCAnQWRtaW4gbW9uaXRvcmluZyBkYXRhIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLCB7XHJcbiAgICAgIHVzZXJJZDogdXNlcj8uaWQsXHJcbiAgICAgIHRpbWVmcmFtZSxcclxuICAgICAgYWxlcnRzSW5jbHVkZWQ6IGluY2x1ZGVBbGVydHMsXHJcbiAgICAgIG1ldHJpY3NDb3VudDogcGVyZm9ybWFuY2VNZXRyaWNzPy5zdGF0cz8udG90YWxSZXF1ZXN0cyB8fCAwLFxyXG4gICAgICBhbGVydHNDb3VudDogYWN0aXZlQWxlcnRzPy5sZW5ndGggfHwgMFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ1N0cnVjdHVyZWQoJ2Vycm9yJywgJ0Vycm9yIGluIGFkbWluIG1vbml0b3JpbmcgQVBJJywge1xyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIGVycm9yOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InLFxyXG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9hZG1pbi9tb25pdG9yaW5nXHJcbiAqIFJlc29sdmVyIGFsZXJ0YXMgbyBlamVjdXRhciBhY2Npb25lcyBkZSBtb25pdG9yZW9cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHBvc3RIYW5kbGVyKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFZlcmlmaWNhciBhdXRlbnRpY2FjacOzbiBhZG1pblxyXG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHJlcXVpcmVBZG1pbkF1dGgocmVxdWVzdCk7XHJcblxyXG4gICAgaWYgKCFhdXRoUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IGF1dGhSZXN1bHQuZXJyb3IgfSxcclxuICAgICAgICB7IHN0YXR1czogYXV0aFJlc3VsdC5zdGF0dXMgfHwgNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IHVzZXIsIHN1cGFiYXNlIH0gPSBhdXRoUmVzdWx0O1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIGNvbnN0IHsgYWN0aW9uLCBhbGVydElkLCBtZXRhZGF0YSB9ID0gYm9keTtcclxuXHJcbiAgICBpZiAoIWFjdGlvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0FjY2nDs24gcmVxdWVyaWRhJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG5cclxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3Jlc29sdmVfYWxlcnQnOlxyXG4gICAgICAgIGlmICghYWxlcnRJZCkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnSUQgZGUgYWxlcnRhIHJlcXVlcmlkbycgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzb2x2ZXIgYWxlcnRhIGVuIGJhc2UgZGUgZGF0b3NcclxuICAgICAgICBjb25zdCB7IGVycm9yOiByZXNvbHZlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnYWRtaW5fc2VjdXJpdHlfYWxlcnRzJylcclxuICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICByZXNvbHZlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcmVzb2x2ZWRfYnk6IHVzZXI/LmlkLFxyXG4gICAgICAgICAgICByZXNvbHZlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVxKCdpZCcsIGFsZXJ0SWQpO1xyXG5cclxuICAgICAgICBpZiAocmVzb2x2ZUVycm9yKSB7XHJcbiAgICAgICAgICBsb2dTdHJ1Y3R1cmVkKCdlcnJvcicsICdFcnJvciByZXNvbHZpbmcgYWxlcnQnLCB7XHJcbiAgICAgICAgICAgIGFsZXJ0SWQsXHJcbiAgICAgICAgICAgIGVycm9yOiByZXNvbHZlRXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VyPy5pZFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnRXJyb3IgYWwgcmVzb2x2ZXIgYWxlcnRhJyB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHQgPSB7IGFsZXJ0SWQsIHJlc29sdmVkOiB0cnVlIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nU3RydWN0dXJlZCgnaW5mbycsICdBbGVydCByZXNvbHZlZCBieSBhZG1pbicsIHtcclxuICAgICAgICAgIGFsZXJ0SWQsXHJcbiAgICAgICAgICB1c2VySWQ6IHVzZXI/LmlkLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXI/LmVtYWlsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdjbGVhbnVwX21ldHJpY3MnOlxyXG4gICAgICAgIC8vIEVqZWN1dGFyIGxpbXBpZXphIGRlIG3DqXRyaWNhcyBhbnRpZ3Vhc1xyXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IGNsZWFudXBFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdjbGVhbnVwX29sZF9hZG1pbl9tZXRyaWNzJyk7XHJcblxyXG4gICAgICAgIGlmIChjbGVhbnVwRXJyb3IpIHtcclxuICAgICAgICAgIGxvZ1N0cnVjdHVyZWQoJ2Vycm9yJywgJ0Vycm9yIGNsZWFuaW5nIHVwIG1ldHJpY3MnLCB7XHJcbiAgICAgICAgICAgIGVycm9yOiBjbGVhbnVwRXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VyPy5pZFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnRXJyb3IgYWwgbGltcGlhciBtw6l0cmljYXMnIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdCA9IHsgY2xlYW5lZDogdHJ1ZSwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfTtcclxuICAgICAgICBcclxuICAgICAgICBsb2dTdHJ1Y3R1cmVkKCdpbmZvJywgJ01ldHJpY3MgY2xlYW51cCBleGVjdXRlZCBieSBhZG1pbicsIHtcclxuICAgICAgICAgIHVzZXJJZDogdXNlcj8uaWQsXHJcbiAgICAgICAgICBlbWFpbDogdXNlcj8uZW1haWxcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ2dldF9wZXJmb3JtYW5jZV9zdGF0cyc6XHJcbiAgICAgICAgY29uc3QgdGltZWZyYW1lSG91cnMgPSBtZXRhZGF0YT8udGltZWZyYW1lSG91cnMgfHwgMjQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBzdGF0cywgZXJyb3I6IHN0YXRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAucnBjKCdnZXRfYWRtaW5fcGVyZm9ybWFuY2Vfc3RhdHMnLCB7IHRpbWVmcmFtZV9ob3VyczogdGltZWZyYW1lSG91cnMgfSk7XHJcblxyXG4gICAgICAgIGlmIChzdGF0c0Vycm9yKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6ICdFcnJvciBhbCBvYnRlbmVyIGVzdGFkw61zdGljYXMnIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdCA9IHsgc3RhdHM6IHN0YXRzWzBdIHx8IG51bGwgfTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ0FjY2nDs24gbm8gdsOhbGlkYScgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYWN0aW9uLFxyXG4gICAgICByZXN1bHQsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBleGVjdXRlZEJ5OiB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyPy5pZCxcclxuICAgICAgICBlbWFpbDogdXNlcj8uZW1haWxcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dTdHJ1Y3R1cmVkKCdlcnJvcicsICdFcnJvciBpbiBhZG1pbiBtb25pdG9yaW5nIFBPU1QnLCB7XHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsXHJcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX0VSUk9SJ1xyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBcGxpY2FyIG1pZGRsZXdhcmUgZGUgbW9uaXRvcmVvIGRlIHBlcmZvcm1hbmNlXHJcbmV4cG9ydCBjb25zdCBHRVQgPSB3aXRoUGVyZm9ybWFuY2VNb25pdG9yaW5nKGdldEhhbmRsZXIpO1xyXG5leHBvcnQgY29uc3QgUE9TVCA9IHdpdGhQZXJmb3JtYW5jZU1vbml0b3JpbmcocG9zdEhhbmRsZXIpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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