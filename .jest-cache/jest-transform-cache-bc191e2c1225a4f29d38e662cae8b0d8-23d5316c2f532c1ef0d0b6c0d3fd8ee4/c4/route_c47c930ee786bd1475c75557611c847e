dd1e759f2d042988381d65011b3fc774
// Configuraci√≥n para Node.js Runtime
"use strict";

/* istanbul ignore next */
function cov_19buk6mrc() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\check-admin-access\\route.ts";
  var hash = "43dbf5156cc4d2cc2249bd6f21c432e38ef8f624";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\check-admin-access\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "2": {
        start: {
          line: 7,
          column: 24
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "3": {
        start: {
          line: 12,
          column: 0
        },
        end: {
          line: 19,
          column: 3
        }
      },
      "4": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 19
        }
      },
      "5": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 23
        }
      },
      "6": {
        start: {
          line: 20,
          column: 16
        },
        end: {
          line: 20,
          column: 38
        }
      },
      "7": {
        start: {
          line: 21,
          column: 19
        },
        end: {
          line: 21,
          column: 61
        }
      },
      "8": {
        start: {
          line: 22,
          column: 29
        },
        end: {
          line: 22,
          column: 82
        }
      },
      "9": {
        start: {
          line: 23,
          column: 28
        },
        end: {
          line: 23,
          column: 80
        }
      },
      "10": {
        start: {
          line: 24,
          column: 25
        },
        end: {
          line: 24,
          column: 73
        }
      },
      "11": {
        start: {
          line: 25,
          column: 16
        },
        end: {
          line: 25,
          column: 24
        }
      },
      "12": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 137,
          column: 5
        }
      },
      "13": {
        start: {
          line: 29,
          column: 33
        },
        end: {
          line: 31,
          column: 10
        }
      },
      "14": {
        start: {
          line: 33,
          column: 28
        },
        end: {
          line: 33,
          column: 80
        }
      },
      "15": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 52,
          column: 9
        }
      },
      "16": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 51,
          column: 15
        }
      },
      "17": {
        start: {
          line: 54,
          column: 32
        },
        end: {
          line: 54,
          column: 36
        }
      },
      "18": {
        start: {
          line: 55,
          column: 28
        },
        end: {
          line: 55,
          column: 32
        }
      },
      "19": {
        start: {
          line: 56,
          column: 8
        },
        end: {
          line: 59,
          column: 9
        }
      },
      "20": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 57,
          column: 57
        }
      },
      "21": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 97
        }
      },
      "22": {
        start: {
          line: 61,
          column: 28
        },
        end: {
          line: 61,
          column: 117
        }
      },
      "23": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 62,
          column: 86
        }
      },
      "24": {
        start: {
          line: 63,
          column: 29
        },
        end: {
          line: 66,
          column: 9
        }
      },
      "25": {
        start: {
          line: 68,
          column: 27
        },
        end: {
          line: 68,
          column: 64
        }
      },
      "26": {
        start: {
          line: 69,
          column: 8
        },
        end: {
          line: 125,
          column: 11
        }
      },
      "27": {
        start: {
          line: 127,
          column: 8
        },
        end: {
          line: 127,
          column: 66
        }
      },
      "28": {
        start: {
          line: 128,
          column: 8
        },
        end: {
          line: 136,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 6,
            column: 9
          },
          end: {
            line: 6,
            column: 16
          }
        },
        loc: {
          start: {
            line: 6,
            column: 30
          },
          end: {
            line: 11,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 19
          },
          end: {
            line: 18,
            column: 5
          }
        },
        line: 16
      },
      "3": {
        name: "GET",
        decl: {
          start: {
            line: 26,
            column: 15
          },
          end: {
            line: 26,
            column: 18
          }
        },
        loc: {
          start: {
            line: 26,
            column: 28
          },
          end: {
            line: 138,
            column: 1
          }
        },
        line: 26
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 52,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 52,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 34
      },
      "1": {
        loc: {
          start: {
            line: 34,
            column: 12
          },
          end: {
            line: 34,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 34,
            column: 12
          },
          end: {
            line: 34,
            column: 31
          }
        }, {
          start: {
            line: 34,
            column: 35
          },
          end: {
            line: 34,
            column: 60
          }
        }],
        line: 34
      },
      "2": {
        loc: {
          start: {
            line: 56,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 56,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 56
      },
      "3": {
        loc: {
          start: {
            line: 61,
            column: 28
          },
          end: {
            line: 61,
            column: 117
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 61,
            column: 28
          },
          end: {
            line: 61,
            column: 46
          }
        }, {
          start: {
            line: 61,
            column: 51
          },
          end: {
            line: 61,
            column: 116
          }
        }],
        line: 61
      },
      "4": {
        loc: {
          start: {
            line: 61,
            column: 51
          },
          end: {
            line: 61,
            column: 116
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 61,
            column: 78
          },
          end: {
            line: 61,
            column: 109
          }
        }, {
          start: {
            line: 61,
            column: 112
          },
          end: {
            line: 61,
            column: 116
          }
        }],
        line: 61
      },
      "5": {
        loc: {
          start: {
            line: 63,
            column: 29
          },
          end: {
            line: 66,
            column: 9
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 63,
            column: 43
          },
          end: {
            line: 63,
            column: 94
          }
        }, {
          start: {
            line: 63,
            column: 97
          },
          end: {
            line: 66,
            column: 9
          }
        }],
        line: 63
      },
      "6": {
        loc: {
          start: {
            line: 70,
            column: 21
          },
          end: {
            line: 70,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 70,
            column: 21
          },
          end: {
            line: 70,
            column: 45
          }
        }, {
          start: {
            line: 70,
            column: 49
          },
          end: {
            line: 70,
            column: 68
          }
        }],
        line: 70
      },
      "7": {
        loc: {
          start: {
            line: 72,
            column: 24
          },
          end: {
            line: 72,
            column: 71
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 72,
            column: 51
          },
          end: {
            line: 72,
            column: 60
          }
        }, {
          start: {
            line: 72,
            column: 63
          },
          end: {
            line: 72,
            column: 71
          }
        }],
        line: 72
      },
      "8": {
        loc: {
          start: {
            line: 73,
            column: 25
          },
          end: {
            line: 79,
            column: 24
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 73,
            column: 52
          },
          end: {
            line: 79,
            column: 17
          }
        }, {
          start: {
            line: 79,
            column: 20
          },
          end: {
            line: 79,
            column: 24
          }
        }],
        line: 73
      },
      "9": {
        loc: {
          start: {
            line: 80,
            column: 21
          },
          end: {
            line: 83,
            column: 24
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 80,
            column: 37
          },
          end: {
            line: 83,
            column: 17
          }
        }, {
          start: {
            line: 83,
            column: 20
          },
          end: {
            line: 83,
            column: 24
          }
        }],
        line: 80
      },
      "10": {
        loc: {
          start: {
            line: 89,
            column: 24
          },
          end: {
            line: 89,
            column: 66
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 89,
            column: 46
          },
          end: {
            line: 89,
            column: 55
          }
        }, {
          start: {
            line: 89,
            column: 58
          },
          end: {
            line: 89,
            column: 66
          }
        }],
        line: 89
      },
      "11": {
        loc: {
          start: {
            line: 132,
            column: 30
          },
          end: {
            line: 132,
            column: 86
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 132,
            column: 55
          },
          end: {
            line: 132,
            column: 68
          }
        }, {
          start: {
            line: 132,
            column: 71
          },
          end: {
            line: 132,
            column: 86
          }
        }],
        line: 132
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\api\\debug\\check-admin-access\\route.ts"],
      sourcesContent: ["// Configuraci\xF3n para Node.js Runtime\r\nexport const runtime = 'nodejs';\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { checkAdminAccess, getAuthenticatedAdmin } from '@/lib/auth/admin-auth';\r\nimport {\r\n  requireAdminAuth,\r\n  getEnterpriseAuthContext\r\n} from '@/lib/auth/enterprise-auth-utils';\r\nimport {\r\n  validateRLSContext\r\n} from '@/lib/auth/enterprise-rls-utils';\r\nimport {\r\n  getCacheStats\r\n} from '@/lib/auth/enterprise-cache';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // ENTERPRISE: Usar nueva autenticaci\xF3n enterprise para comparaci\xF3n\r\n    const enterpriseResult = await requireAdminAuth(request, ['admin_access']);\r\n\r\n    // LEGACY: Mantener m\xE9todo anterior para comparaci\xF3n\r\n    const adminResult = await getAuthenticatedAdmin(request);\r\n\r\n    if (!adminResult.userId && !enterpriseResult.success) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'Usuario no autenticado en ning\xFAn m\xE9todo',\r\n        enterprise: {\r\n          error: enterpriseResult.error,\r\n          code: enterpriseResult.code\r\n        },\r\n        legacy: {\r\n          error: adminResult.error\r\n        },\r\n        migration: {\r\n          status: 'ENTERPRISE_MIGRATED',\r\n          comparison: 'Both methods failed - user not authenticated'\r\n        }\r\n      }, { status: 401 });\r\n    }\r\n\r\n    // ENTERPRISE: Obtener contexto completo y validaci\xF3n RLS\r\n    let enterpriseContext = null;\r\n    let rlsValidation = null;\r\n\r\n    if (enterpriseResult.success) {\r\n      enterpriseContext = enterpriseResult.context;\r\n      rlsValidation = await validateRLSContext(enterpriseContext!);\r\n    }\r\n\r\n    // LEGACY: Comparar con m\xE9todo legacy para verificar migraci\xF3n\r\n    const clerkUserId = adminResult.userId || (enterpriseResult.success ? enterpriseResult.context!.userId : null);\r\n\r\n    console.log('\uD83D\uDD0D Debug Enterprise vs Legacy: Testing with user:', clerkUserId);\r\n\r\n    const legacyResult = clerkUserId ? await checkAdminAccess(clerkUserId) : { success: false, error: 'No user ID' };\r\n\r\n    // ENTERPRISE: Obtener estad\xEDsticas de cache\r\n    const cacheStats = getCacheStats();\r\n\r\n    return NextResponse.json({\r\n      success: enterpriseResult.success || adminResult.isAdmin,\r\n      enterprise: {\r\n        status: enterpriseResult.success ? 'SUCCESS' : 'FAILED',\r\n        context: enterpriseResult.success ? {\r\n          userId: enterpriseContext?.userId,\r\n          role: enterpriseContext?.role,\r\n          permissions: enterpriseContext?.permissions,\r\n          securityLevel: enterpriseContext?.securityLevel,\r\n          validations: enterpriseContext?.validations\r\n        } : null,\r\n        rls: rlsValidation ? {\r\n          valid: rlsValidation.valid,\r\n          error: rlsValidation.error\r\n        } : null,\r\n        cache: cacheStats,\r\n        error: enterpriseResult.error,\r\n        code: enterpriseResult.code\r\n      },\r\n      legacy: {\r\n        status: adminResult.isAdmin ? 'SUCCESS' : 'FAILED',\r\n        userId: adminResult.userId,\r\n        sessionId: adminResult.sessionId,\r\n        isAdmin: adminResult.isAdmin,\r\n        error: adminResult.error,\r\n        checkAdminAccess: {\r\n          success: legacyResult.success,\r\n          error: legacyResult.error\r\n        }\r\n      },\r\n      migration: {\r\n        status: 'ENTERPRISE_COMPLETED',\r\n        comparison: {\r\n          enterprise_success: enterpriseResult.success,\r\n          legacy_success: adminResult.isAdmin,\r\n          methods_agree: enterpriseResult.success === adminResult.isAdmin,\r\n          recommended: 'enterprise'\r\n        },\r\n        improvements: [\r\n          '\u2705 ENTERPRISE: Autenticaci\xF3n con m\xFAltiples validaciones de seguridad',\r\n          '\u2705 ENTERPRISE: Row Level Security (RLS) integrado',\r\n          '\u2705 ENTERPRISE: Cache inteligente con estad\xEDsticas',\r\n          '\u2705 ENTERPRISE: Contexto completo de seguridad',\r\n          '\u2705 ENTERPRISE: Permisos granulares',\r\n          '\u26A0\uFE0F LEGACY: M\xE9todo anterior a\xFAn funcional para compatibilidad'\r\n        ]\r\n      },\r\n      debug: {\r\n        clerkUserId,\r\n        timestamp: new Date().toISOString(),\r\n        request_info: {\r\n          method: request.method,\r\n          url: request.url,\r\n          user_agent: request.headers.get('user-agent')?.substring(0, 100)\r\n        }\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('\uD83D\uDD0D Debug checkAdminAccess: Error:', error);\r\n    return NextResponse.json({\r\n      success: false,\r\n      error: 'Unexpected error',\r\n      debug: {\r\n        errorMessage: error instanceof Error ? error.message : 'Unknown error'\r\n      }\r\n    }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["GET", "runtime", "request", "enterpriseResult", "requireAdminAuth", "adminResult", "getAuthenticatedAdmin", "userId", "success", "NextResponse", "json", "error", "enterprise", "code", "legacy", "migration", "status", "comparison", "enterpriseContext", "rlsValidation", "context", "validateRLSContext", "clerkUserId", "console", "log", "legacyResult", "checkAdminAccess", "cacheStats", "getCacheStats", "isAdmin", "role", "permissions", "securityLevel", "validations", "rls", "valid", "cache", "sessionId", "enterprise_success", "legacy_success", "methods_agree", "recommended", "improvements", "debug", "timestamp", "Date", "toISOString", "request_info", "method", "url", "user_agent", "headers", "get", "substring", "errorMessage", "Error", "message"],
      mappings: "AAAA,qCAAqC;;;;;;;;;;;;QAgBfA;eAAAA;;QAfTC;eAAAA;;;wBAE6B;2BACc;qCAIjD;oCAGA;iCAGA;AAbA,MAAMA,UAAU;AAehB,eAAeD,IAAIE,OAAoB;IAC5C,IAAI;QACF,mEAAmE;QACnE,MAAMC,mBAAmB,MAAMC,IAAAA,qCAAgB,EAACF,SAAS;YAAC;SAAe;QAEzE,oDAAoD;QACpD,MAAMG,cAAc,MAAMC,IAAAA,gCAAqB,EAACJ;QAEhD,IAAI,CAACG,YAAYE,MAAM,IAAI,CAACJ,iBAAiBK,OAAO,EAAE;YACpD,OAAOC,oBAAY,CAACC,IAAI,CAAC;gBACvBF,SAAS;gBACTG,OAAO;gBACPC,YAAY;oBACVD,OAAOR,iBAAiBQ,KAAK;oBAC7BE,MAAMV,iBAAiBU,IAAI;gBAC7B;gBACAC,QAAQ;oBACNH,OAAON,YAAYM,KAAK;gBAC1B;gBACAI,WAAW;oBACTC,QAAQ;oBACRC,YAAY;gBACd;YACF,GAAG;gBAAED,QAAQ;YAAI;QACnB;QAEA,yDAAyD;QACzD,IAAIE,oBAAoB;QACxB,IAAIC,gBAAgB;QAEpB,IAAIhB,iBAAiBK,OAAO,EAAE;YAC5BU,oBAAoBf,iBAAiBiB,OAAO;YAC5CD,gBAAgB,MAAME,IAAAA,sCAAkB,EAACH;QAC3C;QAEA,8DAA8D;QAC9D,MAAMI,cAAcjB,YAAYE,MAAM,IAAKJ,CAAAA,iBAAiBK,OAAO,GAAGL,iBAAiBiB,OAAO,CAAEb,MAAM,GAAG,IAAG;QAE5GgB,QAAQC,GAAG,CAAC,qDAAqDF;QAEjE,MAAMG,eAAeH,cAAc,MAAMI,IAAAA,2BAAgB,EAACJ,eAAe;YAAEd,SAAS;YAAOG,OAAO;QAAa;QAE/G,4CAA4C;QAC5C,MAAMgB,aAAaC,IAAAA,8BAAa;QAEhC,OAAOnB,oBAAY,CAACC,IAAI,CAAC;YACvBF,SAASL,iBAAiBK,OAAO,IAAIH,YAAYwB,OAAO;YACxDjB,YAAY;gBACVI,QAAQb,iBAAiBK,OAAO,GAAG,YAAY;gBAC/CY,SAASjB,iBAAiBK,OAAO,GAAG;oBAClCD,QAAQW,mBAAmBX;oBAC3BuB,MAAMZ,mBAAmBY;oBACzBC,aAAab,mBAAmBa;oBAChCC,eAAed,mBAAmBc;oBAClCC,aAAaf,mBAAmBe;gBAClC,IAAI;gBACJC,KAAKf,gBAAgB;oBACnBgB,OAAOhB,cAAcgB,KAAK;oBAC1BxB,OAAOQ,cAAcR,KAAK;gBAC5B,IAAI;gBACJyB,OAAOT;gBACPhB,OAAOR,iBAAiBQ,KAAK;gBAC7BE,MAAMV,iBAAiBU,IAAI;YAC7B;YACAC,QAAQ;gBACNE,QAAQX,YAAYwB,OAAO,GAAG,YAAY;gBAC1CtB,QAAQF,YAAYE,MAAM;gBAC1B8B,WAAWhC,YAAYgC,SAAS;gBAChCR,SAASxB,YAAYwB,OAAO;gBAC5BlB,OAAON,YAAYM,KAAK;gBACxBe,kBAAkB;oBAChBlB,SAASiB,aAAajB,OAAO;oBAC7BG,OAAOc,aAAad,KAAK;gBAC3B;YACF;YACAI,WAAW;gBACTC,QAAQ;gBACRC,YAAY;oBACVqB,oBAAoBnC,iBAAiBK,OAAO;oBAC5C+B,gBAAgBlC,YAAYwB,OAAO;oBACnCW,eAAerC,iBAAiBK,OAAO,KAAKH,YAAYwB,OAAO;oBAC/DY,aAAa;gBACf;gBACAC,cAAc;oBACZ;oBACA;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACAC,OAAO;gBACLrB;gBACAsB,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,cAAc;oBACZC,QAAQ9C,QAAQ8C,MAAM;oBACtBC,KAAK/C,QAAQ+C,GAAG;oBAChBC,YAAYhD,QAAQiD,OAAO,CAACC,GAAG,CAAC,eAAeC,UAAU,GAAG;gBAC9D;YACF;QACF;IAEF,EAAE,OAAO1C,OAAO;QACdY,QAAQZ,KAAK,CAAC,qCAAqCA;QACnD,OAAOF,oBAAY,CAACC,IAAI,CAAC;YACvBF,SAAS;YACTG,OAAO;YACPgC,OAAO;gBACLW,cAAc3C,iBAAiB4C,QAAQ5C,MAAM6C,OAAO,GAAG;YACzD;QACF,GAAG;YAAExC,QAAQ;QAAI;IACnB;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "43dbf5156cc4d2cc2249bd6f21c432e38ef8f624"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_19buk6mrc = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_19buk6mrc();
cov_19buk6mrc().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_19buk6mrc().f[0]++;
  cov_19buk6mrc().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_19buk6mrc().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_19buk6mrc().s[3]++;
_export(exports, {
  get GET() {
    /* istanbul ignore next */
    cov_19buk6mrc().f[1]++;
    cov_19buk6mrc().s[4]++;
    return GET;
  },
  get runtime() {
    /* istanbul ignore next */
    cov_19buk6mrc().f[2]++;
    cov_19buk6mrc().s[5]++;
    return runtime;
  }
});
const _server =
/* istanbul ignore next */
(cov_19buk6mrc().s[6]++, require("next/server"));
const _adminauth =
/* istanbul ignore next */
(cov_19buk6mrc().s[7]++, require("../../../../lib/auth/admin-auth"));
const _enterpriseauthutils =
/* istanbul ignore next */
(cov_19buk6mrc().s[8]++, require("../../../../lib/auth/enterprise-auth-utils"));
const _enterpriserlsutils =
/* istanbul ignore next */
(cov_19buk6mrc().s[9]++, require("../../../../lib/auth/enterprise-rls-utils"));
const _enterprisecache =
/* istanbul ignore next */
(cov_19buk6mrc().s[10]++, require("../../../../lib/auth/enterprise-cache"));
const runtime =
/* istanbul ignore next */
(cov_19buk6mrc().s[11]++, 'nodejs');
async function GET(request) {
  /* istanbul ignore next */
  cov_19buk6mrc().f[3]++;
  cov_19buk6mrc().s[12]++;
  try {
    // ENTERPRISE: Usar nueva autenticaci√≥n enterprise para comparaci√≥n
    const enterpriseResult =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[13]++, await (0, _enterpriseauthutils.requireAdminAuth)(request, ['admin_access']));
    // LEGACY: Mantener m√©todo anterior para comparaci√≥n
    const adminResult =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[14]++, await (0, _adminauth.getAuthenticatedAdmin)(request));
    /* istanbul ignore next */
    cov_19buk6mrc().s[15]++;
    if (
    /* istanbul ignore next */
    (cov_19buk6mrc().b[1][0]++, !adminResult.userId) &&
    /* istanbul ignore next */
    (cov_19buk6mrc().b[1][1]++, !enterpriseResult.success)) {
      /* istanbul ignore next */
      cov_19buk6mrc().b[0][0]++;
      cov_19buk6mrc().s[16]++;
      return _server.NextResponse.json({
        success: false,
        error: 'Usuario no autenticado en ning√∫n m√©todo',
        enterprise: {
          error: enterpriseResult.error,
          code: enterpriseResult.code
        },
        legacy: {
          error: adminResult.error
        },
        migration: {
          status: 'ENTERPRISE_MIGRATED',
          comparison: 'Both methods failed - user not authenticated'
        }
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_19buk6mrc().b[0][1]++;
    }
    // ENTERPRISE: Obtener contexto completo y validaci√≥n RLS
    let enterpriseContext =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[17]++, null);
    let rlsValidation =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[18]++, null);
    /* istanbul ignore next */
    cov_19buk6mrc().s[19]++;
    if (enterpriseResult.success) {
      /* istanbul ignore next */
      cov_19buk6mrc().b[2][0]++;
      cov_19buk6mrc().s[20]++;
      enterpriseContext = enterpriseResult.context;
      /* istanbul ignore next */
      cov_19buk6mrc().s[21]++;
      rlsValidation = await (0, _enterpriserlsutils.validateRLSContext)(enterpriseContext);
    } else
    /* istanbul ignore next */
    {
      cov_19buk6mrc().b[2][1]++;
    }
    // LEGACY: Comparar con m√©todo legacy para verificar migraci√≥n
    const clerkUserId =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[22]++,
    /* istanbul ignore next */
    (cov_19buk6mrc().b[3][0]++, adminResult.userId) ||
    /* istanbul ignore next */
    (cov_19buk6mrc().b[3][1]++, enterpriseResult.success ?
    /* istanbul ignore next */
    (cov_19buk6mrc().b[4][0]++, enterpriseResult.context.userId) :
    /* istanbul ignore next */
    (cov_19buk6mrc().b[4][1]++, null)));
    /* istanbul ignore next */
    cov_19buk6mrc().s[23]++;
    console.log('üîç Debug Enterprise vs Legacy: Testing with user:', clerkUserId);
    const legacyResult =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[24]++, clerkUserId ?
    /* istanbul ignore next */
    (cov_19buk6mrc().b[5][0]++, await (0, _adminauth.checkAdminAccess)(clerkUserId)) :
    /* istanbul ignore next */
    (cov_19buk6mrc().b[5][1]++, {
      success: false,
      error: 'No user ID'
    }));
    // ENTERPRISE: Obtener estad√≠sticas de cache
    const cacheStats =
    /* istanbul ignore next */
    (cov_19buk6mrc().s[25]++, (0, _enterprisecache.getCacheStats)());
    /* istanbul ignore next */
    cov_19buk6mrc().s[26]++;
    return _server.NextResponse.json({
      success:
      /* istanbul ignore next */
      (cov_19buk6mrc().b[6][0]++, enterpriseResult.success) ||
      /* istanbul ignore next */
      (cov_19buk6mrc().b[6][1]++, adminResult.isAdmin),
      enterprise: {
        status: enterpriseResult.success ?
        /* istanbul ignore next */
        (cov_19buk6mrc().b[7][0]++, 'SUCCESS') :
        /* istanbul ignore next */
        (cov_19buk6mrc().b[7][1]++, 'FAILED'),
        context: enterpriseResult.success ?
        /* istanbul ignore next */
        (cov_19buk6mrc().b[8][0]++, {
          userId: enterpriseContext?.userId,
          role: enterpriseContext?.role,
          permissions: enterpriseContext?.permissions,
          securityLevel: enterpriseContext?.securityLevel,
          validations: enterpriseContext?.validations
        }) :
        /* istanbul ignore next */
        (cov_19buk6mrc().b[8][1]++, null),
        rls: rlsValidation ?
        /* istanbul ignore next */
        (cov_19buk6mrc().b[9][0]++, {
          valid: rlsValidation.valid,
          error: rlsValidation.error
        }) :
        /* istanbul ignore next */
        (cov_19buk6mrc().b[9][1]++, null),
        cache: cacheStats,
        error: enterpriseResult.error,
        code: enterpriseResult.code
      },
      legacy: {
        status: adminResult.isAdmin ?
        /* istanbul ignore next */
        (cov_19buk6mrc().b[10][0]++, 'SUCCESS') :
        /* istanbul ignore next */
        (cov_19buk6mrc().b[10][1]++, 'FAILED'),
        userId: adminResult.userId,
        sessionId: adminResult.sessionId,
        isAdmin: adminResult.isAdmin,
        error: adminResult.error,
        checkAdminAccess: {
          success: legacyResult.success,
          error: legacyResult.error
        }
      },
      migration: {
        status: 'ENTERPRISE_COMPLETED',
        comparison: {
          enterprise_success: enterpriseResult.success,
          legacy_success: adminResult.isAdmin,
          methods_agree: enterpriseResult.success === adminResult.isAdmin,
          recommended: 'enterprise'
        },
        improvements: ['‚úÖ ENTERPRISE: Autenticaci√≥n con m√∫ltiples validaciones de seguridad', '‚úÖ ENTERPRISE: Row Level Security (RLS) integrado', '‚úÖ ENTERPRISE: Cache inteligente con estad√≠sticas', '‚úÖ ENTERPRISE: Contexto completo de seguridad', '‚úÖ ENTERPRISE: Permisos granulares', '‚ö†Ô∏è LEGACY: M√©todo anterior a√∫n funcional para compatibilidad']
      },
      debug: {
        clerkUserId,
        timestamp: new Date().toISOString(),
        request_info: {
          method: request.method,
          url: request.url,
          user_agent: request.headers.get('user-agent')?.substring(0, 100)
        }
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_19buk6mrc().s[27]++;
    console.error('üîç Debug checkAdminAccess: Error:', error);
    /* istanbul ignore next */
    cov_19buk6mrc().s[28]++;
    return _server.NextResponse.json({
      success: false,
      error: 'Unexpected error',
      debug: {
        errorMessage: error instanceof Error ?
        /* istanbul ignore next */
        (cov_19buk6mrc().b[11][0]++, error.message) :
        /* istanbul ignore next */
        (cov_19buk6mrc().b[11][1]++, 'Unknown error')
      }
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTlidWs2bXJjIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiR0VUIiwiZiIsInJ1bnRpbWUiLCJyZXF1ZXN0IiwiZW50ZXJwcmlzZVJlc3VsdCIsIl9lbnRlcnByaXNlYXV0aHV0aWxzIiwicmVxdWlyZUFkbWluQXV0aCIsImFkbWluUmVzdWx0IiwiX2FkbWluYXV0aCIsImdldEF1dGhlbnRpY2F0ZWRBZG1pbiIsImIiLCJ1c2VySWQiLCJzdWNjZXNzIiwiX3NlcnZlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJlcnJvciIsImVudGVycHJpc2UiLCJjb2RlIiwibGVnYWN5IiwibWlncmF0aW9uIiwic3RhdHVzIiwiY29tcGFyaXNvbiIsImVudGVycHJpc2VDb250ZXh0IiwicmxzVmFsaWRhdGlvbiIsImNvbnRleHQiLCJfZW50ZXJwcmlzZXJsc3V0aWxzIiwidmFsaWRhdGVSTFNDb250ZXh0IiwiY2xlcmtVc2VySWQiLCJjb25zb2xlIiwibG9nIiwibGVnYWN5UmVzdWx0IiwiY2hlY2tBZG1pbkFjY2VzcyIsImNhY2hlU3RhdHMiLCJfZW50ZXJwcmlzZWNhY2hlIiwiZ2V0Q2FjaGVTdGF0cyIsImlzQWRtaW4iLCJyb2xlIiwicGVybWlzc2lvbnMiLCJzZWN1cml0eUxldmVsIiwidmFsaWRhdGlvbnMiLCJybHMiLCJ2YWxpZCIsImNhY2hlIiwic2Vzc2lvbklkIiwiZW50ZXJwcmlzZV9zdWNjZXNzIiwibGVnYWN5X3N1Y2Nlc3MiLCJtZXRob2RzX2FncmVlIiwicmVjb21tZW5kZWQiLCJpbXByb3ZlbWVudHMiLCJkZWJ1ZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlcXVlc3RfaW5mbyIsIm1ldGhvZCIsInVybCIsInVzZXJfYWdlbnQiLCJoZWFkZXJzIiwiZ2V0Iiwic3Vic3RyaW5nIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxhcHBcXGFwaVxcZGVidWdcXGNoZWNrLWFkbWluLWFjY2Vzc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29uZmlndXJhY2nDs24gcGFyYSBOb2RlLmpzIFJ1bnRpbWVcclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNoZWNrQWRtaW5BY2Nlc3MsIGdldEF1dGhlbnRpY2F0ZWRBZG1pbiB9IGZyb20gJ0AvbGliL2F1dGgvYWRtaW4tYXV0aCc7XHJcbmltcG9ydCB7XHJcbiAgcmVxdWlyZUFkbWluQXV0aCxcclxuICBnZXRFbnRlcnByaXNlQXV0aENvbnRleHRcclxufSBmcm9tICdAL2xpYi9hdXRoL2VudGVycHJpc2UtYXV0aC11dGlscyc7XHJcbmltcG9ydCB7XHJcbiAgdmFsaWRhdGVSTFNDb250ZXh0XHJcbn0gZnJvbSAnQC9saWIvYXV0aC9lbnRlcnByaXNlLXJscy11dGlscyc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q2FjaGVTdGF0c1xyXG59IGZyb20gJ0AvbGliL2F1dGgvZW50ZXJwcmlzZS1jYWNoZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEVOVEVSUFJJU0U6IFVzYXIgbnVldmEgYXV0ZW50aWNhY2nDs24gZW50ZXJwcmlzZSBwYXJhIGNvbXBhcmFjacOzblxyXG4gICAgY29uc3QgZW50ZXJwcmlzZVJlc3VsdCA9IGF3YWl0IHJlcXVpcmVBZG1pbkF1dGgocmVxdWVzdCwgWydhZG1pbl9hY2Nlc3MnXSk7XHJcblxyXG4gICAgLy8gTEVHQUNZOiBNYW50ZW5lciBtw6l0b2RvIGFudGVyaW9yIHBhcmEgY29tcGFyYWNpw7NuXHJcbiAgICBjb25zdCBhZG1pblJlc3VsdCA9IGF3YWl0IGdldEF1dGhlbnRpY2F0ZWRBZG1pbihyZXF1ZXN0KTtcclxuXHJcbiAgICBpZiAoIWFkbWluUmVzdWx0LnVzZXJJZCAmJiAhZW50ZXJwcmlzZVJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdVc3VhcmlvIG5vIGF1dGVudGljYWRvIGVuIG5pbmfDum4gbcOpdG9kbycsXHJcbiAgICAgICAgZW50ZXJwcmlzZToge1xyXG4gICAgICAgICAgZXJyb3I6IGVudGVycHJpc2VSZXN1bHQuZXJyb3IsXHJcbiAgICAgICAgICBjb2RlOiBlbnRlcnByaXNlUmVzdWx0LmNvZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlZ2FjeToge1xyXG4gICAgICAgICAgZXJyb3I6IGFkbWluUmVzdWx0LmVycm9yXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtaWdyYXRpb246IHtcclxuICAgICAgICAgIHN0YXR1czogJ0VOVEVSUFJJU0VfTUlHUkFURUQnLFxyXG4gICAgICAgICAgY29tcGFyaXNvbjogJ0JvdGggbWV0aG9kcyBmYWlsZWQgLSB1c2VyIG5vdCBhdXRoZW50aWNhdGVkJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFTlRFUlBSSVNFOiBPYnRlbmVyIGNvbnRleHRvIGNvbXBsZXRvIHkgdmFsaWRhY2nDs24gUkxTXHJcbiAgICBsZXQgZW50ZXJwcmlzZUNvbnRleHQgPSBudWxsO1xyXG4gICAgbGV0IHJsc1ZhbGlkYXRpb24gPSBudWxsO1xyXG5cclxuICAgIGlmIChlbnRlcnByaXNlUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgZW50ZXJwcmlzZUNvbnRleHQgPSBlbnRlcnByaXNlUmVzdWx0LmNvbnRleHQ7XHJcbiAgICAgIHJsc1ZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZVJMU0NvbnRleHQoZW50ZXJwcmlzZUNvbnRleHQhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMRUdBQ1k6IENvbXBhcmFyIGNvbiBtw6l0b2RvIGxlZ2FjeSBwYXJhIHZlcmlmaWNhciBtaWdyYWNpw7NuXHJcbiAgICBjb25zdCBjbGVya1VzZXJJZCA9IGFkbWluUmVzdWx0LnVzZXJJZCB8fCAoZW50ZXJwcmlzZVJlc3VsdC5zdWNjZXNzID8gZW50ZXJwcmlzZVJlc3VsdC5jb250ZXh0IS51c2VySWQgOiBudWxsKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+UjSBEZWJ1ZyBFbnRlcnByaXNlIHZzIExlZ2FjeTogVGVzdGluZyB3aXRoIHVzZXI6JywgY2xlcmtVc2VySWQpO1xyXG5cclxuICAgIGNvbnN0IGxlZ2FjeVJlc3VsdCA9IGNsZXJrVXNlcklkID8gYXdhaXQgY2hlY2tBZG1pbkFjY2VzcyhjbGVya1VzZXJJZCkgOiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHVzZXIgSUQnIH07XHJcblxyXG4gICAgLy8gRU5URVJQUklTRTogT2J0ZW5lciBlc3RhZMOtc3RpY2FzIGRlIGNhY2hlXHJcbiAgICBjb25zdCBjYWNoZVN0YXRzID0gZ2V0Q2FjaGVTdGF0cygpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGVudGVycHJpc2VSZXN1bHQuc3VjY2VzcyB8fCBhZG1pblJlc3VsdC5pc0FkbWluLFxyXG4gICAgICBlbnRlcnByaXNlOiB7XHJcbiAgICAgICAgc3RhdHVzOiBlbnRlcnByaXNlUmVzdWx0LnN1Y2Nlc3MgPyAnU1VDQ0VTUycgOiAnRkFJTEVEJyxcclxuICAgICAgICBjb250ZXh0OiBlbnRlcnByaXNlUmVzdWx0LnN1Y2Nlc3MgPyB7XHJcbiAgICAgICAgICB1c2VySWQ6IGVudGVycHJpc2VDb250ZXh0Py51c2VySWQsXHJcbiAgICAgICAgICByb2xlOiBlbnRlcnByaXNlQ29udGV4dD8ucm9sZSxcclxuICAgICAgICAgIHBlcm1pc3Npb25zOiBlbnRlcnByaXNlQ29udGV4dD8ucGVybWlzc2lvbnMsXHJcbiAgICAgICAgICBzZWN1cml0eUxldmVsOiBlbnRlcnByaXNlQ29udGV4dD8uc2VjdXJpdHlMZXZlbCxcclxuICAgICAgICAgIHZhbGlkYXRpb25zOiBlbnRlcnByaXNlQ29udGV4dD8udmFsaWRhdGlvbnNcclxuICAgICAgICB9IDogbnVsbCxcclxuICAgICAgICBybHM6IHJsc1ZhbGlkYXRpb24gPyB7XHJcbiAgICAgICAgICB2YWxpZDogcmxzVmFsaWRhdGlvbi52YWxpZCxcclxuICAgICAgICAgIGVycm9yOiBybHNWYWxpZGF0aW9uLmVycm9yXHJcbiAgICAgICAgfSA6IG51bGwsXHJcbiAgICAgICAgY2FjaGU6IGNhY2hlU3RhdHMsXHJcbiAgICAgICAgZXJyb3I6IGVudGVycHJpc2VSZXN1bHQuZXJyb3IsXHJcbiAgICAgICAgY29kZTogZW50ZXJwcmlzZVJlc3VsdC5jb2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZ2FjeToge1xyXG4gICAgICAgIHN0YXR1czogYWRtaW5SZXN1bHQuaXNBZG1pbiA/ICdTVUNDRVNTJyA6ICdGQUlMRUQnLFxyXG4gICAgICAgIHVzZXJJZDogYWRtaW5SZXN1bHQudXNlcklkLFxyXG4gICAgICAgIHNlc3Npb25JZDogYWRtaW5SZXN1bHQuc2Vzc2lvbklkLFxyXG4gICAgICAgIGlzQWRtaW46IGFkbWluUmVzdWx0LmlzQWRtaW4sXHJcbiAgICAgICAgZXJyb3I6IGFkbWluUmVzdWx0LmVycm9yLFxyXG4gICAgICAgIGNoZWNrQWRtaW5BY2Nlc3M6IHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGxlZ2FjeVJlc3VsdC5zdWNjZXNzLFxyXG4gICAgICAgICAgZXJyb3I6IGxlZ2FjeVJlc3VsdC5lcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbWlncmF0aW9uOiB7XHJcbiAgICAgICAgc3RhdHVzOiAnRU5URVJQUklTRV9DT01QTEVURUQnLFxyXG4gICAgICAgIGNvbXBhcmlzb246IHtcclxuICAgICAgICAgIGVudGVycHJpc2Vfc3VjY2VzczogZW50ZXJwcmlzZVJlc3VsdC5zdWNjZXNzLFxyXG4gICAgICAgICAgbGVnYWN5X3N1Y2Nlc3M6IGFkbWluUmVzdWx0LmlzQWRtaW4sXHJcbiAgICAgICAgICBtZXRob2RzX2FncmVlOiBlbnRlcnByaXNlUmVzdWx0LnN1Y2Nlc3MgPT09IGFkbWluUmVzdWx0LmlzQWRtaW4sXHJcbiAgICAgICAgICByZWNvbW1lbmRlZDogJ2VudGVycHJpc2UnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbXByb3ZlbWVudHM6IFtcclxuICAgICAgICAgICfinIUgRU5URVJQUklTRTogQXV0ZW50aWNhY2nDs24gY29uIG3Dumx0aXBsZXMgdmFsaWRhY2lvbmVzIGRlIHNlZ3VyaWRhZCcsXHJcbiAgICAgICAgICAn4pyFIEVOVEVSUFJJU0U6IFJvdyBMZXZlbCBTZWN1cml0eSAoUkxTKSBpbnRlZ3JhZG8nLFxyXG4gICAgICAgICAgJ+KchSBFTlRFUlBSSVNFOiBDYWNoZSBpbnRlbGlnZW50ZSBjb24gZXN0YWTDrXN0aWNhcycsXHJcbiAgICAgICAgICAn4pyFIEVOVEVSUFJJU0U6IENvbnRleHRvIGNvbXBsZXRvIGRlIHNlZ3VyaWRhZCcsXHJcbiAgICAgICAgICAn4pyFIEVOVEVSUFJJU0U6IFBlcm1pc29zIGdyYW51bGFyZXMnLFxyXG4gICAgICAgICAgJ+KaoO+4jyBMRUdBQ1k6IE3DqXRvZG8gYW50ZXJpb3IgYcO6biBmdW5jaW9uYWwgcGFyYSBjb21wYXRpYmlsaWRhZCdcclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIGRlYnVnOiB7XHJcbiAgICAgICAgY2xlcmtVc2VySWQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgcmVxdWVzdF9pbmZvOiB7XHJcbiAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxyXG4gICAgICAgICAgdXJsOiByZXF1ZXN0LnVybCxcclxuICAgICAgICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKT8uc3Vic3RyaW5nKDAsIDEwMClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign8J+UjSBEZWJ1ZyBjaGVja0FkbWluQWNjZXNzOiBFcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdVbmV4cGVjdGVkIGVycm9yJyxcclxuICAgICAgZGVidWc6IHtcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH1cclxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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