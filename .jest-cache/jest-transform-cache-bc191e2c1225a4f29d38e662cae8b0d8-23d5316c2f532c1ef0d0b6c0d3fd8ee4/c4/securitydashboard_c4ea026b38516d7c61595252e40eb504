88339037273fbd66d06649d8b37f3fd7
/**
 * Dashboard de Seguridad
 * Proporciona una interfaz unificada para monitoreo y gestión de seguridad
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get SecurityDashboard () {
        return SecurityDashboard;
    },
    get getSecurityDashboard () {
        return getSecurityDashboard;
    },
    get startGlobalSecurityDashboard () {
        return startGlobalSecurityDashboard;
    },
    get stopGlobalSecurityDashboard () {
        return stopGlobalSecurityDashboard;
    }
});
const _securityauditenhanced = require("./security-audit-enhanced");
class SecurityDashboard {
    constructor(config = {}){
        this.config = {
            refreshInterval: 30,
            alertThresholds: {
                criticalEvents: 1,
                authFailures: 10,
                suspiciousActivities: 5,
                securityScore: 70
            },
            autoAnalysis: true,
            notifications: {
                email: false,
                slack: false
            },
            ...config
        };
        this.lastUpdate = new Date();
    }
    /**
   * Inicia el dashboard de seguridad
   */ async start() {
        try {
            console.log('[SECURITY DASHBOARD] Iniciando dashboard de seguridad...');
            // Cargar datos iniciales
            await this.refreshData();
            // Iniciar monitoreo automático si está habilitado
            if (this.config.autoAnalysis) {
                this.monitoringInterval = (0, _securityauditenhanced.startSecurityMonitoring)(5); // cada 5 minutos
            }
            // Iniciar refresh automático de datos
            this.refreshInterval = setInterval(async ()=>{
                await this.refreshData();
            }, this.config.refreshInterval * 1000);
            console.log('[SECURITY DASHBOARD] Dashboard iniciado exitosamente');
        } catch (error) {
            console.error('[SECURITY DASHBOARD] Error iniciando dashboard:', error);
            throw error;
        }
    }
    /**
   * Detiene el dashboard de seguridad
   */ stop() {
        console.log('[SECURITY DASHBOARD] Deteniendo dashboard...');
        if (this.monitoringInterval) {
            (0, _securityauditenhanced.stopSecurityMonitoring)(this.monitoringInterval);
            this.monitoringInterval = undefined;
        }
        if (this.refreshInterval) {
            clearInterval(this.refreshInterval);
            this.refreshInterval = undefined;
        }
        console.log('[SECURITY DASHBOARD] Dashboard detenido');
    }
    /**
   * Actualiza los datos del dashboard
   */ async refreshData() {
        try {
            console.log('[SECURITY DASHBOARD] Actualizando datos...');
            // Obtener datos en paralelo
            const [metrics, alerts, healthCheck] = await Promise.all([
                (0, _securityauditenhanced.getSecurityMetrics)(),
                (0, _securityauditenhanced.getActiveSecurityAlerts)(),
                (0, _securityauditenhanced.runSecurityHealthCheck)()
            ]);
            // Calcular actividad reciente (comparar con datos anteriores)
            const recentActivity = {
                totalEvents: metrics.total_events_24h,
                criticalEvents: metrics.critical_events_24h,
                newAlerts: alerts.filter((a)=>new Date(a.first_occurrence) > new Date(Date.now() - 24 * 60 * 60 * 1000)).length,
                resolvedAlerts: 0
            };
            // Generar tendencias (simuladas por ahora)
            const trends = {
                eventsLast7Days: await this.getEventsTrend(7),
                alertsLast7Days: await this.getAlertsTrend(7),
                securityScoreTrend: await this.getSecurityScoreTrend(7)
            };
            this.cachedData = {
                metrics,
                alerts,
                healthCheck: {
                    status: healthCheck.status,
                    issues: healthCheck.issues,
                    recommendations: healthCheck.recommendations
                },
                recentActivity,
                trends
            };
            this.lastUpdate = new Date();
            // Verificar umbrales y generar alertas si es necesario
            await this.checkThresholds(metrics, alerts);
            console.log('[SECURITY DASHBOARD] Datos actualizados exitosamente');
            return this.cachedData;
        } catch (error) {
            console.error('[SECURITY DASHBOARD] Error actualizando datos:', error);
            throw error;
        }
    }
    /**
   * Obtiene los datos actuales del dashboard
   */ async getData(forceRefresh = false) {
        if (forceRefresh || !this.cachedData || Date.now() - this.lastUpdate.getTime() > this.config.refreshInterval * 1000) {
            return await this.refreshData();
        }
        return this.cachedData;
    }
    /**
   * Ejecuta un análisis manual de seguridad
   */ async runManualAnalysis(userId) {
        try {
            console.log('[SECURITY DASHBOARD] Ejecutando análisis manual...');
            const alerts = await (0, _securityauditenhanced.analyzeSecurityPatterns)(userId);
            // Actualizar datos después del análisis
            await this.refreshData();
            console.log(`[SECURITY DASHBOARD] Análisis completado: ${alerts.length} alertas generadas`);
            return alerts;
        } catch (error) {
            console.error('[SECURITY DASHBOARD] Error en análisis manual:', error);
            throw error;
        }
    }
    /**
   * Genera un reporte de seguridad
   */ async generateReport(startDate, endDate) {
        try {
            console.log('[SECURITY DASHBOARD] Generando reporte de seguridad...');
            const report = await (0, _securityauditenhanced.generateSecurityReport)(startDate, endDate);
            console.log('[SECURITY DASHBOARD] Reporte generado exitosamente');
            return report;
        } catch (error) {
            console.error('[SECURITY DASHBOARD] Error generando reporte:', error);
            throw error;
        }
    }
    /**
   * Obtiene el estado actual del dashboard
   */ getStatus() {
        return {
            isRunning: !!this.refreshInterval,
            lastUpdate: this.lastUpdate,
            config: this.config,
            uptime: Date.now() - this.lastUpdate.getTime()
        };
    }
    /**
   * Actualiza la configuración del dashboard
   */ updateConfig(newConfig) {
        this.config = {
            ...this.config,
            ...newConfig
        };
        console.log('[SECURITY DASHBOARD] Configuración actualizada');
    }
    // =====================================================
    // MÉTODOS PRIVADOS
    // =====================================================
    /**
   * Verifica umbrales y genera notificaciones
   */ async checkThresholds(metrics, alerts) {
        const issues = [];
        if (metrics.critical_events_24h >= this.config.alertThresholds.criticalEvents) {
            issues.push(`Eventos críticos: ${metrics.critical_events_24h} (umbral: ${this.config.alertThresholds.criticalEvents})`);
        }
        if (metrics.auth_failures_24h >= this.config.alertThresholds.authFailures) {
            issues.push(`Fallos de autenticación: ${metrics.auth_failures_24h} (umbral: ${this.config.alertThresholds.authFailures})`);
        }
        if (metrics.suspicious_activities_24h >= this.config.alertThresholds.suspiciousActivities) {
            issues.push(`Actividades sospechosas: ${metrics.suspicious_activities_24h} (umbral: ${this.config.alertThresholds.suspiciousActivities})`);
        }
        if (metrics.security_score <= this.config.alertThresholds.securityScore) {
            issues.push(`Score de seguridad bajo: ${metrics.security_score} (umbral: ${this.config.alertThresholds.securityScore})`);
        }
        if (issues.length > 0) {
            console.warn('[SECURITY DASHBOARD] Umbrales excedidos:', issues);
            await this.sendNotifications(issues);
        }
    }
    /**
   * Envía notificaciones según la configuración
   */ async sendNotifications(issues) {
        try {
            if (this.config.notifications.webhook) {
                // Enviar webhook
                const payload = {
                    timestamp: new Date().toISOString(),
                    source: 'security-dashboard',
                    level: 'warning',
                    message: 'Umbrales de seguridad excedidos',
                    issues
                };
                await fetch(this.config.notifications.webhook, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
            }
            // TODO: Implementar notificaciones por email y Slack
            if (this.config.notifications.email) {
                console.log('[SECURITY DASHBOARD] Enviando notificación por email...');
            }
            if (this.config.notifications.slack) {
                console.log('[SECURITY DASHBOARD] Enviando notificación por Slack...');
            }
        } catch (error) {
            console.error('[SECURITY DASHBOARD] Error enviando notificaciones:', error);
        }
    }
    /**
   * Obtiene tendencia de eventos (simulada)
   */ async getEventsTrend(days) {
        // TODO: Implementar consulta real a la base de datos
        return Array(days).fill(0).map(()=>Math.floor(Math.random() * 100));
    }
    /**
   * Obtiene tendencia de alertas (simulada)
   */ async getAlertsTrend(days) {
        // TODO: Implementar consulta real a la base de datos
        return Array(days).fill(0).map(()=>Math.floor(Math.random() * 10));
    }
    /**
   * Obtiene tendencia del score de seguridad (simulada)
   */ async getSecurityScoreTrend(days) {
        // TODO: Implementar consulta real a la base de datos
        return Array(days).fill(0).map(()=>Math.floor(Math.random() * 40) + 60);
    }
}
// =====================================================
// INSTANCIA SINGLETON DEL DASHBOARD
// =====================================================
let dashboardInstance = null;
function getSecurityDashboard(config) {
    if (!dashboardInstance) {
        dashboardInstance = new SecurityDashboard(config);
    }
    return dashboardInstance;
}
async function startGlobalSecurityDashboard(config) {
    const dashboard = getSecurityDashboard(config);
    await dashboard.start();
    return dashboard;
}
function stopGlobalSecurityDashboard() {
    if (dashboardInstance) {
        dashboardInstance.stop();
        dashboardInstance = null;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxhdXRoXFxzZWN1cml0eS1kYXNoYm9hcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXNoYm9hcmQgZGUgU2VndXJpZGFkXG4gKiBQcm9wb3JjaW9uYSB1bmEgaW50ZXJmYXogdW5pZmljYWRhIHBhcmEgbW9uaXRvcmVvIHkgZ2VzdGnDs24gZGUgc2VndXJpZGFkXG4gKi9cblxuaW1wb3J0IHtcbiAgZ2V0U2VjdXJpdHlNZXRyaWNzLFxuICBnZXRBY3RpdmVTZWN1cml0eUFsZXJ0cyxcbiAgYW5hbHl6ZVNlY3VyaXR5UGF0dGVybnMsXG4gIHJ1blNlY3VyaXR5SGVhbHRoQ2hlY2ssXG4gIGdlbmVyYXRlU2VjdXJpdHlSZXBvcnQsXG4gIHN0YXJ0U2VjdXJpdHlNb25pdG9yaW5nLFxuICBzdG9wU2VjdXJpdHlNb25pdG9yaW5nLFxuICB0eXBlIFNlY3VyaXR5TWV0cmljcyxcbiAgdHlwZSBTZWN1cml0eUFsZXJ0LFxuICB0eXBlIFNlY3VyaXR5UmVwb3J0LFxufSBmcm9tICcuL3NlY3VyaXR5LWF1ZGl0LWVuaGFuY2VkJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgWSBJTlRFUkZBQ0VTIERFTCBEQVNIQk9BUkRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlEYXNoYm9hcmREYXRhIHtcbiAgbWV0cmljczogU2VjdXJpdHlNZXRyaWNzXG4gIGFsZXJ0czogU2VjdXJpdHlBbGVydFtdXG4gIGhlYWx0aENoZWNrOiB7XG4gICAgc3RhdHVzOiAnaGVhbHRoeScgfCAnd2FybmluZycgfCAnY3JpdGljYWwnXG4gICAgaXNzdWVzOiBzdHJpbmdbXVxuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW11cbiAgfVxuICByZWNlbnRBY3Rpdml0eToge1xuICAgIHRvdGFsRXZlbnRzOiBudW1iZXJcbiAgICBjcml0aWNhbEV2ZW50czogbnVtYmVyXG4gICAgbmV3QWxlcnRzOiBudW1iZXJcbiAgICByZXNvbHZlZEFsZXJ0czogbnVtYmVyXG4gIH1cbiAgdHJlbmRzOiB7XG4gICAgZXZlbnRzTGFzdDdEYXlzOiBudW1iZXJbXVxuICAgIGFsZXJ0c0xhc3Q3RGF5czogbnVtYmVyW11cbiAgICBzZWN1cml0eVNjb3JlVHJlbmQ6IG51bWJlcltdXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eURhc2hib2FyZENvbmZpZyB7XG4gIHJlZnJlc2hJbnRlcnZhbDogbnVtYmVyIC8vIGVuIHNlZ3VuZG9zXG4gIGFsZXJ0VGhyZXNob2xkczoge1xuICAgIGNyaXRpY2FsRXZlbnRzOiBudW1iZXJcbiAgICBhdXRoRmFpbHVyZXM6IG51bWJlclxuICAgIHN1c3BpY2lvdXNBY3Rpdml0aWVzOiBudW1iZXJcbiAgICBzZWN1cml0eVNjb3JlOiBudW1iZXJcbiAgfVxuICBhdXRvQW5hbHlzaXM6IGJvb2xlYW5cbiAgbm90aWZpY2F0aW9uczoge1xuICAgIGVtYWlsOiBib29sZWFuXG4gICAgc2xhY2s6IGJvb2xlYW5cbiAgICB3ZWJob29rPzogc3RyaW5nXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENMQVNFIFBSSU5DSVBBTCBERUwgREFTSEJPQVJEXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY2xhc3MgU2VjdXJpdHlEYXNoYm9hcmQge1xuICBwcml2YXRlIGNvbmZpZzogU2VjdXJpdHlEYXNoYm9hcmRDb25maWdcbiAgcHJpdmF0ZSBtb25pdG9yaW5nSW50ZXJ2YWw/OiBOb2RlSlMuVGltZW91dFxuICBwcml2YXRlIHJlZnJlc2hJbnRlcnZhbD86IE5vZGVKUy5UaW1lb3V0XG4gIHByaXZhdGUgbGFzdFVwZGF0ZTogRGF0ZVxuICBwcml2YXRlIGNhY2hlZERhdGE/OiBTZWN1cml0eURhc2hib2FyZERhdGFcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8U2VjdXJpdHlEYXNoYm9hcmRDb25maWc+ID0ge30pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIHJlZnJlc2hJbnRlcnZhbDogMzAsIC8vIDMwIHNlZ3VuZG9zIHBvciBkZWZlY3RvXG4gICAgICBhbGVydFRocmVzaG9sZHM6IHtcbiAgICAgICAgY3JpdGljYWxFdmVudHM6IDEsXG4gICAgICAgIGF1dGhGYWlsdXJlczogMTAsXG4gICAgICAgIHN1c3BpY2lvdXNBY3Rpdml0aWVzOiA1LFxuICAgICAgICBzZWN1cml0eVNjb3JlOiA3MCxcbiAgICAgIH0sXG4gICAgICBhdXRvQW5hbHlzaXM6IHRydWUsXG4gICAgICBub3RpZmljYXRpb25zOiB7XG4gICAgICAgIGVtYWlsOiBmYWxzZSxcbiAgICAgICAgc2xhY2s6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9XG4gICAgdGhpcy5sYXN0VXBkYXRlID0gbmV3IERhdGUoKVxuICB9XG5cbiAgLyoqXG4gICAqIEluaWNpYSBlbCBkYXNoYm9hcmQgZGUgc2VndXJpZGFkXG4gICAqL1xuICBhc3luYyBzdGFydCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWSBEQVNIQk9BUkRdIEluaWNpYW5kbyBkYXNoYm9hcmQgZGUgc2VndXJpZGFkLi4uJylcblxuICAgICAgLy8gQ2FyZ2FyIGRhdG9zIGluaWNpYWxlc1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoRGF0YSgpXG5cbiAgICAgIC8vIEluaWNpYXIgbW9uaXRvcmVvIGF1dG9tw6F0aWNvIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5hdXRvQW5hbHlzaXMpIHtcbiAgICAgICAgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwgPSBzdGFydFNlY3VyaXR5TW9uaXRvcmluZyg1KSAvLyBjYWRhIDUgbWludXRvc1xuICAgICAgfVxuXG4gICAgICAvLyBJbmljaWFyIHJlZnJlc2ggYXV0b23DoXRpY28gZGUgZGF0b3NcbiAgICAgIHRoaXMucmVmcmVzaEludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hEYXRhKClcbiAgICAgIH0sIHRoaXMuY29uZmlnLnJlZnJlc2hJbnRlcnZhbCAqIDEwMDApXG5cbiAgICAgIGNvbnNvbGUubG9nKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBEYXNoYm9hcmQgaW5pY2lhZG8gZXhpdG9zYW1lbnRlJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1NFQ1VSSVRZIERBU0hCT0FSRF0gRXJyb3IgaW5pY2lhbmRvIGRhc2hib2FyZDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGllbmUgZWwgZGFzaGJvYXJkIGRlIHNlZ3VyaWRhZFxuICAgKi9cbiAgc3RvcCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZIERBU0hCT0FSRF0gRGV0ZW5pZW5kbyBkYXNoYm9hcmQuLi4nKVxuXG4gICAgaWYgKHRoaXMubW9uaXRvcmluZ0ludGVydmFsKSB7XG4gICAgICBzdG9wU2VjdXJpdHlNb25pdG9yaW5nKHRoaXMubW9uaXRvcmluZ0ludGVydmFsKVxuICAgICAgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWZyZXNoSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZWZyZXNoSW50ZXJ2YWwpXG4gICAgICB0aGlzLnJlZnJlc2hJbnRlcnZhbCA9IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBEYXNoYm9hcmQgZGV0ZW5pZG8nKVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdHVhbGl6YSBsb3MgZGF0b3MgZGVsIGRhc2hib2FyZFxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaERhdGEoKTogUHJvbWlzZTxTZWN1cml0eURhc2hib2FyZERhdGE+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWSBEQVNIQk9BUkRdIEFjdHVhbGl6YW5kbyBkYXRvcy4uLicpXG5cbiAgICAgIC8vIE9idGVuZXIgZGF0b3MgZW4gcGFyYWxlbG9cbiAgICAgIGNvbnN0IFttZXRyaWNzLCBhbGVydHMsIGhlYWx0aENoZWNrXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0U2VjdXJpdHlNZXRyaWNzKCksXG4gICAgICAgIGdldEFjdGl2ZVNlY3VyaXR5QWxlcnRzKCksXG4gICAgICAgIHJ1blNlY3VyaXR5SGVhbHRoQ2hlY2soKSxcbiAgICAgIF0pXG5cbiAgICAgIC8vIENhbGN1bGFyIGFjdGl2aWRhZCByZWNpZW50ZSAoY29tcGFyYXIgY29uIGRhdG9zIGFudGVyaW9yZXMpXG4gICAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IHtcbiAgICAgICAgdG90YWxFdmVudHM6IG1ldHJpY3MudG90YWxfZXZlbnRzXzI0aCxcbiAgICAgICAgY3JpdGljYWxFdmVudHM6IG1ldHJpY3MuY3JpdGljYWxfZXZlbnRzXzI0aCxcbiAgICAgICAgbmV3QWxlcnRzOiBhbGVydHMuZmlsdGVyKFxuICAgICAgICAgIGEgPT4gbmV3IERhdGUoYS5maXJzdF9vY2N1cnJlbmNlKSA+IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgICAgICApLmxlbmd0aCxcbiAgICAgICAgcmVzb2x2ZWRBbGVydHM6IDAsIC8vIFRPRE86IGltcGxlbWVudGFyIGN1YW5kbyBzZSB0ZW5nYSBoaXN0w7NyaWNvXG4gICAgICB9XG5cbiAgICAgIC8vIEdlbmVyYXIgdGVuZGVuY2lhcyAoc2ltdWxhZGFzIHBvciBhaG9yYSlcbiAgICAgIGNvbnN0IHRyZW5kcyA9IHtcbiAgICAgICAgZXZlbnRzTGFzdDdEYXlzOiBhd2FpdCB0aGlzLmdldEV2ZW50c1RyZW5kKDcpLFxuICAgICAgICBhbGVydHNMYXN0N0RheXM6IGF3YWl0IHRoaXMuZ2V0QWxlcnRzVHJlbmQoNyksXG4gICAgICAgIHNlY3VyaXR5U2NvcmVUcmVuZDogYXdhaXQgdGhpcy5nZXRTZWN1cml0eVNjb3JlVHJlbmQoNyksXG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FjaGVkRGF0YSA9IHtcbiAgICAgICAgbWV0cmljcyxcbiAgICAgICAgYWxlcnRzLFxuICAgICAgICBoZWFsdGhDaGVjazoge1xuICAgICAgICAgIHN0YXR1czogaGVhbHRoQ2hlY2suc3RhdHVzLFxuICAgICAgICAgIGlzc3VlczogaGVhbHRoQ2hlY2suaXNzdWVzLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogaGVhbHRoQ2hlY2sucmVjb21tZW5kYXRpb25zLFxuICAgICAgICB9LFxuICAgICAgICByZWNlbnRBY3Rpdml0eSxcbiAgICAgICAgdHJlbmRzLFxuICAgICAgfVxuXG4gICAgICB0aGlzLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpXG5cbiAgICAgIC8vIFZlcmlmaWNhciB1bWJyYWxlcyB5IGdlbmVyYXIgYWxlcnRhcyBzaSBlcyBuZWNlc2FyaW9cbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tUaHJlc2hvbGRzKG1ldHJpY3MsIGFsZXJ0cylcblxuICAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWSBEQVNIQk9BUkRdIERhdG9zIGFjdHVhbGl6YWRvcyBleGl0b3NhbWVudGUnKVxuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBFcnJvciBhY3R1YWxpemFuZG8gZGF0b3M6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRpZW5lIGxvcyBkYXRvcyBhY3R1YWxlcyBkZWwgZGFzaGJvYXJkXG4gICAqL1xuICBhc3luYyBnZXREYXRhKGZvcmNlUmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxTZWN1cml0eURhc2hib2FyZERhdGE+IHtcbiAgICBpZiAoXG4gICAgICBmb3JjZVJlZnJlc2ggfHxcbiAgICAgICF0aGlzLmNhY2hlZERhdGEgfHxcbiAgICAgIERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGUuZ2V0VGltZSgpID4gdGhpcy5jb25maWcucmVmcmVzaEludGVydmFsICogMTAwMFxuICAgICkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVmcmVzaERhdGEoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZWREYXRhXG4gIH1cblxuICAvKipcbiAgICogRWplY3V0YSB1biBhbsOhbGlzaXMgbWFudWFsIGRlIHNlZ3VyaWRhZFxuICAgKi9cbiAgYXN5bmMgcnVuTWFudWFsQW5hbHlzaXModXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxTZWN1cml0eUFsZXJ0W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tTRUNVUklUWSBEQVNIQk9BUkRdIEVqZWN1dGFuZG8gYW7DoWxpc2lzIG1hbnVhbC4uLicpXG5cbiAgICAgIGNvbnN0IGFsZXJ0cyA9IGF3YWl0IGFuYWx5emVTZWN1cml0eVBhdHRlcm5zKHVzZXJJZClcblxuICAgICAgLy8gQWN0dWFsaXphciBkYXRvcyBkZXNwdcOpcyBkZWwgYW7DoWxpc2lzXG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2hEYXRhKClcblxuICAgICAgY29uc29sZS5sb2coYFtTRUNVUklUWSBEQVNIQk9BUkRdIEFuw6FsaXNpcyBjb21wbGV0YWRvOiAke2FsZXJ0cy5sZW5ndGh9IGFsZXJ0YXMgZ2VuZXJhZGFzYClcbiAgICAgIHJldHVybiBhbGVydHNcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1NFQ1VSSVRZIERBU0hCT0FSRF0gRXJyb3IgZW4gYW7DoWxpc2lzIG1hbnVhbDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYSB1biByZXBvcnRlIGRlIHNlZ3VyaWRhZFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVSZXBvcnQoc3RhcnREYXRlOiBEYXRlLCBlbmREYXRlOiBEYXRlKTogUHJvbWlzZTxTZWN1cml0eVJlcG9ydD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZIERBU0hCT0FSRF0gR2VuZXJhbmRvIHJlcG9ydGUgZGUgc2VndXJpZGFkLi4uJylcblxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgZ2VuZXJhdGVTZWN1cml0eVJlcG9ydChzdGFydERhdGUsIGVuZERhdGUpXG5cbiAgICAgIGNvbnNvbGUubG9nKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBSZXBvcnRlIGdlbmVyYWRvIGV4aXRvc2FtZW50ZScpXG4gICAgICByZXR1cm4gcmVwb3J0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTRUNVUklUWSBEQVNIQk9BUkRdIEVycm9yIGdlbmVyYW5kbyByZXBvcnRlOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT2J0aWVuZSBlbCBlc3RhZG8gYWN0dWFsIGRlbCBkYXNoYm9hcmRcbiAgICovXG4gIGdldFN0YXR1cygpOiB7XG4gICAgaXNSdW5uaW5nOiBib29sZWFuXG4gICAgbGFzdFVwZGF0ZTogRGF0ZVxuICAgIGNvbmZpZzogU2VjdXJpdHlEYXNoYm9hcmRDb25maWdcbiAgICB1cHRpbWU6IG51bWJlclxuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNSdW5uaW5nOiAhIXRoaXMucmVmcmVzaEludGVydmFsLFxuICAgICAgbGFzdFVwZGF0ZTogdGhpcy5sYXN0VXBkYXRlLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgIHVwdGltZTogRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZS5nZXRUaW1lKCksXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdHVhbGl6YSBsYSBjb25maWd1cmFjacOzbiBkZWwgZGFzaGJvYXJkXG4gICAqL1xuICB1cGRhdGVDb25maWcobmV3Q29uZmlnOiBQYXJ0aWFsPFNlY3VyaXR5RGFzaGJvYXJkQ29uZmlnPik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH1cbiAgICBjb25zb2xlLmxvZygnW1NFQ1VSSVRZIERBU0hCT0FSRF0gQ29uZmlndXJhY2nDs24gYWN0dWFsaXphZGEnKVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTcOJVE9ET1MgUFJJVkFET1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogVmVyaWZpY2EgdW1icmFsZXMgeSBnZW5lcmEgbm90aWZpY2FjaW9uZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tUaHJlc2hvbGRzKG1ldHJpY3M6IFNlY3VyaXR5TWV0cmljcywgYWxlcnRzOiBTZWN1cml0eUFsZXJ0W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW11cblxuICAgIGlmIChtZXRyaWNzLmNyaXRpY2FsX2V2ZW50c18yNGggPj0gdGhpcy5jb25maWcuYWxlcnRUaHJlc2hvbGRzLmNyaXRpY2FsRXZlbnRzKSB7XG4gICAgICBpc3N1ZXMucHVzaChcbiAgICAgICAgYEV2ZW50b3MgY3LDrXRpY29zOiAke21ldHJpY3MuY3JpdGljYWxfZXZlbnRzXzI0aH0gKHVtYnJhbDogJHt0aGlzLmNvbmZpZy5hbGVydFRocmVzaG9sZHMuY3JpdGljYWxFdmVudHN9KWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5hdXRoX2ZhaWx1cmVzXzI0aCA+PSB0aGlzLmNvbmZpZy5hbGVydFRocmVzaG9sZHMuYXV0aEZhaWx1cmVzKSB7XG4gICAgICBpc3N1ZXMucHVzaChcbiAgICAgICAgYEZhbGxvcyBkZSBhdXRlbnRpY2FjacOzbjogJHttZXRyaWNzLmF1dGhfZmFpbHVyZXNfMjRofSAodW1icmFsOiAke3RoaXMuY29uZmlnLmFsZXJ0VGhyZXNob2xkcy5hdXRoRmFpbHVyZXN9KWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5zdXNwaWNpb3VzX2FjdGl2aXRpZXNfMjRoID49IHRoaXMuY29uZmlnLmFsZXJ0VGhyZXNob2xkcy5zdXNwaWNpb3VzQWN0aXZpdGllcykge1xuICAgICAgaXNzdWVzLnB1c2goXG4gICAgICAgIGBBY3RpdmlkYWRlcyBzb3NwZWNob3NhczogJHttZXRyaWNzLnN1c3BpY2lvdXNfYWN0aXZpdGllc18yNGh9ICh1bWJyYWw6ICR7dGhpcy5jb25maWcuYWxlcnRUaHJlc2hvbGRzLnN1c3BpY2lvdXNBY3Rpdml0aWVzfSlgXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKG1ldHJpY3Muc2VjdXJpdHlfc2NvcmUgPD0gdGhpcy5jb25maWcuYWxlcnRUaHJlc2hvbGRzLnNlY3VyaXR5U2NvcmUpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKFxuICAgICAgICBgU2NvcmUgZGUgc2VndXJpZGFkIGJham86ICR7bWV0cmljcy5zZWN1cml0eV9zY29yZX0gKHVtYnJhbDogJHt0aGlzLmNvbmZpZy5hbGVydFRocmVzaG9sZHMuc2VjdXJpdHlTY29yZX0pYFxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChpc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS53YXJuKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBVbWJyYWxlcyBleGNlZGlkb3M6JywgaXNzdWVzKVxuICAgICAgYXdhaXQgdGhpcy5zZW5kTm90aWZpY2F0aW9ucyhpc3N1ZXMpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVudsOtYSBub3RpZmljYWNpb25lcyBzZWfDum4gbGEgY29uZmlndXJhY2nDs25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2VuZE5vdGlmaWNhdGlvbnMoaXNzdWVzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5jb25maWcubm90aWZpY2F0aW9ucy53ZWJob29rKSB7XG4gICAgICAgIC8vIEVudmlhciB3ZWJob29rXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc291cmNlOiAnc2VjdXJpdHktZGFzaGJvYXJkJyxcbiAgICAgICAgICBsZXZlbDogJ3dhcm5pbmcnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVbWJyYWxlcyBkZSBzZWd1cmlkYWQgZXhjZWRpZG9zJyxcbiAgICAgICAgICBpc3N1ZXMsXG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBmZXRjaCh0aGlzLmNvbmZpZy5ub3RpZmljYXRpb25zLndlYmhvb2ssIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogSW1wbGVtZW50YXIgbm90aWZpY2FjaW9uZXMgcG9yIGVtYWlsIHkgU2xhY2tcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5ub3RpZmljYXRpb25zLmVtYWlsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBFbnZpYW5kbyBub3RpZmljYWNpw7NuIHBvciBlbWFpbC4uLicpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5ub3RpZmljYXRpb25zLnNsYWNrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbU0VDVVJJVFkgREFTSEJPQVJEXSBFbnZpYW5kbyBub3RpZmljYWNpw7NuIHBvciBTbGFjay4uLicpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTRUNVUklUWSBEQVNIQk9BUkRdIEVycm9yIGVudmlhbmRvIG5vdGlmaWNhY2lvbmVzOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRpZW5lIHRlbmRlbmNpYSBkZSBldmVudG9zIChzaW11bGFkYSlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0RXZlbnRzVHJlbmQoZGF5czogbnVtYmVyKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudGFyIGNvbnN1bHRhIHJlYWwgYSBsYSBiYXNlIGRlIGRhdG9zXG4gICAgcmV0dXJuIEFycmF5KGRheXMpXG4gICAgICAuZmlsbCgwKVxuICAgICAgLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApKVxuICB9XG5cbiAgLyoqXG4gICAqIE9idGllbmUgdGVuZGVuY2lhIGRlIGFsZXJ0YXMgKHNpbXVsYWRhKVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRBbGVydHNUcmVuZChkYXlzOiBudW1iZXIpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50YXIgY29uc3VsdGEgcmVhbCBhIGxhIGJhc2UgZGUgZGF0b3NcbiAgICByZXR1cm4gQXJyYXkoZGF5cylcbiAgICAgIC5maWxsKDApXG4gICAgICAubWFwKCgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRpZW5lIHRlbmRlbmNpYSBkZWwgc2NvcmUgZGUgc2VndXJpZGFkIChzaW11bGFkYSlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0U2VjdXJpdHlTY29yZVRyZW5kKGRheXM6IG51bWJlcik6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnRhciBjb25zdWx0YSByZWFsIGEgbGEgYmFzZSBkZSBkYXRvc1xuICAgIHJldHVybiBBcnJheShkYXlzKVxuICAgICAgLmZpbGwoMClcbiAgICAgIC5tYXAoKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDApICsgNjApXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElOU1RBTkNJQSBTSU5HTEVUT04gREVMIERBU0hCT0FSRFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxubGV0IGRhc2hib2FyZEluc3RhbmNlOiBTZWN1cml0eURhc2hib2FyZCB8IG51bGwgPSBudWxsXG5cbi8qKlxuICogT2J0aWVuZSBsYSBpbnN0YW5jaWEgc2luZ2xldG9uIGRlbCBkYXNoYm9hcmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlY3VyaXR5RGFzaGJvYXJkKGNvbmZpZz86IFBhcnRpYWw8U2VjdXJpdHlEYXNoYm9hcmRDb25maWc+KTogU2VjdXJpdHlEYXNoYm9hcmQge1xuICBpZiAoIWRhc2hib2FyZEluc3RhbmNlKSB7XG4gICAgZGFzaGJvYXJkSW5zdGFuY2UgPSBuZXcgU2VjdXJpdHlEYXNoYm9hcmQoY29uZmlnKVxuICB9XG4gIHJldHVybiBkYXNoYm9hcmRJbnN0YW5jZVxufVxuXG4vKipcbiAqIEluaWNpYSBlbCBkYXNoYm9hcmQgZ2xvYmFsIGRlIHNlZ3VyaWRhZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRHbG9iYWxTZWN1cml0eURhc2hib2FyZChcbiAgY29uZmlnPzogUGFydGlhbDxTZWN1cml0eURhc2hib2FyZENvbmZpZz5cbik6IFByb21pc2U8U2VjdXJpdHlEYXNoYm9hcmQ+IHtcbiAgY29uc3QgZGFzaGJvYXJkID0gZ2V0U2VjdXJpdHlEYXNoYm9hcmQoY29uZmlnKVxuICBhd2FpdCBkYXNoYm9hcmQuc3RhcnQoKVxuICByZXR1cm4gZGFzaGJvYXJkXG59XG5cbi8qKlxuICogRGV0aWVuZSBlbCBkYXNoYm9hcmQgZ2xvYmFsIGRlIHNlZ3VyaWRhZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcEdsb2JhbFNlY3VyaXR5RGFzaGJvYXJkKCk6IHZvaWQge1xuICBpZiAoZGFzaGJvYXJkSW5zdGFuY2UpIHtcbiAgICBkYXNoYm9hcmRJbnN0YW5jZS5zdG9wKClcbiAgICBkYXNoYm9hcmRJbnN0YW5jZSA9IG51bGxcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlNlY3VyaXR5RGFzaGJvYXJkIiwiZ2V0U2VjdXJpdHlEYXNoYm9hcmQiLCJzdGFydEdsb2JhbFNlY3VyaXR5RGFzaGJvYXJkIiwic3RvcEdsb2JhbFNlY3VyaXR5RGFzaGJvYXJkIiwiY29uZmlnIiwicmVmcmVzaEludGVydmFsIiwiYWxlcnRUaHJlc2hvbGRzIiwiY3JpdGljYWxFdmVudHMiLCJhdXRoRmFpbHVyZXMiLCJzdXNwaWNpb3VzQWN0aXZpdGllcyIsInNlY3VyaXR5U2NvcmUiLCJhdXRvQW5hbHlzaXMiLCJub3RpZmljYXRpb25zIiwiZW1haWwiLCJzbGFjayIsImxhc3RVcGRhdGUiLCJEYXRlIiwic3RhcnQiLCJjb25zb2xlIiwibG9nIiwicmVmcmVzaERhdGEiLCJtb25pdG9yaW5nSW50ZXJ2YWwiLCJzdGFydFNlY3VyaXR5TW9uaXRvcmluZyIsInNldEludGVydmFsIiwiZXJyb3IiLCJzdG9wIiwic3RvcFNlY3VyaXR5TW9uaXRvcmluZyIsInVuZGVmaW5lZCIsImNsZWFySW50ZXJ2YWwiLCJtZXRyaWNzIiwiYWxlcnRzIiwiaGVhbHRoQ2hlY2siLCJQcm9taXNlIiwiYWxsIiwiZ2V0U2VjdXJpdHlNZXRyaWNzIiwiZ2V0QWN0aXZlU2VjdXJpdHlBbGVydHMiLCJydW5TZWN1cml0eUhlYWx0aENoZWNrIiwicmVjZW50QWN0aXZpdHkiLCJ0b3RhbEV2ZW50cyIsInRvdGFsX2V2ZW50c18yNGgiLCJjcml0aWNhbF9ldmVudHNfMjRoIiwibmV3QWxlcnRzIiwiZmlsdGVyIiwiYSIsImZpcnN0X29jY3VycmVuY2UiLCJub3ciLCJsZW5ndGgiLCJyZXNvbHZlZEFsZXJ0cyIsInRyZW5kcyIsImV2ZW50c0xhc3Q3RGF5cyIsImdldEV2ZW50c1RyZW5kIiwiYWxlcnRzTGFzdDdEYXlzIiwiZ2V0QWxlcnRzVHJlbmQiLCJzZWN1cml0eVNjb3JlVHJlbmQiLCJnZXRTZWN1cml0eVNjb3JlVHJlbmQiLCJjYWNoZWREYXRhIiwic3RhdHVzIiwiaXNzdWVzIiwicmVjb21tZW5kYXRpb25zIiwiY2hlY2tUaHJlc2hvbGRzIiwiZ2V0RGF0YSIsImZvcmNlUmVmcmVzaCIsImdldFRpbWUiLCJydW5NYW51YWxBbmFseXNpcyIsInVzZXJJZCIsImFuYWx5emVTZWN1cml0eVBhdHRlcm5zIiwiZ2VuZXJhdGVSZXBvcnQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmVwb3J0IiwiZ2VuZXJhdGVTZWN1cml0eVJlcG9ydCIsImdldFN0YXR1cyIsImlzUnVubmluZyIsInVwdGltZSIsInVwZGF0ZUNvbmZpZyIsIm5ld0NvbmZpZyIsInB1c2giLCJhdXRoX2ZhaWx1cmVzXzI0aCIsInN1c3BpY2lvdXNfYWN0aXZpdGllc18yNGgiLCJzZWN1cml0eV9zY29yZSIsIndhcm4iLCJzZW5kTm90aWZpY2F0aW9ucyIsIndlYmhvb2siLCJwYXlsb2FkIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJzb3VyY2UiLCJsZXZlbCIsIm1lc3NhZ2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRheXMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJkYXNoYm9hcmRJbnN0YW5jZSIsImRhc2hib2FyZCJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs7Ozs7OztRQTREWUE7ZUFBQUE7O1FBK1RHQztlQUFBQTs7UUFVTUM7ZUFBQUE7O1FBV05DO2VBQUFBOzs7dUNBbllUO0FBK0NBLE1BQU1IO0lBT1gsWUFBWUksU0FBMkMsQ0FBQyxDQUFDLENBQUU7UUFDekQsSUFBSSxDQUFDQSxNQUFNLEdBQUc7WUFDWkMsaUJBQWlCO1lBQ2pCQyxpQkFBaUI7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGNBQWM7Z0JBQ2RDLHNCQUFzQjtnQkFDdEJDLGVBQWU7WUFDakI7WUFDQUMsY0FBYztZQUNkQyxlQUFlO2dCQUNiQyxPQUFPO2dCQUNQQyxPQUFPO1lBQ1Q7WUFDQSxHQUFHVixNQUFNO1FBQ1g7UUFDQSxJQUFJLENBQUNXLFVBQVUsR0FBRyxJQUFJQztJQUN4QjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsUUFBdUI7UUFDM0IsSUFBSTtZQUNGQyxRQUFRQyxHQUFHLENBQUM7WUFFWix5QkFBeUI7WUFDekIsTUFBTSxJQUFJLENBQUNDLFdBQVc7WUFFdEIsa0RBQWtEO1lBQ2xELElBQUksSUFBSSxDQUFDaEIsTUFBTSxDQUFDTyxZQUFZLEVBQUU7Z0JBQzVCLElBQUksQ0FBQ1Usa0JBQWtCLEdBQUdDLElBQUFBLDhDQUF1QixFQUFDLElBQUcsaUJBQWlCO1lBQ3hFO1lBRUEsc0NBQXNDO1lBQ3RDLElBQUksQ0FBQ2pCLGVBQWUsR0FBR2tCLFlBQVk7Z0JBQ2pDLE1BQU0sSUFBSSxDQUFDSCxXQUFXO1lBQ3hCLEdBQUcsSUFBSSxDQUFDaEIsTUFBTSxDQUFDQyxlQUFlLEdBQUc7WUFFakNhLFFBQVFDLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT0ssT0FBTztZQUNkTixRQUFRTSxLQUFLLENBQUMsbURBQW1EQTtZQUNqRSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQTs7R0FF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