{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\testing\\automated-testing-manager.ts"],"sourcesContent":["// ===================================\n// PINTEYA E-COMMERCE - AUTOMATED TESTING MANAGER\n// Sistema de testing automatizado con regression, performance y accessibility\n// ===================================\n\n// Importar performance hooks solo en servidor\nconst perfHooks = typeof window === 'undefined' ? require('perf_hooks') : null\n\n// Helper para obtener timestamp de performance\nconst getPerformanceNow = (): number => {\n  if (typeof window !== 'undefined' && window.performance) {\n    return window.getPerformanceNow()\n  }\n  if (perfHooks && perfHooks.performance) {\n    return perfHooks.getPerformanceNow()\n  }\n  return Date.now()\n}\n\n// ===================================\n// TIPOS Y INTERFACES\n// ===================================\n\ninterface TestResult {\n  name: string\n  status: 'passed' | 'failed' | 'skipped'\n  duration: number\n  error?: string\n  details?: any\n}\n\ninterface TestSuite {\n  name: string\n  tests: TestResult[]\n  totalTests: number\n  passedTests: number\n  failedTests: number\n  skippedTests: number\n  duration: number\n}\n\ninterface PerformanceMetrics {\n  loadTime: number\n  renderTime: number\n  memoryUsage: number\n  bundleSize: number\n  lighthouse?: {\n    performance: number\n    accessibility: number\n    bestPractices: number\n    seo: number\n  }\n}\n\ninterface AccessibilityResult {\n  violations: Array<{\n    id: string\n    impact: 'minor' | 'moderate' | 'serious' | 'critical'\n    description: string\n    nodes: number\n  }>\n  passes: number\n  incomplete: number\n  score: number\n}\n\ninterface RegressionTestConfig {\n  baselineUrl?: string\n  threshold: number\n  components: string[]\n  apis: string[]\n}\n\n// ===================================\n// AUTOMATED TESTING MANAGER\n// ===================================\n\nclass AutomatedTestingManager {\n  private static instance: AutomatedTestingManager\n  private testResults: Map<string, TestSuite> = new Map()\n  private performanceBaselines: Map<string, PerformanceMetrics> = new Map()\n\n  static getInstance(): AutomatedTestingManager {\n    if (!AutomatedTestingManager.instance) {\n      AutomatedTestingManager.instance = new AutomatedTestingManager()\n    }\n    return AutomatedTestingManager.instance\n  }\n\n  // ===================================\n  // REGRESSION TESTING\n  // ===================================\n\n  /**\n   * Ejecutar tests de regresión\n   */\n  async runRegressionTests(config: RegressionTestConfig): Promise<TestSuite> {\n    const startTime = getPerformanceNow()\n    const tests: TestResult[] = []\n\n    console.log('[Testing] Iniciando tests de regresión...')\n\n    // Test de componentes\n    for (const component of config.components) {\n      const testResult = await this.testComponentRegression(component, config.threshold)\n      tests.push(testResult)\n    }\n\n    // Test de APIs\n    for (const api of config.apis) {\n      const testResult = await this.testApiRegression(api, config.threshold)\n      tests.push(testResult)\n    }\n\n    const duration = getPerformanceNow() - startTime\n    const suite: TestSuite = {\n      name: 'Regression Tests',\n      tests,\n      totalTests: tests.length,\n      passedTests: tests.filter(t => t.status === 'passed').length,\n      failedTests: tests.filter(t => t.status === 'failed').length,\n      skippedTests: tests.filter(t => t.status === 'skipped').length,\n      duration,\n    }\n\n    this.testResults.set('regression', suite)\n    return suite\n  }\n\n  /**\n   * Test de regresión de componente\n   */\n  private async testComponentRegression(component: string, threshold: number): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      // Simular test de componente\n      const currentMetrics = await this.measureComponentPerformance(component)\n      const baseline = this.performanceBaselines.get(component)\n\n      if (!baseline) {\n        // Establecer baseline si no existe\n        this.performanceBaselines.set(component, currentMetrics)\n        return {\n          name: `${component} - Baseline Set`,\n          status: 'passed',\n          duration: getPerformanceNow() - startTime,\n          details: currentMetrics,\n        }\n      }\n\n      // Comparar con baseline\n      const performanceDelta =\n        (currentMetrics.renderTime - baseline.renderTime) / baseline.renderTime\n\n      if (performanceDelta > threshold) {\n        return {\n          name: `${component} - Performance Regression`,\n          status: 'failed',\n          duration: getPerformanceNow() - startTime,\n          error: `Performance degraded by ${(performanceDelta * 100).toFixed(2)}%`,\n          details: { current: currentMetrics, baseline },\n        }\n      }\n\n      return {\n        name: `${component} - Performance Check`,\n        status: 'passed',\n        duration: getPerformanceNow() - startTime,\n        details: { current: currentMetrics, baseline },\n      }\n    } catch (error) {\n      return {\n        name: `${component} - Error`,\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  /**\n   * Test de regresión de API\n   */\n  private async testApiRegression(api: string, threshold: number): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      // Simular test de API\n      const response = await this.testApiEndpoint(api)\n      const responseTime = getPerformanceNow() - startTime\n\n      if (responseTime > threshold) {\n        return {\n          name: `${api} - Response Time`,\n          status: 'failed',\n          duration: responseTime,\n          error: `Response time ${responseTime.toFixed(2)}ms exceeds threshold ${threshold}ms`,\n        }\n      }\n\n      return {\n        name: `${api} - Response Time`,\n        status: 'passed',\n        duration: responseTime,\n        details: { responseTime, status: response.status },\n      }\n    } catch (error) {\n      return {\n        name: `${api} - Error`,\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  // ===================================\n  // PERFORMANCE TESTING\n  // ===================================\n\n  /**\n   * Ejecutar tests de performance\n   */\n  async runPerformanceTests(components: string[]): Promise<TestSuite> {\n    const startTime = getPerformanceNow()\n    const tests: TestResult[] = []\n\n    console.log('[Testing] Iniciando tests de performance...')\n\n    for (const component of components) {\n      const testResult = await this.testComponentPerformance(component)\n      tests.push(testResult)\n    }\n\n    // Test de bundle size\n    const bundleTest = await this.testBundleSize()\n    tests.push(bundleTest)\n\n    // Test de memory leaks\n    const memoryTest = await this.testMemoryLeaks()\n    tests.push(memoryTest)\n\n    const duration = getPerformanceNow() - startTime\n    const suite: TestSuite = {\n      name: 'Performance Tests',\n      tests,\n      totalTests: tests.length,\n      passedTests: tests.filter(t => t.status === 'passed').length,\n      failedTests: tests.filter(t => t.status === 'failed').length,\n      skippedTests: tests.filter(t => t.status === 'skipped').length,\n      duration,\n    }\n\n    this.testResults.set('performance', suite)\n    return suite\n  }\n\n  /**\n   * Medir performance de componente\n   */\n  private async measureComponentPerformance(component: string): Promise<PerformanceMetrics> {\n    // Simular medición de performance\n    return {\n      loadTime: Math.random() * 100 + 50, // 50-150ms\n      renderTime: Math.random() * 20 + 5, // 5-25ms\n      memoryUsage: Math.random() * 10 + 5, // 5-15MB\n      bundleSize: Math.random() * 50 + 20, // 20-70KB\n    }\n  }\n\n  /**\n   * Test de performance de componente\n   */\n  private async testComponentPerformance(component: string): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      const metrics = await this.measureComponentPerformance(component)\n\n      // Verificar thresholds\n      const issues: string[] = []\n      if (metrics.renderTime > 16) {\n        issues.push('Render time > 16ms')\n      }\n      if (metrics.memoryUsage > 50) {\n        issues.push('Memory usage > 50MB')\n      }\n      if (metrics.bundleSize > 100) {\n        issues.push('Bundle size > 100KB')\n      }\n\n      return {\n        name: `${component} - Performance`,\n        status: issues.length === 0 ? 'passed' : 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: issues.length > 0 ? issues.join(', ') : undefined,\n        details: metrics,\n      }\n    } catch (error) {\n      return {\n        name: `${component} - Performance Error`,\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  /**\n   * Test de bundle size\n   */\n  private async testBundleSize(): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      // Simular análisis de bundle\n      const bundleSize = Math.random() * 1000 + 500 // 500-1500KB\n      const threshold = 1000 // 1MB\n\n      return {\n        name: 'Bundle Size Check',\n        status: bundleSize <= threshold ? 'passed' : 'failed',\n        duration: getPerformanceNow() - startTime,\n        error:\n          bundleSize > threshold\n            ? `Bundle size ${bundleSize.toFixed(2)}KB exceeds ${threshold}KB`\n            : undefined,\n        details: { bundleSize, threshold },\n      }\n    } catch (error) {\n      return {\n        name: 'Bundle Size Error',\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  /**\n   * Test de memory leaks\n   */\n  private async testMemoryLeaks(): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      // Simular test de memory leaks\n      const memoryGrowth = Math.random() * 20 // 0-20MB growth\n      const threshold = 10 // 10MB threshold\n\n      return {\n        name: 'Memory Leak Check',\n        status: memoryGrowth <= threshold ? 'passed' : 'failed',\n        duration: getPerformanceNow() - startTime,\n        error:\n          memoryGrowth > threshold\n            ? `Memory growth ${memoryGrowth.toFixed(2)}MB exceeds ${threshold}MB`\n            : undefined,\n        details: { memoryGrowth, threshold },\n      }\n    } catch (error) {\n      return {\n        name: 'Memory Leak Error',\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  // ===================================\n  // ACCESSIBILITY TESTING\n  // ===================================\n\n  /**\n   * Ejecutar tests de accesibilidad\n   */\n  async runAccessibilityTests(pages: string[]): Promise<TestSuite> {\n    const startTime = getPerformanceNow()\n    const tests: TestResult[] = []\n\n    console.log('[Testing] Iniciando tests de accesibilidad...')\n\n    for (const page of pages) {\n      const testResult = await this.testPageAccessibility(page)\n      tests.push(testResult)\n    }\n\n    const duration = getPerformanceNow() - startTime\n    const suite: TestSuite = {\n      name: 'Accessibility Tests',\n      tests,\n      totalTests: tests.length,\n      passedTests: tests.filter(t => t.status === 'passed').length,\n      failedTests: tests.filter(t => t.status === 'failed').length,\n      skippedTests: tests.filter(t => t.status === 'skipped').length,\n      duration,\n    }\n\n    this.testResults.set('accessibility', suite)\n    return suite\n  }\n\n  /**\n   * Test de accesibilidad de página\n   */\n  private async testPageAccessibility(page: string): Promise<TestResult> {\n    const startTime = getPerformanceNow()\n\n    try {\n      // Simular test de accesibilidad\n      const result = await this.runAccessibilityAudit(page)\n\n      return {\n        name: `${page} - Accessibility`,\n        status: result.score >= 80 ? 'passed' : 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: result.score < 80 ? `Accessibility score ${result.score}% below 80%` : undefined,\n        details: result,\n      }\n    } catch (error) {\n      return {\n        name: `${page} - Accessibility Error`,\n        status: 'failed',\n        duration: getPerformanceNow() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }\n    }\n  }\n\n  /**\n   * Ejecutar auditoría de accesibilidad\n   */\n  private async runAccessibilityAudit(page: string): Promise<AccessibilityResult> {\n    // Simular auditoría de accesibilidad\n    const violations = Math.floor(Math.random() * 5) // 0-4 violations\n    const score = Math.max(60, 100 - violations * 10) // 60-100% score\n\n    return {\n      violations: Array.from({ length: violations }, (_, i) => ({\n        id: `violation-${i}`,\n        impact: ['minor', 'moderate', 'serious', 'critical'][Math.floor(Math.random() * 4)] as any,\n        description: `Accessibility violation ${i + 1}`,\n        nodes: Math.floor(Math.random() * 5) + 1,\n      })),\n      passes: Math.floor(Math.random() * 20) + 10,\n      incomplete: Math.floor(Math.random() * 3),\n      score,\n    }\n  }\n\n  // ===================================\n  // UTILITY METHODS\n  // ===================================\n\n  /**\n   * Test de endpoint de API\n   */\n  private async testApiEndpoint(\n    endpoint: string\n  ): Promise<{ status: number; responseTime: number }> {\n    // Simular llamada a API\n    const responseTime = Math.random() * 200 + 50 // 50-250ms\n    const status = Math.random() > 0.1 ? 200 : 500 // 90% success rate\n\n    return { status, responseTime }\n  }\n\n  /**\n   * Obtener resultados de tests\n   */\n  getTestResults(): Map<string, TestSuite> {\n    return this.testResults\n  }\n\n  /**\n   * Obtener resumen de tests\n   */\n  getTestSummary() {\n    const suites = Array.from(this.testResults.values())\n    const totalTests = suites.reduce((sum, suite) => sum + suite.totalTests, 0)\n    const passedTests = suites.reduce((sum, suite) => sum + suite.passedTests, 0)\n    const failedTests = suites.reduce((sum, suite) => sum + suite.failedTests, 0)\n    const totalDuration = suites.reduce((sum, suite) => sum + suite.duration, 0)\n\n    return {\n      totalSuites: suites.length,\n      totalTests,\n      passedTests,\n      failedTests,\n      successRate: totalTests > 0 ? (passedTests / totalTests) * 100 : 0,\n      totalDuration,\n    }\n  }\n\n  /**\n   * Limpiar resultados\n   */\n  clearResults(): void {\n    this.testResults.clear()\n  }\n}\n\n// ===================================\n// EXPORTS\n// ===================================\n\nexport const automatedTestingManager = AutomatedTestingManager.getInstance()\n\nexport default {\n  automatedTestingManager,\n  AutomatedTestingManager,\n}\n\nexport type { TestResult, TestSuite, PerformanceMetrics, AccessibilityResult, RegressionTestConfig }\n"],"names":["automatedTestingManager","perfHooks","window","require","getPerformanceNow","performance","Date","now","AutomatedTestingManager","getInstance","instance","runRegressionTests","config","startTime","tests","console","log","component","components","testResult","testComponentRegression","threshold","push","api","apis","testApiRegression","duration","suite","name","totalTests","length","passedTests","filter","t","status","failedTests","skippedTests","testResults","set","currentMetrics","measureComponentPerformance","baseline","performanceBaselines","get","details","performanceDelta","renderTime","error","toFixed","current","Error","message","response","testApiEndpoint","responseTime","runPerformanceTests","testComponentPerformance","bundleTest","testBundleSize","memoryTest","testMemoryLeaks","loadTime","Math","random","memoryUsage","bundleSize","metrics","issues","join","undefined","memoryGrowth","runAccessibilityTests","pages","page","testPageAccessibility","result","runAccessibilityAudit","score","violations","floor","max","Array","from","_","i","id","impact","description","nodes","passes","incomplete","endpoint","getTestResults","getTestSummary","suites","values","reduce","sum","totalDuration","totalSuites","successRate","clearResults","clear","Map"],"mappings":"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"}