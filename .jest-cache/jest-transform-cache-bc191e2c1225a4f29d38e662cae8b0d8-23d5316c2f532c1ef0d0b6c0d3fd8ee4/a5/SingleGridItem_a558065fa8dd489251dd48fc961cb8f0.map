{"version":3,"names":["_default","SingleGridItem","item","cov_15g0j69ix7","f","dispatch","s","_reactredux","useDispatch","addItem","loading","_useCartWithBackend","useCartWithBackend","handleQuickViewUpdate","_quickViewslice","updateQuickView","handleAddToCart","success","id","b","_cartslice","addItemToCart","quantity","handleItemToWishList","_wishlistslice","addItemToWishlist","status","features","_productAdapter","calculateProductFeatures","cleanTitle","name","title","includes","replace","trim","_jsxruntime","jsx","_productcardcommercial","CommercialProductCard","className","image","images","previews","imgs","brand","price","discount","Math","round","currentPrice","originalPrice","undefined","isNew","stock","productId","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText","fastShipping"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Shop\\SingleGridItem.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Product } from \"@/types/product\";\r\nimport { updateQuickView } from \"@/redux/features/quickView-slice\";\r\nimport { addItemToCart } from \"@/redux/features/cart-slice\";\r\nimport { addItemToWishlist } from \"@/redux/features/wishlist-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppDispatch } from \"@/redux/store\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { CommercialProductCard } from \"@/components/ui/product-card-commercial\";\r\nimport { ExtendedProduct, calculateProductFeatures } from \"@/lib/adapters/productAdapter\";\r\nimport { useCartWithBackend } from \"@/hooks/useCartWithBackend\";\r\nimport { useCartActions } from \"@/hooks/useCartActions\";\r\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ShoppingCart, Eye } from \"lucide-react\";\r\n\r\nconst SingleGridItem = ({ item }: { item: ExtendedProduct }) => {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n\r\n  // Hook para carrito con backend\r\n  const { addItem, loading } = useCartWithBackend();\r\n\r\n  // update the QuickView state\r\n  const handleQuickViewUpdate = () => {\r\n    dispatch(updateQuickView({ ...item }));\r\n  };\r\n\r\n  // add to cart - Conectado con backend\r\n  const handleAddToCart = async () => {\r\n    // Intentar agregar al backend primero\r\n    const success = await addItem(item.id, 1);\r\n\r\n    if (success) {\r\n      // Si el backend funciona, también actualizar Redux para compatibilidad\r\n      dispatch(\r\n        addItemToCart({\r\n          ...item,\r\n          quantity: 1,\r\n        })\r\n      );\r\n    } else {\r\n      // Si falla el backend, solo usar Redux (fallback)\r\n      dispatch(\r\n        addItemToCart({\r\n          ...item,\r\n          quantity: 1,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleItemToWishList = () => {\r\n    dispatch(\r\n      addItemToWishlist({\r\n        ...item,\r\n        status: \"available\",\r\n        quantity: 1,\r\n      })\r\n    );\r\n  };\r\n\r\n  // Calcular características del producto usando el adaptador\r\n  const features = calculateProductFeatures(item);\r\n\r\n  // FIX DIRECTO: Limpiar \"Poxipol\" del título si está presente\r\n  let cleanTitle = item.name || item.title;\r\n  if (cleanTitle && cleanTitle.includes('Poximix') && cleanTitle.includes('Poxipol')) {\r\n    cleanTitle = cleanTitle.replace(/\\s*Poxipol\\s*$/, '').trim();\r\n  }\r\n\r\n  return (\r\n    <CommercialProductCard\r\n      className=\"bg-white\" // Forzar fondo blanco\r\n      image={item.images?.previews?.[0] || item.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\r\n      title={cleanTitle}\r\n      brand={item.brand}\r\n      price={features.discount ? Math.round(item.price * (1 - features.discount / 100)) : features.currentPrice}\r\n      originalPrice={features.discount ? item.price : undefined}\r\n      discount={features.discount ? `${features.discount}%` : undefined}\r\n      isNew={features.isNew}\r\n      stock={features.stock}\r\n      productId={item.id}\r\n      cta=\"Agregar al carrito\"\r\n      onAddToCart={handleAddToCart}\r\n      showCartAnimation={true}\r\n      // Información de cuotas automática\r\n      installments={features.currentPrice >= 5000 ? {\r\n        quantity: 3,\r\n        amount: Math.round(features.currentPrice / 3),\r\n        interestFree: true\r\n      } : undefined}\r\n      // Envío gratis automático para productos >= $15000\r\n      freeShipping={features.freeShipping || features.currentPrice >= 15000}\r\n      shippingText={features.freeShipping ? \"Envío gratis\" : features.fastShipping ? \"Envío rápido\" : undefined}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SingleGridItem;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAqGA;;;;;;WAAAA,QAAA;;;;;;;;wEApGkB;;;kCAEc;;;kCACF;;;kCACI;;;kCACN;;;kCAIU;;;mCACoB;;;mCACvB;;;;;;;;;;;;;;;;;AAOnC,MAAMC,cAAA,GAAiBA,CAAC;EAAEC;AAAI,CAA6B;EAAA;EAAAC,cAAA,GAAAC,CAAA;EACzD,MAAMC,QAAA;EAAA;EAAA,CAAAF,cAAA,GAAAG,CAAA,QAAW,IAAAC,WAAA,CAAAC,WAAW;EAE5B;EACA,MAAM;IAAEC,OAAO;IAAEC;EAAO,CAAE;EAAA;EAAA,CAAAP,cAAA,GAAAG,CAAA,QAAG,IAAAK,mBAAA,CAAAC,kBAAkB;EAE/C;EAAA;EAAAT,cAAA,GAAAG,CAAA;EACA,MAAMO,qBAAA,GAAwBA,CAAA;IAAA;IAAAV,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAG,CAAA;IAC5BD,QAAA,CAAS,IAAAS,eAAA,CAAAC,eAAe,EAAC;MAAE,GAAGb;IAAK;EACrC;EAEA;EAAA;EAAAC,cAAA,GAAAG,CAAA;EACA,MAAMU,eAAA,GAAkB,MAAAA,CAAA;IAAA;IAAAb,cAAA,GAAAC,CAAA;IACtB;IACA,MAAMa,OAAA;IAAA;IAAA,CAAAd,cAAA,GAAAG,CAAA,QAAU,MAAMG,OAAA,CAAQP,IAAA,CAAKgB,EAAE,EAAE;IAAA;IAAAf,cAAA,GAAAG,CAAA;IAEvC,IAAIW,OAAA,EAAS;MAAA;MAAAd,cAAA,GAAAgB,CAAA;MAAAhB,cAAA,GAAAG,CAAA;MACX;MACAD,QAAA,CACE,IAAAe,UAAA,CAAAC,aAAa,EAAC;QACZ,GAAGnB,IAAI;QACPoB,QAAA,EAAU;MACZ;IAEJ,OAAO;MAAA;MAAAnB,cAAA,GAAAgB,CAAA;MAAAhB,cAAA,GAAAG,CAAA;MACL;MACAD,QAAA,CACE,IAAAe,UAAA,CAAAC,aAAa,EAAC;QACZ,GAAGnB,IAAI;QACPoB,QAAA,EAAU;MACZ;IAEJ;EACF;EAAA;EAAAnB,cAAA,GAAAG,CAAA;EAEA,MAAMiB,oBAAA,GAAuBA,CAAA;IAAA;IAAApB,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAG,CAAA;IAC3BD,QAAA,CACE,IAAAmB,cAAA,CAAAC,iBAAiB,EAAC;MAChB,GAAGvB,IAAI;MACPwB,MAAA,EAAQ;MACRJ,QAAA,EAAU;IACZ;EAEJ;EAEA;EACA,MAAMK,QAAA;EAAA;EAAA,CAAAxB,cAAA,GAAAG,CAAA,QAAW,IAAAsB,eAAA,CAAAC,wBAAwB,EAAC3B,IAAA;EAE1C;EACA,IAAI4B,UAAA;EAAA;EAAA,CAAA3B,cAAA,GAAAG,CAAA;EAAa;EAAA,CAAAH,cAAA,GAAAgB,CAAA,UAAAjB,IAAA,CAAK6B,IAAI;EAAA;EAAA,CAAA5B,cAAA,GAAAgB,CAAA,UAAIjB,IAAA,CAAK8B,KAAK;EAAA;EAAA7B,cAAA,GAAAG,CAAA;EACxC;EAAI;EAAA,CAAAH,cAAA,GAAAgB,CAAA,UAAAW,UAAA;EAAA;EAAA,CAAA3B,cAAA,GAAAgB,CAAA,UAAcW,UAAA,CAAWG,QAAQ,CAAC;EAAA;EAAA,CAAA9B,cAAA,GAAAgB,CAAA,UAAcW,UAAA,CAAWG,QAAQ,CAAC,aAAY;IAAA;IAAA9B,cAAA,GAAAgB,CAAA;IAAAhB,cAAA,GAAAG,CAAA;IAClFwB,UAAA,GAAaA,UAAA,CAAWI,OAAO,CAAC,kBAAkB,IAAIC,IAAI;EAC5D;EAAA;EAAA;IAAAhC,cAAA,GAAAgB,CAAA;EAAA;EAAAhB,cAAA,GAAAG,CAAA;EAEA,oBACE,IAAA8B,WAAA,CAAAC,GAAA,EAACC,sBAAA,CAAAC,qBAAqB;IACpBC,SAAA,EAAU;IACVC,KAAA;IAAO;IAAA,CAAAtC,cAAA,GAAAgB,CAAA,UAAAjB,IAAA,CAAKwC,MAAM,EAAEC,QAAA,GAAW,EAAE;IAAA;IAAA,CAAAxC,cAAA,GAAAgB,CAAA,UAAIjB,IAAA,CAAK0C,IAAI,EAAED,QAAA,GAAW,EAAE;IAAA;IAAA,CAAAxC,cAAA,GAAAgB,CAAA,UAAI;IACjEa,KAAA,EAAOF,UAAA;IACPe,KAAA,EAAO3C,IAAA,CAAK2C,KAAK;IACjBC,KAAA,EAAOnB,QAAA,CAASoB,QAAQ;IAAA;IAAA,CAAA5C,cAAA,GAAAgB,CAAA,UAAG6B,IAAA,CAAKC,KAAK,CAAC/C,IAAA,CAAK4C,KAAK,IAAI,IAAInB,QAAA,CAASoB,QAAQ,GAAG,GAAE;IAAA;IAAA,CAAA5C,cAAA,GAAAgB,CAAA,UAAMQ,QAAA,CAASuB,YAAY;IACzGC,aAAA,EAAexB,QAAA,CAASoB,QAAQ;IAAA;IAAA,CAAA5C,cAAA,GAAAgB,CAAA,UAAGjB,IAAA,CAAK4C,KAAK;IAAA;IAAA,CAAA3C,cAAA,GAAAgB,CAAA,UAAGiC,SAAA;IAChDL,QAAA,EAAUpB,QAAA,CAASoB,QAAQ;IAAA;IAAA,CAAA5C,cAAA,GAAAgB,CAAA,UAAG,GAAGQ,QAAA,CAASoB,QAAQ,GAAG;IAAA;IAAA,CAAA5C,cAAA,GAAAgB,CAAA,UAAGiC,SAAA;IACxDC,KAAA,EAAO1B,QAAA,CAAS0B,KAAK;IACrBC,KAAA,EAAO3B,QAAA,CAAS2B,KAAK;IACrBC,SAAA,EAAWrD,IAAA,CAAKgB,EAAE;IAClBsC,GAAA,EAAI;IACJC,WAAA,EAAazC,eAAA;IACb0C,iBAAA,EAAmB;IACnB;IACAC,YAAA,EAAchC,QAAA,CAASuB,YAAY,IAAI;IAAA;IAAA,CAAA/C,cAAA,GAAAgB,CAAA,WAAO;MAC5CG,QAAA,EAAU;MACVsC,MAAA,EAAQZ,IAAA,CAAKC,KAAK,CAACtB,QAAA,CAASuB,YAAY,GAAG;MAC3CW,YAAA,EAAc;IAChB;IAAA;IAAA,CAAA1D,cAAA,GAAAgB,CAAA,WAAIiC,SAAA;IACJ;IACAU,YAAA;IAAc;IAAA,CAAA3D,cAAA,GAAAgB,CAAA,WAAAQ,QAAA,CAASmC,YAAY;IAAA;IAAA,CAAA3D,cAAA,GAAAgB,CAAA,WAAIQ,QAAA,CAASuB,YAAY,IAAI;IAChEa,YAAA,EAAcpC,QAAA,CAASmC,YAAY;IAAA;IAAA,CAAA3D,cAAA,GAAAgB,CAAA,WAAG;IAAA;IAAA,CAAAhB,cAAA,GAAAgB,CAAA,WAAiBQ,QAAA,CAASqC,YAAY;IAAA;IAAA,CAAA7D,cAAA,GAAAgB,CAAA,WAAG;IAAA;IAAA,CAAAhB,cAAA,GAAAgB,CAAA,WAAiBiC,SAAA;;AAGtG;MAEApD,QAAA;AAAA;AAAA,CAAAG,cAAA,GAAAG,CAAA,QAAeL,cAAA","ignoreList":[]}