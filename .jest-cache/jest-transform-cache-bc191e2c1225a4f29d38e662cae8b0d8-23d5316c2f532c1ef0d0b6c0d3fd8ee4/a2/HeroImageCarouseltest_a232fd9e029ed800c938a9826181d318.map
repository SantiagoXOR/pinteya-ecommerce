{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\__tests__\\HeroImageCarousel.test.tsx"],"sourcesContent":["import React from 'react';\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport '@testing-library/jest-dom';\r\n\r\n// Mock Swiper CSS imports\r\njest.mock('swiper/css', () => ({}));\r\njest.mock('swiper/css/pagination', () => ({}));\r\njest.mock('swiper/css/navigation', () => ({}));\r\n\r\nimport HeroCarousel from '../HeroCarousel';\r\n\r\n// Mock Swiper components\r\njest.mock('swiper/react', () => ({\r\n  Swiper: ({ children, onSlideChange, onSwiper, ...props }: any) => {\r\n    const mockSwiper = {\r\n      slidePrev: jest.fn(),\r\n      slideNext: jest.fn(),\r\n      autoplay: {\r\n        start: jest.fn(),\r\n        stop: jest.fn(),\r\n      },\r\n      realIndex: 0,\r\n    };\r\n\r\n    React.useEffect(() => {\r\n      if (onSwiper) {onSwiper(mockSwiper);}\r\n    }, [onSwiper]);\r\n\r\n    return (\r\n      <div data-testid=\"swiper\" {...props}>\r\n        {children}\r\n      </div>\r\n    );\r\n  },\r\n  SwiperSlide: ({ children, ...props }: any) => (\r\n    <div data-testid=\"swiper-slide\" {...props}>\r\n      {children}\r\n    </div>\r\n  ),\r\n}));\r\n\r\njest.mock('swiper/modules', () => ({\r\n  Autoplay: 'Autoplay',\r\n  Pagination: 'Pagination',\r\n  Navigation: 'Navigation',\r\n  Keyboard: 'Keyboard',\r\n  A11y: 'A11y',\r\n}));\r\n\r\n// Mock Next.js Image component\r\njest.mock('next/image', () => {\r\n  return function MockImage({ src, alt, ...props }: any) {\r\n    return <img src={src} alt={alt} {...props} data-testid=\"next-image\" />;\r\n  };\r\n});\r\n\r\nconst mockImages = [\r\n  { \r\n    src: '/images/hero/hero-01.png', \r\n    alt: 'Imagen 1 - Productos de pinturería', \r\n    priority: true \r\n  },\r\n  { \r\n    src: '/images/hero/hero-02.png', \r\n    alt: 'Imagen 2 - Ferretería y corralón', \r\n    priority: false \r\n  },\r\n  { \r\n    src: '/images/hero/hero-03.png', \r\n    alt: 'Imagen 3 - Envío gratis', \r\n    priority: false \r\n  },\r\n  { \r\n    src: '/images/hero/hero-04.png', \r\n    alt: 'Imagen 4 - Pagos seguros', \r\n    priority: false \r\n  },\r\n];\r\n\r\ndescribe('HeroImageCarousel', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('renders correctly with default props', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n\r\n    expect(screen.getByRole('region')).toBeInTheDocument();\r\n    expect(screen.getByLabelText('Carrusel de imágenes principales')).toBeInTheDocument();\r\n    expect(screen.getByTestId('swiper')).toBeInTheDocument();\r\n  });\r\n\r\n  it('renders all images correctly', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n    \r\n    const images = screen.getAllByTestId('next-image');\r\n    expect(images).toHaveLength(mockImages.length);\r\n    \r\n    mockImages.forEach((image, index) => {\r\n      expect(images[index]).toHaveAttribute('src', image.src);\r\n      expect(images[index]).toHaveAttribute('alt', image.alt);\r\n    });\r\n  });\r\n\r\n  it('has proper ARIA attributes for accessibility', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n\r\n    const carousel = screen.getByRole('region');\r\n    expect(carousel).toHaveAttribute('aria-label', 'Carrusel de imágenes principales');\r\n    expect(carousel).toHaveAttribute('aria-live', 'polite');\r\n\r\n    const swiper = screen.getByTestId('swiper');\r\n    expect(swiper).toHaveAttribute('aria-label', 'Galería de imágenes de productos');\r\n  });\r\n\r\n  it('shows navigation buttons when enabled', () => {\r\n    render(<HeroCarousel images={mockImages} showNavigation={true} />);\r\n    \r\n    expect(screen.getByLabelText('Imagen anterior')).toBeInTheDocument();\r\n    expect(screen.getByLabelText('Imagen siguiente')).toBeInTheDocument();\r\n  });\r\n\r\n  it('hides navigation buttons when disabled', () => {\r\n    render(<HeroCarousel images={mockImages} showNavigation={false} />);\r\n\r\n    expect(screen.queryByLabelText('Imagen anterior')).not.toBeInTheDocument();\r\n    expect(screen.queryByLabelText('Imagen siguiente')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('applies custom className correctly', () => {\r\n    const customClass = 'custom-carousel-class';\r\n    render(<HeroCarousel images={mockImages} className={customClass} />);\r\n    \r\n    const carousel = screen.getByRole('region');\r\n    expect(carousel).toHaveClass(customClass);\r\n  });\r\n\r\n  it('handles slide change callback', () => {\r\n    const onSlideChange = jest.fn();\r\n    render(<HeroCarousel images={mockImages} onSlideChange={onSlideChange} />);\r\n\r\n    // El callback se debería llamar cuando se inicializa el swiper\r\n    // En un entorno real, esto se activaría cuando cambie la diapositiva\r\n    // En el mock, verificamos que el componente se renderiza correctamente\r\n    expect(screen.getByTestId('swiper')).toBeInTheDocument();\r\n  });\r\n\r\n  it('supports keyboard navigation', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n    \r\n    const carousel = screen.getByRole('region');\r\n    \r\n    // Simular navegación con teclado\r\n    fireEvent.keyDown(document, { key: 'ArrowRight' });\r\n    fireEvent.keyDown(document, { key: 'ArrowLeft' });\r\n    fireEvent.keyDown(document, { key: 'Escape' });\r\n    \r\n    // Verificar que no hay errores y el componente sigue funcionando\r\n    expect(carousel).toBeInTheDocument();\r\n  });\r\n\r\n  it('handles mouse enter and leave for autoplay control', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n\r\n    const carousel = screen.getByRole('region');\r\n\r\n    // Simular mouse enter (debería pausar autoplay)\r\n    fireEvent.mouseEnter(carousel);\r\n\r\n    // Simular mouse leave (debería reanudar autoplay)\r\n    fireEvent.mouseLeave(carousel);\r\n\r\n    expect(carousel).toBeInTheDocument();\r\n  });\r\n\r\n  it('renders slide descriptions for screen readers', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n    \r\n    mockImages.forEach((image, index) => {\r\n      const description = document.getElementById(`slide-description-${index}`);\r\n      expect(description).toBeInTheDocument();\r\n      expect(description).toHaveTextContent(image.alt);\r\n      expect(description).toHaveClass('sr-only');\r\n    });\r\n  });\r\n\r\n  it('provides live region updates for screen readers', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n\r\n    const liveRegion = screen.getByText(/Imagen 1 de 4/);\r\n    expect(liveRegion).toBeInTheDocument();\r\n    expect(liveRegion).toHaveClass('sr-only');\r\n  });\r\n\r\n  it('handles empty images array gracefully', () => {\r\n    render(<HeroCarousel images={[]} />);\r\n    \r\n    expect(screen.getByRole('region')).toBeInTheDocument();\r\n    expect(screen.getByTestId('swiper')).toBeInTheDocument();\r\n  });\r\n\r\n  it('uses correct autoplay delay', () => {\r\n    const customDelay = 3000;\r\n    render(<HeroCarousel images={mockImages} autoplayDelay={customDelay} />);\r\n\r\n    // En un test real, verificaríamos que el swiper se configura con el delay correcto\r\n    expect(screen.getByTestId('swiper')).toBeInTheDocument();\r\n  });\r\n\r\n  it('renders with proper slide group labels', () => {\r\n    render(<HeroCarousel images={mockImages} />);\r\n    \r\n    const slides = screen.getAllByTestId('swiper-slide');\r\n    slides.forEach((slide, index) => {\r\n      expect(slide).toHaveAttribute('role', 'group');\r\n      expect(slide).toHaveAttribute('aria-label', `${index + 1} de ${mockImages.length}`);\r\n    });\r\n  });\r\n\r\n  it('maintains focus management for accessibility', () => {\r\n    render(<HeroCarousel images={mockImages} showNavigation={true} />);\r\n\r\n    const prevButton = screen.getByLabelText('Imagen anterior');\r\n    const nextButton = screen.getByLabelText('Imagen siguiente');\r\n    \r\n    expect(prevButton).toHaveAttribute('type', 'button');\r\n    expect(nextButton).toHaveAttribute('type', 'button');\r\n    \r\n    // Verificar que los botones tienen las clases de focus correctas\r\n    expect(prevButton).toHaveClass('focus:outline-none', 'focus:ring-2', 'focus:ring-yellow-400');\r\n    expect(nextButton).toHaveClass('focus:outline-none', 'focus:ring-2', 'focus:ring-yellow-400');\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["jest","mock","Swiper","children","onSlideChange","onSwiper","props","mockSwiper","slidePrev","fn","slideNext","autoplay","start","stop","realIndex","React","useEffect","div","data-testid","SwiperSlide","Autoplay","Pagination","Navigation","Keyboard","A11y","MockImage","src","alt","img","mockImages","priority","describe","beforeEach","clearAllMocks","it","render","HeroCarousel","images","expect","screen","getByRole","toBeInTheDocument","getByLabelText","getByTestId","getAllByTestId","toHaveLength","length","forEach","image","index","toHaveAttribute","carousel","swiper","showNavigation","queryByLabelText","not","customClass","className","toHaveClass","fireEvent","keyDown","document","key","mouseEnter","mouseLeave","description","getElementById","toHaveTextContent","liveRegion","getByText","customDelay","autoplayDelay","slides","slide","prevButton","nextButton"],"mappings":"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"}