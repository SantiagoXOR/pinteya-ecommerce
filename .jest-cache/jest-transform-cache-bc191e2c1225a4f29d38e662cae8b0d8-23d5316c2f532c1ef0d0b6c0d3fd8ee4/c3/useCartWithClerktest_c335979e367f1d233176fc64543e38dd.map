{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useCartWithClerk.test.ts"],"sourcesContent":["/**\n * Tests completos para useCartWithClerk\n * Cubre funcionalidades de migración, persistencia y autenticación\n */\n\nimport React from 'react'\nimport { renderHook, act, waitFor } from '@testing-library/react'\nimport { Provider } from 'react-redux'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { useAuth } from '@/hooks/useAuth'\nimport cartReducer, { addItemToCart } from '@/redux/features/cart-slice'\nimport { useCartWithClerk } from '@/hooks/useCartWithClerk'\nimport * as cartPersistence from '@/redux/middleware/cartPersistence'\n\n// Mock para evitar problemas de dependencias\njest.mock('@/hooks/useAuth', () => ({\n  useAuth: jest.fn(),\n}))\n\n// Mock cart persistence functions\njest.mock('@/redux/middleware/cartPersistence', () => ({\n  loadCartFromStorage: jest.fn(() => []),\n  clearCartFromStorage: jest.fn(),\n  migrateTemporaryCart: jest.fn(() => Promise.resolve(true)),\n  loadUserCart: jest.fn(() => Promise.resolve([])),\n  saveUserCart: jest.fn(() => Promise.resolve()),\n  cartPersistenceMiddleware: jest.fn(() => next => action => next(action)),\n}))\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(() => null),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n}\nObject.defineProperty(window, 'localStorage', { value: localStorageMock })\n\n// Mock console.error to avoid noise in tests\nconst originalConsoleError = console.error\nbeforeAll(() => {\n  console.error = jest.fn()\n})\n\nafterAll(() => {\n  console.error = originalConsoleError\n})\n\n// Mock user data\nconst mockUser = {\n  id: 'user_123',\n  name: 'Juan Pérez',\n  email: 'juan@example.com',\n}\n\n// Mock product data\nconst mockProduct = {\n  id: 1,\n  name: 'Pintura Latex Interior',\n  price: 5000,\n  category: 'Pinturas',\n}\n\ndescribe('useCartWithClerk Hook', () => {\n  let store: any\n  const mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>\n  const mockCartPersistence = cartPersistence as jest.Mocked<typeof cartPersistence>\n\n  const renderHookWithStore = () => {\n    store = configureStore({\n      reducer: {\n        cartReducer,\n      },\n      middleware: getDefaultMiddleware => getDefaultMiddleware(),\n    })\n\n    const wrapper = ({ children }: { children: React.ReactNode }) =>\n      React.createElement(Provider, { store }, children)\n\n    return renderHook(() => useCartWithClerk(), { wrapper })\n  }\n\n  beforeEach(() => {\n    jest.clearAllMocks()\n    localStorageMock.getItem.mockReturnValue(null)\n    mockCartPersistence.loadCartFromStorage.mockReturnValue([])\n    mockCartPersistence.migrateTemporaryCart.mockResolvedValue(true)\n    mockCartPersistence.loadUserCart.mockResolvedValue([])\n    mockCartPersistence.saveUserCart.mockResolvedValue()\n  })\n\n  describe('Unauthenticated User', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: null,\n        isLoaded: true,\n        isSignedIn: false,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: null,\n        status: 'unauthenticated',\n      } as any)\n    })\n\n    it('should handle unauthenticated user correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(false)\n      expect(result.current.userId).toBeUndefined()\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n  })\n\n  describe('Authenticated User', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should identify authenticated user correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(true)\n      expect(result.current.userId).toBe(mockUser.id)\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n\n    it('should handle cart changes for authenticated user', () => {\n      const { result } = renderHookWithStore()\n\n      // Verificar estado inicial\n      expect(result.current.isAuthenticated).toBe(true)\n      expect(result.current.cartItems).toHaveLength(0)\n\n      // Agregar item al carrito usando Redux dispatch\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      // Verificar que el item se agregó correctamente\n      expect(result.current.cartItems).toHaveLength(1)\n      expect(result.current.cartItems[0]).toEqual(\n        expect.objectContaining({\n          id: mockProduct.id,\n          price: mockProduct.price,\n        })\n      )\n    })\n  })\n\n  describe('Loading State', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: null,\n        isLoaded: false,\n        isSignedIn: false,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: null,\n        status: 'loading',\n      } as any)\n    })\n\n    it('should handle loading state correctly', () => {\n      const { result } = renderHookWithStore()\n\n      expect(result.current.isAuthenticated).toBe(false)\n      expect(Array.isArray(result.current.cartItems)).toBe(true)\n    })\n\n    it('should not trigger effects during loading', () => {\n      renderHookWithStore()\n\n      expect(mockCartPersistence.loadCartFromStorage).not.toHaveBeenCalled()\n      expect(mockCartPersistence.migrateTemporaryCart).not.toHaveBeenCalled()\n    })\n  })\n\n  describe('Cart Migration', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should migrate temporary cart when user logs in', async () => {\n      const temporaryItems = [mockProduct]\n      mockCartPersistence.loadCartFromStorage.mockReturnValue(temporaryItems)\n      mockCartPersistence.loadUserCart.mockResolvedValue([])\n\n      const { result } = renderHookWithStore()\n\n      await waitFor(() => {\n        expect(mockCartPersistence.migrateTemporaryCart).toHaveBeenCalledWith(\n          temporaryItems,\n          mockUser.id\n        )\n      })\n\n      expect(mockCartPersistence.clearCartFromStorage).toHaveBeenCalled()\n      expect(mockCartPersistence.loadUserCart).toHaveBeenCalledWith(mockUser.id)\n    })\n\n    it('should load user cart after migration', async () => {\n      const userCartItems = [{ ...mockProduct, id: 2 }]\n      mockCartPersistence.loadUserCart.mockResolvedValue(userCartItems)\n\n      const { result } = renderHookWithStore()\n\n      await waitFor(() => {\n        expect(result.current.cartItems).toHaveLength(1)\n        expect(result.current.cartItems[0].id).toBe(2)\n      })\n    })\n\n    it('should handle migration errors gracefully', async () => {\n      mockCartPersistence.migrateTemporaryCart.mockRejectedValue(new Error('Migration failed'))\n      mockCartPersistence.loadCartFromStorage.mockReturnValue([mockProduct])\n\n      const { result } = renderHookWithStore()\n\n      // Wait for the effect to run\n      await waitFor(() => {\n        expect(mockCartPersistence.migrateTemporaryCart).toHaveBeenCalled()\n      })\n\n      // Verify console.error was called\n      await waitFor(() => {\n        expect(console.error).toHaveBeenCalledWith(\n          'Error during cart migration:',\n          expect.any(Error)\n        )\n      })\n\n      // Hook should still work despite migration error\n      expect(result.current.isAuthenticated).toBe(true)\n    })\n  })\n\n  describe('Cart Persistence', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should save cart when items change', async () => {\n      const { result } = renderHookWithStore()\n\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      await waitFor(\n        () => {\n          expect(mockCartPersistence.saveUserCart).toHaveBeenCalledWith(\n            mockUser.id,\n            expect.arrayContaining([expect.objectContaining({ id: mockProduct.id })])\n          )\n        },\n        { timeout: 2000 }\n      )\n    })\n\n    it('should handle save errors gracefully', async () => {\n      mockCartPersistence.saveUserCart.mockRejectedValue(new Error('Save failed'))\n\n      const { result } = renderHookWithStore()\n\n      // Add item to trigger save\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      // Wait for the debounced save to be called\n      await waitFor(\n        () => {\n          expect(mockCartPersistence.saveUserCart).toHaveBeenCalled()\n        },\n        { timeout: 2000 }\n      )\n\n      // Wait for error to be logged\n      await waitFor(\n        () => {\n          expect(console.error).toHaveBeenCalledWith('Error saving user cart:', expect.any(Error))\n        },\n        { timeout: 2000 }\n      )\n    })\n  })\n\n  describe('Sign Out Handling', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should clear cart and storage on sign out', () => {\n      const { result } = renderHookWithStore()\n\n      // Add item first\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      expect(result.current.cartItems).toHaveLength(1)\n\n      // Sign out\n      act(() => {\n        result.current.handleSignOut()\n      })\n\n      expect(result.current.cartItems).toHaveLength(0)\n      expect(mockCartPersistence.clearCartFromStorage).toHaveBeenCalled()\n    })\n  })\n\n  describe('Hook Functions', () => {\n    beforeEach(() => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isLoaded: true,\n        isSignedIn: true,\n        signIn: jest.fn(),\n        signOut: jest.fn(),\n        session: { user: mockUser },\n        status: 'authenticated',\n      } as any)\n    })\n\n    it('should provide migrateCart function', async () => {\n      const { result } = renderHookWithStore()\n\n      expect(typeof result.current.migrateCart).toBe('function')\n\n      await act(async () => {\n        await result.current.migrateCart('test-user-id')\n      })\n\n      expect(mockCartPersistence.loadCartFromStorage).toHaveBeenCalled()\n      expect(mockCartPersistence.loadUserCart).toHaveBeenCalledWith('test-user-id')\n    })\n\n    it('should provide saveCart function', async () => {\n      const { result } = renderHookWithStore()\n\n      expect(typeof result.current.saveCart).toBe('function')\n\n      // Add item to cart first\n      act(() => {\n        store.dispatch(addItemToCart(mockProduct))\n      })\n\n      await act(async () => {\n        await result.current.saveCart('test-user-id')\n      })\n\n      expect(mockCartPersistence.saveUserCart).toHaveBeenCalledWith(\n        'test-user-id',\n        expect.arrayContaining([expect.objectContaining({ id: mockProduct.id })])\n      )\n    })\n  })\n})\n"],"names":["jest","mock","useAuth","fn","loadCartFromStorage","clearCartFromStorage","migrateTemporaryCart","Promise","resolve","loadUserCart","saveUserCart","cartPersistenceMiddleware","next","action","localStorageMock","getItem","setItem","removeItem","clear","Object","defineProperty","window","value","originalConsoleError","console","error","beforeAll","afterAll","mockUser","id","name","email","mockProduct","price","category","describe","store","mockUseAuth","mockCartPersistence","cartPersistence","renderHookWithStore","configureStore","reducer","cartReducer","middleware","getDefaultMiddleware","wrapper","children","React","createElement","Provider","renderHook","useCartWithClerk","beforeEach","clearAllMocks","mockReturnValue","mockResolvedValue","user","isLoaded","isSignedIn","signIn","signOut","session","status","it","result","expect","current","isAuthenticated","toBe","userId","toBeUndefined","Array","isArray","cartItems","toHaveLength","act","dispatch","addItemToCart","toEqual","objectContaining","not","toHaveBeenCalled","temporaryItems","waitFor","toHaveBeenCalledWith","userCartItems","mockRejectedValue","Error","any","arrayContaining","timeout","handleSignOut","migrateCart","saveCart"],"mappings":"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"}