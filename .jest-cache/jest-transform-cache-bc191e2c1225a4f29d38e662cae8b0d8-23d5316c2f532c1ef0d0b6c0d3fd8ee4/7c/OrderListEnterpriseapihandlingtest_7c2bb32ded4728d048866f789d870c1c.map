{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\components\\admin\\orders\\OrderListEnterprise.api-handling.test.jsx"],"sourcesContent":["// ===================================\n// PRUEBAS UNITARIAS PARA MANEJO DE API - ORDER LIST ENTERPRISE\n// ===================================\n\nimport React from 'react'\nimport { render, screen, waitFor, act } from '@testing-library/react'\nimport { OrderListEnterprise } from '@/components/admin/orders/OrderListEnterprise'\n\n// ===================================\n// MOCKS Y SETUP\n// ===================================\n\nconst mockToast = jest.fn()\njest.mock('../../../../hooks/use-toast', () => ({\n  useToast: () => ({ toast: mockToast }),\n}))\n\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n  }),\n  useSearchParams: () => new URLSearchParams(),\n  usePathname: () => '/admin/orders',\n}))\n\n// ===================================\n// DATOS DE PRUEBA\n// ===================================\n\nconst mockValidApiResponse = {\n  success: true,\n  data: {\n    orders: [\n      {\n        id: '1',\n        order_number: 'ORD-001',\n        status: 'pending',\n        total_amount: 100.0,\n        created_at: '2024-01-01T00:00:00Z',\n        user_profiles: { name: 'Test User', email: 'test@example.com' },\n      },\n    ],\n    pagination: {\n      page: 1,\n      limit: 20,\n      total: 1,\n      totalPages: 1,\n      hasNextPage: false,\n      hasPreviousPage: false,\n    },\n    filters: {\n      search: '',\n      status: 'all',\n      payment_status: 'all',\n    },\n  },\n}\n\nconst mockEmptyApiResponse = {\n  success: true,\n  data: {\n    orders: [],\n    pagination: {\n      page: 1,\n      limit: 20,\n      total: 0,\n      totalPages: 0,\n      hasNextPage: false,\n      hasPreviousPage: false,\n    },\n    filters: {\n      search: '',\n      status: 'all',\n      payment_status: 'all',\n    },\n  },\n}\n\n// ===================================\n// HELPER FUNCTIONS\n// ===================================\n\nconst renderComponent = (props = {}) => {\n  const defaultProps = {\n    onOrderSelect: jest.fn(),\n    onOrderEdit: jest.fn(),\n    onBulkAction: jest.fn(),\n    enableBulkActions: true,\n    enableFilters: true,\n    pageSize: 20,\n    ...props,\n  }\n\n  return render(<OrderListEnterprise {...defaultProps} />)\n}\n\nconst createMockFetch = (response, shouldReject = false) => {\n  return jest.fn().mockImplementation(() => {\n    if (shouldReject) {\n      return Promise.reject(new Error('Network error'))\n    }\n    return Promise.resolve({\n      ok: response.success !== false,\n      status: response.success !== false ? 200 : 500,\n      json: () => Promise.resolve(response),\n    })\n  })\n}\n\n// ===================================\n// TESTS DE MANEJO DE API\n// ===================================\n\ndescribe('OrderListEnterprise - API Response Handling', () => {\n  let originalFetch\n\n  beforeEach(() => {\n    originalFetch = global.fetch\n    mockToast.mockClear()\n  })\n\n  afterEach(() => {\n    global.fetch = originalFetch\n    jest.clearAllMocks()\n  })\n\n  describe('Respuestas Válidas de API', () => {\n    test('debe manejar respuesta válida con órdenes', async () => {\n      // Arrange\n      global.fetch = createMockFetch(mockValidApiResponse)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(() => {\n        expect(screen.getByText('ORD-001')).toBeInTheDocument()\n        expect(screen.getByText('Test User')).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n\n    test('debe manejar respuesta válida sin órdenes', async () => {\n      // Arrange\n      global.fetch = createMockFetch(mockEmptyApiResponse)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(() => {\n        expect(screen.getByText(/No se encontraron órdenes/i)).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n\n    test('debe manejar respuesta con estructura de datos incompleta', async () => {\n      // Arrange - Respuesta sin campo orders\n      const incompleteResponse = {\n        success: true,\n        data: {\n          pagination: mockValidApiResponse.data.pagination,\n          filters: mockValidApiResponse.data.filters,\n        },\n      }\n      global.fetch = createMockFetch(incompleteResponse)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe manejar gracefully la ausencia de orders\n      await waitFor(() => {\n        expect(screen.getByText(/No se encontraron órdenes/i)).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n\n    test('debe manejar respuesta con paginación nula', async () => {\n      // Arrange\n      const responseWithNullPagination = {\n        success: true,\n        data: {\n          orders: mockValidApiResponse.data.orders,\n          pagination: null,\n          filters: mockValidApiResponse.data.filters,\n        },\n      }\n      global.fetch = createMockFetch(responseWithNullPagination)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe mostrar órdenes sin paginación\n      await waitFor(() => {\n        expect(screen.getByText('ORD-001')).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n  })\n\n  describe('Manejo de Errores de API', () => {\n    test('debe manejar error de red', async () => {\n      // Arrange\n      global.fetch = createMockFetch(null, true)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith({\n          title: 'Error',\n          description: expect.stringContaining('Error al cargar las órdenes'),\n          variant: 'destructive',\n        })\n      })\n    })\n\n    test('debe manejar respuesta HTTP 500', async () => {\n      // Arrange\n      const errorResponse = {\n        success: false,\n        error: 'Internal server error',\n        message: 'Error interno del servidor',\n      }\n      global.fetch = createMockFetch(errorResponse)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith({\n          title: 'Error',\n          description: expect.stringContaining('Error al cargar las órdenes'),\n          variant: 'destructive',\n        })\n      })\n    })\n\n    test('debe manejar respuesta JSON malformada', async () => {\n      // Arrange\n      global.fetch = jest.fn().mockResolvedValue({\n        ok: true,\n        status: 200,\n        json: () => Promise.reject(new Error('Invalid JSON')),\n      })\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(() => {\n        expect(mockToast).toHaveBeenCalledWith({\n          title: 'Error',\n          description: expect.stringContaining('Error al cargar las órdenes'),\n          variant: 'destructive',\n        })\n      })\n    })\n\n    test('debe manejar timeout de API', async () => {\n      // Arrange\n      global.fetch = jest.fn().mockImplementation(() => {\n        return new Promise((_, reject) => {\n          setTimeout(() => reject(new Error('Request timeout')), 100)\n        })\n      })\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert\n      await waitFor(\n        () => {\n          expect(mockToast).toHaveBeenCalledWith({\n            title: 'Error',\n            description: expect.stringContaining('Error al cargar las órdenes'),\n            variant: 'destructive',\n          })\n        },\n        { timeout: 3000 }\n      )\n    })\n  })\n\n  describe('Casos Edge de Estructura de Datos', () => {\n    test('debe manejar órdenes con campos faltantes', async () => {\n      // Arrange\n      const responseWithIncompleteOrders = {\n        success: true,\n        data: {\n          orders: [\n            {\n              id: '1',\n              order_number: 'ORD-001',\n              // Faltan campos como status, total_amount, user_profiles\n            },\n          ],\n          pagination: mockValidApiResponse.data.pagination,\n          filters: mockValidApiResponse.data.filters,\n        },\n      }\n      global.fetch = createMockFetch(responseWithIncompleteOrders)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe renderizar sin errores\n      await waitFor(() => {\n        expect(screen.getByText('ORD-001')).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n\n    test('debe manejar user_profiles nulo', async () => {\n      // Arrange\n      const responseWithNullUserProfiles = {\n        success: true,\n        data: {\n          orders: [\n            {\n              id: '1',\n              order_number: 'ORD-001',\n              status: 'pending',\n              total_amount: 100.0,\n              created_at: '2024-01-01T00:00:00Z',\n              user_profiles: null,\n            },\n          ],\n          pagination: mockValidApiResponse.data.pagination,\n          filters: mockValidApiResponse.data.filters,\n        },\n      }\n      global.fetch = createMockFetch(responseWithNullUserProfiles)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe renderizar sin errores\n      await waitFor(() => {\n        expect(screen.getByText('ORD-001')).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n\n    test('debe manejar fechas inválidas', async () => {\n      // Arrange\n      const responseWithInvalidDates = {\n        success: true,\n        data: {\n          orders: [\n            {\n              id: '1',\n              order_number: 'ORD-001',\n              status: 'pending',\n              total_amount: 100.0,\n              created_at: 'invalid-date',\n              user_profiles: { name: 'Test User', email: 'test@example.com' },\n            },\n          ],\n          pagination: mockValidApiResponse.data.pagination,\n          filters: mockValidApiResponse.data.filters,\n        },\n      }\n      global.fetch = createMockFetch(responseWithInvalidDates)\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe renderizar sin errores\n      await waitFor(() => {\n        expect(screen.getByText('ORD-001')).toBeInTheDocument()\n      })\n\n      expect(mockToast).not.toHaveBeenCalled()\n    })\n  })\n\n  describe('Reintentos y Recuperación', () => {\n    test('debe reintentar automáticamente en caso de fallo temporal', async () => {\n      // Arrange - Primer intento falla, segundo intento exitoso\n      let callCount = 0\n      global.fetch = jest.fn().mockImplementation(() => {\n        callCount++\n        if (callCount === 1) {\n          return Promise.reject(new Error('Temporary network error'))\n        }\n        return Promise.resolve({\n          ok: true,\n          status: 200,\n          json: () => Promise.resolve(mockValidApiResponse),\n        })\n      })\n\n      // Act\n      await act(async () => {\n        renderComponent()\n      })\n\n      // Assert - Debe eventualmente mostrar los datos\n      await waitFor(\n        () => {\n          expect(screen.getByText('ORD-001')).toBeInTheDocument()\n        },\n        { timeout: 5000 }\n      )\n\n      // Verificar que se hicieron múltiples intentos\n      expect(global.fetch).toHaveBeenCalledTimes(2)\n    })\n  })\n})\n"],"names":["jest","mock","useToast","toast","mockToast","useRouter","push","fn","replace","back","useSearchParams","URLSearchParams","usePathname","mockValidApiResponse","success","data","orders","id","order_number","status","total_amount","created_at","user_profiles","name","email","pagination","page","limit","total","totalPages","hasNextPage","hasPreviousPage","filters","search","payment_status","mockEmptyApiResponse","renderComponent","props","defaultProps","onOrderSelect","onOrderEdit","onBulkAction","enableBulkActions","enableFilters","pageSize","render","OrderListEnterprise","createMockFetch","response","shouldReject","mockImplementation","Promise","reject","Error","resolve","ok","json","describe","originalFetch","beforeEach","global","fetch","mockClear","afterEach","clearAllMocks","test","act","waitFor","expect","screen","getByText","toBeInTheDocument","not","toHaveBeenCalled","incompleteResponse","responseWithNullPagination","toHaveBeenCalledWith","title","description","stringContaining","variant","errorResponse","error","message","mockResolvedValue","_","setTimeout","timeout","responseWithIncompleteOrders","responseWithNullUserProfiles","responseWithInvalidDates","callCount","toHaveBeenCalledTimes"],"mappings":"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"}