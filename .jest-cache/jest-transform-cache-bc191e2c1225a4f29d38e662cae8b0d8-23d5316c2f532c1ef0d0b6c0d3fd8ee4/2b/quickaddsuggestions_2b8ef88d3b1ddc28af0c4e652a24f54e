3e4da3b7764018c30b0c207a08c9ecd1
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _button = require("./button");
const _optimizedimports = require("../../lib/optimized-imports");
const _utils = require("../../lib/utils");
const _products = require("../../lib/api/products");
const _productadapter = require("../../lib/adapters/product-adapter");
const _image = /*#__PURE__*/ _interop_require_default(require("next/image"));
const _reactredux = require("react-redux");
const _cartslice = require("../../redux/features/cart-slice");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const QuickAddSuggestions = ({ onAddToCart, onClose, className })=>{
    const [products, setProducts] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const dispatch = (0, _reactredux.useDispatch)();
    (0, _react.useEffect)(()=>{
        const abortController = new AbortController();
        const fetchPopularProducts = async ()=>{
            try {
                setLoading(true);
                setError(null);
                // Obtener productos con descuento (populares) limitados a 3
                const response = await (0, _products.getProducts)({
                    limit: 3,
                    sortBy: 'created_at',
                    sortOrder: 'desc'
                }, abortController.signal);
                // Verificar si el componente aún está montado
                if (abortController.signal.aborted) {
                    return;
                }
                if (response.success && response.data) {
                    setProducts(response.data);
                } else {
                    setError('No se pudieron cargar los productos');
                }
            } catch (err) {
                // Solo mostrar error si no fue cancelado y no es AbortError
                if (!abortController.signal.aborted && err instanceof Error && err.name !== 'AbortError') {
                    console.error('Error fetching popular products:', err);
                    setError('Error al cargar productos populares');
                }
            // No loggear AbortError ya que es comportamiento esperado durante cleanup
            } finally{
                // Solo actualizar loading si no fue cancelado
                if (!abortController.signal.aborted) {
                    setLoading(false);
                }
            }
        };
        fetchPopularProducts();
        // Cleanup: cancelar la request si el componente se desmonta
        return ()=>{
            abortController.abort();
        };
    }, []);
    const handleAddToCart = (productId)=>{
        // Buscar el producto en la lista
        const product = products.find((p)=>p.id.toString() === productId);
        if (product) {
            // Convertir el producto al formato esperado por el carrito
            const cartItem = {
                id: product.id,
                title: product.name,
                brand: product.brand || '',
                price: product.price,
                discountedPrice: product.discounted_price || product.price,
                imgs: {
                    thumbnails: product.images ? [
                        product.images[0]
                    ] : [],
                    previews: product.images || []
                },
                reviews: 0,
                quantity: 1
            };
            dispatch((0, _cartslice.addItemToCart)(cartItem));
        }
        // Llamar callback personalizado si existe
        if (onAddToCart) {
            onAddToCart(productId);
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: (0, _utils.cn)("bg-white rounded-xl border border-gray-200 p-4", className),
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "flex items-center justify-between mb-4",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                            className: "font-bold text-gray-900 text-sm",
                            children: "Productos Populares"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-xs text-gray-600",
                            children: "Agrega r\xe1pidamente a tu carrito"
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "space-y-3",
                children: loading ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center py-8",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedimports.Loader2, {
                            className: "w-6 h-6 animate-spin text-gray-400"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "ml-2 text-sm text-gray-500",
                            children: "Cargando productos..."
                        })
                    ]
                }) : error ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "text-center py-4",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-red-500",
                        children: error instanceof Error ? error.message : error?.toString() || 'Error desconocido'
                    })
                }) : products.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "text-center py-4",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-gray-500",
                        children: "No hay productos disponibles"
                    })
                }) : products.map((product)=>{
                    const currentPrice = product.discounted_price || product.price;
                    const originalPrice = product.discounted_price ? product.price : null;
                    const hasDiscount = originalPrice && currentPrice < originalPrice;
                    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-16 h-16 bg-gray-200 rounded-xl overflow-hidden flex-shrink-0 shadow-sm border border-gray-300",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_image.default, {
                                    src: (0, _productadapter.getValidImageUrl)(product.images?.[0]),
                                    alt: product.name,
                                    width: 64,
                                    height: 64,
                                    className: "w-full h-full object-cover"
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex-1 min-w-0",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h5", {
                                        className: "font-semibold text-xs text-gray-900 line-clamp-1",
                                        children: product.name
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-2xs text-gray-500 mb-1",
                                        children: product.brand || 'Sin marca'
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "font-bold text-sm",
                                                style: {
                                                    color: '#ea5a17'
                                                },
                                                children: [
                                                    "$",
                                                    currentPrice.toLocaleString()
                                                ]
                                            }),
                                            hasDiscount && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "text-2xs text-gray-400 line-through",
                                                children: [
                                                    "$",
                                                    originalPrice.toLocaleString()
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "flex items-center gap-1 mt-1",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "text-2xs text-gray-600",
                                            children: product.category?.name || 'General'
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                                size: "sm",
                                onClick: ()=>handleAddToCart(product.id.toString()),
                                className: "h-10 w-10 p-0 bg-yellow-400 hover:bg-yellow-500 text-black rounded-xl shadow-md hover:shadow-lg transition-all duration-200",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedimports.Plus, {
                                    className: "w-5 h-5"
                                })
                            })
                        ]
                    }, product.id);
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "mt-4 pt-3 border-t border-gray-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                    variant: "ghost",
                    size: "sm",
                    onClick: onClose,
                    className: "w-full text-xs text-gray-600 hover:text-gray-900",
                    children: "Ver todos los productos →"
                })
            })
        ]
    });
};
const _default = QuickAddSuggestions;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXHF1aWNrLWFkZC1zdWdnZXN0aW9ucy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBQbHVzLCBTdGFyLCBMb2FkZXIyIH0gZnJvbSBcIkAvbGliL29wdGltaXplZC1pbXBvcnRzXCI7XHJcbmltcG9ydCB7IGNuIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XHJcbmltcG9ydCB7IGdldFByb2R1Y3RzIH0gZnJvbSBcIkAvbGliL2FwaS9wcm9kdWN0c1wiO1xyXG5pbXBvcnQgeyBQcm9kdWN0V2l0aENhdGVnb3J5IH0gZnJvbSBcIkAvdHlwZXMvYXBpXCI7XHJcbmltcG9ydCB7IGdldFZhbGlkSW1hZ2VVcmwgfSBmcm9tIFwiQC9saWIvYWRhcHRlcnMvcHJvZHVjdC1hZGFwdGVyXCI7XHJcbmltcG9ydCBJbWFnZSBmcm9tIFwibmV4dC9pbWFnZVwiO1xyXG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgeyBBcHBEaXNwYXRjaCB9IGZyb20gXCJAL3JlZHV4L3N0b3JlXCI7XHJcbmltcG9ydCB7IGFkZEl0ZW1Ub0NhcnQgfSBmcm9tIFwiQC9yZWR1eC9mZWF0dXJlcy9jYXJ0LXNsaWNlXCI7XHJcblxyXG5pbnRlcmZhY2UgUXVpY2tBZGRTdWdnZXN0aW9uc1Byb3BzIHtcclxuICBvbkFkZFRvQ2FydD86IChwcm9kdWN0SWQ6IHN0cmluZykgPT4gdm9pZDtcclxuICBvbkNsb3NlPzogKCkgPT4gdm9pZDtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IFF1aWNrQWRkU3VnZ2VzdGlvbnM6IFJlYWN0LkZDPFF1aWNrQWRkU3VnZ2VzdGlvbnNQcm9wcz4gPSAoe1xyXG4gIG9uQWRkVG9DYXJ0LFxyXG4gIG9uQ2xvc2UsXHJcbiAgY2xhc3NOYW1lXHJcbn0pID0+IHtcclxuICBjb25zdCBbcHJvZHVjdHMsIHNldFByb2R1Y3RzXSA9IHVzZVN0YXRlPFByb2R1Y3RXaXRoQ2F0ZWdvcnlbXT4oW10pO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaDxBcHBEaXNwYXRjaD4oKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHJcbiAgICBjb25zdCBmZXRjaFBvcHVsYXJQcm9kdWN0cyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgICAgICAvLyBPYnRlbmVyIHByb2R1Y3RvcyBjb24gZGVzY3VlbnRvIChwb3B1bGFyZXMpIGxpbWl0YWRvcyBhIDNcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFByb2R1Y3RzKHtcclxuICAgICAgICAgIGxpbWl0OiAzLFxyXG4gICAgICAgICAgc29ydEJ5OiAnY3JlYXRlZF9hdCcsXHJcbiAgICAgICAgICBzb3J0T3JkZXI6ICdkZXNjJ1xyXG4gICAgICAgIH0sIGFib3J0Q29udHJvbGxlci5zaWduYWwpO1xyXG5cclxuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgY29tcG9uZW50ZSBhw7puIGVzdMOhIG1vbnRhZG9cclxuICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICBzZXRQcm9kdWN0cyhyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0RXJyb3IoJ05vIHNlIHB1ZGllcm9uIGNhcmdhciBsb3MgcHJvZHVjdG9zJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAvLyBTb2xvIG1vc3RyYXIgZXJyb3Igc2kgbm8gZnVlIGNhbmNlbGFkbyB5IG5vIGVzIEFib3J0RXJyb3JcclxuICAgICAgICBpZiAoIWFib3J0Q29udHJvbGxlci5zaWduYWwuYWJvcnRlZCAmJiBlcnIgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnIubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwb3B1bGFyIHByb2R1Y3RzOicsIGVycik7XHJcbiAgICAgICAgICBzZXRFcnJvcignRXJyb3IgYWwgY2FyZ2FyIHByb2R1Y3RvcyBwb3B1bGFyZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm8gbG9nZ2VhciBBYm9ydEVycm9yIHlhIHF1ZSBlcyBjb21wb3J0YW1pZW50byBlc3BlcmFkbyBkdXJhbnRlIGNsZWFudXBcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAvLyBTb2xvIGFjdHVhbGl6YXIgbG9hZGluZyBzaSBubyBmdWUgY2FuY2VsYWRvXHJcbiAgICAgICAgaWYgKCFhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcclxuICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmZXRjaFBvcHVsYXJQcm9kdWN0cygpO1xyXG5cclxuICAgIC8vIENsZWFudXA6IGNhbmNlbGFyIGxhIHJlcXVlc3Qgc2kgZWwgY29tcG9uZW50ZSBzZSBkZXNtb250YVxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQWRkVG9DYXJ0ID0gKHByb2R1Y3RJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAvLyBCdXNjYXIgZWwgcHJvZHVjdG8gZW4gbGEgbGlzdGFcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5pZC50b1N0cmluZygpID09PSBwcm9kdWN0SWQpO1xyXG5cclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIC8vIENvbnZlcnRpciBlbCBwcm9kdWN0byBhbCBmb3JtYXRvIGVzcGVyYWRvIHBvciBlbCBjYXJyaXRvXHJcbiAgICAgIGNvbnN0IGNhcnRJdGVtID0ge1xyXG4gICAgICAgIGlkOiBwcm9kdWN0LmlkLFxyXG4gICAgICAgIHRpdGxlOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgYnJhbmQ6IHByb2R1Y3QuYnJhbmQgfHwgJycsXHJcbiAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXHJcbiAgICAgICAgZGlzY291bnRlZFByaWNlOiBwcm9kdWN0LmRpc2NvdW50ZWRfcHJpY2UgfHwgcHJvZHVjdC5wcmljZSxcclxuICAgICAgICBpbWdzOiB7XHJcbiAgICAgICAgICB0aHVtYm5haWxzOiBwcm9kdWN0LmltYWdlcyA/IFtwcm9kdWN0LmltYWdlc1swXV0gOiBbXSxcclxuICAgICAgICAgIHByZXZpZXdzOiBwcm9kdWN0LmltYWdlcyB8fCBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmV2aWV3czogMCwgLy8gTm8gdGVuZW1vcyByZXZpZXdzIGVuIGxhIEFQSSBhY3R1YWxcclxuICAgICAgICBxdWFudGl0eTogMVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZGlzcGF0Y2goYWRkSXRlbVRvQ2FydChjYXJ0SXRlbSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExsYW1hciBjYWxsYmFjayBwZXJzb25hbGl6YWRvIHNpIGV4aXN0ZVxyXG4gICAgaWYgKG9uQWRkVG9DYXJ0KSB7XHJcbiAgICAgIG9uQWRkVG9DYXJ0KHByb2R1Y3RJZCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTRcIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgIHsvKiBIZWFkZXIgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTRcIj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIHRleHQtc21cIj5Qcm9kdWN0b3MgUG9wdWxhcmVzPC9oND5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkFncmVnYSByw6FwaWRhbWVudGUgYSB0dSBjYXJyaXRvPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBMaXN0YSBkZSBwcm9kdWN0b3MgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XHJcbiAgICAgICAge2xvYWRpbmcgPyAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LThcIj5cclxuICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy02IGgtNiBhbmltYXRlLXNwaW4gdGV4dC1ncmF5LTQwMFwiIC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+Q2FyZ2FuZG8gcHJvZHVjdG9zLi4uPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSA6IGVycm9yID8gKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBweS00XCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNTAwXCI+e2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3I/LnRvU3RyaW5nKCkgfHwgJ0Vycm9yIGRlc2Nvbm9jaWRvJ308L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApIDogcHJvZHVjdHMubGVuZ3RoID09PSAwID8gKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBweS00XCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPk5vIGhheSBwcm9kdWN0b3MgZGlzcG9uaWJsZXM8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgcHJvZHVjdHMubWFwKChwcm9kdWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IHByb2R1Y3QuZGlzY291bnRlZF9wcmljZSB8fCBwcm9kdWN0LnByaWNlO1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFByaWNlID0gcHJvZHVjdC5kaXNjb3VudGVkX3ByaWNlID8gcHJvZHVjdC5wcmljZSA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0Rpc2NvdW50ID0gb3JpZ2luYWxQcmljZSAmJiBjdXJyZW50UHJpY2UgPCBvcmlnaW5hbFByaWNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBrZXk9e3Byb2R1Y3QuaWR9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBwLTMgYmctZ3JheS01MCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgey8qIEltYWdlbiBkZWwgcHJvZHVjdG8gKi99XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgaC0xNiBiZy1ncmF5LTIwMCByb3VuZGVkLXhsIG92ZXJmbG93LWhpZGRlbiBmbGV4LXNocmluay0wIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLWdyYXktMzAwXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIHNyYz17Z2V0VmFsaWRJbWFnZVVybChwcm9kdWN0LmltYWdlcz8uWzBdKX1cclxuICAgICAgICAgICAgICAgICAgICBhbHQ9e3Byb2R1Y3QubmFtZX1cclxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17NjR9XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs2NH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogSW5mbyBkZWwgcHJvZHVjdG8gKi99XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQteHMgdGV4dC1ncmF5LTkwMCBsaW5lLWNsYW1wLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICB7cHJvZHVjdC5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICA8L2g1PlxyXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LTJ4cyB0ZXh0LWdyYXktNTAwIG1iLTFcIj57cHJvZHVjdC5icmFuZCB8fCAnU2luIG1hcmNhJ308L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtc21cIiBzdHlsZT17eyBjb2xvcjogJyNlYTVhMTcnIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgJHtjdXJyZW50UHJpY2UudG9Mb2NhbGVTdHJpbmcoKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAge2hhc0Rpc2NvdW50ICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhzIHRleHQtZ3JheS00MDAgbGluZS10aHJvdWdoXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7b3JpZ2luYWxQcmljZSEudG9Mb2NhbGVTdHJpbmcoKX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBDYXRlZ29yw61hICovfVxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG10LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LTJ4cyB0ZXh0LWdyYXktNjAwXCI+e3Byb2R1Y3QuY2F0ZWdvcnk/Lm5hbWUgfHwgJ0dlbmVyYWwnfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogQm90w7NuIGFncmVnYXIgKi99XHJcbiAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFkZFRvQ2FydChwcm9kdWN0LmlkLnRvU3RyaW5nKCkpfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTEwIHctMTAgcC0wIGJnLXllbGxvdy00MDAgaG92ZXI6YmcteWVsbG93LTUwMCB0ZXh0LWJsYWNrIHJvdW5kZWQteGwgc2hhZG93LW1kIGhvdmVyOnNoYWRvdy1sZyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBGb290ZXIgY29uIGVubGFjZSBhIHZlciBtw6FzICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cclxuICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxyXG4gICAgICAgICAgc2l6ZT1cInNtXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC14cyB0ZXh0LWdyYXktNjAwIGhvdmVyOnRleHQtZ3JheS05MDBcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIFZlciB0b2RvcyBsb3MgcHJvZHVjdG9zIOKGklxyXG4gICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBRdWlja0FkZFN1Z2dlc3Rpb25zO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiUXVpY2tBZGRTdWdnZXN0aW9ucyIsIm9uQWRkVG9DYXJ0Iiwib25DbG9zZSIsImNsYXNzTmFtZSIsInByb2R1Y3RzIiwic2V0UHJvZHVjdHMiLCJ1c2VTdGF0ZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImRpc3BhdGNoIiwidXNlRGlzcGF0Y2giLCJ1c2VFZmZlY3QiLCJhYm9ydENvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJmZXRjaFBvcHVsYXJQcm9kdWN0cyIsInJlc3BvbnNlIiwiZ2V0UHJvZHVjdHMiLCJsaW1pdCIsInNvcnRCeSIsInNvcnRPcmRlciIsInNpZ25hbCIsImFib3J0ZWQiLCJzdWNjZXNzIiwiZGF0YSIsImVyciIsIkVycm9yIiwibmFtZSIsImNvbnNvbGUiLCJhYm9ydCIsImhhbmRsZUFkZFRvQ2FydCIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJmaW5kIiwicCIsImlkIiwidG9TdHJpbmciLCJjYXJ0SXRlbSIsInRpdGxlIiwiYnJhbmQiLCJwcmljZSIsImRpc2NvdW50ZWRQcmljZSIsImRpc2NvdW50ZWRfcHJpY2UiLCJpbWdzIiwidGh1bWJuYWlscyIsImltYWdlcyIsInByZXZpZXdzIiwicmV2aWV3cyIsInF1YW50aXR5IiwiYWRkSXRlbVRvQ2FydCIsImRpdiIsImNuIiwiaDQiLCJMb2FkZXIyIiwic3BhbiIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJtYXAiLCJjdXJyZW50UHJpY2UiLCJvcmlnaW5hbFByaWNlIiwiaGFzRGlzY291bnQiLCJJbWFnZSIsInNyYyIsImdldFZhbGlkSW1hZ2VVcmwiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsImg1Iiwic3R5bGUiLCJjb2xvciIsInRvTG9jYWxlU3RyaW5nIiwiY2F0ZWdvcnkiLCJCdXR0b24iLCJzaXplIiwib25DbGljayIsIlBsdXMiLCJ2YXJpYW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBK01BOzs7ZUFBQTs7OzsrREE3TTJDO3dCQUNwQjtrQ0FDYTt1QkFDakI7MEJBQ1M7Z0NBRUs7OERBQ2Y7NEJBQ1U7MkJBRUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUTlCLE1BQU1BLHNCQUEwRCxDQUFDLEVBQy9EQyxXQUFXLEVBQ1hDLE9BQU8sRUFDUEMsU0FBUyxFQUNWO0lBQ0MsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdDLElBQUFBLGVBQVEsRUFBd0IsRUFBRTtJQUNsRSxNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR0YsSUFBQUEsZUFBUSxFQUFDO0lBQ3ZDLE1BQU0sQ0FBQ0csT0FBT0MsU0FBUyxHQUFHSixJQUFBQSxlQUFRLEVBQWdCO0lBQ2xELE1BQU1LLFdBQVdDLElBQUFBLHVCQUFXO0lBRTVCQyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsTUFBTUMsa0JBQWtCLElBQUlDO1FBRTVCLE1BQU1DLHVCQUF1QjtZQUMzQixJQUFJO2dCQUNGUixXQUFXO2dCQUNYRSxTQUFTO2dCQUVULDREQUE0RDtnQkFDNUQsTUFBTU8sV0FBVyxNQUFNQyxJQUFBQSxxQkFBVyxFQUFDO29CQUNqQ0MsT0FBTztvQkFDUEMsUUFBUTtvQkFDUkMsV0FBVztnQkFDYixHQUFHUCxnQkFBZ0JRLE1BQU07Z0JBRXpCLDhDQUE4QztnQkFDOUMsSUFBSVIsZ0JBQWdCUSxNQUFNLENBQUNDLE9BQU8sRUFBRTtvQkFDbEM7Z0JBQ0Y7Z0JBRUEsSUFBSU4sU0FBU08sT0FBTyxJQUFJUCxTQUFTUSxJQUFJLEVBQUU7b0JBQ3JDcEIsWUFBWVksU0FBU1EsSUFBSTtnQkFDM0IsT0FBTztvQkFDTGYsU0FB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