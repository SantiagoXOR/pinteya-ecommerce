{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useStickyMenu.test.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - TESTS PARA HOOK STICKY MENU\r\n// ===================================\r\n\r\nimport { renderHook, act } from '@testing-library/react';\r\nimport { useStickyMenu } from '@/hooks/useStickyMenu';\r\n\r\n// Mock para window scroll\r\nconst mockAddEventListener = jest.fn();\r\nconst mockRemoveEventListener = jest.fn();\r\n\r\nbeforeEach(() => {\r\n  // Reset mocks\r\n  mockAddEventListener.mockClear();\r\n  mockRemoveEventListener.mockClear();\r\n  \r\n  // Mock window.addEventListener\r\n  Object.defineProperty(window, 'addEventListener', {\r\n    value: mockAddEventListener,\r\n    writable: true,\r\n  });\r\n  \r\n  Object.defineProperty(window, 'removeEventListener', {\r\n    value: mockRemoveEventListener,\r\n    writable: true,\r\n  });\r\n  \r\n  // Mock scroll properties\r\n  Object.defineProperty(window, 'pageYOffset', {\r\n    value: 0,\r\n    writable: true,\r\n  });\r\n  \r\n  Object.defineProperty(document.documentElement, 'scrollTop', {\r\n    value: 0,\r\n    writable: true,\r\n  });\r\n});\r\n\r\ndescribe('useStickyMenu', () => {\r\n  it('should initialize with non-sticky state', () => {\r\n    const { result } = renderHook(() => useStickyMenu());\r\n    \r\n    expect(result.current.isSticky).toBe(false);\r\n  });\r\n\r\n  it('should use default threshold of 80', () => {\r\n    renderHook(() => useStickyMenu());\r\n    \r\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function));\r\n  });\r\n\r\n  it('should use custom threshold', () => {\r\n    const customThreshold = 100;\r\n    renderHook(() => useStickyMenu(customThreshold));\r\n    \r\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function));\r\n  });\r\n\r\n  it('should add scroll event listener on mount', () => {\r\n    renderHook(() => useStickyMenu());\r\n    \r\n    expect(mockAddEventListener).toHaveBeenCalledWith('scroll', expect.any(Function));\r\n  });\r\n\r\n  it('should remove scroll event listener on unmount', () => {\r\n    const { unmount } = renderHook(() => useStickyMenu());\r\n    \r\n    unmount();\r\n    \r\n    expect(mockRemoveEventListener).toHaveBeenCalledWith('scroll', expect.any(Function));\r\n  });\r\n\r\n  it('should become sticky when scroll exceeds threshold', () => {\r\n    const threshold = 80;\r\n    const { result } = renderHook(() => useStickyMenu(threshold));\r\n    \r\n    // Simulate scroll event\r\n    const scrollHandler = mockAddEventListener.mock.calls[0][1];\r\n    \r\n    // Mock scroll position above threshold\r\n    Object.defineProperty(window, 'pageYOffset', {\r\n      value: 100,\r\n      writable: true,\r\n    });\r\n\r\n    act(() => {\r\n      scrollHandler();\r\n    });\r\n\r\n    expect(result.current.isSticky).toBe(true);\r\n  });\r\n\r\n  it('should not be sticky when scroll is below threshold', () => {\r\n    const threshold = 80;\r\n    const { result } = renderHook(() => useStickyMenu(threshold));\r\n    \r\n    // Simulate scroll event\r\n    const scrollHandler = mockAddEventListener.mock.calls[0][1];\r\n    \r\n    // Mock scroll position below threshold\r\n    Object.defineProperty(window, 'pageYOffset', {\r\n      value: 50,\r\n      writable: true,\r\n    });\r\n\r\n    act(() => {\r\n      scrollHandler();\r\n    });\r\n\r\n    expect(result.current.isSticky).toBe(false);\r\n  });\r\n\r\n  it('should use documentElement.scrollTop as fallback', () => {\r\n    const threshold = 80;\r\n    const { result } = renderHook(() => useStickyMenu(threshold));\r\n    \r\n    // Simulate scroll event\r\n    const scrollHandler = mockAddEventListener.mock.calls[0][1];\r\n    \r\n    // Mock pageYOffset as undefined and use scrollTop\r\n    Object.defineProperty(window, 'pageYOffset', {\r\n      value: undefined,\r\n      writable: true,\r\n    });\r\n    \r\n    Object.defineProperty(document.documentElement, 'scrollTop', {\r\n      value: 100,\r\n      writable: true,\r\n    });\r\n\r\n    act(() => {\r\n      scrollHandler();\r\n    });\r\n\r\n    expect(result.current.isSticky).toBe(true);\r\n  });\r\n\r\n  it('should handle threshold of 0', () => {\r\n    const { result } = renderHook(() => useStickyMenu(0));\r\n    \r\n    // Simulate scroll event\r\n    const scrollHandler = mockAddEventListener.mock.calls[0][1];\r\n    \r\n    // Any scroll should make it sticky\r\n    Object.defineProperty(window, 'pageYOffset', {\r\n      value: 1,\r\n      writable: true,\r\n    });\r\n\r\n    act(() => {\r\n      scrollHandler();\r\n    });\r\n\r\n    expect(result.current.isSticky).toBe(true);\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["mockAddEventListener","jest","fn","mockRemoveEventListener","beforeEach","mockClear","Object","defineProperty","window","value","writable","document","documentElement","describe","it","result","renderHook","useStickyMenu","expect","current","isSticky","toBe","toHaveBeenCalledWith","any","Function","customThreshold","unmount","threshold","scrollHandler","mock","calls","act","undefined"],"mappings":"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"}