{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\integrations\\supabase\\supabase-adapter.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\nimport type {\n  Adapter,\n  AdapterUser,\n  AdapterAccount,\n  AdapterSession,\n  VerificationToken,\n} from '@auth/core/adapters'\n\nexport interface SupabaseAdapterClientOptions {\n  url: string\n  secret: string\n}\n\nexport function SupabaseAdapter(options: SupabaseAdapterClientOptions): Adapter {\n  const { url, secret } = options\n  const supabase = createClient(url, secret, {\n    db: { schema: 'public' },\n    auth: { persistSession: false },\n  })\n\n  return {\n    async createUser(user) {\n      console.log('[CUSTOM_ADAPTER] createUser:', user)\n      const { data, error } = await supabase\n        .from('users')\n        .insert({\n          id: crypto.randomUUID(),\n          name: user.name,\n          email: user.email,\n          emailVerified: user.emailVerified?.toISOString(),\n          image: user.image,\n        })\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] createUser error:', error)\n        throw new Error(`Error creating user: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] createUser success:', data)\n      return {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        emailVerified: data.emailVerified ? new Date(data.emailVerified) : null,\n        image: data.image,\n      }\n    },\n\n    async getUser(id) {\n      console.log('[CUSTOM_ADAPTER] getUser:', id)\n      const { data, error } = await supabase.from('users').select('*').eq('id', id).single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] getUser error:', error)\n        return null\n      }\n\n      console.log('[CUSTOM_ADAPTER] getUser success:', data)\n      return {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        emailVerified: data.emailVerified ? new Date(data.emailVerified) : null,\n        image: data.image,\n      }\n    },\n\n    async getUserByEmail(email) {\n      console.log('[CUSTOM_ADAPTER] getUserByEmail:', email)\n      const { data, error } = await supabase.from('users').select('*').eq('email', email).single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] getUserByEmail error:', error)\n        return null\n      }\n\n      console.log('[CUSTOM_ADAPTER] getUserByEmail success:', data)\n      return {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        emailVerified: data.emailVerified ? new Date(data.emailVerified) : null,\n        image: data.image,\n      }\n    },\n\n    async getUserByAccount({ providerAccountId, provider }) {\n      console.log('[CUSTOM_ADAPTER] getUserByAccount:', { providerAccountId, provider })\n\n      const { data, error } = await supabase\n        .from('accounts')\n        .select(\n          `\n          users (\n            id,\n            name,\n            email,\n            emailVerified,\n            image\n          )\n        `\n        )\n        .eq('providerAccountId', providerAccountId)\n        .eq('provider', provider)\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] getUserByAccount error:', error)\n        return null\n      }\n\n      if (!data?.users) {\n        console.log('[CUSTOM_ADAPTER] getUserByAccount: no user found')\n        return null\n      }\n\n      const user = Array.isArray(data.users) ? data.users[0] : data.users\n      console.log('[CUSTOM_ADAPTER] getUserByAccount success:', user)\n\n      return {\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        emailVerified: user.emailVerified ? new Date(user.emailVerified) : null,\n        image: user.image,\n      }\n    },\n\n    async updateUser(user) {\n      console.log('[CUSTOM_ADAPTER] updateUser:', user)\n      const { data, error } = await supabase\n        .from('users')\n        .update({\n          name: user.name,\n          email: user.email,\n          emailVerified: user.emailVerified?.toISOString(),\n          image: user.image,\n        })\n        .eq('id', user.id)\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] updateUser error:', error)\n        throw new Error(`Error updating user: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] updateUser success:', data)\n      return {\n        id: data.id,\n        name: data.name,\n        email: data.email,\n        emailVerified: data.emailVerified ? new Date(data.emailVerified) : null,\n        image: data.image,\n      }\n    },\n\n    async deleteUser(userId) {\n      console.log('[CUSTOM_ADAPTER] deleteUser:', userId)\n      const { error } = await supabase.from('users').delete().eq('id', userId)\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] deleteUser error:', error)\n        throw new Error(`Error deleting user: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] deleteUser success')\n    },\n\n    async linkAccount(account) {\n      console.log('[CUSTOM_ADAPTER] linkAccount:', account)\n      const { data, error } = await supabase\n        .from('accounts')\n        .insert({\n          id: crypto.randomUUID(),\n          userId: account.userId,\n          type: account.type,\n          provider: account.provider,\n          providerAccountId: account.providerAccountId,\n          refresh_token: account.refresh_token,\n          access_token: account.access_token,\n          expires_at: account.expires_at,\n          token_type: account.token_type,\n          scope: account.scope,\n          id_token: account.id_token,\n          session_state: account.session_state,\n        })\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] linkAccount error:', error)\n        throw new Error(`Error linking account: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] linkAccount success:', data)\n      return {\n        id: data.id,\n        userId: data.userId,\n        type: data.type,\n        provider: data.provider,\n        providerAccountId: data.providerAccountId,\n        refresh_token: data.refresh_token,\n        access_token: data.access_token,\n        expires_at: data.expires_at,\n        token_type: data.token_type,\n        scope: data.scope,\n        id_token: data.id_token,\n        session_state: data.session_state,\n      }\n    },\n\n    async unlinkAccount({ providerAccountId, provider }) {\n      console.log('[CUSTOM_ADAPTER] unlinkAccount:', { providerAccountId, provider })\n      const { error } = await supabase\n        .from('accounts')\n        .delete()\n        .eq('providerAccountId', providerAccountId)\n        .eq('provider', provider)\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] unlinkAccount error:', error)\n        throw new Error(`Error unlinking account: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] unlinkAccount success')\n    },\n\n    async createSession({ sessionToken, userId, expires }) {\n      console.log('[CUSTOM_ADAPTER] createSession:', { sessionToken, userId, expires })\n      const { data, error } = await supabase\n        .from('sessions')\n        .insert({\n          id: crypto.randomUUID(),\n          sessionToken,\n          userId,\n          expires: expires.toISOString(),\n        })\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] createSession error:', error)\n        throw new Error(`Error creating session: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] createSession success:', data)\n      return {\n        id: data.id,\n        sessionToken: data.sessionToken,\n        userId: data.userId,\n        expires: new Date(data.expires),\n      }\n    },\n\n    async getSessionAndUser(sessionToken) {\n      console.log('[CUSTOM_ADAPTER] getSessionAndUser:', sessionToken)\n      const { data, error } = await supabase\n        .from('sessions')\n        .select(\n          `\n          *,\n          users (\n            id,\n            name,\n            email,\n            emailVerified,\n            image\n          )\n        `\n        )\n        .eq('sessionToken', sessionToken)\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] getSessionAndUser error:', error)\n        return null\n      }\n\n      if (!data?.users) {\n        console.log('[CUSTOM_ADAPTER] getSessionAndUser: no user found')\n        return null\n      }\n\n      const user = Array.isArray(data.users) ? data.users[0] : data.users\n      console.log('[CUSTOM_ADAPTER] getSessionAndUser success:', { session: data, user })\n\n      return {\n        session: {\n          id: data.id,\n          sessionToken: data.sessionToken,\n          userId: data.userId,\n          expires: new Date(data.expires),\n        },\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          emailVerified: user.emailVerified ? new Date(user.emailVerified) : null,\n          image: user.image,\n        },\n      }\n    },\n\n    async updateSession({ sessionToken, ...session }) {\n      console.log('[CUSTOM_ADAPTER] updateSession:', { sessionToken, session })\n      const { data, error } = await supabase\n        .from('sessions')\n        .update({\n          expires: session.expires?.toISOString(),\n        })\n        .eq('sessionToken', sessionToken)\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] updateSession error:', error)\n        throw new Error(`Error updating session: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] updateSession success:', data)\n      return {\n        id: data.id,\n        sessionToken: data.sessionToken,\n        userId: data.userId,\n        expires: new Date(data.expires),\n      }\n    },\n\n    async deleteSession(sessionToken) {\n      console.log('[CUSTOM_ADAPTER] deleteSession:', sessionToken)\n      const { error } = await supabase.from('sessions').delete().eq('sessionToken', sessionToken)\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] deleteSession error:', error)\n        throw new Error(`Error deleting session: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] deleteSession success')\n    },\n\n    async createVerificationToken({ identifier, expires, token }) {\n      console.log('[CUSTOM_ADAPTER] createVerificationToken:', { identifier, expires, token })\n      const { data, error } = await supabase\n        .from('verification_tokens')\n        .insert({\n          identifier,\n          token,\n          expires: expires.toISOString(),\n        })\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] createVerificationToken error:', error)\n        throw new Error(`Error creating verification token: ${error.message}`)\n      }\n\n      console.log('[CUSTOM_ADAPTER] createVerificationToken success:', data)\n      return {\n        identifier: data.identifier,\n        token: data.token,\n        expires: new Date(data.expires),\n      }\n    },\n\n    async useVerificationToken({ identifier, token }) {\n      console.log('[CUSTOM_ADAPTER] useVerificationToken:', { identifier, token })\n      const { data, error } = await supabase\n        .from('verification_tokens')\n        .delete()\n        .eq('identifier', identifier)\n        .eq('token', token)\n        .select()\n        .single()\n\n      if (error) {\n        console.error('[CUSTOM_ADAPTER] useVerificationToken error:', error)\n        return null\n      }\n\n      console.log('[CUSTOM_ADAPTER] useVerificationToken success:', data)\n      return {\n        identifier: data.identifier,\n        token: data.token,\n        expires: new Date(data.expires),\n      }\n    },\n  }\n}\n"],"names":["SupabaseAdapter","options","url","secret","supabase","createClient","db","schema","auth","persistSession","createUser","user","console","log","data","error","from","insert","id","crypto","randomUUID","name","email","emailVerified","toISOString","image","select","single","Error","message","Date","getUser","eq","getUserByEmail","getUserByAccount","providerAccountId","provider","users","Array","isArray","updateUser","update","deleteUser","userId","delete","linkAccount","account","type","refresh_token","access_token","expires_at","token_type","scope","id_token","session_state","unlinkAccount","createSession","sessionToken","expires","getSessionAndUser","session","updateSession","deleteSession","createVerificationToken","identifier","token","useVerificationToken"],"mappings":"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"}