{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\utils\\validation.ts"],"sourcesContent":["// =====================================================\n// UTILIDADES: VALIDACIÓN DE DATOS\n// Descripción: Funciones para validar datos de logística\n// Basado en: Zod + patrones enterprise\n// =====================================================\n\nimport { z } from 'zod'\n\n// =====================================================\n// SCHEMAS DE VALIDACIÓN\n// =====================================================\n\nexport const addressSchema = z.object({\n  street: z.string().min(1, 'La calle es requerida'),\n  number: z.string().min(1, 'El número es requerido'),\n  apartment: z.string().optional(),\n  neighborhood: z.string().min(1, 'El barrio es requerido'),\n  city: z.string().min(1, 'La ciudad es requerida'),\n  state: z.string().min(1, 'La provincia es requerida'),\n  postal_code: z.string().min(4, 'El código postal debe tener al menos 4 dígitos'),\n  country: z.string().default('AR'),\n  latitude: z.number().optional(),\n  longitude: z.number().optional(),\n  reference: z.string().optional(),\n})\n\nexport const shipmentSchema = z.object({\n  tracking_number: z.string().min(1, 'El número de tracking es requerido'),\n  courier_id: z.number().min(1, 'El courier es requerido'),\n  service_type: z.enum(['standard', 'express', 'next_day', 'same_day']),\n  origin_address: addressSchema,\n  destination_address: addressSchema,\n  package_details: z.object({\n    weight: z.number().min(0.1, 'El peso debe ser mayor a 0'),\n    dimensions: z.object({\n      length: z.number().min(1, 'El largo debe ser mayor a 0'),\n      width: z.number().min(1, 'El ancho debe ser mayor a 0'),\n      height: z.number().min(1, 'La altura debe ser mayor a 0'),\n    }),\n    declared_value: z.number().min(0, 'El valor declarado debe ser mayor o igual a 0'),\n    description: z.string().min(1, 'La descripción es requerida'),\n  }),\n  estimated_delivery: z.string().optional(),\n  special_instructions: z.string().optional(),\n})\n\n// =====================================================\n// FUNCIONES DE VALIDACIÓN\n// =====================================================\n\nexport function validateEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\nexport function validatePhoneNumber(phone: string): boolean {\n  // Formato argentino: +54 9 351 123 4567, +54 351 123-4567, 351 123 4567, etc.\n  // Limpiar el teléfono de espacios, guiones y paréntesis\n  const cleanPhone = phone.replace(/[\\s\\-\\(\\)]/g, '')\n\n  // Patrones aceptados:\n  // +54351234567 (con código país)\n  // +549351234567 (con código país y 9)\n  // 351234567 (sin código país)\n  const phoneRegex = /^(\\+54(9)?)?\\d{10}$|^\\d{10}$/\n\n  return phoneRegex.test(cleanPhone) && cleanPhone.length >= 10\n}\n\nexport function validateDNI(dni: string): boolean {\n  // Limpiar el DNI de espacios, guiones y puntos\n  const cleanDNI = dni.replace(/[\\s\\-\\.]/g, '')\n\n  // Patrones aceptados:\n  // DNI: 8 dígitos (12345678)\n  // CUIT: 11 dígitos (20123456789)\n  const dniRegex = /^\\d{8}$/\n  const cuitRegex = /^\\d{11}$/\n\n  if (dniRegex.test(cleanDNI)) {\n    // Validar DNI (8 dígitos)\n    return cleanDNI.length === 8 && parseInt(cleanDNI) > 0\n  } else if (cuitRegex.test(cleanDNI)) {\n    // Validar CUIT (11 dígitos) - validación básica\n    return cleanDNI.length === 11 && parseInt(cleanDNI) > 0\n  }\n\n  return false\n}\n\nexport function validatePostalCode(postalCode: string): boolean {\n  // Código postal argentino: 4 dígitos\n  const postalCodeRegex = /^\\d{4}$/\n  return postalCodeRegex.test(postalCode)\n}\n\nexport function validateTrackingNumber(trackingNumber: string): boolean {\n  // Formato general: al menos 6 caracteres alfanuméricos\n  const trackingRegex = /^[A-Z0-9]{6,}$/i\n  return trackingRegex.test(trackingNumber)\n}\n\nexport function validateCoordinates(lat: number, lng: number): boolean {\n  return lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180\n}\n\nexport function validateWeight(weight: number): boolean {\n  return weight > 0 && weight <= 1000 // Máximo 1000kg\n}\n\nexport function validateDimensions(dimensions: {\n  length: number\n  width: number\n  height: number\n}): boolean {\n  const { length, width, height } = dimensions\n  return (\n    length > 0 &&\n    length <= 200 && // Máximo 200cm\n    width > 0 &&\n    width <= 200 &&\n    height > 0 &&\n    height <= 200\n  )\n}\n\n// =====================================================\n// VALIDACIONES DE NEGOCIO\n// =====================================================\n\nexport function validateDeliveryDate(date: string): boolean {\n  const deliveryDate = new Date(date)\n  const today = new Date()\n  const maxDate = new Date()\n  maxDate.setDate(today.getDate() + 30) // Máximo 30 días\n\n  return deliveryDate >= today && deliveryDate <= maxDate\n}\n\nexport function validateShippingCost(cost: number): boolean {\n  return cost >= 0 && cost <= 100000 // Máximo $100,000\n}\n\nexport function validatePackageValue(value: number): boolean {\n  return value >= 0 && value <= 1000000 // Máximo $1,000,000\n}\n\n// =====================================================\n// SANITIZACIÓN DE DATOS\n// =====================================================\n\nexport function sanitizeString(input: string): string {\n  return input.trim().replace(/[<>]/g, '')\n}\n\nexport function sanitizePhoneNumber(phone: string): string {\n  return phone.replace(/\\D/g, '')\n}\n\nexport function sanitizePostalCode(postalCode: string): string {\n  return postalCode.replace(/\\D/g, '').substring(0, 4)\n}\n\nexport function sanitizeTrackingNumber(trackingNumber: string): string {\n  return trackingNumber.toUpperCase().replace(/[^A-Z0-9]/g, '')\n}\n\n// =====================================================\n// TIPOS DE VALIDACIÓN\n// =====================================================\n\nexport type ValidationResult = {\n  isValid: boolean\n  errors: string[]\n}\n\nexport function validateAddress(address: any): ValidationResult {\n  try {\n    addressSchema.parse(address)\n    return { isValid: true, errors: [] }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        isValid: false,\n        errors: error.errors.map(err => err.message),\n      }\n    }\n    return { isValid: false, errors: ['Error de validación desconocido'] }\n  }\n}\n\nexport function validateShipment(shipment: any): ValidationResult {\n  try {\n    shipmentSchema.parse(shipment)\n    return { isValid: true, errors: [] }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        isValid: false,\n        errors: error.errors.map(err => err.message),\n      }\n    }\n    return { isValid: false, errors: ['Error de validación desconocido'] }\n  }\n}\n"],"names":["addressSchema","sanitizePhoneNumber","sanitizePostalCode","sanitizeString","sanitizeTrackingNumber","shipmentSchema","validateAddress","validateCoordinates","validateDNI","validateDeliveryDate","validateDimensions","validateEmail","validatePackageValue","validatePhoneNumber","validatePostalCode","validateShipment","validateShippingCost","validateTrackingNumber","validateWeight","z","object","street","string","min","number","apartment","optional","neighborhood","city","state","postal_code","country","default","latitude","longitude","reference","tracking_number","courier_id","service_type","enum","origin_address","destination_address","package_details","weight","dimensions","length","width","height","declared_value","description","estimated_delivery","special_instructions","email","emailRegex","test","phone","cleanPhone","replace","phoneRegex","dni","cleanDNI","dniRegex","cuitRegex","parseInt","postalCode","postalCodeRegex","trackingNumber","trackingRegex","lat","lng","date","deliveryDate","Date","today","maxDate","setDate","getDate","cost","value","input","trim","substring","toUpperCase","address","parse","isValid","errors","error","ZodError","map","err","message","shipment"],"mappings":"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"}