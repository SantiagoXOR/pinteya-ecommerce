{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\ProductItem.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Product } from \"@/types/product\";\r\nimport { useCartActions } from \"@/hooks/useCartActions\";\r\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\r\nimport { CommercialProductCard } from \"@/components/ui/product-card-commercial\";\r\n\r\ninterface ProductItemProps {\r\n  product?: Product;\r\n  item?: Product; // Prop legacy para compatibilidad\r\n}\r\n\r\nconst ProductItem: React.FC<ProductItemProps> = ({ product, item }) => {\r\n  const { addToCart } = useCartActions();\r\n  const { trackEvent } = useAnalytics();\r\n\r\n  // Usar product o item, con validación\r\n  const productData = product || item;\r\n  \r\n  // Early return si no hay datos del producto\r\n  if (!productData) {\r\n    console.warn('ProductItem: No product data provided');\r\n    return null;\r\n  }\r\n\r\n  // add to cart\r\n  const handleAddToCart = () => {\r\n    addToCart({\r\n      ...productData,\r\n      quantity: 1,\r\n    });\r\n    \r\n    // Track analytics event\r\n    trackEvent('add_to_cart', {\r\n      product_id: productData.id,\r\n      product_name: productData.title,\r\n      price: productData.price,\r\n    });\r\n  };\r\n\r\n  // Calcular descuento si existe\r\n  const hasDiscount = productData.discountedPrice && productData.discountedPrice < productData.price;\r\n  const discount = hasDiscount\r\n    ? Math.round(((productData.price - productData.discountedPrice) / productData.price) * 100)\r\n    : undefined;\r\n\r\n  // Precio final a mostrar\r\n  const finalPrice = hasDiscount ? productData.discountedPrice : productData.price;\r\n\r\n  // Determinar badge basado en precio y características\r\n  const badge = finalPrice >= 15000\r\n    ? \"Envío gratis\"\r\n    : discount\r\n    ? \"Oferta especial\"\r\n    : \"Nuevo\";\r\n\r\n  return (\r\n    <CommercialProductCard\r\n      image={productData.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\r\n      title={productData.title}\r\n      brand={productData.brand}\r\n      price={finalPrice}\r\n      originalPrice={hasDiscount ? productData.price : undefined}\r\n      discount={discount ? `${discount}%` : undefined}\r\n      isNew={badge === \"Nuevo\"}\r\n      stock={50} // Stock por defecto para productos legacy\r\n      productId={productData.id}\r\n      cta=\"Agregar al carrito\"\r\n      onAddToCart={handleAddToCart}\r\n      showCartAnimation={true}\r\n      // Información de cuotas automática\r\n      installments={finalPrice >= 5000 ? {\r\n        quantity: 3,\r\n        amount: Math.round(finalPrice / 3),\r\n        interestFree: true\r\n      } : undefined}\r\n      // Envío gratis automático para productos >= $15000\r\n      freeShipping={finalPrice >= 15000}\r\n      shippingText={badge === \"Envío gratis\" ? \"Envío gratis\" : undefined}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["ProductItem","product","item","addToCart","useCartActions","trackEvent","useAnalytics","productData","console","warn","handleAddToCart","quantity","product_id","id","product_name","title","price","hasDiscount","discountedPrice","discount","Math","round","undefined","finalPrice","badge","CommercialProductCard","image","imgs","previews","brand","originalPrice","isNew","stock","productId","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText"],"mappings":"AAAA;;;;;+BAmFA;;;eAAA;;;;8DAlFkB;gCAEa;8BACF;uCACS;;;;;;AAOtC,MAAMA,cAA0C,CAAC,EAAEC,OAAO,EAAEC,IAAI,EAAE;IAChE,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,8BAAc;IACpC,MAAM,EAAEC,UAAU,EAAE,GAAGC,IAAAA,0BAAY;IAEnC,sCAAsC;IACtC,MAAMC,cAAcN,WAAWC;IAE/B,4CAA4C;IAC5C,IAAI,CAACK,aAAa;QAChBC,QAAQC,IAAI,CAAC;QACb,OAAO;IACT;IAEA,cAAc;IACd,MAAMC,kBAAkB;QACtBP,UAAU;YACR,GAAGI,WAAW;YACdI,UAAU;QACZ;QAEA,wBAAwB;QACxBN,WAAW,eAAe;YACxBO,YAAYL,YAAYM,EAAE;YAC1BC,cAAcP,YAAYQ,KAAK;YAC/BC,OAAOT,YAAYS,KAAK;QAC1B;IACF;IAEA,+BAA+B;IAC/B,MAAMC,cAAcV,YAAYW,eAAe,IAAIX,YAAYW,eAAe,GAAGX,YAAYS,KAAK;IAClG,MAAMG,WAAWF,cACbG,KAAKC,KAAK,CAAC,AAAEd,CAAAA,YAAYS,KAAK,GAAGT,YAAYW,eAAe,AAAD,IAAKX,YAAYS,KAAK,GAAI,OACrFM;IAEJ,yBAAyB;IACzB,MAAMC,aAAaN,cAAcV,YAAYW,eAAe,GAAGX,YAAYS,KAAK;IAEhF,sDAAsD;IACtD,MAAMQ,QAAQD,cAAc,QACxB,iBACAJ,WACA,oBACA;IAEJ,qBACE,qBAACM,4CAAqB;QACpBC,OAAOnB,YAAYoB,IAAI,EAAEC,UAAU,CAAC,EAAE,IAAI;QAC1Cb,OAAOR,YAAYQ,KAAK;QACxBc,OAAOtB,YAAYsB,KAAK;QACxBb,OAAOO;QACPO,eAAeb,cAAcV,YAAYS,KAAK,GAAGM;QACjDH,UAAUA,WAAW,GAAGA,SAAS,CAAC,CAAC,GAAGG;QACtCS,OAAOP,UAAU;QACjBQ,OAAO;QACPC,WAAW1B,YAAYM,EAAE;QACzBqB,KAAI;QACJC,aAAazB;QACb0B,mBAAmB;QACnB,mCAAmC;QACnCC,cAAcd,cAAc,OAAO;YACjCZ,UAAU;YACV2B,QAAQlB,KAAKC,KAAK,CAACE,aAAa;YAChCgB,cAAc;QAChB,IAAIjB;QACJ,mDAAmD;QACnDkB,cAAcjB,cAAc;QAC5BkB,cAAcjB,UAAU,iBAAiB,iBAAiBF;;AAGhE;MAEA,WAAetB"}