{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\__tests__\\hooks\\useOrdersEnterpriseStrict.test.ts"],"sourcesContent":["// ===================================\r\n// PINTEYA E-COMMERCE - UNIT TESTS\r\n// Pruebas unitarias para useOrdersEnterpriseStrict\r\n// ===================================\r\n\r\nimport { renderHook, act, waitFor } from '@testing-library/react';\r\nimport { describe, it, expect, beforeEach, afterEach } from '@jest/globals';\r\nimport { jest } from '@jest/globals';\r\nimport { useOrdersEnterpriseStrict } from '@/hooks/admin/useOrdersEnterpriseStrict';\r\nimport { OrderEnterprise, OrderStatus } from '@/types/orders-enterprise';\r\nimport { ApiResponse } from '@/types/api-strict';\r\n\r\n// ===================================\r\n// MOCKS\r\n// ===================================\r\n\r\n// Mock del fetch global\r\nconst mockFetch = jest.fn();\r\nglobal.fetch = mockFetch;\r\n\r\n// Mock de console para capturar logs\r\nconst mockConsoleError = jest.spyOn(console, 'error').mockImplementation(() => {});\r\nconst mockConsoleWarn = jest.spyOn(console, 'warn').mockImplementation(() => {});\r\n\r\n// Datos de prueba\r\nconst mockOrder: OrderEnterprise = {\r\n  id: 'order-123',\r\n  orderNumber: 'ORD-2024-001',\r\n  status: 'pending',\r\n  previousStatus: null,\r\n  statusHistory: [{\r\n    status: 'pending',\r\n    timestamp: new Date().toISOString(),\r\n    reason: 'Order created',\r\n    userId: 'user-123'\r\n  }],\r\n  customerId: 'customer-123',\r\n  customerEmail: 'test@example.com',\r\n  customerPhone: '+1234567890',\r\n  items: [{\r\n    id: 'item-1',\r\n    productId: 'product-1',\r\n    productName: 'Test Product',\r\n    quantity: 2,\r\n    unitPrice: 29.99,\r\n    totalPrice: 59.98,\r\n    sku: 'TEST-SKU-001'\r\n  }],\r\n  subtotal: 59.98,\r\n  taxAmount: 4.80,\r\n  shippingAmount: 9.99,\r\n  discountAmount: 0,\r\n  totalAmount: 74.77,\r\n  currency: 'USD',\r\n  shippingAddress: {\r\n    street: '123 Test St',\r\n    city: 'Test City',\r\n    state: 'TS',\r\n    zipCode: '12345',\r\n    country: 'US'\r\n  },\r\n  billingAddress: {\r\n    street: '123 Test St',\r\n    city: 'Test City',\r\n    state: 'TS',\r\n    zipCode: '12345',\r\n    country: 'US'\r\n  },\r\n  paymentMethod: 'credit_card',\r\n  paymentStatus: 'pending',\r\n  shippingMethod: 'standard',\r\n  estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n  notes: 'Test order notes',\r\n  tags: ['test', 'automated'],\r\n  metadata: {\r\n    source: 'web',\r\n    campaign: 'test-campaign'\r\n  },\r\n  createdAt: new Date().toISOString(),\r\n  updatedAt: new Date().toISOString()\r\n};\r\n\r\nconst mockApiResponse: ApiResponse<OrderEnterprise[]> = {\r\n  success: true,\r\n  data: [mockOrder],\r\n  message: 'Orders retrieved successfully',\r\n  timestamp: new Date().toISOString(),\r\n  requestId: 'req-123',\r\n  pagination: {\r\n    page: 1,\r\n    limit: 10,\r\n    total: 1,\r\n    totalPages: 1\r\n  }\r\n};\r\n\r\n// ===================================\r\n// SETUP Y CLEANUP\r\n// ===================================\r\n\r\nbeforeEach(() => {\r\n  jest.clearAllMocks();\r\n  mockFetch.mockClear();\r\n});\r\n\r\nafterEach(() => {\r\n  jest.clearAllTimers();\r\n});\r\n\r\n// ===================================\r\n// TESTS PRINCIPALES\r\n// ===================================\r\n\r\ndescribe('useOrdersEnterpriseStrict', () => {\r\n  describe('Inicialización', () => {\r\n    it('debe inicializar con estado por defecto', () => {\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false\r\n        })\r\n      );\r\n\r\n      expect(result.current.orders).toEqual([]);\r\n      expect(result.current.loading).toBe(false);\r\n      expect(result.current.error).toBeNull();\r\n      expect(result.current.pagination).toEqual({\r\n        page: 1,\r\n        limit: 10,\r\n        total: 0,\r\n        totalPages: 0\r\n      });\r\n    });\r\n\r\n    it('debe aplicar filtros iniciales', () => {\r\n      const initialFilters = {\r\n        status: 'pending' as OrderStatus,\r\n        customerId: 'customer-123'\r\n      };\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters,\r\n          enableCache: false\r\n        })\r\n      );\r\n\r\n      expect(result.current.filters).toEqual(initialFilters);\r\n    });\r\n  });\r\n\r\n  describe('Carga de datos exitosa', () => {\r\n    beforeEach(() => {\r\n      mockFetch.mockResolvedValue({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => mockApiResponse\r\n      });\r\n    });\r\n\r\n    it('debe cargar órdenes correctamente', async () => {\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          autoFetch: true\r\n        })\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      expect(result.current.orders).toEqual([mockOrder]);\r\n      expect(result.current.error).toBeNull();\r\n      expect(result.current.pagination).toEqual(mockApiResponse.pagination);\r\n    });\r\n\r\n    it('debe manejar filtros correctamente', async () => {\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.setFilters({\r\n          status: 'pending' as OrderStatus\r\n        });\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(mockFetch).toHaveBeenCalledWith(\r\n          expect.stringContaining('status=pending'),\r\n          expect.any(Object)\r\n        );\r\n      });\r\n    });\r\n\r\n    it('debe manejar paginación correctamente', async () => {\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.setPage(2);\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(mockFetch).toHaveBeenCalledWith(\r\n          expect.stringContaining('page=2'),\r\n          expect.any(Object)\r\n        );\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Manejo de errores', () => {\r\n    it('debe manejar errores de red', async () => {\r\n      mockFetch.mockRejectedValue(new Error('Network error'));\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          autoFetch: true\r\n        })\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      expect(result.current.error).toBeTruthy();\r\n      expect(result.current.orders).toEqual([]);\r\n    });\r\n\r\n    it('debe manejar respuestas HTTP de error', async () => {\r\n      mockFetch.mockResolvedValue({\r\n        ok: false,\r\n        status: 500,\r\n        json: async () => ({\r\n          success: false,\r\n          message: 'Internal server error'\r\n        })\r\n      });\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          autoFetch: true\r\n        })\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      expect(result.current.error).toBeTruthy();\r\n      expect(result.current.orders).toEqual([]);\r\n    });\r\n\r\n    it('debe manejar datos inválidos', async () => {\r\n      const invalidResponse = {\r\n        success: true,\r\n        data: [{ id: 'invalid' }], // Datos incompletos\r\n        message: 'Success'\r\n      };\r\n\r\n      mockFetch.mockResolvedValue({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => invalidResponse\r\n      });\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          autoFetch: true,\r\n          enableValidation: true\r\n        })\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      expect(mockConsoleWarn).toHaveBeenCalled();\r\n      expect(result.current.orders).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Sistema de caché', () => {\r\n    beforeEach(() => {\r\n      mockFetch.mockResolvedValue({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => mockApiResponse\r\n      });\r\n    });\r\n\r\n    it('debe usar caché cuando está habilitado', async () => {\r\n      const { result, rerender } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: true,\r\n          cacheTime: 5000\r\n        })\r\n      );\r\n\r\n      // Primera carga\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      const firstCallCount = mockFetch.mock.calls.length;\r\n\r\n      // Segunda carga (debería usar caché)\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      expect(mockFetch.mock.calls.length).toBe(firstCallCount);\r\n    });\r\n\r\n    it('debe invalidar caché después del tiempo especificado', async () => {\r\n      jest.useFakeTimers();\r\n\r\n      const { result } = renderHook(() =>\r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: true,\r\n          cacheTime: 1000 // 1 segundo\r\n        })\r\n      );\r\n\r\n      // Primera carga\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      const firstCallCount = mockFetch.mock.calls.length;\r\n\r\n      // Avanzar tiempo más allá del cache time\r\n      act(() => {\r\n        jest.advanceTimersByTime(1500);\r\n      });\r\n\r\n      // Segunda carga (debería hacer nueva petición)\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      expect(mockFetch.mock.calls.length).toBeGreaterThan(firstCallCount);\r\n\r\n      jest.useRealTimers();\r\n    });\r\n  });\r\n\r\n  describe('Sistema de reintentos', () => {\r\n    it('debe reintentar en caso de error', async () => {\r\n      mockFetch\r\n        .mockRejectedValueOnce(new Error('Network error'))\r\n        .mockRejectedValueOnce(new Error('Network error'))\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          status: 200,\r\n          json: async () => mockApiResponse\r\n        });\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          retryAttempts: 3,\r\n          retryDelay: 100\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      }, { timeout: 5000 });\r\n\r\n      expect(mockFetch).toHaveBeenCalledTimes(3);\r\n      expect(result.current.orders).toEqual([mockOrder]);\r\n      expect(result.current.error).toBeNull();\r\n    });\r\n\r\n    it('debe fallar después de agotar reintentos', async () => {\r\n      mockFetch.mockRejectedValue(new Error('Persistent network error'));\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          retryAttempts: 2,\r\n          retryDelay: 50\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      }, { timeout: 3000 });\r\n\r\n      expect(mockFetch).toHaveBeenCalledTimes(3); // 1 inicial + 2 reintentos\r\n      expect(result.current.error).toBeTruthy();\r\n      expect(result.current.orders).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Transformación de datos', () => {\r\n    it('debe aplicar transformaciones personalizadas', async () => {\r\n      const transformedOrder = { ...mockOrder, customField: 'transformed' };\r\n      \r\n      mockFetch.mockResolvedValue({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => mockApiResponse\r\n      });\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          transform: (orders) => orders.map(order => ({\r\n            ...order,\r\n            customField: 'transformed'\r\n          }))\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(result.current.loading).toBe(false);\r\n      });\r\n\r\n      expect(result.current.orders[0]).toEqual(transformedOrder);\r\n    });\r\n  });\r\n\r\n  describe('Callbacks', () => {\r\n    it('debe ejecutar callback onSuccess', async () => {\r\n      const onSuccess = jest.fn();\r\n\r\n      mockFetch.mockResolvedValue({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => mockApiResponse\r\n      });\r\n\r\n      const { result } = renderHook(() =>\r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          onSuccess\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(onSuccess).toHaveBeenCalledWith([mockOrder]);\r\n      });\r\n    });\r\n\r\n    it('debe ejecutar callback onError', async () => {\r\n      const onError = jest.fn();\r\n      const error = new Error('Test error');\r\n      \r\n      mockFetch.mockRejectedValue(error);\r\n\r\n      const { result } = renderHook(() => \r\n        useOrdersEnterpriseStrict({\r\n          initialFilters: {},\r\n          enableCache: false,\r\n          onError\r\n        })\r\n      );\r\n\r\n      await act(async () => {\r\n        result.current.refetch();\r\n      });\r\n\r\n      await waitFor(() => {\r\n        expect(onError).toHaveBeenCalledWith(error);\r\n      });\r\n    });\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["mockFetch","jest","fn","global","fetch","mockConsoleError","spyOn","console","mockImplementation","mockConsoleWarn","mockOrder","id","orderNumber","status","previousStatus","statusHistory","timestamp","Date","toISOString","reason","userId","customerId","customerEmail","customerPhone","items","productId","productName","quantity","unitPrice","totalPrice","sku","subtotal","taxAmount","shippingAmount","discountAmount","totalAmount","currency","shippingAddress","street","city","state","zipCode","country","billingAddress","paymentMethod","paymentStatus","shippingMethod","estimatedDelivery","now","notes","tags","metadata","source","campaign","createdAt","updatedAt","mockApiResponse","success","data","message","requestId","pagination","page","limit","total","totalPages","beforeEach","clearAllMocks","mockClear","afterEach","clearAllTimers","describe","it","result","renderHook","useOrdersEnterpriseStrict","initialFilters","enableCache","expect","current","orders","toEqual","loading","toBe","error","toBeNull","filters","mockResolvedValue","ok","json","autoFetch","waitFor","act","setFilters","toHaveBeenCalledWith","stringContaining","any","Object","setPage","mockRejectedValue","Error","toBeTruthy","invalidResponse","enableValidation","toHaveBeenCalled","rerender","cacheTime","refetch","firstCallCount","mock","calls","length","useFakeTimers","advanceTimersByTime","toBeGreaterThan","useRealTimers","mockRejectedValueOnce","mockResolvedValueOnce","retryAttempts","retryDelay","timeout","toHaveBeenCalledTimes","transformedOrder","customField","transform","map","order","onSuccess","onError"],"mappings":"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"}