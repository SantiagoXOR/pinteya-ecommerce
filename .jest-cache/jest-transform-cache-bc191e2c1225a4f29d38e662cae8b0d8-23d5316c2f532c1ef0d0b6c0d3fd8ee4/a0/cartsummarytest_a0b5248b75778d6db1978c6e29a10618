896ffdceca39b45697655d69052cb6f3
"use strict";
// Mock de los componentes del Design System
jest.mock('../price-display', ()=>({
        PriceDisplay: ({ amount, originalAmount, className })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "price-display",
                className: className,
                children: [
                    "$",
                    (amount / 100).toFixed(2),
                    originalAmount && ` (was $${(originalAmount / 100).toFixed(2)})`
                ]
            })
    }));
jest.mock('../shipping-info', ()=>({
        ShippingInfo: ({ options, selectedOption })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "shipping-info",
                children: [
                    "Shipping: ",
                    selectedOption
                ]
            })
    }));
jest.mock('../product-card-enhanced', ()=>({
        EnhancedProductCard: ({ title, context })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "enhanced-product-card",
                children: [
                    title,
                    " - ",
                    context
                ]
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const _cartsummary = require("../cart-summary");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockCartItems = [
    {
        id: 1,
        title: 'Pintura Sherwin Williams 4L',
        price: 10000,
        discountedPrice: 8500,
        quantity: 2,
        image: '/test-image.jpg',
        category: 'pinturas'
    },
    {
        id: 2,
        title: 'Esmalte Petrilac 1L',
        price: 2300,
        discountedPrice: 2300,
        quantity: 1,
        category: 'esmaltes'
    }
];
describe('CartSummary', ()=>{
    const defaultProps = {
        cartItems: mockCartItems,
        totalPrice: 19300,
        shippingCost: 2500,
        discount: 0,
        finalTotal: 21800
    };
    it('renders cart summary with items', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Resumen del Pedido')).toBeInTheDocument();
        expect(_react1.screen.getByText('2 items')).toBeInTheDocument();
        expect(_react1.screen.getByText('Pintura Sherwin Williams 4L')).toBeInTheDocument();
        expect(_react1.screen.getByText('Esmalte Petrilac 1L')).toBeInTheDocument();
    });
    it('shows empty cart message when no items', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            cartItems: []
        }));
        expect(_react1.screen.getByText('No hay productos en el carrito')).toBeInTheDocument();
    });
    it('displays price calculations correctly', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps
        }));
        expect(_react1.screen.getByText('Subtotal')).toBeInTheDocument();
        expect(_react1.screen.getByText('Envío')).toBeInTheDocument();
        expect(_react1.screen.getByText('Total')).toBeInTheDocument();
    });
    it('shows free shipping badge when applicable', ()=>{
        const propsWithFreeShipping = {
            ...defaultProps,
            totalPrice: 60000,
            shippingCost: 0
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...propsWithFreeShipping
        }));
        // Buscar específicamente el badge de envío gratis
        expect(_react1.screen.getByText('Gratis', {
            selector: '.bg-success'
        })).toBeInTheDocument();
    });
    it('displays discount when applied', ()=>{
        const propsWithDiscount = {
            ...defaultProps,
            discount: 1000,
            appliedCoupon: {
                code: 'PROMO10',
                discount: 1000,
                type: 'fixed'
            }
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...propsWithDiscount
        }));
        expect(_react1.screen.getByText('Descuento')).toBeInTheDocument();
        expect(_react1.screen.getByText('PROMO10')).toBeInTheDocument();
    });
    it('calls onCheckout when checkout button is clicked', ()=>{
        const mockOnCheckout = jest.fn();
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            onCheckout: mockOnCheckout
        }));
        const checkoutButton = _react1.screen.getByText('Proceder al Pago');
        _react1.fireEvent.click(checkoutButton);
        expect(mockOnCheckout).toHaveBeenCalledTimes(1);
    });
    it('renders in compact variant', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            variant: "compact"
        }));
        // En variante compact, debería tener altura máxima reducida
        const itemsContainer = _react1.screen.getByText('Pintura Sherwin Williams 4L').closest('.max-h-40');
        expect(itemsContainer).toBeInTheDocument();
    });
    it('shows product cards when enabled', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            showProductCards: true,
            productCardContext: "checkout"
        }));
        expect(_react1.screen.getAllByTestId('enhanced-product-card')).toHaveLength(2);
        expect(_react1.screen.getByText('Pintura Sherwin Williams 4L - checkout')).toBeInTheDocument();
    });
    it('shows shipping details in detailed variant', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            variant: "detailed",
            showShippingDetails: true
        }));
        expect(_react1.screen.getByTestId('shipping-info')).toBeInTheDocument();
    });
    it('disables checkout button when cart is empty', ()=>{
        const mockOnCheckout = jest.fn();
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            cartItems: [],
            onCheckout: mockOnCheckout
        }));
        // El botón de checkout no debería aparecer cuando el carrito está vacío
        expect(_react1.screen.queryByText('Proceder al Pago')).not.toBeInTheDocument();
    });
    it('calculates final total correctly when not provided', ()=>{
        const propsWithoutFinalTotal = {
            cartItems: mockCartItems,
            totalPrice: 19300,
            shippingCost: 2500,
            discount: 1000
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...propsWithoutFinalTotal
        }));
        // Debería calcular: 19300 + 2500 - 1000 = 20800
        expect(_react1.screen.getByText('Total')).toBeInTheDocument();
    });
    it('shows benefits section when not compact', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...defaultProps,
            variant: "default"
        }));
        expect(_react1.screen.getByText('Compra protegida')).toBeInTheDocument();
        expect(_react1.screen.getByText('Tu dinero está protegido con MercadoPago')).toBeInTheDocument();
    });
    it('handles single item correctly', ()=>{
        const singleItemProps = {
            ...defaultProps,
            cartItems: [
                mockCartItems[0]
            ]
        };
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_cartsummary.CartSummary, {
            ...singleItemProps
        }));
        expect(_react1.screen.getByText('1 item')).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcdWlcXF9fdGVzdHNfX1xcY2FydC1zdW1tYXJ5LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXHJcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSdcclxuaW1wb3J0IHsgQ2FydFN1bW1hcnkgfSBmcm9tICcuLi9jYXJ0LXN1bW1hcnknXHJcblxyXG5pbnRlcmZhY2UgUHJpY2VEaXNwbGF5UHJvcHMge1xyXG4gIGFtb3VudDogbnVtYmVyO1xyXG4gIG9yaWdpbmFsQW1vdW50PzogbnVtYmVyO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFNoaXBwaW5nSW5mb1Byb3BzIHtcclxuICBvcHRpb25zOiBzdHJpbmdbXTtcclxuICBzZWxlY3RlZE9wdGlvbjogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRW5oYW5jZWRQcm9kdWN0Q2FyZFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGNvbnRleHQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gTW9jayBkZSBsb3MgY29tcG9uZW50ZXMgZGVsIERlc2lnbiBTeXN0ZW1cclxuamVzdC5tb2NrKCcuLi9wcmljZS1kaXNwbGF5JywgKCkgPT4gKHtcclxuICBQcmljZURpc3BsYXk6ICh7IGFtb3VudCwgb3JpZ2luYWxBbW91bnQsIGNsYXNzTmFtZSB9OiBQcmljZURpc3BsYXlQcm9wcykgPT4gKFxyXG4gICAgPGRpdiBkYXRhLXRlc3RpZD1cInByaWNlLWRpc3BsYXlcIiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XHJcbiAgICAgICR7KGFtb3VudCAvIDEwMCkudG9GaXhlZCgyKX1cclxuICAgICAge29yaWdpbmFsQW1vdW50ICYmIGAgKHdhcyAkJHsob3JpZ2luYWxBbW91bnQgLyAxMDApLnRvRml4ZWQoMil9KWB9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn0pKVxyXG5cclxuamVzdC5tb2NrKCcuLi9zaGlwcGluZy1pbmZvJywgKCkgPT4gKHtcclxuICBTaGlwcGluZ0luZm86ICh7IG9wdGlvbnMsIHNlbGVjdGVkT3B0aW9uIH06IFNoaXBwaW5nSW5mb1Byb3BzKSA9PiAoXHJcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2hpcHBpbmctaW5mb1wiPlxyXG4gICAgICBTaGlwcGluZzoge3NlbGVjdGVkT3B0aW9ufVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59KSlcclxuXHJcbmplc3QubW9jaygnLi4vcHJvZHVjdC1jYXJkLWVuaGFuY2VkJywgKCkgPT4gKHtcclxuICBFbmhhbmNlZFByb2R1Y3RDYXJkOiAoeyB0aXRsZSwgY29udGV4dCB9OiBFbmhhbmNlZFByb2R1Y3RDYXJkUHJvcHMpID0+IChcclxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJlbmhhbmNlZC1wcm9kdWN0LWNhcmRcIj5cclxuICAgICAge3RpdGxlfSAtIHtjb250ZXh0fVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59KSlcclxuXHJcbmNvbnN0IG1vY2tDYXJ0SXRlbXMgPSBbXHJcbiAge1xyXG4gICAgaWQ6IDEsXHJcbiAgICB0aXRsZTogJ1BpbnR1cmEgU2hlcndpbiBXaWxsaWFtcyA0TCcsXHJcbiAgICBwcmljZTogMTAwMDAsXHJcbiAgICBkaXNjb3VudGVkUHJpY2U6IDg1MDAsXHJcbiAgICBxdWFudGl0eTogMixcclxuICAgIGltYWdlOiAnL3Rlc3QtaW1hZ2UuanBnJyxcclxuICAgIGNhdGVnb3J5OiAncGludHVyYXMnXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogMixcclxuICAgIHRpdGxlOiAnRXNtYWx0ZSBQZXRyaWxhYyAxTCcsXHJcbiAgICBwcmljZTogMjMwMCxcclxuICAgIGRpc2NvdW50ZWRQcmljZTogMjMwMCxcclxuICAgIHF1YW50aXR5OiAxLFxyXG4gICAgY2F0ZWdvcnk6ICdlc21hbHRlcydcclxuICB9XHJcbl1cclxuXHJcbmRlc2NyaWJlKCdDYXJ0U3VtbWFyeScsICgpID0+IHtcclxuICBjb25zdCBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBjYXJ0SXRlbXM6IG1vY2tDYXJ0SXRlbXMsXHJcbiAgICB0b3RhbFByaWNlOiAxOTMwMCxcclxuICAgIHNoaXBwaW5nQ29zdDogMjUwMCxcclxuICAgIGRpc2NvdW50OiAwLFxyXG4gICAgZmluYWxUb3RhbDogMjE4MDBcclxuICB9XHJcblxyXG4gIGl0KCdyZW5kZXJzIGNhcnQgc3VtbWFyeSB3aXRoIGl0ZW1zJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKDxDYXJ0U3VtbWFyeSB7Li4uZGVmYXVsdFByb3BzfSAvPilcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Jlc3VtZW4gZGVsIFBlZGlkbycpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMiBpdGVtcycpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUGludHVyYSBTaGVyd2luIFdpbGxpYW1zIDRMJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdFc21hbHRlIFBldHJpbGFjIDFMJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnc2hvd3MgZW1wdHkgY2FydCBtZXNzYWdlIHdoZW4gbm8gaXRlbXMnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5kZWZhdWx0UHJvcHN9IGNhcnRJdGVtcz17W119IC8+KVxyXG4gICAgXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTm8gaGF5IHByb2R1Y3RvcyBlbiBlbCBjYXJyaXRvJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnZGlzcGxheXMgcHJpY2UgY2FsY3VsYXRpb25zIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q2FydFN1bW1hcnkgey4uLmRlZmF1bHRQcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdWJ0b3RhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRW52w61vJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUb3RhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ3Nob3dzIGZyZWUgc2hpcHBpbmcgYmFkZ2Ugd2hlbiBhcHBsaWNhYmxlJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvcHNXaXRoRnJlZVNoaXBwaW5nID0ge1xyXG4gICAgICAuLi5kZWZhdWx0UHJvcHMsXHJcbiAgICAgIHRvdGFsUHJpY2U6IDYwMDAwLFxyXG4gICAgICBzaGlwcGluZ0Nvc3Q6IDBcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5wcm9wc1dpdGhGcmVlU2hpcHBpbmd9IC8+KVxyXG5cclxuICAgIC8vIEJ1c2NhciBlc3BlY8OtZmljYW1lbnRlIGVsIGJhZGdlIGRlIGVudsOtbyBncmF0aXNcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHcmF0aXMnLCB7IHNlbGVjdG9yOiAnLmJnLXN1Y2Nlc3MnIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2Rpc3BsYXlzIGRpc2NvdW50IHdoZW4gYXBwbGllZCcsICgpID0+IHtcclxuICAgIGNvbnN0IHByb3BzV2l0aERpc2NvdW50ID0ge1xyXG4gICAgICAuLi5kZWZhdWx0UHJvcHMsXHJcbiAgICAgIGRpc2NvdW50OiAxMDAwLFxyXG4gICAgICBhcHBsaWVkQ291cG9uOiB7XHJcbiAgICAgICAgY29kZTogJ1BST01PMTAnLFxyXG4gICAgICAgIGRpc2NvdW50OiAxMDAwLFxyXG4gICAgICAgIHR5cGU6ICdmaXhlZCcgYXMgY29uc3RcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5wcm9wc1dpdGhEaXNjb3VudH0gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdEZXNjdWVudG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BST01PMTAnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdjYWxscyBvbkNoZWNrb3V0IHdoZW4gY2hlY2tvdXQgYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrT25DaGVja291dCA9IGplc3QuZm4oKVxyXG4gICAgXHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5kZWZhdWx0UHJvcHN9IG9uQ2hlY2tvdXQ9e21vY2tPbkNoZWNrb3V0fSAvPilcclxuICAgIFxyXG4gICAgY29uc3QgY2hlY2tvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcm9jZWRlciBhbCBQYWdvJylcclxuICAgIGZpcmVFdmVudC5jbGljayhjaGVja291dEJ1dHRvbilcclxuICAgIFxyXG4gICAgZXhwZWN0KG1vY2tPbkNoZWNrb3V0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSlcclxuICB9KVxyXG5cclxuICBpdCgncmVuZGVycyBpbiBjb21wYWN0IHZhcmlhbnQnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5kZWZhdWx0UHJvcHN9IHZhcmlhbnQ9XCJjb21wYWN0XCIgLz4pXHJcbiAgICBcclxuICAgIC8vIEVuIHZhcmlhbnRlIGNvbXBhY3QsIGRlYmVyw61hIHRlbmVyIGFsdHVyYSBtw6F4aW1hIHJlZHVjaWRhXHJcbiAgICBjb25zdCBpdGVtc0NvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRleHQoJ1BpbnR1cmEgU2hlcndpbiBXaWxsaWFtcyA0TCcpLmNsb3Nlc3QoJy5tYXgtaC00MCcpXHJcbiAgICBleHBlY3QoaXRlbXNDb250YWluZXIpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnc2hvd3MgcHJvZHVjdCBjYXJkcyB3aGVuIGVuYWJsZWQnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxDYXJ0U3VtbWFyeSBcclxuICAgICAgICB7Li4uZGVmYXVsdFByb3BzfSBcclxuICAgICAgICBzaG93UHJvZHVjdENhcmRzPXt0cnVlfVxyXG4gICAgICAgIHByb2R1Y3RDYXJkQ29udGV4dD1cImNoZWNrb3V0XCJcclxuICAgICAgLz5cclxuICAgIClcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRlc3RJZCgnZW5oYW5jZWQtcHJvZHVjdC1jYXJkJykpLnRvSGF2ZUxlbmd0aCgyKVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BpbnR1cmEgU2hlcndpbiBXaWxsaWFtcyA0TCAtIGNoZWNrb3V0JykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnc2hvd3Mgc2hpcHBpbmcgZGV0YWlscyBpbiBkZXRhaWxlZCB2YXJpYW50JywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8Q2FydFN1bW1hcnkgXHJcbiAgICAgICAgey4uLmRlZmF1bHRQcm9wc30gXHJcbiAgICAgICAgdmFyaWFudD1cImRldGFpbGVkXCJcclxuICAgICAgICBzaG93U2hpcHBpbmdEZXRhaWxzPXt0cnVlfVxyXG4gICAgICAvPlxyXG4gICAgKVxyXG4gICAgXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzaGlwcGluZy1pbmZvJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICB9KVxyXG5cclxuICBpdCgnZGlzYWJsZXMgY2hlY2tvdXQgYnV0dG9uIHdoZW4gY2FydCBpcyBlbXB0eScsICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tPbkNoZWNrb3V0ID0gamVzdC5mbigpXHJcblxyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8Q2FydFN1bW1hcnlcclxuICAgICAgICB7Li4uZGVmYXVsdFByb3BzfVxyXG4gICAgICAgIGNhcnRJdGVtcz17W119XHJcbiAgICAgICAgb25DaGVja291dD17bW9ja09uQ2hlY2tvdXR9XHJcbiAgICAgIC8+XHJcbiAgICApXHJcblxyXG4gICAgLy8gRWwgYm90w7NuIGRlIGNoZWNrb3V0IG5vIGRlYmVyw61hIGFwYXJlY2VyIGN1YW5kbyBlbCBjYXJyaXRvIGVzdMOhIHZhY8Otb1xyXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnUHJvY2VkZXIgYWwgUGFnbycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdjYWxjdWxhdGVzIGZpbmFsIHRvdGFsIGNvcnJlY3RseSB3aGVuIG5vdCBwcm92aWRlZCcsICgpID0+IHtcclxuICAgIGNvbnN0IHByb3BzV2l0aG91dEZpbmFsVG90YWwgPSB7XHJcbiAgICAgIGNhcnRJdGVtczogbW9ja0NhcnRJdGVtcyxcclxuICAgICAgdG90YWxQcmljZTogMTkzMDAsXHJcbiAgICAgIHNoaXBwaW5nQ29zdDogMjUwMCxcclxuICAgICAgZGlzY291bnQ6IDEwMDBcclxuICAgICAgLy8gZmluYWxUb3RhbCBubyBwcm9wb3JjaW9uYWRvXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlbmRlcig8Q2FydFN1bW1hcnkgey4uLnByb3BzV2l0aG91dEZpbmFsVG90YWx9IC8+KVxyXG4gICAgXHJcbiAgICAvLyBEZWJlcsOtYSBjYWxjdWxhcjogMTkzMDAgKyAyNTAwIC0gMTAwMCA9IDIwODAwXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVG90YWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdzaG93cyBiZW5lZml0cyBzZWN0aW9uIHdoZW4gbm90IGNvbXBhY3QnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENhcnRTdW1tYXJ5IHsuLi5kZWZhdWx0UHJvcHN9IHZhcmlhbnQ9XCJkZWZhdWx0XCIgLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb21wcmEgcHJvdGVnaWRhJykpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUdSBkaW5lcm8gZXN0w6EgcHJvdGVnaWRvIGNvbiBNZXJjYWRvUGFnbycpKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ2hhbmRsZXMgc2luZ2xlIGl0ZW0gY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2luZ2xlSXRlbVByb3BzID0ge1xyXG4gICAgICAuLi5kZWZhdWx0UHJvcHMsXHJcbiAgICAgIGNhcnRJdGVtczogW21vY2tDYXJ0SXRlbXNbMF1dXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlbmRlcig8Q2FydFN1bW1hcnkgey4uLnNpbmdsZUl0ZW1Qcm9wc30gLz4pXHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcxIGl0ZW0nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gIH0pXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIlByaWNlRGlzcGxheSIsImFtb3VudCIsIm9yaWdpbmFsQW1vdW50IiwiY2xhc3NOYW1lIiwiZGl2IiwiZGF0YS10ZXN0aWQiLCJ0b0ZpeGVkIiwiU2hpcHBpbmdJbmZvIiwib3B0aW9ucyIsInNlbGVjdGVkT3B0aW9uIiwiRW5oYW5jZWRQcm9kdWN0Q2FyZCIsInRpdGxlIiwiY29udGV4dCIsIm1vY2tDYXJ0SXRlbXMiLCJpZCIsInByaWNlIiwiZGlzY291bnRlZFByaWNlIiwicXVhbnRpdHkiLCJpbWFnZSIsImNhdGVnb3J5IiwiZGVzY3JpYmUiLCJkZWZhdWx0UHJvcHMiLCJjYXJ0SXRlbXMiLCJ0b3RhbFByaWNlIiwic2hpcHBpbmdDb3N0IiwiZGlzY291bnQiLCJmaW5hbFRvdGFsIiwiaXQiLCJyZW5kZXIiLCJDYXJ0U3VtbWFyeSIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwicHJvcHNXaXRoRnJlZVNoaXBwaW5nIiwic2VsZWN0b3IiLCJwcm9wc1dpdGhEaXNjb3VudCIsImFwcGxpZWRDb3Vwb24iLCJjb2RlIiwidHlwZSIsIm1vY2tPbkNoZWNrb3V0IiwiZm4iLCJvbkNoZWNrb3V0IiwiY2hlY2tvdXRCdXR0b24iLCJmaXJlRXZlbnQiLCJjbGljayIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInZhcmlhbnQiLCJpdGVtc0NvbnRhaW5lciIsImNsb3Nlc3QiLCJzaG93UHJvZHVjdENhcmRzIiwicHJvZHVjdENhcmRDb250ZXh0IiwiZ2V0QWxsQnlUZXN0SWQiLCJ0b0hhdmVMZW5ndGgiLCJzaG93U2hpcHBpbmdEZXRhaWxzIiwiZ2V0QnlUZXN0SWQiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInByb3BzV2l0aG91dEZpbmFsVG90YWwiLCJzaW5nbGVJdGVtUHJvcHMiXSwibWFwcGluZ3MiOiI7QUFxQkEsNENBQTRDO0FBQzVDQSxLQUFLQyxJQUFJLENBQUMsb0JBQW9CLElBQU8sQ0FBQTtRQUNuQ0MsY0FBYyxDQUFDLEVBQUVDLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxTQUFTLEVBQXFCLGlCQUNyRSxzQkFBQ0M7Z0JBQUlDLGVBQVk7Z0JBQWdCRixXQUFXQTs7b0JBQVc7b0JBQ2xERixDQUFBQSxTQUFTLEdBQUUsRUFBR0ssT0FBTyxDQUFDO29CQUN4Qkosa0JBQWtCLENBQUMsT0FBTyxFQUFFLEFBQUNBLENBQUFBLGlCQUFpQixHQUFFLEVBQUdJLE9B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