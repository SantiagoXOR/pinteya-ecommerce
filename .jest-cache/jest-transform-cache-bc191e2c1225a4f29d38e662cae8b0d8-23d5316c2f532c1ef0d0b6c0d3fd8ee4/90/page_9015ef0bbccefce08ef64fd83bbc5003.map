{"version":3,"names":["EditProductPage","fetchProduct","productId","cov_24sj4632u5","f","response","s","fetch","ok","b","Error","data","json","updateProduct","method","headers","body","JSON","stringify","error","params","_navigation","useParams","router","useRouter","queryClient","_reactquery","useQueryClient","id","product","isLoading","useQuery","queryKey","queryFn","enabled","updateProductMutation","useMutation","mutationFn","onSuccess","invalidateQueries","_reacthottoast","toast","success","push","onError","message","handleSubmit","mutateAsync","handleCancel","_jsxruntime","jsx","_AdminLayout","AdminLayout","title","className","jsxs","_lucidereact","AlertCircle","breadcrumbs","label","href","name","_ProductForm","ProductForm","mode","initialData","onSubmit","onCancel","isPending"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\admin\\products\\[id]\\edit\\page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { AdminLayout } from '@/components/admin/layout/AdminLayout';\r\nimport { ProductForm } from '@/components/admin/products/ProductForm';\r\nimport { toast } from 'react-hot-toast';\r\nimport { AlertCircle } from 'lucide-react';\r\n\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  short_description?: string;\r\n  category_id: string;\r\n  status: 'active' | 'inactive' | 'draft';\r\n  price: number;\r\n  compare_price?: number;\r\n  cost_price?: number;\r\n  track_inventory: boolean;\r\n  stock: number;\r\n  low_stock_threshold?: number;\r\n  allow_backorder: boolean;\r\n  seo_title?: string;\r\n  seo_description?: string;\r\n  slug?: string;\r\n  images?: Array<{\r\n    url: string;\r\n    alt?: string;\r\n    is_primary?: boolean;\r\n  }>;\r\n  variants?: Array<{\r\n    name: string;\r\n    options: string[];\r\n  }>;\r\n}\r\n\r\ninterface ProductFormData extends Omit<Product, 'id'> {}\r\n\r\n// API functions\r\nasync function fetchProduct(productId: string): Promise<Product> {\r\n  const response = await fetch(`/api/admin/products/${productId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Error fetching product');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  return data.data;\r\n}\r\n\r\nasync function updateProduct(productId: string, data: ProductFormData) {\r\n  const response = await fetch(`/api/admin/products/${productId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json();\r\n    throw new Error(error.error || 'Error al actualizar producto');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport default function EditProductPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const productId = params.id as string;\r\n\r\n  // Fetch product data\r\n  const { data: product, isLoading, error } = useQuery({\r\n    queryKey: ['admin-product', productId],\r\n    queryFn: () => fetchProduct(productId),\r\n    enabled: !!productId,\r\n  });\r\n\r\n  // Update product mutation\r\n  const updateProductMutation = useMutation({\r\n    mutationFn: (data: ProductFormData) => updateProduct(productId, data),\r\n    onSuccess: (data) => {\r\n      // Invalidate queries\r\n      queryClient.invalidateQueries({ queryKey: ['admin-products'] });\r\n      queryClient.invalidateQueries({ queryKey: ['admin-product', productId] });\r\n      \r\n      // Show success message\r\n      toast.success('Producto actualizado exitosamente');\r\n      \r\n      // Redirect to product detail\r\n      router.push(`/admin/products/${productId}`);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast.error(error.message);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async (data: ProductFormData) => {\r\n    await updateProductMutation.mutateAsync(data);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push(`/admin/products/${productId}`);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AdminLayout title=\"Cargando...\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blaze-orange-600\"></div>\r\n        </div>\r\n      </AdminLayout>\r\n    );\r\n  }\r\n\r\n  if (error || !product) {\r\n    return (\r\n      <AdminLayout title=\"Error\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-center\">\r\n            <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              Producto no encontrado\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              El producto que intentas editar no existe o no tienes permisos para modificarlo.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </AdminLayout>\r\n    );\r\n  }\r\n\r\n  const breadcrumbs = [\r\n    { label: 'Admin', href: '/admin' },\r\n    { label: 'Productos', href: '/admin/products' },\r\n    { label: product.name, href: `/admin/products/${productId}` },\r\n    { label: 'Editar' },\r\n  ];\r\n\r\n  return (\r\n    <AdminLayout\r\n      title={`Editar: ${product.name}`}\r\n      breadcrumbs={breadcrumbs}\r\n    >\r\n      <ProductForm\r\n        mode=\"edit\"\r\n        initialData={product}\r\n        onSubmit={handleSubmit}\r\n        onCancel={handleCancel}\r\n        isLoading={updateProductMutation.isPending}\r\n      />\r\n    </AdminLayout>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]}