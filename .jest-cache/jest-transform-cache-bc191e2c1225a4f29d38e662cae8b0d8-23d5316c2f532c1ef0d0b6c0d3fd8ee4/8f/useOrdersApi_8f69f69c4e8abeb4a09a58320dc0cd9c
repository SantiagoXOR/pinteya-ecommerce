22a16f5a56ee2b5ebc7bbb90d984380a
// ===================================
// PINTEYA E-COMMERCE - ORDERS API HOOK
// Hook especializado para llamadas a la API de órdenes
// ===================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useOrdersApi", {
    enumerable: true,
    get: function() {
        return useOrdersApi;
    }
});
const _react = require("react");
const _apistrict = require("../../types/api-strict");
// ===================================
// UTILIDADES DE API
// ===================================
function buildApiUrl(filters) {
    const searchParams = new URLSearchParams();
    // Agregar parámetros de filtros
    Object.entries(filters).forEach(([key, value])=>{
        // Siempre incluir parámetros requeridos por la API
        if (key === 'page' || key === 'limit' || key === 'sort_by' || key === 'sort_order') {
            if (value !== undefined && value !== null && value !== '') {
                searchParams.append(key, String(value));
            }
        } else if (value !== undefined && value !== null && value !== 'all' && value !== '') {
            searchParams.append(key, String(value));
        }
    });
    // Asegurar que siempre tengamos los parámetros mínimos requeridos
    if (!searchParams.has('page')) {
        searchParams.append('page', '1');
    }
    if (!searchParams.has('limit')) {
        searchParams.append('limit', '20');
    }
    if (!searchParams.has('sort_by')) {
        searchParams.append('sort_by', 'created_at');
    }
    if (!searchParams.has('sort_order')) {
        searchParams.append('sort_order', 'desc');
    }
    return `/api/admin/orders?${searchParams.toString()}`;
}
async function makeApiRequest(url, signal, timeout) {
    // Crear timeout promise
    const timeoutPromise = new Promise((_, reject)=>{
        setTimeout(()=>reject(new Error(`Request timeout after ${timeout}ms`)), timeout);
    });
    // Hacer la petición con timeout
    const fetchPromise = fetch(url, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
            Accept: 'application/json'
        },
        credentials: 'include',
        signal
    });
    return Promise.race([
        fetchPromise,
        timeoutPromise
    ]);
}
function useOrdersApi(options) {
    const abortControllerRef = (0, _react.useRef)(null);
    const fetchOrdersInternal = (0, _react.useCallback)(async (filters, isRetry = false)=>{
        try {
            // Validar si la petición es demasiado reciente (anti-spam)
            if (!isRetry && options.cache.isRequestTooRecent(filters)) {
                if (process.env.NODE_ENV === 'development') {
                    console.log('[useOrdersApi] Request blocked - too recent');
                }
                return (0, _apistrict.createStrictApiError)('Request too recent', 'REQUEST_THROTTLED');
            }
            // Verificar cache primero
            if (options.enableCache) {
                const cachedData = options.cache.getCachedData(filters);
                if (cachedData) {
                    return {
                        success: true,
                        data: cachedData.data,
                        message: cachedData.message,
                        timestamp: cachedData.timestamp
                    };
                }
            }
            // Verificar si ya hay una petición pendiente
            const pendingRequest = options.cache.getPendingRequest(filters);
            if (pendingRequest) {
                if (process.env.NODE_ENV === 'development') {
                    console.log('[useOrdersApi] Using pending request');
                }
                return await pendingRequest;
            }
            // Gestión del AbortController - Solo abortar si es una petición diferente
            // Crear un identificador único para esta petición
            const requestId = JSON.stringify(filters);
            // Solo abortar si hay una petición anterior Y es diferente
            if (abortControllerRef.current && !abortControllerRef.current.signal.aborted) {
                // Solo abortar si los filtros son diferentes (nueva petición)
                const currentRequestId = abortControllerRef.current._requestId;
                if (currentRequestId && currentRequestId !== requestId) {
                    if (process.env.NODE_ENV === 'development') {
                        console.log('[useOrdersApi] Aborting previous different request');
                    }
                    abortControllerRef.current.abort();
                } else if (!currentRequestId) {
                    // Abortar si no tiene ID (petición antigua)
                    abortControllerRef.current.abort();
                }
            }
            const controller = new AbortController();
            controller._requestId = requestId;
            abortControllerRef.current = controller;
            // Crear la promesa de la petición
            const requestPromise = (async ()=>{
                try {
                    const url = buildApiUrl(filters);
                    if (process.env.NODE_ENV === 'development') {
                        console.log('[useOrdersApi] Making request:', {
                            url,
                            filters
                        });
                    }
                    const response = await makeApiRequest(url, controller.signal, options.timeout);
                    // Verificar si la petición fue cancelada
                    if (controller.signal.aborted) {
                        return (0, _apistrict.createStrictApiError)('Request cancelled', 'REQUEST_CANCELLED');
                    }
                    // Verificar status de respuesta
                    if (!response.ok) {
                        const errorText = await response.text().catch(()=>'Unknown error');
                        throw new Error(`HTTP ${response.status}: ${errorText}`);
                    }
                    // Parsear respuesta JSON
                    let jsonData;
                    try {
                        jsonData = await response.json();
                    } catch (parseError) {
                        throw new Error(`Failed to parse JSON response: ${parseError instanceof Error ? parseError.message : 'Unknown error'}`);
                    }
                    // Validar y transformar respuesta
                    const validatedResponse = (0, _apistrict.toStrictOrdersResponse)(jsonData);
                    if (!(0, _apistrict.isStrictApiResponse)(validatedResponse)) {
                        return validatedResponse // Es un error
                        ;
                    }
                    // Guardar en cache si está habilitado
                    if (options.enableCache) {
                        options.cache.setCachedData(filters, validatedResponse);
                    }
                    return {
                        success: true,
                        data: validatedResponse.data,
                        message: validatedResponse.message,
                        timestamp: validatedResponse.timestamp
                    };
                } catch (error) {
                    if (controller.signal.aborted) {
                        return (0, _apistrict.createStrictApiError)('Request cancelled', 'REQUEST_CANCELLED');
                    }
                    const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';
                    console.error('[useOrdersApi] Request failed:', errorMessage);
                    return (0, _apistrict.createStrictApiError)(errorMessage, 'FETCH_ERROR', {
                        originalError: error,
                        filters,
                        url: buildApiUrl(filters)
                    });
                }
            })();
            // Registrar la petición como pendiente
            options.cache.setPendingRequest(filters, requestPromise);
            return await requestPromise;
        } catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Unexpected error in fetchOrdersInternal';
            console.error('[useOrdersApi] Unexpected error:', errorMessage);
            return (0, _apistrict.createStrictApiError)(errorMessage, 'UNEXPECTED_ERROR', {
                originalError: error,
                filters
            });
        }
    }, [
        options
    ]);
    const abortCurrentRequest = (0, _react.useCallback)(()=>{
        if (abortControllerRef.current && !abortControllerRef.current.signal.aborted) {
            abortControllerRef.current.abort();
            if (process.env.NODE_ENV === 'development') {
                console.log('[useOrdersApi] Request aborted');
            }
        }
    }, []);
    const isRequestInProgress = (0, _react.useCallback)(()=>{
        return abortControllerRef.current !== null && !abortControllerRef.current.signal.aborted;
    }, []);
    return {
        fetchOrdersInternal,
        abortCurrentRequest,
        isRequestInProgress
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcaG9va3NcXGFkbWluXFx1c2VPcmRlcnNBcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBJTlRFWUEgRS1DT01NRVJDRSAtIE9SREVSUyBBUEkgSE9PS1xuLy8gSG9vayBlc3BlY2lhbGl6YWRvIHBhcmEgbGxhbWFkYXMgYSBsYSBBUEkgZGUgw7NyZGVuZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7XG4gIFN0cmljdE9yZGVyc0xpc3RSZXNwb25zZSxcbiAgQXBpUmVzdWx0LFxuICB0b1N0cmljdE9yZGVyc1Jlc3BvbnNlLFxuICBjcmVhdGVTdHJpY3RBcGlFcnJvcixcbiAgaXNTdHJpY3RBcGlSZXNwb25zZSxcbn0gZnJvbSAnQC90eXBlcy9hcGktc3RyaWN0J1xuaW1wb3J0IHsgU3RyaWN0T3JkZXJGaWx0ZXJzIH0gZnJvbSAnLi91c2VPcmRlcnNFbnRlcnByaXNlU3RyaWN0J1xuaW1wb3J0IHsgVXNlT3JkZXJzQ2FjaGVSZXR1cm4gfSBmcm9tICcuL3VzZU9yZGVyc0NhY2hlJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVElQT1MgWSBDT05GSUdVUkFDScOTTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIEFwaU9wdGlvbnMge1xuICB0aW1lb3V0OiBudW1iZXJcbiAgbWF4UmV0cmllczogbnVtYmVyXG4gIGVuYWJsZUNhY2hlOiBib29sZWFuXG59XG5cbmludGVyZmFjZSBVc2VPcmRlcnNBcGlPcHRpb25zIGV4dGVuZHMgQXBpT3B0aW9ucyB7XG4gIGNhY2hlOiBVc2VPcmRlcnNDYWNoZVJldHVyblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZU9yZGVyc0FwaVJldHVybiB7XG4gIGZldGNoT3JkZXJzSW50ZXJuYWw6IChcbiAgICBmaWx0ZXJzOiBTdHJpY3RPcmRlckZpbHRlcnMsXG4gICAgaXNSZXRyeT86IGJvb2xlYW5cbiAgKSA9PiBQcm9taXNlPEFwaVJlc3VsdDxTdHJpY3RPcmRlcnNMaXN0UmVzcG9uc2VbJ2RhdGEnXT4+XG4gIGFib3J0Q3VycmVudFJlcXVlc3Q6ICgpID0+IHZvaWRcbiAgaXNSZXF1ZXN0SW5Qcm9ncmVzczogKCkgPT4gYm9vbGVhblxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQURFUyBERSBBUElcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGJ1aWxkQXBpVXJsKGZpbHRlcnM6IFN0cmljdE9yZGVyRmlsdGVycyk6IHN0cmluZyB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuXG4gIC8vIEFncmVnYXIgcGFyw6FtZXRyb3MgZGUgZmlsdHJvc1xuICBPYmplY3QuZW50cmllcyhmaWx0ZXJzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAvLyBTaWVtcHJlIGluY2x1aXIgcGFyw6FtZXRyb3MgcmVxdWVyaWRvcyBwb3IgbGEgQVBJXG4gICAgaWYgKGtleSA9PT0gJ3BhZ2UnIHx8IGtleSA9PT0gJ2xpbWl0JyB8fCBrZXkgPT09ICdzb3J0X2J5JyB8fCBrZXkgPT09ICdzb3J0X29yZGVyJykge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09ICcnKSB7XG4gICAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBQYXJhIG90cm9zIHBhcsOhbWV0cm9zLCBhcGxpY2FyIGZpbHRyb3Mgbm9ybWFsZXNcbiAgICBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSAnYWxsJyAmJiB2YWx1ZSAhPT0gJycpIHtcbiAgICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKVxuICAgIH1cbiAgfSlcblxuICAvLyBBc2VndXJhciBxdWUgc2llbXByZSB0ZW5nYW1vcyBsb3MgcGFyw6FtZXRyb3MgbcOtbmltb3MgcmVxdWVyaWRvc1xuICBpZiAoIXNlYXJjaFBhcmFtcy5oYXMoJ3BhZ2UnKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3BhZ2UnLCAnMScpXG4gIH1cbiAgaWYgKCFzZWFyY2hQYXJhbXMuaGFzKCdsaW1pdCcpKSB7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnbGltaXQnLCAnMjAnKVxuICB9XG4gIGlmICghc2VhcmNoUGFyYW1zLmhhcygnc29ydF9ieScpKSB7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnc29ydF9ieScsICdjcmVhdGVkX2F0JylcbiAgfVxuICBpZiAoIXNlYXJjaFBhcmFtcy5oYXMoJ3NvcnRfb3JkZXInKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3NvcnRfb3JkZXInLCAnZGVzYycpXG4gIH1cblxuICByZXR1cm4gYC9hcGkvYWRtaW4vb3JkZXJzPyR7c2VhcmNoUGFyYW1zLnRvU3RyaW5nKCl9YFxufVxuXG5hc3luYyBmdW5jdGlvbiBtYWtlQXBpUmVxdWVzdChcbiAgdXJsOiBzdHJpbmcsXG4gIHNpZ25hbDogQWJvcnRTaWduYWwsXG4gIHRpbWVvdXQ6IG51bWJlclxuKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAvLyBDcmVhciB0aW1lb3V0IHByb21pc2VcbiAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZTxuZXZlcj4oKF8sIHJlamVjdCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApKSwgdGltZW91dClcbiAgfSlcblxuICAvLyBIYWNlciBsYSBwZXRpY2nDs24gY29uIHRpbWVvdXRcbiAgY29uc3QgZmV0Y2hQcm9taXNlID0gZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLCAvLyDinIUgQUdSRUdBRE86IEluY2x1aXIgY29va2llcyBkZSBzZXNpw7NuIE5leHRBdXRoLmpzXG4gICAgc2lnbmFsLFxuICB9KVxuXG4gIHJldHVybiBQcm9taXNlLnJhY2UoW2ZldGNoUHJvbWlzZSwgdGltZW91dFByb21pc2VdKVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSE9PSyBERSBBUElcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VPcmRlcnNBcGkob3B0aW9uczogVXNlT3JkZXJzQXBpT3B0aW9ucyk6IFVzZU9yZGVyc0FwaVJldHVybiB7XG4gIGNvbnN0IGFib3J0Q29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGZldGNoT3JkZXJzSW50ZXJuYWwgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoXG4gICAgICBmaWx0ZXJzOiBTdHJpY3RPcmRlckZpbHRlcnMsXG4gICAgICBpc1JldHJ5OiBib29sZWFuID0gZmFsc2VcbiAgICApOiBQcm9taXNlPEFwaVJlc3VsdDxTdHJpY3RPcmRlcnNMaXN0UmVzcG9uc2VbJ2RhdGEnXT4+ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZhbGlkYXIgc2kgbGEgcGV0aWNpw7NuIGVzIGRlbWFzaWFkbyByZWNpZW50ZSAoYW50aS1zcGFtKVxuICAgICAgICBpZiAoIWlzUmV0cnkgJiYgb3B0aW9ucy5jYWNoZS5pc1JlcXVlc3RUb29SZWNlbnQoZmlsdGVycykpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzQXBpXSBSZXF1ZXN0IGJsb2NrZWQgLSB0b28gcmVjZW50JylcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZVN0cmljdEFwaUVycm9yKCdSZXF1ZXN0IHRvbyByZWNlbnQnLCAnUkVRVUVTVF9USFJPVFRMRUQnKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmVyaWZpY2FyIGNhY2hlIHByaW1lcm9cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlQ2FjaGUpIHtcbiAgICAgICAgICBjb25zdCBjYWNoZWREYXRhID0gb3B0aW9ucy5jYWNoZS5nZXRDYWNoZWREYXRhKGZpbHRlcnMpXG4gICAgICAgICAgaWYgKGNhY2hlZERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IGNhY2hlZERhdGEuZGF0YSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogY2FjaGVkRGF0YS5tZXNzYWdlLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IGNhY2hlZERhdGEudGltZXN0YW1wLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSB5YSBoYXkgdW5hIHBldGljacOzbiBwZW5kaWVudGVcbiAgICAgICAgY29uc3QgcGVuZGluZ1JlcXVlc3QgPSBvcHRpb25zLmNhY2hlLmdldFBlbmRpbmdSZXF1ZXN0KGZpbHRlcnMpXG4gICAgICAgIGlmIChwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1t1c2VPcmRlcnNBcGldIFVzaW5nIHBlbmRpbmcgcmVxdWVzdCcpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhd2FpdCBwZW5kaW5nUmVxdWVzdFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VzdGnDs24gZGVsIEFib3J0Q29udHJvbGxlciAtIFNvbG8gYWJvcnRhciBzaSBlcyB1bmEgcGV0aWNpw7NuIGRpZmVyZW50ZVxuICAgICAgICAvLyBDcmVhciB1biBpZGVudGlmaWNhZG9yIMO6bmljbyBwYXJhIGVzdGEgcGV0aWNpw7NuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcnMpXG5cbiAgICAgICAgLy8gU29sbyBhYm9ydGFyIHNpIGhheSB1bmEgcGV0aWNpw7NuIGFudGVyaW9yIFkgZXMgZGlmZXJlbnRlXG4gICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCAmJiAhYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAvLyBTb2xvIGFib3J0YXIgc2kgbG9zIGZpbHRyb3Mgc29uIGRpZmVyZW50ZXMgKG51ZXZhIHBldGljacOzbilcbiAgICAgICAgICBjb25zdCBjdXJyZW50UmVxdWVzdElkID0gKGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50IGFzIGFueSkuX3JlcXVlc3RJZFxuICAgICAgICAgIGlmIChjdXJyZW50UmVxdWVzdElkICYmIGN1cnJlbnRSZXF1ZXN0SWQgIT09IHJlcXVlc3RJZCkge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzQXBpXSBBYm9ydGluZyBwcmV2aW91cyBkaWZmZXJlbnQgcmVxdWVzdCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5hYm9ydCgpXG4gICAgICAgICAgfSBlbHNlIGlmICghY3VycmVudFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgLy8gQWJvcnRhciBzaSBubyB0aWVuZSBJRCAocGV0aWNpw7NuIGFudGlndWEpXG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5hYm9ydCgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAgICAgICA7KGNvbnRyb2xsZXIgYXMgYW55KS5fcmVxdWVzdElkID0gcmVxdWVzdElkXG4gICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gY29udHJvbGxlclxuXG4gICAgICAgIC8vIENyZWFyIGxhIHByb21lc2EgZGUgbGEgcGV0aWNpw7NuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQcm9taXNlID0gKGFzeW5jICgpOiBQcm9taXNlPEFwaVJlc3VsdDxTdHJpY3RPcmRlcnNMaXN0UmVzcG9uc2VbJ2RhdGEnXT4+ID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gYnVpbGRBcGlVcmwoZmlsdGVycylcblxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbdXNlT3JkZXJzQXBpXSBNYWtpbmcgcmVxdWVzdDonLCB7IHVybCwgZmlsdGVycyB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VBcGlSZXF1ZXN0KHVybCwgY29udHJvbGxlci5zaWduYWwsIG9wdGlvbnMudGltZW91dClcblxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGxhIHBldGljacOzbiBmdWUgY2FuY2VsYWRhXG4gICAgICAgICAgICBpZiAoY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlU3RyaWN0QXBpRXJyb3IoJ1JlcXVlc3QgY2FuY2VsbGVkJywgJ1JFUVVFU1RfQ0FOQ0VMTEVEJylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHN0YXR1cyBkZSByZXNwdWVzdGFcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmtub3duIGVycm9yJylcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtlcnJvclRleHR9YClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUGFyc2VhciByZXNwdWVzdGEgSlNPTlxuICAgICAgICAgICAgbGV0IGpzb25EYXRhOiB1bmtub3duXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBqc29uRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlOiAke3BhcnNlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNlRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmFsaWRhciB5IHRyYW5zZm9ybWFyIHJlc3B1ZXN0YVxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGVkUmVzcG9uc2UgPSB0b1N0cmljdE9yZGVyc1Jlc3BvbnNlKGpzb25EYXRhKVxuXG4gICAgICAgICAgICBpZiAoIWlzU3RyaWN0QXBpUmVzcG9uc2UodmFsaWRhdGVkUmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZWRSZXNwb25zZSAvLyBFcyB1biBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHdWFyZGFyIGVuIGNhY2hlIHNpIGVzdMOhIGhhYmlsaXRhZG9cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUNhY2hlKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuY2FjaGUuc2V0Q2FjaGVkRGF0YShmaWx0ZXJzLCB2YWxpZGF0ZWRSZXNwb25zZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogdmFsaWRhdGVkUmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogdmFsaWRhdGVkUmVzcG9uc2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiB2YWxpZGF0ZWRSZXNwb25zZS50aW1lc3RhbXAsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjcmVhdGVTdHJpY3RBcGlFcnJvcignUmVxdWVzdCBjYW5jZWxsZWQnLCAnUkVRVUVTVF9DQU5DRUxMRUQnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZU9yZGVyc0FwaV0gUmVxdWVzdCBmYWlsZWQ6JywgZXJyb3JNZXNzYWdlKVxuXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlU3RyaWN0QXBpRXJyb3IoZXJyb3JNZXNzYWdlLCAnRkVUQ0hfRVJST1InLCB7XG4gICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICBmaWx0ZXJzLFxuICAgICAgICAgICAgICB1cmw6IGJ1aWxkQXBpVXJsKGZpbHRlcnMpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKClcblxuICAgICAgICAvLyBSZWdpc3RyYXIgbGEgcGV0aWNpw7NuIGNvbW8gcGVuZGllbnRlXG4gICAgICAgIG9wdGlvbnMuY2FjaGUuc2V0UGVuZGluZ1JlcXVlc3QoZmlsdGVycywgcmVxdWVzdFByb21pc2UpXG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlcXVlc3RQcm9taXNlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1VuZXhwZWN0ZWQgZXJyb3IgaW4gZmV0Y2hPcmRlcnNJbnRlcm5hbCdcbiAgICAgICAgY29uc29sZS5lcnJvcignW3VzZU9yZGVyc0FwaV0gVW5leHBlY3RlZCBlcnJvcjonLCBlcnJvck1lc3NhZ2UpXG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVN0cmljdEFwaUVycm9yKGVycm9yTWVzc2FnZSwgJ1VORVhQRUNURURfRVJST1InLCB7XG4gICAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyb3IsXG4gICAgICAgICAgZmlsdGVycyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIFtvcHRpb25zXVxuICApXG5cbiAgY29uc3QgYWJvcnRDdXJyZW50UmVxdWVzdCA9IHVzZUNhbGxiYWNrKCgpOiB2b2lkID0+IHtcbiAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgJiYgIWFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5hYm9ydCgpXG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zb2xlLmxvZygnW3VzZU9yZGVyc0FwaV0gUmVxdWVzdCBhYm9ydGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ICE9PSBudWxsICYmICFhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudC5zaWduYWwuYWJvcnRlZFxuICB9LCBbXSlcblxuICByZXR1cm4ge1xuICAgIGZldGNoT3JkZXJzSW50ZXJuYWwsXG4gICAgYWJvcnRDdXJyZW50UmVxdWVzdCxcbiAgICBpc1JlcXVlc3RJblByb2dyZXNzLFxuICB9XG59XG4iXSwibmFtZXMiOlsidXNlT3JkZXJzQXBpIiwiYnVpbGRBcGlVcmwiLCJmaWx0ZXJzIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImFwcGVuZCIsIlN0cmluZyIsImhhcyIsInRvU3RyaW5nIiwibWFrZUFwaVJlcXVlc3QiLCJ1cmwiLCJzaWduYWwiLCJ0aW1lb3V0IiwidGltZW91dFByb21pc2UiLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJFcnJvciIsImZldGNoUHJvbWlzZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsImNyZWRlbnRpYWxzIiwicmFjZSIsIm9wdGlvbnMiLCJhYm9ydENvbnRyb2xsZXJSZWYiLCJ1c2VSZWYiLCJmZXRjaE9yZGVyc0ludGVybmFsIiwidXNlQ2FsbGJhY2siLCJpc1JldHJ5IiwiY2FjaGUiLCJpc1JlcXVlc3RUb29SZWNlbnQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlU3RyaWN0QXBpRXJyb3IiLCJlbmFibGVDYWNoZSIsImNhY2hlZERhdGEiLCJnZXRDYWNoZWREYXRhIiwic3VjY2VzcyIsImRhdGEiLCJtZXNzYWdlIiwidGltZXN0YW1wIiwicGVuZGluZ1JlcXVlc3QiLCJnZXRQZW5kaW5nUmVxdWVzdCIsInJlcXVlc3RJZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjdXJyZW50IiwiYWJvcnRlZCIsImN1cnJlbnRSZXF1ZXN0SWQiLCJfcmVxdWVzdElkIiwiYWJvcnQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwicmVxdWVzdFByb21pc2UiLCJyZXNwb25zZSIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsImNhdGNoIiwic3RhdHVzIiwianNvbkRhdGEiLCJqc29uIiwicGFyc2VFcnJvciIsInZhbGlkYXRlZFJlc3BvbnNlIiwidG9TdHJpY3RPcmRlcnNSZXNwb25zZSIsImlzU3RyaWN0QXBpUmVzcG9uc2UiLCJzZXRDYWNoZWREYXRhIiwiZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJvcmlnaW5hbEVycm9yIiwic2V0UGVuZGluZ1JlcXVlc3QiLCJhYm9ydEN1cnJlbnRSZXF1ZXN0IiwiaXNSZXF1ZXN0SW5Qcm9ncmVzcyJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLHVDQUF1QztBQUN2Qyx1REFBdUQ7QUFDdkQsc0NBQXNDOzs7OzsrQkFzR3RCQTs7O2VBQUFBOzs7dUJBcEdvQjsyQkFPN0I7QUEyQlAsc0NBQXNDO0FBQ3RDLG9CQUFvQjtBQUNwQixzQ0FBc0M7QUFFdEMsU0FBU0MsWUFBWUMsT0FBMkI7SUFDOUMsTUFBTUMsZUFBZSxJQUFJQztJQUV6QixnQ0FBZ0M7SUFDaENDLE9BQU9DLE9BQU8sQ0FBQ0osU0FBU0ssT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBS0MsTUFBTTtRQUMzQyxtREFBbUQ7UUFDbkQsSUFBSUQsUUFBUSxVQUFVQSxRQUFRLFdBQVdBLFFBQVEsYUFBYUEsUUFBUSxjQUFjO1lBQ2xGLElBQUlDLFVBQVVDLGFBQWFELFVBQVUsUUFBUUEsVUFBVSxJQUFJO2dCQUN6RE4sYUFBYVEsTUFBTSxDQUFDSCxLQUFLSSxPQUFPSDtZQUNsQztRQUNGLE9BRUssSUFBSUEsVUFBVUMsYUFBYUQsVUFBVSxRQUFRQSxVQUFVLFNBQVNBLFVBQVUsSUFBSTtZQUNqRk4sYUFBYVEsTUFBTSxDQUFDSCxLQUFLSSxPQUFPSDtRQUNsQztJQUNGO0lBRUEsa0VBQWtFO0lBQ2xFLElBQUksQ0FBQ04sYUFBYVUsR0FBRyxDQUFDLFNBQVM7UUFDN0JWLGFBQWFRLE1BQU0sQ0FBQyxRQUFRO0lBQzlCO0lBQ0EsSUFBSSxDQUFDUixhQUFhVSxHQUFHLENBQUMsVUFBVTtRQUM5QlYsYUFBYVEsTUFBTSxDQUFDLFNBQVM7SUFDL0I7SUFDQSxJQUFJLENBQUNSLGFBQWFVLEdBQUcsQ0FBQyxZQUFZO1FBQ2hDVixhQUFhUSxNQUFNLENBQUMsV0FBVztJQUNqQztJQUNBLElBQUksQ0FBQ1IsYUFBYVUsR0FBRyxDQUFDLGVBQWU7UUFDbkNWLGFBQWFRLE1BQU0sQ0FBQyxjQUFjO0lBQ3BDO0lBRUEsT0FBTyxDQUFDLGtCQUFrQixFQUFFUixhQUFhVyxRQUFRLElBQUk7QUFDdkQ7QUFFQSxlQUFlQyxlQUNiQyxHQUFXLEVBQ1hDLE1BQW1CLEVBQ25CQyxPQUFlO0lBRWYsd0JBQXdCO0lBQ3hCLE1BQU1DLGlCQUFpQixJQUFJQyxRQUFlLENBQUNDLEdBQUdDO1FBQzVDQyxXQUFXLElBQU1ELE9BQU8sSUFBSUUsTUFBTSxDQUFDLHNCQUFzQixFQUFFTixRQUFRLEVBQUUsQ0FBQyxJQUFJQTtJQUM1RTtJQUVBLGdDQUFnQztJQUNoQyxNQUFNTyxlQUFlQyxNQUFNVixLQUFLO1FBQzlCVyxRQUFRO1FBQ1JDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEJDLFFBQVE7UUFDVjtRQUNBQyxhQUFhO1FBQ2JiO0lBQ0Y7SUFFQSxPQUFPRyxRQUFRVyxJQUFJLENBQUM7UUFBQ047UUFBY047S0FBZTtBQUNwRDtBQU1PLFNBQVNuQixhQUFhZ0MsT0FBNEI7SUFDdkQsTUFBTUMscUJBQXFCQyxJQUFBQSxhQUFNLEVBQXlCO0lBRTFELE1BQU1DLHNCQUFzQkMsSUFBQUEsa0JBQVcsRUFDckMsT0FDRWxDLFNBQ0FtQyxVQUFtQixLQUFLO1FBRXhCLElBQUk7WUFDRiwyREFBMkQ7WUFDM0QsSUFBSSxDQUFDQSxXQUFXTCxRQUFRTSxLQUFLLENBQUNDLGtCQUFrQixDQUFDckMsVUFBVTtnQkFDekQsSUFBSXNDLFFBQVFDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGVBQWU7b0JBQzFDQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ2Q7Z0JBQ0EsT0FBT0MsSUFBQUEsK0JBQW9CLEVBQUMsc0JBQXNCO1lBQ3BEO1lBRUEsMEJBQTBCO1lBQzFCLElBQUliLFFBQVFjLFdBQVcsRUFBRTtnQkFDdkIsTUFBTUMsYUFBYWYsUUFBUU0sS0FBSyxDQUFDVSxhQUFhLENBQUM5QztnQkFDL0MsSUFBSTZDLFlBQVk7b0JBQ2QsT0FBTzt3QkFDTEUsU0FBUzt3QkFDVEMsTUFBTUgsV0FBV0csSUFBSTt3QkFDckJDLFNBQVNKLFdBQVdJLE9BQU87d0JBQzNCQyxXQUFXTCxXQUFXSyxTQUFTO29CQUNqQztnQkFDRjtZQUNGO1lBRUEsNkNBQTZDO1lBQzdDLE1BQU1DLGlCQUFpQnJCLFFBQVFNLEtBQUssQ0FBQ2dCLGlCQUFpQixDQUFDcEQ7WUFDdkQsSUFBSW1ELGdCQUFnQjtnQkFDbEIsSUFBSWIsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLEtBQUssZUFBZTtvQkFDMUNDLFFBQVFDLEdBQUcsQ0FBQztnQkFDZDtnQkFDQSxPQUFPLE1BQU1TO1lBQ2Y7WUFFQSwwRUFBMEU7WUFDMUUsa0RBQWtEO1lBQ2xELE1BQU1FLFlBQVlDLEtBQUtDLFNBQVMsQ0FBQ3ZEO1lBRWpDLDJEQUEyRDtZQUMzRCxJQUFJK0IsbUJBQW1CeUIsT0FBTyxJQUFJLENBQUN6QixtQkFBbUJ5QixPQUFPLENBQUN6QyxNQUFNLENBQUMwQyxPQUFPLEVBQUU7Z0JBQzVFLDhEQUE4RDtnQkFDOUQsTUFBTUMsbUJBQW1CLEFBQUMzQixtQkFBbUJ5QixPQUFPLENBQVNHLFVBQVU7Z0JBQ3ZFLElBQUlELG9CQUFvQkEscUJBQXFCTCxXQUFXO29CQUN0RCxJQUFJZixRQUFRQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxlQUFlO3dCQUMxQ0MsUUFBUUMsR0FBRyxDQUFDO29CQUNkO29CQUNBWCxtQkFBbUJ5QixPQUFPLENBQUNJLEtBQUs7Z0JBQ2xDLE9BQU8sSUFBSSxDQUFDRixrQkFBa0I7b0JBQzVCLDRDQUE0QztvQkFDNUMzQixtQkFBbUJ5QixPQUFPLENBQUNJLEtBQUs7Z0JBQ2xDO1lBQ0Y7WUFFQSxNQUFNQyxhQUFhLElBQUlDO1lBQ3JCRCxXQUFtQkYsVUFBVSxHQUFHTjtZQUNsQ3RCLG1CQUFtQnlCLE9BQU8sR0FBR0s7WUFFN0Isa0NBQWtDO1lBQ2xDLE1BQU1FLGlCQUFpQixBQUFDLENBQUE7Z0JBQ3RCLElBQUk7b0JBQ0YsTUFBTWpELE1BQU1mLFlBQVlDO29CQUV4QixJQUFJc0MsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLEtBQUssZUFBZTt3QkFDMUNDLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0M7NEJBQUU1Qjs0QkFBS2Q7d0JBQVE7b0JBQy9EO29CQUVBLE1BQU1nRSxXQUFXLE1BQU1uRCxlQUFlQyxLQUFLK0MsV0FBVzlDLE1BQU0sRUFBRWUsUUFBUWQsT0FBTztvQkFFN0UseUNBQXlDO29CQUN6QyxJQUFJNkMsV0FBVzlDLE1BQU0sQ0FBQzBDLE9BQU8sRUFBRTt3QkFDN0IsT0FBT2QsSUFBQUEsK0JBQW9CLEVBQUMscUJBQXFCO29CQUNuRDtvQkFFQSxnQ0FBZ0M7b0JBQ2hDLElBQUksQ0FBQ3FCLFNBQVNDLEVBQUUsRUFBRTt3QkFDaEIsTUFBTUMsWUFBWSxNQUFNRixTQUFTRyxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFNO3dCQUNwRCxNQUFNLElBQUk5QyxNQUFNLENBQUMsS0FBSyxFQUFFMEMsU0FBU0ssTUFBTSxDQUFDLEVBQUUsRUFBRUgsV0FBVztvQkFDekQ7b0JBRUEseUJBQXlCO29CQUN6QixJQUFJSTtvQkFDSixJQUFJO3dCQUNGQSxXQUFXLE1BQU1OLFNBQVNPLElBQUk7b0JBQ2hDLEVBQUUsT0FBT0MsWUFBWTt3QkFDbkIsTUFBTSxJQUFJbEQsTUFDUixDQUFDLCtCQUErQixFQUFFa0Qsc0JBQXNCbEQsUUFBUWtELFdBQVd2QixPQUFPLEdBQUcsaUJBQWlCO29CQUUxRztvQkFFQSxrQ0FBa0M7b0JBQ2xDLE1BQU13QixvQkFBb0JDLElBQUFBLGlDQUFzQixFQUFDSjtvQkFFakQsSUFBSSxDQUFDSyxJQUFBQSw4QkFBbUIsRUFBQ0Ysb0JBQW9CO3dCQUMzQyxPQUFPQSxrQkFBa0IsY0FBYzs7b0JBQ3pDO29CQUVBLHNDQUFzQztvQkFDdEMsSUFBSTNDLFFBQVFjLFdBQVcsRUFBRTt3QkFDdkJkLFFBQVFNLEtBQUssQ0FBQ3dDLGFBQWEsQ0FBQzVFLFNBQVN5RTtvQkFDdkM7b0JBRUEsT0FBTzt3QkFDTDFCLFNBQVM7d0JBQ1RDLE1BQU15QixrQkFBa0J6QixJQUFJO3dCQUM1QkMsU0FBU3dCLGtCQUFrQnhCLE9BQU87d0JBQ2xDQyxXQUFXdUIsa0JBQWtCdkIsU0FBUztvQkFDeEM7Z0JBQ0YsRUFBRSxPQUFPMkIsT0FBTztvQkFDZCxJQUFJaEIsV0FBVzlDLE1BQU0sQ0FBQzBDLE9BQU8sRUFBRTt3QkFDN0IsT0FBT2QsSUFBQUEsK0JBQW9CLEVBQUMscUJBQXFCO29CQUNuRDtvQkFFQSxNQUFNbUMsZUFBZUQsaUJBQWlCdkQsUUFBUXVELE1BQU01QixPQUFPLEdBQUc7b0JBQzlEUixRQUFRb0MsS0FBSyxDQUFDLGtDQUFrQ0M7b0JBRWhELE9BQU9uQyxJQUFBQSwrQkFBb0IsRUFBQ21DLGNBQWMsZUFBZTt3QkFDdkRDLGVBQWVGO3dCQUNmN0U7d0JBQ0FjLEtBQUtmLFlBQVlDO29CQUNuQjtnQkFDRjtZQUNGLENBQUE7WUFFQSx1Q0FBdUM7WUFDdkM4QixRQUFRTSxLQUFLLENBQUM0QyxpQkFBaUIsQ0FBQ2hGLFNBQVMrRDtZQUV6QyxPQUFPLE1BQU1BO1FBQ2YsRUFBRSxPQUFPYyxPQUFPO1lBQ2QsTUFBTUMsZUFDSkQsaUJBQWlCdkQsUUFBUXVELE1BQU01QixPQUFPLEdBQUc7WUFDM0NSLFFBQVFvQyxLQUFLLENBQUMsb0NBQW9DQztZQUVsRCxPQUFPbkMsSUFBQUEsK0JBQW9CLEVBQUNtQyxjQUFjLG9CQUFvQjtnQkFDNURDLGVBQWVGO2dCQUNmN0U7WUFDRjtRQUNGO0lBQ0YsR0FDQTtRQUFDOEI7S0FBUTtJQUdYLE1BQU1tRCxzQkFBc0IvQyxJQUFBQSxrQkFBVyxFQUFDO1FBQ3RDLElBQUlILG1CQUFtQnlCLE9BQU8sSUFBSSxDQUFDekIsbUJBQW1CeUIsT0FBTyxDQUFDekMsTUFBTSxDQUFDMEMsT0FBTyxFQUFFO1lBQzVFMUIsbUJBQW1CeUIsT0FBTyxDQUFDSSxLQUFLO1lBRWhDLElBQUl0QixRQUFRQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxlQUFlO2dCQUMxQ0MsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLE1BQU13QyxzQkFBc0JoRCxJQUFBQSxrQkFBVyxFQUFDO1FBQ3RDLE9BQU9ILG1CQUFtQnlCLE9BQU8sS0FBSyxRQUFRLENBQUN6QixtQkFBbUJ5QixPQUFPLENBQUN6QyxNQUFNLENBQUMwQyxPQUFPO0lBQzFGLEdBQUcsRUFBRTtJQUVMLE9BQU87UUFDTHhCO1FBQ0FnRDtRQUNBQztJQUNGO0FBQ0YifQ==