{"version":3,"names":["authOptions","cov_7pm3vr73b","s","providers","_google","default","clientId","process","env","AUTH_GOOGLE_ID","clientSecret","AUTH_GOOGLE_SECRET","authorization","params","prompt","access_type","response_type","pages","signIn","error","callbacks","session","token","f","sub","b","user","id","email","role","jwt","account","profile","events","isNewUser","console","log","signOut","strategy","maxAge","updateAge","debug","NODE_ENV","trustHost","cookies","sessionToken","name","options","httpOnly","sameSite","path","secure","secret","NEXTAUTH_SECRET"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\lib\\auth\\auth-options.ts"],"sourcesContent":["// =====================================================\r\n// AUTH OPTIONS: NEXTAUTH CONFIGURATION\r\n// Descripción: Configuración centralizada de NextAuth.js\r\n// Basado en: NextAuth.js v5 + Google OAuth + JWT Strategy\r\n// =====================================================\r\n\r\nimport { NextAuthOptions } from 'next-auth';\r\nimport GoogleProvider from 'next-auth/providers/google';\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n  // Configuración de providers\r\n  providers: [\r\n    GoogleProvider({\r\n      clientId: process.env.AUTH_GOOGLE_ID!,\r\n      clientSecret: process.env.AUTH_GOOGLE_SECRET!,\r\n      authorization: {\r\n        params: {\r\n          prompt: \"consent\",\r\n          access_type: \"offline\",\r\n          response_type: \"code\"\r\n        }\r\n      }\r\n    }),\r\n  ],\r\n\r\n  // Configuración de páginas personalizadas\r\n  pages: {\r\n    signIn: \"/auth/signin\",\r\n    error: \"/auth/error\",\r\n  },\r\n\r\n  // Configuración de callbacks\r\n  callbacks: {\r\n    // Callback de sesión - JWT strategy\r\n    async session({ session, token }) {\r\n      if (token.sub) {\r\n        session.user.id = token.sub;\r\n      }\r\n      \r\n      // Agregar rol de administrador para usuarios específicos\r\n      if (session.user.email === 'santiago@xor.com.ar') {\r\n        (session.user as any).role = 'admin';\r\n      }\r\n\r\n      return session;\r\n    },\r\n\r\n    // Callback de JWT\r\n    async jwt({ token, user, account }) {\r\n      if (user) {\r\n        token.sub = user.id;\r\n        token.email = user.email;\r\n        \r\n        // Agregar rol de administrador para usuarios específicos\r\n        if (user.email === 'santiago@xor.com.ar') {\r\n          token.role = 'admin';\r\n        }\r\n      }\r\n      return token;\r\n    },\r\n\r\n    // Callback de autorización\r\n    async signIn({ user, account, profile }) {\r\n      // Permitir todos los sign-ins por ahora\r\n      return true;\r\n    },\r\n  },\r\n\r\n  // Configuración de eventos\r\n  events: {\r\n    async signIn({ user, account, profile, isNewUser }) {\r\n      console.log(`[NextAuth] Usuario autenticado: ${user.email}`);\r\n      \r\n      if (isNewUser) {\r\n        console.log(`[NextAuth] Nuevo usuario registrado: ${user.email}`);\r\n      }\r\n    },\r\n    \r\n    async signOut({ session, token }) {\r\n      console.log(`[NextAuth] Usuario desconectado`);\r\n    },\r\n  },\r\n\r\n  // Configuración de sesión con JWT\r\n  session: {\r\n    strategy: \"jwt\",\r\n    maxAge: 30 * 24 * 60 * 60, // 30 días\r\n    updateAge: 24 * 60 * 60, // 24 horas\r\n  },\r\n\r\n  // Configuración de JWT\r\n  jwt: {\r\n    maxAge: 30 * 24 * 60 * 60, // 30 días\r\n  },\r\n\r\n  // Configuración de debug\r\n  debug: process.env.NODE_ENV === \"development\",\r\n\r\n  // Configuración de trusted hosts\r\n  trustHost: true,\r\n\r\n  // Configuración de cookies para producción\r\n  cookies: {\r\n    sessionToken: {\r\n      name: `${process.env.NODE_ENV === \"production\" ? \"__Secure-\" : \"\"}next-auth.session-token`,\r\n      options: {\r\n        httpOnly: true,\r\n        sameSite: \"lax\",\r\n        path: \"/\",\r\n        secure: process.env.NODE_ENV === \"production\",\r\n      },\r\n    },\r\n  },\r\n\r\n  // Configuración de secret\r\n  secret: process.env.NEXTAUTH_SECRET,\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}