5c82af60009f6a7bedcb84cf458dbfc4
// =====================================================
// UTILIDADES: VALIDACIÓN DE DATOS
// Descripción: Funciones para validar datos de logística
// Basado en: Zod + patrones enterprise
// =====================================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get addressSchema () {
        return addressSchema;
    },
    get sanitizePhoneNumber () {
        return sanitizePhoneNumber;
    },
    get sanitizePostalCode () {
        return sanitizePostalCode;
    },
    get sanitizeString () {
        return sanitizeString;
    },
    get sanitizeTrackingNumber () {
        return sanitizeTrackingNumber;
    },
    get shipmentSchema () {
        return shipmentSchema;
    },
    get validateAddress () {
        return validateAddress;
    },
    get validateCoordinates () {
        return validateCoordinates;
    },
    get validateDNI () {
        return validateDNI;
    },
    get validateDeliveryDate () {
        return validateDeliveryDate;
    },
    get validateDimensions () {
        return validateDimensions;
    },
    get validateEmail () {
        return validateEmail;
    },
    get validatePackageValue () {
        return validatePackageValue;
    },
    get validatePhoneNumber () {
        return validatePhoneNumber;
    },
    get validatePostalCode () {
        return validatePostalCode;
    },
    get validateShipment () {
        return validateShipment;
    },
    get validateShippingCost () {
        return validateShippingCost;
    },
    get validateTrackingNumber () {
        return validateTrackingNumber;
    },
    get validateWeight () {
        return validateWeight;
    }
});
const _zod = require("zod");
const addressSchema = _zod.z.object({
    street: _zod.z.string().min(1, 'La calle es requerida'),
    number: _zod.z.string().min(1, 'El número es requerido'),
    apartment: _zod.z.string().optional(),
    neighborhood: _zod.z.string().min(1, 'El barrio es requerido'),
    city: _zod.z.string().min(1, 'La ciudad es requerida'),
    state: _zod.z.string().min(1, 'La provincia es requerida'),
    postal_code: _zod.z.string().min(4, 'El código postal debe tener al menos 4 dígitos'),
    country: _zod.z.string().default('AR'),
    latitude: _zod.z.number().optional(),
    longitude: _zod.z.number().optional(),
    reference: _zod.z.string().optional()
});
const shipmentSchema = _zod.z.object({
    tracking_number: _zod.z.string().min(1, 'El número de tracking es requerido'),
    courier_id: _zod.z.number().min(1, 'El courier es requerido'),
    service_type: _zod.z.enum([
        'standard',
        'express',
        'next_day',
        'same_day'
    ]),
    origin_address: addressSchema,
    destination_address: addressSchema,
    package_details: _zod.z.object({
        weight: _zod.z.number().min(0.1, 'El peso debe ser mayor a 0'),
        dimensions: _zod.z.object({
            length: _zod.z.number().min(1, 'El largo debe ser mayor a 0'),
            width: _zod.z.number().min(1, 'El ancho debe ser mayor a 0'),
            height: _zod.z.number().min(1, 'La altura debe ser mayor a 0')
        }),
        declared_value: _zod.z.number().min(0, 'El valor declarado debe ser mayor o igual a 0'),
        description: _zod.z.string().min(1, 'La descripción es requerida')
    }),
    estimated_delivery: _zod.z.string().optional(),
    special_instructions: _zod.z.string().optional()
});
function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}
function validatePhoneNumber(phone) {
    // Formato argentino: +54 9 351 123 4567, +54 351 123-4567, 351 123 4567, etc.
    // Limpiar el teléfono de espacios, guiones y paréntesis
    const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
    // Patrones aceptados:
    // +54351234567 (con código país)
    // +549351234567 (con código país y 9)
    // 351234567 (sin código país)
    const phoneRegex = /^(\+54(9)?)?\d{10}$|^\d{10}$/;
    return phoneRegex.test(cleanPhone) && cleanPhone.length >= 10;
}
function validateDNI(dni) {
    // Limpiar el DNI de espacios, guiones y puntos
    const cleanDNI = dni.replace(/[\s\-\.]/g, '');
    // Patrones aceptados:
    // DNI: 8 dígitos (12345678)
    // CUIT: 11 dígitos (20123456789)
    const dniRegex = /^\d{8}$/;
    const cuitRegex = /^\d{11}$/;
    if (dniRegex.test(cleanDNI)) {
        // Validar DNI (8 dígitos)
        return cleanDNI.length === 8 && parseInt(cleanDNI) > 0;
    } else if (cuitRegex.test(cleanDNI)) {
        // Validar CUIT (11 dígitos) - validación básica
        return cleanDNI.length === 11 && parseInt(cleanDNI) > 0;
    }
    return false;
}
function validatePostalCode(postalCode) {
    // Código postal argentino: 4 dígitos
    const postalCodeRegex = /^\d{4}$/;
    return postalCodeRegex.test(postalCode);
}
function validateTrackingNumber(trackingNumber) {
    // Formato general: al menos 6 caracteres alfanuméricos
    const trackingRegex = /^[A-Z0-9]{6,}$/i;
    return trackingRegex.test(trackingNumber);
}
function validateCoordinates(lat, lng) {
    return lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180;
}
function validateWeight(weight) {
    return weight > 0 && weight <= 1000; // Máximo 1000kg
}
function validateDimensions(dimensions) {
    const { length, width, height } = dimensions;
    return length > 0 && length <= 200 && // Máximo 200cm
    width > 0 && width <= 200 && height > 0 && height <= 200;
}
function validateDeliveryDate(date) {
    const deliveryDate = new Date(date);
    const today = new Date();
    const maxDate = new Date();
    maxDate.setDate(today.getDate() + 30); // Máximo 30 días
    return deliveryDate >= today && deliveryDate <= maxDate;
}
function validateShippingCost(cost) {
    return cost >= 0 && cost <= 100000; // Máximo $100,000
}
function validatePackageValue(value) {
    return value >= 0 && value <= 1000000; // Máximo $1,000,000
}
function sanitizeString(input) {
    return input.trim().replace(/[<>]/g, '');
}
function sanitizePhoneNumber(phone) {
    return phone.replace(/\D/g, '');
}
function sanitizePostalCode(postalCode) {
    return postalCode.replace(/\D/g, '').substring(0, 4);
}
function sanitizeTrackingNumber(trackingNumber) {
    return trackingNumber.toUpperCase().replace(/[^A-Z0-9]/g, '');
}
function validateAddress(address) {
    try {
        addressSchema.parse(address);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}
function validateShipment(shipment) {
    try {
        shipmentSchema.parse(shipment);
        return {
            isValid: true,
            errors: []
        };
    } catch (error) {
        if (error instanceof _zod.z.ZodError) {
            return {
                isValid: false,
                errors: error.errors.map((err)=>err.message)
            };
        }
        return {
            isValid: false,
            errors: [
                'Error de validación desconocido'
            ]
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFx1dGlsc1xcdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBVVElMSURBREVTOiBWQUxJREFDScOTTiBERSBEQVRPU1xyXG4vLyBEZXNjcmlwY2nDs246IEZ1bmNpb25lcyBwYXJhIHZhbGlkYXIgZGF0b3MgZGUgbG9nw61zdGljYVxyXG4vLyBCYXNhZG8gZW46IFpvZCArIHBhdHJvbmVzIGVudGVycHJpc2VcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0NIRU1BUyBERSBWQUxJREFDScOTTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGNvbnN0IGFkZHJlc3NTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgc3RyZWV0OiB6LnN0cmluZygpLm1pbigxLCAnTGEgY2FsbGUgZXMgcmVxdWVyaWRhJyksXHJcbiAgbnVtYmVyOiB6LnN0cmluZygpLm1pbigxLCAnRWwgbsO6bWVybyBlcyByZXF1ZXJpZG8nKSxcclxuICBhcGFydG1lbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBuZWlnaGJvcmhvb2Q6IHouc3RyaW5nKCkubWluKDEsICdFbCBiYXJyaW8gZXMgcmVxdWVyaWRvJyksXHJcbiAgY2l0eTogei5zdHJpbmcoKS5taW4oMSwgJ0xhIGNpdWRhZCBlcyByZXF1ZXJpZGEnKSxcclxuICBzdGF0ZTogei5zdHJpbmcoKS5taW4oMSwgJ0xhIHByb3ZpbmNpYSBlcyByZXF1ZXJpZGEnKSxcclxuICBwb3N0YWxfY29kZTogei5zdHJpbmcoKS5taW4oNCwgJ0VsIGPDs2RpZ28gcG9zdGFsIGRlYmUgdGVuZXIgYWwgbWVub3MgNCBkw61naXRvcycpLFxyXG4gIGNvdW50cnk6IHouc3RyaW5nKCkuZGVmYXVsdCgnQVInKSxcclxuICBsYXRpdHVkZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxyXG4gIGxvbmdpdHVkZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxyXG4gIHJlZmVyZW5jZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNoaXBtZW50U2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIHRyYWNraW5nX251bWJlcjogei5zdHJpbmcoKS5taW4oMSwgJ0VsIG7Dum1lcm8gZGUgdHJhY2tpbmcgZXMgcmVxdWVyaWRvJyksXHJcbiAgY291cmllcl9pZDogei5udW1iZXIoKS5taW4oMSwgJ0VsIGNvdXJpZXIgZXMgcmVxdWVyaWRvJyksXHJcbiAgc2VydmljZV90eXBlOiB6LmVudW0oWydzdGFuZGFyZCcsICdleHByZXNzJywgJ25leHRfZGF5JywgJ3NhbWVfZGF5J10pLFxyXG4gIG9yaWdpbl9hZGRyZXNzOiBhZGRyZXNzU2NoZW1hLFxyXG4gIGRlc3RpbmF0aW9uX2FkZHJlc3M6IGFkZHJlc3NTY2hlbWEsXHJcbiAgcGFja2FnZV9kZXRhaWxzOiB6Lm9iamVjdCh7XHJcbiAgICB3ZWlnaHQ6IHoubnVtYmVyKCkubWluKDAuMSwgJ0VsIHBlc28gZGViZSBzZXIgbWF5b3IgYSAwJyksXHJcbiAgICBkaW1lbnNpb25zOiB6Lm9iamVjdCh7XHJcbiAgICAgIGxlbmd0aDogei5udW1iZXIoKS5taW4oMSwgJ0VsIGxhcmdvIGRlYmUgc2VyIG1heW9yIGEgMCcpLFxyXG4gICAgICB3aWR0aDogei5udW1iZXIoKS5taW4oMSwgJ0VsIGFuY2hvIGRlYmUgc2VyIG1heW9yIGEgMCcpLFxyXG4gICAgICBoZWlnaHQ6IHoubnVtYmVyKCkubWluKDEsICdMYSBhbHR1cmEgZGViZSBzZXIgbWF5b3IgYSAwJylcclxuICAgIH0pLFxyXG4gICAgZGVjbGFyZWRfdmFsdWU6IHoubnVtYmVyKCkubWluKDAsICdFbCB2YWxvciBkZWNsYXJhZG8gZGViZSBzZXIgbWF5b3IgbyBpZ3VhbCBhIDAnKSxcclxuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1pbigxLCAnTGEgZGVzY3JpcGNpw7NuIGVzIHJlcXVlcmlkYScpXHJcbiAgfSksXHJcbiAgZXN0aW1hdGVkX2RlbGl2ZXJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc3BlY2lhbF9pbnN0cnVjdGlvbnM6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEZVTkNJT05FUyBERSBWQUxJREFDScOTTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLztcclxuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGhvbmVOdW1iZXIocGhvbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIC8vIEZvcm1hdG8gYXJnZW50aW5vOiArNTQgOSAzNTEgMTIzIDQ1NjcsICs1NCAzNTEgMTIzLTQ1NjcsIDM1MSAxMjMgNDU2NywgZXRjLlxyXG4gIC8vIExpbXBpYXIgZWwgdGVsw6lmb25vIGRlIGVzcGFjaW9zLCBndWlvbmVzIHkgcGFyw6ludGVzaXNcclxuICBjb25zdCBjbGVhblBob25lID0gcGhvbmUucmVwbGFjZSgvW1xcc1xcLVxcKFxcKV0vZywgJycpO1xyXG5cclxuICAvLyBQYXRyb25lcyBhY2VwdGFkb3M6XHJcbiAgLy8gKzU0MzUxMjM0NTY3IChjb24gY8OzZGlnbyBwYcOtcylcclxuICAvLyArNTQ5MzUxMjM0NTY3IChjb24gY8OzZGlnbyBwYcOtcyB5IDkpXHJcbiAgLy8gMzUxMjM0NTY3IChzaW4gY8OzZGlnbyBwYcOtcylcclxuICBjb25zdCBwaG9uZVJlZ2V4ID0gL14oXFwrNTQoOSk/KT9cXGR7MTB9JHxeXFxkezEwfSQvO1xyXG5cclxuICByZXR1cm4gcGhvbmVSZWdleC50ZXN0KGNsZWFuUGhvbmUpICYmIGNsZWFuUGhvbmUubGVuZ3RoID49IDEwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVETkkoZG5pOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAvLyBMaW1waWFyIGVsIEROSSBkZSBlc3BhY2lvcywgZ3Vpb25lcyB5IHB1bnRvc1xyXG4gIGNvbnN0IGNsZWFuRE5JID0gZG5pLnJlcGxhY2UoL1tcXHNcXC1cXC5dL2csICcnKTtcclxuXHJcbiAgLy8gUGF0cm9uZXMgYWNlcHRhZG9zOlxyXG4gIC8vIEROSTogOCBkw61naXRvcyAoMTIzNDU2NzgpXHJcbiAgLy8gQ1VJVDogMTEgZMOtZ2l0b3MgKDIwMTIzNDU2Nzg5KVxyXG4gIGNvbnN0IGRuaVJlZ2V4ID0gL15cXGR7OH0kLztcclxuICBjb25zdCBjdWl0UmVnZXggPSAvXlxcZHsxMX0kLztcclxuXHJcbiAgaWYgKGRuaVJlZ2V4LnRlc3QoY2xlYW5ETkkpKSB7XHJcbiAgICAvLyBWYWxpZGFyIEROSSAoOCBkw61naXRvcylcclxuICAgIHJldHVybiBjbGVhbkROSS5sZW5ndGggPT09IDggJiYgcGFyc2VJbnQoY2xlYW5ETkkpID4gMDtcclxuICB9IGVsc2UgaWYgKGN1aXRSZWdleC50ZXN0KGNsZWFuRE5JKSkge1xyXG4gICAgLy8gVmFsaWRhciBDVUlUICgxMSBkw61naXRvcykgLSB2YWxpZGFjacOzbiBiw6FzaWNhXHJcbiAgICByZXR1cm4gY2xlYW5ETkkubGVuZ3RoID09PSAxMSAmJiBwYXJzZUludChjbGVhbkROSSkgPiAwO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIC8vIEPDs2RpZ28gcG9zdGFsIGFyZ2VudGlubzogNCBkw61naXRvc1xyXG4gIGNvbnN0IHBvc3RhbENvZGVSZWdleCA9IC9eXFxkezR9JC87XHJcbiAgcmV0dXJuIHBvc3RhbENvZGVSZWdleC50ZXN0KHBvc3RhbENvZGUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUcmFja2luZ051bWJlcih0cmFja2luZ051bWJlcjogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgLy8gRm9ybWF0byBnZW5lcmFsOiBhbCBtZW5vcyA2IGNhcmFjdGVyZXMgYWxmYW51bcOpcmljb3NcclxuICBjb25zdCB0cmFja2luZ1JlZ2V4ID0gL15bQS1aMC05XXs2LH0kL2k7XHJcbiAgcmV0dXJuIHRyYWNraW5nUmVnZXgudGVzdCh0cmFja2luZ051bWJlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvb3JkaW5hdGVzKGxhdDogbnVtYmVyLCBsbmc6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoXHJcbiAgICBsYXQgPj0gLTkwICYmIGxhdCA8PSA5MCAmJlxyXG4gICAgbG5nID49IC0xODAgJiYgbG5nIDw9IDE4MFxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdlaWdodCh3ZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB3ZWlnaHQgPiAwICYmIHdlaWdodCA8PSAxMDAwOyAvLyBNw6F4aW1vIDEwMDBrZ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVEaW1lbnNpb25zKGRpbWVuc2lvbnM6IHtcclxuICBsZW5ndGg6IG51bWJlcjtcclxuICB3aWR0aDogbnVtYmVyO1xyXG4gIGhlaWdodDogbnVtYmVyO1xyXG59KTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBsZW5ndGgsIHdpZHRoLCBoZWlnaHQgfSA9IGRpbWVuc2lvbnM7XHJcbiAgcmV0dXJuIChcclxuICAgIGxlbmd0aCA+IDAgJiYgbGVuZ3RoIDw9IDIwMCAmJiAvLyBNw6F4aW1vIDIwMGNtXHJcbiAgICB3aWR0aCA+IDAgJiYgd2lkdGggPD0gMjAwICYmXHJcbiAgICBoZWlnaHQgPiAwICYmIGhlaWdodCA8PSAyMDBcclxuICApO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBWQUxJREFDSU9ORVMgREUgTkVHT0NJT1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRGVsaXZlcnlEYXRlKGRhdGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGRlbGl2ZXJ5RGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBtYXhEYXRlID0gbmV3IERhdGUoKTtcclxuICBtYXhEYXRlLnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMzApOyAvLyBNw6F4aW1vIDMwIGTDrWFzXHJcbiAgXHJcbiAgcmV0dXJuIGRlbGl2ZXJ5RGF0ZSA+PSB0b2RheSAmJiBkZWxpdmVyeURhdGUgPD0gbWF4RGF0ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2hpcHBpbmdDb3N0KGNvc3Q6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIHJldHVybiBjb3N0ID49IDAgJiYgY29zdCA8PSAxMDAwMDA7IC8vIE3DoXhpbW8gJDEwMCwwMDBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFja2FnZVZhbHVlKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcclxuICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAxMDAwMDAwOyAvLyBNw6F4aW1vICQxLDAwMCwwMDBcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0FOSVRJWkFDScOTTiBERSBEQVRPU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3RyaW5nKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBpbnB1dC50cmltKCkucmVwbGFjZSgvWzw+XS9nLCAnJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVBob25lTnVtYmVyKHBob25lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBwaG9uZS5yZXBsYWNlKC9cXEQvZywgJycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIHBvc3RhbENvZGUucmVwbGFjZSgvXFxEL2csICcnKS5zdWJzdHJpbmcoMCwgNCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVRyYWNraW5nTnVtYmVyKHRyYWNraW5nTnVtYmVyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0cmFja2luZ051bWJlci50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL1teQS1aMC05XS9nLCAnJyk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TIERFIFZBTElEQUNJw5NOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uUmVzdWx0ID0ge1xyXG4gIGlzVmFsaWQ6IGJvb2xlYW47XHJcbiAgZXJyb3JzOiBzdHJpbmdbXTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFkZHJlc3MoYWRkcmVzczogYW55KTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgdHJ5IHtcclxuICAgIGFkZHJlc3NTY2hlbWEucGFyc2UoYWRkcmVzcyk7XHJcbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcclxuICAgICAgICBlcnJvcnM6IGVycm9yLmVycm9ycy5tYXAoZXJyID0+IGVyci5tZXNzYWdlKVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yczogWydFcnJvciBkZSB2YWxpZGFjacOzbiBkZXNjb25vY2lkbyddIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTaGlwbWVudChzaGlwbWVudDogYW55KTogVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgdHJ5IHtcclxuICAgIHNoaXBtZW50U2NoZW1hLnBhcnNlKHNoaXBtZW50KTtcclxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIGVycm9yczogW10gfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4gZXJyLm1lc3NhZ2UpXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzOiBbJ0Vycm9yIGRlIHZhbGlkYWNpw7NuIGRlc2Nvbm9jaWRvJ10gfTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImFkZHJlc3NTY2hlbWEiLCJzYW5pdGl6ZVBob25lTnVtYmVyIiwic2FuaXRpemVQb3N0YWxDb2RlIiwic2FuaXRpemVTdHJpbmciLCJzYW5pdGl6ZVRyYWNraW5nTnVtYmVyIiwic2hpcG1lbnRTY2hlbWEiLCJ2YWxpZGF0ZUFkZHJlc3MiLCJ2YWxpZGF0ZUNvb3JkaW5hdGVzIiwidmFsaWRhdGVETkkiLCJ2YWxpZGF0ZURlbGl2ZXJ5RGF0ZSIsInZhbGlkYXRlRGltZW5zaW9ucyIsInZhbGlkYXRlRW1haWwiLCJ2YWxpZGF0ZVBhY2thZ2VWYWx1ZSIsInZhbGlkYXRlUGhvbmVOdW1iZXIiLCJ2YWxpZGF0ZVBvc3RhbENvZGUiLCJ2YWxpZGF0ZVNoaXBtZW50IiwidmFsaWRhdGVTaGlwcGluZ0Nvc3QiLCJ2YWxpZGF0ZVRyYWNraW5nTnVtYmVyIiwidmFsaWRhdGVXZWlnaHQiLCJ6Iiwib2JqZWN0Iiwic3RyZWV0Iiwic3RyaW5nIiwibWluIiwibnVtYmVyIiwiYXBhcnRtZW50Iiwib3B0aW9uYWwiLCJuZWlnaGJvcmhvb2QiLCJjaXR5Iiwic3RhdGUiLCJwb3N0YWxfY29kZSIsImNvdW50cnkiLCJkZWZhdWx0IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJyZWZlcmVuY2UiLCJ0cmFja2luZ19udW1iZXIiLCJjb3VyaWVyX2lkIiwic2VydmljZV90eXBlIiwiZW51bSIsIm9yaWdpbl9hZGRyZXNzIiwiZGVzdGluYXRpb25fYWRkcmVzcyIsInBhY2thZ2VfZGV0YWlscyIsIndlaWdodCIsImRpbWVuc2lvbnMiLCJsZW5ndGgiLCJ3aWR0aCIsImhlaWdodCIsImRlY2xhcmVkX3ZhbHVlIiwiZGVzY3JpcHRpb24iLCJlc3RpbWF0ZWRfZGVsaXZlcnkiLCJzcGVjaWFsX2luc3RydWN0aW9ucyIsImVtYWlsIiwiZW1haWxSZWdleCIsInRlc3QiLCJwaG9uZSIsImNsZWFuUGhvbmUiLCJyZXBsYWNlIiwicGhvbmVSZWdleCIsImRuaSIsImNsZWFuRE5JIiwiZG5pUmVnZXgiLCJjdWl0UmVnZXgiLCJwYXJzZUludCIsInBvc3RhbENvZGUiLCJwb3N0YWxDb2RlUmVnZXgiLCJ0cmFja2luZ051bWJlciIsInRyYWNraW5nUmVnZXgiLCJsYXQiLCJsbmciLCJkYXRlIiwiZGVsaXZlcnlEYXRlIiwiRGF0ZSIsInRvZGF5IiwibWF4RGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiY29zdCIsInZhbHVlIiwiaW5wdXQiLCJ0cmltIiwic3Vic3RyaW5nIiwidG9VcHBlckNhc2UiLCJhZGRyZXNzIiwicGFyc2UiLCJpc1ZhbGlkIiwiZXJyb3JzIiwiZXJyb3IiLCJab2RFcnJvciIsIm1hcCIsImVyciIsIm1lc3NhZ2UiLCJzaGlwbWVudCJdLCJtYXBwaW5ncyI6IkFBQUEsd0RBQXdEO0FBQ3hELGtDQUFrQztBQUNsQyx5REFBeUQ7QUFDekQsdUNBQXVDO0FBQ3ZDLHdEQUF3RDs7Ozs7Ozs7Ozs7O1FBUTNDQTtlQUFBQTs7UUErSUdDO2VBQUFBOztRQUlBQztlQUFBQTs7UUFSQUM7ZUFBQUE7O1FBWUFDO2VBQUFBOztRQXpJSEM7ZUFBQUE7O1FBc0pHQztlQUFBQTs7UUExRUFDO2VBQUFBOztRQWpDQUM7ZUFBQUE7O1FBNkRBQztlQUFBQTs7UUFqQkFDO2VBQUFBOztRQS9EQUM7ZUFBQUE7O1FBNkZBQztlQUFBQTs7UUF4RkFDO2VBQUFBOztRQW1DQUM7ZUFBQUE7O1FBcUdBQztlQUFBQTs7UUFwREFDO2VBQUFBOztRQTNDQUM7ZUFBQUE7O1FBYUFDO2VBQUFBOzs7cUJBdkdFO0FBTVgsTUFBTWxCLGdCQUFnQm1CLE1BQUMsQ0FBQ0MsTUFBTSxDQUFDO0lBQ3BDQyxRQUFRRixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDMUJDLFFBQVFMLE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUMxQkUsV0FBV04sTUFBQyxDQUFDRyxNQUFNLEdBQUdJLFFBQVE7SUFDOUJDLGNBQWNSLE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUNoQ0ssTUFBTVQsTUFBQyxDQUFDRyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ3hCTSxPQUFPVixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDekJPLGFBQWFYLE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUMvQlEsU0FBU1osTUFBQyxDQUFDRyxNQUFNLEdBQUdVLE9BQU8sQ0FBQztJQUM1QkMsVUFBVWQsTUFBQyxDQUFDSyxNQUFNLEdBQUdFLFFBQVE7SUFDN0JRLFdBQVdmLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRSxRQUFRO0lBQzlCUyxXQUFXaEIsTUFBQyxDQUFDRyxNQUFNLEdBQUdJLFFBQVE7QUFDaEM7QUFFTyxNQUFNckIsaUJBQWlCYyxNQUFDLENBQUNDLE1BQU0sQ0FBQztJQUNyQ2dCLGlCQUFpQmpCLE1BQUMsQ0FBQ0csTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUNuQ2MsWUFBWWxCLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRCxHQUFHLENBQUMsR0FBRztJQUM5QmUsY0FBY25CLE1BQUMsQ0FBQ29CLElBQUksQ0FBQztRQUFDO1FBQVk7UUFBVztRQUFZO0tBQVc7SUFDcEVDLGdCQUFnQnhDO0lBQ2hCeUMscUJBQXFCekM7SUFDckIwQyxpQkFBaUJ2QixNQUFDLENBQUNDLE1BQU0sQ0FBQztRQUN4QnVCLFFBQVF4QixNQUFDLENBQUNLLE1BQU0sR0FBR0QsR0FBRyxDQUFDLEtBQUs7UUFDNUJxQixZQUFZekIsTUFBQyxDQUFDQyxNQUFNLENBQUM7WUFDbkJ5QixRQUFRMUIsTUFBQyxDQUFDSyxNQUFNLEdBQUdELEdBQUcsQ0FBQyxHQUFHO1lBQzFCdUIsT0FBTzNCLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRCxHQUFHLENBQUMsR0FBRztZQUN6QndCLFFBQVE1QixNQUFDLENBQUNLLE1BQU0sR0FBR0QsR0FBRyxDQUFDLEdBQUc7UUFDNUI7UUFDQXlCLGdCQUFnQjdCLE1BQUMsQ0FBQ0ssTUFBTSxHQUFHRCxHQUFHLENBQUMsR0FBRztRQUNsQzBCLGFBQWE5QixNQUFDLENBQUNHLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDakM7SUFDQTJCLG9CQUFvQi9CLE1BQUMsQ0FBQ0csTUFBTSxHQUFHSSxRQUFRO0lBQ3ZDeUIsc0JBQXNCaEMsTUFBQyxDQUFDRyxNQUFNLEdBQUdJLFFBQVE7QUFDM0M7QUFNTyxTQUFTZixjQUFjeUMsS0FBYTtJQUN6QyxNQUFNQyxhQUFhO0lBQ25CLE9BQU9BLFdBQVdDLElBQUksQ0FBQ0Y7QUFDekI7QUFFTyxTQUFTdkMsb0JBQW9CMEMsS0FBYTtJQUMvQyw4RUFBOEU7SUFDOUUsd0RBQXdEO0lBQ3hELE1BQU1DLGFBQWFELE1BQU1FLE9BQU8sQ0FBQyxlQUFlO0lBRWhELHNCQUFzQjtJQUN0QixpQ0FBaUM7SUFDakMsc0NBQXNDO0lBQ3RDLDhCQUE4QjtJQUM5QixNQUFNQyxhQUFhO0lBRW5CLE9BQU9BLFdBQVdKLElBQUksQ0FBQ0UsZUFBZUEsV0FBV1gsTUFBTSxJQUFJO0FBQzdEO0FBRU8sU0FBU3JDLFlBQVltRCxHQUFXO0lBQ3JDLCtDQUErQztJQUMvQyxNQUFNQyxXQUFXRCxJQUFJRixPQUFPLENBQUMsYUFBYTtJQUUxQyxzQkFBc0I7SUFDdEIsNEJBQTRCO0lBQzVCLGlDQUFpQztJQUNqQyxNQUFNSSxXQUFXO0lBQ2pCLE1BQU1DLFlBQVk7SUFFbEIsSUFBSUQsU0FBU1AsSUFBSSxDQUFDTSxXQUFXO1FBQzNCLDBCQUEwQjtRQUMxQixPQUFPQSxTQUFTZixNQUFNLEtBQUssS0FBS2tCLFNBQVNILFlBQVk7SUFDdkQsT0FBTyxJQUFJRSxVQUFVUixJQUFJLENBQUNNLFdBQVc7UUFDbkMsZ0RBQWdEO1FBQ2hELE9BQU9BLFNBQVNmLE1BQU0sS0FBSyxNQUFNa0IsU0FBU0gsWUFBWTtJQUN4RDtJQUVBLE9BQU87QUFDVDtBQUVPLFNBQVM5QyxtQkFBbUJrRCxVQUFrQjtJQUNuRCxxQ0FBcUM7SUFDckMsTUFBTUMsa0JBQWtCO0lBQ3hCLE9BQU9BLGdCQUFnQlgsSUFBSSxDQUFDVTtBQUM5QjtBQUVPLFNBQVMvQyx1QkFBdUJpRCxjQUFzQjtJQUMzRCx1REFBdUQ7SUFDdkQsTUFBTUMsZ0JBQWdCO0lBQ3RCLE9BQU9BLGNBQWNiLElBQUksQ0FBQ1k7QUFDNUI7QUFFTyxTQUFTM0Qsb0JBQW9CNkQsR0FBVyxFQUFFQyxHQUFXO0lBQzFELE9BQ0VELE9BQU8sQ0FBQyxNQUFNQSxPQUFPLE1BQ3JCQyxPQUFPLENBQUMsT0FBT0EsT0FBTztBQUUxQjtBQUVPLFNBQVNuRCxlQUFleUIsTUFBYztJQUMzQyxPQUFPQSxTQUFTLEtBQUtBLFVBQVUsTUFBTSxnQkFBZ0I7QUFDdkQ7QUFFTyxTQUFTakMsbUJBQW1Ca0MsVUFJbEM7SUFDQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBR0g7SUFDbEMsT0FDRUMsU0FBUyxLQUFLQSxVQUFVLE9BQU8sZUFBZTtJQUM5Q0MsUUFBUSxLQUFLQSxTQUFTLE9BQ3RCQyxTQUFTLEtBQUtBLFVBQVU7QUFFNUI7QUFNTyxTQUFTdEMscUJBQXFCNkQsSUFBWTtJQUMvQyxNQUFNQyxlQUFlLElBQUlDLEtBQUtGO0lBQzlCLE1BQU1HLFFBQVEsSUFBSUQ7SUFDbEIsTUFBTUUsVUFBVSxJQUFJRjtJQUNwQkUsUUFBUUMsT0FBTyxDQUFDRixNQUFNRyxPQUFPLEtBQUssS0FBSyxpQkFBaUI7SUFFeEQsT0FBT0wsZ0JBQWdCRSxTQUFTRixnQkFBZ0JHO0FBQ2xEO0FBRU8sU0FBUzFELHFCQUFxQjZELElBQVk7SUFDL0MsT0FBT0EsUUFBUSxLQUFLQSxRQUFRLFFBQVEsa0JBQWtCO0FBQ3hEO0FBRU8sU0FBU2pFLHFCQUFxQmtFLEtBQWE7SUFDaEQsT0FBT0EsU0FBUyxLQUFLQSxTQUFTLFNBQVMsb0JBQW9CO0FBQzdEO0FBTU8sU0FBUzNFLGVBQWU0RSxLQUFhO0lBQzFDLE9BQU9BLE1BQU1DLElBQUksR0FBR3ZCLE9BQU8sQ0FBQyxTQUFTO0FBQ3ZDO0FBRU8sU0FBU3hELG9CQUFvQnNELEtBQWE7SUFDL0MsT0FBT0EsTUFBTUUsT0FBTyxDQUFDLE9BQU87QUFDOUI7QUFFTyxTQUFTdkQsbUJBQW1COEQsVUFBa0I7SUFDbkQsT0FBT0EsV0FBV1AsT0FBTyxDQUFDLE9BQU8sSUFBSXdCLFNBQVMsQ0FBQyxHQUFHO0FBQ3BEO0FBRU8sU0FBUzdFLHVCQUF1QjhELGNBQXNCO0lBQzNELE9BQU9BLGVBQWVnQixXQUFXLEdBQUd6QixPQUFPLENBQUMsY0FBYztBQUM1RDtBQVdPLFNBQVNuRCxnQkFBZ0I2RSxPQUFZO0lBQzFDLElBQUk7UUFDRm5GLGNBQWNvRixLQUFLLENBQUNEO1FBQ3BCLE9BQU87WUFBRUUsU0FBUztZQUFNQyxRQUFRLEVBQUU7UUFBQztJQUNyQyxFQUFFLE9BQU9DLE9BQU87UUFDZCxJQUFJQSxpQkFBaUJwRSxNQUFDLENBQUNxRSxRQUFRLEVBQUU7WUFDL0IsT0FBTztnQkFDTEgsU0FBUztnQkFDVEMsUUFBUUMsTUFBTUQsTUFBTSxDQUFDRyxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlDLE9BQU87WUFDN0M7UUFDRjtRQUNBLE9BQU87WUFBRU4sU0FBUztZQUFPQyxRQUFRO2dCQUFDO2FBQWtDO1FBQUM7SUFDdkU7QUFDRjtBQUVPLFNBQVN2RSxpQkFBaUI2RSxRQUFhO0lBQzVDLElBQUk7UUFDRnZGLGVBQWUrRSxLQUFLLENBQUNRO1FBQ3JCLE9BQU87WUFBRVAsU0FBUztZQUFNQyxRQUFRLEVBQUU7UUFBQztJQUNyQyxFQUFFLE9BQU9DLE9BQU87UUFDZCxJQUFJQSxpQkFBaUJwRSxNQUFDLENBQUNxRSxRQUFRLEVBQUU7WUFDL0IsT0FBTztnQkFDTEgsU0FBUztnQkFDVEMsUUFBUUMsTUFBTUQsTUFBTSxDQUFDRyxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlDLE9BQU87WUFDN0M7UUFDRjtRQUNBLE9BQU87WUFBRU4sU0FBUztZQUFPQyxRQUFRO2dCQUFDO2FBQWtDO1FBQUM7SUFDdkU7QUFDRiJ9