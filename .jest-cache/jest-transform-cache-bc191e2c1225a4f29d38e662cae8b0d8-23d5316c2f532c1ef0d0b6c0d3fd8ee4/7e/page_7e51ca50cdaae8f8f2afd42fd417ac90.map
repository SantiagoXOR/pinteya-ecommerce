{"version":3,"names":["cov_s82s9q49","actualCoverage","s","default","f","_default","dynamic","CartPage","router","_navigation","useRouter","cartItems","_store","useAppSelector","_cartslice","selectCartItems","_react","useEffect","isFromCheckout","document","referrer","includes","hasCheckoutSession","sessionStorage","getItem","console","log","cartItemsLength","length","b","push","_jsxruntime","jsx","className","jsxs","onClick"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\(site)\\(pages)\\cart\\page.tsx"],"sourcesContent":["\"use client\";\r\n\r\n\n// Forzar renderizado din√°mico para evitar problemas con prerendering\nexport const dynamic = 'force-dynamic';\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAppSelector } from \"@/redux/store\";\r\nimport { selectCartItems } from \"@/redux/features/cart-slice\";\r\n\r\nimport { Metadata } from \"next\";\r\n\r\nconst CartPage = () => {\r\n  const router = useRouter();\r\n  const cartItems = useAppSelector(selectCartItems);\r\n\r\n  // ‚úÖ CORREGIDO: Solo redirigir si el carrito est√° vac√≠o Y no venimos de un checkout\r\n  useEffect(() => {\r\n    // Verificar si venimos de un checkout (referrer contiene /checkout)\r\n    const isFromCheckout = document.referrer.includes('/checkout');\r\n\r\n    // Tambi√©n verificar si hay datos de checkout en sessionStorage\r\n    const hasCheckoutSession = sessionStorage.getItem('checkout-in-progress') === 'true';\r\n\r\n    console.log('üõí Cart Page - Verificando redirecci√≥n:', {\r\n      cartItemsLength: cartItems.length,\r\n      isFromCheckout,\r\n      hasCheckoutSession,\r\n      referrer: document.referrer\r\n    });\r\n\r\n    if (cartItems.length === 0 && !isFromCheckout && !hasCheckoutSession) {\r\n      // Solo redirigir si el carrito est√° vac√≠o y NO venimos de checkout\r\n      console.log('üîÑ Cart Page - Redirigiendo a home porque carrito est√° vac√≠o');\r\n      router.push(\"/\");\r\n    }\r\n  }, [cartItems.length, router]);\r\n\r\n  // Si el carrito est√° vac√≠o y venimos de checkout, mostrar mensaje apropiado\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center p-4\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Carrito Vac√≠o</h1>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Tu carrito est√° vac√≠o. Esto puede ser normal si acabas de completar una compra.\r\n          </p>\r\n          <button\r\n            onClick={() => router.push(\"/\")}\r\n            className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Volver al Inicio\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si hay items en el carrito, redirigir al home donde est√° el CartSidebarModal\r\n  router.push(\"/\");\r\n\r\n  return null;\r\n};\r\n\r\nexport default CartPage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}