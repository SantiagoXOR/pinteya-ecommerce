{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Checkout\\Coupon.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\ninterface CouponProps {\r\n  onCouponApply: (couponCode: string, discount: number) => void;\r\n  appliedCoupon?: {\r\n    code: string;\r\n    discount: number;\r\n    type: 'percentage' | 'fixed';\r\n  } | null;\r\n  isLoading?: boolean;\r\n}\r\n\r\n// Cupones de ejemplo para testing\r\nconst AVAILABLE_COUPONS = {\r\n  'PINTEYA10': { discount: 10, type: 'percentage' as const, description: '10% de descuento' },\r\n  'BIENVENIDO': { discount: 5000, type: 'fixed' as const, description: '$5000 de descuento' },\r\n  'ENVIOGRATIS': { discount: 1500, type: 'fixed' as const, description: 'Envío gratis' },\r\n  'FERRETERIA15': { discount: 15, type: 'percentage' as const, description: '15% en productos de ferretería' },\r\n};\r\n\r\nconst Coupon: React.FC<CouponProps> = ({ onCouponApply, appliedCoupon, isLoading = false }) => {\r\n  const [couponCode, setCouponCode] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isApplying, setIsApplying] = useState(false);\r\n\r\n  const handleApplyCoupon = async () => {\r\n    if (!couponCode.trim()) {\r\n      setError('Ingresa un código de cupón');\r\n      return;\r\n    }\r\n\r\n    setIsApplying(true);\r\n    setError('');\r\n\r\n    // Simular delay de API\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n    const upperCouponCode = couponCode.toUpperCase();\r\n    const coupon = AVAILABLE_COUPONS[upperCouponCode as keyof typeof AVAILABLE_COUPONS];\r\n\r\n    if (coupon) {\r\n      onCouponApply(upperCouponCode, coupon.discount);\r\n      setCouponCode('');\r\n      setError('');\r\n    } else {\r\n      setError('Código de cupón inválido');\r\n    }\r\n\r\n    setIsApplying(false);\r\n  };\r\n\r\n  const handleRemoveCoupon = () => {\r\n    onCouponApply('', 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white shadow-1 rounded-[10px] mt-7.5\">\r\n      <div className=\"border-b border-gray-3 py-5 px-4 sm:px-8.5\">\r\n        <h3 className=\"font-medium text-xl text-dark\">Código de Descuento</h3>\r\n      </div>\r\n\r\n      <div className=\"py-8 px-4 sm:px-8.5\">\r\n        {appliedCoupon ? (\r\n          // Cupón aplicado\r\n          <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"font-semibold text-green-800\">✅ Cupón aplicado: {appliedCoupon.code}</p>\r\n                <p className=\"text-sm text-green-600\">\r\n                  {appliedCoupon.type === 'percentage'\r\n                    ? `${appliedCoupon.discount}% de descuento`\r\n                    : `$${appliedCoupon.discount.toLocaleString()} de descuento`\r\n                  }\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={handleRemoveCoupon}\r\n                className=\"text-red-600 hover:text-red-800 font-medium text-sm\"\r\n              >\r\n                Remover\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // Formulario de cupón\r\n          <>\r\n            <div className=\"flex flex-col sm:flex-row gap-4\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"coupon\"\r\n                id=\"coupon\"\r\n                placeholder=\"Ingresa tu código de descuento\"\r\n                value={couponCode}\r\n                onChange={(e) => setCouponCode(e.target.value)}\r\n                onKeyPress={(e) => e.key === 'Enter' && handleApplyCoupon()}\r\n                disabled={isLoading || isApplying}\r\n                className={`rounded-md border bg-gray-1 placeholder:text-dark-5 w-full py-2.5 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20 ${\r\n                  error ? 'border-red-500' : 'border-gray-3'\r\n                }`}\r\n              />\r\n\r\n              <button\r\n                onClick={handleApplyCoupon}\r\n                disabled={isLoading || isApplying || !couponCode.trim()}\r\n                className={`flex justify-center font-medium text-white py-2.5 px-6 rounded-md ease-out duration-200 ${\r\n                  isLoading || isApplying || !couponCode.trim()\r\n                    ? 'bg-gray-400 cursor-not-allowed'\r\n                    : 'bg-tahiti-gold-500 hover:bg-tahiti-gold-700'\r\n                }`}\r\n              >\r\n                {isApplying ? (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n                    Aplicando...\r\n                  </div>\r\n                ) : (\r\n                  'Aplicar'\r\n                )}\r\n              </button>\r\n            </div>\r\n\r\n            {error && (\r\n              <p className=\"text-red-500 text-sm mt-2\">\r\n                {error instanceof Error ? error.message : typeof error === 'string' ? error : 'Error desconocido'}\r\n              </p>\r\n            )}\r\n\r\n            {/* Cupones disponibles para testing */}\r\n            <div className=\"mt-4 p-3 bg-tahiti-gold-50 border border-tahiti-gold-200 rounded-lg\">\r\n              <p className=\"text-sm font-medium text-tahiti-gold-800 mb-2\">Cupones disponibles para testing:</p>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs\">\r\n                {Object.entries(AVAILABLE_COUPONS).map(([code, coupon]) => (\r\n                  <div key={code} className=\"flex justify-between\">\r\n                    <span className=\"font-mono bg-white px-2 py-1 rounded\">{code}</span>\r\n                    <span className=\"text-tahiti-gold-600\">{coupon.description}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Coupon;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["AVAILABLE_COUPONS","discount","type","description","Coupon","onCouponApply","appliedCoupon","isLoading","couponCode","setCouponCode","useState","error","setError","isApplying","setIsApplying","handleApplyCoupon","trim","Promise","resolve","setTimeout","upperCouponCode","toUpperCase","coupon","handleRemoveCoupon","div","className","h3","p","code","toLocaleString","button","onClick","input","name","id","placeholder","value","onChange","e","target","onKeyPress","key","disabled","Error","message","Object","entries","map","span"],"mappings":"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"}