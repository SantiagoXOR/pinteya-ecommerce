d6b676fed2a3dc3835f6fa9c26561c05
// ===================================
// PINTEYA E-COMMERCE - CART HOOK WITH CLERK INTEGRATION
// ===================================
"use strict";

/* istanbul ignore next */
function cov_drz6itsrj() {
  var path = "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\useCartWithClerk.ts";
  var hash = "0f3cda0ab91b0c5bc377dae31cf9e8123f0163cd";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\useCartWithClerk.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 7,
          column: 3
        }
      },
      "1": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "2": {
        start: {
          line: 9,
          column: 24
        },
        end: {
          line: 12,
          column: 7
        }
      },
      "3": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 21,
          column: 3
        }
      },
      "4": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 23
        }
      },
      "5": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 32
        }
      },
      "6": {
        start: {
          line: 22,
          column: 15
        },
        end: {
          line: 22,
          column: 31
        }
      },
      "7": {
        start: {
          line: 23,
          column: 17
        },
        end: {
          line: 23,
          column: 37
        }
      },
      "8": {
        start: {
          line: 24,
          column: 15
        },
        end: {
          line: 24,
          column: 40
        }
      },
      "9": {
        start: {
          line: 25,
          column: 19
        },
        end: {
          line: 25,
          column: 58
        }
      },
      "10": {
        start: {
          line: 26,
          column: 25
        },
        end: {
          line: 26,
          column: 71
        }
      },
      "11": {
        start: {
          line: 27,
          column: 25
        },
        end: {
          line: 120,
          column: 1
        }
      },
      "12": {
        start: {
          line: 28,
          column: 31
        },
        end: {
          line: 28,
          column: 54
        }
      },
      "13": {
        start: {
          line: 29,
          column: 21
        },
        end: {
          line: 29,
          column: 49
        }
      },
      "14": {
        start: {
          line: 30,
          column: 22
        },
        end: {
          line: 30,
          column: 76
        }
      },
      "15": {
        start: {
          line: 32,
          column: 24
        },
        end: {
          line: 55,
          column: 6
        }
      },
      "16": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 52,
          column: 9
        }
      },
      "17": {
        start: {
          line: 35,
          column: 35
        },
        end: {
          line: 35,
          column: 78
        }
      },
      "18": {
        start: {
          line: 36,
          column: 12
        },
        end: {
          line: 43,
          column: 13
        }
      },
      "19": {
        start: {
          line: 38,
          column: 41
        },
        end: {
          line: 38,
          column: 113
        }
      },
      "20": {
        start: {
          line: 39,
          column: 16
        },
        end: {
          line: 42,
          column: 17
        }
      },
      "21": {
        start: {
          line: 41,
          column: 20
        },
        end: {
          line: 41,
          column: 65
        }
      },
      "22": {
        start: {
          line: 45,
          column: 34
        },
        end: {
          line: 45,
          column: 82
        }
      },
      "23": {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 49,
          column: 13
        }
      },
      "24": {
        start: {
          line: 48,
          column: 16
        },
        end: {
          line: 48,
          column: 69
        }
      },
      "25": {
        start: {
          line: 51,
          column: 12
        },
        end: {
          line: 51,
          column: 65
        }
      },
      "26": {
        start: {
          line: 57,
          column: 21
        },
        end: {
          line: 67,
          column: 6
        }
      },
      "27": {
        start: {
          line: 58,
          column: 8
        },
        end: {
          line: 64,
          column: 9
        }
      },
      "28": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 61,
          column: 13
        }
      },
      "29": {
        start: {
          line: 60,
          column: 16
        },
        end: {
          line: 60,
          column: 76
        }
      },
      "30": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 63,
          column: 60
        }
      },
      "31": {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 88,
          column: 7
        }
      },
      "32": {
        start: {
          line: 70,
          column: 8
        },
        end: {
          line: 72,
          column: 9
        }
      },
      "33": {
        start: {
          line: 71,
          column: 12
        },
        end: {
          line: 71,
          column: 19
        }
      },
      "34": {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 82,
          column: 9
        }
      },
      "35": {
        start: {
          line: 75,
          column: 12
        },
        end: {
          line: 75,
          column: 33
        }
      },
      "36": {
        start: {
          line: 78,
          column: 35
        },
        end: {
          line: 78,
          column: 78
        }
      },
      "37": {
        start: {
          line: 79,
          column: 12
        },
        end: {
          line: 81,
          column: 13
        }
      },
      "38": {
        start: {
          line: 80,
          column: 16
        },
        end: {
          line: 80,
          column: 70
        }
      },
      "39": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 104,
          column: 7
        }
      },
      "40": {
        start: {
          line: 91,
          column: 8
        },
        end: {
          line: 93,
          column: 9
        }
      },
      "41": {
        start: {
          line: 92,
          column: 12
        },
        end: {
          line: 92,
          column: 19
        }
      },
      "42": {
        start: {
          line: 95,
          column: 26
        },
        end: {
          line: 97,
          column: 16
        }
      },
      "43": {
        start: {
          line: 96,
          column: 12
        },
        end: {
          line: 96,
          column: 30
        }
      },
      "44": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 98,
          column: 43
        }
      },
      "45": {
        start: {
          line: 98,
          column: 19
        },
        end: {
          line: 98,
          column: 42
        }
      },
      "46": {
        start: {
          line: 106,
          column: 26
        },
        end: {
          line: 111,
          column: 6
        }
      },
      "47": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 107,
          column: 59
        }
      },
      "48": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 108,
          column: 53
        }
      },
      "49": {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 119,
          column: 6
        }
      },
      "50": {
        start: {
          line: 121,
          column: 16
        },
        end: {
          line: 128,
          column: 1
        }
      },
      "51": {
        start: {
          line: 122,
          column: 22
        },
        end: {
          line: 122,
          column: 76
        }
      },
      "52": {
        start: {
          line: 123,
          column: 21
        },
        end: {
          line: 123,
          column: 49
        }
      },
      "53": {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 127,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 8,
            column: 9
          },
          end: {
            line: 8,
            column: 16
          }
        },
        loc: {
          start: {
            line: 8,
            column: 30
          },
          end: {
            line: 13,
            column: 1
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 19
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 28
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 27,
            column: 25
          },
          end: {
            line: 27,
            column: 26
          }
        },
        loc: {
          start: {
            line: 27,
            column: 29
          },
          end: {
            line: 120,
            column: 1
          }
        },
        line: 27
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 32,
            column: 48
          },
          end: {
            line: 32,
            column: 49
          }
        },
        loc: {
          start: {
            line: 32,
            column: 64
          },
          end: {
            line: 53,
            column: 5
          }
        },
        line: 32
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 57,
            column: 45
          },
          end: {
            line: 57,
            column: 46
          }
        },
        loc: {
          start: {
            line: 57,
            column: 61
          },
          end: {
            line: 65,
            column: 5
          }
        },
        line: 57
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 69,
            column: 26
          },
          end: {
            line: 69,
            column: 27
          }
        },
        loc: {
          start: {
            line: 69,
            column: 30
          },
          end: {
            line: 83,
            column: 5
          }
        },
        line: 69
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 90,
            column: 26
          },
          end: {
            line: 90,
            column: 27
          }
        },
        loc: {
          start: {
            line: 90,
            column: 30
          },
          end: {
            line: 99,
            column: 5
          }
        },
        line: 90
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 95,
            column: 37
          },
          end: {
            line: 95,
            column: 38
          }
        },
        loc: {
          start: {
            line: 95,
            column: 41
          },
          end: {
            line: 97,
            column: 9
          }
        },
        line: 95
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 98,
            column: 15
          },
          end: {
            line: 98,
            column: 16
          }
        },
        loc: {
          start: {
            line: 98,
            column: 19
          },
          end: {
            line: 98,
            column: 42
          }
        },
        line: 98
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 106,
            column: 50
          },
          end: {
            line: 106,
            column: 51
          }
        },
        loc: {
          start: {
            line: 106,
            column: 54
          },
          end: {
            line: 109,
            column: 5
          }
        },
        line: 106
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 121,
            column: 16
          },
          end: {
            line: 121,
            column: 17
          }
        },
        loc: {
          start: {
            line: 121,
            column: 20
          },
          end: {
            line: 128,
            column: 1
          }
        },
        line: 121
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 36,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 36,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 36
      },
      "1": {
        loc: {
          start: {
            line: 39,
            column: 16
          },
          end: {
            line: 42,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 39,
            column: 16
          },
          end: {
            line: 42,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 39
      },
      "2": {
        loc: {
          start: {
            line: 47,
            column: 12
          },
          end: {
            line: 49,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 47,
            column: 12
          },
          end: {
            line: 49,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 47
      },
      "3": {
        loc: {
          start: {
            line: 59,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "4": {
        loc: {
          start: {
            line: 70,
            column: 8
          },
          end: {
            line: 72,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 70,
            column: 8
          },
          end: {
            line: 72,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 70
      },
      "5": {
        loc: {
          start: {
            line: 73,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 73,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        }, {
          start: {
            line: 76,
            column: 15
          },
          end: {
            line: 82,
            column: 9
          }
        }],
        line: 73
      },
      "6": {
        loc: {
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 81,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 81,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 79
      },
      "7": {
        loc: {
          start: {
            line: 91,
            column: 8
          },
          end: {
            line: 93,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 91,
            column: 8
          },
          end: {
            line: 93,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 91
      },
      "8": {
        loc: {
          start: {
            line: 91,
            column: 12
          },
          end: {
            line: 91,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 91,
            column: 12
          },
          end: {
            line: 91,
            column: 21
          }
        }, {
          start: {
            line: 91,
            column: 25
          },
          end: {
            line: 91,
            column: 30
          }
        }],
        line: 91
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\hooks\\useCartWithClerk.ts"],
      sourcesContent: ["// ===================================\r\n// PINTEYA E-COMMERCE - CART HOOK WITH CLERK INTEGRATION\r\n// ===================================\r\n\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useAuth } from './useAuth';\r\nimport { useAppDispatch, useAppSelector } from '@/redux/store';\r\nimport { \r\n  selectCartItems, \r\n  hydrateCart, \r\n  replaceCart,\r\n  removeAllItemsFromCart \r\n} from '@/redux/features/cart-slice';\r\nimport { \r\n  loadCartFromStorage, \r\n  clearCartFromStorage,\r\n  migrateTemporaryCart,\r\n  loadUserCart,\r\n  saveUserCart \r\n} from '@/redux/middleware/cartPersistence';\r\n\r\n// Hook personalizado para manejar el carrito con integraci\xF3n NextAuth\r\nexport const useCartWithClerk = () => {\r\n  const { user, isLoaded } = useAuth();\r\n  const dispatch = useAppDispatch();\r\n  const cartItems = useAppSelector(selectCartItems);\r\n\r\n  // Funci\xF3n para migrar carrito temporal a usuario autenticado\r\n  const migrateCart = useCallback(async (userId: string) => {\r\n    try {\r\n      // Obtener items del localStorage\r\n      const temporaryItems = loadCartFromStorage();\r\n      \r\n      if (temporaryItems.length > 0) {\r\n        \r\n        // Migrar items al backend (implementaci\xF3n futura)\r\n        const migrationSuccess = await migrateTemporaryCart(temporaryItems, userId);\r\n        \r\n        if (migrationSuccess) {\r\n          // Limpiar localStorage despu\xE9s de migraci\xF3n exitosa\r\n          clearCartFromStorage();\r\n        }\r\n      }\r\n      \r\n      // Cargar carrito del usuario desde el backend (implementaci\xF3n futura)\r\n      const userCartItems = await loadUserCart(userId);\r\n      \r\n      // Si hay items del usuario, reemplazar el carrito actual\r\n      if (userCartItems.length > 0) {\r\n        dispatch(replaceCart(userCartItems));\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error during cart migration:', error);\r\n    }\r\n  }, [dispatch]);\r\n\r\n  // Funci\xF3n para guardar carrito del usuario autenticado\r\n  const saveCart = useCallback(async (userId: string) => {\r\n    try {\r\n      if (cartItems.length > 0) {\r\n        await saveUserCart(userId, cartItems);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving user cart:', error);\r\n    }\r\n  }, [cartItems]);\r\n\r\n  // Efecto para manejar cambios en el estado de autenticaci\xF3n\r\n  useEffect(() => {\r\n    if (!isLoaded) {return;}\r\n\r\n    if (user) {\r\n      // Usuario autenticado - migrar carrito temporal si existe\r\n      migrateCart(user.id);\r\n    } else {\r\n      // Usuario no autenticado - cargar desde localStorage\r\n      const persistedItems = loadCartFromStorage();\r\n      if (persistedItems.length > 0) {\r\n        dispatch(hydrateCart(persistedItems));\r\n      }\r\n    }\r\n  }, [user, isLoaded, dispatch, migrateCart]);\r\n\r\n  // Efecto para guardar carrito de usuario autenticado cuando cambie\r\n  useEffect(() => {\r\n    if (!isLoaded || !user) {return;}\r\n\r\n    // Debounce para evitar guardados excesivos\r\n    const timeoutId = setTimeout(() => {\r\n      saveCart(user.id);\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [cartItems, user, isLoaded, saveCart]);\r\n\r\n  // Funci\xF3n para limpiar carrito al cerrar sesi\xF3n\r\n  const handleSignOut = useCallback(() => {\r\n    dispatch(removeAllItemsFromCart());\r\n    clearCartFromStorage();\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    isAuthenticated: !!user,\r\n    userId: user?.id,\r\n    cartItems,\r\n    migrateCart,\r\n    saveCart,\r\n    handleSignOut,\r\n  };\r\n};\r\n\r\n// Hook simplificado para componentes que solo necesitan el estado del carrito\r\nexport const useCart = () => {\r\n  const cartItems = useAppSelector(selectCartItems);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return {\r\n    cartItems,\r\n    dispatch,\r\n  };\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      names: ["useCart", "useCartWithClerk", "user", "isLoaded", "useAuth", "dispatch", "useAppDispatch", "cartItems", "useAppSelector", "selectCartItems", "migrateCart", "useCallback", "userId", "temporaryItems", "loadCartFromStorage", "length", "migrationSuccess", "migrateTemporaryCart", "clearCartFromStorage", "userCartItems", "loadUserCart", "replaceCart", "error", "console", "saveCart", "saveUserCart", "useEffect", "id", "persistedItems", "hydrateCart", "timeoutId", "setTimeout", "clearTimeout", "handleSignOut", "removeAllItemsFromCart", "isAuthenticated"],
      mappings: "AAAA,sCAAsC;AACtC,wDAAwD;AACxD,sCAAsC;;;;;;;;;;;;QA+GzBA;eAAAA;;QA3FAC;eAAAA;;;uBAlB0B;yBACf;uBACuB;2BAMxC;iCAOA;AAGA,MAAMA,mBAAmB;IAC9B,MAAM,EAAEC,IAAI,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,gBAAO;IAClC,MAAMC,WAAWC,IAAAA,qBAAc;IAC/B,MAAMC,YAAYC,IAAAA,qBAAc,EAACC,0BAAe;IAEhD,6DAA6D;IAC7D,MAAMC,cAAcC,IAAAA,kBAAW,EAAC,OAAOC;QACrC,IAAI;YACF,iCAAiC;YACjC,MAAMC,iBAAiBC,IAAAA,oCAAmB;YAE1C,IAAID,eAAeE,MAAM,GAAG,GAAG;gBAE7B,kDAAkD;gBAClD,MAAMC,mBAAmB,MAAMC,IAAAA,qCAAoB,EAACJ,gBAAgBD;gBAEpE,IAAII,kBAAkB;oBACpB,oDAAoD;oBACpDE,IAAAA,qCAAoB;gBACtB;YACF;YAEA,sEAAsE;YACtE,MAAMC,gBAAgB,MAAMC,IAAAA,6BAAY,EAACR;YAEzC,yDAAyD;YACzD,IAAIO,cAAcJ,MAAM,GAAG,GAAG;gBAC5BV,SAASgB,IAAAA,sBAAW,EAACF;YACvB;QAEF,EAAE,OAAOG,OAAO;YACdC,QAAQD,KAAK,CAAC,gCAAgCA;QAChD;IACF,GAAG;QAACjB;KAAS;IAEb,uDAAuD;IACvD,MAAMmB,WAAWb,IAAAA,kBAAW,EAAC,OAAOC;QAClC,IAAI;YACF,IAAIL,UAAUQ,MAAM,GAAG,GAAG;gBACxB,MAAMU,IAAAA,6BAAY,EAACb,QAAQL;YAC7B;QACF,EAAE,OAAOe,OAAO;YACdC,QAAQD,KAAK,CAAC,2BAA2BA;QAC3C;IACF,GAAG;QAACf;KAAU;IAEd,4DAA4D;IAC5DmB,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACvB,UAAU;YAAC;QAAO;QAEvB,IAAID,MAAM;YACR,0DAA0D;YAC1DQ,YAAYR,KAAKyB,EAAE;QACrB,OAAO;YACL,qDAAqD;YACrD,MAAMC,iBAAiBd,IAAAA,oCAAmB;YAC1C,IAAIc,eAAeb,MAAM,GAAG,GAAG;gBAC7BV,SAASwB,IAAAA,sBAAW,EAACD;YACvB;QACF;IACF,GAAG;QAAC1B;QAAMC;QAAUE;QAAUK;KAAY;IAE1C,mEAAmE;IACnEgB,IAAAA,gBAAS,EAAC;QACR,IAAI,CAACvB,YAAY,CAACD,MAAM;YAAC;QAAO;QAEhC,2CAA2C;QAC3C,MAAM4B,YAAYC,WAAW;YAC3BP,SAAStB,KAAKyB,EAAE;QAClB,GAAG;QAEH,OAAO,IAAMK,aAAaF;IAC5B,GAAG;QAACvB;QAAWL;QAAMC;QAAUqB;KAAS;IAExC,gDAAgD;IAChD,MAAMS,gBAAgBtB,IAAAA,kBAAW,EAAC;QAChCN,SAAS6B,IAAAA,iCAAsB;QAC/BhB,IAAAA,qCAAoB;IACtB,GAAG;QAACb;KAAS;IAEb,OAAO;QACL8B,iBAAiB,CAAC,CAACjC;QACnBU,QAAQV,MAAMyB;QACdpB;QACAG;QACAc;QACAS;IACF;AACF;AAGO,MAAMjC,UAAU;IACrB,MAAMO,YAAYC,IAAAA,qBAAc,EAACC,0BAAe;IAChD,MAAMJ,WAAWC,IAAAA,qBAAc;IAE/B,OAAO;QACLC;QACAF;IACF;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "0f3cda0ab91b0c5bc377dae31cf9e8123f0163cd"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_drz6itsrj = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_drz6itsrj();
cov_drz6itsrj().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_drz6itsrj().f[0]++;
  cov_drz6itsrj().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_drz6itsrj().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_drz6itsrj().s[3]++;
_export(exports, {
  get useCart() {
    /* istanbul ignore next */
    cov_drz6itsrj().f[1]++;
    cov_drz6itsrj().s[4]++;
    return useCart;
  },
  get useCartWithClerk() {
    /* istanbul ignore next */
    cov_drz6itsrj().f[2]++;
    cov_drz6itsrj().s[5]++;
    return useCartWithClerk;
  }
});
const _react =
/* istanbul ignore next */
(cov_drz6itsrj().s[6]++, require("react"));
const _useAuth =
/* istanbul ignore next */
(cov_drz6itsrj().s[7]++, require("./useAuth"));
const _store =
/* istanbul ignore next */
(cov_drz6itsrj().s[8]++, require("../redux/store"));
const _cartslice =
/* istanbul ignore next */
(cov_drz6itsrj().s[9]++, require("../redux/features/cart-slice"));
const _cartPersistence =
/* istanbul ignore next */
(cov_drz6itsrj().s[10]++, require("../redux/middleware/cartPersistence"));
/* istanbul ignore next */
cov_drz6itsrj().s[11]++;
const useCartWithClerk = () => {
  /* istanbul ignore next */
  cov_drz6itsrj().f[3]++;
  const {
    user,
    isLoaded
  } =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[12]++, (0, _useAuth.useAuth)());
  const dispatch =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[13]++, (0, _store.useAppDispatch)());
  const cartItems =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[14]++, (0, _store.useAppSelector)(_cartslice.selectCartItems));
  // Función para migrar carrito temporal a usuario autenticado
  const migrateCart =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[15]++, (0, _react.useCallback)(async userId => {
    /* istanbul ignore next */
    cov_drz6itsrj().f[4]++;
    cov_drz6itsrj().s[16]++;
    try {
      // Obtener items del localStorage
      const temporaryItems =
      /* istanbul ignore next */
      (cov_drz6itsrj().s[17]++, (0, _cartPersistence.loadCartFromStorage)());
      /* istanbul ignore next */
      cov_drz6itsrj().s[18]++;
      if (temporaryItems.length > 0) {
        /* istanbul ignore next */
        cov_drz6itsrj().b[0][0]++;
        // Migrar items al backend (implementación futura)
        const migrationSuccess =
        /* istanbul ignore next */
        (cov_drz6itsrj().s[19]++, await (0, _cartPersistence.migrateTemporaryCart)(temporaryItems, userId));
        /* istanbul ignore next */
        cov_drz6itsrj().s[20]++;
        if (migrationSuccess) {
          /* istanbul ignore next */
          cov_drz6itsrj().b[1][0]++;
          cov_drz6itsrj().s[21]++;
          // Limpiar localStorage después de migración exitosa
          (0, _cartPersistence.clearCartFromStorage)();
        } else
        /* istanbul ignore next */
        {
          cov_drz6itsrj().b[1][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_drz6itsrj().b[0][1]++;
      }
      // Cargar carrito del usuario desde el backend (implementación futura)
      const userCartItems =
      /* istanbul ignore next */
      (cov_drz6itsrj().s[22]++, await (0, _cartPersistence.loadUserCart)(userId));
      // Si hay items del usuario, reemplazar el carrito actual
      /* istanbul ignore next */
      cov_drz6itsrj().s[23]++;
      if (userCartItems.length > 0) {
        /* istanbul ignore next */
        cov_drz6itsrj().b[2][0]++;
        cov_drz6itsrj().s[24]++;
        dispatch((0, _cartslice.replaceCart)(userCartItems));
      } else
      /* istanbul ignore next */
      {
        cov_drz6itsrj().b[2][1]++;
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_drz6itsrj().s[25]++;
      console.error('Error during cart migration:', error);
    }
  }, [dispatch]));
  // Función para guardar carrito del usuario autenticado
  const saveCart =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[26]++, (0, _react.useCallback)(async userId => {
    /* istanbul ignore next */
    cov_drz6itsrj().f[5]++;
    cov_drz6itsrj().s[27]++;
    try {
      /* istanbul ignore next */
      cov_drz6itsrj().s[28]++;
      if (cartItems.length > 0) {
        /* istanbul ignore next */
        cov_drz6itsrj().b[3][0]++;
        cov_drz6itsrj().s[29]++;
        await (0, _cartPersistence.saveUserCart)(userId, cartItems);
      } else
      /* istanbul ignore next */
      {
        cov_drz6itsrj().b[3][1]++;
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_drz6itsrj().s[30]++;
      console.error('Error saving user cart:', error);
    }
  }, [cartItems]));
  // Efecto para manejar cambios en el estado de autenticación
  /* istanbul ignore next */
  cov_drz6itsrj().s[31]++;
  (0, _react.useEffect)(() => {
    /* istanbul ignore next */
    cov_drz6itsrj().f[6]++;
    cov_drz6itsrj().s[32]++;
    if (!isLoaded) {
      /* istanbul ignore next */
      cov_drz6itsrj().b[4][0]++;
      cov_drz6itsrj().s[33]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_drz6itsrj().b[4][1]++;
    }
    cov_drz6itsrj().s[34]++;
    if (user) {
      /* istanbul ignore next */
      cov_drz6itsrj().b[5][0]++;
      cov_drz6itsrj().s[35]++;
      // Usuario autenticado - migrar carrito temporal si existe
      migrateCart(user.id);
    } else {
      /* istanbul ignore next */
      cov_drz6itsrj().b[5][1]++;
      // Usuario no autenticado - cargar desde localStorage
      const persistedItems =
      /* istanbul ignore next */
      (cov_drz6itsrj().s[36]++, (0, _cartPersistence.loadCartFromStorage)());
      /* istanbul ignore next */
      cov_drz6itsrj().s[37]++;
      if (persistedItems.length > 0) {
        /* istanbul ignore next */
        cov_drz6itsrj().b[6][0]++;
        cov_drz6itsrj().s[38]++;
        dispatch((0, _cartslice.hydrateCart)(persistedItems));
      } else
      /* istanbul ignore next */
      {
        cov_drz6itsrj().b[6][1]++;
      }
    }
  }, [user, isLoaded, dispatch, migrateCart]);
  // Efecto para guardar carrito de usuario autenticado cuando cambie
  /* istanbul ignore next */
  cov_drz6itsrj().s[39]++;
  (0, _react.useEffect)(() => {
    /* istanbul ignore next */
    cov_drz6itsrj().f[7]++;
    cov_drz6itsrj().s[40]++;
    if (
    /* istanbul ignore next */
    (cov_drz6itsrj().b[8][0]++, !isLoaded) ||
    /* istanbul ignore next */
    (cov_drz6itsrj().b[8][1]++, !user)) {
      /* istanbul ignore next */
      cov_drz6itsrj().b[7][0]++;
      cov_drz6itsrj().s[41]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_drz6itsrj().b[7][1]++;
    }
    // Debounce para evitar guardados excesivos
    const timeoutId =
    /* istanbul ignore next */
    (cov_drz6itsrj().s[42]++, setTimeout(() => {
      /* istanbul ignore next */
      cov_drz6itsrj().f[8]++;
      cov_drz6itsrj().s[43]++;
      saveCart(user.id);
    }, 1000));
    /* istanbul ignore next */
    cov_drz6itsrj().s[44]++;
    return () => {
      /* istanbul ignore next */
      cov_drz6itsrj().f[9]++;
      cov_drz6itsrj().s[45]++;
      return clearTimeout(timeoutId);
    };
  }, [cartItems, user, isLoaded, saveCart]);
  // Función para limpiar carrito al cerrar sesión
  const handleSignOut =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[46]++, (0, _react.useCallback)(() => {
    /* istanbul ignore next */
    cov_drz6itsrj().f[10]++;
    cov_drz6itsrj().s[47]++;
    dispatch((0, _cartslice.removeAllItemsFromCart)());
    /* istanbul ignore next */
    cov_drz6itsrj().s[48]++;
    (0, _cartPersistence.clearCartFromStorage)();
  }, [dispatch]));
  /* istanbul ignore next */
  cov_drz6itsrj().s[49]++;
  return {
    isAuthenticated: !!user,
    userId: user?.id,
    cartItems,
    migrateCart,
    saveCart,
    handleSignOut
  };
};
/* istanbul ignore next */
cov_drz6itsrj().s[50]++;
const useCart = () => {
  /* istanbul ignore next */
  cov_drz6itsrj().f[11]++;
  const cartItems =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[51]++, (0, _store.useAppSelector)(_cartslice.selectCartItems));
  const dispatch =
  /* istanbul ignore next */
  (cov_drz6itsrj().s[52]++, (0, _store.useAppDispatch)());
  /* istanbul ignore next */
  cov_drz6itsrj().s[53]++;
  return {
    cartItems,
    dispatch
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VDYXJ0IiwiY292X2RyejZpdHNyaiIsImYiLCJzIiwidXNlQ2FydFdpdGhDbGVyayIsInVzZXIiLCJpc0xvYWRlZCIsIl91c2VBdXRoIiwidXNlQXV0aCIsImRpc3BhdGNoIiwiX3N0b3JlIiwidXNlQXBwRGlzcGF0Y2giLCJjYXJ0SXRlbXMiLCJ1c2VBcHBTZWxlY3RvciIsIl9jYXJ0c2xpY2UiLCJzZWxlY3RDYXJ0SXRlbXMiLCJtaWdyYXRlQ2FydCIsIl9yZWFjdCIsInVzZUNhbGxiYWNrIiwidXNlcklkIiwidGVtcG9yYXJ5SXRlbXMiLCJfY2FydFBlcnNpc3RlbmNlIiwibG9hZENhcnRGcm9tU3RvcmFnZSIsImxlbmd0aCIsImIiLCJtaWdyYXRpb25TdWNjZXNzIiwibWlncmF0ZVRlbXBvcmFyeUNhcnQiLCJjbGVhckNhcnRGcm9tU3RvcmFnZSIsInVzZXJDYXJ0SXRlbXMiLCJsb2FkVXNlckNhcnQiLCJyZXBsYWNlQ2FydCIsImVycm9yIiwiY29uc29sZSIsInNhdmVDYXJ0Iiwic2F2ZVVzZXJDYXJ0IiwidXNlRWZmZWN0IiwiaWQiLCJwZXJzaXN0ZWRJdGVtcyIsImh5ZHJhdGVDYXJ0IiwidGltZW91dElkIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImhhbmRsZVNpZ25PdXQiLCJyZW1vdmVBbGxJdGVtc0Zyb21DYXJ0IiwiaXNBdXRoZW50aWNhdGVkIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtYXJ0aVxcRGVza3RvcFxcREVTQVJST0xMT1NXXFxCT0lMRVJQTEFUVEUgRS1DT01NRVJDRVxcc3JjXFxob29rc1xcdXNlQ2FydFdpdGhDbGVyay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQSU5URVlBIEUtQ09NTUVSQ0UgLSBDQVJUIEhPT0sgV0lUSCBDTEVSSyBJTlRFR1JBVElPTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vdXNlQXV0aCc7XHJcbmltcG9ydCB7IHVzZUFwcERpc3BhdGNoLCB1c2VBcHBTZWxlY3RvciB9IGZyb20gJ0AvcmVkdXgvc3RvcmUnO1xyXG5pbXBvcnQgeyBcclxuICBzZWxlY3RDYXJ0SXRlbXMsIFxyXG4gIGh5ZHJhdGVDYXJ0LCBcclxuICByZXBsYWNlQ2FydCxcclxuICByZW1vdmVBbGxJdGVtc0Zyb21DYXJ0IFxyXG59IGZyb20gJ0AvcmVkdXgvZmVhdHVyZXMvY2FydC1zbGljZSc7XHJcbmltcG9ydCB7IFxyXG4gIGxvYWRDYXJ0RnJvbVN0b3JhZ2UsIFxyXG4gIGNsZWFyQ2FydEZyb21TdG9yYWdlLFxyXG4gIG1pZ3JhdGVUZW1wb3JhcnlDYXJ0LFxyXG4gIGxvYWRVc2VyQ2FydCxcclxuICBzYXZlVXNlckNhcnQgXHJcbn0gZnJvbSAnQC9yZWR1eC9taWRkbGV3YXJlL2NhcnRQZXJzaXN0ZW5jZSc7XHJcblxyXG4vLyBIb29rIHBlcnNvbmFsaXphZG8gcGFyYSBtYW5lamFyIGVsIGNhcnJpdG8gY29uIGludGVncmFjacOzbiBOZXh0QXV0aFxyXG5leHBvcnQgY29uc3QgdXNlQ2FydFdpdGhDbGVyayA9ICgpID0+IHtcclxuICBjb25zdCB7IHVzZXIsIGlzTG9hZGVkIH0gPSB1c2VBdXRoKCk7XHJcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xyXG4gIGNvbnN0IGNhcnRJdGVtcyA9IHVzZUFwcFNlbGVjdG9yKHNlbGVjdENhcnRJdGVtcyk7XHJcblxyXG4gIC8vIEZ1bmNpw7NuIHBhcmEgbWlncmFyIGNhcnJpdG8gdGVtcG9yYWwgYSB1c3VhcmlvIGF1dGVudGljYWRvXHJcbiAgY29uc3QgbWlncmF0ZUNhcnQgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIE9idGVuZXIgaXRlbXMgZGVsIGxvY2FsU3RvcmFnZVxyXG4gICAgICBjb25zdCB0ZW1wb3JhcnlJdGVtcyA9IGxvYWRDYXJ0RnJvbVN0b3JhZ2UoKTtcclxuICAgICAgXHJcbiAgICAgIGlmICh0ZW1wb3JhcnlJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTWlncmFyIGl0ZW1zIGFsIGJhY2tlbmQgKGltcGxlbWVudGFjacOzbiBmdXR1cmEpXHJcbiAgICAgICAgY29uc3QgbWlncmF0aW9uU3VjY2VzcyA9IGF3YWl0IG1pZ3JhdGVUZW1wb3JhcnlDYXJ0KHRlbXBvcmFyeUl0ZW1zLCB1c2VySWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChtaWdyYXRpb25TdWNjZXNzKSB7XHJcbiAgICAgICAgICAvLyBMaW1waWFyIGxvY2FsU3RvcmFnZSBkZXNwdcOpcyBkZSBtaWdyYWNpw7NuIGV4aXRvc2FcclxuICAgICAgICAgIGNsZWFyQ2FydEZyb21TdG9yYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDYXJnYXIgY2Fycml0byBkZWwgdXN1YXJpbyBkZXNkZSBlbCBiYWNrZW5kIChpbXBsZW1lbnRhY2nDs24gZnV0dXJhKVxyXG4gICAgICBjb25zdCB1c2VyQ2FydEl0ZW1zID0gYXdhaXQgbG9hZFVzZXJDYXJ0KHVzZXJJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTaSBoYXkgaXRlbXMgZGVsIHVzdWFyaW8sIHJlZW1wbGF6YXIgZWwgY2Fycml0byBhY3R1YWxcclxuICAgICAgaWYgKHVzZXJDYXJ0SXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRpc3BhdGNoKHJlcGxhY2VDYXJ0KHVzZXJDYXJ0SXRlbXMpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBjYXJ0IG1pZ3JhdGlvbjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSwgW2Rpc3BhdGNoXSk7XHJcblxyXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZ3VhcmRhciBjYXJyaXRvIGRlbCB1c3VhcmlvIGF1dGVudGljYWRvXHJcbiAgY29uc3Qgc2F2ZUNhcnQgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChjYXJ0SXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGF3YWl0IHNhdmVVc2VyQ2FydCh1c2VySWQsIGNhcnRJdGVtcyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB1c2VyIGNhcnQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIFtjYXJ0SXRlbXNdKTtcclxuXHJcbiAgLy8gRWZlY3RvIHBhcmEgbWFuZWphciBjYW1iaW9zIGVuIGVsIGVzdGFkbyBkZSBhdXRlbnRpY2FjacOzblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzTG9hZGVkKSB7cmV0dXJuO31cclxuXHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICAvLyBVc3VhcmlvIGF1dGVudGljYWRvIC0gbWlncmFyIGNhcnJpdG8gdGVtcG9yYWwgc2kgZXhpc3RlXHJcbiAgICAgIG1pZ3JhdGVDYXJ0KHVzZXIuaWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVXN1YXJpbyBubyBhdXRlbnRpY2FkbyAtIGNhcmdhciBkZXNkZSBsb2NhbFN0b3JhZ2VcclxuICAgICAgY29uc3QgcGVyc2lzdGVkSXRlbXMgPSBsb2FkQ2FydEZyb21TdG9yYWdlKCk7XHJcbiAgICAgIGlmIChwZXJzaXN0ZWRJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZGlzcGF0Y2goaHlkcmF0ZUNhcnQocGVyc2lzdGVkSXRlbXMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFt1c2VyLCBpc0xvYWRlZCwgZGlzcGF0Y2gsIG1pZ3JhdGVDYXJ0XSk7XHJcblxyXG4gIC8vIEVmZWN0byBwYXJhIGd1YXJkYXIgY2Fycml0byBkZSB1c3VhcmlvIGF1dGVudGljYWRvIGN1YW5kbyBjYW1iaWVcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFpc0xvYWRlZCB8fCAhdXNlcikge3JldHVybjt9XHJcblxyXG4gICAgLy8gRGVib3VuY2UgcGFyYSBldml0YXIgZ3VhcmRhZG9zIGV4Y2VzaXZvc1xyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNhdmVDYXJ0KHVzZXIuaWQpO1xyXG4gICAgfSwgMTAwMCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gIH0sIFtjYXJ0SXRlbXMsIHVzZXIsIGlzTG9hZGVkLCBzYXZlQ2FydF0pO1xyXG5cclxuICAvLyBGdW5jacOzbiBwYXJhIGxpbXBpYXIgY2Fycml0byBhbCBjZXJyYXIgc2VzacOzblxyXG4gIGNvbnN0IGhhbmRsZVNpZ25PdXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBkaXNwYXRjaChyZW1vdmVBbGxJdGVtc0Zyb21DYXJ0KCkpO1xyXG4gICAgY2xlYXJDYXJ0RnJvbVN0b3JhZ2UoKTtcclxuICB9LCBbZGlzcGF0Y2hdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxyXG4gICAgdXNlcklkOiB1c2VyPy5pZCxcclxuICAgIGNhcnRJdGVtcyxcclxuICAgIG1pZ3JhdGVDYXJ0LFxyXG4gICAgc2F2ZUNhcnQsXHJcbiAgICBoYW5kbGVTaWduT3V0LFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBIb29rIHNpbXBsaWZpY2FkbyBwYXJhIGNvbXBvbmVudGVzIHF1ZSBzb2xvIG5lY2VzaXRhbiBlbCBlc3RhZG8gZGVsIGNhcnJpdG9cclxuZXhwb3J0IGNvbnN0IHVzZUNhcnQgPSAoKSA9PiB7XHJcbiAgY29uc3QgY2FydEl0ZW1zID0gdXNlQXBwU2VsZWN0b3Ioc2VsZWN0Q2FydEl0ZW1zKTtcclxuICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjYXJ0SXRlbXMsXHJcbiAgICBkaXNwYXRjaCxcclxuICB9O1xyXG59O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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