8754556d24216ed8d9eeea751274bdbf
/**
 * Configuración del Design System Pinteya
 * 
 * Este archivo centraliza la configuración de características del design system,
 * permitiendo activar/desactivar funcionalidades de forma controlada.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get calculateInstallments () {
        return calculateInstallments;
    },
    get contextConfigs () {
        return contextConfigs;
    },
    get defaultDesignSystemConfig () {
        return defaultDesignSystemConfig;
    },
    get isFeatureEnabled () {
        return isFeatureEnabled;
    },
    get shouldShowFreeShipping () {
        return shouldShowFreeShipping;
    },
    get shouldShowInstallments () {
        return shouldShowInstallments;
    },
    get useDesignSystemConfig () {
        return useDesignSystemConfig;
    }
});
const defaultDesignSystemConfig = {
    ecommerce: {
        enableNewComponents: true,
        priceDisplay: {
            defaultCurrency: 'ARS',
            showDiscountByDefault: true,
            defaultVariant: 'compact',
            defaultSize: 'sm'
        },
        stockIndicator: {
            defaultLowStockThreshold: 5,
            showExactQuantityByDefault: false,
            defaultUnit: 'unidades',
            defaultVariant: 'minimal'
        },
        shippingInfo: {
            highlightFreeShippingByDefault: true,
            showCalculatorByDefault: false,
            showGuaranteesByDefault: false,
            freeShippingThreshold: 50000
        }
    },
    productCard: {
        useNewComponentsByDefault: true,
        showInstallmentsByDefault: false,
        showFreeShippingByDefault: true,
        showExactStockByDefault: false,
        defaultStockUnit: 'unidades'
    },
    theme: {
        enableDarkMode: false,
        defaultTheme: 'light'
    },
    testing: {
        enableVisualRegression: false,
        enableAccessibilityTests: true,
        enablePerformanceTests: true
    },
    development: {
        enableStorybook: true,
        enableDebugMode: process.env.NODE_ENV === 'development',
        showComponentBoundaries: false
    }
};
const contextConfigs = {
    // Configuración para páginas de producto individual
    productDetail: {
        ...defaultDesignSystemConfig,
        productCard: {
            ...defaultDesignSystemConfig.productCard,
            useNewComponentsByDefault: true,
            showInstallmentsByDefault: true,
            showExactStockByDefault: true
        },
        ecommerce: {
            ...defaultDesignSystemConfig.ecommerce,
            stockIndicator: {
                ...defaultDesignSystemConfig.ecommerce.stockIndicator,
                showExactQuantityByDefault: true,
                defaultVariant: 'default'
            },
            shippingInfo: {
                ...defaultDesignSystemConfig.ecommerce.shippingInfo,
                showCalculatorByDefault: true,
                showGuaranteesByDefault: true
            }
        }
    },
    // Configuración para checkout
    checkout: {
        ...defaultDesignSystemConfig,
        ecommerce: {
            ...defaultDesignSystemConfig.ecommerce,
            priceDisplay: {
                ...defaultDesignSystemConfig.ecommerce.priceDisplay,
                defaultVariant: 'default',
                defaultSize: 'lg'
            },
            shippingInfo: {
                ...defaultDesignSystemConfig.ecommerce.shippingInfo,
                showCalculatorByDefault: true,
                showGuaranteesByDefault: true
            }
        }
    },
    // Configuración para demos y testing
    demo: {
        ...defaultDesignSystemConfig,
        productCard: {
            ...defaultDesignSystemConfig.productCard,
            useNewComponentsByDefault: true,
            showInstallmentsByDefault: true,
            showExactStockByDefault: true
        },
        development: {
            ...defaultDesignSystemConfig.development,
            enableDebugMode: true,
            showComponentBoundaries: true
        }
    }
};
function useDesignSystemConfig(context) {
    if (context && contextConfigs[context]) {
        return contextConfigs[context];
    }
    return defaultDesignSystemConfig;
}
function isFeatureEnabled(feature, config = defaultDesignSystemConfig) {
    const keys = feature.split('.');
    let current = config;
    for (const key of keys){
        if (current[key] === undefined) {
            return false;
        }
        current = current[key];
    }
    return Boolean(current);
}
function shouldShowInstallments(price, config = defaultDesignSystemConfig) {
    // Mostrar cuotas para productos > $10.000
    return price >= 10000 || config.productCard.showInstallmentsByDefault;
}
function shouldShowFreeShipping(price, config = defaultDesignSystemConfig) {
    return price >= config.ecommerce.shippingInfo.freeShippingThreshold || config.ecommerce.shippingInfo.highlightFreeShippingByDefault;
}
function calculateInstallments(price) {
    // Lógica de cuotas basada en el precio
    if (price >= 50000) {
        return {
            quantity: 12,
            amount: Math.round(price / 12),
            interestFree: true
        };
    } else if (price >= 20000) {
        return {
            quantity: 6,
            amount: Math.round(price / 6),
            interestFree: true
        };
    } else if (price >= 10000) {
        return {
            quantity: 3,
            amount: Math.round(price / 3),
            interestFree: true
        };
    }
    return {
        quantity: 1,
        amount: price,
        interestFree: true
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcbGliXFxkZXNpZ24tc3lzdGVtLWNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29uZmlndXJhY2nDs24gZGVsIERlc2lnbiBTeXN0ZW0gUGludGV5YVxyXG4gKiBcclxuICogRXN0ZSBhcmNoaXZvIGNlbnRyYWxpemEgbGEgY29uZmlndXJhY2nDs24gZGUgY2FyYWN0ZXLDrXN0aWNhcyBkZWwgZGVzaWduIHN5c3RlbSxcclxuICogcGVybWl0aWVuZG8gYWN0aXZhci9kZXNhY3RpdmFyIGZ1bmNpb25hbGlkYWRlcyBkZSBmb3JtYSBjb250cm9sYWRhLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGVzaWduU3lzdGVtQ29uZmlnIHtcclxuICAvLyBDb21wb25lbnRlcyBFLWNvbW1lcmNlXHJcbiAgZWNvbW1lcmNlOiB7XHJcbiAgICAvLyBBY3RpdmFyIG51ZXZvcyBjb21wb25lbnRlcyBlLWNvbW1lcmNlIGdsb2JhbG1lbnRlXHJcbiAgICBlbmFibGVOZXdDb21wb25lbnRzOiBib29sZWFuXHJcbiAgICBcclxuICAgIC8vIENvbmZpZ3VyYWNpw7NuIGRlIFByaWNlRGlzcGxheVxyXG4gICAgcHJpY2VEaXNwbGF5OiB7XHJcbiAgICAgIGRlZmF1bHRDdXJyZW5jeTogc3RyaW5nXHJcbiAgICAgIHNob3dEaXNjb3VudEJ5RGVmYXVsdDogYm9vbGVhblxyXG4gICAgICBkZWZhdWx0VmFyaWFudDogJ2RlZmF1bHQnIHwgJ2NlbnRlcicgfCAnY29tcGFjdCdcclxuICAgICAgZGVmYXVsdFNpemU6ICdzbScgfCAnbWQnIHwgJ2xnJyB8ICd4bCdcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29uZmlndXJhY2nDs24gZGUgU3RvY2tJbmRpY2F0b3JcclxuICAgIHN0b2NrSW5kaWNhdG9yOiB7XHJcbiAgICAgIGRlZmF1bHRMb3dTdG9ja1RocmVzaG9sZDogbnVtYmVyXHJcbiAgICAgIHNob3dFeGFjdFF1YW50aXR5QnlEZWZhdWx0OiBib29sZWFuXHJcbiAgICAgIGRlZmF1bHRVbml0OiBzdHJpbmdcclxuICAgICAgZGVmYXVsdFZhcmlhbnQ6ICdkZWZhdWx0JyB8ICdjb21wYWN0JyB8ICdiYWRnZScgfCAnbWluaW1hbCdcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29uZmlndXJhY2nDs24gZGUgU2hpcHBpbmdJbmZvXHJcbiAgICBzaGlwcGluZ0luZm86IHtcclxuICAgICAgaGlnaGxpZ2h0RnJlZVNoaXBwaW5nQnlEZWZhdWx0OiBib29sZWFuXHJcbiAgICAgIHNob3dDYWxjdWxhdG9yQnlEZWZhdWx0OiBib29sZWFuXHJcbiAgICAgIHNob3dHdWFyYW50ZWVzQnlEZWZhdWx0OiBib29sZWFuXHJcbiAgICAgIGZyZWVTaGlwcGluZ1RocmVzaG9sZDogbnVtYmVyIC8vIEVuIHBlc29zIGFyZ2VudGlub3NcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gQ29uZmlndXJhY2nDs24gZGUgQ29tbWVyY2lhbFByb2R1Y3RDYXJkXHJcbiAgcHJvZHVjdENhcmQ6IHtcclxuICAgIHVzZU5ld0NvbXBvbmVudHNCeURlZmF1bHQ6IGJvb2xlYW5cclxuICAgIHNob3dJbnN0YWxsbWVudHNCeURlZmF1bHQ6IGJvb2xlYW5cclxuICAgIHNob3dGcmVlU2hpcHBpbmdCeURlZmF1bHQ6IGJvb2xlYW5cclxuICAgIHNob3dFeGFjdFN0b2NrQnlEZWZhdWx0OiBib29sZWFuXHJcbiAgICBkZWZhdWx0U3RvY2tVbml0OiBzdHJpbmdcclxuICB9XHJcbiAgXHJcbiAgLy8gQ29uZmlndXJhY2nDs24gZGUgdGVtYXNcclxuICB0aGVtZToge1xyXG4gICAgZW5hYmxlRGFya01vZGU6IGJvb2xlYW5cclxuICAgIGRlZmF1bHRUaGVtZTogJ2xpZ2h0JyB8ICdkYXJrJyB8ICdhdXRvJ1xyXG4gIH1cclxuICBcclxuICAvLyBDb25maWd1cmFjacOzbiBkZSB0ZXN0aW5nXHJcbiAgdGVzdGluZzoge1xyXG4gICAgZW5hYmxlVmlzdWFsUmVncmVzc2lvbjogYm9vbGVhblxyXG4gICAgZW5hYmxlQWNjZXNzaWJpbGl0eVRlc3RzOiBib29sZWFuXHJcbiAgICBlbmFibGVQZXJmb3JtYW5jZVRlc3RzOiBib29sZWFuXHJcbiAgfVxyXG4gIFxyXG4gIC8vIENvbmZpZ3VyYWNpw7NuIGRlIGRlc2Fycm9sbG9cclxuICBkZXZlbG9wbWVudDoge1xyXG4gICAgZW5hYmxlU3Rvcnlib29rOiBib29sZWFuXHJcbiAgICBlbmFibGVEZWJ1Z01vZGU6IGJvb2xlYW5cclxuICAgIHNob3dDb21wb25lbnRCb3VuZGFyaWVzOiBib29sZWFuXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJhY2nDs24gcG9yIGRlZmVjdG8gZGVsIERlc2lnbiBTeXN0ZW1cclxuICovXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0RGVzaWduU3lzdGVtQ29uZmlnOiBEZXNpZ25TeXN0ZW1Db25maWcgPSB7XHJcbiAgZWNvbW1lcmNlOiB7XHJcbiAgICBlbmFibGVOZXdDb21wb25lbnRzOiB0cnVlLCAvLyBBY3RpdmFyIG51ZXZvcyBjb21wb25lbnRlcyBwb3IgZGVmZWN0b1xyXG4gICAgXHJcbiAgICBwcmljZURpc3BsYXk6IHtcclxuICAgICAgZGVmYXVsdEN1cnJlbmN5OiAnQVJTJyxcclxuICAgICAgc2hvd0Rpc2NvdW50QnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICBkZWZhdWx0VmFyaWFudDogJ2NvbXBhY3QnLCAvLyBNZWpvciBwYXJhIFByb2R1Y3RDYXJkXHJcbiAgICAgIGRlZmF1bHRTaXplOiAnc20nLCAvLyBNZWpvciBwYXJhIGdyaWRzIGRlIHByb2R1Y3Rvc1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc3RvY2tJbmRpY2F0b3I6IHtcclxuICAgICAgZGVmYXVsdExvd1N0b2NrVGhyZXNob2xkOiA1LFxyXG4gICAgICBzaG93RXhhY3RRdWFudGl0eUJ5RGVmYXVsdDogZmFsc2UsIC8vIFNvbG8gZW4gcMOhZ2luYXMgZGUgZGV0YWxsZVxyXG4gICAgICBkZWZhdWx0VW5pdDogJ3VuaWRhZGVzJyxcclxuICAgICAgZGVmYXVsdFZhcmlhbnQ6ICdtaW5pbWFsJywgLy8gTWVqb3IgcGFyYSBQcm9kdWN0Q2FyZFxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2hpcHBpbmdJbmZvOiB7XHJcbiAgICAgIGhpZ2hsaWdodEZyZWVTaGlwcGluZ0J5RGVmYXVsdDogdHJ1ZSxcclxuICAgICAgc2hvd0NhbGN1bGF0b3JCeURlZmF1bHQ6IGZhbHNlLCAvLyBTb2xvIGVuIGNoZWNrb3V0L2RldGFsbGVcclxuICAgICAgc2hvd0d1YXJhbnRlZXNCeURlZmF1bHQ6IGZhbHNlLCAvLyBTb2xvIGVuIGNoZWNrb3V0XHJcbiAgICAgIGZyZWVTaGlwcGluZ1RocmVzaG9sZDogNTAwMDAsIC8vICQ1MC4wMDAgQVJTXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXHJcbiAgcHJvZHVjdENhcmQ6IHtcclxuICAgIHVzZU5ld0NvbXBvbmVudHNCeURlZmF1bHQ6IHRydWUsIC8vIOKchSBBQ1RJVkFETzogTWlncmFjacOzbiBjb21wbGV0YWRhXHJcbiAgICBzaG93SW5zdGFsbG1lbnRzQnlEZWZhdWx0OiBmYWxzZSwgLy8gU29sbyBwcm9kdWN0b3MgPiAkMTAuMDAwXHJcbiAgICBzaG93RnJlZVNoaXBwaW5nQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgc2hvd0V4YWN0U3RvY2tCeURlZmF1bHQ6IGZhbHNlLCAvLyBTb2xvIGVuIHDDoWdpbmFzIGRlIGRldGFsbGVcclxuICAgIGRlZmF1bHRTdG9ja1VuaXQ6ICd1bmlkYWRlcycsXHJcbiAgfSxcclxuICBcclxuICB0aGVtZToge1xyXG4gICAgZW5hYmxlRGFya01vZGU6IGZhbHNlLCAvLyBGYXNlIDJcclxuICAgIGRlZmF1bHRUaGVtZTogJ2xpZ2h0JyxcclxuICB9LFxyXG4gIFxyXG4gIHRlc3Rpbmc6IHtcclxuICAgIGVuYWJsZVZpc3VhbFJlZ3Jlc3Npb246IGZhbHNlLCAvLyBGYXNlIDJcclxuICAgIGVuYWJsZUFjY2Vzc2liaWxpdHlUZXN0czogdHJ1ZSxcclxuICAgIGVuYWJsZVBlcmZvcm1hbmNlVGVzdHM6IHRydWUsXHJcbiAgfSxcclxuICBcclxuICBkZXZlbG9wbWVudDoge1xyXG4gICAgZW5hYmxlU3Rvcnlib29rOiB0cnVlLFxyXG4gICAgZW5hYmxlRGVidWdNb2RlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyxcclxuICAgIHNob3dDb21wb25lbnRCb3VuZGFyaWVzOiBmYWxzZSxcclxuICB9LFxyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJhY2nDs24gZXNwZWPDrWZpY2EgcGFyYSBkaWZlcmVudGVzIGNvbnRleHRvc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNvbnRleHRDb25maWdzID0ge1xyXG4gIC8vIENvbmZpZ3VyYWNpw7NuIHBhcmEgcMOhZ2luYXMgZGUgcHJvZHVjdG8gaW5kaXZpZHVhbFxyXG4gIHByb2R1Y3REZXRhaWw6IHtcclxuICAgIC4uLmRlZmF1bHREZXNpZ25TeXN0ZW1Db25maWcsXHJcbiAgICBwcm9kdWN0Q2FyZDoge1xyXG4gICAgICAuLi5kZWZhdWx0RGVzaWduU3lzdGVtQ29uZmlnLnByb2R1Y3RDYXJkLFxyXG4gICAgICB1c2VOZXdDb21wb25lbnRzQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICBzaG93SW5zdGFsbG1lbnRzQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICBzaG93RXhhY3RTdG9ja0J5RGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBlY29tbWVyY2U6IHtcclxuICAgICAgLi4uZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZy5lY29tbWVyY2UsXHJcbiAgICAgIHN0b2NrSW5kaWNhdG9yOiB7XHJcbiAgICAgICAgLi4uZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZy5lY29tbWVyY2Uuc3RvY2tJbmRpY2F0b3IsXHJcbiAgICAgICAgc2hvd0V4YWN0UXVhbnRpdHlCeURlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgZGVmYXVsdFZhcmlhbnQ6ICdkZWZhdWx0JyxcclxuICAgICAgfSxcclxuICAgICAgc2hpcHBpbmdJbmZvOiB7XHJcbiAgICAgICAgLi4uZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZy5lY29tbWVyY2Uuc2hpcHBpbmdJbmZvLFxyXG4gICAgICAgIHNob3dDYWxjdWxhdG9yQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgIHNob3dHdWFyYW50ZWVzQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9LFxyXG4gIFxyXG4gIC8vIENvbmZpZ3VyYWNpw7NuIHBhcmEgY2hlY2tvdXRcclxuICBjaGVja291dDoge1xyXG4gICAgLi4uZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZyxcclxuICAgIGVjb21tZXJjZToge1xyXG4gICAgICAuLi5kZWZhdWx0RGVzaWduU3lzdGVtQ29uZmlnLmVjb21tZXJjZSxcclxuICAgICAgcHJpY2VEaXNwbGF5OiB7XHJcbiAgICAgICAgLi4uZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZy5lY29tbWVyY2UucHJpY2VEaXNwbGF5LFxyXG4gICAgICAgIGRlZmF1bHRWYXJpYW50OiAnZGVmYXVsdCcsXHJcbiAgICAgICAgZGVmYXVsdFNpemU6ICdsZycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHNoaXBwaW5nSW5mbzoge1xyXG4gICAgICAgIC4uLmRlZmF1bHREZXNpZ25TeXN0ZW1Db25maWcuZWNvbW1lcmNlLnNoaXBwaW5nSW5mbyxcclxuICAgICAgICBzaG93Q2FsY3VsYXRvckJ5RGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICBzaG93R3VhcmFudGVlc0J5RGVmYXVsdDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBcclxuICAvLyBDb25maWd1cmFjacOzbiBwYXJhIGRlbW9zIHkgdGVzdGluZ1xyXG4gIGRlbW86IHtcclxuICAgIC4uLmRlZmF1bHREZXNpZ25TeXN0ZW1Db25maWcsXHJcbiAgICBwcm9kdWN0Q2FyZDoge1xyXG4gICAgICAuLi5kZWZhdWx0RGVzaWduU3lzdGVtQ29uZmlnLnByb2R1Y3RDYXJkLFxyXG4gICAgICB1c2VOZXdDb21wb25lbnRzQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICBzaG93SW5zdGFsbG1lbnRzQnlEZWZhdWx0OiB0cnVlLFxyXG4gICAgICBzaG93RXhhY3RTdG9ja0J5RGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBkZXZlbG9wbWVudDoge1xyXG4gICAgICAuLi5kZWZhdWx0RGVzaWduU3lzdGVtQ29uZmlnLmRldmVsb3BtZW50LFxyXG4gICAgICBlbmFibGVEZWJ1Z01vZGU6IHRydWUsXHJcbiAgICAgIHNob3dDb21wb25lbnRCb3VuZGFyaWVzOiB0cnVlLFxyXG4gICAgfSxcclxuICB9LFxyXG59IGFzIGNvbnN0XHJcblxyXG4vKipcclxuICogSG9vayBwYXJhIG9idGVuZXIgbGEgY29uZmlndXJhY2nDs24gZGVsIGRlc2lnbiBzeXN0ZW1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VEZXNpZ25TeXN0ZW1Db25maWcoY29udGV4dD86IGtleW9mIHR5cGVvZiBjb250ZXh0Q29uZmlncyk6IERlc2lnblN5c3RlbUNvbmZpZyB7XHJcbiAgaWYgKGNvbnRleHQgJiYgY29udGV4dENvbmZpZ3NbY29udGV4dF0pIHtcclxuICAgIHJldHVybiBjb250ZXh0Q29uZmlnc1tjb250ZXh0XVxyXG4gIH1cclxuICByZXR1cm4gZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZ1xyXG59XHJcblxyXG4vKipcclxuICogRnVuY2nDs24gcGFyYSB2ZXJpZmljYXIgc2kgdW5hIGNhcmFjdGVyw61zdGljYSBlc3TDoSBoYWJpbGl0YWRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGZWF0dXJlRW5hYmxlZChcclxuICBmZWF0dXJlOiBzdHJpbmcsIFxyXG4gIGNvbmZpZzogRGVzaWduU3lzdGVtQ29uZmlnID0gZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZ1xyXG4pOiBib29sZWFuIHtcclxuICBjb25zdCBrZXlzID0gZmVhdHVyZS5zcGxpdCgnLicpXHJcbiAgbGV0IGN1cnJlbnQ6IGFueSA9IGNvbmZpZ1xyXG4gIFxyXG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgIGlmIChjdXJyZW50W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIEJvb2xlYW4oY3VycmVudClcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmNpw7NuIHBhcmEgZGV0ZXJtaW5hciBzaSBtb3N0cmFyIGN1b3RhcyBiYXNhZG8gZW4gZWwgcHJlY2lvXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkU2hvd0luc3RhbGxtZW50cyhcclxuICBwcmljZTogbnVtYmVyLCBcclxuICBjb25maWc6IERlc2lnblN5c3RlbUNvbmZpZyA9IGRlZmF1bHREZXNpZ25TeXN0ZW1Db25maWdcclxuKTogYm9vbGVhbiB7XHJcbiAgLy8gTW9zdHJhciBjdW90YXMgcGFyYSBwcm9kdWN0b3MgPiAkMTAuMDAwXHJcbiAgcmV0dXJuIHByaWNlID49IDEwMDAwIHx8IGNvbmZpZy5wcm9kdWN0Q2FyZC5zaG93SW5zdGFsbG1lbnRzQnlEZWZhdWx0XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGdW5jacOzbiBwYXJhIGRldGVybWluYXIgc2kgbW9zdHJhciBlbnbDrW8gZ3JhdGlzIGJhc2FkbyBlbiBlbCBwcmVjaW9cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRTaG93RnJlZVNoaXBwaW5nKFxyXG4gIHByaWNlOiBudW1iZXIsIFxyXG4gIGNvbmZpZzogRGVzaWduU3lzdGVtQ29uZmlnID0gZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZ1xyXG4pOiBib29sZWFuIHtcclxuICByZXR1cm4gcHJpY2UgPj0gY29uZmlnLmVjb21tZXJjZS5zaGlwcGluZ0luZm8uZnJlZVNoaXBwaW5nVGhyZXNob2xkIHx8IFxyXG4gICAgICAgICBjb25maWcuZWNvbW1lcmNlLnNoaXBwaW5nSW5mby5oaWdobGlnaHRGcmVlU2hpcHBpbmdCeURlZmF1bHRcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmNpw7NuIHBhcmEgY2FsY3VsYXIgY3VvdGFzIGF1dG9tw6F0aWNhbWVudGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVJbnN0YWxsbWVudHMocHJpY2U6IG51bWJlcik6IHtcclxuICBxdWFudGl0eTogbnVtYmVyXHJcbiAgYW1vdW50OiBudW1iZXJcclxuICBpbnRlcmVzdEZyZWU6IGJvb2xlYW5cclxufSB7XHJcbiAgLy8gTMOzZ2ljYSBkZSBjdW90YXMgYmFzYWRhIGVuIGVsIHByZWNpb1xyXG4gIGlmIChwcmljZSA+PSA1MDAwMCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcXVhbnRpdHk6IDEyLFxyXG4gICAgICBhbW91bnQ6IE1hdGgucm91bmQocHJpY2UgLyAxMiksXHJcbiAgICAgIGludGVyZXN0RnJlZTogdHJ1ZSxcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHByaWNlID49IDIwMDAwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBxdWFudGl0eTogNixcclxuICAgICAgYW1vdW50OiBNYXRoLnJvdW5kKHByaWNlIC8gNiksXHJcbiAgICAgIGludGVyZXN0RnJlZTogdHJ1ZSxcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHByaWNlID49IDEwMDAwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBxdWFudGl0eTogMyxcclxuICAgICAgYW1vdW50OiBNYXRoLnJvdW5kKHByaWNlIC8gMyksXHJcbiAgICAgIGludGVyZXN0RnJlZTogdHJ1ZSxcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHF1YW50aXR5OiAxLFxyXG4gICAgYW1vdW50OiBwcmljZSxcclxuICAgIGludGVyZXN0RnJlZTogdHJ1ZSxcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImNhbGN1bGF0ZUluc3RhbGxtZW50cyIsImNvbnRleHRDb25maWdzIiwiZGVmYXVsdERlc2lnblN5c3RlbUNvbmZpZyIsImlzRmVhdHVyZUVuYWJsZWQiLCJzaG91bGRTaG93RnJlZVNoaXBwaW5nIiwic2hvdWxkU2hvd0luc3RhbGxtZW50cyIsInVzZURlc2lnblN5c3RlbUNvbmZpZyIsImVjb21tZXJjZSIsImVuYWJsZU5ld0NvbXBvbmVudHMiLCJwcmljZURpc3BsYXkiLCJkZWZhdWx0Q3VycmVuY3kiLCJzaG93RGlzY291bnRCeURlZmF1bHQiLCJkZWZhdWx0VmFyaWFudCIsImRlZmF1bHRTaXplIiwic3RvY2tJbmRpY2F0b3IiLCJkZWZhdWx0TG93U3RvY2tUaHJlc2hvbGQiLCJzaG93RXhhY3RRdWFudGl0eUJ5RGVmYXVsdCIsImRlZmF1bHRVbml0Iiwic2hpcHBpbmdJbmZvIiwiaGlnaGxpZ2h0RnJlZVNoaXBwaW5nQnlEZWZhdWx0Iiwic2hvd0NhbGN1bGF0b3JCeURlZmF1bHQiLCJzaG93R3VhcmFudGVlc0J5RGVmYXVsdCIsImZyZWVTaGlwcGluZ1RocmVzaG9sZCIsInByb2R1Y3RDYXJkIiwidXNlTmV3Q29tcG9uZW50c0J5RGVmYXVsdCIsInNob3dJbnN0YWxsbWVudHNCeURlZmF1bHQiLCJzaG93RnJlZVNoaXBwaW5nQnlEZWZhdWx0Iiwic2hvd0V4YWN0U3RvY2tCeURlZmF1bHQiLCJkZWZhdWx0U3RvY2tVbml0IiwidGhlbWUiLCJlbmFibGVEYXJrTW9kZSIsImRlZmF1bHRUaGVtZSIsInRlc3RpbmciLCJlbmFibGVWaXN1YWxSZWdyZXNzaW9uIiwiZW5hYmxlQWNjZXNzaWJpbGl0eVRlc3RzIiwiZW5hYmxlUGVyZm9ybWFuY2VUZXN0cyIsImRldmVsb3BtZW50IiwiZW5hYmxlU3Rvcnlib29rIiwiZW5hYmxlRGVidWdNb2RlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2hvd0NvbXBvbmVudEJvdW5kYXJpZXMiLCJwcm9kdWN0RGV0YWlsIiwiY2hlY2tvdXQiLCJkZW1vIiwiY29udGV4dCIsImZlYXR1cmUiLCJjb25maWciLCJrZXlzIiwic3BsaXQiLCJjdXJyZW50Iiwia2V5IiwidW5kZWZpbmVkIiwiQm9vbGVhbiIsInByaWNlIiwicXVhbnRpdHkiLCJhbW91bnQiLCJNYXRoIiwicm91bmQiLCJpbnRlcmVzdEZyZWUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7Ozs7Ozs7OztRQTRPZUE7ZUFBQUE7O1FBbkhIQztlQUFBQTs7UUF2REFDO2VBQUFBOztRQWdJR0M7ZUFBQUE7O1FBK0JBQztlQUFBQTs7UUFYQUM7ZUFBQUE7O1FBOUJBQztlQUFBQTs7O0FBdEhULE1BQU1KLDRCQUFnRDtJQUMzREssV0FBVztRQUNUQyxxQkFBcUI7UUFFckJDLGNBQWM7WUFDWkMsaUJBQWlCO1lBQ2pCQyx1QkFBdUI7WUFDdkJDLGdCQUFnQjtZQUNoQkMsYUFBYTtRQUNmO1FBRUFDLGdCQUFnQjtZQUNkQywwQkFBMEI7WUFDMUJDLDRCQUE0QjtZQUM1QkMsYUFBYTtZQUNiTCxnQkFBZ0I7UUFDbEI7UUFFQU0sY0FBYztZQUNaQyxnQ0FBZ0M7WUFDaENDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyx1QkFBdUI7UUFDekI7SUFDRjtJQUVBQyxhQUFhO1FBQ1hDLDJCQUEyQjtRQUMzQkMsMkJBQTJCO1FBQzNCQywyQkFBMkI7UUFDM0JDLHlCQUF5QjtRQUN6QkMsa0JBQWtCO0lBQ3BCO0lBRUFDLE9BQU87UUFDTEMsZ0JBQWdCO1FBQ2hCQyxjQUFjO0lBQ2hCO0lBRUFDLFNBQVM7UUFDUEMsd0JBQXdCO1FBQ3hCQywwQkFBMEI7UUFDMUJDLHdCQUF3QjtJQUMxQjtJQUVBQyxhQUFhO1FBQ1hDLGlCQUFpQjtRQUNqQkMsaUJBQWlCQyxRQUFRQyxHQUFHLENBQUNDLFFBQVEs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