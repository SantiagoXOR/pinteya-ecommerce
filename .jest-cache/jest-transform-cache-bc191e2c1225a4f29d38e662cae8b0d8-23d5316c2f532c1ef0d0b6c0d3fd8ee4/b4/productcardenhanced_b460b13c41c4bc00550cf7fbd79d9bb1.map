{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\product-card-enhanced.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { ProductCard, ProductCardProps } from './card'\nimport {\n  useDesignSystemConfig,\n  shouldShowInstallments,\n  shouldShowFreeShipping,\n  calculateInstallments,\n} from '@/lib/design-system-config'\n\nexport interface EnhancedProductCardProps\n  extends Omit<ProductCardProps, 'useNewComponents' | 'installments'> {\n  /** Contexto de uso para aplicar configuración específica */\n  context?: 'default' | 'productDetail' | 'checkout' | 'demo'\n  /** Forzar uso de nuevos componentes (override de configuración) */\n  forceNewComponents?: boolean\n  /** Configuración manual de cuotas (override de cálculo automático) */\n  customInstallments?: {\n    quantity: number\n    amount: number\n    interestFree?: boolean\n  }\n  /** Datos adicionales del producto para lógica automática */\n  productData?: {\n    category?: string\n    weight?: number\n    dimensions?: {\n      length: number\n      width: number\n      height: number\n    }\n  }\n}\n\n/**\n * ProductCard mejorado con configuración automática del Design System\n *\n * Este componente aplica automáticamente las mejores prácticas del design system:\n * - Calcula cuotas basado en el precio\n * - Determina si mostrar envío gratis\n * - Aplica configuración según el contexto\n * - Usa nuevos componentes e-commerce cuando corresponde\n */\nconst EnhancedProductCard = React.forwardRef<HTMLDivElement, EnhancedProductCardProps>(\n  (\n    {\n      context = 'default',\n      forceNewComponents,\n      customInstallments,\n      productData,\n      price = 0,\n      originalPrice,\n      stock = 0,\n      stockUnit,\n      showInstallments,\n      showFreeShipping,\n      showExactStock,\n      lowStockThreshold,\n      ...props\n    },\n    ref\n  ) => {\n    // Obtener configuración según contexto\n    const config = useDesignSystemConfig(context === 'default' ? undefined : context)\n\n    // Determinar si usar nuevos componentes\n    const useNewComponents =\n      forceNewComponents ??\n      (context === 'demo' ? true : config.productCard.useNewComponentsByDefault)\n\n    // Calcular cuotas automáticamente si no se proporcionan\n    const autoInstallments = React.useMemo(() => {\n      if (customInstallments) {\n        return customInstallments\n      }\n      if (!shouldShowInstallments(price, config)) {\n        return undefined\n      }\n      return calculateInstallments(price)\n    }, [price, customInstallments, config])\n\n    // Determinar si mostrar información de cuotas\n    const shouldDisplayInstallments =\n      showInstallments ?? (useNewComponents && shouldShowInstallments(price, config))\n\n    // Determinar si mostrar envío gratis\n    const shouldDisplayFreeShipping = showFreeShipping ?? shouldShowFreeShipping(price, config)\n\n    // Configuración de stock\n    const stockConfig = {\n      unit: stockUnit ?? config.ecommerce.stockIndicator.defaultUnit,\n      showExact:\n        showExactStock ??\n        (context === 'productDetail' || context === 'demo'\n          ? true\n          : config.ecommerce.stockIndicator.showExactQuantityByDefault),\n      threshold: lowStockThreshold ?? config.ecommerce.stockIndicator.defaultLowStockThreshold,\n    }\n\n    // Determinar descuento automáticamente\n    const hasDiscount = originalPrice && originalPrice > price\n    const discountPercentage = hasDiscount\n      ? Math.round(((originalPrice - price) / originalPrice) * 100)\n      : 0\n\n    return (\n      <ProductCard\n        ref={ref}\n        price={price}\n        originalPrice={originalPrice}\n        stock={stock}\n        stockUnit={stockConfig.unit}\n        showExactStock={stockConfig.showExact}\n        lowStockThreshold={stockConfig.threshold}\n        useNewComponents={useNewComponents}\n        showInstallments={shouldDisplayInstallments}\n        installments={autoInstallments}\n        showFreeShipping={shouldDisplayFreeShipping}\n        {...props}\n      />\n    )\n  }\n)\n\nEnhancedProductCard.displayName = 'EnhancedProductCard'\n\n/**\n * Hook para obtener configuración de producto automática\n */\nexport function useProductConfig(price: number, context: string = 'default') {\n  const config = useDesignSystemConfig(context as any)\n\n  return React.useMemo(\n    () => ({\n      shouldShowInstallments: shouldShowInstallments(price, config),\n      shouldShowFreeShipping: shouldShowFreeShipping(price, config),\n      installments: calculateInstallments(price),\n      useNewComponents: config.productCard.useNewComponentsByDefault,\n    }),\n    [price, config]\n  )\n}\n\n/**\n * Componente de ejemplo para mostrar diferentes configuraciones\n */\nexport function ProductCardShowcase() {\n  const products = [\n    {\n      id: 1,\n      title: 'Pintura Sherwin Williams 4L',\n      price: 8500,\n      originalPrice: 10000,\n      stock: 12,\n      image:\n        'https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/sherwin-williams/pintura-sherwin-williams.jpg',\n    },\n    {\n      id: 2,\n      title: 'Esmalte Petrilac 1L',\n      price: 1850,\n      originalPrice: 2200,\n      stock: 8,\n      image:\n        'https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/petrilac/esmalte-petrilac.jpg',\n    },\n    {\n      id: 3,\n      title: 'Poximix 250ml',\n      price: 2300,\n      stock: 2,\n      image:\n        'https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/poximix/adhesivo-poximix.jpg',\n    },\n    {\n      id: 4,\n      title: 'Lija El Galgo',\n      price: 450,\n      stock: 0,\n      image:\n        'https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/galgo/lija-galgo.jpg',\n    },\n  ]\n\n  return (\n    <div className='space-y-8'>\n      {/* Contexto Default */}\n      <div>\n        <h3 className='text-lg font-semibold mb-4'>Contexto: Default (Grid de productos)</h3>\n        <div className='grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4'>\n          {products.map(product => (\n            <EnhancedProductCard\n              key={`default-${product.id}`}\n              context='default'\n              title={product.title}\n              price={product.price}\n              originalPrice={product.originalPrice}\n              stock={product.stock}\n              image={product.image}\n              stockUnit='unidades'\n              onAddToCart={() => console.log(`Agregado: ${product.title}`)}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Contexto Demo */}\n      <div>\n        <h3 className='text-lg font-semibold mb-4'>Contexto: Demo (Nuevos componentes)</h3>\n        <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4'>\n          {products.map(product => (\n            <EnhancedProductCard\n              key={`demo-${product.id}`}\n              context='demo'\n              title={product.title}\n              price={product.price}\n              originalPrice={product.originalPrice}\n              stock={product.stock}\n              image={product.image}\n              stockUnit='unidades'\n              onAddToCart={() => console.log(`Agregado: ${product.title}`)}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Contexto Product Detail */}\n      <div>\n        <h3 className='text-lg font-semibold mb-4'>\n          Contexto: Product Detail (Información completa)\n        </h3>\n        <div className='max-w-sm mx-auto'>\n          <EnhancedProductCard\n            context='productDetail'\n            title='Pintura Sherwin Williams ProClassic 4L'\n            price={8500}\n            originalPrice={10000}\n            stock={12}\n            image='https://aakzspzfulgftqlgwkpb.supabase.co/storage/v1/object/public/products/sherwin-williams/pintura-sherwin-williams.jpg'\n            stockUnit='latas'\n            onAddToCart={() => console.log('Agregado desde detalle')}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport { EnhancedProductCard }\n"],"names":["EnhancedProductCard","ProductCardShowcase","useProductConfig","React","forwardRef","context","forceNewComponents","customInstallments","productData","price","originalPrice","stock","stockUnit","showInstallments","showFreeShipping","showExactStock","lowStockThreshold","props","ref","config","useDesignSystemConfig","undefined","useNewComponents","productCard","useNewComponentsByDefault","autoInstallments","useMemo","shouldShowInstallments","calculateInstallments","shouldDisplayInstallments","shouldDisplayFreeShipping","shouldShowFreeShipping","stockConfig","unit","ecommerce","stockIndicator","defaultUnit","showExact","showExactQuantityByDefault","threshold","defaultLowStockThreshold","hasDiscount","discountPercentage","Math","round","ProductCard","installments","displayName","products","id","title","image","div","className","h3","map","product","onAddToCart","console","log"],"mappings":"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"}