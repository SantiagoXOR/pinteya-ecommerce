{"version":3,"names":["_default","ProductItem","product","item","cov_1vj3ysc7mw","f","addToCart","s","_useCartActions","useCartActions","trackEvent","_useAnalytics","useAnalytics","productData","b","console","warn","handleAddToCart","quantity","product_id","id","product_name","title","price","hasDiscount","discountedPrice","discount","Math","round","undefined","finalPrice","badge","_jsxruntime","jsx","_productcardcommercial","CommercialProductCard","image","imgs","previews","brand","originalPrice","isNew","stock","productId","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\ProductItem.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Product } from \"@/types/product\";\r\nimport { useCartActions } from \"@/hooks/useCartActions\";\r\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\r\nimport { CommercialProductCard } from \"@/components/ui/product-card-commercial\";\r\n\r\ninterface ProductItemProps {\r\n  product?: Product;\r\n  item?: Product; // Prop legacy para compatibilidad\r\n}\r\n\r\nconst ProductItem: React.FC<ProductItemProps> = ({ product, item }) => {\r\n  const { addToCart } = useCartActions();\r\n  const { trackEvent } = useAnalytics();\r\n\r\n  // Usar product o item, con validación\r\n  const productData = product || item;\r\n  \r\n  // Early return si no hay datos del producto\r\n  if (!productData) {\r\n    console.warn('ProductItem: No product data provided');\r\n    return null;\r\n  }\r\n\r\n  // add to cart\r\n  const handleAddToCart = () => {\r\n    addToCart({\r\n      ...productData,\r\n      quantity: 1,\r\n    });\r\n    \r\n    // Track analytics event\r\n    trackEvent('add_to_cart', {\r\n      product_id: productData.id,\r\n      product_name: productData.title,\r\n      price: productData.price,\r\n    });\r\n  };\r\n\r\n  // Calcular descuento si existe\r\n  const hasDiscount = productData.discountedPrice && productData.discountedPrice < productData.price;\r\n  const discount = hasDiscount\r\n    ? Math.round(((productData.price - productData.discountedPrice) / productData.price) * 100)\r\n    : undefined;\r\n\r\n  // Precio final a mostrar\r\n  const finalPrice = hasDiscount ? productData.discountedPrice : productData.price;\r\n\r\n  // Determinar badge basado en precio y características\r\n  const badge = finalPrice >= 15000\r\n    ? \"Envío gratis\"\r\n    : discount\r\n    ? \"Oferta especial\"\r\n    : \"Nuevo\";\r\n\r\n  return (\r\n    <CommercialProductCard\r\n      image={productData.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\r\n      title={productData.title}\r\n      brand={productData.brand}\r\n      price={finalPrice}\r\n      originalPrice={hasDiscount ? productData.price : undefined}\r\n      discount={discount ? `${discount}%` : undefined}\r\n      isNew={badge === \"Nuevo\"}\r\n      stock={50} // Stock por defecto para productos legacy\r\n      productId={productData.id}\r\n      cta=\"Agregar al carrito\"\r\n      onAddToCart={handleAddToCart}\r\n      showCartAnimation={true}\r\n      // Información de cuotas automática\r\n      installments={finalPrice >= 5000 ? {\r\n        quantity: 3,\r\n        amount: Math.round(finalPrice / 3),\r\n        interestFree: true\r\n      } : undefined}\r\n      // Envío gratis automático para productos >= $15000\r\n      freeShipping={finalPrice >= 15000}\r\n      shippingText={badge === \"Envío gratis\" ? \"Envío gratis\" : undefined}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}