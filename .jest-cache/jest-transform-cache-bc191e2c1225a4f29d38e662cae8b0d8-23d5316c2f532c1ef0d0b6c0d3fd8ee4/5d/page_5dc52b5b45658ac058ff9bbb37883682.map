{"version":3,"names":["cov_btmsgki38","actualCoverage","s","AdminBypass","f","user","isLoaded","_nextjs","useUser","router","_navigation","useRouter","isAuthorized","setIsAuthorized","_react","useState","loading","setLoading","useEffect","b","hasAdminRole","publicMetadata","role","privateMetadata","console","log","userId","id","email","emailAddresses","emailAddress","session","push","setTimeout","window","location","href","_jsxruntime","jsx","className","jsxs","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","firstName","lastName"],"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\app\\_disabled\\admin-bypass\\page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useUser } from '@clerk/nextjs'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport default function AdminBypass() {\r\n  const { user, isLoaded } = useUser()\r\n  const router = useRouter()\r\n  const [isAuthorized, setIsAuthorized] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (isLoaded) {\r\n      // Verificar si el usuario tiene rol de admin\r\n      const hasAdminRole = user?.publicMetadata?.role === 'admin' || \r\n                          user?.privateMetadata?.role === 'admin'\r\n      \r\n      console.log('ðŸ” [ADMIN-BYPASS] VerificaciÃ³n:', {\r\n        userId: user?.id,\r\n        email: user?.emailAddresses?.[0]?.emailAddress,\r\n        publicMetadata: user?.publicMetadata,\r\n        privateMetadata: user?.privateMetadata,\r\n        hasAdminRole\r\n      })\r\n\r\n      if (!session?.user) {\r\n        // Redirigir a login si no estÃ¡ autenticado\r\n        router.push('/signin?redirect_url=/admin-bypass')\r\n        return\r\n      }\r\n\r\n      if (hasAdminRole) {\r\n        setIsAuthorized(true)\r\n        // Redirigir al panel admin real despuÃ©s de 2 segundos\r\n        setTimeout(() => {\r\n          window.location.href = '/admin'\r\n        }, 2000)\r\n      } else {\r\n        setIsAuthorized(false)\r\n      }\r\n      \r\n      setLoading(false)\r\n    }\r\n  }, [isLoaded, user, router])\r\n\r\n  if (!isLoaded || loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Verificando permisos de administrador...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!isAuthorized) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"max-w-md mx-auto text-center\">\r\n          <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Acceso Denegado</h1>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              No tienes permisos de administrador para acceder a esta secciÃ³n.\r\n            </p>\r\n            <div className=\"space-y-4\">\r\n              <button\r\n                onClick={() => router.push('/')}\r\n                className=\"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-2 px-4 rounded-lg transition-colors\"\r\n              >\r\n                Volver al Inicio\r\n              </button>\r\n              <div className=\"text-sm text-gray-500\">\r\n                <p>Usuario: {user?.emailAddresses?.[0]?.emailAddress}</p>\r\n                <p>Rol actual: {user?.publicMetadata?.role || 'Sin rol asignado'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n      <div className=\"max-w-md mx-auto text-center\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n            </svg>\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Â¡Acceso Autorizado!</h1>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Tienes permisos de administrador. Redirigiendo al panel admin...\r\n          </p>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"animate-pulse\">\r\n              <div className=\"h-2 bg-orange-200 rounded-full\">\r\n                <div className=\"h-2 bg-orange-500 rounded-full animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => window.location.href = '/admin'}\r\n              className=\"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-2 px-4 rounded-lg transition-colors\"\r\n            >\r\n              Ir al Panel Admin Ahora\r\n            </button>\r\n            <div className=\"text-sm text-gray-500\">\r\n              <p>Bienvenido: {user?.firstName} {user?.lastName}</p>\r\n              <p>Email: {user?.emailAddresses?.[0]?.emailAddress}</p>\r\n              <p>Rol: {user?.publicMetadata?.role}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}