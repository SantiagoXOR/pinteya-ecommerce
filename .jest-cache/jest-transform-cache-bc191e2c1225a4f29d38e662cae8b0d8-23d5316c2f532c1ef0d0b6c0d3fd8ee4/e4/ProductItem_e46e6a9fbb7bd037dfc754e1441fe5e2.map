{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\Common\\ProductItem.tsx"],"sourcesContent":["'use client'\nimport React from 'react'\nimport { Product } from '@/types/product'\nimport { useCartActions } from '@/hooks/useCartActions'\nimport { useAnalytics } from '@/hooks/useAnalytics'\nimport { CommercialProductCard } from '@/components/ui/product-card-commercial'\n\ninterface ProductItemProps {\n  product?: Product\n  item?: Product // Prop legacy para compatibilidad\n}\n\nconst ProductItem: React.FC<ProductItemProps> = ({ product, item }) => {\n  const { addToCart } = useCartActions()\n  const { trackEvent } = useAnalytics()\n\n  // Usar product o item, con validación\n  const productData = product || item\n\n  // Early return si no hay datos del producto\n  if (!productData) {\n    console.warn('ProductItem: No product data provided')\n    return null\n  }\n\n  // add to cart\n  const handleAddToCart = () => {\n    addToCart({\n      ...productData,\n      quantity: 1,\n    })\n\n    // Track analytics event\n    trackEvent('add_to_cart', {\n      product_id: productData.id,\n      product_name: productData.title,\n      price: productData.price,\n    })\n  }\n\n  // Calcular descuento si existe\n  const hasDiscount = productData.discountedPrice && productData.discountedPrice < productData.price\n  const discount = hasDiscount\n    ? Math.round(((productData.price - productData.discountedPrice) / productData.price) * 100)\n    : undefined\n\n  // Precio final a mostrar\n  const finalPrice = hasDiscount ? productData.discountedPrice : productData.price\n\n  // Determinar badge basado en precio y características\n  const badge = finalPrice >= 15000 ? 'Envío gratis' : discount ? 'Oferta especial' : 'Nuevo'\n\n  return (\n    <CommercialProductCard\n      image={productData.imgs?.previews?.[0] || '/images/products/placeholder.svg'}\n      title={productData.title}\n      brand={productData.brand}\n      price={finalPrice}\n      originalPrice={hasDiscount ? productData.price : undefined}\n      discount={discount ? `${discount}%` : undefined}\n      isNew={badge === 'Nuevo'}\n      stock={50} // Stock por defecto para productos legacy\n      productId={productData.id}\n      cta='Agregar al carrito'\n      onAddToCart={handleAddToCart}\n      showCartAnimation={true}\n      // Información de cuotas automática\n      installments={\n        finalPrice >= 5000\n          ? {\n              quantity: 3,\n              amount: Math.round(finalPrice / 3),\n              interestFree: true,\n            }\n          : undefined\n      }\n      // Envío gratis automático para productos >= $15000\n      freeShipping={finalPrice >= 15000}\n      shippingText={badge === 'Envío gratis' ? 'Envío gratis' : undefined}\n    />\n  )\n}\n\nexport default ProductItem\n"],"names":["ProductItem","product","item","addToCart","useCartActions","trackEvent","useAnalytics","productData","console","warn","handleAddToCart","quantity","product_id","id","product_name","title","price","hasDiscount","discountedPrice","discount","Math","round","undefined","finalPrice","badge","CommercialProductCard","image","imgs","previews","brand","originalPrice","isNew","stock","productId","cta","onAddToCart","showCartAnimation","installments","amount","interestFree","freeShipping","shippingText"],"mappings":"AAAA;;;;;+BAmFA;;;eAAA;;;;8DAlFkB;gCAEa;8BACF;uCACS;;;;;;AAOtC,MAAMA,cAA0C,CAAC,EAAEC,OAAO,EAAEC,IAAI,EAAE;IAChE,MAAM,EAAEC,SAAS,EAAE,GAAGC,IAAAA,8BAAc;IACpC,MAAM,EAAEC,UAAU,EAAE,GAAGC,IAAAA,0BAAY;IAEnC,sCAAsC;IACtC,MAAMC,cAAcN,WAAWC;IAE/B,4CAA4C;IAC5C,IAAI,CAACK,aAAa;QAChBC,QAAQC,IAAI,CAAC;QACb,OAAO;IACT;IAEA,cAAc;IACd,MAAMC,kBAAkB;QACtBP,UAAU;YACR,GAAGI,WAAW;YACdI,UAAU;QACZ;QAEA,wBAAwB;QACxBN,WAAW,eAAe;YACxBO,YAAYL,YAAYM,EAAE;YAC1BC,cAAcP,YAAYQ,KAAK;YAC/BC,OAAOT,YAAYS,KAAK;QAC1B;IACF;IAEA,+BAA+B;IAC/B,MAAMC,cAAcV,YAAYW,eAAe,IAAIX,YAAYW,eAAe,GAAGX,YAAYS,KAAK;IAClG,MAAMG,WAAWF,cACbG,KAAKC,KAAK,CAAC,AAAEd,CAAAA,YAAYS,KAAK,GAAGT,YAAYW,eAAe,AAAD,IAAKX,YAAYS,KAAK,GAAI,OACrFM;IAEJ,yBAAyB;IACzB,MAAMC,aAAaN,cAAcV,YAAYW,eAAe,GAAGX,YAAYS,KAAK;IAEhF,sDAAsD;IACtD,MAAMQ,QAAQD,cAAc,QAAQ,iBAAiBJ,WAAW,oBAAoB;IAEpF,qBACE,qBAACM,4CAAqB;QACpBC,OAAOnB,YAAYoB,IAAI,EAAEC,UAAU,CAAC,EAAE,IAAI;QAC1Cb,OAAOR,YAAYQ,KAAK;QACxBc,OAAOtB,YAAYsB,KAAK;QACxBb,OAAOO;QACPO,eAAeb,cAAcV,YAAYS,KAAK,GAAGM;QACjDH,UAAUA,WAAW,GAAGA,SAAS,CAAC,CAAC,GAAGG;QACtCS,OAAOP,UAAU;QACjBQ,OAAO;QACPC,WAAW1B,YAAYM,EAAE;QACzBqB,KAAI;QACJC,aAAazB;QACb0B,mBAAmB;QACnB,mCAAmC;QACnCC,cACEd,cAAc,OACV;YACEZ,UAAU;YACV2B,QAAQlB,KAAKC,KAAK,CAACE,aAAa;YAChCgB,cAAc;QAChB,IACAjB;QAEN,mDAAmD;QACnDkB,cAAcjB,cAAc;QAC5BkB,cAAcjB,UAAU,iBAAiB,iBAAiBF;;AAGhE;MAEA,WAAetB"}