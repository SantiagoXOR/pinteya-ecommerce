fdb0d456106807f1d693ed96078ec618
/**
 * Tests para las Utilidades RLS Enterprise
 * Verifica que Row Level Security funciona correctamente con las utilidades enterprise
 */ // Mock de Supabase
"use strict";
jest.mock('@/lib/supabase', ()=>({
        supabaseAdmin: {
            from: jest.fn(()=>({
                    select: jest.fn(()=>({
                            eq: jest.fn(()=>({
                                    single: jest.fn()
                                }))
                        })),
                    insert: jest.fn(()=>({
                            select: jest.fn(()=>({
                                    single: jest.fn()
                                }))
                        }))
                }))
        }
    }));
// Mock de createClient de Supabase
jest.mock('@supabase/supabase-js', ()=>({
        createClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        select: jest.fn(()=>({
                                eq: jest.fn(()=>({
                                        single: jest.fn()
                                    }))
                            }))
                    }))
            }))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _enterpriserlsutils = require("../lib/auth/enterprise-rls-utils");
const _supabase = require("../lib/integrations/supabase");
const _supabasejs = require("@supabase/supabase-js");
describe('Utilidades RLS Enterprise', ()=>{
    let mockEnterpriseContext;
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock enterprise context
        mockEnterpriseContext = {
            userId: 'user_123',
            sessionId: 'sess_123',
            email: 'admin@test.com',
            role: 'admin',
            permissions: [
                'admin_access',
                'products_create',
                'products_read'
            ],
            sessionValid: true,
            securityLevel: 'critical',
            ipAddress: '127.0.0.1',
            userAgent: 'test-agent',
            supabase: _supabase.supabaseAdmin,
            validations: {
                jwtValid: true,
                csrfValid: true,
                rateLimitPassed: true,
                originValid: true
            }
        };
        // Mock Supabase admin response
        _supabase.supabaseAdmin.from.mockReturnValue({
            select: jest.fn().mockReturnValue({
                eq: jest.fn().mockReturnValue({
                    single: jest.fn().mockResolvedValue({
                        data: {
                            id: 'profile_123',
                            supabase_user_id: 'supabase_123',
                            clerk_user_id: 'user_123',
                            role_id: 1,
                            permissions: [
                                'admin_access',
                                'products_create'
                            ],
                            is_active: true,
                            user_roles: {
                                role_name: 'admin'
                            }
                        },
                        error: null
                    })
                })
            })
        });
    });
    describe('validateRLSContext', ()=>{
        it('debe validar contexto RLS para usuario admin', async ()=>{
            const result = await (0, _enterpriserlsutils.validateRLSContext)(mockEnterpriseContext);
            expect(result.valid).toBe(true);
            expect(result.context).toBeDefined();
            expect(result.context?.userId).toBe('user_123');
            expect(result.context?.role).toBe('admin');
            expect(result.context?.permissions).toContain('admin_access');
            expect(result.context?.isActive).toBe(true);
        });
        it('debe fallar si usuario está inactivo', async ()=>{
            _supabase.supabaseAdmin.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'profile_123',
                                is_active: false,
                                user_roles: {
                                    role_name: 'user'
                                }
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _enterpriserlsutils.validateRLSContext)(mockEnterpriseContext);
            expect(result.valid).toBe(false);
            expect(result.error).toBe('Usuario inactivo o no encontrado');
            expect(result.code).toBe('USER_INACTIVE');
        });
        it('debe fallar si hay error en Supabase', async ()=>{
            _supabase.supabaseAdmin.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'Database error'
                            }
                        })
                    })
                })
            });
            const result = await (0, _enterpriserlsutils.validateRLSContext)(mockEnterpriseContext);
            expect(result.valid).toBe(false);
            expect(result.error).toBe('Error obteniendo perfil de usuario');
            expect(result.code).toBe('PROFILE_ERROR');
        });
    });
    describe('createUserSupabaseClient', ()=>{
        it('debe crear cliente Supabase con contexto de usuario', ()=>{
            // Mock environment variables
            process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
            process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';
            const client = (0, _enterpriserlsutils.createUserSupabaseClient)('supabase_123', 'access-token');
            expect(client).toBeDefined();
            expect(_supabasejs.createClient).toHaveBeenCalledWith('https://test.supabase.co', 'test-anon-key', expect.objectContaining({
                auth: {
                    autoRefreshToken: false,
                    persistSession: false
                },
                global: {
                    headers: {
                        'X-User-ID': 'supabase_123',
                        'Authorization': 'Bearer access-token'
                    }
                }
            }));
        });
        it('debe retornar null si configuración no está disponible', ()=>{
            delete process.env.NEXT_PUBLIC_SUPABASE_URL;
            delete process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;
            const client = (0, _enterpriserlsutils.createUserSupabaseClient)('supabase_123');
            expect(client).toBeNull();
        });
    });
    describe('executeWithRLS', ()=>{
        it('debe ejecutar consulta con RLS habilitado', async ()=>{
            // Mock environment variables para createUserSupabaseClient
            process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
            process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';
            const mockQueryFunction = jest.fn().mockResolvedValue({
                products: [
                    {
                        id: 1,
                        name: 'Test Product'
                    }
                ],
                total: 1
            });
            const result = await (0, _enterpriserlsutils.executeWithRLS)(mockEnterpriseContext, mockQueryFunction, {
                enforceRLS: true,
                auditLog: true
            });
            expect(result.success).toBe(true);
            expect(result.data).toBeDefined();
            expect(mockQueryFunction).toHaveBeenCalled();
        });
        it('debe usar cliente admin para bypass RLS si es admin', async ()=>{
            const mockQueryFunction = jest.fn().mockResolvedValue({
                data: 'test'
            });
            const result = await (0, _enterpriserlsutils.executeWithRLS)(mockEnterpriseContext, mockQueryFunction, {
                bypassRLS: true
            });
            expect(result.success).toBe(true);
            expect(mockQueryFunction).toHaveBeenCalledWith(_supabase.supabaseAdmin, expect.objectContaining({
                role: 'admin'
            }));
        });
        it('debe fallar si validación RLS falla', async ()=>{
            _supabase.supabaseAdmin.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'User not found'
                            }
                        })
                    })
                })
            });
            const mockQueryFunction = jest.fn();
            const result = await (0, _enterpriserlsutils.executeWithRLS)(mockEnterpriseContext, mockQueryFunction);
            expect(result.success).toBe(false);
            expect(result.error).toBe('Error obteniendo perfil de usuario');
            expect(mockQueryFunction).not.toHaveBeenCalled();
        });
    });
    describe('checkRLSPermission', ()=>{
        it('debe permitir acceso a admin siempre', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'admin',
                permissions: [],
                isActive: true
            };
            const hasPermission = (0, _enterpriserlsutils.checkRLSPermission)(rlsContext, 'any_permission');
            expect(hasPermission).toBe(true);
        });
        it('debe permitir acceso si usuario tiene permiso específico', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [
                    'products_read'
                ],
                isActive: true
            };
            const hasPermission = (0, _enterpriserlsutils.checkRLSPermission)(rlsContext, 'products_read');
            expect(hasPermission).toBe(true);
        });
        it('debe permitir acceso si usuario es propietario del recurso', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [],
                isActive: true
            };
            const hasPermission = (0, _enterpriserlsutils.checkRLSPermission)(rlsContext, 'edit_profile', 'user_123');
            expect(hasPermission).toBe(true);
        });
        it('debe denegar acceso si no tiene permisos', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [
                    'basic_access'
                ],
                isActive: true
            };
            const hasPermission = (0, _enterpriserlsutils.checkRLSPermission)(rlsContext, 'admin_access');
            expect(hasPermission).toBe(false);
        });
    });
    describe('createRLSFilters', ()=>{
        it('debe crear filtros para user_profiles para usuario normal', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [],
                isActive: true
            };
            const filters = (0, _enterpriserlsutils.createRLSFilters)(rlsContext, 'user_profiles');
            expect(filters).toEqual({
                clerk_user_id: 'user_123'
            });
        });
        it('debe crear filtros para products para usuario normal', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [],
                isActive: true
            };
            const filters = (0, _enterpriserlsutils.createRLSFilters)(rlsContext, 'products');
            expect(filters).toEqual({
                is_active: true
            });
        });
        it('no debe crear filtros para admin', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'admin',
                permissions: [
                    'admin_access'
                ],
                isActive: true
            };
            const filters = (0, _enterpriserlsutils.createRLSFilters)(rlsContext, 'products');
            expect(filters).toEqual({});
        });
        it('debe crear filtros para orders para usuario normal', ()=>{
            const rlsContext = {
                userId: 'user_123',
                role: 'user',
                permissions: [],
                isActive: true
            };
            const filters = (0, _enterpriserlsutils.createRLSFilters)(rlsContext, 'orders');
            expect(filters).toEqual({
                user_id: 'user_123'
            });
        });
    });
    describe('withRLS middleware', ()=>{
        it('debe ejecutar handler si contexto enterprise está disponible', async ()=>{
            const mockRequest = {
                enterpriseAuth: mockEnterpriseContext
            };
            const mockResponse = {
                status: jest.fn(),
                json: jest.fn()
            };
            const mockHandler = jest.fn().mockResolvedValue({
                success: true
            });
            const middleware = (0, _enterpriserlsutils.withRLS)();
            const wrappedHandler = middleware(mockHandler);
            const result = await wrappedHandler(mockRequest, mockResponse);
            expect(mockHandler).toHaveBeenCalledWith(mockRequest, mockResponse);
            expect(mockRequest.rlsContext).toBeDefined();
        });
        it('debe retornar error si contexto enterprise no está disponible', async ()=>{
            const mockRequest = {};
            const mockResponse = {
                status: jest.fn().mockReturnThis(),
                json: jest.fn()
            };
            const mockHandler = jest.fn();
            const middleware = (0, _enterpriserlsutils.withRLS)();
            const wrappedHandler = middleware(mockHandler);
            const result = await wrappedHandler(mockRequest, mockResponse);
            expect(mockHandler).not.toHaveBeenCalled();
            // Para App Router, verifica que retorna Response
            if (result && typeof result === 'object' && 'status' in result) {
                expect(result.status).toBe(401);
            } else {
                // Para Pages Router, verifica que llama a response methods
                expect(mockResponse.status).toHaveBeenCalledWith(401);
                expect(mockResponse.json).toHaveBeenCalledWith(expect.objectContaining({
                    success: false,
                    error: 'Contexto enterprise no disponible',
                    code: 'NO_ENTERPRISE_CONTEXT'
                }));
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcX190ZXN0c19fXFxlbnRlcnByaXNlLXJscy11dGlscy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUZXN0cyBwYXJhIGxhcyBVdGlsaWRhZGVzIFJMUyBFbnRlcnByaXNlXHJcbiAqIFZlcmlmaWNhIHF1ZSBSb3cgTGV2ZWwgU2VjdXJpdHkgZnVuY2lvbmEgY29ycmVjdGFtZW50ZSBjb24gbGFzIHV0aWxpZGFkZXMgZW50ZXJwcmlzZVxyXG4gKi9cclxuXHJcbi8vIE1vY2sgZGUgU3VwYWJhc2VcclxuamVzdC5tb2NrKCdAL2xpYi9zdXBhYmFzZScsICgpID0+ICh7XHJcbiAgc3VwYWJhc2VBZG1pbjoge1xyXG4gICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKClcclxuICAgICAgICB9KSlcclxuICAgICAgfSkpLFxyXG4gICAgICBpbnNlcnQ6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH0pKVxyXG4gICAgfSkpXHJcbiAgfVxyXG59KSk7XHJcblxyXG4vLyBNb2NrIGRlIGNyZWF0ZUNsaWVudCBkZSBTdXBhYmFzZVxyXG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcycsICgpID0+ICh7XHJcbiAgY3JlYXRlQ2xpZW50OiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICBmcm9tOiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKVxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9KSlcclxuICAgIH0pKVxyXG4gIH0pKVxyXG59KSk7XHJcblxyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRlUkxTQ29udGV4dCxcclxuICBjcmVhdGVVc2VyU3VwYWJhc2VDbGllbnQsXHJcbiAgZXhlY3V0ZVdpdGhSTFMsXHJcbiAgY2hlY2tSTFNQZXJtaXNzaW9uLFxyXG4gIGNyZWF0ZVJMU0ZpbHRlcnMsXHJcbiAgd2l0aFJMU1xyXG59IGZyb20gJ0AvbGliL2F1dGgvZW50ZXJwcmlzZS1ybHMtdXRpbHMnO1xyXG5pbXBvcnQgdHlwZSB7IEVudGVycHJpc2VBdXRoQ29udGV4dCB9IGZyb20gJ0AvbGliL2F1dGgvZW50ZXJwcmlzZS1hdXRoLXV0aWxzJztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucy9zdXBhYmFzZSc7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5kZXNjcmliZSgnVXRpbGlkYWRlcyBSTFMgRW50ZXJwcmlzZScsICgpID0+IHtcclxuICBsZXQgbW9ja0VudGVycHJpc2VDb250ZXh0OiBFbnRlcnByaXNlQXV0aENvbnRleHQ7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcblxyXG4gICAgLy8gTW9jayBlbnRlcnByaXNlIGNvbnRleHRcclxuICAgIG1vY2tFbnRlcnByaXNlQ29udGV4dCA9IHtcclxuICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxyXG4gICAgICBzZXNzaW9uSWQ6ICdzZXNzXzEyMycsXHJcbiAgICAgIGVtYWlsOiAnYWRtaW5AdGVzdC5jb20nLFxyXG4gICAgICByb2xlOiAnYWRtaW4nLFxyXG4gICAgICBwZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnLCAncHJvZHVjdHNfY3JlYXRlJywgJ3Byb2R1Y3RzX3JlYWQnXSxcclxuICAgICAgc2Vzc2lvblZhbGlkOiB0cnVlLFxyXG4gICAgICBzZWN1cml0eUxldmVsOiAnY3JpdGljYWwnLFxyXG4gICAgICBpcEFkZHJlc3M6ICcxMjcuMC4wLjEnLFxyXG4gICAgICB1c2VyQWdlbnQ6ICd0ZXN0LWFnZW50JyxcclxuICAgICAgc3VwYWJhc2U6IHN1cGFiYXNlQWRtaW4sXHJcbiAgICAgIHZhbGlkYXRpb25zOiB7XHJcbiAgICAgICAgand0VmFsaWQ6IHRydWUsXHJcbiAgICAgICAgY3NyZlZhbGlkOiB0cnVlLFxyXG4gICAgICAgIHJhdGVMaW1pdFBhc3NlZDogdHJ1ZSxcclxuICAgICAgICBvcmlnaW5WYWxpZDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE1vY2sgU3VwYWJhc2UgYWRtaW4gcmVzcG9uc2VcclxuICAgIChzdXBhYmFzZUFkbWluLmZyb20gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIGlkOiAncHJvZmlsZV8xMjMnLFxyXG4gICAgICAgICAgICAgIHN1cGFiYXNlX3VzZXJfaWQ6ICdzdXBhYmFzZV8xMjMnLFxyXG4gICAgICAgICAgICAgIGNsZXJrX3VzZXJfaWQ6ICd1c2VyXzEyMycsXHJcbiAgICAgICAgICAgICAgcm9sZV9pZDogMSxcclxuICAgICAgICAgICAgICBwZXJtaXNzaW9uczogWydhZG1pbl9hY2Nlc3MnLCAncHJvZHVjdHNfY3JlYXRlJ10sXHJcbiAgICAgICAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHVzZXJfcm9sZXM6IHsgcm9sZV9uYW1lOiAnYWRtaW4nIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IG51bGxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndmFsaWRhdGVSTFNDb250ZXh0JywgKCkgPT4ge1xyXG4gICAgaXQoJ2RlYmUgdmFsaWRhciBjb250ZXh0byBSTFMgcGFyYSB1c3VhcmlvIGFkbWluJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2YWxpZGF0ZVJMU0NvbnRleHQobW9ja0VudGVycHJpc2VDb250ZXh0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZXh0Py51c2VySWQpLnRvQmUoJ3VzZXJfMTIzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGV4dD8ucm9sZSkudG9CZSgnYWRtaW4nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZXh0Py5wZXJtaXNzaW9ucykudG9Db250YWluKCdhZG1pbl9hY2Nlc3MnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZXh0Py5pc0FjdGl2ZSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZWJlIGZhbGxhciBzaSB1c3VhcmlvIGVzdMOhIGluYWN0aXZvJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAoc3VwYWJhc2VBZG1pbi5mcm9tIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdwcm9maWxlXzEyMycsXHJcbiAgICAgICAgICAgICAgICBpc19hY3RpdmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9yb2xlczogeyByb2xlX25hbWU6ICd1c2VyJyB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlUkxTQ29udGV4dChtb2NrRW50ZXJwcmlzZUNvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1VzdWFyaW8gaW5hY3Rpdm8gbyBubyBlbmNvbnRyYWRvJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29kZSkudG9CZSgnVVNFUl9JTkFDVElWRScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RlYmUgZmFsbGFyIHNpIGhheSBlcnJvciBlbiBTdXBhYmFzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgKHN1cGFiYXNlQWRtaW4uZnJvbSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVSTFNDb250ZXh0KG1vY2tFbnRlcnByaXNlQ29udGV4dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnRXJyb3Igb2J0ZW5pZW5kbyBwZXJmaWwgZGUgdXN1YXJpbycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvZGUpLnRvQmUoJ1BST0ZJTEVfRVJST1InKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY3JlYXRlVXNlclN1cGFiYXNlQ2xpZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ2RlYmUgY3JlYXIgY2xpZW50ZSBTdXBhYmFzZSBjb24gY29udGV4dG8gZGUgdXN1YXJpbycsICgpID0+IHtcclxuICAgICAgLy8gTW9jayBlbnZpcm9ubWVudCB2YXJpYWJsZXNcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMID0gJ2h0dHBzOi8vdGVzdC5zdXBhYmFzZS5jbyc7XHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZID0gJ3Rlc3QtYW5vbi1rZXknO1xyXG5cclxuICAgICAgY29uc3QgY2xpZW50ID0gY3JlYXRlVXNlclN1cGFiYXNlQ2xpZW50KCdzdXBhYmFzZV8xMjMnLCAnYWNjZXNzLXRva2VuJyk7XHJcblxyXG4gICAgICBleHBlY3QoY2xpZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY3JlYXRlQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnaHR0cHM6Ly90ZXN0LnN1cGFiYXNlLmNvJyxcclxuICAgICAgICAndGVzdC1hbm9uLWtleScsXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ2xvYmFsOiB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAnWC1Vc2VyLUlEJzogJ3N1cGFiYXNlXzEyMycsXHJcbiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIGFjY2Vzcy10b2tlbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGViZSByZXRvcm5hciBudWxsIHNpIGNvbmZpZ3VyYWNpw7NuIG5vIGVzdMOhIGRpc3BvbmlibGUnLCAoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbiAgICAgIGNvbnN0IGNsaWVudCA9IGNyZWF0ZVVzZXJTdXBhYmFzZUNsaWVudCgnc3VwYWJhc2VfMTIzJyk7XHJcblxyXG4gICAgICBleHBlY3QoY2xpZW50KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdleGVjdXRlV2l0aFJMUycsICgpID0+IHtcclxuICAgIGl0KCdkZWJlIGVqZWN1dGFyIGNvbnN1bHRhIGNvbiBSTFMgaGFiaWxpdGFkbycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTW9jayBlbnZpcm9ubWVudCB2YXJpYWJsZXMgcGFyYSBjcmVhdGVVc2VyU3VwYWJhc2VDbGllbnRcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMID0gJ2h0dHBzOi8vdGVzdC5zdXBhYmFzZS5jbyc7XHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZID0gJ3Rlc3QtYW5vbi1rZXknO1xyXG5cclxuICAgICAgY29uc3QgbW9ja1F1ZXJ5RnVuY3Rpb24gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIHByb2R1Y3RzOiBbeyBpZDogMSwgbmFtZTogJ1Rlc3QgUHJvZHVjdCcgfV0sXHJcbiAgICAgICAgdG90YWw6IDFcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlV2l0aFJMUyhcclxuICAgICAgICBtb2NrRW50ZXJwcmlzZUNvbnRleHQsXHJcbiAgICAgICAgbW9ja1F1ZXJ5RnVuY3Rpb24sXHJcbiAgICAgICAgeyBlbmZvcmNlUkxTOiB0cnVlLCBhdWRpdExvZzogdHJ1ZSB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KG1vY2tRdWVyeUZ1bmN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGViZSB1c2FyIGNsaWVudGUgYWRtaW4gcGFyYSBieXBhc3MgUkxTIHNpIGVzIGFkbWluJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUXVlcnlGdW5jdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6ICd0ZXN0JyB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVXaXRoUkxTKFxyXG4gICAgICAgIG1vY2tFbnRlcnByaXNlQ29udGV4dCxcclxuICAgICAgICBtb2NrUXVlcnlGdW5jdGlvbixcclxuICAgICAgICB7IGJ5cGFzc1JMUzogdHJ1ZSB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlGdW5jdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgc3VwYWJhc2VBZG1pbixcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHJvbGU6ICdhZG1pbicgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZWJlIGZhbGxhciBzaSB2YWxpZGFjacOzbiBSTFMgZmFsbGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChzdXBhYmFzZUFkbWluLmZyb20gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCcgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IG1vY2tRdWVyeUZ1bmN0aW9uID0gamVzdC5mbigpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVdpdGhSTFMoXHJcbiAgICAgICAgbW9ja0VudGVycHJpc2VDb250ZXh0LFxyXG4gICAgICAgIG1vY2tRdWVyeUZ1bmN0aW9uXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdFcnJvciBvYnRlbmllbmRvIHBlcmZpbCBkZSB1c3VhcmlvJyk7XHJcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlGdW5jdGlvbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY2hlY2tSTFNQZXJtaXNzaW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ2RlYmUgcGVybWl0aXIgYWNjZXNvIGEgYWRtaW4gc2llbXByZScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmxzQ29udGV4dCA9IHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXHJcbiAgICAgICAgcm9sZTogJ2FkbWluJyBhcyBjb25zdCxcclxuICAgICAgICBwZXJtaXNzaW9uczogW10sXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSBjaGVja1JMU1Blcm1pc3Npb24ocmxzQ29udGV4dCwgJ2FueV9wZXJtaXNzaW9uJyk7XHJcblxyXG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZWJlIHBlcm1pdGlyIGFjY2VzbyBzaSB1c3VhcmlvIHRpZW5lIHBlcm1pc28gZXNwZWPDrWZpY28nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJsc0NvbnRleHQgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxyXG4gICAgICAgIHJvbGU6ICd1c2VyJyBhcyBjb25zdCxcclxuICAgICAgICBwZXJtaXNzaW9uczogWydwcm9kdWN0c19yZWFkJ10sXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSBjaGVja1JMU1Blcm1pc3Npb24ocmxzQ29udGV4dCwgJ3Byb2R1Y3RzX3JlYWQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RlYmUgcGVybWl0aXIgYWNjZXNvIHNpIHVzdWFyaW8gZXMgcHJvcGlldGFyaW8gZGVsIHJlY3Vyc28nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJsc0NvbnRleHQgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxyXG4gICAgICAgIHJvbGU6ICd1c2VyJyBhcyBjb25zdCxcclxuICAgICAgICBwZXJtaXNzaW9uczogW10sXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSBjaGVja1JMU1Blcm1pc3Npb24ocmxzQ29udGV4dCwgJ2VkaXRfcHJvZmlsZScsICd1c2VyXzEyMycpO1xyXG5cclxuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24pLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGViZSBkZW5lZ2FyIGFjY2VzbyBzaSBubyB0aWVuZSBwZXJtaXNvcycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmxzQ29udGV4dCA9IHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyXzEyMycsXHJcbiAgICAgICAgcm9sZTogJ3VzZXInIGFzIGNvbnN0LFxyXG4gICAgICAgIHBlcm1pc3Npb25zOiBbJ2Jhc2ljX2FjY2VzcyddLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gY2hlY2tSTFNQZXJtaXNzaW9uKHJsc0NvbnRleHQsICdhZG1pbl9hY2Nlc3MnKTtcclxuXHJcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY3JlYXRlUkxTRmlsdGVycycsICgpID0+IHtcclxuICAgIGl0KCdkZWJlIGNyZWFyIGZpbHRyb3MgcGFyYSB1c2VyX3Byb2ZpbGVzIHBhcmEgdXN1YXJpbyBub3JtYWwnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJsc0NvbnRleHQgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxyXG4gICAgICAgIHJvbGU6ICd1c2VyJyBhcyBjb25zdCxcclxuICAgICAgICBwZXJtaXNzaW9uczogW10sXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSBjcmVhdGVSTFNGaWx0ZXJzKHJsc0NvbnRleHQsICd1c2VyX3Byb2ZpbGVzJyk7XHJcblxyXG4gICAgICBleHBlY3QoZmlsdGVycykudG9FcXVhbCh7XHJcbiAgICAgICAgY2xlcmtfdXNlcl9pZDogJ3VzZXJfMTIzJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZWJlIGNyZWFyIGZpbHRyb3MgcGFyYSBwcm9kdWN0cyBwYXJhIHVzdWFyaW8gbm9ybWFsJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBybHNDb250ZXh0ID0ge1xyXG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcclxuICAgICAgICByb2xlOiAndXNlcicgYXMgY29uc3QsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFtdLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJzID0gY3JlYXRlUkxTRmlsdGVycyhybHNDb250ZXh0LCAncHJvZHVjdHMnKTtcclxuXHJcbiAgICAgIGV4cGVjdChmaWx0ZXJzKS50b0VxdWFsKHtcclxuICAgICAgICBpc19hY3RpdmU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnbm8gZGViZSBjcmVhciBmaWx0cm9zIHBhcmEgYWRtaW4nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJsc0NvbnRleHQgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndXNlcl8xMjMnLFxyXG4gICAgICAgIHJvbGU6ICdhZG1pbicgYXMgY29uc3QsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFsnYWRtaW5fYWNjZXNzJ10sXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSBjcmVhdGVSTFNGaWx0ZXJzKHJsc0NvbnRleHQsICdwcm9kdWN0cycpO1xyXG5cclxuICAgICAgZXhwZWN0KGZpbHRlcnMpLnRvRXF1YWwoe30pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RlYmUgY3JlYXIgZmlsdHJvcyBwYXJhIG9yZGVycyBwYXJhIHVzdWFyaW8gbm9ybWFsJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBybHNDb250ZXh0ID0ge1xyXG4gICAgICAgIHVzZXJJZDogJ3VzZXJfMTIzJyxcclxuICAgICAgICByb2xlOiAndXNlcicgYXMgY29uc3QsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFtdLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJzID0gY3JlYXRlUkxTRmlsdGVycyhybHNDb250ZXh0LCAnb3JkZXJzJyk7XHJcblxyXG4gICAgICBleHBlY3QoZmlsdGVycykudG9FcXVhbCh7XHJcbiAgICAgICAgdXNlcl9pZDogJ3VzZXJfMTIzJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnd2l0aFJMUyBtaWRkbGV3YXJlJywgKCkgPT4ge1xyXG4gICAgaXQoJ2RlYmUgZWplY3V0YXIgaGFuZGxlciBzaSBjb250ZXh0byBlbnRlcnByaXNlIGVzdMOhIGRpc3BvbmlibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGVudGVycHJpc2VBdXRoOiBtb2NrRW50ZXJwcmlzZUNvbnRleHRcclxuICAgICAgfSBhcyBhbnk7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHsgc3RhdHVzOiBqZXN0LmZuKCksIGpzb246IGplc3QuZm4oKSB9O1xyXG4gICAgICBjb25zdCBtb2NrSGFuZGxlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcblxyXG4gICAgICBjb25zdCBtaWRkbGV3YXJlID0gd2l0aFJMUygpO1xyXG4gICAgICBjb25zdCB3cmFwcGVkSGFuZGxlciA9IG1pZGRsZXdhcmUobW9ja0hhbmRsZXIpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd3JhcHBlZEhhbmRsZXIobW9ja1JlcXVlc3QsIG1vY2tSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja0hhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tSZXF1ZXN0LCBtb2NrUmVzcG9uc2UpO1xyXG4gICAgICBleHBlY3QobW9ja1JlcXVlc3QucmxzQ29udGV4dCkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZWJlIHJldG9ybmFyIGVycm9yIHNpIGNvbnRleHRvIGVudGVycHJpc2Ugbm8gZXN0w6EgZGlzcG9uaWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7fSBhcyBhbnk7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcclxuICAgICAgICBzdGF0dXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGpzb246IGplc3QuZm4oKVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBtb2NrSGFuZGxlciA9IGplc3QuZm4oKTtcclxuXHJcbiAgICAgIGNvbnN0IG1pZGRsZXdhcmUgPSB3aXRoUkxTKCk7XHJcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gbWlkZGxld2FyZShtb2NrSGFuZGxlcik7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3cmFwcGVkSGFuZGxlcihtb2NrUmVxdWVzdCwgbW9ja1Jlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrSGFuZGxlcikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuXHJcbiAgICAgIC8vIFBhcmEgQXBwIFJvdXRlciwgdmVyaWZpY2EgcXVlIHJldG9ybmEgUmVzcG9uc2VcclxuICAgICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzJyBpbiByZXN1bHQpIHtcclxuICAgICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSg0MDEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFBhcmEgUGFnZXMgUm91dGVyLCB2ZXJpZmljYSBxdWUgbGxhbWEgYSByZXNwb25zZSBtZXRob2RzXHJcbiAgICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMSk7XHJcbiAgICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGVycm9yOiAnQ29udGV4dG8gZW50ZXJwcmlzZSBubyBkaXNwb25pYmxlJyxcclxuICAgICAgICAgICAgY29kZTogJ05PX0VOVEVSUFJJU0VfQ09OVEVYVCdcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJzdXBhYmFzZUFkbWluIiwiZnJvbSIsImZuIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJpbnNlcnQiLCJjcmVhdGVDbGllbnQiLCJkZXNjcmliZSIsIm1vY2tFbnRlcnByaXNlQ29udGV4dCIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwidXNlcklkIiwic2Vzc2lvbklkIiwiZW1haWwiLCJyb2xlIiwicGVybWlzc2lvbnMiLCJzZXNzaW9uVmFsaWQiLCJzZWN1cml0eUxldmVsIiwiaXBBZGRyZXNzIiwidXNlckFnZW50Iiwic3VwYWJhc2UiLCJ2YWxpZGF0aW9ucyIsImp3dFZhbGlkIiwiY3NyZlZhbGlkIiwicmF0ZUxpbWl0UGFzc2VkIiwib3JpZ2luVmFsaWQiLCJtb2NrUmV0dXJuVmFsdWUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJpZCIsInN1cGFiYXNlX3VzZXJfaWQiLCJjbGVya191c2VyX2lkIiwicm9sZV9pZCIsImlzX2FjdGl2ZSIsInVzZXJfcm9sZXMiLCJyb2xlX25hbWUiLCJlcnJvciIsIml0IiwicmVzdWx0IiwidmFsaWRhdGVSTFNDb250ZXh0IiwiZXhwZWN0IiwidmFsaWQiLCJ0b0JlIiwiY29udGV4dCIsInRvQmVEZWZpbmVkIiwidG9Db250YWluIiwiaXNBY3RpdmUiLCJjb2RlIiwibWVzc2FnZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNsaWVudCIsImNyZWF0ZVVzZXJTdXBhYmFzZUNsaWVudCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJnbG9iYWwiLCJoZWFkZXJzIiwidG9CZU51bGwiLCJtb2NrUXVlcnlGdW5jdGlvbiIsInByb2R1Y3RzIiwibmFtZSIsInRvdGFsIiwiZXhlY3V0ZVdpdGhSTFMiLCJlbmZvcmNlUkxTIiwiYXVkaXRMb2ciLCJzdWNjZXNzIiwidG9IYXZlQmVlbkNhbGxlZCIsImJ5cGFzc1JMUyIsIm5vdCIsInJsc0NvbnRleHQiLCJoYXNQZXJtaXNzaW9uIiwiY2hlY2tSTFNQZXJtaXNzaW9uIiwiZmlsdGVycyIsImNyZWF0ZVJMU0ZpbHRlcnMiLCJ0b0VxdWFsIiwidXNlcl9pZCIsIm1vY2tSZXF1ZXN0IiwiZW50ZXJwcmlzZUF1dGgiLCJtb2NrUmVzcG9uc2UiLCJzdGF0dXMiLCJqc29uIiwibW9ja0hhbmRsZXIiLCJtaWRkbGV3YXJlIiwid2l0aFJMUyIsIndyYXBwZWRIYW5kbGVyIiwibW9ja1JldHVyblRoaXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQyxHQUVELG1CQUFtQjs7QUFDbkJBLEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDQyxlQUFlO1lBQ2JDLE1BQU1ILEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0JBQ25CQyxRQUFRTCxLQUFLSSxFQUFFLENBQUMsSUFBTyxDQUFBOzRCQUNyQkUsSUFBSU4sS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtvQ0FDakJHLFFBQVFQLEtBQUtJLEVBQUU7Z0NBQ2pCLENBQUE7d0JBQ0YsQ0FBQTtvQkFDQUksUUFBUVIsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTs0QkFDckJDLFFBQVFMLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7b0NBQ3JCRyxRQUFRUCxLQUFLSSxFQUFFO2dDQUNqQixDQUFBO3dCQUNGLENBQUE7Z0JBQ0YsQ0FBQTtRQUNGO0lBQ0YsQ0FBQTtBQUVBLG1DQUFtQztBQUNuQ0osS0FBS0MsSUFBSSxDQUFDLHlCQUF5QixJQUFPLENBQUE7UUFDeENRLGNBQWNULEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQzNCRCxNQUFNSCxLQUFLSSxFQUFFLENBQUMsSUFBTyxDQUFBO3dCQUNuQkMsUUFBUUwsS0FBS0ksRUFBRSxDQUFDLElBQU8sQ0FBQTtnQ0FDckJFLElBQUlOLEtBQUtJLEVBQUUsQ0FBQyxJQUFPLENBQUE7d0NBQ2pCRyxRQUFRUCxLQUFLSSxFQUFFO29DQUNqQixDQUFBOzRCQUNGLENBQUE7b0JBQ0Ys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