{"version":3,"sources":["C:\\Users\\marti\\Desktop\\DESARROLLOSW\\BOILERPLATTE E-COMMERCE\\src\\components\\ui\\product-card-commercial.tsx"],"sourcesContent":["'use client'\n\nimport React from 'react'\nimport { cn } from '@/lib/core/utils'\nimport { Heart, Eye, Star, ShoppingCart, AlertCircle } from 'lucide-react'\nimport { ShopDetailModal } from '@/components/ShopDetails/ShopDetailModal'\n\n// Verificar que Framer Motion esté disponible\nconst isFramerMotionAvailable = false // Deshabilitado para usar fallbacks CSS\n\n// Componentes fallback para cuando Framer Motion no esté disponible\nconst MotionDiv = 'div'\nconst MotionButton = 'button'\n\nexport interface CommercialProductCardProps extends React.HTMLAttributes<HTMLDivElement> {\n  image?: string\n  title?: string\n  brand?: string\n  price?: number\n  originalPrice?: number\n  discount?: string\n  isNew?: boolean\n  cta?: string\n  stock?: number\n  productId?: number | string\n  onAddToCart?: () => void\n  showCartAnimation?: boolean\n  // Información de cuotas\n  installments?: {\n    quantity: number\n    amount: number\n    interestFree?: boolean\n  }\n  // Información de envío\n  freeShipping?: boolean\n  shippingText?: string\n  deliveryLocation?: string\n}\n\nconst CommercialProductCard = React.forwardRef<HTMLDivElement, CommercialProductCardProps>(\n  (\n    {\n      className,\n      image,\n      title,\n      brand,\n      price,\n      originalPrice,\n      discount,\n      isNew = false,\n      cta = 'Agregar al carrito',\n      stock = 0,\n      productId,\n      onAddToCart,\n      showCartAnimation = true,\n      installments,\n      freeShipping = false,\n      shippingText,\n      deliveryLocation,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [isAddingToCart, setIsAddingToCart] = React.useState(false)\n    const [isHovered, setIsHovered] = React.useState(false)\n    const [isWishlisted, setIsWishlisted] = React.useState(false)\n    const [showQuickActions, setShowQuickActions] = React.useState(false)\n    const [showShopDetailModal, setShowShopDetailModal] = React.useState(false)\n\n    // Función para abrir el modal\n    const handleOpenModal = React.useCallback(() => {\n      setShowShopDetailModal(true)\n    }, [])\n\n    // Función para manejar el clic en el card\n    const handleCardClick = React.useCallback(\n      (e: React.MouseEvent) => {\n        // Evitar que se abra el modal si se hace clic en el botón de agregar al carrito\n        if ((e.target as HTMLElement).closest('[data-testid=\"add-to-cart\"]')) {\n          return\n        }\n        // Evitar propagación de eventos que puedan interferir con el modal\n        e.preventDefault()\n        e.stopPropagation()\n        handleOpenModal()\n      },\n      [handleOpenModal]\n    )\n\n    const handleAddToCart = React.useCallback(\n      async (e?: React.MouseEvent) => {\n        if (e) {\n          e.stopPropagation() // Evitar que se propague al card\n        }\n\n        if (!onAddToCart || isAddingToCart || stock === 0) return\n\n        if (showCartAnimation) {\n          setIsAddingToCart(true)\n          setTimeout(() => setIsAddingToCart(false), 1000)\n        }\n\n        try {\n          await onAddToCart()\n          // También abrir el modal después de agregar al carrito\n          handleOpenModal()\n        } catch (error) {\n          console.error('Error al agregar al carrito:', error)\n        }\n      },\n      [onAddToCart, isAddingToCart, stock, showCartAnimation, handleOpenModal]\n    )\n\n    // Calcular si mostrar envío gratis automáticamente\n    const shouldShowFreeShipping = freeShipping || (price && price >= 15000)\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          // Mobile-first: diseño compacto para 2 columnas\n          'relative rounded-xl bg-white shadow-md flex flex-col w-full cursor-pointer overflow-hidden',\n          // Mobile: más compacto\n          'h-[280px] sm:h-[320px]',\n          // Tablet y desktop: tamaño completo\n          'md:h-[400px] lg:h-[450px]',\n          'md:rounded-2xl',\n          'transition-all duration-200 ease-out hover:scale-[1.02] hover:shadow-xl',\n          'transform-gpu will-change-transform',\n          className\n        )}\n        data-testid='product-card'\n        data-testid-commercial='commercial-product-card'\n        style={{\n          transformOrigin: 'center',\n          transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n          transform: isHovered ? 'scale(1.02)' : 'scale(1)',\n          boxShadow: isHovered ? '0 10px 25px rgba(0,0,0,0.1)' : '0 2px 8px rgba(0,0,0,0.1)',\n        }}\n        onMouseEnter={() => {\n          setIsHovered(true)\n          setShowQuickActions(true)\n        }}\n        onMouseLeave={() => {\n          setIsHovered(false)\n          setShowQuickActions(false)\n        }}\n        onClick={handleCardClick}\n        {...props}\n      >\n        {/* Contenedor de imagen completa con degradado - Responsive */}\n        <div className='relative w-full flex justify-center items-center overflow-hidden rounded-t-xl mb-2 md:mb-3 flex-1'>\n          {image ? (\n            <img\n              src={image}\n              alt={title || 'Producto'}\n              className='object-contain w-full h-full scale-110 z-0'\n              onError={e => {\n                const target = e.target as HTMLImageElement\n                target.src = '/images/products/placeholder.svg'\n              }}\n            />\n          ) : (\n            <div className='flex items-center justify-center w-full h-full z-0'>\n              <img\n                src='/images/products/placeholder.svg'\n                alt='Sin imagen'\n                className='w-64 h-64 opacity-60'\n              />\n            </div>\n          )}\n\n          {/* Degradado suave hacia blanco en la parte inferior - Responsive */}\n          <div className='absolute bottom-0 left-0 right-0 h-12 md:h-20 bg-gradient-to-t from-white via-white/80 to-transparent z-10 pointer-events-none' />\n\n          {/* Quick Actions eliminados - Ya no se muestran los botones de wishlist y quick view */}\n        </div>\n\n        {/* Badge \"Nuevo\" en esquina superior derecha - Responsive */}\n        {isNew && (\n          <span\n            className='absolute top-2 right-2 md:top-3 md:right-3 text-xs font-bold px-1.5 py-0.5 md:px-2 md:py-1 rounded z-30 shadow'\n            style={{ backgroundColor: '#FFD600', color: '#EA5A17' }}\n          >\n            Nuevo\n          </span>\n        )}\n\n        {/* Badge de descuento compacto en esquina superior izquierda - Responsive */}\n        {discount && (\n          <div className='absolute top-2 left-2 md:top-3 md:left-3 z-30'>\n            <div\n              className='text-white text-xs font-bold px-1.5 py-0.5 md:px-2 md:py-1 rounded-t'\n              style={{ backgroundColor: '#EA5A17' }}\n            >\n              {discount}\n            </div>\n            <div\n              className='bg-white text-xs font-semibold px-1.5 py-0.5 md:px-2 md:py-1 rounded-b shadow-sm text-left leading-none'\n              style={{ color: '#EA5A17' }}\n            >\n              <div>Descuento</div>\n              <div>especial</div>\n            </div>\n          </div>\n        )}\n\n        {/* Content con transición suave - Responsive */}\n        <div className='relative z-20 text-left p-2 md:p-4 bg-white -mt-2 md:-mt-3 flex-shrink-0'>\n          {/* Marca del producto - Responsive */}\n          {brand && (\n            <div className='text-xs md:text-sm uppercase text-gray-600 font-semibold tracking-wide drop-shadow-sm'>\n              {brand}\n            </div>\n          )}\n\n          {/* Título del producto - Con mejor contraste y responsive */}\n          <h3 className='font-bold text-gray-900 text-sm md:text-lg drop-shadow-sm line-clamp-2 leading-tight mb-1 md:mb-2'>\n            {title}\n          </h3>\n\n          {/* Precios - Optimizados para el gradiente y responsive */}\n          <div className='flex flex-col items-start space-y-1'>\n            {/* Precios en línea horizontal - Responsive */}\n            <div className='flex items-center gap-1 md:gap-2'>\n              {/* Precio actual - Grande y destacado, responsive */}\n              <div\n                className='text-lg md:text-2xl font-bold drop-shadow-sm'\n                style={{ color: '#EA5A17' }}\n              >\n                ${price?.toLocaleString('es-AR') || '0'}\n              </div>\n\n              {/* Precio anterior tachado - Responsive */}\n              {originalPrice && originalPrice > (price || 0) && (\n                <div className='text-gray-500 line-through text-xs md:text-sm drop-shadow-sm'>\n                  ${originalPrice.toLocaleString('es-AR')}\n                </div>\n              )}\n            </div>\n\n            {/* Cuotas en verde más oscuro - Responsive */}\n            {installments && (\n              <div className='text-green-800 text-xs md:text-sm font-medium drop-shadow-sm'>\n                {installments.quantity}x de ${installments.amount.toLocaleString('es-AR')}\n                {installments.interestFree ? ' sin interés' : ''}\n              </div>\n            )}\n          </div>\n\n          {/* Badge de envío gratis - Compacto y responsive */}\n          {shouldShowFreeShipping && (\n            <div className='flex justify-start mt-1 md:mt-2'>\n              <img\n                src='/images/icons/icon-envio.svg'\n                alt='Envío gratis'\n                className='h-6 md:h-10 w-auto object-contain drop-shadow-sm'\n              />\n            </div>\n          )}\n\n          {/* Botón \"Agregar al carrito\" - Animado y responsive */}\n          <div className='w-full mt-2 md:mt-3'>\n            {onAddToCart && (\n              <button\n                onClick={handleAddToCart}\n                disabled={isAddingToCart || stock === 0}\n                data-testid='add-to-cart'\n                data-testid-btn='add-to-cart-btn'\n                className={cn(\n                  'w-full py-2 md:py-3 rounded-lg md:rounded-xl text-center shadow-md font-semibold flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base relative overflow-hidden',\n                  'transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] transform-gpu will-change-transform',\n                  stock === 0\n                    ? 'bg-gray-200 text-gray-500 cursor-not-allowed'\n                    : 'bg-yellow-400 hover:bg-yellow-500 text-[#EA5A17]'\n                )}\n                style={{\n                  backgroundColor: stock !== 0 ? '#facc15' : undefined,\n                  transformOrigin: 'center',\n                }}\n              >\n                {isAddingToCart ? (\n                  <div className='flex items-center justify-center gap-2'>\n                    <div className='w-4 h-4 border-2 border-[#EA5A17] border-t-transparent rounded-full animate-spin' />\n                    <span>Agregando...</span>\n                  </div>\n                ) : stock === 0 ? (\n                  <>\n                    <AlertCircle className='w-4 h-4' />\n                    <span>Sin stock</span>\n                  </>\n                ) : (\n                  <>\n                    <ShoppingCart className='w-4 h-4' />\n                    <span>{cta}</span>\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {children}\n\n        {/* Shop Detail Modal */}\n        {showShopDetailModal && (\n          <ShopDetailModal\n            open={showShopDetailModal}\n            onOpenChange={setShowShopDetailModal}\n            product={{\n              id: String(productId || ''),\n              name: title || '',\n              price: price || 0,\n              originalPrice,\n              discount,\n              brand: brand || '',\n              category: '',\n              description: '',\n              images: image ? [image] : [],\n              stock: stock || 0,\n              isNew: isNew,\n              rating: 0,\n              reviews: 0,\n              colors: undefined, // Usará los colores por defecto del sistema\n              capacities: [],\n            }}\n            onAddToCart={(productData, variants) => {\n              console.log('Agregando al carrito:', productData, variants)\n              if (onAddToCart) {\n                onAddToCart()\n              }\n            }}\n          />\n        )}\n      </div>\n    )\n  }\n)\n\nCommercialProductCard.displayName = 'CommercialProductCard'\n\nexport { CommercialProductCard }\n"],"names":["CommercialProductCard","isFramerMotionAvailable","MotionDiv","MotionButton","React","forwardRef","className","image","title","brand","price","originalPrice","discount","isNew","cta","stock","productId","onAddToCart","showCartAnimation","installments","freeShipping","shippingText","deliveryLocation","children","props","ref","isAddingToCart","setIsAddingToCart","useState","isHovered","setIsHovered","isWishlisted","setIsWishlisted","showQuickActions","setShowQuickActions","showShopDetailModal","setShowShopDetailModal","handleOpenModal","useCallback","handleCardClick","e","target","closest","preventDefault","stopPropagation","handleAddToCart","setTimeout","error","console","shouldShowFreeShipping","div","cn","data-testid","data-testid-commercial","style","transformOrigin","transition","transform","boxShadow","onMouseEnter","onMouseLeave","onClick","img","src","alt","onError","span","backgroundColor","color","h3","toLocaleString","quantity","amount","interestFree","button","disabled","data-testid-btn","undefined","AlertCircle","ShoppingCart","ShopDetailModal","open","onOpenChange","product","id","String","name","category","description","images","rating","reviews","colors","capacities","productData","variants","log","displayName"],"mappings":"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"}