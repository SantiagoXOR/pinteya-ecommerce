3fdc39ce87eb6aabda0ff4d3055702fe
/**
 * AuthSection Enterprise Test - Versión NextAuth
 * Enfocado en validar la nueva estructura NextAuth sin dependencias Clerk
 */ "use strict";
// Mock NextAuth
jest.mock('next-auth/react', ()=>({
        useSession: jest.fn(),
        signIn: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _react2 = require("next-auth/react");
const _AuthSection = /*#__PURE__*/ _interop_require_default(require("../AuthSection"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockUseSession = _react2.useSession;
const mockSignIn = _react2.signIn;
// Mock user data
const mockUser = {
    id: 'user_123',
    name: 'Juan Pérez',
    email: 'juan@example.com'
};
describe('AuthSection Enterprise - NextAuth Structure', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Usuario no autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe renderizar botón de Google sign in', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('bg-white/20', 'hover:bg-white/30');
        });
        it('debe mostrar SVG de Google en el botón', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            expect(svg).toBeInTheDocument();
            expect(svg).toHaveClass('w-5', 'h-5');
        });
        it('debe llamar signIn cuando se hace click', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockSignIn).toHaveBeenCalledWith('google');
        });
        it('debe tener estilos correctos para botón translúcido', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('backdrop-blur-sm', 'border-2', 'border-white/30', 'rounded-full', 'shadow-lg');
        });
    });
    describe('Usuario autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar enlace de admin cuando está autenticado', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toBeInTheDocument();
            expect(adminLink).toHaveAttribute('href', '/admin');
        });
        it('debe mostrar avatar del usuario', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const avatar = _react1.screen.getByText('J') // Primera letra de Juan
            ;
            expect(avatar).toBeInTheDocument();
            // Verificar que tiene un contenedor padre
            expect(avatar.parentElement).toBeInTheDocument();
        });
        it('debe tener botón admin con estilos correctos', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminLink = _react1.screen.getByRole('link');
            expect(adminLink).toHaveClass('bg-orange-600', 'hover:bg-orange-700', 'text-white');
        });
        it('debe mostrar texto Admin en desktop', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const adminText = _react1.screen.getByText('Admin');
            expect(adminText).toBeInTheDocument();
        });
    });
    describe('Estado de carga', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'loading'
            });
        });
        it('debe mostrar skeleton de carga', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const skeleton = _react1.screen.getByText((content, element)=>{
                return element?.classList.contains('animate-pulse') || false;
            });
            expect(skeleton).toBeInTheDocument();
        });
    });
    describe('Variantes del componente', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe renderizar variante mobile correctamente', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-110');
        });
        it('debe renderizar variante topbar con texto', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const button = _react1.screen.getByText('Iniciar Sesión');
            expect(button).toBeInTheDocument();
            expect(button).toHaveClass('text-gray-800');
        });
        it('debe renderizar variante default con efectos', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "default"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('hover:scale-105');
        });
    });
    describe('Variante mobile autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar botón admin y avatar en mobile', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "mobile"
            }));
            const adminLink = _react1.screen.getByRole('link');
            const avatar = _react1.screen.getByText('J');
            expect(adminLink).toHaveAttribute('href', '/admin');
            expect(avatar).toBeInTheDocument();
        });
    });
    describe('Variante topbar autenticado', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: {
                    user: mockUser
                },
                status: 'authenticated'
            });
        });
        it('debe mostrar solo avatar en topbar', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {
                variant: "topbar"
            }));
            const avatar = _react1.screen.getByText('J');
            expect(avatar).toBeInTheDocument();
            // Verificar que tiene un contenedor padre apropiado
            expect(avatar.parentElement).toBeInTheDocument();
        });
    });
    describe('Accesibilidad básica', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe ser accesible por teclado', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            button.focus();
            expect(document.activeElement).toBe(button);
        });
        it('debe tener rol de botón correcto', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeInTheDocument();
        });
    });
    describe('Colores de Google branding', ()=>{
        beforeEach(()=>{
            mockUseSession.mockReturnValue({
                data: null,
                status: 'unauthenticated'
            });
        });
        it('debe tener colores correctos de Google en SVG', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthSection.default, {}));
            const svg = _react1.screen.getByRole('button').querySelector('svg');
            const paths = svg?.querySelectorAll('path');
            expect(paths).toHaveLength(4);
            const colors = Array.from(paths || []).map((path)=>path.getAttribute('fill'));
            expect(colors).toContain('#4285F4'); // Google Blue
            expect(colors).toContain('#34A853'); // Google Green
            expect(colors).toContain('#FBBC05'); // Google Yellow
            expect(colors).toContain('#EA4335'); // Google Red
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFydGlcXERlc2t0b3BcXERFU0FSUk9MTE9TV1xcQk9JTEVSUExBVFRFIEUtQ09NTUVSQ0VcXHNyY1xcY29tcG9uZW50c1xcSGVhZGVyXFxfX3Rlc3RzX19cXEF1dGhTZWN0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBdXRoU2VjdGlvbiBFbnRlcnByaXNlIFRlc3QgLSBWZXJzacOzbiBOZXh0QXV0aFxyXG4gKiBFbmZvY2FkbyBlbiB2YWxpZGFyIGxhIG51ZXZhIGVzdHJ1Y3R1cmEgTmV4dEF1dGggc2luIGRlcGVuZGVuY2lhcyBDbGVya1xyXG4gKi9cclxuXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXHJcbmltcG9ydCB7IHVzZVNlc3Npb24sIHNpZ25JbiB9IGZyb20gJ25leHQtYXV0aC9yZWFjdCdcclxuaW1wb3J0IEF1dGhTZWN0aW9uIGZyb20gJy4uL0F1dGhTZWN0aW9uJ1xyXG5cclxuLy8gTW9jayBOZXh0QXV0aFxyXG5qZXN0Lm1vY2soJ25leHQtYXV0aC9yZWFjdCcsICgpID0+ICh7XHJcbiAgdXNlU2Vzc2lvbjogamVzdC5mbigpLFxyXG4gIHNpZ25JbjogamVzdC5mbigpXHJcbn0pKVxyXG5cclxuY29uc3QgbW9ja1VzZVNlc3Npb24gPSB1c2VTZXNzaW9uIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVNlc3Npb24+XHJcbmNvbnN0IG1vY2tTaWduSW4gPSBzaWduSW4gYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2Ygc2lnbkluPlxyXG5cclxuLy8gTW9jayB1c2VyIGRhdGFcclxuY29uc3QgbW9ja1VzZXIgPSB7XHJcbiAgaWQ6ICd1c2VyXzEyMycsXHJcbiAgbmFtZTogJ0p1YW4gUMOpcmV6JyxcclxuICBlbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbn1cclxuXHJcbmRlc2NyaWJlKCdBdXRoU2VjdGlvbiBFbnRlcnByaXNlIC0gTmV4dEF1dGggU3RydWN0dXJlJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnVXN1YXJpbyBubyBhdXRlbnRpY2FkbycsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJ1xyXG4gICAgICB9IGFzIGFueSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RlYmUgcmVuZGVyaXphciBib3TDs24gZGUgR29vZ2xlIHNpZ24gaW4nLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxyXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdiZy13aGl0ZS8yMCcsICdob3ZlcjpiZy13aGl0ZS8zMCcpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIG1vc3RyYXIgU1ZHIGRlIEdvb2dsZSBlbiBlbCBib3TDs24nLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdmcgPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKS5xdWVyeVNlbGVjdG9yKCdzdmcnKVxyXG4gICAgICBleHBlY3Qoc3ZnKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIGV4cGVjdChzdmcpLnRvSGF2ZUNsYXNzKCd3LTUnLCAnaC01JylcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RlYmUgbGxhbWFyIHNpZ25JbiBjdWFuZG8gc2UgaGFjZSBjbGljaycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXHJcbiAgICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobW9ja1NpZ25JbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2dvb2dsZScpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHRlbmVyIGVzdGlsb3MgY29ycmVjdG9zIHBhcmEgYm90w7NuIHRyYW5zbMO6Y2lkbycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpXHJcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKFxyXG4gICAgICAgICdiYWNrZHJvcC1ibHVyLXNtJyxcclxuICAgICAgICAnYm9yZGVyLTInLFxyXG4gICAgICAgICdib3JkZXItd2hpdGUvMzAnLFxyXG4gICAgICAgICdyb3VuZGVkLWZ1bGwnLFxyXG4gICAgICAgICdzaGFkb3ctbGcnXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ1VzdWFyaW8gYXV0ZW50aWNhZG8nLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiB7IHVzZXI6IG1vY2tVc2VyIH0sXHJcbiAgICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCdcclxuICAgICAgfSBhcyBhbnkpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIG1vc3RyYXIgZW5sYWNlIGRlIGFkbWluIGN1YW5kbyBlc3TDoSBhdXRlbnRpY2FkbycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFkbWluTGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnKVxyXG4gICAgICBleHBlY3QoYWRtaW5MaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIGV4cGVjdChhZG1pbkxpbmspLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvYWRtaW4nKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnZGViZSBtb3N0cmFyIGF2YXRhciBkZWwgdXN1YXJpbycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcclxuXHJcbiAgICAgIGNvbnN0IGF2YXRhciA9IHNjcmVlbi5nZXRCeVRleHQoJ0onKSAvLyBQcmltZXJhIGxldHJhIGRlIEp1YW5cclxuICAgICAgZXhwZWN0KGF2YXRhcikudG9CZUluVGhlRG9jdW1lbnQoKVxyXG4gICAgICAvLyBWZXJpZmljYXIgcXVlIHRpZW5lIHVuIGNvbnRlbmVkb3IgcGFkcmVcclxuICAgICAgZXhwZWN0KGF2YXRhci5wYXJlbnRFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHRlbmVyIGJvdMOzbiBhZG1pbiBjb24gZXN0aWxvcyBjb3JyZWN0b3MnLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBhZG1pbkxpbmsgPSBzY3JlZW4uZ2V0QnlSb2xlKCdsaW5rJylcclxuICAgICAgZXhwZWN0KGFkbWluTGluaykudG9IYXZlQ2xhc3MoXHJcbiAgICAgICAgJ2JnLW9yYW5nZS02MDAnLFxyXG4gICAgICAgICdob3ZlcjpiZy1vcmFuZ2UtNzAwJyxcclxuICAgICAgICAndGV4dC13aGl0ZSdcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnZGViZSBtb3N0cmFyIHRleHRvIEFkbWluIGVuIGRlc2t0b3AnLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBhZG1pblRleHQgPSBzY3JlZW4uZ2V0QnlUZXh0KCdBZG1pbicpXHJcbiAgICAgIGV4cGVjdChhZG1pblRleHQpLnRvQmVJblRoZURvY3VtZW50KClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ0VzdGFkbyBkZSBjYXJnYScsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgc3RhdHVzOiAnbG9hZGluZydcclxuICAgICAgfSBhcyBhbnkpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIG1vc3RyYXIgc2tlbGV0b24gZGUgY2FyZ2EnLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBza2VsZXRvbiA9IHNjcmVlbi5nZXRCeVRleHQoKGNvbnRlbnQsIGVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gZWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLXB1bHNlJykgfHwgZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgZXhwZWN0KHNrZWxldG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdWYXJpYW50ZXMgZGVsIGNvbXBvbmVudGUnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCdcclxuICAgICAgfSBhcyBhbnkpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHJlbmRlcml6YXIgdmFyaWFudGUgbW9iaWxlIGNvcnJlY3RhbWVudGUnLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gdmFyaWFudD1cIm1vYmlsZVwiIC8+KVxyXG4gICAgICBcclxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJylcclxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2hvdmVyOnNjYWxlLTExMCcpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHJlbmRlcml6YXIgdmFyaWFudGUgdG9wYmFyIGNvbiB0ZXh0bycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiB2YXJpYW50PVwidG9wYmFyXCIgLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdJbmljaWFyIFNlc2nDs24nKVxyXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCd0ZXh0LWdyYXktODAwJylcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RlYmUgcmVuZGVyaXphciB2YXJpYW50ZSBkZWZhdWx0IGNvbiBlZmVjdG9zJywgKCkgPT4ge1xyXG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJkZWZhdWx0XCIgLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxyXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygnaG92ZXI6c2NhbGUtMTA1JylcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ1ZhcmlhbnRlIG1vYmlsZSBhdXRlbnRpY2FkbycsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IHsgdXNlcjogbW9ja1VzZXIgfSxcclxuICAgICAgICBzdGF0dXM6ICdhdXRoZW50aWNhdGVkJ1xyXG4gICAgICB9IGFzIGFueSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RlYmUgbW9zdHJhciBib3TDs24gYWRtaW4geSBhdmF0YXIgZW4gbW9iaWxlJywgKCkgPT4ge1xyXG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJtb2JpbGVcIiAvPilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFkbWluTGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnKVxyXG4gICAgICBjb25zdCBhdmF0YXIgPSBzY3JlZW4uZ2V0QnlUZXh0KCdKJylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChhZG1pbkxpbmspLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvYWRtaW4nKVxyXG4gICAgICBleHBlY3QoYXZhdGFyKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdWYXJpYW50ZSB0b3BiYXIgYXV0ZW50aWNhZG8nLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiB7IHVzZXI6IG1vY2tVc2VyIH0sXHJcbiAgICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCdcclxuICAgICAgfSBhcyBhbnkpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIG1vc3RyYXIgc29sbyBhdmF0YXIgZW4gdG9wYmFyJywgKCkgPT4ge1xyXG4gICAgICByZW5kZXIoPEF1dGhTZWN0aW9uIHZhcmlhbnQ9XCJ0b3BiYXJcIiAvPilcclxuXHJcbiAgICAgIGNvbnN0IGF2YXRhciA9IHNjcmVlbi5nZXRCeVRleHQoJ0onKVxyXG4gICAgICBleHBlY3QoYXZhdGFyKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgdGllbmUgdW4gY29udGVuZWRvciBwYWRyZSBhcHJvcGlhZG9cclxuICAgICAgZXhwZWN0KGF2YXRhci5wYXJlbnRFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdBY2Nlc2liaWxpZGFkIGLDoXNpY2EnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1VzZVNlc3Npb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgIHN0YXR1czogJ3VuYXV0aGVudGljYXRlZCdcclxuICAgICAgfSBhcyBhbnkpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHNlciBhY2Nlc2libGUgcG9yIHRlY2xhZG8nLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxyXG4gICAgICBidXR0b24uZm9jdXMoKVxyXG4gICAgICBleHBlY3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkudG9CZShidXR0b24pXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdkZWJlIHRlbmVyIHJvbCBkZSBib3TDs24gY29ycmVjdG8nLCAoKSA9PiB7XHJcbiAgICAgIHJlbmRlcig8QXV0aFNlY3Rpb24gLz4pXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKVxyXG4gICAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdDb2xvcmVzIGRlIEdvb2dsZSBicmFuZGluZycsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrVXNlU2Vzc2lvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJ1xyXG4gICAgICB9IGFzIGFueSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RlYmUgdGVuZXIgY29sb3JlcyBjb3JyZWN0b3MgZGUgR29vZ2xlIGVuIFNWRycsICgpID0+IHtcclxuICAgICAgcmVuZGVyKDxBdXRoU2VjdGlvbiAvPilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN2ZyA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpXHJcbiAgICAgIGNvbnN0IHBhdGhzID0gc3ZnPy5xdWVyeVNlbGVjdG9yQWxsKCdwYXRoJylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChwYXRocykudG9IYXZlTGVuZ3RoKDQpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjb2xvcnMgPSBBcnJheS5mcm9tKHBhdGhzIHx8IFtdKS5tYXAocGF0aCA9PiBwYXRoLmdldEF0dHJpYnV0ZSgnZmlsbCcpKVxyXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyM0Mjg1RjQnKSAvLyBHb29nbGUgQmx1ZVxyXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyMzNEE4NTMnKSAvLyBHb29nbGUgR3JlZW5cclxuICAgICAgZXhwZWN0KGNvbG9ycykudG9Db250YWluKCcjRkJCQzA1JykgLy8gR29vZ2xlIFllbGxvd1xyXG4gICAgICBleHBlY3QoY29sb3JzKS50b0NvbnRhaW4oJyNFQTQzMzUnKSAvLyBHb29nbGUgUmVkXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVNlc3Npb24iLCJmbiIsInNpZ25JbiIsIm1vY2tVc2VTZXNzaW9uIiwibW9ja1NpZ25JbiIsIm1vY2tVc2VyIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwiZGF0YSIsInN0YXR1cyIsIml0IiwicmVuZGVyIiwiQXV0aFNlY3Rpb24iLCJidXR0b24iLCJzY3JlZW4iLCJnZXRCeVJvbGUiLCJleHBlY3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRvSGF2ZUNsYXNzIiwic3ZnIiwicXVlcnlTZWxlY3RvciIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ1c2VyIiwiYWRtaW5MaW5rIiwidG9IYXZlQXR0cmlidXRlIiwiYXZhdGFyIiwiZ2V0QnlUZXh0IiwicGFyZW50RWxlbWVudCIsImFkbWluVGV4dCIsInNrZWxldG9uIiwiY29udGVudCIsImVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInZhcmlhbnQiLCJmb2N1cyIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsInRvQmUiLCJwYXRocyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b0hhdmVMZW5ndGgiLCJjb2xvcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJwYXRoIiwiZ2V0QXR0cmlidXRlIiwidG9Db250YWluIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7QUFPRCxnQkFBZ0I7QUFDaEJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxZQUFZRixLQUFLRyxFQUFFO1FBQ25CQyxRQUFRSixLQUFLRyxFQUFFO0lBQ2pCLENBQUE7Ozs7OzhEQVRrQjt3QkFDd0I7d0JBQ1A7b0VBQ1g7Ozs7OztBQVF4QixNQUFNRSxpQkFBaUJILGtCQUFVO0FBQ2pDLE1BQU1JLGFBQWFGLGNBQU07QUFFekIsaUJBQWlCO0FBQ2pCLE1BQU1HLFdBQVc7SUFDZkMsSUFBSTtJQUNKQyxNQUFN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