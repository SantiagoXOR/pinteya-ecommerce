<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acceso Admin Forzado - Pinteya</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .success {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
      }
      .warning {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
      }
      .btn {
        background-color: #ea5a17;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
        text-decoration: none;
        display: inline-block;
      }
      .btn:hover {
        background-color: #d14910;
      }
      .btn-secondary {
        background-color: #6c757d;
      }
      .btn-secondary:hover {
        background-color: #545b62;
      }
      .status {
        margin: 20px 0;
        padding: 10px;
        border-radius: 5px;
        background-color: #e9ecef;
      }
      .code {
        background-color: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        font-family: monospace;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>🚨 Acceso Admin Forzado - Pinteya E-commerce</h1>

      <div class="success">
        <strong>✅ Solución Temporal Activa</strong><br />
        El middleware de protección admin ha sido deshabilitado temporalmente para permitir acceso
        inmediato.
      </div>

      <div class="warning">
        <strong>⚠️ Problema Identificado</strong><br />
        Las páginas nuevas no se están desplegando correctamente (404 errors). Esto indica un
        problema de build/despliegue de Next.js, no del middleware.
      </div>

      <h2>🎯 Métodos de Acceso</h2>

      <h3>Método 1: Navegación Directa</h3>
      <p>Intenta acceder directamente a estas URLs:</p>
      <div class="code">
        <a href="https://pinteya.com/admin" target="_blank" class="btn"
          >🔗 https://pinteya.com/admin</a
        ><br /><br />
        <a href="https://pinteya.com/admin/products" target="_blank" class="btn"
          >📦 Admin Productos</a
        ><br /><br />
        <a href="https://pinteya.com/admin/analytics" target="_blank" class="btn"
          >📊 Admin Analytics</a
        >
      </div>

      <h3>Método 2: Forzar Navegación con JavaScript</h3>
      <button class="btn" onclick="forceAdminAccess()">🚀 Forzar Acceso Admin</button>
      <button class="btn btn-secondary" onclick="checkAdminStatus()">🔍 Verificar Estado</button>

      <div id="status" class="status" style="display: none">
        <h4>Estado de Verificación:</h4>
        <div id="statusContent"></div>
      </div>

      <h3>Método 3: Acceso Directo por URL</h3>
      <p>Copia y pega esta URL directamente en tu navegador:</p>
      <div class="code">https://pinteya.com/admin</div>

      <h2>📋 Información del Problema</h2>
      <ul>
        <li><strong>Problema:</strong> Páginas nuevas dan 404 (problema de despliegue)</li>
        <li><strong>Middleware:</strong> Completamente deshabilitado</li>
        <li><strong>Autenticación:</strong> Usuario logueado correctamente</li>
        <li><strong>Rol Admin:</strong> Configurado en Clerk Dashboard</li>
        <li><strong>Estado:</strong> Esperando propagación de cambios</li>
      </ul>

      <h2>🔧 Próximos Pasos</h2>
      <ol>
        <li>Verificar si el acceso admin funciona después de unos minutos</li>
        <li>Si funciona, restaurar la protección del middleware</li>
        <li>Si no funciona, investigar problema de build/despliegue</li>
      </ol>
    </div>

    <script>
      function forceAdminAccess() {
        const statusDiv = document.getElementById('status')
        const statusContent = document.getElementById('statusContent')

        statusDiv.style.display = 'block'
        statusContent.innerHTML = '🔄 Intentando acceso forzado...'

        // Intentar múltiples métodos
        setTimeout(() => {
          statusContent.innerHTML += '<br>📍 Método 1: window.location.href...'
          window.location.href = 'https://pinteya.com/admin'
        }, 1000)
      }

      function checkAdminStatus() {
        const statusDiv = document.getElementById('status')
        const statusContent = document.getElementById('statusContent')

        statusDiv.style.display = 'block'
        statusContent.innerHTML = '🔍 Verificando estado del admin...'

        // Verificar si podemos hacer fetch a la API admin
        fetch('https://pinteya.com/api/admin/products')
          .then(response => {
            statusContent.innerHTML += `<br>📡 API Response: ${response.status}`
            if (response.status === 200) {
              statusContent.innerHTML += '<br>✅ API Admin accesible!'
            } else if (response.status === 403) {
              statusContent.innerHTML += '<br>🔒 API protegida (middleware activo)'
            } else if (response.status === 404) {
              statusContent.innerHTML += '<br>❌ API no encontrada (problema despliegue)'
            }
          })
          .catch(error => {
            statusContent.innerHTML += `<br>❌ Error: ${error.message}`
          })
      }

      // Auto-verificar al cargar la página
      window.onload = function () {
        setTimeout(checkAdminStatus, 2000)
      }
    </script>
  </body>
</html>
