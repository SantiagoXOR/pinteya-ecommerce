@import './variables.css';
@import '../../styles/checkout-transition.css';
@import '../../styles/hero-carousel.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply font-euclid-circular-a font-normal text-base text-dark-3 relative z-1 bg-white;
    @apply bg-background text-foreground;
    /* Header height: TopBar (~32px) + Main (~84px) = ~116px, using 120px for optimal spacing */
    padding-top: 110px; /* Ajustado para mobile */
  }

  /* Ajuste específico para desktop */
  @media (min-width: 1024px) {
    body {
      padding-top: 120px;
    }
  }
}

@layer components {
  .dropdown {
    @apply flex-col gap-0 min-w-max xl:w-[193px] mt-2 lg:mt-0 bg-white shadow-2 ease-in duration-200 py-2.5 rounded-md border border-gray-3;
  }

  .custom-search-input .prose {
    width: 100%;
  }

  .custom-search-input input {
    width: 100%;
    border: 2px solid #fdba74; /* orange-300 */
    border-radius: 0.5rem; /* rounded-lg */
    padding-left: 1rem; /* pl-4 */
    padding-right: 3rem; /* pr-12 */
    padding-top: 0.625rem; /* py-2.5 */
    padding-bottom: 0.625rem; /* py-2.5 */
    color: #ea580c; /* text-blaze-orange-600 */
    font-size: 0.875rem; /* text-sm */
    font-weight: 500; /* font-medium */
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* shadow-sm */
    transition: all 0.3s;
    background-color: transparent !important;
  }

  @media (min-width: 640px) {
    .custom-search-input input {
      font-size: 1rem; /* sm:text-base */
    }
  }

  .custom-search-input input:focus {
    border-color: #f97316; /* focus:border-orange-500 */
    box-shadow: 0 0 0 2px #fed7aa; /* focus:ring-2 focus:ring-orange-200 */
  }

  .custom-search-input input:hover {
    border-color: #fb923c; /* hover:border-orange-400 */
  }

  /* Dropdown específico para búsqueda */
  .search-dropdown {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 2000 !important;
    margin-top: 4px !important;
    background-color: #fff3c5 !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
    max-height: 384px !important;
    overflow-y: auto !important;
    min-height: 100px !important;
    /* Forzar que no se corte */
    clip: unset !important;
    clip-path: none !important;
    contain: none !important;
  }

  /* Asegurar que el contenedor del dropdown no limite */
  .search-focus-ring {
    position: relative;
    z-index: 1;
    /* Permitir que el dropdown se extienda fuera del contenedor */
    overflow: visible !important;
  }

  /* Contenedor de búsqueda sin limitaciones */
  .custom-search-input {
    position: relative;
    z-index: 1;
    overflow: visible !important;
  }
}

@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Clase específica para ocultar scrollbar en carrusel de categorías */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Header Animation Classes - Restored for Header functionality */
  .header-sticky-transition {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: linear-gradient(135deg, #ea5a17 0%, #f97316 100%);
  }

  .logo-sticky-scale {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .focus-ring:focus {
    outline: 2px solid #f27a1d;
    outline-offset: 2px;
    border-radius: 0.375rem;
  }

  .focus-ring:focus-visible {
    outline: 2px solid #f27a1d;
    outline-offset: 2px;
    border-radius: 0.375rem;
  }

  /* Mobile bottom navigation padding - TEMPORALMENTE DESACTIVADO */
  /* .mobile-bottom-nav-padding {
    padding-bottom: env(safe-area-inset-bottom);
  } */

  /* App content wrapper - Clase estática para evitar hydration mismatch */
  .app-content-wrapper {
    /* Sin padding adicional por ahora */
  }

  /* Floating button effect for cart */
  .floating-button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  .floating-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  /* Search focus ring - Fixed: Removed transform scale that created stacking context issues */
  .search-focus-ring:focus-within {
    box-shadow: 0 0 0 3px rgba(242, 122, 29, 0.1), 0 4px 12px rgba(242, 122, 29, 0.15);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    /* Removed transform: scale(1.01) to prevent dropdown clipping */
  }


}
